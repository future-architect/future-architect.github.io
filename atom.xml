<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Future Tech Blog - ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆ</title>
  
  <subtitle>ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼é–‹ç™ºè€…ãƒ–ãƒ­ã‚°</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://future-architect.github.io/"/>
  <updated>2020-02-13T01:38:31.258Z</updated>
  <id>https://future-architect.github.io/</id>
  
  <author>
    <name>Future Architect Consultants</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>GCPé€£è¼‰#6 Terraform Validatorã‚’ä½¿ã£ã¦ã€GCPã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼ã®è‡ªå‹•ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã†</title>
    <link href="https://future-architect.github.io/articles/20200213/"/>
    <id>https://future-architect.github.io/articles/20200213/</id>
    <published>2020-02-13T01:26:28.000Z</published>
    <updated>2020-02-13T01:38:31.258Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCPé›†ä¸­é€£è¼‰</a>ã®6å›ç›®ã§ã™ã€‚ä»Šå›ã¯<strong>Terraform Validatorã‚’ä½¿ã£ã¦ã€çµ„ç¹”ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼ã®è‡ªå‹•ãƒã‚§ãƒƒã‚¯ã‚’ç¶™ç¶šçš„ã«è¡Œã†</strong>æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚ä½µã›ã¦ã€ãƒãƒªã‚·ãƒ¼ã‚’ã‚³ãƒ¼ãƒ‰ã¨ã—ã¦ç®¡ç†ã™ã‚‹æ–¹æ³•ã‚‚ç´¹ä»‹ã—ã¾ã™ã€‚<strong>Policy as code</strong> ã§ã™ã€‚ã‚‚ã¡ã‚ã‚“ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼ã®ã¿ã ã‘ã§ã¯ãªãã€å‘½åè¦å‰‡ã‚„ãƒªãƒ¼ã‚¸ãƒ§ãƒ³åˆ¶é™ãªã©ã‚‚æ‰±ãˆã¾ã™ã€‚</p><h1 id="Infrastructure-as-code-ç†æƒ³ã¨ç¾å®Ÿ"><a href="#Infrastructure-as-code-ç†æƒ³ã¨ç¾å®Ÿ" class="headerlink" title="Infrastructure as code ç†æƒ³ã¨ç¾å®Ÿ"></a>Infrastructure as code ç†æƒ³ã¨ç¾å®Ÿ</h1><p>Infrastructure as code (ä»¥ä¸‹ IaC)ã€ã“ã“æœ€è¿‘å¤§åˆ†ä¸€èˆ¬çš„ã«ãªã£ã¦ãã¾ã—ãŸã€‚å¼Šç¤¾ã§ã‚‚å¤§åŠã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯å°å…¥ã—ã¦ã„ã¾ã™ã€‚3å¹´å‰ã¨ã‹ã«å°å…¥ã™ã‚‹ãŸã‚ã«ä¸€è‹¦åŠ´ã—ã¦ã„ãŸæ™‚ä»£ãŒæ‡ã‹ã—ã„..<br>IaCãŒå½“ãŸã‚Šå‰ã«ãªã£ãŸä»Šã€ã‚¤ãƒ³ãƒ•ãƒ©ã®æ§‹æˆç®¡ç†ã¯ã‚‚ã†å•é¡Œãªã„ã‹ã¨ã„ã†ã¨ãã†ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚<strong>ç‰¹ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ•°ãŒã‚¹ã‚±ãƒ¼ãƒ«ã™ã‚‹å ´åˆ</strong>ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå•é¡ŒãŒç™ºç”Ÿã—ã¦ã—ã¾ã£ã¦ã„ã‚‹ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚</p><ul><li>å„ãƒãƒ¼ãƒ ã«æ¨©é™ã‚’å§”è­²ã—ã‚¤ãƒ³ãƒ•ãƒ©ã‚’ç®¡ç†ã—ã¦ã‚‚ã‚‰ã†ãŒã€çµ„ç¹”ã®ãƒãƒªã‚·ãƒ¼ã«åã—ãŸãƒªã‚½ãƒ¼ã‚¹ãŒä½œæˆã•ã‚Œã¦ã—ã¾ã†</li><li>ãã‚‚ãã‚‚çµ„ç¹”ã®ãƒãƒªã‚·ãƒ¼ãŒå®šç¾©ãƒ»æ˜æ–‡åŒ–ã§ãã¦ã„ãªã„</li><li>ã§ãã¦ã„ã¦ã‚‚å‘¨çŸ¥ã§ããªã„ã€å‘¨çŸ¥ã§ãã¦ã„ã¦ã‚‚ã€å®ˆã£ã¦ã‚‚ã‚‰ãˆãªã„</li></ul><p>ä¾‹ãˆã°ã€â€GCSã®ãƒã‚±ãƒƒãƒˆã‚’å…¨ä¸–ç•Œã«å…¬é–‹ã—ã¦ã—ã¾ã£ã¦ã„ã‚‹â€ ã¨ã„ã†èª¤ã£ãŸè¨­å®šã‚‚æœ¬ç•ªç’°å¢ƒã«ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã¦ã—ã¾ã†ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><img src="/images/20200213/photo_20200213_01.png"><p>GCPã ã‘ã§ã¯ãªãã€å¤šãã®ã‚¯ãƒ©ã‚¦ãƒ‰ç®¡ç†è€…ãŒåŒã˜ã‚ˆã†ãªæ‚©ã¿ã‚’æŠ±ãˆã¦ã„ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚ç§ã‚‚ãã®ä¸€äººã§ã™ã€‚å„ãƒãƒ¼ãƒ ã®é–‹ç™ºè€…ãŒã‚¯ãƒ©ã‚¦ãƒ‰ã‚¤ãƒ³ãƒ•ãƒ©ã«ç†ŸçŸ¥ã—ã¦ã„ã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã§ã¯ã€ã‚¯ãƒ©ã‚¦ãƒ‰ç®¡ç†è€…ãŒã™ã¹ã¦ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚Œã°ã‚ˆã„ã‹ã€ã„ã‚„ã„ã‚„ã€ãã‚Œã‚‚ç¾å®Ÿçš„ã§ã¯ãªã„ã€‚</p><p>IaCãŒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã‚„ã£ã¨åŒã˜åœŸä¿µã«ç«‹ã£ãŸä»Šã€åŒã˜ã <strong>CI(ç¶™ç¶šçš„ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³)</strong> ã®ä»•çµ„ã¿ãŒå¿…è¦ã«ãªã£ã¦ãã‚‹ã®ã¯ã€è‡ªç„¶ã®æµã‚Œã‹ã¨æ€ã„ã¾ã™ã€‚terraform fmtãŒã•ã‚Œã¦ã„ã‚‹ã‹ã€planãŒé€šã‚‹ã‹ã€ç­‰ã®ç°¡å˜ãªãƒã‚§ãƒƒã‚¯ã‚’ã‚„ã£ã¦ã„ã‚‹äººã¯å¤šã„ã¨æ€ã„ã¾ã™ãŒã€ãã‚Œã‚ˆã‚Šã‚‚é«˜åº¦ãªãƒã‚§ãƒƒã‚¯ã‚’è¡Œã†ä»•çµ„ã¿ãŒãªãç§ã‚‚æ–¹æ³•ã‚’æ¢ã—ã¦ãŠã‚Šã¾ã—ãŸã€‚</p><h1 id="Terraform-Validator-ã¨ã¯"><a href="#Terraform-Validator-ã¨ã¯" class="headerlink" title="Terraform Validator ã¨ã¯"></a>Terraform Validator ã¨ã¯</h1><p>ã“ã‚Œã‚’å®Ÿç¾ã™ã‚‹ã®ãŒã€ä»Šå›ç´¹ä»‹ã™ã‚‹ <strong>Terraform Validator</strong> ã§ã™ã€‚Terraform Validatorã¯ã€ <strong>terraformãŒapplyã•ã‚Œã‚‹å‰ã«ã€ã‚¤ãƒ³ãƒ•ãƒ©ã®ãƒªã‚½ãƒ¼ã‚¹è¨­å®šãŒå®šç¾©ã—ãŸãƒãƒªã‚·ãƒ¼ã«å¾“ã£ã¦ã„ã‚‹ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ãƒ„ãƒ¼ãƒ«</strong>ã§ã™ã€‚GCPã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã¨ã—ã¦å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚ <a href="https://github.com/GoogleCloudPlatform/terraform-validator" target="_blank" rel="noopener">GoogleCloudPlatform/terraform-validator</a></p><p>ä»¥ä¸‹ãŒæ¦‚è¦ã®å›³ã§ã™ã€‚</p><img src="/images/20200213/photo_20200213_02.png"><p>ä»•çµ„ã¿ã¯ã”ãå˜ç´”ã§ã™</p><ul><li>Policy ã‚’ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰(yaml)ã¨ã—ã¦å®šç¾©</li><li>Terraformã®planã®çµæœ(json)ã‚’ç”Ÿæˆ</li><li>Terraform Validatorã«èª­ã¿è¾¼ã¿ã•ã›ã€ãƒã‚§ãƒƒã‚¯çµæœã‚’å‡ºåŠ›</li></ul><p>ãƒãƒªã‚·ãƒ¼ã«åã—ãŸãƒªã‚½ãƒ¼ã‚¹ãŒterraformã§å®šç¾©ã•ã‚ŒãŸå ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ã« <code>Found Violations</code> ã¨å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚ (ä»¥ä¸‹ã®ã‚µãƒ³ãƒ—ãƒ«ã¯ã€GCSã®ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒè¨±å¯ã•ã‚Œã¦ã„ãªã„ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Sample</span></span><br><span class="line">$ terraform-validator validate --policy-path=<span class="variable">$&#123;POLICY_PATH&#125;</span> ./terraform.tfplan.json</span><br><span class="line">Found Violations:</span><br><span class="line">Constraint allow_some_storage_location on resource //storage.googleapis.com/validator-trial: //storage.googleapis.com/validator-trial is <span class="keyword">in</span> a disallowed location.</span><br></pre></td></tr></table></figure><h1 id="ãƒãƒ³ã‚ºã‚ªãƒ³"><a href="#ãƒãƒ³ã‚ºã‚ªãƒ³" class="headerlink" title="ãƒãƒ³ã‚ºã‚ªãƒ³"></a>ãƒãƒ³ã‚ºã‚ªãƒ³</h1><p>ã§ã¯ã•ã£ããã€å®Ÿéš›ã«è©¦ã—ã¦ã¿ã¾ã™ã€‚<strong>â€œGCSã®ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«åˆ¶é™ã‚’ã‹ã‘ã‚‹â€</strong> ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã§è©¦ã—ã¦ã¿ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆã‚’ç”¨æ„ã—ã€2ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã—ãŸã€‚</p><ul><li><code>storage_location.yaml</code> : (ãƒãƒªã‚·ãƒ¼ã‚’å®šç¾©ã™ã‚‹ã‚³ãƒ¼ãƒ‰)</li><li><code>main.tf</code> : (terraformã®ã‚³ãƒ¼ãƒ‰)</li></ul><img src="/images/20200213/photo_20200213_03.png"><h2 id="Terraform-Validator-ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"><a href="#Terraform-Validator-ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" class="headerlink" title="Terraform Validator ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"></a>Terraform Validator ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h2><p>ãƒã‚¤ãƒŠãƒªãƒ•ã‚¡ã‚¤ãƒ«ãŒGCSã§å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€æœ€æ–°ç‰ˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—é©å½“ãªãƒ‘ã‚¹ã«é…ç½®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ gsutil ls -r gs://terraform-validator/releases</span><br><span class="line">$ gsutil cp gs://terraform-validator/releases/2020-01-23/terraform-validator-linux-amd64 .</span><br><span class="line">$ mv terraform-validator-linux-amd64 terraform-validator-linux-amd64</span><br><span class="line">$ chmod 755 terraform-validator</span><br></pre></td></tr></table></figure><h2 id="Policyã‚’å®šç¾©"><a href="#Policyã‚’å®šç¾©" class="headerlink" title="Policyã‚’å®šç¾©"></a>Policyã‚’å®šç¾©</h2><p>Policyã‚’Git cloneã—ã€<code>POLICY_PATH</code> ã‚’å®šç¾©</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/forseti-security/policy-library.git</span><br><span class="line">$ <span class="built_in">export</span> POLICY_PATH=<span class="string">"/&lt;your_work_space&gt;/policy-library"</span></span><br></pre></td></tr></table></figure><p>Sampleã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ã—ã€ãƒãƒªã‚·ãƒ¼ã‚’å®šç¾©ã—ã¾ã™ã€‚policies/constraints é…ä¸‹ã«é…ç½®ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ãŒæœ‰åŠ¹åŒ–ã•ã‚Œã¾ã™ã€‚ä»Šå›ã¯GCSã®Locationã«åˆ¶é™ã‚’ã‹ã‘ã¾ã™ (<strong>ap-northeast-1ã®ã¿ã‚’è¨±å¯ã™ã‚‹</strong>)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /&lt;your_work_space&gt;/policy-library/policies/constraints</span><br><span class="line">$ cp ../../samples/storage_location.yaml .</span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">constraints.gatekeeper.sh/v1alpha1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">GCPStorageLocationConstraintV1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">allow_some_storage_location</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  severity:</span> <span class="string">high</span></span><br><span class="line"><span class="attr">  match:</span></span><br><span class="line"><span class="attr">    target:</span> <span class="string">["organization/*"]</span></span><br><span class="line"><span class="attr">  parameters:</span></span><br><span class="line"><span class="attr">    mode:</span> <span class="string">"allowlist"</span></span><br><span class="line"><span class="attr">    locations:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">asia-northeast1</span></span><br><span class="line"><span class="attr">    exemptions:</span> <span class="string">[]</span></span><br></pre></td></tr></table></figure><h2 id="Terraform-planã®å®Ÿè¡Œ"><a href="#Terraform-planã®å®Ÿè¡Œ" class="headerlink" title="Terraform planã®å®Ÿè¡Œ"></a>Terraform planã®å®Ÿè¡Œ</h2><p>main.tfã¯ä»¥ä¸‹ã®ã‚ˆã†ã«å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚<code>location=&quot;us-central1-a&quot;</code> ã¨è¨­å®šã—ã¦ã„ã¾ã™<br>(ãã®ä»– variable.tf, provider.tfç­‰ã¯çœç•¥)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">resource &quot;google_storage_bucket&quot; &quot;validator_trial&quot; &#123;</span><br><span class="line">      project       = &lt;your project&gt;</span><br><span class="line">      name          = &quot;validator-trial&quot;</span><br><span class="line">      force_destroy = false</span><br><span class="line">      storage_class = &quot;REGIONAL&quot;</span><br><span class="line">      location      = &quot;us-central1-a&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>planã‚’å®Ÿè¡Œ <code>--out=</code> optionã‚’åˆ©ç”¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ terraform plan --out=terraform.tfplan</span><br></pre></td></tr></table></figure><p>terraform.tfplanã®ãƒã‚¤ãƒŠãƒªã‚’jsonã¸å¤‰æ›</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ terraform show -json ./terraform.tfplan &gt; ./terraform.tfplan.json</span><br></pre></td></tr></table></figure><h2 id="Terraform-Validatorã®å®Ÿè¡Œ"><a href="#Terraform-Validatorã®å®Ÿè¡Œ" class="headerlink" title="Terraform Validatorã®å®Ÿè¡Œ"></a>Terraform Validatorã®å®Ÿè¡Œ</h2><p>ã“ã‚Œã§æº–å‚™ã¯æ•´ã„ã¾ã—ãŸã€‚Terraform Validatorã®å®Ÿè¡Œã‚’è¡Œã„ã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ terraform-validator validate --policy-path=<span class="variable">$&#123;POLICY_PATH&#125;</span> ./terraform.tfplan.json</span><br><span class="line">Found Violations:</span><br><span class="line">Constraint allow_some_storage_location on resource //storage.googleapis.com/validator-trial: //storage.googleapis.com/validator-trial is <span class="keyword">in</span> a disallowed location.</span><br></pre></td></tr></table></figure><p>Validationã«ã‚ˆã‚Šãƒãƒªã‚·ãƒ¼é•åã‚’æ¤œçŸ¥ã—ã¾ã—ãŸï¼ğŸš«</p><p>main.tf ã‚’ä¿®æ­£ã—ã¦..</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">resource "google_storage_bucket" "validator_trial" &#123;</span><br><span class="line">      project       = &lt;your project&gt;</span><br><span class="line">      name          = "validator-trial"</span><br><span class="line">      force_destroy = false</span><br><span class="line">      storage_class = "REGIONAL"</span><br><span class="line"><span class="deletion">-     location      = "us-central1-a"</span></span><br><span class="line"><span class="addition">+     location      = "asia-northeast1"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†åº¦å®Ÿè¡Œã—ã¦ã¿ã‚‹ã¨..</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ terraform-validator validate --policy-path=<span class="variable">$&#123;POLICY_PATH&#125;</span> ./terraform.tfplan.json</span><br><span class="line">No violations found</span><br></pre></td></tr></table></figure><p>ä»Šåº¦ã¯ValidationãŒæˆåŠŸã—ã¾ã—ãŸï¼âœ… æœŸå¾…é€šã‚Šã®å‹•ãã‚’ã—ã¦ãã‚Œã¾ã—ãŸã€‚</p><h1 id="ãƒãƒªã‚·ãƒ¼å®šç¾©-Policy-as-code"><a href="#ãƒãƒªã‚·ãƒ¼å®šç¾©-Policy-as-code" class="headerlink" title="ãƒãƒªã‚·ãƒ¼å®šç¾© (Policy as code)"></a>ãƒãƒªã‚·ãƒ¼å®šç¾© (Policy as code)</h1><p>ã‚µãƒ³ãƒ—ãƒ«ãƒãƒªã‚·ãƒ¼ã¯ã€å…ˆã»ã©åˆ©ç”¨ã—ãŸ <a href="https://github.com/forseti-security/policy-library/tree/master/samples" target="_blank" rel="noopener">forseti-security/policy-library</a> ã«ã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã‚‰ã®yamlãƒ•ã‚¡ã‚¤ãƒ«ã‚’ <code>POLICY_PATH</code> ã§å®šç¾©ã—ãŸ <code>/&lt;your_work_space&gt;/policy-library</code> ã®ä¸­ã® <code>policies/constraints/</code> é…ä¸‹ã«é…ç½®ã™ã‚Œã°OKã§ã™ã€‚Policy as codeãŒç°¡å˜ã«å®Ÿç¾ã§ãã¾ã™ã€‚<br>ä»¥ä¸‹ã«ã€ã‚µãƒ³ãƒ—ãƒ«ã‹ã‚‰ä¸€éƒ¨ã‚’ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¦ã”ç´¹ä»‹ã—ã¾ã™ã€‚ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼ã‚’å®šç¾©ã§ãã‚‹ã»ã‹ã«ã‚‚ã€ãƒªã‚½ãƒ¼ã‚¹ã®å‘½åè¦å‰‡ã®åˆ¶é™ãŒã§ããŸã‚Šã™ã‚‹ã®ã¯åœ°å‘³ã«å¬‰ã—ã„ã§ã™ã­ã€‚</p><h4 id="ãƒãƒªã‚·ãƒ¼å®šç¾©ã®ã‚µãƒ³ãƒ—ãƒ«"><a href="#ãƒãƒªã‚·ãƒ¼å®šç¾©ã®ã‚µãƒ³ãƒ—ãƒ«" class="headerlink" title="ãƒãƒªã‚·ãƒ¼å®šç¾©ã®ã‚µãƒ³ãƒ—ãƒ«"></a>ãƒãƒªã‚·ãƒ¼å®šç¾©ã®ã‚µãƒ³ãƒ—ãƒ«</h4><ul><li>ä¸€èˆ¬çš„ãªåˆ¶é™<ul><li>ãƒªã‚½ãƒ¼ã‚¹ã®å‘½åè¦å‰‡(æ­£è¦è¡¨ç¾ã§æŒ‡å®š)</li><li>Labelã®ã‚¢ã‚¿ãƒƒãƒã®å¼·åˆ¶</li><li>ãƒªã‚½ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ—ã®åˆ¶é™</li></ul></li><li>GCE<ul><li>Public IPã®ç„¡åŠ¹åŒ–</li><li>NWã®WhitelistæŒ‡å®š</li></ul></li><li>Cloud SQL<ul><li>Public IPã®ç„¡åŠ¹åŒ–</li><li>Maintenance Windownã®åˆ¶é™</li><li>SSLã®å¼·åˆ¶</li></ul></li><li>GKE<ul><li>Private Clusterã®å¼·åˆ¶</li><li>Dashboardã®ç„¡åŠ¹åŒ–</li><li>Node poolã®Auto upgradeã®å¼·åˆ¶</li><li>Node OSã®æŒ‡å®š</li></ul></li><li>BigQuery<ul><li>Datasetã®ãƒ‘ãƒ–ãƒªãƒƒã‚¯å…¬é–‹åˆ¶é™</li></ul></li><li>IAM<ul><li>Service Accountã¸ä»˜ä¸ã™ã‚‹Roleã®åˆ¶é™</li><li>Audit loggingã®å¼·åˆ¶</li></ul></li><li>Network<ul><li>Firewall ssh,rdp rule ãƒ‘ãƒ–ãƒªãƒƒã‚¯å…¬é–‹ã®ç¦æ­¢</li></ul></li><li>VPC Service Control<ul><li>æœ‰åŠ¹åŒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æŒ‡å®š</li></ul></li></ul><p>ã©ã®ã‚ˆã†ãªåˆ¶é™ã‚’ã‹ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹ã‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ããŸã§ã—ã‚‡ã†ã‹ã€‚å®Ÿã¯ã“ã¡ã‚‰ã«ç”¨æ„ã•ã‚Œã¦ã„ãªã„ã‚‚ã®ã§ã‚‚ã€Custom Policyã¨ã—ã¦è‡ªèº«ã§ãƒãƒªã‚·ãƒ¼ãƒ«ãƒ¼ãƒ«ã‚’è¨˜è¿°ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚è©³ç´°ã¯<a href="https://github.com/forseti-security/policy-library/blob/master/docs/constraint_template_authoring.md" target="_blank" rel="noopener">ã“ã¡ã‚‰</a></p><h1 id="å®Ÿéš›ã®é‹ç”¨"><a href="#å®Ÿéš›ã®é‹ç”¨" class="headerlink" title="å®Ÿéš›ã®é‹ç”¨"></a>å®Ÿéš›ã®é‹ç”¨</h1><p>å®Ÿè¡Œæ–¹æ³•ã¨ãƒãƒªã‚·ãƒ¼ã®å®šç¾©æ–¹æ³•ãŒåˆ†ã‹ã£ãŸã¨ã“ã‚ã§ã€å®Ÿéš›ã®é‹ç”¨æ–¹æ³•ã«ã¤ã„ã¦ã§ã™ã€‚<br>ä»¥ä¸‹ã®ã‚ˆã†ã«ã€Terraformã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®PRã«å¯¾ã—ã¦ã€Terraform Validatorã‚’å®Ÿè¡Œã—ã€çµæœã‚’PRã«ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã•ã›ã‚‹ã‚ˆã†ã«ã™ã‚‹ã®ãŒè‰¯ã„ã¨æ€ã„ã¾ã™ã€‚Githubã¨é€£æºãŒå¯èƒ½ã§ã‚ã‚Œã°ã€CloudBuildã§ä»¥ä¸‹ã®ã‚ˆã†ã«CIã‚’å›ã™ã®ãŒç°¡å˜ã§ã‚ˆã„ã§ã™ã€‚</p><img src="/images/20200213/photo_20200213_04.png"><p>Cloud Buildã®Steps ã‚¤ãƒ¡ãƒ¼ã‚¸</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">steps:</span></span><br><span class="line"><span class="attr">- name:</span> <span class="string">gcr.io/config-validator/terraform-validator</span></span><br><span class="line"><span class="attr">  entrypoint:</span> <span class="string">terraform</span></span><br><span class="line"><span class="attr">  dir:</span> <span class="string">your-terraform-folder</span></span><br><span class="line"><span class="attr">  args:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">init</span></span><br><span class="line"><span class="attr">- name:</span> <span class="string">gcr.io/config-validator/terraform-validator</span></span><br><span class="line"><span class="attr">  dir:</span> <span class="string">your-terraform-folder</span></span><br><span class="line"><span class="attr">  entrypoint:</span> <span class="string">terraform</span></span><br><span class="line"><span class="attr">  args:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">plan</span> </span><br><span class="line"><span class="bullet">  -</span> <span class="bullet">-out=terraform.tfplan</span></span><br><span class="line"><span class="attr">- name:</span> <span class="string">gcr.io/config-validator/terraform-validator</span></span><br><span class="line"><span class="attr">  entrypoint:</span> <span class="string">"/bin/bash"</span></span><br><span class="line"><span class="attr">  args:</span> <span class="string">['-c',</span> <span class="string">'terraform show -json terraform.tfplan &gt; terraform.tfplan.json'</span><span class="string">]</span></span><br><span class="line"><span class="attr">  dir:</span> <span class="string">your-terraform-folder</span></span><br><span class="line"><span class="attr">- name:</span> <span class="string">gcr.io/config-validator/terraform-validator</span></span><br><span class="line"><span class="attr">  dir:</span> <span class="string">your-terraform-folder</span></span><br><span class="line"><span class="attr">  args:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">validate</span></span><br><span class="line"><span class="bullet">  -</span> <span class="bullet">--policy-path=/&lt;your_work_space&gt;/policy-library</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">your-terraform-folder/terraform.tfplan.json</span></span><br></pre></td></tr></table></figure><p>PRä¸Šã§ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®ã‚¤ãƒ¡ãƒ¼ã‚¸<br><img src="/images/20200213/photo_20200213_05.png"></p><h1 id="æœ€å¾Œã«"><a href="#æœ€å¾Œã«" class="headerlink" title="æœ€å¾Œã«"></a>æœ€å¾Œã«</h1><p>æœ¬è¨˜äº‹ã§ã¯ã‚ã¾ã‚Šè§¦ã‚Œã¾ã›ã‚“ã§ã—ãŸãŒã€å®Ÿã¯ã€<a href="https://forsetisecurity.org/" target="_blank" rel="noopener">Forseti</a>ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’ç”¨ã„ã¦Ongoingã§ã®ç›£è¦–ã‚‚å¯èƒ½ã§ã™ã€‚ã“ã¡ã‚‰ã‚‚GCPãŒå…¬é–‹ã—ã¦ã„ã‚‹ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ã“ã‚Œã‚’ç”¨ã„ã‚Œã°ã€ä¸€å…ƒç®¡ç†ã•ã‚ŒãŸãƒãƒªã‚·ãƒ¼ã§TerraformçµŒç”±ã§ã¯ãªã„æ‰‹ä½œæ¥­ã«ã‚ˆã‚‹ãƒãƒªã‚·ãƒ¼é•åã®ç™ºç”Ÿã‚‚æ¤œçŸ¥ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><img src="/images/20200213/photo_20200213_06.png"><p>GCPã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ•°ãŒã‚¹ã‚±ãƒ¼ãƒ«ã™ã‚‹éš›ã«å¿…ãšã¶ã¡å½“ãŸã‚‹ã§ã‚ã‚ã†ã“ã®èª²é¡Œã€ç§ãŸã¡ã‚‚Terraform Validatorã‚’ç”¨ã„ã¦è§£æ±ºã—ã‚ˆã†ã¨ç¾åœ¨ã€è©¦è¡ŒéŒ¯èª¤ä¸­ã§ã™ã€‚å°å…¥è‡ªä½“ã¯ã‚·ãƒ³ãƒ—ãƒ«ã«ã§ãã‚‹ãŸã‚ã€ã¾ãšã¯ç°¡å˜ãªãƒãƒªã‚·ãƒ¼ã®ãƒã‚§ãƒƒã‚¯ã‹ã‚‰å§‹ã‚ã¦ã¿ã¦ã¯ã„ã‹ãŒã§ã—ã‚‡ã†ã‹ã€‚</p><h2 id="é–¢é€£ãƒªãƒ³ã‚¯"><a href="#é–¢é€£ãƒªãƒ³ã‚¯" class="headerlink" title="é–¢é€£ãƒªãƒ³ã‚¯"></a>é–¢é€£ãƒªãƒ³ã‚¯</h2><ul><li><a href="https://future-architect.github.io/articles/20190903/">Terraformã®ãƒ™ã‚¹ãƒˆãªãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã£ã¦ãªã‚“ã ã‚ã†ã‹</a></li><li><a href="https://future-architect.github.io/articles/20190816/">ã¯ã˜ã‚ã¦ã®Terraform 0.12 ï½ç’°å¢ƒæ§‹ç¯‰ï½</a></li><li><a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCPé€£è¼‰ä¼ç”»</a></li><li><a href="https://future-architect.github.io/tags/GoCDK/">Go Cloudé€£è¼‰</a></li><li><a href="https://future-architect.github.io/articles/20190909/">Letâ€™s Try GCP #1 ï½Cloud Run Buttonã‚’ä½¿ã£ãŸæ¥½ã€…ã‚³ãƒ³ãƒ†ãƒŠãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ã‚„ã£ã¦ã¿ãŸï½</a></li><li><a href="https://future-architect.github.io/articles/20190927/">Letâ€™s Try GCP #2 ï½Cloud Functionã‚’VPC connectorã¨ä¸€ç·’ã«ä½¿ã£ã¦ã¿ã‚‹ï½</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/&quot;&gt;GCPé›†ä¸­é€£è¼‰&lt;/a&gt;ã®6å›ç›®ã§ã™ã€‚ä»Šå›ã¯&lt;strong&gt;Terraform Validatorã‚’ä½¿ã£ã¦ã€çµ„ç¹”ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒª
      
    
    </summary>
    
      <category term="Infrastructure" scheme="https://future-architect.github.io/categories/Infrastructure/"/>
    
    
      <category term="GCP" scheme="https://future-architect.github.io/tags/GCP/"/>
    
      <category term="Terraform" scheme="https://future-architect.github.io/tags/Terraform/"/>
    
      <category term="GCPé€£è¼‰" scheme="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/"/>
    
  </entry>
  
  <entry>
    <title>GCPé€£è¼‰#5ã€ã‚‚ã†éµãªãã•ãªã„ã€‘GCPã®Secret Managerã¨Berglasã§å¹¸ã›ã«ãªã‚‹</title>
    <link href="https://future-architect.github.io/articles/20200212/"/>
    <id>https://future-architect.github.io/articles/20200212/</id>
    <published>2020-02-12T00:14:36.000Z</published>
    <updated>2020-02-12T00:45:18.458Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰æ›¸ã"><a href="#å‰æ›¸ã" class="headerlink" title="å‰æ›¸ã"></a>å‰æ›¸ã</h2><p>ã“ã‚“ã«ã¡ã¯ã€TIGæ‰€å±ã‚¤ãƒ³ãƒ•ãƒ©ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®å¸‚å·ã§ã™ã€‚</p><p>çªç„¶ã§ã™ãŒã€æ™®æ®µç”Ÿæ´»ã™ã‚‹ã†ãˆã§ã‚«ã‚®ğŸ”‘ã‚’ãªãã—ãŸã€å¿˜ã‚ŒãŸã“ã¨ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚ç§ã¯ã‚ã‚Šã¾ã™ã€‚ãªãã—ãŸã“ã¨ã¯ãªã„ã‘ã©ã€ã†ã£ã‹ã‚Šç½®ãå¿˜ã‚Œã¡ã‚ƒã†ã‚“ã§ã™ã‚ˆã­ã€‚</p><p>ãã‚ŒãŒã“ã¨ã‚¤ãƒ³ãƒ•ãƒ©æ§‹ç¯‰ã®å ´é¢ã§ã¯ã©ã†ã§ã—ã‚‡ã†ã‹ã€‚æœ€è¿‘ã¯ã¨ã«ã‹ãå¤šãã®ã‚«ã‚®ã‚’ç®¡ç†ã—ãªãã¦ã¯ãªã‚Šã¾ã›ã‚“ã€‚API Keyã¨ã‹æ°—ã¥ã„ãŸã‚‰ä½•ãŒä½•ã ã‹åˆ†ã‹ã‚‰ãªããªã‚Šã€è‹¦æ¸‹ã®æ±ºæ–­ã®æœ«ã€å†åº¦æ‰•ã„å‡ºã™ã“ã¨ã‚‚å¤šã„ã®ã§ã¯ç„¡ã„ã§ã—ã‚‡ã†ã‹ã€‚æ¤œè¨¼ãªã‚‰ã¾ãâ€¦ã‚®ãƒªã‚®ãƒªã§ã™ãŒã€æœ¬ç•ªã§ã¯ã‚„ã£ã¡ã‚ƒãƒ€ãƒ¡çµ¶å¯¾ã§ã™ã€‚</p><p>ã¨ã„ã†ã“ã¨ã§ã€ãã‚“ãªç®¡ç†äººã®çš†ã•ã‚“ã«æœ—å ±ã§ã™ã€‚ <strong>é‚ã«GCPã«ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç®¡ç†æ©Ÿèƒ½ãŒã‚„ã£ã¦ãã¾ã—ãŸï¼</strong> CLIãƒ„ãƒ¼ãƒ«ã®Berglasã¨GUIã§ç®¡ç†ã™ã‚‹Secret Managerã‚’ç°¡å˜ã«ã”ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><h2 id="Berglasã‚’ä½¿ã£ã¦ã¿ã‚‹"><a href="#Berglasã‚’ä½¿ã£ã¦ã¿ã‚‹" class="headerlink" title="Berglasã‚’ä½¿ã£ã¦ã¿ã‚‹"></a>Berglasã‚’ä½¿ã£ã¦ã¿ã‚‹</h2><p>ã‚µã‚¯ã£ã¨åˆ©ç”¨ã™ã‚‹ãªã‚‰Cloud Shellã ã‚ˆã­ï¼ã¨ã„ã†ã“ã¨ã§ã€ä»¥ä¸‹Cloud Shellã§ä½œæ¥­ã‚’ã—ã¦ã„ã¾ã™ã€‚</p><h3 id="Berglasã¨ã¯ï¼Ÿ"><a href="#Berglasã¨ã¯ï¼Ÿ" class="headerlink" title="Berglasã¨ã¯ï¼Ÿ"></a>Berglasã¨ã¯ï¼Ÿ</h3><p><a href="https://github.com/GoogleCloudPlatform/berglas" target="_blank" rel="noopener">Githubãƒšãƒ¼ã‚¸</a>ã§ã“ã®ãƒ„ãƒ¼ãƒ«ã«ã¤ã„ã¦ç¢ºèªã—ã¾ã™ã€‚</p><blockquote><p>Berglasã¯ã€Google Cloudã§ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’ä¿å­˜ãŠã‚ˆã³å–å¾—ã™ã‚‹ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ãŠã‚ˆã³ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã¯Cloud KMSã§æš—å·åŒ–ã•ã‚Œã€Cloud Storageã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚ Secret Managerã«ã¯ç›¸äº’é‹ç”¨å¯èƒ½ãªãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚‚ã‚ã‚Šã¾ã™ã€‚</p><ul><li>CLIã¨ã—ã¦ï¼šBerglasã¯ã€Google Cloudã§ã®ãƒ‡ãƒ¼ã‚¿ã®æš—å·åŒ–ã€å¾©å·åŒ–ã€ä¿å­˜ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’è‡ªå‹•åŒ–ã—ã¾ã™ã€‚</li><li>ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦ï¼šBerglasã¯ã•ã¾ã–ã¾ãªGoogle Cloudãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã¸ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®çµ„ã¿è¾¼ã¿ã‚’è‡ªå‹•åŒ–ã—ã¾ã™</li></ul><p>Berglasã¯ã€å…¬å¼ã«ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹Googleè£½å“ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p></blockquote><p>ãªã‚‹ã»ã©ã€‚GCPã®ãƒªãƒã‚¸ãƒˆãƒªã§é–‹ç™ºã•ã‚Œã¦ã‚‹ã®ã«å…¬å¼è£½å“ã§ã¯ãªã„ã®ã­ã€‚CLIã¨ã—ã¦ã‚‚ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦ã‚‚åˆ©ç”¨å¯èƒ½ã¨ã„ã†ã¨ã“ã‚ãŒã‚¤ã‚±ã¦ã¾ã™ã­ã€‚</p><h3 id="Berglasã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæ­£ç¢ºã«ã¯ãƒã‚¤ãƒŠãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼‰"><a href="#Berglasã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæ­£ç¢ºã«ã¯ãƒã‚¤ãƒŠãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼‰" class="headerlink" title="Berglasã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæ­£ç¢ºã«ã¯ãƒã‚¤ãƒŠãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼‰"></a>Berglasã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæ­£ç¢ºã«ã¯ãƒã‚¤ãƒŠãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼‰</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> wget https://storage.googleapis.com/berglas/master/linux_amd64/berglas</span><br><span class="line"><span class="meta">$</span> chmod +x berglas</span><br></pre></td></tr></table></figure><p>Dockerã‚³ãƒ³ãƒ†ãƒŠã‚‚ã‚ã‚‹ã‚ˆã†ãªã®ã§ã€å¥½ã¿ã«å¿œã˜ã¦ä½¿ã„åˆ†ã‘ãã ã•ã„ã€‚</p><h3 id="ç’°å¢ƒå¤‰æ•°ã®æº–å‚™ã¨ä¾å­˜ã—ã¦ã‚‹APIã®æœ‰åŠ¹åŒ–"><a href="#ç’°å¢ƒå¤‰æ•°ã®æº–å‚™ã¨ä¾å­˜ã—ã¦ã‚‹APIã®æœ‰åŠ¹åŒ–" class="headerlink" title="ç’°å¢ƒå¤‰æ•°ã®æº–å‚™ã¨ä¾å­˜ã—ã¦ã‚‹APIã®æœ‰åŠ¹åŒ–"></a>ç’°å¢ƒå¤‰æ•°ã®æº–å‚™ã¨ä¾å­˜ã—ã¦ã‚‹APIã®æœ‰åŠ¹åŒ–</h3><p>ã‚µã‚¯ãƒƒã¨è¨­å®šã—ã¾ã—ã‚‡ã†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç’°å¢ƒå¤‰æ•°ã®è¨­å®š</span></span><br><span class="line">$ <span class="built_in">export</span> PROJECT_ID=my-secret-project</span><br><span class="line">$ <span class="built_in">export</span> BUCKET_ID=my-secrets-bucket-123</span><br><span class="line"></span><br><span class="line"><span class="comment"># APIã®æœ‰åŠ¹åŒ–</span></span><br><span class="line">$ gcloud services <span class="built_in">enable</span> --project <span class="variable">$&#123;PROJECT_ID&#125;</span> \</span><br><span class="line">  cloudkms.googleapis.com \</span><br><span class="line">  storage-api.googleapis.com \</span><br><span class="line">  storage-component.googleapis.com</span><br></pre></td></tr></table></figure><h3 id="Berglasç’°å¢ƒã®Bootstrap"><a href="#Berglasç’°å¢ƒã®Bootstrap" class="headerlink" title="Berglasç’°å¢ƒã®Bootstrap"></a>Berglasç’°å¢ƒã®Bootstrap</h3><p>æ¬¡ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’ä¿å­˜ã™ã‚‹ãŸã‚ã®æ–°ã—ã„Cloud Storageãƒã‚±ãƒƒãƒˆã¨ã€ãƒ‡ãƒ¼ã‚¿ã‚’æš—å·åŒ–ã™ã‚‹ãŸã‚ã®Cloud KMSã‚­ãƒ¼ãŒè‡ªå‹•çš„ã«ä½œæˆã•ã‚Œã¾ã™ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> berglas bootstrap --project <span class="variable">$PROJECT_ID</span> --bucket <span class="variable">$BUCKET_ID</span></span></span><br></pre></td></tr></table></figure><p>æˆåŠŸã™ã‚‹ã¨ä¸‹è¨˜ã®ã‚ˆã†ãªå‡ºåŠ›ãŒç¢ºèªã§ãã¾ã™ï¼æœ€è¿‘ã®CLIãƒ„ãƒ¼ãƒ«ã£ã¦ã“ã‚Œã§ã‚‚ã‹ã£ã¦ãã‚‰ã„å„ªã—ãã§ãã¦ã„ã¾ã™ã‚ˆã­ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Successfully created berglas environment:</span><br><span class="line"></span><br><span class="line">  Bucket: my-secrets-bucket-123</span><br><span class="line">  KMS key: projects/my-secret-project/locations/global/keyRings/berglas/cryptoKeys/berglas-key</span><br><span class="line"></span><br><span class="line">To create a secret:</span><br><span class="line"></span><br><span class="line">  berglas create my-secrets-bucket-123/my-secret abcd1234 \</span><br><span class="line">    --key projects/my-secret-project/locations/global/keyRings/berglas/cryptoKeys/berglas-key</span><br><span class="line"></span><br><span class="line">To grant access to that secret:</span><br><span class="line"></span><br><span class="line">  berglas grant my-secrets-bucket-123/my-secret \</span><br><span class="line">    --member user:jane.doe@mycompany.com</span><br><span class="line"></span><br><span class="line">For more help and examples, please run &quot;berglas -h&quot;.</span><br></pre></td></tr></table></figure><h3 id="ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®ä½œæˆ"><a href="#ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®ä½œæˆ" class="headerlink" title="ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®ä½œæˆ"></a>ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®ä½œæˆ</h3><p>ã‚µãƒ³ãƒ—ãƒ«ã‚±ãƒ¼ã‚¹ã¨ã—ã¦ã€<a href="http://httpbin.org/" target="_blank" rel="noopener">httpbin</a>ã®Basicèªè¨¼APIã¸ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æŠ•ã’ <code>200 OK</code> ã™ã‚‹ã®Cloud Functionsã‚’ä½œã‚Šã¾ã™ã€‚</p><p><a href="http://httpbin.org/" target="_blank" rel="noopener">httpbin</a>ã®Basicèªè¨¼ã¯æ¬¡ã®ã‚ˆã†ãªãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™ãƒ¢ãƒƒã‚¯ã‚µãƒ¼ãƒã§ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># èªè¨¼æƒ…å ±ãªã—ã ã¨401ã‚’è¿”ã™</span></span><br><span class="line">$ curl -i -G <span class="string">"https://httpbin.org/basic-auth/basic-user-name/basic-user-pass"</span></span><br><span class="line">HTTP/2 401</span><br><span class="line">date: Tue, 11 Feb 2020 10:43:43 GMT</span><br><span class="line">content-length: 0</span><br><span class="line">server: gunicorn/19.9.0</span><br><span class="line">www-authenticate: Basic realm=<span class="string">"Fake Realm"</span></span><br><span class="line">access-control-allow-origin: *</span><br><span class="line">access-control-allow-credentials: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># èªè¨¼æƒ…å ±ã‚’ä»˜ã‘ã¦é€ã‚‹ã¨ã¡ã‚ƒã‚“ã¨200ã‚’è¿”ã™</span></span><br><span class="line">$ curl -i -G -u basic-user-name <span class="string">"https://httpbin.org/basic-auth/basic-user-name/basic-user-pass"</span></span><br><span class="line">Enter host password <span class="keyword">for</span> user <span class="string">'basic-user-name'</span>:</span><br><span class="line">HTTP/2 200</span><br><span class="line">date: Tue, 11 Feb 2020 10:45:16 GMT</span><br><span class="line">content-type: application/json</span><br><span class="line">content-length: 58</span><br><span class="line">server: gunicorn/19.9.0</span><br><span class="line">access-control-allow-origin: *</span><br><span class="line">access-control-allow-credentials: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"authenticated"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">"user"</span>: <span class="string">"basic-user-name"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã¨ã„ã†ã“ã¨ã§ã€ãƒ¦ãƒ¼ã‚¶åãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’èªè¨¼æƒ…å ±ã¨ã—ã¦ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã«ã—ã¦ã„ãã¾ã—ã‚‡ã†ï¼</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> berglas create <span class="variable">$&#123;BUCKET_ID&#125;</span>/api-user basic-user-name \</span></span><br><span class="line">  --key projects/$&#123;PROJECT_ID&#125;/locations/global/keyRings/berglas/cryptoKeys/berglas-key</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> berglas create <span class="variable">$&#123;BUCKET_ID&#125;</span>/api-pass basic-user-pass \</span></span><br><span class="line">  --key projects/$&#123;PROJECT_ID&#125;/locations/global/keyRings/berglas/cryptoKeys/berglas-key</span><br></pre></td></tr></table></figure><h3 id="æ‰‹é †"><a href="#æ‰‹é †" class="headerlink" title="æ‰‹é †"></a>æ‰‹é †</h3><ul><li>Cloud Functionã¸æ¸¡ã™ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆ</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> gcloud iam service-accounts create berglas-service-account \</span></span><br><span class="line">  --project $&#123;PROJECT_ID&#125; \</span><br><span class="line">  --display-name "berglas Cloud Functions Example"</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">export</span> SA_EMAIL=berglas-service-account@<span class="variable">$&#123;PROJECT_ID&#125;</span>.iam.gserviceaccount.com</span></span><br></pre></td></tr></table></figure><h4 id="Berglasã‹ã‚‰å…ˆã»ã©ä½œã£ãŸã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¸ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã‚’æ¸¡ã™"><a href="#Berglasã‹ã‚‰å…ˆã»ã©ä½œã£ãŸã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¸ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã‚’æ¸¡ã™" class="headerlink" title="Berglasã‹ã‚‰å…ˆã»ã©ä½œã£ãŸã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¸ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã‚’æ¸¡ã™"></a>Berglasã‹ã‚‰å…ˆã»ã©ä½œã£ãŸã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¸ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã‚’æ¸¡ã™</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> berglas grant <span class="variable">$&#123;BUCKET_ID&#125;</span>/api-user --member serviceAccount:<span class="variable">$&#123;SA_EMAIL&#125;</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> berglas grant <span class="variable">$&#123;BUCKET_ID&#125;</span>/api-pass --member serviceAccount:<span class="variable">$&#123;SA_EMAIL&#125;</span></span></span><br></pre></td></tr></table></figure><h4 id="Goã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ "><a href="#Goã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ " class="headerlink" title="Goã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ "></a>Goã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ </h4><p>golangã§BASICèªè¨¼ã‚’ã™ã‚‹å ´åˆã¯<a href="https://golang.org/pkg/net/http/#Request.SetBasicAuth" target="_blank" rel="noopener"><code>SetBasicAuth</code></a>ã‚’ä½¿ã„ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fn</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"io/ioutil"</span></span><br><span class="line"><span class="string">"net/http"</span></span><br><span class="line"><span class="string">"os"</span></span><br><span class="line"><span class="string">"log"</span></span><br><span class="line"><span class="string">"time"</span></span><br><span class="line"></span><br><span class="line">_ <span class="string">"github.com/GoogleCloudPlatform/berglas/pkg/auto"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">readBody</span><span class="params">(res *http.Response)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">    data, err := ioutil.ReadAll(res.Body)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        log.Fatal(err)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* dataã¯byteå‹ãªã®ã§ã€stringå‹ã« */</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">string</span>(data)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">F</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">fmt.Fprintf(w, <span class="string">"--- ENV VAR FROM BERGLAS ---\n"</span>)</span><br><span class="line">fmt.Fprintf(w, <span class="string">"API_USER: %s\n"</span>, os.Getenv(<span class="string">"API_USER"</span>))</span><br><span class="line">fmt.Fprintf(w, <span class="string">"API_PASS: %s\n"</span>, os.Getenv(<span class="string">"API_PASS"</span>))</span><br><span class="line"></span><br><span class="line">    client := &amp;http.Client&#123;Timeout: time.Duration(<span class="number">3</span>) * time.Second&#125;</span><br><span class="line"></span><br><span class="line">    req, _ := http.NewRequest(<span class="string">"GET"</span>, <span class="string">"https://httpbin.org/basic-auth/basic-user-name/basic-user-pass"</span>, <span class="literal">nil</span>)</span><br><span class="line">    req.SetBasicAuth(os.Getenv(<span class="string">"API_USER"</span>), os.Getenv(<span class="string">"API_PASS"</span>))</span><br><span class="line">    res, err := client.Do(req)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        log.Fatal(err)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">defer</span> res.Body.Close()</span><br><span class="line"></span><br><span class="line">fmt.Fprintf(w, <span class="string">"--- HTTPBIN RESPONSE ---\n"</span>)</span><br><span class="line">fmt.Fprintf(w, readBody(res))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ãƒ‡ãƒ—ãƒ­ã‚¤"><a href="#ãƒ‡ãƒ—ãƒ­ã‚¤" class="headerlink" title="ãƒ‡ãƒ—ãƒ­ã‚¤"></a>ãƒ‡ãƒ—ãƒ­ã‚¤</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> gcloud <span class="built_in">functions</span> deploy berglas-example-go \</span></span><br><span class="line">  --project $&#123;PROJECT_ID&#125; \</span><br><span class="line">  --region us-central1 \</span><br><span class="line">  --runtime go113 \</span><br><span class="line">  --memory 1G \</span><br><span class="line">  --max-instances 10 \</span><br><span class="line">  --service-account $&#123;SA_EMAIL&#125; \</span><br><span class="line">  --set-env-vars "API_USER=berglas://$&#123;BUCKET_ID&#125;/api-user,API_PASS=berglas://$&#123;BUCKET_ID&#125;/api-pass" \</span><br><span class="line">  --entry-point F \</span><br><span class="line">  --trigger-http \</span><br><span class="line">  --allow-unauthenticated</span><br></pre></td></tr></table></figure><h4 id="ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ"><a href="#ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ" class="headerlink" title="ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ"></a>ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</h4><p>ã¡ã‚ƒã‚“ã¨Berglasã§ä½œæˆã—ãŸã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãŒå–å¾—ã§ãã¾ã—ãŸã­ï¼<br>å‰²ã¨é“ã®ã‚ŠãŒé•·ã„ã§ã™ãŒã€GCPã®ã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰ç°¡å˜ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã®ã¯æ°—æŒã¡ãŒè‰¯ã„ã§ã™ã­ã€‚<br><img src="/images/20200212/photo_20200212_01.png" class="img-small-size"></p><h2 id="Secret-Managerã‚’åˆ©ç”¨"><a href="#Secret-Managerã‚’åˆ©ç”¨" class="headerlink" title="Secret Managerã‚’åˆ©ç”¨"></a>Secret Managerã‚’åˆ©ç”¨</h2><p>æŠ˜ã‚Šè¿”ã—ã§ã™ã€‚ã‚‚ã†ã—ã°ã—ãŠä»˜ãåˆã„ãã ã•ã„ã€‚</p><h3 id="Secret-Manageã¨ã¯ï¼Ÿ"><a href="#Secret-Manageã¨ã¯ï¼Ÿ" class="headerlink" title="Secret Manageã¨ã¯ï¼Ÿ"></a>Secret Manageã¨ã¯ï¼Ÿ</h3><blockquote><p>ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¬ãƒ™ãƒ«ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’æš—å·åŒ–ã€ä¿å­˜ã€ç®¡ç†ã€ç›£æŸ»ã—ã¾ã™ã€‚<br><a href="https://cloud.google.com/solutions/secrets-management/" target="_blank" rel="noopener">https://cloud.google.com/solutions/secrets-management/</a></p></blockquote><p>ç°¡æ½”ã§ã™ã­ã€‚CloudKMSã¯GCPã®ç®¡ç†ã™ã‚‹ã‚«ã‚®ã§æš—å·åŒ–ã€å¾©å·ãªã©ã‚’ã‚µãƒãƒ¼ãƒˆã—ãŸã‚µãƒ¼ãƒ“ã‚¹ã§ã™ãŒã€ã‚‚ã†ä¸€æšãƒ¬ã‚¤ãƒ¤ãŒä¸Šãªã‚µãƒ¼ãƒ“ã‚¹ã®ã‚ˆã†ã§ã™ã€‚Berglasã®GUIç‰ˆãã‚‰ã„ã®æ°—æŒã¡ã§ã„ã‚‹ã¨è‰¯ã„ã¨ãŠæ€ã„ã¾ã™ã€‚</p><h3 id="Secret-Managerç”»é¢"><a href="#Secret-Managerç”»é¢" class="headerlink" title="Secret Managerç”»é¢"></a>Secret Managerç”»é¢</h3><p>GUIç”»é¢ã¸ã¯<code>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ -&gt; ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼</code>ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚</p><p>ä½œæˆç”»é¢ã¯ã‹ãªã‚Šç°¡æ½”ã§å¥½æ„Ÿåº¦ãŒé«˜ã„ã§ã™ã€‚ã“ã®æ‰‹ã®ã‚µãƒ¼ãƒ“ã‚¹ã¯ã‚„ãŸã‚‰ã¨å…¥åŠ›é …ç›®ãŒå¤šãã¦åˆè¦‹æ®ºã—ãªã‚¤ãƒ¡ãƒ¼ã‚¸ï¼ˆå‹æ‰‹ï¼‰ãŒã‚ã£ãŸã®ã§ã€‚</p><img src="/images/20200212/photo_20200212_02.png" class="img-small-size" style="border:solid 1px #000000"><p>ãƒ©ãƒ™ãƒ«ã§æ•´ç†ãŒã§ãã‚‹ã®ã‚‚ç‰‡ã¥ã‘ãŒè‹¦æ‰‹ãªç§ã«ã´ã£ãŸã‚Šã§ã™ã€‚ï¼ˆä»Šå›ã¯ã¤ã‘ã¦ã„ãªã„ã§ã™ãŒã€‚ã€‚ã€‚ï¼‰</p><p>æœ‰åŠ¹åŒ–ã€ç„¡åŠ¹åŒ–ã€ç ´æ£„ã‚‚éå¸¸ã«å®¹æ˜“ã«ã§ãã¾ã™ã€‚æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’é¸æŠã™ã‚‹ã“ã¨ã§ã€ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®ä¸­èº«ã®æ›´æ–°ã¨éå»ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’ä¸€æ‹¬ç„¡åŠ¹ã«ã§ãã¾ã™ã€‚</p><img src="/images/20200212/photo_20200212_03.png" class="img-middle-size" style="border:solid 1px #000000"><img src="/images/20200212/photo_20200212_04.png" class="img-middle-size" style="border:solid 1px #000000"><h3 id="Berglasã§ç™»éŒ²ã—ãŸã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’Secret-Managerã«ç§»ã™"><a href="#Berglasã§ç™»éŒ²ã—ãŸã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’Secret-Managerã«ç§»ã™" class="headerlink" title="Berglasã§ç™»éŒ²ã—ãŸã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’Secret Managerã«ç§»ã™"></a>Berglasã§ç™»éŒ²ã—ãŸã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’Secret Managerã«ç§»ã™</h3><p>ä½•ã‚„ã‚‰Berglasã¨é€£æºã‚‚ã§ãã‚‹ã‚ˆã†ãªã®ã§ã€ã¡ã‚‡ã“ã£ã¨è§¦ã£ã¦ã¿ã¾ã™ã€‚</p><ul><li>Berglasã‹ã‚‰Secret Managerã®ã‚­ãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> berglas access sm://<span class="variable">$&#123;PROJECT_ID&#125;</span>/the-first-secret</span></span><br><span class="line">sugoi-secret</span><br></pre></td></tr></table></figure><ul><li>migrate</li></ul><p><a href="https://cloud.google.com/blog/ja/products/identity-security/introducing-google-clouds-secret-manager" target="_blank" rel="noopener">Google Cloud Blog</a>ã«ã€Œ1å›é™ã‚Šã®ã€ã£ã¦æ›¸ã„ã¦ã‚ã‚‹ã®ãŒä¸ç©ï½—</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> berglas migrate <span class="variable">$&#123;BUCKET_ID&#125;</span> --project <span class="variable">$&#123;PROJECT_ID&#125;</span></span></span><br><span class="line">Migrating api-user to projects/my-secret-project/secrets/api-user... done!</span><br><span class="line">Migrating api-pass to projects/my-secret-project/secrets/api-pass... done!</span><br></pre></td></tr></table></figure><p>äºŒå›ç›®ã®å®Ÿè¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> berglas migrate <span class="variable">$&#123;BUCKET_ID&#125;</span> --project <span class="variable">$&#123;PROJECT_ID&#125;</span></span></span><br><span class="line">Migrating api-user to projects/my-secret-project/secrets/api-user... done!</span><br><span class="line">Migrating api-pass to projects/my-secret-project/secrets/api-pass... done!</span><br></pre></td></tr></table></figure><p>é€šã‚Šã¾ã—ãŸã€‚</p><ul><li>ç”»é¢</li></ul><p>ã‚¤ã‚±ã¦ã¾ã™ã­ï¼å½“ç„¶ã§ã™ãŒã€æœ€çµ‚æ›´æ–°æ—¥ã¯UPLOADã—ãŸæ™‚é–“ã«ãªã‚Šã¾ã™ã€‚</p><img src="/images/20200212/photo_20200212_05.png" class="img-middle-size" style="border:solid 1px #000000"><h3 id="Cloud-Functionã‹ã‚‰Secret-Managerã‚’ä½¿ã†"><a href="#Cloud-Functionã‹ã‚‰Secret-Managerã‚’ä½¿ã†" class="headerlink" title="Cloud Functionã‹ã‚‰Secret Managerã‚’ä½¿ã†"></a>Cloud Functionã‹ã‚‰Secret Managerã‚’ä½¿ã†</h3><p>æµã‚Œã¨ã—ã¦ã¯ã€éå¸¸ã«ç°¡å˜ã§ã™ã€‚</p><ol><li>ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¢ã‚¯ã‚»ã‚µå½¹å‰²ã‚’Cloud Functionã®ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«å‰²ã‚Šå½“ã¦</li><li>åˆ©ç”¨</li></ol><h4 id="ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¸å½¹å‰²ã‚’å‰²ã‚Šå½“ã¦"><a href="#ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¸å½¹å‰²ã‚’å‰²ã‚Šå½“ã¦" class="headerlink" title="ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¸å½¹å‰²ã‚’å‰²ã‚Šå½“ã¦"></a>ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¸å½¹å‰²ã‚’å‰²ã‚Šå½“ã¦</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gcloud beta secrets add-iam-policy-binding the-first-secret \</span><br><span class="line">    --role roles/secretmanager.secretAccessor \</span><br><span class="line">    --member serviceAccount:<span class="variable">$&#123;PROJECT_ID&#125;</span>@appspot.gserviceaccount.com</span><br></pre></td></tr></table></figure><h4 id="ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚°ãƒ©ãƒ "><a href="#ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚°ãƒ©ãƒ " class="headerlink" title="ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚°ãƒ©ãƒ "></a>ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚°ãƒ©ãƒ </h4><p>ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’åãå‡ºã™ã®ã¿ã¨ã„ã†ã‚·ãƒ³ãƒ—ãƒ«ãªã‚³ãƒ¼ãƒ‰ã§ã™ã€‚Berglasã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯googlecloudãŒãƒ¡ãƒ³ãƒ†ã—ã¦ã„ã‚‹ã®ãŒGoã ã‘ã§ã—ãŸãŒã€ä»Šå›ã¯Pythonãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã‚ã£ãŸã®ã§Pythonã§æ›¸ãã¾ã™ã€‚</p><figure class="highlight python"><figcaption><span>main.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> google.cloud <span class="keyword">import</span> secretmanager</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_secret</span><span class="params">(request)</span>:</span></span><br><span class="line">    client = secretmanager.SecretManagerServiceClient()</span><br><span class="line">    secret_name = <span class="string">'the-first-secret'</span></span><br><span class="line">    project_id = os.getenv(<span class="string">'GCP_PROJECT'</span>)</span><br><span class="line">    resource_name = <span class="string">'projects/&#123;&#125;/secrets/&#123;&#125;/versions/latest'</span>.format(project_id, secret_name)</span><br><span class="line">    res = client.access_secret_version(resource_name)</span><br><span class="line">    secret_string = res.payload.data.decode(<span class="string">'utf-8'</span>)</span><br><span class="line">    <span class="keyword">return</span> secret_string</span><br></pre></td></tr></table></figure><p>ãƒ©ã‚¤ãƒ–ãƒ©ãƒª<code>google-cloud-secret-manager</code>ãŒå¿…è¦ãªã®ã§ã€<code>requirements.txt</code>ã‚‚ä½œæˆã—ã¾ã—ã‚‡ã†ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">google-cloud-secret-manager==0.1.1</span><br></pre></td></tr></table></figure><h4 id="ãƒ‡ãƒ—ãƒ­ã‚¤-1"><a href="#ãƒ‡ãƒ—ãƒ­ã‚¤-1" class="headerlink" title="ãƒ‡ãƒ—ãƒ­ã‚¤"></a>ãƒ‡ãƒ—ãƒ­ã‚¤</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> gcloud <span class="built_in">functions</span> deploy print_secret \</span></span><br><span class="line">  --runtime python37 \</span><br><span class="line">  --trigger-http \</span><br><span class="line">  --allow-unauthenticated</span><br></pre></td></tr></table></figure><img src="/images/20200212/photo_20200212_06.png"><p>â€¦ãƒ‹ãƒƒã‚³ãƒªğŸ˜„</p><h2 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h2><p>ä½¿ã„æ–¹ã«ã¡ã‚‡ã„ã¨ã‚¯ã‚»ã¨ã„ã†ã‹ã€ãŠä½œæ³•ãŒã‚ã‚‹ã®ã§ã€ç¿’ã†ã‚ˆã‚Šæ…£ã‚Œã‚ã‚·ãƒªãƒ¼ã‚ºã ã¨æ€ã„ã¾ã™ã€‚<br>ã“ã‚Œã§ã‚‚ã†ã€ã‚«ã‚®ã®ç®¡ç†ã«å›°ã‚‹ã“ã¨ã¯ãªããªã£ã¦ã€å¹¸ã›ãªä¸–ç•ŒãŒå¾…ã£ã¦ã„ã‚‹ã“ã¨ã§ã—ã‚‡ã†ã€‚<br>ã”èˆˆå‘³ã®ã‚ã‚‹æ–¹ã¯ã€ãœã²è§¦ã£ã¦ã¿ã¦ã¯ã„ã‹ãŒã§ã—ã‚‡ã†ã‹ã€‚</p><h2 id="é–¢é€£ãƒªãƒ³ã‚¯"><a href="#é–¢é€£ãƒªãƒ³ã‚¯" class="headerlink" title="é–¢é€£ãƒªãƒ³ã‚¯"></a>é–¢é€£ãƒªãƒ³ã‚¯</h2><ul><li><a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCPé€£è¼‰ä¼ç”»</a></li><li><a href="https://future-architect.github.io/tags/GoCDK/">Go Cloudé€£è¼‰</a></li><li><a href="https://future-architect.github.io/articles/20190909/">Letâ€™s Try GCP #1 ï½Cloud Run Buttonã‚’ä½¿ã£ãŸæ¥½ã€…ã‚³ãƒ³ãƒ†ãƒŠãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ã‚„ã£ã¦ã¿ãŸï½</a></li><li><a href="https://future-architect.github.io/articles/20190927/">Letâ€™s Try GCP #2 ï½Cloud Functionã‚’VPC connectorã¨ä¸€ç·’ã«ä½¿ã£ã¦ã¿ã‚‹ï½</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰æ›¸ã&quot;&gt;&lt;a href=&quot;#å‰æ›¸ã&quot; class=&quot;headerlink&quot; title=&quot;å‰æ›¸ã&quot;&gt;&lt;/a&gt;å‰æ›¸ã&lt;/h2&gt;&lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€TIGæ‰€å±ã‚¤ãƒ³ãƒ•ãƒ©ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®å¸‚å·ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;çªç„¶ã§ã™ãŒã€æ™®æ®µç”Ÿæ´»ã™ã‚‹ã†ãˆã§ã‚«ã‚®ğŸ”‘ã‚’ãªãã—ãŸã€å¿˜ã‚ŒãŸã“ã¨ã¯ãª
      
    
    </summary>
    
      <category term="Infrastructure" scheme="https://future-architect.github.io/categories/Infrastructure/"/>
    
    
      <category term="Python" scheme="https://future-architect.github.io/tags/Python/"/>
    
      <category term="GCP" scheme="https://future-architect.github.io/tags/GCP/"/>
    
      <category term="Go" scheme="https://future-architect.github.io/tags/Go/"/>
    
      <category term="GCPé€£è¼‰" scheme="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/"/>
    
  </entry>
  
  <entry>
    <title>GCPé€£è¼‰#4 Cloud Life Sciencesã‚’è¦‹ã¦ã¿ãŸ</title>
    <link href="https://future-architect.github.io/articles/20200210/"/>
    <id>https://future-architect.github.io/articles/20200210/</id>
    <published>2020-02-10T02:53:19.000Z</published>
    <updated>2020-02-10T03:14:00.237Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><p>ã“ã‚“ã«ã¡ã¯ã€‚TIG/DXãƒãƒ¼ãƒ ã®<a href="https://twitter.com/kaedemalu" target="_blank" rel="noopener">ä¼Šè—¤</a>ã§ã™ã€‚ä»Šå›ã¯GCPé€£è¼‰ä¼ç”»ã®4æ—¥ç›®ã§ã™ã€‚</p><p>ã“ã‚Œã¾ã§ã®å†…å®¹ã¯<a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCPé€£è¼‰</a>ã«ã‚ã‚Šã¾ã™ã€‚</p><p>ã•ã¦ã€ç§ã¯æ¥­å‹™ã§ã¯GCPã¨Terraformã‚’æ‰±ã£ã¦ã„ã¾ã™ã€‚ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ»ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãªã©ãŒç¾åœ¨ã®æ¥­å‹™é ˜åŸŸã§ã§ã‚ã‚‹ä¸€æ–¹ã§ã€ãƒ“ãƒƒã‚°ãƒ‡ãƒ¼ã‚¿ãƒ»æ©Ÿæ¢°å­¦ç¿’é–¢é€£ã®ã‚µãƒ¼ãƒ“ã‚¹ã¯ã‚ã¾ã‚Šä½¿ã†æ©Ÿä¼šãŒãªãç†è§£ã‚‚ã¾ã ã¾ã ãªéƒ¨åˆ†ãŒå¤šã„ã§ã™ã€‚ä»Šå›ã¯ã€Cloud Life Sciencesã¨ã„ã†ã€ãƒ“ãƒƒã‚°ãƒ‡ãƒ¼ã‚¿ã®ä¸­ã§ã‚‚æ¯›è‰²ã®é•ã†ã‚µãƒ¼ãƒ“ã‚¹ã‚’èª¿ã¹ã¦ã¿ã‚ˆã†ã¨æ€ã„ã“ã®é€£è¼‰ã«å‚åŠ ã—ã¦ãŠã‚Šã¾ã™ã€‚å‰²ã¨èª­ã¿ç‰©ã«è¿‘ããªã£ãŸã®ã§ã•ã‚‰ã£ã¨èª­ã¿æµã—ã¦ã„ãŸã ã‘ã‚Œã°å¹¸ã„ã§ã™ã€‚</p><h2 id="ç§ã®ä»Šã¾ã§"><a href="#ç§ã®ä»Šã¾ã§" class="headerlink" title="ç§ã®ä»Šã¾ã§"></a>ç§ã®ä»Šã¾ã§</h2><p>æœ¬è¨˜äº‹ã‚’æ›¸ããŸã‚ã®ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã—ã¦ã¯æ˜”è©±ã‚’ã™ã“ã—æŒŸã¿ã¾ã™ã€‚ç¾åœ¨ã¯ã‚¤ãƒ³ãƒ•ãƒ©ã‚„ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦æ—¥ã€…åƒã„ã¦ã„ã¾ã™ãŒã€å¤§å­¦æ™‚ä»£ã¯åŒ–å­¦ã‚’å°‚æ”»ã—å¤§å­¦é™¢ã§ã¯æ„ŸæŸ“ç—‡ã‚’å°‚é–€ã«ç ”ç©¶ã—ã¦ã„ã¾ã—ãŸã€‚æœ€çµ‚çš„ã«éºä¼å­ã‚’è§¦ã‚‹ã“ã¨ãªãä¿®äº†ã—ã¾ã—ãŸãŒã€ç”Ÿç‰©ç³»ã«å°‘ã—ã§ã‚‚åœ¨ç±ã—ã¦ã„ãŸã“ã¨ã‚‚ã‚ã‚Šã€ä»Šå›ã¯ã‚ãšã‹ãªè¨˜æ†¶ã‚’é ¼ã‚ŠãªãŒã‚‰èª¿ã¹ã¦ã„ã¾ã™ã€‚ã“ã®è¨˜äº‹ãŒæœ€çµ‚çš„ã«ã‹ã¤ã¦ã®ç ”ç©¶ã®ä½•ã‹ã«ä½¿ãˆãŸã‹ã‚‚ã—ã‚Œãªã„ã¨ç§ã®ä¸­ã§çŸ¥è­˜ãŒè½ã¨ã—è¾¼ã‚ã‚Œã°ã„ã„ãªã¨è€ƒãˆã¦ã„ã¾ã™ã€‚</p><h2 id="Cloud-Life-Sciencesã«ã¤ã„ã¦"><a href="#Cloud-Life-Sciencesã«ã¤ã„ã¦" class="headerlink" title="Cloud Life Sciencesã«ã¤ã„ã¦"></a><a href="https://cloud.google.com/life-sciences" target="_blank" rel="noopener">Cloud Life Sciences</a>ã«ã¤ã„ã¦</h2><img src="/images/20200210/1.png" class="img-very-small-size"><p>GCPã®ä¸­ã§ã¯ãƒ“ãƒƒã‚°ãƒ‡ãƒ¼ã‚¿ã«å±ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã«ãªã‚Šã¾ã™ã€‚å¤§è¦æ¨¡ãªç”Ÿç‰©åŒ»å­¦ãƒ‡ãƒ¼ã‚¿ã®å‡¦ç†ã‚’è²»ç”¨å¯¾åŠ¹æœãŒé«˜ãã§ãã‚‹ã“ã¨ãŒã‚¦ãƒªã§ã€å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯<code>ãƒ©ã‚¤ãƒ• ã‚µã‚¤ã‚¨ãƒ³ã‚¹æ©Ÿé–¢ã¨å­¦è¡“ç ”ç©¶æ©Ÿé–¢å‘ã‘</code>ã¨ãªã£ã¦ã„ã¾ã™ã€‚ç‰¹ã«å¼·ãè¬³ã‚ã‚Œã¦ã„ã‚‹ã®ãŒã€ç ”ç©¶ã«é›†ä¸­ã§ãã‚‹ã“ã¨ã¨çµæœã®å†ç¾æ€§ã«ã§ã™ã€‚éºä¼å­æƒ…å ±ã¯ç‰¹ã«å¤§ããªãƒ‡ãƒ¼ã‚¿é‡ã«ãªã‚‹ã®ã§ã€å¾—ãŸãƒ‡ãƒ¼ã‚¿ã®æ¤œè¨¼ã‚’ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚¢ãƒƒãƒ—ã•ã›ã‚‹ã“ã¨ã¯ç ”ç©¶ã‚¹ãƒ”ãƒ¼ãƒ‰å…¨ä½“ã‚’ä¸Šã’ã‚‹ã“ã¨ã«ã‚‚ç¹‹ãŒã‚Šã¾ã™ã€‚</p><p>ã¾ãŸã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¯ä»¥ä¸‹ã«ãªã£ã¦ãŠã‚Šã€ã‚µãƒ¼ãƒ“ã‚¹å˜ä½“ã¨ã—ã¦ã§ã¯ãªãã€1ã¤ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¨ã—ã¦å‹•ãã‚ˆã†ã§ã™ã€‚<br><img src="/images/20200210/photo_20200210_01.png"><br>(å¼•ç”¨ï¼š<a href="https://cloud.google.com/life-sciences/?hl=ja" target="_blank" rel="noopener">https://cloud.google.com/life-sciences/?hl=ja</a>)</p><h3 id="VCF"><a href="#VCF" class="headerlink" title="VCF"></a>VCF</h3><p>Variant Call Formatã¨è¨€ã‚ã‚Œã‚‹ã€éºä¼å­é…åˆ—ã®å¤‰ç•°ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹ã¨ãã«åˆ©ç”¨ã•ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã«ãªã‚Šã¾ã™ã€‚ãƒ•ã‚¡ã‚¤ãƒ«å†…ã®è¨˜è¼‰å†…å®¹ã¯ä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚</p><ul><li>VCFãƒ˜ãƒƒãƒ€ãƒ¼è¡Œ(1~8è¡Œç›®)</li><li>ãƒ‡ãƒ¼ã‚¿ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆè¡Œ(ã‚«ãƒ©ãƒ ã‚¿ã‚¤ãƒˆãƒ«)<ul><li>æŸ“è‰²ä½“ç•ªå·</li><li>å¡©åŸºã®ä½ç½®</li><li>å¡©åŸº(å¤‰ç•°ç®‡æ‰€)ã®ID</li><li>ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹é…åˆ—ä¸Šã®å¡©åŸº</li><li>ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ãƒ‡ãƒ¼ã‚¿ä¸Šã®å¡©åŸº</li><li>ã‚·ãƒ¼ã‚±ãƒ³ã‚·ãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ã®ã‚¹ã‚³ã‚¢</li><li>ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ¡ä»¶ã®é€šéã®æœ‰ç„¡</li><li>key:dataã®å½¢ã®è¿½åŠ æƒ…å ±</li></ul></li></ul><p>ã“ã®ã‚ˆã†ãªå½¢ã§ã‚·ãƒ¼ã‚±ãƒ³ã‚¹çµæœã‚’è¨˜è¼‰ã—ã¦ã„ã¾ã™ã€‚DNAã®å¡©åŸºé…åˆ—ã«ã¤ã„ã¦ã¯ã‚¢ãƒ‡ãƒ‹ãƒ³(A)ã€ãƒãƒŸãƒ³(T)ã€ã‚°ã‚¢ãƒ‹ãƒ³(G)ã€ã‚·ãƒˆã‚·ãƒ³(C)ã®4ç¨®é¡ãŒã‚ã‚Šã¾ã™ãŒã€ãã‚Œãã‚Œã€A=Tã€Gâ‰¡Cã¨ã—ã¦ãƒšã‚¢ã«ãªã£ã¦ã„ã‚‹ã®ã§ãœã²è©¦ã™ã¨ãã«ã¯æ€ã„å‡ºã—ã¦ã¿ã¦ãã ã•ã„ã€‚ã¾ãŸå¾Œã®ã‚¯ã‚¨ãƒªã«ä½¿ã„ã¾ã™ã€‚</p><h3 id="Variant-Transformsãƒ„ãƒ¼ãƒ«"><a href="#Variant-Transformsãƒ„ãƒ¼ãƒ«" class="headerlink" title="Variant Transformsãƒ„ãƒ¼ãƒ«"></a><a href="https://github.com/googlegenomics/gcp-variant-transforms" target="_blank" rel="noopener">Variant Transforms</a>ãƒ„ãƒ¼ãƒ«</h3><p>ã“ã¡ã‚‰ã®ãƒ„ãƒ¼ãƒ«ã¯GoogleãŒä½œæˆã—ãŸã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã«ãªã‚Šã¾ã™ã€‚å®Ÿéš›ã«BigQueryã«èª­ã¿è¾¼ã¾ã›ã‚‹ãŸã‚ã«ã¯ãƒ‡ãƒ¼ã‚¿ã®åŠ å·¥ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã®ã§ã€ã“ã¡ã‚‰ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦åˆ†æã«æœ€é©ãªå½¢ã§å‡ºåŠ›ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚å®Ÿéš›ã®ãƒ•ãƒ­ãƒ¼ã«ã¯DataflowãŒä½¿ç”¨ã•ã‚Œã¦ãŠã‚Šã€BigQueryã§åˆ†æã™ã‚‹ã¾ã§ã¯ä»¥ä¸‹ã®å›³ã«ãªã‚Šã¾ã™ã€‚</p><h2 id="å®Ÿéš›ã«æµã‚Œã‚’æ´ã‚€"><a href="#å®Ÿéš›ã«æµã‚Œã‚’æ´ã‚€" class="headerlink" title="å®Ÿéš›ã«æµã‚Œã‚’æ´ã‚€"></a>å®Ÿéš›ã«æµã‚Œã‚’æ´ã‚€</h2><p>å®Ÿéš›ã«å…¬é–‹ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä½¿ã£ã¦ãƒãƒªã‚¢ãƒ³ãƒˆã‚’ä½¿ã£ã¦å°‘ã—ã„ã˜ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã“ã“ã¯å®Ÿéš›ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã®ä¸€éƒ¨ã‚’è¡Œãªã£ã¦ã„ã‚‹ã®ã§ã€æœ¬è¨˜äº‹ä»¥å¤–ã®æ–¹æ³•ã‚’è©¦ã—ãŸã„æ–¹ã¯<a href="https://cloud.google.com/life-sciences/docs/how-tos/variant-transforms" target="_blank" rel="noopener">ã“ã¡ã‚‰</a>ã‹ã‚‰ç¢ºèªã—ã¦ãã ã•ã„ã€‚Cloud Consoleã§è¡Œã†ã¨ã‚¯ãƒªãƒ¼ãƒ³ã«é€²ã‚ã‚‰ã‚Œã¾ã™ã€‚</p><h3 id="GCSã‹ã‚‰Variant-Transformsãƒ„ãƒ¼ãƒ«ã‹ã‚‰BigQueryã«é€ã‚‹"><a href="#GCSã‹ã‚‰Variant-Transformsãƒ„ãƒ¼ãƒ«ã‹ã‚‰BigQueryã«é€ã‚‹" class="headerlink" title="GCSã‹ã‚‰Variant Transformsãƒ„ãƒ¼ãƒ«ã‹ã‚‰BigQueryã«é€ã‚‹"></a>GCSã‹ã‚‰Variant Transformsãƒ„ãƒ¼ãƒ«ã‹ã‚‰BigQueryã«é€ã‚‹</h3><p>GCSã«ãƒãƒªã‚¢ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…ç½®ã—ãŸã‚‰å®Ÿéš›ã«ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã„ã¾ã™ã€‚ä½¿ã†ãŸã‚ã«ã¯å…¬å¼ã®Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ãŒã‚ã‚‹ã®ã§ã“ã¡ã‚‰ã‚’è½ã¨ã—ã¦ãã¾ã™ã€‚ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒ2GBè¿‘ãã‚ã‚‹ã®ã§ã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã¯æ°—é•·ã«å¾…ã¡ã¾ã—ã‚‡ã†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker pull gcr.io/cloud-lifesciences/gcp-variant-transforms</span><br></pre></td></tr></table></figure><p>æ¬¡ã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™ã€‚å¤‰æ•°ã¯å®Ÿéš›ã«ä½¿ã£ã¦ã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã€ãƒã‚±ãƒƒãƒˆãªã©ã«ç½®ãæ›ãˆã¦ãã ã•ã„ã€‚</p><figure class="highlight sh"><figcaption><span>script.sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># Parameters to replace:</span></span><br><span class="line"><span class="comment"># The GOOGLE_CLOUD_PROJECT is the project that contains your BigQuery dataset.</span></span><br><span class="line">GOOGLE_CLOUD_PROJECT=GOOGLE_CLOUD_PROJECT</span><br><span class="line">INPUT_PATTERN=gs://BUCKET/*.vcf</span><br><span class="line">OUTPUT_TABLE=GOOGLE_CLOUD_PROJECT:BIGQUERY_DATASET.BIGQUERY_TABLE</span><br><span class="line">TEMP_LOCATION=gs://BUCKET/temp</span><br><span class="line"></span><br><span class="line">COMMAND=<span class="string">"vcf_to_bq \</span></span><br><span class="line"><span class="string">    --input_pattern <span class="variable">$&#123;INPUT_PATTERN&#125;</span> \</span></span><br><span class="line"><span class="string">    --output_table <span class="variable">$&#123;OUTPUT_TABLE&#125;</span> \</span></span><br><span class="line"><span class="string">    --temp_location <span class="variable">$&#123;TEMP_LOCATION&#125;</span> \</span></span><br><span class="line"><span class="string">    --job_name vcf-to-bigquery \</span></span><br><span class="line"><span class="string">    --runner DataflowRunner"</span></span><br><span class="line">docker run -v ~/.config:/root/.config \</span><br><span class="line">    gcr.io/cloud-lifesciences/gcp-variant-transforms \</span><br><span class="line">    --project <span class="string">"<span class="variable">$&#123;GOOGLE_CLOUD_PROJECT&#125;</span>"</span> \</span><br><span class="line">    --zones us-west1-b \</span><br><span class="line">    <span class="string">"<span class="variable">$&#123;COMMAND&#125;</span>"</span></span><br></pre></td></tr></table></figure><p>ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œå¾Œã¯æ™‚é–“ãŒã‹ã‹ã‚‹ã‚ˆã†ãªã®ã§ã€ã“ã‚Œã‚‚æ°—é•·ã«å¾…ã¡ã¾ã™ã€‚<br>å®Ÿè¡ŒãŒçµ‚ã‚ã£ãŸã‚‰<code>bq</code>ã‚³ãƒãƒ³ãƒ‰ã§ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆãŒã‚ã‚‹ã‹ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bq ls --format=pretty GOOGLE_CLOUD_PROJECT:BIGQUERY_DATASET</span><br></pre></td></tr></table></figure><p>ã“ã‚Œã§Variant Transformãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’BigQueryã«é©ã—ãŸå½¢ã«ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã—ãŸã€‚</p><h3 id="BigQueryã«èª­ã¿è¾¼ã¾ã›ã‚‹"><a href="#BigQueryã«èª­ã¿è¾¼ã¾ã›ã‚‹" class="headerlink" title="BigQueryã«èª­ã¿è¾¼ã¾ã›ã‚‹"></a>BigQueryã«èª­ã¿è¾¼ã¾ã›ã‚‹</h3><p>ã“ã¡ã‚‰ã§ã¯å…¬é–‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦ãƒãƒªã‚¢ãƒ³ãƒˆã®åˆ†æã‚’è¡Œã„ã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨ã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯<a href="https://www.illumina.com/platinumgenomes.html" target="_blank" rel="noopener">Illumina Platinum Genomes</a>ã€ãƒ†ãƒ¼ãƒ–ãƒ«åã¯<code>platinum_genomes_deepvariant_variants_20180823</code>ã«ãªã‚Šã¾ã™ã€‚å®Ÿéš›ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ï¼•ä»¶å‡ºåŠ›ã—ã¾ã—ãŸã€‚<br><img src="/images/20200210/photo_20200210_02.png"></p><p>å®Ÿéš›ã«æµã™ã‚¯ã‚¨ãƒªã¯ä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">WITH</span> filtered_snp_calls <span class="keyword">AS</span> (</span><br><span class="line">   <span class="keyword">SELECT</span></span><br><span class="line">     reference_name,</span><br><span class="line">     c.name,</span><br><span class="line">     <span class="keyword">CONCAT</span>(reference_bases, <span class="string">'-&gt;'</span>, alternate_bases[ORDINAL(<span class="number">1</span>)].alt) <span class="keyword">AS</span> mutation</span><br><span class="line">   <span class="keyword">FROM</span></span><br><span class="line">     <span class="string">`bigquery-public-data.human_genome_variants.platinum_genomes_deepvariant_variants_20180823`</span> <span class="keyword">AS</span> v, <span class="keyword">UNNEST</span>(v.call) <span class="keyword">AS</span> c</span><br><span class="line">   <span class="keyword">WHERE</span></span><br><span class="line">     <span class="comment"># Only include biallelic SNPs.</span></span><br><span class="line">     reference_bases <span class="keyword">IN</span> (<span class="string">'A'</span>,<span class="string">'C'</span>,<span class="string">'G'</span>,<span class="string">'T'</span>)</span><br><span class="line">     <span class="keyword">AND</span> alternate_bases[ORDINAL(<span class="number">1</span>)].alt <span class="keyword">IN</span> (<span class="string">'A'</span>,<span class="string">'C'</span>,<span class="string">'G'</span>,<span class="string">'T'</span>)</span><br><span class="line">     <span class="keyword">AND</span> (ARRAY_LENGTH(alternate_bases) = <span class="number">1</span></span><br><span class="line">       <span class="keyword">OR</span> (ARRAY_LENGTH(alternate_bases) = <span class="number">2</span> <span class="keyword">AND</span> alternate_bases[ORDINAL(<span class="number">2</span>)].alt = <span class="string">'&lt;*&gt;'</span>))</span><br><span class="line">     <span class="comment"># Skip homozygous reference calls and no-calls.</span></span><br><span class="line">     <span class="keyword">AND</span> <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> g <span class="keyword">FROM</span> <span class="keyword">UNNEST</span>(c.genotype) <span class="keyword">AS</span> g <span class="keyword">WHERE</span> g &gt; <span class="number">0</span>)</span><br><span class="line">     <span class="keyword">AND</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> g <span class="keyword">FROM</span> <span class="keyword">UNNEST</span>(c.genotype) <span class="keyword">AS</span> g <span class="keyword">WHERE</span> g &lt; <span class="number">0</span>)</span><br><span class="line">     <span class="comment"># Include only high quality calls.</span></span><br><span class="line">     <span class="keyword">AND</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> ft <span class="keyword">FROM</span> <span class="keyword">UNNEST</span>(c.filter) ft <span class="keyword">WHERE</span> ft <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="string">'PASS'</span>, <span class="string">'.'</span>))</span><br><span class="line"> ),</span><br><span class="line"></span><br><span class="line"> mutation_type_counts <span class="keyword">AS</span> (</span><br><span class="line">   <span class="keyword">SELECT</span></span><br><span class="line">     reference_name,</span><br><span class="line">     <span class="keyword">name</span>,</span><br><span class="line">     <span class="keyword">SUM</span>(<span class="keyword">CAST</span>(mutation <span class="keyword">IN</span> (<span class="string">'A-&gt;G'</span>, <span class="string">'G-&gt;A'</span>, <span class="string">'C-&gt;T'</span>, <span class="string">'T-&gt;C'</span>) <span class="keyword">AS</span> INT64)) <span class="keyword">AS</span> transitions,</span><br><span class="line">     <span class="keyword">SUM</span>(<span class="keyword">CAST</span>(mutation <span class="keyword">IN</span> (<span class="string">'A-&gt;C'</span>, <span class="string">'C-&gt;A'</span>, <span class="string">'G-&gt;T'</span>, <span class="string">'T-&gt;G'</span>,</span><br><span class="line">                           <span class="string">'A-&gt;T'</span>, <span class="string">'T-&gt;A'</span>, <span class="string">'C-&gt;G'</span>, <span class="string">'G-&gt;C'</span>) <span class="keyword">AS</span> INT64)) <span class="keyword">AS</span> transversions</span><br><span class="line">   <span class="keyword">FROM</span> filtered_snp_calls</span><br><span class="line">   <span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">     reference_name,</span><br><span class="line">     <span class="keyword">name</span></span><br><span class="line"> )</span><br><span class="line"></span><br><span class="line"> <span class="keyword">SELECT</span></span><br><span class="line">   reference_name,</span><br><span class="line">   <span class="keyword">name</span>,</span><br><span class="line">   transitions,</span><br><span class="line">   transversions,</span><br><span class="line">   transitions/transversions <span class="keyword">AS</span> titv</span><br><span class="line"> <span class="keyword">FROM</span> mutation_type_counts</span><br><span class="line"> <span class="keyword">WHERE</span></span><br><span class="line">   transversions &gt; <span class="number">0</span></span><br><span class="line"> <span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">   titv <span class="keyword">DESC</span>,</span><br><span class="line">   <span class="keyword">name</span></span><br></pre></td></tr></table></figure><p><code>mutation_type_counts</code>ã®ã¨ã“ã‚ã§ã€æ­£ç¢ºã«ãƒšã‚¢ã«ãªã£ã¦ã„ã‚‹å¡©åŸºå¯¾(A=Tã€ã‚‚ã—ãã¯Gâ‰¡C)ã«ã¤ã„ã¦ã¯<code>transitions</code>ã€æ­£ã—ã„ãƒšã‚¢ã«ãªã£ã¦ã„ãªã„å¡©åŸºå¯¾ã¯<code>transversions</code>(å¤‰ç•°)ã—ã¦ã„ã‚‹ã‚‚ã®ã‚’ãã‚Œãã‚Œintå‹ã«CASTã—ã¦åˆè¨ˆã‚’å–ã£ã¦ã„ã¾ã™ã€‚ä¸Šè¨˜ã‚¯ã‚¨ãƒªã‚’BigQueryã«æµã™ã¨ä»¥ä¸‹ã®çµæœãŒå‡ºåŠ›ã•ã‚Œã¾ã™(ä¸Šè¨˜10ä»¶)ã€‚</p><table><thead><tr><th>è¡Œ</th><th>referencce_name</th><th>name</th><th>transitions</th><th>transversions</th><th>titv</th></tr></thead><tbody><tr><td>1</td><td>chr22</td><td>NA12892</td><td>35299</td><td>15017</td><td>2.3506026503296265</td></tr><tr><td>2</td><td>chr22</td><td>NA12889</td><td>34091</td><td>14624</td><td>2.331167943107221</td></tr><tr><td>3</td><td>chr17</td><td>NA12892</td><td>67297</td><td>28885</td><td>2.3298251687727194</td></tr><tr><td>4</td><td>chr22</td><td>NA12878</td><td>33627</td><td>14439</td><td>2.3289008934136715</td></tr><tr><td>5</td><td>chr22</td><td>NA12877</td><td>34751</td><td>14956</td><td>2.3235490772933938</td></tr><tr><td>6</td><td>chr22</td><td>NA12891</td><td>33534</td><td>14434</td><td>2.323264514341139</td></tr><tr><td>7</td><td>chr17</td><td>NA12877</td><td>70600</td><td>30404</td><td>2.3220628864623074</td></tr><tr><td>8</td><td>chr17</td><td>NA12878</td><td>66010</td><td>28475</td><td>2.3181738366988585</td></tr><tr><td>9</td><td>chr17</td><td>NA12890</td><td>67242</td><td>29057</td><td>2.314141170802216</td></tr><tr><td>10</td><td>chr17</td><td>NA12889</td><td>69767</td><td>30189</td><td>2.311007320547219</td></tr></tbody></table><p>æœ€çµ‚åˆ—ã®<code>titv</code>ã§ã¯æ­£ã—ã„ãƒšã‚¢ã€ãŠã‚ˆã³å¤‰ç•°ã®å…¥ã£ãŸãƒšã‚¢ã®æ¯”ã‚’ã¨ã£ã¦ã„ã‚‹ã®ã§ã€å„ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã«å¯¾ã—ã¦ã©ã‚Œãã‚‰ã„å¤‰ç•°ã¯å…¥ã£ã¦ã„ã‚‹ã‹ãŒã‚ã‹ã‚Šã¾ã™ã€‚ã“ã“ã§ã¯20 GBã»ã©èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™ãŒã€å®Ÿéš›ã«ã‚¯ã‚¨ãƒªã«ã‹ã‹ã£ãŸæ™‚é–“ã¯1ç§’ã‚’åˆ‡ã£ã¦ã„ã‚‹ã®ã§ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§åŒæ§˜ã®ã‚¯ã‚¨ãƒªå®Ÿè¡Œã™ã‚‹ã‚ˆã‚Šã¯ã¯ã‚‹ã‹ã«æ—©ã„ã§ã—ã‚‡ã†ã€‚</p><h2 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h2><p>æœ¬è¨˜äº‹ã§ã¯ç°¡å˜ã§ã™ãŒã€Cloud Life Sciencesã‚’è§¦ã‚‹è¨˜äº‹ã‚’æ›¸ã„ã¦ãã¾ã—ãŸã€‚ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦åˆ†æã«ä½¿ã†ã‚‚ã®ã¯ã†ã£ã™ã‚‰ç†è§£ã—ã¦ã„ã¦ã‚‚ã€å®Ÿéš›ã«ä½¿ã†ãƒ•ã‚¡ã‚¤ãƒ«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãªã©ã¯çŸ¥è­˜ãŒæ·±ããªã„ã¨ãã‚‚ãã‚‚ä½•ã‚‚ã§ããªã„ãªã¨æ”¹ã‚ã¦æ„Ÿã˜ãŸã¨ã“ã‚ã§ã™ã€‚ä»Šå›ã¯VCFãƒ•ã‚¡ã‚¤ãƒ«ã¨ã„ã†å°‚é–€çš„ãªãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰BigQueryã«æµã™ã¨ã“ã‚ã¾ã§è¡Œã„ã¾ã—ãŸãŒã€Cloud Life Sciencesã¯ã‚‚ã¨ã‚‚ã¨ Google Genomicsã¨ã„ã†ã‚µãƒ¼ãƒ“ã‚¹ã ã£ãŸã‚ˆã†ã§ã€ä»¥å‰ã‚ˆã‚ŠGoogleãŒåŠ›ã‚’å…¥ã‚Œã¦ã„ãŸéƒ¨åˆ†ã®ä¸€ã¤ã§ã‚ã‚‹ã“ã¨ãŒä»Šå›è‰²ã€…èª¿ã¹ã¦ã‚ã‹ã‚Šã¾ã—ãŸã€‚åŒ»ç™‚åˆ†é‡ã¯æ­£ç¢ºã•ã‚’æ±‚ã‚ã‚‰ã‚Œã‚‹ä¸€æ–¹ã§ã€ãã®ãƒ‡ãƒ¼ã‚¿é‡ã¯è†¨å¤§ãªé‡ã«ãªã‚Šã¾ã™ã€‚å¤§å­¦é™¢æ™‚ä»£ã«è‚Œã§æ„Ÿã˜ãŸã“ã¨ã§ã™ãŒã€ãƒ­ãƒ¼ã‚«ãƒ«ã§åˆ†æã—ã¦ã„ã‚‹å…ˆè¼©ãŒã‹ãªã‚Šæ™‚é–“ã‚’ã‹ã‘ã¦ã„ãŸã“ã¨ã‚’æ€ã„å‡ºã—ã¾ã—ãŸã€‚ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ã®çŸ¥ååº¦ãŒä¸ŠãŒã‚‹ã¨ã¨ã‚‚ã«ã€ç ”ç©¶ãƒ¦ãƒ¼ã‚¹ã€éã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã§ã‚‚ä½¿ã„ã‚„ã™ã„ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã«ãªã‚‹ã¨ã‚ˆã‚Šè‰¯ã„ãªã¨æ€ã„ã¾ã—ãŸã€‚</p><p>æ˜æ—¥ã¯ç¥æ—¥ãªã®ã§æ¬¡å›æ›´æ–°ã¯æ°´æ›œæ—¥ã§ã™ã€‚ãŠæ¥½ã—ã¿ã«ï¼</p><h2 id="æœ€å¾Œã«"><a href="#æœ€å¾Œã«" class="headerlink" title="æœ€å¾Œã«"></a>æœ€å¾Œã«</h2><p>å…ˆæ—¥ã€GCPã®Professional Cloud Architectã«åˆæ ¼ã—ã¾ã—ãŸï¼çµæœãŒå‡ºåŠ›ã•ã‚Œã‚‹ç¬é–“ã¯ãªã‹ãªã‹ãƒ‰ã‚­ãƒ‰ã‚­ã§ã—ãŸãŒã€ãªã‚“ã¨ã‹åˆæ ¼ã§ãã¾ã—ãŸã€‚ç§ã‚‚å‚è€ƒã«ã—ã¾ã—ãŸãŒã€æœ¬æŠ€è¡“ãƒ–ãƒ­ã‚°ã§ã‚‚åˆæ ¼ä½“é¨“è¨˜ã‚’å‡ºã—ã¦ãŠã‚Šã¾ã™ã®ã§ã€ãã¡ã‚‰ã‚‚ãœã²ã”è¦§ãã ã•ã„ï¼<br><a href="https://future-architect.github.io/articles/20190530/">ã€åˆæ ¼è¨˜ã€‘GCP Professional Cloud Architectèªå®šè³‡æ ¼ã‚’æŒ¯ã‚Šè¿”ã‚‹</a></p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://bi.biopapyrus.jp/gwas/vcf.html" target="_blank" rel="noopener">VFC ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ç‰¹å¾´ãŠã‚ˆã³ Python ã§ãƒ‘ãƒ¼ã‚¹ã™ã‚‹æ–¹æ³•</a></p><hr><h2 id="é–¢é€£ãƒªãƒ³ã‚¯"><a href="#é–¢é€£ãƒªãƒ³ã‚¯" class="headerlink" title="é–¢é€£ãƒªãƒ³ã‚¯"></a>é–¢é€£ãƒªãƒ³ã‚¯</h2><ul><li><a href="https://future-architect.github.io/articles/20190909/">Letâ€™s Try GCP #1 ï½Cloud Run Buttonã‚’ä½¿ã£ãŸæ¥½ã€…ã‚³ãƒ³ãƒ†ãƒŠãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ã‚„ã£ã¦ã¿ãŸï½</a></li><li><a href="https://future-architect.github.io/articles/20190927/">Letâ€™s Try GCP #2 ï½Cloud Functionã‚’VPC connectorã¨ä¸€ç·’ã«ä½¿ã£ã¦ã¿ã‚‹ï½</a></li><li><a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCPé€£è¼‰ä¼ç”»</a></li><li><a href="https://future-architect.github.io/tags/GoCDK/">Go Cloudé€£è¼‰</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h2&gt;&lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€‚TIG/DXãƒãƒ¼ãƒ ã®&lt;a href=&quot;https://twitter.com/kaedemalu&quot; target
      
    
    </summary>
    
      <category term="Infrastructure" scheme="https://future-architect.github.io/categories/Infrastructure/"/>
    
    
      <category term="GCP" scheme="https://future-architect.github.io/tags/GCP/"/>
    
      <category term="GCPé€£è¼‰" scheme="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/"/>
    
  </entry>
  
  <entry>
    <title>golang.tokyo #29ã«4åã§ç™»å£‡ã—ã¾ã—ãŸ</title>
    <link href="https://future-architect.github.io/articles/20200209/"/>
    <id>https://future-architect.github.io/articles/20200209/</id>
    <published>2020-02-09T11:01:05.000Z</published>
    <updated>2020-02-10T11:05:24.520Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>ã“ã‚“ã«ã¡ã¯ã€‚TIG DXãƒ¦ãƒ‹ãƒƒãƒˆã®çœŸé‡ã§ã™ã€‚å…ˆæ—¥é–‹å‚¬ã•ã‚ŒãŸ<a href="https://golangtokyo.connpass.com/event/164955/" target="_blank" rel="noopener">golang.tokyo #29</a> ã«TIG DXãƒ¦ãƒ‹ãƒƒãƒˆã‹ã‚‰æ¸‹å·ã€è¾»ã€çœŸé‡ã¨ã€å½“ç¤¾ã‚¢ãƒ«ãƒã‚¤ãƒˆã®æœ¬ç”°ã•ã‚“ã®è¨ˆ4åãŒç™»å£‡ã—ã¾ã—ãŸã€‚</p><p>29å›ç›®ã¨ãªã‚‹golang.tokyoã¯ä»Šå›å§‹ã‚ã¦Futureã®ã‚ªãƒ•ã‚£ã‚¹ã§é–‹å‚¬ã•ã›ã¦ã„ãŸã ãã“ã¨ã«ãªã‚Šã¾ã—ãŸã€‚budougumi0617ã•ã‚“ã‚’å§‹ã‚é‹å–¶ã®æ–¹ã€…ã€ãŠã‚ˆã³æ¥ã¦ã„ãŸã ã„ãŸæ–¹ã€…ã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼</p><p>ğŸ¤å½“æ—¥ã®æ§˜å­<br><img src="/images/20200209/photo_20200210_01.jpeg" class="img-middle-size"></p><p>ä»Šæ€ã†ã¨29å›ç›®ã¨ã„ã†ã“ã¨ã§è‚‰ğŸ–ã‚’æº–å‚™ã™ã‚Œã°è‰¯ã‹ã£ãŸã®ã§ã™ãŒã€è‡ªç„¶ã¨ãƒ”ã‚¶ğŸ•ã¨ãƒ‰ãƒªãƒ³ã‚¯ğŸ¹ã‚’ç”¨æ„ã—ã¦ã—ã¾ã„ã¾ã—ãŸã€‚æ¬¡ã‹ã‚‰ã¯ã‚‚ã£ã¨ã‚¦ã‚£ãƒƒãƒˆã«å¯Œã‚“ã é‹å–¶ã‚’å¿ƒãŒã‘ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><h1 id="ç™»å£‡å†…å®¹ã«ã¤ã„ã¦"><a href="#ç™»å£‡å†…å®¹ã«ã¤ã„ã¦" class="headerlink" title="ç™»å£‡å†…å®¹ã«ã¤ã„ã¦"></a>ç™»å£‡å†…å®¹ã«ã¤ã„ã¦</h1><p>ä»Šå›ã¯Umeda.goã§ç™ºè¡¨ã•ã‚Œã¦å¥½è©•ã ã£ãŸäº‹ä¾‹ã‚’å†æ¼”ã™ã‚‹ã¨ã„ã†ã“ã¨ã§ã€è³‡æ–™ã¯ <a href="https://future-architect.github.io/articles/20200127/">Umeda.go 2020 Winterã«3åã§ç™»å£‡ã—ã¾ã—ãŸ</a> ã‚’å¾¡è¦§ãã ã•ã„ã€‚ä»Šå›ãŒäººç”ŸåˆğŸ”°ã®å‹‰å¼·ä¼šç™»å£‡ã§ã‚ã£ãŸæœ¬ç”°ã•ã‚“ã®ç™ºè¡¨ã¯æœ¬äººã‹ã‚‰æ„Ÿæƒ³ã‚’èã„ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><h1 id="ebitenã§IoTå¯è¦–åŒ–"><a href="#ebitenã§IoTå¯è¦–åŒ–" class="headerlink" title="ebitenã§IoTå¯è¦–åŒ–"></a>ebitenã§IoTå¯è¦–åŒ–</h1><script async class="speakerdeck-embed" data-slide="1" data-id="f280d9e36d834062b0a7cb353c93846f" data-ratio="1.77777777777778" src="//speakerdeck.com/assets/embed.js"></script><p>golang.tokyoåˆå‚åŠ ãƒ»åˆç™»å£‡ã•ã›ã¦ã„ãŸã ã„ãŸæœ¬ç”°ã§ã™ã€‚ç™»å£‡è€…ã¨ã—ã¦ç«‹ãŸã›ã¦ã„ãŸã ã„ãŸã“ã¨ã€ãã—ã¦ä»–ã®ç™»å£‡è€…ã®æ–¹ã®ãŠè©±ã‚„ã€æ‡‡è¦ªä¼šã§ã®äº¤æµãªã©ã€æœ¬å½“ã«ã„ã„çµŒé¨“ã«ãªã£ãŸã¨æ€ã„ã¾ã™ã€‚</p><p>å¼Šç¤¾ã§ã®ãƒ›ãƒ¼ãƒ é–‹å‚¬ã§ã€ãŸã£ãŸ5åˆ†ã®LTã ã£ãŸã«ã‚‚ã‹ã‹ã‚ã‚‰ãšãƒ‰ç·Šå¼µã§ã€æ‹™ã„ç‚¹ã‚‚ã‚ã‚Šã¾ã—ãŸãŒï¼ˆãƒ‡ãƒ¢ã¨è¨€ã„ã¤ã¤åˆã£ç«¯ã‹ã‚‰å‹•ç”»ã«é ¼ã£ãŸã‚Šã€è³ªå•ã§ã‚ãŸãµãŸã—ã¦å¼Šç¤¾ç¤¾å“¡ã®æ–¹ã«é ¼ã‚Šã¾ãã£ãŸã‚Šâ€¦ï¼‰ã€è‡ªåˆ†ãŒä»Šã¾ã§å–ã‚Šçµ„ã‚“ã§ã„ãŸGoã§ã®ã‚²ãƒ¼ãƒ é–‹ç™ºã«ã¤ã„ã¦ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã§ãã¦ã¨ã¦ã‚‚è‰¯ã‹ã£ãŸã§ã™ã€‚æ¸©ã‹ãè¦‹å®ˆã£ã¦ãã ã•ã£ãŸçš†æ§˜ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚</p><p>ã¾ãŸã€è³ªå•ã‚„æ‡‡è¦ªä¼šã§ã¯ebitené–‹ç™ºè€…ã®æ˜Ÿã•ã‚“ã‚’ã¯ã˜ã‚ã€æ§˜ã€…ãªæ–¹ã‹ã‚‰ã‚ã‚‰ã‚†ã‚‹çŸ¥è¦‹ã‚’å¾—ã‚‹ã“ã¨ãŒã§ããŸã“ã¨ã€å¼Šç¤¾ã®ç¤¾å“¡ã®æ–¹ã€…ã‹ã‚‰ã‚‚ã“ã†ã„ã£ãŸå ´ã§æ”¹ã‚ã¦å¤šãã‚’å­¦ã°ã›ã¦ã„ãŸã ã„ãŸã“ã¨ãªã©ãªã©ã€å¤šãã®æ„å‘³ã§æœ¬å½“ã«å‹‰å¼·ã«ãªã‚Šã¾ã—ãŸï¼ï¼</p><p>ã¾ãŸã“ã†ã„ã£ãŸãƒãƒ£ãƒ³ã‚¹ãŒã‚ã‚Œã°ã€ã©ã‚“ã©ã‚“æŒ‘æˆ¦ã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚ç™»å£‡çµŒé¨“ãŒã¾ã ãªã„æ–¹ã‚‚ã€golang.tokyoã¯æ¸©ã‹ãç´ æ•µãªã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãªã®ã§ãœã²æŒ‘æˆ¦ã—ã¦ã¿ã¦ãã ã•ã„ã€‚</p><h1 id="è³ªç–‘å¿œç­”"><a href="#è³ªç–‘å¿œç­”" class="headerlink" title="è³ªç–‘å¿œç­”"></a>è³ªç–‘å¿œç­”</h1><p>å„ç™»å£‡å¾Œã®è³ªå•ã‚¿ã‚¤ãƒ ã‚„ã€æœ€å¾Œã®æ‡‡è¦ªä¼šã§æ§˜ã€…ãªè³ªå•ã‚„æ´»ç™ºãªæ„è¦‹äº¤æ›ãŒã§ãã¾ã—ãŸã€‚å°‘ã—ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«ãŒå…¥ã£ã¦ã„ãŸãŸã‚è¦šãˆã¦ã„ã‚‹ç¯„å›²ã«ãªã‚Šã¾ã™ãŒã€è©±ã—ãŸå†…å®¹ã‚’ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><p>æ‡‡è¦ªä¼šã§ã¯cuelangãªã©ã€æŠ€è¡“ãƒ–ãƒ­ã‚°ã§æ›¸ã„ãŸå†…å®¹ã«ã¤ã„ã¦ã‚‚è³ªå•ã‚’å—ã‘ãŸã‚Šã—ã¾ã—ãŸã€‚æŠ€è¡“ãƒ–ãƒ­ã‚°ã¯æ›¸ã„ãŸç¬é–“ã«ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãªã©ã§åå¿œãŒå°‘ã—ã¯è¦‹ã‚‰ã‚ŒãŸã‚Šã¯ã—ã¾ã™ãŒã€ç›´æ¥åå¿œãŒã‚ã‚‹ã¨ã†ã‚Œã—ã„ã§ã™ã­ã€‚</p><ul><li><p>Goãªã‚‰ã‚ã‹ã‚‹ãƒ©ãƒƒãƒ‘ãƒ¼ã‚³ãƒãƒ³ãƒ‰ä½œæˆã§å­¦ã¶ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ï¼ˆæ¾å·ï¼‰</p><ul><li>ä»Šå›ã¯é‹å–¶å…¼ç™ºè¡¨ã§å‚åŠ ã—ã¾ã—ãŸã€‚å†æ¼”ã®ä¾é ¼ã‚’budougumiã•ã‚“ã‹ã‚‰ã„ãŸã ãã¾ã—ãŸãŒã€ä»Šå›ã¯40åˆ†ã®å†…å®¹ã‚’20åˆ†ã§å·»ãã§ç™ºè¡¨ã—ã¾ã—ãŸã€‚ä»•äº‹ã®ä¸­ã§ã¡ã‚‡ã£ã¨ã—ãŸãƒ„ãƒ¼ãƒ«ã‚’ä½œã£ã¦æ¥­å‹™ã‚’æ”¹å–„ã—ãŸã‚Šå…¬é–‹ã™ã‚‹ã¨ã„ã†ã®ã«Goã¯æœ€é©ã ã¨æ€ã„ã¾ã™ã€‚ä»Šå›ä½œã£ãŸãƒ„ãƒ¼ãƒ«ã¯ã€ä»Šå¾Œã¯æ¥­å‹™ã«ãã¡ã‚“ã¨é©ç”¨ã—ã¦ãƒ–ãƒ©ãƒƒã‚·ãƒ¥ã‚¢ãƒƒãƒ—ã•ã›ã¦ã„ããŸã„ã§ã™ã—ã€ã‚‚ã£ã¨æ´—ç·´ã•ã›ã¦ã„ããŸã„ã¨æ€ã£ã¦ã„ã¾ã™ã€‚</li><li>Q. æ‡‡è¦ªä¼šã§ã€ŒGoã‚‰ã—ã•ã¨ã¯ã€ã¨ã„ã£ãŸè³ªå•ã‚’ã„ãŸã ãã¾ã—ãŸã€‚<ul><li>A. ä¸–é–“çš„ãªæµè¡Œã¨é€†è¡Œã—ã¦ã„ã‚‹ã¨ã¯æ€ã„ã¾ã™ãŒã€å€‹äººçš„ãªæ€ã„ã¨ã—ã¦ã¯ã‚³ãƒ¼ãƒ‰ãŒçŸ­ããªã‚‹ã€Œå®£è¨€çš„ã€ã‚‚ã€ä¹±ç”¨ã™ã‚‹ã¨ã€Œãªãœå‹•ã‹ãªã„ã®ã‹åˆ†ã‹ã‚‰ãªã„ã€ã¨ãªã‚ŠãŒã¡ã ã¨æ€ã£ã¦ã„ã¾ã™ã€‚ãã®å®£è¨€çš„ãªæ–‡æ³•ã‚’ãªã‚‹ã¹ãæ’ã—ã¦ã„ã‚‹ã®ãŒGoã‚‰ã—ã•ãªæ°—ãŒã—ã¦ã„ã¾ã™ã€‚é™çš„å‹ä»˜ã‘ã¨å‹•çš„å‹ä»˜ã‘ã‚’ã„ã£ãŸã‚ŠããŸã‚Šã—ãªãŒã‚‰ã€å‹æ¨è«–ã§ä¸¡æ–¹ã®è‰¯ã•ã‚’ç”Ÿã‹ã—ãŸè¨€èªãŒå‡ºã¦åºƒã¾ã£ã¦ã„ã‚‹ã‚ˆã†ã«ã€å®£è¨€çš„ãŒãƒ–ãƒ¼ãƒ ã§ã‚‚ã€ãã†ã˜ã‚ƒãªã„æ›¸ãæ–¹ã®è‰¯ã•ã‚‚ã‚ã‚‹ã ã‚ã†ã—ã€å˜ç´”ã«ã©ã£ã¡ãŒè‰¯ã„ã¨ã„ã†è©±ã«çµ‚å§‹ã™ã‚‹ã®ã§ã¯ãªãã€ãã®å…ˆã‚’æ¢ã—ã¦ã„ããŸã„ã¨æ€ã£ã¦ã„ã¾ã™ã€‚</li></ul></li></ul></li><li><p>ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚¨ãƒ³ã‚¸ãƒ³ã‚’Goã§ä½œã‚‹ï¼ˆè¾»ï¼‰</p><ul><li>Q. Workerã®ä¸¦è¡Œæ•°ã¯ã©ã‚Œãã‚‰ã„ï¼Ÿ<ul><li>A. ä»Šã®è¨­å®šã§ã¯10ã«ã—ã¦ã„ã¾ã—ãŸã€‚Workerã®ã‚¿ã‚¹ã‚¯ã¯DBã‚„S3ã¨ã„ã£ãŸå¤–éƒ¨ãƒªã‚½ãƒ¼ã‚¹ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ãŒå¤šã„ã®ã§ã€å¤–éƒ¨ãƒªã‚½ãƒ¼ã‚¹ã‚’è¦‹ãªãŒã‚‰ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã™ã‚‹æƒ³å®šã§ã™ã€‚</li></ul></li><li>Q. æ¨™æº–ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¼šã¯ã©ã†ã„ã†ç›®çš„ã§ã‚„ã£ã¦ã„ã‚‹ã®ã§ã™ã‹ï¼Ÿ<ul><li>A. ã‚‚ã¨ã‚‚ã¨ã¯æ¥­å‹™ã‚„è¶£å‘³ã§ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ãŸäººãŒã‚ˆã‚Šãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ã™ã‚‹ç›®çš„ã§ã€æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®Goã‚‰ã—ã„æ›¸ãæ–¹ã‚„ã€ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’å­¦ã¶ãŸã‚ã«å§‹ã‚ã¾ã—ãŸã€‚ã„ã–å§‹ã‚ã‚‹ã¨ã€ã„ã‚ã„ã‚ãªãƒ¬ãƒ™ãƒ«ã®æ–¹ãŒå‚åŠ ã—ã¦ã„ã‚‹ã®ã§ã€æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä½¿ã„æ–¹ã‚„ãƒ†ã‚¹ãƒˆã®æ›¸ãæ–¹ã¨ã„ã£ãŸå†…å®¹ã‚‚ç¤¾å†…ã§ä¸€ç·’ã«å­¦ã‚“ã§ã„ã¾ã™ã€‚</li></ul></li></ul></li><li><p>Goã§å·¥å ´ã‚’åˆ¶å¾¡ã™ã‚‹è¦ã§ã‚ã‚‹PLCã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ï¼ˆçœŸé‡ï¼‰</p><ul><li>Q. ä¸‰è±è£½ä»¥å¤–ã®ä¾‹ãˆã°ã‚ªãƒ ãƒ­ãƒ³ç¤¾è£½ã®PLCã«å¯¾å¿œã—ãªã„ã®ã‹ï¼Ÿ<ul><li>A. ä»Šã¾ã§ã®æ¡ˆä»¶ã§å·¥å ´å´ã«å°å…¥ã•ã‚Œã¦ã„ãŸPLCãŒãŸã¾ãŸã¾å…¨ã¦ä¸‰è±ã•ã‚“ã§ã‚ã£ãŸã€‚æ©Ÿä¼šãŒã‚ã‚Œã°ã‚ªãƒ ãƒ­ãƒ³ã•ã‚“ã®PLCã‚‚è§¦ã£ã¦ã¿ãŸã„ã§ã™</li></ul></li><li>Q. Modbusã®æ–¹ãŒè‰¯ã„ã®ã§ã¯ï¼Ÿ<ul><li>A. å¾Œã§æ°—ãŒã¤ã„ãŸã®ã§ã™ãŒãã†ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ã€‚ä¸‰è±ã•ã‚“ã®PLCã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•ã‚’èª¿ã¹ã‚‹ã¨MCãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®ä»•æ§˜ãŒè¦‹ã¤ã‹ã£ãŸã®ã§å…ˆã«å®Ÿè£…ã—ã¦ã—ã¾ã£ãŸ</li></ul></li><li>Q. æ›¸ãè¾¼ã¿ã«ã‚‚å¯¾å¿œã—ã¦ã„ã‚‹ã®ã‹ï¼Ÿ<ul><li>A. ã¾ã ã‚³ãƒ¼ãƒ‰ã¯Uploadã—ã¦ã„ãªã„ãŒå¯èƒ½ã€‚èª­ã¿å–ã‚Šã®ã‚³ãƒãƒ³ãƒ‰ã‚’Writeã«å¤‰ãˆã¦16é€²æ•°ã§æ›¸ãè¾¼ã¿ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ã™ã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã€‚éå»å®Ÿç¸¾ã§ã¯ã‚¢ã‚¯ãƒãƒ¥ã‚¨ãƒ¼ã‚¿ã®æ“ä½œã¯ã—ãŸã“ã¨ãªã„ãŒã€ã‚³ãƒ³ãƒ•ã‚£ã‚°ãƒ‡ãƒ¼ã‚¿ã®æ›¸ãè¾¼ã¿ã¯è¡Œã£ãŸã“ã¨ãŒã‚ã‚Šã¾ã™</li></ul></li></ul></li></ul><h1 id="ä¼šå ´é‹å–¶ã«ã¤ã„ã¦"><a href="#ä¼šå ´é‹å–¶ã«ã¤ã„ã¦" class="headerlink" title="ä¼šå ´é‹å–¶ã«ã¤ã„ã¦"></a>ä¼šå ´é‹å–¶ã«ã¤ã„ã¦</h1><p>æ¡ç”¨æ‹…å½“ã®ç”°é‚Šã§ã™ã€‚ä»Šå›ã€ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼åˆã®ã€Œgolang.tokyoã€ã¨ã„ã†å¤–éƒ¨ã‚¤ãƒ™ãƒ³ãƒˆã¨ã„ã†äº‹ã‚‚ã‚ã‚Šã€ç§ã¨ã—ã¦ã‚‚æ°—åˆã‚’å…¥ã‚Œã¦ã€å°‘ã—ã§ã‚‚å‚åŠ è€…ã®æ–¹ãŒæ¥½ã—ã„å ´ã«ãªã‚Œã°ã¨æ€ã„æº–å‚™ã‚’ã—ã¦ãã¾ã—ãŸã€‚</p><p>å‚åŠ äººæ•°ã«å¯¾ã—ã€ğŸ•ãƒ”ã‚¶15æšã€ğŸºãŠé…’160æœ¬ï¼ï¼<br>ç„¡äº‹çµ‚ã‚ã£ãŸã‹ã¨æ€ã„ãã‚„ã€ã€ã€ãŠé…’ã¯ãªã‚“ã¨100æœ¬å¼±ä½™ã‚Šã¾ã—ãŸã€‚ç¬‘</p><p>ãŸã å½“æ—¥ã¯ã€ã‚»ãƒŸãƒŠãƒ¼&amp;æ‡‡è¦ªä¼šå…±ã«ç››ã‚Šä¸ŠãŒã£ãŸã®ã§æº€è¶³ã§ã™ã€‚</p><p>å…¥ç¤¾ã—ã¦ã¾ã åŠå¹´ã§ã™ãŒã€æ—¥ã€…æ„Ÿã˜ã‚‹ã“ã¨ã¯ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®æŠ€è¡“ã«å¯¾ã™ã‚‹æ‹˜ã‚Šãƒ»å‘ä¸Šå¿ƒã®é«˜ã•ã«ãŸã ãŸã é©šã„ã¦ã„ã‚‹æ¯æ—¥ã§ã™ã€‚ã“ã‚Œã‹ã‚‰ã€ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã¯ã€ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚¤ãƒ™ãƒ³ãƒˆã‚’å®šæœŸçš„ã«é–‹å‚¬ã—ã¦ã„ãã¾ã™ã€‚å°‘ã—ã§ã‚‚å¤šãã®æ–¹ã«ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã‚’èªçŸ¥ã—ã¦é ‚ãã€é­…åŠ›ã‚’ãŠä¼ãˆã—ã¦ã„ãã¾ã™ã®ã§ã€ã“ã‚Œã‹ã‚‰ã‚‚ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ã€‚ã‚‚ã—ã€èˆˆå‘³ã‚’ã‚‚ã£ã¦ã„ãŸã ã„ãŸGopherã•ã‚“ãŒã„ã‚Œã°ã€ã‚­ãƒ£ãƒªã‚¢æ¡ç”¨ã‚‚ã—ã¦ã„ã¾ã™ã®ã§<a href="https://progres12.jposting.net/pgfuture/u/job.phtml?job_code=215" target="_blank" rel="noopener">ã“ã®ã‚ãŸã‚Šã®è·ç¨®</a>ã§ç”³ã—è¾¼ã¿ãã ã•ã„ï¼<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup></p><h1 id="ã•ã„ã”ã«"><a href="#ã•ã„ã”ã«" class="headerlink" title="ã•ã„ã”ã«"></a>ã•ã„ã”ã«</h1><p>golang.tokyoã¯å€‹äººçš„ã«æ†§ã‚Œã®å‹‰å¼·ä¼šã§ã—ãŸãŒã€ã¾ã•ã‹è‡ªç¤¾é–‹å‚¬ã§ãã‚‹ã¨ã¯æ€ã„ã‚‚ã›ãšã€éå¸¸ã«å¬‰ã—ã„ã§ã™ã€‚å®Ÿã¯ã‚³ãƒƒã‚½ãƒªã¨ä½•äººã‹ã®ç¤¾å“¡ãŒå¾Œã‚ã®æ–¹ã§å‚¾è´ã—ã¦ã„ãŸãã†ã§ã™ãŒã€ã¿ã‚“ãªåˆºæ¿€ã«ãªã£ãŸã¨å–œã‚“ã§ã„ã¾ã—ãŸã€‚</p><p>Goã«é–¢ã—ã¦ã¯ã€<a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCPé€£è¼‰</a>ã‚„<a href="https://future-architect.github.io/tags/GoCDK/">Go Cloudé€£è¼‰</a>ãªã©ãƒ–ãƒ­ã‚°è¨˜äº‹ã‚‚ä¸ŠãŒã£ã¦ã„ã¾ã™ã€‚ä»Šå¾Œã‚‚æ—¥æœ¬ã®Goã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚’ç››ã‚Šä¸Šã’ã‚‹ã¹ããªã‚‹ã¹ãå¤šãã®ãƒŠãƒ¬ãƒƒã‚¸ã‚’å…¬é–‹ã—ã¾ã™ã®ã§ä»Šå¾Œã‚‚ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ã€‚</p><p>ã¾ãŸã€æ¾å·ã¨çœŸé‡ã¯2/14é–‹å‚¬ã®<a href="https://event.shoeisha.jp/devsumi/20200213/session/2413/" target="_blank" rel="noopener">Developpers Summit 2020ã«ç™»å£‡</a>ã—ã¾ã™ã€‚ã“ã¡ã‚‰ã§ã¯ä½•ã‹ã¨å··ã‚’é¨’ãŒã›ã‚‹ã€ŒITã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆã£ã¦ä½•ã‚„ã£ã¦ã„ã‚‹ã®ï¼Ÿå¿…è¦ãªã®ï¼Ÿã€ã¨ã„ã£ãŸç–‘å•ã«ã„ã„æ„Ÿã˜ã«ç­”ãˆã‚‹å ´ã¨ãªã£ã¦ã„ã¾ã™ã€‚</p><div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none; padding-left: 0;"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">1.</span><span style="display: inline-block; vertical-align: top;">ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ã™ã„ã¾ã›ã‚“ã€‚</span><a href="#fnref:1" rev="footnote"> â†©</a></li></ol></div></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h1&gt;&lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€‚TIG DXãƒ¦ãƒ‹ãƒƒãƒˆã®çœŸé‡ã§ã™ã€‚å…ˆæ—¥é–‹å‚¬ã•ã‚ŒãŸ&lt;a href=&quot;https://golangtokyo.conn
      
    
    </summary>
    
      <category term="Programming" scheme="https://future-architect.github.io/categories/Programming/"/>
    
    
      <category term="Go" scheme="https://future-architect.github.io/tags/Go/"/>
    
      <category term="ç™»å£‡è³‡æ–™" scheme="https://future-architect.github.io/tags/%E7%99%BB%E5%A3%87%E8%B3%87%E6%96%99/"/>
    
  </entry>
  
  <entry>
    <title>GCPé€£è¼‰#3 Goã§ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ãªç®¡ç†ç”»é¢ã‚¢ãƒ—ãƒªã‚’ä½œã‚‹</title>
    <link href="https://future-architect.github.io/articles/20200207/"/>
    <id>https://future-architect.github.io/articles/20200207/</id>
    <published>2020-02-07T01:54:41.000Z</published>
    <updated>2020-02-07T03:10:57.648Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCPé›†ä¸­é€£è¼‰</a>ã®3å›ç›®ã§ã™ã€‚ä»Šå›ã¯Cloud Runã‚’ä½¿ã£ãŸã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ä½œã‚Šæ–¹ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ã€‚</p><h1 id="ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã¨ã¯"><a href="#ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã¨ã¯" class="headerlink" title="ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã¨ã¯"></a>ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã¨ã¯</h1><p>OSã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã€ãã®ä¸Šã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãƒ»ãƒ»ãƒ»ã¿ãŸã„ãªã“ã¨ãŒå¿…è¦ãªãã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚³ãƒ¼ãƒ‰ã ã‘ã‚’æ›¸ã‘ã°ã‚ˆãã€å¿…è¦ãªã¨ãã«å¿…è¦ãªã ã‘ã‚¹ã‚±ãƒ¼ãƒ«ã™ã‚‹PaaSãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã§ã€ã‚¤ãƒ³ãƒ•ãƒ©ã‚³ã‚¹ãƒˆãŒå®Œå…¨å¾“é‡èª²é‡‘ã€ã¨ã„ã†å‰æã§ã“ã®è¨˜äº‹ã§ã¯æ‰±ã£ã¦ã„ãã¾ã™ã€‚</p><p>GCPã§ã€ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã«ä½¿ãˆã‚‹ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒˆåŸºç›¤ã®ã‚µãƒ¼ãƒ“ã‚¹ã¯ã„ãã¤ã‹ã‚ã‚Šã¾ã™ã€‚</p><table><thead><tr><th align="center">ã‚µãƒ¼ãƒ“ã‚¹å</th><th align="center">å®Ÿè¡Œå˜ä½</th><th align="center">HTTP</th><th align="center">ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</th><th align="center">ãã®ä»–ã‚¤ãƒ™ãƒ³ãƒˆ</th></tr></thead><tbody><tr><td align="center">Cloud Functions</td><td align="center">Goãƒ‘ãƒƒã‚±ãƒ¼ã‚¸</td><td align="center">âœ”</td><td align="center">Cloud Scheduler</td><td align="center">âœ”</td></tr><tr><td align="center">App Engine (std)</td><td align="center">Goã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³</td><td align="center">âœ”</td><td align="center">âœ”</td><td align="center"></td></tr><tr><td align="center">Cloud Run</td><td align="center">ã‚³ãƒ³ãƒ†ãƒŠ</td><td align="center">âœ”</td><td align="center">Cloud Scheduler</td><td align="center"></td></tr></tbody></table><p>ã“ã®ã†ã¡ã€Cloud Funcionsã¨ã€AWSã®Lambdaã¯ãƒ©ã‚¤ãƒãƒ«ã®ã‚ˆã†ã«è¨€ã‚ã‚Œã¾ã™ã€‚å®Ÿéš›æ©Ÿèƒ½çš„ã«ã¯ä¼¼é€šã£ã¦ã„ã¾ã™ã€‚Lambdaã¯HTTPã®ã‚µãƒ¼ãƒãƒ¼ã¨ã—ã¦å…¬é–‹ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã€API GatewayãŒå¿…è¦ãªãã‚‰ã„ã§ã™ã­ã€‚</p><p>Cloud Runã¨Fargateã‚‚ãƒ©ã‚¤ãƒãƒ«ã®ã‚ˆã†ã«è¨€ã‚ã‚Œã¾ã™ãŒã€Fargateã¯è¤‡æ•°ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’çµ„ã¿åˆã‚ã›ãŸã‚¿ã‚¹ã‚¯å˜ä½ã§å®Ÿè¡Œã—ã¾ã™ãŒã€Cloud Runã¯å˜ä½“ã®ã‚³ãƒ³ãƒ†ãƒŠã®å®Ÿè¡Œã«ãªã‚Šã€ãã“ã¯å°‘ã—å·®ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ä»Šå›ã¯ã€Go + Vue + Cloud Runã§ã‹ã‚“ãŸã‚“ãªç®¡ç†ç”»é¢ã‚’ä½œã‚ã†ã¨æ€ã„ã¾ã™ã€‚ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å´ã«ã‚‚ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ãŒã‚ã‚Šã¾ã™ã€‚MySQLã‚„PostgreSQLã®ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆCloud SQLã¨ã‹RDSï¼‰ã¯ã€ã‚µãƒ¼ãƒãƒ¼ãƒã‚·ãƒ³ã‚’å¯å‹•ã•ã›ã¦ã€ãã®ä¸Šã«DBMSãŒç¨¼åƒã—ã¾ã™ã®ã§ã€èµ·å‹•ã—ã¦ã„ã‚‹æ™‚é–“ã ã‘ãŠé‡‘ãŒã‹ã‹ã£ã¦ã—ã¾ã—ã¾ã™ã€‚ä¸€æ–¹ã€Firestoreã‚„DynamoDBã®å ´åˆã¯å®¹é‡ã¨é€šä¿¡ï¼ˆã¨ã€ã‚­ãƒ£ãƒ‘ã‚·ãƒ†ã‚£ãƒ¦ãƒ‹ãƒƒãƒˆï¼‰ã«ã—ã‹ãŠé‡‘ãŒã‹ã‹ã‚‰ãªã„ãƒ¢ãƒ‡ãƒ«ã«ãªã£ã¦ãŠã‚Šã€ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã§ã™ã€‚ä»Šå›ã¯ã‹ã‚“ãŸã‚“åŒ–ã®ãŸã‚ã«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¯æ‰±ã„ã¾ã›ã‚“ã€‚</p><h1 id="Cloud-Functionsã¨Cloud-Runã®ã©ã¡ã‚‰ã‚’ä½¿ã†ã¹ãã‹ï¼Ÿ"><a href="#Cloud-Functionsã¨Cloud-Runã®ã©ã¡ã‚‰ã‚’ä½¿ã†ã¹ãã‹ï¼Ÿ" class="headerlink" title="Cloud Functionsã¨Cloud Runã®ã©ã¡ã‚‰ã‚’ä½¿ã†ã¹ãã‹ï¼Ÿ"></a>Cloud Functionsã¨Cloud Runã®ã©ã¡ã‚‰ã‚’ä½¿ã†ã¹ãã‹ï¼Ÿ</h1><p>ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«æ›¸ãè¾¼ã¾ã‚ŒãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ä½•ã‹ã‚¤ãƒ™ãƒ³ãƒˆã‚’é§†å‹•ã—ãŸã„ã®ã§ã‚ã‚Œã°Cloud Functionsä¸€æŠã§ã™ãŒã€ä¸¡æ–¹ã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘å–ã‚‹ã‚¦ã‚§ãƒ–ã‚µãƒ¼ãƒ“ã‚¹ã‚„ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã§é§†å‹•ã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã‚’å—ã‘ã‚‹å ´åˆã«ã¯ã©ã¡ã‚‰ã‚‚ä½¿ãˆã¾ã™ã€‚</p><p>Cloud Functionsã¯åŸºæœ¬çš„ã«ã€1ã¤ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã”ã¨ã«ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒä½œã‚‰ã‚Œã‚‹ï¼ˆæ­£ç¢ºã«ã¯1ã¤ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¯åŒæ™‚ã«1ã¤ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ã¿ã‚’å‡¦ç†ã™ã‚‹ï¼‰ã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã¯æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚Cloud Runã¯åŒæ™‚80æ¥ç¶šã¾ã§ã¯ä¸€ã¤ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§å‡¦ç†ã§ãã¾ã™ã€‚Cloud Functionsã§å¤§é‡ã‚¢ã‚¯ã‚»ã‚¹ãŒã‚ã£ã¦èµ·å‹•ãŒé »ç¹ã«è¡Œã‚ã‚Œã‚‹ã¨ã€DBã¸ã®ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ãŒæ–°è¦ã«å¤§é‡ã«å¼µã‚‰ã‚Œã¦ãƒˆãƒ©ãƒ–ãƒ«ã«ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚AWSã§ã¯Lambda RDS ProxyãŒæä¾›ã•ã‚Œã¯ã˜ã‚ã¦ã„ã¦(MySQLã®ã¿)ã€Lambdaã§ã‚‚RDBã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ã¨ã„ã†æ©Ÿèƒ½ãŒæä¾›ã•ã‚Œå§‹ã‚ã¦ã„ã¾ã™ãŒã€GCPã«ã¯ã¾ã ã‚ã‚Šã¾ã›ã‚“ã€‚ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œã‚‹ãªã‚‰Cloud SQLã‚‚ä½¿ãˆã‚‹Cloud Runã®æ–¹ãŒè‰¯ã•ãã†ã§ã™ã€‚ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«é§†å‹•ã®ã‚¤ãƒ™ãƒ³ãƒˆã®å ´åˆã¯ãã‚“ãªã«ä¸¦åˆ—ã§èµ°ã‚‹ã“ã¨ã¯ãªã„ã¨æ€ã†ã®ã§ã€ã©ã¡ã‚‰ã§ã‚‚è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚</p><p>æ—¥æœ¬èªã®Cloud Runã‚’ç´¹ä»‹ã—ã¦ã„ã‚‹ã‚µã‚¤ãƒˆã§ã¯ã¾ã ãƒ™ãƒ¼ã‚¿æ‰±ã„ã®æ“ä½œã«ãªã£ã¦ã„ã‚‹ã‚‚ã®ã‚‚å¤šã„ã®ã§ã™ãŒï¼ˆæœ¬å®¶ã®GCPã®æ—¥æœ¬èªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚‚ã¾ã æ›´æ–°ã•ã‚Œã¦ã„ãªã„ï¼‰<a href="https://cloud.google.com/run/docs/release-notes" target="_blank" rel="noopener">Cloud Runã¯æ˜¨å¹´ã®11æœˆã«GAã«ãªã‚Š</a>ã€ãƒ™ãƒ¼ã‚¿ãŒå–ã‚Œã¾ã—ãŸã€‚SLAã‚‚99.95%ã«ãªã£ã¦ã„ã¾ã™ã€‚</p><p>ãƒ»ãƒ»ãƒ»ã¨ã„ã†ã®ã¯æ€§èƒ½æŒ‡æ¨™ã ã‘ã‚’è¦‹ãŸå ´åˆã®æ¯”è¼ƒã§ã™ãŒã€Cloud Runã«ã¯VPCã«ç¹‹ã’ã‚‰ã‚Œãªã„ã¨ã„ã†å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚ä»Šå¹´ã®ã†ã¡ã«ã¯ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚‹ã‚‰ã—ã„ã§ã™ã€‚ã“ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã¯ä»Šå¾Œã«è¶…æœŸå¾…ã¨ã„ã†ã“ã¨ã§ã®å…ˆè¡Œæ¤œè¨¼ãã‚‰ã„ã«è¦‹ã¦ãŠã„ã¦ã„ãŸã ã‘ã‚Œã°ã¨æ€ã„ã¾ã™ã€‚Cloud Functionsã‚’VPCã«æ¥ç¶šã™ã‚‹æ–¹æ³•ã¯ã“ã®ãƒ–ãƒ­ã‚°ã®<a href="https://future-architect.github.io/articles/20190927/">Letâ€™s Try GCP #2 ï½Cloud Functionã‚’VPC connectorã¨ä¸€ç·’ã«ä½¿ã£ã¦ã¿ã‚‹ï½</a>ã§ç´¹ä»‹ã—ã¦ã„ã¾ã™ã€‚</p><h1 id="Cloud-Runã§ç®¡ç†ç”»é¢ã®ã‚¦ã‚§ãƒ–ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œã‚‹"><a href="#Cloud-Runã§ç®¡ç†ç”»é¢ã®ã‚¦ã‚§ãƒ–ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œã‚‹" class="headerlink" title="Cloud Runã§ç®¡ç†ç”»é¢ã®ã‚¦ã‚§ãƒ–ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œã‚‹"></a>Cloud Runã§ç®¡ç†ç”»é¢ã®ã‚¦ã‚§ãƒ–ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œã‚‹</h1><p>Cloud Runã§ã‚¦ã‚§ãƒ–ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œã‚‹ã®ã¯é€šå¸¸ã®ã‚³ãƒ³ãƒ†ãƒŠã§å‹•ãã‚¦ã‚§ãƒ–ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚ã›ã£ã‹ããªã®ã§ã‚¦ã‚§ãƒ–ã®UIä»˜ãã®ç®¡ç†ç”»é¢ã‚’ä½œã£ã¦ã¿ã¾ã™ã€‚å®Œæˆå“ã¯ã“ã¡ã‚‰ã«ã‚ã‚Šã¾ã™ã€‚</p><ul><li><a href="https://github.com/shibukawa/serverless-sample" target="_blank" rel="noopener">https://github.com/shibukawa/serverless-sample</a></li></ul><p>ç®¡ç†ç”»é¢ã¯é€šå¸¸ã€ä½•ã‹éå®šå¸¸çš„ãªã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç”Ÿã—ãŸã¨ãã¨ã‹ã€å¿…è¦ãªã¨ãã«ã®ã¿ä½¿ã‚ã‚Œã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚ãã®ãŸã‚ã«ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç«‹ã¡ä¸Šã’ã£ã±ãªã—ã«ã—ã¦ãŠãã®ã¯è²»ç”¨çš„ã«ã‚‚ã†ã‚Œã—ããªã„ã§ã™ã—ã€é™ã‚Šã‚ã‚‹åœ°çƒã®è³‡æºã®æµªè²»ã§ã™ã€‚ç®¡ç†ç”»é¢ã¯ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œã‚‹ã«ã¯æœ€é©ã§ã™ã€‚</p><h2 id="ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®é¸å®š"><a href="#ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®é¸å®š" class="headerlink" title="ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®é¸å®š"></a>ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®é¸å®š</h2><p>ä»Šå›ã¯æ¬¡ã®ã‚ˆã†ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’é¸æŠã—ã¾ã—ãŸã€‚</p><ul><li>Goã§net/http + <a href="https://github.com/go-chi/chi" target="_blank" rel="noopener">chi router</a></li><li>Vue.js + TypeScript<ul><li>ãƒ“ãƒ«ãƒ‰ã—ãŸé™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚ã‚³ãƒ³ãƒ†ãƒŠã®ä¸­ã«å…¥ã‚Œã‚‹</li></ul></li><li>UIéƒ¨å“ã¯<a href="https://mwc-demos.glitch.me/demos/" target="_blank" rel="noopener">Material Design WebComponents</a></li></ul><p>chiã¯é«˜é€Ÿã ã‘ã©ã‚‚ã€ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©å‘¨ã‚Šã¯æ¨™æº–ã®net/httpã¨åŒã˜ã‚‚ã®ãŒä½¿ãˆã‚‹ã®ã§ã€å¤šãã®Goãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¨ã£ã¦æ•·å±…ãŒä½ã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚Vueã¯èª¬æ˜ä¸è¦ã§ã™ã‚ˆã­ã€‚ç®¡ç†ç”»é¢ã¨ã„ã£ã¦ã‚‚ãã‚Œãªã‚Šã«ç¶ºéº—ãªéƒ¨å“ã‚’ä½¿ã£ã¦ç”»é¢ã‚’ä½œã‚ŠãŸã„ã‚‚ã®ã§ã™ã€‚Material Design WebComponentsã¯<a href="https://qiita.com/shibukawa/items/5a36147ec103d35c1b5e" target="_blank" rel="noopener">2019å¹´ã¯WebComponentså…ƒå¹´(2å›ç›®)ï¼WebComponentsã‚’React/Angular/Vueã¨ä¸€ç·’ã«ä½¿ã†</a>ã§ç´¹ä»‹ã—ãŸãƒ„ãƒ¼ãƒ«ã‚­ãƒƒãƒˆã®1ã¤ã§ã™ã€‚Ionicã¯ã™ã§ã«ä½¿ã£ã¦è¦‹ãŸã®ã§ã€ä»Šå›ã¯ã“ã£ã¡ã‚’é¸æŠã€‚</p><h2 id="ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œã‚‹"><a href="#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œã‚‹" class="headerlink" title="ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œã‚‹"></a>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œã‚‹</h2><p>Vueã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨ã€Goã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’åŒã˜ãƒ•ã‚©ãƒ«ãƒ€ã«å…¥ã‚Œã¦ã—ã¾ã„ã¾ã—ã‚‡ã†ã€‚Vueã®è¨­å®šã¯ãŠå¥½ã¿ã§è‰²ã€…è¨­å®šã—ã¾ã™ãŒã€Babelã€TSã€CSS Preprocessor(dart-sass)ã€Formatter(Prettier)ã€Unittest(Jest)ã‚’æœ‰åŠ¹ã«ã—ã¾ã—ãŸ(E2Eã®Cypressã‚’æœ‰åŠ¹ã«ã™ã‚‹ã¨Dockerã®ãƒ“ãƒ«ãƒ‰æ™‚é–“ãŒã‚ã¡ã‚ƒä¼¸ã³ã‚‹ã®ã§æ³¨æ„)ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/go/src/github.com/shibukawa</span><br><span class="line">$ npx @vue/cli create serverless-sample</span><br><span class="line">:</span><br><span class="line">âš“  Running completion hooks...</span><br><span class="line"></span><br><span class="line">ğŸ“„  Generating README.md...</span><br><span class="line"></span><br><span class="line">ğŸ‰  Successfully created project serverless-sample.</span><br><span class="line">ğŸ‘‰  Get started with the following commands:</span><br><span class="line">   $ <span class="built_in">cd</span> serverless-sample</span><br><span class="line">   $ npm run serve</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">cd</span> serverless-sample</span><br><span class="line">$ go mod init</span><br><span class="line">go: creating new go.mod: module github.com/shibukawa/serverless-sample</span><br></pre></td></tr></table></figure><p>å¯†çµåˆãª2ã¤ã®ãƒªãƒã‚¸ãƒˆãƒªã ã¨ã€1ã¤ã®PRã‚’ãƒãƒ¼ã‚¸ã™ã‚‹ãŸã‚ã«ã¯ã‚‚ã†ç‰‡æ–¹ã®PRã®ãƒãƒ¼ã‚¸ã‚’å¾…ãŸãªã„ã„ã‘ãªã„ã€ã¨ã‹é‹ç”¨ã§è‹¦åŠ´ã™ã‚‹ã“ã¨ãŒå¢—ãˆã‚‹ã®ã§ã€æœ€è¿‘ã¯ãƒ•ãƒ­ãƒ³ãƒˆã¨ã‚µãƒ¼ãƒãƒ¼ã¯ãªã‚‹ã¹ãã¾ã¨ã‚ãŸã„æ´¾ã§ã™ã€‚ãã‚“ã§ã‚‚ã£ã¦ã€å„è¨€èªã®ã‚ˆãçŸ¥ã‚‰ã‚Œã¦ã„ã‚‹é–‹ç™ºã®æµã‚Œã«å¾“ã£ãŸæ–¹ãŒã€ã‚­ãƒ£ãƒƒãƒã‚¢ãƒƒãƒ—ã‚‚å¼•ãç¶™ãã‚‚æ¥½ã§ã™ã‚ˆã­ã€‚ã‚ã¨ã€å¤‰ã«ä¾å­˜ãŒã‚ã‚‹ã¨ã€ãƒ“ãƒ«ãƒ‰æ™‚ã«ç§˜å¯†éµã‚’ã‚³ãƒ³ãƒ†ãƒŠã®ä¸­ã«ãƒ»ãƒ»ãƒ»ã¨ã‹ã„ã‚ã„ã‚å„ä»‹äº‹ãŒå¢—ãˆã¦DockerãŒè¤‡é›‘ã«ãªã‚‹ã®ã‚‚ãªã‚‹ã¹ãé¿ã‘ãŸã„ã€‚</p><h2 id="ãƒ•ãƒ­ãƒ³ãƒˆã®é–‹ç™º"><a href="#ãƒ•ãƒ­ãƒ³ãƒˆã®é–‹ç™º" class="headerlink" title="ãƒ•ãƒ­ãƒ³ãƒˆã®é–‹ç™º"></a>ãƒ•ãƒ­ãƒ³ãƒˆã®é–‹ç™º</h2><p>é–‹ç™ºæ™‚ã¯JavaScriptã®é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’ç«‹ã¦ã¦ã€Goã®ã‚µãƒ¼ãƒãƒ¼ã‚’å¾Œã‚ã§å‹•ã‹ã™ã®ãŒæ¥½ã§ã™ã€‚è¿‘å¹´ã®ãƒ•ãƒ­ãƒ³ãƒˆã¯ãƒ“ãƒ«ãƒ‰ã®æ™‚é–“ã‚‚é•·ã„ã®ã§ã™ãŒã€é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«çµæœã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã¦ãƒ©ã‚¤ãƒ–ãƒªãƒ­ãƒ¼ãƒ‰ã¨ã‹ã—ã¦ãã‚Œã¾ã™ã®ã§ã€‚é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã«ã¯ãƒ—ãƒ­ã‚­ã‚·æ©Ÿèƒ½ãŒã‚ã‚‹ã®ã§ã“ã‚Œã‚’æœ‰åŠ¹ã«ã—ã¾ã™ã€‚ã‚µãƒ¼ãƒãƒ¼ã‚’åˆ¥ã€…ã«å»ºã¦ã‚‹ã¨ã€é–‹ç™ºæ™‚ã ã‘CORSã‚’æ°—ã«ã—ãªãã‚ƒã„ã‘ãªã„ã¨ã‹é¢å€’ãªã“ã¨ã«ãªã‚Šã¾ã™ãŒã€åŒã˜ã‚ªãƒªã‚¸ãƒ³ãªã‚‰ãã†ã„ã†ã“ã¨ã‚‚æ°—ã«ã—ãªãã¦ã„ã„ã®ã§ã€ãƒ•ãƒ­ãƒ³ãƒˆã€ã‚µãƒ¼ãƒãƒ¼ã®åŒæ™‚é–‹ç™ºã®ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã¨ã—ã¦ã¯ã€ä»Šã®ã¨ã“ã‚ã“ã‚ŒãŒãƒã‚¤ãƒ™ã‚¹ãƒˆã€‚</p><figure class="highlight js"><figcaption><span>vue.config.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    proxy: &#123;</span><br><span class="line">      <span class="string">"/api"</span>: &#123;</span><br><span class="line">        target: <span class="string">"http://localhost:8888"</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å¾Œã¯é€šå¸¸ã®TypeScriptã§ã®Vueã®é–‹ç™ºã§ã™ãŒã€ä»Šå›ã¯<a href="https://qiita.com/shibukawa/items/5a36147ec103d35c1b5e" target="_blank" rel="noopener">2019å¹´ã¯WebComponentså…ƒå¹´(2å›ç›®)ï¼WebComponentsã‚’React/Angular/Vueã¨ä¸€ç·’ã«ä½¿ã†</a>ã§ç´¹ä»‹ã—ãŸUIéƒ¨å“ã‚’ä½¿ã„ã¾ã™ã€‚WebComponentsã®ã‚¿ã‚°ã¯<code>ignoreElements</code>ã«ç™»éŒ²ã—ã¦ãŠãã¾ã™ã€‚</p><figure class="highlight ts"><figcaption><span>src/main.ts</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Vue.config.ignoredElements = [</span><br><span class="line">  <span class="string">"mwc-drawer"</span>,</span><br><span class="line">  <span class="string">"mwc-top-app-bar"</span>,</span><br><span class="line">  <span class="string">"mwc-button"</span>,</span><br><span class="line">  <span class="string">"mwc-icon-button"</span>,</span><br><span class="line">  <span class="string">"mwc-dialog"</span>,</span><br><span class="line">  <span class="string">"mwc-textfield"</span></span><br><span class="line">];</span><br></pre></td></tr></table></figure><p>Routerã§ãƒšãƒ¼ã‚¸åˆ‡ã‚Šæ›¿ãˆã¯ã—ãŸã„ã¨æ€ã†ã®ã§ï¼ˆå¤§ã—ãŸãƒšãƒ¼ã‚¸ã¯ãªã„ã‘ã©ï¼‰åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚è‡ªåˆ†ã®ãƒšãƒ¼ã‚¸ã«ã‚¸ãƒ£ãƒ³ãƒ—ã™ã‚‹ã¨ãã«ã¯ãƒ‰ãƒ­ãƒ¯ãƒ¼ãŒé–‰ã˜ãŸã‚Šã—ãªã„æ–¹ãŒã„ã„ã®ã§ã€ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã§é·ç§»å…ˆã‚’ç¢ºèªã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚ãƒªãƒ³ã‚¯ã‚¯ãƒªãƒƒã‚¯æ™‚ã«<code>&lt;mwc-drawer&gt;</code>ã‚’é–‰ã˜ãŸã„ã®ã§ã™ãŒã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å‹•ä½œã ã¨ãã†ãªã‚‰ãªã„ã®ã§ã€Routerã®é·ç§»ã‚¤ãƒ™ãƒ³ãƒˆã‚’æ‹¾ã£ã¦ãƒ‰ãƒ­ãƒ¯ãƒ¼ã‚’é–‰ã˜ã‚‹ã‚ˆã†ã—ã¦ã„ã¾ã™ã€‚</p><figure class="highlight html"><figcaption><span>src/App.vue</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mwc-drawer</span> <span class="attr">hasHeader</span> <span class="attr">type</span>=<span class="string">"modal"</span> <span class="attr">:open</span>=<span class="string">"openDrawer"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span>Drawer Title<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">"subtitle"</span>&gt;</span>subtitle<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"drawer-content"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>Drawer content<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> @<span class="attr">click</span>=<span class="string">"selectPage('/')"</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> @<span class="attr">click</span>=<span class="string">"selectPage('/prime')"</span>&gt;</span>Prime<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> @<span class="attr">click</span>=<span class="string">"selectPage('/about')"</span>&gt;</span>About<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mwc-drawer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">"ts"</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; Component, Vue &#125; <span class="keyword">from</span> <span class="string">"vue-property-decorator"</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> <span class="string">"@material/mwc-icon-button"</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> <span class="string">"@material/mwc-drawer"</span>;</span></span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">AppComponent</span> <span class="keyword">extends</span> <span class="title">Vue</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">  openDrawer: boolean = <span class="literal">false</span>;</span></span><br><span class="line"></span><br><span class="line">  mounted() &#123;</span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.$router.afterEach(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.openDrawer = <span class="literal">false</span>;</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  selectPage(path: string) &#123;</span><br><span class="line"><span class="javascript">    <span class="keyword">if</span> (path !== <span class="keyword">this</span>.$router.currentRoute.path) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$router.push(path);</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸­ã®ç”»é¢ã‚‚1ã¤ä½œã£ã¦ã¿ã¾ã™ã€‚æ•°å­—ã‚’å…¥ã‚Œã¦ã€ç´ æ•°ã‹ã©ã†ã‹ã‚’ã‚µãƒ¼ãƒãƒ¼åˆ¤å®šã—ã¦ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã«è¡¨ç¤ºã™ã‚‹ã€ã¨ã„ã†ç”»é¢ã§ã™ã€‚ãƒšãƒ¼ã‚¸å†…éƒ¨ã®ãƒ˜ãƒƒãƒ€ãƒ¼ã§ãƒ‰ãƒ­ãƒ¯ãƒ¼ã‚’é–‹ã‘ã‚‹ã‚ˆã†ã«ã™ã‚‹é–¢ä¿‚ã§ã€è¦ªã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã„ã‚‹ã¨ã“ã‚ã¯ã¡ã‚‡ã£ã¨è¨­è¨ˆãŒã‚¢ãƒ¬ã‹ãªã€ã¨æ€ã„ã¤ã¤ã€ã“ã®ãŸã‚ã ã‘ã«Vuexã‚’å…¥ã‚Œã‚‹ã®ã‚‚ã“ã®è¦æ¨¡ã ã¨å‰²ã«åˆã‚ãªã„ã®ã§ã”å‹˜å¼ã‚’ã€‚</p><figure class="highlight html"><figcaption><span>src/views/Prime.vue</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"appContent"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mwc-top-app-bar</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mwc-icon-button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">slot</span>=<span class="string">"navigationIcon"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">icon</span>=<span class="string">"menu"</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">click</span>=<span class="string">"toggleDrawer"</span></span></span><br><span class="line"><span class="tag">      &gt;</span><span class="tag">&lt;/<span class="name">mwc-icon-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span>Prime<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mwc-top-app-bar</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"main-content"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mwc-textfield</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:value</span>=<span class="string">"num"</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">change</span>=<span class="string">"onchange($event.target.value)"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">label</span>=<span class="string">"Input Number"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mwc-button</span> @<span class="attr">click</span>=<span class="string">"check()"</span>&gt;</span>Is it Prime Number?<span class="tag">&lt;/<span class="name">mwc-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mwc-dialog</span> <span class="attr">:open</span>=<span class="string">"dialogOpen"</span> @<span class="attr">closing</span>=<span class="string">"closingDialog"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123; this.result &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mwc-button</span> <span class="attr">slot</span>=<span class="string">"primaryAction"</span> <span class="attr">dialogAction</span>=<span class="string">"discard"</span>&gt;</span></span><br><span class="line">        OK</span><br><span class="line">      <span class="tag">&lt;/<span class="name">mwc-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mwc-dialog</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">"ts"</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; Component, Vue &#125; <span class="keyword">from</span> <span class="string">"vue-property-decorator"</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> <span class="string">"@material/mwc-top-app-bar"</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> <span class="string">"@material/mwc-icon-button"</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> <span class="string">"@material/mwc-button"</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> <span class="string">"@material/mwc-dialog"</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> <span class="string">"@material/mwc-textfield"</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> AppComponent <span class="keyword">from</span> <span class="string">'../App.vue'</span>;</span></span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">AboutPage</span> <span class="keyword">extends</span> <span class="title">Vue</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">  result: string = <span class="string">""</span>;</span></span><br><span class="line"><span class="javascript">  num: string = <span class="string">"0"</span>;</span></span><br><span class="line"><span class="javascript">  dialogOpen: boolean = <span class="literal">false</span>;</span></span><br><span class="line"></span><br><span class="line">  onchange(value: string) &#123;</span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.num = value;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  closingDialog() &#123;</span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.dialogOpen = <span class="literal">false</span>;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">  <span class="keyword">async</span> check() &#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">"å¾Œã§æ›¸ã"</span>)</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  toggleDrawer(e: Event) &#123;</span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> parent = <span class="keyword">this</span>.$parent <span class="keyword">as</span> AppComponent;</span></span><br><span class="line">    parent.openDrawer = !parent.openDrawer;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ã‚µãƒ¼ãƒãƒ¼ã‚¢ã‚¯ã‚»ã‚¹ã—ãªã„éƒ¨åˆ†ã¯ã“ã‚Œã§å‹•ä½œå¯èƒ½ã«ãªã‚Šã¾ã—ãŸã€‚</p><img src="/images/20200207/photo_20200207_01.png"><img src="/images/20200207/photo_20200207_02.png"><h2 id="Goã®ã‚µãƒ¼ãƒãƒ¼ã‚’ä½œã‚‹"><a href="#Goã®ã‚µãƒ¼ãƒãƒ¼ã‚’ä½œã‚‹" class="headerlink" title="Goã®ã‚µãƒ¼ãƒãƒ¼ã‚’ä½œã‚‹"></a>Goã®ã‚µãƒ¼ãƒãƒ¼ã‚’ä½œã‚‹</h2><p>Goã®ã‚µãƒ¼ãƒãƒ¼ã¯net/httpã§ã™ãŒã€ä»Šå›ã¯ãƒ•ãƒ­ãƒ³ãƒˆã¨ã®é€šä¿¡ã¯JSON-RPCã«ã—ã¾ã—ãŸã€‚æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®JSON-RPCã¯ã„ã‚ã„ã‚åˆ¶ç´„ãŒå¼·ã„ã®ã§ã€github.com/semrush/zenrpcã‚’ä½¿ã„ã¾ã—ãŸã€‚ãã‚Œã‚‰ã‚’chiã®routerã«ç™»éŒ²ã—ã¦ã‚µãƒ¼ãƒãƒ¼èµ·å‹•ã—ã¦ãŠã—ã¾ã„ã€‚æ³¨æ„ç‚¹ã¨ã—ã¦ã¯ã€PORTç’°å¢ƒå¤‰æ•°ã‚’è¦‹ã¦ã€ãƒãƒ¼ãƒˆã‚’åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§ã™ã€‚ã¤ã„ã§ã«HOSTç’°å¢ƒå¤‰æ•°ã‚‚è¦‹ã¦ã¾ã™ãŒã€ã“ã‚Œã¯Chromebookã®åˆ¶ç´„æ•…ãªã®ã§ä»–ã®äººã¯ã„ã‚‰ãªã„ã‹ã‚‚ã§ã™ã€‚</p><figure class="highlight go"><figcaption><span>main.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"io"</span></span><br><span class="line"><span class="string">"log"</span></span><br><span class="line"><span class="string">"math/big"</span></span><br><span class="line"><span class="string">"net/http"</span></span><br><span class="line"><span class="string">"os"</span></span><br><span class="line"></span><br><span class="line"><span class="string">"github.com/go-chi/chi"</span></span><br><span class="line"><span class="string">"github.com/semrush/zenrpc"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">//go:generate go run github.com/semrush/zenrpc/zenrpc</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// APIService is a JSON RPC server interface</span></span><br><span class="line"><span class="keyword">type</span> APIService <span class="keyword">struct</span> &#123;</span><br><span class="line">zenrpc.Service</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// CheckPrimeNumber returns input value is prime number or not</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(as APIService)</span> <span class="title">CheckPrimeNumber</span><span class="params">(a <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> big.NewInt(<span class="keyword">int64</span>(a)).ProbablyPrime(<span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">r := chi.NewRouter()</span><br><span class="line">rpc := zenrpc.NewServer(zenrpc.Options&#123;</span><br><span class="line">TargetURL: <span class="string">"/api"</span>,</span><br><span class="line">ExposeSMD: <span class="literal">true</span>,</span><br><span class="line">&#125;)</span><br><span class="line">rpc.Register(<span class="string">""</span>, &amp;APIService&#123;&#125;)</span><br><span class="line">r.Handle(<span class="string">"/api"</span>, rpc)</span><br><span class="line"></span><br><span class="line">port := os.Getenv(<span class="string">"PORT"</span>)</span><br><span class="line"><span class="keyword">if</span> port == <span class="string">""</span> &#123;</span><br><span class="line">port = <span class="string">"8080"</span></span><br><span class="line">&#125;</span><br><span class="line">host := os.Getenv(<span class="string">"HOST"</span>)</span><br><span class="line">fmt.Printf(<span class="string">"Open Server at %s:%s\n"</span>, host, port)</span><br><span class="line">log.Fatal(http.ListenAndServe(fmt.Sprintf(<span class="string">"%s:%s"</span>, host, port), r))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>JSON-RPCã‚µãƒ¼ãƒãƒ¼ã®ã‚¹ã‚¿ãƒ–ç”Ÿæˆã§go generateãŒå¿…è¦ã§ã™ã€‚go generateã§èµ·å‹•ã—ãŸã„ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒGoè£½ã®å ´åˆã€go runå½¢å¼ã§æ›¸ãã¨ã€ãã®ãƒ„ãƒ¼ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’äº‹å‰ã«ã—ã¦ãŠã‹ãªãã¦ã‚‚è‰¯ã„ï¼ˆã—ã€go modãŒã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã¦ãã‚Œã‚‹ï¼‰ã¨ã„ã†ã®ã¯ã€gophers slackã®osakaãƒãƒ£ãƒ³ãƒãƒ«ã§Iwatsuruã•ã‚“ã«æ•™ãˆã¦ã„ãŸã ã„ãŸãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã§ã™ã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ä¾¿åˆ©ã§ã™ã€‚</p><p>ãƒãƒ¼ãƒˆã‚’8080ã˜ã‚ƒãªãã—ã¦ã„ã‚‹ã®ã¯ã€æ‰‹å…ƒã®é–‹ç™ºç’°å¢ƒã®code-serverãŒä½¿ã£ã¦ã„ãŸã®ã§å›é¿ã—ãŸã ã‘ã§ã™ã€‚Vueã®ãƒ—ãƒ­ã‚­ã‚·ãƒ¼è¨­å®šã¨åˆã‚ã›ã‚Œã°å•é¡Œãªã„ã§ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ go generate</span><br><span class="line">$ go build</span><br><span class="line">$ HOST=127.0.0.1 PORT=8888 ./serverless-sample</span><br><span class="line">Open Server at 127.0.0.1:8888</span><br></pre></td></tr></table></figure><p>ã“ã®JSON-RPCã‚µãƒ¼ãƒãƒ¼ã®ç´ æ•µãªã¨ã“ã‚ã¯Service Mapping Descriptionã¨ã„ã†JSONãŒå‡ºåŠ›ã§ãã‚‹ã¨ã“ã‚ã§ã™ã€‚ä»Šå›ã¯æ™‚é–“ãŒãªã‹ã£ãŸã®ã§ã‚„ã‚‰ãªã‹ã£ãŸã®ã§ã™ãŒã€ã“ã‚Œã‚’å…ƒã«TypeScriptã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ¼ãƒ‰ã®è‡ªå‹•ç”Ÿæˆã¨ã‹ã§ãã‚‹ã¨ã€gRPCã¿ãŸã„ãªã‚¹ã‚­ãƒ¼ãƒã‚’æ›¸ã‹ãšã«ã€Goã®ãƒ¡ã‚½ãƒƒãƒ‰å®šç¾©ã®å‹æƒ…å ±ãŒã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ã‚‚åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ç´ æ•µãªã‚“ã˜ã‚ƒãªã„ã‹ã¨æœŸå¾…ã—ã¦ã„ã¾ã™ã€‚</p><figure class="highlight json"><figcaption><span>localhost:8080/api?smd</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"transport"</span>:<span class="string">"POST"</span>,</span><br><span class="line">  <span class="attr">"envelope"</span>:<span class="string">"JSON-RPC-2.0"</span>,</span><br><span class="line">  <span class="attr">"contentType"</span>:<span class="string">"application/json"</span>,</span><br><span class="line">  <span class="attr">"SMDVersion"</span>:<span class="string">"2.0"</span>,</span><br><span class="line">  <span class="attr">"target"</span>:<span class="string">"/api"</span>,</span><br><span class="line">  <span class="attr">"services"</span>: &#123;</span><br><span class="line">    <span class="attr">"CheckPrimeNumber"</span>: &#123;</span><br><span class="line">      <span class="attr">"description"</span>:<span class="string">"CheckPrimeNumber returns input value is prime number or not"</span>,</span><br><span class="line">      <span class="attr">"parameters"</span>:[&#123;<span class="attr">"name"</span>: <span class="string">"a"</span>,<span class="attr">"type"</span>: <span class="string">"integer"</span>&#125;],</span><br><span class="line">      <span class="attr">"returns"</span>:&#123;<span class="attr">"type"</span>: <span class="string">"boolean"</span>&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ã‚µãƒ¼ãƒãƒ¼ã¨ãƒ•ãƒ­ãƒ³ãƒˆã‚’ã¤ãªã"><a href="#ã‚µãƒ¼ãƒãƒ¼ã¨ãƒ•ãƒ­ãƒ³ãƒˆã‚’ã¤ãªã" class="headerlink" title="ã‚µãƒ¼ãƒãƒ¼ã¨ãƒ•ãƒ­ãƒ³ãƒˆã‚’ã¤ãªã"></a>ã‚µãƒ¼ãƒãƒ¼ã¨ãƒ•ãƒ­ãƒ³ãƒˆã‚’ã¤ãªã</h2><p>å…ˆç¨‹ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã«ã¤ãªãã¾ã™ã€‚fetchã§JSON-RPCã‚’ç›´æ¥å‘¼ã‚“ã§ã„ã¾ã™ã€‚</p><figure class="highlight ts"><figcaption><span>src/views/Prime.vue</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> check() &#123;</span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> fetch(<span class="string">"/api"</span>, &#123;</span><br><span class="line">    method: <span class="string">"post"</span>,</span><br><span class="line">    body: <span class="built_in">JSON</span>.stringify(&#123;</span><br><span class="line">      jsonrpc: <span class="string">"2.0"</span>,</span><br><span class="line">      method: <span class="string">"CheckPrimeNumber"</span>,</span><br><span class="line">      params: [<span class="built_in">parseInt</span>(<span class="keyword">this</span>.num)],</span><br><span class="line">      id: <span class="number">1</span></span><br><span class="line">    &#125;),</span><br><span class="line">    headers: &#123;</span><br><span class="line">      <span class="string">"content-type"</span>: <span class="string">"application/json"</span>,</span><br><span class="line">      accept: <span class="string">"application/json"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">const</span> dialog = <span class="keyword">this</span>.$refs.dialog <span class="keyword">as</span> Dialog;</span><br><span class="line">  <span class="keyword">if</span> (res.ok) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> res.json() <span class="keyword">as</span> <span class="built_in">any</span>;</span><br><span class="line">      <span class="keyword">if</span> (result.result) &#123;</span><br><span class="line">        <span class="keyword">this</span>.result = <span class="string">`<span class="subst">$&#123;this.num&#125;</span> is prime number`</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.result = <span class="string">`<span class="subst">$&#123;this.num&#125;</span> is not prime number`</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="keyword">this</span>.result = <span class="string">"parse error"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.result = <span class="string">"server access error"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">this</span>.dialogOpen = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã“ã“ã¾ã§ã§ã€é–‹ç™ºç’°å¢ƒã§ä¸€é€šã‚Šå‹•ä½œç¢ºèªãŒã§ãã¾ã™ã€‚</p><img src="/images/20200207/photo_20200207_03.png"><h2 id="ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ã‚¢ã‚»ãƒƒãƒˆã‚’Goã‚µãƒ¼ãƒãƒ¼ã«ãƒãƒ³ãƒ‰ãƒ«"><a href="#ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ã‚¢ã‚»ãƒƒãƒˆã‚’Goã‚µãƒ¼ãƒãƒ¼ã«ãƒãƒ³ãƒ‰ãƒ«" class="headerlink" title="ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ã‚¢ã‚»ãƒƒãƒˆã‚’Goã‚µãƒ¼ãƒãƒ¼ã«ãƒãƒ³ãƒ‰ãƒ«"></a>ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ã‚¢ã‚»ãƒƒãƒˆã‚’Goã‚µãƒ¼ãƒãƒ¼ã«ãƒãƒ³ãƒ‰ãƒ«</h2><p>æœ¬ç•ªç’°å¢ƒã«å‘ã‘ã¦ã€1ã‚³ãƒ³ãƒ†ãƒŠã®1ãƒ—ãƒ­ã‚»ã‚¹ã§å‹•ä½œã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ãã¾ã™ã€‚AWSã®Fargateã§ã‚ã‚Œã°ã€è¤‡æ•°ã‚³ãƒ³ãƒ†ãƒŠã‚’ã¾ã¨ã‚ã¦1ã¤ã®ã‚¿ã‚¹ã‚¯ã¨ã§ãã‚‹ã®ã§ã€é™çš„HTMLã®é…ä¿¡ã«ã¯ãƒ•ãƒ­ãƒ³ãƒˆã«ç«‹ã¦ãŸNginxã‚’ä½¿ã†ã¨ã„ã†æ–¹æ³•ã‚‚ã§ãã¾ã™ãŒã€Cloud Runã®å ´åˆã¯1ã¤ã®ã‚³ãƒ³ãƒ†ãƒŠã«ã¾ã¨ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p>é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚µãƒ¼ãƒãƒ¼å´ã§ãƒãƒ³ãƒ‰ãƒ«ã—ã¦é…ä¿¡ã™ã‚‹æ–¹æ³•ã¯ã„ã‚ã„ã‚ã‚ã‚Šã¾ã™ãŒã€è‡ªä½œã®<a href="https://godoc.org/go.pyspa.org/brbundle" target="_blank" rel="noopener">brbundle</a>ã¨ã„ã†ã®ã«ã—ã¾ã™ã€‚Single Page Applicationã®å ´åˆã€<a href="https://angular.io/guide/deployment" target="_blank" rel="noopener">Angularã®ãƒšãƒ¼ã‚¸ã§ç´¹ä»‹ã•ã‚Œã¦ã„ã‚‹</a>ã‚ˆã†ã«ã€é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…ä¿¡ã™ã‚‹ã¨ãã«è¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸã‚‰index.htmlã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã™ã‚‹ã€ã¨ã„ã†ã“ã¨ãŒå¿…è¦ã§ã™ã€‚ã“ã®è‡ªä½œã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯SSPç”¨ã«net/httpã‚„ã‚‰chiã®ã‚¢ãƒ€ãƒ—ã‚¿ã‚’æŒã£ã¦ã„ã¦ã€ã“ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚‚ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="comment">// ã“ã‚Œã‚’è¿½åŠ </span></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"go.pyspa.org/brbundle"</span></span><br><span class="line"><span class="string">"go.pyspa.org/brbundle/brchi"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// â†“ã“ã®è¡Œã‚’è¿½åŠ </span></span><br><span class="line"><span class="comment">//go:generate go run go.pyspa.org/brbundle/cmd/brbundle embedded -f dist</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// ã“ã®è¡Œã‚’è¿½åŠ </span></span><br><span class="line">r.NotFound(brchi.Mount(brbundle.WebOption&#123;</span><br><span class="line">SPAFallback: <span class="string">"index.html"</span>,</span><br><span class="line">&#125;))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¾Œã¯Vueã‚’ãƒ“ãƒ«ãƒ‰ã—ã¦å‡ºæ¥ä¸ŠãŒã£ãŸdistãƒ•ã‚©ãƒ«ãƒ€ã‚’Goã®å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒãƒ³ãƒ‰ãƒ«ã—ã¦ã‚ã’ã‚‹ã ã‘ã§ã™ã€‚go generateã§ãƒãƒ³ãƒ‰ãƒ«ãŒã§ãã‚‹ã‚ˆã†ã«ã—ãŸã®ã§æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§Vueã®ãƒ•ãƒ­ãƒ³ãƒˆä»˜ãã®ã‚·ãƒ³ã‚°ãƒ«ãƒ—ãƒ­ã‚»ã‚¹ã®Goã‚µãƒ¼ãƒãƒ¼ãŒã§ãã‚ãŒã‚Šã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ npm run build</span><br><span class="line">$ <span class="keyword">go</span> generate</span><br><span class="line">$ HOST=<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> PORT=<span class="number">8888</span> ./serverless-sample</span><br><span class="line">Open Server at <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">8888</span></span><br></pre></td></tr></table></figure><p>ä»Šåº¦ã¯é–‹ç™ºã‚µãƒ¼ãƒãƒ¼çµŒç”±ã§ã¯ãªãã€Goã«ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦å‹•ä½œç¢ºèªã—ã¾ã™ã€‚ãªãŠã€ãƒãƒ³ãƒ‰ãƒ«ã—ãŸã¨ã—ã¦ã‚‚ã€é–‹ç™ºã‚µãƒ¼ãƒãƒ¼çµŒç”±ã§ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚‚å¯èƒ½ãªã®ã§ã€é–‹ç™ºã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å›ã™ã®ã«é‚ªé­”ã—ã¾ã›ã‚“ã€‚</p><h1 id="Cloud-Runã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹"><a href="#Cloud-Runã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹" class="headerlink" title="Cloud Runã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹"></a>Cloud Runã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹</h1><p>Cloud Runã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã«ã¯Dockerã‚³ãƒ³ãƒ†ãƒŠã‚’ä½œã‚Šã¾ã™ã€‚</p><h2 id="Dockerã‚³ãƒ³ãƒ†ãƒŠã‚’ä½œã‚‹"><a href="#Dockerã‚³ãƒ³ãƒ†ãƒŠã‚’ä½œã‚‹" class="headerlink" title="Dockerã‚³ãƒ³ãƒ†ãƒŠã‚’ä½œã‚‹"></a>Dockerã‚³ãƒ³ãƒ†ãƒŠã‚’ä½œã‚‹</h2><p>ã„ã‚ˆã„ã‚ˆDockerã«ã—ã¦ã„ãã¾ã™ã€‚ã¿ãªã•ã‚“ã€ã¾ã•ã‹Alpineã¨ã‹ä½¿ã£ã¦ã„ãªã„ã§ã™ã‚ˆã­ï¼Ÿä»Šã©ãã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’æ°—ã«ã™ã‚‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®å¸¸è­˜ã¯ã‚·ã‚§ãƒ«ãŒãªãã¦ãƒ­ã‚°ã‚¤ãƒ³ãŒã§ããªã„distrolessã‚’ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸ã«ã™ã‚‹ã£ã¦ã€ãƒãƒƒã‚¯ã§éš£ã®å¥³å­é«˜ç”ŸãŒè¨€ã£ã¦ã„ã¾ã—ãŸã€‚</p><p>distrolessã¯Debianç³»ãªã®ã§ã€ãƒ“ãƒ«ãƒ‰ç”¨ã®ã‚ªãƒ•ã‚£ã‚·ãƒ£ãƒ«ã‚¤ãƒ¡ãƒ¼ã‚¸ã¨ã‚‚åˆã‚ã›ã‚„ã™ã„ã§ã™ã€‚</p><figure class="highlight dockerfile"><figcaption><span>Dockerfile</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> node:<span class="number">12</span>-buster-slim as nodebuilder</span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /home/node</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> package.json package-lock.json ./</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> npm ci</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> babel.config.js .browserslistrc .eslintrc.js jest.config.js tsconfig.json vue.config.js ./</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> public/ ./public</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> src/ ./src</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> npm run build</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">FROM</span> golang:<span class="number">1.13</span>-buster as gobuilder</span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /go/src/app</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> go.mod go.sum ./</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> go mod download</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> main.go ./</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> --from=nodebuilder /home/node/dist/ ./dist</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> go generate</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> go build -ldflags=<span class="string">"-w -s"</span> -o /go/bin/app</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">FROM</span> gcr.io/distroless/base</span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> --from=gobuilder /go/bin/app /</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">"/app"</span>]</span></span><br></pre></td></tr></table></figure><p>ã‚³ãƒ³ãƒ†ãƒŠã«ãªã£ãŸã‚‰ã€ã“ã®çŠ¶æ…‹ã§ã‚‚å‹•ä½œç¢ºèªã§ãã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ DOCKER_BUILDKIT=1 docker build -t <span class="string">"serverless-app"</span> .</span><br><span class="line">$ docker run -p 8080:8080 --rm <span class="string">"serverless-app"</span></span><br></pre></td></tr></table></figure><h2 id="Cloud-Runã§å‹•ã‹ã™"><a href="#Cloud-Runã§å‹•ã‹ã™" class="headerlink" title="Cloud Runã§å‹•ã‹ã™"></a>Cloud Runã§å‹•ã‹ã™</h2><p>ã“ã“ã¾ã§æ¥ãŸã‚‰ã‚ã¨ã¯gcloudã‚³ãƒãƒ³ãƒ‰ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã ã‘ã§ã™ã€‚<br>GCP_PROJECTã¯è‡ªåˆ†ã§ä½œæˆã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å…¥ã‚Œã¦ãã ã•ã„ã€‚IMAGE_NAMEã¯ãªã‚“ã§ã‚‚å¤§ä¸ˆå¤«ã§ã™ã€‚æ—¥æœ¬ã‹ã‚‰è¿‘ã„ã®ã§GCRã¯asia.gcr.ioã«ã—ã¦ã„ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ gcloud builds submit --tag asia.gcr.io/<span class="variable">$&#123;GCP_PROJECT&#125;</span>/<span class="variable">$&#123;IMAGE_NAME&#125;</span></span><br><span class="line">$ gcloud run deploy --image asia.gcr.io/<span class="variable">$&#123;GCP_PROJECT&#125;</span>/<span class="variable">$&#123;IMAGE_NAME&#125;</span></span><br></pre></td></tr></table></figure><p>æœ€å¾Œã®ã‚³ãƒãƒ³ãƒ‰ã‚’èµ·å‹•ã™ã‚‹ã¨ã€ãƒãƒãƒ¼ã‚¸ãƒ‰ã§å‹•ã‹ã™ã‹Anthosã§å‹•ã‹ã™ã‹ã€ã©ã®ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã§å‹•ã‹ã™ã‹ã€åå‰ã‚’ä½•ã«ã™ã‚‹ã‹ã‚’èã„ã¦ãã¾ã™ã€‚ãã‚Œã«å›ç­”ã—ãŸã‚‰URLãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€ãã‚Œã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨å‹•ä½œãŒç¢ºèªã§ãã¾ã™ã€‚åˆå›ã¯èªè¨¼ãªã—ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‹ã©ã†ã‹ã€ã¨ã„ã†ã®ã‚‚èã‹ã‚Œã¾ã—ãŸã€‚</p><p>ã‹ã‚“ãŸã‚“ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ä½¿ã£ã¦ã‚‚ã‚‰ã†æ–¹æ³•ã¨ã—ã¦ã¯ã€<a href="https://future-architect.github.io/articles/20190909/">Letâ€™s Try GCP #1 ï½Cloud Run Buttonã‚’ä½¿ã£ãŸæ¥½ã€…ã‚³ãƒ³ãƒ†ãƒŠãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ã‚„ã£ã¦ã¿ãŸï½</a>ã§ç´¹ä»‹ã™ã‚‹Cloud Run Buttonã‚‚ã‚ã‚Šã¾ã™ã€‚</p><h1 id="æ„Ÿæƒ³"><a href="#æ„Ÿæƒ³" class="headerlink" title="æ„Ÿæƒ³"></a>æ„Ÿæƒ³</h1><p>Cloud Functionsã¨æ¯”ã¹ã‚‹ã¨ã€å‹•ä½œã™ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒæ™®é€šã®Goã®ã‚¦ã‚§ãƒ–ã‚µãƒ¼ãƒãƒ¼ãªã®ã§é–‹ç™ºã¯ã¨ã¦ã‚‚ã—ã‚„ã™ã„ã§ã™ã€‚ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚’å«ã‚ãŸå‹•ä½œæ¤œè¨¼ã‚‚ã€JSå´ã®é–‹ç™ºæ”¯æ´ã®æ©Ÿèƒ½ã®æ©æµã‚’æœ€å¤§é™å—ã‘ã‚‰ã‚Œã¾ã™ã€‚ãƒ­ãƒ¼ã‚«ãƒ«ã§ã‹ã‚“ãŸã‚“ã«å‹•ä½œç¢ºèªã§ãã¾ã™ã€‚ã¾ãŸã€ãã®å¾Œæœ¬ç•ªç”¨ãƒ—ãƒ­ã‚»ã‚¹ã®ãƒ­ãƒ¼ã‚«ãƒ«ç¢ºèªã€Dockerã‚³ãƒ³ãƒ†ãƒŠã®å‹•ä½œç¢ºèªã€ã‚¯ãƒ©ã‚¦ãƒ‰ä¸Šã§ã®å‹•ä½œç¢ºèªã¨ã€ç¢ºèªã§ãã‚‹ãƒã‚¤ãƒ³ãƒˆãŒå¤šã„ã®ãŒåŠ©ã‹ã‚Šã¾ã™ã­ã€‚</p><p>è©¦ã—ã¦ã¿ã¦ã¡ã‚‡ã£ã¨æ®‹å¿µã ã£ãŸãƒã‚¤ãƒ³ãƒˆã¯ã€brbundleã¯ãã®åã®é€šã‚Šã€ãƒ–ãƒ©ã‚¦ã‚¶ãŒBrotliåœ§ç¸®ã«å¯¾å¿œã—ã¦ã„ãŸã‚‰ã€Brotliå½¢å¼ã§è¿”ã™æ©Ÿèƒ½ãŒã‚ã‚‹ã®ã§ã™ãŒã€ãã‚Œã‚’ä½¿ã†ã¨æ­£ã—ã„çµæœãŒè¿”ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚brbundleã‚’æ‹¡å¼µã—ã¦ã€gzipã§è©¦ã—ã¦ã¿ãŸã„ã§ã™ã€‚</p><p>ã‚ã¨ã€<a href="https://cloud.google.com/run/docs/issues" target="_blank" rel="noopener">Known Issue</a>ã«ã‚‚WebSocketã‚„gRPCã®ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã«ã¯éå¯¾å¿œã¨æ›¸ã‹ã‚Œã¦ã„ã‚‹ã®ã§ã™ãŒã€å®Ÿé¨“ã—ãŸã¨ã“ã‚ã€Chunked Encodingã«ã‚‚éå¯¾å¿œã§ã—ãŸã€‚ãã®ãŸã‚ã€Server Sent Eventã‚’ä½¿ã†ã®ã‚‚ã§ãã¾ã›ã‚“ã€‚Cloud Functionsã‚‚Google App Engineã‚‚ã“ã‚Œã‚‰ã¯ã§ããªã„ã®ã§ã€GCPã®ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã§ã‚µãƒ¼ãƒãƒ¼å´ã‹ã‚‰é€šçŸ¥ã¨ã„ã†ã®ã¯ãƒãƒ¼ãƒªãƒ³ã‚°ä»¥å¤–ã«ã¯ãªã•ãã†ã§ã™ã€‚</p><p>ã¨ã¯ã„ãˆã€ãã¡ã‚“ã¨ã—ãŸç”»é¢ä»˜ãã®ç®¡ç†ç”»é¢ãŒã‹ã‚“ãŸã‚“ã«ç¨¼åƒã§ãã¾ã™ã€‚å¸¸æ™‚ç¨¼åƒã—ãªã„ç®¡ç†ç”»é¢ã®ç¨¼åƒã«ã¯ã†ã£ã¦ã¤ã‘ã§ã™ã€‚1ã‚³ãƒ³ãƒ†ãƒŠã¨ã„ã†åˆ¶ç´„ãŒã‚ã‚Šã¾ã™ãŒã€ãã®ãŠã‹ã’ã§Fargateã®ã‚ˆã†ãªè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹å¿…è¦ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚</p><p>ä»Šå›ã¯ä½¿ã„ã¾ã›ã‚“ã§ã—ãŸãŒã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè£…ãŒãƒ­ãƒ¼ã‚«ãƒ«ã§å˜ä½“ã§å‹•ãã‚µãƒ¼ãƒãƒ¼ã‚’ä½œã‚Œã°è‰¯ã„ã€ã¨ã„ã†ã“ã¨ã§ã€ä»¥å‰æœ¬ãƒ–ãƒ­ã‚°ã§ç´¹ä»‹ã—ãŸ<a href="https://future-architect.github.io/tags/GoCDK/">Go Cloud</a>ã‚’ä½¿ãˆã°ã€ä»–ã®ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã§ã‚‚å‹•ä½œã™ã‚‹ã‚ˆã†ãªãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰ãªç®¡ç†ç”»é¢ã‚‚ã‹ã‚“ãŸã‚“ã«ä½œã‚Œãã†ã§ã™ã€‚</p><h2 id="é–¢é€£ãƒªãƒ³ã‚¯"><a href="#é–¢é€£ãƒªãƒ³ã‚¯" class="headerlink" title="é–¢é€£ãƒªãƒ³ã‚¯"></a>é–¢é€£ãƒªãƒ³ã‚¯</h2><ul><li><a href="https://future-architect.github.io/articles/20190909/">Letâ€™s Try GCP #1 ï½Cloud Run Buttonã‚’ä½¿ã£ãŸæ¥½ã€…ã‚³ãƒ³ãƒ†ãƒŠãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ã‚„ã£ã¦ã¿ãŸï½</a></li><li><a href="https://future-architect.github.io/articles/20190927/">Letâ€™s Try GCP #2 ï½Cloud Functionã‚’VPC connectorã¨ä¸€ç·’ã«ä½¿ã£ã¦ã¿ã‚‹ï½</a></li><li><a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCPé€£è¼‰ä¼ç”»</a></li><li><a href="https://future-architect.github.io/tags/GoCDK/">Go Cloudé€£è¼‰</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/&quot;&gt;GCPé›†ä¸­é€£è¼‰&lt;/a&gt;ã®3å›ç›®ã§ã™ã€‚ä»Šå›ã¯Cloud Runã‚’ä½¿ã£ãŸã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ä½œã‚Šæ–¹ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™
      
    
    </summary>
    
      <category term="Programming" scheme="https://future-architect.github.io/categories/Programming/"/>
    
    
      <category term="GCP" scheme="https://future-architect.github.io/tags/GCP/"/>
    
      <category term="Go" scheme="https://future-architect.github.io/tags/Go/"/>
    
      <category term="GCPé€£è¼‰" scheme="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/"/>
    
      <category term="Serverless" scheme="https://future-architect.github.io/tags/Serverless/"/>
    
  </entry>
  
  <entry>
    <title>GCPé€£è¼‰#2 Istio on GKEã§ã¯ã˜ã‚ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ãƒ¡ãƒƒã‚·ãƒ¥</title>
    <link href="https://future-architect.github.io/articles/20200206/"/>
    <id>https://future-architect.github.io/articles/20200206/</id>
    <published>2020-02-06T02:43:53.000Z</published>
    <updated>2020-02-06T05:13:58.785Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>ã“ã‚“ã«ã¡ã¯ã€TIGã®æ‘ç”°ã§ã™ã€‚<a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCPé€£è¼‰ä¼ç”»</a>2æ—¥ç›®ã®è¨˜äº‹ã§ã™ï¼</p><p>çš†ã•ã‚“ã¯æ™®æ®µã©ã®ã‚ˆã†ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹ç™ºã•ã‚Œã¦ã¾ã™ã‹ï¼Ÿç§ã¯æœ€è¿‘Kubernetesä¸Šã«ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã‚‹ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«æºã‚ã£ã¦ã„ã¾ã™ã€‚</p><p>ä»Šå›ã¯Istio on GKEã«ç„¦ç‚¹ã‚’ã‚ã¦ã¦GCPã«ãŠã‘ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ãƒ¡ãƒƒã‚·ãƒ¥ã®æ´»ç”¨æ–¹æ³•ã‚’ã”ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><h1 id="GKEã‚¯ãƒ©ã‚¹ã‚¿ã‚’ä½œæˆã™ã‚‹"><a href="#GKEã‚¯ãƒ©ã‚¹ã‚¿ã‚’ä½œæˆã™ã‚‹" class="headerlink" title="GKEã‚¯ãƒ©ã‚¹ã‚¿ã‚’ä½œæˆã™ã‚‹"></a>GKEã‚¯ãƒ©ã‚¹ã‚¿ã‚’ä½œæˆã™ã‚‹</h1><p>ã¾ãšã¯ã‚¯ãƒ©ã‚¹ã‚¿ã‚’ä½œæˆã—ã¾ã™ã€‚</p><p>åŸºæœ¬çš„ã«ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã®ã¾ã¾ã‚¯ãƒ©ã‚¹ã‚¿ä½œæˆã—ã¦ã—ã¾ãŠã†ã¨æ€ã„ã¾ã™ã€‚<br>å¤‰ãˆã‚‹ã®ã¯ä¸€ç®‡æ‰€ã ã‘ã€ä»Šå›ã®ç›®ç‰ã®éƒ¨åˆ†ã§ã™ã€‚</p><img src="/images/20200206/photo_20200206_01.png" class="img-middle-size"><p><code>Additional features</code> ã® <code>Enable Istio</code> ã«ãƒã‚§ãƒƒã‚¯ï¼<br>ãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚Œã‚‹ã¨ <code>Enable mTLS</code> æ¬„ãŒç™»å ´ã—ã¾ã™ã€‚</p><p>é¸ã¹ã‚‹ã®ã¯ <code>Permissive</code> ã¨ <code>Strict</code> ã®2ç¨®é¡ã§ã™ãŒã€ä»Šå›ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã§ã‚ã‚‹ <code>Permissive</code> ã®ã¾ã¾ã¨ã—ã¾ã™ã€‚è©³ã—ãã¯ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã‚’è¦‹ã¦ã¿ã¦ãã ã•ã„mm<br><a href="https://cloud.google.com/blog/products/networking/the-service-mesh-era-securing-your-environment-with-istio" target="_blank" rel="noopener">The service mesh era: Securing your environment with Istio</a></p><p>å°‘ã—å¾…ã¤ã¨ã‚¯ãƒ©ã‚¹ã‚¿ãŒã§ãã¾ã—ãŸï¼</p><img src="/images/20200206/photo_20200206_02.png"><p>ã‚¯ãƒ©ã‚¹ã‚¿å†…ã«ä½œæˆã•ã‚ŒãŸServiceã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ gcloud container clusters list --project &lt;your-project&gt;</span><br><span class="line">NAME                LOCATION       MASTER_VERSION  MASTER_IP        MACHINE_TYPE   NODE_VERSION    NUM_NODES  STATUS</span><br><span class="line">standard-cluster-1  us-central1-a  1.13.11-gke.23  130.211.127.151  n1-standard-1  1.13.11-gke.23  3          RUNNING</span><br></pre></td></tr></table></figure><p>Istioé–¢é€£ã®Service(Podã‚‚)ã¯ <code>istio-system</code> ã®Namespaceã«ä½œæˆã•ã‚Œã¾ã™ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl get service -n istio-system</span><br><span class="line">NAME                     TYPE           CLUSTER-IP     EXTERNAL-IP     PORT(S)                                                                                                                                      AGE</span><br><span class="line">istio-citadel            ClusterIP      10.12.6.189    &lt;none&gt;          8060/TCP,15014/TCP                                                                                                                           49m</span><br><span class="line">istio-galley             ClusterIP      10.12.10.108   &lt;none&gt;          443/TCP,15014/TCP,9901/TCP                                                                                                                   49m</span><br><span class="line">istio-ingressgateway     LoadBalancer   10.12.11.17    34.69.104.178   15020:30222/TCP,80:30345/TCP,443:31293/TCP,31400:31428/TCP,15029:30807/TCP,15030:30916/TCP,15031:32448/TCP,15032:31430/TCP,15443:30612/TCP   49m</span><br><span class="line">istio-pilot              ClusterIP      10.12.15.0     &lt;none&gt;          15010/TCP,15011/TCP,8080/TCP,15014/TCP                                                                                                       49m</span><br><span class="line">istio-policy             ClusterIP      10.12.3.166    &lt;none&gt;          9091/TCP,15004/TCP,15014/TCP                                                                                                                 49m</span><br><span class="line">istio-sidecar-injector   ClusterIP      10.12.5.178    &lt;none&gt;          443/TCP                                                                                                                                      49m</span><br><span class="line">istio-telemetry          ClusterIP      10.12.14.103   &lt;none&gt;          9091/TCP,15004/TCP,15014/TCP,42422/TCP                                                                                                       49m</span><br><span class="line">promsd                   ClusterIP      10.12.3.103    &lt;none&gt;          9090/TCP                                                                                                                                     49m</span><br></pre></td></tr></table></figure><p>ã¾ãŸã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ <code>sidecar injection</code> ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã¾ã›ã‚“ã€‚<br>Istioã®ãƒ¡ãƒªãƒƒãƒˆã‚’æœ€å¤§é™äº«å—ã™ã‚‹ãŸã‚ã«ã¯ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã¨ã—ã¦å‹•ãEnvoy proxyãŒå¿…è¦ã§ã™ã€‚<br>ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§æœ‰åŠ¹åŒ–ã—ã¾ã™ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl label namespace default istio-injection=enabled</span><br><span class="line">namespace/default labeled</span><br></pre></td></tr></table></figure><p>ã‚¯ãƒ©ã‚¹ã‚¿ã®æº–å‚™ã¯ã²ã¨ã¾ãšå®Œäº†ã§ã™ã€‚</p><h1 id="ãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹"><a href="#ãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹" class="headerlink" title="ãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹"></a>ãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹</h1><p>ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã„ãˆã°ã“ã‚Œã€ã¨ã„ã†ã“ã¨ã§ <a href="https://github.com/GoogleCloudPlatform/microservices-demo#hipster-shop-cloud-native-microservices-demo-application" target="_blank" rel="noopener">Hipster Shop: Cloud-Native Microservices Demo Application</a> ã‚’æ—©é€Ÿãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚</p><p>ã¾ãšã¯ <code>microservices-demo</code> ã‚’cloneã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone https://github.com/GoogleCloudPlatform/microservices-demo.git</span><br></pre></td></tr></table></figure><p><code>Docker</code>, <code>kubectl</code>, <code>skaffold</code> ãŒå¿…è¦ã¨ã®ã“ã¨ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚ç­†è€…ç’°å¢ƒã§ã¯ <code>skaffold</code> ã®ã¿ãŒç„¡ã‹ã£ãŸã®ã§HomebrewçµŒç”±ã§å…¥ã‚Œã¾ã—ãŸã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew install skaffold</span><br></pre></td></tr></table></figure><p><code>skaffold</code> ã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³åˆ¶ç´„(â‰¥v0.20)ãŒã‚ã‚‹ã®ã§å¿µã®ç‚ºãƒã‚§ãƒƒã‚¯ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ skaffold version</span><br><span class="line">v1.3.1</span><br></pre></td></tr></table></figure><p>å•é¡Œãªã•ãã†ã§ã™ã­ã€‚æ¬¡ã«é€²ã¿ã¾ã™ã€‚<br>READMEã«å¾“ã†å½¢ã§MANIFESTã‚’applyã€‚ã“ã“ã®ç´è§£ãã¯å¾Œè¿°(â˜…)ã—ã¾ã™ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl apply -f ./istio-manifests</span><br><span class="line">gateway.networking.istio.io/frontend-gateway created</span><br><span class="line">virtualservice.networking.istio.io/frontend-ingress created</span><br><span class="line">virtualservice.networking.istio.io/frontend created</span><br><span class="line">serviceentry.networking.istio.io/whitelist-egress-googleapis created</span><br><span class="line">serviceentry.networking.istio.io/whitelist-egress-google-metadata created</span><br></pre></td></tr></table></figure><p>skaffoldã‚’ä½¿ã£ã¦ä¸€æ°—ã«ã‚¤ãƒ¡ãƒ¼ã‚¸ç™»éŒ²ã‹ã‚‰ãƒ‡ãƒ—ãƒ­ã‚¤ã¾ã§ã‚’è¡Œã„ã¾ã™ã€‚Docã§ã¯30åˆ†æœªæº€ã¨ã®è¨˜è¿°ãŒã‚ã‚Šã¾ã—ãŸãŒã€ç­†è€…ç’°å¢ƒã§ã¯1æ™‚é–“åŠä»¥ä¸Šã‹ã‹ã‚Šã¾ã—ãŸã€‚ã€‚ã€‚ãƒã‚·ãƒ³ã‚¹ãƒšãƒƒã‚¯ã¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¹ãƒ”ãƒ¼ãƒ‰ã§ã™ã‹ã­ã€‚ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ skaffold run --default-repo=gcr.io/&lt;your-project&gt;</span><br></pre></td></tr></table></figure><p>ä½•ã¯ã¨ã‚‚ã‚ã‚Œç„¡äº‹ã«ãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã®ãƒ‡ãƒ—ãƒ­ã‚¤ãŒå®Œäº†ã—ã¾ã—ãŸã€‚<br>Podã®ç¨¼åƒçŠ¶æ³ã‚’è¦‹ã¦ã¿ã¾ã™ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl get po</span><br><span class="line">NAME                                     READY   STATUS    RESTARTS   AGE</span><br><span class="line">adservice-7b456d8f85-29s59               2/2     Running   0          9h</span><br><span class="line">cartservice-7874b9c947-7vgmz             2/2     Running   3          9h</span><br><span class="line">checkoutservice-68c84b95cb-kx7z5         2/2     Running   0          9h</span><br><span class="line">currencyservice-58dc87958b-knkzr         2/2     Running   0          9h</span><br><span class="line">emailservice-5f4d4cc69-4mp75             2/2     Running   0          9h</span><br><span class="line">frontend-75b6b5d576-pxbcv                2/2     Running   6          9h</span><br><span class="line">loadgenerator-554f8b4bc8-9rzzx           2/2     Running   6          9h</span><br><span class="line">paymentservice-58867f6b85-nfcwn          2/2     Running   0          9h</span><br><span class="line">productcatalogservice-5c567d44cf-jsgjx   2/2     Running   0          9h</span><br><span class="line">recommendationservice-6fb9fd5b8f-5p449   2/2     Running   0          9h</span><br><span class="line">redis-cart-698f46b844-f4qr8              2/2     Running   0          9h</span><br><span class="line">shippingservice-6fd9764fc5-b44lc         2/2     Running   0          142m</span><br></pre></td></tr></table></figure><p>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¯ãƒ©ã‚¹ã‚¿è¨­å®šã§ã¯ãƒªã‚½ãƒ¼ã‚¹ãŒè¶³ã‚‰ãšã€åŠæ•°ä»¥ä¸Šã®PodãŒPendingçŠ¶æ…‹ã¨ãªã£ã¦ã—ã¾ã„ã¾ã—ãŸã€‚<br>Autoscalingã®è¨­å®šã‚’å…¥ã‚Œã‚‹ã“ã¨ã§è§£æ¶ˆã—ã¾ã—ãŸãŒã€ãã‚Œã«ä¼´ã„CrashLoopBackoffãŒç™ºç”Ÿã—ã¦ã—ã¾ã£ãŸPodãŒã„ãã¤ã‹å­˜åœ¨ã—ã¦ã„ã¾ã™ã€‚</p><p>Autoscaleå¾Œã¯ <code>n1-standard-1</code> ãŒ6å°ä¸¦ã¶æ§‹æˆã¨ãªã‚Šã¾ã—ãŸã€‚ï¼ˆåˆæœŸ3å°æ§‹æˆï¼‰</p><p><code>sidecar injection</code> ã‚’æœ‰åŠ¹ã«ã—ãŸã®ã§ã€Podã®ä¸­ã‚‚å°‘ã—è¦—ã„ã¦ã¿ã¾ã™ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl describe pod adservice-7b456d8f85-29s59</span><br><span class="line">Name:               adservice-7b456d8f85-29s59</span><br><span class="line">Namespace:          default</span><br><span class="line">Priority:           0   </span><br><span class="line">PriorityClassName:  &lt;none&gt;</span><br><span class="line">ãƒ»ãƒ»ãƒ»</span><br><span class="line">ãƒ»ãƒ»ãƒ»</span><br><span class="line">Containers:</span><br><span class="line">  server:</span><br><span class="line">ãƒ»ãƒ»ãƒ»</span><br><span class="line">ãƒ»ãƒ»ãƒ»</span><br><span class="line">  istio-proxy:</span><br><span class="line">ãƒ»ãƒ»ãƒ»</span><br><span class="line">ãƒ»ãƒ»ãƒ»</span><br></pre></td></tr></table></figure><p><code>istio-proxy</code> ãŒã‚³ãƒ³ãƒ†ãƒŠã¨ã—ã¦ç¨¼åƒã—ã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã—ãŸã€‚</p><p>ç”»é¢ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚‚è©¦ã¿ã¦ã¿ã¾ã—ã‚‡ã†ã€‚<br>ã¾ãšã¯IPã‚’å–å¾—ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl get service frontend-external</span><br><span class="line">NAME                TYPE           CLUSTER-IP    EXTERNAL-IP      PORT(S)        AGE</span><br><span class="line">frontend-external   LoadBalancer   10.12.0.203   35.232.239.135   80:30731/TCP   9h</span><br></pre></td></tr></table></figure><p><code>35.232.239.135</code> ãŒIPãªã®ã§ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨â€¦</p><img src="/images/20200206/photo_20200206_03.png"><p>ç„¡äº‹ã«ãƒ‡ãƒ¢ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã¾ã—ãŸï¼ï¼</p><h1 id="ã‚µãƒ¼ãƒ“ã‚¹ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã‚’è¡Œã†"><a href="#ã‚µãƒ¼ãƒ“ã‚¹ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã‚’è¡Œã†" class="headerlink" title="ã‚µãƒ¼ãƒ“ã‚¹ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã‚’è¡Œã†"></a>ã‚µãƒ¼ãƒ“ã‚¹ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã‚’è¡Œã†</h1><p>ã•ã¦ã€Istioã‚’ä½¿ã†æ„ç¾©ã®ä¸€ã¤ã§ã‚ã‚‹ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã«è¸ã¿è¾¼ã‚“ã§ã„ãã¾ã—ã‚‡ã†ã€‚<br>ç´°ã‹ã„è¨­å®šæ‰‹é †ã¯<a href="https://github.com/GoogleCloudPlatform/istio-samples/tree/master/istio-stackdriver#monitoring" target="_blank" rel="noopener">å…¬å¼ã®Monitoringè§£èª¬ãƒ‘ãƒ¼ãƒˆ</a>ãŒã¨ã¦ã‚‚ä¸å¯§ãªã®ã§å‚ç…§ã™ã‚‹ã¨è‰¯ã„ã§ã™ã€‚</p><p>ä»¥ä¸‹ã¯Add Chartã‚ˆã‚ŠServer Latencyã®Chartã‚’ä½œæˆã—ã¦ã„ã‚‹ç”»é¢ã§ã™ã€‚<br>å„é …ç›®è¨­å®šæ™‚ã¯é¸æŠå€™è£œãŒã¨ã¦ã‚‚ãŸãã•ã‚“ã‚ã‚Šã¾ã—ãŸãŒã€ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ã‚¿ãƒ«ã‚µãƒ¼ãƒã§ã©ã‚“ã©ã‚“çµã‚Œã‚‹ã®ã§ã‚¹ãƒˆãƒ¬ã‚¹ãªãä½œæˆã‚’é€²ã‚ã‚‰ã‚Œã¾ã—ãŸã€‚</p><img src="/images/20200206/photo_20200206_04.png"><p>ã„ãã¤ã‹ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’è¿½åŠ ã—ã¦ã¿ã‚‹ã¨â€¦</p><img src="/images/20200206/photo_20200206_05.png"><p>ç°¡å˜ã«ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãŒä½œæˆã§ãã¾ã—ãŸã€‚<br>æ—¢ã«æ§˜ã€…ãªãƒ‡ãƒ¼ã‚¿ãŒStackdriver Monitoringã¸é€ã‚‰ã‚Œã¦ã„ã‚‹ã®ã§ã€ãã‚Œã‚’ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰åŒ–ã™ã‚Œã°è‰¯ã„ã ã‘ã§ç‰¹æ®µé›£ã—ã„ã“ã¨ã¯ç„¡ã‹ã£ãŸã§ã™ã€‚</p><h1 id="ã‚µãƒ¼ãƒ“ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’è¡Œã†"><a href="#ã‚µãƒ¼ãƒ“ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’è¡Œã†" class="headerlink" title="ã‚µãƒ¼ãƒ“ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’è¡Œã†"></a>ã‚µãƒ¼ãƒ“ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’è¡Œã†</h1><p>ç°¡å˜ã§ã™ãŒãƒˆãƒ¬ãƒ¼ã‚¹ã‚‚è¡Œã£ã¦ã¿ã¾ã—ãŸã€‚<br>Stackdriver Traceã®ç”»é¢ã«ã¦æ™‚ç³»åˆ—é †ã«LatencyãŒplotã•ã‚Œã¾ã™ã€‚</p><img src="/images/20200206/photo_20200206_06.png"><p>ã¡ã‚‡ã†ã©ç‚¹ç·šã®ã‚ãŸã‚Šã§ãƒãƒãƒãƒç”»é¢ã‚’è§¦ã£ã¦ã„ãŸã®ã§ã™ãŒã€æ°—ã«ãªã‚‹ã»ã©é«˜Latencyã«ãªã£ã¦ã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p><p>å‡¦ç†ã”ã¨ã®Latencyã‚‚ç¢ºèªã§ãã¾ã™ã€‚</p><img src="/images/20200206/photo_20200206_07.png"><p>ã‚‚ã¡ã‚ã‚“å®Ÿè£…æ¬¡ç¬¬ã§ã¯ã‚‚ã£ã¨ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã—ãŸå½¢ã§Latencyã‚’å‚ç…§ã§ãã¾ã™ã€‚<br>ã“ã‚“ãªã«ç°¡å˜ã«è¦‹ã‚‰ã‚Œã‚‹ã“ã¨ãŒåˆ†ã‹ã£ã¦ã—ã¾ã†ã¨ã€OpenCensusã‚’ä½¿ã£ãŸå¯è¦–åŒ–ã«ã‚‚ã£ã¨ã‚‚ã£ã¨ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ãŸã„ã¨ã„ã†æ°—æŒã¡ã«åŒ…ã¾ã‚Œã¾ã™ï¼</p><h1 id="GKEã‚¯ãƒ©ã‚¹ã‚¿ã«é©ç”¨ã—ãŸIstioç”¨MANIFESTã«ã¤ã„ã¦"><a href="#GKEã‚¯ãƒ©ã‚¹ã‚¿ã«é©ç”¨ã—ãŸIstioç”¨MANIFESTã«ã¤ã„ã¦" class="headerlink" title="GKEã‚¯ãƒ©ã‚¹ã‚¿ã«é©ç”¨ã—ãŸIstioç”¨MANIFESTã«ã¤ã„ã¦"></a>GKEã‚¯ãƒ©ã‚¹ã‚¿ã«é©ç”¨ã—ãŸIstioç”¨MANIFESTã«ã¤ã„ã¦</h1><blockquote><p>READMEã«å¾“ã†å½¢ã§MANIFESTã‚’applyã€‚ã“ã“ã®ç´è§£ãã¯å¾Œè¿°(â˜…)ã—ã¾ã™ã€‚</p></blockquote><p>ã“ã“ã®å¸ƒçŸ³ã‚’å›åã—ã¾ã™ã€‚<br>applyã—ãŸã®ã¯<a href="https://github.com/GoogleCloudPlatform/microservices-demo/tree/master/istio-manifests" target="_blank" rel="noopener">ã“ã“</a>ã«ã‚ã‚‹3ã¤ã®yamlã§ã—ãŸã€‚</p><p>1ã¤ç›®ã¯ <code>frontend-gateway.yaml</code> ã§ã™ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1alpha3</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Gateway</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">frontend-gateway</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  selector:</span></span><br><span class="line"><span class="attr">    istio:</span> <span class="string">ingressgateway</span> <span class="comment"># use Istio default gateway implementation</span></span><br><span class="line"><span class="attr">  servers:</span></span><br><span class="line"><span class="attr">  - port:</span></span><br><span class="line"><span class="attr">      number:</span> <span class="number">80</span></span><br><span class="line"><span class="attr">      name:</span> <span class="string">http</span></span><br><span class="line"><span class="attr">      protocol:</span> <span class="string">HTTP</span></span><br><span class="line"><span class="attr">    hosts:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">"*"</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1alpha3</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">VirtualService</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">frontend-ingress</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  hosts:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">"*"</span></span><br><span class="line"><span class="attr">  gateways:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">frontend-gateway</span></span><br><span class="line"><span class="attr">  http:</span></span><br><span class="line"><span class="attr">  - route:</span></span><br><span class="line"><span class="attr">    - destination:</span></span><br><span class="line"><span class="attr">        host:</span> <span class="string">frontend</span></span><br><span class="line"><span class="attr">        port:</span></span><br><span class="line"><span class="attr">          number:</span> <span class="number">80</span></span><br></pre></td></tr></table></figure><p>Istioã‚’æœ‰åŠ¹åŒ–ã™ã‚‹ã¨è‡ªå‹•çš„ã« <code>Ingress Gateway</code> ãŒæœ‰åŠ¹åŒ–ã•ã‚Œã‚‹ã®ã§ã™ãŒã€å…·ä½“çš„ã«GatewayãŒã©ã®ã‚ˆã†ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘ä»˜ã‘ã‚‹ã‹å®šç¾©ã—ã¦ã„ã‚‹ã®ãŒ <code>kind: Gateway</code> ã®ç®‡æ‰€ã§ã™ã€‚å…¨ã¦ã®HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘ä»˜ã‘ã‚‹å½¢ã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p><code>Ingress Gateway</code> è‡ªä½“ã®è©³ç´°ã¯<a href="https://istio.io/docs/tasks/traffic-management/ingress/ingress-control/" target="_blank" rel="noopener">ã“ã¡ã‚‰</a>ã‚‚å‚ç…§ã—ã¦ã¿ã¦ãã ã•ã„ã€‚</p><p><code>kind: VirtualService</code> ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã®ãŒã€Gatewayã‚’é€šéã—ãŸãƒªã‚¯ã‚¨ã‚¹ãƒˆã®è»¢é€å…ˆã§ã™ã€‚ <code>destination</code> ã«ã¦å…·ä½“çš„ãªè¨˜è¼‰ãŒã‚ã‚Š <code>frontend</code> ã¨è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ãŸã‚ä»Šå›ã®ãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã§ã¯Webç”»é¢ã‚’è¿”å´ã™ã‚‹Webã‚µãƒ¼ãƒã¸ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã•ã‚Œã¾ã™ã€‚</p><p>Ingress Gatewayã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¯ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§å–å¾—å¯èƒ½ã§ã™ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ INGRESS_HOST=&quot;$(kubectl -n istio-system get service istio-ingressgateway \</span><br><span class="line">   -o jsonpath=&apos;&#123;.status.loadBalancer.ingress[0].ip&#125;&apos;)&quot;</span><br><span class="line">$ echo &quot;$INGRESS_HOST&quot;</span><br><span class="line">34.69.104.178</span><br></pre></td></tr></table></figure><p>2ã¤ç›®ã¯ <code>frontend.yaml</code> ã§ã™ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1alpha3</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">VirtualService</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">frontend</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  hosts:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">"frontend.default.svc.cluster.local"</span></span><br><span class="line"><span class="attr">  http:</span></span><br><span class="line"><span class="attr">  - route:</span></span><br><span class="line"><span class="attr">    - destination:</span></span><br><span class="line"><span class="attr">        host:</span> <span class="string">frontend</span></span><br><span class="line"><span class="attr">        port:</span></span><br><span class="line"><span class="attr">          number:</span> <span class="number">80</span></span><br></pre></td></tr></table></figure><p>ã“ã‚Œã®å­˜åœ¨æ„ç¾©ã¯ã—ã£ã‹ã‚Šè…¹è½ã¡ã—ãã£ã¦ã„ãªã„ã®ã§ã™ãŒã€â‘ Istioã®Ingress gatewayã‚’ä½¿ã£ãŸã‚¢ã‚¯ã‚»ã‚¹ã¨â‘¡LoadBalancerã‚’ä½¿ã£ãŸã‚¢ã‚¯ã‚»ã‚¹ã§ã¯HTTPãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒƒãƒ€ã«å·®ç•°ãŒã‚ã‚Šã¾ã—ãŸã€‚</p><p>ã¾ãšã¯â‘ ã®å ´åˆã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ curl -v http://34.69.104.178</span><br><span class="line">* Rebuilt URL to: http://34.69.104.178/</span><br><span class="line">* Trying 34.69.104.178...</span><br><span class="line">* TCP_NODELAY set</span><br><span class="line">* Connected to 34.69.104.178 (34.69.104.178) port 80 (#0)</span><br><span class="line">&gt; GET / HTTP/1.1</span><br><span class="line">&gt; Host: 34.69.104.178</span><br><span class="line">&gt; User-Agent: curl/7.54.0</span><br><span class="line">&gt; Accept: */*</span><br><span class="line">&gt;</span><br><span class="line">&lt; HTTP/1.1 200 OK</span><br><span class="line">&lt; set-cookie: shop_session-id=e654493b-ee35-4c30-9cbd-c11b72f89a4d; Max-Age=172800</span><br><span class="line">&lt; date: Wed, 05 Feb 2020 07:23:26 GMT</span><br><span class="line">&lt; content-type: text/html; charset=utf-8</span><br><span class="line">&lt; x-envoy-upstream-service-time: 70</span><br><span class="line">&lt; server: istio-envoy</span><br><span class="line">&lt; transfer-encoding: chunked</span><br></pre></td></tr></table></figure><p>æ¬¡ã¯â‘¡ã®å ´åˆã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ curl -v http://35.232.239.135</span><br><span class="line">* Rebuilt URL to: http://35.232.239.135/</span><br><span class="line">* Trying 35.232.239.135...</span><br><span class="line">* TCP_NODELAY set</span><br><span class="line">* Connected to 35.232.239.135 (35.232.239.135) port 80 (#0) </span><br><span class="line">&gt; GET / HTTP/1.1 </span><br><span class="line">&gt; Host: 35.232.239.135 </span><br><span class="line">&gt; User-Agent: curl/7.54.0</span><br><span class="line">&gt; Accept: */*</span><br><span class="line">&gt;</span><br><span class="line">&lt; HTTP/1.1 200 OK </span><br><span class="line">&lt; set-cookie: shop_session-id=828d0405-1c54-4605-8156-6178c480540f; Max-Age=172800 </span><br><span class="line">&lt; date: Wed, 05 Feb 2020 07:24:24 GMT</span><br><span class="line">&lt; content-type: text/html; charset=utf-8 </span><br><span class="line">&lt; x-envoy-upstream-service-time: 32</span><br><span class="line">&lt; server: istio-envoy</span><br><span class="line">&lt; x-envoy-decorator-operation: frontend.default.svc.cluster.local:80/* </span><br><span class="line">&lt; transfer-encoding: chunked</span><br></pre></td></tr></table></figure><p>â‘¡ã®LoadBalancerã‚’ä½¿ã£ãŸã‚¢ã‚¯ã‚»ã‚¹ã®å ´åˆã®ã¿ <code>x-envoy-decorator-operation</code> ã¨ã„ã†ãƒ˜ãƒƒãƒ€ãŒå«ã¾ã‚Œã¾ã—ãŸã€‚<a href="https://www.envoyproxy.io/docs/envoy/latest/configuration/http/http_filters/router_filter#x-envoy-decorator-operation" target="_blank" rel="noopener">Envoyã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>ã«ã¦ã“ã®ãƒ˜ãƒƒãƒ€ã«ã¤ã„ã¦è¨€åŠã•ã‚Œã¦ã„ã‚‹ã®ã§ã™ãŒã€ãŠãã‚‰ãå†…éƒ¨ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã«ãŠã‘ã‚‹åå‰è§£æ±ºã®ãŸã‚ã«æœ¬yamlã‚’applyã—ã¦ã„ã‚‹ã‚‚ã®ã¨æ€ã„ã¾ã™ã€‚</p><p>3ã¤ç›®ã¯ <code>whitelist-egress-googleapis.yaml</code><br>å¤–éƒ¨ã¸ã®é€šä¿¡ã‚’è¨±å¯ã™ã‚‹è¨­å®šã§ã™ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1alpha3</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ServiceEntry</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">whitelist-egress-googleapis</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  hosts:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">"accounts.google.com"</span> <span class="comment"># Used to get token</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">"*.googleapis.com"</span></span><br><span class="line"><span class="attr">  ports:</span></span><br><span class="line"><span class="attr">  - number:</span> <span class="number">80</span></span><br><span class="line"><span class="attr">    protocol:</span> <span class="string">HTTP</span></span><br><span class="line"><span class="attr">    name:</span> <span class="string">http</span></span><br><span class="line"><span class="attr">  - number:</span> <span class="number">443</span></span><br><span class="line"><span class="attr">    protocol:</span> <span class="string">HTTPS</span></span><br><span class="line"><span class="attr">    name:</span> <span class="string">https</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1alpha3</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ServiceEntry</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">whitelist-egress-google-metadata</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  hosts:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">metadata.google.internal</span></span><br><span class="line"><span class="attr">  addresses:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="number">169.254</span><span class="number">.169</span><span class="number">.254</span> <span class="comment"># GCE metadata server</span></span><br><span class="line"><span class="attr">  ports:</span></span><br><span class="line"><span class="attr">  - number:</span> <span class="number">80</span></span><br><span class="line"><span class="attr">    name:</span> <span class="string">http</span></span><br><span class="line"><span class="attr">    protocol:</span> <span class="string">HTTP</span></span><br><span class="line"><span class="attr">  - number:</span> <span class="number">443</span></span><br><span class="line"><span class="attr">    name:</span> <span class="string">https</span></span><br><span class="line"><span class="attr">    protocol:</span> <span class="string">HTTPS</span></span><br></pre></td></tr></table></figure><p>â€»å¤–éƒ¨ã¸ã®é€šä¿¡ã«å¯¾ã™ã‚‹æŒ™å‹•ã¯Istioã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚ˆã£ã¦ç•°ãªã‚‹ã®ã§åˆ©ç”¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®<a href="https://istio.io/docs/tasks/traffic-management/egress/egress-control/" target="_blank" rel="noopener">å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p><blockquote><p>all outbound traffic from an Istio-enabled pod is redirected to its sidecar proxy by default</p></blockquote><p>åŸ·ç­†æ™‚ç‚¹(2020.02.05)ã§ã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ <code>1.4.3</code> ã§ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æŒ™å‹•ã¯ã€Œã‚¯ãƒ©ã‚¹ã‚¿å¤–éƒ¨ã¸ã®é€šä¿¡ã‚’è¨±å¯ã™ã‚‹ã€ã¨ãªã‚Šã¾ã™ã€‚</p><p>ã¡ãªã¿ã«ä»Šå›æ¤œè¨¼ã§åˆ©ç”¨ã—ãŸGKEã‚¯ãƒ©ã‚¹ã‚¿ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸIstioã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ <code>1.1.7</code> ã§ã€æ­£ç¢ºã«ã¯ <code>Istio 1.1.17-gke.2</code> ã§ã™ã€‚</p><p>ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã«ã¦ã€GKEã‚¯ãƒ©ã‚¹ã‚¿ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã”ã¨ã®Istioãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ãƒãƒƒãƒ”ãƒ³ã‚°ãŒç¢ºèªã§ãã¾ã™ã€‚<br><a href="https://cloud.google.com/istio/docs/istio-on-gke/versions" target="_blank" rel="noopener">https://cloud.google.com/istio/docs/istio-on-gke/versions</a></p><h1 id="ã•ã„ã”ã«"><a href="#ã•ã„ã”ã«" class="headerlink" title="ã•ã„ã”ã«"></a>ã•ã„ã”ã«</h1><p>ä»Šå›ã¯è§¦ã‚Šã®éƒ¨åˆ†ã§ã—ãŸãŒGKEã«ãŠã‘ã‚‹Istioæ´»ç”¨ã«ã¤ã„ã¦çš†ã•ã‚“ã«ãŠä¼ãˆã§ãã¦ã„ã‚Œã°å¹¸ã„ã§ã™ã€‚Traffic Routingãªã©Istioã®çœŸé«„ã¨ã‚‚è¨€ãˆã‚‹éƒ¨åˆ†ã¸ã®è¸ã¿è¾¼ã¿ã¯ã¾ãŸåˆ¥ã«æ©Ÿä¼šã§ã‚„ã‚ŒãŸã‚‰ã¨æ€ã„ã¾ã™ã€‚</p><p>ä»¥ä¸Šã€GCPé€£è¼‰2æ—¥ç›®ã§ã—ãŸã€‚æ˜æ—¥ã‚‚ãŠæ¥½ã—ã¿ã«ï¼ï¼</p><hr><p>é€£è¼‰ãƒªãƒ³ã‚¯ï¼š</p><ul><li><a href="https://future-architect.github.io/tags/GCP%98A%8D%DA/">GCPé€£è¼‰ä¼ç”»</a></li></ul><p>é–¢é€£è¨˜äº‹ï¼š</p><ul><li><a href="https://future-architect.github.io/articles/20200205/">GCPé€£è¼‰: Stackdriver Loggingã¸è‰¯ã„æ„Ÿã˜ã®ãƒ­ã‚°å‡ºåŠ›æ–¹æ³•ã‚’è€ƒãˆã‚‹</a></li><li><a href="https://future-architect.github.io/articles/20190604/">OpenCensus(OpenTelemetry)ã¨ã¯</a></li><li><a href="https://future-architect.github.io/articles/20191111/">Go Cloud#1 æ¦‚è¦ã¨Blobã¸ã®æ´»ç”¨æ–¹æ³•</a></li><li><a href="https://future-architect.github.io/articles/20190713/">Goã‚’å­¦ã¶ã¨ãã«ã¤ã¾ãšãã‚„ã™ã„ãƒã‚¤ãƒ³ãƒˆFAQ</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h1&gt;&lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€TIGã®æ‘ç”°ã§ã™ã€‚&lt;a href=&quot;https://future-architect.github.io/tag
      
    
    </summary>
    
      <category term="Infrastructure" scheme="https://future-architect.github.io/categories/Infrastructure/"/>
    
    
      <category term="GCP" scheme="https://future-architect.github.io/tags/GCP/"/>
    
      <category term="Istio" scheme="https://future-architect.github.io/tags/Istio/"/>
    
      <category term="Kubernetes" scheme="https://future-architect.github.io/tags/Kubernetes/"/>
    
      <category term="GCPé€£è¼‰" scheme="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/"/>
    
  </entry>
  
  <entry>
    <title>GCPé€£è¼‰#1 Stackdriver Loggingã¸è‰¯ã„æ„Ÿã˜ã®ãƒ­ã‚°å‡ºåŠ›æ–¹æ³•ã‚’è€ƒãˆã‚‹</title>
    <link href="https://future-architect.github.io/articles/20200205/"/>
    <id>https://future-architect.github.io/articles/20200205/</id>
    <published>2020-02-05T00:23:10.000Z</published>
    <updated>2020-02-12T00:39:46.381Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p><a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCPã‚’ãƒ†ãƒ¼ãƒã«ã—ãŸé€£è¼‰ä¼ç”»</a>ã‚’å§‹ã‚ã‚‹ã¨ã„ã†ã“ã¨ã§ã€åˆå›ã¯Stackdriver Loggingã®æ´»ç”¨æ–¹æ³•ã‚’ã¾ã¨ã‚ã¾ã™ã€‚1è¨˜äº‹ã§ã¾ã¨ã‚ã‚‹ã«ã¯æ‰‹ãŒä½™ã‚‹ã»ã©æ§˜ã€…ãªæ©Ÿèƒ½ãŒã‚ã‚‹ãŸã‚ã€åˆå›ã¯ãƒ­ã‚°ã®å‡ºåŠ›ã¨ãƒ“ãƒ¥ãƒ¼ã‚¢å‘¨ã‚Šã¨ã„ã£ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºè€…è¦–ç‚¹ã§ã®æ©Ÿèƒ½ã«çµã£ã¦èª¬æ˜ã—ã¦ã„ãã¾ã™ã€‚åˆ©ç”¨ã‚³ãƒ¼ãƒ‰ã¯Goã§æ›¸ã‹ã‚Œã¦ã„ã¾ã™ãŒã€æ±ç”¨çš„ãªå†…å®¹ãªã®ã§ä»–ã®è¨€èªã§ã‚‚ã‚ã‚‹ç¨‹åº¦é€šã˜ã‚‹å†…å®¹ã«ã—ã¦ã„ã‚‹ã¤ã‚‚ã‚Šã§ã™ã€‚</p><p>é€£è¼‰ä¼ç”»ã¯ä»¥ä¸‹ã®10æœ¬ã‚’ã»ã¼é€£æ—¥æŠ•ç¨¿ã™ã‚‹äºˆå®šã§ã™ã€‚ãŠæ¥½ã—ã¿ã«ï¼</p><ol><li>Stackdriver Loggingã¸è‰¯ã„æ„Ÿã˜ã®ãƒ­ã‚°å‡ºåŠ›æ–¹æ³•ã‚’è€ƒãˆã‚‹ï¼ˆã“ã®è¨˜äº‹ã§ã™ï¼‰</li><li>Istio on GKEã§ã¯ã˜ã‚ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ãƒ¡ãƒƒã‚·ãƒ¥</li><li>Goã§ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ãªç®¡ç†ç”»é¢ã‚¢ãƒ—ãƒªã‚’ä½œã‚‹</li><li>Cloud Life Sciencesã‚’è¦‹ã¦ã¿ãŸ</li><li>ã€ã‚‚ã†éµãªãã•ãªã„ã€‘GCPã®Secret Managerã¨Berglasã§å¹¸ã›ã«ãªã‚‹</li><li>Forseti Config Validator </li><li>s3â†’BigQuery</li><li>Firewall Ruleã®ã‚¿ã‚°å‘½åè¦å‰‡ã«ã¤ã„ã¦è€ƒãˆã¦</li><li>åˆã‚ã¦ã®GCP ç”»åƒAI(VISION API)ã‚’ã•ã‚ã£ã¦ã¿ãŸ</li><li>Cloud Deployment Manager</li></ol><h1 id="Stackdriver-Loggingã«ã¤ã„ã¦"><a href="#Stackdriver-Loggingã«ã¤ã„ã¦" class="headerlink" title="Stackdriver Loggingã«ã¤ã„ã¦"></a>Stackdriver Loggingã«ã¤ã„ã¦</h1><img src="/images/20200205/photo_20200205_01.png" class="img-small-size"><p><a href="https://cloud.google.com/logging" target="_blank" rel="noopener">Stackdriver Logging</a>ã¯ã€GCPã‚„AWS(!)ã‹ã‚‰ã®ãƒ­ã‚°ã®åé›†ã€æ¤œç´¢ã€åˆ†æã€ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã€é€šçŸ¥ã¨ã„ã£ãŸæ©Ÿèƒ½ã‚’æŒã¤GCPã®ãƒãƒãƒ¼ã‚¸ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã®1ã¤ã§ã™ã€‚ãƒ¦ãƒ¼ã‚¶ã‹ã‚‰ã™ã‚‹ã¨ãƒ­ã‚°ã®åé›†ãƒ»è“„ç©ã—ã€ãã‚Œã‚‰ã‚’æ¤œç´¢ã™ã‚‹ãŸã‚ã®ãƒ­ã‚°åŸºç›¤ã‚’è‡ªå‰ã§æ§‹ç¯‰ã™ã‚‹ã®ã¯ã‹ãªã‚Šå¤§å¤‰ã§ã™ãŒã€å…¨ã¦Stackdriver Loggingã‚µãƒ¼ãƒ“ã‚¹å´ãŒé¢å€’è¦‹ã¦ãã‚Œã‚‹ãŸã‚ã€ã‚ˆã‚Šã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãªã©è‡ªåˆ†ãŸã¡ã®é–¢å¿ƒäº‹ã«é›†ä¸­ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><p>ãªãŠã€2020/02/04æ™‚ç‚¹ã§ã¯ãƒ­ã‚°ãƒ‡ãƒ¼ã‚¿ãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã«<a href="https://cloud.google.com/stackdriver/pricing" target="_blank" rel="noopener">æœ€åˆã®50 GiBãŒç„¡æ–™ã§ã€ ãã®å¾Œã¯$0.50/GiB</a> ã®è²»ç”¨ãŒã‹ã‹ã‚Šã¾ã™ã€‚</p><h1 id="Stackdriver-Loggingã«ãƒ­ã‚°ã‚’æµã™æ–¹æ³•"><a href="#Stackdriver-Loggingã«ãƒ­ã‚°ã‚’æµã™æ–¹æ³•" class="headerlink" title="Stackdriver Loggingã«ãƒ­ã‚°ã‚’æµã™æ–¹æ³•"></a>Stackdriver Loggingã«ãƒ­ã‚°ã‚’æµã™æ–¹æ³•</h1><p>Stackdriver Loggingã¸ç›´æ¥ãƒ­ã‚°ãƒ‡ãƒ¼ã‚¿ã‚’æµã—è¾¼ã‚€ã«ã¯ã€<a href="https://cloud.google.com/logging/docs/reference/librarie" target="_blank" rel="noopener">Logging Client Libraries</a>ãŒå­˜åœ¨ã—ã¾ã™ã€‚ã“ã¡ã‚‰ã¯å†…éƒ¨çš„ã«Stackdriver Loggingã®WebAPIã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ã‚³ãƒ¼ãƒ«ã—ã¦ãƒ­ã‚°ãƒ‡ãƒ¼ã‚¿ã‚’æµã—è¾¼ã‚“ã§ãã‚Œã¾ã™ã€‚</p><p>Logging Client Librariesã‚’åˆ©ç”¨ã—ãªãã¦ã‚‚ã€CloudRunã‚„Functionä¸Šã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã€ãã‚Œä¸Šã§æ¨™æº–å‡ºåŠ›/æ¨™æº–ã‚¨ãƒ©ãƒ¼ã§ãƒ­ã‚°ã‚’å‡ºã›ã°Stackdriver Loggingã«GCPã‚µãƒ¼ãƒ“ã‚¹å´ã§é€£æºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚CloudRunã¯æ¨™æº–å‡ºåŠ›/æ¨™æº–ã‚¨ãƒ©ãƒ¼ã«åŠ ãˆã¦ã€ <code>/var/log</code> ã‚„syslog(<code>/dev/log</code>) ã«å‡ºåŠ›ã—ã¦ã‚‚é€£æºã•ã‚Œã¾ã™<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>ã€‚</p><p>ã¾ãŸã€<a href="https://cloud.google.com/logging/docs/agent/" target="_blank" rel="noopener">Stackdriver Logging Agent</a> ã¨ã„ã†fluentdãƒ™ãƒ¼ã‚¹ã®ãƒ„ãƒ¼ãƒ«ã‚’å°å…¥ã™ã‚‹ã“ã¨ã§ã€ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ›ã•ã‚ŒãŸãƒ­ã‚°ã‚‚åé›†ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>ä»Šå›ã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰Logging Client Librariesã‚’ <strong>åˆ©ç”¨ã—ãªã„</strong> ã‚±ãƒ¼ã‚¹ã§èª¿æŸ»ã—ã¦ã„ã¾ã™ã€‚</p><h1 id="ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã«ã¤ã„ã¦"><a href="#ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã«ã¤ã„ã¦" class="headerlink" title="ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã«ã¤ã„ã¦"></a>ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã«ã¤ã„ã¦</h1><p>ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ï¼ˆStackdriver Loggingã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§ã¯severityï¼‰ã«ã‚ˆã£ã¦ã€ãƒ“ãƒ¥ãƒ¼ã‚¢ã§è¡¨ç¤ºã™ã‚‹è¦‹ãŸç›®ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><img src="/images/20200205/photo_20200205_02.png" style="border:solid 1px #000000"><br><p>ä¸Šã‹ã‚‰ã€DEBUGã€INFOã€WARNã€ERRORã€CRITICALã§ã™ã€‚Stackdriverã¯å„ç¨®æ¤œç´¢Filterã‚‚å……å®Ÿã—ã¦ã„ã¾ã™ãŒã€ãƒ­ã‚°é‡ãŒå¢—ãˆã‚‹ã¨ã¡ã‚‡ã£ã¨ã—ãŸã“ã¨ã§è¦‹è½ã¨ã—ãŒç™ºç”Ÿã—ã†ã‚‹ã®ã§ã€éšœå®³æ™‚ã®é‹ç”¨ãƒ•ãƒ­ãƒ¼ã‚’æ•´å‚™ã™ã‚‹å‰ã«Severityã¯æ­£ã—ãè¨­å®šã—ãŸã»ã†ãŒè‰¯ã„ã§ã—ã‚‡ã†ã€‚</p><p>severityè¨­å®šæ–¹æ³•ã¯ã€æ¨™æº–SDKã‚’åˆ©ç”¨ã™ã‚‹ä»¥å¤–ã ã¨ã€ãƒ­ã‚°å‡ºåŠ›ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’JSONã«ã™ã‚‹ã“ã¨ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚</p><p>Goã§JSONå½¢å¼ã§ãƒ­ã‚°å‡ºåŠ›ã¨èãã¨ã€æœ€è¿‘ã§ã¯ â€œrs/zerologâ€ ã‹ â€œuber-go/zapâ€ ãŒã‚ªã‚¹ã‚¹ãƒ¡ã§ã™ãŒã€ä»Šå›ã¯ã‚ã‹ã‚Šã‚„ã™ã•å„ªå…ˆã§å¿ƒã‚’ã“ã‚ã¦json.Marshalã™ã‚‹æ–¹å¼ã§èª¬æ˜ã‚’é€²ã‚ã¾ã™ã€‚</p><p>JSONã®ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«é …ç›®ã¯ <code>severity</code> ã¨ã„ã†åç§°ã§ã™ã€‚</p><figure class="highlight go"><figcaption><span>ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«æŒ‡å®š</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Cloud Functionã®Endpointé–¢æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">StartFunc</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">fmt.Println(FmtJSON(<span class="string">"DEBUG"</span>, <span class="string">"debug log"</span>))</span><br><span class="line">fmt.Println(FmtJSON(<span class="string">"INFO"</span>, <span class="string">"info log"</span>))</span><br><span class="line">fmt.Println(FmtJSON(<span class="string">"WARN"</span>, <span class="string">"warn log"</span>))</span><br><span class="line">fmt.Println(FmtJSON(<span class="string">"ERROR"</span>, <span class="string">"error log"</span>))</span><br><span class="line">fmt.Println(FmtJSON(<span class="string">"FATAL"</span>, <span class="string">"fatal log"</span>))</span><br><span class="line">w.WriteHeader(http.StatusOK)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// JSONå¤‰æ›ç”¨</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">FmtJSON</span><span class="params">(logLevel, message <span class="keyword">string</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">entry := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>&#123;</span><br><span class="line"><span class="string">"severity"</span>: logLevel,</span><br><span class="line"><span class="string">"message"</span>:  message,</span><br><span class="line">&#125;</span><br><span class="line">bytes, _ := json.Marshal(entry)</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">string</span>(bytes)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã“ã®<a href="https://cloud.google.com/functions/docs/deploying/filesystem" target="_blank" rel="noopener">CloudFunctionã‚’ãƒ‡ãƒ—ãƒ­ã‚¤</a>ã—ã€ãƒ†ã‚¹ãƒˆå®Ÿè¡Œãªã©ã‹ã‚‰å®Ÿè¡Œã™ã‚‹ã¨ãƒ­ã‚°å‡ºåŠ›ã‚’ãŠæ‰‹è»½ã«ç¢ºã‹ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>ãã†ã™ã‚‹ã¨ã€ãƒ“ãƒ¥ãƒ¼ã‚¢ã® <code>textPayload</code> ã‹ã‚‰ <code>severity</code> ã®é …ç›®ãŒé™¤å»ã•ã‚Œã€ä¸Šä½ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã‚»ãƒƒãƒˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><img src="/images/20200205/photo_20200205_03.png" style="border:solid 1px #000000"><p>ã¡ãªã¿ã«ã€<a href="https://cloud.google.com/logging/docs/reference/v2/rest/v2/LogEntry#logseverity" target="_blank" rel="noopener">åˆ©ç”¨ã§ãã‚‹ Severityã®ãƒ¬ãƒ™ãƒ«ã¯ä»¥ä¸‹ã®ç¨®é¡</a>ã§ã™ã€‚</p><table><thead><tr><th>ENUM</th><th>Level</th></tr></thead><tbody><tr><td>DEFAULT</td><td>(0) The log entry has no assigned severity level.</td></tr><tr><td>DEBUG</td><td>(100) Debug or trace information.</td></tr><tr><td>INFO</td><td>(200) Routine information, such as ongoing status or performance.</td></tr><tr><td>NOTICE</td><td>(300) Normal but significant events, such as start up, shut down, or a configuration change.</td></tr><tr><td>WARNING</td><td>(400) Warning events might cause problems.</td></tr><tr><td>ERROR</td><td>(500) Error events are likely to cause problems.</td></tr><tr><td>CRITICAL</td><td>(600) Critical events cause more severe problems or outages.</td></tr><tr><td>ALERT</td><td>(700) A person must take an action immediately.</td></tr><tr><td>EMERGENCY</td><td>(800) One or more systems are unusable.</td></tr></tbody></table><p>ã©ã®ãƒ¬ãƒ™ãƒ«ã‚’ã©ã®ã‚ˆã†ãªå ´åˆã«å‡ºåŠ›ã™ã‚‹ã‹ã¯ãƒãƒ¼ãƒ ã”ã¨ã«ã‚³ãƒ³ã‚»ãƒ³ã‚µã‚¹ã‚’å–ã£ãŸã»ã†ãŒè‰¯ã„ã§ã—ã‚‡ã†ã€‚</p><p>ã‚ãŸã—ãŸã¡ã¯ã€ã ã„ãŸã„DEBUG, INFO, WARNING, ERRORã®4ç¨®é¡ã‚’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã§åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚<br>é–‹ç™ºç’°å¢ƒã§ã¯DEBUGã€ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ä»¥ä¸Šã§ã¯INFOãƒ¬ãƒ™ãƒ«ã§ãƒ­ã‚°å‡ºåŠ›ã•ã›ã€ERRORä»¥ä¸Šã§Slackã‚„ãƒ¡ãƒ¼ãƒ«ã«é€šçŸ¥ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚</p><h2 id="ã†ã¾ãè¡Œã‹ãªã„ã‚±ãƒ¼ã‚¹"><a href="#ã†ã¾ãè¡Œã‹ãªã„ã‚±ãƒ¼ã‚¹" class="headerlink" title="ã†ã¾ãè¡Œã‹ãªã„ã‚±ãƒ¼ã‚¹"></a>ã†ã¾ãè¡Œã‹ãªã„ã‚±ãƒ¼ã‚¹</h2><p>ãƒ­ã‚°å‡ºåŠ›å†…å®¹ã‚’JSONã§ã¯ãªãªããŸã ã®ãƒ†ã‚­ã‚¹ãƒˆå½¢å¼ã€ä¾‹ãˆã° <code>fmt.Println(&quot;[INFO] call any method&quot;)</code>  ã«ã—ã¦ã‚‚Stackdriverã¯severityã‚’èªè­˜ã—ã¦ãã‚Œã¾ã›ã‚“ã€‚</p><figure class="highlight go"><figcaption><span>ã†ã¾ãSeverityãŒè¨­å®šã•ã‚Œãªã„ã‚±ãƒ¼ã‚¹</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">StartFunc</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">log.Printf(<span class="string">"[DEBUG] function"</span>)</span><br><span class="line">log.Printf(<span class="string">"[INFO] function"</span>)</span><br><span class="line">log.Printf(<span class="string">"[WARN] function"</span>)</span><br><span class="line">log.Printf(<span class="string">"[ERROR] function"</span>)</span><br><span class="line">w.WriteHeader(http.StatusOK)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><img src="/images/20200205/photo_20200205_04.png" style="border:solid 1px #000000"><p>ä¸Šè¨˜ã®ã‚­ãƒ£ãƒ—ãƒãƒ£ç”»åƒã‚’è¦‹ã‚‹ã¨severity ã¯ç©ºã£ã½ãªã®ã§ã€è¦‹ãŸç›®ã‚‚ç‰¹ã«è‰²ãŒä»˜ã„ã¦ã„ã¾ã›ã‚“ã€‚<br>ãƒ­ã‚°ã‚¨ãƒ³ãƒˆãƒªã‚’ãƒ‰ãƒªãƒ«ãƒ€ã‚¦ãƒ³ã—ã¦ã€<code>severity</code> ã®ãƒ¬ãƒ™ãƒ«ã‚’ç¢ºèªã—ã¦ã‚‚ç©ºã£ã½ã§ã™ã€‚</p><p>ã¾ãŸã€æ¨™æº–ã‚¨ãƒ©ãƒ¼å‡ºåŠ›ã«ãƒ­ã‚°ã‚’æ›¸ãè¾¼ã‚€ã¨ã€severityãŒå¤‰ã‚ã£ã¦ãã‚‹ã¨æœŸå¾…ã—ã¾ã—ãŸãŒã€ã“ã¡ã‚‰ã‚‚å¤‰åŒ–ãªã—ã§ã™ã€‚</p><figure class="highlight go"><figcaption><span>æ¨™æº–ã‚¨ãƒ©ãƒ¼</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">StartFunc</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">fmt.Println(<span class="string">"[INFO] info log"</span>)</span><br><span class="line">fmt.Fprintln(os.Stderr, <span class="string">"[ERROR] error log"</span>) <span class="comment">// æ¨™æº–ã‚¨ãƒ©ãƒ¼</span></span><br><span class="line">w.WriteHeader(http.StatusOK)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><img src="/images/20200205/photo_20200205_05.png" style="border:solid 1px #000000"><p>ã“ã†ã„ã£ãŸãƒ­ã‚°å‡ºåŠ›ãƒãƒªã‚·ãƒ¼ã«ãªã£ã¦ã„ã‚‹å ´åˆã¯ã€æ–‡å­—åˆ—ã§ã¯ERRORã¨ã„ã†ãƒ©ãƒ™ãƒ«ãŒè¦‹ãˆã¾ã™ãŒã€ãƒ“ãƒ¥ãƒ¼ã‚¢ä¸Šã¯ä½•ã‚‚å¤‰åŒ–ã—ãªã„ãŸã‚è¦‹è½ã¨ã—ã«æ³¨æ„ãã ã•ã„ã€‚</p><h1 id="ãƒ­ã‚°å–å¾—æ™‚é–“ã«ã¤ã„ã¦"><a href="#ãƒ­ã‚°å–å¾—æ™‚é–“ã«ã¤ã„ã¦" class="headerlink" title="ãƒ­ã‚°å–å¾—æ™‚é–“ã«ã¤ã„ã¦"></a>ãƒ­ã‚°å–å¾—æ™‚é–“ã«ã¤ã„ã¦</h1><p>ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã® <code>severity</code> åŒæ§˜ã« <code>time</code> ã¨ã„ã†JSONãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¨­å®šã™ã‚‹ã¨ã€ãƒ­ã‚°ä¸Šã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’ä¸Šæ›¸ãã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚æŒ‡å®šã—ãªã„å ´åˆã¯ãŠãã‚‰ãç¾åœ¨æ™‚åˆ»ãŒè¨­å®šã•ã‚Œã¾ã™ã€‚</p><p>æ™‚åˆ»ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯protobufã§ã„ã†<a href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#google.protobuf.Timestamp" target="_blank" rel="noopener">Timestamp</a> ã§ã€RFC 3339ã«å‰‡ã‚Œã°è‰¯ã„ã¨ã®ã“ã¨ã§ã™ã€‚</p><figure class="highlight go"><figcaption><span>timeãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ </span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">StartFunc</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">fmt.Println(FmtJSON(<span class="string">"INFO"</span>, <span class="string">"info log"</span>))</span><br><span class="line">fmt.Println(FmtJSON(<span class="string">"ERROR"</span>, <span class="string">"error log"</span>))</span><br><span class="line">w.WriteHeader(http.StatusOK)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">FmtJSON</span><span class="params">(logLevel, message <span class="keyword">string</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">entry := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>&#123;</span><br><span class="line"><span class="string">"severity"</span>: logLevel,</span><br><span class="line"><span class="string">"message"</span>:  message,</span><br><span class="line"><span class="string">"time"</span>:  time.Now().Format(time.RFC3339Nano), <span class="comment">// timeé …ç›®ã‚’è¿½åŠ </span></span><br><span class="line">&#125;</span><br><span class="line">bytes, _ := json.Marshal(entry)</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">string</span>(bytes)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã“ã®ã‚ˆã†ã«ã™ã‚‹ã¨ã€å…ˆç¨‹ã® severityã¨åŒæ§˜ã«ã€textPayloaã®JSONã‹ã‚‰timeãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒæ¶ˆãˆã€ä¸Šä½ã®timestampãŒæ›¸ãæ›ãˆã‚‰ã‚Œã¾ã™ã€‚</p><img src="/images/20200205/photo_20200205_06.png" style="border:solid 1px #000000"><p>timeãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯ä»»æ„é …ç›®ã§ã™ãŒã€ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œã§ã®ç¢ºèªæ™‚ã«ã‚‚ä¾¿åˆ©ãªãŸã‚ç‰¹ã«ç†ç”±ãŒãªã‘ã‚Œã°ä»˜ã‘ãŸã»ã†ãŒè‰¯ã„ã¨æ€ã„ã¾ã™ã€‚</p><h1 id="Stackdriver-Traceã¨ã¯"><a href="#Stackdriver-Traceã¨ã¯" class="headerlink" title="Stackdriver Traceã¨ã¯"></a>Stackdriver Traceã¨ã¯</h1><img src="/images/20200205/trace.png" class="img-small-size"><p>Stackdriver Traceã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰ãƒ¬ã‚¤ãƒ†ãƒ³ã‚· ãƒ‡ãƒ¼ã‚¿ã‚’åé›†ã—ã¦ Google Cloud Platform Console ã«è¡¨ç¤ºã™ã‚‹ã€åˆ†æ•£ãƒˆãƒ¬ãƒ¼ã‚¹ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚<br><a href="https://cloud.google.com/trace/" target="_blank" rel="noopener">https://cloud.google.com/trace/</a></p><p>åˆ†æ•£ãƒˆãƒ¬ãƒ¼ã‚¹ã£ã¦ä½•ï¼Ÿã¨ã„ã†æ–¹ã¯ã“ã¡ã‚‰â†“ã®è¨˜äº‹ã‚’å‚è€ƒãã ã•ã„ã€‚<br><a href="https://future-architect.github.io/articles/20190604/">https://future-architect.github.io/articles/20190604/</a></p><p>åˆ†æ•£ãƒˆãƒ¬ãƒ¼ã‚¹ã®æ©Ÿèƒ½ã®ä¸€ã¤ã«ã¯ã€ä¸‹å›³ã®ã‚ˆã†ãªã‚¦ã‚©ãƒ¼ã‚¿ãƒ¼ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒ£ãƒ¼ãƒˆã‚’å‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã‚’åˆ©ç”¨ã—ã¦ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒœãƒˆãƒ«ãƒãƒƒã‚¯èª¿æŸ»ãªã©ã«æ´»ã‹ã™ã“ã¨ã§ãã¾ã™ã€‚</p><img src="/images/20200205/photo_20200205_07.png" style="border:solid 1px #000000"><h2 id="Stackdriver-Traceã¨Stackdriver-Loggingã®é€£æº"><a href="#Stackdriver-Traceã¨Stackdriver-Loggingã®é€£æº" class="headerlink" title="Stackdriver Traceã¨Stackdriver Loggingã®é€£æº"></a>Stackdriver Traceã¨Stackdriver Loggingã®é€£æº</h2><p>é€£æºã®å‰æº–å‚™ã¨ã—ã¦ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ­ãƒ¼ãƒ«ã« <strong>Cloud Trace ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ</strong> ã®ãƒ­ãƒ¼ãƒ«ãŒå¿…é ˆã«ãªã‚Šã¾ã™ã€‚</p><p>ã‚³ãƒ¼ãƒ‰ã¯ã¾ãšã€OpenCensusçµŒç”±ã§Stackdriver Traceã«é€£æºã—ã¾ã™ã€‚</p><p><code>trace.ApplyConfig(trace.Config{DefaultSampler: trace.AlwaysSample()})</code> ã¯ãƒ†ã‚¹ãƒˆç”¨ã«æ¯å›ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’è¡Œã†ã‚ˆã†ãªæŒ‡å®šã§ã™ã€‚é€šå¸¸ã¯æ¯å›å®Ÿæ–½ã™ã‚‹ã¨ã‚³ã‚¹ãƒˆãŒé«˜ã„ãŸã‚ã€å‹•ä½œç¢ºèªæ™‚ä»¥å¤–ã¯è¨­å®šã—ãªã„ã»ã†ãŒè‰¯ã„ã¨æ€ã„ã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>åˆæœŸåŒ–å‡¦ç†</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> client *http.Client</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">exporter, err := stackdriver.NewExporter(stackdriver.Options&#123;&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="built_in">panic</span>(err)</span><br><span class="line">&#125;</span><br><span class="line">trace.RegisterExporter(exporter)</span><br><span class="line">trace.ApplyConfig(trace.Config&#123;DefaultSampler: trace.AlwaysSample()&#125;) <span class="comment">// ãƒ†ã‚¹ãƒˆç”¨é€”</span></span><br><span class="line"></span><br><span class="line">client = &amp;http.Client&#123;</span><br><span class="line">Transport: &amp;ochttp.Transport&#123;</span><br><span class="line">Propagation: &amp;propagation.HTTPFormat&#123;&#125;,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Cloud Functionã®é€”ä¸­ã§HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ç™ºè¡Œã™ã‚‹ã‚‚ã®ã¨ã—ã¦ã€http.Clientã‚‚åŒæ™‚ã«ç”Ÿæˆã—ã¦ã„ã¾ã™ã€‚</p><p>ç¶šã„ã¦Cloud Functionã®ãƒ¡ã‚¤ãƒ³å‡¦ç†ã§ã™ã€‚<code>trace.StartSpan(r.Context(), &quot;root function&quot;)</code> ã§Spanã¨ã„ã†ã€è¨ˆæ¸¬ã®å˜ä½ã‚’ä½œæˆã§ãã¾ã™ã€‚å‡¦ç†ã®é€”ä¸­ã§<code>init</code> ã§ç”Ÿæˆã—ãŸ <code>http.Client</code> ã‚’åˆ©ç”¨ã™ã‚‹ã¨ã€OpenCensusãƒ©ã‚¤ãƒ–ãƒ©ãƒªå´ãŒHTTP Request/Responseã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ã¦ã€ Stackdriver Traceå´ã«é€ä¿¡ã—ã¦ãã‚Œã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>Cloud_Functionã®ãƒ¡ã‚¤ãƒ³å‡¦ç†</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">StartFunc</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">sctx, span := trace.StartSpan(r.Context(), <span class="string">"root function"</span>)</span><br><span class="line"><span class="keyword">defer</span> span.End()</span><br><span class="line"></span><br><span class="line">time.Sleep(time.Millisecond * <span class="number">200</span>) <span class="comment">// ä½•ã‹ã—ã‚‰ã®å‡¦ç†ã®ä»£æ›¿ã«Sleepã™ã‚‹</span></span><br><span class="line"></span><br><span class="line">req, _ := http.NewRequest(<span class="string">"GET"</span>, <span class="string">"https://www.future.co.jp"</span>, <span class="literal">nil</span>)</span><br><span class="line">req = req.WithContext(sctx)</span><br><span class="line">resp, err := client.Do(req)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Println(err)</span><br><span class="line">w.WriteHeader(http.StatusInternalServerError)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">defer</span> resp.Body.Close()</span><br><span class="line"></span><br><span class="line">fmt.Println(FmtJSON(<span class="string">"INFO"</span>, <span class="string">"do http get request"</span>))</span><br><span class="line"><span class="keyword">if</span> _, err := ioutil.ReadAll(resp.Body); err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Println(err)</span><br><span class="line">w.WriteHeader(http.StatusInternalServerError)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">w.WriteHeader(http.StatusOK)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Stackdriver Traceå´ã®ãƒ­ã‚°ã®ãƒªãƒ³ã‚¯ã‚’è¦‹ã‚‹ã¨ã€Stackdriver Loggingã§ãƒ­ã‚°ã‚’ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><img src="/images/20200205/photo_20200205_08.png" style="border:solid 1px #000000"><p>ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€Stackdriver Loggingå´ã®è©²å½“ã™ã‚‹ãƒ­ã‚°ã«é·ç§»ã§ãã¾ã™ã€‚</p><img src="/images/20200205/photo_20200205_09.png" style="border:solid 1px #000000"><p>ä»Šå›ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã«ã¯è¨˜è¼‰ã—ã¦ã„ãªã„ã§ã™ãŒã€ãƒ­ã‚°å´ã«æ¤œç´¢æ¡ä»¶ã‚„å‡¦ç†ä»¶æ•°ã‚’å‡ºåŠ›ã—ã¦ãŠãã¨ã€ãã®å‡¦ç†æ™‚é–“ãŒå¦¥å½“ãªã®ã‹ã€æƒ³å®šå¤–ãªã®ã‹åˆ¤æ–­ãŒã§ãã‚‹ãŸã‚ã€æ€§èƒ½èª¿æŸ»ãªã©ã‚’è¡Œã†å ´åˆã«ã¯éå¸¸ã«æœ‰ç”¨ã ã¨æ€ã„ã¾ã™ã€‚</p><h2 id="GCPä»¥å¤–ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‹•ã‹ã™å ´åˆ"><a href="#GCPä»¥å¤–ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‹•ã‹ã™å ´åˆ" class="headerlink" title="GCPä»¥å¤–ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‹•ã‹ã™å ´åˆ"></a>GCPä»¥å¤–ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‹•ã‹ã™å ´åˆ</h2><p>GCPä»¥å¤–ã®ãƒªã‚½ãƒ¼ã‚¹ä¸Šã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‹•ã‹ã™å ´åˆã¯ã€<code>trace</code> ã¨ã€<code>spanId</code> ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’åˆ©ç”¨ã™ã‚‹ã¨Stackdriver Traceã¨Loggingã‚’ç´ä»˜ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã§ã™ã€‚ãã®å ´åˆã¯ãƒ­ã‚°å‡ºåŠ›éƒ¨åˆ†ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãæ›ãˆã‚Œã°è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚ <strong>ã“ã¡ã‚‰ã¯ã¾ã æœªæ¤œè¨¼ãªã®ã§å‚è€ƒç¨‹åº¦ã«ãŠé¡˜ã„ã—ã¾ã™ã€‚</strong></p><p><a href="https://cloud.google.com/logging/docs/reference/v2/rest/v2/LogEntry" target="_blank" rel="noopener">https://cloud.google.com/logging/docs/reference/v2/rest/v2/LogEntry</a></p><figure class="highlight go"><figcaption><span>JSONãƒ­ã‚°å‡ºåŠ›éƒ¨åˆ†</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">FmtJSON</span><span class="params">(logLevel, message <span class="keyword">string</span>, span *trace.Span)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">entry := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>&#123;&#125;&#123;</span><br><span class="line"><span class="string">"severity"</span>: logLevel,</span><br><span class="line"><span class="string">"message"</span>:  message,</span><br><span class="line"><span class="string">"time"</span>:     time.Now().Format(time.RFC3339Nano),</span><br><span class="line"><span class="string">"trace"</span>:    span.SpanContext().TraceID.String(), <span class="comment">// è¿½åŠ </span></span><br><span class="line"><span class="string">"spanId"</span>:   span.SpanContext().SpanID.String(),  <span class="comment">// è¿½åŠ </span></span><br><span class="line">&#125;</span><br><span class="line">bytes, _ := json.Marshal(entry)</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">string</span>(bytes)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ãã®ä»–"><a href="#ãã®ä»–" class="headerlink" title="ãã®ä»–"></a>ãã®ä»–</h1><p>Stackdriverã® <a href="https://cloud.google.com/logging/docs/reference/v2/rest/v2/LogEntry" target="_blank" rel="noopener">LogEntry</a> ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚€ã¨ã€ä»–ã«ã‚‚ <code>labels</code> ã‚„ <code>traceSampled</code> ãªã©ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒå­˜åœ¨ã—ã¾ã™ã€‚  <code>traceSampled</code> ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ false ã§ã™ãŒã€ trueã«ã™ã‚‹ã¨ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã•ã‚Œã¦ Stackdriver Traceå´ã«é€£æºã•ã‚Œã‚‹ã‚ˆã†ã§ã™ã€‚ã“ã®ã‚ãŸã‚Šã®ä½¿ã„åˆ†ã‘ã¯åˆ¥é€”èª¿æŸ»ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><h1 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h1><ul><li>Stackdriver Loggingã§è¦–èªæ€§ã‚’ä¸Šã’ã‚‹ãŸã‚ã«ã¯ã€JSONå½¢å¼ã§ãƒ­ã‚°ã‚’å‡ºåŠ›ã—severityã‚’è¨­å®šã™ã‚‹</li><li>timeé …ç›®ã‚‚è¨­å®šã—ã¦ãŠãã¨è‰¯ã„</li><li>Stackdriver Traceã‚’è¨­å®šã™ã‚‹ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å¯è¦–åŒ–ã¨ãƒ­ã‚°ãŒç´ã¥ãã¨æ—ã‚‹ã®ã§ã‚ªã‚¹ã‚¹ãƒ¡</li></ul><p>è©±ã—ãŒå°‘ã—ãã‚Œã¾ã™ãŒã€ä¸€åº¦Stackdriver Traceã§ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚ºã‚’å§‹ã‚ã‚‹ã¨ã®ã‚¦ã‚©ãƒ¼ã‚¿ãƒ¼ãƒ•ã‚©ãƒ¼ãƒ«ãƒ“ãƒ¥ãƒ¼ã®è¦‹ãŸç›®ã«ã“ã ã‚ã‚ŠãŸããªã‚Šã¾ã™ã€‚ã“ã‚Œã‚‰ã‚’ã†ã¾ãå‡ºã™ã‚³ãƒ„ã«ã¤ã„ã¦ã¯ã¾ãŸåˆ¥é€”ãƒ–ãƒ­ã‚°åŒ–ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><hr><p>é€£è¼‰ãƒªãƒ³ã‚¯ï¼š</p><ul><li><a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCPé€£è¼‰ä¼ç”»</a></li></ul><p>é–¢é€£è¨˜äº‹ï¼š</p><ul><li><a href="https://future-architect.github.io/articles/20190604/">OpenCensus(OpenTelemetry)ã¨ã¯</a></li><li><a href="https://future-architect.github.io/articles/20191111/">Go Cloud#1 æ¦‚è¦ã¨Blobã¸ã®æ´»ç”¨æ–¹æ³•</a></li><li><a href="https://future-architect.github.io/articles/20190713/">Goã‚’å­¦ã¶ã¨ãã«ã¤ã¾ãšãã‚„ã™ã„ãƒã‚¤ãƒ³ãƒˆFAQ</a></li></ul><div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none; padding-left: 0;"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">1.</span><span style="display: inline-block; vertical-align: top;">CloudRunã®ãã®ä»•æ§˜ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆèª­ã‚€ã¾ã§æ°—ãŒä»˜ã‹ãªã‹ã£ãŸã§ã™ã€‚https://cloud.google.com/run/docs/logging</span><a href="#fnref:1" rev="footnote"> â†©</a></li></ol></div></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://future-architect.github.io/tags/GCP%E9%80%A3%
      
    
    </summary>
    
      <category term="Infrastructure" scheme="https://future-architect.github.io/categories/Infrastructure/"/>
    
    
      <category term="GCP" scheme="https://future-architect.github.io/tags/GCP/"/>
    
      <category term="Monitoring" scheme="https://future-architect.github.io/tags/Monitoring/"/>
    
      <category term="Go" scheme="https://future-architect.github.io/tags/Go/"/>
    
      <category term="OpenCensus" scheme="https://future-architect.github.io/tags/OpenCensus/"/>
    
      <category term="GCPé€£è¼‰" scheme="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/"/>
    
  </entry>
  
  <entry>
    <title>ã“ã‚Œã•ãˆã‚ã‚Œã°ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆå›³ãŒã ã„ãŸã„æã‘ã‚‹ã‚¢ã‚¤ã‚³ãƒ³ã‚»ãƒƒãƒˆã‚’å…¬é–‹ã—ã¾ã™ï¼</title>
    <link href="https://future-architect.github.io/articles/20200204/"/>
    <id>https://future-architect.github.io/articles/20200204/</id>
    <published>2020-02-03T23:12:14.000Z</published>
    <updated>2020-02-03T23:26:18.939Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>ã“ã‚“ã«ã¡ã¯ã€‚æœ¨æ‘ã§ã™ã€‚<br>ä»¥å‰ã€<a href="https://future-architect.github.io/articles/20160721/">ã€ã“ã‚Œã•ãˆã‚ã‚Œã°ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³ãŒã ã„ãŸã„æã‘ã‚‹ã‚¢ã‚¤ã‚³ãƒ³ã‚»ãƒƒãƒˆã‚’å…¬é–‹ã—ã¾ã™ï¼ã€</a>ã¨ã„ã†è¨˜äº‹ã‚’å…¬é–‹ã„ãŸã—ã¾ã—ãŸã€‚<br>ã‚‚ã—ã”åˆ©ç”¨ã„ãŸã ã‘ã¦ã„ã‚Œã°ã€å¬‰ã—ã„é™ã‚Šã§ã™ï¼</p><h1 id="ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆå›³ã¨ã¯"><a href="#ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆå›³ã¨ã¯" class="headerlink" title="ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆå›³ã¨ã¯"></a>ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆå›³ã¨ã¯</h1><p>æ˜¨ä»Šã¯DXãƒ»UXãƒ»IoTãªã©ã®è¨€è‘‰ã‚‚æµ¸é€ã—ã€ã‚·ã‚¹ãƒ†ãƒ ã¨ç”Ÿæ´»ã®è·é›¢ãŒã©ã‚“ã©ã‚“è¿‘ããªã£ã¦ãã¦ã„ã¾ã™ã€‚<br>ã‚¹ãƒ©ã‚¤ãƒ‰ã«ãŠã„ã¦ã‚‚ã€ã‚·ã‚¹ãƒ†ãƒ ã«ã¨ã©ã¾ã‚‰ãšã€ã‚µãƒ¼ãƒ“ã‚¹å…¨ä½“ã®æ§‹æˆå›³ã‚’ä½œæˆã™ã‚‹æ©Ÿä¼šãŒã€ã‚ˆã‚Šä¸€å±¤å¢—ãˆã¦ã„ã‚‹ã“ã¨ã‚’å®Ÿæ„Ÿã—ã¦ã„ã¾ã™ã€‚</p><p>ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆå›³ã¯ã€ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆã«åŠ ãˆã€æ§˜ã€…ãªç«‹å ´ã®ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã‚„ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæ©Ÿå™¨ã€ã•ã‚‰ã«ç‰©ç†çš„ãªå ´æ‰€ã‚„ç§»å‹•æ‰‹æ®µã®æ¦‚å¿µãŒå«ã¾ã‚Œã¾ã™ã€‚<br>ã“ã‚Œã‚‰ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’éƒ½åº¦æ¢ã—ã€æ€ã£ãŸã‚ˆã†ãªãƒ¢ãƒãƒ¼ãƒ•ã«ãŸã©ã‚Šç€ãã¾ã§ã«ã¯ã€äºˆæƒ³å¤–ã®æ‰‹é–“ãŒã‹ã‹ã£ã¦ã—ã¾ã†ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚</p><p>ãƒ»ãƒ»ãƒ»ã¨ã„ã†ã“ã¨ã§ã€ã€Œã“ã‚Œã•ãˆã‚ã‚Œã°ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆå›³ãŒã ã„ãŸã„æã‘ã‚‹ã‚¢ã‚¤ã‚³ãƒ³ã‚»ãƒƒãƒˆã€ã‚’å…¬é–‹ã—ã¾ã™ï¼</p><h1 id="ã€Œã“ã‚Œã•ãˆã‚ã‚Œã°ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆå›³ãŒã ã„ãŸã„æã‘ã‚‹ã‚¢ã‚¤ã‚³ãƒ³ã‚»ãƒƒãƒˆã€ã®æ¦‚è¦"><a href="#ã€Œã“ã‚Œã•ãˆã‚ã‚Œã°ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆå›³ãŒã ã„ãŸã„æã‘ã‚‹ã‚¢ã‚¤ã‚³ãƒ³ã‚»ãƒƒãƒˆã€ã®æ¦‚è¦" class="headerlink" title="ã€Œã“ã‚Œã•ãˆã‚ã‚Œã°ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆå›³ãŒã ã„ãŸã„æã‘ã‚‹ã‚¢ã‚¤ã‚³ãƒ³ã‚»ãƒƒãƒˆã€ã®æ¦‚è¦"></a>ã€Œã“ã‚Œã•ãˆã‚ã‚Œã°ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆå›³ãŒã ã„ãŸã„æã‘ã‚‹ã‚¢ã‚¤ã‚³ãƒ³ã‚»ãƒƒãƒˆã€ã®æ¦‚è¦</h1><p>ã‚¢ã‚¤ã‚³ãƒ³ã¯PNGå½¢å¼ã€SVGå½¢å¼ã§å…¬é–‹ã—ã¦ã„ã¾ã™ã€‚<br>å…¨éƒ¨ã§107ç¨®é¡ï¼ˆã†ã¡ã€è‰²å·®åˆ†39ç¨®é¡ï¼‰ã€ã‚µã‚¤ã‚ºã¯500Ã—500ãƒ”ã‚¯ã‚»ãƒ«ã¨ãªã£ã¦ã„ã¾ã™ã€‚</p><img src="/images/20200204/list.png"><p>ï¼ï¼ <a href="https://github.com/future-architect/icons/releases/download/v_1.1.0/v_1.1.0-icons.zip" target="_blank" rel="noopener">ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</a></p><p>ã“ã® ä½œå“ ã¯ <a href="https://creativecommons.org/publicdomain/zero/1.0/deed.ja" target="_blank" rel="noopener">CC0 1.0</a>ã®ä¸‹ã«æä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚<br>ã”è‡ªç”±ã«ãŠä½¿ã„ä¸‹ã•ã„ï¼</p><p>ãªãŠã€ã‚¢ã‚¤ã‚³ãƒ³ã¯Githubã§ç®¡ç†ã—ã¦ã„ã¾ã™ã€‚<br><a href="https://github.com/future-architect/icons" target="_blank" rel="noopener">https://github.com/future-architect/icons</a></p><p>ã‚¢ã‚¤ã‚³ãƒ³æ¢ã—ã®æ‰‹é–“ã‚’çœãã€å°‘ã—ã§ã‚‚ã¿ãªã•ã¾ã«è²¢çŒ®ã§ãã‚Œã°å¹¸ã„ã§ã™ã€‚</p><h1 id="Contribution"><a href="#Contribution" class="headerlink" title="Contribution"></a>Contribution</h1><p>ã“ã®ã‚¢ã‚¤ã‚³ãƒ³ä½œæˆã«ã¯ã€åŒåƒšã®åƒè‘‰ã•ã‚“,ç¹”ç”°ã•ã‚“,åŠ éƒ¨ã•ã‚“,çŸ¢é‡ã•ã‚“ã«å¤šå¤§ãªå”åŠ›ã‚’ã„ãŸã ãã¾ã—ãŸã€‚</p><p>é‡ã­é‡ã­ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼</p><p>ã¾ãŸã€å‰å›ã«Twitterãªã©SNSã§ä½¿ã£ã¦ã„ã‚‹ã‚ˆãªã©ã®å ±å‘Šã¯éå¸¸ã«å¬‰ã—ã‹ã£ãŸã§ã™ã€‚ãœã²ä»Šå¾Œã‚‚ã‚ˆã‚ã—ããŠã­ãŒã„ã—ã¾ã™ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h1&gt;&lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€‚æœ¨æ‘ã§ã™ã€‚&lt;br&gt;ä»¥å‰ã€&lt;a href=&quot;https://future-architect.github.io/
      
    
    </summary>
    
      <category term="Design" scheme="https://future-architect.github.io/categories/Design/"/>
    
    
      <category term="icon" scheme="https://future-architect.github.io/tags/icon/"/>
    
  </entry>
  
  <entry>
    <title>ãƒãƒ¼ãƒ ã§æ©Ÿèƒ½è¨­è¨ˆã™ã‚‹ãŸã‚ã®PlantUMLæ¨™æº–åŒ–</title>
    <link href="https://future-architect.github.io/articles/20200203/"/>
    <id>https://future-architect.github.io/articles/20200203/</id>
    <published>2020-02-03T00:16:35.000Z</published>
    <updated>2020-02-03T00:41:47.199Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><p>ç¾åœ¨æ‰€å±ã—ã¦ã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯WebAPIã‚„ãƒãƒƒãƒå‡¦ç†ã®è¨­è¨ˆã®ä¸€ç’°ã¨ã—ã¦PlantUMLã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚åŠ¹ç‡ã‚ˆãå“è³ªé«˜ãã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã‚’å‡ºã™ãŸã‚ã«ã¯ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã«å¯¾ã—ã¦ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ãŒã‚ã‚‹ã‚ˆã†ã«ã€UMLã«å¯¾ã—ã¦ã‚‚ãƒãƒ¼ãƒ ã§è¨­è¨ˆã™ã‚‹ã«ã‚ãŸã‚Šä¸€å®šã®ãƒ«ãƒ¼ãƒ«ã‚’æ±ºã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚<br>ãã“ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã®PlantUMLã‚’ä½¿ç”¨ã™ã‚‹ã†ãˆã§ã®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã‚„ãƒ«ãƒ¼ãƒ«ã‚’ã¾ã¨ã‚ã‚‹æ©Ÿä¼šãŒã‚ã‚Šã€ã›ã£ã‹ããªã®ã§ãã‚Œã‚’è¨˜äº‹åŒ–ã—ã¾ã™ã€‚</p><h2 id="è¨˜äº‹ã®ã‚´ãƒ¼ãƒ«"><a href="#è¨˜äº‹ã®ã‚´ãƒ¼ãƒ«" class="headerlink" title="è¨˜äº‹ã®ã‚´ãƒ¼ãƒ«"></a>è¨˜äº‹ã®ã‚´ãƒ¼ãƒ«</h2><ul><li>ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³è¨­è¨ˆã«ãŠã‘ã‚‹PlantUMLã®æ¨™æº–åŒ–</li><li>å¿…è¦æœ€ä½é™ã®ãƒ«ãƒ¼ãƒ«ã ã‘ã«çµã£ã¦ãƒãƒ¼ãƒ è¨­è¨ˆã®ç”Ÿç”£æ€§ã¨å“è³ªã‚’ä¸Šã’ã‚‹</li></ul><h2 id="è¨˜äº‹ã®å‰æ"><a href="#è¨˜äº‹ã®å‰æ" class="headerlink" title="è¨˜äº‹ã®å‰æ"></a>è¨˜äº‹ã®å‰æ</h2><ul><li>ãƒ«ãƒ¼ãƒ«ã®æƒ³å®šã®åˆ©ç”¨ã‚·ãƒ¼ãƒ³ï¼š<br>ãƒãƒ¼ãƒ ã§å¤§é‡ç”Ÿç”£ã™ã‚‹æ¥­å‹™æ©Ÿèƒ½ã®å‡¦ç†ãƒ•ãƒ­ãƒ¼ã‚’è¡¨ç¾ã™ã‚‹ãŸã‚ã«ä½¿ã†å ´åˆã‚’æƒ³å®šã€‚<br>ã¾ãŸã€ã“ã®è¨˜äº‹ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ãƒ«ãƒ¼ãƒ«ã¯RDBã‚’ä¸­å¿ƒçš„ã«ä½¿ç”¨ã—ãŸAPIå‡¦ç†ã‚„ãƒãƒƒãƒå‡¦ç†ç­‰ã‚’å¿µé ­ã«ç½®ãæ±ºã‚ã‚‰ã‚ŒãŸã‚‚ã®ã§ã™ã€‚</li><li>ãƒ«ãƒ¼ãƒ«ã®æƒ³å®šã®åŠ¹æœï¼š<br>PlantUMLã‚’æ¨™æº–åŒ–/ã‚·ãƒ³ãƒ—ãƒ«åŒ–ã™ã‚‹ã“ã¨ã§è¨­è¨ˆè€…ã‚‚ã€ãƒ¬ãƒ“ãƒ¥ã‚¢ã‚‚å°‘ãªã„ã‚¤ãƒ³ãƒ—ãƒƒãƒˆã§å“è³ªé«˜ãè¨­è¨ˆ/ãƒ¬ãƒ“ãƒ¥ã§ãã‚ˆã†ã«ãªã‚‹æƒ³å®šã€‚</li><li>ãƒ«ãƒ¼ãƒ«ãŒã‚«ãƒãƒ¼ã—ã¦ã„ã‚‹å›³ã®ç¨®é¡ï¼š<br>PlantUMLã§æ§˜ã€…ãªç¨®é¡ã®å›³ãŒä½œæˆã§ãã¾ã™ãŒã“ã®è¨˜äº‹ã®ã‚¹ã‚³ãƒ¼ãƒ—ã¯ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã«é™ã£ãŸè©±ã«ãªã‚Šã¾ã™ã€‚</li><li>ãƒ«ãƒ¼ãƒ«ã«æ²¿ã£ã¦ä½œæˆã•ã‚Œã‚‹ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã«æœŸå¾…ã•ã‚Œã‚‹æœ€ä½é™ã®å½¹å‰²ï¼š<ul><li>ä¸€ç›®ã§æ©Ÿèƒ½å…¨ä½“ã®æµã‚Œã¨å¤§ã¾ã‹ãªãƒ­ã‚¸ãƒƒã‚¯ãŒã‚ã‹ã‚‹ã€‚</li><li>ãƒ‡ãƒãƒƒã‚°ã€éšœå®³å¯¾å¿œã‚„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã®ç¬¬ä¸€ã‚¹ãƒ†ãƒƒãƒ—ã¨ã—ã¦å³åº§ã«èª¿æŸ»ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’çµã‚Šã€å•é¡Œã®è©³ç´°è¨­è¨ˆã‚„ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã«å°ããƒ’ãƒ³ãƒˆã‚’ä¸ãˆã¦ãã‚Œã‚‹ã€‚</li></ul></li></ul><h2 id="æ›¸ã„ã¦ãªã„å†…å®¹"><a href="#æ›¸ã„ã¦ãªã„å†…å®¹" class="headerlink" title="æ›¸ã„ã¦ãªã„å†…å®¹"></a>æ›¸ã„ã¦ãªã„å†…å®¹</h2><ul><li>PlantUMLã£ã¦ãªã«ï¼Ÿâ†’ <a href="https://plantuml.com/ja/" target="_blank" rel="noopener">https://plantuml.com/ja/</a></li><li>PlantUMLã§ä½•ãŒã§ãã‚‹ï¼Ÿâ†’ <a href="http://plantuml.com/ja/guide" target="_blank" rel="noopener">http://plantuml.com/ja/guide</a></li><li>ãã‚‚ãã‚‚ãªãœUMLï¼Ÿâ†’ <a href="https://qiita.com/laqiiz/items/fb7ad9dfb7430dd08455" target="_blank" rel="noopener">https://qiita.com/laqiiz/items/fb7ad9dfb7430dd08455</a></li><li>PlantUMLã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †ã¯ï¼Ÿâ†’ <a href="https://qiita.com/couzie/items/9dedb834c5aff09ea7b2" target="_blank" rel="noopener">https://qiita.com/couzie/items/9dedb834c5aff09ea7b2</a><br><br>(ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã®éš›ã¯JAVAã®ç’°å¢ƒå¤‰æ•°ã®è¨­å®šã¯å¿˜ã‚Œãšã«ï¼å‚è€ƒï¼š<a href="https://eng-entrance.com/java-install-env" target="_blank" rel="noopener">https://eng-entrance.com/java-install-env</a>)<br>æ°—è»½ã«PlantUMLã‚’ä½¿ç”¨ã—ãŸã„æ–¹ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ã§ã‚‚ã§ãã¾ã™ï¼š <a href="https://www.planttext.com/" target="_blank" rel="noopener">https://www.planttext.com/</a>   </li></ul><h2 id="æ›¸ã„ã¦ã‚‹å†…å®¹"><a href="#æ›¸ã„ã¦ã‚‹å†…å®¹" class="headerlink" title="æ›¸ã„ã¦ã‚‹å†…å®¹"></a>æ›¸ã„ã¦ã‚‹å†…å®¹</h2><ul><li>ã“ã®ãƒ«ãƒ¼ãƒ«ã«æ²¿ã£ã¦PlantUMLã§ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã‚’æ¥½ã—ãæ›¸ã„ã¦ã„ãã¾ã—ã‚‡ã†ï¼</li></ul><h2 id="puãƒ•ã‚¡ã‚¤ãƒ«ã®åŸºæœ¬"><a href="#puãƒ•ã‚¡ã‚¤ãƒ«ã®åŸºæœ¬" class="headerlink" title="puãƒ•ã‚¡ã‚¤ãƒ«ã®åŸºæœ¬"></a>puãƒ•ã‚¡ã‚¤ãƒ«ã®åŸºæœ¬</h2><p>PlantUMLã®ãƒ•ã‚¡ã‚¤ãƒ«(pu)ã®ä¸­èº«ã¯å¤§ä½“ã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚<br>å¤§ããã€è‰²ç­‰ã¨ã„ã£ãŸè¦‹ãŸç›®ã‚’æ±ºã‚ã‚‹éƒ¨åˆ†ï¼ˆL39ã‚ˆã‚Šä¸Šï¼‰ã¨ã€å®Ÿéš›ã®ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã®ãƒ•ãƒ­ãƒ¼ã‚’ç¤ºã™éƒ¨åˆ†ï¼ˆL39ã‚ˆã‚Šä¸‹ï¼‰ã«åˆ†ã‘ã‚‰ã‚Œã¾ã™ã€‚<br><img src="/images/20200203/photo_20200203_01.png" class="img-middle-size"><br>ãªãŠã€è¦‹ãŸç›®ã‚’æ±ºã‚ã‚‹éƒ¨åˆ†ã¯åˆ¥ã®ã‚³ãƒ¼ãƒ‰ã¯ä¸€ã¤ã®configãƒ•ã‚¡ã‚¤ãƒ«ã«çµ±ä¸€ã•ã›ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ãŒã€ã“ã“ã¯ãƒãƒ¼ãƒ ã®ç®¡ç†ã®ä»•æ–¹ã«åˆã‚ã›ã¦ã‚„ã‚Šã¾ã—ã‚‡ã†ã€‚</p><p>ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹ã¨ä¸‹è¨˜ã®ã‚ˆã†ãªç¶ºéº—ãªå›³ã«ãªã‚Šã¾ã™ã€‚<br><img src="/images/20200203/photo_20200203_02.png" class="img-middle-size"></p><h2 id="åŸºæœ¬çš„ãªå‡¦ç†ã®æ›¸ãæ–¹"><a href="#åŸºæœ¬çš„ãªå‡¦ç†ã®æ›¸ãæ–¹" class="headerlink" title="åŸºæœ¬çš„ãªå‡¦ç†ã®æ›¸ãæ–¹"></a>åŸºæœ¬çš„ãªå‡¦ç†ã®æ›¸ãæ–¹</h2><h3 id="çŸ¢å°"><a href="#çŸ¢å°" class="headerlink" title="çŸ¢å°"></a>çŸ¢å°</h3><p>å‡¦ç†ãŒç™ºç”Ÿã™ã‚‹ç®‡æ‰€ã¯çŸ¢å°ã§è¡¨ã—ã¾ã™ã€‚</p><ul><li><strong>ã‚·ãƒ³ã‚°ãƒ«ãƒ˜ãƒƒãƒ‰</strong> - å‡¦ç†ãŒã‚¢ã‚¯ã‚¿ãƒ¼ã‚’è·¨ã„ã§ä¸€æ–¹çš„ã«ãªã£ã¦ã„ã‚‹ã‚‚ã®<br>ï¼ˆä¾‹ï¼šãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡ã€Queueã«è©°ã‚ã‚‹å‡¦ç†ç­‰ï¼‰</li></ul><figure class="highlight plain"><figcaption><span>single_head_example.pu</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Client -&gt; Backend: Request</span><br></pre></td></tr></table></figure><img src="/images/20200203/photo_20200203_03.png" class="img-small-size"><ul><li><strong>ãƒ€ãƒ–ãƒ«ãƒ˜ãƒƒãƒ‰</strong> - å‡¦ç†ãŒã‚¢ã‚¯ã‚¿ãƒ¼ã‚’è·¨ã„ã§åŒæ–¹çš„ã«ãªã£ã¦ã„ã‚‹ã‚‚ã®<br><br>ï¼ˆä¾‹ï¼šãƒã‚¹ã‚¿ãƒ¼ãƒã‚§ãƒƒã‚¯ã€DBã‚¢ã‚¯ã‚»ã‚¹å‡¦ç†ç­‰ï¼‰</li></ul><figure class="highlight plain"><figcaption><span>double_head_example.pu</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Backend &lt;-&gt; RDB: Master Check\n[Store Control Master]</span><br></pre></td></tr></table></figure><img src="/images/20200203/photo_20200203_04.png" class="img-small-size"><ul><li><strong>ãƒªã‚¿ãƒ¼ãƒ‹ãƒ³ã‚°</strong> - å‡¦ç†ãŒã‚¢ã‚¯ã‚¿ãƒ¼ã‚’è·¨ãŒãªã„ã‚‚ã®<br><br>ï¼ˆä¾‹ï¼šDBã«ã‚¢ã‚¯ã‚»ã‚¹ã›ãšJavaå†…ã§å®Œçµã™ã‚‹ãƒã‚§ãƒƒã‚¯å‡¦ç†ç­‰ï¼‰</li></ul><figure class="highlight plain"><figcaption><span>returning_example.pu</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Backend -&gt; Backend: Add select result into Error List</span><br></pre></td></tr></table></figure><img src="/images/20200203/photo_20200203_05.png" class="img-small-size"><h3 id="ã‚¤ãƒ™ãƒ³ãƒˆ"><a href="#ã‚¤ãƒ™ãƒ³ãƒˆ" class="headerlink" title="ã‚¤ãƒ™ãƒ³ãƒˆ"></a>ã‚¤ãƒ™ãƒ³ãƒˆ</h3><ul><li><strong>note</strong> - å¤§ããªã‚¤ãƒ™ãƒ³ãƒˆã”ã¨ã«noteæ¯ã§åˆ†ã‘ã¦è¦‹ã‚„ã™ãã—ã¾ã™<br>ï¼ˆä¾‹ï¼šParameter Check &gt; Update t_status_history<blockquote><p>Process Endï¼‰</p></blockquote></li></ul><figure class="highlight plain"><figcaption><span>note_example.pu</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">note over Backend: 1. Parameter Check</span><br></pre></td></tr></table></figure><img src="/images/20200203/photo_20200203_06.png" class="img-small-size"><h3 id="åˆ†å²"><a href="#åˆ†å²" class="headerlink" title="åˆ†å²"></a>åˆ†å²</h3><p>ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³å†…ã§åˆ†å²ã‚„æ¡ä»¶ä»˜ãå‡¦ç†ã‚’è¡¨ã—ãŸã„å ´åˆã¯åˆ†å²ã®å‡¦ç†æ¯ã«Altã§å›²ã¿ã¾ã™ã€‚</p><ul><li><strong>alt</strong> - ã„ã‚ã‚†ã‚‹ifã®ã‚ˆã†ãªæ¡ä»¶ä»˜ãå‡¦ç†</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Backend-&gt;Backend: Check A and B</span><br><span class="line">alt If A</span><br><span class="line">    Backend -&gt; Backend: Add x to Error List</span><br><span class="line">end</span><br><span class="line">alt If B</span><br><span class="line">    Backend &lt;-&gt; RDB: Insert x to A table</span><br><span class="line">end</span><br></pre></td></tr></table></figure><img src="/images/20200203/photo_20200203_07.png" class="img-small-size"><ul><li><strong>alt - else â‘ </strong> - ã„ã‚ã‚†ã‚‹if-elseã®ã‚ˆã†ãªåˆ†å²å‡¦ç†</li></ul><figure class="highlight plain"><figcaption><span>alt_else_example.pu</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Backend-&gt;Backend: Check A and B</span><br><span class="line">alt If A</span><br><span class="line">    Backend -&gt; Backend: Add x to Error List</span><br><span class="line">else</span><br><span class="line">    Backend &lt;-&gt; RDB: Insert x to A table</span><br><span class="line">end</span><br></pre></td></tr></table></figure><img src="/images/20200203/photo_20200203_08.png" class="img-small-size"><ul><li><strong>alt - else â‘¡</strong> - ã„ã‚ã‚†ã‚‹if-else if-elseã®ã‚ˆã†ãªåˆ†å²å‡¦ç†</li></ul><figure class="highlight plain"><figcaption><span>alt_else_ifexample.pu</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Backend -&gt; Backend: Check something</span><br><span class="line">alt If A</span><br><span class="line">    Backend -&gt; Backend: Add x to Error List</span><br><span class="line">else If B</span><br><span class="line">    Backend &lt;-&gt; RDB: Insert x to A table</span><br><span class="line">else</span><br><span class="line">    Backend -&gt; Client: Response status code 422</span><br><span class="line">end</span><br></pre></td></tr></table></figure><img src="/images/20200203/photo_20200203_09.png" class="img-small-size"><h3 id="ãƒ«ãƒ¼ãƒ—"><a href="#ãƒ«ãƒ¼ãƒ—" class="headerlink" title="ãƒ«ãƒ¼ãƒ—"></a>ãƒ«ãƒ¼ãƒ—</h3><p>loopãŒç™ºç”Ÿã—ãŸå ´åˆã¯loopã§å›²ã¿ã¾ã™ã€‚<br>loopã®å³ã«ã¯ãƒ«ãƒ¼ãƒ—ã‚’å›ã™å˜ä½ã‚’For Eachã§è¨˜è¼‰ã™ã‚‹</p><ul><li><strong>loop</strong></li></ul><figure class="highlight plain"><figcaption><span>loop_example.pu</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">loop for each EPC</span><br><span class="line">  Backend &lt;-&gt; RDB: Insert\n[t_sales] </span><br><span class="line">end</span><br></pre></td></tr></table></figure><img src="/images/20200203/photo_20200203_13.png" class="img-small-size"><h3 id="ãã®ä»–"><a href="#ãã®ä»–" class="headerlink" title="ãã®ä»–"></a>ãã®ä»–</h3><ul><li><strong>æ¡ç•ªã®ãƒ«ãƒ¼ãƒ«</strong><br>æ®†ã©ã®å ´åˆã€ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã¯ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³ã§ã¯ãªãã€ä¸€ã¤ä¸€ã¤ã®å‡¦ç†ã®è©³ç´°ï¼ˆãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å®šç¾©ã€ãƒã‚§ãƒƒã‚¯å®šç¾©ã€DBå¤‰æ›´å®šç¾©ç­‰ï¼‰ã‚’å›³ä»¥å¤–ã®å ´æ‰€ã«è¨˜è¼‰ã—ã¾ã™ã‚ˆã­ã€‚ãã†ã„ã£ãŸè¨­è¨ˆæ›¸å†…ã®è©³ç´°ã®è¨˜è¼‰ã¨ãƒãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹ãŸã‚ã«ä¸€å€‹ä¸€å€‹ã®ãƒ•ãƒ­ãƒ¼ã‚¹ãƒ†ãƒƒãƒ—ã«ãƒ—ãƒ­ã‚»ã‚¹IDã‚’ä»˜ã‘ã¾ã™ã€‚ãƒ—ãƒ­ã‚»ã‚¹IDã®æ¡ç•ªã¯ä¸‹è¨˜ã®ãƒ«ãƒ¼ãƒ«ã§å®Ÿæ–½ã—ã¾ã™ï¼š<ul><li><font color="YellowGreen">å‡¦ç†ãŒè¤‡æ•°ã‚ã£ãŸå ´åˆã€éšå±¤ãŒåŒã˜å‡¦ç†ã¯å‡¦ç†ãŒç™ºç”Ÿã™ã‚‹é †ã«ç•ªå·ã‚’æŒ¯ã£ã¦ã„ã</font></li><li><font color="LightCoral">ç›´å‰ã®å‡¦ç†ã‹ã‚‰altã§éšå±¤ãŒæ·±ããªã‚‹ãŸã³ã«IDã®æ¡ã«1ã‚’è¶³ã—ã€ï¼‘ã‹ã‚‰å§‹ã‚ã‚‹</font></li><li><font color="LightSkyBlue">ç›´å‰ã®å‡¦ç†ã‹ã‚‰altã§éšå±¤ãŒæ·±ããªã‚‹ã¨åŒæ™‚ã«ã€ãã®éšå±¤ã«è¤‡æ•°å‡¦ç†ãŒã‚ã£ãŸå ´åˆã€IDã®æ¡ã«2æ¡è¶³ã™ï¼ˆæ·±ããªã£ãŸç†ç”±ã§ã®ä¸€æ¡ã¨è¤‡æ•°å‡¦ç†ã‚’åˆ†ã‘ã‚‹ãŸã‚ã®ã‚‚ã†ä¸€æ¡ï¼‰</font></li></ul></li></ul><figure class="highlight plain"><figcaption><span>id_example.pu</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">note over Backend: 2. Update Family Tree</span><br><span class="line">loop for each New Member</span><br><span class="line">    alt If Update Pattern = Any member</span><br><span class="line">        Backend -&gt; Backend: 2.1. Check DNA</span><br><span class="line">        alt If DNA test returns success</span><br><span class="line">            Backend &lt;-&gt; RDB: 2.1.1.1. Update\n[t_parent]</span><br><span class="line">            Backend &lt;-&gt; RDB: 2.1.1.2. Update\n[t_child]</span><br><span class="line">            Backend &lt;-&gt; RDB: 2.1.1.3. Update\n[t_grand_child]</span><br><span class="line">        end</span><br><span class="line">        alt If DNA test returns failure</span><br><span class="line">            Backend -&gt; Backend: 2.1.2. Add Member into Error List</span><br><span class="line">        end</span><br><span class="line">    end</span><br><span class="line">end</span><br></pre></td></tr></table></figure><img src="/images/20200203/photo_20200203_11.png" class="img-middle-size"><ul><li><strong>æ”¹è¡Œ</strong><br>æ–‡å­—ã®è¨˜è¼‰ç­‰ã§æ”¹è¡Œã—ãŸã„å ´åˆã¯<code>\n</code>ã‚’ä½¿ã„ã¾ã—ã‚‡ã†ã€‚</li></ul><figure class="highlight plain"><figcaption><span>return_example.pu</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">loop for each EPC</span><br><span class="line">  Backend &lt;-&gt; RDB: Insert\n[t_sales] </span><br><span class="line">end</span><br></pre></td></tr></table></figure><img src="/images/20200203/photo_20200203_13.png" class="img-small-size"><ul><li><strong>ãƒ†ãƒ¼ãƒ–ãƒ«å</strong><br>DBã‚¢ã‚¯ã‚»ã‚¹ãŒç™ºç”Ÿã—ãŸå ´åˆã¯ã§ãã‚‹é™ã‚Šå¯¾è±¡ãƒ†ãƒ¼ãƒ–ãƒ«ã‚„ãƒ‡ãƒ¼ã‚¿ã‚’è¨˜è¼‰ã—ã¾ã—ã‚‡ã†ã€‚<br><br>ãƒ†ãƒ¼ãƒ–ãƒ«åã¯[ ]ã«å…¥ã‚Œã¾ã—ã‚‡ã†ã€‚</li></ul><figure class="highlight plain"><figcaption><span>table_example.pu</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">loop for each EPC</span><br><span class="line">  Backend &lt;-&gt; RDB: Insert\n[t_sales] </span><br><span class="line">end</span><br></pre></td></tr></table></figure><img src="/images/20200203/photo_20200203_13.png" class="img-small-size"><ul><li><strong>ã‚¨ãƒ©ãƒ¼</strong><br>ã‚¨ãƒ©ãƒ¼ã‚„ã‚¨ã‚¯ã‚»ãƒ—ã‚·ãƒ§ãƒ³ã¯Altã§è¡¨ç¾ã—ã¾ã—ã‚‡ã†ã€‚</li></ul><figure class="highlight plain"><figcaption><span>error_example.pu</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alt Error</span><br><span class="line">    Backend -&gt; Client: 1.4. Response status code 402</span><br><span class="line">end</span><br></pre></td></tr></table></figure><img src="/images/20200203/photo_20200203_14.png" class="img-small-size"><ul><li><strong>ãƒ­ãƒƒã‚¯</strong><br>ãƒ­ãƒƒã‚¯ã™ã‚‹å ´åˆã¯ä¸‹è¨˜ã®ã‚ˆã†ã«<code>Select Lock for [ãƒ­ãƒƒã‚¯è§£é™¤ã®å‡¦ç†] [ãƒ­ãƒƒã‚¯ã™ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«]</code>ã¨è¨˜è¼‰ã™ã‚‹ã€‚<br>ãŸã ãƒ­ãƒƒã‚¯ã«é–¢ã—ã¦ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ­ãƒƒã‚¯æ–¹å¼ãªã©ã«ã‚‚ã‚ˆã‚‹ã®ã§ã“ã“ã¯ãƒ•ãƒ¬ã‚­ã‚·ãƒ–ãƒ«ã«ã€‚</li></ul><figure class="highlight plain"><figcaption><span>lock_example.pu</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Backend &lt;-&gt; RDB: 2.2.1. Select\nLock for Update at 2.2.4\n[t_sales_header]</span><br></pre></td></tr></table></figure><img src="/images/20200203/photo_20200203_15.png" class="img-small-size"><ul><li><p><strong>ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆ</strong><br>ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã¯åŸºæœ¬ã—ãªãã¦ã‚‚ã‚³ãƒ¼ãƒ‰ã¯ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹ãŒã€ä»–ã®è¨€èªåŒæ§˜èª­ã¿ã‚„ã™ã„ã‚ˆã†ã«å…¥ã‚Œã¾ã—ã‚‡ã†ã€‚</p></li><li><p><strong>è‰²</strong><br>ä½™è«‡ã§ã™ãŒPlantUMLã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚«ãƒ©ãƒ¼ã£ã¦è‰¯ã„ã¨æ€ã†äººã€ä¸–ã®ä¸­ã‚ã¾ã‚Šã„ãªã„ã§ã™ã‚ˆã­ã€‚<br>ã“ã‚Œã¯ã‚‚ã†ã€ç›®ã«è‰¯ã„ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã«è‡ªåˆ†ã§å¤‰ãˆã¦ã„ãã—ã‹ãªã„ã§ã™ã€‚<br>è‰²ã‚’å¤‰ãˆã‚‹ã ã‘ã§ã ã„ã¶å°è±¡ã‚‚å¤‰ã‚ã£ã¦ãã¾ã™ã€‚ã¡ãªã¿ã«ç§ã®ãŠæ°—ã«å…¥ã‚Šã¯ï¼š</p><ul><li>ãƒ‘ãƒ¬ãƒƒãƒˆâ‘ ï¼š<br>ã€Œpuãƒ•ã‚¡ã‚¤ãƒ«ã®åŸºæœ¬ã€ã§ä½¿ã£ãŸã‚µãƒ³ãƒ—ãƒ«å›³ã§ä½¿ã£ã¦ã„ã‚‹ã‚‚ã®ã§ã™ã€‚ã‚°ãƒ¬ãƒ¼ã‚’ãƒ™ãƒ¼ã‚¹ã«ã‚«ãƒ©ãƒ•ãƒ«ãªã‚¢ã‚¯ã‚»ãƒ³ãƒˆã€ãƒˆã‚¤ãƒ©ã‚¤ã‚¯ã§è¦‹ã‚„ã™ã„ï¼ˆå€‹äººçš„ãªæ„è¦‹ï¼‰ãƒ‘ãƒ¬ãƒƒãƒˆã‚’ä½œã‚Šã¾ã—ãŸã€‚<br><ul><li><code>#FFFFFF</code><span class="inline-code-color" style="background-color: #FFFFFF;"></span>ï¼ˆfont1ï¼‰</li><li><code>#DDDDDD</code><span class="inline-code-color" style="background-color: #DDDDDD;"></span>ï¼ˆbackgroundï¼‰</li><li><code>#454645</code><span class="inline-code-color" style="background-color: #454645;"></span>ï¼ˆfont2ã€lineï¼‰</li><li><code>#FF6F61</code><span class="inline-code-color" style="background-color: #FF6F61;"></span>ï¼ˆparticipantï¼‰</li><li><code>#98DDDE</code><span class="inline-code-color" style="background-color: #98DDDE;"></span>ï¼ˆdatabase)</li><li><code>#FFDA29</code><span class="inline-code-color" style="background-color: #FFDA29;"></span>ï¼ˆentityï¼‰</li><li><code>#98FB98</code><span class="inline-code-color" style="background-color: #98FB98;"></span>ï¼ˆnoteï¼‰</li></ul></li><li>ãƒ‘ãƒ¬ãƒƒãƒˆâ‘¡ï¼š<br>ã€ŒåŸºæœ¬çš„ãªå‡¦ç†ã®æ›¸ãæ–¹ã€ã§ä½¿ã£ãŸã‚µãƒ³ãƒ—ãƒ«å›³ã§ä½¿ã£ã¦ã„ã‚‹ã‚‚ã®ã§ã™ã€‚ä½¿ç”¨ã™ã‚‹è‰²ãŒå°‘ãªã„ãªãŸã‚ã‚·ãƒ³ãƒ—ãƒ«ã§ã‚¯ãƒªãƒ¼ãƒ³ãªè³‡æ–™ã¨ç›¸æ€§ãŒè‰¯ã„ã§ã™ã€‚ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚‚ç™½ãã€ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã‚’Webç­‰ã«åŸ‹ã‚è¾¼ã‚“ã§ä½¿ã†å ´åˆã«é©ã—ã¦ãŠã‚Šã€ãƒšãƒ¼ã‚¸ã¨ä¸€ä½“åŒ–ã—ã¦è¦‹ãˆã‚‹ã®ã§çµ±ä¸€æ„ŸãŒã‚ã£ã¦ãŠã™ã™ã‚ã§ã™ã€‚<br><ul><li><code>#FFFFFF</code><span class="inline-code-color" style="background-color: #FFFFFF;"></span>ï¼ˆfont1, backgroundï¼‰</li><li><code>#696969</code><span class="inline-code-color" style="background-color: #696969;"></span>ï¼ˆlineï¼‰</li><li><code>#454645</code><span class="inline-code-color" style="background-color: #454645;"></span>ï¼ˆfont2ï¼‰</li><li><code>#FF6347</code><span class="inline-code-color" style="background-color: #FF6347;"></span>ï¼ˆparticipantï¼‰</li><li><code>#00FFFF</code><span class="inline-code-color" style="background-color: #00FFFF;"></span>ï¼ˆdatabaseï¼‰</li><li><code>#7FFFD4</code><span class="inline-code-color" style="background-color: #7FFFD4;"></span>ï¼ˆnoteï¼‰</li></ul></li><li>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼š<br>ã‚‚ã¡ã‚ã‚“ã€ã‚«ãƒ©ãƒ¼ã«ã“ã ã‚ã‚Šã®ãªã„æ–¹ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ãƒˆãƒ©ãƒ‡ã‚£ã‚·ãƒ§ãƒŠãƒ«ãªç™½é»’é»„ã®ã‚³ãƒ¼ãƒ‡ã‚£ãƒãƒ¼ãƒˆã«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</li></ul></li></ul><p>ï¼ˆå·¦ã‹ã‚‰å³ï¼šãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã€ãƒ‘ãƒ¬ãƒƒãƒˆâ‘¡ã€ãƒ‘ãƒ¬ãƒƒãƒˆâ‘ ï¼‰<br><img src="/images/20200203/photo_20200203_16.png"></p><h3 id="ã‚ãˆã¦ãƒ«ãƒ¼ãƒ«åŒ–ã—ãªã‹ã£ãŸã‚‚ã®"><a href="#ã‚ãˆã¦ãƒ«ãƒ¼ãƒ«åŒ–ã—ãªã‹ã£ãŸã‚‚ã®" class="headerlink" title="ã‚ãˆã¦ãƒ«ãƒ¼ãƒ«åŒ–ã—ãªã‹ã£ãŸã‚‚ã®"></a>ã‚ãˆã¦ãƒ«ãƒ¼ãƒ«åŒ–ã—ãªã‹ã£ãŸã‚‚ã®</h3><p>ã¯ã˜ã‚ã«ã‚‚è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹é€šã‚Šã€è¨˜äº‹ã®ã‚´ãƒ¼ãƒ«ã¨ã—ã¦ã€Œå¿…è¦æœ€ä½é™ã®ãƒ«ãƒ¼ãƒ«ã ã‘ã«çµã£ã¦ãƒãƒ¼ãƒ è¨­è¨ˆã®ç”Ÿç”£æ€§ã¨å“è³ªã‚’ä¸Šã’ã‚‹ã€ãŒã‚ã‚Šã¾ã™ã€‚ä¸Šè¨˜ã§è¨˜è¼‰ã•ã‚ŒãŸãƒ«ãƒ¼ãƒ«ã¯ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ãŒæœŸå¾…ã•ã‚Œã‚‹å¿…è¦æœ€ä½é™ã®å½¹å‰²ã‚’æœãŸã™ãŸã‚ã«å«ã‚ã¦ãŸã‚‚ã®ã§ã™ã€‚ã—ãŸãŒã£ã¦åˆ†å²ã‚„ãƒ«ãƒ¼ãƒ—ç­‰ã€å‡¦ç†ã®æŸ±ã¨ãªã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã‚„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è¡¨ã™ã‚‚ã®ã¯è¨˜è¼‰å¿…é ˆã¨ã—ã¦ã„ã¾ã™ã€‚ä¸€æ–¹ã§ã€ã‚·ãƒ³ãƒ—ãƒ«åŒ–ã®ãŸã‚ã€ä¸‹è¨˜ã®ã‚‚ã®ã¯ã‚ãˆã¦ãƒ«ãƒ¼ãƒ«ã¨ã—ã¦ã„ã¾ã›ã‚“ã€‚</p><ul><li><p><strong>ãƒ©ã‚¤ãƒ•ãƒ©ã‚¤ãƒ³</strong><br>ãƒ©ã‚¤ãƒ•ãƒ©ã‚¤ãƒ³ã®æ´»æ€§åŒ–ã¨ç ´å£Šã¯ã‚·ãƒ³ãƒ—ãƒ«åŒ–ã®ãŸã‚ã€ã‚ãˆã¦ä½¿ã„ã¾ã›ã‚“ã€‚<br>ã“ã¡ã‚‰ã¯<code>activate</code>ã€<code>deactivate</code>ã‚„<code>destroy</code>ã§è¡¨ç¾ã§ãã‚‹ã®ã§ã€å¿…è¦ã«å¿œã˜ã¦ã€‚</p><img src="/images/20200203/photo_20200203_17.png" class="img-small-size"></li><li><p><strong>ç·šã¨ã‚¢ãƒ­ãƒ¼ãƒ˜ãƒƒãƒ‰ã®ä½¿ã„åˆ†ã‘</strong><br>PlantUMLã§ã¯æ§˜ã€…ãªã‚¢ãƒ­ãƒ¼ãƒ˜ãƒƒãƒ‰ã‚„ç·šã®ç¨®é¡ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã€Œãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¯ç‚¹ç·šã«ã™ã‚‹ã€ç­‰ã€ä¸–é–“ã§ã¯ã‚¢ãƒ­ãƒ¼ãƒ˜ãƒƒãƒ‰ã¨ç·šã®ç¨®é¡ã«é–¢ã™ã‚‹ã„ã‚ã‚“ãªä½¿ã„åˆ†ã‘ãŒå­˜åœ¨ã—ã¦ã„ã¾ã™ãŒã€ã“ã®ãƒ«ãƒ¼ãƒ«ã§ã¯ã‚·ãƒ³ãƒ—ãƒ«åŒ–ã®ãŸã‚ã€æ„è­˜ã—ã¾ã›ã‚“ã€‚ã“ã¡ã‚‰ã‚‚å¿…è¦ã«å¿œã˜ã¦ã‚„ã‚Šã¾ã—ã‚‡ã†ã€‚</p><img src="/images/20200203/photo_20200203_18.png" class="img-very-small-size"></li></ul><h2 id="ãŠã‚ã‚Šã«"><a href="#ãŠã‚ã‚Šã«" class="headerlink" title="ãŠã‚ã‚Šã«"></a>ãŠã‚ã‚Šã«</h2><p>å‹æ‰‹ã«ãƒ«ãƒ¼ãƒ«ã‚’æ±ºã‚ã¡ã‚ƒã„ã¾ã—ãŸãŒãƒ«ãƒ¼ãƒ«ã®ä¸­èº«ã‚ˆã‚Šã‚‚ãƒ«ãƒ¼ãƒ«ã‚’æ±ºã‚ã‚‹ã“ã¨ãŒå¤§äº‹ã ã¨æ€ã„ã¾ã™ã€‚<br>ã“ã‚Œã‹ã‚‰PlantUMLã‚’åˆ©ç”¨ã—ã¦ãƒãƒ¼ãƒ ã§è¨­è¨ˆã‚’å§‹ã‚ãŸã„ã‘ã©ãƒ«ãƒ¼ãƒ«ã‚’æ±ºã‚ã‚‹ã®ãŒé¢å€’ãã•ã„æ–¹ã€…ã€ã“ã®è¨˜äº‹ã‚’ã‚¹ã‚¿ãƒ¼ãƒˆãƒ©ã‚¤ãƒ³ã«ã—ã¦ã¿ã¦ã¯ã„ã‹ãŒã€‚</p><h2 id="å‚è€ƒï¼†ãƒªãƒ³ã‚¯"><a href="#å‚è€ƒï¼†ãƒªãƒ³ã‚¯" class="headerlink" title="å‚è€ƒï¼†ãƒªãƒ³ã‚¯"></a>å‚è€ƒï¼†ãƒªãƒ³ã‚¯</h2><ul><li><a href="https://plantuml.com" target="_blank" rel="noopener">https://plantuml.com</a></li><li><a href="https://qiita.com/laqiiz/items/fb7ad9dfb7430dd08455" target="_blank" rel="noopener">https://qiita.com/laqiiz/items/fb7ad9dfb7430dd08455</a></li><li><a href="https://qiita.com/couzie/items/9dedb834c5aff09ea7b2" target="_blank" rel="noopener">https://qiita.com/couzie/items/9dedb834c5aff09ea7b2</a></li><li><a href="https://eng-entrance.com/java-install-env" target="_blank" rel="noopener">https://eng-entrance.com/java-install-env</a>)</li><li><a href="https://www.planttext.com/" target="_blank" rel="noopener">https://www.planttext.com/</a></li><li><a href="https://future-architect.github.io/articles/20190821/">https://future-architect.github.io/articles/20190821/</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h2&gt;&lt;p&gt;ç¾åœ¨æ‰€å±ã—ã¦ã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯WebAPIã‚„ãƒãƒƒãƒå‡¦ç†ã®è¨­è¨ˆã®ä¸€ç’°ã¨ã—ã¦PlantUMLã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚åŠ¹ç‡ã‚ˆãå“è³ªé«˜ã
      
    
    </summary>
    
      <category term="Design" scheme="https://future-architect.github.io/categories/Design/"/>
    
    
      <category term="PlantUML" scheme="https://future-architect.github.io/tags/PlantUML/"/>
    
      <category term="UML" scheme="https://future-architect.github.io/tags/UML/"/>
    
  </entry>
  
  <entry>
    <title>Airflowã®Tips 11é¸</title>
    <link href="https://future-architect.github.io/articles/20200131/"/>
    <id>https://future-architect.github.io/articles/20200131/</id>
    <published>2020-01-31T02:28:46.000Z</published>
    <updated>2020-01-31T02:45:27.484Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ¦‚è¦"><a href="#æ¦‚è¦" class="headerlink" title="æ¦‚è¦"></a>æ¦‚è¦</h1><p>Airflow åˆ©ç”¨ã«ã‚ãŸã£ã¦çŸ¥ã£ã¦ãŠã„ãŸã»ã†ãŒè‰¯ã„ã‚“ã˜ã‚ƒãªã„ã‹ãªã¨æ€ã†æƒ…å ±ã‚’ã¾ã¨ã‚ã¾ã—ãŸã€‚ã„ã‚ã‚†ã‚‹ãƒãƒã‚Šã©ã“ã‚ã§ã™ã€‚  </p><p>Airflow è‡ªä½“ã®åŸºæœ¬çš„ãªèª¬æ˜(ç”¨èª,DAG å®šç¾©æ–¹æ³•,etc..) ã¯çœç•¥ã—ã¦ã„ã¾ã™ã€‚</p><p>åŸºç¤å‚ç…§å…ˆ</p><ul><li><a href="https://airflow.apache.org/docs/stable/tutorial.html" target="_blank" rel="noopener">å…¬å¼ Tutorial</a></li><li><a href="https://github.com/puckel/docker-airflow" target="_blank" rel="noopener">Dockerfile</a></li></ul><h1 id="ãƒãƒ¼ã‚¸ãƒ§ãƒ³"><a href="#ãƒãƒ¼ã‚¸ãƒ§ãƒ³" class="headerlink" title="ãƒãƒ¼ã‚¸ãƒ§ãƒ³"></a>ãƒãƒ¼ã‚¸ãƒ§ãƒ³</h1><ul><li>Airflow 1.10.4</li><li>Postgres 10.7</li></ul><h1 id="Tips-11-é¸"><a href="#Tips-11-é¸" class="headerlink" title="Tips 11 é¸"></a>Tips 11 é¸</h1><ul><li><a href="#1-æ—¥æ™‚">1. æ—¥æ™‚</a></li><li><a href="#2-ãƒªãƒˆãƒ©ã‚¤">2. ãƒªãƒˆãƒ©ã‚¤</a></li><li><a href="#3-start_date-ã®å¤‰æ›´ãŒã§ããªã„">3. start_date ã®å¤‰æ›´ãŒã§ããªã„</a></li><li><a href="#4-é–‹å§‹æ—¥æ™‚ã‚’éå»æ—¥æ™‚ã«ã™ã‚‹ã¨éå»ã‚¸ãƒ§ãƒ–ãŒè‡ªå‹•å®Ÿè¡Œã•ã‚Œã‚‹">4. é–‹å§‹æ—¥æ™‚ã‚’éå»æ—¥æ™‚ã«ã™ã‚‹ã¨éå»ã‚¸ãƒ§ãƒ–ãŒè‡ªå‹•å®Ÿè¡Œã•ã‚Œã‚‹</a></li><li><a href="#5-context-ã®æ´»ç”¨">5. context ã®æ´»ç”¨</a></li><li><a href="#6-macros">6. Macros</a></li><li><a href="#7-task-é–“ã§å€¤ã‚’å—ã‘æ¸¡ã™æ–¹æ³•">7. Task é–“ã§å€¤ã‚’å—ã‘æ¸¡ã™æ–¹æ³•</a></li><li><a href="#8-dags-ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥ä¸‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®åˆ‡ã‚Šæ–¹">8. dags ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥ä¸‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®åˆ‡ã‚Šæ–¹</a></li><li><a href="#9-ui-ã®è¡¨ç¤ºãŒ-utc-å›ºå®š">9. UI ã®è¡¨ç¤ºãŒ UTC å›ºå®š</a></li><li><a href="#10-web-ui-ä¸Šã‹ã‚‰ã‚¸ãƒ§ãƒ–ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã›ãªã„">10. Web UI ä¸Šã‹ã‚‰ã‚¸ãƒ§ãƒ–ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã›ãªã„</a></li><li><a href="#11-dagtask-ã®åŒæ™‚å®Ÿè¡Œæ•°åˆ¶å¾¡">11. DAG/Task ã®åŒæ™‚å®Ÿè¡Œæ•°åˆ¶å¾¡</a></li></ul><h2 id="1-æ—¥æ™‚"><a href="#1-æ—¥æ™‚" class="headerlink" title="1. æ—¥æ™‚"></a>1. æ—¥æ™‚</h2><p>Airflow ã¯åŸºæœ¬çš„ã«ã¯ã€æ—¥æ™‚ã®ã¿ã‚’å¤‰æ•°ã¨ã—ã¦ DAG ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚<br>æ—¥æ™‚ã«ã‚‚ç¨®é¡ãŒã‚ã‚‹ãŸã‚ã€å„æ—¥æ™‚ã«ã¤ã„ã¦æ•´ç†ã—ã¾ã™ã€‚</p><h3 id="execution-date"><a href="#execution-date" class="headerlink" title="execution_date"></a>execution_date</h3><p>å®Ÿè¡Œæ—¥æ™‚ã€‚ã„ã¤å®Ÿè¡Œã•ã‚Œã¦ã‚‚ã€ãƒªãƒˆãƒ©ã‚¤ã§å®Ÿè¡Œã•ã‚Œã¦ã‚‚å¤‰ã‚ã‚‹ã“ã¨ã®ãªã„æ—¥æ™‚ã€‚<br>ç‰¹å®šæ—¥æ™‚ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ãŸã„ã¨ã„ã£ãŸã‚±ãƒ¼ã‚¹ã®æ—¥æ™‚æŒ‡å®šã¯ã€å®Ÿè¡Œæ—¥æ™‚ã‚’åˆ©ç”¨ã—ã¦ãŠãã¨è‰¯ã„ã§ã™ã€‚</p><h3 id="start-date"><a href="#start-date" class="headerlink" title="start_date"></a>start_date</h3><p>DAG ã®é–‹å§‹æ—¥æ™‚ã€‚å®Ÿéš›ã« DAG ãŒå‹•ä½œã—ãŸæ—¥æ™‚ã€‚<br>ãƒªãƒˆãƒ©ã‚¤æ™‚ã«ã¯ãƒªãƒˆãƒ©ã‚¤ã—ãŸæ—¥æ™‚ã«ãªã‚Šã¾ã™ã€‚<br>DAG ãƒ•ã‚¡ã‚¤ãƒ«ä¸Šã§ã¯ç‰¹ã«åˆ©ç”¨ã—ãªã„ã»ã†ãŒè‰¯ã„ã§ã™ã€‚</p><h3 id="end-date"><a href="#end-date" class="headerlink" title="end_date"></a>end_date</h3><p>DAG ã®çµ‚äº†æ—¥æ™‚ã€‚å®Ÿéš›ã« DAG ãŒå‹•ä½œã—ãŸæ—¥æ™‚ã€‚</p><h3 id="schedule-interval"><a href="#schedule-interval" class="headerlink" title="schedule_interval"></a>schedule_interval</h3><p>DAG ã®å®Ÿè¡Œé–“éš”ã€‚</p><p>ä¸Šè¨˜ã®ç”¨èªã‚’å…ƒã«ã€åˆå›ã® Dag å®Ÿè¡Œã¾ã§ã‚’æ™‚ç³»åˆ—ã§è¿½ã„ã‹ã‘ã¦ã¿ã¾ã™ã€‚</p><h4 id="æ¡ä»¶"><a href="#æ¡ä»¶" class="headerlink" title="æ¡ä»¶"></a>æ¡ä»¶</h4><ul><li><code>2020/01/29 15:30:00+09:00</code> ã‚ˆã‚Šã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å®Ÿè¡Œ</li><li>å®Ÿè¡Œé–“éš”ã¯ <code>1min</code></li></ul><ol><li><p>DAG ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ<br> ./dag é…ä¸‹ã«é…ç½®</p>  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">dag = DAG(</span><br><span class="line">    <span class="string">'blog_example_execution_date'</span>,</span><br><span class="line">    schedule_interval=timedelta(minutes=<span class="number">1</span>),</span><br><span class="line">    start_date=datetime(</span><br><span class="line">        <span class="number">2020</span>, <span class="number">1</span>, <span class="number">29</span>, <span class="number">15</span>, <span class="number">30</span>, tzinfo=pendulum.timezone(<span class="string">'Asia/Tokyo'</span>)), <span class="comment"># æ˜ç¤ºçš„ã«ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’æŒ‡å®š</span></span><br><span class="line">)</span><br><span class="line">  </span><br><span class="line">BashOperator(</span><br><span class="line">    task_id=<span class="string">'test'</span>,</span><br><span class="line">    dag=dag,</span><br><span class="line">    bash_command=<span class="string">'echo 1'</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li></ol><ol start="2"><li>Web UI ä¸Šã‹ã‚‰ <code>OFF</code> -&gt; <code>ON</code> ã«å¤‰æ›´<ul><li><img src="/images/20200131/1.png" class="img-middle-size" style="border:solid 1px #000000"></li></ul></li></ol><ol start="3"><li><p>start_date ã«æŒ‡å®šã—ãŸæ™‚åˆ»ã«ã¯ <strong>ä½•ã‚‚èµ·ããªã„</strong></p></li><li><p>start_date + schecule_interval çµŒéå¾Œã« åˆå› DAG å®Ÿè¡Œ<br>å„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ—¥æ™‚ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚(â€» å„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å–å¾—æ–¹æ³•ã¯ <code>5</code> ã§å¾Œè¿°)<br>start_date ã¨ execution_date ãŒãšã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">execution_date = 2019/01/29 15:30:00 +09:00</span><br><span class="line">  =&gt; DAG ã«æŒ‡å®šã—ãŸ start_date ã¨åŒä¸€</span><br><span class="line">  </span><br><span class="line">start_date = 2019/01/29 15:31:00 +09:00</span><br><span class="line">  =&gt; DAG ã«æŒ‡å®šã—ãŸ start_date ã« schedule_interval ã‚’è¶³ã—ãŸæ—¥æ™‚ã¨åŒä¸€</span><br></pre></td></tr></table></figure></li><li><p>2 å›ç›®ä»¥é™ã¯ã€schedule_interval çµŒéå¾Œã«é †æ¬¡å®Ÿè¡Œ</p></li></ol><h2 id="2-ãƒªãƒˆãƒ©ã‚¤"><a href="#2-ãƒªãƒˆãƒ©ã‚¤" class="headerlink" title="2. ãƒªãƒˆãƒ©ã‚¤"></a>2. ãƒªãƒˆãƒ©ã‚¤</h2><p>åŸºæœ¬çš„ã«ã¯ Task ã®çŠ¶æ…‹ã‚’ <code>Clear</code> ã¨ã™ã‚‹ã“ã¨ã§ã€ãƒªãƒˆãƒ©ã‚¤ãŒã§ãã¾ã™ã€‚</p><h4 id="Tree-View-ã‚ˆã‚ŠæŒ‡å®š"><a href="#Tree-View-ã‚ˆã‚ŠæŒ‡å®š" class="headerlink" title="Tree View ã‚ˆã‚ŠæŒ‡å®š"></a>Tree View ã‚ˆã‚ŠæŒ‡å®š</h4><ol><li><code>â—‹</code> ã‚’ Click<ul><li><img src="/images/20200131/2.png" class="img-middle-size" style="border:solid 1px #000000"></li></ul></li></ol><ol start="2"><li>Clear ã‚’æŒ‡å®š<ul><li><img src="/images/20200131/3.png" class="img-middle-size" style="border:solid 1px #000000"></li></ul></li></ol><ol start="3"><li>Clear ã™ã‚‹ Task ã®ä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œ OK ã‚’ æŒ‡å®šã™ã‚‹<ul><li><img src="/images/20200131/4.png" class="img-middle-size" style="border:solid 1px #000000"></li></ul></li></ol><ol start="4"><li>Clear (=ãƒªãƒˆãƒ©ã‚¤) ã•ã‚Œã‚‹<ul><li><img src="/images/20200131/5.png" class="img-middle-size" style="border:solid 1px #000000"></li></ul></li></ol><h3 id="Task-Instances-ã‹ã‚‰æŒ‡å®š"><a href="#Task-Instances-ã‹ã‚‰æŒ‡å®š" class="headerlink" title="Task Instances ã‹ã‚‰æŒ‡å®š"></a>Task Instances ã‹ã‚‰æŒ‡å®š</h3><p>åŸºæœ¬çš„ã«ã¯ã€ <code>Tree View</code> ã®ç”»é¢ã‚ˆã‚ŠæŒ‡å®šã—ã¦ãƒªãƒˆãƒ©ã‚¤ã™ã‚‹æ–¹æ³•ãŒç°¡å˜ãªã®ã§ã™ãŒã€ã„ãã¤ã‹ã®ã‚±ãƒ¼ã‚¹ã«ã¦ã€ä¸‹è¨˜ã®ç”»é¢ãŒå‡ºã¦ãã¦å¤±æ•—ã™ã‚‹ã‚±ãƒ¼ã‚¹ãŒã‚ã‚Šã¾ã™ã€‚<br>(ç­†è€…ã®ç’°å¢ƒã§ã¯ Task æŒ‡å®šã® Clear ã®éš›ã«å¤±æ•—ã—ã¾ã™ã€‚)</p><img src="/images/20200131/6.png" class="img-middle-size"><p>ã“ã¡ã‚‰ãŒç™ºç”Ÿã—ãŸéš›ã¯ã€ä»–ã®æ‰‹æ®µã‚’åˆ©ç”¨ã—ã¦ã€Clear ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><ol><li><code>Browse &gt; Task Instances</code> ã‚’æŒ‡å®š<ul><li><img src="/images/20200131/7.png" class="img-middle-size"></li></ul></li></ol><ol start="2"><li>å¯¾è±¡ Task ã‚’æ¤œç´¢<ul><li><img src="/images/20200131/8.png" class="img-middle-size"></li></ul></li></ol><ol start="3"><li><p>å¯¾è±¡ Task ã‚’æŒ‡å®šã—ã¦ Clear</p><ul><li><img src="/images/20200131/9.png" class="img-middle-size"></li></ul></li><li><p>Clear å®Œäº†</p></li></ol><h2 id="3-start-date-ã®å¤‰æ›´ãŒã§ããªã„"><a href="#3-start-date-ã®å¤‰æ›´ãŒã§ããªã„" class="headerlink" title="3. start_date ã®å¤‰æ›´ãŒã§ããªã„"></a>3. start_date ã®å¤‰æ›´ãŒã§ããªã„</h2><p>ä¸€åº¦ã§ã‚‚ DAG ã‚’å®Ÿè¡Œã—ã¦ã—ã¾ã£ãŸå ´åˆã€start_date ã‚’å¤‰æ›´ã§ããªã„ä»•æ§˜ã«ãªã£ã¦ã„ã¾ã™ã€‚<br>DAG ãƒ•ã‚¡ã‚¤ãƒ«ä¸Šã§å¤‰æ›´ã—ã¦ã‚‚ã€åæ˜ ã•ã‚Œãªããªã£ã¦ã—ã¾ã„ã¾ã™ã€‚<br>(â€» ç­†è€…ã®çµŒé¨“è«‡ã§ã™ãŒã€DAG ãŒå®Ÿè¡Œã•ã‚Œã¦ã„ãªã„ ( <code>ON</code> ã«ã—ã¦ã„ãªã„) å ´åˆã§ã‚ã‚Œã°ã€ start_date ã®å¤‰æ›´ãŒåæ˜ ã•ã‚Œã¾ã™ã€‚)<br>ã‚ˆãã‚ã‚‹ã‚±ãƒ¼ã‚¹ã¨ã—ã¦ã¯ã€æ¯æ—¥03:00å®Ÿè¡Œã®DAGã‚’1æ™‚é–“ãšã‚‰ã™å¤‰æ›´ãŒã‚ã‚Šã¾ã™ãŒã€ç°¡æ˜“ã«ã¯ã§ãã¾ã›ã‚“ã€‚</p><p>1åº¦ã§ã‚‚ DAG ã‚’å®Ÿè¡Œã—ã¦ã—ã¾ã£ãŸå ´åˆã¯ã€ä¸‹è¨˜ã®æ‰‹æ®µã«ã¦ start_date ã‚’å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><h3 id="éå»å±¥æ­´ãŒæ¶ˆãˆã¦ã‚‚è‰¯ã„å ´åˆ"><a href="#éå»å±¥æ­´ãŒæ¶ˆãˆã¦ã‚‚è‰¯ã„å ´åˆ" class="headerlink" title="éå»å±¥æ­´ãŒæ¶ˆãˆã¦ã‚‚è‰¯ã„å ´åˆ"></a>éå»å±¥æ­´ãŒæ¶ˆãˆã¦ã‚‚è‰¯ã„å ´åˆ</h3><ol><li>DAG ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸€åº¦ ./dag é…ä¸‹ã‹ã‚‰å‰Šé™¤</li><li>Web UI ä¸Šã‹ã‚‰ DAG ã‚’å‰Šé™¤</li><li>ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¾©å…ƒã—ã¦é–‹å§‹æ—¥æ™‚ã‚’ä¿®æ­£</li><li>./dag é…ä¸‹ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…ç½®</li></ol><h3 id="éå»å±¥æ­´ã‚’æ®‹ã—ãŸã„å ´åˆ"><a href="#éå»å±¥æ­´ã‚’æ®‹ã—ãŸã„å ´åˆ" class="headerlink" title="éå»å±¥æ­´ã‚’æ®‹ã—ãŸã„å ´åˆ"></a>éå»å±¥æ­´ã‚’æ®‹ã—ãŸã„å ´åˆ</h3><p>DAGãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€åˆ¥DAG ID ã¨ã—ã¦å†ä½œæˆã—ã¦é–‹å§‹æ—¥æ™‚ã‚’å¤‰æ›´ã™ã‚‹ã€‚</p><h2 id="4-é–‹å§‹æ—¥æ™‚ã‚’éå»æ—¥æ™‚ã«ã™ã‚‹ã¨éå»ã‚¸ãƒ§ãƒ–ãŒè‡ªå‹•å®Ÿè¡Œã•ã‚Œã‚‹"><a href="#4-é–‹å§‹æ—¥æ™‚ã‚’éå»æ—¥æ™‚ã«ã™ã‚‹ã¨éå»ã‚¸ãƒ§ãƒ–ãŒè‡ªå‹•å®Ÿè¡Œã•ã‚Œã‚‹" class="headerlink" title="4. é–‹å§‹æ—¥æ™‚ã‚’éå»æ—¥æ™‚ã«ã™ã‚‹ã¨éå»ã‚¸ãƒ§ãƒ–ãŒè‡ªå‹•å®Ÿè¡Œã•ã‚Œã‚‹"></a>4. é–‹å§‹æ—¥æ™‚ã‚’éå»æ—¥æ™‚ã«ã™ã‚‹ã¨éå»ã‚¸ãƒ§ãƒ–ãŒè‡ªå‹•å®Ÿè¡Œã•ã‚Œã‚‹</h2><p>éå»æ—¥ã‚’æŒ‡å®šã™ã‚‹ã¨ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã€backfillã¨ã„ã†æ©Ÿèƒ½ã«ã‚ˆã‚Šã€éå»æ—¥ã‹ã‚‰ <code>schedule_interval</code> ã”ã¨ã«DAGã‚’å®Ÿè¡Œã—ã¾ã™ã€‚<br>å®Ÿè¡Œã—ãŸããªã„å ´åˆã¯ã€ <code>catchup=False</code> æŒ‡å®šã«ã‚ˆã‚Šå›é¿ã§ãã¾ã™ã€‚</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">dag = DAG(</span><br><span class="line">    <span class="string">'blog_example_backfill'</span>,</span><br><span class="line">    schedule_interval=timedelta(days=<span class="number">1</span>),</span><br><span class="line">    start_date=datetime(</span><br><span class="line">        <span class="number">2019</span>, <span class="number">1</span>, <span class="number">1</span>, tzinfo=pendulum.timezone(<span class="string">'Asia/Tokyo'</span>)),</span><br><span class="line">    default_args=args,</span><br><span class="line">    catchup=<span class="literal">False</span>, <span class="comment"># ã“ã¡ã‚‰ã‚’æŒ‡å®š</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><h2 id="5-context-ã®æ´»ç”¨"><a href="#5-context-ã®æ´»ç”¨" class="headerlink" title="5. context ã®æ´»ç”¨"></a>5. context ã®æ´»ç”¨</h2><p>å„ DAG å®Ÿè¡Œã”ã¨ã®å¤‰æ•°ã¯ã€context ã¨ã—ã¦å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚<br>PythonOperator ã¨ã—ã¦å‘¼ã³å‡ºã™éš›ã¯ã€å‘¼ã³å‡ºã™é–¢æ•°ã« <code>**context</code> ã¨å¯å¤‰é•·å¼•æ•°ã‚’å®šç¾©ã™ã‚‹ã“ã¨ã§æ‰±ãˆã¾ã™ã€‚context ã«ã¯è¾æ›¸å‹ã§å€¤ãŒå…¥ã‚Šã¾ã™ã€‚</p><p>(context ã¨ã—ã¦æ¸¡ã£ã¦ãã‚‹å€¤ã¯ã€ <code>6</code> å‚ç…§)</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_context</span><span class="params">(**context)</span>:</span></span><br><span class="line">    <span class="comment"># æœ€ã‚‚åˆ©ç”¨ã™ã‚‹ã‚±ãƒ¼ã‚¹ãŒå¤šã„</span></span><br><span class="line">    <span class="comment"># pendulum.Pendulum å‹ ã§ã‚ã‚‹ã“ã¨ã«æ³¨æ„</span></span><br><span class="line">    execution_date = context[<span class="string">'execution_date'</span>]</span><br><span class="line"></span><br><span class="line">    dag_id = context[<span class="string">'dag'</span>].dag_id</span><br><span class="line">    task_id = context[<span class="string">'task'</span>].task_id</span><br><span class="line"></span><br><span class="line">    print(execution_date)</span><br><span class="line">    print(dag_id)</span><br><span class="line">    print(task_id)</span><br><span class="line"></span><br><span class="line">    pprint.pprint(context)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">PythonOperator(</span><br><span class="line">    task_id=<span class="string">'context'</span>,</span><br><span class="line">    dag=dag,</span><br><span class="line">    python_callable=print_context,</span><br><span class="line">    provide_context=<span class="literal">True</span>, <span class="comment"># context ã‚’æ¸¡ã—ãŸã„å ´åˆå¿…é ˆ</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><h2 id="6-Macros"><a href="#6-Macros" class="headerlink" title="6. Macros"></a>6. Macros</h2><p>context ã®å€¤ã¯ã€ <figure class="highlight plain"><figcaption><span>&#125;&#125; ``` ã®æ§‹æ–‡ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã‚‚å–å¾—ã§ãã¾ã™ã€‚</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```py</span><br><span class="line">BashOperator(</span><br><span class="line">    task_id=&apos;test&apos;,</span><br><span class="line">    dag=dag,</span><br><span class="line">    bash_command=&apos;echo &#123;&#123; dag.dag_id &#125;&#125;&apos;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p><p>ä»¥ä¸‹ãŒã€context ã§å–å¾—ã§ãã‚‹å€¤ä¸€è¦§ã§ã™ã€‚ (Macros ã§å–å¾—ã§ãã‚‹å€¤ã¨åŒç¾©)<br><a href="https://airflow.apache.org/docs/stable/macros.html" target="_blank" rel="noopener">https://airflow.apache.org/docs/stable/macros.html</a></p><h2 id="7-Task-é–“ã§å€¤ã‚’å—ã‘æ¸¡ã™æ–¹æ³•"><a href="#7-Task-é–“ã§å€¤ã‚’å—ã‘æ¸¡ã™æ–¹æ³•" class="headerlink" title="7. Task é–“ã§å€¤ã‚’å—ã‘æ¸¡ã™æ–¹æ³•"></a>7. Task é–“ã§å€¤ã‚’å—ã‘æ¸¡ã™æ–¹æ³•</h2><p>å‡¦ç†ã‚’ Task ç²’åº¦ã§åˆ†å‰²ã—ã¦å®šç¾©ã™ã‚‹ã“ã¨ãŒå¤šã„ã§ã™ãŒã€Taské–“ã§å€¤ã‚’æ¸¡ã—ãŸã„ã‚±ãƒ¼ã‚¹ãŒæœ‰ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚ãã®å ´åˆã¯ã€<a href="https://airflow.apache.org/docs/stable/concepts.html?highlight=xcom#xcoms" target="_blank" rel="noopener">XComs</a> ã¨å‘¼ã°ã‚Œã‚‹æ©Ÿèƒ½ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚<br>åˆ©ç”¨æ–¹æ³•ã¯ä¸‹è¨˜ã®å®Ÿè£…ã®ã¨ãŠã‚Šã§ã™ã€‚</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">push</span><span class="params">(**context)</span>:</span></span><br><span class="line">    <span class="comment"># å¾Œç¶šã® Task ã«æ¸¡ã—ãŸã„å€¤ã‚’æˆ»ã‚Šå€¤ã¨ã—ã¦å®šç¾©</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'hoge'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">pull</span><span class="params">(**context)</span>:</span></span><br><span class="line">    <span class="comment"># context å†…ã‚ˆã‚Š task_id ã‚’ key ã«å–å¾—</span></span><br><span class="line">    v = context[<span class="string">'task_instance'</span>].xcom_pull(task_ids=<span class="string">'push_task'</span>)</span><br><span class="line">    print(v)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">push = PythonOperator(</span><br><span class="line">    task_id=<span class="string">'push_task'</span>,</span><br><span class="line">    dag=dag,</span><br><span class="line">    python_callable=push,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">pull = PythonOperator(</span><br><span class="line">    task_id=<span class="string">'pull_task'</span>,</span><br><span class="line">    dag=dag,</span><br><span class="line">    python_callable=pull,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">push &gt;&gt; pull</span><br></pre></td></tr></table></figure><h2 id="8-dags-ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥ä¸‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®åˆ‡ã‚Šæ–¹"><a href="#8-dags-ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥ä¸‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®åˆ‡ã‚Šæ–¹" class="headerlink" title="8. dags ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥ä¸‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®åˆ‡ã‚Šæ–¹"></a>8. dags ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥ä¸‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®åˆ‡ã‚Šæ–¹</h2><p>ä¸‹è¨˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ dags ç›´ä¸‹ã«é…ç½®ã™ã‚‹ã“ã¨ã§ã€å®Ÿç¾ã§ãã¾ã™ã€‚<br>å†å¸°çš„ã«å‚ç…§ã—ã¦ãã‚Œã‚‹ãŸã‚ã€æŒ‡å®šã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥ä¸‹ã§ã•ã‚‰ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’åˆ‡ã£ã¦ã‚‚å•é¡Œãªã„ã§ã™ã€‚</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> airflow.models <span class="keyword">import</span> DagBag</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿½åŠ ã—ãŸã„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æŒ‡å®š</span></span><br><span class="line">dags_dirs = [<span class="string">'~/dags/blog'</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> dir <span class="keyword">in</span> dags_dirs:</span><br><span class="line">    dag_bag = DagBag(os.path.expanduser(dir))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> dag_bag:</span><br><span class="line">        <span class="keyword">for</span> dag_id, dag <span class="keyword">in</span> dag_bag.dags.items():</span><br><span class="line">            globals()[dag_id] = dag</span><br></pre></td></tr></table></figure><h2 id="9-UI-ã®è¡¨ç¤ºãŒ-UTC-å›ºå®š"><a href="#9-UI-ã®è¡¨ç¤ºãŒ-UTC-å›ºå®š" class="headerlink" title="9. UI ã®è¡¨ç¤ºãŒ UTC å›ºå®š"></a>9. UI ã®è¡¨ç¤ºãŒ UTC å›ºå®š</h2><p>Web UI ã¯ UTC ã®ã¿å¯¾å¿œã¨ã®è¨˜è¼‰ãŒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã‚ã‚‹ã®ã§ã€ç¾çŠ¶ã¯ UTC æ™‚åˆ»ã‚’ã¿ã¦è„³å†…å¤‰æ›ã—ã¦ã„ã¾ã™ã€‚<br><a href="https://airflow.apache.org/docs/stable/timezone.html#time-zones" target="_blank" rel="noopener"><img src="/images/20200131/10.png" class="img-small-size" style="border:solid 1px #000000"></a><br><a href="https://airflow.apache.org/docs/stable/timezone.html#time-zones" target="_blank" rel="noopener">timezone.html#time-zones</a></p><p>å›é¿ç­–ã¯ã‚ã‚‹æ¨¡æ§˜ã§ã™ãŒã€è©¦ã—ãŸã“ã¨ã¯ãªã„ã§ã™ã€‚<br><a href="https://qiita.com/hatappi/items/2a4d41ca14746a3c98a6" target="_blank" rel="noopener">Airflow æ—¥æœ¬èªåŒ–</a></p><h2 id="10-Web-UI-ä¸Šã‹ã‚‰ã‚¸ãƒ§ãƒ–ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã›ãªã„"><a href="#10-Web-UI-ä¸Šã‹ã‚‰ã‚¸ãƒ§ãƒ–ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã›ãªã„" class="headerlink" title="10. Web UI ä¸Šã‹ã‚‰ã‚¸ãƒ§ãƒ–ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã›ãªã„"></a>10. Web UI ä¸Šã‹ã‚‰ã‚¸ãƒ§ãƒ–ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã›ãªã„</h2><p>Web UI ä¸Šã®ã€ <code>Trigger DAG</code> ã‚ˆã‚Šæ‰‹å‹•ã§ã®å®Ÿè¡Œã¯å¯èƒ½ã§ã™ãŒã€ä»»æ„ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒ‡å®šã—ã¦å®Ÿè¡Œã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚<br>execution date ã¯ Trigger DAG ã‚’æŠ¼ä¸‹ã—ãŸæ™‚åˆ»ã«ãªã‚Šã¾ã™ã€‚</p><p>CLI ã§å®Ÿè¡Œã™ã‚‹éš›ã¯ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚<br>æ¸¡ã—æ–¹ã¯ã€ä¸‹è¨˜ã®é€šã‚Šã§ã™ã€‚<br>(â€» <code>è¿½è¨˜</code> :ç­†è€…ã®ãƒ­ãƒ¼ã‚«ãƒ«ã§è©¦ã—ãŸã¨ã“ã‚ DAG ãŒè¦‹ã¤ã‹ã‚‰ãªã„ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ãŠã‚Šã€æœªè§£æ¶ˆã§ã™ã€‚)</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">airflow trigger_dag <span class="variable">$&#123;dag_id&#125;</span> -c <span class="string">'&#123;"key": "value"&#125;'</span></span><br></pre></td></tr></table></figure><p>ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å—ã‘å–ã‚Šæ–¹</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># context ã‚ˆã‚Šå–å¾—</span></span><br><span class="line">value = context[<span class="string">'dag_run'</span>][<span class="string">'conf'</span>][<span class="string">'key'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># macros åˆ©ç”¨</span></span><br><span class="line"><span class="string">'&#123;&#123; DAG_run.conf["key"] &#125;&#125;'</span></span><br></pre></td></tr></table></figure><p><a href="https://airflow.apache.org/docs/stable/cli.html#trigger_dag" target="_blank" rel="noopener">https://airflow.apache.org/docs/stable/cli.html#trigger_dag</a></p><h2 id="11-DAG-Task-ã®åŒæ™‚å®Ÿè¡Œæ•°åˆ¶å¾¡"><a href="#11-DAG-Task-ã®åŒæ™‚å®Ÿè¡Œæ•°åˆ¶å¾¡" class="headerlink" title="11. DAG/Task ã®åŒæ™‚å®Ÿè¡Œæ•°åˆ¶å¾¡"></a>11. DAG/Task ã®åŒæ™‚å®Ÿè¡Œæ•°åˆ¶å¾¡</h2><p>DAG ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¯¾ã—ã¦ã€concurrency/max_active_runs ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§åˆ¶å¾¡ã§ãã¾ã™ã€‚<br><code>max_active_runs</code> ã®æ•°å€¤ãŒ DAG ã®æœ€å¤§åŒæ™‚å®Ÿè¡Œæ•°ã§ã€ <code>concurrency</code> ã®æ•°å€¤ãŒ Task ã®æœ€å¤§åŒæ™‚å®Ÿè¡Œæ•°ã«ãªã‚Šã¾ã™ã€‚</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">dag = DAG(</span><br><span class="line">    <span class="string">'blog_example_concurrency'</span>,</span><br><span class="line">    start_date=start_date,</span><br><span class="line">    schedule_interval=timedelta(days=<span class="number">1</span>),</span><br><span class="line">    concurrency=<span class="number">3</span>, <span class="comment"># task ã¯ 3ã¤ã¾ã§åŒæ™‚èµ·å‹•ã§ãã‚‹</span></span><br><span class="line">    max_active_runs=<span class="number">1</span>, <span class="comment"># DAG ã¯ 1ã¤ã¾ã§åŒæ™‚èµ·å‹•ã§ãã‚‹</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>Airflow å…¨ä½“/ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® concurrency/max_active_runs ã¯ã€airflow.cfg ã«æŒ‡å®šã—ã¦ã‚ã‚Šã¾ã™ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># Airflow å…¨ä½“ã® task ã®åŒæ™‚å®Ÿè¡Œæ•°ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤</span><br><span class="line">parallelism = 32</span><br><span class="line"></span><br><span class="line"># DAG ã”ã¨ã® task ã®åŒæ™‚å®Ÿè¡Œæ•°ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤</span><br><span class="line">DAG_concurrency = 16</span><br><span class="line"></span><br><span class="line"># DAG ã”ã¨ã® DAG ã®åŒæ™‚å®Ÿè¡Œæ•° ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤</span><br><span class="line">max_active_runs_per_DAG = 16</span><br></pre></td></tr></table></figure><h1 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h1><p>Airflowåˆ©ç”¨ã«ã‚ãŸã£ã¦ã® Tips ã‚’ã¾ã¨ã‚ã¾ã—ãŸã€‚<br>ãƒãƒã‚Šã©ã“ã‚ã¯ã‚ã‚Šã¾ã™ãŒã€ã‚¸ãƒ§ãƒ–ã‚’ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ç®¡ç†ã§ãã€Pythonã§è‡ªç”±ã«å®šç¾©ã§ãã‚‹ç‚¹ãŒéå¸¸ã«é­…åŠ›çš„ã§ã™ã®ã§ã€åˆ©ç”¨ã§ãã‚‹ã‚·ãƒ¼ãƒ³ã§ä½¿ã£ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul><li><a href="https://stackoverflow.com/questions/53663534/for-apache-airflow-how-can-i-pass-the-parameters-when-manually-trigger-DAG-via" target="_blank" rel="noopener">For Apache Airflow, How can I pass the parameters when manually trigger DAG via CLI? - Stack Overflow</a></li><li><a href="https://gtoonstra.github.io/etl-with-airflow/gotchas.html" target="_blank" rel="noopener">Gotchaâ€™s â€” ETL Best Practices with Airflow v1.8</a></li><li><a href="https://medium.com/programming-soda/apache-airflow%E3%81%A7%E3%82%A8%E3%83%B3%E3%83%89%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%AE%E3%81%9F%E3%82%81%E3%81%AE%E6%A9%9F%E6%A2%B0%E5%AD%A6%E7%BF%92%E3%83%91%E3%82%A4%E3%83%97%E3%83%A9%E3%82%A4%E3%83%B3%E3%82%92%E6%A7%8B%E7%AF%89%E3%81%99%E3%82%8B-part4-590ad9f9fb80" target="_blank" rel="noopener">Apache Airflow ã§ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãŸã‚ã®æ©Ÿæ¢°å­¦ç¿’ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’æ§‹ç¯‰ã™ã‚‹ Part4 - programming-soda - Medium</a></li><li><a href="https://medium.com/@xnuinside/how-to-load-use-several-dag-folders-airflow-dagbags-b93e4ef4663c" target="_blank" rel="noopener">How to use several dag_folders? Airflow DAGBags. - Iuliia Volkova - Medium</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;æ¦‚è¦&quot;&gt;&lt;a href=&quot;#æ¦‚è¦&quot; class=&quot;headerlink&quot; title=&quot;æ¦‚è¦&quot;&gt;&lt;/a&gt;æ¦‚è¦&lt;/h1&gt;&lt;p&gt;Airflow åˆ©ç”¨ã«ã‚ãŸã£ã¦çŸ¥ã£ã¦ãŠã„ãŸã»ã†ãŒè‰¯ã„ã‚“ã˜ã‚ƒãªã„ã‹ãªã¨æ€ã†æƒ…å ±ã‚’ã¾ã¨ã‚ã¾ã—ãŸã€‚ã„ã‚ã‚†ã‚‹ãƒãƒã‚Šã©ã“ã‚ã§ã™ã€‚  &lt;/p&gt;
&lt;p&gt;A
      
    
    </summary>
    
      <category term="Infrastructure" scheme="https://future-architect.github.io/categories/Infrastructure/"/>
    
    
      <category term="Python" scheme="https://future-architect.github.io/tags/Python/"/>
    
      <category term="Airflow" scheme="https://future-architect.github.io/tags/Airflow/"/>
    
  </entry>
  
  <entry>
    <title>ãƒªãƒ¢ãƒ¼ãƒˆãƒ¯ãƒ¼ã‚¯ã‚’ä¿ƒé€²ã•ã›ã‚‹Daily Stand-up Meeting</title>
    <link href="https://future-architect.github.io/articles/20200129/"/>
    <id>https://future-architect.github.io/articles/20200129/</id>
    <published>2020-01-29T01:02:04.000Z</published>
    <updated>2020-01-29T01:33:28.713Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>ã“ã‚“ã«ã¡ã¯ã€TIGã®æ‘ç”°ã§ã™ã€‚çš†ã•ã‚“ã¯æ™®æ®µã©ã®ã‚ˆã†ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¿ã‚¹ã‚¯å„ªå…ˆé †ä½ã‚’ç®¡ç†ã—ã¦ã„ã¾ã™ã‹ï¼Ÿå¤§è¦æ¨¡ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã‚Œã°backlogãªã©ã®é€²æ—ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã‚’å°å…¥ã—ã¤ã¤å„ªå…ˆåº¦ã®ã‚¿ã‚°ä»˜ã‘ã‚’ã—ãŸã‚Šã€ã‚ã‚‹ã„ã¯å°è¦æ¨¡ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã‚Œã°å¯†ãªã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§çŠ¶æ³ã‚’å¸¸ã«å…±æœ‰ã—åˆã£ãŸã‚Šã—ã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><p>ç§ã®æ‰€å±ã—ã¦ã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ä»¥ä¸‹ã®ã‚ˆã†ãªçŠ¶æ³ã§ã™ã€‚</p><ul><li>5åç¨‹åº¦ã®æ¯”è¼ƒçš„å°è¦æ¨¡ãªãƒ¡ãƒ³ãƒãƒ¼æ§‹æˆã ã£ãŸ</li><li>è‡ªç¤¾ã‚ªãƒ•ã‚£ã‚¹ã€é¡§å®¢ã‚ªãƒ•ã‚£ã‚¹ã€è‡ªå®…ãªã©å„ãƒ¡ãƒ³ãƒãƒ¼ãŒé›¢ã‚ŒãŸå ´æ‰€ã§ä»•äº‹ã‚’ã™ã‚‹ã“ã¨ãŒå¤šã„</li></ul><p>å¤§æ›ã‹ã‚Šãªé€²æ—ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã‚’å…¥ã‚Œã‚‹ã»ã©ã®è¦æ¨¡æ„Ÿã§ã¯ãªãã€ã—ã‹ã—æ²¹æ–­ã™ã‚‹ã¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®çŠ¶æ³ãŒä¸é€æ˜ã«ãªã‚Šã‹ã­ãªã„ã¨ã„ã†ã“ã¨ã§ã€ç§ã®ãƒãƒ¼ãƒ ã§ã¯Daily Stand-up Meeting(ä»¥å¾Œã€SUM)ã‚’å°å…¥ã—ã¦ã„ã¾ã™ã€‚<br>â€»æ¯åº¦ç«‹ã£ã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªã„ã®ã§ã€å‘¼ç§°ã¯Daily Scrumã®ã»ã†ãŒæ­£ã—ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“</p><img src="/images/20200129/photo_20200129_01.jpg">â†‘ã¨ã‚ã‚‹æ—¥ã®SUMã®æ§˜å­â†‘<h1 id="SUMã«æœŸå¾…ã—ãŸã“ã¨"><a href="#SUMã«æœŸå¾…ã—ãŸã“ã¨" class="headerlink" title="SUMã«æœŸå¾…ã—ãŸã“ã¨"></a>SUMã«æœŸå¾…ã—ãŸã“ã¨</h1><ul><li>å„ãƒ¡ãƒ³ãƒãƒ¼ã®ã„ã¾å–ã‚Šçµ„ã‚€ã¹ãã‚¿ã‚¹ã‚¯ã‚’æ˜ç¢ºã«ã™ã‚‹ã“ã¨</li><li>ãŠäº’ã„ã®ã‚¿ã‚¹ã‚¯çŠ¶æ³ã‚’æŠŠæ¡ã™ã‚‹ã“ã¨</li><li>ãŠäº’ã„ã®å›°ã‚Šã”ã¨ã‚’æŠŠæ¡ã™ã‚‹ã“ã¨</li></ul><h1 id="SUMã®é–‹å‚¬ã«å‘ã‘ã¦"><a href="#SUMã®é–‹å‚¬ã«å‘ã‘ã¦" class="headerlink" title="SUMã®é–‹å‚¬ã«å‘ã‘ã¦"></a>SUMã®é–‹å‚¬ã«å‘ã‘ã¦</h1><h2 id="SUMã®å½¢å¼"><a href="#SUMã®å½¢å¼" class="headerlink" title="SUMã®å½¢å¼"></a>SUMã®å½¢å¼</h2><ul><li>çŠ¶æ³å…±æœ‰ã‚·ãƒ¼ãƒˆã¨ã—ã¦Google Spreadsheetã‚’åˆ©ç”¨<ul><li>ã‚»ãƒ«å½¢å¼ã‹ã¤ã¿ã‚“ãªã§åŒæ™‚ç·¨é›†å¯èƒ½ãªã‚‚ã®ã‚’ä½¿ã†ã®ãŒå¥½ã¾ã—ã„ã¨æ€ã„ã¾ã™</li></ul></li><li>Hangout Meetã‚’åˆ©ç”¨ã—ã¦ç›¸äº’ã«æ¥ç¶š<ul><li>ã“ã‚Œã¯ãªã‚“ã§ã‚‚ã‚ˆã„ã¨æ€ã„ã¾ã™ã€‚å…¨ç¤¾çš„ã«GSuiteã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ã®ã§Hangout Meetã‚’ä½¿ã£ã¦ã„ã¾ã™</li></ul></li><li>æ™‚é–“ã¯15åˆ†ï¼ˆ1äººæŒã¡æ™‚é–“3åˆ†Ã—äººæ•°ï¼‰<ul><li>ãƒ€ãƒ©ãƒ€ãƒ©ã¨è©±ã—ã¦ã—ã¾ã‚ãªã„ã‚ˆã†æ™‚é–“ã¯å³å¯†ã«åŒºåˆ‡ã£ã¦ã„ã¾ã™ã€‚</li></ul></li></ul><h2 id="çŠ¶æ³å…±æœ‰ã‚·ãƒ¼ãƒˆã®æ›¸ãã£ã·ã‚Š"><a href="#çŠ¶æ³å…±æœ‰ã‚·ãƒ¼ãƒˆã®æ›¸ãã£ã·ã‚Š" class="headerlink" title="çŠ¶æ³å…±æœ‰ã‚·ãƒ¼ãƒˆã®æ›¸ãã£ã·ã‚Š"></a>çŠ¶æ³å…±æœ‰ã‚·ãƒ¼ãƒˆã®æ›¸ãã£ã·ã‚Š</h2><img src="/images/20200129/photo_20200129_02.png" style="border:solid 1px #000000">â†‘ã“ã‚“ãªæ„Ÿã˜ã§è¨˜è¼‰ã—ã¦ã„ã¾ã™â†‘<h3 id="ã‚·ãƒ¼ãƒˆã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ"><a href="#ã‚·ãƒ¼ãƒˆã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ" class="headerlink" title="ã‚·ãƒ¼ãƒˆã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ"></a>ã‚·ãƒ¼ãƒˆã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ</h3><p>ã‚·ãƒ¼ãƒˆã«ã¯5ã¤ã®ã‚«ãƒ©ãƒ ã‚’æº–å‚™ã—ã¦ã„ã¾ã™ã€‚<br><strong>â‘ æ—¥ä»˜</strong><br> ã€Œctl+:ã€ã®ã‚ˆã†ãªã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚’æ›¸ã„ã¦ãŠãã¨åœ°å‘³ã«ä¾¿åˆ©ã§ã™</p><p><strong>â‘¡åå‰</strong><br>åå­—ã ã‘ã€ã‚·ãƒ³ãƒ—ãƒ«ã«</p><p><strong>â‘¢æ˜¨æ—¥ã‚„ã£ãŸã“ã¨</strong><br>åŸºæœ¬ã¯å‰æ—¥ã®ã€Œä»Šæ—¥ã‚„ã‚‹ã“ã¨ã€ã«å®Ÿç¸¾ã‚’åæ˜ ã—ãŸã‚‚ã®ã«ãªã‚Šã¾ã™</p><p><strong>â‘£ä»Šæ—¥ã‚„ã‚‹ã“ã¨</strong><br>ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã€‚ã‚„ã‚‹ã“ã¨ã‚’ç®‡æ¡æ›¸ãã§åˆ—æŒ™ã—ã¾ã™ã€‚</p><p><strong>â‘¤éšœå®³ã¨ãªã£ã¦ã„ã‚‹ã“ã¨/ã¤ã¶ã‚„ã</strong><br>ç¾åœ¨ãƒãƒã£ã¦ã„ã‚‹ãƒã‚¤ãƒ³ãƒˆã‚„ä»–äººã¸ã®é€£çµ¡äº‹é …ãªã©ã€‚ç›´è¿‘ã®å‹¤æ€ ã®äºˆå®šãªã©å‘¨çŸ¥äº‹é …ã‚‚è¨˜è¼‰ã—ã¦ã„ã¾ã™ã€‚</p><h3 id="ã‚·ãƒ¼ãƒˆã‚’æ›¸ãéš›ã¯çµµæ–‡å­—ã‚’ãƒ•ãƒ«æ´»ç”¨ã™ã‚‹ã¨è‰¯ã„"><a href="#ã‚·ãƒ¼ãƒˆã‚’æ›¸ãéš›ã¯çµµæ–‡å­—ã‚’ãƒ•ãƒ«æ´»ç”¨ã™ã‚‹ã¨è‰¯ã„" class="headerlink" title="ã‚·ãƒ¼ãƒˆã‚’æ›¸ãéš›ã¯çµµæ–‡å­—ã‚’ãƒ•ãƒ«æ´»ç”¨ã™ã‚‹ã¨è‰¯ã„"></a>ã‚·ãƒ¼ãƒˆã‚’æ›¸ãéš›ã¯çµµæ–‡å­—ã‚’ãƒ•ãƒ«æ´»ç”¨ã™ã‚‹ã¨è‰¯ã„</h3><p>çŠ¶æ³å…±æœ‰ã®éš›ã«ã‚¿ã‚¹ã‚¯ã‚’ç¨®åˆ¥ã”ã¨ã‚„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã«ã‚«ãƒ†ã‚´ãƒ©ã‚¤ã‚ºã™ã‚‹ã¨æ€ã„ã¾ã™ãŒã€ä»˜å¸¯æƒ…å ±ã‚’æ›¸ãå§‹ã‚ã‚‹ã¨ç¸¦ã«é•·ããªã£ã¦ã—ã¾ã„ãŒã¡ã§ã™ã€‚<br><img src="/images/20200129/photo_20200129_04.png" class="img-small-size" style="border:solid 1px #000000"></p><p>ã“ã®ç¸¦ã«é•·ã„å…±æœ‰å†…å®¹ã‚’5äººåˆ†è¨˜è¼‰ã™ã‚‹ã¨ã„ã‚ˆã„ã‚ˆä¸€è¦§æ€§ã«æ¬ ã‘ã¦ã—ã¾ã†ã®ã§ã€çµµæ–‡å­—ã‚’ãƒ•ãƒ«æ´»ç”¨ã™ã‚‹æ–¹é‡ã‚’ç«‹ã¦ã¦ã„ã¾ã™ã€‚<br><img src="/images/20200129/photo_20200129_05.png" class="img-small-size" style="border:solid 1px #000000"></p><p>ä¸Šè¨˜ã¯ä¸€ä¾‹ã§ã™ãŒã€ã“ã®ã‚ˆã†ã«çµµæ–‡å­—ã”ã¨ã«æ„å‘³ã‚’æŒãŸã›ã¦è¨˜è¼‰ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚<br>çµµæ–‡å­—ã‚’åˆ©ç”¨ã—ã¦å…ˆç¨‹ã®å…±æœ‰å†…å®¹ã‚’æ›¸ãæ›ãˆã‚‹ã¨â€¦<br><img src="/images/20200129/photo_20200129_06.png" class="img-small-size" style="border:solid 1px #000000"></p><p>ã“ã®ã‚ˆã†ã«ã‚¹ãƒƒã‚­ãƒªã—ã¾ã™ã€‚ã‚‚ã¡ã‚ã‚“è¡Œæ•°ã‚’åœ§ç¸®ã™ã‚‹ã ã‘ã§ã‚ã‚Œã°çµµæ–‡å­—ã‚’ä½¿ã‚ãšæ›¸ãæ–¹ã‚’å¤‰ãˆã‚‹ã ã‘ã§å®Ÿç¾ã¯ã§ãã¾ã™ã€‚<br><img src="/images/20200129/photo_20200129_07.png" class="img-small-size" style="border:solid 1px #000000"></p><p>ã“ã‚Œã§ã‚‚å¿…è¦ãªæƒ…å ±ã¯å«ã¾ã‚Œã¦ã„ã¾ã™ãŒâ€¦ãªã‚“ã‹å‘³æ°—ãªã„ã¨æ€ã„ã¾ã›ã‚“ã‹ï¼Ÿç§ã¯æ€ã„ã¾ã™ç¬‘<br>çµµæ–‡å­—ã«æ„å‘³ã¥ã‘ã‚’è¡Œã†ã“ã¨ã§ãƒã‚¤ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆåŒ–ã—ã¦ã—ã¾ã†ã¨ã„ã†ç‚¹ã¯ã‚ã‚Šã¾ã™ãŒã€è¦‹ã¦ã¦è¦–è¦šçš„ã«ã‚‚æ¥½ã—ã„ã®ã§çµµæ–‡å­—ã‚’ã‚¬ãƒ³ã‚¬ãƒ³åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚</p><p>æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚„ã‚¿ã‚¹ã‚¯ãŒå§‹ã‚ã‚‹æ™‚ã«èª°ã‹ãŒæ–°ã—ã„çµµæ–‡å­—ã‚’è¿½åŠ ã—ã¦ã€ã€Œâ—¯â—¯ã£ã½ã„ã®ã§ã“ã®çµµæ–‡å­—ã‚’ä½¿ãŠã†ã¨æ€ã„ã¾ã™ã€ã€ŒãŠï¼ã„ã„ã­ãƒ¼ï½—ã€ã€Œé¢ç™½ã„ï¼ï¼ã€ã¿ãŸã„ãªä¼šè©±ãŒç”Ÿã¾ã‚ŒãŸã‚Šã™ã‚‹ã®ã§ãªã‚“ã ã‹ã‚“ã æ¥½ã—ãé‹ç”¨ã§ãã¦ã„ã‚‹ã®ã‹ãªã¨æ€ã„ã¾ã™ã€‚<br><img src="/images/20200129/photo_20200129_08.png" class="img-small-size"></p><p>ã‚·ãƒ¼ãƒˆã®ä¸Šã®æ–¹ã«ã€ã„ã¾å­˜åœ¨ã™ã‚‹çµµæ–‡å­—ã‚’ãšã‚‰ã£ã¨ä¸¦ã¹ã¦ãŠãã¨ã€æ¯æ—¥è¨˜è¼‰ã™ã‚‹æ™‚ã«ã‚‚å›°ã‚‰ãªã„ã®ã§ä¾¿åˆ©ã§ã™ã€‚</p><h2 id="Slack-Reminderã§SUMã‚’ãƒªãƒã‚¤ãƒ³ãƒ‰"><a href="#Slack-Reminderã§SUMã‚’ãƒªãƒã‚¤ãƒ³ãƒ‰" class="headerlink" title="Slack Reminderã§SUMã‚’ãƒªãƒã‚¤ãƒ³ãƒ‰"></a>Slack Reminderã§SUMã‚’ãƒªãƒã‚¤ãƒ³ãƒ‰</h2><p>ç§ã®ãƒãƒ¼ãƒ ã§ã¯Slack Reminderã‚’ä½¿ã£ã¦æ¯æ—¥9æ™‚ã«ãƒªãƒã‚¤ãƒ³ãƒ€ã‚’é£›ã°ã—ã¦ã„ã¾ã™ã€‚<br><img src="/images/20200129/photo_20200129_09.png" style="border:solid 1px #000000"></p><p>Spreadsheetã®URLã‚’éƒ½åº¦æ¢ã™ã®ã¯é¢å€’ãªã®ã§ã€Slack reminderã§URLã‚’æŠ•ç¨¿ã™ã‚‹å½¢ã«ã—ã¦ã„ã¾ã™ã€‚ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ç™»éŒ²ã—ã¨ã‘ã°ã„ã„ã¨ã„ã†æ„è¦‹ã‚‚ã‚ã‚Šã¾ã™ãŒã€Slacké§†å‹•ã«ã—ã¦ãŠãã¨ä½•ã‹ã¨ä¾¿åˆ©ãªã®ã§ã“ã†ã—ã¦ã„ã¾ã™ã€‚</p><p>ReactionãŒã¤ã‘ã‚‰ã‚Œã‚‹ã®ã§ã€ã€Œæ¬ å¸­ã€ã‚„ã€Œãƒªãƒ¢ãƒ¼ãƒˆå‚åŠ ã€ãªã©ã¯Reactionã§ç¤ºã™é‹ç”¨ã¨ã—ã¦ã„ã¾ã™ã€‚ã“ã®ãŸã‚ã«ã‚ªãƒªã‚¸ãƒŠãƒ«ã®Reactionã‚’<a href="https://emoji-gen.ninja/" target="_blank" rel="noopener">çµµæ–‡å­—ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼</a>ã§ä½œæˆã—ã¾ã—ãŸã€‚</p><p>â€»ã¡ãªã¿ã«æ¯æœæŒã¡å›ã‚Šã§å®Ÿæ–½ã—ã¦ã„ã‚‹LTã‚„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®Tipsãƒšãƒ¼ã‚¸ã®URLãªã©ã€ä½•åº¦ã‚‚å‘¨çŸ¥ã—ã¦æµ¸é€ã•ã›ãŸã„æƒ…å ±ã‚‚ãƒªãƒã‚¤ãƒ³ãƒ€ã«ä¹—ã›ã¦ã„ã¾ã™</p><p>ã¾ãŸã€ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’æ˜ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã®ã§ã€é›»è»Šé…å»¶ã‚„åˆ¥æ‰“ã¡åˆã‚ã›ã«ã‚ˆã‚‹é…å‚ãªã©ã‚¹ãƒ¬ãƒƒãƒ‰å†…ã§ã‚„ã‚Šå–ã‚Šã—ã¦ã„ã¾ã™ã€‚</p><p>å„ã€…ãŒãƒªãƒ¢ãƒ¼ãƒˆãªçŠ¶æ…‹ã ã¨ã€æ¬ å¸­ãªã®ã‹ãã‚Œã¨ã‚‚é…åˆ»ãªã®ã‹ãªã©ãŒåˆ†ã‹ã‚Šã¥ã‚‰ããªã‚Šã¾ã™ãŒã€ã‚„ã‚Šå–ã‚Šã‚’Slackã«ã™ã¹ã¦å¯„ã›ã‚‹ã“ã¨ã§ã‚¹ãƒ ãƒ¼ã‚ºã«SUMã‚’é–‹å‚¬ã™ã‚‹ã“ã¨ãŒã§ãã¦ã„ã¾ã™ã€‚</p><h1 id="SUMä¸­ã®éã”ã—æ–¹"><a href="#SUMä¸­ã®éã”ã—æ–¹" class="headerlink" title="SUMä¸­ã®éã”ã—æ–¹"></a>SUMä¸­ã®éã”ã—æ–¹</h1><p>SUMã®ä¸€ç•ªå¤§äº‹ãªç›®çš„ã¯ã€Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ãŠã‘ã‚‹ã‚¿ã‚¹ã‚¯å„ªå…ˆé †ä½ã®æ±ºå®šã€ã¨å®šã‚ã¦ã„ã¾ã—ãŸã€‚ãã®ãŸã‚ã«ã¯ãã‚Œãã‚Œã®ãƒ¡ãƒ³ãƒãƒ¼ã‹ã‚‰ç©æ¥µçš„ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçŠ¶æ³ã‚’ç™ºä¿¡ã—ã‚ã†ã“ã¨ãŒé‡è¦ã§ã™ã€‚å…±æœ‰ã•ã‚ŒãŸæƒ…å ±ã‚’ã‚‚ã¨ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä¿¯ç°ã€ã„ã¾å„ªå…ˆçš„ã«å–ã‚Šçµ„ã‚€ã¹ãã‚¿ã‚¹ã‚¯ã‚’åˆ¤æ–­ãƒ»é‚è¡Œã—ã¦ã„ã¾ã™ã€‚</p><p>ãã®ä»–SUMè‡ªä½“ã®é€²ã‚æ–¹ã¯ä¸–é–“çš„ãªã‚‚ã®ã¨ç‰¹ã«å¤§å·®ãªã„ã§ã™ãŒã€ä»¥ä¸‹ã®ã‚ˆã†ãªã“ã¨ã«æ°—ã‚’ä»˜ã‘ã¦ã„ã¾ã—ãŸã€‚</p><ul><li>1äººæŒã¡æ™‚é–“ã¯3åˆ†</li><li>è­°è«–ãŒå§‹ã¾ã‚‹ã‚ˆã†ãªãƒã‚¿ã¯ä¸€æ—¦ã‚¹ãƒˆãƒƒãƒ— â†’ æ¤œè¨ä¼šè­°ã‚’åˆ¥é€”è¨­ã‘ã‚‹</li><li>çŠ¶æ³å…±æœ‰ã¯ <strong>å…ˆè¼©ç¤¾å“¡ã‹ã‚‰é™é †ã§è¡Œã†</strong></li></ul><p>çŠ¶æ³å…±æœ‰ã‚’é™é †ã«ã™ã‚‹ã®ã¯æ„å¤–ã¨å¤§äº‹ã§ã€å¾Œè¼©ç¤¾å“¡ãŒé…å»¶å ±å‘Šãªã©ã®ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç´ ç›´ã«ã‚ã’ã‚„ã™ã„é›°å›²æ°—ä½œã‚Šã«æ³¨åŠ›ã—ã¦ã„ã¾ã—ãŸã€‚</p><h1 id="æœ€å¾Œã«"><a href="#æœ€å¾Œã«" class="headerlink" title="æœ€å¾Œã«"></a>æœ€å¾Œã«</h1><p>ç§ã®ãƒãƒ¼ãƒ ã§ã¯SUMã‚’é–‹å‚¬ã™ã‚‹ã“ã¨ã§ã€äº’ã„ã®çŠ¶æ³ã‚’æŠŠæ¡ã™ã‚‹ã“ã¨ãŒã§ãã€å††æ»‘ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¨é€²ã§ãã¦ã„ã¾ã™ã€‚</p><p>ã¾ãŸå‰¯æ¬¡çš„ã«ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ¡ãƒªãƒƒãƒˆã‚‚äº«å—ã§ãã¦ã„ã¾ã™ã€‚</p><ul><li>æœã®ãƒšãƒ¼ã‚¹ãƒ¡ãƒ¼ã‚«ãƒ¼ã«ãªã‚‹</li><li>ãƒªãƒ¢ãƒ¼ãƒˆã§ã‚‚ã¼ã£ã¡ã«ãªã‚‰ãšæœã®æŒ¨æ‹¶ãŒã§ãã‚‹ã®ã§ã€å…ƒæ°—ã«ä¸€æ—¥ã‚’å§‹ã‚ã‚‰ã‚Œã‚‹</li><li>äº’ã„ã®å£°ã‚’èã‘ã‚‹ã®ã§ã€æ–‡é¢ã«è¡¨ã‚Œãªã„ä¸èª¿ãªã©ã‚’å¯ŸçŸ¥ã§ãã‚‹ï¼ˆã‚ã£ã¡ã‚ƒãƒ†ãƒ³ã‚·ãƒ§ãƒ³ä½ã„ã€é¼»æ°´ã‚ºãƒ«ã‚ºãƒ«ã€ãªã©ï¼‰</li></ul><p>é•·ã€…ã¨ã‚³ãƒ„ãªã©ã‚’æ›¸ã„ã¦ãã¾ã—ãŸãŒã€å®Ÿã¯ã“ã‚ŒãŒä¸€ç•ªå¤§ããªé–‹å‚¬æ„ç¾©ãªã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚<br>äº’ã„ã«ãƒªãƒ¢ãƒ¼ãƒˆã ã¨ã€ã‚ªãƒ•ã‚£ã‚¹ã«ã„ã‚‹ã¨ãã®ãªã«ã’ãªã„ä¼šè©±ï¼ˆé›‘è«‡ã‚’å¤šåˆ†ã«å«ã‚€ï¼‰ãªã©ãŒç„¡ããªã£ã¦ã—ã¾ã„ã¾ã™ã€‚</p><p>ä»²é–“æ„è­˜ã‚’æŒã¡å¥ã‚„ã‹ãªç²¾ç¥è¡›ç”Ÿã‚’ä¿ã¤ãŸã‚ã«ã‚‚ã€Daily Stand-up Meetingã¯ç¶™ç¶šã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ï¼</p><hr><p>é–¢é€£è¨˜äº‹ï¼š</p><ul><li><a href="/articles/20190917/">ã‚µã‚¹ãƒ†ãƒŠãƒ–ãƒ«ãªã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢çµ„ç¹”ãƒ‡ã‚¶ã‚¤ãƒ³ï½ã‚ˆãã‚ã‚‹è¨­è¨ˆã¨ã‚¸ãƒ¬ãƒ³ãƒï½</a></li><li><a href="/articles/20190918/">ã‚µã‚¹ãƒ†ãƒŠãƒ–ãƒ«ãªã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢çµ„ç¹”ãƒ‡ã‚¶ã‚¤ãƒ³ï½ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨10ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ï½</a></li><li><a href="/articles/20190703/">ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ãŒã†ã‚Œã—ã„Redmineãƒ‡ãƒ¼ã‚¿ã®ã‚°ãƒ©ãƒ•è¡¨ç¤ºæ–¹æ³•ã‚’å…¬é–‹ã—ã¾ã™ï¼</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h1&gt;&lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€TIGã®æ‘ç”°ã§ã™ã€‚çš†ã•ã‚“ã¯æ™®æ®µã©ã®ã‚ˆã†ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¿ã‚¹ã‚¯å„ªå…ˆé †ä½ã‚’ç®¡ç†ã—ã¦ã„ã¾ã™ã‹ï¼Ÿå¤§è¦æ¨¡ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã‚
      
    
    </summary>
    
      <category term="ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆ" scheme="https://future-architect.github.io/categories/%E3%83%9E%E3%83%8D%E3%82%B8%E3%83%A1%E3%83%B3%E3%83%88/"/>
    
    
      <category term="ä¼šè­°" scheme="https://future-architect.github.io/tags/%E4%BC%9A%E8%AD%B0/"/>
    
  </entry>
  
  <entry>
    <title>Auth0ã®Rulesã‚’ä½¿ã£ã¦èªè¨¼èªå¯ã‚’è‡ªåœ¨ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹</title>
    <link href="https://future-architect.github.io/articles/20200128/"/>
    <id>https://future-architect.github.io/articles/20200128/</id>
    <published>2020-01-28T00:24:18.000Z</published>
    <updated>2020-01-28T00:31:21.592Z</updated>
    
    <content type="html"><![CDATA[<p>Auth0ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ä½¿ã†ã«å½“ãŸã£ã¦å¿…è¦ã«ãªã‚‹Rulesã«ã¤ã„ã¦ã€æ¦‚è¦ã¨é–‹ç™ºã«é–¢ã™ã‚‹Tipsã‚’èª¬æ˜ã—ã¾ã™ã€‚<br>Auth0ã®Rulesã®ä½¿ã„æ–¹ã«ã¤ã„ã¦ã¯ã€Auth0å…¬å¼ã®<a href="https://auth0.com/docs/best-practices/rules" target="_blank" rel="noopener">Rules Best Practices</a>ã«æ§˜ã€…ãªå½¹ç«‹ã¡æƒ…å ±ãŒè¼‰ã£ã¦ã„ã‚‹ã®ã§ã™ãŒã€åˆ†é‡ãŒå¤šãã¦ã—ã‚“ã©ã„(å…¨ã¦è‹±èªãªä¸Šã«å°åˆ·ã™ã‚‹ã¨A4ã§18ãƒšãƒ¼ã‚¸åˆ†â€¦)ã§ã™ã€‚<br>ã“ã®è¨˜äº‹ã§ã¯Rules Best Practicesã®ä¸­ã§ã‚‚ç‰¹ã«å½¹ã«ç«‹ã¤ã¨æ€ã‚ã‚Œã‚‹æƒ…å ±ã¨ã€ãã®ä»–Rulesé–‹ç™ºã§å¾—ã‚‰ã‚ŒãŸçŸ¥è¦‹ã«ã¤ã„ã¦æ›¸ã„ã¦ã„ãã¾ã™ã€‚</p><p>Auth0ã«é–¢ã™ã‚‹æ¦‚è¦ã«ã¤ã„ã¦ã¯<a href="https://future-architect.github.io/articles/20200122/">å¼Šç¤¾ å±±ç”°ã®è¨˜äº‹</a>ã‚’ã€Auth0ã®äºŒè¦ç´ èªè¨¼ã«èˆˆå‘³ã®ã‚ã‚‹æ–¹ã¯<a href="https://future-architect.github.io/articles/20200123/">å¼Šç¤¾ å…ˆå±±ã®è¨˜äº‹</a>ã‚’å¾¡è¦§ãã ã•ã„ã€‚</p><h1 id="Rulesã¨ã¯"><a href="#Rulesã¨ã¯" class="headerlink" title="Rulesã¨ã¯"></a>Rulesã¨ã¯</h1><p>Auth0ã®Rulesã¨ã¯ã€</p><ul><li>ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚„IDãƒˆãƒ¼ã‚¯ãƒ³ã®å–å¾—å¾Œã«å®Ÿè¡Œã•ã‚Œã‚‹</li><li>ä»»æ„ã®Javascriptã§æ›¸ã‹ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ã¦</li><li>èªè¨¼èªå¯ã®çµæœã‚’ç·¨é›†ã—ãŸã‚Šã€è¿½åŠ ã®å‡¦ç†ã‚’è¡Œã†äº‹ã®ã§ãã‚‹æ©Ÿèƒ½</li></ul><p>ã¨ãªã£ã¦ã„ã¾ã™ã€‚<br><a href="https://auth0.com/docs/best-practices/rules" target="_blank" rel="noopener">https://auth0.com/docs/best-practices/rules</a><br><img src="/images/20200128/photo_20200128_01.png" style="border:solid 1px #000000"></p><p>Auth0ã«ã¯OIDCã‚’ä½¿ã£ãŸèªè¨¼èªå¯ãƒ•ãƒ­ãƒ¼ã«å¿…è¦ãªæ©Ÿèƒ½ãŒå‚™ã‚ã£ã¦ã„ã‚‹ã®ã§ã™ãŒã€Rulesã®æ©Ÿèƒ½ã‚’ä½¿ã†ã“ã¨ã«ã‚ˆã‚Šãƒ—ãƒ­ãƒ€ã‚¯ãƒˆå›ºæœ‰ã®æ§˜ã€…ãªè¦æ±‚ã«ç­”ãˆã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚</p><h1 id="Rulesã®ä½œã‚Šæ–¹"><a href="#Rulesã®ä½œã‚Šæ–¹" class="headerlink" title="Rulesã®ä½œã‚Šæ–¹"></a>Rulesã®ä½œã‚Šæ–¹</h1><p>Auth0ã«ã¯ä»£è¡¨çš„ãªRulesã®æ´»ç”¨æ–¹æ³•ã®ã‚µãƒ³ãƒ—ãƒ«ã‚’å¤šæ•°ç”¨æ„ã—ã¦ã„ã¦ã€ãã‚Œã‚‰ã‚’ãã®ã¾ã¾ä½¿ã†ã“ã¨ã§ã‚‚ã‚ã‚‹ç¨‹åº¦ã®èªè¨¼èªå¯ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŒå¯èƒ½ã¨ãªã£ã¦ã„ã¾ã™ã€‚<br>ã“ã“ã§ã¯ã‚µãƒ³ãƒ—ãƒ«ã‚’ç”¨ã„ãŸRulesã®ä½œæˆæ‰‹é †ã‚’èª¬æ˜ã—ã¾ã™ã€‚</p><p>ã¾ãšå·¦ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰Rulesã‚’é¸æŠã—ã€å³ä¸Šã®CREATE RULEã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚<br><img src="/images/20200128/photo_20200128_02.png" style="border:solid 1px #000000"></p><p>ç©ºã®ãƒ«ãƒ¼ãƒ«ã‹ã€ç”¨æ„ã•ã‚ŒãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é¸æŠã—ã¾ã™ã€‚<br>ä»Šå›ã¯ã€ã€ŒIP Address whitelistã€ã¨ã„ã†ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ç”¨ã—ã¦ãƒ«ãƒ¼ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚</p><img src="/images/20200128/photo_20200128_03.png" style="border:solid 1px #000000"><p>ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€è¨±å¯ã—ãŸã„IPã®ãƒªã‚¹ãƒˆã‚’ç·¨é›†ã—ã¦SAVE CHANGESã‚’æŠ¼ã™ã¨ãƒ«ãƒ¼ãƒ«ã®è¿½åŠ ã¯å®Œäº†ã§ã™ã€‚</p><img src="/images/20200128/photo_20200128_04.png" style="border:solid 1px #000000"><p>ãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ ãŒåæ˜ ã•ã‚Œã‚‹ã¨ã€ç‰¹å®šã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‹ã‚‰ä»¥å¤–ã®ã‚¢ã‚¯ã‚»ã‚¹ã¯ãƒ­ã‚°ã‚¤ãƒ³å‡ºæ¥ãªã„ã‚ˆã†ãªåˆ¶å¾¡ãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚<br>ã“ã®ã‚ˆã†ãªå½¢ã§Rulesã‚’è¿½åŠ ã—ã¦ã„ãã“ã¨ã«ã‚ˆã‚Šã€ç´°ã‹ãªã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã‚„ãƒˆãƒ¼ã‚¯ãƒ³ã«ä¸ãˆã‚‰ã‚Œã‚‹æƒ…å ±ã®å¤‰æ›´ç­‰æ§˜ã€…ãªã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚’æ–½ã™ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚</p><h1 id="Rulesã®æ›¸ãæ–¹"><a href="#Rulesã®æ›¸ãæ–¹" class="headerlink" title="Rulesã®æ›¸ãæ–¹"></a>Rulesã®æ›¸ãæ–¹</h1><p>ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä»¥å¤–ã®RulesãŒå¿…è¦ã«ãªã‚‹äº‹ã‚‚å¤šã€…ã‚ã‚‹ã¨æ€ã†ã®ã§ã€åŸºæœ¬çš„ãªRulesã®æ›¸ãæ–¹ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚<br>ä»¥ä¸‹ãŒç©ºã®ãƒ«ãƒ¼ãƒ«ã®ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> (<span class="params">user, context, callback</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// <span class="doctag">TODO:</span> implement your rule</span></span><br><span class="line">  <span class="keyword">return</span> callback(<span class="literal">null</span>, user, context);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ãƒ«ãƒ¼ãƒ«ã¯ã€</p><ul><li>ãƒ¦ãƒ¼ã‚¶æƒ…å ±ã€context, ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã‚’å—ã‘å–ã‚Šã€</li><li>å—ã‘å–ã£ãŸã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’å‘¼ã³å‡ºã™</li></ul><p>å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚<br>ãƒ«ãƒ¼ãƒ«ãŒå—ã‘å–ã‚‹æƒ…å ±ã¯ã€</p><ul><li>user: ãƒ­ã‚°ã‚¤ãƒ³ã—ãŸãƒ¦ãƒ¼ã‚¶ã«é–¢ã™ã‚‹æƒ…å ±ãŒå…¥ã£ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ</li><li>context: ç¾åœ¨ã®ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†ã«é–¢ã™ã‚‹æƒ…å ±ãŒå…¥ã£ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ</li></ul><p>ã®ï¼’ã¤ã«ãªã‚Šã¾ã™ã€‚å†…å®¹ã®æ­£ä½“ã¯<a href="https://auth0.com/docs/rules/references/context-object" target="_blank" rel="noopener">Auth0ã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p><p>callbackã¸æ¸¡ã™å¼•æ•°ã¯ã€1ã¤ç›®ã¯ã‚¨ãƒ©ãƒ¼ã¨ãªã£ã¦ã„ã¾ã™ã€‚nullã¯æ­£å¸¸ã«å‡¦ç†ãŒå®Œäº†ã—ãŸã“ã¨ã‚’è¡¨ã—ã€ã“ã®å¾Œç¶šã®RulesãŒå¼•ãç¶šãå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚<br>2ã¤ç›®ã€3ã¤ç›®ã¯æ¬¡ã®Ruleã«æ¸¡ã™userã‚„contextã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã‚’ç·¨é›†ã™ã‚‹ã¨å¾Œç¶šã®å‡¦ç†ã«ç‰¹å®šã®å€¤ã‚’æ¸¡ã—ãŸã‚Šã€å®Ÿéš›ã«ãƒ­ã‚°ã‚¤ãƒ³ã•ã‚Œã‚‹ãƒ¦ãƒ¼ã‚¶ã‚’Ruleå´ã§å¤‰æ›´ã—ãŸã‚Šã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚</p><p>èªè¨¼ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ãªå½¢ã§ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã™äº‹ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> callback(<span class="keyword">new</span> UnauthorizedError(<span class="string">"IP is out of range"</span>))</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"Unexpected error"</span>))</span><br></pre></td></tr></table></figure><p>UnauthorizedErrorã®å¼•æ•°ãŒæ‹’å¦ã•ã‚ŒãŸç†ç”±ã‚’è¡¨ã—ã¾ã™ã€‚<br>callbackã§nullä»¥å¤–ä½•ã‚’è¿”ã—ã¦ã‚‚èªè¨¼ã‚¨ãƒ©ãƒ¼ã¨ã¿ãªã•ã‚Œã¾ã™ãŒã€Unauthorizedã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯åŸå› ãŒåˆ†ã‹ã£ã¦ã„ã‚‹èªè¨¼ã‚¨ãƒ©ãƒ¼ã€Errorã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯å†…éƒ¨ã‚¨ãƒ©ãƒ¼ã‚’è¡¨ç¾ã™ã‚‹ã®ã«ä½¿ç”¨ã™ã‚‹ã®ãŒæ­£ã—ã„ã‚ˆã†ã§ã™ã€‚<a href="https://auth0.com/docs/best-practices/rules#callback-function" target="_blank" rel="noopener">Auth0å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚ˆã‚Š</a></p><h1 id="ç‹¬è‡ªRulesã®é–‹ç™ºTips"><a href="#ç‹¬è‡ªRulesã®é–‹ç™ºTips" class="headerlink" title="ç‹¬è‡ªRulesã®é–‹ç™ºTips"></a>ç‹¬è‡ªRulesã®é–‹ç™ºTips</h1><p>ä»¥ä¸ŠãŒRulesã®æ¦‚è¦ãªã®ã§ã™ãŒã€å®Ÿéš›ã«é–‹ç™ºã™ã‚‹ä¸Šã§çŸ¥ã£ã¦ãŠãã¨è‰¯ã„Tipsã‚„ã€æœ€åˆã®é–‹ç™ºã®éš›ã«ãƒãƒã‚Šã‚„ã™ã„ãƒã‚¤ãƒ³ãƒˆãŒå¤šæ•°ã‚ã‚‹ã®ã§ã„ãã¤ã‹ã‚’ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¦ã“ã“ã«è¨˜ã—ã¾ã™ã€‚</p><h2 id="ãƒ­ã‚°ã®è¦‹æ–¹ã«ã¤ã„ã¦"><a href="#ãƒ­ã‚°ã®è¦‹æ–¹ã«ã¤ã„ã¦" class="headerlink" title="ãƒ­ã‚°ã®è¦‹æ–¹ã«ã¤ã„ã¦"></a>ãƒ­ã‚°ã®è¦‹æ–¹ã«ã¤ã„ã¦</h2><p>Ruleså†…ã§console.logã‚’ä½¿ç”¨ã—ã¦ã‚‚ã€Auth0ã®ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã‚„ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã§å‡ºåŠ›çµæœã‚’è¦‹ã‚‹ã“ã¨ã¯å‡ºæ¥ã¾ã›ã‚“ã€‚<br>ã—ã‹ã—ã€æ‹¡å¼µæ©Ÿèƒ½ã®Real-time Webtask Logsã‚’ä½¿ã†ã“ã¨ã«ã‚ˆã£ã¦ãƒ­ã‚°ã‚’è¦‹ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚<br><img src="/images/20200128/photo_20200128_05.png" style="border:solid 1px #000000"></p><p>æ‹¡å¼µæ©Ÿèƒ½ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ä½¿ç”¨ã™ã‚‹ã¨ã€ãƒ–ãƒ©ã‚¦ã‚¶çµŒç”±ã‹ã‚‰ä»¥ä¸‹ã®ã‚ˆã†ãªå½¢ã§ãƒ­ã‚°ã‚¤ãƒ³ã®è©¦è¡Œã®ãƒ­ã‚°ã‚„console.logã§å‡ºåŠ›ã—ãŸå†…å®¹ã‚’ç¢ºèªã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚<br><img src="/images/20200128/photo_20200128_06.png"></p><p>Real-time Webtask Logsã¯ãƒ‡ãƒãƒƒã‚°ã«ã¯éå¸¸ã«å¼·åŠ›ãªãƒ„ãƒ¼ãƒ«ãªã®ã§ã™ãŒã€æœ¬ç•ªã§é‹ç”¨ã™ã‚‹éš›ã«ã¯å€‹äººæƒ…å ±ãŒå«ã¾ã‚Œã‚‹userã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚„contextã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã¯å‡ºã•ãªã„ã‚ˆã†æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚</p><h2 id="ç’°å¢ƒå¤‰æ•°ã®ä½¿ã„æ–¹ã«ã¤ã„ã¦"><a href="#ç’°å¢ƒå¤‰æ•°ã®ä½¿ã„æ–¹ã«ã¤ã„ã¦" class="headerlink" title="ç’°å¢ƒå¤‰æ•°ã®ä½¿ã„æ–¹ã«ã¤ã„ã¦"></a>ç’°å¢ƒå¤‰æ•°ã®ä½¿ã„æ–¹ã«ã¤ã„ã¦</h2><p>Rulesã‚’é–‹ç™ºã—ã¦ã„ã‚‹ã¨ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ä¸Šã§ã¯ãªãç’°å¢ƒå¤‰æ•°ã§ç®¡ç†ã—ãŸã„å€¤ãŒã ã„ãŸã„å‡ºã¦ãã¾ã™ã€‚<br>ä¾‹ã¨ã—ã¦ã¯ã€</p><ul><li>ç’°å¢ƒã«ã‚ˆã£ã¦ç•°ãªã‚‹å¤–éƒ¨APIã®æ¥ç¶šå…ˆæƒ…å ±</li><li>APIã‚­ãƒ¼ç­‰å…¬é–‹ã—ãŸããªã„æƒ…å ±</li></ul><p>ãŒæŒ™ã’ã‚‰ã‚Œã¾ã™ã€‚<br>Auth0ã§ã¯å…¨ã¦ã®Rulesã§å…±é€šã®ç’°å¢ƒå¤‰æ•°ã‚’å®šç¾©ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚<br>ç’°å¢ƒå¤‰æ•°ã‚’å®šç¾©ã™ã‚‹ãŸã‚ã«ã¯Rulesã‚’é–‹ãã€ä»¥ä¸‹ã®èµ¤ã„å››è§’ã®éƒ¨åˆ†ã‚’ä½¿ç”¨ã—ã¦ç™»éŒ²ã—ã¾ã™ã€‚<br><img src="/images/20200128/photo_20200128_07.png" style="border:solid 1px #000000"></p><p>ç’°å¢ƒå¤‰æ•°ã‚’ä½¿ç”¨ã™ã‚‹éš›ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«configurationã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ç”¨ã—ã¦ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> (<span class="params">user, context, callback</span>) </span>&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">var</span> SOME_VALUE = configuration.SOME_KEY;</span><br><span class="line">  <span class="comment">// do something with value</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> callback(<span class="literal">null</span>, user, context);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨ã§ãã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã¤ã„ã¦"><a href="#ä½¿ç”¨ã§ãã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã¤ã„ã¦" class="headerlink" title="ä½¿ç”¨ã§ãã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã¤ã„ã¦"></a>ä½¿ç”¨ã§ãã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã¤ã„ã¦</h2><p>Rulesã§ã¯AWSã®Lambdaç­‰ã¨ç•°ãªã‚Šãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚³ãƒ¼ãƒ‰ã‚‚å«ã‚ã¦ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ã¯å‡ºæ¥ãªã„ã®ã§ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«å®Ÿè£…ãŒä¾å­˜ã—ã¾ã™ã€‚<br>ãã†ãªã‚‹ã¨ã€ä½¿ç”¨ã§ãã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªä¸€è¦§ãŒæ¬²ã—ããªã£ã¦ãã¾ã™ã€‚<br>ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã§ä½¿ç”¨ã§ãã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ä¸€è¦§ã‚’ç¢ºèªã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚<br><a href="https://auth0-extensions.github.io/canirequire/" target="_blank" rel="noopener">https://auth0-extensions.github.io/canirequire/</a><br>åŸºæœ¬çš„ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯å…¨ã¦å«ã¾ã‚Œã¦ã„ã‚‹ã®ã§ã€å›°ã‚‹ã“ã¨ã¯å°‘ãªã„ã¨æ€ã„ã¾ã™ã€‚<br>ã‚‚ã—ã©ã†ã—ã¦ã‚‚å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå«ã¾ã‚Œã¦ã„ãªã„å ´åˆã¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã™ã‚‹ã“ã¨ã‚‚å‡ºæ¥ã‚‹ã¿ãŸã„ã§ã™ã€‚</p><h2 id="Rulesã®ä¸­ã§Auth0è‡ªèº«ã®APIã‚’ä½¿ç”¨ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦"><a href="#Rulesã®ä¸­ã§Auth0è‡ªèº«ã®APIã‚’ä½¿ç”¨ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦" class="headerlink" title="Rulesã®ä¸­ã§Auth0è‡ªèº«ã®APIã‚’ä½¿ç”¨ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦"></a>Rulesã®ä¸­ã§Auth0è‡ªèº«ã®APIã‚’ä½¿ç”¨ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦</h2><p>Auth0ã®Ruleså†…ã§ã¯ã€ä¸€éƒ¨ã®Auth0APIãŒç°¡å˜ã«ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ãªæ©Ÿèƒ½ãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚<br>ä»¥ä¸‹Auth0ã®ãƒ«ãƒ¼ãƒ«å†…ã§ãƒ¦ãƒ¼ã‚¶ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°ã™ã‚‹ãŸã‚ã®ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">auth0.users.updateAppMetadata(user.user_id, user.app_metadata);</span><br></pre></td></tr></table></figure><p>auth0ã¨ã„ã†ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ã§ã€ç¾åœ¨ã®auth0ç’°å¢ƒé–¢é€£ã®æƒ…å ±(ãƒ‰ãƒ¡ã‚¤ãƒ³ç­‰)ã‚„ä¸€éƒ¨ã®APIå‘¼ã³å‡ºã—ã‚’è¡Œã†ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚<br>ã—ã‹ã—ã€ã“ã®auth0ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ä»˜ä¸ã•ã‚Œã¦ã„ã‚‹æ¨©é™ã¯ä¸€éƒ¨ã®æ¨©é™ã—ã‹ãªã„ãŸã‚(read:usersã¨update:usersã®ã¿)ãã®ä»–ã®æ“ä½œã‚’è¡ŒãŠã†ã¨ã™ã‚‹ã¨æ‹’å¦ã•ã‚Œã¦ã—ã¾ã„ã‚¨ãƒ©ãƒ¼ã¨ãªã‚Šã¾ã™ã€‚<br>å…¨ã¦ã®auth0ã®æ“ä½œã‚’Rulesä¸Šã§è¡Œã†ãŸã‚ã«ã¯ã€Rulesä¸Šã§Auth0ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ä¾‹ã¨ã—ã¦ä»¥ä¸‹ã«ã€ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ããŸãƒ¦ãƒ¼ã‚¶ã‚’å…¨ã¦å‰Šé™¤ã—ã¦ã—ã¾ã†Ruleã‚’ç¤ºã—ã¾ã™ã€‚ï¼ˆå±é™ºãªãƒ«ãƒ¼ãƒ«ãªã®ã§ã€ã‚‚ã¡ã‚ã‚“ã§ã™ãŒæœ¬ç•ªç’°å¢ƒç­‰ã§ã¯çµ¶å¯¾ã«å‹•ã‹ã•ãªã„ã§ãã ã•ã„ï¼ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> (<span class="params">user, context, callback</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> ManagementClient = <span class="built_in">require</span>(<span class="string">'auth0@2.9.1'</span>).ManagementClient;</span><br><span class="line">    <span class="comment">// Auth0ã®ãƒ¦ãƒ¼ã‚¶å‰Šé™¤æ¨©é™ã‚’æŒã¤ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ç”Ÿæˆã™ã‚‹</span></span><br><span class="line">    <span class="keyword">var</span> managementAuth0 = <span class="keyword">new</span> ManagementClient(&#123;</span><br><span class="line">        domain: auth0.domain,</span><br><span class="line">        clientId: configuration.application_client_id,</span><br><span class="line">        clientSecret: configuration.application_client_secret,</span><br><span class="line">        scope: <span class="string">'delete:users'</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ãƒ¦ãƒ¼ã‚¶å‰Šé™¤ã‚’è¡Œã†</span></span><br><span class="line">    managementAuth0.users.delete(&#123; <span class="attr">id</span>: user.user_id &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">            <span class="built_in">console</span>.error(<span class="string">`failed to delete user <span class="subst">$&#123;user.user_id&#125;</span>`</span>);</span><br><span class="line">            <span class="built_in">console</span>.error(err);</span><br><span class="line">        &#125;</span><br><span class="line">        callback(err, user, context);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã“ã®ã‚½ãƒ¼ã‚¹ã‚’å®Ÿè¡Œã™ã‚‹å‰æº–å‚™ã¨ã—ã¦ã€Rulesã§ã®å®Ÿè¡Œç”¨ã«Machine to Machineç”¨ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä¸€ã¤ç™»éŒ²ã—ã¦ãŠãç’°å¢ƒå¤‰æ•°ã«client_idã¨client_secretã‚’ç™»éŒ²ã—ã¾ã™ã€‚<br>ã“ã‚Œã‚’è¡Œã†ã“ã¨ã«ã‚ˆã‚Šã€ä»»æ„ã®Auth0APIã‚’å‘¼ã³å‡ºã™ã“ã¨ãŒå‡ºæ¥ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚<br>ã‚‚ã¡ã‚ã‚“å¿…è¦ãªã„å ´åˆã¯ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ä¸ãˆã‚‰ã‚Œã¦ã„ã‚‹auth0ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ä½¿ç”¨ã™ã‚‹ã¹ããªã®ã§ã”æ³¨æ„ãã ã•ã„ã€‚</p><h2 id="ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—æ™‚ã®ã¿Rulesã‚’å®Ÿè¡Œã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦"><a href="#ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—æ™‚ã®ã¿Rulesã‚’å®Ÿè¡Œã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦" class="headerlink" title="ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—æ™‚ã®ã¿Rulesã‚’å®Ÿè¡Œã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦"></a>ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—æ™‚ã®ã¿Rulesã‚’å®Ÿè¡Œã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦</h2><p>RulesãŒå®Ÿè¡Œã•ã‚Œã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¯ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç™ºè¡Œã—ãŸå¾Œã«ãªã‚Šã¾ã™ã€‚<br>ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã¨ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—æ™‚ã¯ä¸¡æ–¹ãƒˆãƒ¼ã‚¯ãƒ³ãŒç™ºè¡Œã•ã‚Œã‚‹ã®ã§ã™ãŒã€Rulesã«æ¸¡ã•ã‚Œã‚‹æƒ…å ±ã®ã¿ã‹ã‚‰ã¯ãã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒãƒ­ã‚°ã‚¤ãƒ³ã‹ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ã‹ã‚ã‹ã‚Šã¾ã›ã‚“ã€‚<br>ãã®ãŸã‚ã€ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—æ™‚ã®ã¿å®Ÿè¡Œã—ãŸã„å‡¦ç†ãŒã‚ã‚‹å ´åˆã¯å°‘ã—å·¥å¤«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚<br>èª¿ã¹ãŸã¨ã“ã‚ã€ãƒ¦ãƒ¼ã‚¶å›ºæœ‰ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹é ˜åŸŸã§ã‚ã‚‹app_metadataã‚’ä½¿ç”¨ã—ã¦å®Ÿç¾ã™ã‚‹æ–¹æ³•ãŒãƒ¡ã‚¸ãƒ£ãƒ¼ã®ã‚ˆã†ã§ã™ã€‚(<a href="https://dev.classmethod.jp/server-side/auth0/hook_signup_logic_using_auth0_rules/" target="_blank" rel="noopener">ä¾‹1</a>, <a href="https://community.auth0.com/t/running-rule-only-once-at-sign-up/19401" target="_blank" rel="noopener">ä¾‹2</a>)</p><p>ä»¥ä¸‹ãŒã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—æ™‚ã®ã¿ç‰¹å®šã®å‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> (<span class="params">user, context, callback</span>) </span>&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// æ—¢ã«ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—å‡¦ç†ãŒå®Œäº†ã—ã¦ã„ã‚‹å ´åˆã¯ä½•ã‚‚ã—ãªã„</span></span><br><span class="line">  <span class="keyword">if</span> (user.app_metadata.signedup) <span class="keyword">return</span> callback(<span class="literal">null</span>, user, context);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// do something related to signup</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// ãƒ¦ãƒ¼ã‚¶ã®AppMetadataã‚’æ›´æ–°ã—ã€ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ãƒ•ãƒ©ã‚°ã‚’trueã«ã™ã‚‹</span></span><br><span class="line">  user.app_metadata.signedup = <span class="literal">true</span>;</span><br><span class="line">  auth0.users.updateAppMetadata(user.user_id, user.app_metadata);    </span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> callback(<span class="literal">null</span>, user, context);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—æ™‚ã®æ›´æ–°å‡¦ç†ãŒæ­£å¸¸ã«å®Œäº†ã—ãŸå¾Œã«ã€ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã§ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—å‡¦ç†ãŒå®Œäº†ã—ãŸã“ã¨ã‚’ç¤ºã™ãƒ•ãƒ©ã‚°ã‚’ONã«ã™ã‚‹ã“ã¨ã§ï¼’å›ç›®ä»¥é™ã¯å®Ÿè¡Œã•ã‚Œãªã„ã‚ˆã†ã«åˆ¶å¾¡ã—ã¦ã„ã¾ã™ã€‚</p><h1 id="çµ‚ã‚ã‚Šã«"><a href="#çµ‚ã‚ã‚Šã«" class="headerlink" title="çµ‚ã‚ã‚Šã«"></a>çµ‚ã‚ã‚Šã«</h1><p>Rulesã¯ä»»æ„ã®ã‚³ãƒ¼ãƒ‰ãŒå®Ÿè¡Œå¯èƒ½ãªéå¸¸ã«å¼·åŠ›ãªæ©Ÿèƒ½ã§ã™ãŒã€å‡¦ç†ã‚’è¿½åŠ ã—ã™ãã‚‹ã¨ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†ãŒé…ããªã£ã¦ã—ã¾ã†ãƒªã‚¹ã‚¯ãŒã‚ã‚Šã¾ã™ã€‚<br>ã§ã™ã®ã§ã€èªè¨¼èªå¯ã®ãƒ•ãƒ­ãƒ¼ã§å¿…ãšã‚„ã‚‰ãªã‘ã‚Œã°ãªã‚‰ãªã„æœ€å°é™ã®å†…å®¹ã‚’è¡Œã†ã«ç•™ã‚ã‚‹ã®ãŒè‰¯ã„ã§ã—ã‚‡ã†ã€‚<br>ã“ã“ã§ã¯èªã‚Œã¾ã›ã‚“ã§ã—ãŸãŒã€ã‚ˆã‚Šå¤šãã®å®Ÿè¡Œã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒé¸ã¹ã‚‹Hooksã¨ã„ã†æ©Ÿèƒ½ãŒBetaã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚<br>å°†æ¥çš„ã«ã¯Hooksã‚’æ´»ç”¨ã—ãŸã»ã†ãŒã‚ˆã‚ŠæŸ”è»Ÿã§ç¶ºéº—ãªå‡¦ç†ã‚’æ›¸ãã“ã¨ãŒå‡ºæ¥ã‚‹ã‚ˆã†ã«ãªã‚Šãã†ã§ã™ã€‚</p><hr><p>é–¢é€£è¨˜äº‹ï¼š</p><ul><li><a href="/articles/20200122/">Auth0 å°å…¥ç·¨</a></li><li><a href="/articles/202001223/">Auth0 Emailã¾ãŸã¯SMSã‚’ä½¿ã£ãŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ¬ã‚¹èªè¨¼ã‚’è¨­å®šã™ã‚‹</a></li><li><a href="/articles/20190612/">TypeScriptæ•™è‚²ç”¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å…¬é–‹ã®ãŠçŸ¥ã‚‰ã›</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Auth0ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ä½¿ã†ã«å½“ãŸã£ã¦å¿…è¦ã«ãªã‚‹Rulesã«ã¤ã„ã¦ã€æ¦‚è¦ã¨é–‹ç™ºã«é–¢ã™ã‚‹Tipsã‚’èª¬æ˜ã—ã¾ã™ã€‚&lt;br&gt;Auth0ã®Rulesã®ä½¿ã„æ–¹ã«ã¤ã„ã¦ã¯ã€Auth0å…¬å¼ã®&lt;a href=&quot;https://auth0.com/docs/best-practices/r
      
    
    </summary>
    
      <category term="èªè¨¼èªå¯" scheme="https://future-architect.github.io/categories/%E8%AA%8D%E8%A8%BC%E8%AA%8D%E5%8F%AF/"/>
    
    
      <category term="JavaScript" scheme="https://future-architect.github.io/tags/JavaScript/"/>
    
      <category term="Auth0" scheme="https://future-architect.github.io/tags/Auth0/"/>
    
  </entry>
  
  <entry>
    <title>Umeda.go 2020 Winterã«3åã§ç™»å£‡ã—ã¾ã—ãŸ</title>
    <link href="https://future-architect.github.io/articles/20200127/"/>
    <id>https://future-architect.github.io/articles/20200127/</id>
    <published>2020-01-27T00:39:35.000Z</published>
    <updated>2020-01-27T00:50:05.930Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>ã“ã‚“ã«ã¡ã¯ã€‚TIG DXãƒ¦ãƒ‹ãƒƒãƒˆ<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>ã®æ¸‹å·ã€è¾»ã€çœŸé‡ã§ã™ã€‚å…ˆæ—¥é–‹å‚¬ã•ã‚ŒãŸ <a href="https://umedago.connpass.com/event/159972/" target="_blank" rel="noopener">Umeda.go 2020 Winter</a> ã«å½“ç¤¾ã‹ã‚‰3åãŒç™»å£‡ã—ã¾ã—ãŸã€‚</p><p>ç™»å£‡ç‰¹å…¸ã§ç‰¹è£½ã‚¹ãƒ†ãƒƒã‚«ãƒ¼ã‚’1æšãšã¤ã‚‚ã‚‰ãˆã¾ã—ãŸã€‚ã¿ã‚“ãªå¬‰ã—ã™ãã¦ã‚¹ãƒãƒ›ã«è²¼ã£ã¦ã„ã¾ã™ã€‚</p><blockquote class="twitter-tweet"><p lang="ja" dir="ltr"><a href="https://twitter.com/hashtag/umedago?src=hash&amp;ref_src=twsrc%5Etfw" target="_blank" rel="noopener">#umedago</a> æ–°ã—ã„ãƒ­ã‚´ã®ã‚¹ãƒ†ãƒƒã‚«ãƒ¼ãŒã§ãã¾ã—ãŸï¼<br>ä»Šå›ã®ã‚¤ãƒ™ãƒ³ãƒˆã‹ã‚‰ç™»å£‡è€…æ§˜ã«é…ã£ã¦ã„ãã¾ã™ã€‚<br>é‹å–¶è‡ªèº«ãŒè¨€ã†ã®ã‚‚ãªã‚“ã§ã™ãŒ<br>ãªã‹ãªã‹ã„ã„å‡ºæ¥ã ã¨æ€ã„ã¾ã™ï¼ <a href="https://t.co/yQszITKtgM" target="_blank" rel="noopener">pic.twitter.com/yQszITKtgM</a></p>&mdash; umeda.go (@umedago) <a href="https://twitter.com/umedago/status/1220903482346991617?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">January 25, 2020</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><p>å½“æ—¥ã¯ãƒ›ãƒ¯ã‚¤ãƒˆãƒœãƒ¼ãƒ‰ã«Gopherãã‚“ãŒãƒ©ã‚¤ãƒ–çš„ã«æã‹ã‚Œã€ç¥çµµå¸«ã£ã¦ã„ã‚‹ã‚“ã ã£ã¦æ€ã„ã¾ã—ãŸã€‚ã¦ã£ãã‚Šãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ã•ã‚“ã‹ã¨æ€ã„ã¾ã—ãŸãŒã€è·ç¨®ã¨ã—ã¦ã¯ã¾ã•ã‹ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã¨ã„ã†ã“ã¨ã‚’å¾Œã§çŸ¥ã‚Šã¾ã—ãŸã€‚ã’ã«æã‚ã—ãæ‰èƒ½..!! ã¨æˆ¦æ…„ã—ã¾ã—ãŸã€‚</p><p>ãã—ã¦ã€Œã‚ã‚“ã¾ã‚ŠæŒã¡ä¸Šã’ã™ãã‚‹ã¨ã€æœ¬äººãŒæ¬¡ã‹ã‚‰ç·Šå¼µã—ã¡ã‚ƒã†ã‹ã‚‚ã ã‹ã‚‰æœŸå¾…å€¤ã‚’ä¸Šã’ã™ããªã„ã‚ˆã†ã«ã­ç¬‘ã€ã£ã¦é‹å–¶ã®æ–¹ãŒã•ã‚‰ã£ã¨è¨€ã£ã¦ã€ã‚€ã¡ã‚ƒãã¡ã‚ƒè‰¯ã„é›°å›²æ°—ã ãªã£ã¦æ€ã„ã¾ã—ãŸã€‚</p><img src="/images/20200127/photo_20200127_01.jpeg"><p>éœ‡ãˆã‚‹ã»ã©å¯æ„›ã„ã€‚</p><h1 id="Goãªã‚‰ã‚ã‹ã‚‹ãƒ©ãƒƒãƒ‘ãƒ¼ã‚³ãƒãƒ³ãƒ‰ä½œæˆã§å­¦ã¶ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°"><a href="#Goãªã‚‰ã‚ã‹ã‚‹ãƒ©ãƒƒãƒ‘ãƒ¼ã‚³ãƒãƒ³ãƒ‰ä½œæˆã§å­¦ã¶ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°" class="headerlink" title="Goãªã‚‰ã‚ã‹ã‚‹ãƒ©ãƒƒãƒ‘ãƒ¼ã‚³ãƒãƒ³ãƒ‰ä½œæˆã§å­¦ã¶ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°"></a>Goãªã‚‰ã‚ã‹ã‚‹ãƒ©ãƒƒãƒ‘ãƒ¼ã‚³ãƒãƒ³ãƒ‰ä½œæˆã§å­¦ã¶ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°</h1><p>æ¾å·ã§ã™ã€‚ä»Šå›ã¯ã€åŸºèª¿å…¬æ¼”æ ã‚’ã„ãŸã ãã¾ã—ãŸã®ã§ã€ä¹…ã€…ã«é•·ã‚ã®ç™ºè¡¨ã‚’ã•ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚æ›¸ç±ã§ã‚‚ãƒ—ãƒ­ã‚»ã‚¹ã®èµ·å‹•ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ã‚ã‚Šã¾ã—ãŸãŒã€Goã®ã‚¹ã‚­ãƒ«ã‚’å­¦ã¶é¡Œæã¨ã—ã¦å„ªã‚Œã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã®ã§ã€æ›¸ç±ã®å†…å®¹ã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹ã«ã¯ã€ã¨ã„ã†æ„Ÿã˜ã§æ§‹æˆã—ã¾ã—ãŸã€‚</p><p>åƒ•ã‚‚å…ƒæ ƒæœ¨çœŒæ°‘ã¨ã—ã¦ã€åœ°æ–¹ã®å‹‰å¼·ä¼šã¨æ±äº¬ã®å‹‰å¼·ä¼šã®é•ã„ã¯å°‘ã—æ„Ÿã˜ã¦ã„ã¾ã—ãŸã€‚ãŠãã‚‰ãæ™®æ®µã‹ã‚‰Goã‚’æ›¸ã„ã¦ã„ã‚‹äººã ã‘ãŒã‚ºãƒãƒƒã¨é›†ã¾ã‚‹ã“ã¨ã¯ãªãã¦ã€å„ç¨®å‹‰å¼·ä¼šã§ãƒ¡ãƒ³ãƒãƒ¼ã¯ã‹ãªã‚Šã‚ªãƒ¼ãƒãƒ¼ãƒ©ãƒƒãƒ—ã—ã¦ã„ã¦ã€ã•ã¾ã–ã¾ãªãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã®äººãŒãµã‚ã£ã¨é›†ã¾ã‚‹ã“ã¨ãŒå¤šã„å°è±¡ã§ã—ãŸã€‚ãã®ãŸã‚ã€ä½¿ã£ã¦ã„ã‚‹äººå‘ã‘ã®ç´°ã‹ã„ãƒã‚¿ã‚ˆã‚Šã¯ã€ã“ã‚Œã‹ã‚‰å°å…¥ã™ã‚‹ã«ã¯ã€ã¨ã„ã†äººã«ã‚‚é…æ…®ã—ã¦é–“å£ã‚’æ™®æ®µã‚ˆã‚Šã‚‚åºƒãã€ã¨ã„ã†ã“ã¨ã‚’æ„è­˜ã—ã¾ã—ãŸã€‚ã¾ãŸã€Goã®å®Ÿè£…ã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã ã‘ã§ã¯ãªãã€ŒGoã‚‰ã—ã•ã€ã‚’è¨€è‘‰ã«ã—ã¦ã€æ™®æ®µGoã‚’ä½¿ã£ã¦ã„ãªã„äººã«ã‚‚ã€ãªã«ã‹æŒã¡å¸°ã£ã¦ã‚‚ã‚‰ãˆã‚Œã°ã¨ã„ã†å†…å®¹ã«ã—ã¾ã—ãŸã€‚</p><iframe src="https://docs.google.com/presentation/d/e/2PACX-1vSl7mn5XBPTKFEiMZo8X02Q0kOt0IGhw_zEYCSZIuUpYioez3TxGWwAcrwZU4FZLm0OtwEZFfNN4G0N/embed?start=false&loop=false&delayms=3000" frameborder="0" width="900" height="569" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe><p>â€»<strong>æ¨©é™ãŒå¿…è¦ã§ã™</strong> ã¨å‡ºã‚‹æ–¹ã¯ã€ä¼šç¤¾ã®GSuiteè¨­å®šã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ç§ç”¨ã®ãƒ¢ãƒã‚¤ãƒ«ãªã©ã§ç¢ºèªãã ã•ã„</p><p>å®Ÿéš›ã€ä»•äº‹ã§æ›¸ã‹ã‚Œã¦ã„ã‚‹äººä»¥å¤–ã«ã‚‚ã€è¶£å‘³ã§æ›¸ã„ã¦ã„ã‚‹ã¨ã„ã†äººã‚‚å¤šã„ã—ã€æ™®æ®µä½¿ã„ã®è¨€èªãŒé•ã†äººãŒå¤šãã¦ã€è³ªç–‘å¿œç­”ã®å†…å®¹ã‚‚æ±äº¬éƒ½ã¯ã ã„ã¶é•ã£ã¦æ¥½ã—ã‹ã£ãŸã§ã™ã€‚</p><h1 id="LT-ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚¨ãƒ³ã‚¸ãƒ³ã‚’Goã§ä½œã‚‹"><a href="#LT-ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚¨ãƒ³ã‚¸ãƒ³ã‚’Goã§ä½œã‚‹" class="headerlink" title="LT: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚¨ãƒ³ã‚¸ãƒ³ã‚’Goã§ä½œã‚‹"></a>LT: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚¨ãƒ³ã‚¸ãƒ³ã‚’Goã§ä½œã‚‹</h1><p>è¾»ã§ã™ã€‚ã‚·ãƒ³ãƒ—ãƒ«ã§æ‰±ã„ã‚„ã™ã„ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚¨ãƒ³ã‚¸ãƒ³ã‚’ Go ã§ä½œã‚ŠãŸã„ã€ã¨æ€ã£ã¦å¹´æœ«å¹´å§‹ã®ä¼‘ã¿ã«å®Ÿè£…ã—ãŸãƒã‚¿ã§ LT ã•ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚</p><script async class="speakerdeck-embed" data-id="725c739447ab4f8d9372018ccfd52160" width="900" data-ratio="1.77777777777778" src="//speakerdeck.com/assets/embed.js"></script><p>ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚¨ãƒ³ã‚¸ãƒ³ã¯è¤‡æ•°å‡¦ç†ã‚’ä¸¦åˆ—ã«æ‰±ã†ã“ã¨ãŒå¤šã„ã§ã™ã€‚ Go ã ã¨ Goroutine ã®ã‚¹ãƒ¬ãƒƒãƒ‰ãƒ—ãƒ¼ãƒ«ã‚’ä½œã£ã¦ã€Goroutine ãŒç‹¬ç«‹ã—ã¦ä¸¦åˆ—ã«å‡¦ç†ã™ã‚‹ã‚ˆã†ãªå®Ÿè£…ãŒæ›¸ãã‚„ã™ãã€Go ã®è‰¯ã•ã‚’ã‚ã‚‰ãŸã‚ã¦ä½“æ„Ÿã§ãã¾ã—ãŸã€‚</p><p>ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚¨ãƒ³ã‚¸ãƒ³ã¯ OSS ã¨ã—ã¦ãŸãã•ã‚“ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãŒå…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ãŒã€æ±ç”¨çš„ã‹ã¤æŸ”è»Ÿã«æ§‹æˆã§ãã‚‹ä¸€æ–¹ã§è¨­å®šãŒè¤‡é›‘ã«ãªã‚ŠãŒã¡ã§ã™ã€‚ãƒ­ã‚¸ãƒƒã‚¯ã‚‚ Go ã§å®Ÿè£…ã§ãã¦ã€å®Ÿè¡Œé †åºã‚‚ãƒã‚¹ã‚¿ã§ç®¡ç†ã§ãã‚‹ã‚ˆã†ã«å®Ÿè£…ã—ã¾ã—ãŸã€‚<br>è¶£å‘³ã¨ã—ã¦å§‹ã‚ãŸ PoC ã®å®Ÿè£…ã§ã™ãŒã€æ¥­å‹™ã§ä½¿ãˆã‚‹ã‚ˆã†ãªãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã«ä»•ä¸Šã’ã¦ã„ããŸã„ãªã¨æ€ã£ã¦ã„ã¾ã™ã€‚</p><h1 id="LT-Goã§å·¥å ´ã‚’åˆ¶å¾¡ã™ã‚‹è¦ã§ã‚ã‚‹PLCã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹"><a href="#LT-Goã§å·¥å ´ã‚’åˆ¶å¾¡ã™ã‚‹è¦ã§ã‚ã‚‹PLCã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹" class="headerlink" title="LT: Goã§å·¥å ´ã‚’åˆ¶å¾¡ã™ã‚‹è¦ã§ã‚ã‚‹PLCã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹"></a>LT: Goã§å·¥å ´ã‚’åˆ¶å¾¡ã™ã‚‹è¦ã§ã‚ã‚‹PLCã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹</h1><p>çœŸé‡ã§ã™ã€‚æ¥­å‹™æ´»ç”¨ã—ã¦ã„ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’OSSã¨ã—ã¦å…¬é–‹ã—ãŸã®ã§ã€ãã®ãƒã‚¿ã§LTã‚’ã•ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚</p><script async class="speakerdeck-embed" data-id="31901c3f2d144c189faee547f8cbe541" width="900" data-ratio="1.77777777777778" src="//speakerdeck.com/assets/embed.js"></script><p>ã“ã®PLCã¨ã®ä»˜ãåˆã„ã¯ã“ã“2,3å¹´ãã‚‰ã„ã‚ã‚Šã€è‰²ã€…ãƒŠãƒ¬ãƒƒã‚¸ãŒæºœã¾ã£ã¦ã„ã‚‹ã¨ã“ã‚ã§ã™ã€‚å½“åˆã¯å„ç¨®ç”¨èªã«æ…£ã‚Œãšã€ã¨ã„ã†ã‹ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ãŒãŸãã•ã‚“ã‚ã‚Šã©ã‚Œã‚’èª­ã‚€ã¹ãã‹ã‚‚åˆ†ã‹ã‚‰ãšå››è‹¦å…«è‹¦ã—ã¾ã—ãŸãŒã€è€ƒãˆæ–¹ã«ã‚‚æ…£ã‚Œã‚„ã‚ŠãŸã„ã“ã¨ãŒã‚¹ãƒ ãƒ¼ã‚ºã«å®Ÿç¾ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p><p>ä»Šå¾Œã¯ä¾‹ãˆã°100msã¨ã‹10msã¨ã‹PLCå´ã«è² è·ã‚’ãªã‚‹ã¹ãã‹ã‘ãªã„æƒ³å®šã§ã€ã‚‚ã£ã¨é«˜é »åº¦ã«ãƒ¬ã‚¸ã‚¹ã‚¿å€¤ã‚’ãƒŸãƒ©ãƒ¼ãƒªãƒ³ã‚°ã™ã‚‹æ‰‹æ³•ã‚’ç ”ç©¶ã—ãŸã‚Šã€å¯¾å¿œã™ã‚‹MCãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å¢—ã‚„ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><p>ä¸€æ–¹ã§MCãƒ—ãƒ­ãƒˆã‚³ãƒ«ä»¥å¤–ã«ã‚‚Modbus, OPC-UAãªã©ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚‚æœ‰åã§ã™ã€‚ã“ã¡ã‚‰ã‚‚ã‚ã¾ã‚Šä¸–ã«å‡ºã¦ã„ãªã„æƒ…å ±ãªã®ã§ã€ã©ã†ã«ã‹å®Ÿè£…ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚ï¼ˆå¯¾å¿œã—ã¦ã„ã‚‹æ©Ÿç¨®ã‚’èª¿é”ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§ã¾ãšã¯ãã“ã‹ã‚‰ã§ã™ãŒï¼‰</p><h1 id="Umeda-goæ¥½ã—ã‹ã£ãŸè©±"><a href="#Umeda-goæ¥½ã—ã‹ã£ãŸè©±" class="headerlink" title="Umeda.goæ¥½ã—ã‹ã£ãŸè©±"></a>Umeda.goæ¥½ã—ã‹ã£ãŸè©±</h1><p>Umeda.goã€è‰¯ã„ã§ã™ã­ã€‚ç™»å£‡å†…ç”¨ãŒåˆç´šè€…ï½ä¸­ç´šï½ä¸Šç´šã¾ã§æ§˜ã€…ã‚ã‚Šã€ã‚„ã£ã¦ã„ã‚‹å†…å®¹ã‚‚ç‰¹å¾´çš„ã§é¢ç™½ã‹ã£ãŸã§ã™ã€‚Gopheræ­´1æ—¥ç›®ã®æ–¹ã«ã‚‚ã¿ã‚“ãªå„ªã—ãæ¥ã—ã¦ã„ãŸã®ã§æœ¬å½“ã«è‰¯ã„ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã§ã—ãŸã€‚</p><p>ä»Šå›ã®ç™ºè¡¨å†…å®¹ã¯IoTã¨ã‹çµ„ã¿è¾¼ã¿é ˜åŸŸã®è©±ãŒå¤šãã€ã•ã™ãŒé–¢è¥¿ï¼è£½é€ æ¥­å¼·ã„ã‹ã‚‰ï¼Ÿã£ã¦æ€ã„ã¾ã—ãŸãŒã€ã‚¿ãƒã‚¿ãƒã ã£ãŸãã†ã§ã™ã€‚Webãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã€Webãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã€CLIãƒ„ãƒ¼ãƒ«ã€çµ„ã¿è¾¼ã¿ã€ãªã©å¤šãã®å†…å®¹ã«è§¦ã‚Œã‚‰ã‚Œã‚‹ã®ã¯Goãªã‚‰ã§ã¯ã§è‰¯ã„ã§ã™ã­ã€‚</p><p>ã¾ãŸã€æ‡‡è¦ªä¼šã¨ã„ã†åå‰ã§å…¨å“¡ã§è­°è«–ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã—ãŸãŒã€ã“ã‚Œã¯ã¨ã¦ã‚‚è‰¯ã‹ã£ãŸã§ã™ã€‚ã©ã†ã—ã¦ã‚‚å¤§äººæ•°ã®å‹‰å¼·ä¼šã ã¨ã€å‚åŠ ã—ã¦è©±ã‚’èã„ã¦ãŠã—ã¾ã„ã€ã¨ã„ã†ã“ã¨ã‚‚å¤šã„ã®ã§ã™ãŒã€å…¨å“¡ãŒã‚¹ãƒ”ãƒ¼ã‚«ãƒ¼ã¨ã„ã†ã‹ã€æ™®æ®µæ€ã£ã¦ã„ã‚‹ã“ã¨ã‚’å‡ºã—åˆã„ã€æ„è¦‹ã‚’äº¤æ›ã™ã‚‹ã¨ã„ã†ã€ŒãƒŸãƒ¼ãƒˆã‚¢ãƒƒãƒ—ã—ã¦ã„ã‚‹ãã€ã¨ã„ã†ä½“æ„ŸãŒå¾—ã‚‰ã‚Œã¾ã—ãŸã€‚ã“ã‚Œã¯æ±äº¬ã§ä»Šå¾Œé–‹å‚¬ã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã«ã‚‚å–ã‚Šå…¥ã‚ŒãŸã„å†…å®¹ã§ã—ãŸã€‚</p><hr><p>é–¢é€£è¨˜äº‹ï¼š</p><ul><li><a href="https://future-architect.github.io/articles/20191211/">golang.tokyoã§ç™ºè¡¨ã—ã¦ãã¾ã—ãŸ</a></li><li><a href="https://future-architect.github.io/articles/20191120/">Go Conference 2019 Autumn ã«ç™»å£‡ã—ã¾ã—ãŸ</a></li><li><a href="https://future-architect.github.io/articles/20190713/">Goã‚’å­¦ã¶ã¨ãã«ã¤ã¾ãšãã‚„ã™ã„ãƒã‚¤ãƒ³ãƒˆFAQ</a></li><li><a href="https://future-architect.github.io/articles/20191111/">Go Cloud#1 æ¦‚è¦ã¨Blobã¸ã®æ´»ç”¨æ–¹æ³•</a></li><li><a href="https://future-architect.github.io/articles/20190814/">WAFã¨ã—ã¦ go-swagger ã‚’é¸æŠã—ã¦ã¿ãŸ</a></li></ul><div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none; padding-left: 0;"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">1.</span><span style="display: inline-block; vertical-align: top;">Technology Innovation Groupã®ç•¥ã§ã€ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®ä¸­ã§ã‚‚ç‰¹ã«ITæŠ€è¡“ã«ç‰¹åŒ–ã—ãŸéƒ¨éšŠã§ã™ã€‚ãã®ä¸­ã§ã‚‚DXãƒãƒ¼ãƒ ã¯ç‰¹ã«ãƒ‡ã‚¸ã‚¿ãƒ«ãƒˆãƒ©ãƒ³ã‚¹ãƒ•ã‚©ãƒ¼ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã«é–¢ã‚ã‚‹ä»•äº‹ã‚’æ¨é€²ã—ã¦ã„ããƒãƒ¼ãƒ ã§ã™ã€‚ â†©</span><a href="#fnref:1" rev="footnote"> â†©</a></li></ol></div></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h1&gt;&lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€‚TIG DXãƒ¦ãƒ‹ãƒƒãƒˆ&lt;sup id=&quot;fnref:1&quot;&gt;&lt;a href=&quot;#fn:1&quot; rel=&quot;footnot
      
    
    </summary>
    
      <category term="Programming" scheme="https://future-architect.github.io/categories/Programming/"/>
    
    
      <category term="Go" scheme="https://future-architect.github.io/tags/Go/"/>
    
      <category term="ç™»å£‡è³‡æ–™" scheme="https://future-architect.github.io/tags/%E7%99%BB%E5%A3%87%E8%B3%87%E6%96%99/"/>
    
  </entry>
  
  <entry>
    <title>Auth0 Emailã¾ãŸã¯SMSã‚’ä½¿ã£ãŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ¬ã‚¹èªè¨¼ã‚’è¨­å®šã™ã‚‹</title>
    <link href="https://future-architect.github.io/articles/20200123/"/>
    <id>https://future-architect.github.io/articles/20200123/</id>
    <published>2020-01-23T02:02:12.000Z</published>
    <updated>2020-01-28T00:28:50.641Z</updated>
    
    <content type="html"><![CDATA[<p>Auth0ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ¬ã‚¹èªè¨¼ã‚’èª¬æ˜ã—ã¾ã™ã€‚è©²å½“ã®æ©Ÿèƒ½ã‚’ä½¿ã†ã“ã¨ã§ã€ãƒ¦ãƒ¼ã‚¶ãŒãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®å…¥åŠ›ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦èªè¨¼ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚ã‚¤ãƒ¡ãƒ¼ã‚¸ã¨ã—ã¦ã¯Slackã®Magic Linkã®ã‚ˆã†ãªæŒ¯ã‚‹èˆã„ã§ã™ã€‚</p><h1 id="äº‹å‰æº–å‚™"><a href="#äº‹å‰æº–å‚™" class="headerlink" title="äº‹å‰æº–å‚™"></a>äº‹å‰æº–å‚™</h1><p>Auth0ãŒæä¾›ã™ã‚‹Vue.jsã®ã‚µãƒ³ãƒ—ãƒ«å®Ÿè£…ã‚’ãƒ™ãƒ¼ã‚¹ã«èª¬æ˜ã—ã¾ã™ã€‚æ‰‹å…ƒã§å‹•ä½œç¢ºèªã‚’ã™ã‚‹å ´åˆã¯ã€ä¸‹è¨˜ã‚’äº‹å‰ã«cloneã—ã¦ãã ã•ã„ã€‚ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã«ã‚ã‚‹<code>01-Login</code>ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ã„ã¾ã™ã€‚</p><p><a href="https://github.com/auth0-samples/auth0-vue-samples" target="_blank" rel="noopener">https://github.com/auth0-samples/auth0-vue-samples</a></p><p>äº‹å‰æº–å‚™ã«é–¢ã—ã¦ã¯ã€ä»¥å‰ã®<a href="https://future-architect.github.io/articles/20200122/">å¼Šç¤¾ å±±ç”°ã®è¨˜äº‹</a>ã§è©³ã—ãè§£èª¬ã—ã¦ãŠã‚Šã¾ã™ã®ã§ã€çœç•¥ã—ã¦è¨˜è¼‰ã‚’è¡Œã„ã¾ã™ã€‚</p><h2 id="Applicationã®ä½œæˆ"><a href="#Applicationã®ä½œæˆ" class="headerlink" title="Applicationã®ä½œæˆ"></a>Applicationã®ä½œæˆ</h2><p><code>CREATE APPLICATION</code>ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã€<code>Single Page Web Applications</code>ã‚’é¸æŠã—ã¦ä½œæˆã‚’ã—ã¾ã™ã€‚ä»Šå›ã¯æ¤œè¨¼ç”¨ã«Application Nameã‚’PasswordlessSPAã«ã—ã¾ã—ãŸã€‚ã“ã“ã¯ã©ã‚“ãªåå‰ã§ã‚‚OKã§ã™ã—ã€æ—¥æœ¬èªã§ã‚‚æ§‹ã„ã¾ã›ã‚“ã€‚</p><p>ã¾ãŸã€æ›¸ãã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯å…¨ã¦<code>http://localhost:3000</code>ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚</p><ul><li>Allowed Callback URLs</li><li>Allowed Web Origins</li><li>Allowed Logout URLs</li></ul><p>ç‰¹ã«å¿˜ã‚ŒãŒã¡ãªã®ãŒ<code>Allowed Web Origins</code>ã§ã€ã“ã‚ŒãŒç©ºç™½ã ã¨ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒ<a href="https://auth0.com/docs/api-auth/tutorials/silent-authentication" target="_blank" rel="noopener">Silent Authentication</a>ã«å¤±æ•—ã—ã¾ã™ã€‚ã“ã‚Œã«é–¢ã—ã¦ã¯è£œè¶³ã¨ã—ã¦å¾Œè¿°ã‚’ã—ã¾ã™ã€‚</p><img src="/images/20200123/photo_20200123_01.png" style="border:solid 1px #000000"><h2 id="ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨­å®š"><a href="#ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨­å®š" class="headerlink" title="ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨­å®š"></a>ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨­å®š</h2><p><code>auth_config.json.example</code>ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€åŒãƒ•ã‚©ãƒ«ãƒ€ã«<code>auth_config.json</code>ã‚’ä½œæˆã—ã¾ã™ã€‚<code>domain</code>ã¨<code>clientId</code>ã¯ä¸Šè¨˜ã§ä½œæˆã—ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å€¤ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"domain"</span>: <span class="string">"my-tenant-name.au.auth0.com"</span>,</span><br><span class="line">  <span class="attr">"clientId"</span>: <span class="string">"abcdefg"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ãƒ­ãƒ¼ã‚«ãƒ«ã§ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•ã—ã€ãƒ–ãƒ©ã‚¦ã‚¶ã§<code>localhost:3000</code>ã¸ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚å³ä¸Šã«è¡¨ç¤ºã•ã‚Œã‚‹Loginã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã€Auth0ã®ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ãŒå‡ºã‚Œã°OKã§ã™ã€‚</p><img src="/images/20200123/s1.png" class="img-small-size"><h1 id="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ¬ã‚¹èªè¨¼ã®è¨­å®š-Emailç·¨"><a href="#ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ¬ã‚¹èªè¨¼ã®è¨­å®š-Emailç·¨" class="headerlink" title="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ¬ã‚¹èªè¨¼ã®è¨­å®š - Emailç·¨"></a>ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ¬ã‚¹èªè¨¼ã®è¨­å®š - Emailç·¨</h1><p>ã“ã“ã‹ã‚‰ãŒæœ¬é¡Œã§ã™ã€‚ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ¬ã‚¹èªè¨¼ã®è¨­å®šã‚’è¡Œã„ã¾ã™ã€‚<br>Auth0ã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’é–‹ãã€Connectionsâ†’Passwordlessã‚’é¸æŠã—ã¾ã™ã€‚</p><p>SMSã¨Emailã®ä¸¡æ–¹ãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚å¾Œã»ã©SMSã‚‚è§£èª¬ã—ã¾ã™ã®ã§ã€ã¾ãšã¯Emailã®æ–¹ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ã—ã¦ã¿ã¦ãã ã•ã„ã€‚</p><img src="/images/20200123/photo_20200123_02.png" style="border:solid 1px #000000"><p>ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãŒé–‹ãã®ã§<code>SAVE</code>ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚</p><img src="/images/20200123/photo_20200123_03.png"><p>Emailã®Passwordlessèªè¨¼ãŒæœ‰åŠ¹ã«ãªã£ãŸã®ã§ã€PasswordlessSPAã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®šã‹ã‚‰Connectionsã‚¿ãƒ–ã‚’é¸æŠã—ã€æœ‰åŠ¹åŒ–ã‚’å®Ÿæ–½ã—ã¾ã™ã€‚</p><img src="/images/20200123/photo_20200123_04.png" style="border:solid 1px #000000"><p>Universal Loginã‚’å¤‰æ›´ã—ã¾ã™ã€‚</p><ul><li>Universal Login â†’ Loginã‚¿ãƒ–</li><li>Customize Login Pageã‚’ONã«ã™ã‚‹</li><li>ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³ã‹ã‚‰Lock(passwordless)ã‚’é¸æŠã™ã‚‹</li></ul><img src="/images/20200123/s2.png" style="border:solid 1px #000000"><p>ä»Šå›ã¯ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚Œã°èªè¨¼å¯èƒ½ã«ã—ãŸã„ãŸã‚ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä¿®æ­£ã—ã¾ã™ã€‚ã¨ã„ã£ã¦ã‚‚1è¡Œã ã‘è¿½åŠ ã§OKã§ã™ã€‚<code>Auth0LockPasswordless</code>ã‚’åˆæœŸåŒ–ã—ã¦ã„ã‚‹å‡¦ç†ã®å¼•æ•°ã«1è¡Œã‚’è¿½åŠ ã—ã¾ã™ã€‚ã“ã‚Œã§æº–å‚™OKã§ã™ã€‚</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">      assetsUrl:  config.assetsUrl,</span><br><span class="line">      allowedConnections: connection ? [connection] : null,</span><br><span class="line"><span class="addition">+     passwordlessMethod: 'link',</span></span><br><span class="line">      rememberLastLogin: !prompt,</span><br></pre></td></tr></table></figure><h1 id="Passwordlessèªè¨¼ã‚’å‹•ã‹ã—ã¦ã¿ã‚‹"><a href="#Passwordlessèªè¨¼ã‚’å‹•ã‹ã—ã¦ã¿ã‚‹" class="headerlink" title="Passwordlessèªè¨¼ã‚’å‹•ã‹ã—ã¦ã¿ã‚‹"></a>Passwordlessèªè¨¼ã‚’å‹•ã‹ã—ã¦ã¿ã‚‹</h1><p><code>localhost:3000</code>ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã¿ã¾ã™ã€‚Auth0ãŒãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã—ã¦ã„ã‚‹ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã¸é·ç§»ã—ã¾ã™ã€‚</p><img src="/images/20200123/s3.png" class="img-small-size" style="border:solid 1px #000000"><p>ãƒªãƒ³ã‚¯ä»˜ãEmailãŒé€ä¿¡ã•ã‚Œã‚‹ã‹ç¢ºèªã—ã¦ã¿ã¾ã™ã€‚ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦SUBMITã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚</p><img src="/images/20200123/s4.png" class="img-small-size"><p>ãƒ¡ãƒ¼ãƒ«ãŒå±Šã„ã¦ã„ã¾ã—ãŸã€‚ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã®å ´åˆã€URLã®æœ‰åŠ¹æœŸé™ãŒ180ç§’ã‚’çµŒéã™ã‚‹ã¨åˆ‡ã‚Œã‚‹ã®ã§æ³¨æ„ã§ã™ã€‚</p><img src="/images/20200123/s5.png" class="img-small-size"><p>ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§åˆå›ãƒ­ã‚°ã‚¤ãƒ³ã®å ´åˆã¯ã€åŒæ„ç”»é¢(Consent Dialog)ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚localhostã§èµ·å‹•ã™ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å ´åˆã¯ã€åˆå›ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã«å¿…ãšè¡¨ç¤ºãŒã•ã‚Œã¾ã™ã€‚ã“ã‚Œã¯Auth0ã®ä»•æ§˜ã§ã™ã€‚Acceptã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦é€²ã‚ã¾ã™ã€‚</p><img src="/images/20200123/s6.png" class="img-small-size"><p><code>localhost:3000</code>ã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã‚Œã€ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ã§ã‚ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚ç§ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒgravatorã‚’è¨­å®šã—ã¦ã„ãªã„ã®ã§ã‚ã‹ã‚Šã«ãã„ã§ã™ãŒã€ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦Emailã‚’å–å¾—ã§ãã¦ã„ã¾ã™ã€‚</p><img src="/images/20200123/photo_20200123_05.png" class="img-middle-size" style="border:solid 1px #000000"><h1 id="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ¬ã‚¹èªè¨¼ã®è¨­å®š-SMSç·¨"><a href="#ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ¬ã‚¹èªè¨¼ã®è¨­å®š-SMSç·¨" class="headerlink" title="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ¬ã‚¹èªè¨¼ã®è¨­å®š - SMSç·¨"></a>ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ¬ã‚¹èªè¨¼ã®è¨­å®š - SMSç·¨</h1><p>SMSã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ¬ã‚¹èªè¨¼ã‚’å‹•ã‹ã—ã¦ã¿ã¾ã™ã€‚SMSã®å ´åˆã¯ãƒªãƒ³ã‚¯ã®ãƒ­ã‚°ã‚¤ãƒ³ãŒä½¿ãˆãªã„ãŸã‚ã€æ®‹å¿µãŒã‚‰Magic Linkã®æŒ¯ã‚‹èˆã„ã¯å®Ÿç¾ã§ãã¾ã›ã‚“ã€‚ä»£ã‚ã‚Šã«æ¤œè¨¼ã‚³ãƒ¼ãƒ‰ã‚’SMSã§ã‚¹ãƒãƒ›ã¸é€ä¿¡ã™ã‚‹ã‚¿ã‚¤ãƒ—ã®èªè¨¼ã‚’è¨­å®šã—ã¾ã™ã€‚</p><p>SMSã¯Twilioã‚’ä½¿ã†å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€äº‹å‰ã«Twilioã¸ç™»éŒ²ã‚’æ¸ˆã¾ã›ã¦ãŠãã€ä»¥ä¸‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ãŠãã¾ã™ã€‚</p><ul><li>Account SID</li><li>Auth Token</li><li>é›»è©±ç•ªå·<ul><li>Twilioã¯ç„¡æ–™ãƒ—ãƒ©ãƒ³ã§ä½¿ã†ãŸã‚ã€Trial Numberã‚’ä½¿ã„ã¾ã™</li></ul></li></ul><img src="/images/20200123/photo_20200123_06.png" style="border:solid 1px #000000"><p>Auth0 Dashboardã¸æˆ»ã‚Šã¾ã™ã€‚Emailã¨åŒæ§˜ã«Connectionsâ†’Passwordlessã‚’é¸æŠã—ã¦ã€SMSã‚’ONã«ã—ã¾ã™ã€‚</p><img src="/images/20200123/photo_20200123_07.png" style="border:solid 1px #000000"><p>Twilioã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å…¥åŠ›ã™ã‚‹é …ç›®ãŒã‚ã‚‹ã®ã§è¨­å®šã—ã¾ã™ã€‚å…¥åŠ›å¾Œã«SAVEã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚</p><img src="/images/20200123/photo_20200123_08.png" class="img-middle-size" style="border:solid 1px #000000"><p>PasswordlessSPAã®è¨­å®šç”»é¢ã¸æˆ»ã‚Šã€Connectionsã‹ã‚‰Passwordless SMSã‚’ONã«ã—ã¾ã™ã€‚</p><img src="/images/20200123/photo_20200123_09.png" class="img-middle-size" style="border:solid 1px #000000"><p>Universal Loginã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä¿®æ­£ã—ã¾ã™ã€‚allowedConnectionsã¨passwordlessMethodã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä¿®æ­£ã—ã¾ã™ã€‚ã“ã‚Œã§SMSèªè¨¼ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">      assetsUrl:  config.assetsUrl,</span><br><span class="line"><span class="deletion">-     allowedConnections: connection ? [connection] : null,</span></span><br><span class="line"><span class="deletion">-     passwordlessMethod: 'link',</span></span><br><span class="line"><span class="addition">+     allowedConnections: ['sms'],</span></span><br><span class="line"><span class="addition">+     passwordlessMethod: 'code',</span></span><br><span class="line">      rememberLastLogin: !prompt,</span><br></pre></td></tr></table></figure><p>localhost:3000ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã®å ´åˆã¯ä¸€åº¦ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¦ã‹ã‚‰ã€åŒã˜æ“ä½œã‚’ã—ã¦ãã ã•ã„ã€‚</p><p>ç„¡äº‹ã«é›»è©±ç•ªå·å…¥åŠ›ã®ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚Œã°æˆåŠŸã§ã™ã€‚è©¦ã—ã«æºå¸¯é›»è©±ç•ªå·ã‚’å…¥åŠ›ã—ã¦SUBMITã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚</p><img src="/images/20200123/photo_20200123_10.png" class="img-small-size"><p>æ¤œè¨¼ã‚³ãƒ¼ãƒ‰å…¥åŠ›ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã¾ã—ãŸã€‚æ¤œè¨¼ã‚³ãƒ¼ãƒ‰ã¯SMSã§ã‚¹ãƒãƒ›ã¸å±Šãã¾ã™ã€‚è©¦ã—ã«è‡ªèº«ã®ã‚¹ãƒãƒ›ã«é€ä¿¡ã‚’ã—ã¾ã—ãŸãŒã€ä¸Šæ‰‹ãå±Šãã¾ã—ãŸã€‚</p><img src="/images/20200123/photo_20200123_11.png" class="img-small-size"><img src="/images/20200123/photo_20200123_12.jpg" class="img-small-size"><p>ã“ã®6æ¡ã®æ¤œè¨¼ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã™ã‚‹ã¨ãƒ­ã‚°ã‚¤ãƒ³ãŒã§ãã¾ã™ã€‚åˆå›ãƒ­ã‚°ã‚¤ãƒ³ã¨ãªã‚‹ãŸã‚ã€é›»è©±ç•ªå·ã§ãƒ¦ãƒ¼ã‚¶ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒä½œæˆã•ã‚Œã¾ã™ã€‚</p><img src="/images/20200123/photo_20200123_13.png" style="border:solid 1px #000000"><h1 id="è£œè¶³-Silent-Authentication"><a href="#è£œè¶³-Silent-Authentication" class="headerlink" title="è£œè¶³ - Silent Authentication"></a>è£œè¶³ - Silent Authentication</h1><p>ãƒ­ã‚°ã‚¤ãƒ³ã—ãŸå¾Œã€åŒã˜ãƒ–ãƒ©ã‚¦ã‚¶ã§å†ã³<code>localhost:3000</code>ã¸ã‚¢ã‚¯ã‚»ã‚¹ã‚’ã™ã‚‹ã¨ã€è‡ªå‹•çš„ã«ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã«ãªã‚‹ã®ãŒã‚ã‹ã‚‹ã¨æ€ã„ã¾ã™ã€‚ã“ã‚Œã¯ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒVueã®å®Ÿè¡Œæ™‚ã«ã€Silent Authenticationã¨ã„ã†ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¡Œã£ã¦å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚</p><p>Auth0ãŒãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹èªè¨¼ç”»é¢ã¯ã‚»ãƒƒã‚·ãƒ§ãƒ³æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚åŒã˜ãƒ–ãƒ©ã‚¦ã‚¶ã§åŒä¸€ãƒ†ãƒŠãƒ³ãƒˆèªè¨¼ç”»é¢ã¸ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹å ´åˆã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒæ®‹ã£ã¦ã„ã‚Œã°èªè¨¼ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã™ã€‚ï¼ˆã‚»ãƒƒã‚·ãƒ§ãƒ³ã®æœ‰åŠ¹æœŸé–“ã¯å¤‰æ›´ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ï¼‰</p><p>ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯å®Ÿè¡Œã¨åŒæ™‚ã«ã€Auth0å´ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒæ®‹ã£ã¦ã„ã‚‹ã‹ç¢ºèªã‚’å®Ÿæ–½ã—ã¾ã™ã€‚ãƒ†ãƒŠãƒ³ãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã¯Silent Authenticationã¨ã„ã†æ–¹æ³•ã‚’åˆ©ç”¨ã—ã¦å®Ÿæ–½ã—ã¾ã™ã€‚</p><p>èˆˆå‘³ã®ã‚ã‚‹æ–¹ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¸ã®ãƒªãƒ³ã‚¯ã‚’æ›¸ã„ã¦ãŠãã¾ã™ã®ã§ã€èª­ã‚“ã§ã¿ã¦ãã ã•ã„ã€‚ä¸å¯§ã«æ›¸ã‹ã‚Œã¦ã„ã¦ã‚ã‹ã‚Šã‚„ã™ã„ã§ã™ã€‚</p><ul><li><a href="https://auth0.com/docs/sessions/concepts/session-lifetime" target="_blank" rel="noopener">Session Lifetime</a></li><li><a href="https://auth0.com/docs/api-auth/tutorials/silent-authentication" target="_blank" rel="noopener">Set Up Silent Authentication</a></li></ul><h1 id="çµ‚ã‚ã‚Šã«"><a href="#çµ‚ã‚ã‚Šã«" class="headerlink" title="çµ‚ã‚ã‚Šã«"></a>çµ‚ã‚ã‚Šã«</h1><p>Auth0ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ¬ã‚¹èªè¨¼ã‚’å®Ÿéš›ã«è©¦ã—ã¦ã¿ã¾ã—ãŸã€‚Auth0ã‚’ä½¿ãˆã°å®¹æ˜“ã«Magic Linkã®ã‚ˆã†ãªæŒ¯ã‚‹èˆã„ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚Linkã§ãªãã¦ã‚‚ã€ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ã®ã‚¹ãƒãƒ›ã«SMSãªã„ã—Emailã§æ¤œè¨¼ã‚³ãƒ¼ãƒ‰ã‚’é€ä¿¡ã—ã¦ã€ãã‚Œã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«èªè¨¼ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚</p><p>ä¾‹ãˆã°ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºã®åˆ†é‡ã§ã¯ã€äººãŒã‚ˆãå…¥ã‚Œæ›¿ã‚ã‚‹é ˜åŸŸã®èªè¨¼ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«ã—ãŸã„ã¨ã„ã†è¦æœ›ãŒã‚ã‚Šã¾ã™ã€‚Auth0ã®æä¾›ã™ã‚‹ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ¬ã‚¹èªè¨¼ã¯ã€ãã†ã„ã£ãŸã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã¸ã¨ã¦ã‚‚åˆã†æ©Ÿèƒ½ã ã¨æ€ã„ã¾ã™ã€‚</p><p>é–¢é€£è¨˜äº‹ï¼š</p><ul><li><a href="/articles/20200122/">Auth0 å°å…¥ç·¨</a></li><li><a href="/articles/20200128/">Auth0ã®Rulesã‚’ä½¿ã£ã¦èªè¨¼èªå¯ã‚’è‡ªåœ¨ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹</a></li><li><a href="/articles/20190612/">TypeScriptæ•™è‚²ç”¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å…¬é–‹ã®ãŠçŸ¥ã‚‰ã›</a></li><li><a href="/articles/20191009/">AWS Session Managerã§ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’åˆ‡æ–­ã•ã‚Œã«ããã™ã‚‹æ–¹æ³•</a></li><li><a href="/articles/20191029/">ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã‚’2å¹´åŠç¶šã‘ã¦ãƒãƒã£ãŸã“ã¨ã‹ã‚‰å¾—ãŸæ•™è¨“3ã¤</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Auth0ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ¬ã‚¹èªè¨¼ã‚’èª¬æ˜ã—ã¾ã™ã€‚è©²å½“ã®æ©Ÿèƒ½ã‚’ä½¿ã†ã“ã¨ã§ã€ãƒ¦ãƒ¼ã‚¶ãŒãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®å…¥åŠ›ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦èªè¨¼ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚ã‚¤ãƒ¡ãƒ¼ã‚¸ã¨ã—ã¦ã¯Slackã®Magic Linkã®ã‚ˆã†ãªæŒ¯ã‚‹èˆã„ã§ã™ã€‚&lt;/p&gt;
&lt;h1 id=&quot;äº‹å‰æº–å‚™&quot;&gt;&lt;a href=&quot;#äº‹å‰æº–å‚™&quot; c
      
    
    </summary>
    
      <category term="èªè¨¼èªå¯" scheme="https://future-architect.github.io/categories/%E8%AA%8D%E8%A8%BC%E8%AA%8D%E5%8F%AF/"/>
    
    
      <category term="Auth0" scheme="https://future-architect.github.io/tags/Auth0/"/>
    
      <category term="Vue.js" scheme="https://future-architect.github.io/tags/Vue-js/"/>
    
  </entry>
  
  <entry>
    <title>Auth0 å°å…¥ç·¨</title>
    <link href="https://future-architect.github.io/articles/20200122/"/>
    <id>https://future-architect.github.io/articles/20200122/</id>
    <published>2020-01-22T01:31:27.000Z</published>
    <updated>2020-01-28T00:28:40.045Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å§‹ã‚ã«"><a href="#å§‹ã‚ã«" class="headerlink" title="å§‹ã‚ã«"></a>å§‹ã‚ã«</h1><p>æ§˜ã€…ãªã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã™ã‚‹ä¸­ã§å¿…ãšç™ºç”Ÿã™ã‚‹è¦ç´ <br><strong>ãƒ­ã‚°ã‚¤ãƒ³</strong></p><p>ãã®ãƒ­ã‚°ã‚¤ãƒ³ã‚’æ”¯ãˆã‚‹æŠ€è¡“è¦ç´ <br><strong>èªè¨¼ãƒ»èªå¯</strong></p><p>ã—ã‹ã—ã€èªè¨¼èªå¯ã®å£ã¯ç„¡é§„ã«é«˜ãã€èª¿ã¹å§‹ã‚ã‚‹ã¨ã¾ãšã¯æ•°ã€…ã®å°‚é–€ç”¨èªã«é˜»ã¾ã‚Œ<br><strong>BASICèªè¨¼ãƒ»OAtuhãƒ»OpenIDãƒ»Jwtãƒ»Jwkãƒ»Jweâ€¦</strong></p><p>æ¬¡ã«ã€èªè¨¼Flowã«é˜»ã¾ã‚Œã¾ã™ã€‚<br><strong>Implicit Flowã€Client Credentials Flowâ€¦etc</strong></p><p>ã“ã‚Œã‚‰ã‚’æ¯”è¼ƒçš„å®¹æ˜“ã«å®Ÿè£…ã™ã‚‹ã€Auth0ã‚’ç´¹ä»‹ã—ã¦ã„ãã¾ã™ã€‚</p><h1 id="ãªãœä»Šå›ã®é€£è¼‰ãŒAuth0ãªã®ã‹ï¼Ÿ"><a href="#ãªãœä»Šå›ã®é€£è¼‰ãŒAuth0ãªã®ã‹ï¼Ÿ" class="headerlink" title="ãªãœä»Šå›ã®é€£è¼‰ãŒAuth0ãªã®ã‹ï¼Ÿ"></a>ãªãœä»Šå›ã®é€£è¼‰ãŒAuth0ãªã®ã‹ï¼Ÿ</h1><p>ç¤¾å†…ã§ä»¥ä¸‹ã®è¦ä»¶ã‚’æŒã¤æ¡ˆä»¶ãŒè¤‡æ•°ã‚ã‚Šã€çµæœã¨ã—ã¦ãã‚Œãã‚Œã§Auth0ã‚’æ¡ç”¨ãƒ»çŸ¥è¦‹ãŒæºœã¾ã£ãŸãŸã‚ã€é€£è¼‰ã¨ã„ã†å½¢ã‚’ã¨ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚</p><ul><li>OIDC(OpenIdConnect)æº–æ‹ ã®è¦ä»¶</li><li>Google/Facebookãªã©ã®ã‚½ãƒ¼ã‚·ãƒ£ãƒ«é€£æºã®è¦ä»¶</li><li>é–‹ç™ºã®æœŸé–“ãŒçŸ­ã„</li><li>ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹è²»ç”¨ã¯æŠ‘ãˆãŸã„</li></ul><h1 id="èªè¨¼èªå¯ã®å®Ÿç¾æ–¹å¼ã¨Auth0ã®ç«‹ã¡ä½ç½®"><a href="#èªè¨¼èªå¯ã®å®Ÿç¾æ–¹å¼ã¨Auth0ã®ç«‹ã¡ä½ç½®" class="headerlink" title="èªè¨¼èªå¯ã®å®Ÿç¾æ–¹å¼ã¨Auth0ã®ç«‹ã¡ä½ç½®"></a>èªè¨¼èªå¯ã®å®Ÿç¾æ–¹å¼ã¨Auth0ã®ç«‹ã¡ä½ç½®</h1><p>å®Ÿç¾æ–¹æ³•ã¯å¤§ãããƒ»ãƒ•ãƒ«ã‚¹ã‚¯ãƒ©ãƒƒãƒã€OSSã€SaaSãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ãŒã€Auth0ã¯SaaSã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã¨ãªã‚Šã¾ã™ã€‚<br>å›³ä¸­ã«ã¯ä»£è¡¨çš„ãªãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚’æ²è¼‰ã—ã¦ã„ã¾ã™ã€‚<br>å€‹åˆ¥ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®è©³ç´°ã¯ä»Šå›å‰²æ„›ã„ãŸã—ã¾ã™ã€‚</p><ul><li>æ–¹å¼ã®ç‰¹å¾´</li></ul><table><thead><tr><th align="center">ç‰¹å¾´</th><th align="center">ã‚¹ã‚¯ãƒ©ãƒƒãƒ</th><th align="center">OSS</th><th align="center">SaaS</th></tr></thead><tbody><tr><td align="center">æ©Ÿèƒ½</td><td align="center">ã™ã¹ã¦è‡ªåˆ†ã§è¨­è¨ˆå¯èƒ½</td><td align="center">OSSä¾å­˜</td><td align="center">SaaSä¾å­˜</td></tr><tr><td align="center">ãƒ‡ãƒ¼ã‚¿</td><td align="center">è‡ªç’°å¢ƒå†…ã«ä¿æŒå¯èƒ½</td><td align="center">â†’</td><td align="center">SaaSåŸºç›¤ã«ä¸€éƒ¨ã‹ã‚‰ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹</td></tr><tr><td align="center">éæ©Ÿèƒ½</td><td align="center">ã™ã¹ã¦ã®è¦ä»¶ã«å¿œã˜ã‚‹ã“ã¨ãŒå¯èƒ½</td><td align="center">â†’</td><td align="center">SaaSåŸºç›¤ã«ä¾å­˜(â€»)</td></tr><tr><td align="center">é‹ç”¨ãƒ»ä¿å®ˆ</td><td align="center">éšœå®³ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾å¿œã‚’è‡ªãƒãƒ¼ãƒ ã§å¯¾å¿œã™ã‚‹å¿…è¦ãŒã‚ã‚‹</td><td align="center">â†’</td><td align="center">SaaSã®ä¿è¨¼ç¯„å›²å†…ã§ã‚ã‚Œã°ã€éšœå®³å¯¾å¿œãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾å¿œãŒè‡ªå‹•ã§è¡Œã‚ã‚Œã‚‹</td></tr><tr><td align="center">â€»SaaSã«ã‚ˆã£ã¦ã¯å€‹åˆ¥ç’°å¢ƒã‚’å»ºã¦ã‚‹ã“ã¨ãŒå¯èƒ½ãªå ´åˆã‚‚ã‚ã‚Šã€ã“ã®å ´åˆã¯ã™ã¹ã¦ã®è¦ä»¶ã«å¿œã˜ã‚‹ã“ã¨ãŒå¯èƒ½</td><td align="center"></td><td align="center"></td><td align="center"></td></tr></tbody></table><img src="/images/20200122/1.png" style="border:solid 1px #000000"><h1 id="Auth0ã§å®Ÿç¾ã§ãã‚‹äº‹ï¼ˆæ©Ÿèƒ½ç›®æ¬¡ãƒ¬ãƒ™ãƒ«"><a href="#Auth0ã§å®Ÿç¾ã§ãã‚‹äº‹ï¼ˆæ©Ÿèƒ½ç›®æ¬¡ãƒ¬ãƒ™ãƒ«" class="headerlink" title="Auth0ã§å®Ÿç¾ã§ãã‚‹äº‹ï¼ˆæ©Ÿèƒ½ç›®æ¬¡ãƒ¬ãƒ™ãƒ«"></a>Auth0ã§å®Ÿç¾ã§ãã‚‹äº‹ï¼ˆæ©Ÿèƒ½ç›®æ¬¡ãƒ¬ãƒ™ãƒ«</h1><h2 id="æ©Ÿèƒ½è¦ç´„"><a href="#æ©Ÿèƒ½è¦ç´„" class="headerlink" title="æ©Ÿèƒ½è¦ç´„"></a>æ©Ÿèƒ½è¦ç´„</h2><p>è©³ç´°ã¯ã€ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ãŒã€è¦ç´„ã™ã‚‹ã¨ã“ã‚“ãªå½¢ã«ãªã‚Šã¾ã™ã€‚</p><ul><li>OIDC/OAuth2ã‚’åˆ©ç”¨ã—ãŸèªè¨¼ãƒ»èªå¯ãŒå¯èƒ½</li><li>ç”»é¢ã¯Auth0å´ã§è‡ªç”±ã«ä½œã‚Šè¾¼ã¿ãŒå¯èƒ½ï¼ˆã‚¢ãƒ—ãƒªå†…ã«ç”»é¢ã‚’è‡ªåˆ†ã§ä½œã‚Šè¾¼ã‚“ã§æŒã¤ã“ã¨ã‚‚å¯èƒ½ï¼‰</li><li>ã‚½ãƒ¼ã‚·ãƒ£ãƒ«é€£æºãŒå¯èƒ½ï¼ˆãƒœã‚¿ãƒ³ã‚’ã‚ªãƒ³ãƒ»ã‚ªãƒ•ã™ã‚‹ã¨ã€æ¨™æº–ç”»é¢ã«ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³ãŒå‡ºç¾ã—ã¾ã™ï¼‰</li><li>MFAãŒå¯èƒ½</li><li>ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãƒ»HOOKæ©Ÿèƒ½ã§ã€ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ãƒ»ã‚µã‚¤ãƒ³ã‚¤ãƒ³ç­‰ã€ç‰¹å®šã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã«lambdaçš„ãªãƒ­ã‚¸ãƒƒã‚¯ã®æŒŸã¿è¾¼ã‚€ã“ã¨ãŒå‡ºæ¥ã‚‹</li></ul><h2 id="ä½œã‚Šè¾¼ã¿ãŒç™ºç”Ÿã™ã‚‹è¦ç´ "><a href="#ä½œã‚Šè¾¼ã¿ãŒç™ºç”Ÿã™ã‚‹è¦ç´ " class="headerlink" title="ä½œã‚Šè¾¼ã¿ãŒç™ºç”Ÿã™ã‚‹è¦ç´ "></a>ä½œã‚Šè¾¼ã¿ãŒç™ºç”Ÿã™ã‚‹è¦ç´ </h2><p>Auth0ã¯èªè¨¼æƒ…å ±ï¼ˆãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼‰ä»¥å¤–ã®æƒ…å ±ã‚’Auth0å†…éƒ¨ã«æŒã¤ã“ã¨ã‚’æ¨å¥¨ã—ã¦ã„ãªã„ãŸã‚ã€å€‹äººæƒ…å ±ã®ç®¡ç†ã¯è‡ªåˆ†ã§æŒã¤ï¼ˆæ§‹ç¯‰ã™ã‚‹ï¼‰å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚<br>ãŠãã‚‰ãã“ã‚ŒãŒã€Auth0ã‚’åˆ©ç”¨ã™ã‚‹ä¸Šã§ã®æœ€ã‚‚å¤§ãã„ä½œã‚Šè¾¼ã¿è¦ç´ ã¨ãªã‚Šã¾ã™ã€‚</p><h2 id="Auth0ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼"><a href="#Auth0ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼" class="headerlink" title="Auth0ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼"></a>Auth0ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼</h2><p>â€»ã™ã„ã¾ã›ã‚“ã€ä»¥å‰è‡ªåˆ†ã§Qiitaã«ã¾ã¨ã‚ãŸã‚‚ã®ã‚’è»¢è¼‰ã—ã¦ã„ã¾ã™ã€‚</p><table><thead><tr><th>æ©Ÿèƒ½å</th><th>æ¦‚è¦</th></tr></thead><tbody><tr><td>tenant</td><td>auth0ä¸Šã§è¤‡æ•°ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’å±•é–‹ã—ãŸã„å ´åˆã«åˆ©ç”¨ã™ã‚‹æ©Ÿèƒ½<br>UserDB/Rule/Hooksãªã©ã®æ©Ÿèƒ½å…¨èˆ¬ã‚’åˆ†é›¢ã—ã¦æ‰±ã†ã“ã¨ãŒå¯èƒ½ã«ãªã‚‹</td></tr><tr><td>applications</td><td>èªè¨¼ã«ã¤ãªãã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å˜ä½ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®šç¾©ã™ã‚‹æ©Ÿèƒ½<br>èªè¨¼å¾Œã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ç”»é¢ãªã©ã‚’å€‹åˆ¥ã«å®šç¾©å¯èƒ½ã¨ãªã‚‹</td></tr><tr><td>APIs</td><td>èªè¨¼å¾Œã«èªå¯ã•ã›ã‚‹APIã®å®šç¾©æ©Ÿèƒ½</td></tr><tr><td>SSO</td><td>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–“ã§ãƒ­ã‚°ã‚¤ãƒ³ã‚’å…±æœ‰ã™ã‚‹æ©Ÿèƒ½</td></tr><tr><td>Connections-Database</td><td>èªè¨¼æƒ…å ±ãƒ»ãƒ¦ãƒ¼ã‚¶æƒ…å ±ã‚’ç®¡ç†</td></tr><tr><td>Connections-Social</td><td>ã‚½ãƒ¼ã‚·ãƒ£ãƒ«é€£æºæ©Ÿèƒ½<br>ãƒˆã‚°ãƒ«ãƒœã‚¿ãƒ³ã®ã‚ªãƒ³ã‚ªãƒ•ã§ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã«é€£æºãƒœã‚¿ãƒ³ãŒå‡ºã¦ãã‚‹</td></tr><tr><td>Connections-Enterprise</td><td>LDAP/AD/SAMLãªã©ã®ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºèªè¨¼é€£æºæ©Ÿèƒ½</td></tr><tr><td>Connections-Passwordless</td><td>SMSãƒ­ã‚°ã‚¤ãƒ³ã€ãƒ¡ãƒ¼ãƒ«ãƒ­ã‚°ã‚¤ãƒ³ãªã©ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ¬ã‚¹æ¥ç¶šã‚’è¨­å®šã™ã‚‹æ©Ÿèƒ½</td></tr><tr><td>Universal Login</td><td>Auth0ã®çµ„ã¿è¾¼ã¿ç”»é¢ï¼ˆãƒ­ã‚°ã‚¤ãƒ³/ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆ..etcï¼‰ã®ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’å¤‰æ›´ã§ãã‚‹æ©Ÿèƒ½</td></tr><tr><td>Rules</td><td>èªè¨¼ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã§ãã‚‹æ©Ÿèƒ½<br>ãƒ­ã‚°ã‚¤ãƒ³å¾Œã«ãƒ¦ãƒ¼ã‚¶å±æ€§è¿½åŠ ã™ã‚‹ãªã©ã€èªè¨¼å¾Œã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã‚‹</td></tr><tr><td>Hooks(BETA)</td><td>èªè¨¼ãƒ»ãƒ¦ãƒ¼ã‚¶ç™»éŒ²ãƒ»ãƒ¦ãƒ¼ã‚¶ç™»éŒ²å‰ã«ãƒ•ãƒƒã‚¯å‡¦ç†ã‚’è¿½åŠ ã§ãã‚‹æ©Ÿèƒ½</td></tr><tr><td>Multi-factor Authentication</td><td>å¤šè¦ç´ èªè¨¼ã‚’è¿½åŠ ã§ãã‚‹æ©Ÿèƒ½<br>ãƒ—ãƒƒã‚·ãƒ¥/ãƒ¯ãƒ³ã‚¿ã‚¤ãƒ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰/SMS/ãƒ¡ãƒ¼ãƒ«ãªã©ã§å®Ÿç¾å¯èƒ½</td></tr><tr><td>Emails</td><td>Auth0ã®çµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ãƒ¡ãƒ¼ãƒ«æ–‡ç« ã®å¤‰æ›´æ©Ÿèƒ½<br>ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒ¡ãƒ¼ãƒ«ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆã€ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ¤œè¨¼ãƒ¡ãƒ¼ãƒ«ãªã©ã®æ–‡ç« ã‚’å¤‰æ›´ã§ãã‚‹</td></tr><tr><td>Logs</td><td>loggingã®å®šç¾©æ©Ÿèƒ½</td></tr><tr><td>Anomaly Detection</td><td>ä¸æ­£ç™»éŒ²ãƒ»ã‚¢ã‚¯ã‚»ã‚¹ã‹ã‚‰ã®ä¿è­·æ©Ÿèƒ½<br>Brute-force Protection/Breached-password Detection</td></tr><tr><td>Extensions</td><td>ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼åˆ¶ã®ã‚¢ãƒ‰ã‚ªãƒ³ã‚’è¿½åŠ ã§ãã‚‹æ©Ÿèƒ½<br>githubãƒ»ãƒ¦ãƒ¼ã‚¶ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ/ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆç­‰ã¨ã®é€£æºãŒã§ãã‚‹<br>ã¤ãªã’ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã¨ã®å¥‘ç´„ã¯å€‹åˆ¥ã«å¿…è¦</td></tr><tr><td>custom domein</td><td>ç‹¬è‡ªã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è¨­å®šã§ãã‚‹æ©Ÿèƒ½<br>ãƒ‰ãƒ¡ã‚¤ãƒ³ã®å¥‘ç´„ã¯è‡ªåˆ†ã§ã‚„ã‚‹å¿…è¦ãŒã‚ã‚‹</td></tr></tbody></table><h1 id="Exampleã‚’å‹•ã‹ã™ã¾ã§ã®how-to"><a href="#Exampleã‚’å‹•ã‹ã™ã¾ã§ã®how-to" class="headerlink" title="Exampleã‚’å‹•ã‹ã™ã¾ã§ã®how-to"></a>Exampleã‚’å‹•ã‹ã™ã¾ã§ã®how-to</h1><p>ãªã«ã¯ã¨ã‚‚ã‚ã‚Œã€ãƒãƒ³ã‚ºã‚ªãƒ³ã—ã¦å‹•ã‹ã—ã¦ã¿ã¾ã™ã€‚<br>ã„ã‚ã‚†ã‚‹<code>ã‚„ã£ã¦ã¿ãŸ</code>ã£ã¦ã‚„ã¤ã§ã™ã­ã€‚</p><h2 id="0-å‰æ"><a href="#0-å‰æ" class="headerlink" title="0. å‰æ"></a>0. å‰æ</h2><p>ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—æ¸ˆã¿ã§ã‚ã‚‹ã“ã¨</p><h2 id="1-ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰åˆæœŸè¨­å®šã‚’å®Ÿè¡Œã—ã¾ã™ã€‚"><a href="#1-ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰åˆæœŸè¨­å®šã‚’å®Ÿè¡Œã—ã¾ã™ã€‚" class="headerlink" title="1. ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰åˆæœŸè¨­å®šã‚’å®Ÿè¡Œã—ã¾ã™ã€‚"></a>1. ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰åˆæœŸè¨­å®šã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</h2><img src="/images/20200122/photo_20200122_01.png"><h2 id="ï¼’-ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‹•ã‹ã—ã€Auth0ã¨ç¹‹ãã¾ã™ã€‚"><a href="#ï¼’-ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‹•ã‹ã—ã€Auth0ã¨ç¹‹ãã¾ã™ã€‚" class="headerlink" title="ï¼’. ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‹•ã‹ã—ã€Auth0ã¨ç¹‹ãã¾ã™ã€‚"></a>ï¼’. ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‹•ã‹ã—ã€Auth0ã¨ç¹‹ãã¾ã™ã€‚</h2><img src="/images/20200122/photo_20200122_02.png"><p>ã“ã“ã¾ã§ã§ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒã€Auth0ã‚’èªè¨¼å±€ã¨ã—ã¦åˆ©ç”¨ã—ã€èªè¨¼ãƒ»èªå¯ã‚’å®Ÿè£…å‡ºæ¥ãŸå½¢ã«ãªã‚Šã¾ã™ã€‚</p><h1 id="ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã¿ã‚‹"><a href="#ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã¿ã‚‹" class="headerlink" title="ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã¿ã‚‹"></a>ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã¿ã‚‹</h1><p>è©³ç´°ã¯æ¬¡å›ä»¥é™ã«ãªã‚Šã¾ã™ãŒã€ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†ã®å®Ÿè£…ã‚’è¦‹ã¦ã¿ã¾ã™ã€‚</p><p>ã¾ãšå®Ÿè£…ã—ã¦ã„ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯NavBarã§ã‚ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚<br><img src="/images/20200122/photo_20200122_03.png" style="border:solid 1px #000000"></p><h2 id="1-ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’ç¢ºèª"><a href="#1-ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’ç¢ºèª" class="headerlink" title="1. ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’ç¢ºèª"></a>1. ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’ç¢ºèª</h2><p>25è¡Œç›®ä»˜è¿‘<br><code>$auth.isAuthenticated</code> ã‚’ç¢ºèªã—ã€ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ãªã‘ã‚Œã°ã€ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-if</span>=<span class="string">"!$auth.isAuthenticated &amp;&amp; !$auth.loading"</span> <span class="attr">class</span>=<span class="string">"nav-item"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">"qsLoginBtn"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">"btn btn-primary btn-margin"</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">click.prevent</span>=<span class="string">"login"</span></span></span><br><span class="line"><span class="tag">    &gt;</span>Login<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="2-on-clickã§loginå®Ÿè¡Œ"><a href="#2-on-clickã§loginå®Ÿè¡Œ" class="headerlink" title="2. on clickã§loginå®Ÿè¡Œ"></a>2. on clickã§loginå®Ÿè¡Œ</h2><p>99è¡Œç›®ä»˜è¿‘<br><code>this.$auth.loginWithRedirect()</code> ã«ã‚ˆã£ã¦ã€ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†ï¼ˆãƒ¢ãƒ¼ãƒ€ãƒ«å‘¼ã³å‡ºã—ï¼‰ãŒè¡Œã‚ã‚Œã€ãƒ­ã‚°ã‚¤ãƒ³å¾Œã¯callbackURLã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã‚Œã¾ã™ã€‚</p><p>callbackå…ˆã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®šç”»é¢ã«åˆã£ãŸã“ã¡ã‚‰ã§ã™ã€‚<br><img src="/images/20200122/photo_20200122_04.png" style="border:solid 1px #000000"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  login() &#123;</span><br><span class="line">    <span class="keyword">this</span>.$auth.loginWithRedirect();</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†ã‚’å®Ÿè£…ã™ã‚‹ã ã‘ã§ã‚ã‚Œã°ã“ã‚Œã ã‘ã§ã™ã€‚</p><h1 id="ã“ã®å‡¦ç†ã§å®Ÿè£…ã—ãŸèªè¨¼Flow"><a href="#ã“ã®å‡¦ç†ã§å®Ÿè£…ã—ãŸèªè¨¼Flow" class="headerlink" title="ã“ã®å‡¦ç†ã§å®Ÿè£…ã—ãŸèªè¨¼Flow"></a>ã“ã®å‡¦ç†ã§å®Ÿè£…ã—ãŸèªè¨¼Flow</h1><p>è©³ç´°ã¯ä»¥ä¸‹ã®ã‚‚ã®ã¨ãªã‚Šã¾ã™ãŒã€SPAã®å ´åˆã¯ä»Šå›ã®æ•°è¡Œã®å®Ÿè£…ã§ <code>Authorization Code Flow</code> ã‚’è¸ã‚€ã“ã¨ãŒå‡ºæ¥ãŸã“ã¨ã«ãªã‚Šã¾ã™ã€‚<br>â€» ã¦ã£ãã‚Š<code>Implicit Flow</code>ã ã¨æ€ã£ã¦ã„ãŸã‚“ã§ã™ãŒã€ã“ã®è¨˜äº‹ã‚’æ›¸ã„ã¦ã„ã‚‹ã¨ãã«<code>Authorization Code Flow</code>ã ã£ã¦æŒ‡æ‘˜ã•ã‚Œã¾ã—ãŸã€‚<br>â€» <code>ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚³ãƒ¼ãƒ‰èª­ã¾ãªã„ã¨ã ã‚ã ã‚ˆã­</code>ã£ã¦è¨€ã‚ã‚Œã¦æ‚”ã—ã‹ã£ãŸã§ã™ã€‚<br><a href="https://auth0.com/docs/flows" target="_blank" rel="noopener">https://auth0.com/docs/flows</a></p><img src="/images/20200122/photo_20200122_05.png" style="border:solid 1px #000000"><h1 id="æœ€å¾Œã«"><a href="#æœ€å¾Œã«" class="headerlink" title="æœ€å¾Œã«"></a>æœ€å¾Œã«</h1><p>ä½•åº¦ã‹èªè¨¼ãƒ»èªå¯ã®ä»•çµ„ã¿ã‚’ä½œã‚‹æ©Ÿä¼šãŒã‚ã£ãŸä¸­ã§ã€Auth0ã‚’è§¦ã£ãŸã®ã§ã™ãŒã€globalã§ä½¿ã‚ã¦ã„ã‚‹ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®å‡„ã¿ã‚’æ„Ÿã˜ã¾ã—ãŸã€‚<br>ä»Šå¾Œã‚‚ã€ä½™ç¨‹ã®è¦ä»¶ãŒãªã„é™ã‚Šï¼ˆãƒ‡ãƒ¼ã‚¿ã‚’æŒã¡å‡ºã›ãªã„å ´åˆã€ã©ã†ã—ã¦ã‚‚SaaSã§ã¯æ©Ÿèƒ½ãŒå®Ÿè£…ã§ããªã„å ´åˆãªã©ï¼‰SaaSã‚’ä¸­å¿ƒã«é¸å®šã—ã¦ã„ãã“ã¨ã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚<br>ä½•ã‚ˆã‚Šã€èªè¨¼ãƒ»èªå¯ã¯æœ¬æ¥ã®ãƒ“ã‚¸ãƒã‚¹ã®ä¸­å¿ƒã§ã¯ãªã„ãŸã‚ã€å¯èƒ½ãªé™ã‚ŠçœåŠ›åŒ–ã—ã¦å®Ÿè£…ã—ãŸã„å ´åˆãŒå¤šã„ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ</p><p>ã“ã®ãƒ–ãƒ­ã‚°è¨˜äº‹ã§ã¯Auth0ã®å°å…¥ã¾ã§ã‚’ç´¹ä»‹ã—ã¾ã—ãŸãŒã€æ¬¡å›ä»¥é™ã¯ã‚ˆã‚Šå®Ÿè·µçš„ãªåˆ©ç”¨æ³•ã«ã¤ã„ã¦è§¦ã‚Œã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚</p><hr><p>é–¢é€£è¨˜äº‹ï¼š</p><ul><li><a href="/articles/202001223/">Auth0 Emailã¾ãŸã¯SMSã‚’ä½¿ã£ãŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ¬ã‚¹èªè¨¼ã‚’è¨­å®šã™ã‚‹</a></li><li><a href="/articles/20200128/">Auth0ã®Rulesã‚’ä½¿ã£ã¦èªè¨¼èªå¯ã‚’è‡ªåœ¨ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹</a></li><li><a href="/articles/20190612/">TypeScriptæ•™è‚²ç”¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å…¬é–‹ã®ãŠçŸ¥ã‚‰ã›</a></li><li><a href="/articles/20191009/">AWS Session Managerã§ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’åˆ‡æ–­ã•ã‚Œã«ããã™ã‚‹æ–¹æ³•</a></li><li><a href="/articles/20191029/">ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã‚’2å¹´åŠç¶šã‘ã¦ãƒãƒã£ãŸã“ã¨ã‹ã‚‰å¾—ãŸæ•™è¨“3ã¤</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;å§‹ã‚ã«&quot;&gt;&lt;a href=&quot;#å§‹ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;å§‹ã‚ã«&quot;&gt;&lt;/a&gt;å§‹ã‚ã«&lt;/h1&gt;&lt;p&gt;æ§˜ã€…ãªã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã™ã‚‹ä¸­ã§å¿…ãšç™ºç”Ÿã™ã‚‹è¦ç´ &lt;br&gt;&lt;strong&gt;ãƒ­ã‚°ã‚¤ãƒ³&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ãã®ãƒ­ã‚°ã‚¤ãƒ³ã‚’æ”¯ãˆã‚‹æŠ€
      
    
    </summary>
    
      <category term="èªè¨¼èªå¯" scheme="https://future-architect.github.io/categories/%E8%AA%8D%E8%A8%BC%E8%AA%8D%E5%8F%AF/"/>
    
    
      <category term="Auth0" scheme="https://future-architect.github.io/tags/Auth0/"/>
    
      <category term="Vue.js" scheme="https://future-architect.github.io/tags/Vue-js/"/>
    
  </entry>
  
  <entry>
    <title>ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°ã¨ã®ä»˜ãåˆã„æ–¹</title>
    <link href="https://future-architect.github.io/articles/20200121/"/>
    <id>https://future-architect.github.io/articles/20200121/</id>
    <published>2020-01-20T23:52:16.000Z</published>
    <updated>2020-01-21T00:13:04.249Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>ã“ã‚“ã«ã¡ã¯ã€‚TIG DXãƒãƒ¼ãƒ ã®æ‘ç€¬ã§ã™ã€‚</p><p>Googleã§ã€Œã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°ã€ã§æ¤œç´¢ã™ã‚‹ã¨ãƒ‘ãƒã‚¹ãƒ­ã®ãƒªãƒ³ã‚°ãŒæ²¢å±±ãƒ’ãƒƒãƒˆã™ã‚‹ã‚“ã§ã™ã­ã€‚<br>ä»Šå›ã¯ãã®ã€ŒSLOT ãƒªãƒ³ã‚°ã€ã§ã¯ãªãã€Œthrottlingã€é–¢ã—ã¦è¨˜è¼‰ã—ã¾ã™ã€‚</p><h1 id="ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°ã¨ã¯"><a href="#ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°ã¨ã¯" class="headerlink" title="ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°ã¨ã¯"></a>ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°ã¨ã¯</h1><p>ä¸€å®šæ™‚é–“å†…ã«å—ä¿¡å¯èƒ½ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°ã‚’åˆ¶é™ã—ã€åˆ¶é™ã‚’ä¸Šå›ã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒãªã•ã‚ŒãŸéš›ã«ã¯å—ä¿¡ã‚’æ‹’å¦ã—ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã‚’è¿”å´ã™ã‚‹ã“ã¨ã€‚æ™‚é–“çµŒéã«ã‚ˆã‚Šå†ã³å—ä¿¡å¯èƒ½ã¨ãªã‚‹ä»•çµ„ã¿ã§ã™ã€‚</p><p>ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°ã‚’åˆ¶é™ã™ã‚‹ã“ã¨ã§ã‚·ã‚¹ãƒ†ãƒ ã«ã‹ã‹ã‚‹è² è·ã‚’æŠ‘ãˆãŸã‚Šã€ã‚¹ãƒ‘ãƒ ãƒ¡ãƒ¼ãƒ«ã®é€ä¿¡ã‚’é˜²æ­¢ã™ã‚‹ã®ã«åˆ©ç”¨ã•ã‚Œã¾ã™ã€‚</p><p>SaaSã§ã‚ã‚Œã°æœ‰é™ã®ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’ã¿ã‚“ãªã§ã‚·ã‚§ã‚¢ã™ã‚‹ã®ã§ã‚ˆã‚Šå¤šãã®äººãŒå¿«é©ã«åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã€ä¸€éƒ¨ã®ãƒ¦ãƒ¼ã‚¶ã‹ã‚‰ã®å¤§é‡ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’åˆ¶é™ã™ã‚‹ã®ã«åˆ©ç”¨ã•ã‚Œã¾ã™ã€‚ã‚‚ã—ç„¡åˆ¶é™ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘å…¥ã‚ŒãŸã¨ã™ã‚‹ã¨ã‚·ã‚¹ãƒ†ãƒ ã«è² è·ãŒã‹ã‹ã‚Šã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¸ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«æ™‚é–“ã‚’è¦ã—ãŸã‚Šå¾…ãŸã•ã‚ŒãŸæŒ™å¥ã«ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¦ã—ã¾ã„ã¾ã™ã€‚</p><img src="/images/20200121/1.png" style="border:solid 1px #000000"><p>ã“ã‚Œã¯å¤§äººæ°—ã®éŠåœ’åœ°ãŒå…¥å ´åˆ¶é™ã™ã‚‹ã“ã¨ã§ã€å…¥å ´æ¸ˆã¿ã®æ¥å ´è€…ã«å¿«é©ã«éã”ã—ã¦ã‚‚ã‚‰ã†ã“ã¨ã«ä¼¼ã¦ã„ã¾ã™ã€‚å…¥å ´å‰ã®æ¥å ´è€…ã«ã¨ã£ã¦ã¯å¥½ã¾ã—ãã‚ã‚Šã¾ã›ã‚“ãŒã€‚ã€‚ã€‚</p><h1 id="å—ä¿¡æ‹’å¦æ™‚ã®å¯¾å¿œæ–¹æ³•"><a href="#å—ä¿¡æ‹’å¦æ™‚ã®å¯¾å¿œæ–¹æ³•" class="headerlink" title="å—ä¿¡æ‹’å¦æ™‚ã®å¯¾å¿œæ–¹æ³•"></a>å—ä¿¡æ‹’å¦æ™‚ã®å¯¾å¿œæ–¹æ³•</h1><p>ãƒªã‚¯ã‚¨ã‚¹ãƒˆã™ã‚‹å´ã¨ã—ã¦ã¯å—ä¿¡æ‹’å¦ã•ã‚Œãªã„ã«è¶Šã—ãŸã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€æ‹’å¦ã•ã‚ŒãŸéš›ã«ã¯ä»¥ä¸‹ã®å¯¾å¿œã‚’ã™ã‚‹ã¨ãŠè¡Œå„€ãŒè‰¯ã„ã§ã™ã€‚<br>ãƒ»å°‘ã—å¾…ã£ã¦ã‹ã‚‰ãƒªãƒˆãƒ©ã‚¤ã™ã‚‹ã€‚<br>ãƒ»ãƒ¦ãƒ¼ã‚¶ã«å¯¾ã—ã¦ã—ã°ã‚‰ãçµŒã£ã¦ã‹ã‚‰å†åº¦ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã‚ˆã†ã«ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ã™ã‚‹ã€‚</p><p>éŠåœ’åœ°ã§å…¥å ´åˆ¶é™ãŒã‹ã‹ã‚‹ã¨ãã®æ—¥ã®å…¥åœ’ã¯çµ¶æœ›çš„ã§é æ–¹ã‹ã‚‰è¨ªã‚Œã¦ã„ã‚‹ã¨å¤§å¤‰ãŒã£ã‹ã‚Šã—ã¾ã™ãŒã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã®ä¸–ç•Œã§ã¯æ¥µçŸ­æ™‚é–“ã§ã™ã€‚ã‚·ã‚¹ãƒ†ãƒ ã«ã‚‚ã‚ˆã‚Šã¾ã™ãŒæ•°ç§’å¾…ã£ã¦ã‹ã‚‰ãƒªãƒˆãƒ©ã‚¤ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ä¸€å®šå›æ•°ãƒªãƒˆãƒ©ã‚¤ã—ã¦ã¿ã¦ãƒ€ãƒ¡ãªã‚‰ãƒ¦ãƒ¼ã‚¶ã«ã—ã°ã‚‰ãçµŒã£ã¦ã‹ã‚‰å†åº¦ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã‚ˆã†ã«ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ã—ã¾ã—ã‚‡ã†ã€‚</p><h1 id="ãƒªãƒˆãƒ©ã‚¤ã«ä¸€æ‰‹é–“åŠ ãˆã¦ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã‚’å‘ä¸Šã•ã›ã‚ˆã†"><a href="#ãƒªãƒˆãƒ©ã‚¤ã«ä¸€æ‰‹é–“åŠ ãˆã¦ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã‚’å‘ä¸Šã•ã›ã‚ˆã†" class="headerlink" title="ãƒªãƒˆãƒ©ã‚¤ã«ä¸€æ‰‹é–“åŠ ãˆã¦ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã‚’å‘ä¸Šã•ã›ã‚ˆã†"></a>ãƒªãƒˆãƒ©ã‚¤ã«ä¸€æ‰‹é–“åŠ ãˆã¦ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã‚’å‘ä¸Šã•ã›ã‚ˆã†</h1><p>ä¸€å®šæ™‚é–“å¾…ã£ã¦ã‹ã‚‰ãƒªãƒˆãƒ©ã‚¤ã—ã‚ˆã†ã¨ã™ã‚‹ã¨åŒä¸€ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å—ä¿¡æ‹’å¦ã•ã‚ŒãŸã‚¢ã‚¯ã‚»ã‚¹æ•°åˆ†ä¸€æ–‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ã«ãªã‚Šå†åº¦å—ä¿¡æ‹’å¦ã•ã‚Œã¦ã—ã¾ã†å¯èƒ½æ€§ãŒé«˜ã„ã§ã™ã€‚<br>ã“ã“ã¯å·¥å¤«ãŒå¿…è¦ã§ã™ã€‚<br>æ–¹æ³•ã¯ã„ãã¤ã‚‚ã‚ã‚‹ã¨æ€ã„ã¾ã™ãŒExponential Backoff And Jitterã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ãŒåŠ¹æœçš„ã§ã™ã€‚<br>è©³ç´°ã¯<a href="https://aws.typepad.com/sajp/2015/03/backoff.html" target="_blank" rel="noopener">AWS Solutions Architect ãƒ–ãƒ­ã‚°</a>ã«ã¾ã¨ã‚ã‚‰ã‚Œã¦ã„ã‚‹ã®ã§ãã¡ã‚‰ã‚’ã”è¦§ãã ã•ã„ã€‚</p><p>å°‘ã—ã ã‘èª¬æ˜ã—ã¾ã™ã€‚</p><h2 id="Exponential-Backoff"><a href="#Exponential-Backoff" class="headerlink" title="Exponential Backoff"></a>Exponential Backoff</h2><p>ãƒªãƒˆãƒ©ã‚¤ã®é–“éš”ã‚’å€ã€…ã«å¢—åŠ ã•ã›ã¦ãæ‰‹æ³•<br>ä¾‹ãˆã°ãƒªãƒˆãƒ©ã‚¤ã®åº¦ã«1ç§’,2ç§’,4ç§’,8ç§’ã¨å¾…ã¡æ™‚é–“ã‚’å¢—ã‚„ã—ã¦ã„ãã€‚<br>â€»ã‚ãã¾ã§ä¾‹ç¤ºã§ã™ã®ã§é©åˆ‡ãªæ™‚é–“ã‚’çµŒéã—ãŸã‚‰ã‚¨ãƒ©ãƒ¼ã§ã‚ã‚‹ã“ã¨ã‚’ãƒ¦ãƒ¼ã‚¶ã«ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ã—ãŸã»ã†ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ã§ã™ã€‚</p><h2 id="Jitter"><a href="#Jitter" class="headerlink" title="Jitter"></a>Jitter</h2><p>ãƒªãƒˆãƒ©ã‚¤ã®é–“éš”ã«ã°ã‚‰ã¤ãã‚’æŒãŸã›ã‚‹æ‰‹æ³•<br>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæ¯ã«ãƒ©ãƒ³ãƒ€ãƒ ãªç§’æ•°å¾…ã£ã¦ã‹ã‚‰ãƒªãƒˆãƒ©ã‚¤ã™ã‚‹ã€‚</p><h2 id="Exponential-Backoff-And-Jitter"><a href="#Exponential-Backoff-And-Jitter" class="headerlink" title="Exponential Backoff And Jitter"></a>Exponential Backoff And Jitter</h2><p>ãƒªãƒˆãƒ©ã‚¤ã®é–“éš”ã‚’å€ã€…ã«å¢—åŠ ã•ã›ãŸä¸Šã§ã°ã‚‰ã¤ã‹ã›ã‚‹</p><img src="/images/20200121/photo_20200121_01.png" class="img-middle-size" style="border:solid 1px #000000">ä¸Šå›³ã¯[AWS Solutions Architect ãƒ–ãƒ­ã‚°](https://aws.typepad.com/sajp/2015/03/backoff.html)ã‚ˆã‚Šå¼•ç”¨<p>ã“ã‚Œã‚‰ã®ãƒªãƒˆãƒ©ã‚¤æ‰‹æ³•ã«ã‚ˆã‚Šå˜ä½æ™‚é–“ã‚ãŸã‚Šã®ã‚¢ã‚¯ã‚»ã‚¹æ•°ãŒä½æ¸›ã§ãã€ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°ã®å—ä¿¡æ‹’å¦ãŒèµ·ãã«ãããªã‚Šã¾ã™ã€‚</p><h1 id="å—ä¿¡æ‹’å¦ã®å›é¿æ–¹æ³•"><a href="#å—ä¿¡æ‹’å¦ã®å›é¿æ–¹æ³•" class="headerlink" title="å—ä¿¡æ‹’å¦ã®å›é¿æ–¹æ³•"></a>å—ä¿¡æ‹’å¦ã®å›é¿æ–¹æ³•</h1><p>ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚ŠçŠ¶æ³ã¯ç•°ãªã‚‹ã¨æ€ã‚ã‚Œã¾ã™ãŒæ¦‚ã­ä»¥ä¸‹ã®ã‚ˆã†ãªå¯¾å¿œãŒå¿…è¦ã§ã™ã€‚<br>ãƒ»å—ä¿¡æ‹’å¦ã•ã‚Œã‚‹è¦å› ã‚’åˆ†æ•£ã•ã›ã‚‹ã€‚<br>ã€€é€ä¿¡å…ƒã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚„IPã‚¢ãƒ‰ãƒ¬ã‚¹ã€APIã‚­ãƒ¼ãŒè¦å› ã¨ãªã‚Šãˆã¾ã™ã€‚<br>ãƒ»é©åˆ‡ã«ã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°ã‚„WAITã‚’å…¥ã‚Œå˜ä½æ™‚é–“ã‚ãŸã‚Šã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°ã‚’åˆ¶é™ã™ã‚‹ã€‚</p><h1 id="ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°ã‚’å®Ÿè£…ã™ã‚‹å ´åˆ"><a href="#ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°ã‚’å®Ÿè£…ã™ã‚‹å ´åˆ" class="headerlink" title="ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°ã‚’å®Ÿè£…ã™ã‚‹å ´åˆ"></a>ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°ã‚’å®Ÿè£…ã™ã‚‹å ´åˆ</h1><p>ã“ã‚Œã¾ã§ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°ã•ã‚Œã¦ã„ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã‚’åˆ©ç”¨ã™ã‚‹å´ã®è¦–ç‚¹ã§èª¬æ˜ã—ã¦ãã¾ã—ãŸãŒã€åå¯¾ã«è‡ªåˆ†ã®ã‚µãƒ¼ãƒ“ã‚¹ã«ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ã‚’è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><p>å˜ä½æ™‚é–“ã‚ãŸã‚Šã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°ã‚’æ­£ç¢ºã«è¨ˆæ¸¬ã—ã‚ˆã†ã¨ã™ã‚‹ã¨RDBMSã‚’åˆ©ç”¨ã—ã¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®åº¦ã«INSERTã—ã€å˜ä½æ™‚é–“ã‚ãŸã‚Šã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°ã‚’ç¢ºèªã™ã‚‹ç‚ºã«SELECTã™ã‚‹ãªã©ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°å‡¦ç†ã®å‰²åˆãŒé«˜ããªã‚Šã€æœ¬æ¥è¡Œã†ã¹ãå‡¦ç†ã«æ”¯éšœã‚’ããŸã™ã®ã§ã‚†ã‚‹ã„åˆ¶å¾¡ã‚’ã™ã‚‹ã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚</p><p>ç°¡æ˜“çš„ã«è¡Œã†ã®ã§ã‚ã‚Œã°ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ¯ã®åŒæœŸå‡¦ç†ã§é–¾å€¤åˆ¤å®šå‡¦ç†ã‚’ã™ã‚‹ã®ã§ã¯ãªãéåŒæœŸå‡¦ç†ã§é–¾å€¤åˆ¤å®šã—è¶…ãˆã¦ã„ãŸã‚‰ä¸€å®šæ™‚é–“å—ä¿¡ã‚’æ‹’å¦ã™ã‚‹ä»•çµ„ã¿ãŒè‰¯ã„ã¨æ€ã„ã¾ã™ã€‚</p><h2 id="ç°¡æ˜“çš„ãªã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°ã®ä»•çµ„ã¿"><a href="#ç°¡æ˜“çš„ãªã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°ã®ä»•çµ„ã¿" class="headerlink" title="ç°¡æ˜“çš„ãªã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°ã®ä»•çµ„ã¿"></a>ç°¡æ˜“çš„ãªã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°ã®ä»•çµ„ã¿</h2><p>APIã‚­ãƒ¼ã‚’ç”¨ã„ã¦ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°ã•ã‚Œã‚‹ã‚‚ã®ã¨ã—ã¦èª¬æ˜ã—ã¾ã™ã€‚</p><img src="/images/20200121/2.png" style="border:solid 1px #000000"><p><strong>ã‚µãƒ¼ãƒ“ã‚¹ãƒ—ãƒ­ã‚»ã‚¹</strong><br>1.ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã‚µãƒ¼ãƒ“ã‚¹ã¸APIã‚­ãƒ¼ã‚’ä»˜ä¸ã—ã¦ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹<br>2.APIã‚­ãƒ¼ã‚’å«ã‚ãŸã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°ã‚’å‡ºåŠ›ã™ã‚‹<br>3.å—ä¿¡æ‹’å¦ã™ã‚‹ã‹ã©ã†ã‹APIã‚­ãƒ¼ã«å¯¾å¿œã™ã‚‹ãƒ­ãƒƒã‚¯çŠ¶æ…‹ã‚’å–å¾—ã™ã‚‹<br>4.ãƒ­ãƒƒã‚¯çŠ¶æ…‹ã«ã‚ˆã‚Šæ­£å¸¸ãªãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‹å—ä¿¡æ‹’å¦ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”å´ã™ã‚‹</p><p><strong>ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°åˆ¶å¾¡ãƒ—ãƒ­ã‚»ã‚¹</strong><br>1.å®šæœŸçš„ã«ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°ã‚’å–å¾—ã™ã‚‹<br>2.ç›´è¿‘ã®å˜ä½æ™‚é–“ã‚ãŸã‚Šã®ã‚¢ã‚¯ã‚»ã‚¹æ•°ã‚’APIã‚­ãƒ¼æ¯ã«ã‚«ã‚¦ãƒ³ãƒˆã—ã€é–¾å€¤ã‚’è¶…ãˆã¦ã„ã‚‹å ´åˆã¯ãƒ­ãƒƒã‚¯ã€è¶…ãˆã¦ã„ãªã„å ´åˆã¯éãƒ­ãƒƒã‚¯ã®çŠ¶æ…‹ã«å¤‰æ›´ã™ã‚‹</p><p>ã“ã‚Œã‚‰ã«ã‚ˆã‚Šé‡ã„å‡¦ç†ã¯ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°åˆ¶å¾¡ãƒ—ãƒ­ã‚»ã‚¹ãŒæ‹…ã„ã€ã‚µãƒ¼ãƒ“ã‚¹ãƒ—ãƒ­ã‚»ã‚¹ã«è² è·ã‚’ã‹ã‘ãšã«ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°å‡¦ç†ãŒå®Ÿç¾ã§ãã¾ã™ã€‚</p><h1 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h1><p>ä¸€éƒ¨ã®åˆ©ç”¨è€…ã®ã›ã„ã§ãã®ä»–ã®åˆ©ç”¨è€…ãŒä¸å¿«ãªæ€ã„ã‚’ã—ãªã„ã‚ˆã†ã«ã™ã‚‹ä»•çµ„ã¿ã§ã‚ã‚‹ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°ã€‚ã“ã®ä»•çµ„ã¿ã®ãŠã‹ã’ã§å¤§å¤šæ•°ã®åˆ©ç”¨è€…ãŒå¿«é©ã«ã‚µãƒ¼ãƒ“ã‚¹ã‚’åˆ©ç”¨ã§ãã¾ã™ã€‚ã‚µãƒ¼ãƒ“ã‚¹ã‚’åˆ©ç”¨ã™ã‚‹å ´åˆã§ã‚‚ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã™ã‚‹å ´åˆã§ã‚‚ä»–ã®åˆ©ç”¨è€…ã®ã“ã¨ã‚’è€ƒæ…®ã—é©åˆ‡ãªå¯¾å¿œã‚’å¿ƒæ›ã‘ã¾ã—ã‚‡ã†ã€‚</p><hr><p>é–¢é€£è¨˜äº‹ï¼š</p><ul><li><a href="/articles/20191206">AWS Glueã®å˜ä½“ãƒ†ã‚¹ãƒˆç’°å¢ƒã®æ§‹ç¯‰æ‰‹é †</a></li><li><a href="/articles/20191101/">AWS Glueã®é–‹ç™ºã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒãã“ãã“ãŠé«˜ã„ã®ã§ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã‚’ç”¨æ„ã—ã¾ã—ãŸ</a></li><li><a href="/articles/20191009/">AWS Session Managerã§ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’åˆ‡æ–­ã•ã‚Œã«ããã™ã‚‹æ–¹æ³•</a></li><li><a href="/articles/20190902/">AWS IAMãƒ­ãƒ¼ãƒ«ã®ä¿¡é ¼é–¢ä¿‚ã®æ°—ã«ãªã‚‹å‹•ä½œ</a></li><li><a href="/articles/20180828">5TB/æ—¥ ã®ãƒ‡ãƒ¼ã‚¿ã‚’AWS Glueã§ã•ã°ããŸã‚ã«ã‚„ã£ãŸã“ã¨ï¼ˆæ¦‚è¦ç·¨ï¼‰</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h1&gt;&lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€‚TIG DXãƒãƒ¼ãƒ ã®æ‘ç€¬ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;Googleã§ã€Œã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°ã€ã§æ¤œç´¢ã™ã‚‹ã¨ãƒ‘ãƒã‚¹ãƒ­ã®ãƒªãƒ³ã‚°ãŒæ²¢å±±
      
    
    </summary>
    
      <category term="Infrastructure" scheme="https://future-architect.github.io/categories/Infrastructure/"/>
    
    
      <category term="AWS" scheme="https://future-architect.github.io/tags/AWS/"/>
    
      <category term="GCP" scheme="https://future-architect.github.io/tags/GCP/"/>
    
  </entry>
  
  <entry>
    <title>å·¥å ´ã‚’ãƒãƒƒã‚¯ã™ã‚‹ãŸã‚ã®åŸºæœ¬çŸ¥è­˜ã€€å¾Œç·¨</title>
    <link href="https://future-architect.github.io/articles/20200120/"/>
    <id>https://future-architect.github.io/articles/20200120/</id>
    <published>2020-01-20T00:59:49.000Z</published>
    <updated>2020-01-20T23:48:35.473Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>ã“ã‚“ã«ã¡ã¯ã€DXãƒãƒ¼ãƒ ã®æ —ç”°ã§ã™ã€‚å‰å›ã¯<a href="/articles/20191023/">å·¥å ´ã‚’ãƒãƒƒã‚¯ã™ã‚‹ãŸã‚ã®åŸºç¤çŸ¥è­˜ã€€å‰ç·¨</a>ã¨ã—ã¦ã€åˆ¶å¾¡ç³»ã‚·ã‚¹ãƒ†ãƒ ãŒã©ã®ã‚ˆã†ãªæ§‹æˆã«ãªã£ã¦ã„ã¦ã€ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢çš„ã«ä½•ã‚’æ°—ã«ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã‹ã«ã¤ã„ã¦è¿°ã¹ã¾ã—ãŸã€‚å¾Œç·¨ã§ã¯ã€åˆ¶å¾¡ç³»ã¨ã—ã¦ã©ã®ã‚ˆã†ãªæ©Ÿå™¨ãŒã©ã®ã‚ˆã†ãªä»•çµ„ã¿ã§å‹•ã„ã¦ã„ã‚‹ã‹ã€ãã‚Œã‚‰ã®æ©Ÿå™¨ã¨ã©ã®ã‚ˆã†ãªã‚„ã‚Šå–ã‚Šã‚’ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‹ã€ã•ã‚‰ã«ã©ã®ã‚ˆã†ãªã“ã¨ã«æ°—ã‚’ä»˜ã‘ã¦å®Ÿè£…ã—ã¦ã„ã‹ãªã‘ã‚Œã°ãªã‚‰ãªã„ã‹ã«ã¤ã„ã¦è¿°ã¹ã¾ã™ã€‚</p><p>ãŸã ã—ã€æœ¬è¨˜äº‹ã§ã€Œå®Ÿè£…ã™ã‚‹ã€ã¨ã¯ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢çš„ãªä½œæ¥­ã‚’æŒ‡ã—ã€ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢çš„ãªä½œæ¥­ã‚’æŒ‡ã—ã¾ã›ã‚“ã€‚ã¤ã¾ã‚Šã€ä»¥ä¸‹ã§ã€Œå®Ÿè£…ã™ã‚‹ã€ã¨ã„ã†è¨€è‘‰ã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç­‰ã®è¡Œç‚ºã‚’æŒ‡ã—ã€é›»åŠ›ç·šã‚’åŸ‹è¨­ã—ãŸã‚Šã‚«ãƒ¡ãƒ©ã‚’è¨­ç½®ã—ãŸã‚Šã¨ã„ã£ãŸå·¥äº‹ç­‰ã®è¡Œç‚ºã¯æŒ‡ã•ãªã„ã“ã¨ã«ã—ã¾ã™ã€‚</p><h1 id="åˆ¶å¾¡ç³»ã‚·ã‚¹ãƒ†ãƒ ã®å„æ©Ÿå™¨ã«ã¤ã„ã¦"><a href="#åˆ¶å¾¡ç³»ã‚·ã‚¹ãƒ†ãƒ ã®å„æ©Ÿå™¨ã«ã¤ã„ã¦" class="headerlink" title="åˆ¶å¾¡ç³»ã‚·ã‚¹ãƒ†ãƒ ã®å„æ©Ÿå™¨ã«ã¤ã„ã¦"></a>åˆ¶å¾¡ç³»ã‚·ã‚¹ãƒ†ãƒ ã®å„æ©Ÿå™¨ã«ã¤ã„ã¦</h1><p>å‰ç·¨ã§ã¯PLCã‚„DCSã¨ã„ã£ãŸåç§°ã ã‘ã‚’ã‚ã’ã¾ã—ãŸãŒã€ãã‚Œã‚‰ãŒå…·ä½“çš„ã«ã©ã®ã‚ˆã†ãªä»•çµ„ã¿ã‚’æŒã£ã¦ã„ã‚‹ã®ã‹ã€ã©ã†ã—ã¦ãã®ã‚ˆã†ãªã‚·ã‚¹ãƒ†ãƒ ãŒã§ãã¦ããŸã®ã‹ã‚’ç†è§£ã™ã‚‹ã“ã¨ã¯éå¸¸ã«å¤§åˆ‡ã§ã™ã€‚æŠ€è¡“ãŒç”Ÿã¾ã‚Œã¦ããŸèƒŒæ™¯ã‚’æ­£ã—ãçŸ¥ã‚‹ã“ã¨ã§ã€ãã®æŠ€è¡“ã‚’ã©ã®ã‚ˆã†ã«æ‰±ã†ã¹ãã‹ã‚’ç†è§£ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚æœ€åˆã«ã€åˆ¶å¾¡ç³»ã‚·ã‚¹ãƒ†ãƒ ã®ç‰¹æ€§ã«ã‚ˆã£ã¦ã€2ç¨®é¡ã®åˆ†ã‘æ–¹ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚å‰è€…ã¯ãã‚‚ãã‚‚ã®åˆ¶å¾¡æ‰‹æ³•ã®åˆ†é¡ã¨ã—ã¦ã€å¾Œè€…ã¯ãƒ—ãƒ©ãƒ³ãƒˆã«ãŠã‘ã‚‹åˆ¶å¾¡ç³»ã‚·ã‚¹ãƒ†ãƒ ã®å½¹å‰²ã®åˆ†é¡ã¨ã—ã¦ã§ã™ã€‚</p><p>ä¸€èˆ¬çš„ã«åˆ¶å¾¡ç³»ã‚·ã‚¹ãƒ†ãƒ ï¼ˆã‚ã‚‹ã„ã¯åˆ¶å¾¡ç³»ï¼‰ã¨ã¯ã€ä»–ã®æ©Ÿå™¨ã‚„ã‚·ã‚¹ãƒ†ãƒ ã‚’ç®¡ç†ã—åˆ¶å¾¡ã™ã‚‹ãŸã‚ã®ã‚·ã‚¹ãƒ†ãƒ ã‚’æŒ‡ã—ã¾ã™ã€‚åˆ¶å¾¡ç³»ã‚·ã‚¹ãƒ†ãƒ ã¯è«–ç†åˆ¶å¾¡ï¼ˆé€æ¬¡åˆ¶å¾¡ï¼‰ã¨ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åˆ¶å¾¡ï¼ˆç·šå‹åˆ¶å¾¡ï¼‰ã®ï¼’ã¤ã«å¤§ã¾ã‹ã«åˆ†é¡ã•ã‚Œã¾ã™ã€‚ç´°ã‹ãåˆ†é¡ã™ã‚‹ã¨ã‚ªãƒ³ï¼ã‚ªãƒ•åˆ¶å¾¡ã‚„ãƒ•ã‚¡ã‚¸è«–ç†åˆ¶å¾¡ã€ã•ã‚‰ã«ã¯PIDåˆ¶å¾¡ã‚„æ¯”ä¾‹åˆ¶å¾¡ãªã©ãŒã‚ã‚Šã¾ã™ãŒã€ãã‚Œã‚‰ã®è©³ç´°ã«ã¤ã„ã¦ã¯è§¦ã‚Œã¾ã›ã‚“ã€‚</p><p>ç¶šã„ã¦ã€åˆ¶å¾¡ã®ç‰¹æ€§ã¨ã—ã¦ã€é›»æ°—ç³»åˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ ã¨è¨ˆè£…ç³»åˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ ã«åˆ†é¡ã•ã‚Œã¾ã™ã€‚ãƒ—ãƒ©ãƒ³ãƒˆã«ãŠã„ã¦å¿…è¦ãªä¿¡å·ã‚’é€ã‚‹å‹•åŠ›æºã®å½¹å‰²ã‚’æ‹…ã†ã‚‚ã®ã‚’é›»æ°—ç³»åˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ ã¨ã„ã„ã€ä¸€æ–¹ã§å„éƒ¨ã®çŠ¶æ…‹ã‚’æ¤œçŸ¥ã—çµ±æ‹¬ã—ã¦åˆ¶å¾¡ã™ã‚‹ä¸­æ¢ã®å½¹å‰²ã‚’æ‹…ã†ã®ãŒè¨ˆè£…åˆ¶å¾¡ç³»ã‚·ã‚¹ãƒ†ãƒ ã¨ã„ã„ã¾ã™ã€‚</p><p>ä»¥é™ã§ã¯å‰è€…ã®å…·ä½“çš„ãªåˆ¶å¾¡æ‰‹æ³•ã®ä»•çµ„ã¿ã®è©±ã¯ã›ãšã€å¾Œè€…ã®å„åˆ¶å¾¡ç³»ã‚·ã‚¹ãƒ†ãƒ ã«ã¤ã„ã¦ã©ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚‹ã‹ã‚’ç´¹ä»‹ã—ã¦ã„ãã¾ã™ã€‚</p><h2 id="é›»æ°—ç³»åˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ "><a href="#é›»æ°—ç³»åˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ " class="headerlink" title="é›»æ°—ç³»åˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ "></a>é›»æ°—ç³»åˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ </h2><p>å·¥å ´å†…ã®é›»æ°—ç³»ã‚·ã‚¹ãƒ†ãƒ ã¨ã„ã†ã¨ã€</p><ol><li>ã‚¨ãƒãƒ«ã‚®ãƒ¼ã¨ã—ã¦ã®é›»æ°—ã‚’å—é›»ãƒ»å¤‰åœ§ã—ã€å„è¨­å‚™ã«ä¾›çµ¦ã—</li><li>æ›´ã«ON/OFFä¿¡å·ã«ã‚ˆã£ã¦é›»å‹•æ©Ÿã‚’å‹•ã‹ã™</li></ol><p>ã‚’è¡Œã„ã¾ã™ã€‚å‰è€…ã«ã¤ã„ã¦ã€å·¥å ´å†…ã®é›»æºä¾›çµ¦ã¯å„è¨­å‚™å–ã‚Šä»˜ã‘ã‚’æ‹…ã†éƒ¨éšŠãŒæ‹…å½“ã—ãŸã‚Šã€é©åˆ‡ãªç‰©ç†æ¥ç‚¹ã‚’è¨­ã‘ã¦é›»æºã®ã‚„ã‚Šå–ã‚Šã—ãŸã‚Šæ§˜ã€…ãªã‚±ãƒ¼ã‚¹ãŒã‚ã‚Šã¾ã™ã€‚é›»æºä¾›çµ¦ã«ã¤ã„ã¦ã¯ä»Šå›ã¯è§¦ã‚Œãš<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>ã€å¾Œè€…ã®ON/OFFä¿¡å·ã‚’ç”Ÿæˆã™ã‚‹ä»•çµ„ã¿ã«ã¤ã„ã¦è§¦ã‚Œã¦ã„ãã¾ã™ã€‚</p><h3 id="ãƒªãƒ¬ãƒ¼"><a href="#ãƒªãƒ¬ãƒ¼" class="headerlink" title="ãƒªãƒ¬ãƒ¼"></a>ãƒªãƒ¬ãƒ¼</h3><p>ãƒªãƒ¬ãƒ¼ï¼ˆç¶™é›»å™¨, relayï¼‰ã¯ã€å¤–éƒ¨ã‹ã‚‰é›»æ°—ä¿¡å·ã‚’å—ã‘å–ã‚Šã€é›»æ°—å›è·¯ã®ã‚ªãƒ³/ã‚ªãƒ•ã‚„åˆ‡ã‚Šæ›¿ãˆã‚’è¡Œã†éƒ¨å“ãŠã‚ˆã³ãã®ç·ç§°ã§ã™ã€‚éƒ¨å“å†…éƒ¨ã«ç‰©ç†çš„ãªæ¥ç‚¹ã‚’æŒã¤ã‹ã§ã‚¹ã‚¤ãƒƒãƒã®ã‚ˆã†ãªæœ‰æ¥ç‚¹ãƒªãƒ¬ãƒ¼ï¼ˆãƒ¡ã‚«ãƒ‹ã‚«ãƒ«ãƒªãƒ¬ãƒ¼ï¼‰ã¨ç„¡æ¥ç‚¹ãƒªãƒ¬ãƒ¼ï¼ˆMOS FETãƒªãƒ¬ãƒ¼ãªã©ï¼‰ã«åˆ†ã‘ã‚‰ã‚Œã¾ã™ãŒã€å¾Œè€…ã¯åŠå°ä½“ã‚„é›»å­éƒ¨å“ã§æ§‹æˆã•ã‚Œã¾ã™ã€‚å·¥å ´ã§ã¯ä¸»ã«å‰è€…ã®ãƒ¡ã‚«ãƒ‹ã‚«ãƒ«ãƒªãƒ¬ãƒ¼ãŒä½¿ã‚ã‚Œã€å¾Œè€…ã¯é›»å­æ©Ÿå™¨ç­‰ã§ç”¨ã„ã‚‰ã‚Œã¾ã™ã€‚</p><p>ãƒ¡ã‚«ãƒ‹ã‚«ãƒ«ãƒªãƒ¬ãƒ¼ã®å ´åˆã€ç‰©ç†çš„ãªæ¥ç‚¹ãŒã‚ã‚‹ãŸã‚ã‚ã‹ã‚Šã‚„ã™ã„ã§ã™ã€‚<br><img src="/images/20200120/photo_20200120_01.png"><br>ãƒ¡ã‚«ãƒ‹ã‚«ãƒ«ãƒªãƒ¬ãƒ¼ã«ã‚‚è¤‡æ•°ã®ç¨®é¡ãŒã‚ã‚Šã€ä¾‹ãˆã°ç¯ã‚Šã‚’ç‚¹ã‘ã‚‹ã‚¹ã‚¤ãƒƒãƒã‚‚ãƒªãƒ¬ãƒ¼ã®ä¸€ç¨®ã§ã™ã€‚ä»–ã«ã¯ãƒã‚°ãƒãƒƒãƒˆã‚³ãƒ³ãƒ€ã‚¯ã‚¿ï¼ˆé›»ç£ç¶™é›»å™¨, Magnet Conductor; MCï¼‰ãªã©ãŒã‚ã‚Šã€MCã¯å†…éƒ¨ã«ã‚³ã‚¤ãƒ«ã¨é‰„å¿ƒãŒå…¥ã£ãŸæ§‹æˆã«ãªã‚Šã¾ã™ã€‚å¤–éƒ¨ã‹ã‚‰é›»æµãŒæµã‚Œã‚‹ã“ã¨ã«ã‚ˆã‚Šå†…éƒ¨ã®ã‚³ã‚¤ãƒ«ãŒé›»ç£çŸ³åŒ–ã—ã€é‰„å¿ƒãŒå‹•ã„ã¦é›»æ°—å›è·¯ã®æ¥ç‚¹ãŒé–‹ã or é–‰ã¾ã‚‹å‹•ä½œã‚’å–ã‚Šã¾ã™ã€‚<br><img src="/images/20200120/photo_20200120_02.png"><br>ãƒ¡ã‚«ãƒ‹ã‚«ãƒ«ãƒªãƒ¬ãƒ¼ã¯ã€ç‰©ç†çš„æ¥ç‚¹ã‚’æŒã¤ãŸã‚ç¨¼åƒæ™‚ã«éŸ³ãŒé³´ã‚Šã¾ã™ã€‚å·¥å ´ã®é›»æ°—å®¤ãªã©ã€ã‚«ãƒãƒ£ã‚«ãƒãƒ£å‹•ä½œéŸ³ãŒé³´ã£ã¦ãŠã‚Šã€åˆã‚ã¦å…¥ã‚‰ã‚ŒãŸéš›ã¯é©šãã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ãªãŠã€ãƒªãƒ¬ãƒ¼ã¯ã‚¿ã‚¤ãƒãƒ¼æ©Ÿèƒ½ã‚’æŒã¤ã‚‚ã®ã‚‚ã‚ã‚Šã€ã„ãã‚‰ã‹é…å»¶æ™‚é–“ã‚’è¨­ã‘ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</p><h3 id="PLC"><a href="#PLC" class="headerlink" title="PLC"></a>PLC</h3><p>ãƒªãƒ¬ãƒ¼ã¯ç°¡å˜ã«åˆ¶å¾¡å›è·¯ã‚’çµ„ã‚ã‚‹ä¸€æ–¹ã§ã€å‹•ä½œã®å¤‰æ›´ã«ã¯ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã®å¤‰æ›´ãŒä¼´ã„ã¾ã™ã€‚ãã®ç‚¹ã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢çš„ã«å‹•ä½œã®å¤‰æ›´ã‚’è¡Œãˆã‚‹ã®ãŒPLCã§ã™ã€‚PLCã¯Programmable Logic Controllerã®ã“ã¨ã§ã€ãƒªãƒ¬ãƒ¼è£…ç½®ã®ä»£æ›¿ã¨ã—ã¦é–‹ç™ºã•ã‚ŒãŸåˆ¶å¾¡è£…ç½®ã§ã™ã€‚ä¸€èˆ¬çš„ã«ã‚·ãƒ¼ã‚±ãƒ³ã‚µ<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>ã¨ã‚‚å‘¼ã°ã‚Œã€å·¥å ´ã®æ©Ÿå™¨ã®åˆ¶å¾¡ãªã©ã«ä½¿ã‚ã‚Œã‚‹ä»–ã€èº«è¿‘ãªè¨­å‚™ã®åˆ¶å¾¡ã«ã‚‚ä½¿ã‚ã‚Œã¦ã„ã¾ã™ã€‚PLCã¯ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢çš„ãªåˆ¶å¾¡ã‚’ã—ã¾ã™ãŒã€ITæŠ€è¡“è€…ã®é ˜åŸŸã§ã¯ãªãã€é›»æ°—æŠ€è¡“è€…ã®é ˜åŸŸã«å±ã™ã‚‹åˆ¶å¾¡è£…ç½®ã§ã™ã€‚ã„ã‚ã‚†ã‚‹ä¸€èˆ¬çš„ãªPCã®ã‚ˆã†ã«ã€CPUã‚„é›»æºã‚„I/Oãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®çµ„ã¿åˆã‚ã›ã«ã‚ˆã£ã¦æˆã‚Šç«‹ã¡ã€å„ç¨®æ‹¡å¼µãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¿½åŠ ã—ã€æ§˜ã€…ãªæ©Ÿèƒ½ã‚’ä»˜ä¸ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãªãŠã€ITæŠ€è¡“è€…ãŒæœ€ã‚‚æ°—ã«ãªã‚‹ã ã‚ã†ã“ã¨ã‚’æœ€åˆã«æ›¸ãã¾ã™ãŒã€PLCã«ã¯LANã‚±ãƒ¼ãƒ–ãƒ«ç”¨ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒã‚ã‚Š<sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup>ã€TCP/IPé€šä¿¡ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™<sup id="fnref:4"><a href="#fn:4" rel="footnote">4</a></sup>ã€‚</p><p>PLCã®å…¥å‡ºåŠ›ã¯åŸºæœ¬ãƒ‡ã‚¸ã‚¿ãƒ«ã§ã‚ã‚Šã€å„ç¨®æ©Ÿå™¨ã¨é€šä¿¡ã‚’è¡Œã„ã¾ã™ã€‚ãƒªãƒŸãƒƒãƒˆã‚¹ã‚¤ãƒƒãƒï¼ˆLimit Switch; LSï¼‰<sup id="fnref:5"><a href="#fn:5" rel="footnote">5</a></sup>ã®ã‚ˆã†ãª1 or 0ã§è¡¨ç¾ã•ã‚Œã‚‹ã‚‚ã®ã¯ã‚ã‹ã‚Šã‚„ã™ã„ã§ã™ãŒã€ãƒ¬ãƒ™ãƒ«è¨ˆ<sup id="fnref:6"><a href="#fn:6" rel="footnote">6</a></sup>ãªã©ã®æ•°å€¤æƒ…å ±ã¯ã€ä¾‹ãˆã°å¿…è¦bitåˆ†ã®I/Oã‚’ç¢ºä¿ã—ã¦æ¼”ç®—ã—ã¾ã™ã€‚é›»æµã‚ã‚‹ã„ã¯é›»åœ§å…¥å‡ºåŠ›ã‚’è¡Œã„ã€ç‰¹å®šã®é–¾å€¤ã§ON/OFFãŒåˆ¤å®šã•ã‚Œã¾ã™<sup id="fnref:7"><a href="#fn:7" rel="footnote">7</a></sup>ã€‚ã¾ãŸã€PLCãŒã‚¢ãƒŠãƒ­ã‚°å…¥å‡ºåŠ›ã‚’æ‰±ã†æ–¹æ³•ã‚‚ã‚ã‚Šã¾ã™ã€‚ãã®éš›ã¯ã€ADC/DAC<sup id="fnref:8"><a href="#fn:8" rel="footnote">8</a></sup>æ©Ÿèƒ½ã‚’æŒã£ãŸI/Oãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</p><p>PLCè‡ªä½“ã¯ã€ãƒ©ãƒ€ãƒ¼è¨€èªã¨ã„ã†ãƒªãƒ¬ãƒ¼å›è·¯ã‚’æ¨¡ã—ãŸè¨€èªã§å®Ÿè£…ã—ã¾ã™ã€‚ãƒ©ãƒ€ãƒ¼è¨€èªã¯ãƒªãƒ¬ãƒ¼å›è·¯ã‚’è¨˜å·åŒ–ã—ãŸè¡¨è¨˜ã§å®Ÿè£…ã§ãã€Xã§ç¤ºã•ã‚Œã‚‹å…¥åŠ›ã¨Yã§ç¤ºã•ã‚Œã‚‹å‡ºåŠ›ã€ãã—ã¦Mã§è¡¨ç¾ã•ã‚Œã‚‹å†…éƒ¨ãƒªãƒ¬ãƒ¼ã«ã‚ˆã£ã¦æ§‹ç¯‰ã•ã‚Œã‚‹è«–ç†å›è·¯ã§ã™ã€‚ãƒ©ãƒ€ãƒ¼è¨€èªã®ç‰¹å¾´ã¯ã€<b>ã‚¹ã‚­ãƒ£ãƒ³</b>ã¨ã„ã†æ¦‚å¿µã§ã™ã€‚ãƒ©ãƒ€ãƒ¼è¨€èªã¯è¨˜è¿°ã•ã‚ŒãŸå†…å®¹ã‚’åå¾©çš„ã«å®Ÿè¡Œã—ã¾ã™ãŒã€ã€Œãƒ©ãƒ€ãƒ¼ã¯è¨˜è¿°ã—ãŸé †ã«ã—ã‹å‡¦ç†ã‚’ã—ãªã„ã€ã¨ã„ã†ã‚ˆã†ãªç‰¹å¾´ãŒã‚ã‚Šã¾ã™ã€‚ã¤ã¾ã‚Šã€Cè¨€èªãªã©ã®å¤šãã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ è¨€èªã§è¦‹ã‚‰ã‚Œã‚Œã‚‹ã€Œå…ˆã«é–¢æ•°ã‚’å®šç¾©ã—ã¦ã‚ã¨ã‹ã‚‰ãã®é–¢æ•°ã‚’ã‚³ãƒ¼ãƒ«ã™ã‚‹ã€ã¨ã„ã†å‡¦ç†ãŒã§ããšã€ä¸Šã‹ã‚‰é †ç•ªã«å‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹<sup id="fnref:9"><a href="#fn:9" rel="footnote">9</a></sup>ã—ã‹ã‚ã‚Šã¾ã›ã‚“ã€‚ãã—ã¦ä¸Šã‹ã‚‰é †ç•ªã«å‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã„ã†ç‰¹æ€§ä¸Šã€ãƒ©ãƒ€ãƒ¼è¨€èªã®è¨˜è¿°é‡ã‚„å‡¦ç†ãŒé‡ããªã‚‹ã¨ã€ã‚¹ã‚­ãƒ£ãƒ³ã‚¿ã‚¤ãƒ <sup id="fnref:10"><a href="#fn:10" rel="footnote">10</a></sup>ã¯å¤§ãããªã‚‹ã¨ã„ã†ç‰¹å¾´ãŒã‚ã‚Šã¾ã™ã€‚</p><img src="/images/20200120/photo_20200120_03.png"><p>ITæŠ€è¡“è€…ã‹ã‚‰ã™ã‚‹ã¨ã‚¯ã‚»ãŒå¼·ãè¦‹ãˆã‚‹ã‹ã‚‚çŸ¥ã‚Œãªã„ãƒ©ãƒ€ãƒ¼è¨€èªã§ã™ãŒã€å‰è¿°ã®ã‚ˆã†ã«ãƒªãƒ¬ãƒ¼å›è·¯ã‚’å›³å¼åŒ–ã•ã‚Œã¦ãŠã‚Šã€ã‹ã¤è¨˜è¿°ã•ã‚ŒãŸé †ç•ªã§ã—ã‹å‡¦ç†ãŒå®Ÿè¡Œã•ã‚Œãªã„ã¨ã„ã†ã‚·ãƒ¼ã‚±ãƒ³ã‚·ãƒ£ãƒ«ãªç‰¹å¾´ãŒã‚ã‚Šã¾ã™ã€‚ã„ãã‚‰ã‹æ…£ã‚ŒãŒå¿…è¦ã§ã™ãŒã€ç´™é¢ä¸Šã«å°åˆ·ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦æ¯”è¼ƒçš„å‡¦ç†ã‚’è¿½ã„ã‚„ã™ã„ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚</p><h3 id="ãªãœPLCã‚„ãƒªãƒ¬ãƒ¼å›è·¯ãŒãªããªã‚‰ãªã„ã‹"><a href="#ãªãœPLCã‚„ãƒªãƒ¬ãƒ¼å›è·¯ãŒãªããªã‚‰ãªã„ã‹" class="headerlink" title="ãªãœPLCã‚„ãƒªãƒ¬ãƒ¼å›è·¯ãŒãªããªã‚‰ãªã„ã‹"></a>ãªãœPLCã‚„ãƒªãƒ¬ãƒ¼å›è·¯ãŒãªããªã‚‰ãªã„ã‹</h3><p>ç‰©ç†çš„ãªIN/OUTã‚’å—ã‘å…¥ã‚Œã‚‹ã ã¨ã‹ã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢çš„ãªæ“ä½œãŒå¯èƒ½åŒ–ãªã©ã®è¦³ç‚¹ã§ä½¿ã„åˆ†ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä»¥ä¸‹ã«ã€å¤§ã¾ã‹ãªç‰¹æ€§ã‚’ã¾ã¨ã‚ã¾ã™ã€‚</p><table><thead><tr><th align="left"></th><th align="left">åˆ¶å¾¡æ–¹æ³•</th><th align="left">é•·æ‰€</th><th align="left">å¼±ç‚¹</th><th align="left">ç‰¹å¾´</th></tr></thead><tbody><tr><td align="left">ãƒªãƒ¬ãƒ¼</td><td align="left">ã‚¹ã‚¤ãƒƒãƒ(MCãªã©)ã‚„ã‚¿ã‚¤ãƒãƒ¼</td><td align="left">ãƒ»è¦æ¨¡ãŒå°ã•ã‘ã‚Œã°å®‰ä¾¡ã«æ§‹ç¯‰å¯<br>ãƒ»ãƒ†ã‚¹ã‚¿ãƒ¼ã§ä¿å®ˆãƒ¡ãƒ³ãƒ†å¯<br>ãƒ»ç‰©ç†çš„ã«é›»æµã‚’é®æ–­å¯</td><td align="left">ãƒ»ç‰©ç†æ¥ç‚¹ãŒã‚ã‚‹ãŸã‚é–‹é–‰å›æ•°ã«å¯¿å‘½ãŒã‚ã‚‹<br>ãƒ»å‹•ä½œã®å¤‰æ›´ã«ãƒãƒ¼ãƒ‰å¤‰æ›´ãŒä¼´ã„å¤§å¤‰</td><td align="left">ãƒ–ãƒ¬ãƒ¼ã‚«ã‚ã‚‹ã„ã¯ãƒ¢ãƒ¼ã‚¿ãƒ¼ã®åˆ¶å¾¡ãªã©å¤§ããªé›»æµãŒæµã‚Œã‚‹ã‚ˆã†ãªå›è·¯ã‚’æ“ä½œã™ã‚‹ã¨ãã«ä½¿ãˆã‚‹</td></tr><tr><td align="left">PLC</td><td align="left">ãƒ©ãƒ€ãƒ¼è¨€èª</td><td align="left">ãƒ»ç„¡æ¥ç‚¹ãªã®ã§æ¥ç‚¹ã«ã‚ˆã‚‹å¯¿å‘½ãŒãªã„<br>ãƒ»ãƒ¡ãƒ¢ãƒªä¸Šã«å®Ÿè£…ã•ã‚Œã‚‹å†…éƒ¨ãƒªãƒ¬ãƒ¼ã‚’ã¤ã‹ã†ãŸã‚å…¥å‡ºåŠ›ç‚¹æ•°ãŒå¢—ãˆãªã„<br>ãƒ»ã‚¿ã‚¤ãƒŸãƒ³ã‚°ç®¡ç†ãŒæ¯”è¼ƒçš„ç°¡æ˜“</td><td align="left">ãƒ»ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã«å°‚ç”¨ãƒ„ãƒ¼ãƒ«ã‚„ã‚½ãƒ•ãƒˆãŒå¿…è¦<br>ãƒ»å¤§è¦æ¨¡ã‚ã‚‹ã„ã¯é«˜åº¦ãªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®å®Ÿè£…ã«ã¯ä¸å‘ã</td><td align="left">ç¾å ´åˆ¶å¾¡æ©Ÿå™¨ã®ON/OFFãªã©ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åˆ¶å¾¡ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹å ´é¢ã§ä½¿ãˆã‚‹</td></tr><tr><td align="left">PC</td><td align="left">ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢</td><td align="left">ãƒ»OSã¨å„ç¨®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã‚ˆã£ã¦è¤‡é›‘ãªåˆ¶å¾¡ãŒå¯èƒ½<br>ãƒ»å®‰ä¾¡ã«é«˜æ€§èƒ½ãªãƒãƒ¼ãƒ‰ã‚’èª¿é”å¯èƒ½</td><td align="left">ãƒ»å‰²ã‚Šè¾¼ã¿ãŒã‚ã‚Šãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åˆ¶å¾¡ã«é›£<br>ãƒ»I/FãŒPLCã»ã©è±Šå¯Œã§ã¯ãªã„</td><td align="left">å®Ÿç¸¾ç®¡ç†ã‚„åˆ¶å¾¡æŒ‡ä»¤ã‚’è¡Œã„äººé–“ãŒç›´æ¥æ“ä½œã‚’ã™ã‚‹ã‚ˆã†ãªå ´æ‰€ã«ä½¿ãˆã‚‹</td></tr></tbody></table><p>æ˜¨ä»Šã®PCã¯éå¸¸ã«å¼·åŠ›ãªæ¼”ç®—èƒ½åŠ›ã¨è±Šå¯Œãªæ‹¡å¼µãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¦ã—ã¦ã„ã¾ã™ãŒã€ç‰¹ã«ãƒªãƒ¬ãƒ¼ã¨ã„ã£ãŸãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢çš„ã«åˆ¶å¾¡ãŒå¯èƒ½ãªæ©Ÿå™¨ãŒæ ¹çµ¶ã•ã‚Œã‚‹ã“ã¨ã¯é›£ã—ã„ã¨è€ƒãˆã¾ã™ã€‚ãã®éš›ãŸã‚‹ç†ç”±ã¨ã—ã¦ã€2ã¤æŒ™ã’ã¾ã™ã€‚ä¸€ã¤ã¯ã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢çš„ãªå‡¦ç†ã¯é›»æ°—çš„ãªãƒã‚¤ã‚ºã«å¼±ã„ã“ã¨ã§ã™ã€‚ä¾‹ãˆã°ã€åœ°çƒã«ã¯å®‡å®™ã‹ã‚‰é£›æ¥ã—ãŸè·é›»ç²’å­ãŒå¤§æ°—åœã«çªå…¥ã—ãŸéš›ã«ç”Ÿã˜ã‚‹ãƒŸãƒ¥ãƒ¼ã‚ªãƒ³ãªã©ã®è·é›»ç²’å­ãŒåœ°ä¸Šã«é™ã‚Šæ³¨ã„ã§ã„ã¾ã™ãŒã€<b>é›»è·ã‚’æŒã£ãŸç²’å­ãŒãƒ¡ãƒ¢ãƒªãªã©ã®ç´ å­ã‚’é€šéã™ã‚‹ã¨ãã“ã«ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’è½ã¨ã™</b>ã“ã¨ã§ã€ãƒ¡ãƒ¢ãƒªã‚’åè»¢ã•ã›ã‚‹ãªã©ç´ å­ã®çŠ¶æ…‹ã«å½±éŸ¿ã‚’ä¸ãˆã¾ã™<sup id="fnref:11"><a href="#fn:11" rel="footnote">11</a></sup>ã€‚ã“ã‚ŒãŒä¾‹ãˆã°ç™ºé›»æ‰€ã®ä¸»é›»æºã®ON/OFFåˆ¶å¾¡ãªã©ã§ç™ºç”Ÿã—ã¦ã—ã¾ã†ã¨ã€å¤§å¤‰ãªäº‹æ•…ã«ç¹‹ãŒã‚Šã¾ã™ã€‚ãªã®ã§ã€é‡è¦ãªè¨­å‚™ãªã©ã«ã¯æ¥µåŠ›ã‚·ãƒ³ãƒ—ãƒ«ãªãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ãŒå¥½ã¾ã‚Œã¾ã™ã€‚ã‚‚ã†ä¸€ã¤ã¯ã€é‡è¦ãªè¨­å‚™ã«å¯¾ã—ã¦ã¯æ©Ÿæ¢°çš„ãªåˆ¶å¾¡ãŒä¸å¯æ¬ ãªã“ã¨ã§ã™ã€‚ä¾‹ãˆã°ã€å·¥å ´å†…ã®ãƒ¢ãƒ¼ã‚¿ãƒ¼ã«å¤§é›»åŠ›ã‚’ä¾›çµ¦ã™ã‚‹ã‚±ãƒ¼ãƒ–ãƒ«ãŒçŸ­çµ¡ï¼ˆã‚·ãƒ§ãƒ¼ãƒˆï¼‰ã—ãŸã¨ã™ã‚‹ã¨ã€ãã“ã«å¤§é›»æµãŒæµã‚Œè¾¼ã¿ã¾ã™ã€‚å·¥å ´ã«å¼•ãè¾¼ã‚“ã§ã„ã‚‹é›»åŠ›ã¯æ±ºã¾ã£ã¦ã„ã‚‹ã®ã§ã€çªç„¶ä¸€ç®‡æ‰€ã§å¤§é‡ã®é›»åŠ›ãŒæ¶ˆè²»ã•ã‚Œã¦ã—ã¾ã£ãŸå ´åˆã€ä»–ã®æ©Ÿå™¨ã‚’å‹•ã‹ã™é›»åŠ›ãŒè¶³ã‚Šãªããªã‚Šã¾ã™ã€‚ã“ã†ã„ã£ãŸã¨ãã«ç¢ºå®Ÿã‹ã¤å³åº§ã«çŸ­çµ¡ï¼ˆã‚·ãƒ§ãƒ¼ãƒˆï¼‰ã—ãŸéƒ¨åˆ†ã®ãƒ–ãƒ¬ãƒ¼ã‚«ãƒ¼ã‚’æ“ä½œã—ã¦ã€åˆ‡ã‚Šé›¢ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã‚‚ç¢ºå®Ÿã«ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚’å‹•ã‹ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p>PLCã«ã¤ã„ã¦ã‚‚ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ€§ã‚„æ‹¡å¼µæ€§ã‚’è€ƒãˆã‚‹ã¨PCã«å‹ã‚‹éƒ¨åˆ†ã¯å¤šãã‚ã‚Šã¾ã™ã€‚ãã®ãŸã‚ã€ã“ã‚Œã‚‰ã®æ©Ÿå™¨ã¯ä»Šå¾Œã‚‚äº’ã„ã®é ˜åˆ†ã‚’ä¾µé£Ÿã™ã‚‹ã®ã§ã¯ãªãã€è£œã„åˆã†å½¢ã§åˆ¶å¾¡ç³»ã‚’æ”¯ãˆã¦ã„ãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><h2 id="è¨ˆè£…ç³»åˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ "><a href="#è¨ˆè£…ç³»åˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ " class="headerlink" title="è¨ˆè£…ç³»åˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ "></a>è¨ˆè£…ç³»åˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ </h2><p>è¨ˆè£…ã¨ã¯ã€Œè¨ˆæ¸¬å™¨ã‚’è£…å‚™ã™ã‚‹ã“ã¨ã€ã‚’æŒ‡ã—ã¾ã™ã€‚å·¥å ´ã®ä¸­ã§ã¯å¤šãã®æ©Ÿæ¢°ãŒç¨¼åƒã—ã¦ãŠã‚Šã€ã“ã‚Œã‚‰ã®æ©Ÿæ¢°ãŒå®‰å…¨ã«å‹•ä½œã—ã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã«å„ç¨®è¨ˆæ¸¬å™¨ï¼ˆã‚»ãƒ³ã‚µï¼‰ã‚’è¨­ç½®ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãã‚Œã‚‰ã‚»ãƒ³ã‚µã‹ã‚‰æƒ…å ±ã‚’å–å¾—ã—ã€ç›£è¦–ã‚ã‚‹ã„ã¯é©åˆ‡ãªåˆ¶å¾¡ã‚’è¡Œã†ã“ã¨ãŒè¨ˆè£…åˆ¶å¾¡ã®å½¹å‰²ã§ã™ã€‚</p><p>å·¥å ´ã«ãŠã‘ã‚‹è¨ˆè£…åˆ¶å¾¡ã¯ã€1970å¹´é ƒã¾ã§ã¯ç›£è¦–ç›¤ã«ã‚·ãƒ³ã‚°ãƒ«ãƒ«ãƒ¼ãƒ—ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©<sup id="fnref:12"><a href="#fn:12" rel="footnote">12</a></sup>ãŒä¸¦ã‚“ã ãƒ‘ãƒãƒ«è¨ˆè£…åˆ¶å¾¡ãŒä¸»ã§ã—ãŸã€‚ä¸€æ–¹ã€1970å¹´ä¸­é ƒã‹ã‚‰ã€è¨ˆè£…ãƒ¡ãƒ¼ã‚«ã®é–‹ç™ºã—ãŸDCS(å¾Œè¿°)ãŒæ¡ç”¨ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ãã¾ã—ãŸã€‚ã€‚</p><h3 id="DCS"><a href="#DCS" class="headerlink" title="DCS"></a>DCS</h3><p>DCS(Distributed Control System)ã¯ã€ç›£è¦–ãƒ»ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åˆ¶å¾¡ãƒ»ã‚·ãƒ¼ã‚±ãƒ³ã‚¹åˆ¶å¾¡ãªã©ã®æ©Ÿèƒ½ã‚’æŒã¤è¨ˆæ¸¬åˆ¶å¾¡ç”¨ã®ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚å¾“æ¥ã¯å€‹åˆ¥ã®ã‚·ãƒ³ã‚°ãƒ«ãƒ«ãƒ¼ãƒ—ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãŒæ¨ªã«ä¸¦ã‚“ã æ§‹æˆã ã£ãŸã®ã«å¯¾ã—ã€DCSã¯ãƒ¢ãƒ‹ã‚¿ã«ã‚ˆã‚‹ç›£è¦–ã¨æ©Ÿèƒ½ã”ã¨ã«æ¼”ç®—å‡¦ç†ï¼ˆCPUï¼‰ã‚’åˆ†å‰²ã•ã‚Œã¾ã—ãŸã€‚ã¤ã¾ã‚Šã€DCSã¯ä½•ã‚‰ã‹ã®ç‰¹å¾´ã‚’æŒã£ãŸæ©Ÿå™¨ã‚’æŒ‡ã™ã®ã§ã¯ãªãã€è¨ˆè£…åˆ¶å¾¡ã¨ã„ã†ç›®çš„ã‚’é”æˆã™ã‚‹ãŸã‚ã«è¤‡æ•°ã®æ©Ÿå™¨ãŒçµ„ã¿åˆã‚ã•ã£ã¦ã§ããŸã‚·ã‚¹ãƒ†ãƒ ã®ç·ç§°ã‚’æŒ‡ã—ã¾ã™ã€‚</p><h1 id="åˆ¶å¾¡ç³»é–‹ç™ºã¨å·¥å ´ã®ITåŒ–"><a href="#åˆ¶å¾¡ç³»é–‹ç™ºã¨å·¥å ´ã®ITåŒ–" class="headerlink" title="åˆ¶å¾¡ç³»é–‹ç™ºã¨å·¥å ´ã®ITåŒ–"></a>åˆ¶å¾¡ç³»é–‹ç™ºã¨å·¥å ´ã®ITåŒ–</h1><p>Webç³»ã‚„åŸºå¹¹ç³»ã‚ã‚‹ã„ã¯æƒ…å ±ç³»ã®é–‹ç™ºã‚’ã—ã¦ããŸæ–¹ã ã¨ã€ä¾‹ãˆã°ã‚¨ãƒƒã‚¸ã«ã‚ã£ãŸåˆ¶å¾¡æ©Ÿæ§‹ã‚’ã‚¯ãƒ©ã‚¦ãƒ‰ã«ç§»ç®¡ã—ã€é éš”ã§ã‚ã‚‰ã‚†ã‚‹æ“ä½œãŒã§ãã‚‹ã‚ˆã†ã«ã—ãŸã„ã¨è€ƒãˆã‚‹ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ã€‚ç¢ºã‹ã«ã€æŠ€è¡“çš„ã«ã¯å¯èƒ½ã§ã¯ã‚ã‚Šã¾ã™ãŒã€ãã‚Œä»¥å¤–ã®ç†ç”±ã§å®Ÿæ–½ã™ã¹ãã§ã¯ãªã„ã‚±ãƒ¼ã‚¹ãŒã‚ã‚Šã¾ã™ã€‚ã“ã“ã§ã¯ã€å·¥å ´ã«ITåŒ–ã‚’ã™ã‚‹ä¸Šã§æ°—ã«ã™ã¹ãè¦ç´ ã‚’ã„ãã¤ã‹è¿°ã¹ã¦ã„ãã¾ã™ã€‚</p><h2 id="æ©Ÿæ¢°å®‰å…¨"><a href="#æ©Ÿæ¢°å®‰å…¨" class="headerlink" title="æ©Ÿæ¢°å®‰å…¨"></a>æ©Ÿæ¢°å®‰å…¨</h2><p>æ©Ÿæ¢°è¨­å‚™ã«ã‚ˆã‚‹åŠ´åƒç½å®³ã¯ä¾ç„¶ã¨ã—ã¦å­˜åœ¨ã—ã€ç‰¹ã«è£½é€ æ¥­ã«ãŠã‘ã‚‹æ­»å‚·ç½å®³å…¨ä½“ã®ç´„4å‰²<sup id="fnref:13"><a href="#fn:13" rel="footnote">13</a></sup>ã¨ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã¯æ©Ÿæ¢°ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒéå¸¸ã«å¤§ãã„ã“ã¨ã‹ã‚‰ã€æŒŸã¾ã‚Œãƒ»å·»ãè¾¼ã¾ã‚Œãªã©ã«ã‚ˆã£ã¦èº«ä½“ã®æ¬ æã‚„æ­»äº¡ç½å®³ãŒè‡³ã‚Šã‚„ã™ã„ãŸã‚ã§ã™ã€‚è£½é€ æ¥­ç”¨ã®æ©Ÿæ¢°ã§ã‚ã‚Œã°ãã®ä½¿ç”¨çŠ¶æ³ã¯äºˆã‚æƒ³å®šå¯èƒ½ãªã®ã§ã€è¨­è¨ˆæ®µéšã§ãƒªã‚¹ã‚¯ã‚¢ã‚»ã‚¹ãƒ¡ãƒ³ãƒˆ<sup id="fnref:14"><a href="#fn:14" rel="footnote">14</a></sup>ã‚’å®Ÿæ–½ã—ã€ä½¿ç”¨è€…ãŒæ¥µåŠ›å®‰å…¨ã«ä»•äº‹ãŒã§ãã‚‹ã‚ˆã†ãªå–ã‚Šçµ„ã¿ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚</p><h3 id="æ©Ÿæ¢°å®‰å…¨ã®3åŸå‰‡"><a href="#æ©Ÿæ¢°å®‰å…¨ã®3åŸå‰‡" class="headerlink" title="æ©Ÿæ¢°å®‰å…¨ã®3åŸå‰‡"></a>æ©Ÿæ¢°å®‰å…¨ã®3åŸå‰‡</h3><p>æ©Ÿæ¢°ã®å®‰å…¨åŒ–ã‚’ã™ã™ã‚ã‚‹ä¸Šã§ã®å¤§å‰æã¯ã€ä»¥ä¸‹ã®3ã¤ã§ã™ã€‚</p><ol><li>äººã¯ãƒŸã‚¹ã‚’ã™ã‚‹</li><li>æ©Ÿæ¢°ã¯æ•…éšœã™ã‚‹</li><li>çµ¶å¯¾å®‰å…¨ã¯å­˜åœ¨ã—ãªã„</li></ol><p>ã“ã®æ–‡è¨€è‡ªä½“ã¯ITæŠ€è¡“è€…ã«ã‚‚ç´å¾—è¡Œãã‚‚ã®ã ã¨è€ƒãˆã¾ã™ãŒã€ã“ã‚Œã¨åˆã‚ã›ã¦ã€æ©Ÿæ¢°ç½å®³ã‚’ç¢ºå®Ÿã«é˜²æ­¢ã™ã‚‹ãŸã‚ã«ã€<b>æ©Ÿæ¢°å®‰å…¨ã®åŸå‰‡</b>ãŒã‚ã‚Šã¾ã™ã€‚</p><ol><li>æœ¬è³ªå®‰å…¨ã®åŸå‰‡ï¼šã€€å±é™ºè¦ç´ ï¼ˆå±é™ºæºï¼‰ã‚’é™¤å»ã€ã‚ã‚‹ã„ã¯äººã«å±å®³ã‚’ä¸ãˆãªã„ç¨‹åº¦ã«ã—ã¾ã™ã€‚è§’ã‚’ä¸¸ãã—ãŸã‚Šã€æ©Ÿæ¢°ã®ãƒ‘ãƒ¯ãƒ¼ã‚’å°ã•ãã—ãŸã‚Šã—ã¾ã™ã€‚</li><li>éš”é›¢ã®åŸå‰‡ï¼š äººãŒæ©Ÿæ¢°ã®å±é™ºæºã«æ¥è§¦ã§ããªã„ã‚ˆã†ã«ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€ï¼ˆäººã®æŒ‡ã‚‚é€šã‚‰ãªã„ã‚ˆã†ãªç¶²ç›®ã®ï¼‰æŸµã§ã‚¬ãƒ¼ãƒ‰ã‚’è¨­ã‘ã‚‹æ–¹æ³•ãªã©ãŒã‚ã‚Šã¾ã™ã€‚</li><li>åœæ­¢ã®åŸå‰‡ï¼šã€€æ©Ÿæ¢°ãŒæ­¢ã¾ã£ã¦ã„ã‚Œã°å±é™ºã§ã¯ãªããªã‚‹ã®ã§ã€ã€Œéš”é›¢ã®åŸå‰‡ã€ã§éš”é›¢ã•ã‚ŒãŸæ©Ÿæ¢°ã®å‹•ä½œç¯„å›²ã«å…¥ã‚‹å ´åˆã¯ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ­ãƒƒã‚¯ãªã©ã§æ©Ÿæ¢°ã‚’åœæ­¢ã•ã›ã¦ã‹ã‚‰å…¥å ´ã‚’è¨±å¯ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚ã“ã®ã¨ãã€ãƒ–ãƒ¬ãƒ¼ã‚«ãƒ¼ã«ä¿®ç†æœ­<sup id="fnref:15"><a href="#fn:15" rel="footnote">15</a></sup>ã‚’ã‹ã‘ã‚‹ãªã©ã—ã¦å‹•åŠ›æºè‡ªä½“ã‚’ç¢ºå®Ÿã«åˆ‡ã‚‹ã‚ˆã†ã«ã—ã¾ã™ãŒã€æ²¹åœ§ã‚’ä½¿ã£ã¦ã„ã‚‹è¨­å‚™ã®å ´åˆã¯æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚æ²¹åœ§ã®å ´åˆã€å‹•åŠ›æºï¼ˆå®Ÿéš›ã¯é›»åŠ›ã‚’ä¾›çµ¦ã™ã‚‹ãƒ–ãƒ¬ãƒ¼ã‚«ãƒ¼ï¼‰ã‚’è½ã¨ã—ãŸã¨ã—ã¦ã‚‚ã€ã‚†ã£ãã‚Šã¨æ²¹åœ§ã«ã‚ˆã£ã¦è¨­å‚™ãŒå‹•ä½œã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ãã®ãŸã‚ã€åœæ­¢ã•ã›ãŸã¨æ€ã£ãŸè¨­å‚™ãŒæ°—ã¥ã„ãŸã‚‰è¿«ã£ã¦ã„ã¦æŒŸã¾ã‚Œã‚‹ã€ãªã©ã¨ã„ã†ã“ã¨ãŒã‚ã‚‹ãŸã‚ã€æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚</li></ol><img src="/images/20200120/photo_20200120_04.png"><p>ä¸Šè¨˜ã®å‰æãŒã‚ã‚‹ãŸã‚ã€å·¥å ´ã®åˆ¶å¾¡ç³»ã‚·ã‚¹ãƒ†ãƒ ã®é–‹ç™ºè€…ã¯ã€æƒ³å®šå¤–ã®æ“ä½œã«å¯¾ã—ã¦ã¯å¿…ãšå®‰å…¨ãªçµæœã‚’ã‚‚ãŸã‚‰ã™ï¼ˆex.ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ­ãƒƒã‚¯ã«ã‹ã‹ã£ã¦å‹•ã‹ãªã„ã€ãªã©ï¼‰ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã—ã‚ˆã†ã¨ã—ã¾ã™ã€‚ã“ã†ã„ã£ãŸã‚·ã‚¹ãƒ†ãƒ ã‚’ã€æ–°ãŸã«ã‚¯ãƒ©ã‚¦ãƒ‰ã‹ã‚‰æ“ä½œã™ã‚‹ã“ã¨ã‚’è€ƒãˆã¾ã™ã€‚</p><p>ãªãŠã€ä½™è«‡ã§ã¯ã‚ã‚Šã¾ã™ãŒã€é‹è»¢ä¸­ã‚ã‚‹ã„ã¯åœæ­¢ä¸­ã‚’æ„å‘³ã™ã‚‹ãƒ©ãƒ³ãƒ—ã®è‰²ã§ã™ãŒã€ã“ã‚Œä¸€ã¤ã¨ã£ã¦ã‚‚å·¥å ´ã«ã‚ˆã£ã¦ã¯æ„å‘³ãŒç•°ãªã‚Šã¾ã™ã€‚ã‚ã‚‹å·¥å ´ã§ã¯ã€Œèµ¤ã¯<b>å±é™ºã‚’æ„å‘³ã™ã‚‹</b>è‰²ã ã‹ã‚‰é‹è»¢ä¸­ã€ç·‘ã¯<b>å®‰å…¨ã‚’æ„å‘³ã™ã‚‹</b>è‰²ã ã‹ã‚‰åœæ­¢ä¸­ã€ã§ä½¿ã‚ã‚Œã¾ã™ãŒã€åˆ¥ã®å·¥å ´ã§ã¯ã€Œç·‘ã¯<b>å®‰å®šå‹•ä½œã‚’æ„å‘³ã™ã‚‹</b>è‰²ã ã‹ã‚‰é‹è»¢ä¸­ã€èµ¤ã¯<b>ç•°å¸¸ã‚’æ„å‘³ã™ã‚‹</b>è‰²ã ã‹ã‚‰åœæ­¢ä¸­ã€ã§ä½¿ã‚ã‚Œã¦ã„ã‚‹ã“ã¨ã‚‚ã‚ã‚‹ã®ã§æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚</p><h2 id="ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£"><a href="#ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£" class="headerlink" title="ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£"></a>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£</h2><p>ã“ã‚Œã¾ã§ä½•åº¦ã‹è¿°ã¹ãŸã‚ˆã†ã«ã€å¾“æ¥ã®å·¥å ´ã®åˆ¶å¾¡ç³»ã¯ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£çš„ã«éå¸¸ã«å¼±ã„ã‚±ãƒ¼ã‚¹ãŒã‚ã‚Šã¾ã™ã€‚ç‰¹ã«NWã‚’ç‹¬ç«‹ã•ã›ã‚‹ã“ã¨ã‚’å‰æã«ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åˆ¶å¾¡ã‚’ç›®çš„ã¨ã—ã¦ã‚¦ã‚¤ãƒ«ã‚¹å¯¾ç­–ã‚½ãƒ•ãƒˆã‚„ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ã‚’çŠ ç‰²ã«ã—ã¦ã„ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã®ã§ã€ä¸€åº¦æ”»æ’ƒã‚’å—ã‘ã‚‹ã¨éå¸¸ã«å¼±ã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ãã®ãŸã‚ã€å·¥å ´IoTã®åã®ã‚‚ã¨ã«åˆ¶å¾¡ç³»ã®PCã‚’ä»–ã®NWã¨æ¥ç¶šã™ã‚‹å ´åˆã€æ¥ç¶šç‚¹ã«åˆ¥é€”ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ã‚’è¨­ã‘ã¦ç‰¹å®šã®é€šä¿¡ã®ã¿ã‚’è¨±å®¹ã™ã‚‹ã‚ˆã†ã«ã—ãŸã‚Šã€æ¥µç«¯ãªã“ã¨ã‚’è¨€ã†ã¨å¿…è¦ã®ãªã„USBãƒãƒ¼ãƒˆã‚’ã™ã¹ã¦åŸ‹ã‚ãŸã‚Šãªã©ã®å¯¾å¿œãŒå¿…è¦ã«ãªã‚Šã¾ã™<sup id="fnref:16"><a href="#fn:16" rel="footnote">16</a></sup>ã€‚ä»®ã«åˆ¶å¾¡ç³»PCã«ã‚¦ã‚¤ãƒ«ã‚¹å¯¾ç­–ã‚½ãƒ•ãƒˆã‚’å…¥ã‚ŒãŸã¨ã—ã¦ã‚‚ã€ä»Šåº¦ã¯åˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ ãŒã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã„ãƒ•ã‚¡ã‚¤ãƒ«ãŒã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚¹ã‚­ãƒ£ãƒ³ã«ã‚ˆã£ã¦ãƒ­ãƒƒã‚¯ã•ã‚ŒãŸã¾ã¾ã«ãªã‚Šãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åˆ¶å¾¡ã«å½±éŸ¿ãŒå‡ºã‚‹ãªã©ãŒã‚ã‚Šã¾ã™ã€‚ä½¿ç”¨ã™ã‚‹ç›®çš„ã¨çŠ¶æ³ã«å¿œã˜ã¦ã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ãƒ»ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã®ä¸¡é¢ã§å¯¾ç­–ã‚’ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><h1 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h1><p>ã“ã“ã¾ã§èª­ã‚“ã§é ‚ã„ãŸçš†æ§˜ã®ä¸­ã«ã¯ã€ITåˆ†é‡ã«ãŠã„ã¦è±Šå¯ŒãªçŸ¥è­˜ã¨ç†Ÿç·´ã®ã‚¹ã‚­ãƒ«ã‚’ä½µã›æŒã£ãŸæ–¹ã‚‚ã„ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚ãã‚“ãªæ–¹ã“ãã€å·¥å ´åˆ¶å¾¡ç³»ã«ã¯ã“ã‚Œã¾ã§ç›¸æ‰‹ã«ã—ã¦ããŸã®ã¨ã¯ç•°ãªã‚‹ã‚·ã‚¹ãƒ†ãƒ ãŒå°å…¥ã•ã‚Œã¦ãŠã‚Šã€ãã‚ŒãŒé›»æ°—ç³»æŠ€è¡“è€…ãŸã¡ã«ã‚ˆã£ã¦ã©ã®ã‚ˆã†ã«æ§‹ç¯‰ã•ã‚Œã¦ããŸã®ã‹ã‚’çŸ¥ã£ã¦ã„ãŸã ããŸã„ã§ã™ã€‚ä¸¡è€…ãŒèåˆã™ã‚‹ã“ã¨ã§ã€çœŸã®å·¥å ´ã®ITåŒ–ãŒè¡Œãˆã‚‹ã¨è€ƒãˆã¾ã™ã€‚</p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href="https://www.nipponsteel.com/tech/report/nssmc/pdf/411-04.pdf" target="_blank" rel="noopener">è£½é‰„ãƒ—ãƒ­ã‚»ã‚¹åˆ¶å¾¡ã¸ã®æ±ç”¨ã‚·ã‚¹ãƒ†ãƒ é©ç”¨æŠ€è¡“ã®é–‹ç™º</a></li><li><a href="https://www.ipc-ihi.co.jp/business/project/electrical/index.html" target="_blank" rel="noopener">æ ªå¼ä¼šç¤¾IHIãƒ—ãƒ©ãƒ³ãƒˆé›»æ°—ç³»ç·è¨­è¨ˆ</a></li><li><a href="https://www.jemima.or.jp/tech/1-04-02.html" target="_blank" rel="noopener">åˆ†æ•£åˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ ï¼šDCSï¼ˆãƒ‡ã‚£ã‚¸ã‚¿ãƒ«è¨ˆè£…åˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ ï¼‰</a></li><li><a href="https://www.kobelco-eco.co.jp/development/docs/017_05.pdf" target="_blank" rel="noopener">æ–°å‹DCSã®ä¸­è¦æ¨¡ãƒ—ãƒ©ãƒ³ãƒˆã¸ã®é©ç”¨</a></li><li><a href="https://www.jisha.or.jp/oshms/machinery/about01.html" target="_blank" rel="noopener">JISHA æ©Ÿæ¢°å®‰å…¨</a></li><li><a href="http://www-vlsi.es.kit.ac.jp/thesis/papers/pdfs/201701_KASOKUKI_kobayashi.pdf" target="_blank" rel="noopener">åŠå°ä½“ã®è€æ€§è©¦é¨“-åŠ é€Ÿå™¨ã«ã‚ˆã‚‹ã‚·ãƒ³ã‚°ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆè€æ€§ã®å®Ÿæ¸¬è©•ä¾¡-</a></li></ul><hr><p>é–¢é€£è¨˜äº‹ï¼š</p><ul><li><a href="/articles/20191018/">ç¬¬1å›ç¤¾å†…ãƒ­ãƒœã‚³ãƒ³é–‹å‚¬è¨˜-ãƒ©ã‚¤ãƒ³ãƒˆãƒ¬ãƒ¼ã‚µãƒ¼ç·¨-</a></li><li><a href="/articles/20190826/">ã‚½ãƒ•ãƒˆã¨ãƒãƒ¼ãƒ‰ã®å£æ ¹ã‚’è¶Šãˆã‚ - IoTãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã®é–‹ç™ºã‚’ã‚½ãƒ•ãƒˆå±‹è¦–ç‚¹ã§è§£èª¬ã—ã¾ã™</a></li><li><a href="/articles/20190723/">Future IoTã®stackshareã‚’å…¬é–‹ã—ã¾ã—ãŸ</a></li><li><a href="/articles/20170127/">3Dãƒ—ãƒªãƒ³ã‚¿ã‚’ä½¿ã£ã¦ã‚µãƒ¼ãƒ“ã‚¹é–‹ç™ºã‚„ã£ã¦ã¿ãŸ</a><div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none; padding-left: 0;"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">1.</span><span style="display: inline-block; vertical-align: top;">é›»æºä¾›çµ¦ã«ã¤ã„ã¦è©³ç´°ã«è¨˜è¿°ã™ã‚‹ã¨ã€ãƒˆãƒ©ãƒ³ã‚¹ï¼ˆå¤‰åœ§å™¨ï¼‰ã®ä»•çµ„ã¿ã‹ã‚‰ã€ä¿è­·ç¶™é›»å™¨ï¼ˆâ€»å¾Œè¿°ï¼‰ã‚„é®æ–­å™¨ã€ã¯ãŸã¾ãŸé«˜é›»åœ§ã«ãŠã‘ã‚‹é€é›»ãƒ­ã‚¹ã«ã¤ã„ã¦è¿°ã¹ã‚‹ã“ã¨ãŒã§ãã¾ã™ãŒã€ã“ã“ã§ã¯è§¦ã‚Œã¾ã›ã‚“ã€‚ã¡ãªã¿ã«ã€ä¿è­·ç¶™é›»å™¨ã«ã¤ã„ã¦ã§ã™ãŒã€é›»æ°—ç³»çµ±ä¸ŠåŒã˜é›»æºã‚’æŒã¤è¨­å‚™ã®ã†ã¡ã€ä¸€ã¤ãŒæš´èµ°ã‚ã‚‹ã„ã¯åœ°çµ¡ï¼ˆã‚·ãƒ§ãƒ¼ãƒˆï¼‰ãªã©ã—ãŸå ´åˆã€çˆ†ç™ºçš„ã«é›»åŠ›ãŒæµã‚Œè¾¼ã‚€ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ã™ã‚‹ã¨ã€æœ¬æ¥ä»–ã®é›»æ°—è¨­å‚™ã«ä¾›çµ¦ã™ã¹ãé›»åŠ›ã¾ã§å¸ã„è¾¼ã‚“ã§ã—ã¾ã„ã€çµæœã¨ã—ã¦å¥å…¨ãªè¨­å‚™ã‚’é›»æ°—ä¸è¶³ã§æ­¢ã‚ã¦ã—ã¾ã†ã“ã¨ã«ãªã‚Šã¾ã™ã€‚ã“ã‚Œã‚’é¿ã‘ã‚‹ãŸã‚ã€ä¿è­·ç¶™é›»å™¨ã¨ã„ã†ç‰¹æ®Šãªå›è·¯ã‚’ä½¿ã£ã¦ã€äº‹æ•…ãŒç½®ããŸå ´æ‰€ã‚’é©åˆ‡ã«åˆ‡ã‚Šé›¢ã—ã¾ã™ã€‚</span><a href="#fnref:1" rev="footnote"> â†©</a></li><li id="fn:2"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">2.</span><span style="display: inline-block; vertical-align: top;">ã‚·ãƒ¼ã‚±ãƒ³ã‚µã¨ã„ã†ã¨ä¸‰è±é›»æ©Ÿã®è£½å“åã§ã™ãŒã€ç™»éŒ²å•†æ¨™ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</span><a href="#fnref:2" rev="footnote"> â†©</a></li><li id="fn:3"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">3.</span><span style="display: inline-block; vertical-align: top;">æ©Ÿå™¨ã«ã‚ˆã‚Šã¾ã™ã€‚</span><a href="#fnref:3" rev="footnote"> â†©</a></li><li id="fn:4"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">4.</span><span style="display: inline-block; vertical-align: top;">æ©Ÿå™¨ã«ã‚ˆã‚Šã¾ã™ã€‚</span><a href="#fnref:4" rev="footnote"> â†©</a></li><li id="fn:5"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">5.</span><span style="display: inline-block; vertical-align: top;">ãƒªãƒŸãƒƒãƒˆã‚¹ã‚¤ãƒƒãƒã¯ç§»å‹•ã™ã‚‹æ©Ÿå™¨ãªã©ã®ä½ç½®ã‚’æ¤œå‡ºã™ã‚‹ã‚»ãƒ³ã‚µã§ã™ã€‚å°ã•ãªã‚¹ã‚¤ãƒƒãƒã‚’å†…éƒ¨ã«æŒã¡ã€æ©Ÿæ¢°æ“ä½œã‚’å—ã‘ã¦ã‚ªãƒ³/ã‚ªãƒ•æƒ…å ±ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚ä¾‹ãˆã°ãƒ©ã‚¤ãƒ³ã®çµ‚ç«¯ã«ãƒœã‚¿ãƒ³ã‚’ç½®ã„ã¦ãŠãã€å•†å“ãŒæµã‚Œã¦ããŸã¨ãã«ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã“ã¨ã§ä¿¡å·ã‚’å‡ºã™ã‚ˆã†ãªç›®çš„ã§ä½¿ã„ã¾ã™ã€‚</span><a href="#fnref:5" rev="footnote"> â†©</a></li><li id="fn:6"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">6.</span><span style="display: inline-block; vertical-align: top;">ãƒ¬ãƒ™ãƒ«è¨ˆã¯æ¶²é¢ç­‰ã®æ®‹é‡ã‚’æ¸¬ã‚‹ãŸã‚ã®è£…ç½®ã§ã€å…·ä½“çš„ã«ã¯ç‰¹å®šã®ä½ç½®ã‹ã‚‰æ¶²é¢ã¾ã§ã®è·é›¢ã‚’æ¸¬ã‚‹ãªã©ã®æ©Ÿèƒ½ã‚’æœ‰ã™ã‚‹ã‚»ãƒ³ã‚µã§ã™ã€‚æ§˜ã€…ãªæ–¹å¼ãŒã‚ã‚Šã€è¶…éŸ³æ³¢ã‚’åˆ©ç”¨ã™ã‚‹ã‚¿ã‚¤ãƒ—ã‚„ã€é‡£ã‚Šã§ä½¿ã‚ã‚Œã‚‹ã‚ˆã†ãª&quot;æµ®ã(ãƒ•ãƒ­ãƒ¼ãƒˆ)&quot;ã‚’åˆ©ç”¨ã™ã‚‹ã‚¿ã‚¤ãƒ—ã‚‚ã‚ã‚Šã¾ã™ã€‚</span><a href="#fnref:6" rev="footnote"> â†©</a></li><li id="fn:7"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">7.</span><span style="display: inline-block; vertical-align: top;">é–¾å€¤ã§ON/OFFã¨ã„ã£ã¦ã‚‚ã€ä¾‹ãˆã°24VDCï¼ˆâ€»å¾Œè¿°ï¼‰ã®å…¥å‡ºåŠ›ã‚’æŒã¤PLCã®å ´åˆã€ãã‚Œã„ã«12VDCã§ON/OFFãŒå¤‰åŒ–ã•ã‚Œã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚å›è·¯ã«ã¯å½“ç„¶ãƒã‚¤ã‚ºãŒç”Ÿã˜ã†ã‚‹ãŸã‚ã€ãã‚Œã§ãƒã‚¿ãƒã‚¿ON/OFFãŒåˆ‡ã‚Šæ›¿ã‚ã£ã¦ã¯å¤§å¤‰ã§ã™ã€‚ãã®ãŸã‚ã€22VDCä»¥ä¸Šã§ONã€2VDCä»¥ä¸‹ã§OFFã¨ãªã‚‹ã‚ˆã†ãªãƒ’ã‚¹ãƒ†ãƒªã‚·ã‚¹åˆ¶å¾¡ã‚’ã™ã‚‹ãªã©ã—ã¾ã™ã€‚ãªãŠã€VDCã¨ã¯ç›´æµé›»åœ§ã®ã“ã¨ã§ã€å·¥å ´å†…ã§å‹•ã‹ã™ãƒ¢ãƒ¼ã‚¿ãªã©ã¯ä¸‰ç›¸äº¤æµé›»æºãªã©ãŒã‚ã‚Šã€å¤ªã„é›»æºãŒ3æœ¬ã¾ã¨ã¾ã£ã¦å¼•ã‹ã‚Œã¦ã„ã‚‹ã“ã¨ã‚‚ã¾ã¾ã‚ã‚Šã¾ã™ã€‚</span><a href="#fnref:7" rev="footnote"> â†©</a></li><li id="fn:8"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">8.</span><span style="display: inline-block; vertical-align: top;">ADC = Analog Digital Converterã¯ã€ã‚¢ãƒŠãƒ­ã‚°ä¿¡å·ã‚’ãƒ‡ã‚¸ã‚¿ãƒ«ä¿¡å·ã«å¤‰æ›ã™ã‚‹ç´ å­ã§ã™ã€‚DAC = Digital Analog Converterã¯ã€ãƒ‡ã‚¸ã‚¿ãƒ«ä¿¡å·ã‚’ã‚¢ãƒŠãƒ­ã‚°ä¿¡å·ã«å¤‰æ›ã™ã‚‹ç´ å­ã§ã™ã€‚</span><a href="#fnref:8" rev="footnote"> â†©</a></li><li id="fn:9"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">9.</span><span style="display: inline-block; vertical-align: top;">ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ä¾‹ã§ã‚ã’ã‚‹ã¨ã€mainãƒ«ãƒ¼ãƒ—å†…ã«ã™ã¹ã¦ã®å‡¦ç†ãŒæ›¸ã„ã¦ã‚ã‚‹å½¢å¼ã§ã™ã€‚</span><a href="#fnref:9" rev="footnote"> â†©</a></li><li id="fn:10"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">10.</span><span style="display: inline-block; vertical-align: top;">ãƒ©ãƒ€ãƒ¼è¨€èªãŒä¸€å‘¨ã™ã‚‹ã®ã«è¦ã™ã‚‹æ™‚é–“ã§ã™ã€‚</span><a href="#fnref:10" rev="footnote"> â†©</a></li><li id="fn:11"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">11.</span><span style="display: inline-block; vertical-align: top;">å›è·¯ã«ã‚ˆã£ã¦ä¸å…·åˆãƒ¢ãƒ¼ãƒ‰ãŒç•°ãªã‚Šã€ãã‚Œã«ã‚ˆã£ã¦å‘¼ç§°ãŒç•°ãªã‚Šã¾ã™ã€‚ä¾‹ãˆã°é«˜ã‚¨ãƒãƒ«ã‚®ãƒ¼ç²’å­ã«ã‚ˆã‚Šãƒ¡ãƒ¢ãƒªã‚„ãƒ•ãƒªãƒƒãƒ—ãƒ•ãƒ­ãƒƒãƒ—ãªã©ã®è¨˜æ†¶ç´ å­ã®è¨˜æ†¶å†…å®¹ãŒåè»¢ã™ã‚‹ã¨ã€ŒSingle Event Upset(SEL)ã€ã¨å‘¼ã³ã€LSIã«å¯„ç”Ÿã™ã‚‹ã‚µã‚¤ãƒªã‚¹ã‚¿ãŒ ON çŠ¶æ…‹ã¨ãªã£ã¦å¤§é›»æµãŒæµã‚Œå‹•ä½œä¸è‰¯ã‚’èµ·ã“ã™ã¨ã€ŒSingle Event Latch up(SEL)ã€ã¨å‘¼ã³ã¾ã™ã€‚ãªãŠã€SELã¨SEUã‚’ç·ç§°ã—ã¦ã€Single Event Effect(SEE)ã¨å‘¼ã¶ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚ã¡ãªã¿ã«ã€ã‚¢ãƒƒãƒ—ã‚»ãƒƒãƒˆã¨ã¯ã€è¨˜æ†¶ã‚ã‚‹ã„ã¯ä¼é”ã«ä½¿ç”¨ã™ã‚‹é›»è·ã‚’åè»¢ã•ã›ã‚‹ã“ã¨ã‚’æŒ‡ã—ã¾ã™ã€‚</span><a href="#fnref:11" rev="footnote"> â†©</a></li><li id="fn:12"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">12.</span><span style="display: inline-block; vertical-align: top;">å·¥å ´ã‚’ã¯ã˜ã‚æ§˜ã€…ãªç”£æ¥­æ–½è¨­ã§åˆ©ç”¨ã•ã‚Œã‚‹ã€ã‚»ãƒ³ã‚µãƒ¼ã‹ã‚‰ã®æ¸¬å®šå€¤ã‚’å–ã‚Šè¾¼ã¿ã€ãã®å€¤ãŒæŒ‡å®šã—ãŸç¯„å›²å†…ã«ç¶­æŒã™ã‚‹ã‚ˆã†ã«åˆ¶å¾¡ä¿¡å·ã‚’è¡Œã†ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã§ã™ã€‚</span><a href="#fnref:12" rev="footnote"> â†©</a></li><li id="fn:13"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">13.</span><span style="display: inline-block; vertical-align: top;"><a href="https://www.jisha.or.jp/oshms/machinery/about01.html" target="_blank" rel="noopener">JISHAæ©Ÿæ¢°å®‰å…¨</a>ã«é–¢ã™ã‚‹ãƒšãƒ¼ã‚¸ã‚ˆã‚Šå¼•ç”¨ã€‚</span><a href="#fnref:13" rev="footnote"> â†©</a></li><li id="fn:14"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">14.</span><span style="display: inline-block; vertical-align: top;">ãƒªã‚¹ã‚¯ã‚¢ã‚»ã‚¹ãƒ¡ãƒ³ãƒˆã¯ã€ä½œæ¥­å ´æ‰€ã«ã‚ã‚‹å±é™ºæ€§ã‚„æœ‰å®³æ€§ã‚’ç‰¹å®šã—ã€ãƒªã‚¹ã‚¯ã‚’è¦‹ç©ã‚‚ã‚Šã€å„ªå…ˆåº¦ã«å¿œã˜ã¦ãƒªã‚¹ã‚¯ã®ä½æ¸›æªç½®ã‚’è¡Œã†ä¸€é€£ã®æ‰‹é †ã®ã“ã¨ã‚’æŒ‡ã—ã¾ã™ã€‚äº‹æ¥­è€…ã¯ãƒªã‚¹ã‚¯ã‚¢ã‚»ã‚¹ãƒ¡ãƒ³ãƒˆã®çµæœã«å¿œã˜ã¦ã€é©åˆ‡ãªåŠ´åƒç½å®³é˜²æ­¢å¯¾ç­–ã‚’æ–½ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</span><a href="#fnref:14" rev="footnote"> â†©</a></li><li id="fn:15"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">15.</span><span style="display: inline-block; vertical-align: top;">æ©Ÿæ¢°ã«ç«‹ã¡å…¥ã‚‹æ‹…å½“è€…ãŒåˆ‡æ–­ã—ãŸå‹•åŠ›æºã«ã‹ã‘ã‚‹æœ­ã§ã™ã€‚ã“ã‚Œã¯ã€Œä»Šã€‡ã€‡ï¼ˆåå‰ã‚ã‚‹ã„ã¯ãƒãƒ¼ãƒ ï¼‰ãŒç¨¼åƒã‚¨ãƒªã‚¢ã«ç«‹ã¡å…¥ã£ã¦ä½œæ¥­ã‚’ã—ã¦ã„ã‚‹ã€ã“ã¨ã‚’ç¤ºã™æœ­ã§ã€ã“ã®æœ­ã¯ã‹ã‘ãŸæœ¬äººï¼ˆã‚ã‚‹ã„ã¯é‹ç”¨æ¬¡ç¬¬ã§ã¯ãã®ãƒãƒ¼ãƒ ã®è²¬ä»»è€…ï¼‰ã®ã¿ãŒå¤–ã™ã“ã¨ãŒã§ãã€ã“ã®æœ­ãŒä¸€æšã§ã‚‚å‹•åŠ›æºã«ã‹ã‹ã£ã¦ã„ãŸã‚‰ã€ãã®å‹•åŠ›æºã‚’æŠ•å…¥ã—ã¦ã¯ã„ã‘ã¾ã›ã‚“ã€‚</span><a href="#fnref:15" rev="footnote"> â†©</a></li><li id="fn:16"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">16.</span><span style="display: inline-block; vertical-align: top;">ã™ã§ã«PCãŒå¤šãã®ä¼šç¤¾ã§ä¸€èˆ¬çš„ã«åˆ©ç”¨ã•ã‚Œã¦ã„ã¦ã€USBãƒ¡ãƒ¢ãƒªã‚’å‹æ‰‹ã«æŒ‡ã™ãªã©ã—ã¦ã„ã‘ãªã„ã“ã¨ã¯å·¥å ´ã§åƒãæ–¹ãŒç†ŸçŸ¥ã—ã¦ã„ãŸã¨ã—ã¦ã‚‚ã€æ„å¤–ã«ã•ã‚ŒãŒã¡ãªã®ãŒã€Œã‚¹ãƒãƒ›ã‚’çµ¦é›»ã™ã‚‹ãŸã‚ã«ãƒ‘ã‚½ã‚³ãƒ³ã®USBãƒãƒ¼ãƒˆã«æ¥ç¶šã—ãŸã€ã¨ã„ã†ã‚±ãƒ¼ã‚¹ã§ã™ã€‚æœ¬äººã¯é›»æºã‚’ã¨ã£ã¦ã„ã‚‹ã ã‘ã®ã¤ã‚‚ã‚Šã§ã‚ã£ã¦ã‚‚ã€ç²¾å¯†æ©Ÿæ¢°åŒå£«ãŒæ¥ç¶šã•ã‚Œã¦ã„ã‚‹ã“ã¨ã«å¤‰ã‚ã‚Šã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</span><a href="#fnref:16" rev="footnote"> â†©</a></li></ol></div></div></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h1&gt;&lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€DXãƒãƒ¼ãƒ ã®æ —ç”°ã§ã™ã€‚å‰å›ã¯&lt;a href=&quot;/articles/20191023/&quot;&gt;å·¥å ´ã‚’ãƒãƒƒã‚¯ã™ã‚‹ãŸã‚ã®åŸº
      
    
    </summary>
    
      <category term="IoT" scheme="https://future-architect.github.io/categories/IoT/"/>
    
    
      <category term="Network" scheme="https://future-architect.github.io/tags/Network/"/>
    
      <category term="Factory" scheme="https://future-architect.github.io/tags/Factory/"/>
    
  </entry>
  
  <entry>
    <title>å®Ÿè·µDrawio</title>
    <link href="https://future-architect.github.io/articles/20200116/"/>
    <id>https://future-architect.github.io/articles/20200116/</id>
    <published>2020-01-16T02:07:03.000Z</published>
    <updated>2020-01-16T03:13:01.336Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>ã‚‚ã¨ã‚‚ã¨ã¯Microsof Visioãªã©ã‚’ä½¿ã£ã¦ä½œæˆã—ã¦ã„ãŸå›³å½¢ï¼ˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å›³ã€å„ç¨®ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã€ERD..etcï¼‰ã§ã™ãŒã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãŒã‚¯ãƒ©ã‚¦ãƒ‰ï¼ˆGoogleDriveï¼‰ã«ç§»ã‚‹ã“ã¨ã§ã€ <strong>ãã®ã¾ã¾ç·¨é›†ã—ãŸã„</strong> æ¬²æ±‚ãŒä¸–ã®ä¸­ã§å¢—ã—ã¦ã„ã‚‹ã‚ˆã†ã«æ€ã„ã¾ã™ã€‚</p><p>ãã®å ´åˆã®æœ‰åŠ¹ãªãƒ„ãƒ¼ãƒ«ã¨ã—ã¦<a href="https://www.draw.io/" target="_blank" rel="noopener">draw.io</a>ã‚’åˆ©ç”¨ã™ã‚‹ã‚±ãƒ¼ã‚¹ãŒå¢—ãˆã¦ããŸã¨æ„Ÿã˜ã¾ã™ã€‚ãã“ã§å½“ç¤¾ã§è“„ç©ã—ãŸãƒŠãƒ¬ãƒƒã‚¸ã‚’æ–‡ç« åŒ–ã—ã¾ã™ã€‚</p><h1 id="Draw-io-Tips"><a href="#Draw-io-Tips" class="headerlink" title="Draw.io Tips"></a>Draw.io Tips</h1><h2 id="1-ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ"><a href="#1-ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ" class="headerlink" title="1.ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ"></a>1.ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ</h2><h3 id="1-1-å…¬å¼ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ"><a href="#1-1-å…¬å¼ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ" class="headerlink" title="1.1. å…¬å¼ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ"></a>1.1. å…¬å¼ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ</h3><p>ã¾ãšã¯ã“ã“ã‹ã‚‰å§‹ã‚ã¾ã—ã‚‡ã†ã€‚<br>ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã¯ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®åŸºæœ¬æ“ä½œãŒè©°ã¾ã£ã¦ã„ã¾ã™ã€‚<br><a href="https://about.draw.io/wp-content/uploads/2016/11/draw.io_shortcuts_basic_win_EN.pdf" target="_blank" rel="noopener">https://about.draw.io/wp-content/uploads/2016/11/draw.io_shortcuts_basic_win_EN.pdf</a></p><h2 id="2-è¨­å®š"><a href="#2-è¨­å®š" class="headerlink" title="2. è¨­å®š"></a>2. è¨­å®š</h2><h3 id="2-1-æ—¥æœ¬èªåŒ–"><a href="#2-1-æ—¥æœ¬èªåŒ–" class="headerlink" title="2.1. æ—¥æœ¬èªåŒ–"></a>2.1. æ—¥æœ¬èªåŒ–</h3><ol><li>ç”»é¢å³ä¸Šã®ğŸŒãƒãƒ¼ã‚¯ã‹ã‚‰é¸æŠã—ã¾ã™</li><li>ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒé–‹ãã®ã§ã€â€æ—¥æœ¬èªâ€ã‚’é¸æŠã—ã¾ã™</li></ol><h2 id="3-ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ"><a href="#3-ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ" class="headerlink" title="3. ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ"></a>3. ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ</h2><h3 id="3-1-ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå†…ã®æ–‡å­—ãŒå°ã•ããªã£ã¦ãã‚Œãªã„ã¨ãã®å¯¾å¿œ"><a href="#3-1-ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå†…ã®æ–‡å­—ãŒå°ã•ããªã£ã¦ãã‚Œãªã„ã¨ãã®å¯¾å¿œ" class="headerlink" title="3.1. ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå†…ã®æ–‡å­—ãŒå°ã•ããªã£ã¦ãã‚Œãªã„ã¨ãã®å¯¾å¿œ"></a>3.1. ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå†…ã®æ–‡å­—ãŒå°ã•ããªã£ã¦ãã‚Œãªã„ã¨ãã®å¯¾å¿œ</h3><ol><li>æ™®é€šã«ã‚„ã‚‹ã¨ä¸€å®šã®ãƒã‚¤ãƒ³ãƒˆã‹ã‚‰æ–‡å­—ãŒå°ã•ããªã‚Šã¾ã›ã‚“<ul><li><img src="/images/20200116/1.png" class="img-small-size" style="border:solid 1px #000000">â€“â†’<img src="/images/20200116/2.png" class="img-small-size" style="border:solid 1px #000000"></li></ul></li><li><strong>ãƒ¯ãƒ¼ãƒ‰ãƒ©ãƒƒãƒ—</strong>ã€<strong>ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆ</strong>ã®ãƒã‚§ãƒƒã‚¯ã‚’ <strong>ä¸¡æ–¹</strong> å¤–ã—ã¾ã™ã€‚ã“ã‚Œã§æ–‡å­—ãŒã©ã“ã¾ã§ã‚‚å°ã•ããªã‚Šã¾ã™<ul><li><img src="/images/20200116/3.png" class="img-small-size" style="border:solid 1px #000000">â€“â†’<img src="/images/20200116/4.png" class="img-small-size" style="border:solid 1px #000000"></li></ul></li></ol><h3 id="3-2-Lineã‚¸ãƒ£ãƒ³ãƒ—"><a href="#3-2-Lineã‚¸ãƒ£ãƒ³ãƒ—" class="headerlink" title="3.2. Lineã‚¸ãƒ£ãƒ³ãƒ—"></a>3.2. Lineã‚¸ãƒ£ãƒ³ãƒ—</h3><ul><li>ã€Œã‚¹ã‚¿ã‚¤ãƒ«ã€ã‹ã‚‰ã€ŒLine jumpsã€ã‚’é¸æŠã—ã¾ã™ã€‚<ul><li><img src="/images/20200116/5.png" class="img-small-size" style="border:solid 1px #000000">â€“â†’<img src="/images/20200116/6.png" class="img-small-size" style="border:solid 1px #000000"></li></ul></li></ul><h3 id="3-3-Lineã‚¸ãƒ£ãƒ³ãƒ—ã‚’ä¸€éƒ¨ã ã‘å›é¿ã™ã‚‹æ–¹æ³•"><a href="#3-3-Lineã‚¸ãƒ£ãƒ³ãƒ—ã‚’ä¸€éƒ¨ã ã‘å›é¿ã™ã‚‹æ–¹æ³•" class="headerlink" title="3.3. Lineã‚¸ãƒ£ãƒ³ãƒ—ã‚’ä¸€éƒ¨ã ã‘å›é¿ã™ã‚‹æ–¹æ³•"></a>3.3. Lineã‚¸ãƒ£ãƒ³ãƒ—ã‚’ä¸€éƒ¨ã ã‘å›é¿ã™ã‚‹æ–¹æ³•</h3><ul><li>ãƒ©ã‚¤ãƒ³jumpã‚’è¨­å®šã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚ˆã‚Šã‚‚å‰é¢ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã‚¸ãƒ£ãƒ³ãƒ—ã—ã¾ã›ã‚“<ul><li><img src="/images/20200116/7.png" class="img-middle-size" style="border:solid 1px #000000"></li></ul></li></ul><h3 id="3-4-ã‚¢ã‚¤ã‚³ãƒ³ã®ä½¿ã„æ–¹ãƒ»æ¤œç´¢æ–¹æ³•"><a href="#3-4-ã‚¢ã‚¤ã‚³ãƒ³ã®ä½¿ã„æ–¹ãƒ»æ¤œç´¢æ–¹æ³•" class="headerlink" title="3.4. ã‚¢ã‚¤ã‚³ãƒ³ã®ä½¿ã„æ–¹ãƒ»æ¤œç´¢æ–¹æ³•"></a>3.4. ã‚¢ã‚¤ã‚³ãƒ³ã®ä½¿ã„æ–¹ãƒ»æ¤œç´¢æ–¹æ³•</h3><ol><li>AWSã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’è¿½åŠ ã—ã¾ã™ã€‚å·¦ä¸‹ã®ã€Œãã®ä»–ã®å›³å½¢ã€ã‹ã‚‰ã‚¢ã‚¤ã‚³ãƒ³ã‚»ãƒƒãƒˆã‚’é¸æŠã—ã¾ã™</li><li>ä»¥ä¸‹ã®ã‚ˆã†ãªç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã¾ã™<ul><li><img src="/images/20200116/3-4-1.png" class="img-middle-size" style="border:solid 1px #000000"></li></ul></li><li>icon setã«ãªã„iconã‚’è¿½åŠ ã¯æ¤œç´¢ã™ã‚‹ã¨è‰²ã€…ã§ã¦ãã‚‹ã®ã§ã€æ¦‚ã­ã“ã‚Œã§é–“ã«åˆã†ã¨æ€ã„ã¾ã™<ul><li><img src="/images/20200116/3-4-2.png" class="img-small-size" style="border:solid 1px #000000"></li></ul></li><li>ã‚‚ã¡ã‚ã‚“åˆã‚ã‹ã‚‰è¦‹ãˆã¦ã„ã‚‹iconã‚‚æ¤œç´¢ã§ãã¾ã™ã€‚ç›®ã§æ¢ã™ã‚ˆã‚Šæ—©ã„ã®ã§ã€åç§°ãŒã‚ã‹ã£ã¦ã„ã‚‹å ´åˆã¯ã“ã¡ã‚‰ãŒãŠå‹§ã‚ã§ã™<ul><li><img src="/images/20200116/3-4-3.png" class="img-small-size" style="border:solid 1px #000000"></li></ul></li></ol><h3 id="3-5-LineãŒä¹±ã‚ŒãŸã¨ãã®ãƒªã‚»ãƒƒãƒˆæ–¹æ³•"><a href="#3-5-LineãŒä¹±ã‚ŒãŸã¨ãã®ãƒªã‚»ãƒƒãƒˆæ–¹æ³•" class="headerlink" title="3.5. LineãŒä¹±ã‚ŒãŸã¨ãã®ãƒªã‚»ãƒƒãƒˆæ–¹æ³•"></a>3.5. LineãŒä¹±ã‚ŒãŸã¨ãã®ãƒªã‚»ãƒƒãƒˆæ–¹æ³•</h3><p>è‰²ã€…ã‚„ã£ã¦ç·šãŒã‚°ãƒ€ã£ãŸå ´åˆã®å¯¾å¿œæ–¹æ³•ã§ã™</p><h4 id="ã‚¹ã‚¿ã‚¤ãƒ«ã®å¤‰æ›´ã§å¯¾å¿œã™ã‚‹æ–¹æ³•"><a href="#ã‚¹ã‚¿ã‚¤ãƒ«ã®å¤‰æ›´ã§å¯¾å¿œã™ã‚‹æ–¹æ³•" class="headerlink" title="ã‚¹ã‚¿ã‚¤ãƒ«ã®å¤‰æ›´ã§å¯¾å¿œã™ã‚‹æ–¹æ³•"></a><strong>ã‚¹ã‚¿ã‚¤ãƒ«ã®å¤‰æ›´ã§å¯¾å¿œã™ã‚‹æ–¹æ³•</strong></h4><ol><li>åˆæœŸçŠ¶æ…‹<ul><li><img src="/images/20200116/3-5-1.png" class="img-middle-size" style="border:solid 1px #000000"></li></ul></li><li>ã‚¹ã‚¿ã‚¤ãƒ«ã§ã€Œï¼ã€ç›´ç·šã‚’é¸æŠã—ã¾ã™<br><ul><li><img src="/images/20200116/3-5-2.png" class="img-small-size" style="border:solid 1px #000000"></li></ul></li><li>ã‚¹ãƒƒã‚­ãƒªã—ã¾ã™<ul><li><img src="/images/20200116/3-5-3.png" class="img-middle-size" style="border:solid 1px #000000"></li></ul></li></ol><h4 id="é€”ä¸­ç‚¹ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹æ–¹æ³•"><a href="#é€”ä¸­ç‚¹ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹æ–¹æ³•" class="headerlink" title="é€”ä¸­ç‚¹ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹æ–¹æ³•"></a><strong>é€”ä¸­ç‚¹ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹æ–¹æ³•</strong></h4><ol><li>åˆæœŸçŠ¶æ…‹<ul><li><img src="/images/20200116/3-5-4.png" class="img-middle-size" style="border:solid 1px #000000"></li></ul></li><li>é…ç½®ã§<code>é€”ä¸­ç‚¹ã‚’ã‚¯ãƒªã‚¢</code>ã‚’é¸æŠã—ã¾ã™<ul><li><img src="/images/20200116/photo_20200116_02.png" class="img-small-size" style="border:solid 1px #000000"></li></ul></li><li>ã‚¹ãƒƒã‚­ãƒªã—ã¾ã™<ul><li><img src="/images/20200116/3-5-6.png" class="img-middle-size" style="border:solid 1px #000000"></li></ul></li></ol><h3 id="3-6-ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ç·šã‚’é‡ã­ã‚‹ã¨å‹æ‰‹ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒãã£ä»˜ãã®ã‚’ã‚„ã‚ãŸã„"><a href="#3-6-ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ç·šã‚’é‡ã­ã‚‹ã¨å‹æ‰‹ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒãã£ä»˜ãã®ã‚’ã‚„ã‚ãŸã„" class="headerlink" title="3.6. ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ç·šã‚’é‡ã­ã‚‹ã¨å‹æ‰‹ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒãã£ä»˜ãã®ã‚’ã‚„ã‚ãŸã„"></a>3.6. ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ç·šã‚’é‡ã­ã‚‹ã¨å‹æ‰‹ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒãã£ä»˜ãã®ã‚’ã‚„ã‚ãŸã„<br></h3><ul><li>ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®Connectableã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’å¤–ã™ã¨ã€å…ˆã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’é‡ã­ã¦ã‚‚æ¥ç¶šã•ã‚Œãªããªã‚Šã¾ã™ã€‚ã‚¤ãƒ©ã‚¤ãƒ©ã™ã‚‹äº‹ãŒå¤šã„å‹•ä½œãªã®ã§ä¾¿åˆ©ã§ã™<ul><li><img src="/images/20200116/3-6.png" class="img-small-size" style="border:solid 1px #000000"></li></ul></li></ul><h2 id="4-ãƒ¬ã‚¤ãƒ¤"><a href="#4-ãƒ¬ã‚¤ãƒ¤" class="headerlink" title="4. ãƒ¬ã‚¤ãƒ¤"></a>4. ãƒ¬ã‚¤ãƒ¤</h2><h3 id="4-1-ãƒ¬ã‚¤ã‚¢ä½¿ã„æ–¹"><a href="#4-1-ãƒ¬ã‚¤ã‚¢ä½¿ã„æ–¹" class="headerlink" title="4.1. ãƒ¬ã‚¤ã‚¢ä½¿ã„æ–¹"></a>4.1. ãƒ¬ã‚¤ã‚¢ä½¿ã„æ–¹</h3><ol><li>ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®è¡¨ç¤ºã¯ã€è¡¨ç¤ºâ†’ã€Œãƒ¬ã‚¤ãƒ¤ãƒ¼ã€ã§å°çª“ãŒé–‹ãã¾ã™<ul><li><img src="/images/20200116/4-1-1.png" class="img-small-size" style="border:solid 1px #000000"></li></ul></li><li><code>+</code> ãƒãƒ¼ã‚¯ã‹ã‚‰ãƒ¬ã‚¤ãƒ¤ã‚’è¿½åŠ &lt;<ul><li><img src="/images/20200116/4-1-3.png" class="img-small-size" style="border:solid 1px #000000"></li></ul></li><li>ãƒ¬ã‚¤ãƒ¤åãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã§åç§°å¤‰æ›´<ul><li><img src="/images/20200116/4-1-4.png" class="img-small-size" style="border:solid 1px #000000"></li></ul></li></ol><h3 id="4-2-default-ãƒ¬ã‚¤ãƒ¤ã®ç½ "><a href="#4-2-default-ãƒ¬ã‚¤ãƒ¤ã®ç½ " class="headerlink" title="4.2. default ãƒ¬ã‚¤ãƒ¤ã®ç½ "></a>4.2. default ãƒ¬ã‚¤ãƒ¤ã®ç½ </h3><ul><li>è¤‡æ•°ã®ãƒ¬ã‚¤ãƒ¤ã‚’ä½¿ã†ã¨ã€ŒèƒŒæ™¯ã€ã®ä¸Šã«ã€Œãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã€ã¨ãªã‚‹ãƒ¬ã‚¤ãƒ¤ã‚’é‡ã­ã¦ä½¿ã†ã‚±ãƒ¼ã‚¹ãŒå¢—ãˆã¦ãã¾ã™</li><li>ã—ã‹ã—ã€ç·¨é›†é–‹å§‹ç›´å¾Œã¯æœ€å¾Œã®ãƒ¬ã‚¤ãƒ¤ã¯è¨˜æ†¶ã•ã‚Œãšã€æœ€ã‚‚ä¸‹ä½ã®ãƒ¬ã‚¤ãƒ¤ãŒdefaultã¨ã—ã¦é¸æŠã•ã‚Œã‚‹ãŸã‚ã€å¤‰æ›´ã—ãªã„ã¨æƒ³å®šå¤–ã®ãƒ¬ã‚¤ãƒ¤ã«æƒ³å®šå¤–ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒè¿½åŠ ã•ã‚Œã¦ã—ã¾ã„ã¾ã™<ul><li><img src="/images/20200116/4-2.png" class="img-small-size" style="border:solid 1px #000000"></li></ul></li></ul><h3 id="4-3-ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã«æ›¸ãã¹ãã‚‚ã®"><a href="#4-3-ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã«æ›¸ãã¹ãã‚‚ã®" class="headerlink" title="4.3. ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã«æ›¸ãã¹ãã‚‚ã®"></a>4.3. ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã«æ›¸ãã¹ãã‚‚ã®<br></h3><ol><li>ã“ã†ã„ã£ãŸæ§‹æˆå›³ã‚’ä½œæˆã—ã¦ã‚ã‚‹ã¨ã—ã¦<ul><li><img src="/images/20200116/4-3-1.png" class="img-small-size" style="border:solid 1px #000000"></li></ul></li><li>ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä½ç½®ã«ã‚ˆã£ã¦å‹•çš„ã«ãƒšãƒ¼ã‚¸ãŒå¢—ãˆã¾ã™ï¼ˆå³å´ã«ä½™ç™½ãŒè¿½åŠ ã•ã‚Œã¾ã™ï¼‰<ul><li><img src="/images/20200116/4-3-2.png" class="img-small-size" style="border:solid 1px #000000"></li></ul></li><li>ã‚ã‚‰ã‹ã˜ã‚ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã«æ ã‚’ä½œã£ã¦ãŠãã¨ä¾¿åˆ©ã§ã™<ul><li><img src="/images/20200116/4-3-3.png" class="img-small-size" style="border:solid 1px #000000"></li></ul></li></ol><p>ã¡ãªã¿ã«ã€ãƒšãƒ¼ã‚¸è¨­å®šã¯ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®<code>ãƒ•ã‚¡ã‚¤ãƒ«</code>ã‹ã‚‰é¸æŠã—ã¾ã™ã€‚</p><p>ã“ã¡ã‚‰ã‚‚defaultã¯<code>A4</code>ã«ãªã£ã¦ã„ã‚‹ãŸã‚å¿…è¦ã«å¿œã˜ã¦å¤‰æ›´ãŒå¿…è¦ã§ã™ã€‚æ„Ÿè¦šçš„ã«ã€ã“ã†ã„ã£ãŸå›³å½¢ã¯<code>A3</code>ä»¥ä¸Šã®ã‚±ãƒ¼ã‚¹ãŒå¤šã„æ°—ãŒã—ã¾ã™ã€‚</p><ul><li><img src="/images/20200116/photo_20200116_03.png" class="img-small-size" style="border:solid 1px #000000"></li><li><img src="/images/20200116/photo_20200116_04.png" class="img-small-size" style="border:solid 1px #000000"></li></ul><h3 id="4-4-ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’-To-Front-Backã™ã‚‹ã¨ãã«æ°—ã‚’ã¤ã‘ã‚‹ã“ã¨"><a href="#4-4-ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’-To-Front-Backã™ã‚‹ã¨ãã«æ°—ã‚’ã¤ã‘ã‚‹ã“ã¨" class="headerlink" title="4.4. ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ To Front/Backã™ã‚‹ã¨ãã«æ°—ã‚’ã¤ã‘ã‚‹ã“ã¨"></a>4.4. ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ To Front/Backã™ã‚‹ã¨ãã«æ°—ã‚’ã¤ã‘ã‚‹ã“ã¨</h3><ul><li>å‰è¿°ã®é€šã‚Šã€defaultè¡¨ç¤ºã¯æœ€ä¸‹ä½ã®ãƒ¬ã‚¤ãƒ¤ãªã®ã§ã€ãƒ¬ã‚¤ãƒ¤ã‚’åˆ‡ã‚Šæ›¿ãˆã¦ã‚ã’ãªã„ã¨<code>ã‚ã‚Œï¼Ÿä¸Šã«ã„ã‹ãªã„ãï¼Ÿ</code>ãŒæœ¬å½“ã«ã‚ˆããƒãƒã‚‹ã‚±ãƒ¼ãƒ«ã§ã™<ul><li><img src="/images/20200116/4-4.png" class="img-small-size" style="border:solid 1px #000000"></li></ul></li></ul><h3 id="4-5-ãƒ¬ã‚¤ãƒ¤ã‚’è·¨ã„ã ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚³ãƒ”ãƒ¼"><a href="#4-5-ãƒ¬ã‚¤ãƒ¤ã‚’è·¨ã„ã ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚³ãƒ”ãƒ¼" class="headerlink" title="4.5. ãƒ¬ã‚¤ãƒ¤ã‚’è·¨ã„ã ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚³ãƒ”ãƒ¼"></a>4.5. ãƒ¬ã‚¤ãƒ¤ã‚’è·¨ã„ã ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚³ãƒ”ãƒ¼<br></h3><p><code>èƒŒæ™¯</code>ãƒ¬ã‚¤ãƒ¤ã®ã¿ã§ç·¨é›†ã‚’é–‹å§‹ã—ã€<code>èƒŒæ™¯</code>ã¨ä¸Šä½ã®<code>ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</code>ã«åˆ†ã‘ãŸã„å ´åˆã€ä¸€æ‹¬ã§ã‚³ãƒ”ãƒ¼ã—ãŸããªã‚Šã¾ã™ã€‚<br><img src="/images/20200116/photo_20200116_05.png" class="img-small-size" style="border:solid 1px #000000"><br>â†“ãƒ¬ã‚¤ãƒ¤ã‚’è¶³ã—ã¾ã™ã€‚<br><img src="/images/20200116/photo_20200116_06.png" class="img-small-size" style="border:solid 1px #000000"><br>â†“ã‚³ãƒ”ãƒ¼ã—ãŸã„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’<code>ã‚«ãƒƒãƒˆ</code>ã—ã¾ã™ã€‚<br><img src="/images/20200116/photo_20200116_07.png" class="img-small-size" style="border:solid 1px #000000"><br>â†“ä¸Šä½ãƒ¬ã‚¤ãƒ¤é¸æŠçŠ¶æ…‹ã§<code>ãƒšãƒ¼ã‚¹ãƒˆã—ã¾ã™</code><br><img src="/images/20200116/photo_20200116_08.png" class="img-small-size" style="border:solid 1px #000000"><br>â†“è¦‹ãŸç›®ã¯å¤‰ã‚ã‚Šã¾ã›ã‚“ãŒã€<code>ãƒšãƒ¼ã‚¹ãƒˆã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ</code>ã¯ç§»å‹•ã—ã¾ã™ã€‚<br><img src="/images/20200116/photo_20200116_09.png" class="img-small-size" style="border:solid 1px #000000"></p><h2 id="5-ä¿å­˜ã®æ–¹æ³•"><a href="#5-ä¿å­˜ã®æ–¹æ³•" class="headerlink" title="5. ä¿å­˜ã®æ–¹æ³•"></a>5. ä¿å­˜ã®æ–¹æ³•</h2><h3 id="5-1-ç”»åƒã«ãƒ¡ã‚¿æ³•æƒ…å ±ã‚’å«ã‚ã¦ç·¨é›†ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹"><a href="#5-1-ç”»åƒã«ãƒ¡ã‚¿æ³•æƒ…å ±ã‚’å«ã‚ã¦ç·¨é›†ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹" class="headerlink" title="5.1. ç”»åƒã«ãƒ¡ã‚¿æ³•æƒ…å ±ã‚’å«ã‚ã¦ç·¨é›†ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹"></a>5.1. ç”»åƒã«ãƒ¡ã‚¿æ³•æƒ…å ±ã‚’å«ã‚ã¦ç·¨é›†ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹<br></h3><p>ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã§ã€<strong>PNG</strong> or <strong>SVG</strong> ã‚’é¸ã³ã¾ã™<br><img src="/images/20200116/photo_20200116_10.png" class="img-small-size" style="border:solid 1px #000000"><br>â†“ã“ã®2ç¨®é¡ã®ã¿ã€<code>ãƒ€ã‚¤ã‚¢ã‚°ãƒ©ãƒ ã‚’ã‚³ãƒ”ãƒ¼ã«å«ã‚ã‚‹</code>ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚<br>ã“ã‚Œã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã¨ã€ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ãŸpng or svgã‚’Draw.ioã§é–‹ãã¨ã€<strong>ç·¨é›†å¯èƒ½ãªç”»åƒ</strong>ãŒå‡ºæ¥ä¸ŠãŒã‚Šã¾ã™ã€‚<br><img src="/images/20200116/photo_20200116_11.png" class="img-small-size" style="border:solid 1px #000000"></p><h3 id="5-2-githubã®ãƒ•ã‚¡ã‚¤ãƒ«ã¨Drawioã‚’ç´ä»˜ã‘ã‚‹"><a href="#5-2-githubã®ãƒ•ã‚¡ã‚¤ãƒ«ã¨Drawioã‚’ç´ä»˜ã‘ã‚‹" class="headerlink" title="5.2. githubã®ãƒ•ã‚¡ã‚¤ãƒ«ã¨Drawioã‚’ç´ä»˜ã‘ã‚‹"></a>5.2. githubã®ãƒ•ã‚¡ã‚¤ãƒ«ã¨Drawioã‚’ç´ä»˜ã‘ã‚‹<br></h3><p>å…¬å¼ã«ã‚ã‚‹æ‰‹é †ã®é€šã‚Šã§é€£æºå¯èƒ½ã¨ãªã‚Šã¾ã™ã€‚<br><br><a href="https://about.draw.io/github-support/" target="_blank" rel="noopener">https://about.draw.io/github-support/</a><br>é–‹ãã§Githubã‚’é¸æŠã—ã€èªè¨¼ã‚’ã™ã‚‹ã“ã¨ã§ç·¨é›†å¯èƒ½ã«ãªã‚Šã¾ã™ã€‚<br><img src="/images/20200116/photo_20200116_12.png" class="img-middle-size" style="border:solid 1px #000000"></p><h1 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h1><p>draw.ioã‚’ä¸Šæ‰‹ãä½¿ãˆã°ã€Visioã‚„Excelã«é ¼ã‚‹ã“ã¨ãªãã‚·ã‚¹ãƒ†ãƒ çš„ãªæ§‹æˆå›³ã‚’ç”Ÿç”£æ€§é«˜ãæ‰±ãˆã‚‹ã‚ˆã†ã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚ä¸€æ–¹ã§ã€Visioã‚„Excelã«æ…£ã‚ŒãŸäººã«ã¨ã£ã¦ã¯ã€æ“ä½œæ€§ã«ç™–ãŒã‚ã‚Šè‰²ã€…ãƒãƒã‚‹ã¨ã“ã‚ã‚‚å¤šã„ã¨æ€ã„ä»Šå›ã®ã‚ˆã†ãªâ€ã¾ã¨ã‚â€ã‚’ä½œæˆã—ã¾ã—ãŸã€‚</p><p>ä»–ã«ã‚‚ã“ã‚“ãªãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ãŒã‚ã‚‹ã‚ˆã€ã¨ã„ã†æ–¹ãŒã„ã¾ã—ãŸã‚‰ãœã²Twitterã‚„ã¯ã¦ã¶ãªã©ã§ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã„ãŸã ã‘ã‚Œã°ã¨æ€ã„ã¾ã™ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h1&gt;&lt;p&gt;ã‚‚ã¨ã‚‚ã¨ã¯Microsof Visioãªã©ã‚’ä½¿ã£ã¦ä½œæˆã—ã¦ã„ãŸå›³å½¢ï¼ˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å›³ã€å„ç¨®ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã€ERD..etcï¼‰ã§ã™ãŒ
      
    
    </summary>
    
      <category term="Design" scheme="https://future-architect.github.io/categories/Design/"/>
    
    
      <category term="draw.io" scheme="https://future-architect.github.io/tags/draw-io/"/>
    
  </entry>
  
  <entry>
    <title>æ‰“éµãƒ†ã‚¹ãƒˆã‚’CIã§å›ã™ï¼šCypress on GitHub Actions</title>
    <link href="https://future-architect.github.io/articles/20200115/"/>
    <id>https://future-architect.github.io/articles/20200115/</id>
    <published>2020-01-15T00:25:42.000Z</published>
    <updated>2020-01-15T02:11:55.895Z</updated>
    
    <content type="html"><![CDATA[<p>ã¤ã‚‰ã„æ‰“éµãƒ†ã‚¹ãƒˆã‚’CIã§å›ã—ã¦ã€ãƒ†ã‚¹ãƒˆçµæœã‚’Webãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ãƒãƒ¼ãƒ å†…ã«å…±æœ‰ã—ã‚ˆã†ã¨ã„ã†ãŠè©±ã§ã™ã€‚</p><hr><p>ã¯ã˜ã‚ã¾ã—ã¦ã€‚æ‡æ¦”ï¼ˆã³ã‚ã†ï¼‰ã§ã™ã€‚ã‚µãƒ¼ãƒå†…ã®è„†å¼±æ€§ã‚’æ¤œå‡ºã—ã¦ç®¡ç†ã™ã‚‹Webã‚µãƒ¼ãƒ“ã‚¹ã€FutureVuls( <a href="https://vuls.biz/" target="_blank" rel="noopener">https://vuls.biz/</a> )ã®é–‹ç™ºã‚’ã—ã¦ã„ã¾ã™ã€‚</p><p>100å°ã‹ã‚‰æ•°åƒå°ã¨ã„ã£ãŸå¤§è¦æ¨¡ãªã‚µãƒ¼ãƒé‹ç”¨ã‚’ã—ã¦ã„ã‚‹æ–¹å‘ã‘ã®ã€ã‚µãƒ¼ãƒå†…ã®è„†å¼±æ€§æƒ…å ±ç®¡ç†ã‚’æ¥½ã«ã™ã‚‹Webã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚OSSã®è„†å¼±æ€§ã‚¹ã‚­ãƒ£ãƒŠ<a href="https://github.com/future-architect/vuls" target="_blank" rel="noopener">Vuls</a>ã«ã€ãƒãƒ¼ãƒ é‹ç”¨å‘ã‘ã®æ©Ÿèƒ½ï¼ˆã‚¿ã‚¹ã‚¯ç®¡ç†ãƒ»è‡ªå‹•ãƒˆãƒªã‚¢ãƒ¼ã‚¸ãƒ»ä»–ãƒãƒ¼ãƒ ã¸æƒ…å ±å…±æœ‰ãƒ»è„†å¼±æ€§æƒ…å ±ã®ãƒªã‚¹ãƒˆç®¡ç†ãªã©ï¼‰ã‚’è¿½åŠ ã—ãŸã‚‚ã®ã«ãªã‚Šã¾ã™ã€‚</p><p><a href="https://vuls.biz/" target="_blank" rel="noopener">https://vuls.biz/</a> ã®å³ä¸Šã‹ã‚‰æ–°è¦ç™»éŒ²ã§ã™ãã«ä½¿ãˆã‚‹ã®ã§ã€ãœã²ãŠè©¦ã—ãã ã•ã„ã€‚</p><h2 id="ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ†ã‚¹ãƒˆãŒæ‰“éµã«ãªã‚ŠãŒã¡å•é¡Œ"><a href="#ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ†ã‚¹ãƒˆãŒæ‰“éµã«ãªã‚ŠãŒã¡å•é¡Œ" class="headerlink" title="ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ†ã‚¹ãƒˆãŒæ‰“éµã«ãªã‚ŠãŒã¡å•é¡Œ"></a>ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ†ã‚¹ãƒˆãŒæ‰“éµã«ãªã‚ŠãŒã¡å•é¡Œ</h2><p>ã•ã¦ã€ãã‚“ãªFutureVulsã€‚ç”»é¢å´ã¯Reactã€è£å´ã¯ã„ãã¤ã‚‚ã®ã‚³ãƒ³ãƒ†ãƒŠã¨ã„ã†æ§‹æˆã§å‹•ã„ã¦ã„ã¾ã™ã€‚</p><p>AWS ä¸Šã§ã‚³ãƒ³ãƒ†ãƒŠã‚’ç«‹ã¡ä¸Šã’ã¦ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã™ã‚‹ã¿ãŸã„ãªã“ã¨ã€å¢—ãˆã¦ãã¾ã—ãŸã‚ˆã­ã€‚ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã ã¨ã‚¹ã‚±ãƒ¼ãƒ«ãƒ»å†—é•·åŒ–ãŒç°¡å˜ã§ã€éšœå®³ãŒç½®ããŸã¨ãã®å¯¾å¿œã‚„ä¿å®ˆãŒè¡Œã„ã‚„ã™ã„ã¨ã„ã£ãŸãƒ¡ãƒªãƒƒãƒˆã‚‚ãŸãã•ã‚“ã‚ã‚Šã¾ã™ã€‚</p><p>ã—ã‹ã—ãªãŒã‚‰ã€å°å…¥ã™ã‚‹ä¸Šã§å„ä»‹ãªã®ãŒãƒ†ã‚¹ãƒˆã€‚å„ã‚³ãƒ³ãƒ†ãƒŠã®ä¸­ã§å˜ä½“ãƒ†ã‚¹ãƒˆãŒã—ã£ã‹ã‚Šæ›¸ã‹ã‚Œã¦ã„ã¦ã‚‚ã€ãã‚Œãã‚Œã®ã‚³ãƒ³ãƒ†ãƒŠãŒãã¡ã‚“ã¨ç¹‹ãŒã£ã¦ã„ã‚‹ã‹ã©ã†ã‹ã€æ„å›³ã—ãŸå‡¦ç†ãŒè¡Œã‚ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹ç¢ºèªã™ã‚‹ãŸã‚ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç«¯æœ«ã‹ã‚‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã‚‚ã¨ã«ã—ãŸãƒ†ã‚¹ãƒˆãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚</p><p>ã‚³ãƒ³ãƒ†ãƒŠã®ä¸­ã¯masterã«ãƒãƒ¼ã‚¸ã™ã‚‹éš›ã«ãƒ†ã‚¹ãƒˆã‚’å›ã—ã¦ã„ã‚‹ã‘ã‚Œã©ã‚‚ã€æœ€çµ‚çš„ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’è¡Œã†éš›ã«ã¯Excelã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’è¦‹ãªãŒã‚‰ã€Webç”»é¢ã‚’ãƒãƒãƒãƒå©ã„ã¦ã®æ‰“éµãƒ†ã‚¹ãƒˆã«ãªã£ã¦ã—ã¾ã£ã¦ã„ã‚‹ã€‚ãã‚“ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚‚å¤šã„ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚</p><p>Excelã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’è¦‹ãªãŒã‚‰ãƒãƒãƒãƒå©ã„ã¦ã€éƒ½åº¦ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã£ã¦ã¾ã¨ã‚ã‚‹ã€‚ãã‚“ãªãƒ†ã‚¹ãƒˆã‚’ä½•åº¦ã‹è¡Œã„ã¾ã—ãŸãŒã€ãã‚Œã ã¨æ°—è»½ã«ãƒ†ã‚¹ãƒˆã¨ã¯ã„ã‹ãšã€ãƒªãƒªãƒ¼ã‚¹ã‚’è¡Œã†éš›ã«ã‚‚ãƒ†ã‚¹ãƒˆå·¥æ•°ãŒã‹ãªã‚Šå¿…è¦ã«ãªã‚Šã¾ã™ã—ã€ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚‚è¡Œã„ã¥ã‚‰ã„ã®ã§ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£çš„ã«ã‚‚å•é¡ŒãŒå‡ºã¦ãã¾ã™ã€‚</p><h2 id="æ‰“éµãƒ†ã‚¹ãƒˆã‚’è‡ªå‹•åŒ–ã™ã‚‹OSS-Cypress"><a href="#æ‰“éµãƒ†ã‚¹ãƒˆã‚’è‡ªå‹•åŒ–ã™ã‚‹OSS-Cypress" class="headerlink" title="æ‰“éµãƒ†ã‚¹ãƒˆã‚’è‡ªå‹•åŒ–ã™ã‚‹OSS Cypress"></a>æ‰“éµãƒ†ã‚¹ãƒˆã‚’è‡ªå‹•åŒ–ã™ã‚‹OSS Cypress</h2><p>æ‰“éµãƒ†ã‚¹ãƒˆè‡ªå‹•åŒ–ã—ãŸã„ã§ã™ã‚ˆã­</p><p>ã§ãã‚Œã°ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã«ä¸æ…£ã‚Œãªäººã§ã‚‚ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ãŒæ›¸ã‘ã¦ã€å‹•ä½œä¸­ã®æ§˜å­ã‚’ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆãªã©ã§ä¿å­˜ã—ã¦ãã‚Œã‚‹ã¨ã‚¨ãƒ“ãƒ‡ãƒ³ã‚¹ã§ä½¿ãˆã‚‹ã®ã§å¬‰ã—ã„ã€‚ãã‚“ãªè¦æœ›ã«å¿œãˆã¦ãã‚Œã‚‹OSSãŒCypressã§ã™</p><img src="/images/20200118/photo_20200118_01.png" class="img-middle-size"><p><a href="https://www.cypress.io/" target="_blank" rel="noopener">https://www.cypress.io/</a></p><p>Cypressã¯ãƒ–ãƒ©ã‚¦ã‚¶ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«ã§ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ†ã‚¹ãƒˆã‚’ã‹ãªã‚Šã‚·ãƒ³ãƒ—ãƒ«ã«è¡Œãˆã‚‹ä»•çµ„ã¿ã‚’æä¾›ã—ã¦ãã‚Œã¦ã„ã¾ã™ã€‚ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®éƒ¨åˆ†ã ã‘ã‚’å˜ä½“ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ã«ã‚‚ä½¿ãˆã‚‹ã®ã§ã™ãŒã€çµ±åˆãƒ†ã‚¹ãƒˆã‚„End to End ãƒ†ã‚¹ãƒˆã«ã‚‚ä½¿ãˆã‚‹ä¾¿åˆ©ãªå­ã§ã™ã€‚</p><p>ä¼¼ãŸã‚ˆã†ãªãƒ„ãƒ¼ãƒ«ã«SeleniumãŒã‚ã‚Šã¾ã™ã€‚ä¸¡æ–¹ã¨ã‚‚ç”»é¢ã®ãƒ†ã‚¹ãƒˆã«ç”¨ã„ã‚‰ã‚Œã¦ã„ã¦ã€GitHub Actionsã«ã‚‚çµ„ã¿è¾¼ã‚ã‚‹åŒã˜ã‚ˆã†ãªä½¿ã„æ–¹ãŒã§ãã‚‹ãƒ„ãƒ¼ãƒ«ãªã®ã§ã™ãŒå°‘ã—å·®ç•°ãŒã‚ã‚Šã¾ã™ã€‚</p><p>Seleniumã¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¶Šã—ã«ãƒ–ãƒ©ã‚¦ã‚¶ã‚’è‡ªå‹•æ“ä½œã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã€ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã¨ã‹æ“ä½œã®è‡ªå‹•åŒ–ã¨ã„ã£ãŸãƒã‚¯ãƒ­ã®ã‚ˆã†ãªä½¿ã„æ–¹ã‚’ã—ã¦ãƒ†ã‚¹ãƒˆã‚’è¡Œã„ã¾ã™ã€‚</p><p>å¯¾ã—ã¦Cypressã¯Webç”»é¢ã®ãƒ†ã‚¹ãƒˆç›®çš„ã«ç‰¹åŒ–ã—ãŸãƒ„ãƒ¼ãƒ«ã§ã™ã€‚å‹•çš„ãªç”»é¢ã®æ›¸ãæ›ãˆå®Œäº†ã™ã‚‹ã¾ã§å¾…ã£ãŸã‚Šã€ãƒœã‚¿ãƒ³ãŒdisableè¨­å®šã§è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã—ãŸã‚Šã€éåŒæœŸãªãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒçµ‚ã‚ã‚‹ã¾ã§å¾…ã£ãŸã‚Šã¨ã„ã£ãŸã“ã¨ã¾ã§è¡Œãˆã¾ã™ã€‚ã•ã‚‰ã«å‡¦ç½®ã¯æ‰‹å…ƒã§è¡Œã‚ã‚Œã‚‹ã®ã§å‹•ä½œã‚‚ãã³ãã³ã¨ã—ã¦ãŠã‚Šã€ãƒˆãƒ©ã‚¤ï¼†ã‚¨ãƒ©ãƒ¼ã‚‚è¡Œã„ã‚„ã™ãå®Ÿè¡Œæ™‚é–“ã‚‚çŸ­ç¸®ã§ãã¾ã™ã€‚</p><p>ã¾ãŸã€ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆãŒæ¬²ã—ã„ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ <code>cy.screenshot</code> ã¨å…¥ã‚Œã¦ãŠãã¨specã”ã¨ã«åˆ†ã‹ã‚ŒãŸãƒ•ã‚©ãƒ«ãƒ€ã«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’ä¿å­˜ã—ã¦ãã‚Œã¾ã™ã€‚ã•ã‚‰ã«ã¯ãƒ†ã‚¹ãƒˆé–‹å§‹ã‹ã‚‰å®Œäº†ã¾ã§å®Ÿè¡Œã®æ§˜å­ã‚’mp4å½¢å¼ã®å‹•ç”»ã«ã—ã¦ãã‚ŒãŸã‚Šã‚‚ã—ã¾ã™ã€‚</p><p>å€‹äººçš„ãªè©±ã§ã™ãŒãŸã¾ã«ç–²ã‚ŒãŸã¨ãã€æ± ã®é¯‰ã‚’è¦‹ã‚‹ã‚ˆã†ãªæ„Ÿè¦šã§Cypressã®ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã®æ§˜å­ã‚’çœºã‚ã¦ã„ãŸã‚Šã—ã¾ã™ã€‚å‰²ã¨ç™’ã‚„ã•ã‚Œã¾ã™ã€‚</p><h2 id="ä»Šå›èª¬æ˜ã™ã‚‹ã“ã¨"><a href="#ä»Šå›èª¬æ˜ã™ã‚‹ã“ã¨" class="headerlink" title="ä»Šå›èª¬æ˜ã™ã‚‹ã“ã¨"></a>ä»Šå›èª¬æ˜ã™ã‚‹ã“ã¨</h2><img src="/images/20200118/photo_20200118_02.png">ã¾ãšã¯æ‰‹å…ƒã®PCã§Cypressã‚’å‹•ã‹ã—ãŸã®ã¡ã€GitHub Actionsã«ä¹—ã›ã¦CIå†…ã§å®Ÿè¡Œã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚æ¬¡ã«å®Ÿè¡Œçµæœã‚’Webä¸Šã«ä¿å­˜ã§ãã‚‹CypressDashboardã®ç´¹ä»‹ã€æœ€å¾Œã«CIã‚’ã¤ãªã’ã‚‹ã¨ã“ã‚ã¾ã§è¡Œã£ã¦ã¿ã¾ã™ã€‚<h2 id="å°å…¥æ–¹æ³•"><a href="#å°å…¥æ–¹æ³•" class="headerlink" title="å°å…¥æ–¹æ³•"></a>å°å…¥æ–¹æ³•</h2><p>nodejsã®å…¥ã£ã¦ã„ã‚‹ç«¯æœ«ã§E2Eç”¨ã®ãƒ¬ãƒã‚¸ãƒˆãƒªã‚’ä½œã£ã¦ã€</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> npx cypress open</span></span><br></pre></td></tr></table></figure><p>ã§ã€çµ‚ã‚ã‚Šã€‚ç°¡å˜ã€‚<br>ã—ã°ã‚‰ããƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãªã©ã®å‡¦ç†ãŒèµ°ã£ãŸã‚ã¨ã€Cypressã®ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚<br><img src="/images/20200118/photo_20200118_03.png"></p><p>è©¦ã—ã« <code>actions.spec.js</code> ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®ã‚µãƒ³ãƒ—ãƒ«ã¨ã—ã¦ <code>https://example.cypress.io/commands/actions</code> ã¸ã®ãƒ†ã‚¹ãƒˆãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚</p><p>å®Ÿè¡Œã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä¸­ã«ã¯ <code>cypress.json</code> ã¨ã„ã†è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¨ <code>cypress</code> ã¨ã„ã†ãƒ•ã‚©ãƒ«ãƒ€ãŒã§ãã¦ã¾ã™ã€‚<code>cypress.json</code> ã¯ã‚³ãƒ³ãƒ•ã‚£ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã¾ã§ã®æ™‚é–“ã‚„ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã®å‡ºåŠ›å…ˆãƒ•ã‚©ãƒ«ãƒ€ã‚’å¤‰ãˆãŸã„ã¨ãã¯ã“ã“ã‚’å¤‰æ›´ã—ã¾ã—ã‚‡ã†ã€‚<br><a href="https://docs.cypress.io/guides/references/configuration.html" target="_blank" rel="noopener">https://docs.cypress.io/guides/references/configuration.html</a></p><p><code>cypress</code> ãƒ•ã‚©ãƒ«ãƒ€ã«ã¯ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒå«ã¾ã‚Œã¾ã™ã€‚<br><code>cypress\integration\examples\</code> å†…ã®spec.jsãƒ•ã‚¡ã‚¤ãƒ«ãŒãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ã‚µãƒ³ãƒ—ãƒ«ã«ãªã£ã¦ã„ã‚‹ã®ã§ã€å‚è€ƒã«æ›¸ãæ›ãˆã¦ã„ãã¾ã—ã‚‡ã†ã€‚</p><h1 id="Cypressã®æ›¸ãæ–¹"><a href="#Cypressã®æ›¸ãæ–¹" class="headerlink" title="Cypressã®æ›¸ãæ–¹"></a>Cypressã®æ›¸ãæ–¹</h1><p>Cypressã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ( <a href="https://docs.cypress.io/" target="_blank" rel="noopener">https://docs.cypress.io/</a> )ã‚’è¦‹ã‚‹ã¨éå¸¸ã«æ§˜ã€…ãªã‚³ãƒãƒ³ãƒ‰ã‚„ãƒ†ã‚¹ãƒˆæ–¹æ³•ãŒã‚ã‚‹ã®ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚<br>ãŸãã•ã‚“ã‚ã£ã¦ç‰©æ€–ã˜ã—ã¦ã—ã¾ã„ã¾ã™ãŒã€ã¾ãšã¯ <code>cy.contain()</code> <code>cy.get()</code> <code>cy.click()</code>ã®3ã¤ã‚’è¦šãˆã‚Œã°ç°¡å˜ãª Web ãƒšãƒ¼ã‚¸ã®ãƒ†ã‚¹ãƒˆãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// &lt;reference types="Cypress" /&gt;</span></span><br><span class="line"></span><br><span class="line">context(<span class="string">'Actions'</span>, () =&gt; &#123;</span><br><span class="line">  beforeEach(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    cy.visit(<span class="string">'https://future-architect.github.io/'</span>) <span class="comment">//ãƒ†ã‚¹ãƒˆã‚’è¡Œã†å¯¾è±¡ã®ãƒšãƒ¼ã‚¸ã‚’å…¥åŠ›</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">it(<span class="string">'contain() get() click() ã®ã‚µãƒ³ãƒ—ãƒ«'</span>, () =&gt; &#123;</span><br><span class="line">    <span class="comment">// ãƒšãƒ¼ã‚¸å†…ã« `ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼é–‹ç™ºè€…ãƒ–ãƒ­ã‚°` ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª</span></span><br><span class="line">    cy.contains(<span class="string">'ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼é–‹ç™ºè€…ãƒ–ãƒ­ã‚°'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ãƒšãƒ¼ã‚¸å†…ã« `logo-img`ã‚’ã‚¯ãƒ©ã‚¹ã«æŒã¤imgã‚¿ã‚°ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª</span></span><br><span class="line">    cy.get(<span class="string">'img.logo-img'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// `.blog-sidebar`(ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®ã‚¯ãƒ©ã‚¹)ã‹ã‚‰ `Culture`ã‚’æ¢ã—ã¦ã‚¯ãƒªãƒƒã‚¯</span></span><br><span class="line">    cy.get(<span class="string">'.blog-sidebar'</span>).contains(<span class="string">'Culture'</span>).click()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ã“ã†ãªã‚Šã¾ã™ã€‚</p><img src="/images/20200118/photo_20200118_04.jpg"><p>å·¦å´ã«ãƒ†ã‚¹ãƒˆã®å†…å®¹ã€å³å´ã«ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã®æ§˜å­ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p><img src="/images/20200118/photo_20200118_05.png"><p>ãƒ†ã‚¹ãƒˆãŒã™ã¹ã¦å®Œäº†ã—ãŸã‚ã¨ã«å®Ÿè¡Œä¸­ã®æ§˜å­ã‚’ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚<br>è¡Œã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ã©ã®è¦ç´ ãŒæŠ½å‡ºã•ã‚Œã¦ã€ã©ã“ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã®ãŒã¾ã§ã‚ã‹ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚</p><img src="/images/20200118/photo_20200118_06.jpg"><p><code>blog-sidebar</code>ã‚¯ãƒ©ã‚¹å†…ã® <code>Culture</code> ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã„ã‚‹ã®ãŒã‚ã‹ã‚Šã¾ã™ã­ã€‚</p><p><code>cy.contains</code> ã§ç”»é¢ã«è¡¨ç¤ºã•ã‚Œã‚‹æ—¥æœ¬èªã‚’é¸ã‚“ã§ click ã¾ã§ãªã‚‰ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã«ä¸æ…£ã‚Œãªæ–°äººã•ã‚“ã«ã‚‚æ›¸ã„ã¦ã‚‚ã‚‰ãˆã¾ã™ã—ã€CSSã‚»ãƒ¬ã‚¯ã‚¿ã‚’ç†è§£ã—ã¦ã„ã‚‹äººãªã‚‰getã‚‚ä½¿ã£ã¦ã‚‚ã‚‰ãˆã¾ã™ã€‚<br>ãƒ™ãƒ†ãƒ©ãƒ³ãªçš†ã•ã‚“ã«ã¯ <code>cy.spy()</code> ã‚„ <code>cy.stub()</code> ã¨ã„ã£ãŸã‚‚ã®ã‚‚ç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã®ã§ã”å®‰å¿ƒã‚’ã€‚</p><p>ã¾ãŸ <code>cy.viewport(&#39;iphone-6+&#39;)</code> ã§viewportã®å‹•çš„åˆ‡æ›¿ãˆã‚„ã€<code>cy.screenshot(&#39;top-page-01&#39;)</code> ã§ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã®ä¿å­˜ãªã©ã‚‚ã§ãã¾ã™ã€‚</p><p>#GitHub Actionsã«ã¤ãªã’ã‚‹</p><p>ã•ã¦ã€ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§å®Ÿè¡Œçµæœã‚’ç¢ºèªã—ã¤ã¤ãƒ†ã‚¹ãƒˆã‚’è¡Œãˆã‚‹Cypressã§ã™ãŒã€CUIã§ã‚‚å®Ÿè¡Œã§ãã¾ã™ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> npx cypress run</span></span><br></pre></td></tr></table></figure><p>ã“ã¡ã‚‰ã®å ´åˆã¯ã€ãƒ†ã‚¹ãƒˆã®çµæœã ã‘è¿”ã—ã¦ãã‚Œã¾ã™ã€‚<br><img src="/images/20200118/photo_20200118_07.png"></p><p>å®Ÿè¡Œä¸­ã®æ§˜å­ã‚’ã‚ã¨ã‹ã‚‰ç¢ºèªã—ãŸã„å ´åˆã¯ã€<code>\cypress\videos\examples\test.spec.js.mp4</code> ã¨ã—ã¦ä¿å­˜ã•ã‚Œã‚‹å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªãã ã•ã„ã€‚</p><p>CUIã§å®Ÿè¡Œã§ãã‚‹ã¨ãªã‚Œã°CIã«çµ„ã¿è¾¼ã¿ãŸã„ã§ã™ã‚ˆã­ã€‚<br>ã§ã¯ã€2019å¹´ã‹ã‚‰ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã£ãŸGitHub Actionsã§å‹•ã‹ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><p>ä½œæˆã—ãŸãƒ¬ãƒã‚¸ãƒˆãƒªå†…ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> npm init</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> npm install</span></span><br></pre></td></tr></table></figure><p>package.json  package-lock.jsonã®2ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚ŒãŸã®ã‚’ç¢ºèªã—ãŸã‚‰ã€GitHubã«ãƒ—ãƒƒã‚·ãƒ¥ã—ã€GitHubã®ãƒ¬ãƒã‚¸ãƒˆãƒªãƒšãƒ¼ã‚¸ã®ã‚¿ãƒ–ã«ã‚ã‚‹ã€ŒActionsã€&gt; Node.js ã®ã€ŒSet up this workflowã€ã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</p><p>ãã—ã¦ã€å·¦å´ã«å‡ºã¦ãã‚‹ã‚¨ãƒ‡ã‚£ã‚¿ã«ä»¥ä¸‹ã‚’å…¥åŠ›ã—ã¾ã™ã€‚</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Node</span> <span class="string">CI</span></span><br><span class="line"><span class="attr">on:</span> <span class="string">[push]</span></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line"><span class="attr">  cypress-run:</span></span><br><span class="line"><span class="attr">    runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line"><span class="attr">    steps:</span></span><br><span class="line"><span class="attr">      - uses:</span> <span class="string">actions/checkout@v1</span></span><br><span class="line"><span class="attr">      - uses:</span> <span class="string">cypress-io/github-action@v1</span></span><br></pre></td></tr></table></figure><p>ã“ã‚Œã§ã€ãƒ¬ãƒã‚¸ãƒˆãƒªã«pushã•ã‚ŒãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§CIãŒå‹•ãã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p><p>å®Ÿè¡Œçµæœã¯ä»¥ä¸‹ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p><img src="/images/20200118/photo_20200118_08.png"><p>ã„ã„æ„Ÿã˜ã§ã™ã­</p><p>pushã•ã‚ŒãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã¯ãªãå®šæœŸçš„ã«å®Ÿè¡Œã—ãŸã„å ´åˆã¯</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">on:</span> <span class="string">[push]</span></span><br></pre></td></tr></table></figure><p>ã‚’</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">on:</span></span><br><span class="line"><span class="attr">  schedule:</span></span><br><span class="line"><span class="attr">    - cron:</span>  <span class="string">'0 0 * * *'</span></span><br></pre></td></tr></table></figure><p>ã®ã‚ˆã†ãªcronå¼ã«æ›¸ãæ›ãˆã‚‹ã¨å®šæœŸçš„ã«ãƒ†ã‚¹ãƒˆãŒèµ°ã‚Šã¾ã™ã€‚</p><h1 id="Cypress-Dashboard-ã«ã¤ãªã’ã‚‹"><a href="#Cypress-Dashboard-ã«ã¤ãªã’ã‚‹" class="headerlink" title="Cypress Dashboard ã«ã¤ãªã’ã‚‹"></a>Cypress Dashboard ã«ã¤ãªã’ã‚‹</h1><p>Cypressã®ãƒ†ã‚¹ãƒˆãŒGitHub Actionsä¸Šã§å®šæœŸçš„ã«å®Ÿè¡Œã•ã‚Œã¦è‰¯ã‹ã£ãŸã‚ˆã‹ã£ãŸã€ã§çµ‚ã‚ã‚ŠãŸã„ã®ã§ã™ãŒå•é¡ŒãŒä¸€ã¤ã ã‘ã€‚</p><p>å®Ÿè¡Œä¸­ã®æ§˜å­ã‚’ã‚ã¨ã‹ã‚‰ç¢ºèªã§ããªã„ã€‚</p><p>Cypresså®Ÿè¡Œä¸­ã®æ§˜å­ã¯ <code>\cypress\videos\*.spec.js.mp4</code> ã«å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ãŒä¿å­˜ã•ã‚Œã¦ã„ã‚‹ã¯ãšã§ã™ãŒã€CIç’°å¢ƒä¸Šã«ä¿å­˜ã—ã¦ã—ã¾ã†ã®ã§ã€ãƒ†ã‚¹ãƒˆå®Œäº†å¾Œã«ã¯ç’°å¢ƒã”ã¨æ¶ˆã•ã‚Œã¦ã—ã¾ã£ã¦ã„ã¦è¦‹ã‚Œãªããªã£ã¦ã—ã¾ã„ã¾ã™ã€‚</p><p>è‡ªåˆ†ã§S3ã‚ãŸã‚Šã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŠ•ã’ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ã‹ãªã„ã¨ã„ã‘ãªã„ã®ã‹ãƒ»ãƒ»ãƒ»ã¨æ€ã£ã¦ã„ã¾ã—ãŸãŒã€CypressãŒãã®ã‚ãŸã‚Šã‚‚ç°¡å˜ã«ã™ã‚‹è§£æ±ºç­–ã‚’ç”¨æ„ã—ã¦ãã‚Œã¦ã„ã¾ã—ãŸã€‚ã™ã”ã„ã€‚</p><p>Cypress Dashboard ã¨ã„ã†ã‚µãƒ¼ãƒ“ã‚¹ã§ã€Cypresså®Ÿè¡Œä¸­ã®æ§˜å­ã‚„çµæœãªã©ã‚’è¦‹ã‚„ã™ãã¾ã¨ã‚ã¦ãã‚Œã‚‹Webã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚<br><a href="https://docs.cypress.io/guides/dashboard/introduction.html" target="_blank" rel="noopener">https://docs.cypress.io/guides/dashboard/introduction.html</a></p><img src="/images/20200118/photo_20200118_09.png"><p>ãã‚Œã§ã¯ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ–¹æ³•ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> npx cypress open</span></span><br></pre></td></tr></table></figure><p>ã¨ã—ã¦ã€Cypressã®ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è¡¨ç¤ºã•ã›ã¾ã—ã‚‡ã†ã€‚</p><img src="/images/20200118/photo_20200118_10.png">ã€ŒRunsã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦å³ä¸Šã®ã€ŒLog Inã€ã‹ã‚‰Cypress Dashboardã«ãƒ¦ãƒ¼ã‚¶ç™»éŒ²ã—ã¦ãã ã•ã„ã€‚Googleèªè¨¼ã¨GitHubèªè¨¼ã§ãƒ¦ãƒ¼ã‚¶ç™»éŒ²ãŒã§ãã¾ã™ã€‚<p>ãƒ¦ãƒ¼ã‚¶ç™»éŒ²ãŒçµ‚ãˆãŸã‚‰ã€ã€ŒSet up project to recoedã€ã®é’ã„ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦è¨­å®šã‚’å®Œäº†ã•ã›ã¾ã™ã€‚</p><img src="/images/20200118/photo_20200118_11.png"><p>ã™ã‚‹ã¨ç”»é¢ãŒåˆ‡ã‚Šæ›¿ã‚ã‚Šã€Project ID ã¨ Record key ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚<br><code>cypress.json</code> ã«ã¯è‡ªå‹•ã§ <code>projectId</code> ãŒå…¥åŠ›ã•ã‚Œã¦ã‚‹ã¨æ€ã„ã¾ã™ã®ã§ã€Record keyã¨ä¸€ç·’ã« <code>cypress run</code> ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> npx cypress run --record --key &#123;Record key&#125;</span></span><br></pre></td></tr></table></figure><p>ã™ã‚‹ã¨ã€ŒRunsã€ã®ç”»é¢ãŒå¤‰åŒ–ã—ã¾ã™ã€‚</p><img src="/images/20200118/photo_20200118_12.png"><p>ã“ã® #1 ã®è¡Œã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ãƒšãƒ¼ã‚¸ã«ç§»å‹•ã—ã¦å®Ÿè¡ŒçµæœãŒç¢ºèªã§ãã¾ã™ã€‚</p><img src="/images/20200118/photo_20200118_13.png"><p>1spec1è¡Œã§ä¸¦ã¹ã‚‰ã‚Œã¦ã€å„è¡Œã«Outputãƒ»Screenshotsãƒ»Videoã®ãƒœã‚¿ãƒ³ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚<br>Outputã«ã¯CUIã®ãƒ­ã‚°ã€Screenshotsã«ã¯ã‚¨ãƒ©ãƒ¼æ™‚ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã¨ <code>cy.screenshot()</code> ã®å®Ÿè¡Œçµæœã€Videoã«ã¯ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­ã®æ§˜å­ãŒå‹•ç”»ã§ä¿å­˜ã•ã‚Œã¾ã™ã€‚<br>Webä¸Šã«çµæœãŒä¿å­˜ã•ã‚Œã‚‹ã®ã§ãƒãƒ¼ãƒ é–“ã§å…±æœ‰ã—ã‚„ã™ãã‚‚ãªã‚Šã¾ã™ã€‚</p><p>Dashboardã«å®Ÿè¡ŒçµæœãŒä¿å­˜ã•ã‚Œã‚‹ã®ã‚’ç¢ºèªã—ãŸã‚‰ã€GitHub Actionsã«ã‚‚åŒã˜ã‚ˆã†ã«Record keyã‚’è¨­å®šã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># test-cy/.github/workflows/nodejs.yml</span></span><br><span class="line"><span class="attr">name:</span> <span class="string">Node</span> <span class="string">CI</span></span><br><span class="line"><span class="attr">on:</span> <span class="string">[push]</span></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line"><span class="attr">  cypress-run:</span></span><br><span class="line"><span class="attr">    runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line"><span class="attr">    steps:</span></span><br><span class="line"><span class="attr">      - uses:</span> <span class="string">actions/checkout@v1</span></span><br><span class="line"><span class="attr">      - uses:</span> <span class="string">cypress-io/github-action@v1</span></span><br><span class="line"><span class="attr">        with:</span></span><br><span class="line"><span class="attr">          record:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">        env:</span></span><br><span class="line"><span class="attr">          CYPRESS_RECORD_KEY:</span> <span class="number">2899</span><span class="string">ea68-054f-4abc-8fd3-ebff0c3e7bc0</span></span><br></pre></td></tr></table></figure><p>æ›¸ãæ›ãˆã¦GitHubã«pushã™ã‚‹ã¨ã€GitHubActionsã‹ã‚‰CypressDashboardã«å®Ÿè¡ŒçµæœãŒé€ä¿¡ã•ã‚Œã¾ã™ã€‚</p><img src="/images/20200118/photo_20200118_14.png"><h2 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h2><p>æ‰“éµãƒ†ã‚¹ãƒˆã‚’CIåŒ–ã™ã‚‹ã®ãŒã€ãã‚Œã»ã©è‹¦åŠ´ãªãã§ãã‚‹ã“ã¨ãŒä¼ã‚ã‚Œã°å¹¸ã„ã§ã™ã€‚</p><p>ã‚‚ã¡ã‚ã‚“ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãå¿…è¦ã¯ã‚ã‚Šã¾ã™ãŒã€Excelã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã«æ›¸ã‹ã‚ŒãŸ <code>ç”³ã—è¾¼ã¿ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹</code> ã‚’ <code>cy.contains(&#39;ç”³ã—è¾¼ã¿&#39;).click()</code> ã«å¤‰ãˆã‚‹ã ã‘ã§ä½•ç™¾å›ã¨ä½¿ãˆã‚‹ã‚³ãƒ¼ãƒ‰ã«ãªã‚‹ã®ã§ã‚³ã‚¹ãƒˆã¯ãƒšã‚¤ã™ã‚‹ã¯ãšã§ã™ã€‚</p><p>ä»Šå›ã¯å°å…¥ã®éƒ¨åˆ†ã ã‘ã‚’æ›¸ãã¾ã—ãŸãŒã€FutureVulsã®ãƒ†ã‚¹ãƒˆã‚’è¡Œã†éš›ã«ã¯</p><ul><li>ã‚°ãƒ«ãƒ¼ãƒ—å†…ã®è„†å¼±æ€§æƒ…å ±ãƒ»ã‚¿ã‚¹ã‚¯æƒ…å ±ã‚’DBã‹ã‚‰ã‚¯ãƒªã‚¢ã™ã‚‹</li><li>ã‚¹ã‚­ãƒ£ãƒ³çµæœã‚’s3ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚¿ã‚¹ã‚¯ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‹ç¢ºèªã™ã‚‹</li><li>è„†å¼±æ€§ã®ã‚¹ã‚³ã‚¢ãŒæ›´æ–°ã•ã‚ŒãŸå ´åˆã«è„†å¼±æ€§æƒ…å ±ãŒæ›¸ãæ›ã‚ã‚Šã€ã‚¿ã‚¹ã‚¯ã®ã‚³ãƒ¡ãƒ³ãƒˆã«ãƒ­ã‚°ãŒåæ˜ ã•ã‚Œã‚‹ã‹è¦‹ã‚‹</li></ul><p>ã¨ã„ã£ãŸã“ã¨ã‚‚ã—ã¦ã„ã¾ã™ã€‚<br>ã“ã‚Œã‚‰ã‚‚Cypressï¼ˆã¨ã„ãã¤ã‹ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ï¼‰ã§å®Ÿç¾ã§ãã¾ã™ã€‚ã™ã”ã„ã€‚</p><p>ã•ãã£ã¨ãƒ†ã‚¹ãƒˆã§ãã‚‹ç’°å¢ƒã‚’ä½œã£ã¦ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚’æ°—æ¥½ã«è¡Œãˆã‚‹ç’°å¢ƒã‚’ä½œã£ã¦ã„ãã¾ã—ã‚‡ã†ã€‚</p><p>ãã‚Œã§ã¯ã€ã‚ˆã„ãƒ†ã‚¹ãƒˆãƒ©ã‚¤ãƒ•ã‚’ï¼</p><hr><p>é–¢é€£è¨˜äº‹ï¼š</p><ul><li><a href="/articles/201912010/">SORACOM USBãƒ‰ãƒ³ã‚°ãƒ«ã®è‡ªå‹•æ¥ç¶š</a></li><li><a href="/articles/20190814/">WAFã¨ã—ã¦ go-swagger ã‚’é¸æŠã—ã¦ã¿ãŸ</a></li><li><a href="/articles/20191001/">ä¸€å‘¨å›ã£ã¦ã€äººé–“ãŒèª­ã¿æ›¸ãã™ã‚‹è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¯JSONãŒè‰¯ã„ã¨æ€ã£ãŸ</a></li><li><a href="/articles/20190612/">TypeScriptæ•™è‚²ç”¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å…¬é–‹ã®ãŠçŸ¥ã‚‰ã›</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ã¤ã‚‰ã„æ‰“éµãƒ†ã‚¹ãƒˆã‚’CIã§å›ã—ã¦ã€ãƒ†ã‚¹ãƒˆçµæœã‚’Webãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ãƒãƒ¼ãƒ å†…ã«å…±æœ‰ã—ã‚ˆã†ã¨ã„ã†ãŠè©±ã§ã™ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;ã¯ã˜ã‚ã¾ã—ã¦ã€‚æ‡æ¦”ï¼ˆã³ã‚ã†ï¼‰ã§ã™ã€‚ã‚µãƒ¼ãƒå†…ã®è„†å¼±æ€§ã‚’æ¤œå‡ºã—ã¦ç®¡ç†ã™ã‚‹Webã‚µãƒ¼ãƒ“ã‚¹ã€FutureVuls( &lt;a href=&quot;https://vu
      
    
    </summary>
    
      <category term="CI/CD" scheme="https://future-architect.github.io/categories/CI-CD/"/>
    
    
      <category term="Cypress" scheme="https://future-architect.github.io/tags/Cypress/"/>
    
  </entry>
  
  <entry>
    <title> NeurIPS 2019 è«–æ–‡ç´¹ä»‹</title>
    <link href="https://future-architect.github.io/articles/20191227/"/>
    <id>https://future-architect.github.io/articles/20191227/</id>
    <published>2019-12-27T07:22:02.000Z</published>
    <updated>2019-12-27T10:32:07.659Z</updated>
    
    <content type="html"><![CDATA[<p>ã“ã‚“ã«ã¡ã¯ã€Strategic AI Group(SAIG)ã®ç”°ä¸­ã€ä¸Šé‡ã§ã™ã€‚<br>å°‘ã—å‰ã«<a href="https://future-architect.github.io/articles/20191210/">NeurIPSã¨ã„ã†å­¦ä¼šã«å‚åŠ ã—ã¦æ¥ãŸã“ã¨ã‚’ã”å ±å‘Š</a>ã—ã¾ã—ãŸãŒã€ä»Šå›ã¯NeurIPSã§æ°—ã«ãªã£ãŸè«–æ–‡ã‚’ã„ãã¤ã‹ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><h1 id="ç”»åƒèªè­˜ãƒ»ç”Ÿæˆ"><a href="#ç”»åƒèªè­˜ãƒ»ç”Ÿæˆ" class="headerlink" title="ç”»åƒèªè­˜ãƒ»ç”Ÿæˆ"></a>ç”»åƒèªè­˜ãƒ»ç”Ÿæˆ</h1><p>ã¾ãšã¯ã€ä¸Šé‡ã‹ã‚‰ã¯ç”»åƒèªè­˜ãƒ»ç”Ÿæˆã«é–¢ã™ã‚‹ä¸‹è¨˜2ã¤ã®ç ”ç©¶ã‚’å–ã‚Šä¸Šã’ã¾ã™ã€‚</p><h2 id="This-Looks-Like-That-Deep-Learning-for-Interpretable-Image-Recognition"><a href="#This-Looks-Like-That-Deep-Learning-for-Interpretable-Image-Recognition" class="headerlink" title="This Looks Like That: Deep Learning for Interpretable Image Recognition"></a>This Looks Like That: Deep Learning for Interpretable Image Recognition</h2><ul><li><a href="https://papers.nips.cc/paper/9095-this-looks-like-that-deep-learning-for-interpretable-image-recognition" target="_blank" rel="noopener">https://papers.nips.cc/paper/9095-this-looks-like-that-deep-learning-for-interpretable-image-recognition</a></li></ul><p>Chaofan Chen(â€»1), Oscar Li(â€»1), Daniel Tao(â€»1), Alina Barnett(â€»1), Cynthia Rudin(â€»1), Jonathan K. Su(â€»2)</p><p>â€»1: Duku University<br>â€»2: MIT Lincoln Laboratory</p><h2 id="HYPE-A-Benchmark-for-Human-eYe-Perceptual-Evaluation-of-Generative-Models"><a href="#HYPE-A-Benchmark-for-Human-eYe-Perceptual-Evaluation-of-Generative-Models" class="headerlink" title="HYPE: A Benchmark for Human eYe Perceptual Evaluation of Generative Models"></a>HYPE: A Benchmark for Human eYe Perceptual Evaluation of Generative Models</h2><ul><li><a href="https://papers.nips.cc/paper/8605-hype-a-benchmark-for-human-eye-perceptual-evaluation-of-generative-models" target="_blank" rel="noopener">https://papers.nips.cc/paper/8605-hype-a-benchmark-for-human-eye-perceptual-evaluation-of-generative-models</a></li></ul><p>Sharon Zhou(â€»1), Mitchell Gordon(â€»1), Ranjay Krishna(â€»1), Austin Narcomey(â€»1), Li F. Fei-Fei(â€»1), Michael Bernstein(â€»1)</p><p>â€»1: Stanford University</p><p>ä¸€ã¤ç›®ã¯CNNã®è§£é‡ˆæ€§ã«é–¢ã™ã‚‹ç ”ç©¶ã§ã€äºŒã¤ç›®ã¯ç”Ÿæˆãƒ¢ãƒ‡ãƒ«ã®è©•ä¾¡æ–¹æ³•ã«é–¢ã™ã‚‹ç ”ç©¶ã§ã™ã€‚<br>ãã‚Œãã‚Œã€é–¢é€£ã™ã‚‹ç ”ç©¶ã‚’å–ã‚Šä¸Šã’ãªãŒã‚‰ç´¹ä»‹ã—ã¾ã™ã€‚</p><h2 id="CNNã®è§£é‡ˆæ€§ã«é–¢ã™ã‚‹ç ”ç©¶"><a href="#CNNã®è§£é‡ˆæ€§ã«é–¢ã™ã‚‹ç ”ç©¶" class="headerlink" title="CNNã®è§£é‡ˆæ€§ã«é–¢ã™ã‚‹ç ”ç©¶"></a>CNNã®è§£é‡ˆæ€§ã«é–¢ã™ã‚‹ç ”ç©¶</h2><p>Deep Learningã®å¨åŠ›ã‚’ä¸–ã«çŸ¥ã‚‰ã—ã‚ãŸå‡ºæ¥äº‹ã®ä¸€ã¤ã¯ã€2012å¹´ã®ILSVRCã¨ã„ã†ç”»åƒèªè­˜ã«é–¢ã™ã‚‹ã‚³ãƒ³ãƒšãƒ†ã‚£ã‚·ãƒ§ãƒ³ã§ã—ãŸã€‚2012å¹´ä»¥é™ã€ç”»åƒèªè­˜ã®ç²¾åº¦ãŒã©ã‚“ã©ã‚“å‘ä¸Šã—ã€ã¤ã„ã«ã¯äººé–“ã®ãƒ¬ãƒ™ãƒ«ã«åŒ¹æ•µã™ã‚‹ã¾ã§ã«ãªã‚Šã¾ã—ãŸã€‚</p><p>ç”»åƒèªè­˜ã§ã¯ã€Convolutional Neural Network(CNN)ã¨å‘¼ã°ã‚Œã‚‹æŠ€è¡“ãŒç”¨ã„ã‚‰ã‚Œã¾ã™ãŒã€éç·šå½¢ãªæ¼”ç®—ã‚’ä½•å±¤ã«ã‚‚æ¸¡ã£ã¦ç¹°ã‚Šè¿”ã™ãŸã‚ã€CNNãŒç”»åƒã®ã©ã“ã«ç€ç›®ã—ã¦åˆ†é¡ã‚’ã—ã¦ã„ã‚‹ã‹ã¨ã„ã£ãŸè§£é‡ˆãŒéå¸¸ã«é›£ã—ããªã£ã¦ã—ã¾ã„ã¾ã™ã€‚</p><p>CNNã®ç€ç›®é ˜åŸŸã‚’å¯è¦–åŒ–ã—ãŸåˆæœŸã®ç ”ç©¶ãŒã€Class Activation Mapping(CAM) [1]ã§ã™ã€‚</p><p>CAMã§ã¯ã€ä¸‹å›³ã®ã‚ˆã†ã«Global Average Poolingã‚’ã™ã‚‹ç›´å‰ã®feature mapã«åˆ†é¡å±¤ã®çµåˆé‡ã¿ã‚’ä½¿ã£ãŸç·šå½¢å’Œã«ã‚ˆã£ã¦ã€CNNã®åˆ¤æ–­æ ¹æ‹ ã‚’å¯è¦–åŒ–ã—ã¾ã™ã€‚</p><img src="/images/20191227/CAM.png"><p>[1]ã®Figure2ã‚ˆã‚Šå¼•ç”¨</p><p>CAMã¯ã€conv feature maps â†’ global average pooling â†’ softmax layer ã¨ã„ã†æ§‹æˆã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸãŒã€Grad-CAM [2]ã§ã¯ã€å‹¾é…ã‚’ç”¨ã„ã¦feature mapã®é‡ã¿ä»˜ã‘ã‚’ã™ã‚‹ã“ã¨ã§ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ§‹æˆã®åˆ¶ç´„ãŒãªããªã‚Šã¾ã—ãŸã€‚</p><p>ã¾ãŸã€Attention Branch Network [3]ã§ã¯ã€Activation mapã‚’Attentionã«ä½¿ã†æ–¹æ³•ãŒææ¡ˆã•ã‚Œã¦ã„ã¾ã™ã€‚<br>Attention Branch Networkã¯ã€ä¸­éƒ¨å¤§å­¦ã®ç ”ç©¶ã‚°ãƒ«ãƒ¼ãƒ—ãŒææ¡ˆã—ãŸã“ã¨ã‚‚ã‚ã‚Šã€ä»Šå¤ã«å‚åŠ ã—ãŸæ—¥æœ¬ã®å­¦ä¼šMIRUã§ã¯ã‚ˆãè¦‹ã‹ã‘ã¾ã—ãŸã€‚</p><p>NeurIPSã§ã¯ã€porototypical part network(ProtoPNet) [4]ã¨ã„ã†æ‰‹æ³•ãŒææ¡ˆã•ã‚Œã¾ã—ãŸã€‚ProtoPNetã§ã¯ã€Prototype layerã«ã‚ˆã£ã¦ã€å…¥åŠ›ç”»åƒä¸­ã®ã©ã®é ˜åŸŸãŒã€å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã®ã©ã®éƒ¨åˆ†ã¨é¡ä¼¼ã—ã¦ã„ã‚‹ã‹ã¾ã§ã‚’åˆ¤æ–­ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>ãã®çµæœã€å˜ã«ç€ç›®é ˜åŸŸãŒå¯è¦–åŒ–ã•ã‚Œã‚‹ã ã‘ã§ã¯ãªãã€ç”»åƒã®éƒ¨åˆ†ã”ã¨ã®åˆ¤æ–­æ ¹æ‹ ã‚’çµ„ã¿åˆã‚ã›ãŸã€ã‚ˆã‚Šè©³ç´°ãªæ¨è«–ã®è§£é‡ˆã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚</p><img src="/images/20191227/ProtoPNet.png"><p>[4]ã®Figure2ã‚ˆã‚Šå¼•ç”¨</p><p>NeurIPSæœ€çµ‚æ—¥ã«è¡Œã‚ã‚ŒãŸMedical Imaging meets NeurIPSã¨ã„ã†ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã¯ã€CAMã‚’åŒ»ç™‚ç”»åƒã¸é©ç”¨ã—ãŸäº‹ä¾‹ãŒãƒã‚¹ã‚¿ãƒ¼ç™ºè¡¨ã§ã‚ã‚Šã¾ã—ãŸã€‚</p><p>HR-CAM [5]ã§ã¯ã€æœ€å¾Œã®feature mapã ã‘ã§ã¯ãªãã€ä¸­é–“å±¤ã®feature mapã‚‚ç”¨ã„ã‚‹ã“ã¨ã§ã€ã‚ˆã‚Šé®®æ˜ã«åˆ¤æ–­æ ¹æ‹ ã‚’å¯è¦–åŒ–ã—ã¾ã™ã€‚</p><img src="/images/20191227/HR-CAM.png">[5]ã®Figure5ã‚ˆã‚Šå¼•ç”¨<p>ã¾ãŸã€åˆæ—¥ã®EXPOã§ã¯ã€GoogleãŒâ€Interpretability - Now What?â€ã¨ã„ã†ã‚¿ã‚¤ãƒˆãƒ«ã§è§£é‡ˆæ€§ã«é–¢ã™ã‚‹ç™ºè¡¨ã‚’ã—ã¦ã„ã¾ã—ãŸã€‚<br>ãã“ã§ã¯ã€Testing with Concept Activation Vectors(TCAV) [6]ã¨ã„ã†æ‰‹æ³•ãŒç´¹ä»‹ã•ã‚Œã¾ã—ãŸã€‚<br>TCAVã¯ä¸Šè¨˜ã¾ã§ã®æ‰‹æ³•ã®æµã‚Œã¨ã¯å°‘ã—ç•°ãªã‚Šã€æ¦‚å¿µçš„ãªé‡è¦åº¦ã‚’æŠ½å‡ºã™ã‚‹æ–¹æ³•ã‚’å–ã£ã¦ã„ã¾ã™ã€‚<br>ç”»åƒèªè­˜ã®åˆ†é‡ã«é™ã‚‰ãšã€è§£é‡ˆæ€§ã«é–¢ã™ã‚‹ç ”ç©¶ã¯è¿‘å¹´ã€æ³¨ç›®ã‚’é«˜ã‚ã¦ã„ã‚‹åˆ†é‡ã®ä¸€ã¤ã§ã™ã€‚</p><ul><li>[1] B.Zhou, et al., Learning Deep Features for Discriminative Localization, 2016.</li><li>[2] R.R.Selvaraju, et al., Grad-CAM: Visual Explanations from Deep Networks via Gradient-based Localization, 2017.</li><li>[3] H.Fukui, et al., Attention Branch Network: Learning of Attention Mechanism for Visual Explanation, 2018.</li><li>[4] C.Chen, et al., This Looks Like That: Deep Learning for Interpretable Image Recognition, 2019.</li><li>[5] S.Shinde, et al., HR-CAM: Precise Localization of pathology using multi-level learning in CNNs, 2019.</li><li>[6] B.Kim, et al., Interpretability Beyond Feature Attribution: Quantitative Testing with Concept Activation Vectors (TCAV), 2018.</li></ul><h2 id="ç”Ÿæˆãƒ¢ãƒ‡ãƒ«ã®è©•ä¾¡æ–¹æ³•ã«é–¢ã™ã‚‹ç ”ç©¶"><a href="#ç”Ÿæˆãƒ¢ãƒ‡ãƒ«ã®è©•ä¾¡æ–¹æ³•ã«é–¢ã™ã‚‹ç ”ç©¶" class="headerlink" title="ç”Ÿæˆãƒ¢ãƒ‡ãƒ«ã®è©•ä¾¡æ–¹æ³•ã«é–¢ã™ã‚‹ç ”ç©¶"></a>ç”Ÿæˆãƒ¢ãƒ‡ãƒ«ã®è©•ä¾¡æ–¹æ³•ã«é–¢ã™ã‚‹ç ”ç©¶</h2><p>è¿‘å¹´ã€Generative Adversarial Network(GAN)ã‚’ã¯ã˜ã‚ã¨ã—ãŸæ·±å±¤ç”Ÿæˆãƒ¢ãƒ‡ãƒ«ã¯ç›®è¦šã¾ã—ã„ç™ºå±•ã‚’é‚ã’ã€æœ¬ç‰©ã¨è¦‹é–“é•ãˆã‚‹ç¨‹ãã‚Œã„ãªç”»åƒã‚’ç”Ÿæˆã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ãã¾ã—ãŸã€‚<br>ã—ã‹ã—ã€ç”Ÿæˆã•ã‚ŒãŸç”»åƒã®ã‚¯ã‚ªãƒªãƒ†ã‚£ã‚’é©åˆ‡ã«è©•ä¾¡ã™ã‚‹ã“ã¨ã¯ã€ãã‚Œã»ã©ç°¡å˜ãªã“ã¨ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚<br>ã‚ˆãä½¿ã‚ã‚Œã‚‹æŒ‡æ¨™ã¯ã€Inception Score [7]ã¨FrÃ©chet Inception Distance [8] ã§ã™ã€‚</p><p>Inception Scoreã¯ã€æ¬¡å¼ã§è¨ˆç®—ã•ã‚Œã¾ã™ã€‚<br>p(y|x)ã¯ã€ImageNetã§å­¦ç¿’æ¸ˆã¿ã®Inception Modelã§ç”Ÿæˆã•ã‚ŒãŸç”»åƒã‚’äºˆæ¸¬ã—ãŸã¨ãã®ãƒ©ãƒ™ãƒ«ã®åˆ†å¸ƒã€p(y)ã¯äºˆæ¸¬ãƒ©ãƒ™ãƒ«ã®å‘¨è¾ºåˆ†å¸ƒã§ã‚ã‚Šã€ãã‚Œã‚‰ã®åˆ†å¸ƒé–“ã®è·é›¢ã‚’Kullbackâ€“Leibler divergenceã§æ¸¬ã£ã¦ã„ã¾ã™ã€‚</p><p>ç”Ÿæˆã•ã‚Œã‚‹ç”»åƒãŒã€è­˜åˆ¥ãŒå®¹æ˜“ã§ã€ã‹ã¤ã€ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ãŒè±Šå¯Œã§ã‚ã‚‹ã»ã©ã€ã‚¹ã‚³ã‚¢ãŒé«˜ããªã‚‹ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚</p><img src="/images/20191227/IS.png" class="img-middle-size"><p>ã‚‚ã†ä¸€ã¤ã®FrÃ©chet Inception Distanceã§ã¯ã€å®Ÿç”»åƒã¨ç”Ÿæˆç”»åƒã§ã®Inception Modelã‹ã‚‰å¾—ã‚‰ã‚Œã‚‹ç‰¹å¾´ãƒ™ã‚¯ãƒˆãƒ«ã®è·é›¢ã‚’æ¬¡å¼ã§æ¸¬ã‚Šã¾ã™ã€‚</p><p>m_w, C_wã¯å®Ÿç”»åƒã‹ã‚‰å¾—ã‚‰ã‚Œã‚‹ç‰¹å¾´ãƒ™ã‚¯ãƒˆãƒ«ã®å¹³å‡ã¨å…±åˆ†æ•£è¡Œåˆ—ã€m, Cã¯ç”Ÿæˆç”»åƒã‹ã‚‰å¾—ã‚‰ã‚Œã‚‹ç‰¹å¾´ãƒ™ã‚¯ãƒˆãƒ«ã®å¹³å‡ã¨å…±åˆ†æ•£è¡Œåˆ—ã§ã‚ã‚Šã€ãã‚Œãã‚Œå¤šå¤‰é‡æ­£è¦åˆ†å¸ƒã«å¾“ã†ã¨ä»®å®šã—ã€FrÃ©chetè·é›¢ã§åˆ†å¸ƒé–“ã®è·é›¢ã‚’æ¸¬ã‚Šã¾ã™ã€‚</p><img src="/images/20191227/FID.png" class="img-middle-size"><p>ã©ã¡ã‚‰ã®æ‰‹æ³•ã‚‚ã€ç”»åƒã®ã€Œæœ¬ç‰©ã‚‰ã—ã•ã€ã‚’ã©ã®ã‚ˆã†ã«ã‚¹ã‚³ã‚¢ã™ã‚‹ã‹ã‚„ã€ImageNetã§ã®å­¦ç¿’æ¸ˆã¿ãƒ¢ãƒ‡ãƒ«ã«ä¾å­˜ã—ã¦ã—ã¾ã£ã¦ã„ã‚‹ã“ã¨ãªã©ãŒèª²é¡Œã¨ã—ã¦ã‚ã’ã‚‰ã‚Œã¾ã™ã€‚</p><p>NeurIPSã§ã¯ã€HYPE [9]ã¨ã„ã†ã‚¯ãƒ©ã‚¦ãƒ‰ã‚½ãƒ¼ã‚·ãƒ³ã‚°ã‚’åˆ©ç”¨ã—ã¦äººã®ç›®ã§è©•ä¾¡ã™ã‚‹æ‰‹æ³•ãŒææ¡ˆã•ã‚Œã¾ã—ãŸã€‚<br>Amazon Mechanical Turkã‚’åˆ©ç”¨ã—ãŸã‚¯ãƒ©ã‚¦ãƒ‰ã‚½ãƒ¼ã‚·ãƒ³ã‚°ã«ã‚ˆã‚Šã€å®Ÿç”»åƒã¨ç”Ÿæˆç”»åƒã®åˆ†é¡ã‚’äººã®ç›®ã§è¡Œã„ã¾ã™ã€‚</p><p>è«–æ–‡ã§ã¯ã€å¿ƒç†ç‰©ç†å­¦ã«åŸºã¥ã„ã¦è©•ä¾¡è€…ã¸ã®ç”»åƒã®æç¤ºæ™‚é–“ã‚’åˆ¶å¾¡ã™ã‚‹æ–¹æ³•ã¨ã€ã‚³ã‚¹ãƒˆã‚’æŠ‘ãˆã‚‹ãŸã‚ã«æ™‚é–“ã®åˆ¶é™ã‚’è¨­ã‘ãªã„æ–¹æ³•ã®2ã¤ã®æ‰‹æ³•ãŒææ¡ˆã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p>æ¬¡å›³ã®ã‚ˆã†ã«ã€HYPEã®ã‚¹ã‚³ã‚¢ã«ã‚ˆã£ã¦ãƒ¢ãƒ‡ãƒ«ã®å–„ã—æ‚ªã—ãŒåˆ¤æ–­ã§ãã‚‹ã‚ˆã†ãªçµæœãŒå¾—ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚</p><img src="/images/20191227/HYPE.png"><p>[9]ã®Figure1,Figure2ã‚ˆã‚Šå¼•ç”¨</p><p>HYPEã‚’è©¦ã™ãŸã‚ã«ã¯ã€<a href="https://hype.stanford.edu/" target="_blank" rel="noopener">https://hype.stanford.edu/</a> ã‹ã‚‰AWSã®S3ã®æƒ…å ±ã‚’é€ã‚‹ã¨ã€<code>$60 ~ $100</code> ç¨‹åº¦ã®å€¤æ®µã§ã‚¹ã‚³ã‚¢ãŒå¾—ã‚‰ã‚Œã‚‹ã‚ˆã†ã§ã™ã€‚<br>NeurIPSã¯ç†è«–ã‚ˆã‚Šã®ç ”ç©¶ãŒå¤šã„ãªã‹ã§ã€å°‘ã—å¤‰ã‚ã‚Šç¨®ã®ç™ºè¡¨ã«æ„Ÿã˜ã¾ã—ãŸã€‚</p><ul><li>[7] T.salimans, et al., Improved Techniques for Training GANs, 2016.</li><li>[8] M.Heusel, et al., GANs Trained by a Two Time-Scale Update Rule Converge to a Local Nash Equilibrium, 2017.</li><li>[9] S.Zhou, et al., HYPE: A Benchmark for Human eYe Perceptual Evaluation of Generative Models, 2019.</li></ul><h1 id="è¨€èªãƒ»èªçŸ¥ç†è§£"><a href="#è¨€èªãƒ»èªçŸ¥ç†è§£" class="headerlink" title="è¨€èªãƒ»èªçŸ¥ç†è§£"></a>è¨€èªãƒ»èªçŸ¥ç†è§£</h1><p>ç¶šã„ã¦ç”°ä¸­ã‹ã‚‰è¨€èªç†è§£ã‚„èªçŸ¥æ©Ÿèƒ½ã«é–¢ã™ã‚‹ç ”ç©¶ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚</p><h2 id="SuperGLUE-A-Stickier-Benchmark-for-General-Purpose-Language-Understanding-Systems"><a href="#SuperGLUE-A-Stickier-Benchmark-for-General-Purpose-Language-Understanding-Systems" class="headerlink" title="SuperGLUE: A Stickier Benchmark for General-Purpose Language Understanding Systems"></a>SuperGLUE: A Stickier Benchmark for General-Purpose Language Understanding Systems</h2><ul><li><a href="https://papers.nips.cc/paper/8589-superglue-a-stickier-benchmark-for-general-purpose-language-understanding-systems" target="_blank" rel="noopener">https://papers.nips.cc/paper/8589-superglue-a-stickier-benchmark-for-general-purpose-language-understanding-systems</a></li></ul><p>Alex Wang(â€»1), Yada Pruksachatkun(â€»1), Nikita Nangia(â€»1), Amanpreet Singh(â€»2), Julian Michael(â€»3), Felix Hill(â€»4), Omer Levy(â€»2), Samuel R. Bowman(â€»1)</p><p>â€»1: New York University<br>â€»2: Facebook AI Research<br>â€»3: University of Washington<br>â€»4: DeepMind</p><p>GLUEã‚’ç½®ãæ›ãˆã‚‹ã€è¨€èªç†è§£ã‚¿ã‚¹ã‚¯ãƒ»è»¢ç§»å­¦ç¿’ã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã«é–¢ã™ã‚‹ç ”ç©¶ã§ã™ã€‚<br>GLUEãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã§ã¯ã€ã‚·ã‚¹ãƒ†ãƒ ã®è©•ä¾¡çµæœãŒãƒ’ãƒˆã®è©•ä¾¡çµæœã‚’è¶…ãˆã¾ã—ãŸãŒã€ä¾ç„¶ã¨ã—ã¦ã‚·ã‚¹ãƒ†ãƒ ã®è©•ä¾¡ã‚’è¡Œã†ãŸã‚ã«é ‘å¥ãªã€å˜ä¸€ã®è©•ä¾¡åŸºæº–ãŒå¿…è¦ã§ã™ã€‚<br>ãã“ã§ã€å¤šãã®å­¦ç¿’ãƒ‡ãƒ¼ã‚¿/ã‚¸ãƒ£ãƒ³ãƒ«/é›£æ˜“åº¦ã‚’ã‚«ãƒãƒ¼ã—ãŸ8ã¤ã®è¨€èªç†è§£ã‚¿ã‚¹ã‚¯ç”¨ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã€SuperGLUEã‚’ææ¡ˆã—ã¾ã—ãŸã€‚<br>æ–°ãŸãªè©•ä¾¡ã‚¿ã‚¹ã‚¯ã¨ã—ã¦ã€coreference resolutionã¨QAã‚’è¿½åŠ ã—ã€ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ãŒæ¯”è¼ƒçš„å°‘ãªã„ã‚¿ã‚¹ã‚¯ã«é‡ç‚¹ã‚’ç½®ã„ãŸè¨­è¨ˆã«ãªã£ã¦ã„ã¾ã™ã€‚ãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰ã‚„ã€è©³ç´°ãªåˆ†æã‚’è¡Œã†ãŸã‚ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¯GLUEåŒæ§˜ã«æä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p>SuperGLUEã¯<a href="https://papers.nips.cc/paper/8589-superglue-a-stickier-benchmark-for-general-purpose-language-understanding-systems" target="_blank" rel="noopener">ã“ã¡ã‚‰</a>ã®ãƒªãƒ³ã‚¯ã‹ã‚‰ä½¿ç”¨ã§ãã¾ã™ã€‚</p><h2 id="From-voxels-to-pixels-and-back-Self-supervision-in-natural-image-reconstruction-from-fMRI"><a href="#From-voxels-to-pixels-and-back-Self-supervision-in-natural-image-reconstruction-from-fMRI" class="headerlink" title="From voxels to pixels and back: Self-supervision in natural-image reconstruction from fMRI"></a>From voxels to pixels and back: Self-supervision in natural-image reconstruction from fMRI</h2><ul><li><a href="http://papers.nips.cc/paper/8879-from-voxels-to-pixels-and-back-self-supervision-in-natural-image-reconstruction-from-fmri" target="_blank" rel="noopener">http://papers.nips.cc/paper/8879-from-voxels-to-pixels-and-back-self-supervision-in-natural-image-reconstruction-from-fmri</a></li></ul><p>Roman Beliy(â€»1), Guy Gaziv(â€»1), Assaf Hoogi(â€»1), Francesca Strappini(â€»1), Tal Golan(â€»2), Michal Irani(â€»1)</p><p>â€»1: The Weizmann Institute of Science<br>â€»2: Columbia University</p><p>fMRIã‹ã‚‰ã®Natural Image Reconstructionã‚¿ã‚¹ã‚¯(ãƒ’ãƒˆãŒä½•ã‹ã—ã‚‰ã®ç”»åƒã‚’æ€ã„æµ®ã‹ã¹ã¦ã„ã‚‹/è¦‹ã¦ã„ã‚‹éš›ã«MRIã§è„³ã®æ´»å‹•ã‚’è¨˜éŒ²ã€è„³ã®MRIãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã€æ€ã„æµ®ã‹ã¹ã¦ã„ãŸ/è¦‹ã¦ã„ãŸç”»åƒã‚’å†æ§‹ç¯‰ã™ã‚‹ã‚¿ã‚¹ã‚¯)ã«ãŠã„ã¦ã€fMRIãƒ‡ãƒ¼ã‚¿ã¨æ­£è§£ã®ç”»åƒãƒšã‚¢ã®ãƒ‡ãƒ¼ã‚¿æ•°ãŒå°‘ãªãã€å­¦ç¿’ãŒååˆ†ã«ã§ããªã„å•é¡ŒãŒã‚ã‚Šã€å˜ç´”ã«æ•™å¸«ã‚ã‚Šå­¦ç¿’ã‚’è¡Œã£ã¦ã‚‚ååˆ†ãªç²¾åº¦ãŒã§ãªã„èª²é¡ŒãŒã‚ã‚Šã¾ã™ã€‚<br>ãã“ã§ã€ã‚³ãƒ¼ãƒ‘ã‚¹å¤–ã®50000ä»¶ã®ç”»åƒãƒ‡ãƒ¼ã‚¿ã¨ã€æ­£è§£ãƒ©ãƒ™ãƒ«ã®ä»˜ã„ã¦ã„ãªã„ãƒ†ã‚¹ãƒˆç”¨fMRIãƒ‡ãƒ¼ã‚¿ã‚’ãã‚Œãã‚Œç”¨ã„ã¦ã€äº‹å‰ã«encoder-decoderã‚’å­¦ç¿’ã™ã‚‹æ–¹æ³•ã‚’ææ¡ˆã—ã¾ã—ãŸã€‚çµæœã¨ã—ã¦ã€state-of-the-artã€ã‚‚ã—ãã¯ãã‚Œã«åŒ¹æ•µã™ã‚‹ç²¾åº¦ã‚’é”æˆã—ã¾ã—ãŸã€‚</p><h1 id="æœ€å¾Œã«"><a href="#æœ€å¾Œã«" class="headerlink" title="æœ€å¾Œã«"></a>æœ€å¾Œã«</h1><p>NeurIPSã¯ã€EXPOã‹ã‚‰Workshopã¾ã§å…¥ã‚Œã‚‹ã¨1é€±é–“ã»ã©ã‚ã‚Šã¾ã—ãŸã€‚<br>ãã“ã§ã¯ã€å¤šãã®ç ”ç©¶ç™ºè¡¨ãŒã‚ã‚Šã€ã“ã“ã§ã¯å–ã‚Šä¸Šã’ãã‚Œãªã„ã»ã©ã€ãŠã‚‚ã—ã‚ã„ç ”ç©¶ãŒãŸãã•ã‚“ã‚ã‚Šã¾ã—ãŸã€‚</p><p>ã¿ãªã•ã‚“ã‚‚ãœã²ã€èˆˆå‘³ã®ã‚ã‚‹åˆ†é‡ã‚’èª¿ã¹ã¦ã¿ã¦ãã ã•ã„ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€Strategic AI Group(SAIG)ã®ç”°ä¸­ã€ä¸Šé‡ã§ã™ã€‚&lt;br&gt;å°‘ã—å‰ã«&lt;a href=&quot;https://future-architect.github.io/articles/20191210/&quot;&gt;NeurIPSã¨ã„ã†å­¦ä¼šã«å‚åŠ ã—ã¦æ¥ãŸã“ã¨ã‚’ã”å ±å‘Š&lt;
      
    
    </summary>
    
      <category term="DataScience" scheme="https://future-architect.github.io/categories/DataScience/"/>
    
    
      <category term="MachineLearning" scheme="https://future-architect.github.io/tags/MachineLearning/"/>
    
  </entry>
  
</feed>
