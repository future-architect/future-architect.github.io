<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Future Tech Blog - ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆ</title>
  
  <subtitle>ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼é–‹ç™ºè€…ãƒ–ãƒ­ã‚°</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://future-architect.github.io/"/>
  <updated>2020-03-25T05:59:52.800Z</updated>
  <id>https://future-architect.github.io/</id>
  
  <author>
    <name>Future Architect Consultants</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Go1.14ã®Release Partyã«ç™»å£‡ã—ã¾ã—ãŸğŸ‰</title>
    <link href="https://future-architect.github.io/articles/20200325/"/>
    <id>https://future-architect.github.io/articles/20200325/</id>
    <published>2020-03-25T05:44:32.000Z</published>
    <updated>2020-03-25T05:59:52.800Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><p>ã“ã‚“ã«ã¡ã¯ã€‚TIG ã®è¾»ã§ã™ã€‚å…ˆæ—¥é–‹å‚¬ã•ã‚ŒãŸ Go 1.14 Release Party ã« TIG DX ãƒ¦ãƒ‹ãƒƒãƒˆã‹ã‚‰æ¸‹å·ã€è¾»ãŒç™»å£‡ã—ã¾ã—ãŸã€‚ä»Šå›ã® Release Party ã¯ COVID-19 ã«ã‚ˆã‚Šåˆã®ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§ã®é–‹å‚¬ã«ãªã‚Šã¾ã—ãŸã€‚è¦‹é€ƒã—ãŸæ–¹ã¯ youtube ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã‚‹<a href="https://www.youtube.com/watch?v=IWyDR08pUU4&feature=youtu.be" target="_blank" rel="noopener">å‹•ç”»</a>ã‚’è¦‹ã¦ã¿ã¦ãã ã•ã„ï¼</p><p>Go 1.14 ã®ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã¯ä»¥ä¸‹ã§ã™ã€‚</p><ul><li><a href="https://golang.org/doc/go1.14" target="_blank" rel="noopener">Go 1.14 Release Notes</a></li></ul><h2 id="ç™ºè¡¨1-hash-maphash-ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°"><a href="#ç™ºè¡¨1-hash-maphash-ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°" class="headerlink" title="ç™ºè¡¨1: hash/maphash ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°"></a>ç™ºè¡¨1: hash/maphash ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°</h2><img src="/images/20200325/3.png" class="img-middle-size"><img src="/images/20200325/4.png" class="img-middle-size"><p>è¾»ã•ã‚“ã®ã‚³ãƒ¡ãƒ³ãƒˆã«ã‚‚ã‚ã‚‹ã€ç¤¾å†…ã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã§ç´¹ä»‹ã—ãŸGo 1.14ã§è¿½åŠ ã•ã‚ŒãŸhash/maphashãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã—ãŸã€‚ä»Šå›è¿½åŠ ã•ã‚ŒãŸå”¯ä¸€ã®æ–°ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã¯ã‚ã‚‹ã‚‚ã®ã®ã€Hashã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ä½¿ã£ãŸä½¿ã„æ–¹ã‚‚ã™ã§ã«ã‚ã‚‹ã‚‚ã®ã§ã™ã—ã€æ©Ÿèƒ½ã‚‚Goå†…éƒ¨ã§æ–‡å­—åˆ—ã‚„ãƒã‚¤ãƒˆåˆ—ã‚’ãƒãƒƒã‚·ãƒ¥ã®ã‚­ãƒ¼ã«ä½¿ã†ã¨ãã«ä½¿ã‚ã‚Œã¦ã„ãŸã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’å…¬é–‹ã—ãŸã‚‚ã®ãªã®ã§ã€ç‰¹ã«çœŸæ–°ã—ã•ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãªã®ã§ã€ã‚ˆãã‚ã‚‹æ–°ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æ©Ÿèƒ½ç´¹ä»‹ã¨ã„ã†ã‚ˆã‚Šã‚‚ã€ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚“ã§ã„ã¦é¢ç™½ã„ã¨æ€ã£ãŸã¨ã“ã‚ã‚’ç´¹ä»‹ã™ã‚‹ã€ã¨ã„ã†ç™ºè¡¨ã«ã—ã¾ã—ãŸã€‚</p><br><p>â©hash/maphashã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°<br><a href="https://qiita.com/shibukawa/items/d483889731c34d3e5faa" target="_blank" rel="noopener">https://qiita.com/shibukawa/items/d483889731c34d3e5faa</a></p><br><br><p>ã‚‚ã‚ã‚‚ã‚ä»•äº‹ã®ç· ã‚åˆ‡ã‚ŠãŒå¿™ã—ã‹ã£ãŸã¨ã‹ã‚‚ã‚ã£ã¦ã€Qiitaã®ã‚¹ãƒ©ã‚¤ãƒ‰ã§ã•ã£ã¨ã¾ã¨ã‚ã¦è³‡æ–™ã‚’ä½œã‚Šã¾ã—ãŸã€‚æµã‚Œã¨ã—ã¦ã¯ã€ã¾ãšãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦APIã‚„ä½¿ã‚ã‚Œæ–¹ã‚’è¦‹ã¦ã€ãã®å¾Œå†…éƒ¨å®Ÿè£…ã‚’è¦‹ã¦ã„ãã€ã¨ã„ã†æ‰‹é †ã§èª¬æ˜ã—ã¾ã—ãŸã€‚</p><h2 id="ç™ºè¡¨2-context-ã®è©±"><a href="#ç™ºè¡¨2-context-ã®è©±" class="headerlink" title="ç™ºè¡¨2: context ã®è©±"></a>ç™ºè¡¨2: context ã®è©±</h2><img src="/images/20200325/1.png" class="img-middle-size"><img src="/images/20200325/2.png" class="img-middle-size"><p>è¾»ã‹ã‚‰ã¯ Go1.14 ã® context ã«ã¤ã„ã¦ãŠè©±ã—ã¾ã—ãŸã€‚ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã«ã¯è¨˜è¼‰ã•ã‚Œã¦ã„ãªã„ã®ã§ã™ãŒã€Go1.14 ã® context ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯å†…éƒ¨çš„ãªæŒ™å‹•ãŒæ”¹å–„ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><script async class="speakerdeck-embed" data-id="25137172b466435089aaa8554307a9a0" data-ratio="1.77777777777778" src="//speakerdeck.com/assets/embed.js"></script><p>è£è©±ãªã®ã§ã™ãŒã€ãŸã¾ãŸã¾ Go1.14 ã® context ã«é–¢ã™ã‚‹èˆˆå‘³æ·±ã„ãƒ„ã‚¤ãƒ¼ãƒˆã‚’è¦‹ã‹ã‘ã€èª¿ã¹ãŸå†…å®¹ã‚’ Qiita ã®<a href="https://qiita.com/tutuz/items/963a6118cec63a4cd2f3" target="_blank" rel="noopener">Go1.14ã®contextã¯ä½•ãŒå¤‰ã‚ã‚‹ã®ã‹</a> ã¨ã„ã†è¨˜äº‹ã«ã—ãŸã¨ã“ã‚ã€Release Party ã®é‹å–¶ãƒãƒ¼ãƒ ã‹ã‚‰ç™»å£‡ä¾é ¼ã‚’ã„ãŸã ãã¾ã—ãŸã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼ï¼(Go ã«é™ã‚‰ãš)æŠ€è¡“çš„ãªæ”¹å–„ã‚„æ‹¡å¼µãŒã‚ã£ãŸã¨ãã«ã€ãã‚‚ãã‚‚ã®å•é¡Œã®å‰æã‚„èƒŒæ™¯ã‚’ç†è§£ã—ã€æ”¹å–„æ–¹é‡ã®è­°è«–ã‚’ç¢ºèªã™ã‚‹ã“ã¨ã§ã€æ–°ã—ã„æŠ€è¡“ã‚’ã‚ˆã‚Šæ·±ãç†è§£ã§ãã‚‹ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚</p><h2 id="è³ªç–‘å¿œç­”"><a href="#è³ªç–‘å¿œç­”" class="headerlink" title="è³ªç–‘å¿œç­”"></a>è³ªç–‘å¿œç­”</h2><p>ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ä¸Šã®é–‹å‚¬ã‚‚ã‚ã£ã¦ã€è³ªç–‘å¿œç­”ã¯ãƒ„ã‚¤ãƒƒã‚¿ãƒ¼ä¸Šã§æ°—ã«ãªã‚‹ã“ã¨ã‚’ãƒ„ã‚¤ãƒ¼ãƒˆã—ã€ãã‚Œã«ç­”ãˆã¦ã„ãå½¢å¼ã§è¡Œã‚ã‚Œã¾ã—ãŸã€‚è¾»ã¸ã®è³ªå•ã¯ Context ã¯ç¤¾å†…ã® Go ã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¼šã§ã¨ã‚Šã‚ã’ã¦ã„ãŸã®ã‚‚ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¼šã®å–ã‚Šçµ„ã¿ã«é–¢ã™ã‚‹è³ªå•ã‚’ã„ãŸã ãã¾ã—ãŸã€‚ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ä¸Šã§ã‚‚å›ç­”ã—ãŸã®ã§ã™ãŒã€è£œè¶³ã¨ã—ã¦ <a href="https://future-architect.github.io/articles/20200310/">Goã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®ã™ã™ã‚</a> ã¨ã„ã†è¨˜äº‹ã‚‚æ›¸ãã¾ã—ãŸã€‚åˆã‚ã›ã¦è¦‹ã¦ã¿ã¦ãã ã•ã„ã€‚</p><h2 id="é–¢é€£ãƒªãƒ³ã‚¯"><a href="#é–¢é€£ãƒªãƒ³ã‚¯" class="headerlink" title="é–¢é€£ãƒªãƒ³ã‚¯"></a>é–¢é€£ãƒªãƒ³ã‚¯</h2><p>Goã«é–¢é€£ã—ãŸè¨˜äº‹ã§ã™ã€‚</p><ul><li><a href="/tags/Serverless%E9%80%A3%E8%BC%89/">ã‚µãƒ¼ãƒãƒ¬ã‚¹é€£è¼‰</a></li><li><a href="https://future-architect.github.io/tags/GoCDK/">Go Cloud é€£è¼‰</a></li><li><a href="https://future-architect.github.io/tags/DynamoDB%C3%97Go/">DynamoDBÃ—Goé€£è¼‰</a></li><li><a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCP é€£è¼‰</a></li><li><a href="https://future-architect.github.io/articles/20190713/">Goã‚’å­¦ã¶ã¨ãã«ã¤ã¾ãšãã‚„ã™ã„ãƒã‚¤ãƒ³ãƒˆFAQ</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h2&gt;&lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€‚TIG ã®è¾»ã§ã™ã€‚å…ˆæ—¥é–‹å‚¬ã•ã‚ŒãŸ Go 1.14 Release Party ã« TIG DX ãƒ¦ãƒ‹ãƒƒãƒˆã‹ã‚‰æ¸‹å·
      
    
    </summary>
    
      <category term="Programming" scheme="https://future-architect.github.io/categories/Programming/"/>
    
    
      <category term="Go" scheme="https://future-architect.github.io/tags/Go/"/>
    
  </entry>
  
  <entry>
    <title>SAMã‚’ä½¿ã£ãŸãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆï¼ˆGoç·¨ï¼‰</title>
    <link href="https://future-architect.github.io/articles/20200323/"/>
    <id>https://future-architect.github.io/articles/20200323/</id>
    <published>2020-03-23T00:56:50.000Z</published>
    <updated>2020-03-23T01:11:28.783Z</updated>
    
    <content type="html"><![CDATA[<p><a href="/tags/Serverless%E9%80%A3%E8%BC%89/">ã‚µãƒ¼ãƒãƒ¬ã‚¹é€£è¼‰</a> ã®ç¬¬1å¼¾ã§ã™ã€‚</p><h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>ã“ã‚“ã«ã¡ã¯ã€TIG/DXãƒãƒ¼ãƒ ã®æ —ç”°ã§ã™ã€‚AWSã®Lambdaã«ä»£è¡¨ã•ã‚Œã‚‹ã‚µãƒ¼ãƒãƒ¬ã‚¹ã‚¢ãƒ—ãƒªã¯å®Ÿè¡Œæ™‚ã®ã¿ç¨¼åƒã™ã‚‹ãŸã‚ã€ã‚µãƒ¼ãƒãƒ¼ç¨¼åƒã«ã‚ˆã‚‹ã‚ã‚‰ã‚†ã‚‹ã‚³ã‚¹ãƒˆã‹ã‚‰è§£æ”¾ã•ã‚Œã€ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã®å·¥æ•°ã‚’æ¸›ã‚‰ã™ã“ã¨ãŒã§ãã¾ã™ã€‚ä¾‹ãˆã°ä½•ã‚‰ã‹ã®APIã‚’æä¾›ã™ã‚‹å ´åˆã§ã‚‚ã€API Gatewayã¨Lambdaã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§æä¾›å¯èƒ½ã§ã™ã€‚</p><p>ä¸€æ–¹ã§ã€ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã‚¢ãƒ—ãƒªã‚’é–‹ç™ºã™ã‚‹ã¨ãã€ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®ãƒ†ã‚¹ãƒˆãŒèª²é¡Œã¨ãªã‚Šã¾ã™ã€‚ä¾‹ãˆã°Lambda + DynamoDBã§ã‚ã‚Œã°ã€<a href="https://future-architect.github.io/tags/DynamoDB%C3%97Go/">å…ˆã®é€£è¼‰</a>ã®æ‰‹æ³•ã‚’å‚è€ƒã«ã€ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã“ã¨ã§è§£æ±ºã—ã¾ã™ã€‚ä¸€æ–¹ã§â€¦</p><ul><li>API Gatewayã‹ã‚‰Lambdaã®ç€ç«ã‚‚ãƒ†ã‚¹ãƒˆã—ãŸä¸Šã§DynamoDBã¾ã§æ›¸ãè¾¼ã¾ã›ãŸã„</li><li>ãªã‚“ãªã‚‰API Gawewayè‡ªä½“ã‚‚Lambdaã§å©ããŸã„</li></ul><p>ã¨ãªã‚‹ã¨ã€å°‘ã€…ãƒãƒ¼ãƒ‰ãƒ«ãŒã‚ãŒã‚Šã¾ã™ã€‚ã“ã®å•é¡Œã‚’è§£æ±ºã—ã¦ãã‚Œã‚‹ã®ãŒã€<a href="https://docs.aws.amazon.com/ja_jp/serverless-application-model/latest/developerguide/what-is-sam.html" target="_blank" rel="noopener">AWS Serverless Application Model(AWS SAM)</a>ã§ã™ã€‚SAMã¯ãƒ­ãƒ¼ã‚«ãƒ«ã«Lambdaå®Ÿè¡Œç”¨ã®dockerã‚’ç«‹ã¡ä¸Šã’ã€<code>127.0.0.1:3000</code>ã‚’å©ãã¨æŒ‡å®šã—ãŸå®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã‚’dockerä¸Šã§å‹•ä½œã•ã›ã‚‹ã“ã¨ãŒã§ãã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ä»Šå›ã¯SAMã‚’ä½¿ã£ã¦ API Gateway + Lambda (Go) + DynamoDBã®ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆã‚’ã™ã‚‹æ‰‹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚</p><p>ãªãŠã€ä»Šå›ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã¨ã™ã‚‹æ§‹æˆã¯ã€Lambdaâ†’AWS Gatewayâ†’Lambdaâ†’DynamoDBã®ã‚ˆã†ãªæ§‹æˆã§ã™ã€‚ä¾‹ãˆã°Kinesisã‚„S3ã‹ã‚‰éåŒæœŸãªå…¥åŠ›ã‚’ãƒˆãƒªã‚¬ãƒ¼ã«Lambdaã‚’ç€ç«ã—ã€ç‰¹å®šã®APIã‚’å©ãã‚ˆã†ãªã‚±ãƒ¼ã‚¹ã§ã™ã€‚ä¾¿å®œä¸Šã€API Gatewayã‚’å©ãã®ã‚’Lambda Aã€API Gatewayã‹ã‚‰å‘¼ã³å‡ºã•ã‚Œã‚‹ã®ã‚’Lambda Bã¨ã—ã¾ã™ã€‚</p><img src="/images/20200323/photo_20200323_01.png" class="img-middle-size"><p>ã“ã‚Œã‚’SAMã¨DynamoDB localã‚’ä½¿ã£ã¦ãƒ†ã‚¹ãƒˆã—ã¾ã™ãŒã€æƒ³å®šã™ã‚‹æœ€çµ‚çš„ãªãƒ†ã‚¹ãƒˆç’°å¢ƒã¨ã—ã¦ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªå½¢ã«ãªã‚Šã¾ã™ã€‚é’ã§ç¤ºã—ãŸ<code>lambda_b.go</code>ã‹ã‚‰127.0.0.1:8000ã‚’å©ãã®ãŒã€å‰è¿°ã—ãŸ<a href="https://future-architect.github.io/tags/DynamoDB%C3%97Go/">å…ˆã®é€£è¼‰</a>ã®æ‰‹æ³•ã§ã™ã€‚<code>lambda_a.go</code>ã‹ã‚‰<code>127.0.0.1:3000</code>ã‚’å©ãã®ã‚‚Goã‹ã‚‰ç‰¹å®šã®APIã‚’å©ãå‡¦ç†ã«ãªã‚‹ã®ã§ã€ã“ã“ã§ã¯å‰²æ„›ã—ã¾ã™ã€‚ã¤ã¾ã‚Šã€ä»Šå›è¨˜è¿°ã™ã‚‹ã®ã¯<code>127.0.0.1:3000</code>ã‚’å©ã„ãŸã‚‰LambdaãŒç€ç«ã—ã€DynamoDBã«æ›¸ãè¾¼ã‚€ã¾ã§ã®éƒ¨åˆ†ã«ãªã‚Šã¾ã™ã€‚</p><img src="/images/20200323/photo_20200323_02.png" class="img-middle-size"><h1 id="ç’°å¢ƒã¨ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ"><a href="#ç’°å¢ƒã¨ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ" class="headerlink" title="ç’°å¢ƒã¨ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ"></a>ç’°å¢ƒã¨ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ</h1><p>ä»Šå›ã¯ã€ä¸‹è¨˜ã®ç’°å¢ƒã§å‹•ã‹ã—ã¾ã—ãŸã€‚</p><table><thead><tr><th align="left">é …ç›®</th><th align="left">ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç­‰</th><th align="left">å…¥æ‰‹æ–¹æ³•</th></tr></thead><tbody><tr><td align="left">OS</td><td align="left">macOS Mojave 10.15.5</td><td align="left"></td></tr><tr><td align="left">awscli</td><td align="left">1.16.209</td><td align="left"><code>$ pip install awscli</code>ã€‚ãƒ†ã‚¹ãƒˆã ã‘ãªã‚‰ç„¡ãã¦ã‚‚å‹•ãã‹ã‚‚ã€‚</td></tr><tr><td align="left">aws-sam-cli</td><td align="left">0.43.0</td><td align="left"><code>$ pip install aws-sam-cli</code></td></tr><tr><td align="left">Docker</td><td align="left">19.03.5 build 633a0ea</td><td align="left"></td></tr><tr><td align="left">go</td><td align="left">1.13.5</td><td align="left"></td></tr></tbody></table><p>WebAPIã®ãƒªã‚¿ãƒ¼ãƒ³ã¨ã—ã¦ã€ä¸‹è¨˜ã‚’æœŸå¾…ã™ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚ï¼ˆãŸã ã—å‡¦ç†ã¯ãƒ™ã‚¿æ›¸ãã§ã™ï¼‰</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"Company"</span>: <span class="string">"Future"</span>, <span class="attr">"Year"</span>: <span class="string">"1989"</span>&#125;</span><br></pre></td></tr></table></figure><h1 id="æ§‹ç¯‰"><a href="#æ§‹ç¯‰" class="headerlink" title="æ§‹ç¯‰"></a>æ§‹ç¯‰</h1><h2 id="ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ"><a href="#ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ" class="headerlink" title="ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ"></a>ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ</h2><p>æ¬¡ã®ã‚ˆã†ãªæ§‹æˆã¨ã—ã¾ã™ã€‚æœ€åˆã«å®£è¨€ã—ãŸã¨ãŠã‚Šã€ä»Šå›APIã‚’å©ãLambdaã«ã¤ã„ã¦ã¯è§¦ã‚Œã¾ã›ã‚“ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">apigw  </span><br><span class="line">  â”œâ”€Makefile</span><br><span class="line">  â”œâ”€lambdab</span><br><span class="line">  |   â”œâ”€lambdab.go          <span class="comment"># APIã‹ã‚‰å‘¼ã°ã‚Œã‚‹Lambdaã®ã‚³ãƒ¼ãƒ‰</span></span><br><span class="line">  |   â””â”€lambdab_test.go     <span class="comment"># ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰</span></span><br><span class="line">  â”œâ”€template.yaml</span><br><span class="line">  â””â”€testdata</span><br><span class="line">      â””â”€db_table.json       <span class="comment"># DBãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆç”¨ã®ã‚³ãƒ¼ãƒ‰</span></span><br></pre></td></tr></table></figure><h2 id="AWS-SAMãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç”¨æ„"><a href="#AWS-SAMãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç”¨æ„" class="headerlink" title="AWS SAMãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç”¨æ„"></a>AWS SAMãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç”¨æ„</h2><p>SAMã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã€Templatesã‚’ç”¨æ„ã—ã¾ã™ã€‚ç‹¬è‡ªã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ç”¨æ„ã—ã¦ãã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ãŒã€ä»Šå›ã¯ç°¡å˜ã‹ã¤ã‚·ãƒ³ãƒ—ãƒ«ã«ã¨ã„ã†ã“ã¨ã§AWS Quick Start Templatesã‚’ä½¿ç”¨ã—ã¾ã™ã€‚<br>å…ˆã®æ§‹æˆã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã§ã€ä½œæ¥­ã‚’é€²ã‚ã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">$ sam init --runtime go1.x --name apigw</span><br><span class="line">Which template <span class="built_in">source</span> would you like to use?</span><br><span class="line">        1 - AWS Quick Start Templates</span><br><span class="line">        2 - Custom Template Location</span><br><span class="line">Choice: 1</span><br><span class="line"></span><br><span class="line">Cloning app templates from https://github.com/awslabs/aws-sam-cli-app-templates.git</span><br><span class="line"></span><br><span class="line">-----------------------</span><br><span class="line">Generating application:</span><br><span class="line">-----------------------</span><br><span class="line">Name: apigw</span><br><span class="line">Runtime: go1.x</span><br><span class="line">Dependency Manager: mod</span><br><span class="line">Application Template: hello-world</span><br><span class="line">Output Directory: .</span><br><span class="line"></span><br><span class="line">Next steps can be found <span class="keyword">in</span> the README file at ./apigw/README.md</span><br><span class="line">$ ls</span><br><span class="line">apigw</span><br><span class="line">$ ls apigw/</span><br><span class="line">Makefile      README.md     hello-world   template.yaml</span><br><span class="line">$ ls apigw/hello-world/</span><br><span class="line">go.mod       main.go      main_test.go</span><br></pre></td></tr></table></figure><p>è‰²ã€…ã¨ã§ãã¾ã—ãŸãŒã€åŒæ¢±ã•ã‚Œã¦ã„ã‚‹README.mdã«å¿…è¦ãªã“ã¨ã¯è¨˜è¼‰ã—ã¦ã‚ã‚Šã¾ã™ã€‚ãã“ã‹ã‚‰æŠœç²‹ã—ã¾ã™ãŒã€ä¾‹ãˆã°ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚</p><figure class="highlight bash"><figcaption><span>README.mdï¼ˆæŠœç²‹ï¼‰</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ï¼ˆå‰ç•¥ï¼‰</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ Makefile                    <span class="comment"># &lt;-- Make to automate build</span></span><br><span class="line">â”œâ”€â”€ README.md                   <span class="comment"># &lt;-- This instructions file</span></span><br><span class="line">â”œâ”€â”€ hello-world                 <span class="comment"># &lt;-- Source code for a lambda function</span></span><br><span class="line">â”‚   â”œâ”€â”€ main.go                 <span class="comment"># &lt;-- Lambda function code</span></span><br><span class="line">â”‚   â””â”€â”€ main_test.go            <span class="comment"># &lt;-- Unit tests</span></span><br><span class="line">â””â”€â”€ template.yaml</span><br><span class="line">ï¼ˆä»¥ä¸‹ç•¥ï¼‰</span><br></pre></td></tr></table></figure><h2 id="Lambdaï¼ˆGoï¼‰ã®è¨˜è¿°"><a href="#Lambdaï¼ˆGoï¼‰ã®è¨˜è¿°" class="headerlink" title="Lambdaï¼ˆGoï¼‰ã®è¨˜è¿°"></a>Lambdaï¼ˆGoï¼‰ã®è¨˜è¿°</h2><p>æœ€åˆã«å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ go get -u github.com/aws/aws-lambda-go/lambda</span><br><span class="line">$ go get -u github.com/aws/aws-lambda-go/events</span><br></pre></td></tr></table></figure><p>ç¶šã„ã¦ã€å¿…è¦ãªãƒ‘ã‚¹æ§‹æˆã«ã—ã¦ã„ãã¾ã™ã€‚<br><code>sam init</code>ã§è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸå®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã¯<code>hello-world</code>ä»¥ä¸‹ã«å…¥ã£ã¦ã„ã¾ã™ã€‚<br>ã›ã£ã‹ããªã®ã§ã€ã“ã‚Œã‚’ã‚ªãƒªã‚¸ãƒŠãƒ«ãªåå‰ã«ã—ã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> apigw</span><br><span class="line">$ mv hello-world lambdab</span><br></pre></td></tr></table></figure><p>ãƒ‘ã‚¹æ§‹é€ ãŒå¤‰ã‚ã£ãŸã®ã§ã€<code>Makefile</code>ã¨<code>template.yaml</code>ã«å¤‰æ›´ã‚’åŠ ãˆã¾ã™ã€‚</p><figure class="highlight plain"><figcaption><span>Makefile</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">PHONY: deps clean build</span><br><span class="line"></span><br><span class="line">deps:</span><br><span class="line">go get -u ./...</span><br><span class="line"></span><br><span class="line">clean: </span><br><span class="line">rm -rf ./lambdab/lambdab # å¤‰æ›´</span><br><span class="line"></span><br><span class="line">build:</span><br><span class="line">GOOS=linux GOARCH=amd64 go build -o lambdab/lambdab ./lambdab/main.go # å¤‰æ›´</span><br></pre></td></tr></table></figure><p><code>template.yaml</code>ã¸ã®å¤‰æ›´ã«ãŠã„ã¦ã€</p><figure class="highlight yaml"><figcaption><span>template.yaml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">AWSTemplateFormatVersion:</span> <span class="string">'2010-09-09'</span></span><br><span class="line"><span class="attr">Transform:</span> <span class="attr">AWS::Serverless-2016-10-31</span></span><br><span class="line"><span class="attr">Description:</span> <span class="string">&gt;</span></span><br><span class="line"><span class="string">  apigw</span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string">  Sample SAM Template for apigw</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># More info about Globals: https://github.com/awslabs/serverless-application-model/blob/master/docs/globals.rst</span></span><br><span class="line"><span class="string"></span><span class="attr">Globals:</span></span><br><span class="line"><span class="attr">  Function:</span></span><br><span class="line"><span class="attr">    Timeout:</span> <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="attr">Resources:</span></span><br><span class="line"><span class="attr">  HelloWorldFunction:</span></span><br><span class="line"><span class="attr">    Type:</span> <span class="attr">AWS::Serverless::Function</span> <span class="comment"># More info about Function Resource: https://github.com/awslabs/serverless-application-model/blob/master/versions/2016-10-31.md#awsserverlessfunction</span></span><br><span class="line"><span class="attr">    Properties:</span></span><br><span class="line"><span class="attr">      CodeUri:</span> <span class="string">lambdab/</span> <span class="comment"># å¤‰æ›´</span></span><br><span class="line"><span class="attr">      Handler:</span> <span class="string">lambdab</span> <span class="comment"># å¤‰æ›´</span></span><br><span class="line"><span class="attr">      Runtime:</span> <span class="string">go1.x</span></span><br><span class="line"><span class="attr">      Tracing:</span> <span class="string">Active</span> <span class="comment"># https://docs.aws.amazon.com/lambda/latest/dg/lambda-x-ray.html</span></span><br><span class="line"><span class="attr">      Events:</span></span><br><span class="line"><span class="attr">        CatchAll:</span></span><br><span class="line"><span class="attr">          Type:</span> <span class="string">Api</span> <span class="comment"># More info about API Event Source: https://github.com/awslabs/serverless-application-model/blob/master/versions/2016-10-31.md#api</span></span><br><span class="line"><span class="attr">          Properties:</span></span><br><span class="line"><span class="attr">            Path:</span> <span class="string">/apigw</span> <span class="comment"># å¤‰æ›´</span></span><br><span class="line"><span class="attr">            Method:</span> <span class="string">GET</span></span><br><span class="line"><span class="attr">      Environment:</span> <span class="comment"># More info about Env Vars: https://github.com/awslabs/serverless-application-model/blob/master/versions/2016-10-31.md#environment-object</span></span><br><span class="line"><span class="attr">        Variables:</span></span><br><span class="line"><span class="attr">          PARAM1:</span> <span class="string">VALUE</span></span><br></pre></td></tr></table></figure><p><code>template.yaml</code>ã®å†…å®¹ã«ã¤ã„ã¦è£œè¶³ã™ã‚‹ã¨ã€ã“ã‚Œã¯CloudFormationã®å½¢å¼ã«ãªã£ã¦ã„ã¾ã™ã€‚<br>ã“ã®ã¾ã¾<code>sam</code>ã®ã¿ã§deployã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ãŒã€ä»Šå›ã¯ãƒ†ã‚¹ãƒˆã®ã¿ãªã®ã§ã€æ³¨è¨˜ãŒã„ã‚Œã¦ã‚ã‚‹å ´æ‰€ã®ã¿å¤‰æ›´ã—ã¾ã—ãŸã€‚<br>ã“ã®è¨­å®šã§ <code>sam</code> ã‚’ç«‹ã¡ä¸Šã’ã‚‹ã¨ã€ <code>http://127.0.0.1:3000/apigw</code> ã«GETã™ã‚‹ã¨ã€<code>./lambdab/lambdab</code> ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã“ã¨ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚</p><p>ãã‚Œã§ã¯<code>main.go</code> ã«å¤‰æ›´ã‚’åŠ ãˆã¾ã™ã€‚ä»Šå›ã¯ã€ <code>events.APIGatewayProxyResponse</code> ã®Bodyã¨ã€ãã‚Œã«å¿œã˜ã¦å°‘ã—ã ã‘ã‚³ãƒ¼ãƒ‰ã‚’ã„ã˜ã£ãŸã ã‘ã§ã»ã¼ã»ã¼è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸã‚‚ã®ã«ãªã‚Šã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>main.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"encoding/json"</span></span><br><span class="line"></span><br><span class="line"><span class="string">"github.com/aws/aws-lambda-go/events"</span></span><br><span class="line"><span class="string">"github.com/aws/aws-lambda-go/lambda"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> CompanyResponse <span class="keyword">struct</span> &#123;</span><br><span class="line">Company <span class="keyword">string</span> <span class="string">`json:"company"`</span></span><br><span class="line">Year    <span class="keyword">string</span> <span class="string">`json:"year"`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">handler</span><span class="params">(request events.APIGatewayProxyRequest)</span> <span class="params">(events.APIGatewayProxyResponse, error)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">response := CompanyResponse&#123;</span><br><span class="line">Company: <span class="string">"Future"</span>,</span><br><span class="line">Year:    <span class="string">"1989"</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">jsonBytes, _ := json.Marshal(response)</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> events.APIGatewayProxyResponse&#123;</span><br><span class="line">Body:       <span class="keyword">string</span>(jsonBytes),</span><br><span class="line">StatusCode: <span class="number">200</span>,</span><br><span class="line">&#125;, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">lambda.Start(handler)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="build"><a href="#build" class="headerlink" title="build"></a>build</h2><p>è«¸ã€…è¨­å®šãŒã§ããŸã‚‰ã€buildã—ã¦æº–å‚™ã¯å®Œäº†ã§ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ make build</span><br><span class="line">GOOS=linux GOARCH=amd64 go build -o lambdab/lambdab ./lambdab/main.go <span class="comment"># å¤‰æ›´</span></span><br><span class="line">$ ls lambdab/</span><br><span class="line">go.mod       go.sum       lambdab      main.go      main_test.go</span><br></pre></td></tr></table></figure><h1 id="ãƒ­ãƒ¼ã‚«ãƒ«ã§APIã‚’å‹•ã‹ã—ã¦ãƒ†ã‚¹ãƒˆ"><a href="#ãƒ­ãƒ¼ã‚«ãƒ«ã§APIã‚’å‹•ã‹ã—ã¦ãƒ†ã‚¹ãƒˆ" class="headerlink" title="ãƒ­ãƒ¼ã‚«ãƒ«ã§APIã‚’å‹•ã‹ã—ã¦ãƒ†ã‚¹ãƒˆ"></a>ãƒ­ãƒ¼ã‚«ãƒ«ã§APIã‚’å‹•ã‹ã—ã¦ãƒ†ã‚¹ãƒˆ</h1><p>ã‚³ãƒãƒ³ãƒ‰ã‚’å©ã‘ã°OKã§ã™ã€‚å‹•ãå‡ºã—ãŸAPIï¼ˆä»Šå›ã®å ´åˆ <code>http://127.0.0.1:3000/apigw</code>ï¼‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ã€ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ãŒå‘¼ã³å‡ºã•ã‚Œã€å®Ÿè¡ŒçµæœãŒå¸°ã£ã¦ãã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ sam <span class="built_in">local</span> start-api</span><br><span class="line">Mounting HelloWorldFunction at http://127.0.0.1:3000/apigw [GET]</span><br><span class="line">You can now browse to the above endpoints to invoke your <span class="built_in">functions</span>. You <span class="keyword">do</span> not need to restart/reload SAM CLI <span class="keyword">while</span> working on your <span class="built_in">functions</span>, changes will be reflected instantly/automatically. You only need to restart SAM CLI <span class="keyword">if</span> you update your AWS SAM template</span><br><span class="line">2020-03-09 22:05:33  * Running on http://127.0.0.1:3000/ (Press CTRL+C to quit)</span><br><span class="line">Invoking lambdab (go1.x)</span><br><span class="line"></span><br><span class="line">Fetching lambci/lambda:go1.x Docker container image......</span><br><span class="line">Mounting /Users/kurita/[ãƒ‘ã‚¹æƒ…å ±ãªã®ã§çœç•¥]/apigw/lambdab as /var/task:ro,delegated inside runtime container</span><br><span class="line">START RequestId: f2fd9e5a-f031-10c7-3340-25e3997c6dd1 Version: <span class="variable">$LATEST</span></span><br><span class="line">END RequestId: f2fd9e5a-f031-10c7-3340-25e3997c6dd1</span><br><span class="line">REPORT RequestId: f2fd9e5a-f031-10c7-3340-25e3997c6dd1  Init Duration: 131.05 ms        Duration: 4.07 ms       Billed Duration: 100 ms Memory Size: 128 MBMax Memory Used: 21 MB</span><br><span class="line">No Content-Type given. Defaulting to <span class="string">'application/json'</span>.</span><br><span class="line">2020-03-09 22:05:38 127.0.0.1 - - [09/Mar/2020 22:05:38] <span class="string">"GET /apigw HTTP/1.1"</span> 200 -</span><br><span class="line">2020-03-09 22:05:39 127.0.0.1 - - [09/Mar/2020 22:05:39] <span class="string">"GET /favicon.ico HTTP/1.1"</span> 403 -</span><br></pre></td></tr></table></figure><p>ãƒ–ãƒ©ã‚¦ã‚¶ã§APIå©ãã¨ã€ã¡ã‚ƒã‚“ã¨è¿”ã£ã¦ãã¦ã„ã‚‹ã®ãŒã‚ã‹ã‚Šã¾ã™ã€‚</p><img src="/images/20200323/photo_20200323_03.png" class="img-middle-size"><p>AWS SAMã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§ã‚‚API Gatewayã‚’æ„è­˜ã—ãŸLambda ã‚’å‹•ä½œã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚æ•°ãŒå°‘ãªã„ãªã‚‰ä¸€ã¤ãšã¤è©¦ã—ã¦ã‚‚è‰¯ã„ã§ã™ã—ã€APIã‚’é©å®œå©ããƒ„ãƒ¼ãƒ«ã‚’ç”¨æ„ã™ã‚Œã°ã€è‡ªå‹•ã«ãƒ†ã‚¹ãƒˆã‚’è¡Œã†ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</p><h1 id="DynamoDB-localã¨ã®é€£æº"><a href="#DynamoDB-localã¨ã®é€£æº" class="headerlink" title="DynamoDB localã¨ã®é€£æº"></a>DynamoDB localã¨ã®é€£æº</h1><p>ç¶šã„ã¦ã€SAMä¸Šã§å‹•ã‹ã™Lambdaã‹ã‚‰DynamoDB localã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚<br>æ³¨æ„äº‹é …ã¨ã—ã¦ã€DynamoDB localã¯dockerä¸Šã§å‹•ãã®ã§ã€SAMã¨DynamoDB localã‚’åŒã˜docker-networkã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><h2 id="DynamoDB-localã®æº–å‚™"><a href="#DynamoDB-localã®æº–å‚™" class="headerlink" title="DynamoDB localã®æº–å‚™"></a>DynamoDB localã®æº–å‚™</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># AWS profile(åˆå›ã®ã¿)</span></span><br><span class="line"><span class="comment"># localã®DynamoDB</span></span><br><span class="line">$ aws configure <span class="built_in">set</span> aws_access_key_id dummy     --profile <span class="built_in">local</span></span><br><span class="line">$ aws configure <span class="built_in">set</span> aws_secret_access_key dummy --profile <span class="built_in">local</span></span><br><span class="line">$ aws configure <span class="built_in">set</span> region ap-northeast-1       --profile <span class="built_in">local</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># DynamoDBã«å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ(åˆå›ã®ã¿)</span></span><br><span class="line">$ docker network create lambda-local-test</span><br><span class="line">$ docker run -d --network lambda-local-test --name dynamoTest -p 8000:8000 amazon/dynamodb-local:1.12.0 -jar DynamoDBLocal.jar -sharedDb</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœæ­¢ã‚³ãƒãƒ³ãƒ‰</span></span><br><span class="line"><span class="comment"># docker stop dynamoTest</span></span><br></pre></td></tr></table></figure><p>ã“ã‚Œã§ãƒ†ã‚¹ãƒˆç”¨ã®dynamoDBãŒã§ãã¾ã—ãŸã€‚ã“ã“ã«ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’åˆ‡ã‚Šã¾ã™ã€‚ãƒ†ãƒ¼ãƒ–ãƒ«ã¯<code>aws-cli</code>ã‚’ä½¿ã„ã¾ã™ã€‚</p><figure class="highlight json"><figcaption><span>testdata/db_local.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"TableName"</span>: <span class="string">"local_company_table"</span>,</span><br><span class="line">    <span class="attr">"KeySchema"</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"AttributeName"</span>: <span class="string">"company"</span>,</span><br><span class="line">        <span class="attr">"KeyType"</span>: <span class="string">"HASH"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"AttributeName"</span>: <span class="string">"year"</span>,</span><br><span class="line">        <span class="attr">"KeyType"</span>: <span class="string">"RANGE"</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"AttributeDefinitions"</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"AttributeName"</span>: <span class="string">"company"</span>,</span><br><span class="line">        <span class="attr">"AttributeType"</span>: <span class="string">"S"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"AttributeName"</span>: <span class="string">"year"</span>,</span><br><span class="line">        <span class="attr">"AttributeType"</span>: <span class="string">"S"</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"ProvisionedThroughput"</span>: &#123;</span><br><span class="line">      <span class="attr">"ReadCapacityUnits"</span>: <span class="number">2</span>,</span><br><span class="line">      <span class="attr">"WriteCapacityUnits"</span>: <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’åˆ‡ã‚Šã¾ã™ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ aws dynamodb --profile local --endpoint-url http://localhost:8000 create-table --cli-input-json file://./testdata/db_local.json</span><br><span class="line">ï¼ˆå‡ºåŠ›ç•¥ï¼‰</span><br></pre></td></tr></table></figure><h2 id="Goã®ã‚³ãƒ¼ãƒ‰ä¿®æ­£"><a href="#Goã®ã‚³ãƒ¼ãƒ‰ä¿®æ­£" class="headerlink" title="Goã®ã‚³ãƒ¼ãƒ‰ä¿®æ­£"></a>Goã®ã‚³ãƒ¼ãƒ‰ä¿®æ­£</h2><p>å…ˆç¨‹ã¯APIã‚¢ã‚¯ã‚»ã‚¹ã«å¯¾ã—ã¦ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™ã ã‘ã§ã—ãŸãŒã€ä»Šåº¦ã¯åŒã˜å†…å®¹ã‚’DynamoDBã«æ›¸ãè¾¼ã‚€ã‚ˆã†ã«ä¿®æ­£ã—ã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>main.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"context"</span></span><br><span class="line"><span class="string">"encoding/json"</span></span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="string">"github.com/aws/aws-lambda-go/events"</span></span><br><span class="line"><span class="string">"github.com/aws/aws-lambda-go/lambda"</span></span><br><span class="line"><span class="string">"github.com/aws/aws-sdk-go/aws"</span></span><br><span class="line"><span class="string">"github.com/aws/aws-sdk-go/aws/session"</span></span><br><span class="line"><span class="string">"github.com/aws/aws-sdk-go/service/dynamodb"</span></span><br><span class="line"><span class="string">"github.com/aws/aws-sdk-go/service/dynamodb/dynamodbattribute"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> db *dynamodb.DynamoDB</span><br><span class="line"><span class="keyword">var</span> dbEndpoint = <span class="string">"http://dynamoTest:8000"</span></span><br><span class="line"><span class="keyword">var</span> region = <span class="string">"ap-northeast-1"</span></span><br><span class="line"><span class="keyword">var</span> testTable = <span class="string">"local_company_table"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> CompanyResponse <span class="keyword">struct</span> &#123;</span><br><span class="line">Company <span class="keyword">string</span> <span class="string">`json:"company"`</span></span><br><span class="line">Year    <span class="keyword">string</span> <span class="string">`json:"year"`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">write</span><span class="params">(ctx context.Context, tableName <span class="keyword">string</span>, v <span class="keyword">interface</span>&#123;&#125;)</span> <span class="title">error</span></span> &#123;</span><br><span class="line">av, err := dynamodbattribute.MarshalMap(v)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> fmt.Errorf(<span class="string">"dynamodb attribute marshalling map: %w"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">i := &amp;dynamodb.PutItemInput&#123;</span><br><span class="line">Item:      av,</span><br><span class="line">TableName: aws.String(tableName),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> _, err = db.PutItemWithContext(ctx, i); err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> fmt.Errorf(<span class="string">"dynamodb put item: %w"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">handler</span><span class="params">(ctx context.Context, request events.APIGatewayProxyRequest)</span> <span class="params">(events.APIGatewayProxyResponse, error)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">sess := session.Must(session.NewSession(&amp;aws.Config&#123;</span><br><span class="line">Endpoint: aws.String(dbEndpoint),</span><br><span class="line">Region:   aws.String(region),</span><br><span class="line">&#125;))</span><br><span class="line">db = dynamodb.New(sess)</span><br><span class="line"></span><br><span class="line">response := CompanyResponse&#123;</span><br><span class="line">Company: <span class="string">"Future"</span>,</span><br><span class="line">Year:    <span class="string">"1989"</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">jsonBytes, _ := json.Marshal(response)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> err := write(ctx, testTable, response); err != <span class="literal">nil</span> &#123;</span><br><span class="line">fmt.Print(<span class="string">"%s"</span>, err)</span><br><span class="line"><span class="keyword">return</span> events.APIGatewayProxyResponse&#123;</span><br><span class="line">Body:       <span class="keyword">string</span>(jsonBytes),</span><br><span class="line">StatusCode: <span class="number">500</span>,</span><br><span class="line">&#125;, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> events.APIGatewayProxyResponse&#123;</span><br><span class="line">Body:       <span class="keyword">string</span>(jsonBytes),</span><br><span class="line">StatusCode: <span class="number">200</span>,</span><br><span class="line">&#125;, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">lambda.Start(handler)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="SAMã«ã‚ˆã‚‹ãƒ†ã‚¹ãƒˆ"><a href="#SAMã«ã‚ˆã‚‹ãƒ†ã‚¹ãƒˆ" class="headerlink" title="SAMã«ã‚ˆã‚‹ãƒ†ã‚¹ãƒˆ"></a>SAMã«ã‚ˆã‚‹ãƒ†ã‚¹ãƒˆ</h2><p>SAMã‚’å®Ÿè¡Œã™ã‚‹ã¨ãã€docker-networkã‚’æŒ‡å®šã—ã¾ã™ã€‚ã“ã‚Œã§ã€SAMã§èµ·å‹•ã—ãŸdockerã¨DynamoDB localãŒåŒã˜ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¸Šã«å…¥ã‚Šã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ make build</span><br><span class="line">$ sam <span class="built_in">local</span> start-api --docker-network lambda-local-test</span><br></pre></td></tr></table></figure><p>ã‚‚ã†ä¸€ã¤ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’ç«‹ã¡ä¸Šã’ã¦ã‚³ãƒãƒ³ãƒ‰ã‚’æ‰“ã¡ã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…ˆç¨‹ä½œã£ãŸãƒ†ãƒ¼ãƒ–ãƒ«ã¯æœªã ç©ºã§ã™ã€‚ã“ã‚Œã‹ã‚‰ã“ã“ã«æ›¸ãè¾¼ã¿ã¾ã™ã€‚</span></span><br><span class="line">$ aws dynamodb scan --table-name local_company_table --profile <span class="built_in">local</span> --endpoint-url http://localhost:8000</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">"Items"</span>: [],</span><br><span class="line">    <span class="string">"Count"</span>: 0,</span><br><span class="line">    <span class="string">"ScannedCount"</span>: 0,</span><br><span class="line">    <span class="string">"ConsumedCapacity"</span>: null</span><br><span class="line">&#125;</span><br><span class="line">$ curl localhost:3000/apigw</span><br><span class="line">&#123;<span class="string">"Company"</span>:<span class="string">"Future"</span>,<span class="string">"Year"</span>:<span class="string">"1989"</span>&#125;</span><br><span class="line"><span class="comment"># ä½œã£ãŸãƒ†ãƒ¼ãƒ–ãƒ«ã«å¿…è¦ãªé …ç›®ãŒå…¥ã£ã¦ã„ã‚‹</span></span><br><span class="line">$ aws dynamodb scan --table-name local_company_table --profile <span class="built_in">local</span> --endpoint-url http://localhost:8000</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">"Items"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"year"</span>: &#123;</span><br><span class="line">                <span class="string">"S"</span>: <span class="string">"1989"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"company"</span>: &#123;</span><br><span class="line">                <span class="string">"S"</span>: <span class="string">"Future"</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"Count"</span>: 1,</span><br><span class="line">    <span class="string">"ScannedCount"</span>: 1,</span><br><span class="line">    <span class="string">"ConsumedCapacity"</span>: null</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¢ºã‹ã«ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä¸­ã«å€¤ãŒæ ¼ç´ã•ã‚Œã¾ã—ãŸã€‚</p><h1 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h1><p>ä»Šå›SAMã‚’ä½¿ã£ãŸãƒ†ã‚¹ãƒˆãŒã§ãã¾ã—ãŸã€‚ã‚ã¨ã¯å¿…è¦ã«å¿œã˜ã¦APIã‚’å©ãLambdaã‚’ä½œã£ãŸã‚Šã€ã‚ã‚‹ã„ã¯API Gatewayã‹ã‚‰å‘¼ã³å‡ºã•ã‚Œã‚‹Lambdaã‚’é©å®œå¢—ã‚„ã—ã¦ã„ãã“ã¨ã§ã€ç›®çš„ã¨ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã®é–‹ç™ºãŒè¡Œãªãˆã¾ã™ã€‚</p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href="https://dev.classmethod.jp/cloud/aws/aws-lambda-supports-go/" target="_blank" rel="noopener">AWS Lambda ã§ Go ãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã§è©¦ã—ã¦ã¿ãŸ</a></li><li><a href="https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/go-programming-model-handler-types.html" target="_blank" rel="noopener">Go ã® AWS Lambda é–¢æ•°ãƒãƒ³ãƒ‰ãƒ©ãƒ¼</a></li><li><a href="https://qiita.com/shunp/items/52ee20278e02e29ef3e8" target="_blank" rel="noopener">Go+Lambdaã§æœ€é€Ÿã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«</a> </li></ul><h2 id="é–¢é€£ãƒªãƒ³ã‚¯"><a href="#é–¢é€£ãƒªãƒ³ã‚¯" class="headerlink" title="é–¢é€£ãƒªãƒ³ã‚¯"></a>é–¢é€£ãƒªãƒ³ã‚¯</h2><p>Goã«é–¢é€£ã—ãŸé€£è¼‰ä¼ç”»ãŒã‚ã‚Šã¾ã™ã€‚</p><ul><li><a href="/tags/Serverless%E9%80%A3%E8%BC%89/">ã‚µãƒ¼ãƒãƒ¬ã‚¹é€£è¼‰</a></li><li><a href="https://future-architect.github.io/tags/GoCDK/">Go Cloud é€£è¼‰</a></li><li><a href="https://future-architect.github.io/tags/DynamoDB%C3%97Go/">DynamoDBÃ—Goé€£è¼‰</a></li><li><a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCP é€£è¼‰</a></li><li><a href="https://future-architect.github.io/articles/20190713/">Goã‚’å­¦ã¶ã¨ãã«ã¤ã¾ãšãã‚„ã™ã„ãƒã‚¤ãƒ³ãƒˆFAQ</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;/tags/Serverless%E9%80%A3%E8%BC%89/&quot;&gt;ã‚µãƒ¼ãƒãƒ¬ã‚¹é€£è¼‰&lt;/a&gt; ã®ç¬¬1å¼¾ã§ã™ã€‚&lt;/p&gt;
&lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯
      
    
    </summary>
    
      <category term="Programming" scheme="https://future-architect.github.io/categories/Programming/"/>
    
    
      <category term="AWS" scheme="https://future-architect.github.io/tags/AWS/"/>
    
      <category term="Go" scheme="https://future-architect.github.io/tags/Go/"/>
    
      <category term="Serverless" scheme="https://future-architect.github.io/tags/Serverless/"/>
    
      <category term="Serverlessé€£è¼‰" scheme="https://future-architect.github.io/tags/Serverless%E9%80%A3%E8%BC%89/"/>
    
      <category term="DynamoDB" scheme="https://future-architect.github.io/tags/DynamoDB/"/>
    
      <category term="Lambda" scheme="https://future-architect.github.io/tags/Lambda/"/>
    
  </entry>
  
  <entry>
    <title>ä»Šã‚ãˆã¦TypeScriptã®ãƒ“ãƒ«ãƒ‰ï¼†ãƒãƒ³ãƒ‰ãƒ«ãƒ„ãƒ¼ãƒ«ã‚’æ¢ã—ã¦ã¿ã‚‹</title>
    <link href="https://future-architect.github.io/articles/20200319/"/>
    <id>https://future-architect.github.io/articles/20200319/</id>
    <published>2020-03-19T01:12:40.000Z</published>
    <updated>2020-03-19T01:18:52.766Z</updated>
    
    <content type="html"><![CDATA[<p>ã¡ã‚‡ã£ã¨ã—ãŸãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®é–‹ç™ºã§ã€TypeScriptã«æœ€åˆã‹ã‚‰å¯¾å¿œã—ã¦ã„ã¦ã€ç°¡å˜ã«ä½¿ãˆã‚‹ã‚‚ã®ã¯ä½•ã‹ãªã„ã‹ãªã€ã¨èª¿ã¹ã¦ã¿ãŸãƒ¡ãƒ¢ã§ã™ã€‚React/Vue/Angularã®å ´åˆã¯ãã‚Œãã‚Œã®åˆæœŸåŒ–ã‚³ãƒãƒ³ãƒ‰ã§ä½•ã‹ã‚‰ä½•ã¾ã§ç”¨æ„ã—ã¦ãã‚Œã¾ã™ã€‚Next.jsã€Nuxt.jsã€Gatsbyãªã©ã‚‚ã€ã“ã‚Œã‚‰ã®ãƒ“ãƒ«ãƒ‰ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’ç°¡ç•¥åŒ–ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚åŸºæœ¬çš„ã«ã“ã‚Œã‚‰ã®ã‚¦ã‚§ãƒ–ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚’é–‹ç™ºã™ã‚‹ã¨ãã«ã¯ã€å°è¦æ¨¡ãƒ»ä¸­è¦æ¨¡ãã‚‰ã„ãªã‚‰ã‚ã‚“ã¾ã‚Šæ°—ã«ã—ãªãã¦ãŠã¾ã‹ã›ã§ã‚‚ã„ã„ã¨æ€ã„ã¾ã™ã€‚</p><p>ä»Šå›ã¯ã€ãã‚Œã‚‰ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å›ºæœ‰ã®ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã¨ã¯åˆ¥ã«ç’°å¢ƒã‚’ä½œã‚ŠãŸã„äººã§ã€TypeScriptã®ç’°å¢ƒãŒæ¬²ã—ã„ã€ã‚¦ã‚§ãƒ–ã®é–‹ç™ºãŒã—ãŸã„ã€ã¨ã„ã†å‰æã§ã„ã‚ã„ã‚æ¢ã—ã¦ã¿ã¾ã—ãŸã€‚</p><p>ä»Šå›è©¦ã—ã¦ã¿ãŸã®ã¯æ¬¡ã®4ã¤ã§ã™ã€‚</p><ul><li>Parcel</li><li>Fusebox</li><li>ncc</li><li>Rome.js</li></ul><h1 id="JavaScriptã®ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã¨ã¯"><a href="#JavaScriptã®ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã¨ã¯" class="headerlink" title="JavaScriptã®ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã¨ã¯"></a>JavaScriptã®ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã¨ã¯</h1><p>JavaScriptã§ãƒ“ãƒ«ãƒ‰ã¨ã„ã£ã¦ã‚‚ã€ã„ã‚ã„ã‚ãªã‚¹ãƒ†ãƒƒãƒ—ãŒã‚ã‚Šã¾ã™ã€‚</p><ol><li>TypeScriptã‚„Babelã‚’ä½¿ã£ã¦ã€ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã¨ãªã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®JavaScriptã«å¤‰æ›</li><li>SCSSã¨ã‹PostCSSã‚’ä½¿ã£ã¦ãƒ–ãƒ©ã‚¦ã‚¶ã«ãªã„æ©Ÿèƒ½ã‚’ä½¿ã£ã¦æ›¸ã‹ã‚ŒãŸCSSã‚’ç´ ã®CSSã«å¤‰æ›</li><li>webpackãªã©ã‚’ä½¿ã£ã¦ã€1ã¤ã®JavaScriptãƒ•ã‚¡ã‚¤ãƒ«ã€ã‚‚ã—ãã¯é…å»¶ãƒ­ãƒ¼ãƒ‰ã‚’ã™ã‚‹JSãƒ•ã‚¡ã‚¤ãƒ«ç¾¤ã‚’ç”Ÿæˆ</li></ol><p>ã¾ã‚å®Ÿéš›ã«ã¯ã“ã‚“ãªã«ç¶ºéº—ã«ã‚¹ãƒ†ãƒƒãƒ—ãŒåˆ†ã‹ã‚Œã‚‹ã“ã¨ã¯ãªãã¦ã€webpackãŒimportæ–‡ã‚’è¿½è·¡ã—ã¤ã¤ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¢ã—ã€.tsã‚’è¦‹ã¤ã‘ã¦ã¯TypeScriptã§å‡¦ç†ã—ã¦ï¼ˆã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ï¼‰ã€ã‚³ãƒ¼ãƒ‰ä¸­ã«SCSSã‚’è¦‹ã¤ã‘ã¦ã¯SCSSã®å‡¦ç†ç³»ã«æŠ•ã’ã¦ã€ä¸€ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¾ã¨ã‚ã‚‹ï¼ˆãƒãƒ³ãƒ‰ãƒ«ï¼‰ãƒ»ãƒ»ã¿ãŸã„ãªå·¥ç¨‹ã‚’è¡Œã£ãŸã‚ŠããŸã‚Šã—ãªãŒã‚‰ãƒ“ãƒ«ãƒ‰ã—ã¾ã™ã€‚ä»¥å‰ã¯ã€ã“ã‚Œã«Jakeã€Gulpã€Gruntãªã©ã®ã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼ã‚‚çµ„ã¿åˆã‚ã›ã¦ã‚„ã£ã¦ã¾ã—ãŸãŒã€ä»Šã¯webpackå˜ä½“ã«ts-loaderãªã©ã‚’çµ„ã¿åˆã‚ã›ã‚‹æ„Ÿã˜ã§ä¸€é€šã‚Šã§ãã¾ã™ã€‚webpackãŒ<a href="https://www.jetbrains.com/lp/devecosystem-2019/javascript/" target="_blank" rel="noopener">ã‚·ã‚§ã‚¢80%</a>ã§ä¸€å¼·ã§ã™ã­ã€‚</p><p>ãªãŠã€ã“ã‚Œã«ãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ›´æ¤œçŸ¥ã‚’è¡Œã£ã¦ã€å¤‰æ›´æ™‚ã«å¤‰æ›´éƒ¨åˆ†ã ã‘ã‚’ãƒ“ãƒ«ãƒ‰ï¼ˆã‚¦ã‚©ãƒƒãƒï¼‰ã€èª­ã¿è¾¼ã‚“ã§ã„ã‚‹ãƒ–ãƒ©ã‚¦ã‚¶ã«å¤‰æ›´ã—ãŸã“ã¨ã‚’ä¼ãˆã¦ãƒªãƒ­ãƒ¼ãƒ‰ã‚’è¡Œã‚ã›ã‚‹é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã¨ã‚ˆã¶ã‚µãƒ¼ãƒãƒ¼ã‚‚åŠ ãˆã‚‹ã¨ã€ä¸–é–“ã§ã€ŒJavaScriptã®ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã€ã¨å‘¼ã¶æ©Ÿèƒ½ã¯ã ã„ãŸã„ç¶²ç¾…ã•ã‚Œã‚‹ã‚“ã˜ã‚ƒãªã„ã§ã™ã‹ã­ã€‚</p><h1 id="Parcel"><a href="#Parcel" class="headerlink" title="Parcel"></a>Parcel</h1><p><a href="https://parceljs.org/" target="_blank" rel="noopener">Parcel</a>ã¯ã‚¼ãƒ­ã‚³ãƒ³ãƒ•ã‚£ã‚°ã‚’ç›®æŒ‡ã—ãŸãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã§ã™ã€‚TypeScriptã‚‚æœ€åˆã‹ã‚‰ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã‚’æŒ‡å®šã™ã‚‹ã ã‘ã§ãƒ“ãƒ«ãƒ‰ã—ã¦ãã‚Œã¾ã™ã€‚tsconfig.jsonãŒã‚ã‚Œã°ãã‚Œã‚’æ‹¾ã£ã¦è§£é‡ˆã—ã¦ãã‚Œã¾ã™ã—ã€ãªãã¦ã‚‚å‹•ãã¾ã™ã€‚å˜ã«tsãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã¨ã—ã¦ã‚ãŸã—ã¦ã‚ã’ã‚Œã°ã€ãã®ã¾ã¾TypeScriptã®å‡¦ç†ç³»ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¤ã¤ãƒ“ãƒ«ãƒ‰ã—ã¦ãã‚Œã¾ã™ã€‚æœ€åˆã®ãƒ“ãƒ«ãƒ‰ã‚‚é«˜é€Ÿã§ã™ã—ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚‚ã—ã¦ãã‚Œã¦2å›ç›®ä»¥é™ã‚‚é€Ÿã„ã§ã™ã€‚TreeShakingã¨ã‹ã®ç”Ÿæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã®æœ€é©åŒ–æ©Ÿæ§‹ã‚‚å…¥ã£ã¦ã„ã‚‹ã¨ã®ã“ã¨ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -D parcel-bundler</span><br><span class="line">$ npx parcel build src/index.ts</span><br></pre></td></tr></table></figure><p>ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã«HTMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã§ãã¦ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºã®é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚‚ä»˜ã„ã¦ã„ã‚‹ã€‚ã“ã‚Œã¯ç„¡æ•µï¼ã¨æ€ã„ãã‚„ãƒ»ãƒ»ãƒ»ã‚ã–ã¨å‹ã‚’é–“é•ã£ãŸTypeScriptã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å…¥åŠ›ã—ã¦ã‚‚ä½•ã‚‚ã‚¨ãƒ©ãƒ¼ã‚‚å‡ºã¾ã›ã‚“ã€‚</p><p>ã“ã‚Œã¯ç¾åœ¨ã¯æ„å›³ã—ãŸå‹•ä½œã‚‰ã—ãã€Parcelã¯æœ€é€Ÿã§ãƒãƒ³ãƒ‰ãƒ«ã™ã‚‹ã ã‘ã‚’ç›®æŒ‡ã—ã¦ãŠã‚Šã€è¨­è¨ˆæ–¹é‡ã¨ã—ã¦ã‚¨ãƒ©ãƒ¼ã¯å‡ºã•ãªã„ã¨ã®ã“ã¨ã€‚ã‚‚ã—ã‹ã—ãŸã‚‰ã€TypeScriptã§é–‹ç™ºã—ã€Visual Studio Codeã¨ã‹WebStormä¸Šã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ãã‚‹ãªã‚‰å•é¡Œãªã„ã¨ã‚‚è¨€ãˆã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã¨ã¯ã„ãˆã€ã›ã£ã‹ãã®ãƒã‚§ãƒƒã‚¯æ©Ÿæ§‹ã‚’ã¾ã£ãŸãç„¡è¦–ã™ã‚‹ã®ã¯TypeScriptã‚’ä½¿ã†ãƒ¡ãƒªãƒƒãƒˆãŒã ã„ã¶å‰Šã‚‰ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚ã¾ãŸã€åˆ¥é€”CIãªã‚Šã‚’æ•´å‚™ã™ã‚‹ã®ã‚‚ã¡ã‚‡ã£ã¨æ‰‹é–“ã§ã™ã‚ˆã­ã€‚ã¾ã‚ã€TypeScriptã¨ã‹ãŒæµè¡Œã‚‹å‰ã¯å‹ãƒã‚§ãƒƒã‚¯ãªã‚“ã¦ãªã‹ã£ãŸã‚ã‘ã§ã€ã¡ã‚‡ã£ã¨æ˜”ã®æ„Ÿè¦šã‚’æ€ã„å‡ºã—ã¾ã—ãŸã€‚</p><p><a href="https://github.com/parcel-bundler/parcel/issues/1378" target="_blank" rel="noopener">Parcel 2ç³»ã«ãªã£ãŸã‚‰TypeScriptã®ã‚¨ãƒ©ãƒ¼ã‚’å ±å‘Šã—ãªã„å•é¡Œã«å¯¾å¿œã™ã‚‹ã‚ˆ</a>ã€ã¨æ˜¨å¹´ã®ã‚³ãƒ¡ãƒ³ãƒˆã«ã¯ã‚ã‚‹ã‚‚ã®ã®ã€æ¬¡ã®<a href="https://github.com/parcel-bundler/parcel/projects/5" target="_blank" rel="noopener">2.0ã®ãƒªãƒªãƒ¼ã‚¹ã¾ã§ã®ãƒãƒ¼ãƒ‰ãƒ«ã¯ã‹ãªã‚Šé«˜ãã†</a>ã€‚2.0ãŒå‡ºã¦ã•ãˆãã‚Œã‚Œã°è¨­å®šã®ã‹ã‚“ãŸã‚“ã•ã¨ã‹ã¯æŠœç¾¤ãªã®ã§ã€æœŸå¾…ã—ã¦ã„ã¾ã™ã€‚</p><h1 id="FuseBox"><a href="#FuseBox" class="headerlink" title="FuseBox"></a>FuseBox</h1><p><a href="https://fuse-box.org/" target="_blank" rel="noopener">FuseBox</a>ã¯ãã“ãã“æ­´å²ã¯ã‚ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ãŒã€ã“ã“ã§ç´¹ä»‹ã™ã‚‹ä»–ã®ãƒ„ãƒ¼ãƒ«ã¨é•ã„ã€CLIã‚’æä¾›ã—ã¾ã›ã‚“ã€‚JavaScriptã‹TypeScriptã§ãƒ“ãƒ«ãƒ‰ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚Šã¾ã™ã€‚ç¾çŠ¶ã¯3ç³»ã§ã™ãŒã€ã“ã‚Œã‚‚æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®4ç³»ãŒé–‹ç™ºä¸­ã§ã€<code>@next</code>ã‚’ã¤ã‘ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -D fuse-box@next</span><br></pre></td></tr></table></figure><p>4ç³»ã®æœ€å°ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚ã“ã‚Œã¯ãƒ‡ãƒãƒƒã‚°ãƒ“ãƒ«ãƒ‰ã®ãŸã‚ã®é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’ç«‹ã¡ä¸Šã’ã¦é–‹ç™ºæ”¯æ´ã‚’ã™ã‚‹ã€ã¨ã„ã†è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import &#123; fusebox &#125; from &apos;fuse-box&apos;;</span><br><span class="line">fusebox(&#123;</span><br><span class="line">  target: &apos;browser&apos;,</span><br><span class="line">  entry: &apos;src/index.tsx&apos;,</span><br><span class="line">  webIndex: &#123;</span><br><span class="line">    template: &apos;src/index.html&apos;,</span><br><span class="line">  &#125;,</span><br><span class="line">  devServer: true,</span><br><span class="line">&#125;).runDev();</span><br></pre></td></tr></table></figure><p>ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ã¨ã“ã‚ã®HTMLã¯ã“ã‚“ãªæ„Ÿã˜ã§ã€CSSã¨JavaScriptã®æˆæœç‰©ã‚’$ãªãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã«åŸ‹ã‚è¾¼ã‚€ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚ã€€</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    $css</span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    $bundles</span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ã¨ã¯ã„ã£ã¦ã‚‚ã€ãƒ‡ãƒãƒƒã‚°å®Ÿè¡Œã ã‘ãŒã—ãŸã„ã‚ã‘ã˜ã‚ƒãªãã¦ã€productionãƒ“ãƒ«ãƒ‰ã‚‚ã—ãŸã„ã‚ã‘ã§ã€ãã†ãªã‚‹ã¨ãŸãã•ã‚“æ›¸ã‹ãªã„ã¨ã„ã‘ãªã„ã€‚ä¸€å¿œã€<a href="https://github.com/fuse-box/react-example/blob/master/fuse.ts" target="_blank" rel="noopener">ãƒ•ãƒ«ã‚»ãƒƒãƒˆã®ã‚µãƒ³ãƒ—ãƒ«ã¨ã—ã¦ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰</a>ãŒæç¤ºã•ã‚Œã¦ã„ã¾ã™ï¼ˆä»Šå›ã¯Reactã‚’ä½œã‚ŠãŸã„ã‚ã‘ã§ã¯ãªã„ã®ã§.tsxã¯.tsã«æ›¸ãæ›ãˆã¾ã—ãŸï¼‰ã€‚ã“ã“ã¾ã§æ›¸ã‹ãªã„ã¨ã„ã‘ãªã„ã®ã§ã‚ã‚Œã°ã€CLIãƒ„ãƒ¼ãƒ«ã‚‚ä¸€ç·’ã«æä¾›ã—ã¦ã»ã—ã„æ°—ãŒãƒ»ãƒ»ãƒ»</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; fusebox, sparky &#125; <span class="keyword">from</span> <span class="string">"fuse-box"</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Context</span> </span>&#123;</span><br><span class="line">  runServer;</span><br><span class="line">  getConfig = <span class="function"><span class="params">()</span> =&gt;</span></span><br><span class="line">    fusebox(&#123;</span><br><span class="line">      target: <span class="string">"browser"</span>,</span><br><span class="line">      entry: <span class="string">"src/index.ts"</span>,</span><br><span class="line">      webIndex: &#123;</span><br><span class="line">        template: <span class="string">"src/index.html"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      cache : <span class="literal">true</span>,</span><br><span class="line">      devServer: <span class="keyword">this</span>.runServer</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> &#123; task &#125; = sparky&lt;Context&gt;(Context);</span><br><span class="line"></span><br><span class="line">task(<span class="string">"default"</span>, <span class="keyword">async</span> ctx =&gt; &#123;</span><br><span class="line">  ctx.runServer = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">const</span> fuse = ctx.getConfig();</span><br><span class="line">  <span class="keyword">await</span> fuse.runDev();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">task(<span class="string">"preview"</span>, <span class="keyword">async</span> ctx =&gt; &#123;</span><br><span class="line">  ctx.runServer = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">const</span> fuse = ctx.getConfig();</span><br><span class="line">  <span class="keyword">await</span> fuse.runProd(&#123; <span class="attr">uglify</span>: <span class="literal">false</span> &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">task(<span class="string">"dist"</span>, <span class="keyword">async</span> ctx =&gt; &#123;</span><br><span class="line">  ctx.runServer = <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">const</span> fuse = ctx.getConfig();</span><br><span class="line">  <span class="keyword">await</span> fuse.runProd(&#123; <span class="attr">uglify</span>: <span class="literal">false</span> &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ãƒ“ãƒ«ãƒ‰ã¯é«˜é€Ÿã§å¿«é©ã§ã™ã€‚tsconfig.jsonãŒãªãã¦ã‚‚å®Ÿè¡Œã§ãã¾ã™ã€‚ãªãŠã€Node.js 10.xã‚„11.xã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã¯ã¾ã experimentalãªworker_threadãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã§ã€12ä»¥é™ã‚’ä½¿ã†ã‹ã€<code>--experimental-worker</code>ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒå¿…è¦ã§ã™ã€‚é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚‚ã‚ã‚Šã€HMRã‚‚ã§ãã¦ã€ã‚¦ã‚§ãƒ–ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºã§TypeScriptã§ã‚„ã‚ŠãŸã„äººã«ã¯è‰¯ã„ã§ã™ã­ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">% npm start </span><br><span class="line"></span><br><span class="line">&gt; fuse-box-test@1.0.0 start /Users/shibukawa/fuse-box-test</span><br><span class="line">&gt; ts-node -T fuse</span><br><span class="line"></span><br><span class="line">  [ default ] Starting</span><br><span class="line"></span><br><span class="line">  âš™  FuseBox 4.0.0-next.411</span><br><span class="line">     Mode: development</span><br><span class="line">     Entry: /Users/shibukawa/fuse-box-test/src/index.ts</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   SUCCESS   Completed without build issues <span class="keyword">in</span> 128ms</span><br><span class="line"></span><br><span class="line">  [ default ] Completed <span class="keyword">in</span> 138ms</span><br><span class="line">  development Development server is running at http://localhost:4444</span><br></pre></td></tr></table></figure><h1 id="ncc"><a href="#ncc" class="headerlink" title="ncc"></a>ncc</h1><p>npmã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«ã™ã‚‹ã€è¶…å¿«é©ã«é–‹ç™ºã™ã‚‹ã€ã¨ã„ã†ã®ã‚’ç›®æŒ‡ã—ã¦ä½œã‚‰ã‚Œã¦ã„ã‚‹ã®ãŒ<a href="https://www.npmjs.com/package/@zeit/ncc" target="_blank" rel="noopener">ncc</a>ã§ã™ã€‚ã‚ã‚‹æ„å‘³browserifyã®å¾Œç¶™ãªæ„Ÿã˜ã‚’å—ã‘ã¾ã™ã€‚ç°¡å˜ã€‚ã²ãŸã™ã‚‰ç°¡å˜ã€‚Next.jsã§æœ‰åãªZeitãŒé–‹ç™ºã—ã¦ã„ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -D @zeit/ncc</span><br></pre></td></tr></table></figure><p>npmã®ã‚µã‚¤ã‚ºã‚’å°ã•ãã™ã‚‹ã¨ã„ã†ç›®æ¨™ã‚’ä½“ç¾ã—ã¦ã„ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã€ãã‚Œè‡ªèº«ã‚‚TypeScriptå†…è‡“ã ã‘ã©ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯ä¸€ç¬ã§çµ‚ã‚ã‚Šã¾ã™ã€‚ä»–ã¸ã®ä¾å­˜ã‚‚ãªãã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã¨ã¦ã‚‚å°ã•ã„ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ du -h</span><br><span class="line">9.8M./node_modules/@zeit</span><br></pre></td></tr></table></figure><p>ã‚³ãƒãƒ³ãƒ‰ä½“ç³»ã¯Goã‚’ç›®æŒ‡ã—ã¦ã„ã¦ã€ncc build [script]ã§ãƒ“ãƒ«ãƒ‰ãŒã§ãã¾ã™ã€‚ncc run [script]ã§å®Ÿè¡ŒãŒã§ãã¾ã™ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">% npx ncc run -q test.ts</span><br><span class="line">ncc: Using typescript@3.7.5 (ncc built-in)</span><br><span class="line">hello world</span><br></pre></td></tr></table></figure><p>ts-nodeã¯å®Ÿè¡Œã«typescriptãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå¿…è¦ã§ã€ts-nodeã¨typescriptã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨ãã‚Œã ã‘ã§52MBãã‚‰ã„ã«ãªã£ã¦ã—ã¾ã†ã®ã§ã€ncc runã‚’ts-nodeãŒã‚ã‚Šã«ã™ã‚‹ã®ã‚‚è‰¯ã•ãã†ã§ã™ã€‚tsconfig.jsonã¯å¿…è¦ã§ã™ã€‚</p><p>ã‚³ãƒãƒ³ãƒ‰ã¯åŸºæœ¬çš„ã«buildã¨runã ã‘ãªã®ã§ä½¿ã„æ–¹ã¯è¿·ã†ã“ã¨ã¯ãªã„ã¨æ€ã„ã¾ã™ã€‚<code>--watch</code>ã§ç›£è¦–ã—ã¤ã¤ãƒ“ãƒ«ãƒ‰ã—ãŸã‚Šã€<code>--minify</code>ã§å°ã•ãã—ãŸã‚Šã€‚</p><p>ä¸€æ–¹ã€ã‚¦ã‚§ãƒ–ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®é–‹ç™ºã‚’æ‰‹åŠ©ã‘ã—ã¦ãã‚Œã‚‹é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚Expressã¨ã‹ã§APIã‚µãƒ¼ãƒãƒ¼ã‚’å®Ÿè£…ã™ã‚‹ã«ã¯è‰¯ã•ãã†ã§ã™ã€‚</p><h1 id="Rome-js"><a href="#Rome-js" class="headerlink" title="Rome.js"></a>Rome.js</h1><ul><li><a href="https://romejs.dev/" target="_blank" rel="noopener">https://romejs.dev/</a></li></ul><p>ã“ã¡ã‚‰ã¯è¶…æ–°é€²æ°—é‹­ã®ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚æ—¥æœ¬Node.jsãƒ¦ãƒ¼ã‚¶ã‚°ãƒ«ãƒ¼ãƒ—ã®ä¼šé•·ã«ã€Œã‹ã„ã¡ã‚‡ãƒ¼ã€ä½•ã‹JSã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å…¼ãƒ“ãƒ«ãƒ‰ã‚µãƒ¼ãƒãƒ¼ã¾ã‚ã‚Šã§ã€ãªã‚“ã‹æ–°ã—ã’ãªè‰¯ã„ã®ãªã„ã§ã™ã‹ã€ã¨èã„ã¦æ•™ãˆã¦ã‚‚ã‚‰ã„ã¾ã—ãŸã€‚</p><p>Babelã®ä½œè€…ã¨ã‹ãŒé–¢ã‚ã£ã¦ã„ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã€Linterã€ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ã€ãƒ†ã‚¹ãƒˆã€ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãªã©ã‚’å…¨éƒ¨ã¾ã¨ã‚ã¦æŒã£ã¦ã„ã¦ã€å¤–éƒ¨ä¾å­˜ãŒãªã„ã®ãŒã‚¦ãƒªã¨ã®ã“ã¨ã€‚ãªãŠã€ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã¯ã‚ã‚Šã¾ã™ãŒã€ãã‚Œã‚ˆã‚Šã‚‚<a href="https://github.com/facebookexperimental/rome" target="_blank" rel="noopener">GitHubã®README</a>ã®æ–¹ãŒã„ã‚ã„ã‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®èƒŒæ™¯ç­‰ãŒè©³ã—ãæ›¸ã‹ã‚Œã¦ã„ãŸã‚Šã—ã¾ã™ï¼ˆå®Ÿè¡Œã®ä»•æ–¹ã®èª¬æ˜ã¯READMEã¯å¤ãã¦å‹•ã‹ãªã„ã§ã™ãŒï¼‰ã€‚</p><p>npmã«ã‚‚ä¸ŠãŒã£ã¦ã„ãªã„ã®ã§ã€git cloneã™ã‚‹ã¨ã“ã‚ã‹ã‚‰ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> --depth 1 https://github.com/facebookexperimental/rome</span><br><span class="line">$ <span class="built_in">pushd</span> rome</span><br><span class="line">$ ./scripts/build-release dist</span><br><span class="line">$ <span class="built_in">popd</span></span><br><span class="line">$ <span class="built_in">cd</span> rome-test</span><br><span class="line">$ npm install -D ../rome/dist</span><br></pre></td></tr></table></figure><p>ã“ã®ãƒ˜ãƒ«ãƒ—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‹ã‚‰æº¢ã‚Œå‡ºã‚‹experimentalæ„Ÿã€‚æ®‹å¿µãªãŒã‚‰ã€é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã¨ã‹ã¯ãªã„ã‚ˆã†ã§ã™ã€‚Facebookãªã®ã§ã€ã‚¦ã‚§ãƒ–ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã ã‘ã§ã¯ãªãã¦ã€React Nativeã¨ã‹ã‚‚ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã«è€ƒãˆã¦ã„ã‚‹ã®ã‹ã‚‚ã—ã‚Œãªã„ã—ã€ãã“ã®ã‚ãŸã‚Šã¯ã‚ˆãã‚ã‹ã‚Šã¾ã›ã‚“ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">% npx rome --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"> Usage â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span><br><span class="line"></span><br><span class="line">  $ rome [<span class="built_in">command</span>] [flags]</span><br><span class="line"></span><br><span class="line"> Global Flags â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span><br><span class="line"></span><br><span class="line">  --benchmark                   no description found</span><br><span class="line">  --benchmark-iterations &lt;num&gt;  no description found</span><br><span class="line">  --collect-markers             no description found</span><br><span class="line">  --cwd &lt;input&gt;                 no description found</span><br><span class="line">  --fieri                       no description found</span><br><span class="line">  --focus &lt;input&gt;               no description found</span><br><span class="line">  --grep &lt;input&gt;                no description found</span><br><span class="line">  --<span class="built_in">help</span>                        show this <span class="built_in">help</span> screen</span><br><span class="line">  --inverse-grep                no description found</span><br><span class="line">  --<span class="built_in">log</span>-path &lt;input&gt;            no description found</span><br><span class="line">  --logs                        no description found</span><br><span class="line">  --<span class="built_in">log</span>-workers                 no description found</span><br><span class="line">  --markers-path &lt;input&gt;        no description found</span><br><span class="line">  --max-diagnostics &lt;num&gt;       no description found</span><br><span class="line">  --no-profile-workers          no description found</span><br><span class="line">  --no-show-all-diagnostics     no description found</span><br><span class="line">  --profile                     no description found</span><br><span class="line">  --profile-path &lt;input&gt;        no description found</span><br><span class="line">  --profile-sampling &lt;num&gt;      no description found</span><br><span class="line">  --profile-timeout &lt;num&gt;       no description found</span><br><span class="line">  --rage                        no description found</span><br><span class="line">  --rage-path &lt;input&gt;           no description found</span><br><span class="line">  --resolver-mocks              no description found</span><br><span class="line">  --resolver-scale &lt;num&gt;        no description found</span><br><span class="line">  --silent                      no description found</span><br><span class="line">  --temporary-daemon            no description found</span><br><span class="line">  --verbose                     no description found</span><br><span class="line">  --verbose-diagnostics         no description found</span><br><span class="line">  --watch                       no description found</span><br><span class="line"></span><br><span class="line"> Commands â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span><br><span class="line"></span><br><span class="line">  Code Quality Commands</span><br><span class="line">  - ci run lint and tests</span><br><span class="line">  - lint run lint against a <span class="built_in">set</span> of files</span><br><span class="line">  - <span class="built_in">test</span> run tests</span><br><span class="line"></span><br><span class="line">  Internal Commands</span><br><span class="line">  - evict evict a file from the memory cache</span><br><span class="line">  - format TODO</span><br><span class="line">  - logs TODO</span><br><span class="line">  - rage TODO</span><br><span class="line"></span><br><span class="line">  Process Management Commands</span><br><span class="line">  - develop TODO</span><br><span class="line">  - restart restart daemon</span><br><span class="line">  - start start daemon (<span class="keyword">if</span> none running)</span><br><span class="line">  - status get the current daemon status</span><br><span class="line">  - stop stop a running daemon <span class="keyword">if</span> one exists</span><br><span class="line"></span><br><span class="line">  Project Management Commands</span><br><span class="line">  - config Modify a project config</span><br><span class="line">  - init create a project config</span><br><span class="line">  - publish TODO</span><br><span class="line">  - run TODO</span><br><span class="line"></span><br><span class="line">  Source Code Commands</span><br><span class="line">  - analyzeDependencies analyze and dump the dependencies of a file</span><br><span class="line">  - bundle build a standalone js bundle <span class="keyword">for</span> a package</span><br><span class="line">  - compile compile a single file</span><br><span class="line">  - parse parse a single file and dump its ast</span><br><span class="line">  - resolve resolve a file</span><br></pre></td></tr></table></figure><p><code>rome run test.ts</code>ã§å®Ÿè¡Œã¯ã§ãã¾ã—ãŸãŒã€æ®‹å¿µãªãŒã‚‰ã€ç¾æ®µéšã§ã¯ã“ã‚Œã‚‚ParcelåŒæ§˜å‹æƒ…å ±ã‚’å‰Šãè½ã¨ã—ã¦ã„ã‚‹ã ã‘ã£ã½ãã¦ã€TypeScriptã®å‹ãƒã‚§ãƒƒã‚¯ã®ã‚¨ãƒ©ãƒ¼ã¯å‡ºã¾ã›ã‚“ã§ã—ãŸã€‚READMEã«ã¯â€Donâ€™t use loose types such as <code>any</code>â€œã¨å¼·ãæ›¸ã‹ã‚Œã¦ã„ã‚‹ã®ã§ã€å‹ã«ã¯å³ã—ããªã£ã¦ã„ãã¨æ€ã‚ã‚Œã¾ã™ã€‚</p><p>åŸºæœ¬æ–¹é‡ã®ä¸­ã«ã¯ã€ä¿®æ­£æ–¹æ³•ã‚’é–‹ç™ºè€…ã«ä¼ãˆãªã„ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ãªãã—ã¦ã„ãã€ã¨ã‹ã€ã€Œãƒˆãƒ¼ã‚¯ãƒ³ã€ã¿ãŸã„ãªã‚³ãƒ³ãƒ‘ã‚¤ãƒ©å†…éƒ¨ç”¨èªï¼ˆã‚¸ãƒ£ãƒ¼ã‚´ãƒ³ï¼‰ãŒå¤–ã«å‡ºãªã„ã‚ˆã†ã«ã—ã¦ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©è¦–ç‚¹ã§ã¯ãªãã¦ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼è¦–ç‚¹ã®ç”¨èªã®ã€Œæ–‡å­—ã€ã‚’å‡ºã™ã‚ˆã†ã«ã—ã¦ã„ãã€ã¿ãŸã„ãªã“ã¨ã‚‚æ›¸ã„ã¦ã‚ã‚‹ã®ã¯é¢ç™½ã„ãªã¨æ€ã„ã¾ã—ãŸã€‚å˜ã«TypeScriptã¨ã‹ã«å¤‰æ›å‡¦ç†ã‚’æŠ•ã’ã‚‹ã ã‘ã˜ã‚ƒãªãã¦ã€ãã®å‡ºåŠ›ã‚‚ãƒ©ãƒƒãƒ—ã—ã¦ã€é–‹ç™ºè€…ã«ã¨ã£ã¦ä½¿ã„ã‚„ã™ã„å‡¦ç†ç³»ã‚’ç›®æŒ‡ã—ã¦ã„ã¾ã™ã€‚ãªã‹ãªã‹ã«é‡å¿ƒçš„ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚</p><p>ãƒ»ãƒ»ãƒ»äººã«ç´¹ä»‹ã™ã‚‹ã«ã¯ã¾ã ã¾ã experimentalã™ãã‚‹æ„Ÿã˜ã¯ã‚ã‚Šã¾ã™ãŒã€‚ä¼šé•·æ›°ãã€Œåƒ•ã‚‚è©¦ã—ã¦ãªã„ã§ã™ã€‚æ¸‹å·ã•ã‚“ãªã‚‰ä¸€ç•ªæ—©ãæ›¸ç±ã«ã—ã¦ãã‚Œã‚‹ã¯ãšã€ã¨ã®ã“ã¨ã€‚</p><h1 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h1><p>ã¾ã æ­£å¼ãƒªãƒªãƒ¼ã‚¹ã—ã¦ã„ãªã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚‚å«ã‚ã¦ã€TypeScriptã«æœ€åˆã‹ã‚‰å¯¾å¿œã—ã¦ã„ã‚‹ãƒ“ãƒ«ãƒ‰ãƒ»ãƒãƒ³ãƒ‰ãƒ«ãƒ„ãƒ¼ãƒ«ã‚’ã„ãã¤ã‹ç´¹ä»‹ã—ã¦ãã¾ã—ãŸã€‚webpackä¸€å¼·ã ã‹ã‚‰ã“ãã€ãã®webpackã«ã¯ãªã„å¼·ã¿ã‚’å‡ºãã†ã¨æ´»ç™ºã«é–‹ç™ºã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã®ã‚ãŸã‚Šã®ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã®æ´»ç™ºã•ã¯Node.jsç•Œéšˆã¯ã‚„ã¯ã‚Šå¼·ã„ã§ã™ã­ã€‚</p><p>ã¾ã‚ã€ãŠé‡‘ã‚’ã„ãŸã ã„ã¦ã‚„ã‚‹ä»•äº‹ã¯ã¾ã ã¾ã webpackã§ã„ã„ã‹ãªãƒ»ãƒ»ãƒ»ã¨æ€ã„ã¤ã¤ã€æ‰‹å…ƒã§ã¡ã‚‡ã£ã¨æ–°ã—ã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’è©¦è¡ŒéŒ¯èª¤ã™ã‚‹æ™‚ã¨ã‹ã«ã€æ–°ã—ã„ã‚‚ã®ã‚‚ä½¿ã£ã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚ã¨ã‚Šã‚ãˆãšã€FuseBox@nextã¨ã€nccã¯ã™ã§ã«å®Ÿç”¨ã«è€ãˆã‚‰ã‚Œã‚‹ãƒ¬ãƒ™ãƒ«ã‹ãªã€ã¨æ€ã„ã¾ã™ã€‚ä»Šå›ã¯ã‚¦ã‚§ãƒ–ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºã‚’ã™ã‚‹ã¨ã„ã†å‰æã§é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®æœ‰ç„¡ã¨ã‹ã‚‚ç´¹ä»‹ã—ã¾ã—ãŸãŒã€ãã†ãªã‚‹ã¨FuseBoxã¯è‰¯ã•ãã†ã§ã™ã€‚æœ¬å½“ã¯ä½¿ã„æ¨ã¦ã®ã‚µãƒ³ãƒ—ãƒ«ã§æ´»ç”¨ã—ãŸã‹ã£ãŸã®ã§ã€ãã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«ã„ã¡ã°ã‚“ãƒãƒƒãƒã—ã¦ã„ã‚‹Parcel 2ã‚‚ãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸã‚‰ä½¿ã£ã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚Rome.jsã‚‚æ–°ã—ã„é–‹ç™ºä½“é¨“ã‚’ç›®æŒ‡ã—ã¦ã„ãã†ã ã—ã€é–‹ç™ºè€…ãŒå¼·ã„äººãŸã¡ãªã®ã§æ¥½ã—ã¿ã§ã™ã€‚</p><hr><p>é–¢é€£è¨˜äº‹ï¼š</p><ul><li><a href="https://future-architect.github.io/articles/20200318/">ã€Figmaã€‘ã‚’ä½¿ã£ã¦ãƒãƒ¼ãƒ ã§UI/UXè¨­è¨ˆã™ã‚‹ã¨ã„ã„ã“ã¨</a></li><li><a href="https://future-architect.github.io/articles/20200317/">SPA + Tableau Online + Auth0 SSO</a></li><li><a href="/articles/20200316/">ãã®å€¤ã€Vue.jsã¯ç›£è¦–ã—ã¦ã„ã¾ã™ã‹ï¼Ÿï½Vue.jsã§å€¤ãŒæ›´æ–°ã•ã‚Œãªã„ã¨ãã«æ°—ã‚’ã¤ã‘ã‚‹ã¨ã“ã‚ï½</a></li><li><a href="/articles/20190612/">TypeScriptæ•™è‚²ç”¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å…¬é–‹ã®ãŠçŸ¥ã‚‰ã›</a></li><li><a href="https://future-architect.github.io/articles/20191029/">ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã‚’2å¹´åŠç¶šã‘ã¦ãƒãƒã£ãŸã“ã¨ã‹ã‚‰å¾—ãŸæ•™è¨“3ã¤</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ã¡ã‚‡ã£ã¨ã—ãŸãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®é–‹ç™ºã§ã€TypeScriptã«æœ€åˆã‹ã‚‰å¯¾å¿œã—ã¦ã„ã¦ã€ç°¡å˜ã«ä½¿ãˆã‚‹ã‚‚ã®ã¯ä½•ã‹ãªã„ã‹ãªã€ã¨èª¿ã¹ã¦ã¿ãŸãƒ¡ãƒ¢ã§ã™ã€‚React/Vue/Angularã®å ´åˆã¯ãã‚Œãã‚Œã®åˆæœŸåŒ–ã‚³ãƒãƒ³ãƒ‰ã§ä½•ã‹ã‚‰ä½•ã¾ã§ç”¨æ„ã—ã¦ãã‚Œã¾ã™ã€‚Next.jsã€Nuxt.jsã€Gatsb
      
    
    </summary>
    
      <category term="Programming" scheme="https://future-architect.github.io/categories/Programming/"/>
    
    
      <category term="JavaScript" scheme="https://future-architect.github.io/tags/JavaScript/"/>
    
      <category term="TypeScript" scheme="https://future-architect.github.io/tags/TypeScript/"/>
    
      <category term="Frontend" scheme="https://future-architect.github.io/tags/Frontend/"/>
    
  </entry>
  
  <entry>
    <title>ã€Figmaã€‘ã‚’ä½¿ã£ã¦ãƒãƒ¼ãƒ ã§UI/UXè¨­è¨ˆã™ã‚‹ã¨ã„ã„ã“ã¨</title>
    <link href="https://future-architect.github.io/articles/20200318/"/>
    <id>https://future-architect.github.io/articles/20200318/</id>
    <published>2020-03-18T03:33:18.000Z</published>
    <updated>2020-03-18T03:43:03.028Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ¦‚è¦"><a href="#æ¦‚è¦" class="headerlink" title="æ¦‚è¦"></a>æ¦‚è¦</h1><p><strong>Figma</strong>ã¨ã¯ä½•ã‹ã€ä½•ãŒã§ãã‚‹ã®ã‹ã€<strong>ãƒãƒ¼ãƒ </strong>ã§ã‚·ã‚¹ãƒ†ãƒ ãƒ‡ã‚¶ã‚¤ãƒ³è¨­è¨ˆã™ã‚‹ã¨ãã«Figmaã‚’ä½¿ã†ã¨ä½•ãŒã„ã„ã®ã‹ã‚’åˆå¿ƒè€…å‘ã‘ã«ã–ã£ãã‚Šç´¹ä»‹ã—ã¦ã„ãã¾ã™ã€‚<br>ã€Œã€‡ã€‡ã™ã‚‹ã«ã¯ã©ã†ã™ã‚Œã°ï¼Ÿã€ã¨ã„ã£ãŸå…·ä½“çš„ãªç–‘å•ã¯youtubeã«å‹•ç”»ãŒãŸãã•ã‚“ä¸ŠãŒã£ã¦ã„ã‚‹ã®ã§è¦‹ã¦ãã ã•ã„ã€‚</p><img src="/images/20200318/photo_20200318_01.png"><h1 id="ç›®æ¬¡"><a href="#ç›®æ¬¡" class="headerlink" title="ç›®æ¬¡"></a>ç›®æ¬¡</h1><ul><li>Figmaã¨ã¯ä½•ã‹</li><li>ç”»é¢ã®ä½œã‚Šæ–¹</li><li>ãƒãƒ¼ãƒ è¨­è¨ˆã§Figmaã‚’ä½¿ã†ãƒ¡ãƒªãƒƒãƒˆ</li><li>Figmaã‚’åˆ©ç”¨ã—ã¦ã¿ã¦</li><li>ã¾ã¨ã‚</li></ul><h1 id="Figmaã¨ã¯ä½•ã‹"><a href="#Figmaã¨ã¯ä½•ã‹" class="headerlink" title="Figmaã¨ã¯ä½•ã‹"></a>Figmaã¨ã¯ä½•ã‹</h1><p><strong>Figma</strong>ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆUIï¼‰ã®ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’<strong>ãƒ–ãƒ©ã‚¦ã‚¶ä¸Š</strong>ã§ç°¡å˜ã«ä½œã‚Œã‚‹ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚<br>ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã¨ã„ãˆã°<strong>ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒª</strong>ã®Adobe XDã‚„SketchãŒæœ‰åã©ã“ã‚ã§ã™ãŒã€Figmaã‚‚è² ã‘ãšåŠ£ã‚‰ãšã®æ“ä½œæ€§ã¨åˆ©ä¾¿æ€§ã‚’å…¼ã­å‚™ãˆã¦ã„ã¾ã™ã€‚ã¾ãŸã€ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ãŒ<strong>ï¼’åã¾ã§ãªã‚‰ç„¡æ–™</strong>ã§ä½¿ã†ã“ã¨ãŒã§ãã‚‹ã®ã§ï¼‘äººã§ã®åˆ©ç”¨ã ã‘ã§ãªããƒãƒ¼ãƒ ã§ã®åˆ©ç”¨ã«ã‚‚å§‹ã‚ã‚„ã™ã„ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚<br>æœ¬è¨˜äº‹ã§Figmaã®åˆ©ä¾¿æ€§ã‚’ç´¹ä»‹ã—ã¦ã„ãå‰ã«ã€Figmaã§ã¯ä½•ãŒä½œã‚Œã‚‹ã®ã‹ç°¡å˜ã«ãŠè¦‹ã›ã—ã¾ã™ã€‚</p><p>ã€€ã‚¯ãƒªãƒƒã‚¯ğŸ‘‰ã€€<a href="https://www.figma.com/proto/jnVOYln5pumAQOkpL2nBT7/Untitled?node-id=351%3A174&scaling=scale-down" target="_blank" rel="noopener">Figmaã§ã§ãã‚‹ã‚‚ã®</a></p><p>ã“ã®ãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ ï¼ˆä»¥ä¸‹ã€è¦‹æœ¬ï¼‰ã¯ç´„1æ™‚é–“ã»ã©ã§ä½œæˆã—ã¾ã—ãŸã€‚Figmaã¯ã“ã®ã‚ˆã†ãªãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ ã‚„ã€UIã‚’æ§‹æˆã™ã‚‹ç”»é¢ãƒ»éƒ¨å“ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>ä»¥ä¸‹ã§ã€å…·ä½“çš„ãªä½œã‚Šæ–¹ã‚’èª¬æ˜ã—ã¦ã„ãã¾ã™ã€‚</p><h1 id="ç”»é¢ã®ä½œã‚Šæ–¹"><a href="#ç”»é¢ã®ä½œã‚Šæ–¹" class="headerlink" title="ç”»é¢ã®ä½œã‚Šæ–¹"></a>ç”»é¢ã®ä½œã‚Šæ–¹</h1><p>Figmaã®ç”»é¢è¨­è¨ˆã¯<strong>ãƒ•ãƒ¬ãƒ¼ãƒ </strong>ã¨éƒ¨å“ï¼ˆ<strong>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</strong>ï¼‰ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ä½œã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä½œæˆæ‰‹é †ã¯ä»¥ä¸‹ï¼’ã‚¹ãƒ†ãƒƒãƒ—ã§ã™ã€‚</p><ol><li>ç”»é¢ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ä½œæˆã™ã‚‹</li><li>éƒ¨å“ã‚’ä½œã‚‹</li></ol><p>æœ€å¾Œã«ä½œæˆã—ãŸç”»é¢ã«å¯¾ã—ã¦å®Ÿè¡Œæ“ä½œã‚’è¡Œã†ã“ã¨ã§ã€ä¸Šè¨˜ã§ãŠè¦‹ã›ã—ãŸã‚ˆã†ãªç”»é¢ã®æ“ä½œæ„Ÿã‚’å®Ÿéš›ã«è§¦ã£ã¦ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><h2 id="ï¼‘ï¼ç”»é¢ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ä½œæˆã™ã‚‹"><a href="#ï¼‘ï¼ç”»é¢ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ä½œæˆã™ã‚‹" class="headerlink" title="ï¼‘ï¼ç”»é¢ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ä½œæˆã™ã‚‹"></a>ï¼‘ï¼ç”»é¢ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ä½œæˆã™ã‚‹</h2><p>ç”»é¢ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ãªã‚‹ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’é¸æŠã—ã¾ã™ã€‚<br>ãƒ•ãƒ¬ãƒ¼ãƒ ã¯è¨­è¨ˆè€…è‡ªèº«ã§ã‚µã‚¤ã‚ºã‚’è¨­å®šã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ãŒã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã‚„ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã€PCã®è¦æ ¼ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚<br>ã‚¤ãƒã‹ã‚‰å½¢ã‚’å®šç¾©ã—èª¿æ•´ã™ã‚‹å¿…è¦ã¯ãªãã€è‡ªãƒãƒ¼ãƒ ãŒä½œæˆã™ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«åˆã‚ã›ã¦é¸æŠã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><img src="/images/20200318/photo_20200318_02.gif"><p>ã“ã“ã§ã¯è¦‹æœ¬ã¨åŒã˜ã‚ˆã†ã«iPhone11 ProMaxã‚’é¸æŠã—ã¦ä½œæˆã—ã¦ã„ãã¾ã™ã€‚<br>æ¬¡ã«ã€ãƒ•ãƒ¬ãƒ¼ãƒ ã«UIã®æ ¹å¹¹ã¨ãªã‚‹éƒ¨å“ã‚’ä½œæˆã—ã¾ã™ã€‚</p><h2 id="ï¼’ï¼éƒ¨å“ã‚’ä½œæˆã™ã‚‹"><a href="#ï¼’ï¼éƒ¨å“ã‚’ä½œæˆã™ã‚‹" class="headerlink" title="ï¼’ï¼éƒ¨å“ã‚’ä½œæˆã™ã‚‹"></a>ï¼’ï¼éƒ¨å“ã‚’ä½œæˆã™ã‚‹</h2><p>Figmaã®éƒ¨å“ã®ä½œã‚Šæ–¹ã¯ãƒ‘ãƒ¯ãƒ¼ãƒã‚¤ãƒ³ãƒˆã¨ä¼¼ã¦ã„ã‚‹ãŸã‚ç›´æ„Ÿçš„ã§æ‰±ã„ã‚„ã™ã„ã§ã™ã€‚</p><p>â‘ ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’é…ç½®<br>â‘¡ã‚µã‚¤ã‚ºã‚’æ±ºã‚<br>â‘¢è‰²ã‚’ã¤ã‘ã‚‹ï¼ˆåˆã¯ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ã™ã‚‹ï¼‰</p><p>ã“ã®ï¼“ã‚¹ãƒ†ãƒƒãƒ—ã‚’ç¹°ã‚Šè¿”ã™ã“ã¨ã§éƒ¨å“ã‚’ä½œæˆã—ã€ãƒ•ãƒ¬ãƒ¼ãƒ ã®ä¸Šã«é…ç½®ã—ã¦ã„ãã¾ã™ã€‚</p><img src="/images/20200318/photo_20200318_03.gif"><p>ãƒ•ãƒ¬ãƒ¼ãƒ ã®ä¸Šã«éƒ¨å“ã‚’ä½œæˆãƒ»é…ç½®ã—çµ‚ãˆãŸã‚‰å®Ÿéš›ã«æ“ä½œæ„Ÿã‚’è©¦ã—ã¦ã¿ã¾ã™ã€‚</p><h2 id="å®Ÿè¡Œæ“ä½œã‚’è¡Œã†"><a href="#å®Ÿè¡Œæ“ä½œã‚’è¡Œã†" class="headerlink" title="å®Ÿè¡Œæ“ä½œã‚’è¡Œã†"></a>å®Ÿè¡Œæ“ä½œã‚’è¡Œã†</h2><p>ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ»éƒ¨å“ã‚’ä½œã‚Šçµ‚ãˆãŸã‚‰å³ä¸Šã® <strong>ï¼ˆâ–¶ï¼‰</strong> ã‚’æŠ¼ä¸‹ã™ã‚‹ã ã‘ã§ã™ã€‚</p><img src="/images/20200318/photo_20200318_04.gif"><p>èª¬æ˜ã§ã¯çœãã¾ã—ãŸãŒã€<strong>Prototype</strong>æ©Ÿèƒ½ã§éƒ¨å“ã¨ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ç´ã¥ã‘ã‚‹ã“ã¨ã§ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚<br>ç´°ã‹ãè¨­å®šã‚’è¡Œã†ã“ã¨ã§ã€ç”»é¢é·ç§»æ™‚ã®å‹•ãç­‰ã‚’ã‚ˆã‚Šå®Ÿéš›ã®UIã«è¿‘ã¥ã‘ãŸã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œæˆã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚<br>ã“ã®æ™‚ã€æœ€åˆã«ãƒ•ãƒ¬ãƒ¼ãƒ ã§è¨­å®šã—ãŸç«¯æœ«ï¼ˆã“ã“ã§ã¯iPhone11 ProMaxï¼‰é¢¨ã«è¡¨ç¤ºã—ã¦ãã‚Œã‚‹ç‚¹ã‚‚<strong>ãƒã‚¤ãƒ³ãƒˆï¼</strong></p><h1 id="ãƒãƒ¼ãƒ è¨­è¨ˆã§Figmaã‚’ä½¿ã†ãƒ¡ãƒªãƒƒãƒˆ"><a href="#ãƒãƒ¼ãƒ è¨­è¨ˆã§Figmaã‚’ä½¿ã†ãƒ¡ãƒªãƒƒãƒˆ" class="headerlink" title="ãƒãƒ¼ãƒ è¨­è¨ˆã§Figmaã‚’ä½¿ã†ãƒ¡ãƒªãƒƒãƒˆ"></a>ãƒãƒ¼ãƒ è¨­è¨ˆã§Figmaã‚’ä½¿ã†ãƒ¡ãƒªãƒƒãƒˆ</h1><p>ç°¡å˜ã«Figmaã§ã®UIã®ä½œã‚Šæ–¹ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚<br>ã“ã“ã¾ã§ã§ã‚‚ã€FigmaãŒã„ã‹ã«ç°¡å˜ã«ãƒ‡ã‚¶ã‚¤ãƒ³è¨­è¨ˆã§ãã‚‹ã‹ã¯ä¼ã‚ã£ãŸã¨æ€ã„ã¾ã™ãŒã€ã€Œãªãœãƒãƒ¼ãƒ ã§ä½¿ã†ã¨è‰¯ã„ã®ï¼Ÿã€ã¨æ€ã†æ–¹ã®ãŸã‚ã«ã€æ¬¡ã¯ãƒãƒ¼ãƒ è¨­è¨ˆã§ä¾¿åˆ©ãªæ©Ÿèƒ½ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚<br>ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ï¼”ç‚¹ã§ã™ã€‚</p><p><strong>ğŸ‘†ãƒãƒ¼ãƒ ã§ä½¿ã„ãŸã„Figmaã®æ©Ÿèƒ½ğŸ‘†</strong></p><ul><li><strong>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåŒ–</strong></li><li><strong>å®šç¾©ã®å…±æœ‰</strong></li><li>ãƒ¬ãƒ“ãƒ¥ãƒ¼</li><li>è±Šå¯Œãªãƒ©ã‚¤ãƒ–ãƒ©ãƒª</li></ul><h2 id="ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåŒ–"><a href="#ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåŒ–" class="headerlink" title="ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåŒ–"></a>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåŒ–</h2><p>ã“ã®æ©Ÿèƒ½ã¯ãƒãƒ¼ãƒ è¨­è¨ˆã§å¿…é ˆã®æ©Ÿèƒ½ã¨ã„ã£ã¦å¤§è¢ˆè£Ÿã§ã¯ãªã„ãã‚‰ã„é‡è¦ãªæ©Ÿèƒ½ã§ã™ã€‚</p><p>ãƒãƒ¼ãƒ ã§ãƒ‡ã‚¶ã‚¤ãƒ³è¨­è¨ˆã‚’ã—ã¦ã„ã‚‹ã¨ã€ã€Œã‚ã®ç”»é¢ã§ã¯æ—¥ä»˜ã‚’å…¥åŠ›ã™ã‚‹æ–¹æ³•ã¯ç›´æ¥å…¥åŠ›ã ã£ãŸã®ã«ã€ã“ã®ç”»é¢ã§ã¯é¸æŠå¼ã ã€ã®ã‚ˆã†ã«ã€è¨­è¨ˆè€…ã«ã‚ˆã£ã¦ãƒãƒ©ã¤ããŒç”Ÿã¾ã‚Œã¦ã—ã¾ã†ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚<br>ã“ã‚Œã¾ã§ã§ã‚ã‚Œã°ã€ä½¿ç”¨ã™ã‚‹éƒ¨å“ã¯powerpointã‚„excelç­‰ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ä¸€è¦§åŒ–ã—ã¦å®šç¾©ã™ã‚‹ã“ã¨ã§ã€è¨­è¨ˆè€…ã«ã‚ˆã‚‹å·®ç•°ã‚’æ½°ã—ã¦UIã®çµ±ä¸€åŒ–ã‚’å›³ã£ã¦ããŸã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><p>ã—ã‹ã—ã€Figmaã§ã¯éƒ¨å“ã‚’<strong>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåŒ–</strong>ã™ã‚‹ã“ã¨ã§ã€ä¸€åº¦ä½œæˆã—ãŸéƒ¨å“ã‚’<strong>å…±æœ‰</strong>ãƒ»<strong>å†åˆ©ç”¨</strong>ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚<br><img src="/images/20200318/photo_20200318_05.png"><br>ä½œæˆã—ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ï¼‘ã‹æ‰€ã«ã¾ã¨ã‚ã¦ãŠãã“ã¨ã§ã€å„è¨­è¨ˆè€…ã¯ï¼ˆåŸºæœ¬çš„ã«ã¯ï¼‰<strong>æ—¢å­˜ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</strong>ã‚’åˆ©ç”¨ã—ã¦è¨­è¨ˆã™ã‚‹ãŸã‚åŒã˜ç›®çš„ã‚’æœãŸã™éƒ¨å“ãŒå¢—ãˆã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p><p>ã¾ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆä»¥ä¸‹ã€è¦ªï¼‰ã‹ã‚‰ç”Ÿæˆã—ãŸå­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆä»¥ä¸‹ã€å­ï¼‰ã¯è¦ªã®æƒ…å ±ã‚’å¼•ãç¶™ããŸã‚ã€è¦ªã«ä¿®æ­£ãŒå…¥ã£ãŸã‚‰å­ã«ã‚‚åæ˜ ã•ã‚Œã‚‹ã€‚å­ãŒæ§˜ã€…ãªå ´æ‰€ã§ä½¿ã‚ã‚Œã€å¾Œã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«æ”¹ä¿®ãŒå…¥ã£ã¦ã‚‚å…¨ã¦ã®å­ã«åæ˜ ã•ã‚Œã‚‹ãŸã‚ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚‚ç°¡å˜ã«ã§ãã¾ã™ã€‚<br><img src="/images/20200318/photo_20200318_06.gif"></p><h2 id="å®šç¾©ã®å…±æœ‰"><a href="#å®šç¾©ã®å…±æœ‰" class="headerlink" title="å®šç¾©ã®å…±æœ‰"></a>å®šç¾©ã®å…±æœ‰</h2><p>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ç´¹ä»‹ã—ã¾ã—ãŸãŒã€UIã®ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’çµ±ä¸€ã™ã‚‹ãŸã‚ã«FigmaãŒæä¾›ã—ã¦ã„ã‚‹ã®ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚<br>ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆã‚„ãƒ•ã‚©ãƒ³ãƒˆã‚¹ã‚¿ã‚¤ãƒ«ã‚‚å®šç¾©ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ãŸã‚ã€è¨­è¨ˆè€…ã”ã¨ã®å·®ç•°ã‚’ã‚ˆã‚Šæ¥µå°åŒ–ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚<br><img src="/images/20200318/photo_20200318_07.gif"></p><p><strong>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</strong>ãƒ»<strong>ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ</strong>ãƒ»<strong>ãƒ•ã‚©ãƒ³ãƒˆã‚¹ã‚¿ã‚¤ãƒ«</strong>ã¯ãƒãƒ¼ãƒ å†…ã®ã¿ãªã‚‰ãšã€ãã®è¨­è¨ˆè€…ãŒå±ã—ã¦ã„ã‚‹<strong>å…¨ã¦ã®ãƒãƒ¼ãƒ </strong>ã§ã‚‚åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚<br>ãã®ãŸã‚å®šç¾©ã®å…±æœ‰ãƒ»çµ±ä¸€åŒ–ã¯ã€å˜ä¸€ãƒãƒ¼ãƒ ã®æ ã«ã¨ã‚ã‚‰ã‚Œãšè¤‡æ•°ã®ãƒãƒ¼ãƒ ãƒ»çµ„ç¹”ã§åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã¨ãªã‚Šã¾ã™ã€‚</p><h2 id="ãƒ¬ãƒ“ãƒ¥ãƒ¼"><a href="#ãƒ¬ãƒ“ãƒ¥ãƒ¼" class="headerlink" title="ãƒ¬ãƒ“ãƒ¥ãƒ¼"></a>ãƒ¬ãƒ“ãƒ¥ãƒ¼</h2><p>Figmaã§ã¯ãƒãƒ¼ãƒ ã«å±ã—ã¦ã„ã‚‹ãƒ¡ãƒ³ãƒãƒ¼ã«å¯¾ã—ã¦ã€ã‚³ãƒ¡ãƒ³ãƒˆã§ãã¾ã™ã€‚<br>ã“ã®æ©Ÿèƒ½ã®ã™ã”ã„ã¨ã“ã‚ã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ç´ã¥ã‘ã¦ã‚³ãƒ¡ãƒ³ãƒˆã™ã‚‹ã“ã¨ãŒã§ãã‚‹ãŸã‚ã€ãƒ¬ãƒ“ãƒ¥ã‚¢ãƒ¼ã¨è¨­è¨ˆè€…ã¯ã‚ˆã‚Šè¦–è¦šçš„ã«å¯¾è±¡ç®‡æ‰€ã‚’èªè­˜ãƒ»ä¿®æ­£ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚<br><img src="/images/20200318/photo_20200318_08.gif"></p><p>ã¾ãŸã€ã‚³ãƒ¡ãƒ³ãƒˆã¯ä¸€è¦§åŒ–ã•ã‚Œã‚‹ãŸã‚ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«å¯¾ã™ã‚‹ä¿®æ­£ã‚‚æ¼ã‚Œãªãæ½°ã—ã“ã‚“ã§ã„ãã“ã¨ãŒã§ãã¾ã™ã€‚</p><h2 id="è±Šå¯Œãªãƒ©ã‚¤ãƒ–ãƒ©ãƒª"><a href="#è±Šå¯Œãªãƒ©ã‚¤ãƒ–ãƒ©ãƒª" class="headerlink" title="è±Šå¯Œãªãƒ©ã‚¤ãƒ–ãƒ©ãƒª"></a>è±Šå¯Œãªãƒ©ã‚¤ãƒ–ãƒ©ãƒª</h2><p>Figmaã§ã¯æ§˜ã€…ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚<br><img src="/images/20200318/photo_20200318_09.png"></p><p>çš†ãŒã‚ˆãä½¿ã†ã‚¢ã‚¤ã‚³ãƒ³ã‚»ãƒƒãƒˆã‚‚ã¨ã¦ã‚‚å……å®Ÿã—ã¦ãŠã‚Šã€ã‚³ãƒ”ãƒšã§ç°¡å˜ã«ä½¿ç”¨ã§ãã‚‹ãŸã‚è¨­è¨ˆã®å¤§ããªåŠ©ã‘ã¨ãªã‚Šã¾ã™ã€‚</p><p>ã€€ã‚¯ãƒªãƒƒã‚¯ğŸ‘‰<a href="https://www.figma.com/resources/assets/material-icons-outline/" target="_blank" rel="noopener">ãƒãƒ†ãƒªã‚¢ãƒ«ã‚¢ã‚¤ã‚³ãƒ³ã‚»ãƒƒãƒˆ</a></p><h1 id="Figmaã‚’åˆ©ç”¨ã—ã¦ã¿ã¦"><a href="#Figmaã‚’åˆ©ç”¨ã—ã¦ã¿ã¦" class="headerlink" title="Figmaã‚’åˆ©ç”¨ã—ã¦ã¿ã¦"></a>Figmaã‚’åˆ©ç”¨ã—ã¦ã¿ã¦</h1><p>ç§ã¯ç´„ï¼‘ã‹æœˆã®é–“ã€è¨­è¨ˆè€…ï¼“åä½“åˆ¶ã§Figmaã‚’åˆ©ç”¨ã—ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã‚¢ãƒ—ãƒªã®ãƒ‡ã‚¶ã‚¤ãƒ³è¨­è¨ˆã‚’è¡Œã£ã¦ãã¾ã—ãŸã€‚</p><p>å…ˆè¡Œè¨­è¨ˆè€…ã¨ã—ã¦ã‚¢ãƒ—ãƒªå†…ã§åˆ©ç”¨ã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆã‚’æœ€å„ªå…ˆã¨ã—ã¦ç€æ‰‹ã—ã¾ã—ãŸã€‚ãã®çµæœã€å¾Œç¶šã§å‚å…¥ã—ã¦ããŸãƒ¡ãƒ³ãƒãƒ¼ã¯æ—¢å­˜ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’çµ„ã¿åˆã‚ã›ã¦è¨­è¨ˆã™ã‚‹ã“ã¨ã§ãƒãƒ¼ãƒ å†…ã§ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã®æºã‚‰ãã‚’æ¥µå°åŒ–ã—è‰¯ã„å“è³ªã®ã‚·ã‚¹ãƒ†ãƒ ãƒ‡ã‚¶ã‚¤ãƒ³ãŒã§ããŸã¨æ€ã£ã¦ã„ã¾ã™ã€‚</p><p>ä¸€æ–¹ã§ã€å®Ÿéš›ã«æ¥­å‹™ã§ä½¿ã£ã¦ã¿ã‚‹ã¨äº‹å‰ã«å®šç¾©ã—ã¦ãŠãå¯¾è±¡ç¯„å›²ã®çµã‚Šè¾¼ã¿ãŒé›£ã—ãã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä½œæˆã‹ã‚‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã®ä½™ç™½ç­‰ã€å¿…è¦ã¨æ€ã†å®šç¾©ã‚’ã‚ã’ã‚Œã°ã‚­ãƒªãŒã‚ã‚Šã¾ã›ã‚“ã€‚å®šç¾©ã«æ™‚é–“ã‚’ã‹ã‘ã¦ã„ãã¨<strong>æœ¬æ¥ã®UI/UXãƒ‡ã‚¶ã‚¤ãƒ³ã®ç›®çš„</strong>ã«æ™‚é–“ã‚’ã‹ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚</p><p>ã“ã®ã‚ˆã†ãªå•é¡Œã‚’è§£æ±ºã™ã‚‹ã«ã¯å°è¦æ¨¡ãªãƒãƒ¼ãƒ æ¯ã«å®šç¾©ã‚’ä½œã£ã¦ã„ã¦ã¯æ™‚é–“ãŒè¶³ã‚Šã¾ã›ã‚“ã€‚å®šç¾©å¯¾è±¡ã®ç¯„å›²ã‚’çµã‚Šè¾¼ã‚€ä¸€æ–¹ã§ã€åˆ©ç”¨ã§ãã‚‹å®šç¾©ã¯æ±ç”¨åŒ–ã—ã€<strong>ãƒãƒ¼ãƒ ã«ã¨ã©ã¾ã‚‰ãšã‚ˆã‚Š</strong>ä¸Šä½ã®çµ„ç¹”ã¨ã—ã¦å®šç¾©ãƒ»å…±æœ‰ã™ã‚‹ã“ã¨ãŒåŠ¹ç‡æ€§ã‚„çµ±ä¸€æ€§ã‚’è¸ã¾ãˆã¦ã‚‚é‡è¦ã ã¨æ„Ÿã˜ã¾ã—ãŸã€‚</p><p>ç¾åœ¨ã€ç¤¾å†…ã§ã‚‚Figmaã«ã‚ˆã‚‹ãƒ‡ã‚¶ã‚¤ãƒ³æ€§ã®çµ±ä¸€åŒ–ã‚’å›³ã‚Šæ±ç”¨çš„ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªåŒ–ã‚’ç›®æŒ‡ã—ã¦çµ¶è³›ä½œæˆä¸­ã§ã™ï¼ï¼</p><h1 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h1><p>æ¥­å‹™ä¸Šã¾ã ã¾ã è¨­è¨ˆæ›¸ãŒå¿…è¦ãªå ´é¢ã¯ãŸãã•ã‚“ã‚ã‚Šã¾ã™ãŒã€Figmaã§ã¯è¨­è¨ˆã—ãŸç”»é¢ã‚’ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ä¿å­˜ã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ãŸã‚ã€è¨­è¨ˆæ›¸ã«è²¼ã‚‹ã‚­ãƒ£ãƒ—ãƒãƒ£ã‚’Figmaã§ä½œã‚‹ã ã‘ã§ã‚¹ãƒ”ãƒ¼ãƒ‡ã‚£ã‹ã¤é«˜å“è³ªãªç”»é¢è¨­è¨ˆãŒã§ãã¾ã™ã€‚</p><p>Figmaã‚’ä½¿ã†ç†ç”±ã¯æ§˜ã€…ã§ã™ãŒã€ä½•ã‚ˆã‚ŠFigmaã§ã®ã‚·ã‚¹ãƒ†ãƒ ãƒ‡ã‚¶ã‚¤ãƒ³è¨­è¨ˆã¯ã¨ã¦ã‚‚æ¥½ã—ã„ã§ã™ã€‚</p><p>ä½™è«‡ã§ã™ãŒã€ä½œæˆã—ãŸãƒ‡ã‚¶ã‚¤ãƒ³ã‚’å®Ÿéš›ã®ã‚¹ãƒãƒ›ç”»é¢ã§ç¢ºèªã™ã‚‹ã“ã¨ç­‰ã‚‚ã§ãã‚‹ãŸã‚ã€ãœã²è§¦ã£ã¦ã¿ã¦ãã ã•ã„ï¼</p><hr><p>é–¢é€£è¨˜äº‹ï¼š</p><ul><li><a href="https://future-architect.github.io/articles/20200317/">SPA + Tableau Online + Auth0 SSO</a></li><li><a href="/articles/20200316/">ãã®å€¤ã€Vue.jsã¯ç›£è¦–ã—ã¦ã„ã¾ã™ã‹ï¼Ÿï½Vue.jsã§å€¤ãŒæ›´æ–°ã•ã‚Œãªã„ã¨ãã«æ°—ã‚’ã¤ã‘ã‚‹ã¨ã“ã‚ï½</a></li><li><a href="/articles/20190612/">TypeScriptæ•™è‚²ç”¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å…¬é–‹ã®ãŠçŸ¥ã‚‰ã›</a></li><li><a href="https://future-architect.github.io/articles/20191029/">ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã‚’2å¹´åŠç¶šã‘ã¦ãƒãƒã£ãŸã“ã¨ã‹ã‚‰å¾—ãŸæ•™è¨“3ã¤</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;æ¦‚è¦&quot;&gt;&lt;a href=&quot;#æ¦‚è¦&quot; class=&quot;headerlink&quot; title=&quot;æ¦‚è¦&quot;&gt;&lt;/a&gt;æ¦‚è¦&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;Figma&lt;/strong&gt;ã¨ã¯ä½•ã‹ã€ä½•ãŒã§ãã‚‹ã®ã‹ã€&lt;strong&gt;ãƒãƒ¼ãƒ &lt;/strong&gt;ã§ã‚·ã‚¹ãƒ†ãƒ ãƒ‡ã‚¶ã‚¤ãƒ³è¨­è¨ˆã™ã‚‹ã¨ã
      
    
    </summary>
    
      <category term="Design" scheme="https://future-architect.github.io/categories/Design/"/>
    
    
      <category term="Frontend" scheme="https://future-architect.github.io/tags/Frontend/"/>
    
      <category term="UI" scheme="https://future-architect.github.io/tags/UI/"/>
    
      <category term="Figma" scheme="https://future-architect.github.io/tags/Figma/"/>
    
  </entry>
  
  <entry>
    <title>SPA + Tableau Online + Auth0 SSO</title>
    <link href="https://future-architect.github.io/articles/20200317/"/>
    <id>https://future-architect.github.io/articles/20200317/</id>
    <published>2020-03-17T01:59:27.000Z</published>
    <updated>2020-03-17T02:33:50.546Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><ul><li>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§Tableauãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’çµ„ã¿è¾¼ã‚“ã SPAã‚’é–‹ç™ºã—ã¦ã„ã¾ã™ã€‚</li><li>ãã®éš›ã«PoCã‚’å®Ÿæ–½ã—ãŸã®ã§ã€ã“ã¡ã‚‰ã§ç°¡å˜ã«ãŠè©¦ã—ã§ãã‚‹æ‰‹é †ã‚’å…±æœ‰ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚</li></ul><h2 id="å†…å®¹"><a href="#å†…å®¹" class="headerlink" title="å†…å®¹"></a>å†…å®¹</h2><ul><li>Tableau Onlineãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®SPAåŸ‹ã‚è¾¼ã¿ with Auth0 SSOã‚’æœ€çŸ­ã§ãŠè©¦ã—ã§ãã‚‹æ‰‹é †ã«ãªã‚Šã¾ã™ã€‚</li></ul><h2 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h2><ul><li>äº‹å‰ã«Tableauã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¨ã€Auth0ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ ãŠã‚ˆã³ ãƒ†ãƒŠãƒ³ãƒˆä½œæˆã¯è¡Œãªã£ã¦ã„ã‚‹ã‚‚ã®ã¨ã—ã¾ã™ã€‚</li></ul><h2 id="æ‰‹é †"><a href="#æ‰‹é †" class="headerlink" title="æ‰‹é †"></a>æ‰‹é †</h2><h4 id="1-Auth0-login-URLã€ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å–å¾—"><a href="#1-Auth0-login-URLã€ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å–å¾—" class="headerlink" title="1. Auth0 login URLã€ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å–å¾—"></a>1. Auth0 login URLã€ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å–å¾—</h4><p>Auth0ã®SAML Protocol URL(login URL)ã€ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¾ã™ã€‚<br>ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã¯DLã—ã¦ãŠã„ã¦ãã ã•ã„ã€‚</p><img src="/images/20200317/photo_20200317_01.png" style="border:solid 1px #000000"><h4 id="2-Tableauè¨­å®š"><a href="#2-Tableauè¨­å®š" class="headerlink" title="2. Tableauè¨­å®š"></a>2. Tableauè¨­å®š</h4><ol><li>ã‚µã‚¤ãƒˆã§ã®SAMLèªè¨¼ã®æœ‰åŠ¹åŒ–</li><li>Tableauã¸ã®Auth0ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿(æ‰‹é †3ã§å–å¾—æ¸ˆ)ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</li><li>iFrame ã®åŸ‹ã‚è¾¼ã¿ã®æœ‰åŠ¹åŒ–</li><li>ãƒ¦ãƒ¼ã‚¶ãƒ¼è¿½åŠ (auth0 SSOæœ‰åŠ¹)</li></ol><img src="/images/20200317/photo_20200317_02.png" style="border:solid 1px #000000"><img src="/images/20200317/photo_20200317_03.png" style="border:solid 1px #000000"><h4 id="3-Tableauãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å–å¾—"><a href="#3-Tableauãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å–å¾—" class="headerlink" title="3. Tableauãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å–å¾—"></a>3. Tableauãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å–å¾—</h4><p>Auth0ã®è¨­å®šã«ä½¿ç”¨ã™ã‚‹å€¤ãŒå«ã¾ã‚ŒãŸãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¾ã™ã€‚</p><img src="/images/20200317/photo_20200317_04.png" style="border:solid 1px #000000"><h4 id="4-Auth0è¨­å®š"><a href="#4-Auth0è¨­å®š" class="headerlink" title="4. Auth0è¨­å®š"></a>4. Auth0è¨­å®š</h4><p>Applicationsã‚’ä½œæˆã—ã¾ã™ã€‚<br>Applications â†’ Regular Web Applications â†’ Create</p><img src="/images/20200317/photo_20200317_05.png" style="border:solid 1px #000000"><p>ä½œæˆã—ãŸApplicationã®Addonsã‚’è¨­å®šã—ã¾ã™</p><img src="/images/20200317/photo_20200317_06.png" style="border:solid 1px #000000"><p>Application Callback URL: <a href="http://localhost:3000" target="_blank" rel="noopener">http://localhost:3000</a> ã‚’è¨­å®š<br>Setteingsã¯ä¸‹è¨˜ã‚’è¨­å®š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"audience"</span>: å‰å·¥ç¨‹ã§å–å¾—ã—ãŸãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®entityIDã‚’è¨­å®š,</span><br><span class="line">    <span class="attr">"mappings"</span>: &#123;</span><br><span class="line">        <span class="attr">"user_id"</span>: <span class="string">"http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier"</span>,</span><br><span class="line">        <span class="attr">"email"</span>: <span class="string">"http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress"</span>,</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"logout"</span>: &#123;</span><br><span class="line">        <span class="attr">"callback"</span>: å‰å·¥ç¨‹ã§å–å¾—ã—ãŸãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®SingleLogoutServiceã‚’è¨­å®š,</span><br><span class="line">        <span class="attr">"slo_enabled"</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-Tableauã®åŸ‹ã‚è¾¼ã¿ã‚³ãƒ¼ãƒ‰å–å¾—"><a href="#5-Tableauã®åŸ‹ã‚è¾¼ã¿ã‚³ãƒ¼ãƒ‰å–å¾—" class="headerlink" title="5. Tableauã®åŸ‹ã‚è¾¼ã¿ã‚³ãƒ¼ãƒ‰å–å¾—"></a>5. Tableauã®åŸ‹ã‚è¾¼ã¿ã‚³ãƒ¼ãƒ‰å–å¾—</h4><p>å¯¾è±¡ã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¸ç§»å‹• â†’ å…±æœ‰ â†’ åŸ‹ã‚è¾¼ã¿ã‚³ãƒ¼ãƒ‰ã®ã‚³ãƒ”ãƒ¼</p><img src="/images/20200317/photo_20200317_07.png"><h4 id="6-ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªçµ„ã¿è¾¼ã¿"><a href="#6-ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªçµ„ã¿è¾¼ã¿" class="headerlink" title="6. ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªçµ„ã¿è¾¼ã¿"></a>6. ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªçµ„ã¿è¾¼ã¿</h4><p>ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã¸å®Ÿéš›ã«çµ„ã¿è¾¼ã¿ã¾ã™</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="comment"># ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã‚’è‡ªå‹•ç”Ÿæˆã—ã¾ã™</span></span><br><span class="line">$ <span class="comment"># ä»»æ„ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§å®Ÿè¡Œ</span></span><br><span class="line">$ npx create-next-app my-app</span><br></pre></td></tr></table></figure><p>æ‰‹é †5ã§å–å¾—ã—ãŸåŸ‹ã‚è¾¼ã¿ã‚³ãƒ¼ãƒ‰ã‚’æ•´å½¢ã—ã¾ã™ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">â€» æ¬¡ã®å·¥ç¨‹ã§Tableauã®JSãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ãƒ­ãƒ¼ãƒ‰æ™‚ã«èª­ã¿è¾¼ã‚€ã‚ˆã†ã«åˆ‡ã‚Šå‡ºã™â†“â†“â†“</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span></span></span><br><span class="line"><span class="tag">    <span class="attr">type</span>=<span class="string">"text/javascript"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">src</span>=<span class="string">"https://us-west-2b.online.tableau.com/javascripts/api/viz_v1.js"</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">â€» æ¬¡ã®å·¥ç¨‹ã§Tableauã®JSãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ãƒ­ãƒ¼ãƒ‰æ™‚ã«èª­ã¿è¾¼ã‚€ã‚ˆã†ã«åˆ‡ã‚Šå‡ºã™â†‘â†‘â†‘</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tableauPlaceholder"</span> <span class="attr">style</span>=<span class="string">"width: 1440px; height: 712px;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">object</span> <span class="attr">class</span>=<span class="string">"tableauViz"</span> <span class="attr">width</span>=<span class="string">"1440"</span> <span class="attr">height</span>=<span class="string">"712"</span> <span class="attr">style</span>=<span class="string">"display:none;"</span></span></span><br><span class="line"><span class="tag">        &gt;</span><span class="tag">&lt;<span class="name">param</span></span></span><br><span class="line"><span class="tag">            <span class="attr">name</span>=<span class="string">"host_url"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">value</span>=<span class="string">"https%3A%2F%2Fus-west-2b.online.tableau.com%2F"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"embed_code_version"</span> <span class="attr">value</span>=<span class="string">"3"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"site_root"</span> <span class="attr">value</span>=<span class="string">"&amp;#47;t&amp;#47;samltest3"</span>/&gt;</span><span class="tag">&lt;<span class="name">param</span></span></span><br><span class="line"><span class="tag">            <span class="attr">name</span>=<span class="string">"name"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">value</span>=<span class="string">"Superstore&amp;#47;Overview"</span>/&gt;</span><span class="tag">&lt;<span class="name">param</span></span></span><br><span class="line"><span class="tag">            <span class="attr">name</span>=<span class="string">"tabs"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">value</span>=<span class="string">"yes"</span>/&gt;</span><span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"toolbar"</span> <span class="attr">value</span>=<span class="string">"yes"</span>/&gt;</span><span class="tag">&lt;<span class="name">param</span></span></span><br><span class="line"><span class="tag">            <span class="attr">name</span>=<span class="string">"showAppBanner"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">value</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">    /&gt;</span><span class="tag">&lt;/<span class="name">object</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸Šè¨˜ã®åŸ‹ã‚è¾¼ã¿ã‚³ãƒ¼ãƒ‰ã‚’å°‘ã—ä¿®æ­£ã—ã¦ã€pages/index.jsã«è²¼ã‚Šä»˜ã‘ã¾ã™  </p><ol><li>ãƒ­ãƒ¼ãƒ‰æ™‚ã«Tableauãƒ©ã‚¤ãƒ–ãƒ©ãƒªèª­ã¿è¾¼ã¿</li><li>styleã« <code>position: &quot;absolute&quot;</code> ã‚’è¿½åŠ </li><li>styleã« <code>display: &quot;none&quot;</code> ã‚’è¿½åŠ </li><li>ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³ã‚’è¿½åŠ </li></ol><figure class="highlight javascript"><figcaption><span>my-app/pages/index.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Home = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// â‘  ãƒ­ãƒ¼ãƒ‰æ™‚ã«Tableauã®JSãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’èª­ã¿è¾¼ã¿â†“â†“â†“</span></span><br><span class="line">    useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> script = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">        script.src =</span><br><span class="line">            <span class="string">"https://us-west-2b.online.tableau.com/javascripts/api/viz_v1.js"</span>;</span><br><span class="line">        script.async = <span class="literal">true</span>;</span><br><span class="line">        <span class="built_in">document</span>.body.appendChild(script);</span><br><span class="line">    &#125;, []);</span><br><span class="line">    <span class="comment">// â‘  ãƒ­ãƒ¼ãƒ‰æ™‚ã«Tableauã®JSãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’èª­ã¿è¾¼ã¿â†‘â†‘â†‘</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;&gt;</span><br><span class="line">            &#123;<span class="comment">/* â‘£ ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³ã‚’è¿½åŠ  */</span>&#125;</span><br><span class="line">            &lt;button</span><br><span class="line">                onClick=&#123;() =&gt; &#123;</span><br><span class="line">                    <span class="built_in">window</span>.location =</span><br><span class="line">            &#123;<span class="comment">/* æ‰‹é †3ã®SAML Protocol URLã‚’è¨­å®š */</span>&#125;</span><br><span class="line">            <span class="string">"https://xxxxxx.auth0.com/samlp/xxxxxxxxxxxxxxxxxxxxxx"</span>;</span><br><span class="line">                &#125;&#125;</span><br><span class="line">            &gt;</span><br><span class="line">                login</span><br><span class="line">            &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">            &#123;/</span>* â‘¡ styleã«position: <span class="string">"absolute"</span>ã‚’è¿½åŠ  *<span class="regexp">/&#125;</span></span><br><span class="line"><span class="regexp">            &lt;div</span></span><br><span class="line"><span class="regexp">                class="tableauPlaceholder"</span></span><br><span class="line"><span class="regexp">                style=&#123;&#123; width: "100%", height: "100%", position: "absolute" &#125;&#125;</span></span><br><span class="line"><span class="regexp">            &gt;</span></span><br><span class="line"><span class="regexp">                &#123;/</span>* â‘¢ style=&#123;&#123; <span class="attr">display</span>: <span class="string">"none"</span> &#125;&#125;ã‚’è¿½åŠ  *<span class="regexp">/&#125;</span></span><br><span class="line"><span class="regexp">                &lt;object</span></span><br><span class="line"><span class="regexp">                    class="tableauViz"</span></span><br><span class="line"><span class="regexp">                    width="1440"</span></span><br><span class="line"><span class="regexp">                    height="670"</span></span><br><span class="line"><span class="regexp">                    style=&#123;&#123; display: "none" &#125;&#125;</span></span><br><span class="line"><span class="regexp">                &gt;</span></span><br><span class="line"><span class="regexp">                    &lt;param</span></span><br><span class="line"><span class="regexp">                        name="host_url"</span></span><br><span class="line"><span class="regexp">                        value="https%3A%2F%2Fus-west-2b.online.tableau.com%2F"</span></span><br><span class="line"><span class="regexp">                    /</span>&gt;</span><br><span class="line">                    &lt;param name=<span class="string">"embed_code_version"</span> value=<span class="string">"3"</span> /&gt;</span><br><span class="line">                    &lt;param name=<span class="string">"site_root"</span> value=<span class="string">"&amp;#47;t&amp;#47;samltest3"</span> /&gt;</span><br><span class="line">                    &lt;param name=<span class="string">"name"</span> value=<span class="string">"Superstore&amp;#47;Overview"</span> /&gt;</span><br><span class="line">                    &lt;param name=<span class="string">"tabs"</span> value=<span class="string">"yes"</span> /&gt;</span><br><span class="line">                    &lt;param name=<span class="string">"toolbar"</span> value=<span class="string">"yes"</span> /&gt;</span><br><span class="line">                    &lt;param name=<span class="string">"showAppBanner"</span> value=<span class="string">"false"</span> /&gt;</span><br><span class="line">                &lt;<span class="regexp">/object&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>div&gt;</span><br><span class="line">        &lt;<span class="regexp">/&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default Home;</span></span><br></pre></td></tr></table></figure><h4 id="7-ã‚¢ã‚¯ã‚»ã‚¹"><a href="#7-ã‚¢ã‚¯ã‚»ã‚¹" class="headerlink" title="7. ã‚¢ã‚¯ã‚»ã‚¹"></a>7. ã‚¢ã‚¯ã‚»ã‚¹</h4><p>â‘  ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªèµ·å‹•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> my-app</span><br><span class="line">$ npm run dev</span><br></pre></td></tr></table></figure><p>â‘¡ localhost:3000ã«ã‚¢ã‚¯ã‚»ã‚¹<br>â‘¢ ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³ã‚’æŠ¼ä¸‹<br>â‘£ Auth0 ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã«é·ç§»ã™ã‚‹ã®ã§ãƒ­ã‚°ã‚¤ãƒ³</p><img src="/images/20200317/photo_20200317_08.png"><p>localhostã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã‚Œã€åŸ‹ã‚è¾¼ã¿ã®Tableauãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã¾ã—ãŸï¼ğŸ‰</p><img src="/images/20200317/photo_20200317_09.png"><h2 id="çµ‚ã‚ã‚Šã«"><a href="#çµ‚ã‚ã‚Šã«" class="headerlink" title="çµ‚ã‚ã‚Šã«"></a>çµ‚ã‚ã‚Šã«</h2><ul><li>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã“ã®å¾Œã€cloudfront + S3ã®ç’°å¢ƒã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã„ã¾ã™ã€‚</li><li>ã¾ãŸã€SPAè‡ªä½“ã®èªè¨¼ã‚‚Auth0 SSOã§è¡Œã£ã¦ãŠã‚Šã€  sessionã€tokenç®¡ç†ã‚’auth0ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã—ã¦è¡Œã£ã¦ã„ã¾ã™ã€‚</li><li>ã“ã¡ã‚‰ã«é–¢ã—ã¦ã¯ã€æ©Ÿä¼šãŒã‚ã‚Šã¾ã—ãŸã‚‰åˆ¥é€”ã€ç´¹ä»‹ã•ã›ã¦ã„ãŸã ã‘ãŸã‚‰ã¨æ€ã„ã¾ã™ã€‚</li></ul><h2 id="é–¢é€£ãƒªãƒ³ã‚¯"><a href="#é–¢é€£ãƒªãƒ³ã‚¯" class="headerlink" title="é–¢é€£ãƒªãƒ³ã‚¯"></a>é–¢é€£ãƒªãƒ³ã‚¯</h2><ul><li><a href="https://auth0.com/blog/jp-how-saml-authentication-works/" target="_blank" rel="noopener">https://auth0.com/blog/jp-how-saml-authentication-works/</a>  <ul><li>(SAML èªè¨¼ã¯ã©ã®ã‚ˆã†ã«æ©Ÿèƒ½ã™ã‚‹ã‹ï¼Ÿ)</li></ul></li><li><a href="https://help.tableau.com/current/online/ja-jp/saml_config_site.htm" target="_blank" rel="noopener">https://help.tableau.com/current/online/ja-jp/saml_config_site.htm</a>  <ul><li>(ã‚µã‚¤ãƒˆã§ã® SAML èªè¨¼ã®æœ‰åŠ¹åŒ–)</li></ul></li></ul><hr><p>é–¢é€£è¨˜äº‹ï¼š</p><ul><li><a href="/articles/20200316/">ãã®å€¤ã€Vue.jsã¯ç›£è¦–ã—ã¦ã„ã¾ã™ã‹ï¼Ÿï½Vue.jsã§å€¤ãŒæ›´æ–°ã•ã‚Œãªã„ã¨ãã«æ°—ã‚’ã¤ã‘ã‚‹ã¨ã“ã‚ï½</a></li><li><a href="/articles/20190612/">TypeScriptæ•™è‚²ç”¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å…¬é–‹ã®ãŠçŸ¥ã‚‰ã›</a></li><li><a href="https://future-architect.github.io/articles/20191029/">ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã‚’2å¹´åŠç¶šã‘ã¦ãƒãƒã£ãŸã“ã¨ã‹ã‚‰å¾—ãŸæ•™è¨“3ã¤</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§Tableauãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’çµ„ã¿è¾¼ã‚“ã SPAã‚’é–‹ç™ºã—ã¦ã„ã¾ã™ã€‚&lt;/li&gt;
&lt;li&gt;ãã®éš›ã«PoC
      
    
    </summary>
    
      <category term="Programming" scheme="https://future-architect.github.io/categories/Programming/"/>
    
    
      <category term="JavaScript" scheme="https://future-architect.github.io/tags/JavaScript/"/>
    
      <category term="Frontend" scheme="https://future-architect.github.io/tags/Frontend/"/>
    
      <category term="Auht0" scheme="https://future-architect.github.io/tags/Auht0/"/>
    
  </entry>
  
  <entry>
    <title>ãã®å€¤ã€Vue.jsã¯ç›£è¦–ã—ã¦ã„ã¾ã™ã‹ï¼Ÿï½Vue.jsã§å€¤ãŒæ›´æ–°ã•ã‚Œãªã„ã¨ãã«æ°—ã‚’ã¤ã‘ã‚‹ã¨ã“ã‚ï½</title>
    <link href="https://future-architect.github.io/articles/20200316/"/>
    <id>https://future-architect.github.io/articles/20200316/</id>
    <published>2020-03-16T02:49:57.000Z</published>
    <updated>2020-03-16T02:57:03.400Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ãã®å€¤ã€Vue-jsã¯ç›£è¦–ã—ã¦ã„ã¾ã™ã‹ï¼Ÿï½Vue-jsã§å€¤ãŒæ›´æ–°ã•ã‚Œãªã„ã¨ãã«æ°—ã‚’ã¤ã‘ã‚‹ã¨ã“ã‚ï½"><a href="#ãã®å€¤ã€Vue-jsã¯ç›£è¦–ã—ã¦ã„ã¾ã™ã‹ï¼Ÿï½Vue-jsã§å€¤ãŒæ›´æ–°ã•ã‚Œãªã„ã¨ãã«æ°—ã‚’ã¤ã‘ã‚‹ã¨ã“ã‚ï½" class="headerlink" title="ãã®å€¤ã€Vue.jsã¯ç›£è¦–ã—ã¦ã„ã¾ã™ã‹ï¼Ÿï½Vue.jsã§å€¤ãŒæ›´æ–°ã•ã‚Œãªã„ã¨ãã«æ°—ã‚’ã¤ã‘ã‚‹ã¨ã“ã‚ï½"></a>ãã®å€¤ã€Vue.jsã¯ç›£è¦–ã—ã¦ã„ã¾ã™ã‹ï¼Ÿï½Vue.jsã§å€¤ãŒæ›´æ–°ã•ã‚Œãªã„ã¨ãã«æ°—ã‚’ã¤ã‘ã‚‹ã¨ã“ã‚ï½</h1><h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><p>ã“ã‚“ã«ã¡ã¯ã€TIG ã‚³ã‚¢ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ãƒãƒ¼ãƒ ç«¹æ—ã§ã™ã€‚<br>ã“ã¡ã‚‰ã®ãƒ–ãƒ­ã‚°ã§ã¯å‰å› <a href="https://future-architect.github.io/articles/20181031/">ãã®å•ã„åˆã‚ã›ã€AIãŒè§£æ±ºã—ã¾ã™ï¼ï½Redmineãƒã‚±ãƒƒãƒˆãƒ¬ã‚³ãƒ¡ãƒ³ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã®ã”ç´¹ä»‹ï½</a> ã‚’æ›¸ã‹ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚</p><p>ã“ã®è¨˜äº‹ã‚’æ›¸ã„ã¦ã‹ã‚‰æ—©ãã‚‚1å¹´åŠãŒçµŒã¡ã€é–“ã‚‚ãªãç¤¾ä¼šäºº4å¹´ç›®ã‚’è¿ãˆã‚ˆã†ã¨ã—ã¦ãŠã‚Šã¾ã™ã€‚<br>æ–°äººã®å¾Œè¼©ãŸã¡ã‚„ã€ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ä¸Šç´šè€…ãªã‚­ãƒ£ãƒªã‚¢å…¥ç¤¾ã®å‡„è…•ãªçš†ã•ã‚“ã‚‚ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒã«åŠ ã‚ã‚Šã€å€‹æ€§è±Šã‹ãªæ¥½ã—ã„è·å ´ã«ãªã£ã¦ã¾ã„ã‚Šã¾ã—ãŸã€‚</p><p>ã¡ãªã¿ã«<a href="https://future-architect.github.io/articles/20181031/">å‰å›ã®è¨˜äº‹</a>ã¯AI(è‡ªç„¶è¨€èªå‡¦ç†ã«ã‚ˆã‚‹ãƒ¬ã‚³ãƒ¡ãƒ³ãƒ‰ã‚·ã‚¹ãƒ†ãƒ é–‹ç™º)ã«é–¢ã™ã‚‹ã‚‚ã®ã§ã™ã€‚ã¾ã ã”è¦§ã«ãªã£ã¦ã„ãªã„æ–¹ã¯ã‚ˆã‚ã—ã‘ã‚Œã°ã©ã†ãï¼<br>ã•ã¦ã€ä»Šå›ã¯AIã§ã¯ãªããƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰(Vue.js)ã®è©±ã§ã™ã€‚</p><h2 id="ã‚³ã‚¢ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ãƒãƒ¼ãƒ ã«ã¤ã„ã¦"><a href="#ã‚³ã‚¢ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ãƒãƒ¼ãƒ ã«ã¤ã„ã¦" class="headerlink" title="ã‚³ã‚¢ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ãƒãƒ¼ãƒ ã«ã¤ã„ã¦"></a>ã‚³ã‚¢ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ãƒãƒ¼ãƒ ã«ã¤ã„ã¦</h2><p>ç§ãŒæ‰€å±ã™ã‚‹ã‚³ã‚¢ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ãƒãƒ¼ãƒ ã§ã¯ã€Futureã®å„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®ç”Ÿç”£æ€§ãƒ»å“è³ªå‘ä¸ŠãŠã‚ˆã³è¨­è¨ˆé–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹ã®æ¨™æº–åŒ–ã‚’ç›®æ¨™ã«ã€å†…è£½ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ»ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãƒ»ã‚¤ãƒ³ãƒ•ãƒ©ç­‰ã®æä¾›ã‚’è¡Œã£ã¦ãŠã‚Šã¾ã™ã€‚</p><p><a href="https://jobs.qiita.com/employers/future/development_teams/57" target="_blank" rel="noopener">ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æ ªå¼ä¼šç¤¾ ã‚³ã‚¢ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ãƒãƒ¼ãƒ  - Qiita Jobs</a></p><p>ãã‚“ãªå†…è£½ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ä¸€éƒ¨ã¨ã—ã¦æ¡ç”¨ã•ã‚Œã¦ã„ã‚‹ã®ãŒVue.jsã§ã™ã€‚</p><p>ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯è‡ªä½“ã®è¨­è¨ˆé–‹ç™ºã‚’è¡Œã†ä¸€æ–¹ã€é¡§å®¢ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‘ã‘ç”»é¢ã®é–‹ç™ºã‚’è¡Œã†ãŸã‚ã«ã€è‡ªåˆ†ãŸã¡ã‚‚ãã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ç”¨ã„ãŸé–‹ç™ºã‚’è¡Œã†æ©Ÿä¼šãŒã‚ã‚Šã¾ã—ãŸã€‚</p><p>ä»Šå›ã¯ãã‚“ãªã¨ã‚ã‚‹ç”»é¢é–‹ç™ºã‚’ã™ã‚‹ã«ã‚ãŸã£ã¦ã€ç§ãŒVue.jsã‚’ã‚­ãƒ£ãƒƒãƒã‚¢ãƒƒãƒ—ã—ã¦ã„ãéç¨‹ã®ä¸­ã§é­é‡ã—ãŸãƒˆãƒ©ãƒ–ãƒ«ã«é–¢ã™ã‚‹è§£æ±ºæ–¹æ³•ã‚’å…±æœ‰ã—ã¾ã™ã€‚</p><h2 id="Vue-jsã§å€¤ãŒæ›´æ–°ã•ã‚Œãªã„ã¨ãï¼Ÿ"><a href="#Vue-jsã§å€¤ãŒæ›´æ–°ã•ã‚Œãªã„ã¨ãï¼Ÿ" class="headerlink" title="Vue.jsã§å€¤ãŒæ›´æ–°ã•ã‚Œãªã„ã¨ãï¼Ÿ"></a>Vue.jsã§å€¤ãŒæ›´æ–°ã•ã‚Œãªã„ã¨ãï¼Ÿ</h2><h3 id="äº‹è±¡ã«ã¤ã„ã¦"><a href="#äº‹è±¡ã«ã¤ã„ã¦" class="headerlink" title="äº‹è±¡ã«ã¤ã„ã¦"></a>äº‹è±¡ã«ã¤ã„ã¦</h3><p>Vue.jsã§ä½•ã‹ã—ã‚‰ã®APIã‚’axiosç­‰ã§å…¥æ‰‹ã—ã€ãƒ†ãƒ¼ãƒ–ãƒ«æç”»ãªã©ã®å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨é€£æºã—ãŸéš›ã€å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå´ã§å€¤ã‚’æ›¸ãæ›ãˆã¦ã‚‚ã†ã¾ãæ›´æ–°ã—ãŸå€¤ãŒå–å¾—ã§ããªã„ã‚±ãƒ¼ã‚¹ãŒæœ‰ã‚Šã¾ã—ãŸã€‚</p><p>ç§ã®å ´åˆã€DBä¸Šã®ã‚ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä¸€è¦§ã‚’<a href="https://github.com/future-architect/cheetah-grid" target="_blank" rel="noopener">cheetah-grid</a>ã‚’ç”¨ã„ã¦è¡¨ã«æç”»ã—ã€<a href="https://www.npmjs.com/package/vue-cheetah-grid#available-vue-component-tag-names" target="_blank" rel="noopener"><code>&lt;c-grid-check-column&gt;</code>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</a>ã«ã‚ˆã‚Šãƒã‚§ãƒƒã‚¯æ¬„ã‚’è¨­ã‘ã¦ãã®true/falseã‚’å–å¾—ã—ã‚ˆã†ã¨ã—ãŸéš›ã«ã†ã¾ãå€¤ãŒåæ˜ ã•ã‚Œã¦ãŠã‚‰ãšã€Œã‚ã‚Œï¼ŸãŠã‹ã—ã„ãï¼Ÿã€ã¨ãªã‚Šã¾ã—ãŸã€‚</p><h3 id="DBã«ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿"><a href="#DBã«ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿" class="headerlink" title="DBã«ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿"></a>DBã«ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿</h3><p>ãƒ€ãƒŸãƒ¼ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã§ä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚</p><table><thead><tr><th>åå‰</th><th>è·å ´</th><th>èª¬æ˜</th></tr></thead><tbody><tr><td>Aã•ã‚“</td><td>æ±äº¬</td><td>ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢</td></tr><tr><td>Bã•ã‚“</td><td>åå¤å±‹</td><td>ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢</td></tr><tr><td>Cã•ã‚“</td><td>å¤§åˆ†</td><td>ã‚¤ãƒ³ãƒ•ãƒ©ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢</td></tr></tbody></table><h3 id="ç”»é¢ã§è¦‹ã›ãŸã„ãƒ‡ãƒ¼ã‚¿"><a href="#ç”»é¢ã§è¦‹ã›ãŸã„ãƒ‡ãƒ¼ã‚¿" class="headerlink" title="ç”»é¢ã§è¦‹ã›ãŸã„ãƒ‡ãƒ¼ã‚¿"></a>ç”»é¢ã§è¦‹ã›ãŸã„ãƒ‡ãƒ¼ã‚¿</h3><p>DBä¸Šã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å–å¾—ã—ãŸä¸Šã«ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å´ã§ãƒã‚§ãƒƒã‚¯ã‚«ãƒ©ãƒ ã‚’è¿½åŠ ã—ã¾ã™ã€‚<br>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯falseã‚’å…¥ã‚Œã¦ãŠãã¾ã™ã€‚</p><ul><li><a href="https://github.com/future-architect/cheetah-grid" target="_blank" rel="noopener">cheetah-grid</a>ã§ã¯ã€<a href="https://www.npmjs.com/package/vue-cheetah-grid#available-vue-component-tag-names" target="_blank" rel="noopener"><code>&lt;c-grid-check-column&gt;</code>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</a>ã‚’åˆ©ç”¨ã™ã‚‹ã¨ãƒã‚§ãƒƒã‚¯ã‚«ãƒ©ãƒ ã‚’ç°¡å˜ã«ç”¨æ„ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚</li></ul><table><thead><tr><th>(â˜…è¿½åŠ )ãƒã‚§ãƒƒã‚¯ã‚«ãƒ©ãƒ </th><th>åå‰</th><th>è·å ´</th><th>èª¬æ˜</th></tr></thead><tbody><tr><td>true/false(ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ:false)</td><td>Aã•ã‚“</td><td>æ±äº¬</td><td>ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢</td></tr><tr><td>true/false(ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ:false)</td><td>Bã•ã‚“</td><td>åå¤å±‹</td><td>ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢</td></tr><tr><td>true/false(ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ:false)</td><td>Cã•ã‚“</td><td>å¤§åˆ†</td><td>ã‚¤ãƒ³ãƒ•ãƒ©ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢</td></tr></tbody></table><p>ãƒ¦ãƒ¼ã‚¶ãŒãƒ¬ã‚³ãƒ¼ãƒ‰ã”ã¨ã®ãƒã‚§ãƒƒã‚¯ã‚«ãƒ©ãƒ ã‚’æ“ä½œã—ã€ãã®å¤‰æ›´ã‚’æ¤œçŸ¥ã§ãã‚‹ã‹ã©ã†ã‹ã‚’è¦‹ã¦ã¿ã¾ã™ã€‚</p><h3 id="æ­£ã—ã„ä¾‹"><a href="#æ­£ã—ã„ä¾‹" class="headerlink" title="æ­£ã—ã„ä¾‹"></a>æ­£ã—ã„ä¾‹</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ãƒ¦ãƒ¼ã‚¶ä¸€è¦§<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ãƒ†ãƒ¼ãƒ–ãƒ« --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">c-grid</span> <span class="attr">:data</span>=<span class="string">"users"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">c-grid-check-column</span> <span class="attr">field</span>=<span class="string">"check"</span>&gt;</span><span class="tag">&lt;/<span class="name">c-grid-check-column</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">c-grid-column</span> <span class="attr">field</span>=<span class="string">"name"</span>&gt;</span>åå‰<span class="tag">&lt;/<span class="name">c-grid-column</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">c-grid-column</span> <span class="attr">field</span>=<span class="string">"workplace"</span>&gt;</span>è·å ´<span class="tag">&lt;/<span class="name">c-grid-column</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">c-grid-column</span> <span class="attr">field</span>=<span class="string">"note"</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">width</span>=<span class="string">"200px"</span>&gt;</span>èª¬æ˜<span class="tag">&lt;/<span class="name">c-grid-column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">c-grid</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å€¤ã®æ›´æ–°ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä¸­èº«ã‚’ãã®ã¾ã¾å‡ºåŠ›ã—ã¦ã¿ã‚‹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä¸­èº«: &#123;&#123; users &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">// importç®‡æ‰€çœç•¥</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: 'users',</span><br><span class="line">  components: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      users: [] // cheetah-gridã«ãƒã‚¤ãƒ³ãƒ‰ã•ã‚Œã‚‹å¤‰æ•°</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  mounted () &#123;</span><br><span class="line">    const vm = this</span><br><span class="line">    vm.onLoad()</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  methods: &#123;</span><br><span class="line">    /**</span><br><span class="line">     * ãƒ¦ãƒ¼ã‚¶ä¸€è¦§å–å¾—</span><br><span class="line">     *</span><br><span class="line">     * @returns &#123;void&#125;</span><br><span class="line">     */</span><br><span class="line">    onLoad () &#123;</span><br><span class="line">      const vm = this</span><br><span class="line"></span><br><span class="line">      // ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ä¸€è¦§ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—</span><br><span class="line">      vm.axios.get('/api/v1/users').then(response =&gt; &#123;</span><br><span class="line">        vm.users = response.data.map(e =&gt; &#123;</span><br><span class="line">          // ãƒã‚§ãƒƒã‚¯ã‚«ãƒ©ãƒ ç”¨ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯false</span><br><span class="line">          e.check = false</span><br><span class="line">          return e</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç”»é¢ã§ã®å‡ºåŠ›:</p><p>ä¸‹å›³ã®ã‚ˆã†ã«ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã¨ãƒ‡ãƒãƒƒã‚°ç”¨ã«ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä¸­èº«ãŒãã‚Œãã‚Œå‡ºåŠ›ã•ã‚Œã¾ã™ã€‚<br><img src="/images/20200316/photo_20200316_01.png"></p><p>ãƒã‚§ãƒƒã‚¯ã‚«ãƒ©ãƒ ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ãƒã‚§ãƒƒã‚¯ãŒä»˜ãã¾ã™ã€‚<br>ãƒ‡ãƒãƒƒã‚°ç”¨ã«å‡ºåŠ›ã—ãŸãƒ†ãƒ¼ãƒ–ãƒ«ã®ä¸­èº«ãƒ‡ãƒ¼ã‚¿ã«ã‚‚åæ˜ ã•ã‚Œã¦ã„ã¾ã™ã€‚<br><img src="/images/20200316/photo_20200316_02.png"></p><h3 id="ã†ã¾ãã„ã‹ãªã„ä¾‹"><a href="#ã†ã¾ãã„ã‹ãªã„ä¾‹" class="headerlink" title="ã†ã¾ãã„ã‹ãªã„ä¾‹"></a>ã†ã¾ãã„ã‹ãªã„ä¾‹</h3><p>å½“åˆã€ç§ã¯<code>forEach()</code>ãƒ«ãƒ¼ãƒ—ã‚’ç”¨ã„ãŸä»£å…¥æ“ä½œã‚’è¡Œã£ã¦ã„ã¾ã—ãŸã€‚</p><ul><li><code>onLoad()</code>ãƒ¡ã‚½ãƒƒãƒ‰ä»¥å¤–å…±é€šã®ãŸã‚çœç•¥</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">onLoad () &#123;</span><br><span class="line">  <span class="keyword">const</span> vm = <span class="keyword">this</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ä¸€è¦§ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—</span></span><br><span class="line">  vm.axios.get(<span class="string">'/api/v1/users'</span>).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    vm.users = response.data</span><br><span class="line">    vm.users.forEach(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// ãƒã‚§ãƒƒã‚¯ã‚«ãƒ©ãƒ ç”¨ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯false</span></span><br><span class="line">      e.check = <span class="literal">false</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”»é¢ã§ã®å‡ºåŠ›:</p><p>ãƒã‚§ãƒƒã‚¯ã‚«ãƒ©ãƒ ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚‚ã€ãƒ‡ãƒãƒƒã‚°ç”¨ã«å‡ºã—ãŸãƒ‡ãƒ¼ã‚¿ã¯æ›¸ãæ›ã‚ã£ã¦ã„ã¾ã›ã‚“ã€‚<br><img src="/images/20200316/photo_20200316_03.png"></p><h2 id="è§£æ±ºæ–¹æ³•"><a href="#è§£æ±ºæ–¹æ³•" class="headerlink" title="è§£æ±ºæ–¹æ³•"></a>è§£æ±ºæ–¹æ³•</h2><p>é…åˆ—ã®å„è¦ç´ ã”ã¨ã®ç›´æ¥æ“ä½œã‚’ã‚„ã‚ã€ä»£ã‚ã‚Šã«<code>Array.prototype.map()</code>ãªã©ã‚’ç”¨ã„ã¦<strong>æ–°ã—ã„é…åˆ—ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹</strong>ã‚’ç”Ÿæˆã—ã¦ã‚ã’ã‚‹ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">onLoad () &#123;</span><br><span class="line">  <span class="keyword">const</span> vm = <span class="keyword">this</span></span><br><span class="line"></span><br><span class="line">  vm.axios.get(<span class="string">'/api/v1/files'</span>).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// â˜…Array.prototype.map()ã§ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’æ–°è¦ç”Ÿæˆ</span></span><br><span class="line">    vm.users = response.data.map(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">      e.check = <span class="literal">false</span></span><br><span class="line">      <span class="keyword">return</span> e</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ãªãœé…åˆ—ã®å„è¦ç´ ã”ã¨ã«ç›´æ¥æ“ä½œã™ã‚‹ã¨å€¤ãŒæ›´æ–°ã•ã‚Œãªã„ã®ã‹"><a href="#ãªãœé…åˆ—ã®å„è¦ç´ ã”ã¨ã«ç›´æ¥æ“ä½œã™ã‚‹ã¨å€¤ãŒæ›´æ–°ã•ã‚Œãªã„ã®ã‹" class="headerlink" title="ãªãœé…åˆ—ã®å„è¦ç´ ã”ã¨ã«ç›´æ¥æ“ä½œã™ã‚‹ã¨å€¤ãŒæ›´æ–°ã•ã‚Œãªã„ã®ã‹"></a>ãªãœé…åˆ—ã®å„è¦ç´ ã”ã¨ã«ç›´æ¥æ“ä½œã™ã‚‹ã¨å€¤ãŒæ›´æ–°ã•ã‚Œãªã„ã®ã‹</h2><p>å…¬å¼ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã® <a href="https://jp.vuejs.org/v2/guide/list.html" target="_blank" rel="noopener">ãƒªã‚¹ãƒˆãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°</a> ã«è©³ã—ãæ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚</p><p>ä»¥ä¸‹ã€ <a href="https://jp.vuejs.org/v2/guide/list.html#ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å¤‰æ›´æ¤œå‡ºã®æ³¨æ„" target="_blank" rel="noopener">https://jp.vuejs.org/v2/guide/list.html#ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å¤‰æ›´æ¤œå‡ºã®æ³¨æ„</a> ã‹ã‚‰ã®å¼•ç”¨ã§ã™ã€‚</p><blockquote><p>å†åº¦ã«ãªã‚Šã¾ã™ãŒã€ç¾ä»£ã® JavaScript ã®åˆ¶ç´„ã®ãŸã‚ã€Vue ã¯<strong>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®è¿½åŠ ã‚„å‰Šé™¤ã‚’æ¤œå‡ºã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“</strong>ã€‚(ä¸­ç•¥)<br>Vue ã¯ã™ã§ã«ä½œæˆã•ã‚ŒãŸã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«æ–°ã—ã„ãƒ«ãƒ¼ãƒˆãƒ¬ãƒ™ãƒ«ã®ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å‹•çš„ã«è¿½åŠ ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚</p></blockquote><p>ã¾ãŸã€å…¬å¼ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã® <a href="https://jp.vuejs.org/v2/guide/reactivity.html" target="_blank" rel="noopener">ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã®æ¢æ±‚</a>ã‚‚ä½µã›ã¦å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p><p>é…åˆ—ã®ä¸­ã«æ–°ãŸãªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ç”Ÿã‚„ãã†ã¨ã—ã¦ã‚‚ã€Vue.jsã¯ãã‚Œã‚’ç›£è¦–ã—ã¦ã„ãªã„ãŸã‚ã€å€¤ã®æ›´æ–°æ¤œçŸ¥ã‚„å†æç”»ãŒã§ããªã„ã‚ˆã€‚æ–°ã—ãã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œã£ã¦ã‚ã’ã¦ã­ã€‚ã¨ã„ã†ã“ã¨ã§ã—ãŸã€‚</p><h2 id="ãŠã‚ã‚Šã«"><a href="#ãŠã‚ã‚Šã«" class="headerlink" title="ãŠã‚ã‚Šã«"></a>ãŠã‚ã‚Šã«</h2><p>ä»Šå›ã®ãƒˆãƒ©ãƒ–ãƒ«ã‚’é€šã˜ã¦Vue.jsã®ä»•çµ„ã¿ã«ã¤ã„ã¦ã‚ˆã‚Šç†è§£ãŒæ·±ã¾ã‚Šã¾ã—ãŸã€‚<br>Vue.jsã¯ä¾¿åˆ©ã§æ‰‹è»½ã§ã™ãŒã€ã“ã®ã‚ãŸã‚Šã®å†…éƒ¨çš„ãªä»•çµ„ã¿ã‚‚ã—ã£ã‹ã‚Šã¨æŠŠæ¡ã—ã¦ãŠããŸã„ã§ã™ã­ã€‚</p><hr><p>é–¢é€£è¨˜äº‹ï¼š</p><ul><li><a href="/articles/20190612/">TypeScriptæ•™è‚²ç”¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å…¬é–‹ã®ãŠçŸ¥ã‚‰ã›</a></li><li><a href="https://future-architect.github.io/articles/20191029/">ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã‚’2å¹´åŠç¶šã‘ã¦ãƒãƒã£ãŸã“ã¨ã‹ã‚‰å¾—ãŸæ•™è¨“3ã¤</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ãã®å€¤ã€Vue-jsã¯ç›£è¦–ã—ã¦ã„ã¾ã™ã‹ï¼Ÿï½Vue-jsã§å€¤ãŒæ›´æ–°ã•ã‚Œãªã„ã¨ãã«æ°—ã‚’ã¤ã‘ã‚‹ã¨ã“ã‚ï½&quot;&gt;&lt;a href=&quot;#ãã®å€¤ã€Vue-jsã¯ç›£è¦–ã—ã¦ã„ã¾ã™ã‹ï¼Ÿï½Vue-jsã§å€¤ãŒæ›´æ–°ã•ã‚Œãªã„ã¨ãã«æ°—ã‚’ã¤ã‘ã‚‹ã¨ã“ã‚ï½&quot; class=&quot;headerlink&quot; tit
      
    
    </summary>
    
      <category term="Programming" scheme="https://future-architect.github.io/categories/Programming/"/>
    
    
      <category term="Frontend" scheme="https://future-architect.github.io/tags/Frontend/"/>
    
      <category term="Vue.js" scheme="https://future-architect.github.io/tags/Vue-js/"/>
    
  </entry>
  
  <entry>
    <title>å…¬é–‹éµæš—å·(éå¯¾ç§°éµæš—å·)ã®ä»•çµ„ã¿ã‚’ã‚ã‹ã‚Šã‚„ã™ãè§£èª¬ã—ã¦ã¿ã‚‹</title>
    <link href="https://future-architect.github.io/articles/20200312/"/>
    <id>https://future-architect.github.io/articles/20200312/</id>
    <published>2020-03-12T01:34:17.000Z</published>
    <updated>2020-03-12T01:52:57.418Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>ã“ã‚“ã«ã¡ã¯ã€‚TIG DXãƒãƒ¼ãƒ ã®æ‘ç€¬ã§ã™ã€‚</p><p>å…¬é–‹éµæš—å·</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å…¬é–‹éµã§æš—å·åŒ–ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã¯å¯¾å¿œã™ã‚‹ç§˜å¯†éµã§ã—ã‹å¾©å·ã§ããªã„ã€‚</span><br></pre></td></tr></table></figure><p>æœ€åˆã«ã“ã®èª¬æ˜ã‚’èã„ãŸæ™‚ã«ãã‚“ãªéµãŒã‚ã‚Šãˆã‚‹ã®ã‹ï¼Ÿã¨ç–‘å•ã«æ€ã„ã¾ã—ãŸã€‚<br>æŠ€è¡“åŠ›ã‚‚ãªã‹ã£ãŸå½“æ™‚ã¯ä¸æ€è­°ã§ä»•æ–¹ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚è‡ªåˆ†ã§åˆ©ç”¨ã™ã‚‹ã“ã¨ã‚‚ãªã„ã—ã€çŸ¥è­˜ã¨ã—ã¦è¦šãˆã¦ãŠã“ã†ãã‚‰ã„ã®æ„Ÿè¦šã§ã„ãŸã®ã§ã™ãŒã‚ã‚‹ç¨‹åº¦æŠ€è¡“åŠ›ãŒã¤ã„ãŸä»Šæ—¥ã§ã¯ã€å¸¸æ—¥é ƒã‹ã‚‰HTTPSã‚„SSHã§åˆ©ç”¨ã—ã¦ã„ã‚‹ã“ã¨ã«ãµã¨æ°—ãŒä»˜ãè‡ªåˆ†ã®ç†è§£ã®ãŸã‚ä»•çµ„ã¿ã«ã¤ã„ã¦å…¬é–‹éµæš—å·ã®ä¸€ã¤ã§ã‚ã‚‹RSAæš—å·ã«ã¤ã„ã¦èª¿ã¹ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚<br>RSAæš—å·ã‚’è§£èª¬ã—ã¦ã„ã‚‹ãƒšãƒ¼ã‚¸ã¯ãŸãã•ã‚“ã‚ã‚Šã¾ã™ãŒã€ã“ã®è¨˜äº‹ã§ã¯æ¥µåŠ›ç°¡å˜ãªå†…å®¹ã«ãªã‚‹ã“ã¨ã‚’å¿ƒãŒã‘ã¦ã¿ã¾ã—ãŸã€‚</p><h1 id="æš—å·åŒ–ã€å¾©å·ã®æ¦‚è¦"><a href="#æš—å·åŒ–ã€å¾©å·ã®æ¦‚è¦" class="headerlink" title="æš—å·åŒ–ã€å¾©å·ã®æ¦‚è¦"></a>æš—å·åŒ–ã€å¾©å·ã®æ¦‚è¦</h1><p>å›³ã§è¡¨ã™ã¨ã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚</p><img src="/images/20200312/photo_20200312_01.png" class="img-middle-size"><h1 id="æš—å·åŒ–å¼ã¨å¾©å·å¼"><a href="#æš—å·åŒ–å¼ã¨å¾©å·å¼" class="headerlink" title="æš—å·åŒ–å¼ã¨å¾©å·å¼"></a>æš—å·åŒ–å¼ã¨å¾©å·å¼</h1><p>RSAæš—å·ã§ã¯ã¹ãä¹—ã¨ä½™ã‚Š(mod)ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚<br>æš—å·åŒ–ã™ã‚‹éš›ã¯ã¨ã‚ã‚‹æ•°Eã¨Nã‚’åˆ©ç”¨ã—ã¾ã™ã€‚</p><p>$$æš—å·æ–‡=å¹³æ–‡^E \quad mod \quad N$$</p><p>å¾©å·ã™ã‚‹éš›ã‚‚å¼ã¯åŒæ§˜ã§ã™ãŒEã®ä»£ã‚ã‚Šã«Dã‚’åˆ©ç”¨ã—ã¾ã™ã€‚</p><p>$$å¹³æ–‡=æš—å·æ–‡^D \quad mod \quad N$$</p><p>å¼ã‹ã‚‰æš—å·æ–‡ã‚’å‰Šé™¤ã™ã‚‹ã¨ä»¥ä¸‹ã®å¼ãŒæˆã‚Šç«‹ã¡ã¾ã™ã€‚</p><p>$$å¹³æ–‡=å¹³æ–‡^{ED} \quad mod \quad N$$</p><h1 id="ã¨ã‚Šã‚ãˆãšã ã¾ã•ã‚ŒãŸã¨æ€ã£ã¦ç¢ºèª"><a href="#ã¨ã‚Šã‚ãˆãšã ã¾ã•ã‚ŒãŸã¨æ€ã£ã¦ç¢ºèª" class="headerlink" title="ã¨ã‚Šã‚ãˆãšã ã¾ã•ã‚ŒãŸã¨æ€ã£ã¦ç¢ºèª"></a>ã¨ã‚Šã‚ãˆãšã ã¾ã•ã‚ŒãŸã¨æ€ã£ã¦ç¢ºèª</h1><p>å¹³æ–‡ã‚’5,ã¨ã‚ã‚‹æ•°E,D,Nã‚’3,7,33ã¨ã—ã¦ç¢ºèªã—ã¦ã¿ã¾ã™ã€‚</p><p>æš—å·åŒ–</p><p>$$5^3 \quad mod \quad 33 = 125 \quad mod \quad 33 = 26$$</p><p>å¾©å·</p><p>$$26^7 \quad mod \quad 33 = 8031810176 \quad mod \quad 33\quad = 5$$</p><p>å¹³æ–‡ã®5ãŒæš—å·åŒ–ã™ã‚‹ã“ã¨ã§26ã«ãªã‚Šã€26ã‚’å¾©å·ã™ã‚‹ã“ã¨ã§5ã«æˆ»ã‚Šã¾ã—ãŸã­ã€‚<br>modãŒ33ãªã®ã§å¹³æ–‡ãŒ1ï½32ã®æ•´æ•°ã§ã‚ã‚Œã°åŒæ§˜ã«æš—å·åŒ–ã€å¾©å·ã™ã‚Œã°å…ƒã®å¹³æ–‡ã«æˆ»ã™ã“ã¨ãŒã§ãã¾ã™ã€‚</p><h1 id="E-D-Nã®æ±‚ã‚æ–¹"><a href="#E-D-Nã®æ±‚ã‚æ–¹" class="headerlink" title="E,D,Nã®æ±‚ã‚æ–¹"></a>E,D,Nã®æ±‚ã‚æ–¹</h1><p>æš—å·åŒ–ã€è¤‡åˆã«ç”¨ã„ãŸE,D,Nã¯ã©ã‚“ãªæ•°å­—ã§ã‚‚è‰¯ã„ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚<br>ã§ã¯ã€æš—å·åŒ–ã€å¾©å·ãŒæˆã‚Šç«‹ã¤E,D,Nã¯ã©ã®ã‚ˆã†ãªæ•°ãªã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ</p><p>ä»»æ„ã®æ­£ã®æ•´æ•°a,nã¨ã€ç›¸é•ãªã‚‹ç´ æ•°pã€qã«ãŠã„ã¦ä»¥ä¸‹ã®å¼ãŒæˆã‚Šç«‹ã¡ã¾ã™ã€‚<br>ã©ã†ã—ã¦æˆã‚Šç«‹ã¤ã®ã‹ã¯çœç•¥ã—ã¾ã™ãŒRSAæš—å·ã®ç™ºæ˜è€…ãŒç™ºè¦‹ã—ãŸãã‚‰ã„ã«æ€ã£ã¦ãã ã•ã„ã€‚</p><p>$$a^{(pâˆ’1)(qâˆ’1)n+1} â‰¡ a \quad mod \quad pq$$</p><p>RSAæš—å·ã®è‚ã¯ã“ã®æ•°å¼ã§ã™ã€‚<br>Nã‹ã‚‰E,Dã‚’æ¢ã›ã°RSAã§æš—å·åŒ–ã€å¾©å·ãŒã§ãã¾ã™ã€‚</p><p>å…ˆã®ä¾‹ã§ã¯NãŒ33ã§ã—ãŸã®ã§ãã‚Œã‚’ç´ å› æ•°åˆ†è§£ã—ã¦p,qã¯3,11ã§ã™ã€‚ã“ã“ã‹ã‚‰E,Dã‚’æ±‚ã‚ã¾ã™ã€‚</p><p>$$ED = (pâˆ’1)(qâˆ’1)n+1=(3-1)(11-1)Ã—1+1=2*10+1 =21$$</p><p>ã“ã“ã¾ã§è§¦ã‚Œã¦ã„ã¾ã›ã‚“ã§ã—ãŸãŒE,Dã¯ç´ æ•°ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ç´ æ•°åŒå£«ã®ã‹ã‘ç®—ã§21ã«ãªã‚‹E,Dã®çµ„ã¿åˆã‚ã›ã¯3,7â€»ã§ã™ã­ã€‚<br>â€»èª¬æ˜ã®ãŸã‚ã«ã—ã‚Œã£ã¨ç´ å› æ•°åˆ†è§£ã—ã¦ã„ã¾ã™ãŒã€å®Ÿéš›ã®éµç”Ÿæˆã§ã¯Eã‚’å›ºå®šå€¤ã«ã™ã‚‹ã“ã¨ã§å®¹æ˜“ã«Dã‚’æ±‚ã‚ã¦ã„ã¾ã™ã€‚</p><h1 id="ç§˜å¯†éµãŒå®¹æ˜“ã«ç‰¹å®šã•ã‚Œã‚‹ã®ã§ã¯ï¼Ÿ"><a href="#ç§˜å¯†éµãŒå®¹æ˜“ã«ç‰¹å®šã•ã‚Œã‚‹ã®ã§ã¯ï¼Ÿ" class="headerlink" title="ç§˜å¯†éµãŒå®¹æ˜“ã«ç‰¹å®šã•ã‚Œã‚‹ã®ã§ã¯ï¼Ÿ"></a>ç§˜å¯†éµãŒå®¹æ˜“ã«ç‰¹å®šã•ã‚Œã‚‹ã®ã§ã¯ï¼Ÿ</h1><p>ä»Šå›ã®å ´åˆã€æš—å·ã™ã‚‹ç‚ºã«ã¯ç§˜å¯†éµã¨ã—ã¦3,33ã®æ•°å­—ã®çµ„ãŒå¿…è¦ã§ã€è¤‡åˆã™ã‚‹ç‚ºã«å…¬é–‹éµã¨ã—ã¦7,33ã®æ•°å­—ã®çµ„ãŒå¿…è¦ã§ã™ã€‚<br>ä¸Šè¨˜ã®E,D,Nã®æ±‚ã‚æ–¹ã®è¨ˆç®—æ–¹æ³•ã‚’ç”¨ã„ã‚Œã°å…¬é–‹éµãŒã‚ã‹ã‚Œã°ç§˜å¯†éµã‚‚ç°¡å˜ã«ã‚ã‹ã£ã¦ã—ã¾ã„ãã†ã§ã™ã€‚<br>ã§ã¯ã€å®Ÿéš›ã«ç§ãŸã¡ãŒåˆ©ç”¨ã—ã¦ã„ã‚‹ç§˜å¯†éµã¯ãªãœç‰¹å®šãŒå›°é›£ãªã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ</p><p>ãã‚Œã¯ç´ å› æ•°åˆ†è§£ãŒå®¹æ˜“ã«ã§ããªã„ã“ã¨ã‚’åˆ©ç”¨ã—ç‰¹å®šã‚’å›°é›£ã«ã—ã¦ã„ã¾ã™ã€‚<br>äºŒæ¡ç¨‹åº¦ã®ç´ å› æ•°åˆ†è§£ã¯äººé–“ã§ã‚‚ç¬æ™‚ã«è¨ˆç®—ã§ãã¾ã™ãŒã€æ•°ç™¾æ¡ã®ç´ å› æ•°åˆ†è§£ã¯ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã‚’åˆ©ç”¨ã—ã¦ã‚‚å®¹æ˜“ã«ã¯è¨ˆç®—ã§ãã¾ã›ã‚“ã€‚<br>ã§ã™ã®ã§å®Ÿéš›ã«åˆ©ç”¨ã•ã‚Œã¦ã„ã‚‹éµã¯ã¨ã¦ã‚‚å¤§ããªæ•°ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚</p><h1 id="æ•°å­—ãŒæš—å·åŒ–å‡ºæ¥ã‚‹ã®ã¯ã‚ã‹ã£ãŸã‘ã©æ–‡å­—åˆ—ã‚’æš—å·åŒ–ã—ãŸã„ã‚“ã ã‘ã©ï¼Ÿ"><a href="#æ•°å­—ãŒæš—å·åŒ–å‡ºæ¥ã‚‹ã®ã¯ã‚ã‹ã£ãŸã‘ã©æ–‡å­—åˆ—ã‚’æš—å·åŒ–ã—ãŸã„ã‚“ã ã‘ã©ï¼Ÿ" class="headerlink" title="æ•°å­—ãŒæš—å·åŒ–å‡ºæ¥ã‚‹ã®ã¯ã‚ã‹ã£ãŸã‘ã©æ–‡å­—åˆ—ã‚’æš—å·åŒ–ã—ãŸã„ã‚“ã ã‘ã©ï¼Ÿ"></a>æ•°å­—ãŒæš—å·åŒ–å‡ºæ¥ã‚‹ã®ã¯ã‚ã‹ã£ãŸã‘ã©æ–‡å­—åˆ—ã‚’æš—å·åŒ–ã—ãŸã„ã‚“ã ã‘ã©ï¼Ÿ</h1><p>ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã§å–ã‚Šæ‰±ã‚ã‚Œã‚‹æ–‡å­—ã¯æ–‡å­—ã‚³ãƒ¼ãƒ‰ã§æˆã‚Šç«‹ã£ã¦ã„ã¾ã™ã€‚æ–‡å­—ã‚³ãƒ¼ãƒ‰ã¯ä¸€ã¤ä¸€ã¤ã®æ–‡å­—ãŒæ•°å€¤ã‹ã‚‰æˆã‚Šç«‹ã£ã¦ã„ã‚‹ã®ã§æ•°å€¤ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™ã€‚<br>ãã‚Œã‚’ä¸€æ–‡å­—ãšã¤æš—å·åŒ–ã—ã¦ã„ã‚‹ã®ã§æ–‡å­—åˆ—ã§ã‚‚æš—å·åŒ–ã§ãã¾ã™ã€‚</p><p>ä¾‹ãˆã°Futureã‚’ASCIIæ–‡å­—ã‚³ãƒ¼ãƒ‰ã«ã™ã‚‹ã¨70,117,116,117,114,101ã«ãªã‚Šã¾ã™ã€‚</p><h1 id="æš—å·åŒ–ã¨å¾©å·ã«åˆ©ç”¨ã™ã‚‹éµ"><a href="#æš—å·åŒ–ã¨å¾©å·ã«åˆ©ç”¨ã™ã‚‹éµ" class="headerlink" title="æš—å·åŒ–ã¨å¾©å·ã«åˆ©ç”¨ã™ã‚‹éµ"></a>æš—å·åŒ–ã¨å¾©å·ã«åˆ©ç”¨ã™ã‚‹éµ</h1><p>å…¬é–‹éµã‚’åˆ©ç”¨ã—ã¦æš—å·åŒ–ã€ç§˜å¯†éµã‚’åˆ©ç”¨ã—ã¦å¾©å·ã§ãã‚‹ã£ã¦ã“ã¨ã¯é€†ã«ç§˜å¯†éµã‚’åˆ©ç”¨ã—ã¦æš—å·åŒ–ã€å…¬é–‹éµã‚’åˆ©ç”¨ã—ã¦å¾©å·ã‚‚ã§ãã‚‹ã®ã§ã¯ï¼Ÿ</p><p>ã¯ã„ã€‚éµã‚’é€†ã«åˆ©ç”¨ã—ã¦ã‚‚ã§ãã¾ã™ã€‚<br>é‡è¦ãªã®ã¯æš—å·åŒ–ã—ãŸéµã§å¾©å·ã§ããšã€å¯¾ã¨ãªã‚‹éµã§ã—ã‹å¾©å·ã§ããªã„ã“ã¨ã§ã™ã€‚<br>è©³ç´°ã¯å‰²æ„›ã—ã¾ã™ãŒã“ã‚Œã¯å®Ÿéš›ã«é›»å­ç½²åã§åˆ©ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><h1 id="ã•ã„ã”ã«"><a href="#ã•ã„ã”ã«" class="headerlink" title="ã•ã„ã”ã«"></a>ã•ã„ã”ã«</h1><p>ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã§ãªãã¨ã‚‚ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚’åˆ©ç”¨ã™ã‚‹äººã§ã‚ã‚Œã°HTTPSã®è£ãªã©ã§èº«è¿‘ã«å…¬é–‹éµæš—å·ãŒæ„è­˜ã™ã‚‹ã“ã¨ãªãåˆ©ç”¨ã•ã‚Œã¦ã¾ã™ã€‚<br>æš—å·åŒ–ã®åŸç†ã‚’çŸ¥ã‚‰ãšã«åˆ©ç”¨ã—ã¦ã„ã¾ã—ãŸãŒèª¿ã¹ã¦ã¿ã‚‹ã¨é¢ç™½ãã€ç´ æ™´ã‚‰ã—ã•ã‚’å®Ÿæ„Ÿã§ãã¾ã—ãŸã€‚<br>æš—å·åŒ–ã€å¾©å·ã«åˆ©ç”¨ã•ã‚Œã‚‹è¨ˆç®—å¼ã¯ä¸­å­¦ç”Ÿã¾ã§ã«ç¿’ã†è¶³ã—ç®—ã€å¼•ãç®—ã€ã‹ã‘ç®—(ã¹ãä¹—)ã€ä½™ã‚Š(mod)ã€ç´ æ•°ã ã‘ã§æˆã‚Šç«‹ã£ã¦ã„ã‚‹ã“ã¨ã«é©šãã¾ã—ãŸã€‚<br>RSAæš—å·ã®ç™ºæ˜ã¯é›£ç”£ã ã£ãŸã‚ˆã†ã§ã™ãŒç™ºæ˜è€…ã£ã¦æœ¬å½“ã«é ­ãŒè‰¯ã„ã§ã™ã­ã€‚</p><p>ãªãŠã€ã“ã®è¨˜äº‹ã‚’ä½œæˆã™ã‚‹ä¸Šã§ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã‚’å‚è€ƒã«ã•ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚<br><a href="https://persol-tech-s.co.jp/corporate/security/article.html?id=26" target="_blank" rel="noopener">https://persol-tech-s.co.jp/corporate/security/article.html?id=26</a><br><a href="https://qiita.com/YutaKase6/items/cd9e26d723809dc85928" target="_blank" rel="noopener">https://qiita.com/YutaKase6/items/cd9e26d723809dc85928</a><br><a href="https://qiita.com/jabba/items/e5d6f826d9a8f2cefd60" target="_blank" rel="noopener">https://qiita.com/jabba/items/e5d6f826d9a8f2cefd60</a></p><p>é–¢é€£ã™ã‚‹è¨˜äº‹:</p><ul><li><a href="https://future-architect.github.io/articles/20200121/">ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°ã¨ã®ä»˜ãåˆã„æ–¹</a></li><li><a href="https://future-architect.github.io/articles/20191107/">ã‚¤ãƒ³ãƒ•ãƒ©å…¥é–€vol.3(ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å†—é•·åŒ–æ§‹æˆ)</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h1&gt;&lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€‚TIG DXãƒãƒ¼ãƒ ã®æ‘ç€¬ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;å…¬é–‹éµæš—å·&lt;/p&gt;
&lt;figure class=&quot;highligh
      
    
    </summary>
    
      <category term="Infrastructure" scheme="https://future-architect.github.io/categories/Infrastructure/"/>
    
    
      <category term="æš—å·" scheme="https://future-architect.github.io/tags/%E6%9A%97%E5%8F%B7/"/>
    
      <category term="RSAæš—å·" scheme="https://future-architect.github.io/tags/RSA%E6%9A%97%E5%8F%B7/"/>
    
  </entry>
  
  <entry>
    <title>Javaãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã®ãŸã‚ã®Goè¨€èªå…¥é–€</title>
    <link href="https://future-architect.github.io/articles/20200311/"/>
    <id>https://future-architect.github.io/articles/20200311/</id>
    <published>2020-03-11T00:39:47.000Z</published>
    <updated>2020-03-12T01:44:02.223Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Javaãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã®ãŸã‚ã®Goè¨€èªå…¥é–€"><a href="#Javaãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã®ãŸã‚ã®Goè¨€èªå…¥é–€" class="headerlink" title="Javaãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã®ãŸã‚ã®Goè¨€èªå…¥é–€"></a>Javaãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã®ãŸã‚ã®Goè¨€èªå…¥é–€</h2><p>ã“ã¡ã‚‰ã¯<a href="https://yourbasic.org/golang/go-java-tutorial/" target="_blank" rel="noopener">Java to Go in-depth tutorial</a>ã®æ—¥æœ¬èªè¨³ã§ã™<br>åŸæ–‡ã®è‘—è€…ã«è¨±è«¾ã‚’å¾—ã¦ç¿»è¨³ãƒ»å…¬é–‹ã„ãŸã—ã¾ã™ã€‚</p><p>ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã¯ã€Javaãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ãŒã™ã°ã‚„ãGoè¨€èªã«ã‚­ãƒ£ãƒƒãƒã‚¢ãƒƒãƒ—ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚</p><h2 id="ç›®æ¬¡"><a href="#ç›®æ¬¡" class="headerlink" title="ç›®æ¬¡"></a>ç›®æ¬¡</h2><ul><li><a href="./#Hello-stack1">Hello stack</a></li><li><a href="./#ä¸»ãªé•ã„">ä¸»ãªé•ã„</a></li><li><a href="./#ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ï¼ˆæ–‡æ³•">ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ï¼ˆæ–‡æ³•ï¼‰</a></li><li><a href="./#å®šæ•°">å®šæ•°</a></li><li><a href="./#æ§‹é€ ä½“">æ§‹é€ ä½“</a></li><li><a href="./#ãƒã‚¤ãƒ³ã‚¿">ãƒã‚¤ãƒ³ã‚¿</a></li><li><a href="./#ã‚¹ãƒ©ã‚¤ã‚¹">ã‚¹ãƒ©ã‚¤ã‚¹</a></li><li><a href="./#å€¤ã®ä½œæˆ">å€¤ã®ä½œæˆ</a></li><li><a href="./#ãƒ¡ã‚½ãƒƒãƒ‰ã¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹">ãƒ¡ã‚½ãƒƒãƒ‰ã¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹</a></li><li><a href="./#ã‚¨ãƒ©ãƒ¼">ã‚¨ãƒ©ãƒ¼</a></li><li><a href="./#Panicã¨Recover">Panicã¨Recover</a></li><li><a href="./#ã‚´ãƒ«ãƒ¼ãƒãƒ³ã¨ãƒãƒ£ãƒãƒ«">ã‚´ãƒ«ãƒ¼ãƒãƒ³ã¨ãƒãƒ£ãƒãƒ«</a></li><li><a href="./#Hello-server">Hello server</a></li></ul><h2 id="Hello-stack1"><a href="#Hello-stack1" class="headerlink" title="Hello stack1"></a>Hello stack<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup></h2><p>ã¾ãšã¯ã˜ã‚ã«ç°¡å˜ãªä¾‹ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚ã“ã®ä¾‹ã§ã¯ã‚·ãƒ³ãƒ—ãƒ«ãªæŠ½è±¡ãƒ‡ãƒ¼ã‚¿å‹ã‚’Goã§å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// collectionãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯stringå‹ã‚’æ ¼ç´ã§ãã‚‹ã‚¹ã‚¿ãƒƒã‚¯ã‚’å®Ÿè£…ã—ã¦ã„ã‚‹</span></span><br><span class="line"><span class="keyword">package</span> collection</span><br><span class="line"></span><br><span class="line"><span class="comment">// Stackã®ã‚¼ãƒ­å€¤ã¯ã™ãã«ä½¿ç”¨ã§ãã‚‹ç©ºã®ã‚¹ã‚¿ãƒƒã‚¯</span></span><br><span class="line"><span class="keyword">type</span> Stack <span class="keyword">struct</span> &#123;</span><br><span class="line">    data []<span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Pushãƒ¡ã‚½ãƒƒãƒ‰ã¯ã‚¹ã‚¿ãƒƒã‚¯ã®ä¸€ç•ªä¸Šã«xã‚’è¿½åŠ ã™ã‚‹</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *Stack)</span> <span class="title">Push</span><span class="params">(x <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">    s.data = <span class="built_in">append</span>(s.data, x)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Popãƒ¡ã‚½ãƒƒãƒ‰ã¯æœ€å¾Œã«è¿½åŠ ã•ã‚ŒãŸè¦ç´ ã‚’ã‚¹ã‚¿ãƒƒã‚¯ã‹ã‚‰å‰Šé™¤ã—ã¤ã¤ã€ãã®è¦ç´ ã‚’è¿”ã™</span></span><br><span class="line"><span class="comment">// ç©ºã®ã‚¹ã‚¿ãƒƒã‚¯ã§Popãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã¶ã¨ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *Stack)</span> <span class="title">Pop</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">    n := <span class="built_in">len</span>(s.data) - <span class="number">1</span></span><br><span class="line">    res := s.data[n]</span><br><span class="line">    s.data[n] = <span class="string">""</span> <span class="comment">// ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ã‚’é¿ã‘ã‚‹ãŸã‚ã®å‡¦ç†</span></span><br><span class="line">    s.data = s.data[:n]</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Sizeãƒ¡ã‚½ãƒƒãƒ‰ã¯ã‚¹ã‚¿ãƒƒã‚¯ã®è¦ç´ æ•°ã‚’è¿”ã™</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *Stack)</span> <span class="title">Size</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">len</span>(s.data)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æœ€ä¸Šä½ã®å®£è¨€æ–‡ã®å‰ã«ç›´æ¥æ›¸ã‹ã‚Œã¦ã„ã‚‹ã‚³ãƒ¡ãƒ³ãƒˆã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚³ãƒ¡ãƒ³ãƒˆã«ãªã‚Šã¾ã™ã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚³ãƒ¡ãƒ³ãƒˆã¯ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§æ›¸ã‹ã‚Œã¾ã™ã€‚</li><li>å¤‰æ•°ã‚’å®£è¨€ã™ã‚‹ã¨ãã¯ã€å¤‰æ•°åã®å¾Œã‚ã«å‹ã‚’æ›¸ãã¾ã™ã€‚</li><li>æ§‹é€ ä½“( <code>struct</code> )ã¯Javaã§ã„ã†ã¨ã“ã‚ã®ã‚¯ãƒ©ã‚¹ã«è©²å½“ã—ã¾ã™ã€‚Goã®æ§‹é€ ä½“ã¯ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ãƒ¡ãƒ³ãƒã«å«ã‚ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚å¤‰æ•°ã®ã¿ã‚’æ§‹é€ ä½“ã®ãƒ¡ãƒ³ãƒã«å«ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</li><li>ã‚³ãƒ¼ãƒ‰ä¸Šã® <code>(s *Stach)</code> ã¨ã„ã†éƒ¨åˆ†ã§ãƒ¡ã‚½ãƒƒãƒ‰ã®ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚’å®£è¨€ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯Javaã§ã„ã†ã¨ã“ã‚ã® <code>this</code> ã«è©²å½“ã—ã¾ã™ã€‚</li><li><code>:=</code> ã¨ã„ã†æ¼”ç®—å­ã¯å¤‰æ•°ã®å®£è¨€ã¨åˆæœŸåŒ–ã‚’åŒæ™‚ã«è¡Œã£ã¦ãã‚Œã¾ã™ã€‚å¤‰æ•°ã®å‹ã¯åˆæœŸåŒ–å¼ã‹ã‚‰è‡ªå‹•ã§å°ã‹ã‚Œã¾ã™ã€‚</li></ul><p>ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã¯ã€æŠ½è±¡ãƒ‡ãƒ¼ã‚¿å‹ <code>collection.Stack</code> ã‚’ç”¨ã„ãŸHello worldãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> collection_test</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"go-for-java-programmers/collection"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ExampleStack</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> s collection.Stack</span><br><span class="line">    s.Push(<span class="string">"world!"</span>)</span><br><span class="line">    s.Push(<span class="string">"Hello, "</span>)</span><br><span class="line">    <span class="keyword">for</span> s.Size() &gt; <span class="number">0</span> &#123;</span><br><span class="line">        fmt.Print(s.Pop())</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println()</span><br><span class="line">    <span class="comment">// Output: Hello, world!</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ã“ã® <code>collection_test</code> ã¨ã„ã†ãƒ†ã‚¹ãƒˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ <code>collection</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨åŒã˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é…ç½®ã—ã¾ã™ã€‚</li><li>1ã¤ã‚ã®<code>import</code> æ–‡ã® <code>fmt</code> ã¯Goã®æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã™ã€‚ 2ã¤ã‚ <code>import</code> æ–‡ã¯â€œgo-for-java-programmers/collectionâ€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã†ã“ã¨ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚</li><li>ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ä¸Šã§ã¯ <code>fmt</code> ã‚„ <code>collection</code> ã¨ã„ã†çŸ­ã„åå‰ã§ã“ã‚Œã‚‰ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚</li></ul><p>NOTE: Goã§ã‚¹ã‚¿ãƒƒã‚¯ã‚’å®Ÿè£…ã™ã‚‹æ…£ç”¨çš„ãªæ–¹æ³•ã¯ã€ã‚¹ãƒ©ã‚¤ã‚¹ã‚’ç›´æ¥ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã™ã€‚è©³ã—ãã¯<a href="https://yourbasic.org/golang/implement-stack/" target="_blank" rel="noopener">Implement a stack (LIFO)</a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p><h2 id="ä¸»ãªé•ã„"><a href="#ä¸»ãªé•ã„" class="headerlink" title="ä¸»ãªé•ã„"></a>ä¸»ãªé•ã„</h2><h3 id="ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°"><a href="#ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°" class="headerlink" title="ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°"></a>ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°</h3><ul><li>Goã«ã¯ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’ä¼´ã†ã‚¯ãƒ©ã‚¹ã¨ã„ã†æ¦‚å¿µãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰ã€ã‚¯ãƒ©ã‚¹ã®ç¶™æ‰¿æ§‹é€ ã€ãƒ¡ã‚½ãƒƒãƒ‰ã®å‹•çš„ãƒ«ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã§å®Ÿç¾ã—ãŸã„ã“ã¨ã‚’ã€Goã§ã¯<a href="https://yourbasic.org/golang/structs-explained/" target="_blank" rel="noopener">struct</a>ã¨<a href="https://yourbasic.org/golang/interfaces-explained/" target="_blank" rel="noopener">interface</a>ã‚’ç”¨ã„ã¦å®Ÿç¾ã—ã¾ã™ã€‚</li><li>Goã§ã¯ã€ã©ã‚“ãªå‹ã«å¯¾ã—ã¦ã‚‚<a href="https://yourbasic.org/golang/methods-explained/" target="_blank" rel="noopener">ãƒ¡ã‚½ãƒƒãƒ‰</a>ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚’ãƒœãƒƒã‚¯ã‚¹åŒ–ã™ã‚‹å¿…è¦ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã¯Javaã§ã„ã†ã¨ã“ã‚ã® <code>this</code> ã«å¯¾å¿œã—ã¾ã™ã€‚ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã«ã¯å€¤ãã®ã‚‚ã®ã‹ãƒã‚¤ãƒ³ã‚¿ãŒå…¥ã‚Šã¾ã™ã€‚</li><li>Javaã® <code>public</code>ã‚„ <code>package-private</code> ã«ä¼¼ãŸï¼’ã¤ã®ã‚¢ã‚¯ã‚»ã‚¹ãƒ¬ãƒ™ãƒ«ãŒGoã«ã¯å­˜åœ¨ã—ã¾ã™ã€‚ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã§å®£è¨€ã•ã‚ŒãŸ<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>å¤‰æ•°ã‚„é–¢æ•°ã®åå‰ãŒå¤§æ–‡å­—ã§å§‹ã¾ã‚‹å ´åˆã¯ <code>public</code> ã€å°æ–‡å­—ã§å§‹ã¾ã‚‹å ´åˆã¯ <code>package-private</code> ã®ã‚¢ã‚¯ã‚»ã‚¹ãƒ¬ãƒ™ãƒ«ã«ãªã‚Šã¾ã™ã€‚</li></ul><h3 id="é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°"><a href="#é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°" class="headerlink" title="é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°"></a>é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°</h3><ul><li>Goã®é–¢æ•°ã¯ç¬¬ä¸€ç´šã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚<a href="https://yourbasic.org/golang/function-pointer-type-declaration/" target="_blank" rel="noopener">é–¢æ•°å€¤</a>ã¯ä»–ã®å€¤ã¨åŒã˜ã‚ˆã†ã«ä½¿ç”¨ã—ãŸã‚Šã€é–¢æ•°ã®å¼•æ•°ã¨ã—ã¦æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚<a href="https://yourbasic.org/golang/anonymous-function-literal-lambda-closure/" target="_blank" rel="noopener">é–¢æ•°ãƒªãƒ†ãƒ©ãƒ«</a>ã¯å¤–å´ã®é–¢æ•°ã§å®šç¾©ã•ã‚ŒãŸå¤‰æ•°ã‚’å‚ç…§ã§ãã¾ã™ã€‚</li></ul><h3 id="ãƒã‚¤ãƒ³ã‚¿ã¨å‚ç…§"><a href="#ãƒã‚¤ãƒ³ã‚¿ã¨å‚ç…§" class="headerlink" title="ãƒã‚¤ãƒ³ã‚¿ã¨å‚ç…§"></a>ãƒã‚¤ãƒ³ã‚¿ã¨å‚ç…§</h3><ul><li>Goã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚„é…åˆ—ã ã‘ã§ãªãã€ã™ã¹ã¦ã®å‹ã§<a href="https://yourbasic.org/golang/pointers-explained/" target="_blank" rel="noopener">ãƒã‚¤ãƒ³ã‚¿</a>ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä»»æ„ã®å‹ <code>T</code> ã«ã¯å¯¾å¿œã™ã‚‹ãƒã‚¤ãƒ³ã‚¿å‹ <code>*T</code> ãŒå­˜åœ¨ã—ã¾ã™ã€‚ã“ã‚Œã¯å‹ <code>T</code> ã®å€¤ã¸ã®ãƒã‚¤ãƒ³ã‚¿ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚</li><li>Goã§ã¯ç„¡åŠ¹ãªãƒã‚¤ãƒ³ã‚¿ã« <code>nil</code> ã‚’ä½¿ç”¨ã—ã¾ã™ãŒã€Javaã§ã¯ <code>null</code> ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</li><li>Goã®é…åˆ—ã¯å€¤å‹ã§ã™ã€‚é…åˆ—ãŒé–¢æ•°ã®å¼•æ•°ã¨ã—ã¦ä½¿ç”¨ã•ã‚Œã‚‹å ´åˆã€ãã®é–¢æ•°ã¯é…åˆ—ã¸ã®ãƒã‚¤ãƒ³ã‚¿ãƒ¼ã§ã¯ãªãé…åˆ—ã®ã‚³ãƒ”ãƒ¼ã‚’å—ã‘å–ã‚Šã¾ã™ã€‚å®Ÿéš›ã«ã¯ã€é…åˆ—ã§ã¯ãªãã‚¹ãƒ©ã‚¤ã‚¹ã‚’é–¢æ•°ã®å¼•æ•°ã«æ¸¡ã™ã“ã¨ãŒã»ã¨ã‚“ã©ã§ã™ã€‚ã‚¹ãƒ©ã‚¤ã‚¹ã¯å‚ç…§å‹ã§ã™ã€‚</li><li>ç‰¹å®šã®å‹(ãƒãƒƒãƒ—, ã‚¹ãƒ©ã‚¤ã‚¹, ãƒãƒ£ãƒãƒ«)ã¯å€¤å‹ã§ã¯ãªãã€å‚ç…§å‹ã§ã™ã€‚ã¤ã¾ã‚Šã€ãƒãƒƒãƒ—ã‚’é–¢æ•°ã«æ¸¡ã—ã¦ã‚‚ãƒãƒƒãƒ—ã¯ã‚³ãƒ”ãƒ¼ã•ã‚Œã¾ã›ã‚“ã€‚æ¸¡ã•ã‚ŒãŸãƒãƒƒãƒ—ã‚’é–¢æ•°å†…ã§å¤‰æ›´ã—ãŸå ´åˆã€å¤‰æ›´ã¯å‘¼ã³å‡ºã—å…ƒã«ã‚‚åæ˜ ã•ã‚Œã¾ã™ã€‚Javaã®ç”¨èªã‚’ä½¿ã†ã¨ã€ã“ã‚Œã¯ãƒãƒƒãƒ—ã¸ã®å‚ç…§ãŒè¡Œã‚ã‚Œã¦ã„ã‚‹ã‹ã‚‰ã ã¨èª¬æ˜ã§ãã¾ã™ã€‚</li></ul><h3 id="çµ„ã¿è¾¼ã¿å‹"><a href="#çµ„ã¿è¾¼ã¿å‹" class="headerlink" title="çµ„ã¿è¾¼ã¿å‹"></a>çµ„ã¿è¾¼ã¿å‹</h3><ul><li>æ–‡å­—åˆ—å‹ã¯Goã®è¨€èªä»•æ§˜ã¨ã—ã¦çµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã™ã€‚<a href="https://yourbasic.org/golang/string-functions-reference-cheat-sheet/" target="_blank" rel="noopener">string</a> ã¯byteå‹ã®ã‚¹ãƒ©ã‚¤ã‚¹ã®ã‚ˆã†ã«æŒ¯ã‚‹èˆã„ã¾ã™ãŒã€ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ã§ã™ã€‚</li><li>ãƒãƒƒã‚·ãƒ¥ãƒ†ãƒ¼ãƒ–ãƒ«ã¯Goã®è¨€èªè‡ªä½“ã«çµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã™ã€‚Goã§ã¯<a href="https://yourbasic.org/golang/maps-explained/" target="_blank" rel="noopener">map</a>ã¨å‘¼ã³ã¾ã™ã€‚</li></ul><h3 id="ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°"><a href="#ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°" class="headerlink" title="ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°"></a>ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</h3><ul><li>Goã§ã¯ä¾‹å¤–å‡¦ç†(exceptions)ã®ä»£ã‚ã‚Šã«ã€<a href="https://yourbasic.org/golang/errors-explained/" target="_blank" rel="noopener">error</a>ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚EOFãªã©ã®ã‚¤ãƒ™ãƒ³ãƒˆã€é…åˆ—ã®ç¯„å›²å¤–ã®é ˜åŸŸã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã‚ˆã†ã¨ã—ãŸã—ãŸã¨ãã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ <a href="https://yourbasic.org/golang/recover-from-panic/" target="_blank" rel="noopener">ãƒ‘ãƒ‹ãƒƒã‚¯</a>ã¯errorã§è¡¨ç¾ã•ã‚Œã¾ã™ã€‚</li></ul><h3 id="ä¸¦è¡Œå‡¦ç†"><a href="#ä¸¦è¡Œå‡¦ç†" class="headerlink" title="ä¸¦è¡Œå‡¦ç†"></a>ä¸¦è¡Œå‡¦ç†</h3><ul><li>Goã§ã¯å€‹åˆ¥ã«å‹•ãå®Ÿè¡Œã‚¹ãƒ¬ãƒƒãƒ‰ã‚’<a href="https://yourbasic.org/golang/goroutines-explained/" target="_blank" rel="noopener">ã‚´ãƒ«ãƒ¼ãƒãƒ³</a>ã¨å‘¼ã³ã¾ã™ã€‚ã¾ãŸã‚´ãƒ«ãƒ¼ãƒãƒ³é–“ã®é€šä¿¡ã¯<a href="https://yourbasic.org/golang/channels-explained/" target="_blank" rel="noopener">ãƒãƒ£ãƒãƒ«</a>ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã¯è¨€èªãŒæä¾›ã—ã¦ã„ã¾ã™ã€‚</li></ul><h3 id="ç”¨æ„ã•ã‚Œã¦ã„ãªã„æ©Ÿèƒ½"><a href="#ç”¨æ„ã•ã‚Œã¦ã„ãªã„æ©Ÿèƒ½" class="headerlink" title="ç”¨æ„ã•ã‚Œã¦ã„ãªã„æ©Ÿèƒ½"></a>ç”¨æ„ã•ã‚Œã¦ã„ãªã„æ©Ÿèƒ½</h3><ul><li>Goã¯æš—é»™çš„ãªå‹å¤‰æ›ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚ç•°ãªã‚‹å‹ã‚’æ··åœ¨ã•ã›ã‚‹ã‚ˆã†ãªæ“ä½œã§ã¯ã€æ˜ç¤ºçš„ãªå‹å¤‰æ›ãŒå¿…è¦ã§ã™ã€‚ä¸€æ–¹ã€æ•°å€¤å‹ã®å®šæ•°ã‚’å®£è¨€ã™ã‚‹ã¨ãã«ã¯ã€å‹ã‚’æŒ‡å®šã›ãšã«å®šæ•°ã‚’å®£è¨€ã§ãã¾ã™ã€‚ã“ã®å ´åˆã€å®£è¨€æ™‚ã®æ®µéšã§ã¯ã€æ•°å€¤ã®ä¸Šé™ã¯æœªç¢ºå®šã«ãªã‚Šã¾ã™ã€‚è©³ã—ãã¯<a href="https://yourbasic.org/golang/untyped-constants/" target="_blank" rel="noopener">Untyped numeric constants with no limits</a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</li><li>Goã§ã¯é–¢æ•°ã®ã‚ªãƒ¼ãƒãƒ­ãƒ¼ãƒ‰ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚åŒã˜ã‚¹ã‚³ãƒ¼ãƒ—å†…ã®é–¢æ•°åŠã³ãƒ¡ã‚½ãƒƒãƒ‰ã«ã¯ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªåå‰ã‚’ä»˜ã‘ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä»£æ›¿æ‰‹æ®µã¨ã—ã¦ã¯<a href="https://yourbasic.org/golang/overload-overwrite-optional-parameter/" target="_blank" rel="noopener">Optional parameters and method overloading</a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</li><li>Goã«ã¯çµ„ã¿è¾¼ã¿ã®ã‚¹ãƒ©ã‚¤ã‚¹ã‚„ãƒãƒƒãƒ—ã¨ã„ã£ãŸã‚¸ã‚§ãƒãƒªã‚¯ã‚¹åŠã³ã€<code>append</code> ã‚„ <code>copy</code> ã¨ã„ã£ãŸã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ç”¨é–¢æ•°ãŒã‚ã‚Šã¾ã™ã€‚ã—ã‹ã—ã€ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ç”¨é–¢æ•°ã‚’ç‹¬è‡ªå®Ÿè£…ã§ãã‚‹æ©Ÿæ§‹ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ä»£æ›¿æ‰‹æ®µã¨ã—ã¦ã¯ã€<a href="https://yourbasic.org/golang/generics/" target="_blank" rel="noopener">Generics (alternatives and workarounds)</a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</li></ul><h2 id="ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ï¼ˆæ–‡æ³•ï¼‰"><a href="#ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ï¼ˆæ–‡æ³•ï¼‰" class="headerlink" title="ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ï¼ˆæ–‡æ³•ï¼‰"></a>ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ï¼ˆæ–‡æ³•ï¼‰</h2><h3 id="å®£è¨€"><a href="#å®£è¨€" class="headerlink" title="å®£è¨€"></a>å®£è¨€</h3><p>å¤‰æ•°ã®å®£è¨€ã®ä»•æ–¹ã¯ã€Javaã¨æ¯”ã¹ã‚‹ã¨é€†ã«ãªã£ã¦ã„ã¾ã™ã€‚Goã§ã¯å¤‰æ•°åã®å¾Œã‚ã«å‹åã‚’è¨˜è¿°ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã£ã¦Goã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒã€Œå¤‰æ•°Ã—Ã—ã®å‹ã¯â—‹â—‹ã§ã‚ã‚‹ã€ã¨è§£é‡ˆã—ã‚„ã™ããªã‚Šã¾ã™ã€‚</p><table><thead><tr><th align="left">Goã®æ›¸ãæ–¹</th><th align="left">Javaã§ã–ã£ãã‚Šã‚¤ã‚³ãƒ¼ãƒ«ãªæ›¸ãæ–¹</th></tr></thead><tbody><tr><td align="left">var v1 int</td><td align="left">int v1 = 0;</td></tr><tr><td align="left">var v2 *int</td><td align="left">Integer v2 = null;</td></tr><tr><td align="left">var v3 string</td><td align="left">String v3 = â€œâ€;</td></tr><tr><td align="left">var v4 [10]int</td><td align="left">int[] v4 = new int[10];  <br> (Arrays are values in Go.)</td></tr><tr><td align="left">var v5 []int</td><td align="left">int[] v5 = null;</td></tr><tr><td align="left">var v6 *struct{ a int }</td><td align="left">class C { int a; } <br> C v6 = null;</td></tr><tr><td align="left">var v7 map[string]int</td><td align="left">HashMap&lt;String, Integer&gt; v7; <br> v7 = null;</td></tr><tr><td align="left">var v8 func(a int) int</td><td align="left">interface F { <br> &nbsp;&nbsp;&nbsp;&nbsp;int f(int a); <br> } <br> F v8 = null;</td></tr></tbody></table><p>ä¸€èˆ¬çš„ã«ã€å®£è¨€ã§ã¯ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®å¾Œã‚ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ<sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup>ã®åç§°ãŒç¶šãã¾ã™ã€‚ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¨ã¯<code>const</code>ã€<code>type</code>ã€<code>var</code>ã‚„<code>func</code>ãªã©ã§ã™ã€‚ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®å¾Œã‚ã«æ‹¬å¼§ã§ã¾ã¨ã‚ã¦å®£è¨€ã‚’æ›¸ãã“ã¨ã‚‚ã§ãã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> (</span><br><span class="line">    n <span class="keyword">int</span></span><br><span class="line">    x <span class="keyword">float64</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>é–¢æ•°ã‚’å®šç¾©ã™ã‚‹æ™‚ã€å¼•æ•°ã®åå‰ã®ä»˜ã‘æ–¹ã¯çµ±ä¸€ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãã‚Œãã‚Œã®å¼•æ•°ã«åå‰ã‚’ã¤ã‘ã‚‹ã‹ã€ã¾ãŸã¯å…¨ãåå‰ã‚’ã¤ã‘ãªã„ã‹ã§ã™ã€‚ã„ãšã‚Œã‹ã«åå‰ã‚’ã¤ã‘ã€ã„ãšã‚Œã‹ã¯çœç•¥ã™ã‚‹ã¨ã„ã†ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚è¤‡æ•°ã®å¼•æ•°ãŒåŒã˜å‹ã®å ´åˆã€ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã™ã‚‹ã“ã¨ã¯å¯èƒ½ã§ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">(i, j, k <span class="keyword">int</span>, s, t <span class="keyword">string</span>)</span></span></span><br></pre></td></tr></table></figure><p>å¤‰æ•°ã¯å®£è¨€ã®æ™‚ã«åˆæœŸåŒ–ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚åˆæœŸåŒ–ã‚‚è¡Œã†å ´åˆã€å¤‰æ•°ã®å‹ã‚’ç‰¹å®šã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ãŒã€å¿…é ˆã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚å‹ãŒç‰¹å®šã•ã‚Œã¦ã„ãªã„å ´åˆã¯ã€åˆæœŸåŒ–å¼ã®å³è¾ºã®å€¤ã®å‹ãŒè¨­å®šã•ã‚Œã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> v9 = *v2</span><br></pre></td></tr></table></figure><p>ã‚‚ã—ã‚‚å¤‰æ•°ãŒæ˜ç¤ºçš„ã«åˆæœŸåŒ–ã•ã‚Œã¦ã„ãªã„å ´åˆã§ã‚‚ã€å‹ã¯æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®å ´åˆã€åˆæœŸå€¤ã¯æš—é»™çš„ã«<a href="https://yourbasic.org/golang/default-zero-value/" target="_blank" rel="noopener">ã‚¼ãƒ­å€¤</a>ï¼ˆ0ã€<code>nil</code>ã€â€â€ãªã©ï¼‰ãŒä¸ãˆã‚‰ã‚Œã¾ã™ã€‚Goã®ä¸–ç•Œã§ã¯åˆæœŸåŒ–ã•ã‚Œã¦ã„ãªã„å¤‰æ•°ã¯å­˜åœ¨ã—ã¾ã›ã‚“ã€‚</p><h3 id="å®£è¨€ã®çœç•¥å½¢"><a href="#å®£è¨€ã®çœç•¥å½¢" class="headerlink" title="å®£è¨€ã®çœç•¥å½¢"></a>å®£è¨€ã®çœç•¥å½¢</h3><p>é–¢æ•°ã®ä¸­ã§ã¯ã€<code>:=</code>ã§å®£è¨€ã‚’ç°¡ç•¥åŒ–ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚ä¾‹ãˆã°ã“ã®æ–‡ã¯</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v10 := v1</span><br></pre></td></tr></table></figure><p>ä¸‹ã®æ–‡ã¨åŒæ§˜ã®æ„å‘³ã‚’æŒã¡ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> v10 = v1</span><br></pre></td></tr></table></figure><h3 id="é–¢æ•°å‹"><a href="#é–¢æ•°å‹" class="headerlink" title="é–¢æ•°å‹"></a>é–¢æ•°å‹</h3><p>Goã§ã¯ã€é–¢æ•°ã¯ç¬¬ä¸€ç´šã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å±ã—ã¦ã„ã¾ã™ã€‚Goã®ä¸–ç•Œã§ã¯ã€å¼•æ•°ã¨æˆ»ã‚Šå€¤ã®å‹ãŒåŒä¸€ã®é–¢æ•°ã¯å…¨ã¦åŒã˜<a href="https://yourbasic.org/golang/function-pointer-type-declaration/" target="_blank" rel="noopener">é–¢æ•°å‹</a>ã‚’ã—ã¦ã„ã‚‹ã¨ã¿ãªã•ã‚Œã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> binOp <span class="function"><span class="keyword">func</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span> <span class="title">int</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">var</span> <span class="title">op</span> <span class="title">binOp</span></span></span><br><span class="line"><span class="function"><span class="title">add</span> := <span class="title">func</span><span class="params">(i, j <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123; <span class="keyword">return</span> i + j &#125;</span><br><span class="line"></span><br><span class="line">op = add</span><br><span class="line">n = op(<span class="number">100</span>, <span class="number">200</span>)  <span class="comment">// n = 100 + 200</span></span><br></pre></td></tr></table></figure><h3 id="è¤‡æ•°å‰²ã‚Šå½“ã¦"><a href="#è¤‡æ•°å‰²ã‚Šå½“ã¦" class="headerlink" title="è¤‡æ•°å‰²ã‚Šå½“ã¦"></a>è¤‡æ•°å‰²ã‚Šå½“ã¦</h3><p>Goã§ã¯ä»£å…¥ã§è¤‡æ•°ã®å€¤ã‚’å‰²ã‚Šå½“ã¦ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚å³å´ã®å¼ã¯å·¦å´ã®è¢«æ¼”ç®—å­ã«å‰²ã‚Šå½“ã¦ã‚‰ã‚Œã‚‹å‰ã«è©•ä¾¡ã•ã‚Œã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">i, j = j, i  <span class="comment">// iã¨jã‚’ç½®ãæ›ãˆã‚‹</span></span><br></pre></td></tr></table></figure><p>é–¢æ•°ãŒè¤‡æ•°ã®å€¤ã‚’æˆ»ã‚Šå€¤ã¨ã—ã¦è¿”ã™ã“ã¨ã‚‚ã§ãã¾ã™ã€‚ãã®å ´åˆæ‹¬å¼§()ã®ä¸­ã«åˆ—æŒ™ã—ã¦ç¤ºã—ã¾ã™ã€‚æˆ»ã‚Šå€¤ã‚’ä¸€åº¦ã«è¤‡æ•°ã®å¤‰æ•°ã«ä¿å­˜ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">()</span> <span class="params">(i <span class="keyword">int</span>, pj *<span class="keyword">int</span>)</span></span> &#123; ... &#125;</span><br><span class="line">v1, v2 = f()</span><br></pre></td></tr></table></figure><h3 id="ãƒ–ãƒ©ãƒ³ã‚¯è­˜åˆ¥å­"><a href="#ãƒ–ãƒ©ãƒ³ã‚¯è­˜åˆ¥å­" class="headerlink" title="ãƒ–ãƒ©ãƒ³ã‚¯è­˜åˆ¥å­"></a>ãƒ–ãƒ©ãƒ³ã‚¯è­˜åˆ¥å­</h3><p><a href="https://yourbasic.org/golang/underscore/" target="_blank" rel="noopener">ãƒ–ãƒ©ãƒ³ã‚¯è­˜åˆ¥å­</a>ã¯<code>_</code>(ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ï¼‰ã§è¡¨ã•ã‚Œã€è¤‡æ•°ã®æˆ»ã‚Šå€¤ãŒè¿”ã£ã¦ãã‚‹å¼ã§å€¤ã‚’ç„¡è¦–ã—ãŸã„å ´åˆã«ç”¨ã„ã‚‰ã‚Œã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v1, _ = f()  <span class="comment">// f()ã®é–¢æ•°ã‹ã‚‰è¿”ã£ã¦ããŸ2ã¤ç›®ã®å€¤ã‚’ç„¡è¦–ã™ã‚‹</span></span><br></pre></td></tr></table></figure><h3 id="ã‚»ãƒŸã‚³ãƒ­ãƒ³ã¨ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ"><a href="#ã‚»ãƒŸã‚³ãƒ­ãƒ³ã¨ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ" class="headerlink" title="ã‚»ãƒŸã‚³ãƒ­ãƒ³ã¨ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ"></a>ã‚»ãƒŸã‚³ãƒ­ãƒ³ã¨ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ</h3><p>ã‚»ãƒŸã‚³ãƒ­ãƒ³ã‚„ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§æ‚©ã‚€å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã€Œgofmtã€ã‚’ä½¿ãˆã°ã€å”¯ä¸€ã®ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰ã§ã‚ã‚‹Goã®ã‚¹ã‚¿ã‚¤ãƒ«ã«æ•´å½¢ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã®ã‚¹ã‚¿ã‚¤ãƒ«ã¯æœ€åˆã¯é•å’Œæ„Ÿã‚’æ„Ÿã˜ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ä»–ã®ã‚¹ã‚¿ã‚¤ãƒ«ã¨åŒã˜ã‚ˆã†ã«è‰¯ãã€ã¾ãŸæ…£ã‚Œã¦ã—ã¾ãˆã°å¿«é©ãªã‚‚ã®ã¨ãªã‚‹ã§ã—ã‚‡ã†ã€‚</p><p>å®Ÿéš›ã€ã‚»ãƒŸã‚³ãƒ­ãƒ³ã‚’ä½¿ã†æ©Ÿä¼šã¯Goã§ã¯ã‚ã£ãŸã«ã‚ã‚Šã¾ã›ã‚“ã€‚ç†è«–ä¸Šã€Goã®å…¨ã¦ã®å®£è¨€ã¯ã‚»ãƒŸã‚³ãƒ­ãƒ³ã§çµ‚ã‚ã‚Šã¾ã™ã€‚ã—ã‹ã—Goã¯ã€è¡ŒãŒæ˜ã‚‰ã‹ã«å‡¦ç†é€”ä¸­ã®ã‚‚ã®ã§ãªã„é™ã‚Šã€ç©ºç™½ã§ãªã„è¡Œã®çµ‚ã‚ã‚Šã«æš—é»™çš„ã«ã‚»ãƒŸã‚³ãƒ­ãƒ³ã‚’æŒ¿å…¥ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã£ã¦ã€å ´åˆã«ã‚ˆã£ã¦ã¯æ”¹è¡ŒãŒè¨±ã•ã‚Œãªã„ã‚±ãƒ¼ã‚¹ã‚‚ã§ã¦ãã‚‹ã®ã§ã™ã€‚ä¾‹ãˆã°ã€ä¸‹ã®ã‚ˆã†ãªæ›¸ãæ–¹ã¯è¨±ã•ã‚Œã¾ã›ã‚“ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">g</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;            <span class="comment">// ä¸æ­£: "&#123;" ã¯å‰ã®è¡Œã«å­˜åœ¨ã™ã¹ãã§ã‚ã‚‹</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã“ã®å ´åˆã€<code>g()</code> ã®ã™ãã‚ã¨ã«ã‚»ãƒŸã‚³ãƒ­ãƒ³ãŒæŒ¿å…¥ã•ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚ãã®çµæœã€é–¢æ•°ã‚’å®šç¾©ã—ã¦ã„ã‚‹ã®ã§ã¯ãªãé–¢æ•°ã‚’å®£è¨€ã—ã¦ã„ã‚‹ã¨ã¿ãªã•ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚åŒæ§˜ã«ã€ä¸‹ã®ã‚ˆã†ãªæ›¸ãæ–¹ã‚‚ã§ãã¾ã›ã‚“ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> n == <span class="number">0</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;       <span class="comment">// ä¸æ­£: "else &#123;" ã¯å‰ã®è¡Œã«å­˜åœ¨ã™ã¹ãã§ã‚ã‚‹</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã“ã®å ´åˆã€<code>else</code>ã®å‰ã®<code>}</code>ã®ç›´å¾Œã«ã‚»ãƒŸã‚³ãƒ­ãƒ³ãŒæŒ¿å…¥ã•ã‚Œã¦ã—ã¾ã„ã€çµæœã¨ã—ã¦æ–‡æ³•ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚</p><h3 id="ifæ–‡ï¼ˆæ¡ä»¶æ–‡ï¼‰"><a href="#ifæ–‡ï¼ˆæ¡ä»¶æ–‡ï¼‰" class="headerlink" title="ifæ–‡ï¼ˆæ¡ä»¶æ–‡ï¼‰"></a>ifæ–‡ï¼ˆæ¡ä»¶æ–‡ï¼‰</h3><p>Goã§ã¯ifæ–‡ã€foræ–‡ã®æ¡ä»¶å¼ã€switchæ–‡ã®å€¤ã‚’æ‹¬å¼§()ã§å›²ã¿ã¾ã›ã‚“ã€‚ä¸€æ–¹ã€ifæ–‡ã‚„foræ–‡ã®ãƒœãƒ‡ã‚£ã¯ä¸­æ‹¬å¼§{}ã§å›²ã‚€å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> a &lt; b &#123; f() &#125;</span><br><span class="line"><span class="keyword">if</span> (a &lt; b) &#123; f() &#125;          <span class="comment">// æ‹¬å¼§ã¯ä¸è¦</span></span><br><span class="line"><span class="keyword">if</span> (a &lt; b) f()              <span class="comment">// ä¸æ­£</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;&#125; <span class="comment">// ä¸æ­£</span></span><br></pre></td></tr></table></figure><p>ã•ã‚‰ã«ã€ifæ–‡ã‚„switchæ–‡ã§ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ãªåˆæœŸåŒ–å¼ã‚’è¨˜è¿°ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚å¤šãã®å ´åˆã“ã‚Œã¯ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°ã‚’è¨­å®šã™ã‚‹ã¨ãã«ç”¨ã„ã‚‰ã‚Œã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> err := file.Chmod(<span class="number">0664</span>); err != <span class="literal">nil</span> &#123;</span><br><span class="line">    log.Print(err)</span><br><span class="line">    <span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Foræ–‡"><a href="#Foræ–‡" class="headerlink" title="Foræ–‡"></a>Foræ–‡</h3><p>Goã«ã¯whileæ–‡ã‚‚do-whileæ–‡ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚foræ–‡ã‚’å˜ä¸€ã®æ¡ä»¶ã¨ä¸€ç·’ã«ç”¨ã„ã‚‹ã“ã¨ãŒã§ãã€ã“ã‚ŒãŒwhileæ–‡ã¨åŒæ§˜ã®å‹•ãã«ãªã‚Šã¾ã™ã€‚æ¡ä»¶ã‚’å®Œå…¨ã«çœç•¥ã™ã‚‹ã¨ç„¡é™ãƒ«ãƒ¼ãƒ—æ–‡ã¨ãªã‚Šã¾ã™ã€‚</p><p><a href="https://yourbasic.org/golang/for-loop/" target="_blank" rel="noopener">foræ–‡</a>ã¯æ–‡å­—åˆ—ï¼ˆ<code>string</code>ï¼‰ã€é…åˆ—ï¼ˆ<code>array</code>ï¼‰ã€ã‚¹ãƒ©ã‚¤ã‚¹ï¼ˆ<code>slice</code>ï¼‰ã€ãƒãƒƒãƒ—ï¼ˆ<code>map</code>ï¼‰ã‚„ãƒãƒ£ãƒãƒ«ï¼ˆ<code>channel</code>ï¼‰ã‚’ <code>range</code> å¥ã«æŒ‡å®šã§ãã¾ã™ã€‚é€šå¸¸ã§ã‚ã‚Œã°ä¸‹ã®ã‚ˆã†ã«æ›¸ãã¾ã™ãŒã€</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(a); i++ &#123; ... &#125;</span><br></pre></td></tr></table></figure><p><code>a</code>ã®å„è¦ç´ ã«å¯¾ã—ã¦ç¹°ã‚Šè¿”ã—ã¦å‡¦ç†ã‚’ã—ãŸã„å ´åˆã€ä¸‹ã®ã‚ˆã†ã«æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i, v := <span class="keyword">range</span> a &#123; ... &#125;</span><br></pre></td></tr></table></figure><p>ä¸Šã®æ›¸ãæ–¹ã§ã¯ã€<code>i</code>ã«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚Œã€<code>v</code>ã«é…åˆ—ã‚„ã‚¹ãƒ©ã‚¤ã‚¹ã€æ–‡å­—åˆ—ãªã©ã®è¦ç´ ã®é€£ç¶šã™ã‚‹å€¤ãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚Œã¾ã™ã€‚</p><ul><li>æ–‡å­—åˆ—ã®å ´åˆã¯ã€<code>i</code>ã¯ãƒã‚¤ãƒˆã”ã¨ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¨ãªã‚Šã€<code>v</code>ã¯<code>rune</code>å‹ã®Unicodeã®ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆ<sup id="fnref:4"><a href="#fn:4" rel="footnote">4</a></sup>ã¨ãªã‚Šã¾ã™ï¼ˆ<code>rune</code>ã¯<code>int32</code>ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã§ã™ï¼‰ã€‚</li><li>mapã§ã®ç¹°ã‚Šè¿”ã—ã¯ã‚­ãƒ¼ãƒ»ãƒãƒªãƒ¥ãƒ¼ã®ãƒšã‚¢ã®åå¾©å€¤ã‚’ç”Ÿæˆã—ã¾ã™ãŒã€ãƒãƒ£ãƒãƒ«ã¯åå¾©å€¤ã‚’ï¼‘ã¤ã ã‘ç”Ÿæˆã—ã¾ã™ã€‚</li></ul><h3 id="Breakã¨Continue"><a href="#Breakã¨Continue" class="headerlink" title="Breakã¨Continue"></a>Breakã¨Continue</h3><p>Javaã¨åŒã˜ã‚ˆã†ã«ã€Goã§ã‚‚<code>break</code>ã¨<code>continue</code>ã§ãƒ©ãƒ™ãƒ«ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ãŒã€foræ–‡ã€switchæ–‡ã€selectæ–‡ã®ä¸­ã§ãƒ©ãƒ™ãƒ«ã‚’å‚ç…§ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><h3 id="Switchæ–‡"><a href="#Switchæ–‡" class="headerlink" title="Switchæ–‡"></a>Switchæ–‡</h3><p>Goã®<a href="https://yourbasic.org/golang/switch-statement/" target="_blank" rel="noopener">switchæ–‡</a>ã§ã¯ã€<code>break</code>ã‚’æ›¸ã‹ãªãã¦ã‚‚ã€<code>switch</code> ã‹ã‚‰æŠœã‘å‡ºã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã®æœ€å¾Œã«<code>fallthrough</code>æ–‡ã‚’ç½®ãã“ã¨ã§ã€æ¬¡ã® <code>case</code>ã«å‡¦ç†ã‚’å›ã™ã“ã¨ãŒã§ãã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> n &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">0</span>: <span class="comment">// caseã®ä¸­èº«ã¯ç©ºã§ã‚ã‚‹</span></span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">    f() <span class="comment">// n == 0ã®ã¨ãf()ã¯å‘¼ã°ã‚Œãªã„</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã—ã‹ã—ã€<code>case</code>ã¯è¤‡æ•°ã®å€¤ã‚’æŒã¤ã“ã¨ãŒã§ãã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> n &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">0</span>, <span class="number">1</span>:</span><br><span class="line">    f() <span class="comment">// n == 0 ã¾ãŸã¯ n == 1ã®ã¨ãf()ãŒå‘¼ã°ã‚Œã‚‹</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>case</code>ã®ä¸­ã®å€¤ã¯ã€ä¾‹ãˆã°æ–‡å­—åˆ—ã‚„ãƒã‚¤ãƒ³ã‚¿ãªã©ã€ç­‰ä¾¡æ¯”è¼ƒæ¼”ç®—å­ã§æ‰±ã†ã“ã¨ã®ã§ãã‚‹ã©ã‚“ãªå‹ã§ã‚‚ä½¿ãˆã¾ã™ã€‚switchå¼ãŒãªã„å ´åˆã€ãã®å¼ã¯<code>true</code>ã¨ã¿ãªã•ã‚Œã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> &#123;</span><br><span class="line"><span class="keyword">case</span> n &lt; <span class="number">0</span>:</span><br><span class="line">    f1()</span><br><span class="line"><span class="keyword">case</span> n == <span class="number">0</span>:</span><br><span class="line">    f2()</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    f3()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã¨ãƒ‡ã‚¯ãƒªãƒ¡ãƒ³ãƒˆ"><a href="#ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã¨ãƒ‡ã‚¯ãƒªãƒ¡ãƒ³ãƒˆ" class="headerlink" title="ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã¨ãƒ‡ã‚¯ãƒªãƒ¡ãƒ³ãƒˆ"></a>ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã¨ãƒ‡ã‚¯ãƒªãƒ¡ãƒ³ãƒˆ</h3><p><code>++</code>ã¨<code>--</code>ã¯å¾Œç½®æ¼”ç®—å­ã¨ã—ã¦æ–‡ã®ä¸­ã§ã®ã¿ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚å¼ã®ä¸­ã§æ‰±ã†ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚ä¾‹ãˆã°ã€<code>n = i++</code>ã¨æ›¸ãã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚</p><h3 id="Deferæ–‡"><a href="#Deferæ–‡" class="headerlink" title="Deferæ–‡"></a>Deferæ–‡</h3><p><a href="https://yourbasic.org/golang/defer/" target="_blank" rel="noopener">deferæ–‡</a>ã‚’ä½¿ã†ã“ã¨ã§ã€å‘¼ã³å‡ºã—å…ƒã®é–¢æ•°ãŒreturnã•ã‚ŒãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å®Ÿè¡Œã•ã‚Œã‚‹ã¹ãå‡¦ç†ã‚’è¨˜è¿°ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><ul><li>deferå®£è¨€ã•ã‚ŒãŸé–¢æ•°ã¯ã€å‘¼ã³å‡ºã—å…ƒã®é–¢æ•°ãŒã©ã®ã‚ˆã†ã«retrunã•ã‚ŒãŸã‹ã«é–¢ã‚ã‚‰ãšå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚<sup id="fnref:5"><a href="#fn:5" rel="footnote">5</a></sup></li></ul><ul><li>deferå®£è¨€ã•ã‚ŒãŸé–¢æ•°ã®å¼•æ•°ã¯ã€deferå®£è¨€ã•ã‚ŒãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§è¨ˆç®—ã•ã‚Œã€å®Ÿè¡Œæ™‚ã«ä½¿ç”¨ã•ã‚Œã‚‹ã¾ã§ä¿å­˜ã•ã‚Œã¾ã™ã€‚<sup id="fnref:6"><a href="#fn:6" rel="footnote">6</a></sup></li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">f, err := os.Open(<span class="string">"filename"</span>)</span><br><span class="line"><span class="keyword">defer</span> f.Close() <span class="comment">// fã¯ã“ã®é–¢æ•°ãŒreturnã•ã‚ŒãŸã¨ãã«çµ‚äº†ã™ã‚‹</span></span><br></pre></td></tr></table></figure><h2 id="å®šæ•°"><a href="#å®šæ•°" class="headerlink" title="å®šæ•°"></a>å®šæ•°</h2><p>Goã®å®šæ•°ã¯<a href="https://yourbasic.org/golang/untyped-constants/" target="_blank" rel="noopener">untypedãªçŠ¶æ…‹</a>ã«ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™<sup id="fnref:7"><a href="#fn:7" rel="footnote">7</a></sup>ã€‚ã“ã®ãƒ«ãƒ¼ãƒ«ã¯ä¸‹è¨˜ã«é©ç”¨ã•ã‚Œã¾ã™ã€‚</p><ul><li>æ•°å€¤ãƒªãƒ†ãƒ©ãƒ«ã€</li><li>å‹ãªã—ã®å®šæ•°ã®ã¿ã‚’ç”¨ã„ã¦ã„ã‚‹å¼ã€</li><li>å‹ãŒä¸ãˆã‚‰ã‚Œã¦ã„ãªã„ã€ã‚‚ã—ãã¯åˆæœŸåŒ–å¼ãŒå‹ãªã—ã§ã‚ã‚‹constå¼</li></ul><p>å‹ãªã—ã®å®šæ•°ã®å€¤ã¯ã€å‹ã®ã‚ã‚‹å€¤ãŒå¿…è¦ã«ãªã£ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å‹å®šç¾©ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€Goã§ã¯æ˜ç¤ºçš„ãªå‹å¤‰æ›ãŒè¡Œã‚ã‚Œãªã„ã«ã‚‚é–¢ã‚ã‚‰ãšã€å®šæ•°ã‚’æ¯”è¼ƒçš„è‡ªç”±ã«æ‰±ã†ã“ã¨ãŒã§ãã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a <span class="keyword">uint</span></span><br><span class="line">f(a + <span class="number">1</span>)   <span class="comment">// å‹ã®å®šç¾©ã•ã‚Œã¦ã„ãªã„æ•°å€¤1ã¯uintã¨ã—ã¦å‹å®šç¾©ã•ã‚Œã‚‹</span></span><br><span class="line">f(a + <span class="number">1e3</span>) <span class="comment">// 1e3ã‚‚uintã¨ã—ã¦å®šç¾©ã•ã‚Œã‚‹</span></span><br></pre></td></tr></table></figure><p>Goè¨€èªã§ã¯å‹å®šç¾©ã®ãªã„æ•°å€¤ã®å®šæ•°ã«ä¸Šé™å€¤ã¯æ˜ç¢ºã«ã•ã‚Œã¾ã›ã‚“ã€‚å‹ãŒå¿…è¦ã«ãªã£ãŸã¨ãã«ã®ã¿ä¸Šé™ã¯é©ç”¨ã•ã‚Œã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> huge = <span class="number">1</span> &lt;&lt; <span class="number">100</span></span><br><span class="line"><span class="keyword">var</span> n <span class="keyword">int</span> = huge &gt;&gt; <span class="number">98</span></span><br></pre></td></tr></table></figure><p>ã‚‚ã—ã‚‚å¤‰æ•°å®£è¨€ã«ãŠã„ã¦å‹ãŒå®šç¾©ã•ã‚Œã¦ãŠã‚‰ãšã€å¯¾å¿œã™ã‚‹å¼ãŒå‹ã®ãªã„æ•°å€¤ã®å®šæ•°ã ã£ãŸå ´åˆã€ãã®æ•°å€¤ã¯ã€å€¤ãŒæ–‡å­—åˆ—ãªã®ã‹integerãªã®ã‹æµ®å‹•å°æ•°ç‚¹ãªã®ã‹è¤‡ç´ å®šæ•°ãªã®ã‹ã«ã‚ˆã£ã¦<code>rune</code>ã€<code>int</code>ã€<code>float64</code>ã‹<code>complex128</code>ã®å‹ã«ãã‚Œãã‚Œå¤‰æ›ã•ã‚Œã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">c := <span class="string">'Ã¥'</span>    <span class="comment">// rune (int32ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹)</span></span><br><span class="line">n := <span class="number">1</span> + <span class="number">2</span>  <span class="comment">// int</span></span><br><span class="line">x := <span class="number">2.7</span>    <span class="comment">// float64</span></span><br><span class="line">z := <span class="number">1</span> + <span class="number">2i</span> <span class="comment">// complex128</span></span><br></pre></td></tr></table></figure><p>Goã§ã¯åˆ—æŒ™å‹ã‚’æ‰±ã„ã¾ã›ã‚“ã€‚ãã®ä»£ã‚ã‚Šã«ã€é€£ç¶šã—ã¦å¢—ãˆç¶šã‘ã‚‹å€¤ã‚’å”¯ä¸€constå®£è¨€ã™ã‚‹ã“ã¨ãŒã§ãã‚‹<code>iota</code>ã¨ã„ã†ç‰¹åˆ¥ãªåç§°ã‚’ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚constã®åˆæœŸåŒ–å¼ãŒçœç•¥ã•ã‚ŒãŸæ™‚ã¯ã€å…ˆã«å®šç¾©ã•ã‚ŒãŸå¼ãŒå†åˆ©ç”¨ã•ã‚Œã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    red = <span class="literal">iota</span> <span class="comment">// red == 0</span></span><br><span class="line">    blue       <span class="comment">// blue == 1</span></span><br><span class="line">    green      <span class="comment">// green == 2</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><h2 id="æ§‹é€ ä½“"><a href="#æ§‹é€ ä½“" class="headerlink" title="æ§‹é€ ä½“"></a>æ§‹é€ ä½“</h2><p><a href="https://yourbasic.org/golang/structs-explained/" target="_blank" rel="noopener">æ§‹é€ ä½“</a>ã¯Javaã§ã„ã†ã‚¯ãƒ©ã‚¹ã®ã‚ˆã†ãªã‚‚ã®ã§ã™ãŒã€æ§‹é€ ä½“ã®ãƒ¡ãƒ³ãƒã«ã¯ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å«ã‚ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚æ§‹é€ ä½“ã¯å¤‰æ•°ã®ã¿ã§æ§‹æˆã•ã‚Œã¾ã™ã€‚æ§‹é€ ä½“ã®ãƒã‚¤ãƒ³ã‚¿ã¯ã€Javaã§ã„ã†å‚ç…§å¤‰æ•°ã®ã‚ˆã†ãªã‚‚ã®ã§ã™ã€‚Javaã®ã‚¯ãƒ©ã‚¹ã¨ã¯å¯¾ç…§çš„ã«ã€Goã®æ§‹é€ ä½“ã¯ç›´æ¥ã®å€¤ã¨ã—ã¦å®šç¾©ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚ã©ã¡ã‚‰ã®å ´åˆã§ã‚‚ã€æ§‹é€ ä½“ã®ãƒ¡ãƒ³ãƒã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã«ã¯<code>.</code>ã‚’ç”¨ã„ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> MyStruct <span class="keyword">struct</span> &#123;</span><br><span class="line">    s <span class="keyword">string</span></span><br><span class="line">    n <span class="keyword">int64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> x MyStruct     <span class="comment">// x ã¯ MyStruct&#123;"", 0&#125; ã«åˆæœŸåŒ–ã•ã‚Œã‚‹</span></span><br><span class="line"><span class="keyword">var</span> px *MyStruct   <span class="comment">// px ã¯ nil ã«åˆæœŸåŒ–ã•ã‚Œã‚‹</span></span><br><span class="line">px = <span class="built_in">new</span>(MyStruct) <span class="comment">// px ã¯æ–°ãŸã«ä½œã‚‰ã‚Œã‚‹ MyStruct&#123;"", 0&#125; ã®ãƒã‚¤ãƒ³ã‚¿ã¨ãªã‚‹</span></span><br><span class="line"></span><br><span class="line">x.s = <span class="string">"Foo"</span></span><br><span class="line">px.s = <span class="string">"Bar"</span></span><br></pre></td></tr></table></figure><p>Goã§ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©å‹ã«å¯¾ã—ã¦ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã¯æ§‹é€ ä½“ã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©å‹ã«é™ã£ãŸè©±ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚è©³ã—ãã¯<a href="https://yourbasic.org/golang/go-java-tutorial/#methods-and-interfaces" target="_blank" rel="noopener">ãƒ¡ã‚½ãƒƒãƒ‰ã¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹</a>ã‚’ã”å‚ç…§ãã ã•ã„ã€‚</p><h2 id="ãƒã‚¤ãƒ³ã‚¿"><a href="#ãƒã‚¤ãƒ³ã‚¿" class="headerlink" title="ãƒã‚¤ãƒ³ã‚¿"></a>ãƒã‚¤ãƒ³ã‚¿</h2><p>int, struct, arrayã®ä»£å…¥æ“ä½œã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå®Ÿä½“ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚Javaã§ã„ã†å‚ç…§å¤‰æ•°ã‚’Goã§å®Ÿç¾ã™ã‚‹ãŸã‚ã«ã¯<a href="https://yourbasic.org/golang/pointers-explained/" target="_blank" rel="noopener">ãƒã‚¤ãƒ³ã‚¿</a>ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</p><p>ä»»æ„ã®å‹Tã«ã¯ã€å¯¾å¿œã™ã‚‹ãƒã‚¤ãƒ³ã‚¿å‹ <code>*T</code> ãŒã‚ã‚Šã€å‹Tã®å€¤ã¸ã®ãƒã‚¤ãƒ³ã‚¿ã‚’ç¤ºã—ã¾ã™ã€‚</p><p>ãƒã‚¤ãƒ³ã‚¿å¤‰æ•°ãŒå‚ç…§ã™ã‚‹ãƒ¡ãƒ¢ãƒªé ˜åŸŸã‚’å‰²ã‚Šå½“ã¦ã‚‹ã«ã¯ã€çµ„ã¿è¾¼ã¿é–¢æ•° <code>new</code> ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ã“ã‚Œã¯ã€å‹ã‚’å¼•æ•°ã¨ã—ã¦å—ã‘å–ã‚Šã€å‰²ã‚Šå½“ã¦ã‚‰ã‚ŒãŸã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¸ã®ãƒã‚¤ãƒ³ã‚¿ã‚’è¿”ã™é–¢æ•°ã§ã™ã€‚å‰²ã‚Šå½“ã¦ã‚‰ã‚ŒãŸã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸é ˜åŸŸã¯ã€ãã®å‹ã«å¯¾å¿œã™ã‚‹ã‚¼ãƒ­å€¤ã§åˆæœŸåŒ–ã•ã‚Œã¾ã™ã€‚ä¾‹ãˆã°ã€<code>new(int)</code> ã¯intç”¨ã«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®å‰²ã‚Šå½“ã¦ã‚’æ–°è¦ã§è¡Œã„ã€ãã®é ˜åŸŸã‚’å€¤0ã§åˆæœŸåŒ–ã—ã€ãã—ã¦ <code>*int</code> å‹ã‚’æŒã¤ãã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’è¿”ã—ã¾ã™ã€‚</p><p><code>T p = new T()</code> ã¨ã„ã†Javaã‚³ãƒ¼ãƒ‰ã‚’Goã‚³ãƒ¼ãƒ‰ã«ç½®ãæ›ãˆã¦ã¿ã¾ã—ã‚‡ã†ã€‚<code>T</code> ã¯ï¼’ã¤ã® <code>int</code> å‹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’æŒã¤ã‚¯ãƒ©ã‚¹ã ã¨ã—ã¾ã™ã€‚ã“ã‚Œã«å¯¾å¿œã™ã‚‹Goã‚³ãƒ¼ãƒ‰ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> T <span class="keyword">struct</span> &#123; a, b <span class="keyword">int</span> &#125;</span><br><span class="line"><span class="keyword">var</span> p *T = <span class="built_in">new</span>(T)</span><br></pre></td></tr></table></figure><p>ã‚ˆã‚Šæ…£ç”¨çš„ã«ã¯æ¬¡ã®ã‚ˆã†ã«æ›¸ãã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p := <span class="built_in">new</span>(T)</span><br></pre></td></tr></table></figure><p> <code>var v T</code> ã¯å‹Tã®å€¤ã‚’ä¿æŒã™ã‚‹ãŸã‚ã®å¤‰æ•°ã‚’å®£è¨€ã—ã¦ã„ã¾ã™ãŒã€ã“ã†ã„ã£ãŸå®£è¨€æ–¹æ³•ã¯Javaã«ã¯å­˜åœ¨ã—ã¾ã›ã‚“ã€‚<br>è¤‡åˆãƒªãƒ†ãƒ©ãƒ«ã‚’ä½¿ç”¨ã—ã¦å€¤ã‚’åˆæœŸåŒ–ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚ä¾‹ãˆã°ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v := T&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br></pre></td></tr></table></figure><p>ã“ã‚Œã¯ä»¥ä¸‹ã¨åŒã˜ã§ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> v T</span><br><span class="line">v.a = <span class="number">1</span></span><br><span class="line">v.b = <span class="number">2</span></span><br></pre></td></tr></table></figure><p>å‹Tã®å¤‰æ•°xã®å ´åˆã€ã‚¢ãƒ‰ãƒ¬ã‚¹æ¼”ç®—å­ <code>ï¼†x</code> ã¯xã®ã‚¢ãƒ‰ãƒ¬ã‚¹(<code>*T</code> å‹ã®å€¤)ã‚’æä¾›ã—ã¾ã™ã€‚ä¾‹ãˆã°ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p := &amp;T&#123;<span class="number">1</span>, <span class="number">2</span>&#125; <span class="comment">// pã¯å‹ *Tã‚’æŒã¤</span></span><br></pre></td></tr></table></figure><p>å¤‰æ•°xãŒãƒã‚¤ãƒ³ã‚¿å‹å¤‰æ•°ã®å ´åˆã€ãƒã‚¤ãƒ³ã‚¿ã®é–“æ¥å‚ç…§ <code>*x</code>ã¯ã€xãŒæŒ‡ã™å€¤ã‚’ç¤ºã—ã¾ã™ã€‚ãƒã‚¤ãƒ³ã‚¿ã®é–“æ¥æŒ‡å®šã¯ã»ã¨ã‚“ã©ä½¿ç”¨ã•ã‚Œã¾ã›ã‚“ã€‚Goã¯Javaã¨åŒæ§˜ã«ã€å¤‰æ•°ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’è‡ªå‹•çš„ã«å–å¾—ã§ãã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p := <span class="built_in">new</span>(T)</span><br><span class="line">p.a = <span class="number">1</span> <span class="comment">// (*p).a = 1 ã«ç­‰ã—ã„</span></span><br></pre></td></tr></table></figure><h2 id="ã‚¹ãƒ©ã‚¤ã‚¹"><a href="#ã‚¹ãƒ©ã‚¤ã‚¹" class="headerlink" title="ã‚¹ãƒ©ã‚¤ã‚¹"></a>ã‚¹ãƒ©ã‚¤ã‚¹</h2><p><a href="https://yourbasic.org/golang/slices-explained/" target="_blank" rel="noopener">ã‚¹ãƒ©ã‚¤ã‚¹</a>ã¯æ¦‚å¿µçš„ã«ã¯ä¸‹è¨˜ã®3ã¤ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ã‚‚ã¤æ§‹é€ ä½“ã§ã™ã€‚</p><ul><li>é…åˆ—ã«å¯¾ã™ã‚‹ãƒã‚¤ãƒ³ã‚¿</li><li>é•·ã•</li><li>å®¹é‡</li></ul><p>ã‚¹ãƒ©ã‚¤ã‚¹ã§ã¯<code>[]</code>æ¼”ç®—å­ã‚’ä½¿ã£ã¦ã‚¹ãƒ©ã‚¤ã‚¹å†…éƒ¨ã®é…åˆ—ã®è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚</p><ul><li>çµ„ã¿è¾¼ã¿é–¢æ•°ã§ã‚ã‚‹<code>len</code>é–¢æ•°ã¯ã‚¹ãƒ©ã‚¤ã‚¹ã®é•·ã•(<code>length</code>)ã‚’è¿”ã—ã¾ã™ã€‚</li><li>çµ„ã¿è¾¼ã¿é–¢æ•°ã§ã‚ã‚‹<code>cap</code>é–¢æ•°ã¯ã‚¹ãƒ©ã‚¤ã‚¹ã®å®¹é‡(<code>capacity</code>)ã‚’è¿”ã—ã¾ã™ã€‚</li></ul><p>ã‚ã‚‹é…åˆ—ã‚„ã‚¹ãƒ©ã‚¤ã‚¹(ä¾‹ãˆã°<code>a</code>)ã‹ã‚‰æ–°è¦ã®ã‚¹ãƒ©ã‚¤ã‚¹ã‚’ç”Ÿæˆã™ã‚‹å ´åˆã€<code>a[i:j]</code>ã®å½¢ã§ç”Ÿæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã®<code>a[i:j]</code>ã¯</p><ul><li>ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹<code>i</code>ã‹ã‚‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹<code>j</code>ã®æ‰‹å‰ã¾ã§ã®<code>a</code>ã‚’å‚ç…§ã—ãŸã‚¹ãƒ©ã‚¤ã‚¹ã«ãªã‚Šã¾ã™ã€‚</li><li><code>j-i</code>ã®é•·ã•ã‚’æŒã£ã¦ã„ã¾ã™ã€‚</li><li><code>i</code>ãŒçœç•¥ã•ã‚Œã¦ã„ãŸå ´åˆã€ã‚¹ãƒ©ã‚¤ã‚¹ã¯0ã‚’èµ·ç‚¹ã¨ã—ã¾ã™ã€‚</li><li><code>j</code>ãŒçœç•¥ã•ã‚ŒãŸå ´åˆã€ã‚¹ãƒ©ã‚¤ã‚¹ã¯aã®é•·ã•ï¼ˆlen(a)ï¼‰ã¾ã§ã®é•·ã•ã¨ãªã‚Šã¾ã™ã€‚</li></ul><p>æ–°ã—ãã§ããŸã‚¹ãƒ©ã‚¤ã‚¹ã¯<code>a</code>ãŒå‚ç…§ã—ã¦ã„ã‚‹ã‚‚ã®ã¨åŒä¸€ã®é…åˆ—ã‚’å‚ç…§ã—ã¾ã™ã€‚ã¤ã¾ã‚Šã€æ–°ã—ã„ã‚¹ãƒ©ã‚¤ã‚¹ã§è¦ç´ ãŒå¤‰æ›´ã•ã‚ŒãŸå ´åˆã€<code>a</code>ã®è¦ç´ ã‚‚åŒã˜ã‚ˆã†ã«å¤‰æ›´ã•ã‚Œã¾ã™<sup id="fnref:8"><a href="#fn:8" rel="footnote">8</a></sup>ã€‚</p><p>æ–°ã—ã„ã‚¹ãƒ©ã‚¤ã‚¹ã®å®¹é‡ã¯ã€ç´”ç²‹ã«<code>a</code>ã‹ã‚‰<code>i</code>ã‚’å¼•ã„ãŸå·®åˆ†ã¨ãªã‚Šã¾ã™ã€‚é…åˆ—ã®å®¹é‡ã¨é…åˆ—ã®é•·ã•ã¯ã‚¤ã‚³ãƒ¼ãƒ«ã§ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s []<span class="keyword">int</span></span><br><span class="line"><span class="keyword">var</span> a [<span class="number">10</span>]<span class="keyword">int</span></span><br><span class="line"></span><br><span class="line">s = a[:] <span class="comment">// s = a[0:len(a)]ã®çŸ­ç¸®å½¢</span></span><br></pre></td></tr></table></figure><p>ã‚‚ã—ã€<code>[100]byte</code>å‹ã®å€¤ï¼ˆ<code>byte</code>100å€‹åˆ†ã®é…åˆ—ã€ä¾‹ãˆã°ãƒãƒƒãƒ•ã‚¡ï¼‰ã‚’ä½œã‚Šã€é–¢æ•°ã«å‚ç…§æ¸¡ã—ã‚’ã—ãŸã„ã®ã§ã‚ã‚Œã°ã€<code>[]byte</code>å‹ã®å¼•æ•°ã‚’æŒã¤é–¢æ•°ã‚’å®£è¨€ã—ã€é…åˆ—ã‚’ã‚¹ãƒ©ã‚¤ã‚¹ã«å¤‰ãˆã¦ã€ãã®å¼•æ•°ã«æ¸¡ã—ã¦ã‚ã’ã‚‹ã®ãŒè‰¯ã„ã§ã—ã‚‡ã†<sup id="fnref:9"><a href="#fn:9" rel="footnote">9</a></sup>ã€‚ã‚¹ãƒ©ã‚¤ã‚¹ã¯ã€<a href="https://yourbasic.org/golang/go-java-tutorial/#making-values" target="_blank" rel="noopener">ä¸‹è¨˜</a>ã«æ›¸ã„ã¦ã‚ã‚‹ã‚ˆã†ãª<code>make</code>é–¢æ•°ã§ã‚‚ä½œã‚Šå‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>ã‚¹ãƒ©ã‚¤ã‚¹ã«ã¯çµ„ã¿è¾¼ã¿é–¢æ•°<code>append</code>ãŒå‚™ãˆä»˜ã‘ã‚‰ã‚Œã¦ãŠã‚Šã€Javaã®<code>ArrayList</code>ã¨ã»ã¼åŒæ§˜ã®æ©Ÿèƒ½ã‚’æŒã£ã¦ã„ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">s0 := []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">s1 := <span class="built_in">append</span>(s0, <span class="number">3</span>)     <span class="comment">// è¦ç´ ã‚’1ã¤è¿½åŠ ã™ã‚‹</span></span><br><span class="line">s2 := <span class="built_in">append</span>(s1, <span class="number">4</span>, <span class="number">5</span>)  <span class="comment">// è¦ç´ ã‚’è¤‡æ•°è¿½åŠ ã™ã‚‹</span></span><br><span class="line">s3 := <span class="built_in">append</span>(s2, s0...) <span class="comment">// ã‚¹ãƒ©ã‚¤ã‚¹ã‚’1ã¤è¿½åŠ ã™ã‚‹</span></span><br></pre></td></tr></table></figure><p>ã‚¹ãƒ©ã‚¤ã‚¹æ§‹æ–‡ã¯æ–‡å­—åˆ—ã¨ä¸€ç·’ã«ä½¿ã†ã“ã¨ã‚‚ã§ãã¾ã™ã€‚æ–‡å­—åˆ—ã®ã‚¹ãƒ©ã‚¤ã‚¹ã¯ã€ã‚ªãƒªã‚¸ãƒŠãƒ«ã®æ–‡å­—åˆ—ã®éƒ¨åˆ†æ–‡å­—åˆ—ã‚’è¿”ã—ã¾ã™ã€‚</p><h2 id="å€¤ã®ä½œæˆ"><a href="#å€¤ã®ä½œæˆ" class="headerlink" title="å€¤ã®ä½œæˆ"></a>å€¤ã®ä½œæˆ</h2><p>Mapã‚„ãƒãƒ£ãƒãƒ«ã®å€¤ã¯ã€çµ„ã¿è¾¼ã¿é–¢æ•°ã§ã‚ã‚‹<code>make</code>é–¢æ•°ã«ã‚ˆã£ã¦å‰²ã‚Šå½“ã¦ã‚‰ã‚Œã¦ã„ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚ä¾‹ãˆã°ã€</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</span><br></pre></td></tr></table></figure><p>ã‚’ã‚³ãƒ¼ãƒ«ã™ã‚‹ã¨ã€æ–°ã—ã<code>map[string]int</code>å‹ã§å‰²ã‚Šå½“ã¦ã‚‰ã‚ŒãŸå€¤ãŒè¿”ã£ã¦ãã¾ã™ã€‚</p><p><code>new</code>ã¨ã¯å¯¾ç…§çš„ã«ã€<code>make</code>ã¯ã‚¢ãƒ‰ãƒ¬ã‚¹ã§ã¯ãªãã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãã®ã‚‚ã®ãŒè¿”ã£ã¦ãã¾ã™ã€‚ã“ã‚Œã¯Mapã‚„ãƒãƒ£ãƒãƒ«ãŒå‚ç…§å‹ã§ã‚ã‚‹ã¨ã„ã†äº‹å®Ÿã«ä¸€è‡´ã—ã¦ã„ã¾ã™ã€‚</p><p>Mapã®å ´åˆã€<code>make</code>ã§ã¯ç¬¬2ã‚ªãƒ—ã‚·ãƒ§ãƒ³å¼•æ•°ã«å®¹é‡ãƒ’ãƒ³ãƒˆã‚’æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>ãƒãƒ£ãƒãƒ«ã®å ´åˆã¯ã€ç¬¬2ã‚ªãƒ—ã‚·ãƒ§ãƒ³å¼•æ•°ã¯ãƒãƒ£ãƒãƒ«ã®ãƒãƒƒãƒ•ã‚¡ã®å®¹é‡ã¨ãªã‚Šã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯<code>0</code>ã§ã™ã€‚ï¼ˆãƒãƒƒãƒ•ã‚¡ãŒãªã„çŠ¶æ…‹ï¼‰</p><p><code>make</code>é–¢æ•°ã¯ã‚¹ãƒ©ã‚¤ã‚¹ã‚’å‰²ã‚Šå½“ã¦ã‚‹å ´åˆã«ã‚‚ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ã“ã®å ´åˆ<code>make</code>é–¢æ•°ã¯ã€ã‚¹ãƒ©ã‚¤ã‚¹ã®ã‚‚ã¨ã«ãªã‚‹é…åˆ—ã«ãƒ¡ãƒ¢ãƒªã‚’å‰²ã‚Šå½“ã¦ã€ãã‚Œã‚’å‚ç…§ã™ã‚‹ã‚¹ãƒ©ã‚¤ã‚¹ã‚’è¿”ã—ã¾ã™ã€‚å¿…é ˆã®å¼•æ•°ã¨ã—ã¦ã€ã‚¹ãƒ©ã‚¤ã‚¹ã®è¦ç´ æ•°ã‚’æ¸¡ã•ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚ç¬¬2ã‚ªãƒ—ã‚·ãƒ§ãƒ³å¼•æ•°ã§ã‚¹ãƒ©ã‚¤ã‚¹ã®å®¹é‡ã‚’æŒ‡å®šã§ãã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">m := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">10</span>, <span class="number">20</span>) <span class="comment">// new([20]int)[:10]ã¨åŒæ„</span></span><br></pre></td></tr></table></figure><h2 id="ãƒ¡ã‚½ãƒƒãƒ‰ã¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹"><a href="#ãƒ¡ã‚½ãƒƒãƒ‰ã¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹" class="headerlink" title="ãƒ¡ã‚½ãƒƒãƒ‰ã¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹"></a>ãƒ¡ã‚½ãƒƒãƒ‰ã¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹</h2><p>ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚’æŒã£ã¦ã„ã‚‹ã“ã¨ã‚’é™¤ã„ã¦ã€é€šå¸¸ã®é–¢æ•°å®šç¾©ã®ã‚ˆã†ãªè¦‹ãŸç›®ã‚’ã—ã¦ã„ã¾ã™ã€‚ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã¯ã€Javaã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰ã®thiså‚ç…§ã«ä¼¼ã¦ã„ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> MyType <span class="keyword">struct</span> &#123; i <span class="keyword">int</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *MyType)</span> <span class="title">Get</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> p.i</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> pm = <span class="built_in">new</span>(MyType)</span><br><span class="line"><span class="keyword">var</span> n = pm.Get()</span><br></pre></td></tr></table></figure><p>ä¸Šè¨˜ã®ä¾‹ã§ã¯ã€ <code>MyType</code> ã«é–¢é€£ä»˜ã‘ã‚‰ã‚ŒãŸ <code>Get</code> ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®£è¨€ã—ã¦ã„ã¾ã™ã€‚ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã®ä¸­ã§ã€ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã¯pã¨ã„ã†åå‰ã‚’ä»˜ã‘ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚</p><p>ãƒ¡ã‚½ãƒƒãƒ‰ã¯å®šç¾©æ¸ˆã¿ã®å‹ã«å¯¾ã—ã¦å®£è¨€ã•ã‚Œã¾ã™ã€‚ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ã‚’åˆ¥ã®å‹ã«å¤‰æ›ã™ã‚‹ã¨ã€å¤‰æ›å¾Œã®æ–°ã—ã„å¤‰æ•°ã¯å¤‰æ›å‰ã®å‹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã§ã¯ãªãã€å¤‰æ›å¾Œã®å‹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æŒã¤ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><p>çµ„ã¿è¾¼ã¿å‹ã‹ã‚‰æ´¾ç”Ÿã—ãŸæ–°ã—ã„å‹ã‚’å®£è¨€ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€çµ„ã¿è¾¼ã¿å‹ã«ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©ã§ãã¾ã™ã€‚ãã®æ–°ã—ã„å‹ã¯ã€ã‚‚ã¨ã®çµ„ã¿è¾¼ã¿å‹ã¨ã¯å…¨ãåˆ¥ã®ã‚‚ã®ã¨ãªã‚Šã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> MyInt <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p MyInt)</span> <span class="title">Get</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">int</span>(p) <span class="comment">// intã¸ã®å¤‰æ›ã¯å¿…é ˆ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">(i <span class="keyword">int</span>)</span></span> &#123;&#125;</span><br><span class="line"><span class="keyword">var</span> v MyInt</span><br><span class="line"></span><br><span class="line">v = v * v <span class="comment">// æ´¾ç”Ÿå…ƒã®æ¼”ç®—å­ã¯å¼•ãç¶šãä½¿ç”¨ã§ãã‚‹</span></span><br><span class="line">f(<span class="keyword">int</span>(v)) <span class="comment">// int(v) ã«ã¯å®£è¨€ã•ã‚ŒãŸãƒ¡ã‚½ãƒƒãƒ‰ãŒãªã„</span></span><br><span class="line">f(v)      <span class="comment">// INVALID</span></span><br></pre></td></tr></table></figure><h3 id="ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹"><a href="#ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹" class="headerlink" title="ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹"></a>ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹</h3><p>Go<a href="https://yourbasic.org/golang/interfaces-explained/" target="_blank" rel="noopener">ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹</a>ã¯Javaã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«ä¼¼ã¦ã„ã¾ã™ãŒã€Goã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®å ´åˆã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŒè¦æ±‚ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ç¾¤ã‚’æä¾›ã—ã¦ã„ã‚‹å‹ã¯ã¿ãªã€ãã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®å®Ÿè£…ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™ã€‚æ˜ç¤ºçš„ãªå®£è¨€ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚</p><p>ä»¥ä¸‹ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã¨ã—ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> MyInterface <span class="keyword">interface</span> &#123;</span><br><span class="line">    Get() <span class="keyword">int</span></span><br><span class="line">    Set(i <span class="keyword">int</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>MyType</code> ã¯ã™ã§ã« <code>Get</code> ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æŒã£ã¦ã„ã‚‹ã®ã§ã€ <code>Set</code> ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€ <code>MyType</code> ãŒ <code>MyInterface</code> ã‚’æº€ãŸã™ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *MyType)</span> <span class="title">Set</span><span class="params">(i <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    p.i = i</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>MyInterface</code> ã‚’å¼•æ•°ã«ã‚‚ã¤é–¢æ•°ã¯çš†ã€ <code>*MyType</code> å‹ã®å¤‰æ•°ã‚’å—ã‘å®¹ã‚Œã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GetAndSet</span><span class="params">(x MyInterface)</span></span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f1</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> p MyType</span><br><span class="line">    GetAndSet(&amp;p)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Javaã®ç”¨èªã‚’ä½¿ã†ã¨ã™ã‚‹ã¨ã€ <code>*MyType</code> ã® <code>Set</code> ãŠã‚ˆã³ <code>Get</code> ã‚’å®šç¾©ã™ã‚‹ã¨ã€ <code>*MyType</code> ãŒè‡ªå‹•çš„ã« <code>MyInterface</code> ã‚’ <code>implement</code> ã—ã¾ã™ã€‚<br>å‹ã¯è¤‡æ•°ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æº€ãŸã™ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã¯ãƒ€ãƒƒã‚¯ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã®ä¸€ç¨®ã§ã™ã€‚</p><blockquote><p>ã‚¢ãƒ’ãƒ«ã®ã‚ˆã†ã«æ­©ãã€ã‚¢ãƒ’ãƒ«ã®ã‚ˆã†ã«æ³³ãã€ã‚¢ãƒ’ãƒ«ã®ã‚ˆã†ã«é³´ãé³¥ã‚’è¦‹ã‚‹ã¨ãã€ç§ã¯ãã®é³¥ã‚’ã‚¢ãƒ’ãƒ«ã¨å‘¼ã¶ã€‚<br>â€“ James Whitcomb Riley</p></blockquote><h3 id="åŸ‹ã‚è¾¼ã¿ï¼ˆå§”è­²ï¼‰"><a href="#åŸ‹ã‚è¾¼ã¿ï¼ˆå§”è­²ï¼‰" class="headerlink" title="åŸ‹ã‚è¾¼ã¿ï¼ˆå§”è­²ï¼‰"></a>åŸ‹ã‚è¾¼ã¿ï¼ˆå§”è­²ï¼‰</h3><p>å‹ã‚’åŒ¿åãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨ã—ã¦åŸ‹ã‚è¾¼ã‚€ã“ã¨ã§ã€æ´¾ç”Ÿå‹ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> MySubType <span class="keyword">struct</span> &#123;</span><br><span class="line">    MyType</span><br><span class="line">    j <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *MySubType)</span> <span class="title">Get</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    p.j++</span><br><span class="line">    <span class="keyword">return</span> p.MyType.Get()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>äº‹å®Ÿä¸Šã€MySubTypeãŒMyTypeã®æ´¾ç”Ÿå‹ã¨ã—ã¦å®Ÿè£…ã•ã‚Œã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f2</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> p MySubType</span><br><span class="line">    GetAndSet(&amp;p)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>Set</code> ãƒ¡ã‚½ãƒƒãƒ‰ã¯ <code>MyType</code> å‹ã‹ã‚‰ç¶™æ‰¿ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã¯åŒ¿åãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒã€æ´¾ç”Ÿå‹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¸ã¨æ˜‡æ ¼ã•ã‚Œã‚‹ãŸã‚ã§ã™ã€‚</p><p>ã“ã®å ´åˆã€ <code>MySubType</code> ã«ã¯ <code>MyType</code> å‹ã®åŒ¿åãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒã‚ã‚‹ãŸã‚ã€ <code>MyType</code> ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ <code>MySubType</code> ã®ãƒ¡ã‚½ãƒƒãƒ‰ã«ãªã‚Šã¾ã™ã€‚<code>Get</code> ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã•ã‚Œã€ <code>Set</code> ãƒ¡ã‚½ãƒƒãƒ‰ã¯ç¶™æ‰¿ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p>ã“ã‚Œã¯Javaã®ã‚¯ãƒ©ã‚¹ç¶™æ‰¿ã¨åŒã˜ã§ã¯ãªãã€å§”è­²ã¨ã„ã†æ–¹å¼ã‚’ã¨ã£ã¦ã„ã¾ã™ã€‚åŒ¿åãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒå‘¼ã³å‡ºã•ã‚ŒãŸã¨ãã€ãã®ãƒ¡ã‚½ãƒƒãƒ‰ã®ãƒ¬ã‚·ãƒ¼ãƒã¯ã€æ´¾ç”Ÿå‹(<code>MySubType</code>)ã®æ–¹ã§ã¯ãªãã€å†…åŒ…ã™ã‚‹åŒ¿åãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰(<code>MyType</code>)ã«ãªã‚Šã¾ã™ã€‚ã¤ã¾ã‚Šã€åŒ¿åãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯å‹•çš„ã«æ´¾ç”Ÿå‹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¨ã—ã¦ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒã•ã‚Œã¾ã›ã‚“ã€‚Javaã®å‹•çš„ãƒ¡ã‚½ãƒƒãƒ‰ãƒ«ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã«ç›¸å½“ã™ã‚‹ã‚‚ã®ãŒå¿…è¦ãªå ´åˆã€<code>interface</code> ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f3</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> v MyInterface</span><br><span class="line"></span><br><span class="line">    v = <span class="built_in">new</span>(MyType)</span><br><span class="line">    v.Get() <span class="comment">// *MyTypeã®Getãƒ¡ã‚½ãƒƒãƒ‰ã‚’ã‚³ãƒ¼ãƒ«ã—ã¦ã„ã‚‹</span></span><br><span class="line"></span><br><span class="line">    v = <span class="built_in">new</span>(MySubType)</span><br><span class="line">    v.Get() <span class="comment">// *MySubTypeã®Getãƒ¡ã‚½ãƒƒãƒ‰ã‚’ã‚³ãƒ¼ãƒ«ã—ã¦ã„ã‚‹</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³"><a href="#å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³" class="headerlink" title="å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³"></a>å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³</h3><p>ã‚ã‚‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å‹ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹å¤‰æ•°ã¯ã€<a href="https://yourbasic.org/golang/type-assertion-switch/" target="_blank" rel="noopener">å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³</a>ã‚’ä½¿ç”¨ã—ã¦ã€ç•°ãªã‚‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å‹ã‚’æŒã¤ã‚ˆã†ã«å¤‰æ›ã§ãã¾ã™ã€‚ã“ã‚Œã¯å®Ÿè¡Œæ™‚ã«å‹•çš„ã«å¤‰æ›ã•ã‚Œã¾ã™ã€‚Javaã¨ã¯ç•°ãªã‚Šã€2ã¤ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹é–“ã®é–¢ä¿‚ã‚’å®£è¨€ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Printer <span class="keyword">interface</span> &#123;</span><br><span class="line">    Print()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f4</span><span class="params">(x MyInterface)</span></span> &#123;</span><br><span class="line">    x.(Printer).Print() <span class="comment">// Printerã¸ã®å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>Printer</code> ã¸ã®å¤‰æ›ã¯å‹•çš„ã«è¡Œã‚ã‚Œã¾ã™ã€‚xãŒ <code>Print</code> ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©ã—ã¦ã„ã‚‹é™ã‚Šæ©Ÿèƒ½ã—ã¾ã™ã€‚</p><h2 id="ã‚¨ãƒ©ãƒ¼"><a href="#ã‚¨ãƒ©ãƒ¼" class="headerlink" title="ã‚¨ãƒ©ãƒ¼"></a>ã‚¨ãƒ©ãƒ¼</h2><p>Javaã§ã¯é€šå¸¸ä¾‹å¤–ã‚’ä½¿ç”¨ã™ã‚‹ã‚±ãƒ¼ã‚¹ã§ã‚‚ã€Goã§ã¯2ã¤ã®ç•°ãªã‚‹ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ãŒã‚ã‚Šã¾ã™ã€‚</p><ul><li>å¤§æŠµã®é–¢æ•°ã§ã¯ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã—ã¾ã™ã€‚</li><li>æœ¬å½“ã«ãƒªã‚«ãƒãƒ¼ã§ããªã„çŠ¶æ³ã®ã¨ãã€ä¾‹ãˆã°ç¯„å›²å¤–ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã ã£ãŸå ´åˆãªã©ã«ã®ã¿ã€å®Ÿè¡Œæ™‚ã®ä¾‹å¤–ã‚’ç”Ÿã¿å‡ºã—ã¾ã™ã€‚</li></ul><p>Goã§ã¯è¤‡æ•°ã®å€¤ã‚’è¿”ã™ã“ã¨ãŒã§ãã¾ã™ãŒã€ãã‚Œã«ã‚ˆã£ã¦é€šå¸¸ã®æˆ»ã‚Šå€¤ã«åŠ ãˆã€è©³ç´°ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿”ã™ã“ã¨ãŒç°¡å˜ã«ã§ãã¾ã™ã€‚æ…£ä¾‹çš„ã«ã€ãã®ã‚ˆã†ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã¯ã€ã‚·ãƒ³ãƒ—ãƒ«ãªçµ„ã¿è¾¼ã¿ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§ã‚ã‚‹errorå‹ãŒå­˜åœ¨ã—ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> error <span class="keyword">interface</span> &#123;</span><br><span class="line">    Error() <span class="keyword">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¾‹ãˆã°<code>os.Open</code>é–¢æ•°ã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã“ã¨ãŒã§ããªã‹ã£ãŸå ´åˆã€<code>nil</code>ã§ãªã„ã‚¨ãƒ©ãƒ¼å€¤ã‚’è¿”ã—ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Open</span><span class="params">(name <span class="keyword">string</span>)</span> <span class="params">(file *File, err error)</span></span></span><br></pre></td></tr></table></figure><p>ä¸‹è¨˜ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ããŸã‚ã«<code>os.Open</code>é–¢æ•°ã‚’ç”¨ã„ã¦ã„ã¾ã™ã€‚ã‚¨ãƒ©ãƒ¼ãŒç”Ÿã˜ãŸå ´åˆã¯ã€ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ãƒ­ã‚°ã«å‡ºåŠ›ã—ã¦å‡¦ç†ã‚’ä¸­æ–­ã™ã‚‹<code>log.Fatal</code>é–¢æ•°ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">f, err := os.Open(<span class="string">"filename.ext"</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ã‚ªãƒ¼ãƒ—ãƒ³ã•ã‚ŒãŸ*Fileå‹ã®fã‚’ä½¿ã£ãŸä½•ã‚‰ã‹ã®å‡¦ç†ã‚’è¡Œã†</span></span><br></pre></td></tr></table></figure><p>ã‚¨ãƒ©ãƒ¼ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¯<code>Error</code>ã®ãƒ¡ã‚½ãƒƒãƒ‰ã®ã¿å¿…è¦ã¨ã—ã¾ã™ãŒã€ç‰¹å®šã®ã‚¨ãƒ©ãƒ¼ã¨ãªã‚‹ã¨ã—ã°ã—ã°ãã®ä»–ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚‚æŒã£ã¦ã„ã¾ã™ã€‚ãã‚Œã«ã‚ˆã£ã¦ã€å‘¼ã³å‡ºã—å´ãŒã‚¨ãƒ©ãƒ¼ã®è©³ç´°ã‚’æ¤œçŸ¥ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><h2 id="Panicã¨Recover"><a href="#Panicã¨Recover" class="headerlink" title="Panicã¨Recover"></a>Panicã¨Recover</h2><p><a href="https://yourbasic.org/golang/recover-from-panic/" target="_blank" rel="noopener">panic</a>ã¯ã€ã‚´ãƒ«ãƒ¼ãƒãƒ³ã®ã‚¹ã‚¿ãƒƒã‚¯ã‚’å·»ãæˆ»ã—ã€é€”ä¸­ã§deferå®£è¨€ã•ã‚ŒãŸé–¢æ•°ã‚’å®Ÿè¡Œã—ã¦ã‹ã‚‰ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’åœæ­¢ã™ã‚‹ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚¨ãƒ©ãƒ¼ã§ã™ã€‚</p><p>panicã¯Javaã®ä¾‹å¤–å‡¦ç†(exceptions)ã«ä¼¼ã¦ã„ã¾ã™ãŒã€ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚¨ãƒ©ãƒ¼ã®ã¿ã‚’å¯¾è±¡ã¨ã—ã¦ã„ã¾ã™ã€‚ä¾‹ãˆã°ã€<code>nil</code> ãƒã‚¤ãƒ³ã‚¿ã‚’å‚ç…§ã—ã‚ˆã†ã¨ã—ãŸã¨ãã‚„ã€é…åˆ—ã®ç¯„å›²å¤–é ˜åŸŸã«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã—ã‚ˆã†ã¨ã—ãŸã¨ãã«panicãŒç™ºç”Ÿã—ã¾ã™ã€‚EOFãªã©ã‚¨ãƒ©ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¡¨ç¾ã™ã‚‹ãŸã‚ã«ã€Goãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯<a href="https://qiita.com/wagi0716/private/37c8fa3398717a4d6b3b#%E3%82%A8%E3%83%A9%E3%83%BC" target="_blank" rel="noopener">ä¸Šè¨˜</a>ã® <code>error</code> ã¨ã„ã†çµ„ã¿è¾¼ã¿å‹ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</p><p>çµ„ã¿è¾¼ã¿é–¢æ•°<a href="https://yourbasic.org/golang/recover-from-panic/" target="_blank" rel="noopener">recover</a>ã‚’ä½¿ç”¨ã—ã¦ã€panicçŠ¶æ…‹ã®ã‚´ãƒ«ãƒ¼ãƒãƒ³ã®åˆ¶å¾¡ã‚’å–ã‚Šæˆ»ã—ã€é€šå¸¸ã®å®Ÿè¡Œã‚’å†é–‹ã§ãã¾ã™ã€‚</p><ul><li><code>recover</code> ã‚’å‘¼ã³å‡ºã™ã¨ã‚¹ã‚¿ãƒƒã‚¯ã®å·»ãæˆ»ã—ãŒåœæ­¢ã—ã¾ã™ã€‚<code>recover</code> ã¯ <code>panic</code> ã«æ¸¡ã—ãŸå¼•æ•°ã‚’è¿”ã—ã¾ã™ã€‚</li></ul><p>å·»ãæˆ»ã—ä¸­ã«å®Ÿè¡Œã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰ã¯deferå®£è¨€ã•ã‚ŒãŸé–¢æ•°å†…ã®ã‚³ãƒ¼ãƒ‰ã®ã¿ã§ã‚ã‚‹ãŸã‚ã€<code>recover</code> ã¯deferå®£è¨€ã•ã‚ŒãŸé–¢æ•°å†…ã§ã®ã¿æœ‰ç”¨ã§ã™ã€‚ã‚´ãƒ«ãƒ¼ãƒãƒ³ãŒãƒ‘ãƒ‹ãƒƒã‚¯ã«ãªã£ã¦ã„ãªã„å ´åˆã€<code>recover</code> ã¯ <code>nil</code> ã‚’è¿”ã—ã¾ã™ã€‚</p><h2 id="ã‚´ãƒ«ãƒ¼ãƒãƒ³ã¨ãƒãƒ£ãƒãƒ«"><a href="#ã‚´ãƒ«ãƒ¼ãƒãƒ³ã¨ãƒãƒ£ãƒãƒ«" class="headerlink" title="ã‚´ãƒ«ãƒ¼ãƒãƒ³ã¨ãƒãƒ£ãƒãƒ«"></a>ã‚´ãƒ«ãƒ¼ãƒãƒ³ã¨ãƒãƒ£ãƒãƒ«</h2><h3 id="ã‚´ãƒ«ãƒ¼ãƒãƒ³"><a href="#ã‚´ãƒ«ãƒ¼ãƒãƒ³" class="headerlink" title="ã‚´ãƒ«ãƒ¼ãƒãƒ³"></a>ã‚´ãƒ«ãƒ¼ãƒãƒ³</h3><p>Goã§ã¯ã€<code>go</code> æ–‡ã‚’ä½¿ç”¨ã—ã¦ã€æ–°ãŸãªã‚¹ãƒ¬ãƒƒãƒ‰(ã‚´ãƒ«ãƒ¼ãƒãƒ³)ã‚’ç«‹ã¡ä¸Šã’ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚<code>go</code> æ–‡ã«ç¶šãé–¢æ•°ã¯æ–°ã—ãä½œæˆã•ã‚ŒãŸ<a href="https://yourbasic.org/golang/goroutines-explained/" target="_blank" rel="noopener">ã‚´ãƒ«ãƒ¼ãƒãƒ³</a>ä¸Šã§å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚ 1ã¤ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ å†…ã®ã™ã¹ã¦ã®ã‚´ãƒ«ãƒ¼ãƒãƒ³ã¯ã€åŒã˜ã‚¢ãƒ‰ãƒ¬ã‚¹ç©ºé–“ã‚’å…±æœ‰ã—ã¾ã™ã€‚</p><p>ã‚´ãƒ«ãƒ¼ãƒãƒ³ã¯è»½é‡ã§ã‚ã‚Šã€ã‚¹ã‚¿ãƒƒã‚¯é ˜åŸŸå‰²ã‚Šå½“ã¦ç¨‹åº¦ã®ã‚³ã‚¹ãƒˆã—ã‹ã‹ã‹ã‚Šã¾ã›ã‚“ã€‚ã¯ã˜ã‚ã¯ã‚¹ã‚¿ãƒƒã‚¯ã®å‰²ã‚Šå½“ã¦ã‚’å°ã•ãæŠ‘ãˆã€å¿…è¦ã«å¿œã˜ã¦ãƒ’ãƒ¼ãƒ—ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¸ã®å‰²ã‚Šå½“ã¦ã¨è§£æ”¾ã‚’è¡Œã„ãªãŒã‚‰å¤§ããã—ã¦ã„ãã¾ã™ã€‚å†…éƒ¨çš„ã«ã‚´ãƒ«ãƒ¼ãƒãƒ³ã¯ã€è¤‡æ•°ã®ã‚ªãƒšãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã‚¹ãƒ¬ãƒƒãƒ‰é–“ã§å¤šé‡åŒ–ã•ã‚Œã‚‹ã‚³ãƒ«ãƒ¼ãƒãƒ³ã®ã‚ˆã†ã«æ©Ÿèƒ½ã—ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">go</span> list.Sort() <span class="comment">// list.Sort()ã¯ãƒ‘ãƒ©ãƒ¬ãƒ«ã«å®Ÿè¡Œã•ã‚Œã‚‹</span></span><br></pre></td></tr></table></figure><p>Goã«ã¯é–¢æ•°ãƒªãƒ†ãƒ©ãƒ«ãŒã‚ã‚Šã¾ã™ã€‚é–¢æ•°ãƒªãƒ†ãƒ©ãƒ«ã¯<a href="https://yourbasic.org/golang/anonymous-function-literal-lambda-closure/" target="_blank" rel="noopener">ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ£ãƒ¼</a>ã¨ã—ã¦æ©Ÿèƒ½ã—ã€ <code>go</code> æ–‡ã¨çµ„ã¿åˆã‚ã›ã‚‹ã¨å¼·åŠ›ã«ãªã‚Šã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// delayã§æŒ‡å®šã—ãŸæ™‚é–“ãŒç«‹ã¤ã¨ã€Publishé–¢æ•°ã¯æ¨™æº–å‡ºåŠ›ã«textã‚’æ›¸ãå‡ºã™</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Publish</span><span class="params">(text <span class="keyword">string</span>, delay time.Duration)</span></span> &#123;</span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        time.Sleep(delay)</span><br><span class="line">        fmt.Println(text)</span><br><span class="line">    &#125;() <span class="comment">// æ‹¬å¼§ã‚’ã¤ã‘ã¦ãã ã•ã„ã€‚goå¥ç›´å¾Œã®é–¢æ•°ã¯ã‚³ãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¤‰æ•° <code>text</code> ãŠã‚ˆã³ <code>delay</code> ã¯ã€<code>Publish</code> é–¢æ•°ã¨ãã®å†…éƒ¨ã®é–¢æ•°ãƒªãƒ†ãƒ©ãƒ«ã®é–“ã§å…±æœ‰ã•ã‚Œã¾ã™ã€‚</p><h3 id="ãƒãƒ£ãƒãƒ«"><a href="#ãƒãƒ£ãƒãƒ«" class="headerlink" title="ãƒãƒ£ãƒãƒ«"></a>ãƒãƒ£ãƒãƒ«</h3><p><a href="https://yourbasic.org/golang/channels-explained/" target="_blank" rel="noopener">ãƒãƒ£ãƒãƒ«</a>ã¯ã€2ã¤ã®ã‚´ãƒ«ãƒ¼ãƒãƒ³ã®å‡¦ç†ã‚’åŒæœŸã•ã›ãŸã‚Šã€é€šä¿¡ã•ã›ãŸã‚Šã™ã‚‹ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã‚’æä¾›ã—ã¾ã™ã€‚ <code>&lt;-</code> æ¼”ç®—å­ã¯ã€ãƒãƒ£ãƒãƒ«ã®æ–¹å‘(é€ä¿¡ã¾ãŸã¯å—ä¿¡)ã‚’æŒ‡å®šã—ã¾ã™ã€‚æ–¹å‘ãŒæŒ‡å®šã•ã‚Œã¦ã„ãªã„å ´åˆã€ãã®ãƒãƒ£ãƒãƒ«ã¯é€å—ä¿¡å¯èƒ½ã§ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">chan</span> Sushi     <span class="comment">// Sushiå‹ã®å€¤ã‚’é€å—ä¿¡ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã§ãã‚‹</span></span><br><span class="line"><span class="keyword">chan</span>&lt;- <span class="keyword">float64</span> <span class="comment">// float64å‹ã‚’é€ä¿¡ã™ã‚‹ãŸã‚ã«ã®ã¿ä½¿ç”¨ã§ãã‚‹</span></span><br><span class="line">&lt;-<span class="keyword">chan</span> <span class="keyword">int</span>     <span class="comment">// intå‹ã‚’å—ä¿¡ã™ã‚‹ãŸã‚ã«ã®ã¿ä½¿ç”¨ã§ãã‚‹</span></span><br></pre></td></tr></table></figure><p>ãƒãƒ£ãƒãƒ«ã¯å‚ç…§å‹ã§ã‚ã‚Šã€<code>make</code> ã§ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ic := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>)       <span class="comment">// ãƒãƒƒãƒ•ã‚¡ã‚’æŒãŸãªã„intå‹ã®ãƒãƒ£ãƒãƒ«</span></span><br><span class="line">wc := <span class="built_in">make</span>(<span class="keyword">chan</span> *Work, <span class="number">10</span>) <span class="comment">// ãƒãƒƒãƒ•ã‚¡ã‚’æŒã¤*Workå‹ã®ãƒãƒ£ãƒãƒ«</span></span><br></pre></td></tr></table></figure><p>ãƒãƒ£ãƒãƒ«ã«å€¤ã‚’é€ä¿¡ã™ã‚‹ã«ã¯ã€<code>&lt;-</code> ã‚’äºŒé …æ¼”ç®—å­ã®ã‚ˆã†ã«ä½¿ç”¨ã—ã¾ã™ã€‚ãƒãƒ£ãƒãƒ«ã‹ã‚‰å€¤ã‚’å—ä¿¡ã™ã‚‹ã«ã¯ã€<code>&lt;-</code> ã‚’å˜é …æ¼”ç®—å­ã®ã‚ˆã†ã«ä½¿ç”¨ã—ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ic &lt;- <span class="number">3</span>      <span class="comment">// ãƒãƒ£ãƒãƒ«ã«3ã‚’é€ä¿¡ã™ã‚‹</span></span><br><span class="line">work := &lt;-wc <span class="comment">// ãƒãƒ£ãƒãƒ«ã‹ã‚‰*Workã‚’å—ä¿¡ã™ã‚‹</span></span><br></pre></td></tr></table></figure><ul><li>ãƒãƒ£ãƒãƒ«ãŒãƒãƒƒãƒ•ã‚¡ã‚’æŒãŸãªã„å ´åˆã€å—ä¿¡ãƒãƒ£ãƒãƒ«ã‹ã‚‰å€¤ã‚’å–ã‚Šå‡ºã™ã¾ã§ã®é–“ã€é€ä¿¡ãƒãƒ£ãƒãƒ«ã¯å‡¦ç†ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã—ã¾ã™ã€‚</li><li>ãƒãƒ£ãƒãƒ«ãŒãƒãƒƒãƒ•ã‚¡ã‚’æŒã¤å ´åˆã€é€ä¿¡ãƒãƒ£ãƒãƒ«ã‹ã‚‰æ¸¡ã•ã‚Œã‚‹å€¤ãŒãƒãƒƒãƒ•ã‚¡ã«æ›¸ãè¾¼ã¾ã‚Œã‚‹ä½™åœ°ãŒã‚ã‚‹ã¨ãã¯å‡¦ç†ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã›ã‚“ã€‚é€†ã«ã€ãƒãƒƒãƒ•ã‚¡ãŒã„ã£ã±ã„ã«ãªã£ã¦ã„ã‚‹ã¨ãã¯ã€å—ä¿¡ãƒãƒ£ãƒãƒ«ã‹ã‚‰å€¤ã‚’å–ã‚Šå‡ºã™ã¾ã§ã€é€ä¿¡ãƒãƒ£ãƒãƒ«ã¯å‡¦ç†ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã—ã¾ã™ã€‚</li><li>å—ä¿¡ãƒãƒ£ãƒãƒ«ã¯å–ã‚Šå‡ºã›ã‚‹å€¤ãŒå­˜åœ¨ã™ã‚‹ã¾ã§ã®é–“ã€å‡¦ç†ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã—ã¾ã™ã€‚</li></ul><p><code>close</code> é–¢æ•°ã¯ã“ã‚Œä»¥ä¸Šãƒãƒ£ãƒãƒ«ã«å€¤ã‚’é€ä¿¡ã§ããªã„ã‚ˆã†ã«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><ul><li><code>close</code> é–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚ŒãŸã¨ã—ã¾ã™ã€‚<code>close</code> é–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹ã¾ã§ã®é–“ã«ã™ã§ã«ãƒãƒ£ãƒãƒ«ã«é€ä¿¡ã•ã‚ŒãŸå€¤ã¯å•é¡Œãªãå—ä¿¡ãƒãƒ£ãƒãƒ«ã‹ã‚‰å–ã‚Šå‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚ãã®å¾Œã®å—ä¿¡å‡¦ç†ã§ã¯ãƒ–ãƒ­ãƒƒã‚¯ã¯ç™ºç”Ÿã•ã‚Œãšã€ã‚¼ãƒ­å€¤ã‚’è¿”ã—ã¾ã™ã€‚</li><li>å—ä¿¡ãƒãƒ£ãƒãƒ«ã‹ã‚‰ã¯å€¤ã®ä»–ã«ã€ãƒãƒ£ãƒãƒ«ãŒé–‰ã˜ã¦ã„ã‚‹ã‹ã©ã†ã‹ã®æŒ‡æ¨™ã‚’å–ã‚Šå‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>)</span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">    ch &lt;- <span class="string">"Hello!"</span></span><br><span class="line">    <span class="built_in">close</span>(ch)</span><br><span class="line">&#125;()</span><br><span class="line">fmt.Println(&lt;-ch) <span class="comment">// "Hello!"ãŒè¡¨ç¤ºã•ã‚Œã‚‹</span></span><br><span class="line">fmt.Println(&lt;-ch) <span class="comment">// ã“ã“ã§ã¯ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œãšã€stringå‹ã®ã‚¼ãƒ­å€¤ã§ã‚ã‚‹""ãŒè¡¨ç¤ºã•ã‚Œã‚‹</span></span><br><span class="line">fmt.Println(&lt;-ch) <span class="comment">// ã‚‚ã†ä¸€åº¦""ãŒè¡¨ç¤ºã•ã‚Œã‚‹</span></span><br><span class="line">v, ok := &lt;-ch     <span class="comment">// vã¯"", okã¯falseã®å€¤ã‚’ã¨ã‚‹</span></span><br></pre></td></tr></table></figure><p>æ¬¡ã®ä¾‹ã§ã¯ <code>Publish</code> é–¢æ•°ãŒãƒãƒ£ãƒãƒ«ã‚’è¿”ã™ã‚ˆã†ã«ã—ã¾ã™ã€‚ <code>text</code> ãŒç™ºè¡Œã•ã‚ŒãŸã¨ãã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã™ã‚‹ãŸã‚ã«ã“ã®ãƒãƒ£ãƒãƒ«ãŒä½¿ã‚ã‚Œã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// delayã§æŒ‡å®šã—ãŸæ™‚é–“ãŒçµŒéã—ãŸã®ã¡ã€Publishé–¢æ•°ã¯textã‚’æ¨™æº–å‡ºåŠ›ã«æ›¸ãå‡ºã™</span></span><br><span class="line"><span class="comment">// textãŒè¡¨ç¤ºã•ã‚ŒãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§waitãƒãƒ£ãƒãƒ«ã‚’ã‚¯ãƒ­ãƒ¼ã‚ºã™ã‚‹</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Publish</span><span class="params">(text <span class="keyword">string</span>, delay time.Duration)</span> <span class="params">(wait &lt;-<span class="keyword">chan</span> <span class="keyword">struct</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">    ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">struct</span>&#123;&#125;)</span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        time.Sleep(delay)</span><br><span class="line">        fmt.Println(text)</span><br><span class="line">        <span class="built_in">close</span>(ch)</span><br><span class="line">    &#125;()</span><br><span class="line">    <span class="keyword">return</span> ch</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Publishé–¢æ•°ã¯ã“ã®ã‚ˆã†ã«ä½¿ãˆã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wait := Publish(<span class="string">"important news"</span>, <span class="number">2</span> * time.Minute)</span><br><span class="line"><span class="comment">// ã“ã“ã«ä½•ã‚‰ã‹ã®å‡¦ç†ãŒå…¥ã‚‹</span></span><br><span class="line">&lt;-wait <span class="comment">// textãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¾ã§ã€ã“ã“ã§å‡¦ç†ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã‚‹</span></span><br></pre></td></tr></table></figure><h3 id="selectæ–‡"><a href="#selectæ–‡" class="headerlink" title="selectæ–‡"></a>selectæ–‡</h3><p>selectæ–‡ã¯Goã®é‡è¦ãªä¸¦è¡Œå‡¦ç†ãƒ„ãƒ¼ãƒ«ã‚­ãƒƒãƒˆã®ä¸€ã¤ã§ã™ã€‚<code>select</code> ã¯é€šä¿¡æ™‚ã«ç¶šè¡Œã™ã‚‹å‡¦ç†ã‚’é¸æŠã—ã¾ã™ã€‚</p><ul><li>ã©ã®é€šä¿¡ã‚‚æˆåŠŸã—å¾—ã‚‹ã¨ãã€ãã®ã†ã¡ã®ä¸€ã¤ãŒãƒ©ãƒ³ãƒ€ãƒ é¸æŠã•ã‚Œã€å¯¾å¿œã™ã‚‹å‡¦ç†ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚</li><li>defaultã®ã‚±ãƒ¼ã‚¹ãŒå­˜åœ¨ã—ãªã„å ´åˆã€ã„ãšã‚Œã‹ã®é€šä¿¡ãŒæˆåŠŸã™ã‚‹ã¾ã§selectæ–‡ã¯å‡¦ç†ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã—ã¾ã™ã€‚</li></ul><p>ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã¯ã€selectæ–‡ã‚’ä½¿ç”¨ã—ãŸä¹±æ•°ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ã®å®Ÿè£…ä¾‹ã§ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">rand := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>)</span><br><span class="line"><span class="keyword">for</span> &#123; <span class="comment">// ãƒ©ãƒ³ãƒ€ãƒ ã§0ã‹1ã®ã©ã¡ã‚‰ã‹ã‚’ã‚’ç¶šã‘ã–ã¾ã«é€ä¿¡ã—ã¦ã„ã‚‹</span></span><br><span class="line">    <span class="keyword">select</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> rand &lt;- <span class="number">0</span>:</span><br><span class="line">    <span class="keyword">case</span> rand &lt;- <span class="number">1</span>:</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã‚‚ã†å°‘ã—ç¾å®Ÿçš„ãªå®Ÿè£…ä¾‹ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã¯selectæ–‡ã‚’ã¤ã‹ã£ã¦ã€å—ä¿¡æ“ä½œã«ã‚¿ã‚¤ãƒ ãƒªãƒŸãƒƒãƒˆã‚’è¨­ã‘ã¦ã„ã‚‹ä¾‹ã§ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> &#123;</span><br><span class="line"><span class="keyword">case</span> news := &lt;-AFP:</span><br><span class="line">    fmt.Println(news)</span><br><span class="line"><span class="keyword">case</span> &lt;-time.After(time.Minute):</span><br><span class="line">    fmt.Println(<span class="string">"Time out: no news in one minute."</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>time.After</code> ã¯æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®é–¢æ•°ã§ã™ã€‚ä¸€å®šæ™‚é–“ãŸã£ãŸå¾Œã«ã€ç¾åœ¨æ™‚åˆ»ã‚’é€ä¿¡ã™ã‚‹ãƒãƒ£ãƒãƒ«ã‚’è¿”ã™é–¢æ•°ã§ã™ã€‚</p><h2 id="Hello-server"><a href="#Hello-server" class="headerlink" title="Hello server"></a>Hello server</h2><p>ã“ã‚Œã¾ã§ã®ãƒ”ãƒ¼ã‚¹ãŒã©ã®ã‚ˆã†ã«ã¯ã¾ã£ã¦ã„ãã®ã‹ã‚’ã€ã¡ã‚‡ã£ã¨ã—ãŸä¾‹ã§ãŠè¦‹ã›ã—ã¦çµ‚ã‚ã‚‹ã“ã¨ã«ã—ã¾ã—ã‚‡ã†ã€‚<code>server</code>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ãƒãƒ£ãƒãƒ«ã‚’çµŒç”±ã—ã¦<code>Work</code>ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘å…¥ã‚Œã‚‹ã‚µãƒ¼ãƒãƒ¼ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚</p><ul><li>ãƒªã‚¯ã‚¨ã‚¹ãƒˆã”ã¨ã«åˆ¥ã€…ã®<code>goroutine</code>ã§å‡¦ç†ãŒè¡Œã‚ã‚Œã¾ã™ã€‚</li><li><code>Work</code>ã®æ§‹é€ ä½“ãã‚Œè‡ªèº«ã¯ã€çµæœã‚’è¿”ã™ãŸã‚ã«ç”¨ã„ã‚‰ã‚Œã‚‹ãƒãƒ£ãƒ³ãƒãƒ«ã‚’å«ã‚“ã§ã„ã¾ã™ã€‚</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> server</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"log"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Newã§reqãƒãƒ£ãƒãƒ«ã‚’çµŒç”±ã—ã¦Workã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘å…¥ã‚Œã‚‹ã‚µãƒ¼ãƒãƒ¼ã‚’ç”Ÿæˆã™ã‚‹</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">New</span><span class="params">()</span> <span class="params">(req <span class="keyword">chan</span>&lt;- *Work)</span></span> &#123;</span><br><span class="line">    wc := <span class="built_in">make</span>(<span class="keyword">chan</span> *Work)</span><br><span class="line">    <span class="keyword">go</span> serve(wc)</span><br><span class="line">    <span class="keyword">return</span> wc</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Work <span class="keyword">struct</span> &#123;</span><br><span class="line">    Op    <span class="function"><span class="keyword">func</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span> <span class="title">int</span></span></span><br><span class="line"><span class="function">    <span class="title">A</span>, <span class="title">B</span>  <span class="title">int</span></span></span><br><span class="line"><span class="function">    <span class="title">Reply</span> <span class="title">chan</span> <span class="title">int</span> // <span class="title">Server</span>ã¯ã“ã®ãƒãƒ£ãƒãƒ«ã«çµæœã‚’è¿”ã™</span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">func</span> <span class="title">serve</span><span class="params">(wc &lt;-<span class="keyword">chan</span> *Work)</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> w := <span class="keyword">range</span> wc &#123;</span><br><span class="line">        <span class="keyword">go</span> safelyDo(w)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">safelyDo</span><span class="params">(w *Work)</span></span> &#123;</span><br><span class="line">    <span class="comment">// å®Ÿè¡Œä¸­ã®ä»–ã®goroutineã‚’killã—ãªã„ã‚ˆã†ã«ã€ãƒ‘ãƒ‹ãƒƒã‚¯çŠ¶æ…‹ã«ãªã£ã¦ã„ã‚‹goroutineã®åˆ¶å¾¡ã‚’å–ã‚Šæˆ»ã™</span></span><br><span class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> err := <span class="built_in">recover</span>(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">            log.Println(<span class="string">"work failed:"</span>, err)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;()</span><br><span class="line">    do(w)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">do</span><span class="params">(w *Work)</span></span> &#123;</span><br><span class="line">    w.Reply &lt;- w.Op(w.A, w.B)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã“ã‚“ãªé¢¨ã«ä½¿ãˆã‚‹ã§ã—ã‚‡ã†ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> server_test</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"server"</span></span><br><span class="line">    <span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    s := server.New()</span><br><span class="line"></span><br><span class="line">    divideByZero := &amp;server.Work&#123;</span><br><span class="line">        Op:    <span class="function"><span class="keyword">func</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123; <span class="keyword">return</span> a / b &#125;,</span><br><span class="line">        A:     <span class="number">100</span>,</span><br><span class="line">        B:     <span class="number">0</span>,</span><br><span class="line">        Reply: <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>),</span><br><span class="line">    &#125;</span><br><span class="line">    s &lt;- divideByZero</span><br><span class="line"></span><br><span class="line">    <span class="keyword">select</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> res := &lt;-divideByZero.Reply:</span><br><span class="line">        fmt.Println(res)</span><br><span class="line">    <span class="keyword">case</span> &lt;-time.After(time.Second):</span><br><span class="line">        fmt.Println(<span class="string">"No result in one second."</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å‡ºåŠ›çµæœ: No result in one second.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ã•ã‚‰ã«å­¦ã³ãŸã„å ´åˆ"><a href="#ã•ã‚‰ã«å­¦ã³ãŸã„å ´åˆ" class="headerlink" title="ã•ã‚‰ã«å­¦ã³ãŸã„å ´åˆ"></a>ã•ã‚‰ã«å­¦ã³ãŸã„å ´åˆ</h3><p><a href="https://yourbasic.org/golang/tutorials/" target="_blank" rel="noopener">Tutorials</a>ã¯åˆå¿ƒè€…ã«ã‚‚ä¸Šç´šè€…ã«ã‚‚ãŸã‚ã«ãªã‚‹ã‚µã‚¤ãƒˆã§ã™ã€‚ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚„ã€æœ¬ç•ªç’°å¢ƒã«åŒ¹æ•µã™ã‚‹ã‚³ãƒ¼ãƒ‰ä¾‹ãŒæƒã£ã¦ã„ã¾ã™ã€‚</p><h2 id="é–¢é€£ãƒªãƒ³ã‚¯"><a href="#é–¢é€£ãƒªãƒ³ã‚¯" class="headerlink" title="é–¢é€£ãƒªãƒ³ã‚¯"></a>é–¢é€£ãƒªãƒ³ã‚¯</h2><p>Goã«é–¢é€£ã—ãŸé€£è¼‰ä¼ç”»ãŒã‚ã‚Šã¾ã™ã€‚</p><ul><li><a href="https://future-architect.github.io/articles/20190713/">Goã‚’å­¦ã¶ã¨ãã«ã¤ã¾ãšãã‚„ã™ã„ãƒã‚¤ãƒ³ãƒˆFAQ</a></li><li><a href="https://future-architect.github.io/tags/GoCDK/">Go Cloud é€£è¼‰</a></li><li><a href="https://future-architect.github.io/tags/DynamoDB%C3%97Go/">DynamoDBÃ—Goé€£è¼‰</a></li><li><a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCP é€£è¼‰</a></li></ul><div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none; padding-left: 0;"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">1.</span><span style="display: inline-block; vertical-align: top;">å¾Œå…¥ã‚Œå…ˆå‡ºã—ï¼ˆLIFO: Last In First Out; FILO: First In Last Outï¼‰ã®æ§‹é€ </span><a href="#fnref:1" rev="footnote"> â†©</a></li><li id="fn:2"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">2.</span><span style="display: inline-block; vertical-align: top;"><code>{}</code> ã®ä¸­ã§å®£è¨€ã•ã‚Œã¦ã„ãªã„å¤‰æ•°ãƒ»é–¢æ•°ã‚’ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã§å®£è¨€ã•ã‚ŒãŸå¤‰æ•°ãƒ»é–¢æ•°ã¨èª­ã‚“ã§ã„ã‚‹ã€‚importæ–‡ã¯ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã§å®£è¨€ã•ã‚Œã¦ã„ã‚‹ã€‚main packageã®mainé–¢æ•°ã¯ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã§å®£è¨€ã•ã‚Œã¦ã„ã‚‹ã€‚</span><a href="#fnref:2" rev="footnote"> â†©</a></li><li id="fn:3"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">3.</span><span style="display: inline-block; vertical-align: top;">Javaã®ä¸–ç•Œã§å‘¼ã°ã‚Œã‚‹ã€Œã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€ã¨åŒç¾©ã§ã™ã€‚</span><a href="#fnref:3" rev="footnote"> â†©</a></li><li id="fn:4"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">4.</span><span style="display: inline-block; vertical-align: top;">Unicodeã®<a href="https://ja.wikipedia.org/wiki/%E7%AC%A6%E5%8F%B7%E7%82%B9" target="_blank" rel="noopener">ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆ</a>ã¨ã¯ã€å…¨ã¦ã®æ–‡å­—ã‚’4æ¡ã®16é€²æ•°ã§ä¸€æ„ã«è¡¨ç¾ã—ãŸã‚³ãƒ¼ãƒ‰ä½“ç³»ã®å€¤ã§ã™ã€‚</span><a href="#fnref:4" rev="footnote"> â†©</a></li><li id="fn:5"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">5.</span><span style="display: inline-block; vertical-align: top;">panicãŒç™ºç”Ÿã—ã¦ã€å‘¼ã³å‡ºã—å…ƒã®é–¢æ•°ãŒå¼·åˆ¶çš„ã«returnã•ã‚Œã¦ã‚‚ã€deferå®£è¨€ã•ã‚ŒãŸé–¢æ•°ã¯å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚</span><a href="#fnref:5" rev="footnote"> â†©</a></li><li id="fn:6"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">6.</span><span style="display: inline-block; vertical-align: top;">ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ ( <a href="https://play.golang.org/p/XDaWkZqEZ9K" target="_blank" rel="noopener">https://play.golang.org/p/XDaWkZqEZ9K</a> )</span><a href="#fnref:6" rev="footnote"> â†©</a></li><li id="fn:7"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">7.</span><span style="display: inline-block; vertical-align: top;">untypedãªçŠ¶æ…‹ã®æ™‚ã¯å‹ãŒæ±ºã¾ã£ã¦ãŠã‚‰ãšã€å¼ã‚„ä»£å…¥ã®ä¸­ã§ãã®å®šæ•°ãŒç”¨ã„ã‚‰ã‚Œã‚‹æ™‚ã€å‹ãŒæ±ºå®šã•ã‚Œã¾ã™ã€‚</span><a href="#fnref:7" rev="footnote"> â†©</a></li><li id="fn:8"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">8.</span><span style="display: inline-block; vertical-align: top;">ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ ( <a href="https://play.golang.org/p/J3JBKvSmYJW" target="_blank" rel="noopener">https://play.golang.org/p/J3JBKvSmYJW</a> )</span><a href="#fnref:8" rev="footnote"> â†©</a></li><li id="fn:9"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">9.</span><span style="display: inline-block; vertical-align: top;">ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ ( <a href="https://play.golang.org/p/jTKvVIBqwMa" target="_blank" rel="noopener">https://play.golang.org/p/jTKvVIBqwMa</a> )</span><a href="#fnref:9" rev="footnote"> â†©</a></li></ol></div></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Javaãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã®ãŸã‚ã®Goè¨€èªå…¥é–€&quot;&gt;&lt;a href=&quot;#Javaãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã®ãŸã‚ã®Goè¨€èªå…¥é–€&quot; class=&quot;headerlink&quot; title=&quot;Javaãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã®ãŸã‚ã®Goè¨€èªå…¥é–€&quot;&gt;&lt;/a&gt;Javaãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã®ãŸã‚ã®Goè¨€èªå…¥é–€&lt;/h2&gt;&lt;
      
    
    </summary>
    
      <category term="Programming" scheme="https://future-architect.github.io/categories/Programming/"/>
    
    
      <category term="Java" scheme="https://future-architect.github.io/tags/Java/"/>
    
      <category term="Go" scheme="https://future-architect.github.io/tags/Go/"/>
    
      <category term="ç¿»è¨³" scheme="https://future-architect.github.io/tags/%E7%BF%BB%E8%A8%B3/"/>
    
  </entry>
  
  <entry>
    <title> Goã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®ã™ã™ã‚</title>
    <link href="https://future-architect.github.io/articles/20200310/"/>
    <id>https://future-architect.github.io/articles/20200310/</id>
    <published>2020-03-09T23:55:28.000Z</published>
    <updated>2020-03-10T00:02:00.929Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¼šã®ã™ã™ã‚"><a href="#æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¼šã®ã™ã™ã‚" class="headerlink" title="æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¼šã®ã™ã™ã‚"></a>æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¼šã®ã™ã™ã‚</h1><h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><p>2019å¹´ã®ã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã§ã¯Goè¨€èªãŒãã®7ã¾ã§ç¶šã„ã¦ <sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup> ã€ç››ã‚Šä¸ŠãŒã‚Šã‚’è¦‹ã›ãŸã®ã¯è¨˜æ†¶ã«æ–°ã—ã„ã§ã™ã€‚å½“ç¤¾ã§ã‚‚Goã‚’æ‰±ã†æ¡ˆä»¶ãŒå¢—ãˆã¦ãã¦ã€ç¤¾å†…ã§ã‚‚ã„ã‚ã„ã‚ãªãƒ¡ãƒ³ãƒãŒè¶£å‘³ã‚„æ¥­å‹™ã§Goã‚’æ›¸ã„ã¦ã„ã¾ã™ã€‚æ—¥ã€…æ–°ã—ã„GopherãŒç”Ÿã¾ã‚Œã¦ã„ã¾ã™ã€‚</p><p>ã•ã¦ã€Goã‚’ã¯ã˜ã‚ã‚ˆã†ã¨A Tour of Goã‚’ã‚„ã£ã¦ã¿ãŸãŒã€Goã‚‰ã—ã„ã‚³ãƒ¼ãƒ‰ãŒã‚ã‹ã‚‰ãªã„ã€Goè¨€èªã‚’ã‚ˆã‚Šæ·±ãå­¦ã³ãŸã„ã€ã¨ã„ã†æ–¹ã‚‚å¤šã„ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚Goè¨€èªã¯ä¸€éƒ¨ã‚’é™¤ã„ã¦è¨€èªè‡ªä½“ãŒGoã§æ›¸ã‹ã‚Œã¦ãŠã‚Šã€æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯Goã‚‰ã—ã„æ›¸ãæ–¹ã®ãŠæ‰‹æœ¬ã¨ã‚‚è¨€ã‚ã‚ŒãŸã‚Šã—ã¾ã™ã€‚</p><p>æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’ã—ã¦ã¿ãŸã„ã¨ã„ã†æ–¹ã‚‚å¤šã„ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ï¼Ÿã—ã‹ã—ç¤¾å†…ã§æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¼šã‚’å–ã‚Šçµ„ã‚“ã§ã„ããŸã„ã‘ã©é›£ã—ãã†ã€ä»¥ä¸‹ã®ã‚ˆã†ãªç–‘å•ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><ul><li>é€²ã‚æ–¹ãŒã‚ã‹ã‚‰ãªã„</li><li>ã©ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’èª­ã‚“ã ã‚‰ã„ã„ã‹ã‚ã‹ã‚‰ãªã„</li><li>1å›ã‚ãŸã‚Šã®ç²’åº¦æ„Ÿã¯ã©ã‚Œãã‚‰ã„ãŒå¦¥å½“ãªã®ã‹ã‚ã‹ã‚‰ãªã„</li></ul><p>ãã“ã§æœ¬è¨˜äº‹ã§ã¯ç¤¾å†…ã§å–ã‚Šçµ„ã‚“ã§ã„ã‚‹Goã®æ¨™æº–ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¼šã®å–ã‚Šçµ„ã¿ã‚’ç´¹ä»‹ã—ãªãŒã‚‰ã€ä¸Šè¨˜ã®ã‚ˆã†ãªè³ªå•ã«ç­”ãˆã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚</p><p>ãªãŠã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è‡ªä½“ã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆä¸Šã§ã‚‚ãŸãã•ã‚“ç´¹ä»‹ã•ã‚Œã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã®ã§ã€æœ¬è¨˜äº‹ã§ã¯çœç•¥ã—ã¾ã™ã€‚</p><h2 id="ç›®çš„"><a href="#ç›®çš„" class="headerlink" title="ç›®çš„"></a>ç›®çš„</h2><p>ãã‚‚ãã‚‚ã“ã®Goã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¼šã‚’ã©ã†ã„ã£ãŸç›®çš„ã§å®Ÿæ–½ã—ã¦ã„ã‚‹ã‹èª¬æ˜ã—ã¾ã™ã€‚</p><ul><li>æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä½¿ã„æ–¹ã‚’çŸ¥ã‚‹<ul><li>GoDocã‚’èª­ã‚“ã§ä»•æ§˜ã‚’çŸ¥ã‚‹</li><li>ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚“ã§ä»•æ§˜ã‚’çŸ¥ã‚‹</li></ul></li><li>Goã‚‰ã—ã„ã‚³ãƒ¼ãƒ‰ã®æ›¸ãæ–¹ã‚’çŸ¥ã‚‹<ul><li>ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚“ã§Goã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚³ãƒ¼ãƒ‰ã®æ›¸ãæ–¹ã‚’çŸ¥ã‚‹</li></ul></li><li>Goã®ãƒ†ã‚¹ãƒˆã®æ›¸ãæ–¹ã‚’çŸ¥ã‚‹<ul><li>ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚“ã§Goã®ãƒ†ã‚¹ãƒˆã®æ›¸ãæ–¹ã‚’çŸ¥ã‚‹</li></ul></li></ul><p>ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¼šã§ã¯ã€ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚€ã ã‘ã§ã¯ãªãã€GoDocã‚’èª­ã‚“ã ã‚Šã€ãƒ†ã‚¹ãƒˆã‚’èª­ã‚“ã ã‚Šã—ã¦ã€ãã‚‚ãã‚‚ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä»•æ§˜ã‚„ä½¿ã„æ–¹ã‚’ãŠã•ã‚‰ã„ã—ã¦ã„ã¾ã™ã€‚ä¾‹ãˆã°ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§ã®ãƒ•ãƒ©ã‚°ã‚’æ‰±ã† <code>flag</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ <code>-myflag=x</code> ãªã©ã¨ã—ã¦ãƒ•ãƒ©ã‚°åã‚’å¼•æ•°ã§æŒ‡å®šã™ã‚‹ã“ã¨ãŒå¤šã„ã¨æ€ã„ã¾ã™ã€‚ã¨ã“ã‚ãŒãƒ†ã‚¹ãƒˆã‚’è¦‹ã‚‹ã¨ <code>--myflag=x</code> ã¨ã„ã† <code>--</code> ã¨ã„ã†å½¢å¼ã§ã‚‚å¼•æ•°ã‚’å—ã‘å–ã‘ã‚‰ã‚Œã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚ä»•æ§˜ã‚’ç¢ºèªã—ãŸä¸Šã§å®Ÿè£…ã‚’èª­ã‚€ã“ã¨ã§ã€ä»•æ§˜ã‚’æº€ãŸã™ãŸã‚ã«Goã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ã©ã®ã‚ˆã†ã«å®Ÿè£…ã—ã¦ã„ã‚‹ã®ã‹ã€ã¨ã„ã†å®Ÿè£…ãã®ã‚‚ã®ã«ç€ç›®ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>ã¾ãŸã€å‚åŠ ã—ã¦ã„ã‚‹ãƒ¡ãƒ³ãƒã¯åˆå¿ƒè€…ã‹ã‚‰ãƒ™ãƒ†ãƒ©ãƒ³ã¾ã§å¹…åºƒãå‚åŠ ã—ã¦ã„ã¾ã™ã€‚æœ€å¤§å…¬ç´„æ•°çš„ãªå½¢ã‚’ã¨ã£ã¦ã€ãªã‚‹ã¹ãå¤šãã®ãƒ¡ãƒ³ãƒã«ã¨ã£ã¦å½¹ã«ç«‹ã¤ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚</p><h2 id="èª­ã‚“ã§ã„ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸"><a href="#èª­ã‚“ã§ã„ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸" class="headerlink" title="èª­ã‚“ã§ã„ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸"></a>èª­ã‚“ã§ã„ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸</h2><p>ã¾ãšç¤¾å†…ã§èª­ã‚“ã§ã„ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ä»¥ä¸‹ã§ã™ã€‚å…¨éƒ¨ã§ 12 å›å®Ÿæ–½ã™ã‚‹äºˆå®šã§ã™ã€‚ç¾åœ¨(2020/03/02)ã®ã¨ã“ã‚ <code>path</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¾ã§å®Ÿæ–½ã—ã¾ã—ãŸã€‚</p><table><thead><tr><th>#</th><th>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å</th></tr></thead><tbody><tr><td>1</td><td>io</td></tr><tr><td>2</td><td>errors</td></tr><tr><td>3</td><td>hash/maphash</td></tr><tr><td>4</td><td>context</td></tr><tr><td>5</td><td>flag</td></tr><tr><td>6</td><td>path</td></tr><tr><td>7</td><td>testing</td></tr><tr><td>8</td><td>iotest</td></tr><tr><td>9</td><td>sort</td></tr><tr><td>10</td><td>net/http (client)</td></tr><tr><td>11</td><td>net/http (server)</td></tr><tr><td>12</td><td>database/sql</td></tr></tbody></table><h3 id="ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®é¸å®š"><a href="#ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®é¸å®š" class="headerlink" title="ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®é¸å®š"></a>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®é¸å®š</h3><p>ãã‚‚ãã‚‚ã€ã©ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’èª­ã‚“ã ã‚‰ã„ã„ã‚“ã ã‚ã†ï¼Ÿã¨ã„ã†ç–‘å•ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚ä¸Šè¨˜ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’é¸å®šã—ãŸæ–¹æ³•ã‚’ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><p>èª­ã‚€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®é¸å®šã¯æœ‰å¿—ã®ãƒ¡ãƒ³ãƒæ•°åã§ä¸€ç·’ã«æ±ºã‚ã¾ã—ãŸã€‚</p><p>ã¾ãšãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¹ãƒ†ãƒƒãƒ—æ•°ã‚’è¦‹ã¦ã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ã—ã¦ã„ã¾ã™ã€‚<a href="https://github.com/hhatto/gocloc" target="_blank" rel="noopener">gocloc</a> ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã†ã¨ä»¥ä¸‹ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ç°¡å˜ã«ã‚¹ãƒ†ãƒƒãƒ—æ•°ã‚’ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">$ gocloc archive</span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">Language                     files          blank        comment           code</span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">Go                              21            782           1511           9099</span><br><span class="line">Plain Text                       2              0              0              2</span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">TOTAL                           23            782           1511           9101</span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">$ gocloc io</span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">Language                     files          blank        comment           code</span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">Go                              12            353            480           2045</span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">TOTAL                           12            353            480           2045</span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">$ gocloc runtime</span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">Language                     files          blank        comment           code</span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">Go                             577          12182          21862          75117</span><br><span class="line">Assembly                       177           5102           7567          34766</span><br><span class="line">C                               47            599            498           2273</span><br><span class="line">Python                           1            135            103            366</span><br><span class="line">Markdown                         1             71              0            240</span><br><span class="line">C Header                         8             50            156            217</span><br><span class="line">BASH                             1              1              3             11</span><br><span class="line">Makefile                         1              1              3              1</span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">TOTAL                          813          18141          30192         112991</span><br><span class="line">-------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure><p><code>runtime</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯æ¥µç«¯ãªä¾‹ã§ã™ãŒã€ã‚³ãƒ¼ãƒ‰ã®èª­ã‚€å‰ã«æ˜ã‚‰ã‹ã«ã‚„ã°ã„ã€ã€ã€ã¨ã„ã†ã“ã¨ãŒã‚ã‹ã‚‹ã‚ã‘ã§ã™ã€‚ã“ã®ã‚ˆã†ãªè¦é ˜ã§ã¾ãšã¯ <code>$GOROOT/src/</code> é…ä¸‹ã«ã‚ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¸€è¦§ã«å¯¾ã—ã¦ <code>gocloc</code> ã‚’å®Ÿæ–½ã—ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å…¨ä½“æ„Ÿã‚’æŠŠæ¡ã—ã¾ã—ãŸã€‚<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup></p><p>12å›ã‚„ã‚‹ã£ï¼ã¨ã„ã†ã®ã¯æ±ºã‚æ‰“ã¡ã§ã™ã€‚æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã ã‘ã§ã‚‚200è¿‘ãã‚ã£ã¦<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>ã€ã‚‚ã¡ã‚ã‚“å…¨éƒ¨ã‚’å–ã‚Šä¸Šã’ã¦èª­ã‚€ã“ã¨ã¯é›£ã—ã„ã§ã™ã€‚ã‹ã¨ã„ã£ã¦ç›®æ¨™ã‚’æ±ºã‚ãªã„ã¨é”æˆæ„Ÿã‚’å¾—ã‚‰ã‚Œã«ãã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚Futureã§ã¯æŠ€è¡“æ›¸ã®ç¤¾å†…è¼ªèª­ä¼šã‚’å®Ÿæ–½ã—ã¦ã„ã¾ã™ <sup id="fnref:4"><a href="#fn:4" rel="footnote">4</a></sup> ãŒã€æŠ€è¡“æ›¸ã®å ´åˆã¯ä¸€å†Šã‚’æŠ€è¡“æ›¸ã‚’èª­äº†ã™ã‚‹ã“ã¨ã§é”æˆæ„Ÿã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã—ã‹ã—ã€æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®å ´åˆã¯ã©ã®ç¯„å›²ã‚’ã¨ã‚Šã‚ã’ã‚‹ã‹ã¯ä»»æ„ã§ã™ã€‚</p><p>ãã®ãŸã‚ä»Šå›ã¯äºˆã‚12å›ã¯å®Ÿæ–½ã™ã‚‹ã¨æ±ºã‚æ‰“ã¡ã—ã¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’é¸ã‚“ã§ã„ãã¾ã—ãŸã€‚ã‚­ãƒªã®è‰¯ã„10å›ã‚’è€ƒãˆã¦ã„ãŸã®ã§ã™ãŒã€èª­ã¿ãŸã„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã‚ã‚Šã€æœ€çµ‚çš„ã«å°‘ã—å¢—ã‚„ã—ã¦12å›ã«ãªã‚Šã¾ã—ãŸã€‚</p><p>æ¬¡ã«å…·ä½“çš„ã«èª­ã¿ãŸã„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’é¸ã³ã¾ã™ã€‚å…ˆç¨‹ã® <code>gocloc</code> ã§å¾—ãŸã‚¹ãƒ†ãƒƒãƒ—æ•°ã‚’è¸ã¾ãˆãªãŒã‚‰ã€ã¿ã‚“ãªã§è­°è«–ã—ã¦ã„ã¾ã™ã€‚ä¾‹ãˆã° <code>io</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯Goã‚‰ã—ã„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®ä½¿ã„æ–¹ã‚’å­¦ã¹ã‚‹ã‹ã‚‰ãŠã™ã™ã‚ã€ã¨ã‹ <code>hash/maphash</code> ã¯ Go1.14 ã§æ–°ã—ãè¿½åŠ ã•ã‚Œã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã ã‹ã‚‰ã¿ã‚“ãªã§ç¢ºèªã—ã¦ãŠã“ã†ã€ã‚„ã£ã±ã‚Š <code>net/http</code> ã®HTTPã‚µãƒ¼ãƒã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®å®Ÿè£…ã¯èª­ã‚“ã§ãŠããŸã„ã‚ˆã­ã€ã˜ã‚ƒã‚ãƒ€ãƒ¡æŠ¼ã—ã§ <code>database/sql</code> ã‚‚ã‚„ã‚Šã¾ã—ã‚‡ã†ã€ã¿ãŸã„ãªæ„Ÿã˜ã§ã™ã€‚</p><p>æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä»¥å¤–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸(ãŸã¨ãˆã° <code>golang.org/x</code> ãªã©ã§ã™)ã‚‚æ¤œè¨ã—ãŸã®ã§ã™ãŒã€ã¾ãšã¯æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã¿ã«çµã£ã¦å®Ÿæ–½ã™ã‚‹ã“ã¨ã«ã—ã¦ã„ã¾ã™ã€‚</p><h2 id="é‹å–¶æ–¹é‡"><a href="#é‹å–¶æ–¹é‡" class="headerlink" title="é‹å–¶æ–¹é‡"></a>é‹å–¶æ–¹é‡</h2><h3 id="é–‹å‚¬é »åº¦-æ™‚é–“"><a href="#é–‹å‚¬é »åº¦-æ™‚é–“" class="headerlink" title="é–‹å‚¬é »åº¦/æ™‚é–“"></a>é–‹å‚¬é »åº¦/æ™‚é–“</h3><p>ç™ºè¡¨ã™ã‚‹ãƒ¡ãƒ³ãƒã¨å‚åŠ ã™ã‚‹ãƒ¡ãƒ³ãƒã‚‚è² æ‹…ã«ãªã‚‰ãªã„ã‚ˆã†ã«ã€é–‹å‚¬é »åº¦ã¨æ™‚é–“ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚</p><ul><li>é–‹å‚¬é »åº¦<ul><li>é€±1å›</li><li>æ¯é€±æ°´æ›œæ—¥ã®å¤•æ–¹</li></ul></li><li>æ™‚é–“<ul><li>1å›ã‚ãŸã‚Š45åˆ†ç¨‹åº¦</li></ul></li></ul><h3 id="é€²ã‚æ–¹"><a href="#é€²ã‚æ–¹" class="headerlink" title="é€²ã‚æ–¹"></a>é€²ã‚æ–¹</h3><ul><li>ç™ºè¡¨<ul><li>äºˆã‚æ±ºã‚ãŸ2åãŒã¾ã¨ã‚ã‚‹</li></ul></li><li>è³‡æ–™<ul><li>éå…¬é–‹ã®Qiitaè¨˜äº‹ã‚„GitHub Gistã€Google slideã«ã¾ã¨ã‚ã‚‹</li></ul></li></ul><p>å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã”ã¨ã«ç™ºè¡¨ã™ã‚‹ãƒ¡ãƒ³ãƒã‚’2åæ±ºã‚ã¾ã—ãŸã€‚<code>io</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãªã‚‰ A ã•ã‚“ã¨ B ã•ã‚“ã€<code>errors</code> ã¯ C ã•ã‚“ã€D ã•ã‚“ã€ãŒå†…å®¹ã‚’ã¾ã¨ã‚ã¦ç™ºè¡¨ã™ã‚‹è¦é ˜ã§ã™ã€‚äº‹å‰ã«æ±ºã‚ãŸ2äººãŒå®¿é¡Œå½¢å¼ã§ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚“ã§è³‡æ–™ã«ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚ã¾ã¨ã‚ãŸè³‡æ–™ã¨Goã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ã‚‚ã¨ã«40åˆ†ç¨‹åº¦(1äººã‚ãŸã‚Š20åˆ†ç¨‹åº¦)ã§ç™ºè¡¨ã—ã¦ã„ã¾ã™ã€‚ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚³ãƒ¼ãƒ‰ã™ã¹ã¦ã‚’å–ã‚Šä¸Šã’ã‚‹ã®ã§ã¯ãªãã€ã‚³ã‚¢ãªéƒ¨åˆ†ã‚„èˆˆå‘³ãŒã‚ã‚‹éƒ¨åˆ†ã‚’å–ã‚Šä¸Šã’ã¦ç™ºè¡¨ã—ã¦ã„ã¾ã™ã€‚2äººã§å–ã‚Šçµ„ã‚€ã¨ã€åŒã˜ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚“ã§ã„ã¦ã‚‚æ°—ã¥ã‹ãªã‹ã£ãŸã‚Šã€é¢ç™½ã‹ã£ãŸãƒã‚¤ãƒ³ãƒˆã‚‚ç•°ãªã‚Šã€è£œå®Œã§ãã‚‹ã®ã§ã‚ªã‚¹ã‚¹ãƒ¡ã§ã™ã€‚</p><p>ã¨ã¯ã„ãˆé€²ã‚æ–¹ã¯ã‚„ã£ã±ã‚Šé›£ã—ã„ã¨æ„Ÿã˜ã¦ã„ã¾ã™ã€‚ã„ã‚ã„ã‚ãªãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚’æŒã£ãŸãƒ¡ãƒ³ãƒãŒå‚åŠ ã—ã¦ã„ã‚‹ã®ã§ã€å‚åŠ ã—ãŸãƒ¡ãƒ³ãƒãŒæº€è¶³ã„ãã‚ˆã†ãªä¼šã«ãªã£ã¦ã„ã‚‹ã‹ã¯æ‚©ã¿ãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚</p><p>ã“ã®ã‚ãŸã‚Šã¯å‹‰å¼·ä¼šã®é‹å–¶ã«é•·ã‘ã¦ã„ã‚‹ãƒ¡ãƒ³ãƒãŒã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã‚’å–ã£ã¦ãã ã•ã‚Šã€ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’ã‚‚ã‚‰ã„ã¾ã—ãŸã€‚ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã®ä¸€éƒ¨ã‚’æŠœç²‹ã—ã¾ã™ã€‚</p><img src="/images/20200310/photo_20200310_01.png"><img src="/images/20200310/photo_20200310_02.png"><h2 id="ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¼šã®é›°å›²æ°—"><a href="#ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¼šã®é›°å›²æ°—" class="headerlink" title="ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¼šã®é›°å›²æ°—"></a>ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¼šã®é›°å›²æ°—</h2><p>å‚åŠ ã—ã¦ã„ã‚‹ãƒ¡ãƒ³ãƒã¯ã€ã¯ã˜ã‚ã¦Goã‚’ã•ã‚ã£ãŸãƒ¡ãƒ³ãƒã€A Tour of Goã¯ã¨ã‚Šã‚ãˆãšã‚„ã£ã¦ã¿ãŸãƒ¡ãƒ³ãƒã€æ¥­å‹™ã§Goã‚’ã‚¬ãƒ³ã‚¬ãƒ³æ›¸ã„ã¦ã„ã‚‹ãƒ¡ãƒ³ãƒã€è¶£å‘³ã§Goã‚’æ›¸ã„ã¦ã„ã‚‹ãƒ¡ãƒ³ãƒã€Goã«é–¢ã™ã‚‹æœ¬ã‚’å‡ºç‰ˆã—ã¦ã„ã‚‹ãƒ¡ãƒ³ãƒãªã©æ§˜ã€…ã§ã™ã€‚</p><p>ã¾ãŸå‚åŠ æ–¹æ³•ã‚‚ã€ä¼šè­°å®¤ã‹ã‚‰å‚åŠ ã—ã¦ã„ã‚‹ãƒ¡ãƒ³ãƒã€ãƒªãƒ¢ãƒ¼ãƒˆã‹ã‚‰å‚åŠ ã—ã¦ã„ã‚‹ãƒ¡ãƒ³ãƒãªã©æ§˜ã€…ã§ã™ã€‚</p><p>ç™ºè¡¨å†…å®¹ã‚’èããªãŒã‚‰ã€æ°—ã«ãªã‚‹ã“ã¨ã‚„è‰¯ãã‚ã‹ã‚‰ãªã‹ã£ãŸã“ã¨ã€ç–‘å•ã«æ€ã£ãŸã“ã¨ãªã©ã‚ã„ã‚ã„è­°è«–ã—ã¦ã„ã¾ã™ã€‚</p><h2 id="ã‚„ã£ã¦ã¿ã¦è‰¯ã‹ã£ãŸã“ã¨"><a href="#ã‚„ã£ã¦ã¿ã¦è‰¯ã‹ã£ãŸã“ã¨" class="headerlink" title="ã‚„ã£ã¦ã¿ã¦è‰¯ã‹ã£ãŸã“ã¨"></a>ã‚„ã£ã¦ã¿ã¦è‰¯ã‹ã£ãŸã“ã¨</h2><h3 id="Goã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’å­¦ã¹ã‚‹-è­°è«–ã§ãã‚‹"><a href="#Goã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’å­¦ã¹ã‚‹-è­°è«–ã§ãã‚‹" class="headerlink" title="Goã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’å­¦ã¹ã‚‹/è­°è«–ã§ãã‚‹"></a>Goã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’å­¦ã¹ã‚‹/è­°è«–ã§ãã‚‹</h3><p>ä»¥ä¸‹ã¯å‚åŠ ã—ã¦ã„ã‚‹/ç™ºè¡¨ã—ã¦ã„ã‚‹ãƒ¡ãƒ³ãƒãŒç´¹ä»‹ã—ã¦ã„ãŸå†…å®¹ã®ä¸€éƒ¨ã§ã™ã€‚å®Ÿç”¨çš„ãªãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚„ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªç‹¬ç‰¹ãªãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã¾ã§ã„ã‚ã„ã‚ã‚ã‚Šã¾ã™ã€‚</p><ul><li>ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŒã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«å‹ã‚’æº€ãŸã—ã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ã™ã‚‹æ–¹æ³•</li><li><code>[0]func()</code> ã®ã‚ˆã†ãªæ¯”è¼ƒä¸èƒ½ãªå‹ã‚’æ§‹é€ ä½“ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã‚‚ãŸã›ã‚‹ã¨æ§‹é€ ä½“ãŒ <code>==</code> æ¼”ç®—å­ã§æ¯”è¼ƒãŒã§ããªããªã‚‹</li><li><code>//go:linkname ...</code> ã¨ã™ã‚‹ã¨å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãªé–¢æ•°ãŒå‘¼ã³å‡ºã›ã‚‹</li><li>ã‚¯ãƒ­ãƒ¼ã‚ºã•ã‚Œã¦ã„ã‚‹ãƒãƒ£ãƒãƒ«ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã« <code>init</code> é–¢æ•°ã§ãƒãƒ£ãƒãƒ«ã‚’ã‚¯ãƒ­ãƒ¼ã‚ºã—ã¦ã„ã‚‹</li><li><code>for range</code> æ§‹æ–‡ã¯ãƒãƒ£ãƒãƒ«ã«ã‚‚ä½¿ãˆã‚‹</li><li>çµ„ã¿è¾¼ã¿é–¢æ•°ã® <code>close</code> ã§ãƒãƒ£ãƒãƒ«ã‚’ã‚¯ãƒ­ãƒ¼ã‚ºã™ã‚‹ã¨ã€è¤‡æ•°ã®ã‚´ãƒ«ãƒ¼ãƒãƒ³ãŒä¸€æ–‰ã«åŒã˜ãƒãƒ£ãƒãƒ«ã‚’ Read ã™ã‚‹ã“ã¨ãŒã§ãã‚‹</li><li><code>context</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’éƒ¨åˆ†å®Ÿè£…æ–¹æ³•</li><li><code>context</code> ã® <code>WithDeadline</code> é–¢æ•°ã§ <code>time.AfterFunc</code> é–¢æ•°ã§ä½¿ã‚ã‚Œã¦ã„ã‚‹</li><li><code>map</code> ã«å€¤ãŒå­˜åœ¨ã™ã‚‹ã‹ã®ãƒã‚§ãƒƒã‚¯ã€ç¬¬äºŒå¼•æ•° <code>ok</code> ã˜ã‚ƒãªã„ã“ã¨ã‚‚ã‚ã‚‹</li><li><code>flag</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚„ <code>path</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ãƒ‘ãƒ¼ã‚¹å‡¦ç†ã¯ä¸å¯§ã«å ´åˆåˆ†ã‘ã—ãŸã‚Šã€ä¸€æ–‡å­—ãšã¤æ–‡å­—åˆ—ã‚’è§£æã—ãŸã‚Šç´°ã‚„ã‹<ul><li>å…¸å‹çš„ãª <a href="https://www.geeksforgeeks.org/simplify-directory-path-unix-like/" target="_blank" rel="noopener">ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®å•é¡Œ</a></li></ul></li><li>ãƒ†ã‚¹ãƒˆã§ç•°å¸¸ç³»ã¨æ­£å¸¸ç³»ã‚’åˆ†ã‘ãŸã»ã†ãŒã€ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ãŒã‚·ãƒ³ãƒ—ãƒ«ã«ãªã‚Šãã†</li><li>ç•°å¸¸ç³»ã®ãƒ†ã‚¹ãƒˆã®å‘½åã§ <code>bad</code> ã¨ã„ã†å¤‰æ•°åã‚’ä½¿ã£ã¦ã„ã¦ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã“ã¨ãŒå‘½åã‹ã‚‰æ˜ã‚‰ã‹</li><li>æ¨™æº–å‡ºåŠ›ã‚’ä½¿ã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ <code>bytes.Buffer</code> ã§ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ã¦ <code>buf.String()</code> ã§çµæœã‚’å–å¾—ã—ã¦ãƒ†ã‚¹ãƒˆã—ã¦ã„ã‚‹</li><li>ãƒ†ã‚¹ãƒˆã§æ¨™æº–å‡ºåŠ›ãŒä¸è¦ã§ã‚ã‚Œã° <code>ioutil.Discard</code> ã§æ¨ã¦ã‚Œã°è‰¯ã„</li><li><code>ioutil.Discard</code> ã¯ <code>/dev/null</code> ã£ã½ã„ã‘ã©Goã®ã‚³ãƒ¼ãƒ‰ä¸Šã§ã®ã‚¢ãƒŠãƒ­ã‚¸ãƒ¼</li><li><code>iota</code> ã®ã‚¤ãƒ‡ã‚£ã‚ªãƒ ã‚ˆãè¦‹ã‚‹</li></ul><h3 id="Goä»¥å¤–ã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚‚å­¦ã¹ã‚‹-è­°è«–ã§ãã‚‹"><a href="#Goä»¥å¤–ã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚‚å­¦ã¹ã‚‹-è­°è«–ã§ãã‚‹" class="headerlink" title="Goä»¥å¤–ã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚‚å­¦ã¹ã‚‹/è­°è«–ã§ãã‚‹"></a>Goä»¥å¤–ã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚‚å­¦ã¹ã‚‹/è­°è«–ã§ãã‚‹</h3><ul><li><code>bytes/buffer.go</code> ã® Read ã§ã¯æœ€å°ã®ãƒãƒƒãƒ•ã‚¡ã‚µã‚¤ã‚ºãŒ 512 ãƒã‚¤ãƒˆãªã‚“ã ã‘ã©ã€ã“ã‚Œã£ã¦ä½•ï¼Ÿ<ul><li>HDD ã® 1 ã‚»ã‚¯ã‚¿ã®å®¹é‡ 512 ãƒã‚¤ãƒˆã«ã‚ã‚ã›ã¦ã„ã‚‹ã®ã§ã¯ãªã„ã‹</li></ul></li><li><code>flag</code> ã® <code>ExitOnError</code> ã®ã¨ã <code>os.Exit(2)</code> ã‚’å‘¼ã³å‡ºã—ã¦ã„ã‚‹ã‘ã©ã€<code>2</code> ã£ã¦ä½•ï¼Ÿ<ul><li>Bash ã® <a href="https://ja.wikipedia.org/wiki/%E7%B5%82%E4%BA%86%E3%82%B9%E3%83%86%E3%83%BC%E3%82%BF%E3%82%B9" target="_blank" rel="noopener">çµ‚äº†ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</a> ã® <code>ãƒ“ãƒ«ãƒˆã‚¤ãƒ³ã‚³ãƒãƒ³ãƒ‰ã®èª¤ç”¨</code> ã®ã“ã¨ã‚’æŒ‡ã—ã¦ã„ã‚‹ã®ã§ã¯ãªã„ã‹</li></ul></li></ul><h2 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h2><p>ç¤¾å†…ã§å–ã‚Šçµ„ã‚“ã§ã„ã‚‹ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¼šã®å†…å®¹ã¨é‹å–¶æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚Goã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¼šã¯æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å­¦ã¹ã€ã¾ãŸGoã‚‰ã—ã„ã‚³ãƒ¼ãƒ‰ã‚’å­¦ã¹ã‚‹è‰¯ã„ä¼šã§ã™ã€‚æœ¬è¨˜äº‹ãŒã¿ãªã•ã‚“ã®ä¼šç¤¾ã§ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¼šã‚’å®Ÿæ–½ã™ã‚‹ã¨ãã®å‚è€ƒã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚</p><h2 id="é–¢é€£ãƒªãƒ³ã‚¯"><a href="#é–¢é€£ãƒªãƒ³ã‚¯" class="headerlink" title="é–¢é€£ãƒªãƒ³ã‚¯"></a>é–¢é€£ãƒªãƒ³ã‚¯</h2><p>Goã«é–¢é€£ã—ãŸé€£è¼‰ä¼ç”»ãŒã‚ã‚Šã¾ã™ã€‚</p><ul><li><a href="[DynamoDBÃ—Goé€£è¼‰](https://future-architect.github.io/tags/DynamoDB%C3%97Go/)">DynamoDBÃ—Goé€£è¼‰</a></li><li><a href="https://future-architect.github.io/tags/GoCDK/">Go Cloud é€£è¼‰</a></li><li><a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCP é€£è¼‰</a><div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none; padding-left: 0;"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">1.</span><span style="display: inline-block; vertical-align: top;"><code>go list std | grep -v vender | wc -l</code> ã§åˆ†ã‹ã‚Šã¾ã™ã€‚</span><a href="#fnref:1" rev="footnote"> â†©</a></li><li id="fn:2"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">2.</span><span style="display: inline-block; vertical-align: top;">ä»Šå›ã¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¸€ç•ªä¸Šã®éšå±¤ã§é›†è¨ˆã—ã¦ã„ã¾ã™ã€‚å®Ÿéš›ã«ã¯ä¾‹ãˆã° <code>runtime</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãªã©ã¯ <code>runtime/debug</code>,  <code>runtime/pprof</code> ãªã©ç´°ã‹ãåˆ†ã‹ã‚Œã¦ã„ã¾ã™ã€‚</span><a href="#fnref:2" rev="footnote"> â†©</a></li><li id="fn:3"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">3.</span><span style="display: inline-block; vertical-align: top;">https://qiita.com/advent-calendar/2019/categories/programming_languages</span><a href="#fnref:3" rev="footnote"> â†©</a></li><li id="fn:4"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">4.</span><span style="display: inline-block; vertical-align: top;">https://future-architect.github.io/articles/20190729/</span><a href="#fnref:4" rev="footnote"> â†©</a></li></ol></div></div></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¼šã®ã™ã™ã‚&quot;&gt;&lt;a href=&quot;#æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¼šã®ã™ã™ã‚&quot; class=&quot;headerlink&quot; title=&quot;æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¼šã®ã™ã™ã‚&quot;&gt;&lt;/a&gt;æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¼šã®ã™
      
    
    </summary>
    
      <category term="Programming" scheme="https://future-architect.github.io/categories/Programming/"/>
    
    
      <category term="Go" scheme="https://future-architect.github.io/tags/Go/"/>
    
      <category term="CodeReadomg" scheme="https://future-architect.github.io/tags/CodeReadomg/"/>
    
  </entry>
  
  <entry>
    <title>ã‚¢ã‚¤ã‚³ãƒ³ã‚»ãƒƒãƒˆå…¬é–‹ï¼ãã®è£å´ã‚’èã„ã¦ã¿ãŸ</title>
    <link href="https://future-architect.github.io/articles/20200309/"/>
    <id>https://future-architect.github.io/articles/20200309/</id>
    <published>2020-03-09T01:13:26.000Z</published>
    <updated>2020-03-11T00:50:34.218Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>ã“ã‚“ã«ã¡ã¯ï¼Technology Innovation Groupï¼ˆTIGï¼‰ã®åƒè‘‰é§¿ã§ã™ï¼</p><p>ä»Šå›ã¯Future Tech Blogã€ã“ã‚Œã•ãˆã‚ã‚Œã°ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆå›³ãŒã ã„ãŸã„æã‘ã‚‹ã‚¢ã‚¤ã‚³ãƒ³ã‚»ãƒƒãƒˆã‚’å…¬é–‹ã—ã¾ã™ï¼ã€ã®è£å´ã‚’ã€ä¼ç”»ç™ºæ¡ˆè€…ã®æœ¨æ‘å„ªé‡Œã•ã‚“ã¸ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ã‚’ãŠå±Šã‘ã—ã¾ã™ã€‚</p><p>ç§ã‚‚ã‚¢ã‚¤ã‚³ãƒ³ä½œæˆã«æºã‚ã£ãŸã®ã§ã™ãŒã€è¯ã‚„ã‹ãªã‚¢ã‚¤ã‚³ãƒ³ã®è£å´ã®åœ°é“ãªè‹¦åŠ´ã‚„ã€å¤–éƒ¨å…¬é–‹ã«ã‚ˆã‚‹çŸ¥ã‚‰ãªã„äººã«ã§ã‚‚ä½¿ã£ã¦ã‚‚ã‚‰ãˆã‚‹å–œã³ã‚’æ„Ÿã˜ã¾ã—ãŸã€‚</p><h1 id="ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ã—ãŸäºº-æœ¨æ‘å„ªé‡Œã•ã‚“"><a href="#ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ã—ãŸäºº-æœ¨æ‘å„ªé‡Œã•ã‚“" class="headerlink" title="ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ã—ãŸäºº æœ¨æ‘å„ªé‡Œã•ã‚“"></a>ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ã—ãŸäºº æœ¨æ‘å„ªé‡Œã•ã‚“</h1><img src="/images/20200308/å†™çœŸâ‘ .JPG" class="img-middle-size"><blockquote><p>çµŒå–¶ã¨ITã‚’ãƒ‡ã‚¶ã‚¤ãƒ³ã™ã‚‹ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æ­´6å¹´ç›®ã€‚ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆãƒãƒ¼ãƒ ã§æ¥­å‹™ã‚’è¡Œã†å‚ã‚‰ã€Futureç™ºOSSã®ãƒ­ã‚´ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’æ‹…å½“ã—ã€2016å¹´ã€Œã“ã‚Œã•ãˆã‚ã‚Œã°ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³ãŒå¤§ä½“æã‘ã‚‹ã‚¢ã‚¤ã‚³ãƒ³ã‚»ãƒƒãƒˆã€ã‚’Future Tech Blogã«ã¦å…¬é–‹ã™ã‚‹ã€‚ã‚ã¾ã‚ŠçŸ¥ã‚‰ã‚Œã¦ã„ãªã„ãŒã€ä¸Šè¨˜è¨˜äº‹ã¯å¼Šç¤¾Tech Blogã®ã¯ã¦ãƒ–æ•°ç¬¬1ä½ã€‚ï¼ˆ2020å¹´2æœˆç¾åœ¨ï¼‰ç¤¾å†…å¤–ã®å¾ŒæŠ¼ã—ã‚’å—ã‘ã¦ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã—ãŸã€Œã“ã‚Œã•ãˆã‚ã‚Œã°ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆå›³ãŒã ã„ãŸã„æã‘ã‚‹ã‚¢ã‚¤ã‚³ãƒ³ã‚»ãƒƒãƒˆã€ã‚’2020å¹´ã«å…¬é–‹ã€‚ç¤¾å†…ã§ã¯ãƒ‡ã‚¶ã‚¤ãƒ³ã®å‹‰å¼·ä¼šã‚’å¹¾åº¦ã‹é–‹å‚¬ã—ã¦ã„ã‚‹ã€‚</p></blockquote><h2 id="èˆˆå‘³ã‚’ä¼ãˆã¦ã„ãŸã‚‰ã€ãƒãƒ£ãƒ³ã‚¹ãŒå·¡ã£ã¦ããŸ"><a href="#èˆˆå‘³ã‚’ä¼ãˆã¦ã„ãŸã‚‰ã€ãƒãƒ£ãƒ³ã‚¹ãŒå·¡ã£ã¦ããŸ" class="headerlink" title="èˆˆå‘³ã‚’ä¼ãˆã¦ã„ãŸã‚‰ã€ãƒãƒ£ãƒ³ã‚¹ãŒå·¡ã£ã¦ããŸ"></a>èˆˆå‘³ã‚’ä¼ãˆã¦ã„ãŸã‚‰ã€ãƒãƒ£ãƒ³ã‚¹ãŒå·¡ã£ã¦ããŸ</h2><br><p>ãƒ¼ãƒ¼ ãã‚‚ãã‚‚2016å¹´ã«å…¬é–‹ã•ã‚ŒãŸã‚¢ã‚¤ã‚³ãƒ³ã‚»ãƒƒãƒˆã¯ã©ã®ã‚ˆã†ãªãã£ã‹ã‘ã§ä½œã‚ã†ã¨æ€ã‚ã‚ŒãŸã®ã§ã™ã‹ï¼Ÿ</p><br><p>ã‚‚ã¨ã‚‚ã¨ç§ã¯ãƒ‡ã‚¶ã‚¤ãƒ³ã«èˆˆå‘³ãŒã‚ã‚Šã€BPYï¼ˆâ€»ï¼‰ãªã©ã®ç¤¾å†…ã‚¤ãƒ™ãƒ³ãƒˆå‘ã‘ã®è³‡æ–™ã®ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’æ‹…å½“ã•ã›ã¦ã‚‚ã‚‰ã£ã¦ã„ã¾ã—ãŸã€‚ã‚ã‚‹æ™‚ã«ç¤¾å†…ãƒ„ãƒ¼ãƒ«ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’ä½œæˆã—ã‚ˆã†ã¨ã„ã†è©±ãŒæŒã¡ä¸ŠãŒã‚Šã€ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’æ‹…å½“ã—ãªã„ã‹ã¨ã€ç§ã®å…ƒã¸è©±ãŒæ¥ãŸã‚“ã§ã™ã­ã€‚ãƒãƒ¼ãƒ å†…ã‚„ã‚°ãƒ«ãƒ¼ãƒ—ã®ãƒªãƒ¼ãƒ€ãƒ¼ã« <strong>ç§ãŒãƒ‡ã‚¶ã‚¤ãƒ³ã«èˆˆå‘³ãŒã‚ã‚‹ã¨ã„ã†è©±ãŒä¼ã‚ã£ã¦ã„ãŸã®ã§ã€æ¨è–¦ã—ã¦ãã‚ŒãŸã‚“ã ã¨æ€ã„ã¾ã™ã€‚</strong></p><blockquote><p><strong>â€»BPYï¼ˆBest Project of the Year)</strong><br>å¹´æœ«ã«1å¹´ã§æœ€ã‚‚ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã‚‰ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å…¨ç¤¾å“¡ã®æŠ•ç¥¨ã§æ±ºã‚ã€æ „èª‰ã‚’ç§°ãˆã‚‹ã‚¤ãƒ™ãƒ³ãƒˆ</p></blockquote><p>ç¤¾å†…ãƒ„ãƒ¼ãƒ«ã®ã‚¢ã‚¤ã‚³ãƒ³ä½œæˆãŒé€²ã‚€ã†ã¡ã«ã€æŠ˜è§’ã ã‹ã‚‰ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³ã‚’æ›¸ããŸã‚ã«å¿…è¦ãª <strong>ä»–ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚‚ä¸€é€šã‚Šä½œæˆã—ã‚ˆã†ã‚ˆ</strong>ã€ã¨ã„ã†ã“ã¨ã«ãªã‚Šã¾ã—ã¦ã€‚ãã‚ŒãŒã‚¢ã‚¤ã‚³ãƒ³ã‚»ãƒƒãƒˆã‚’ä½œæˆã™ã‚‹ã«è‡³ã£ãŸã€æœ€åˆã®ãã£ã‹ã‘ã§ã™ã€‚</p><img src="/images/20200308/å†™çœŸâ‘¡.JPG" class="img-middle-size"><p>ãã‚Œã¾ã§ã¯ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³ä½œæˆã«å¿…è¦ãªã‚¢ã‚¤ã‚³ãƒ³ã‚’æ¢ã™æ‰‹é–“ãŒã‚ã‚Šã€è¦‹ã¤ã‘ã¦ã‚‚ãƒ†ã‚¤ã‚¹ãƒˆãŒãƒãƒ©ãƒãƒ©ã§ä½¿ã„ã¥ã‚‰ã„ã¨ã„ã†ã“ã¨ãŒã‚ã£ãŸã®ã§ã€<strong>ã“ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚»ãƒƒãƒˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚Œã°å¿…è¦ãªã‚¢ã‚¤ã‚³ãƒ³ãŒã ã„ãŸã„ä¸€å¼ãã‚ãˆã°ã„ã„ãª</strong>ã¨æ€ã£ã¦ä½œæˆã—ã¾ã—ãŸã€‚</p><h2 id="ä½•ã¯ã¨ã‚‚ã‚ã‚Œã‚¢ã‚¤ã‚³ãƒ³åˆ¶ä½œã—ã¦ã¿ã‚‹"><a href="#ä½•ã¯ã¨ã‚‚ã‚ã‚Œã‚¢ã‚¤ã‚³ãƒ³åˆ¶ä½œã—ã¦ã¿ã‚‹" class="headerlink" title="ä½•ã¯ã¨ã‚‚ã‚ã‚Œã‚¢ã‚¤ã‚³ãƒ³åˆ¶ä½œã—ã¦ã¿ã‚‹"></a>ä½•ã¯ã¨ã‚‚ã‚ã‚Œã‚¢ã‚¤ã‚³ãƒ³åˆ¶ä½œã—ã¦ã¿ã‚‹</h2><br><p>ãƒ¼ãƒ¼ å®Ÿéš›ã«ã‚¢ã‚¤ã‚³ãƒ³ã‚’ä½œæˆã—ã¦ã¿ã¦ã„ã‹ãŒã§ã—ãŸã‹ï¼Ÿ</p><br><p>å½“ç¤¾ã¯ITã‚³ãƒ³ã‚µãƒ«ã®ä¼šç¤¾ãªã®ã§æ­£ç›´ãƒ‡ã‚¶ã‚¤ãƒ³ã«çŸ¥è¦‹ã®ã‚ã‚‹äººã¯å°‘ãªãã€ä¸€äººã§æ‰‹æ¢ã‚Šã§é€²ã‚ã‚‹ã‚ˆã†ãªçŠ¶æ…‹ã§ã—ãŸã€‚ã§ã‚‚ã€èˆˆå‘³ã®ã‚ã£ãŸãƒ‡ã‚¶ã‚¤ãƒ³ä½œæˆã‚’ä¼šç¤¾ã¨ã—ã¦ã‚„ã‚‰ã›ã¦ã‚‚ã‚‰ãˆãŸã®ã§ã€ãã“ã¯é¢ç™½ã‹ã£ãŸã§ã™ã­ã€‚</p><p>å®Œæˆã—ãŸã‚¢ã‚¤ã‚³ãƒ³ã‚»ãƒƒãƒˆã¯æœ€åˆã¯ç¤¾å†…ãƒãƒ¼ã‚¿ãƒ«ã§å†…éƒ¨å‘ã‘ã«å…¬é–‹ã—ã€ææ¡ˆæ›¸ãªã©ã§ä½¿ã£ã¦ã‚‚ã‚‰ã£ã¦ã„ãŸã‚“ã§ã™ãŒã€FutureãŒTech Blogã‚’å§‹ã‚ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã€æŠ˜è§’ãªã‚‰å¤–éƒ¨ã¸å…¬é–‹ã—ãªã„ã‹ã¨ææ¡ˆãŒã‚ã‚Šã€å…¬é–‹ã™ã‚‹ã«è‡³ã‚Šã¾ã—ãŸã€‚</p><p><a href="https://future-architect.github.io/articles/20160721/">https://future-architect.github.io/articles/20160721/</a></p><h2 id="ãŠå®¢æ§˜ã®è³‡æ–™ã«è¦‹è¦šãˆã®ã‚ã‚‹ã€Œã‚ã®ã‚¢ã‚¤ã‚³ãƒ³ã€"><a href="#ãŠå®¢æ§˜ã®è³‡æ–™ã«è¦‹è¦šãˆã®ã‚ã‚‹ã€Œã‚ã®ã‚¢ã‚¤ã‚³ãƒ³ã€" class="headerlink" title="ãŠå®¢æ§˜ã®è³‡æ–™ã«è¦‹è¦šãˆã®ã‚ã‚‹ã€Œã‚ã®ã‚¢ã‚¤ã‚³ãƒ³ã€"></a>ãŠå®¢æ§˜ã®è³‡æ–™ã«è¦‹è¦šãˆã®ã‚ã‚‹ã€Œã‚ã®ã‚¢ã‚¤ã‚³ãƒ³ã€</h2><br><p>ãƒ¼ãƒ¼ ãªã‚‹ã»ã©ã€‚ç§ã¯2016å¹´å…¥ç¤¾ãªã®ã§æ–°äººç ”ä¿®ä¸­ã«ã‚¢ã‚¤ã‚³ãƒ³ã‚»ãƒƒãƒˆã®å…¬é–‹è¨˜äº‹ã‚’ã¿ã¦ã€ãªã‹ãªã‹ç•°è‰²ã ã£ãŸã®ã§å°è±¡ã«æ®‹ã£ã¦ã„ã¾ã™ã€‚ä»Šå›ã¯ã©ã®ã‚ˆã†ãªçµŒç·¯ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã«è‡³ã£ãŸã®ã§ã™ã‹ï¼Ÿ<br><strong>ãŠå®¢æ§˜ãŒã‚¢ã‚¤ã‚³ãƒ³ã‚’ä½¿ã£ã¦ã„ãŸ</strong>ã€ã¨ã„ã†è©±ã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¡ãƒ³ãƒãƒ¼ã‹ã‚‰èã„ãŸã“ã¨ãŒãã£ã‹ã‘ã§ã™ã­ã€‚</p><br><p>ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®èª°ã‹ãŒå®£ä¼ã—ãŸã¨ã„ã†ã‚ã‘ã§ã¯ãªãã€ãŸã¾ãŸã¾ä½¿ã£ã¦ã„ãŸã‚ˆã†ã§ã€‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¡ãƒ³ãƒãƒ¼ãŒãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®å ´ã§ãŠå®¢æ§˜ãŒä½œæˆã—ãŸã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³ã«è¦‹è¦šãˆãŒã‚ã‚Šã€ã€Œ<strong>ã“ã‚Œã€æœ¨æ‘ã•ã‚“ã®ã‚¢ã‚¤ã‚³ãƒ³ã§ã¯ï¼Ÿ</strong>ã€ã¨ãªã£ã¦ã€æ•™ãˆã¦ãã‚Œã¾ã—ãŸã€‚<br>å˜ç´”ã«ä½¿ã£ã¦ã‚‚ã‚‰ãˆã¦ã„ã‚‹ã®ãŒå¬‰ã—ã‹ã£ãŸã§ã™ã—ã€å‰å›ä½œæˆã‹ã‚‰æœŸé–“ã‚‚çµŒã¡ã‚¢ã‚¤ã‚³ãƒ³è¿½åŠ ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚‚ã‚ã£ãŸã®ã§ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã™ã‚‹è©±ã«ãªã‚Šã¾ã—ãŸã€‚</p><img src="/images/20200308/å›³â‘ .png" class="img-middle-size"><p>2016å¹´ã«å…¬é–‹ã—ãŸä½œã£ãŸã‚¢ã‚¤ã‚³ãƒ³</p><p>å‰åŠã¯ã“ã“ã¾ã§ã€‚ç¤¾å¤–ã§ä½¿ã£ã¦ã‚‚ã‚‰ãˆã¦ã„ã‚‹ã®ã¯å¬‰ã—ã„ã§ã™ã­ã€‚ç§ã‚‚ãœã²ã€Œã“ã‚Œè‡ªåˆ†ã®ä½œã£ãŸã‚ã‚Œã§ã¯ï¼Ÿã€ã®ç¾å ´ã«é­é‡ã—ãŸã„ã§ã™ã€‚</p><h2 id="å¾ŒåŠã¯ã„ã‚ˆã„ã‚ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã®è£å´ã¸è¿«ã‚Šã¾ã™ã€‚æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚¢ã‚¤ã‚³ãƒ³ã«è¾¼ã‚ã‚‰ã‚ŒãŸæ€ã„ã«ã¤ã„ã¦èãã¾ã™ã€‚"><a href="#å¾ŒåŠã¯ã„ã‚ˆã„ã‚ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã®è£å´ã¸è¿«ã‚Šã¾ã™ã€‚æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚¢ã‚¤ã‚³ãƒ³ã«è¾¼ã‚ã‚‰ã‚ŒãŸæ€ã„ã«ã¤ã„ã¦èãã¾ã™ã€‚" class="headerlink" title="å¾ŒåŠã¯ã„ã‚ˆã„ã‚ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã®è£å´ã¸è¿«ã‚Šã¾ã™ã€‚æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚¢ã‚¤ã‚³ãƒ³ã«è¾¼ã‚ã‚‰ã‚ŒãŸæ€ã„ã«ã¤ã„ã¦èãã¾ã™ã€‚"></a>å¾ŒåŠã¯ã„ã‚ˆã„ã‚ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã®è£å´ã¸è¿«ã‚Šã¾ã™ã€‚æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚¢ã‚¤ã‚³ãƒ³ã«è¾¼ã‚ã‚‰ã‚ŒãŸæ€ã„ã«ã¤ã„ã¦èãã¾ã™ã€‚</h2><br><p>ãƒ¼ãƒ¼ ä»Šå›ã®ã‚¢ã‚¤ã‚³ãƒ³ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã«ã‚ãŸã‚Šã€ä»–ã¨ã®å·®åˆ¥åŒ–ãªã©æ„è­˜ã—ãŸç‚¹ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿä¾‹ãˆã°ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ™ãƒ³ãƒ€ãƒ¼ãªã©ã¯å…¬å¼ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚»ãƒƒãƒˆã‚’å…¬é–‹ã—ã¦ã„ã¾ã™ãŒã€‚</p><br><p>ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆå›³ã‚’æ›¸ããŸã‚ã¨ã„ã†å¤§å…ƒã®ç›®çš„ã¯å‰å›ã¨åŒæ§˜ã§ã™ãŒã€ <strong>ã‚ˆã‚Šæ±ç”¨æ€§ã‚’æŒãŸã›ã‚‹ç‚¹</strong> ã‚’æ„è­˜ã—ã¾ã—ãŸã­ã€‚å‰å›ã¯ç¤¾å†…ãƒ„ãƒ¼ãƒ«ã‚’åŸºç‚¹ã¨ã—ã¦ã‚¢ã‚¤ã‚³ãƒ³ã‚’é¸å®šã—ãŸã‚“ã§ã™ãŒã€ä»Šå›ã¯æ‰€å±ã™ã‚‹TIGå†…ã§ã©ã®ã‚ˆã†ãªã‚¢ã‚¤ã‚³ãƒ³ãŒæ¬²ã—ã„ã‹ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã‚’ã¨ã‚Šã€æŠ€è¡“çš„ã«æµè¡Œã‚Šã®ã‚‚ã®ã‚„æ¥­å‹™ã§ä½¿ãˆã‚‹ã‚‚ã®ã‚’é¸å®šã—ã¦ã„ã¾ã™ã€‚</p><p>ã¾ãŸç¤¾å¤–ã§ã‚‚æ±ç”¨çš„ã«ä½¿ã„ã‚„ã™ã„ã‚ˆã†ã«ã€<strong>46ç¨®é¡ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’è¿½åŠ ã—ã€è‰²é•ã„ã‚’å«ã‚ã¦ãƒˆãƒ¼ã‚¿ãƒ«ã§107ç¨®é¡ã®æ§˜ã€…ãªãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³</strong> ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’ã€PNGå½¢å¼ã¨SVGå½¢å¼ã§ç”¨æ„ã—ã¾ã—ãŸã€‚</p><img src="/images/20200308/å›³â‘¡.png" class="img-middle-size"><p>ä»Šå›æ–°ãŸã«å…¬é–‹ã—ãŸã‚¢ã‚¤ã‚³ãƒ³<br>ä½¿ã„å‹æ‰‹ã‚’è€ƒãˆã€äººã®ãƒ‡ã‚¶ã‚¤ãƒ³ã¯ã‚«ãƒ©ãƒ¼ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è±Šå¯Œã«ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚ä¾‹ãˆã°ã€ä¼æ¥­ã‚«ãƒ©ãƒ¼ã«åˆã‚ã›ã¦ä½¿ã£ã¦ã‚‚ã‚‰ã£ã¦ã€æ‰€å±ä¼šç¤¾ã‚’åŒºåˆ¥ã™ã‚‹ã‚ˆã†ãªæ„Ÿã˜ã§ä½¿ãˆã‚‹ã‹ãªã¨ã€‚æ¥­ç•Œã‚„è·ç¨®ã«åˆã‚ã›ãŸãƒ‡ã‚¶ã‚¤ãƒ³ã‚’ç”¨æ„ã™ã‚‹æ¡ˆã‚‚ã‚ã£ãŸã‚“ã§ã™ãŒã€ç¨®é¡ã¯ç„¡æ•°ã«å­˜åœ¨ã—ã¦ã„ã¦ä½œæˆã—ãã‚Œãªã„ã§ã™ã—ã€æ±ç”¨æ€§ã«ã‚‚æ¬ ã‘ã‚‹ã®ã§ã‚ãˆã¦è‰²ã ã‘ã«ã—ã¾ã—ãŸã€‚</p><p>ã¾ãŸã€æ§˜ã€…ãªãƒ‡ãƒã‚¤ã‚¹ãŒã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«æ¥ç¶šã•ã‚Œã‚‹æ™‚ä»£ã§ã™ã®ã§ã€è‡ªå‹•è»Šã‚„ã‚¹ãƒãƒ¼ãƒˆã‚¹ãƒ”ãƒ¼ã‚«ãƒ¼ãªã©ã¨ã„ã£ãŸãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å¢—ã‚„ã—ã¾ã—ãŸã€‚<br>ãã‚Œã‹ã‚‰ã€å‰å›ã¯ã‚·ã‚¹ãƒ†ãƒ ãªã©ã®é™çš„ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒå¤šã‹ã£ãŸã‚“ã§ã™ãŒã€ <strong>ä»Šå›ã¯ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãªã©å‹•çš„ãªè¡¨ç¾ã§ãã‚‹ã‚¢ã‚¤ã‚³ãƒ³ã‚’ç”¨æ„</strong> ã—ã¾ã—ãŸã€‚<br>ã‚ˆã‚Šä½¿ã„ã‚„ã™ããªã‚‹ã‚ˆã†å¿ƒãŒã‘ãŸã®ã§ã€<strong>ãœã²å®Ÿå‹™ã®ã‚¹ãƒ©ã‚¤ãƒ‰ãªã©ã§ä½¿ã£ã¦ã‚‚ã‚‰ã„ãŸã„</strong>ã¨æ€ã„ã¾ã™ã€‚</p><h2 id="ãƒãƒ¼ãƒ ã§ã‚¢ã‚¤ã‚³ãƒ³ä½œæˆã€‚ãƒã‚¦ãƒã‚¦ã‚’æ¨ªå±•é–‹ã™ã‚‹"><a href="#ãƒãƒ¼ãƒ ã§ã‚¢ã‚¤ã‚³ãƒ³ä½œæˆã€‚ãƒã‚¦ãƒã‚¦ã‚’æ¨ªå±•é–‹ã™ã‚‹" class="headerlink" title="ãƒãƒ¼ãƒ ã§ã‚¢ã‚¤ã‚³ãƒ³ä½œæˆã€‚ãƒã‚¦ãƒã‚¦ã‚’æ¨ªå±•é–‹ã™ã‚‹"></a>ãƒãƒ¼ãƒ ã§ã‚¢ã‚¤ã‚³ãƒ³ä½œæˆã€‚ãƒã‚¦ãƒã‚¦ã‚’æ¨ªå±•é–‹ã™ã‚‹</h2><br><p>ãƒ¼ãƒ¼ å‰å›ã‹ã‚‰ã®é•ã„ã¨ã„ãˆã°ã€ä»Šå›ã¯ãƒãƒ¼ãƒ ã§ã‚¢ã‚¤ã‚³ãƒ³ä½œæˆã‚’ã—ã¾ã—ãŸã‚ˆã­ã€‚ç§ã‚‚ãŠæ‰‹ä¼ã„ã—ã¾ã—ãŸãŒã€ä½•ã‹ãã£ã‹ã‘ãŒã‚ã£ãŸã‚“ã§ã—ã‚‡ã†ã‹ï¼Ÿ</p><br><p>ã‚‚ã¨ã‚‚ã¨ã¯å‰å›ã¨åŒæ§˜ã«ã²ã¨ã‚Šã§ä½œæˆã™ã‚‹æƒ³å®šã ã£ãŸã‚“ã§ã™ãŒã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¡ãƒ³ãƒãƒ¼ã«ã‚¢ã‚¤ã‚³ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã®è©±ã‚’ã—ãŸã¨ã“ã‚ã€äººã‚’å‹Ÿã£ã¦ãƒãƒ¼ãƒ ã§ã‚„ã£ã¦ã¿ã¦ã¯ã©ã†ã‹ã¨ææ¡ˆã•ã‚Œã¾ã—ãŸã€‚ãƒ‡ã‚¶ã‚¤ãƒ³ã«èˆˆå‘³ã‚ã‚‹ã‘ã©ã€Illustratorãªã©ã®ãƒ„ãƒ¼ãƒ«ä½¿ã£ãŸã“ã¨ãªãã€ <strong>ä½•ã‹ã‚‰æ‰‹ã‚’ã¤ã‘ã‚Œã°ã„ã„ã‹åˆ†ã‹ã‚‰ãªã„äººãŸã¡ã«ã€ãã£ã‹ã‘ã‚’ä¸ãˆã‚‰ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã‹ã‚‰</strong>ã€ã¨ã€‚</p><p>å®Ÿéš›ã«å‘¨ã‚Šã«èã„ã¦ã¿ã‚‹ã¨èˆˆå‘³ã‚ã‚‹äººãŒã„ãŸã®ã§ã€ä»Šå›ã¯äººã‚’å‹Ÿã£ã¦ãƒãƒ¼ãƒ ã§ã‚„ã‚‹å½¢ã«ãªã‚Šã¾ã—ãŸã€‚ãƒãƒ¼ãƒ ã®å…¨ä½“ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®å ´ã§ãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†ã—ã¦ã¿ãŸã¨ã“ã‚ã€ <strong>æœ‰å¿—ã®æ´»å‹•ã«ã‚‚é–¢ã‚ã‚‰ãšä½•äººã‚‚é›†ã¾ã£ã¦ãã‚Œã¦ã€å¬‰ã—ã‹ã£ãŸã§ã™ã­ã€‚</strong></p><img src="/images/20200308/å†™çœŸâ‘¢.JPG" class="img-middle-size"><br><p>ãƒ¼ãƒ¼ ãªã‚‹ã»ã©ã€ãã†ã„ã†çµŒç·¯ã ã£ãŸã®ã§ã™ã­ã€‚ç§ã‚‚ã‚„ã£ã¦ã¿ãŸã‹ã£ãŸã“ã¨ãªã®ã§ã€äººã‚’å‹Ÿã£ã¦ã‚‚ã‚‰ã£ã¦ã‚ˆã‹ã£ãŸã§ã™ã€‚å®Ÿéš›ã«ãƒãƒ¼ãƒ ã§é€²ã‚ã‚‹ã«ã‚ãŸã‚Šã€æ³¨æ„ã—ãŸç‚¹ãªã©ã‚ã‚Šã¾ã™ã‹ï¼Ÿ</p><br><p><strong>ãƒ¡ãƒ³ãƒãƒ¼ã«ã¯ã¾ãšãƒ„ãƒ¼ãƒ«ã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã£ã¦ã‚‚ã‚‰ã„ãŸã‹ã£ãŸ</strong>ã®ã§ã€ãƒ‡ã‚¶ã‚¤ãƒ³ã¯ç§ãŒè€ƒãˆã¦ã€ä½œæˆã‚’ãƒ¡ãƒ³ãƒãƒ¼ã«æ‰‹ä¼ã£ã¦ã‚‚ã‚‰ã†ã¨ã„ã†å½¢ã«ã—ã¾ã—ãŸã€‚<br>ã¨ã‚Šã‚ãˆãš<strong>ãƒ„ãƒ¼ãƒ«ãŒä½¿ãˆã‚Œã°ã€ã‚ã¨ã¯å„ã€…ãƒ‡ã‚¶ã‚¤ãƒ³ãŒå¿…è¦ãªæ™‚ã«é€²ã‚ã‚‰ã‚Œã‚‹</strong>ã¨æ€ã£ãŸã®ã§ã€‚<br>ä»Šå›ã¯Illustratorã‚’ä½¿ã„ã¾ã—ãŸã€‚ãƒãƒ³ã‚ºã‚ªãƒ³ã®è³‡æ–™ã‚’ä½œã£ã¦ã€<strong>Illustratorè¬›åº§ã‚’é–‹å‚¬ã™ã‚‹ã¨ã“ã‚ã‹ã‚‰</strong>å§‹ã‚ã¾ã—ãŸã€‚ã“ã¡ã‚‰ã§ç”¨æ„ã—ãŸã‚µãƒ³ãƒ—ãƒ«ã‚’ä½œã£ã¦ã‚‚ã‚‰ã„ãªãŒã‚‰ã€Illustratorã®æ“ä½œæ–¹æ³•ã‚’å­¦ã‚“ã§ã‚‚ã‚‰ã†æ„Ÿã˜ã§ã™ã­ã€‚</p><p>ä¸€é€šã‚Šã‚¢ã‚¤ã‚³ãƒ³ä½œæˆã«å¿…è¦ãªæ“ä½œã‚’è¦šãˆãŸã‚‰ã€ä¸€äººã«æ•°ç¨®é¡ã‚¢ã‚¤ã‚³ãƒ³ã‚’å‰²ã‚Šå½“ã¦ã€ä½œæˆã—ã¦ã‚‚ã‚‰ã„ã¾ã—ãŸã€‚ä½œæ¥­æ™‚é–“ã‚‚é»™ã€…ä¼šã®ã‚ˆã†ã«æ™‚é–“ã®æ ã‚’è¨­ã‘ã¦ã€ã¿ã‚“ãªã§ä¼šè­°å®¤ã«ã‚ã¤ã¾ã£ã¦ã‚„ã‚Šã¾ã—ãŸã€‚å„ã€…ç©ºã„ãŸæ™‚é–“ã«ä½œã£ã¦ã­ã€ã¨ã™ã‚‹ã¨ã€ãªã‹ãªã‹ä½œã‚‰ãªã„ã¨æ€ã£ãŸã®ã§ï¼ˆç¬‘ï¼‰</p><p>ä½œæˆä½œæ¥­è‡ªä½“ã‚‚ã€å„ã€…ã«æ‰‹ã‚’å‹•ã‹ã—ã¦ã‚‚ã‚‰ã„ã€ç§ã¯å£é ­ã§ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã™ã‚‹ã®ã¿ã§ã€<strong>ã§ãã‚‹ã ã‘åŠ¹ç‡ã‚ˆããƒ¡ãƒ³ãƒãƒ¼ã®ã‚¹ã‚­ãƒ«ãŒä¸ŠãŒã‚‹ã‚ˆã†ã«</strong>æ„è­˜ã—ã¾ã—ãŸã€‚<br>æœ€å¾Œã«ãƒ¡ãƒ³ãƒãƒ¼ãŒä½œã£ãŸã‚¢ã‚¤ã‚³ãƒ³ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ä½œæ¥­ã‚„ã€å…¨ä½“ã®ãƒãƒ©ãƒ³ã‚¹ã‚’æ•´ãˆãŸã‚Šã—ãŸã‚“ã§ã™ãŒã€ã“ã‚Œã ã‘ã¯ãƒãƒ¼ãƒ ã§ã¯å‡ºæ¥ãªã„ã®ã§å­¤ç‹¬ãªä½œæ¥­ã§ã—ãŸã­ã€‚å¯¾è±¡ã¨ãªã‚‹ãƒ•ã‚¡ã‚¤ãƒ«æ•°ãŒã‹ãªã‚Šã®æ•°ã ã£ãŸã®ã§ã€åœ°å‘³ã ã‘ã©ã‹ãªã‚Šå¤§å¤‰ã§ã—ãŸã€‚ç„¡äº‹å…¬é–‹ã¾ã§æ¼•ãç€ã‘ã‚‹ã“ã¨ãŒã§ãã¦ã‚ˆã‹ã£ãŸã§ã™ã€‚<br>ã¾ãŸã€ä»Šå›ã®æ´»å‹•ã‚’é€šã—ã¦Illustratorã®ä½¿ã„æ–¹ã‚’å­¦ã‚“ã ã“ã¨ã§ã€å€‹äººçš„ã«Illustratorã‚’è³¼å…¥ã—ã¦ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’å§‹ã‚ãŸäººã‚‚å‡ºã¦ãã¾ã—ãŸã€‚ãã®è©±ã‚’èã„ã¦ã€ãƒãƒ¼ãƒ ã§ã‚„ã£ã¦ã‚ˆã‹ã£ãŸãªã¨æ€ã„ã¾ã—ãŸã€‚</p><h2 id="ã¨ã‚Šã‚ãˆãšå§‹ã‚ãŸã“ã¨ãŒä»Šå¾Œã®ã‚­ãƒ£ãƒªã‚¢ã¸"><a href="#ã¨ã‚Šã‚ãˆãšå§‹ã‚ãŸã“ã¨ãŒä»Šå¾Œã®ã‚­ãƒ£ãƒªã‚¢ã¸" class="headerlink" title="ã¨ã‚Šã‚ãˆãšå§‹ã‚ãŸã“ã¨ãŒä»Šå¾Œã®ã‚­ãƒ£ãƒªã‚¢ã¸"></a>ã¨ã‚Šã‚ãˆãšå§‹ã‚ãŸã“ã¨ãŒä»Šå¾Œã®ã‚­ãƒ£ãƒªã‚¢ã¸</h2><br><p>ãƒ¼ãƒ¼ ç§ã‚‚ãƒãƒ³ã‚ºã‚ªãƒ³ã§ã¯ãŠä¸–è©±ã«ãªã‚Šã¾ã—ãŸã€‚ãã—ã¦ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŠç–²ã‚Œã•ã¾ã§ã—ãŸã€‚ãŠã‹ã’ã•ã¾ã§ç§ã‚‚ä¸€äººã§ãƒ‡ã‚¶ã‚¤ãƒ³ä½œæˆã‚’é€²ã‚ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚æœ€å¾Œã«ã€æœ¨æ‘ã•ã‚“ãŒä»Šå¾Œã‚„ã£ã¦ã¿ãŸã„ã“ã¨ã‚„ã€ãƒãƒ£ãƒ¬ãƒ³ã‚¸ãªã©ã‚ã‚Œã°ãŠèã‹ã›ãã ã•ã„ã€‚</p><br><p>å®Ÿã¯ã€ã“ã‚Œã‹ã‚‰å¤§å­¦ã§å¿ƒç†å­¦ã‚’å­¦ã¼ã†ã‹ã¨æ€ã£ã¦ã„ã¾ã™ã€‚<strong>ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’å­¦ã‚“ã§ã„ãã«ã¤ã‚Œã¦ã€äººé–“ã®èªçŸ¥ã‚„æ€è€ƒã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’æ„è­˜ã™ã‚‹ã“ã¨</strong> ãŒé‡è¦ã§ã‚ã‚‹ã¨æ„Ÿã˜ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p><p>é¢ç™½ã„ã¨æ€ã£ãŸã®ãŒã€<strong>ä½œã‚‹å´ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚‚äººãã‚Œãã‚Œ</strong>ã¨ã„ã†ã“ã¨ã§ã™ã€‚ä»Šå›ã®ã‚¢ã‚¤ã‚³ãƒ³ä½œæˆã®ãƒãƒ³ã‚ºã‚ªãƒ³ã§ã‚‚ã€ã‚µãƒ³ãƒ—ãƒ«ã¨åŒã˜å›³ã‚’å„ãƒ¡ãƒ³ãƒãƒ¼ã«ä½œã£ã¦ã‚‚ã‚‰ã£ãŸã‚“ã§ã™ãŒã€ãã®éš›ã€è©³ç´°ãªä½œæˆæ‰‹é †ã¯æç¤ºã—ã¾ã›ã‚“ã§ã—ãŸã€‚ã™ã‚‹ã¨ã€å½¢ã‚’å®Œç’§ã«ä½œã£ã¦ã‹ã‚‰è‰²ã‚’ä¹—ã›ã‚‹äººãŒã„ãŸã‚Šã€å…¨ä½“åƒã‚’ä½œã£ã¦ã‹ã‚‰å¾®èª¿æ•´ã‚’ç¹°ã‚Šè¿”ã™äººãŒã„ãŸã‚Šã€è‡ªç„¶ã¨å®Œæˆã¾ã§ã«å€‹äººã”ã¨ã®æ‰‹é †ãŒã‚ã‚Šã¾ã—ãŸã€‚<strong>ã“ã†ã„ã£ãŸæ€è€ƒæ³•ã®é•ã„ã‚’æ·±æ˜ã‚Šã—ã¦ã„ã‘ã‚Œã°ã€ãƒ‡ã‚¶ã‚¤ãƒ³ã«ã‚ˆã‚‹ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚‚ã‚ˆã‚ŠåŠ¹æœçš„ãªã‚‚ã®ã«ãªã‚‹ã®ã§ã¯</strong>ã€ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚</p><p>æ™®æ®µã¯ITã‚³ãƒ³ã‚µãƒ«ã¨ã—ã¦ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½œã£ã¦ã„ãä»•äº‹ã‚’ã—ã¦ã„ã¾ã™ãŒã€ä»Šå¾Œã¯ã‚ˆã‚Šäººé–“ã«ã‚‚ç€ç›®ã—ã¦è¦–é‡ã‚’åºƒã’ã¦ã„ããŸã„ã§ã™ã€‚</p><img src="/images/20200308/å†™çœŸâ‘¤.JPG" class="img-middle-size"><p>ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ã‚’çµ‚ãˆã¦ã€å‰ä¾‹ã®ãªã„ã“ã¨ã«æœæ•¢ã«ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ãŸæœ¨æ‘ã•ã‚“ã®å§¿ã¯ã€ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®ã€Œ<strong>ãªã„ã‚‚ã®ã¯ã¤ãã‚‹</strong>ã€ã‚’ã¾ã•ã«ä½“ç¾ã—ã¦ã„ãŸäº‹ä¾‹ã ã¨æ€ã„ã¾ã—ãŸã€‚<br><strong>ã‚„ã‚ŠãŸã„ã“ã¨ã‚’æœ€å¾Œã¾ã§ã‚„ã‚Šãã‚‹ç†±æ„ã¨æœªæ¥ã®ãƒ“ã‚¸ãƒ§ãƒ³</strong>ã«ç§ã‚‚åˆºæ¿€ã‚’å—ã‘ã¾ã—ãŸï¼</p><hr><img src="/images/20200308/ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ã‚¢.jpg" class="img-middle-size"><hr><p>é–¢é€£è¨˜äº‹:</p><ul><li><a href="https://future-architect.github.io/articles/20200204/">ã“ã‚Œã•ãˆã‚ã‚Œã°ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆå›³ãŒã ã„ãŸã„æã‘ã‚‹ã‚¢ã‚¤ã‚³ãƒ³ã‚»ãƒƒãƒˆã‚’å…¬é–‹ã—ã¾ã™ï¼</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h1&gt;&lt;p&gt;ã“ã‚“ã«ã¡ã¯ï¼Technology Innovation Groupï¼ˆTIGï¼‰ã®åƒè‘‰é§¿ã§ã™ï¼&lt;/p&gt;
&lt;p&gt;ä»Šå›ã¯Future
      
    
    </summary>
    
      <category term="ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼" scheme="https://future-architect.github.io/categories/%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%93%E3%83%A5%E3%83%BC/"/>
    
    
      <category term="icon" scheme="https://future-architect.github.io/tags/icon/"/>
    
  </entry>
  
  <entry>
    <title>DynamoDBÃ—Go#3 Go CDKã§ã©ã“ã¾ã§ã„ã‘ã‚‹ï¼Ÿæ©Ÿèƒ½ã‚’èª¿ã¹ã¦ã¿ãŸ</title>
    <link href="https://future-architect.github.io/articles/20200228/"/>
    <id>https://future-architect.github.io/articles/20200228/</id>
    <published>2020-02-28T01:13:26.000Z</published>
    <updated>2020-03-09T04:33:45.468Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>ã“ã‚“ã«ã¡ã¯ã€TIG DXãƒ¦ãƒ‹ãƒƒãƒˆ<a href="https://twitter.com/laqiiz" target="_blank" rel="noopener">çœŸé‡</a>ã§ã™ã€‚ã“ã®æŠ€è¡“ãƒ–ãƒ­ã‚°ã®é‹å–¶ã‚‚ã—ã¦ã„ã¾ã™ã€‚</p><p><a href="https://future-architect.github.io/tags/DynamoDB%C3%97Go/">DynamoDBÃ—Goé€£è¼‰</a>ã®ç¬¬3å¼¾ç›®ã§ã™ã€‚ä»Šã¾ã§ã¯ <code>AWS SDK Go</code> ã‚„ãã‚Œã‚’ãƒ©ãƒƒãƒ—ã—ãŸ<code>guregu/dynamo</code> ã«ã¤ã„ã¦èª¬æ˜ã—ã¦ã„ã¾ã—ãŸãŒã€ <strong>Go CDKï¼ˆGo Cloud Development Kitï¼‰</strong> ã‚’ç”¨ã„ãŸDynamoDBæ“ä½œã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚</p><h1 id="Go-CDKã¨ã¯ï¼Ÿ"><a href="#Go-CDKã¨ã¯ï¼Ÿ" class="headerlink" title="Go CDKã¨ã¯ï¼Ÿ"></a>Go CDKã¨ã¯ï¼Ÿ</h1><blockquote><p>Go CDKã¯2018/07 ã« Google ã® Go ãƒãƒ¼ãƒ ãŒç«‹ã¡ä¸Šã’ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã€Go ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å„ã‚¯ãƒ©ã‚¦ãƒ‰é–“ã§ãƒãƒ¼ã‚¿ãƒ–ãƒ«ã«ã™ã‚‹ã“ã¨ã‚’ç›®æŒ‡ã—ã¦ã€å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚</p></blockquote><p>è©³ã—ãã¯ <a href="https://future-architect.github.io/tags/GoCDK/">Go Cloudé€£è¼‰ä¼ç”»</a> ã§å…¨7å›ã«æ¸¡ã£ã¦æ¦‚è¦ã‹ã‚‰å„ãƒˆãƒ”ãƒƒã‚¯ã«ã¤ã„ã¦èª¬æ˜ã—ã¦ã„ã¾ã™ã€‚ç‰¹ã«<a href="https://future-architect.github.io/articles/20191111/">ç¬¬1å›ç›®</a> ã®æ¦‚è¦èª¬æ˜ã‹ã‚‰èª­ã‚€ã“ã¨ãŒã‚ªã‚¹ã‚¹ãƒ¡ã§ã™ã€‚ DynamoDBã‚’å«ã‚€DocStoreã«ã¤ã„ã¦ã¯<a href="https://future-architect.github.io/articles/20191113/">ç¬¬3å›ç›®</a>ã®è¨˜äº‹ã‚’ç¢ºèªãã ã•ã„ã€‚</p><ul><li>Go CDKï¼ˆå…¬å¼ï¼‰  <a href="https://gocloud.dev/" target="_blank" rel="noopener">https://gocloud.dev/</a></li><li><a href="https://future-architect.github.io/tags/GoCDK/">Go Cloudé€£è¼‰ä¼ç”»</a></li></ul><p>â€»åç§°ã®æºã‚Œã«ã¤ã„ã¦ã¯Go CDKã®æ–¹ãŒæ­£å¼åç§°ã§ã™ãŒã€ã‚°ã‚°ãƒ©ãƒ“ãƒªãƒ†ã‚£ãŒæ‚ªã„ã‹ãªã¨æ€ã„ï¼ˆç‰¹ã«AWS CDKã¨ä¼¼ã¦ã„ã‚‹ï¼‰ã€é€£è¼‰ç‰ˆã¯å¤ã„å‘¼ã³æ–¹ã§ã‚ã‚‹Go Cloudã‚’ä½¿ã‚ã›ã¦ã‚‚ã‚‰ã£ã¦ã„ã¾ã—ãŸã€‚</p><h1 id="è¨˜äº‹ã®è¶£æ—¨"><a href="#è¨˜äº‹ã®è¶£æ—¨" class="headerlink" title="è¨˜äº‹ã®è¶£æ—¨"></a>è¨˜äº‹ã®è¶£æ—¨</h1><p>ã”å­˜ã˜ã®é€šã‚Šã€DynamoDBã¯KVSã¨è¨€ã‚ã‚Œã¦ã„ã‚‹ã‚‚ã®ã®ã€éå¸¸ã«å¤šãã®æ©Ÿèƒ½ãŒå­˜åœ¨ã—ã¾ã™ã€‚KVSã¨åå‰ã ã‘è¦‹ã‚‹ã¨ã€PK(Primary Key)ã«å¯¾ã—ã¦Get/Put/Deleteãªã©ã®åŸºç¤çš„ãªCRUDå‡¦ç†ã‚„ã€ã›ã„ãœã„ãã®Batchæ“ä½œãã‚‰ã„ã—ã‹ã§ããªã„ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒã‚ã‚Šã¾ã™ã‚ˆã­ã€‚</p><p>ã—ã‹ã—ã€å®Ÿéš›ã®DynamoDBã¯é¥ã‹ã«é«˜æ©Ÿèƒ½ã§ <strong>Global Secondary Index</strong> ã‚„ <strong>Local Secondary Index</strong> ã‚’ç”¨ã„ãŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚¢ã‚¯ã‚»ã‚¹ã‚„ã€SortKeyã‚’åˆ©ç”¨ã—ãŸç¯„å›²æŒ‡å®šã®<strong>ã‚¹ã‚­ãƒ£ãƒ³</strong>ã€æ¡ä»¶ã‚’æŒ‡å®šã—ãŸ<strong>ã‚¯ã‚¨ãƒª</strong>ã€<strong>ConditionExpression</strong> ã¨ã„ã†ç”¨ã—ãŸæ—¢å­˜ãƒ¬ã‚³ãƒ¼ãƒ‰ã®æœ‰ç„¡ã¨ã„ã£ãŸæ¡ä»¶ä»˜ãã®æ›¸ãè¾¼ã¿æ©Ÿèƒ½ãªã©ãŒå­˜åœ¨ã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã‚’çµ„ã¿åˆã‚ã›ã¦<a href="https://docs.aws.amazon.com/ja_jp/amazondynamodb/latest/developerguide/WorkingWithItems.html#WorkingWithItems.AtomicCounters" target="_blank" rel="noopener">ã‚¢ãƒˆãƒŸãƒƒã‚¯ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’ä½œã‚‹å‚è€ƒè¨˜äº‹</a> ã‚‚å…¬å¼ã‹ã‚‰ã§ã¦ã„ãŸã‚Šã€æ¡ä»¶ä»˜ãã§ã¯ã‚ã‚Šã¾ã™ãŒ<a href="https://docs.aws.amazon.com/ja_jp/amazondynamodb/latest/developerguide/transaction-apis.html" target="_blank" rel="noopener">ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³</a>ã‚’æä¾›ã‚‚ã—ã¦ã„ã¾ã™ã€‚DynamoDBã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¢ãƒ—ãƒªã‹ã‚‰ç›´æ¥æ“ä½œã™ã‚‹ã“ã¨ã¯å°‘ã„ã§ã—ã‚‡ã†ãŒã€DynamoDB Streamsã‚„Global Tablesã¨ã„ã£ãŸæ©Ÿèƒ½ã‚‚ä¾¿åˆ©ã§ã™ã‚ˆã­ã€‚</p><p>ä¸€æ–¹ã§ã€Go CDKã¯ã“ã†ã„ã£ãŸãƒ—ãƒ­ãƒ€ã‚¯ãƒˆå›ºæœ‰ã®æ©Ÿèƒ½ã‚’éš è”½åŒ–ãƒ»æŠ½è±¡åŒ–ã—ãŸAPIã‚’æä¾›ã™ã‚‹ãƒ‰ãƒ©ã‚¤ãƒãªãŸã‚ã€ä»–ã®ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢ã«åˆ‡ã‚Šæ›¿ãˆãŸã¨ãã§ã‚‚åˆ©ç”¨å¯èƒ½ãªAPIã—ã‹æä¾›ã—ãªã„è¨­è¨ˆã«ãªã£ã¦ã„ã¾ã™ï¼ˆã¯ãšã§ã™ï¼‰ã€‚ã—ã‹ã—ã€ãã‚Œã¯ <strong>DynamoDBã®æ©Ÿèƒ½ã‚’100%ä½¿ã„åˆ‡ã‚Œãªã„ã¨ã„ã†ã“ã¨ã¨åŒç¾©</strong> ãªãŸã‚ã€ç›´æ„Ÿçš„ã«ã¯ãƒªã‚¹ã‚¯ã‚’é¿ã‘ã‚‹ã¹ããªã‚‹ã¹ãAWSå…¬å¼ã®SDKã‚’åˆ©ç”¨ã—ã‚ˆã†ã¨è€ƒãˆã‚‹æ–¹ã‚‚å¤šã„ã®ã§ã¯ç„¡ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿãã†ã„ã†çŸ­çµ¡çš„ãªåˆ¤æ–­ã‚’é¿ã‘ã‚‹ãŸã‚ã«ã€ <strong>Go CDKãŒç¾æ™‚ç‚¹ã§ã©ã“ã¾ã§æ©Ÿèƒ½ã‚’ç¶²ç¾…ã—ã¦ã„ã‚‹ã®ã‹</strong> æˆ‘ã€…ã¯çŸ¥ã‚‹å¿…è¦ãŒã‚ã‚‹ã§ã—ã‚‡ã†ã€‚ãã‚ŒãŒã‚ã‹ã‚Œã°ã€ã“ã®æ¡ˆä»¶ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã§ã¯Go CDKã®æä¾›ã™ã‚‹æ©Ÿèƒ½ã§ååˆ†ãªãŸã‚ã€Go CDKã‚’åˆ©ç”¨ã—ãƒ™ãƒ³ãƒ€ãƒ¼ãƒ­ãƒƒã‚¯ã‚¤ãƒ³ã®ãƒªã‚¹ã‚¯ä½æ¸›ã‚’å›³ã£ãŸã‚Šã€Go CDKã®æä¾›ã™ã‚‹<code>memdocstore</code> ã¨ã„ã£ãŸãƒ¢ãƒƒã‚¯æ©Ÿèƒ½ã‚’äº«å—ã—ã‚ˆã†ã¨ã„ã†ã‚ˆã‚Šæœ‰æ„ç¾©ãªåˆ¤æ–­ãŒã§ãã‚‹ã¯ãšã§ã™ã€‚</p><p>ã¨ã„ã†ã‚ã‘ã§ã€ã©ã®ç¨‹åº¦DynamoDBã®æ©Ÿèƒ½ãŒGo CDKã‹ã‚‰åˆ©ç”¨ã§ãã‚‹ã®ã‹èª¿æŸ»ã—ã¦ã„ãã¾ã™ã€‚ãªãŠã€ç§ã¯DynamoDBã®ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ã§ã¯ãªãã‚¤ãƒé–‹ç™ºè€…ã§ã™ã®ã§è‰²ã€…æ¼ã‚ŒãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚ãœã²Twitterãªã©ã§ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’é ‚ã‘ã‚Œã°ã¨æ€ã„ã¾ã™ã€‚</p><h1 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h1><p>ãªãŠã€Go CDKã¯é€²åŒ–ãŒæ—©ã„ãŸã‚ä»Šå›å¯¾å¿œã—ã¦ã„ãªã„ã¨åˆ¤æ–­ã—ãŸã‚‚ã®ã‚‚ã€å®Ÿã¯è¨˜äº‹ã®å…¬é–‹å¾Œã«å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚å·®åˆ†ã«ã¤ã„ã¦ã¯ <a href="https://github.com/google/go-cloud/releases" target="_blank" rel="noopener">release-notes</a> ãªã©ã‹ã‚‰é©æ™‚ç¢ºèªãã ã•ã„ã€‚</p><ul><li>èª¿æŸ»æ—¥: 2020/02/24</li><li>Go 1.13.4</li><li>Go CDK v0.19.0</li></ul><h1 id="èª¿æŸ»çµæœ"><a href="#èª¿æŸ»çµæœ" class="headerlink" title="èª¿æŸ»çµæœ"></a>èª¿æŸ»çµæœ</h1><p>èª¿æŸ»è¦³ç‚¹ã¯ä»¥ä¸‹ã¨ã—ã¾ã—ãŸã€‚ãã‚Œãã‚Œâ—‹ãŒä¸€é€šã‚Šã®æ©Ÿèƒ½ãŒåˆ©ç”¨ã§ãã‚‹ã€â–³ãŒä¸€éƒ¨åˆ©ç”¨å¯èƒ½ã€â˜“ã¯æ©Ÿèƒ½æä¾›ãŒã•ã‚Œã¦ã„ãªã„ã¨ã„ã†ã“ã¨ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚</p><table><thead><tr><th>#</th><th>Case</th><th>AWS SDK</th><th>Go CDK</th><th>Description</th></tr></thead><tbody><tr><td>1</td><td>åŸºæœ¬çš„ãªCRUD</td><td>â—‹</td><td>â—‹</td><td>ä½¿ã„ã‚„ã™ã„APIã§ã‚ã‚‹ã—ã€ãƒãƒƒã‚·ãƒ¥ã‚­ãƒ¼ã€ã‚½ãƒ¼ãƒˆã‚­ãƒ¼ã¨ã‚‚ã«åˆ©ç”¨ã§ãã‚‹</td></tr><tr><td>2</td><td>ãƒãƒƒãƒå‡¦ç†ã®CRUD</td><td>â—‹</td><td>â—‹</td><td>ãƒãƒƒãƒç™»éŒ²ã€ãƒãƒƒãƒæ¤œç´¢ãªã©æ§˜ã€…å¯èƒ½</td></tr><tr><td>3</td><td>æ¡ä»¶ä»˜ãæ›¸ãè¾¼ã¿</td><td>â—‹</td><td>â–³</td><td>æ¥½è¦³çš„ãƒ­ãƒƒã‚¯ã‚’ç”¨ã„ãŸãƒ‡ãƒ¼ã‚¿æ“ä½œãŒå¯èƒ½</td></tr><tr><td>4</td><td>ã‚¯ã‚¨ãƒª</td><td>â—‹</td><td>â—‹</td><td>Whereã‚„Orderbyã‚„Limitã‚’å®Ÿè¡Œã§ãã‚‹</td></tr></tbody></table><p>è©³ç´°ã‚’èª¬æ˜ã—ã¦ã„ãã¾ã™ã€‚</p><h1 id="å®Ÿè¨¼ã‚³ãƒ¼ãƒ‰"><a href="#å®Ÿè¨¼ã‚³ãƒ¼ãƒ‰" class="headerlink" title="å®Ÿè¨¼ã‚³ãƒ¼ãƒ‰"></a>å®Ÿè¨¼ã‚³ãƒ¼ãƒ‰</h1><p>ãã‚Œãã‚ŒGoã®ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã§è¨˜è¼‰æ–¹æ³•ã‚’ã¾ã¨ã‚ã¦ã„ãã¾ã™ã€‚</p><p>ç¬¬1å›ã®è¨˜äº‹åŒæ§˜ DynamoDB Local ã‚’åˆ©ç”¨ã—ã¦ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã‚’æº–å‚™ã—ã¾ã™ã€‚<br><a href="https://future-architect.github.io/articles/20200225/">https://future-architect.github.io/articles/20200225/</a></p><h2 id="0-äº‹å‰æº–å‚™"><a href="#0-äº‹å‰æº–å‚™" class="headerlink" title="0. äº‹å‰æº–å‚™"></a>0. äº‹å‰æº–å‚™</h2><h3 id="SDKã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—"><a href="#SDKã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—" class="headerlink" title="SDKã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—"></a>SDKã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—</h3><p>ã‚»ãƒƒã‚·ãƒ§ãƒ³åŠã³DynamoDBã‚’æ“ä½œã™ã‚‹ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ç”Ÿæˆã—ã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ç”Ÿæˆ</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Create session.</span></span><br><span class="line">sess := session.Must(session.NewSessionWithOptions(session.Options&#123;</span><br><span class="line">SharedConfigState: session.SharedConfigEnable,</span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment">// Create DynamoDB client</span></span><br><span class="line">db := dynamodb.New(sess, &amp;aws.Config&#123;Endpoint: aws.String(<span class="string">"http://localhost:8000"</span>)&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Open Collection via Go CDK</span></span><br><span class="line">coll, err := awsdynamodb.OpenCollection(db, <span class="string">"MyFirstTable"</span>, <span class="string">"MyHashKey"</span>, <span class="string">"MyRangeKey"</span>, <span class="literal">nil</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">defer</span> coll.Close()</span><br></pre></td></tr></table></figure><p>ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã® <code>SharedConfigState</code> ã« <code>SharedConfigEnable</code> ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ <code>~/.aws/config</code> å†…ã‚’å‚ç…§ã—ã¦ãã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><p>DynamoDB clientã‚’ç”Ÿæˆã™ã‚‹ã¾ã§ã¯ã€å…¬å¼SDKé€šã‚Šã®æ‰‹é †ã¨ãªã‚Šã¾ã™ã€‚æœ€å¾Œã«ãƒ†ãƒ¼ãƒ–ãƒ«åã€ãƒãƒƒã‚·ãƒ¥ã‚­ãƒ¼ã€ã‚½ãƒ¼ãƒˆã‚­ãƒ¼ã‚’æŒ‡å®šã—ã¦ <code>OpenCollection</code> ã‚’å‘¼ã¶ã“ã¨ã§ã€Go CDKçµŒç”±ã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®CRUDæ“ä½œã‚’è¡Œãˆã‚‹ç”¨ã«ãªã‚Šã¾ã™ã€‚</p><p>ã“ã®æ™‚ã€<strong>ãƒãƒƒã‚·ãƒ¥ã‚­ãƒ¼</strong> ã¨ <strong>ã‚½ãƒ¼ãƒˆã‚­ãƒ¼</strong> ã®ä¸¡æ–¹ã‚’æŒ‡å®šã—ã¦ã„ã¾ã™ãŒã€ã‚‚ã—ã‚½ãƒ¼ãƒˆã‚­ãƒ¼ãŒç„¡ã‘ã‚Œã°ç©ºæ–‡å­—ã‚’æŒ‡å®šã™ã‚Œã°OKã§ã™ã€‚</p><h3 id="ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¾ã™ã‚‹æ§‹é€ ä½“ã®å®šç¾©"><a href="#ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¾ã™ã‚‹æ§‹é€ ä½“ã®å®šç¾©" class="headerlink" title="ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¾ã™ã‚‹æ§‹é€ ä½“ã®å®šç¾©"></a>ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¾ã™ã‚‹æ§‹é€ ä½“ã®å®šç¾©</h3><figure class="highlight go"><figcaption><span>æ§‹é€ ä½“å®šç¾©</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Item <span class="keyword">struct</span> &#123;</span><br><span class="line">MyHashKey  <span class="keyword">string</span> <span class="string">`docstore:"MyHashKey"`</span></span><br><span class="line">MyRangeKey <span class="keyword">int</span>    <span class="string">`docstore:"MyRangeKey"`</span></span><br><span class="line">MyText     <span class="keyword">string</span> <span class="string">`docstore:"MyText"`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>docstore</code> ã¨ã„ã†ã¨ã„ã†ã‚¿ã‚°ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€DynamoDBã®ã‚­ãƒ¼ã‚’æŒ‡å®šã—ã¦æ§‹é€ ä½“ã¨ãƒãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚çœç•¥ã—ãŸå ´åˆã¯æ§‹é€ ä½“ã®ã‚­ãƒ¼åãŒãã®ã¾ã¾åˆ©ç”¨ã•ã‚Œã¾ã™</p><p>ã»ã¼ã€AWS SDKã¨åŒã˜ã§ã™ã­ã€‚</p><h2 id="1-åŸºæœ¬çš„ãªCRUD"><a href="#1-åŸºæœ¬çš„ãªCRUD" class="headerlink" title="1. åŸºæœ¬çš„ãªCRUD"></a>1. åŸºæœ¬çš„ãªCRUD</h2><h3 id="Create"><a href="#Create" class="headerlink" title="Create"></a>Create</h3><p>åˆ©ç”¨ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã¯ <code>Create</code> ã§ã™ã€‚</p><figure class="highlight go"><figcaption><span>Createå‡¦ç†</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">write := Item&#123;MyHashKey: <span class="string">"00001"</span>, MyRangeKey: <span class="number">1</span>, MyText: <span class="string">"some text..."</span>&#125;</span><br><span class="line"><span class="keyword">if</span> err := coll.Create(ctx, &amp;write); err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"create: %v"</span>, err)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç›´æ„Ÿçš„ã ã¨æ€ã„ã¾ã™ã€‚</p><h3 id="Read"><a href="#Read" class="headerlink" title="Read"></a>Read</h3><p>åˆ©ç”¨ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã¯ <code>Get</code>ã§ã™ã€‚</p><figure class="highlight go"><figcaption><span>Readå‡¦ç†</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">read := Item&#123;MyHashKey: <span class="string">"00001"</span>, MyRangeKey: <span class="number">1</span>&#125;</span><br><span class="line"><span class="keyword">if</span> err := coll.Get(ctx, &amp;read); err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"get: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Printf(<span class="string">"got: %+v\n"</span>, read)</span><br><span class="line"><span class="comment">// =&gt; get: &#123;MyHashKey:00001 MyRangeKey:1 MyText:some text...&#125;</span></span><br></pre></td></tr></table></figure><p>ã“ã‚Œã‚‚ç›´æ„Ÿçš„ã§ã™ã€‚</p><h3 id="Update"><a href="#Update" class="headerlink" title="Update"></a>Update</h3><p>ã“ã‚Œã¯ã‚„ã‚„ç‰¹æ®Šã§ã™ã€‚<code>Update</code> ã‚’ç”¨ã„ã¾ã™ãŒã€æ›´æ–°ã™ã‚‹å·®åˆ†ã‚’ <code>docstore.Mods</code> ã¨ã„ã†mapã«å€¤ã‚’ã‚‚ãŸã›ã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>Updateå‡¦ç†</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">updateKey := Item&#123;MyHashKey: <span class="string">"00001"</span>, MyRangeKey: <span class="number">1</span>&#125;</span><br><span class="line"><span class="keyword">if</span> err := coll.Update(ctx, &amp;updateKey, docstore.Mods&#123;<span class="string">"MyText"</span>:<span class="string">"update text"</span>&#125;); err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"update: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// (è£œè¶³) ã‚‚ã†ä¸€åº¦getã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãæ›ã‚ã£ã¦ã„ã‚‹</span></span><br><span class="line"><span class="comment">// &#123;MyHashKey:00001 MyRangeKey:1 MyText:update text&#125;</span></span><br></pre></td></tr></table></figure><p>Go CDKã®Updateã¯ <code>Patch</code> ã®ã‚ˆã†ãªå‹•ãã‚’ã™ã‚‹ã®ã§æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚ã‚‚ã—ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå…¨ä½“ã‚’ç½®æ›ã—ãŸã„å ´åˆã¯å¾Œè¿°ã™ã‚‹ <code>Replace</code> ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚ã€€</p><p><code>Update</code> ã¯å­˜åœ¨ã—ãªã„ãƒ¬ã‚³ãƒ¼ãƒ‰ã«å¯¾ã—ã¦è¡Œã†ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>Updateå¤±æ•—</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">notFoundKey := Item&#123;MyHashKey: <span class="string">"99999"</span>, MyRangeKey: <span class="number">1</span>&#125;</span><br><span class="line"><span class="keyword">if</span> err := coll.Update(ctx, &amp;notFoundKey, docstore.Mods&#123;<span class="string">"MyText"</span>: <span class="string">"update text"</span>&#125;); err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"not found: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// not found: docstore (code=FailedPrecondition):  ConditionalCheckFailedException: The conditional request failed</span></span><br><span class="line"><span class="comment">// status code: 400, request id: ab4aaa27-303a-4090-a457-94f42950d0bd</span></span><br></pre></td></tr></table></figure><p>ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‹ã‚‰æ¨æ¸¬ã™ã‚‹ã¨ã€Go CDKã®Updateã¯DynamoDBã®Conditional Expressionsã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã­ã€‚</p><h2 id="Replace"><a href="#Replace" class="headerlink" title="Replace"></a>Replace</h2><p>é …ç›®å…¨ä½“ã‚’ç½®ãæ›ãˆã‚‹å ´åˆã§ã™ã€‚å­˜åœ¨ã—ãªã„å ´åˆã¯ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>ç½®æ›å‡¦ç†</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">replace := Item&#123;MyHashKey: <span class="string">"00001"</span>, MyRangeKey: <span class="number">1</span>, MyText: <span class="string">"replace"</span>&#125;</span><br><span class="line"><span class="keyword">if</span> err := coll.Replace(ctx, &amp;replace); err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"replace: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// (è£œè¶³)ã‚‚ã†ä¸€åº¦getã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ç½®æ›ã•ã‚Œã¦ã„ã‚‹</span></span><br><span class="line"><span class="comment">// &#123;MyHashKey:00001 MyRangeKey:1 MyText:replace&#125;</span></span><br></pre></td></tr></table></figure><p>ç°¡å˜ã§ã™ã­ã€‚</p><p>ã‚‚ã—ã€å­˜åœ¨ã—ãªã„å ´åˆã¯ <code>Create</code>, å­˜åœ¨ã™ã‚‹å ´åˆã¯ <code>Replace</code> ã‚’ã—ãŸã„å ´åˆã¯ <code>Put</code> ã‚’ä½¿ã†ã‚ˆã†ã§ã™ã€‚ä»Šå›ã¯ã‚ã¾ã‚Šã«ã‚³ãƒ¼ãƒ‰ãŒãã®ã¾ã¾ãªã®ã§çœç•¥ã—ã¾ã™ã€‚</p><h3 id="Delete"><a href="#Delete" class="headerlink" title="Delete"></a>Delete</h3><p>åˆ©ç”¨ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã¯ <code>Delete</code> ã§ã™ã€‚</p><figure class="highlight go"><figcaption><span>Deleteå‡¦ç†</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">deleteKey := Item&#123;MyHashKey: <span class="string">"00001"</span>, MyRangeKey: <span class="number">1</span>&#125;</span><br><span class="line"><span class="keyword">if</span> err := coll.Delete(ctx, &amp;deleteKey); err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"delete: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// (è£œè¶³)ã‚‚ã†ä¸€åº¦getã™ã‚‹ã¨ã€not foundã«ãªã‚‹</span></span><br></pre></td></tr></table></figure><p>ã“ã“ã¾ã§ã§ä¸€é€šã‚Šã®CRUDæ“ä½œãŒã§ãã‚‹ã“ã¨ã‚’ç¢ºèªã§ãã¾ã—ãŸã€‚</p><h2 id="2-ãƒãƒƒãƒå‡¦ç†ã®CRUD"><a href="#2-ãƒãƒƒãƒå‡¦ç†ã®CRUD" class="headerlink" title="2. ãƒãƒƒãƒå‡¦ç†ã®CRUD"></a>2. ãƒãƒƒãƒå‡¦ç†ã®CRUD</h2><p>å¤§é‡ãƒ‡ãƒ¼ã‚¿ã‚’æ‰±ã†å ´åˆã¯ã€1ä»¶1ä»¶ãƒ‡ãƒ¼ã‚¿ã‚’ç™»éŒ²ã™ã‚‹ã®ã§ã¯ãªããƒãƒƒãƒç™»éŒ²ã‚’è¡Œã„ãŸã„ã‚±ãƒ¼ã‚¹ã¯å¤šã„ã®ã§ã¯ç„¡ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ</p><p>ã“ã®å ´åˆã¯ <code>Actions</code> ã‚’ç”¨ã„ã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>ãƒãƒƒãƒç™»éŒ²</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Create</span></span><br><span class="line">w1 := Item&#123;MyHashKey: <span class="string">"00001"</span>, MyRangeKey: <span class="number">1</span>, MyText: <span class="string">"some text1..."</span>&#125;</span><br><span class="line">w2 := Item&#123;MyHashKey: <span class="string">"00001"</span>, MyRangeKey: <span class="number">2</span>, MyText: <span class="string">"some text2..."</span>&#125;</span><br><span class="line">w3 := Item&#123;MyHashKey: <span class="string">"00001"</span>, MyRangeKey: <span class="number">3</span>, MyText: <span class="string">"some text3..."</span>&#125;</span><br><span class="line"><span class="keyword">if</span> err := coll.Actions().Create(&amp;w1).Create(&amp;w2).Create(&amp;w3).Do(ctx); err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"actions: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// (è£œè¶³) ãƒãƒƒãƒç™»éŒ²ã—ãŸçµæœã‚’getã™ã‚‹ã¨ä»¥ä¸‹ã®å€¤ãŒç¢ºèªã§ãã‚‹</span></span><br><span class="line"><span class="comment">// got: &#123;MyHashKey:00001 MyRangeKey:1 MyText:some text1...&#125;</span></span><br><span class="line"><span class="comment">// got: &#123;MyHashKey:00001 MyRangeKey:2 MyText:some text2...&#125;</span></span><br><span class="line"><span class="comment">// got: &#123;MyHashKey:00001 MyRangeKey:3 MyText:some text3...&#125;</span></span><br></pre></td></tr></table></figure><p>Actionsã¯Createã ã‘ã§ã¯ãªãã€Get/Create/Replace/Put/Update/Delete ã®6ã¤ã®æ“ä½œã‚’æ··åœ¨ã•ã›ã¦å®Ÿè¡Œã‚‚å¯èƒ½ã§ã™ã€‚</p><p>å‚è€ƒ: <a href="https://godoc.org/gocloud.dev/docstore#hdr-Actions" target="_blank" rel="noopener">https://godoc.org/gocloud.dev/docstore#hdr-Actions</a></p><p>ä»Šå›ã¯é–¢æ•°ã‚’ãƒã‚§ãƒ¼ãƒ³ã§ç™»éŒ²ã—ã¾ã—ãŸãŒã€Actionsã§ <code>ActionList</code> ãŒå–å¾—ã§ãã‚‹ã®ã§ã€ã‚‚ã¡ã‚ã‚“forãƒ«ãƒ¼ãƒ—ã¨åˆã‚ã›ã¦è¿½åŠ ã‚‚ã§ãã¾ã™ã€‚</p><h2 id="3-æ¡ä»¶ä»˜ãæ›¸ãè¾¼ã¿"><a href="#3-æ¡ä»¶ä»˜ãæ›¸ãè¾¼ã¿" class="headerlink" title="3. æ¡ä»¶ä»˜ãæ›¸ãè¾¼ã¿"></a>3. æ¡ä»¶ä»˜ãæ›¸ãè¾¼ã¿</h2><p>Go CDKã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚“ã é™ã‚Šã¯ã€æ¡ä»¶ä»˜ãæ›¸ãè¾¼ã¿ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„ã‚ˆã†ã§ã™ã€‚ã—ã‹ã—ã€Revisionsã¨ã„ã†æ©Ÿèƒ½ãŒã‚ã‚Šã€ã„ã‚ã‚†ã‚‹æ¥½è¦³çš„ãƒ­ãƒƒã‚¯ã®ã‚ˆã†ãªåˆ©ç”¨ç”¨é€”ã‚’å…¬å¼ã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚</p><ul><li><a href="https://godoc.org/gocloud.dev/docstore#hdr-Revisions" target="_blank" rel="noopener">https://godoc.org/gocloud.dev/docstore#hdr-Revisions</a></li></ul><p>å†…å®¹ã¯ ãƒªãƒ“ã‚¸ãƒ§ãƒ³ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: <code>DocstoreRevision</code>) ã‚’è¨­å®šã™ã‚‹ã¨ã€ã“ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ç”¨ã„ã¦ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã—ã€<code>Put</code>ã€<code>Replace</code>ã€<code>Update</code>ã€<code>Delete</code> ã®æ“ä½œã‚’å®‰å…¨ã«è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>æœ€åˆã«å®šç¾©ã—ãŸæ§‹é€ ä½“ã«ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ ã—ã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>ãƒªãƒ“ã‚¸ãƒ§ãƒ³ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ ã—ãŸæ§‹é€ ä½“</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Item <span class="keyword">struct</span> &#123;</span><br><span class="line">MyHashKey        <span class="keyword">string</span>       <span class="string">`docstore:"MyHashKey"`</span></span><br><span class="line">MyRangeKey       <span class="keyword">int</span>          <span class="string">`docstore:"MyRangeKey"`</span></span><br><span class="line">MyText           <span class="keyword">string</span>       <span class="string">`docstore:"MyText"`</span></span><br><span class="line">DocstoreRevision <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã“ã‚Œã‚’ç”¨ã„ã¦ã€æ¥½è¦³çš„ãƒ­ãƒƒã‚¯ã‚’è¡Œã£ã¦ãƒ­ãƒƒã‚¯ãŒè¡Œã‚ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã—ã¾ã™ã€‚ã©ã¡ã‚‰ã‚‚åŒã˜ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«Updateã—ç¶šã‘ã¦æ§˜å­ã‚’è¦‹ã¦ã¿ã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>æ¥½è¦³çš„ãƒ­ãƒƒã‚¯æ¤œå‡ºãƒ†ã‚¹ãƒˆ</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// åˆ¥ã®goroutineã§ã‚‚ç„¡é™æ›¸ãè¾¼ã¿</span></span><br><span class="line"><span class="keyword">go</span> UpdateLoop()</span><br><span class="line"><span class="comment">// ãƒ¡ã‚¤ãƒ³ã‚¹ãƒ¬ãƒƒãƒ‰ã§ã‚‚ç„¡é™æ›¸ãè¾¼ã¿</span></span><br><span class="line">UpdateLoop()</span><br><span class="line"></span><br><span class="line"><span class="comment">// =&gt; optimistic locking: docstore (code=FailedPrecondition): </span></span><br><span class="line"><span class="comment">// ConditionalCheckFailedException: The conditional request failed</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">UpdateLoop</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// (DynamoDB Clientã‚’ç”Ÿæˆå‡¦ç†)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> &#123; <span class="comment">// ç„¡é™ã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ›´æ–°ã™ã‚‹å‡¦ç†</span></span><br><span class="line">read := Item&#123;MyHashKey: <span class="string">"00001"</span>, MyRangeKey: <span class="number">1</span>&#125;</span><br><span class="line"><span class="keyword">if</span> err := coll.Get(ctx, &amp;read); err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"get: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> err := coll.Update(ctx, &amp;read, docstore.Mods&#123;<span class="string">"MyText"</span>: <span class="string">"update text: "</span> + time.Now().String()&#125;); err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">if</span> gcerrors.Code(err) == gcerrors.FailedPrecondition &#123;</span><br><span class="line">log.Fatalf(<span class="string">"optimistic locking: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">log.Fatalf(<span class="string">"update: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã™ã‚‹ã¨ã€å®Ÿè¡ŒçµæœãŒ <code>optimistic locking: docstore (code=FailedPrecondition): ConditionalCheckFailedException: The conditional request failed</code> ãŒç™ºç”Ÿã—ã€getã—ã¦updateã™ã‚‹ã¾ã§ã®é–“ã«åˆ¥ã®goroutineãŒåŒã˜ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ›´æ–°ã—ãŸã“ã¨ãŒæ¤œçŸ¥ã§ãã¾ã—ãŸã€‚</p><p>DynamoDBã®Conditional Expressionsã»ã©ä¸‡èƒ½ã§ã¯ç„¡ã„ã§ã™ãŒã€å¤šãã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã¯ãƒ­ãƒƒã‚¯ã‚’å®Ÿç¾ã—ãŸã„ã“ã¨ãŒå¤šã„ã¨æ€ã†ã®ã§ã€ã“ã‚Œã§äº‹è¶³ã‚Šã‚‹ã‚±ãƒ¼ã‚¹ã‚‚å¤šã„ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ</p><p>ã¡ãªã¿ã«ã€Revisionãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§ã™ãŒã€awscliã§ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’æ¤œç´¢ã™ã‚‹ã¨ã€UUIDã§å®Ÿç¾ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚æœ€åˆã¯ãƒ­ãƒƒã‚¯ç•ªå·ã®ã‚ˆã†ãªå½¢å¼ã§å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã¨æ€ã£ãŸã®ã§æ„å¤–ã§ã™</p><p>ã‚‚ã—ã€æ›´æ–°å›æ•°ãªã©ã‚’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã—ã¦æŒã¡ãŸã„å ´åˆã¯ã€è‡ªåˆ†ã§å±æ€§ã‚’æŒã¤å¿…è¦ãŒã‚ã‚‹ã®ã§ã”æ³¨æ„ãã ã•ã„ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&gt;aws dynamodb scan --endpoint-url http://localhost:8000 --table-name MyFirstTable</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">"Items"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"DocstoreRevision"</span>: &#123;</span><br><span class="line">                <span class="string">"S"</span>: <span class="string">"3e38649b-d82c-46ab-a0fe-621f98104f75"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"MyHashKey"</span>: &#123;</span><br><span class="line">                <span class="string">"S"</span>: <span class="string">"00001"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"MyText"</span>: &#123;</span><br><span class="line">                <span class="string">"S"</span>: <span class="string">"update text: 2020-02-28 09:45:27.725097 +0900 JST m=+0.090001301"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"MyRangeKey"</span>: &#123;</span><br><span class="line">                <span class="string">"N"</span>: <span class="string">"1"</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"Count"</span>: 1,</span><br><span class="line">    <span class="string">"ScannedCount"</span>: 1,</span><br><span class="line">    <span class="string">"ConsumedCapacity"</span>: null</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-ã‚¯ã‚¨ãƒª"><a href="#4-ã‚¯ã‚¨ãƒª" class="headerlink" title="4. ã‚¯ã‚¨ãƒª"></a>4. ã‚¯ã‚¨ãƒª</h2><p><a href="https://future-architect.github.io/articles/20191113/">Go Cloud#3 Go Cloudã®DocStoreã‚’ä½¿ã†</a> ã®è¨˜äº‹ã§èª¬æ˜ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«ã€Go CDKã¯ã‚¯ã‚¨ãƒªã‚‚ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚<code>Where()</code>ã€<code>OrderBy()</code>ã€<code>Limit()</code> ã§ã€ Whereã®æ¼”ç®—å­ã¯ <code>=</code>, <code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code>, <code>&lt;=</code> ã®5ç¨®é¡ã§ã™ã€‚ã»ã¨ã‚“ã©ã‚„ã‚ŠãŸã„ã“ã¨ã¯ã§ãã‚‹ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ</p><h1 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h1><ul><li>ä½¿ã£ã¦ã¿ãŸæ„Ÿæƒ³ã¨ã—ã¦Go CDKã®DocStoreã¯éå¸¸ã«ãƒªãƒƒãƒãªæ©Ÿèƒ½ã‚’æŒã£ã¦ãŠã‚Šã€ãƒ™ãƒ¼ã‚·ãƒƒã‚¯ãªAWS SDKã¨éœè‰²ãªãåˆ©ç”¨ã§ãã¾ã—ãŸã€‚Condition Expressionsã§è¤‡é›‘ãªæ¡ä»¶ã‚’åˆ©ç”¨ã—ãªã„ãªã©ã€é™ã‚‰ã‚ŒãŸãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã§ã‚ã‚Œã°ã‚€ã—ã‚ç”Ÿç”£æ€§ãŒé«˜ã¾ã‚‹ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹</li><li>Go CDKã‚’ç”¨ã„ã‚Œã°ãƒ‰ãƒ©ã‚¤ãƒåˆ‡ã‚Šæ›¿ãˆã§memstoreã¨ã„ã†ãƒ¢ãƒƒã‚¯åˆ‡ã‚Šæ›¿ãˆã‚‚å¯èƒ½ã§ã™ã—ã€ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£ã¨ã—ã¦ã‚‚æœ‰ç”¨ã§ã™</li></ul><p>æ©Ÿèƒ½ä¸Šã¯Go CDKã‚‚ã‹ãªã‚Šã‚¬ãƒ³ãƒã£ã¦ã„ã‚‹ã¨æ„Ÿã˜ã¾ã™ã€‚DynamoDBã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹éš›ã®æœ‰åŠ›ãªé¸æŠè‚¢ã¨ãªã‚Šã†ã‚‹ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ï¼Ÿãœã²ã€ç§é”ã®ãƒãƒ¼ãƒ ã§ã‚‚æ©Ÿã‚’è¦‹ã¦å®Ÿæˆ¦æŠ•å…¥ã—ã¦ã¿ã¦ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><hr><p><a href="https://future-architect.github.io/tags/DynamoDB%C3%97Go/">DynamoDBÃ—Goé€£è¼‰ä¼ç”»</a>ä»¥å¤–ã«ã‚‚å¤šãã®é€£è¼‰ä¼ç”»ãŒã‚ã‚Šã¾ã™ã€‚ç‰¹ã«Go Cloudé€£è¼‰ãŒä»Šå›ã®ãƒ†ãƒ¼ãƒã«è¿‘ã„ã§ã™ã€‚</p><ul><li><a href="https://future-architect.github.io/tags/GoCDK/">Go Cloud é€£è¼‰</a></li><li><a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCP é€£è¼‰</a></li><li><a href="https://future-architect.github.io/tags/Auth0/">Auth0 é€£è¼‰</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h1&gt;&lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€TIG DXãƒ¦ãƒ‹ãƒƒãƒˆ&lt;a href=&quot;https://twitter.com/laqiiz&quot; target=&quot;_
      
    
    </summary>
    
      <category term="Programming" scheme="https://future-architect.github.io/categories/Programming/"/>
    
    
      <category term="AWS" scheme="https://future-architect.github.io/tags/AWS/"/>
    
      <category term="Go" scheme="https://future-architect.github.io/tags/Go/"/>
    
      <category term="DynamoDBÃ—Go" scheme="https://future-architect.github.io/tags/DynamoDB%C3%97Go/"/>
    
  </entry>
  
  <entry>
    <title>DynamoDBÃ—Goé€£è¼‰#2 AWS SDKã«ã‚ˆã‚‹DynamoDBã®åŸºæœ¬æ“ä½œ</title>
    <link href="https://future-architect.github.io/articles/20200227/"/>
    <id>https://future-architect.github.io/articles/20200227/</id>
    <published>2020-02-26T23:25:12.000Z</published>
    <updated>2020-03-11T00:50:37.789Z</updated>
    
    <content type="html"><![CDATA[<p>ã“ã‚“ã«ã¡ã¯ã€‚TIG DXãƒ¦ãƒ‹ãƒƒãƒˆ<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>ã®æ­¦ç”°ã§ã™ã€‚</p><h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><p><a href="https://future-architect.github.io/tags/DynamoDB%C3%97Go/">DynamoDBÃ—Goé€£è¼‰ä¼ç”»</a>ç¬¬2å¼¾ã®è¨˜äº‹ã¨ãªã‚Šã¾ã™ã€‚<br><a href="https://future-architect.github.io/articles/20200225/">DynamoDBÃ—Goé€£è¼‰#1 Goã§DynamoDBã§ãŠãªã˜ã¿ã®guregu/dynamoã‚’åˆ©ç”¨ã™ã‚‹</a> ã§ã¯ <a href="https://github.com/guregu/dynamo" target="_blank" rel="noopener">guregu/dynamo</a> ã‚’åˆ©ç”¨ã—ãŸDynamoDBã®åŸºæœ¬æ“ä½œã‚’ã”ç´¹ä»‹ã—ã¾ã—ãŸã€‚</p><p>æœ¬è¨˜äº‹ã§ã¯ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£è£½ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’åˆ©ç”¨ã›ãšaws-sdkã‚’ç´ ã§åˆ©ç”¨ã—ãŸå ´åˆã®DynamoDBã®åŸºæœ¬æ“ä½œã«ã¤ã„ã¦è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚<br>ãªãŠã€å…¬å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ä¸‹è¨˜ã«ãªã‚Šã¾ã™ã®ã§ã€ã‚ˆã‚Šè©³ç´°ãªæƒ…å ±ã¯ã“ã¡ã‚‰ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚<br><a href="https://docs.aws.amazon.com/sdk-for-go/v1/developer-guide/welcome.html" target="_blank" rel="noopener">https://docs.aws.amazon.com/sdk-for-go/v1/developer-guide/welcome.html</a></p><h2 id="ç’°å¢ƒæƒ…å ±"><a href="#ç’°å¢ƒæƒ…å ±" class="headerlink" title="ç’°å¢ƒæƒ…å ±"></a>ç’°å¢ƒæƒ…å ±</h2><ul><li>Go: 1.13.8</li><li>aws-sdk-go: v1.29.10</li></ul><h2 id="æ¤œè¨¼ç’°å¢ƒã®æº–å‚™"><a href="#æ¤œè¨¼ç’°å¢ƒã®æº–å‚™" class="headerlink" title="æ¤œè¨¼ç’°å¢ƒã®æº–å‚™"></a>æ¤œè¨¼ç’°å¢ƒã®æº–å‚™</h2><p>ç¬¬1å›ã®è¨˜äº‹åŒæ§˜ <code>DynamoDB Local</code> ã‚’åˆ©ç”¨ã—ã¦ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã‚’æº–å‚™ã—ã¾ã™ã€‚<br><a href="https://future-architect.github.io/articles/20200225/">https://future-architect.github.io/articles/20200225/</a></p><h2 id="äº‹å‰æº–å‚™"><a href="#äº‹å‰æº–å‚™" class="headerlink" title="äº‹å‰æº–å‚™"></a>äº‹å‰æº–å‚™</h2><h3 id="SDKã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—"><a href="#SDKã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—" class="headerlink" title="SDKã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—"></a>SDKã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—</h3><p>ã‚»ãƒƒã‚·ãƒ§ãƒ³åŠã³DynamoDBã‚’æ“ä½œã™ã‚‹ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ç”Ÿæˆ</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Create session.</span></span><br><span class="line">sess := session.Must(session.NewSessionWithOptions(session.Options&#123;</span><br><span class="line">SharedConfigState: session.SharedConfigEnable,</span><br><span class="line">&#125;))</span><br><span class="line"><span class="comment">// Create DynamoDB client.</span></span><br><span class="line">db := dynamodb.New(sess, &amp;aws.Config&#123;Endpoint: aws.String(<span class="string">"http://localhost:8000"</span>)&#125;)</span><br></pre></td></tr></table></figure><p>ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã® <code>SharedConfigState</code> ã« <code>SharedConfigEnable</code> ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ <code>~/.aws/config</code> å†…ã‚’å‚ç…§ã—ã¦ãã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><h3 id="ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¾ã™ã‚‹æ§‹é€ ä½“ã®å®šç¾©"><a href="#ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¾ã™ã‚‹æ§‹é€ ä½“ã®å®šç¾©" class="headerlink" title="ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¾ã™ã‚‹æ§‹é€ ä½“ã®å®šç¾©"></a>ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¾ã™ã‚‹æ§‹é€ ä½“ã®å®šç¾©</h3><figure class="highlight go"><figcaption><span>æ§‹é€ ä½“å®šç¾©</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Item <span class="keyword">struct</span> &#123;</span><br><span class="line">MyHashKey  <span class="keyword">string</span> <span class="string">`dynamodbav:"MyHashKey"`</span></span><br><span class="line">MyRangeKey <span class="keyword">int</span>    <span class="string">`dynamodbav:"MyRangeKey"`</span></span><br><span class="line">MyText     <span class="keyword">string</span> <span class="string">`dynamodbav:"MyText"`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>dynamodbav</code> ã¨ã„ã†ã‚¿ã‚°ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€DynamoDBã®ã‚­ãƒ¼ã‚’æŒ‡å®šã—ã¦æ§‹é€ ä½“ã¨ãƒãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚<br>çœç•¥ã—ãŸå ´åˆã¯æ§‹é€ ä½“ã®ã‚­ãƒ¼åãŒãã®ã¾ã¾åˆ©ç”¨ã•ã‚Œã¾ã™ã€‚</p><h2 id="åŸºæœ¬çš„ãªCRUD"><a href="#åŸºæœ¬çš„ãªCRUD" class="headerlink" title="åŸºæœ¬çš„ãªCRUD"></a>åŸºæœ¬çš„ãªCRUD</h2><h3 id="Create"><a href="#Create" class="headerlink" title="Create"></a>Create</h3><p>åˆ©ç”¨ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã¯ <code>PutItem</code> ã§ã™ã€‚</p><figure class="highlight go"><figcaption><span>Createå‡¦ç†</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">item := Item&#123;</span><br><span class="line">MyHashKey:  <span class="string">"00001"</span>,</span><br><span class="line">MyRangeKey: <span class="number">1</span>,</span><br><span class="line">MyText:     <span class="string">"some text..."</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Convert item to dynamodb attribute.</span></span><br><span class="line">av, err := dynamodbattribute.MarshalMap(item)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">fmt.Println(err.Error())</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Create an input.</span></span><br><span class="line">input := &amp;dynamodb.PutItemInput&#123;</span><br><span class="line">TableName: aws.String(<span class="string">"MyFirstTable"</span>),</span><br><span class="line">Item:      av,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Execute.</span></span><br><span class="line">_, err = db.PutItem(input)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">fmt.Println(err.Error())</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>dynamodbattribute.MarshalMap</code> ã‚’åˆ©ç”¨ã—ã¦æ§‹é€ ä½“ã‚’ <code>dynamodb attribute</code> ã«å¤‰æ›ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ç‚¹ãŒãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚</p><h3 id="Read"><a href="#Read" class="headerlink" title="Read"></a>Read</h3><p>åˆ©ç”¨ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã¯ <code>GetItem</code> ã§ã™ã€‚</p><figure class="highlight go"><figcaption><span>Readå‡¦ç†</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Create an input.</span></span><br><span class="line">input := &amp;dynamodb.GetItemInput&#123;</span><br><span class="line">TableName: aws.String(<span class="string">"MyFirstTable"</span>),</span><br><span class="line">Key: <span class="keyword">map</span>[<span class="keyword">string</span>]*dynamodb.AttributeValue&#123;</span><br><span class="line"><span class="string">"MyHashKey"</span>: &#123;</span><br><span class="line">S: aws.String(<span class="string">"00001"</span>),</span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">"MyRangeKey"</span>: &#123;</span><br><span class="line">N: aws.String(<span class="string">"1"</span>),</span><br><span class="line">&#125;,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Execute.</span></span><br><span class="line">result, err := db.GetItem(input)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">fmt.Println(err.Error())</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Convert the dynamodb result to a struct.</span></span><br><span class="line">item := Item&#123;&#125;</span><br><span class="line">err = dynamodbattribute.UnmarshalMap(result.Item, &amp;item)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">fmt.Println(err.Error())</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(item) <span class="comment">// &#123;00001 1 some text...&#125;</span></span><br></pre></td></tr></table></figure><p><code>GetItemInput</code> ã‚’ä½œæˆã™ã‚‹éš›ã«ã€ã‚­ãƒ¼å±æ€§ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚<br>å–å¾—ã—ãŸçµæœã¯ <code>dynamodbattribute.UnmarshalMap</code> ã‚’åˆ©ç”¨ã—ã¦ä»»æ„ã®æ§‹é€ ä½“ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã§ãã¾ã™ã€‚</p><h3 id="Update"><a href="#Update" class="headerlink" title="Update"></a>Update</h3><p>åˆ©ç”¨ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã¯ <code>UpdateItem</code> ã§ã™ã€‚<br>ã©ã®ã‚­ãƒ¼ã‚’ã©ã®å€¤ã«æ›´æ–°ã™ã‚‹ã‹ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€å°‘ã—ã‚³ãƒ¼ãƒ‰ãŒè¤‡é›‘ã«ãªã‚Šã¾ã™ã€‚ </p><figure class="highlight go"><figcaption><span>Updateå‡¦ç†</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Create an expression for update.</span></span><br><span class="line">update := expression.UpdateBuilder&#123;&#125;.Set(expression.Name(<span class="string">"MyText"</span>), expression.Value(<span class="string">"updated text"</span>))</span><br><span class="line">expr, err := expression.NewBuilder().WithUpdate(update).Build()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">fmt.Println(err.Error())</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Create an input.</span></span><br><span class="line">input := &amp;dynamodb.UpdateItemInput&#123;</span><br><span class="line">TableName: aws.String(<span class="string">"MyFirstTable"</span>),</span><br><span class="line">Key: <span class="keyword">map</span>[<span class="keyword">string</span>]*dynamodb.AttributeValue&#123;</span><br><span class="line"><span class="string">"MyHashKey"</span>: &#123;</span><br><span class="line">S: aws.String(<span class="string">"00001"</span>),</span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">"MyRangeKey"</span>: &#123;</span><br><span class="line">N: aws.String(<span class="string">"1"</span>),</span><br><span class="line">&#125;,</span><br><span class="line">&#125;,</span><br><span class="line">ExpressionAttributeNames:  expr.Names(),</span><br><span class="line">ExpressionAttributeValues: expr.Values(),</span><br><span class="line">UpdateExpression:          expr.Update(),</span><br><span class="line">ConditionExpression:       expr.Condition(),</span><br><span class="line">ReturnValues:              aws.String(dynamodb.ReturnValueAllNew),</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Execute.</span></span><br><span class="line">_, err = db.UpdateItem(input)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">fmt.Println(err.Error())</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>UpdateBuilder</code>, <code>ExpressionBuilder</code> ã‚’åˆ©ç”¨ã—ã¦ã€æ›´æ–°å¼ã‚’ä½œæˆã—ã¾ã™ã€‚<br><code>ConditionBuilder</code> ã‚’åˆ©ç”¨ã—ã¦æ›´æ–°æ¡ä»¶ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</p><h3 id="Delete"><a href="#Delete" class="headerlink" title="Delete"></a>Delete</h3><p>åˆ©ç”¨ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã¯ <code>UpdateItem</code> ã§ã™ã€‚</p><figure class="highlight go"><figcaption><span>Deleteå‡¦ç†</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Create an input.</span></span><br><span class="line">input := &amp;dynamodb.DeleteItemInput&#123;</span><br><span class="line">TableName: aws.String(<span class="string">"MyFirstTable"</span>),</span><br><span class="line">Key: <span class="keyword">map</span>[<span class="keyword">string</span>]*dynamodb.AttributeValue&#123;</span><br><span class="line"><span class="string">"MyHashKey"</span>: &#123;</span><br><span class="line">S: aws.String(<span class="string">"00001"</span>),</span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">"MyRangeKey"</span>: &#123;</span><br><span class="line">N: aws.String(<span class="string">"1"</span>),</span><br><span class="line">&#125;,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Execute.</span></span><br><span class="line">_, err := db.DeleteItem(input)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">fmt.Println(err.Error())</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="guregu-dynamo-ã¨ã®æ¯”è¼ƒ"><a href="#guregu-dynamo-ã¨ã®æ¯”è¼ƒ" class="headerlink" title="guregu/dynamo ã¨ã®æ¯”è¼ƒ"></a>guregu/dynamo ã¨ã®æ¯”è¼ƒ</h2><p>ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã‚ã‹ã‚‹ã¨ãŠã‚Šã€aws-sdkã‚’ç´ ã§åˆ©ç”¨ã™ã‚‹æ–¹ãŒç­‹åŠ›ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚<br>ãŸã ã—ç­†è€…ã¯ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ã‚’è€ƒæ…®ã—ã€æ¥µåŠ›ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£æ€§ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã¯ä¾å­˜ã—ãŸããªã„ï¼ˆç‰¹ã«ã‚¢ãƒ—ãƒªã®ã‚³ã‚¢ã¨ãªã‚‹éƒ¨åˆ†ã¯ï¼‰ã¨ã„ã†æ€ã„ã‚‚ã‚ã‚Šã€aws-sdkã®ã¿ã‚’åˆ©ç”¨ã™ã‚‹æ–¹é‡ã‚’ã¨ã£ã¦ã„ã¾ã™ã€‚</p><p>ã¨ã¯ã„ãˆ <code>attribute</code> ã‚„ <code>expression</code> ã‚’æ¥µåŠ›æ›¸ããŸããªã„ã€æ›¸ã‹ã›ãŸããªã„ã¨ã„ã†æ€ã„ã‚‚ã‚ã‚Šã€<br>æ±ç”¨çš„ãªå‡¦ç†ã«ã¤ã„ã¦ã¯å…±é€šãƒ¡ã‚½ãƒƒãƒ‰ã‚’æ§‹ãˆã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã—ãŸã€‚</p><p>ä¾‹ãˆã°GETã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ä¸‹è¨˜ã®æ„Ÿã˜ã§ã™ã€‚</p><figure class="highlight go"><figcaption><span>å…±é€šçš„ãªãƒ¡ã‚½ãƒƒãƒ‰</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(repo *BaseRepository)</span> <span class="title">get</span><span class="params">(req, res domain.Domain, consistent <span class="keyword">bool</span>)</span> <span class="title">error</span></span> &#123;</span><br><span class="line">key, err := repo.KeyAttributes(req)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> errors.Wrap(err, <span class="string">"failed to get DynamoDB key attributes"</span>)</span><br><span class="line">&#125;</span><br><span class="line">input := &amp;dynamodb.GetItemInput&#123;</span><br><span class="line">TableName:      repo.Table(),</span><br><span class="line">Key:            key,</span><br><span class="line">ConsistentRead: aws.Bool(consistent),</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Execute.</span></span><br><span class="line">output, err := repo.DB.GetItem(input)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> errors.Wrapf(err, <span class="string">"failed to execute DynamoDB Get API to %s"</span>, *repo.Table())</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(output.Item) == <span class="number">0</span> &#123;</span><br><span class="line"><span class="keyword">return</span> exception.NewNotFoundError(<span class="string">""</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> err = dynamodbattribute.UnmarshalMap(output.Item, &amp;res); err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> errors.Wrap(err, <span class="string">"failed to DynamoDB unmarshal"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// KeyAttributes returns a map of *dymanodb.AttributeValue that is dynamodb table key from the passed struct.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(repo *BaseRepository)</span> <span class="title">KeyAttributes</span><span class="params">(domain <span class="keyword">interface</span>&#123;&#125;)</span> <span class="params">(<span class="keyword">map</span>[<span class="keyword">string</span>]*dynamodb.AttributeValue, error)</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> repo.attributes(domain, <span class="function"><span class="keyword">func</span><span class="params">(tag reflect.StructTag)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">_, ok := tag.Lookup(<span class="string">"dynamodbkey"</span>)</span><br><span class="line"><span class="keyword">return</span> ok</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(repo *BaseRepository)</span> <span class="title">attributes</span><span class="params">(domain <span class="keyword">interface</span>&#123;&#125;, condition <span class="keyword">func</span>(tag reflect.StructTag)</span> <span class="title">bool</span>) <span class="params">(<span class="keyword">map</span>[<span class="keyword">string</span>]*dynamodb.AttributeValue, error)</span></span> &#123;</span><br><span class="line">rv := reflect.Indirect(reflect.ValueOf(domain))</span><br><span class="line"><span class="keyword">if</span> rv.Kind() != reflect.Struct &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, errors.New(<span class="string">"domain must be a struct"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Create dynamodb attributes.</span></span><br><span class="line">attr, err := dynamodbattribute.MarshalMap(rv.Interface())</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Delete attributes by condition.</span></span><br><span class="line"><span class="keyword">var</span> deleteAttr <span class="function"><span class="keyword">func</span><span class="params">(rv reflect.Value)</span></span></span><br><span class="line"><span class="function"><span class="title">deleteAttr</span> = <span class="title">func</span><span class="params">(rv reflect.Value)</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> i, rt := <span class="number">0</span>, rv.Type(); i &lt; rv.NumField(); i++ &#123;</span><br><span class="line"><span class="keyword">if</span> rv.Field(i).Kind() == reflect.Struct &amp;&amp; rt.Field(i).Anonymous &#123;</span><br><span class="line">deleteAttr(rv.Field(i))</span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line">&#125;</span><br><span class="line">name, tag := rt.Field(i).Name, rt.Field(i).Tag</span><br><span class="line"><span class="keyword">if</span> !condition(tag) &#123;</span><br><span class="line"><span class="keyword">if</span> dynamodbav := tag.Get(<span class="string">"dynamodbav"</span>); dynamodbav != <span class="string">""</span> &#123;</span><br><span class="line"><span class="built_in">delete</span>(attr, strings.Split(dynamodbav, <span class="string">","</span>)[<span class="number">0</span>])</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="built_in">delete</span>(attr, name)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">deleteAttr(rv)</span><br><span class="line"><span class="keyword">return</span> attr, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒæ§˜ã«Update, Create, Deleteã‚‚æ±åŒ–ã™ã‚‹ã“ã¨ã§ã€å‘¼ã³å‡ºã—å…ƒã®å®Ÿè£…ã¯æ¥µã‚ã¦ã‚·ãƒ³ãƒ—ãƒ«ã«ã™ã‚‹ã“ã¨ãŒã§ãã¦ã¾ã—ãŸã€‚<br>ã‚‚ã¡ã‚ã‚“ã‚ˆã‚Šè¤‡é›‘ãªã“ã¨ã‚’ã‚„ã‚ã†ã¨ã™ã‚‹ã¨ã‚³ãƒ¼ãƒ‰ã‚‚ç…©é›‘ã«ãªã‚Šã€ãã‚Œã“ã <code>dynamodb/guregu</code> ç›¸å½“ã®ã‚‚ã®ã‚’å†é–‹ç™ºã™ã‚‹ã“ã¨ã«ãªã‚Šã‹ã­ã¾ã›ã‚“ã€‚<br>ã‚ã‚‹ç¨‹åº¦ã®åˆ¶ç´„ã‚’è¨­ã‘ã‚‹ãªã©ã—ã¦DynamoDBã®åˆ©ç”¨ã‚·ãƒ¼ãƒ³ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«ã§ãã‚‹ã®ã§ã‚ã‚‹ã®ã§ã‚ã‚Œã°ã€ç­†è€…ã¯aws-sdkã®ã¿ã®åˆ©ç”¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚</p><h2 id="æœ€å¾Œã«"><a href="#æœ€å¾Œã«" class="headerlink" title="æœ€å¾Œã«"></a>æœ€å¾Œã«</h2><p>ç¬¬2æ®µã®è¨˜äº‹ã¯ã„ã‹ãŒã ã£ãŸã§ã—ã‚‡ã†ã‹ã€‚<br>gureguãªã©ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£è£½ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®åˆ©ç”¨ã¨è¿·ã£ã¦ã„ã‚‹æ–¹ã®å‚è€ƒã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚</p><p>ãã‚Œã§ã¯ã€æ˜æ—¥ã®æŠ•ç¨¿ã‚‚ãŠæ¥½ã—ã¿ã«ã€‚</p><p><a href="https://future-architect.github.io/tags/DynamoDB%C3%97Go/">DynamoDBÃ—Goé€£è¼‰ä¼ç”»</a>ä»¥å¤–ã«ã‚‚å¤šãã®é€£è¼‰ä¼ç”»ãŒã‚ã‚Šã¾ã™ã€‚ç‰¹ã«Go Cloudé€£è¼‰ãŒä»Šå›ã®ãƒ†ãƒ¼ãƒã«è¿‘ã„ã§ã™ã€‚</p><ul><li><a href="https://future-architect.github.io/tags/GoCDK/">Go Cloud é€£è¼‰</a></li><li><a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCP é€£è¼‰</a></li><li><a href="https://future-architect.github.io/tags/Auth0/">Auth0 é€£è¼‰</a><div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none; padding-left: 0;"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">1.</span><span style="display: inline-block; vertical-align: top;">Technology Innovation Groupã®ç•¥ã§ã€ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®ä¸­ã§ã‚‚ç‰¹ã«ITæŠ€è¡“ã«ç‰¹åŒ–ã—ãŸéƒ¨éšŠã§ã™ã€‚ãã®ä¸­ã§ã‚‚DXãƒãƒ¼ãƒ ã¯ç‰¹ã«ãƒ‡ã‚¸ã‚¿ãƒ«ãƒˆãƒ©ãƒ³ã‚¹ãƒ•ã‚©ãƒ¼ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã«é–¢ã‚ã‚‹ä»•äº‹ã‚’æ¨é€²ã—ã¦ã„ããƒãƒ¼ãƒ ã§ã™ã€‚</span><a href="#fnref:1" rev="footnote"> â†©</a></li></ol></div></div></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€‚TIG DXãƒ¦ãƒ‹ãƒƒãƒˆ&lt;sup id=&quot;fnref:1&quot;&gt;&lt;a href=&quot;#fn:1&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;ã®æ­¦ç”°ã§ã™ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; t
      
    
    </summary>
    
      <category term="Programming" scheme="https://future-architect.github.io/categories/Programming/"/>
    
    
      <category term="AWS" scheme="https://future-architect.github.io/tags/AWS/"/>
    
      <category term="Go" scheme="https://future-architect.github.io/tags/Go/"/>
    
      <category term="DynamoDBÃ—Go" scheme="https://future-architect.github.io/tags/DynamoDB%C3%97Go/"/>
    
  </entry>
  
  <entry>
    <title>DynamoDBÃ—Goé€£è¼‰#1 Goã§DynamoDBã§ãŠãªã˜ã¿ã®guregu/dynamoã‚’åˆ©ç”¨ã™ã‚‹</title>
    <link href="https://future-architect.github.io/articles/20200225/"/>
    <id>https://future-architect.github.io/articles/20200225/</id>
    <published>2020-02-25T01:32:43.000Z</published>
    <updated>2020-03-09T04:33:45.464Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>ã“ã‚“ã«ã¡ã¯ã€æ‘ç”°ã§ã™ã€‚Goè¨€èªã§Webã‚µãƒ¼ãƒã‚’å®Ÿè£…ã—ã¦ã„ãŸéš›ã«DynamoDBã‚’æ‰±ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦Gregã•ã‚“ã® <a href="https://github.com/guregu/dynamo" target="_blank" rel="noopener">https://github.com/guregu/dynamo</a> ã‚’ä½¿ã£ã¦ã„ã¾ã—ãŸã€‚ï¼ˆ2å¹´ã»ã©ç¨¼åƒã—ã¦ã„ã¾ã™ãŒã€ç‰¹ã«å•é¡Œã‚‚å‡ºã¦ã„ã¾ã›ã‚“ï¼‰</p><p>å½“æ™‚Goåˆå¿ƒè€…ã ã£ãŸç§ã¯ã€Œgo dynamoã€ã¨ã™ãã•ã¾Googleå…ˆç”Ÿã«å•ã„åˆã‚ã›ã€ã€Œguregu/dynamoãŒã‚ªã‚¹ã‚¹ãƒ¡ã€ã¨ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚’å¤šæ•°ç™ºè¦‹ã—ã¾ã—ãŸã€‚ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å–ã‚Šå›ã—ãŒéš è”½åŒ–ã•ã‚Œã¦ã„ã¦ã¨ã«ã‹ãå®Ÿè£…ãŒç°¡å˜ã ã¨è¨˜äº‹ã«ã‚‚æ›¸ã„ã¦ã‚ã‚Šã¾ã—ãŸã—ã€ç§è‡ªèº«ã‚‚å®Ÿéš›ãã†æ„Ÿã˜ã¾ã—ãŸã€‚</p><p>ã™ã§ã«ã‚¿ã‚¤ãƒˆãƒ«ã‹ã‚‰ãŠå¯Ÿã—ã‹ã¨æ€ã„ã¾ã™ãŒã€æœ¬è¨˜äº‹ã¯é€£è¼‰ç¬¬1å›ç›®ã§ã™ã€‚æ™‚ä»£ã®ç§»ã‚ã„ã«åˆã‚ã›ã¦DynamoDBÃ—Goç•Œéšˆã®äº‹æƒ…ã‚‚åˆ»ä¸€åˆ»ã¨å¤‰åŒ–ã—ã¦ã„ã¾ã™ã€‚ã¾ãšã¯ç§ã®åˆ©ç”¨ã—ã¦ã„ãŸSDK(guregu/dynamo)ã«ã¤ã„ã¦ã‹ã‚‰æœ¬é€£è¼‰ã‚’ã‚¹ã‚¿ãƒ¼ãƒˆã—ã¾ã™ã€‚</p><h1 id="SDK-guregu-dynamo-ã‚’ä½¿ã£ã¦DynamoDBã¸ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹"><a href="#SDK-guregu-dynamo-ã‚’ä½¿ã£ã¦DynamoDBã¸ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹" class="headerlink" title="SDK(guregu/dynamo)ã‚’ä½¿ã£ã¦DynamoDBã¸ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹"></a>SDK(guregu/dynamo)ã‚’ä½¿ã£ã¦DynamoDBã¸ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹</h1><h2 id="ãƒ­ãƒ¼ã‚«ãƒ«ã®æ¤œè¨¼ç’°å¢ƒã‚’æº–å‚™"><a href="#ãƒ­ãƒ¼ã‚«ãƒ«ã®æ¤œè¨¼ç’°å¢ƒã‚’æº–å‚™" class="headerlink" title="ãƒ­ãƒ¼ã‚«ãƒ«ã®æ¤œè¨¼ç’°å¢ƒã‚’æº–å‚™"></a>ãƒ­ãƒ¼ã‚«ãƒ«ã®æ¤œè¨¼ç’°å¢ƒã‚’æº–å‚™</h2><p>ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã«è§¦ã‚‹å‰ã«ã¾ãšã¯ç’°å¢ƒã®æº–å‚™ã‹ã‚‰ã€‚<br>DynamoDB Localã‚’Dockerä¸Šã§å‹•ã‹ã™ã®ãŒæ¥½ãªã®ã§ä»Šå›ã¯ãã¡ã‚‰ã‚’ä½¿ã„ã¾ã™ã€‚</p><figure class="highlight bash"><figcaption><span>DynamoDB-Localã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker pull amazon/dynamodb-local</span><br><span class="line">$ docker run -d --name dynamodb -p 8000:8000 amazon/dynamodb-local</span><br></pre></td></tr></table></figure><p>DynamoDB Localã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã¯aws cliã‚’åˆ©ç”¨ã™ã‚‹ã®ã§ãã¡ã‚‰ã‚‚æº–å‚™ã—ã¾ã™ã€‚ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã¯Endpointã®URLã‚’å¼•æ•°ã§æŒ‡å®šã—ã¦ã‚ã’ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><figure class="highlight bash"><figcaption><span>AWSCLIã®ãƒ†ã‚¹ãƒˆ_å¤±æ•—</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ aws dynamodb list-tables --endpoint-url http://localhost:8000 --region ap-northeast-1</span><br><span class="line">Unable to locate credentials. You can configure credentials by running <span class="string">"aws configure"</span>.</span><br></pre></td></tr></table></figure><p>æ€’ã‚‰ã‚Œã¡ã‚ƒã„ã¾ã—ãŸâ€¦<br>Fakeã§ã‚‚ã„ã„ã®ã§Credentialã‚’æŒ‡å®šã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã®ã§ <code>aws configure</code> ã‚’ä½¿ã£ã¦æŒ‡å®šã—ã¾ã™ã€‚</p><figure class="highlight bash"><figcaption><span>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®Profileä½œæˆ</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ aws configure</span><br><span class="line">AWS Access Key ID [None]: fake</span><br><span class="line">AWS Secret Access Key [None]: fake</span><br><span class="line">Default region name [None]: ap-northeast-1</span><br><span class="line">Default output format [None]: json</span><br></pre></td></tr></table></figure><p>â€¦ã¨ã„ã†ã“ã¨ã§æ°—ã‚’å–ã‚Šç›´ã—ã¦ã€</p><figure class="highlight bash"><figcaption><span>AWSCLIã®ãƒ†ã‚¹ãƒˆ_æˆåŠŸ</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ aws dynamodb list-tables --endpoint-url http://localhost:8000</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">"TableNames"</span>: []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>OKãã†ã§ã™ã­ã€‚ã‚ã¨ã¯ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã—ãŸã‚‰æº–å‚™OKã§ã™ã€‚<br>ä»Šå›ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¹ã‚­ãƒ¼ãƒã§ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚</p><ul><li>ãƒ†ãƒ¼ãƒ–ãƒ«å<ul><li><code>MyFirstTable</code></li></ul></li><li>HashKey<ul><li><code>MyHashKey</code> - <code>S</code></li></ul></li><li>RangeKey<ul><li><code>MyRangeKey</code> - <code>N</code></li></ul></li></ul><figure class="highlight bash"><figcaption><span>DynamoDBãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">$ aws dynamodb create-table --endpoint-url http://localhost:8000 --table-name MyFirstTable --attribute-definitions AttributeName=MyHashKey,AttributeType=S AttributeName=MyRangeKey,AttributeType=N --key-schema AttributeName=MyHashKey,KeyType=HASH AttributeName=MyRangeKey,KeyType=RANGE --provisioned-throughput ReadCapacityUnits=1,WriteCapacityUnits=1</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">"TableDescription"</span>: &#123;</span><br><span class="line">        <span class="string">"TableArn"</span>: <span class="string">"arn:aws:dynamodb:ddblocal:000000000000:table/MyFirstTable"</span>,</span><br><span class="line">        <span class="string">"AttributeDefinitions"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">"AttributeName"</span>: <span class="string">"MyHashKey"</span>,</span><br><span class="line">                <span class="string">"AttributeType"</span>: <span class="string">"S"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">"AttributeName"</span>: <span class="string">"MyRangeKey"</span>,</span><br><span class="line">                <span class="string">"AttributeType"</span>: <span class="string">"N"</span></span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">"ProvisionedThroughput"</span>: &#123;</span><br><span class="line">            <span class="string">"NumberOfDecreasesToday"</span>: 0,</span><br><span class="line">            <span class="string">"WriteCapacityUnits"</span>: 1,</span><br><span class="line">            <span class="string">"LastIncreaseDateTime"</span>: 0.0,</span><br><span class="line">            <span class="string">"ReadCapacityUnits"</span>: 1,</span><br><span class="line">            <span class="string">"LastDecreaseDateTime"</span>: 0.0</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"TableSizeBytes"</span>: 0,</span><br><span class="line">        <span class="string">"TableName"</span>: <span class="string">"MyFirstTable"</span>,</span><br><span class="line">        <span class="string">"TableStatus"</span>: <span class="string">"ACTIVE"</span>,</span><br><span class="line">        <span class="string">"KeySchema"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">"KeyType"</span>: <span class="string">"HASH"</span>,</span><br><span class="line">                <span class="string">"AttributeName"</span>: <span class="string">"MyHashKey"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">"KeyType"</span>: <span class="string">"RANGE"</span>,</span><br><span class="line">                <span class="string">"AttributeName"</span>: <span class="string">"MyRangeKey"</span></span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">"ItemCount"</span>: 0,</span><br><span class="line">        <span class="string">"CreationDateTime"</span>: xxxxx</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã¡ãªã¿ã«ã§ã™ãŒã€DynamoDB Localã®å ´åˆã¯è¨­å®šã—ãŸCapacity Unitã¯è€ƒæ…®ã•ã‚Œãªã„ã®ã§é©å½“ãªå€¤ã‚’è¨­å®šã—ã¦ã‚‚å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚</p><h2 id="ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰æ›¸ã„ã¦ã„ãã¾ã™"><a href="#ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰æ›¸ã„ã¦ã„ãã¾ã™" class="headerlink" title="ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰æ›¸ã„ã¦ã„ãã¾ã™"></a>ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰æ›¸ã„ã¦ã„ãã¾ã™</h2><p>â€»ã‚½ãƒ¼ã‚¹ã¯å…¨ã¦ <a href="https://github.com/mura123yasu/go-guregu-dynamo" target="_blank" rel="noopener">https://github.com/mura123yasu/go-guregu-dynamo</a> ã«ã‚¢ãƒƒãƒ—ã—ã¦ã„ã‚‹ã®ã§é©å®œå‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚</p><h3 id="ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’æº–å‚™"><a href="#ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’æº–å‚™" class="headerlink" title="ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’æº–å‚™"></a>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’æº–å‚™</h3><p>ç’°å¢ƒå¤‰æ•°ã‹ã‚‰è«¸ã€…ã®å€¤ã‚’å–å¾—ã™ã‚‹ã‚ˆã†ã«ã—ã¤ã¤ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ç”Ÿæˆã—ã¾ã™ã€‚<br>ãƒ†ãƒ¼ãƒ–ãƒ«åã¯å…ˆç¨‹ä½œæˆã—ãŸ <code>MyFirstTable</code> ã‚’è¨­å®šã—ã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç”Ÿæˆ</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®è¨­å®š</span></span><br><span class="line">dynamoDbRegion := os.Getenv(<span class="string">"AWS_REGION"</span>)</span><br><span class="line">disableSsl := <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// DynamoDB Localã‚’åˆ©ç”¨ã™ã‚‹å ´åˆã¯Endpointã®URLã‚’è¨­å®šã™ã‚‹</span></span><br><span class="line">dynamoDbEndpoint := os.Getenv(<span class="string">"DYNAMO_ENDPOINT"</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(dynamoDbEndpoint) != <span class="number">0</span> &#123;</span><br><span class="line">disableSsl = <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯æ±äº¬ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®š</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(dynamoDbRegion) == <span class="number">0</span> &#123;</span><br><span class="line">dynamoDbRegion = <span class="string">"ap-northeast-1"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">db := dynamo.New(session.New(), &amp;aws.Config&#123;</span><br><span class="line">Region:     aws.String(dynamoDbRegion),</span><br><span class="line">Endpoint:   aws.String(dynamoDbEndpoint),</span><br><span class="line">DisableSSL: aws.Bool(disableSsl),</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">table := db.Table(<span class="string">"MyFirstTable"</span>)</span><br><span class="line"><span class="comment">// (ä»¥ä¸‹ç•¥)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å˜ç´”ãªCRUD"><a href="#å˜ç´”ãªCRUD" class="headerlink" title="å˜ç´”ãªCRUD"></a>å˜ç´”ãªCRUD</h3><p>ã“ã“ã‹ã‚‰ã¯CRUDå‡¦ç†ã®å®Ÿè£…ã‚’é€²ã‚ã¾ã™ã€‚</p><h4 id="Create"><a href="#Create" class="headerlink" title="Create"></a>Create</h4><p>Createã§åˆ©ç”¨ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã¯ <code>Put</code> ã§ã™ã€‚</p><p>Putå¯¾è±¡ã®itemã‚’æº–å‚™ã—ã¦æ¸¡ã™ã ã‘ã§ç°¡å˜ã§ã™ãŒ1ç‚¹æ³¨æ„äº‹é …ãŒã‚ã‚Šã¾ã™ã€‚itemã¯Putå…ˆãƒ†ãƒ¼ãƒ–ãƒ«ã®Keyã‚’ã™ã¹ã¦å«ã‚€ã‚‚ã®ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚ä»Šå›ã§ã‚ã‚Œã° <code>MyHashKey</code> ã¨ <code>MyRangeKey</code> ã§ã™ã€‚</p><figure class="highlight go"><figcaption><span>Createå‡¦ç†</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// (ç•¥)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å˜ç´”ãªCRUD - Create</span></span><br><span class="line">item := Item&#123;</span><br><span class="line">MyHashKey:  <span class="string">"MyHash"</span>,</span><br><span class="line">MyRangeKey: <span class="number">1</span>,</span><br><span class="line">MyText:     <span class="string">"My First Text"</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> err := table.Put(item).Run(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">fmt.Printf(<span class="string">"Failed to put item[%v]\n"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// (ç•¥)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Read"><a href="#Read" class="headerlink" title="Read"></a>Read</h4><p>Readã§åˆ©ç”¨ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã¯ <code>Get</code> ã§ã™ã€‚ä»–ã«ã‚‚ <code>Scan</code> ã‚‚ä½¿ãˆã‚‹ã®ã§ç”¨é€”ã«åˆã‚ã›ã¦è‰²ã€…è©¦ã—ã¦ã¿ã¦ä¸‹ã•ã„ã€‚</p><p>ç§é”ãŒå®Ÿè£…ã—ãŸWebã‚µãƒ¼ãƒã§ã¯ã€DynamoDBã«å¯¾ã™ã‚‹ã‚¢ã‚¯ã‚»ã‚¹ã¯ã‚­ãƒ¼ã‚¢ã‚¯ã‚»ã‚¹ã®ã¿ã«é™å®šã—ã¦ã„ãŸãŸã‚ã€Getã®åˆ©ç”¨ã§äº‹è¶³ã‚Šã¾ã—ãŸã€‚</p><figure class="highlight go"><figcaption><span>Readå‡¦ç†</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// (ç•¥)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å˜ç´”ãªCRUD - Read</span></span><br><span class="line"><span class="keyword">var</span> readResult Item</span><br><span class="line">err = table.Get(<span class="string">"MyHashKey"</span>, item.MyHashKey).Range(<span class="string">"MyRangeKey"</span>, dynamo.Equal, item.MyRangeKey).One(&amp;readResult)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">fmt.Printf(<span class="string">"Failed to get item[%v]\n"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// (ç•¥)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Update"><a href="#Update" class="headerlink" title="Update"></a>Update</h4><p>åˆ©ç”¨ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã¯ <code>Update</code> ã§ã™ã€‚</p><p>å°‘ã—ä½™è«‡ã«ã¯ãªã‚‹ã®ã§ã™ãŒã€Webã‚µãƒ¼ãƒå®Ÿè£…æ™‚ã¯Updateã¯ä½¿ã„ã¾ã›ã‚“ã§ã—ãŸã€‚å¸¸ã«Putå‡¦ç†ã‚’è¡Œã£ã¦ãŠã‚Šã€å…¨ä½“ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‚’æ¤œè¨ã™ã‚‹ä¸­ã§å†ªç­‰æ€§ã‚’ä¿ã¤ãŸã‚ã«ãã®ã‚ˆã†ãªè¨­è¨ˆã«ã—ã¦ã„ã¾ã—ãŸã€‚</p><figure class="highlight go"><figcaption><span>Updateå‡¦ç†</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// (ç•¥)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å˜ç´”ãªCRUD - Update</span></span><br><span class="line"><span class="keyword">var</span> updateResult Item</span><br><span class="line">err = table.Update(<span class="string">"MyHashKey"</span>, item.MyHashKey).Range(<span class="string">"MyRangeKey"</span>, item.MyRangeKey).Set(<span class="string">"MyText"</span>, <span class="string">"My Second Text"</span>).Value(&amp;updateResult)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">fmt.Printf(<span class="string">"Failed to update item[%v]\n"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// (ç•¥)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Delete"><a href="#Delete" class="headerlink" title="Delete"></a>Delete</h4><p>åˆ©ç”¨ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã¯ <code>Delete</code> ã§ã™ã€‚</p><p>Keyã•ãˆæŒ‡å®šã—ã¦ã„ã‚Œã°å•é¡Œãªã„ã®ã¯ä»–ãƒ¡ã‚½ãƒƒãƒ‰ã¨å¤‰ã‚ã‚Šã¾ã›ã‚“ã€‚</p><figure class="highlight go"><figcaption><span>Deleteå‡¦ç†</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// (ç•¥)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å˜ç´”ãªCRUD - Delete</span></span><br><span class="line">err = table.Delete(<span class="string">"MyHashKey"</span>, item.MyHashKey).Range(<span class="string">"MyRangeKey"</span>, item.MyRangeKey).Run()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">fmt.Printf(<span class="string">"Failed to delete item[%v]\n"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// (ç•¥)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Conditional-Check"><a href="#Conditional-Check" class="headerlink" title="Conditional Check"></a>Conditional Check</h3><p>ã“ã‚Œã¯ã‚‚ã†ã‚´ãƒªã‚´ãƒªã«ä½¿ã„å€’ã—ã¾ã—ãŸã€‚ä»¥ä¸‹ã®ä¾‹ã¯ã¨ã¦ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ãªã‚‚ã®ã§ã™ãŒã€å®Ÿéš›ã«ã¯ <code>If(&quot;MyText = ?&quot;, &quot;some word&quot;)</code> ã®éƒ¨åˆ†ã«æ§˜ã€…ãªæ¡ä»¶ã‚’è¨˜è¼‰ã—ã¾ã™ã€‚æ›¸ãæ–¹ã¯è‰²ã€…ã‚ã‚‹ã®ã§å¿…è¦ã«å¿œã˜ã¦ç¢ºèªã—ã¦ã¿ã¦ãã ã•ã„ã€‚</p><figure class="highlight go"><figcaption><span>ConditionalCheckå‡¦ç†</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// (ç•¥)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Conditional Check</span></span><br><span class="line">err = table.Delete(<span class="string">"MyHashKey"</span>, item.MyHashKey).Range(<span class="string">"MyRangeKey"</span>, item.MyRangeKey).If(<span class="string">"MyText = ?"</span>, <span class="string">"some word"</span>).Run()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">fmt.Printf(<span class="string">"Failed to delete item with conditional check[%v]\n"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// (ç•¥)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¦ä»¶ã‚’æº€ãŸã™ãŸã‚ã«ã»ã¼ã»ã¼ãƒã‚¹ãƒˆã§å¿…è¦ã ã£ãŸConditional Checkã§ã™ãŒã€ã—ã£ã‹ã‚Šè¨­è¨ˆã—ã¦ãŠã‹ãªã„ã¨ä¸€ç•ªæ³£ãã‚’è¦‹ã‚‹ã“ã¨ã«ãªã‚‹éƒ¨åˆ†ã«ãªã‚Šã¾ã™ã€‚</p><p>ä¾‹ãˆã°ã€é–‹ç™ºå½“æ™‚ãƒ­ãƒƒã‚¯ã®æ©Ÿæ§‹ã‚’ã“ã®Conditional Checkã§å®Ÿç¾ã—ã¦ãŠã‚Šã€ãƒ­ãƒƒã‚¯å–å¾—è€…ä»¥å¤–ãŒãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’æ›´æ–°ã§ããªã„ã‚ˆã†ã«ãªã©åˆ¶å¾¡ã‚’ã‹ã‘ã¦ã„ãŸã®ã§ã™ãŒã€ä¸€é€£ã®ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã®ä¸­ã§äºˆæœŸã—ãªã„å‰²ã‚Šè¾¼ã¿ãŒç™ºç”Ÿã™ã‚‹ã¨æ°¸é ã«æ›´æ–°ã§ããªã„ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒç™»å ´ã—â€¦ã‚‚ã¡ã‚ã‚“è¨­è¨ˆãƒŸã‚¹ã«ã‚ˆã‚‹ã‚‚ã®ã§ã™ãŒã€ã¨ã¦ã‚‚è‹¦ã—ã¿ã¾ã—ãŸã€‚ï¼ˆåŸå› ç©¶æ˜ã®æ™‚é–“ã¯éå¸¸ã«æ¥½ã—ã‹ã£ãŸè¨˜æ†¶ã‚‚ã‚ã‚Šã¾ã™ãŒç¬‘ï¼‰</p><h3 id="ä¸€é€£ã®ã‚½ãƒ¼ã‚¹ã‚’å®Ÿè¡Œã—ã¦ã¿ã‚‹"><a href="#ä¸€é€£ã®ã‚½ãƒ¼ã‚¹ã‚’å®Ÿè¡Œã—ã¦ã¿ã‚‹" class="headerlink" title="ä¸€é€£ã®ã‚½ãƒ¼ã‚¹ã‚’å®Ÿè¡Œã—ã¦ã¿ã‚‹"></a>ä¸€é€£ã®ã‚½ãƒ¼ã‚¹ã‚’å®Ÿè¡Œã—ã¦ã¿ã‚‹</h3><p>ã•ã¦ã€ç´¹ä»‹ã—ã¦ããŸä¸€é€£ã®å‹•ä½œã‚’æœ€å¾Œã«å®Ÿè¡Œã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚DynamoDB Localã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯ç’°å¢ƒå¤‰æ•°ã«ã¦ <code>DYNAMO_ENDPOINT</code> ã ã‘æŒ‡å®šã—ã¦Runã™ã‚‹ã ã‘ã€‚ç°¡å˜ã§ã™ã­ã€‚</p><figure class="highlight sh"><figcaption><span>å®Ÿè¡Œ</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout https://github.com/mura123yasu/go-guregu-dynamo.git</span><br><span class="line">$ <span class="built_in">export</span> DYNAMO_ENDPOINT=http://localhost:8000</span><br><span class="line">$ go run main.go</span><br></pre></td></tr></table></figure><p>â€»ã¡ãªã¿ã«ã‚³ãƒŸãƒƒãƒˆã—ã¦ã„ã‚‹ã‚½ãƒ¼ã‚¹ã¯Conditional Checkã®Updateã ã‘ãŒå¤±æ•—ã—ã¾ã™ãŒã€æƒ³å®šé€šã‚Šãªã®ã§å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚</p><h1 id="æœ€å¾Œã«"><a href="#æœ€å¾Œã«" class="headerlink" title="æœ€å¾Œã«"></a>æœ€å¾Œã«</h1><p>é€£è¼‰åˆæ—¥ã®è¨˜äº‹ã¯ã„ã‹ãŒã ã£ãŸã§ã—ã‚‡ã†ã‹ï¼Ÿãƒ¬ãƒ™ãƒ«çš„ã«ã¯åˆå­¦è€…ã®æ–¹ã«å‘ã‘ãŸå†…å®¹ã ã£ãŸã‹ãªã¨æ€ã„ã¾ã™ã€‚ã€Œã¾ãšã¯Goè¨€èªã§DynamoDBã‚’ã¤ã¤ã„ã¦ã¿ãŸã„ã€ã¨ã„ã†æ–¹ãŒæœ¬è¨˜äº‹ã‚’é€šã˜ã¦ç°¡å˜ã«ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã§ããŸã‚‰å¹¸ã„ã§ã™ã€‚</p><p>ç¶šãã¯ã“ã¡ã‚‰ã§ã™ã€‚</p><ul><li><a href="https://future-architect.github.io/tags/DynamoDB%C3%97Go/">DynamoDBÃ—Goé€£è¼‰ä¼ç”»</a></li></ul><h2 id="é–¢é€£ãƒªãƒ³ã‚¯"><a href="#é–¢é€£ãƒªãƒ³ã‚¯" class="headerlink" title="é–¢é€£ãƒªãƒ³ã‚¯"></a>é–¢é€£ãƒªãƒ³ã‚¯</h2><p>DynamoDBÃ—Goä»¥å¤–ã«ã‚‚å¤šãã®é€£è¼‰ä¼ç”»ãŒã‚ã‚Šã¾ã™ã€‚ç‰¹ã«Go Cloudé€£è¼‰ãŒä»Šå›ã®ãƒ†ãƒ¼ãƒã«è¿‘ã„ã§ã™ã€‚</p><ul><li><a href="https://future-architect.github.io/tags/GoCDK/">Go Cloud é€£è¼‰</a></li><li><a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCP é€£è¼‰</a></li><li><a href="https://future-architect.github.io/tags/Auth0/">Auth0 é€£è¼‰</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h1&gt;&lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€æ‘ç”°ã§ã™ã€‚Goè¨€èªã§Webã‚µãƒ¼ãƒã‚’å®Ÿè£…ã—ã¦ã„ãŸéš›ã«DynamoDBã‚’æ‰±ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦Gregã•ã‚“ã® &lt;a h
      
    
    </summary>
    
      <category term="Programming" scheme="https://future-architect.github.io/categories/Programming/"/>
    
    
      <category term="AWS" scheme="https://future-architect.github.io/tags/AWS/"/>
    
      <category term="Go" scheme="https://future-architect.github.io/tags/Go/"/>
    
      <category term="DynamoDBÃ—Go" scheme="https://future-architect.github.io/tags/DynamoDB%C3%97Go/"/>
    
  </entry>
  
  <entry>
    <title>GCPé€£è¼‰#10 Terraform ã§ã¯ãªãCloud Deployment Manager ã‚’ä½¿ã£ã¦ã¿ã‚ˆã†</title>
    <link href="https://future-architect.github.io/articles/20200219/"/>
    <id>https://future-architect.github.io/articles/20200219/</id>
    <published>2020-02-19T01:05:30.000Z</published>
    <updated>2020-02-19T01:12:15.545Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><p><a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCP é€£è¼‰</a>ã‚‚ã„ã‚ˆã„ã‚ˆæœ€çµ‚æ—¥ã§ã™ï¼</p><p>æ™®æ®µã¯ã€Terraform ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã§ã™ãŒã€ãµã¨Cloud Deployment Manager ã‚’ä½¿ã£ãŸã“ã¨ãªã„ã“ã¨ã«æ°—ã¥ãã¾ã—ãŸã€‚ãã“ã§ã€Cloud Deployment Manager ã«ã¤ã„ã¦ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><h2 id="Cloud-Deployment-Manager-ã¨ã¯"><a href="#Cloud-Deployment-Manager-ã¨ã¯" class="headerlink" title="Cloud Deployment Manager ã¨ã¯"></a>Cloud Deployment Manager ã¨ã¯</h2><p><a href="https://cloud.google.com/deployment-manager" target="_blank" rel="noopener">Cloud Deployment Manager</a> ã¨ã¯ã€GCP ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’YAML ã§å®£è¨€çš„ã«è¨˜è¿°ã—ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚è¦ã¯ã€AWS ã®CloudFormation ãªã©ã«ã‚ãŸã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚</p><p>ã¡ãªã¿ã«ã§ã™ãŒã€Cloud Deployment Manager ã¯ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’Python ã‚„Jinja2 ã‚’ä½¿ã£ã¦ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚ã–ã£ãã‚Šã§ã™ãŒã€ä»¥ä¸‹ã«Cloud Deployment Manager ã¨ä¼¼ãŸã‚µãƒ¼ãƒ“ã‚¹ã‚’ã‚¯ãƒ©ã‚¦ãƒ‰æ¯ã«è¨˜è¼‰ã—ã¾ã™ã€‚</p><table><thead><tr><th></th><th>GCP</th><th>AWS</th><th>AWS</th><th>Alibaba Cloud</th></tr></thead><tbody><tr><td>Management tools</td><td>Cloud Deployment Manager</td><td>AWS CloudFormation</td><td>Cloud Development Kit (CDK)</td><td>Resource Orchestration Service</td></tr><tr><td>Format</td><td>JSON, YAML, Python, Jinja2</td><td>JSON, YAML</td><td>TypeScript, Python, Java, C#</td><td>JSON</td></tr></tbody></table><h2 id="äº‹å‰æº–å‚™"><a href="#äº‹å‰æº–å‚™" class="headerlink" title="äº‹å‰æº–å‚™"></a>äº‹å‰æº–å‚™</h2><p>äº‹å‰ã«ä»¥ä¸‹ã¯å®Ÿæ–½æ¸ˆã¿ã§ã‚ã‚‹ã“ã¨ã‚’å‰æã¨ã—ã¾ã™ã€‚</p><ul><li>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ</li><li><a href="https://cloud.google.com/sdk/docs/quickstarts?hl=ja" target="_blank" rel="noopener">gcloud</a> ã‚³ãƒãƒ³ãƒ‰ãŒä½¿ãˆã‚‹çŠ¶æ…‹</li></ul><p>ã¾ãšã€Deployment Manager ã®API ã‚’æœ‰åŠ¹åŒ–ã—ã€æ¬¡ã«gcloud ã‚³ãƒãƒ³ãƒ‰ã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æŒ‡å®šã—ã¾ã™ã€‚<br>[MY_PROJECT]ã«ã‚ã‚‰ã‹ã˜ã‚ä½œæˆã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ID ã‚’æŒ‡å®šã—ã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ gcloud auth login</span><br><span class="line">$ gcloud config <span class="built_in">set</span> project [MY_PROJECT]</span><br></pre></td></tr></table></figure><h2 id="Cloud-Deployment-Manager-äº‹å§‹ã‚"><a href="#Cloud-Deployment-Manager-äº‹å§‹ã‚" class="headerlink" title="Cloud Deployment Manager äº‹å§‹ã‚"></a>Cloud Deployment Manager äº‹å§‹ã‚</h2><p>ã¾ãšã¯ã€GCE ã‚’ä½œæˆã—ã¦æ…£ã‚Œã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><h3 id="å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ"><a href="#å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ" class="headerlink" title="å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ"></a>å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ</h3><p>YAML ã§ãƒªã‚½ãƒ¼ã‚¹ã‚’å®šç¾©ã—ã¾ã™ã€‚</p><figure class="highlight yaml"><figcaption><span>vm.yaml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">resources:</span></span><br><span class="line"><span class="attr">- type:</span> <span class="string">compute.v1.instance</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">test-vm</span></span><br><span class="line"><span class="attr">  properties:</span></span><br><span class="line"><span class="attr">    zone:</span> <span class="string">asia-northeast1-a</span></span><br><span class="line"><span class="attr">    machineType:</span> <span class="attr">https://www.googleapis.com/compute/v1/projects/[MY_PROJECT]/zones/asia-northeast1-a/machineTypes/f1-micro</span></span><br><span class="line"><span class="attr">    disks:</span></span><br><span class="line"><span class="attr">    - deviceName:</span> <span class="string">boot</span></span><br><span class="line"><span class="attr">      type:</span> <span class="string">PERSISTENT</span></span><br><span class="line"><span class="attr">      boot:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">      autoDelete:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">      initializeParams:</span></span><br><span class="line"><span class="attr">        sourceImage:</span> <span class="attr">https://www.googleapis.com/compute/v1/projects/debian-cloud/global/images/family/debian-9</span></span><br><span class="line"><span class="attr">    networkInterfaces:</span></span><br><span class="line"><span class="attr">    - network:</span> <span class="attr">https://www.googleapis.com/compute/v1/projects/[MY_PROJECT]/global/networks/default</span></span><br><span class="line"><span class="attr">      accessConfigs:</span></span><br><span class="line"><span class="attr">      - name:</span> <span class="string">External</span> <span class="string">NAT</span></span><br><span class="line"><span class="attr">        type:</span> <span class="string">ONE_TO_ONE_NAT</span></span><br></pre></td></tr></table></figure><p>å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã®è¨­å®šå†…å®¹ã‚’ä»¥ä¸‹ã«è¨˜è¼‰ã—ã¾ã™ã€‚</p><ul><li>name: ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åã‚’æŒ‡å®š</li><li>zone: ä½œæˆã™ã‚‹ã‚¾ãƒ¼ãƒ³ã‚’æŒ‡å®š</li><li>machineType: ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ—ã‚’æŒ‡å®š</li></ul><p>ã¾ãŸã€[MY_PROJECT]ã¯ã€ä½œæˆã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ID ã‚’æŒ‡å®šã—ã¾ã™ã€‚</p><h3 id="ãƒªã‚½ãƒ¼ã‚¹ã®ãƒ‡ãƒ—ãƒ­ã‚¤"><a href="#ãƒªã‚½ãƒ¼ã‚¹ã®ãƒ‡ãƒ—ãƒ­ã‚¤" class="headerlink" title="ãƒªã‚½ãƒ¼ã‚¹ã®ãƒ‡ãƒ—ãƒ­ã‚¤"></a>ãƒªã‚½ãƒ¼ã‚¹ã®ãƒ‡ãƒ—ãƒ­ã‚¤</h3><p>ãƒªã‚½ãƒ¼ã‚¹ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã¯ã€<code>gcloud</code>ã‚’ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚</p><p>ã¾ãšã¯ã€ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ä½œæˆã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æŒ‡å®šã™ã‚‹ã¨ä½œæˆã‚„æ›´æ–°å‰ã«ã©ã®ã‚ˆã†ãªå¤‰åŒ–ã‚’ã‚‚ãŸã‚‰ã™ã‹ã‚’ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚è¦ã¯ã€dry-run çš„ãªç”¨é€”ã§ä½¿ãˆã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã™ã€‚</p><h4 id="ã‚³ãƒãƒ³ãƒ‰ã®æ§‹æˆã«ã¤ã„ã¦"><a href="#ã‚³ãƒãƒ³ãƒ‰ã®æ§‹æˆã«ã¤ã„ã¦" class="headerlink" title="ã‚³ãƒãƒ³ãƒ‰ã®æ§‹æˆã«ã¤ã„ã¦"></a>ã‚³ãƒãƒ³ãƒ‰ã®æ§‹æˆã«ã¤ã„ã¦</h4><p>ã‚³ãƒãƒ³ãƒ‰ã®æ§‹æˆã«ã¤ã„ã¦ä»¥ä¸‹ã«è¨˜è¼‰ã—ã¾ã™ã€‚<br>è©³ç´°ã¯ã€<a href="https://cloud.google.com/sdk/gcloud/reference/deployment-manager/deployments" target="_blank" rel="noopener">ã“ã¡ã‚‰</a>ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gcloud deployment-manager deployments COMMAND DEPLOYMENT_NAME --config [FILE_PATH] --preview</span><br></pre></td></tr></table></figure><ul><li>COMMAND: create, delete, update ãªã©ã‚’æŒ‡å®š</li><li>DEPLOYMENT_NAME: ãƒ‡ãƒ—ãƒ­ã‚¤ã®åå‰ã‚’æŒ‡å®šï¼ˆä»»æ„ã®åå‰ï¼‰</li><li>FILE_PATH: å…ˆã»ã©ä½œæˆã—ãŸãƒªã‚½ãƒ¼ã‚¹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã‚’æŒ‡å®š</li><li>â€“preview: dry-run çš„ã«å®Ÿè¡Œã—ãŸã„æ™‚ã«æŒ‡å®š</li></ul><p>ãã‚Œã§ã¯å®Ÿéš›ã«<a href="https://cloud.google.com/sdk/gcloud/reference/deployment-manager/deployments/create" target="_blank" rel="noopener">create</a>ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ gcloud deployment-manager deployments create <span class="built_in">test</span> --config vm.yaml --preview</span><br><span class="line">The fingerprint of the deployment is xxx</span><br><span class="line">Waiting <span class="keyword">for</span> create [xxx]...<span class="keyword">done</span>.</span><br><span class="line">Create operation xxx completed successfully.</span><br><span class="line">NAME     TYPE                 STATE       ERRORS  INTENT</span><br><span class="line"><span class="built_in">test</span>-vm  compute.v1.instance  IN_PREVIEW  []      CREATE_OR_ACQUIRE</span><br></pre></td></tr></table></figure><p>å®Ÿè¡Œçµæœã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒã€<code>IN_PREVIEW</code>ã§ã‚ã‚‹ã“ã¨ã‹ã‚‰ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼çŠ¶æ…‹ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚<br>ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Ÿè¡Œå¾Œã«ãƒ–ãƒ©ã‚¦ã‚¶ã§ç¢ºèªã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«æ§‹æˆãªã©ã‚’ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><img src="/images/20200219/photo_20200219_01.png"><p>ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã‹ã‚‰ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ãŒã€<code>gcloud</code>ã‚³ãƒãƒ³ãƒ‰ã‹ã‚‰å®Ÿè¡Œã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚<br><a href="https://cloud.google.com/sdk/gcloud/reference/deployment-manager/deployments/update" target="_blank" rel="noopener">update</a>ã‚’æŒ‡å®šã—ã€<code>DEPLOYMENT_NAME</code>ã‚’æŒ‡å®šã—ã¾ã™ï¼ˆã“ã“ã§ã¯testï¼‰</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ gcloud deployment-manager deployments update <span class="built_in">test</span></span><br><span class="line">The fingerprint of the deployment is xxx==</span><br><span class="line">Waiting <span class="keyword">for</span> update [xxx]...<span class="keyword">done</span>.</span><br><span class="line">Update operation xxx completed successfully.</span><br><span class="line">NAME     TYPE                 STATE      ERRORS  INTENT</span><br><span class="line"><span class="built_in">test</span>-vm  compute.v1.instance  COMPLETED  []</span><br></pre></td></tr></table></figure><p>å®Ÿè¡Œçµæœã‹ã‚‰å…ˆã»ã©ã¾ã§ã¯<code>IN_PREVIEW</code>ã ã£ãŸãŒã€<code>COMPLETED</code>ã«å¤‰ã‚ã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚</p><p>ã¾ãŸã€ä»¥ä¸‹ã®ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ã‚‚ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‹ã‚‰ãƒ‡ãƒ—ãƒ­ã‚¤ã«å¤‰ã‚ã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚</p><p>å®Ÿéš›ã«ã€GCE ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«é·ç§»ã™ã‚‹ã¨ä½œæˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚</p><img src="/images/20200219/photo_20200219_02.png"><p>ãã®ä»–ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚<br><a href="https://cloud.google.com/sdk/gcloud/reference/deployment-manager/deployments/list" target="_blank" rel="noopener">list</a>ã‚³ãƒãƒ³ãƒ‰ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã®ä¸€è¦§ã‚’è¡¨ç¤ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ gcloud deployment-manager deployments list</span><br><span class="line">NAME  LAST_OPERATION_TYPE  STATUS  DESCRIPTION  MANIFEST  ERRORS</span><br><span class="line"><span class="built_in">test</span>  preview              DONE                           []</span><br></pre></td></tr></table></figure><p><a href="https://cloud.google.com/sdk/gcloud/reference/deployment-manager/deployments/describe" target="_blank" rel="noopener">describe</a>ã‚³ãƒãƒ³ãƒ‰ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã®è©³ç´°æƒ…å ±ã‚’ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ gcloud deployment-manager deployments describe <span class="built_in">test</span></span><br><span class="line">---</span><br><span class="line">fingerprint: xxx==</span><br><span class="line">id: <span class="string">'xxx'</span></span><br><span class="line">insertTime: <span class="string">'xxx'</span></span><br><span class="line">manifest: manifest-xxx</span><br><span class="line">name: <span class="built_in">test</span></span><br><span class="line">operation:</span><br><span class="line">  endTime: <span class="string">'xxx'</span></span><br><span class="line">  name: xxx</span><br><span class="line">  operationType: update</span><br><span class="line">  progress: 100</span><br><span class="line">  startTime: <span class="string">'xxx'</span></span><br><span class="line">  status: DONE</span><br><span class="line">  user: xxx</span><br><span class="line">NAME     TYPE                 STATE      INT</span><br><span class="line"><span class="built_in">test</span>-vm  compute.v1.instance  COMPLETED</span><br></pre></td></tr></table></figure><p>ã‚‚ã—ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’å‰Šé™¤ã—ãŸã„å ´åˆã¯ã€<a href="https://cloud.google.com/sdk/gcloud/reference/deployment-manager/deployments/delete" target="_blank" rel="noopener">delete</a>ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚<br><code>Do you want to continue (y/N)?</code>ã¯ã€<code>y</code>ã¨å…¥åŠ›ã—ã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ gcloud deployment-manager deployments delete <span class="built_in">test</span></span><br><span class="line">The following deployments will be deleted:</span><br><span class="line">- <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line">Do you want to <span class="built_in">continue</span> (y/N)?  y</span><br><span class="line"></span><br><span class="line">Waiting <span class="keyword">for</span> delete [xxx]...<span class="keyword">done</span>.</span><br><span class="line">Delete operation xxx completed successfully.</span><br></pre></td></tr></table></figure><p>ã“ã‚Œã§GCE ã®ä½œæˆã‹ã‚‰å‰Šé™¤ã¾ã§ã®ä¸€é€£ã®æ“ä½œã‚’è¡Œã„ã¾ã—ãŸã€‚</p><h2 id="è¤‡æ•°ã®VM-ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆ"><a href="#è¤‡æ•°ã®VM-ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆ" class="headerlink" title="è¤‡æ•°ã®VM ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆ"></a>è¤‡æ•°ã®VM ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆ</h2><p>å…ˆã»ã©ä½œæˆã—ãŸå®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¤‡è£½ã™ã‚‹ã‹ãŸã¡ã§ä½œæˆã—ã¾ã™ã€‚<br>ãƒ•ã‚¡ã‚¤ãƒ«åã¯ã€<code>vms.yaml</code>ã¨ã—ã¾ã™ã€‚</p><figure class="highlight yaml"><figcaption><span>vms.yaml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">resources:</span></span><br><span class="line"><span class="attr">- type:</span> <span class="string">compute.v1.instance</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">test-vm-01</span></span><br><span class="line"><span class="attr">  properties:</span></span><br><span class="line"><span class="attr">    zone:</span> <span class="string">asia-northeast1-a</span></span><br><span class="line"><span class="attr">    machineType:</span> <span class="attr">https://www.googleapis.com/compute/v1/projects/[MY_PROJECT]/zones/asia-northeast1-a/machineTypes/f1-micro</span></span><br><span class="line"><span class="attr">    disks:</span></span><br><span class="line"><span class="attr">    - deviceName:</span> <span class="string">boot</span></span><br><span class="line"><span class="attr">      type:</span> <span class="string">PERSISTENT</span></span><br><span class="line"><span class="attr">      boot:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">      autoDelete:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">      initializeParams:</span></span><br><span class="line"><span class="attr">        sourceImage:</span> <span class="attr">https://www.googleapis.com/compute/v1/projects/debian-cloud/global/images/family/debian-9</span></span><br><span class="line"><span class="attr">    networkInterfaces:</span></span><br><span class="line"><span class="attr">    - network:</span> <span class="attr">https://www.googleapis.com/compute/v1/projects/[MY_PROJECT]/global/networks/default</span></span><br><span class="line"><span class="attr">      accessConfigs:</span></span><br><span class="line"><span class="attr">      - name:</span> <span class="string">External</span> <span class="string">NAT</span></span><br><span class="line"><span class="attr">        type:</span> <span class="string">ONE_TO_ONE_NAT</span></span><br><span class="line"><span class="attr">- type:</span> <span class="string">compute.v1.instance</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">test-vm-02</span></span><br><span class="line"><span class="attr">  properties:</span></span><br><span class="line"><span class="attr">    zone:</span> <span class="string">asia-northeast1-a</span></span><br><span class="line"><span class="attr">    machineType:</span> <span class="attr">https://www.googleapis.com/compute/v1/projects/[MY_PROJECT]/zones/asia-northeast1-a/machineTypes/f1-micro</span></span><br><span class="line"><span class="attr">    disks:</span></span><br><span class="line"><span class="attr">    - deviceName:</span> <span class="string">boot</span></span><br><span class="line"><span class="attr">      type:</span> <span class="string">PERSISTENT</span></span><br><span class="line"><span class="attr">      boot:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">      autoDelete:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">      initializeParams:</span></span><br><span class="line"><span class="attr">        sourceImage:</span> <span class="attr">https://www.googleapis.com/compute/v1/projects/debian-cloud/global/images/family/debian-9</span></span><br><span class="line"><span class="attr">    networkInterfaces:</span></span><br><span class="line"><span class="attr">    - network:</span> <span class="attr">https://www.googleapis.com/compute/v1/projects/[MY_PROJECT]/global/networks/default</span></span><br><span class="line"><span class="attr">      accessConfigs:</span></span><br><span class="line"><span class="attr">      - name:</span> <span class="string">External</span> <span class="string">NAT</span></span><br><span class="line"><span class="attr">        type:</span> <span class="string">ONE_TO_ONE_NAT</span></span><br></pre></td></tr></table></figure><p><code>name</code>ã‚’01ã¨02ã«åˆ†ã‘ã‚‹ã‹ãŸã¡ã§VM ã‚’2å°åˆ†ã®å®šç¾©ã‚’è¨˜è¿°ã—ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ gcloud deployment-manager deployments create <span class="built_in">test</span>-vms --config vms.yaml</span><br><span class="line">The fingerprint of the deployment is xxx==</span><br><span class="line">Waiting <span class="keyword">for</span> create [xxx]...<span class="keyword">done</span>.</span><br><span class="line">Create operation xxx completed successfully.</span><br><span class="line">NAME        TYPE                 STATE      ERRORS  INTENT</span><br><span class="line"><span class="built_in">test</span>-vm-01  compute.v1.instance  COMPLETED  []</span><br><span class="line"><span class="built_in">test</span>-vm-02  compute.v1.instance  COMPLETED  []</span><br></pre></td></tr></table></figure><p>ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã€ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚‚2å°ä½œæˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚</p><img src="/images/20200219/photo_20200219_03.png"><p>ã“ã®ã‚ˆã†ã«YAML ã§å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ã„ã¦ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚<br>ã—ã‹ã—ã€ã“ã®ã‚ˆã†ãªæ›¸ãæ–¹ã§ã¯å†—é•·ã•ã‚’æ„Ÿã˜ã¦ã—ã¾ã„ã¾ã™ã­ã€‚<br>æ¬¡ã¯ã€å†åˆ©ç”¨æ€§ã‚’é«˜ã‚ã‚‹ãŸã‚ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ç´¹ä»‹ã—ã¾ã™ã€‚</p><h2 id="ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’åˆ©ç”¨ã™ã‚‹"><a href="#ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’åˆ©ç”¨ã™ã‚‹" class="headerlink" title="ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’åˆ©ç”¨ã™ã‚‹"></a>ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’åˆ©ç”¨ã™ã‚‹</h2><p>ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’åˆ©ç”¨ã™ã‚‹ã¨ãƒªã‚½ãƒ¼ã‚¹ã‚’å®šç¾©ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç‹¬ç«‹ã•ã›ã¦å†åˆ©ç”¨æ€§ã‚’é«˜ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œæˆã™ã‚‹ã«ã¯ã€<font color="DeepSkyBlue">Python</font>ã‚„<font color="DeepSkyBlue">Jinja2</font>ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚Pythonã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯ã€Python 3.x ã§ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼ˆå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ—¥æœ¬èªã‚µã‚¤ãƒˆã ã¨Python 2.7 ã¨è¨˜è¼‰ãŒã‚ã‚Šã¾ã™ãŒã€è‹±èªã‚µã‚¤ãƒˆã ã¨Python 3.x ã¨è¨˜è¼‰ãŒã‚ã‚‹ã®ã§æ³¨æ„ï¼‰</p><h3 id="ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä½œæˆ"><a href="#ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä½œæˆ" class="headerlink" title="ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä½œæˆ"></a>ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä½œæˆ</h3><p>ä»Šå›ã‚‚GCE 2å°ä½œæˆã—ã€åˆã‚ã›ã¦ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ã®è¨­å®šãªã©ã‚‚è¡Œã„ãŸã„ã¨æ€ã„ã¾ã™ã€‚<br>ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æº–å‚™ã—ã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ firewall_template.py</span><br><span class="line">â”œâ”€â”€ gce_template.py</span><br><span class="line">â”œâ”€â”€ network_template.py</span><br><span class="line">â”œâ”€â”€ vm_template.py</span><br><span class="line">â””â”€â”€ vms.yaml</span><br></pre></td></tr></table></figure><h3 id="ç’°å¢ƒå¤‰æ•°ã¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ã¤ã„ã¦"><a href="#ç’°å¢ƒå¤‰æ•°ã¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ã¤ã„ã¦" class="headerlink" title="ç’°å¢ƒå¤‰æ•°ã¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ã¤ã„ã¦"></a>ç’°å¢ƒå¤‰æ•°ã¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ã¤ã„ã¦</h3><p>ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ã€ä»»æ„ã®å¤‰æ•°ã‚’è¡¨ã—ã¾ã™ã€‚<br>ä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ•°ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">context.properties[<span class="string">'zone'</span>],</span><br></pre></td></tr></table></figure><p>ã¾ãŸã€ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆå›ºæœ‰ã®ç’°å¢ƒå¤‰æ•°ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚<br>ç’°å¢ƒå¤‰æ•°ã®å‘¼ã³å‡ºã—æ–¹ã¯ã€ä»¥ä¸‹ã®æ§‹æ–‡ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID ã‚’å–å¾—ã—ã¾ã™ã€‚<br>è©³ç´°ãªç’°å¢ƒå¤‰æ•°ã«ã¤ã„ã¦ã¯ã€<a href="https://cloud.google.com/deployment-manager/docs/configuration/templates/use-environment-variables?hl=ja" target="_blank" rel="noopener">ã“ã¡ã‚‰</a>ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ontext.env[<span class="string">'project'</span>]</span><br></pre></td></tr></table></figure><p>VM ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å®šç¾©ã—ã¾ã™ã€‚</p><figure class="highlight python"><figcaption><span>vm_template.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">COMPUTE_URL_BASE = <span class="string">'https://www.googleapis.com/compute/v1/'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">GenerateConfig</span><span class="params">(context)</span>:</span></span><br><span class="line">  resources = [&#123;</span><br><span class="line">      <span class="string">'name'</span>: context.env[<span class="string">'name'</span>],</span><br><span class="line">      <span class="string">'type'</span>: <span class="string">'compute.v1.instance'</span>,</span><br><span class="line">      <span class="string">'properties'</span>: &#123;</span><br><span class="line">          <span class="string">'zone'</span>: context.properties[<span class="string">'zone'</span>],</span><br><span class="line">          <span class="string">'machineType'</span>: <span class="string">''</span>.join([COMPUTE_URL_BASE, <span class="string">'projects/'</span>,</span><br><span class="line">                                  context.env[<span class="string">'project'</span>], <span class="string">'/zones/'</span>,</span><br><span class="line">                                  context.properties[<span class="string">'zone'</span>], <span class="string">'/machineTypes/'</span>,</span><br><span class="line">                                  context.properties[<span class="string">'machineType'</span>]]),</span><br><span class="line">          <span class="string">'disks'</span>: [&#123;</span><br><span class="line">              <span class="string">'deviceName'</span>: <span class="string">'boot'</span>,</span><br><span class="line">              <span class="string">'type'</span>: <span class="string">'PERSISTENT'</span>,</span><br><span class="line">              <span class="string">'boot'</span>: <span class="literal">True</span>,</span><br><span class="line">              <span class="string">'autoDelete'</span>: <span class="literal">True</span>,</span><br><span class="line">              <span class="string">'initializeParams'</span>: &#123;</span><br><span class="line">                  <span class="string">'sourceImage'</span>: <span class="string">''</span>.join([COMPUTE_URL_BASE, <span class="string">'projects/'</span>,</span><br><span class="line">                                          <span class="string">'debian-cloud/global/'</span>,</span><br><span class="line">                                          <span class="string">'images/family/debian-9'</span>])</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;],</span><br><span class="line">          <span class="string">'networkInterfaces'</span>: [&#123;</span><br><span class="line">              <span class="string">'network'</span>: <span class="string">'$(ref.'</span> + context.properties[<span class="string">'network'</span>]</span><br><span class="line">                         + <span class="string">'.selfLink)'</span>,</span><br><span class="line">              <span class="string">'accessConfigs'</span>: [&#123;</span><br><span class="line">                  <span class="string">'name'</span>: <span class="string">'External NAT'</span>,</span><br><span class="line">                  <span class="string">'type'</span>: <span class="string">'ONE_TO_ONE_NAT'</span></span><br><span class="line">              &#125;]</span><br><span class="line">          &#125;]</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;]</span><br><span class="line">  <span class="keyword">return</span> &#123;<span class="string">'resources'</span>: resources&#125;</span><br></pre></td></tr></table></figure><p>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’å®šç¾©ã—ã¾ã™ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">def GenerateConfig(context):</span><br><span class="line">  resources = [&#123;</span><br><span class="line">      &apos;name&apos;: context.env[&apos;name&apos;],</span><br><span class="line">      &apos;type&apos;: &apos;compute.v1.network&apos;,</span><br><span class="line">      &apos;properties&apos;: &#123;</span><br><span class="line">          &apos;routingConfig&apos;: &#123;</span><br><span class="line">              &apos;routingMode&apos;: &apos;REGIONAL&apos;</span><br><span class="line">          &#125;,</span><br><span class="line">          &apos;autoCreateSubnetworks&apos;: True</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;]</span><br><span class="line">  return &#123;&apos;resources&apos;: resources&#125;</span><br></pre></td></tr></table></figure><p>ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ã‚’å®šç¾©ã—ã¾ã™ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">def GenerateConfig(context):</span><br><span class="line">  resources = [&#123;</span><br><span class="line">      &apos;name&apos;: context.env[&apos;name&apos;],</span><br><span class="line">      &apos;type&apos;: &apos;compute.v1.firewall&apos;,</span><br><span class="line">      &apos;properties&apos;: &#123;</span><br><span class="line">          &apos;network&apos;: &apos;$(ref.&apos; + context.properties[&apos;network&apos;] + &apos;.selfLink)&apos;,</span><br><span class="line">          &apos;sourceRanges&apos;: [&apos;0.0.0.0/0&apos;],</span><br><span class="line">          &apos;allowed&apos;: [&#123;</span><br><span class="line">              &apos;IPProtocol&apos;: &apos;TCP&apos;,</span><br><span class="line">              &apos;ports&apos;: [80]</span><br><span class="line">          &#125;]</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;]</span><br><span class="line">  return &#123;&apos;resources&apos;: resources&#125;</span><br></pre></td></tr></table></figure><p>ã“ã“ã§ä¸Šè¨˜ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«æŒ‡å®šã™ã‚‹å¤‰æ•°ã®å®šç¾©ã‚’ä½œæˆã—ã¾ã™ã€‚</p><figure class="highlight python"><figcaption><span>gce_template.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">NETWORK_NAME = <span class="string">'test-network'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">GenerateConfig</span><span class="params">(unused_context)</span>:</span></span><br><span class="line">  resources = [&#123;</span><br><span class="line">      <span class="string">'name'</span>: <span class="string">'test-vm-01'</span>,</span><br><span class="line">      <span class="string">'type'</span>: <span class="string">'vm_template.py'</span>,</span><br><span class="line">      <span class="string">'properties'</span>: &#123;</span><br><span class="line">          <span class="string">'machineType'</span>: <span class="string">'f1-micro'</span>,</span><br><span class="line">          <span class="string">'zone'</span>: <span class="string">'asia-northeast1-a'</span>,</span><br><span class="line">          <span class="string">'network'</span>: NETWORK_NAME</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;, &#123;</span><br><span class="line">      <span class="string">'name'</span>: <span class="string">'test-vm-02'</span>,</span><br><span class="line">      <span class="string">'type'</span>: <span class="string">'vm_template.py'</span>,</span><br><span class="line">      <span class="string">'properties'</span>: &#123;</span><br><span class="line">          <span class="string">'machineType'</span>: <span class="string">'g1-small'</span>,</span><br><span class="line">          <span class="string">'zone'</span>: <span class="string">'asia-northeast1-a'</span>,</span><br><span class="line">          <span class="string">'network'</span>: NETWORK_NAME</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;, &#123;</span><br><span class="line">      <span class="string">'name'</span>: NETWORK_NAME,</span><br><span class="line">      <span class="string">'type'</span>: <span class="string">'network_template.py'</span></span><br><span class="line">  &#125;, &#123;</span><br><span class="line">      <span class="string">'name'</span>: NETWORK_NAME + <span class="string">'-firewall'</span>,</span><br><span class="line">      <span class="string">'type'</span>: <span class="string">'firewall_template.py'</span>,</span><br><span class="line">      <span class="string">'properties'</span>: &#123;</span><br><span class="line">          <span class="string">'network'</span>: NETWORK_NAME</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;]</span><br><span class="line">  <span class="keyword">return</span> &#123;<span class="string">'resources'</span>: resources&#125;</span><br></pre></td></tr></table></figure><p>æœ€å¾Œã«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ãŸã‚ã®å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">imports:</span><br><span class="line">- path: vm_template.py</span><br><span class="line">- path: network_template.py</span><br><span class="line">- path: firewall_template.py</span><br><span class="line">- path: gce_template.py</span><br><span class="line"></span><br><span class="line">resources:</span><br><span class="line">- name: gce-setup</span><br><span class="line">  type: gce_template.py</span><br></pre></td></tr></table></figure><h3 id="ãƒ‡ãƒ—ãƒ­ã‚¤"><a href="#ãƒ‡ãƒ—ãƒ­ã‚¤" class="headerlink" title="ãƒ‡ãƒ—ãƒ­ã‚¤"></a>ãƒ‡ãƒ—ãƒ­ã‚¤</h3><p>å®Ÿè¡Œæ–¹æ³•ã¯ã€ä»Šã¾ã§å¤‰ã‚ã‚‰ãš<code>gcloud</code> ã‚³ãƒãƒ³ãƒ‰ã‹ã‚‰å®Ÿè¡Œã—ã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ gcloud deployment-manager deployments create <span class="built_in">test</span>-templates --config vms.yaml</span><br><span class="line">The fingerprint of the deployment is xxx==</span><br><span class="line">Waiting <span class="keyword">for</span> update [xxxx]...<span class="keyword">done</span>.</span><br><span class="line">Update operation xxx completed successfully.</span><br><span class="line">NAME                   TYPE                 STATE      ERRORS  INTENT</span><br><span class="line"><span class="built_in">test</span>-network           compute.v1.network   COMPLETED  []</span><br><span class="line"><span class="built_in">test</span>-network-firewall  compute.v1.firewall  COMPLETED  []</span><br><span class="line"><span class="built_in">test</span>-vm-01             compute.v1.instance  COMPLETED  []</span><br><span class="line"><span class="built_in">test</span>-vm-02             compute.v1.instance  COMPLETED  []</span><br></pre></td></tr></table></figure><p>ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ã‚‚ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚</p><img src="/images/20200219/photo_20200219_04.png"><h2 id="ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒ¢"><a href="#ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒ¢" class="headerlink" title="ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒ¢"></a>ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒ¢</h2><p>gcloud ã‚³ãƒãƒ³ãƒ‰ã‹ã‚‰ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸéš›ã«ä½•ã‹ã—ã‚‰ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸã¨ã—ã¾ã™ã€‚ã‚³ãƒ¼ãƒ‰ä¿®æ­£å¾Œã«ä»¥ä¸‹ã®ã‚ˆã†ã«å†åº¦<font color="LightCoral">â€œcreateâ€</font>ã‚’å®Ÿè¡Œã™ã‚‹ã¨<font color="LightCoral">â€œalready exists and cannot be createdâ€</font>ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ã€‚</p><p>åŸå› ã¯ã€å¤±æ•—ã—ãŸã¨ã—ã¦ã‚‚ä¸­é€”åŠç«¯ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã¯ä½œã‚‰ã‚Œã¦ã—ã¾ã†ãŸã‚ã€æ—¢ã«ã‚ã‚‹ã¨ã„ã£ãŸã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ gcloud deployment-manager deployments create <span class="built_in">test</span>-templates --config vms.yaml</span><br><span class="line">ERROR: (gcloud.deployment-manager.deployments.create) ResponseError: code=409, message=<span class="string">'projects/xxx/global/deployments/test-templates'</span> already exists and cannot be created.</span><br></pre></td></tr></table></figure><p>ãã‚Œã§ã¯ã€ã©ã®ã‚ˆã†ã«è§£æ¶ˆã™ã‚‹ã‹ã¨ã„ã†ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«<font color="LightCoral">â€œupdateâ€</font>ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gcloud deployment-manager deployments update <span class="built_in">test</span>-templates --config vms.yaml</span><br></pre></td></tr></table></figure><p>ã“ã®ä¸­é€”åŠç«¯ã«ä½œæˆã•ã‚Œã‚‹ã®ã¯è§£æ¶ˆã•ã‚Œã¦æ¬²ã—ã„ã§ã™ã­ã€‚ã€‚</p><h2 id="æ„Ÿæƒ³"><a href="#æ„Ÿæƒ³" class="headerlink" title="æ„Ÿæƒ³"></a>æ„Ÿæƒ³</h2><p>GCP ãƒªã‚½ãƒ¼ã‚¹ã‚’Python ã§æ“ã‚Œã‚‹ã“ã¨ã§ã€è‡ªç”±åº¦ã®é«˜ã„ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œæˆã§ãã‚‹ç‚¹ã¯é¢ç™½ã„ã¨æ€ã„ã¾ã—ãŸã€‚<br>ã¾ãŸã€Terraform ã¯ã€tfstate ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã‚’GCS ã‚„S3 ã«ä¿å­˜ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§ã€ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã‚„åŒæ™‚å®Ÿè¡Œãªã©ã‚’æ°—ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ãŒã€CloudFormation åŒæ§˜ã«çŠ¶æ…‹ç®¡ç†ã¯ã€GCP å´ã§ã‚ˆã—ãªã«ã‚„ã£ã¦ã‚‚ã‚‰ãˆã‚‹ã®ã‚‚ãƒ¡ãƒªãƒƒãƒˆã ã¨æ„Ÿã˜ã¾ã—ãŸã€‚</p><p>ãŸã ã€Google è‡ªä½“ã¯<a href="https://github.com/GoogleCloudPlatform/terraformer" target="_blank" rel="noopener">Terraformer</a>ãªã©ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½œæˆã—ã¦ã„ã‚‹ã“ã¨ã‹ã‚‰å‰²ã¨Terraform æ¨ã—ãªã®ã§ã¯ï¼Ÿã¨æ„Ÿã˜ã‚‹ã¨ã“ã‚ã‚‚ã‚ã‚Šã¾ã™ï¼ˆå€‹äººçš„è¦‹è§£ï¼‰<br>ãªã®ã§ã€å€‹äººçš„ã«ã¯ã€GCP ã ã‘ã§ãªãAWS ã‚„ã€æœ€è¿‘ã§ã¯Alibaba Cloud ãªã©ã®ã‚¯ãƒ©ã‚¦ãƒ‰ã‚’åˆ©ç”¨ã™ã‚‹æ©Ÿä¼šãŒå¤šã„ã®ã§ã€Terraform ä¸€æŠã«ãªã£ã¦ã—ã¾ã†ã®ãŒæœ¬éŸ³ã§ã™ã€‚<br>ã¨ã¯ã„ãˆã€ä»Šå›ã®ã‚ˆã†ã«è§¦ã‚ŒãŸã“ã¨ã®ãªã„ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½¿ã£ã¦ã¿ã‚‹ã®ã‚‚æ–°ãŸãªçŸ¥è¦‹ã¨ã—ã¦æ¥½ã—ã‚ã‚‹ã®ã§ã€ä»Šå¾Œã‚‚ã„ã‚ã„ã‚è§¦ã‚Œã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://cloud.google.com/deployment-manager/docs?hl=en" target="_blank" rel="noopener">Google Cloud Deployment Manager documentation</a><br><a href="https://cloud.google.com/sdk/gcloud/reference/deployment-manager" target="_blank" rel="noopener">gcloud deployment-manager</a><br><a href="https://github.com/GoogleCloudPlatform/deploymentmanager-samples" target="_blank" rel="noopener">deploymentmanager-samples</a><br><a href="https://cloud.google.com/deployment-manager/docs/configuration/templates/use-environment-variables?hl=ja" target="_blank" rel="noopener">ç’°å¢ƒå¤‰æ•°</a><br><a href="https://cloud.google.com/deployment-manager/docs/configuration/supported-resource-types?hl=en" target="_blank" rel="noopener">ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ—</a></p><h2 id="é–¢é€£ãƒªãƒ³ã‚¯"><a href="#é–¢é€£ãƒªãƒ³ã‚¯" class="headerlink" title="é–¢é€£ãƒªãƒ³ã‚¯"></a>é–¢é€£ãƒªãƒ³ã‚¯</h2><ul><li><a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCPé€£è¼‰ä¼ç”»</a></li><li><a href="https://future-architect.github.io/articles/20190903/">Terraformã®ãƒ™ã‚¹ãƒˆãªãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã£ã¦ãªã‚“ã ã‚ã†ã‹</a></li><li><a href="https://future-architect.github.io/articles/20190909/">Letâ€™s Try GCP #1 ï½Cloud Run Buttonã‚’ä½¿ã£ãŸæ¥½ã€…ã‚³ãƒ³ãƒ†ãƒŠãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ã‚„ã£ã¦ã¿ãŸï½</a></li><li><a href="https://future-architect.github.io/tags/GoCDK/">Go Cloudé€£è¼‰</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://future-architect.github.io/tags/GCP%E9%80%A3%
      
    
    </summary>
    
      <category term="Infrastructure" scheme="https://future-architect.github.io/categories/Infrastructure/"/>
    
    
      <category term="GCP" scheme="https://future-architect.github.io/tags/GCP/"/>
    
      <category term="GCPé€£è¼‰" scheme="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/"/>
    
  </entry>
  
  <entry>
    <title>GCPé€£è¼‰#9 åˆã‚ã¦ã®GCP ç”»åƒAI(Vision API)ã‚’ã•ã‚ã£ã¦ã¿ãŸ</title>
    <link href="https://future-architect.github.io/articles/20200218/"/>
    <id>https://future-architect.github.io/articles/20200218/</id>
    <published>2020-02-18T01:16:55.000Z</published>
    <updated>2020-03-11T00:50:55.142Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>ã“ã‚“ã«ã¡ã¯ã€‚TIG DXãƒãƒ¼ãƒ ã®æ‘ç€¬ã§ã™ã€‚</p><p>ä»Šå›ã¯<a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCPé€£è¼‰ä¼ç”»</a>ã®9æ—¥ç›®ã§ã™ã€‚ç§å€‹äººã¨ã—ã¦ã¯GCPã¯ã»ã¨ã‚“ã©åˆ©ç”¨ã—ãŸã“ã¨ãŒãªã„ã®ã§ã€ã›ã£ã‹ãã ã‹ã‚‰é¢ç™½ãã†ãªã“ã¨ã‚’è©¦ã—ã¦ã¿ã‚ˆã†ã¨æ€ã„ã€ç”»åƒAIã®ã‚µãƒ¼ãƒ“ã‚¹ã§ã‚ã‚‹Vision APIã«ã¤ã„ã¦è©¦ã—ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚</p><h1 id="Vision-APIã¨ã¯"><a href="#Vision-APIã¨ã¯" class="headerlink" title="Vision APIã¨ã¯"></a>Vision APIã¨ã¯</h1><blockquote><p>Google Cloud ã® Vision API ã¯ REST API ã‚„ RPC API ã‚’ä½¿ç”¨ã—ã¦å¼·åŠ›ãªäº‹å‰ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°æ¸ˆã¿ã®æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã‚’æä¾›ã—ã¾ã™ã€‚ç”»åƒã«ãƒ©ãƒ™ãƒ«ã‚’å‰²ã‚Šå½“ã¦ã‚‹ã“ã¨ã§ã€äº‹å‰å®šç¾©æ¸ˆã¿ã®æ•°ç™¾ä¸‡ã®ã‚«ãƒ†ã‚´ãƒªã«ç”»åƒã‚’é«˜é€Ÿã§åˆ†é¡ã§ãã¾ã™ã€‚ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚„é¡”ã‚’æ¤œå‡ºã—ã€å°åˆ·ãƒ†ã‚­ã‚¹ãƒˆã‚„æ‰‹æ›¸ãå…¥åŠ›ã‚’èª­ã¿å–ã‚Šã€æœ‰ç”¨ãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’ç”»åƒã‚«ã‚¿ãƒ­ã‚°ã«ä½œæˆã—ã¾ã™ã€‚<br><a href="https://cloud.google.com/vision" target="_blank" rel="noopener">https://cloud.google.com/vision</a></p></blockquote><p>Google Cloudã®å…¬å¼ãƒšãƒ¼ã‚¸ã«ã‚ˆã‚Šã¾ã™ã¨äº‹å‰ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°æ¸ˆã¿ã®æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã‚’åˆ©ç”¨ã—ã¦ãƒ©ãƒ™ãƒ«ã®å‰²ã‚Šå½“ã¦ã‚„OCRã¨ã—ã¦ã™ãã«åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã§ã™ã­ã€‚</p><p>æ©Ÿèƒ½(æ¤œå‡ºã®ã‚¿ã‚¤ãƒ—)ã¨ã—ã¦ã¯ä»¥ä¸‹ã®ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚</p><table><thead><tr><th>Feature Type</th><th>Description</th></tr></thead><tbody><tr><td>Face detection</td><td>é¡”ã®æ¤œå‡º</td></tr><tr><td>Landmark detection</td><td>ãƒ©ãƒ³ãƒ‰ãƒãƒ¼ã‚¯ã®æ¤œå‡º</td></tr><tr><td>Logo detection</td><td>ãƒ­ã‚´ã®æ¤œå‡º</td></tr><tr><td>Label detection</td><td>ãƒ©ãƒ™ãƒ«æ¤œå‡º</td></tr><tr><td>Text detection</td><td>å…‰å­¦å¼æ–‡å­—èªè­˜ï¼ˆOCRï¼‰</td></tr><tr><td>Document text detection (dense text / handwriting)</td><td>PDF/TIFF ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ ãƒ†ã‚­ã‚¹ãƒˆæ¤œå‡º</td></tr><tr><td>Image properties</td><td>ç”»åƒãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®æ¤œå‡º</td></tr><tr><td>Object localization</td><td>è¤‡æ•°ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¤œå‡ºã™ã‚‹</td></tr><tr><td>Crop hint detection</td><td>ã‚¯ãƒ­ãƒƒãƒ—ãƒ’ãƒ³ãƒˆã®å®Ÿè¡Œ</td></tr><tr><td>Web entities and pages</td><td>ã‚¦ã‚§ãƒ– ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãŠã‚ˆã³ãƒšãƒ¼ã‚¸ã®æ¤œå‡º</td></tr><tr><td>Explicit content detection (Safe Search)</td><td>ã‚»ãƒ¼ãƒ•ã‚µãƒ¼ãƒ ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®æ¤œå‡º</td></tr></tbody></table><p>è©³ç´°ã¯å…¬å¼ãƒšãƒ¼ã‚¸ã‚’å‚ç…§ãã ã•ã„ã€‚<br><a href="https://cloud.google.com/vision/docs/features-list?hl=ja" target="_blank" rel="noopener">https://cloud.google.com/vision/docs/features-list?hl=ja</a></p><h2 id="æ–™é‡‘"><a href="#æ–™é‡‘" class="headerlink" title="æ–™é‡‘"></a>æ–™é‡‘</h2><p>ç„¡æ–™æ ãŒã‚ã‚Šã€æœ€åˆã®1,000ãƒ¦ãƒ‹ãƒƒãƒˆ/æœˆã¯ç„¡æ–™ã€‚ãã‚Œã‚’è¶Šã—ãŸå ´åˆã§ã‚‚1,000ãƒ¦ãƒ‹ãƒƒãƒˆã‚ãŸã‚Š$1.50ã€‚ãªã‚“ã¨å¤ªã£è…¹ï¼</p><p>è©³ç´°ã¯å…¬å¼ãƒšãƒ¼ã‚¸ã‚’å‚ç…§ãã ã•ã„ã€‚<br><a href="https://cloud.google.com/vision/pricing?hl=ja" target="_blank" rel="noopener">https://cloud.google.com/vision/pricing?hl=ja</a></p><h1 id="æº–å‚™"><a href="#æº–å‚™" class="headerlink" title="æº–å‚™"></a>æº–å‚™</h1><h2 id="ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ"><a href="#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ" class="headerlink" title="ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ"></a>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ</h2><img src="/images/20200218/photo_20200218_01.png" class="img-middle-size"><p>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã‚’å…¥åŠ›ã—ä½œæˆãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</p><h2 id="Cloud-Vision-APIã®æœ‰åŠ¹åŒ–"><a href="#Cloud-Vision-APIã®æœ‰åŠ¹åŒ–" class="headerlink" title="Cloud Vision APIã®æœ‰åŠ¹åŒ–"></a>Cloud Vision APIã®æœ‰åŠ¹åŒ–</h2><img src="/images/20200218/photo_20200218_02.png" class="img-middle-size"><p>Cloud Vision APIã®ç”»é¢ã«ç§»å‹•ã—ã¦æœ‰åŠ¹ã«ã™ã‚‹ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯<br><a href="https://cloud.google.com/vision/docs/before-you-begin" target="_blank" rel="noopener">https://cloud.google.com/vision/docs/before-you-begin</a></p><h2 id="APIã‚­ãƒ¼ã‚’ä½œæˆ"><a href="#APIã‚­ãƒ¼ã‚’ä½œæˆ" class="headerlink" title="APIã‚­ãƒ¼ã‚’ä½œæˆ"></a>APIã‚­ãƒ¼ã‚’ä½œæˆ</h2><img src="/images/20200218/photo_20200218_03.png" class="img-middle-size"><p>APIã¨ã‚µãƒ¼ãƒ“ã‚¹ã®ç”»é¢ã«ç§»å‹•ã—ã¦èªè¨¼æƒ…å ±ã‚’ä½œæˆã‹ã‚‰APIã‚­ãƒ¼ã‚’é¸æŠã—ã¦ã‚¯ãƒªãƒƒã‚¯</p><img src="/images/20200218/photo_20200218_04.png" class="img-middle-size"><p>ã“ã‚Œã§APIã‚­ãƒ¼ãŒä½œæˆã•ã‚Œã¾ã—ãŸã€‚<br>å¾Œã»ã©ã“ã®APIã‚­ãƒ¼ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚</p><p>äº‹å‰æº–å‚™ã¯ã“ã‚Œã§å®Œäº†ã§ã™ã€‚</p><h1 id="APIã‚’ã‚³ãƒ¼ãƒ«ã—ã¦ã¿ã‚‹"><a href="#APIã‚’ã‚³ãƒ¼ãƒ«ã—ã¦ã¿ã‚‹" class="headerlink" title="APIã‚’ã‚³ãƒ¼ãƒ«ã—ã¦ã¿ã‚‹"></a>APIã‚’ã‚³ãƒ¼ãƒ«ã—ã¦ã¿ã‚‹</h1><p>ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³è±Šã‹ãªæ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ãŒã€ä»Šå›ã¯Label detection(ãƒ©ãƒ™ãƒ«æ¤œå‡º)ã¨Text detection(å…‰å­¦å¼æ–‡å­—èªè­˜ï¼ˆOCRï¼‰)ã‚’è©¦ã—ã¦ã¿ã¾ã™ã€‚</p><h2 id="Label-detection-ãƒ©ãƒ™ãƒ«æ¤œå‡º"><a href="#Label-detection-ãƒ©ãƒ™ãƒ«æ¤œå‡º" class="headerlink" title="Label detection(ãƒ©ãƒ™ãƒ«æ¤œå‡º)"></a>Label detection(ãƒ©ãƒ™ãƒ«æ¤œå‡º)</h2><p>ã¾ãšã¯ã€Label detectionã€‚Futureã®<a href="https://www.future.co.jp/recruit/career/job/engineer/" target="_blank" rel="noopener">ã‚­ãƒ£ãƒªã‚¢æ¡ç”¨ãƒšãƒ¼ã‚¸</a>ã«ã‚ã‚‹ã€ã¤ã‚ˆã¤ã‚ˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢æ¸‹å·ã®<a href="https://www.future.co.jp/recruit/common/img/member/er_popup_14_pc.jpg" target="_blank" rel="noopener">ç”»åƒ</a>ã‚’åˆ©ç”¨ã—ã¦ã©ã®ã‚ˆã†ãªãƒ©ãƒ™ãƒ«ãŒæ¤œå‡ºãŒã•ã‚Œã‚‹ã‹è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ä»Šå›ã®æ¤œè¨¼ã§ã¯æ”¹ã‚ã¦èª¬æ˜ã™ã‚‹å¿…è¦ã¯ãªã„ã¨æ€ã„ã¾ã™ãŒãŠæ‰‹è»½ä¸‡èƒ½HTTPã‚¢ã‚¯ã‚»ã‚¹ãƒ„ãƒ¼ãƒ«cURLã‚’åˆ©ç”¨ã—ã¾ã™ã€‚</p><img src="/images/20200218/photo_20200218_05.jpeg" class="img-middle-size"><p>keyã®é …ç›®ã«å…ˆã»ã©å–å¾—ã—ãŸAPIã‚­ãƒ¼ã‚’è¨­å®šã—ã¾ã™ã€‚</p><figure class="highlight sh"><figcaption><span>Request</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -H <span class="string">'Content-Type:application/json'</span> -d <span class="string">'&#123;"requests":[&#123;"image":&#123;"source":&#123;"imageUri":"https://www.future.co.jp/recruit/common/img/member/er_popup_14_pc.jpg"&#125;&#125;,"features":[&#123;"type":"LABEL_DETECTION","maxResults":10,"model":"builtin/stable"&#125;],"imageContext":&#123;"languageHints":[]&#125;&#125;]&#125;'</span> https://vision.googleapis.com/v1/images:annotate?key=xxxxxxxxxxx</span><br></pre></td></tr></table></figure><p>ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®JSONã‚’æ•´å½¢ã™ã‚‹ã¨ã“ã‚“ãªæ„Ÿã˜</p><figure class="highlight json"><figcaption><span>json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">"requests"</span>: [</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">"image"</span>: &#123;</span><br><span class="line"><span class="attr">"source"</span>: &#123;</span><br><span class="line"><span class="attr">"imageUri"</span>: <span class="string">"https://www.future.co.jp/recruit/common/img/member/er_popup_14_pc.jpg"</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">"features"</span>: [</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">"type"</span>: <span class="string">"LABEL_DETECTION"</span>,</span><br><span class="line"><span class="attr">"maxResults"</span>: <span class="number">10</span>,</span><br><span class="line"><span class="attr">"model"</span>: <span class="string">"builtin/stable"</span></span><br><span class="line">&#125;</span><br><span class="line">],</span><br><span class="line"><span class="attr">"imageContext"</span>: &#123;</span><br><span class="line"><span class="attr">"languageHints"</span>: []</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¯ä»¥ä¸‹ã®é€šã‚ŠJSONå½¢å¼ã§è¿”å´ã•ã‚Œã¾ã™ã€‚</p><figure class="highlight json"><figcaption><span>Response</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"responses"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"labelAnnotations"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"mid"</span>: <span class="string">"/m/015c4z"</span>,</span><br><span class="line">          <span class="attr">"description"</span>: <span class="string">"Sitting"</span>,</span><br><span class="line">          <span class="attr">"score"</span>: <span class="number">0.84581405</span>,</span><br><span class="line">          <span class="attr">"topicality"</span>: <span class="number">0.84581405</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"mid"</span>: <span class="string">"/m/0dzf4"</span>,</span><br><span class="line">          <span class="attr">"description"</span>: <span class="string">"Arm"</span>,</span><br><span class="line">          <span class="attr">"score"</span>: <span class="number">0.82127464</span>,</span><br><span class="line">          <span class="attr">"topicality"</span>: <span class="number">0.82127464</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"mid"</span>: <span class="string">"/m/0c_jw"</span>,</span><br><span class="line">          <span class="attr">"description"</span>: <span class="string">"Furniture"</span>,</span><br><span class="line">          <span class="attr">"score"</span>: <span class="number">0.7518786</span>,</span><br><span class="line">          <span class="attr">"topicality"</span>: <span class="number">0.7518786</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"mid"</span>: <span class="string">"/m/01kq3x"</span>,</span><br><span class="line">          <span class="attr">"description"</span>: <span class="string">"White-collar worker"</span>,</span><br><span class="line">          <span class="attr">"score"</span>: <span class="number">0.74684197</span>,</span><br><span class="line">          <span class="attr">"topicality"</span>: <span class="number">0.74684197</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"mid"</span>: <span class="string">"/m/0dzd8"</span>,</span><br><span class="line">          <span class="attr">"description"</span>: <span class="string">"Neck"</span>,</span><br><span class="line">          <span class="attr">"score"</span>: <span class="number">0.7371684</span>,</span><br><span class="line">          <span class="attr">"topicality"</span>: <span class="number">0.7371684</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"mid"</span>: <span class="string">"/m/019nj4"</span>,</span><br><span class="line">          <span class="attr">"description"</span>: <span class="string">"Smile"</span>,</span><br><span class="line">          <span class="attr">"score"</span>: <span class="number">0.6944891</span>,</span><br><span class="line">          <span class="attr">"topicality"</span>: <span class="number">0.6944891</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"mid"</span>: <span class="string">"/m/0dnr7"</span>,</span><br><span class="line">          <span class="attr">"description"</span>: <span class="string">"Textile"</span>,</span><br><span class="line">          <span class="attr">"score"</span>: <span class="number">0.6563325</span>,</span><br><span class="line">          <span class="attr">"topicality"</span>: <span class="number">0.6563325</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"mid"</span>: <span class="string">"/m/05wkw"</span>,</span><br><span class="line">          <span class="attr">"description"</span>: <span class="string">"Photography"</span>,</span><br><span class="line">          <span class="attr">"score"</span>: <span class="number">0.62422496</span>,</span><br><span class="line">          <span class="attr">"topicality"</span>: <span class="number">0.62422496</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"mid"</span>: <span class="string">"/m/08xgn7"</span>,</span><br><span class="line">          <span class="attr">"description"</span>: <span class="string">"Comfort"</span>,</span><br><span class="line">          <span class="attr">"score"</span>: <span class="number">0.55251026</span>,</span><br><span class="line">          <span class="attr">"topicality"</span>: <span class="number">0.55251026</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"mid"</span>: <span class="string">"/m/02crq1"</span>,</span><br><span class="line">          <span class="attr">"description"</span>: <span class="string">"Couch"</span>,</span><br><span class="line">          <span class="attr">"score"</span>: <span class="number">0.5395869</span>,</span><br><span class="line">          <span class="attr">"topicality"</span>: <span class="number">0.5395869</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>descriptionã ã‘æŠœãå‡ºã—ã¦æ•´ç†ã™ã‚‹ã¨</p><table><thead><tr><th>description</th><th>æ—¥æœ¬èª</th></tr></thead><tbody><tr><td>Sitting</td><td>åº§ã£ã¦ã„ã‚‹</td></tr><tr><td>Arm</td><td>è…•</td></tr><tr><td>Furniture</td><td>å®¶å…·</td></tr><tr><td>White-collar worker</td><td>ã‚µãƒ©ãƒªãƒ¼ãƒãƒ³</td></tr><tr><td>Neck</td><td>é¦–</td></tr><tr><td>Smile</td><td>ã»ã»ãˆã¿</td></tr><tr><td>Textile</td><td>ç¹”ç‰©</td></tr><tr><td>Photography</td><td>å†™çœŸæ’®å½±</td></tr><tr><td>Comfort</td><td>å¿«é©ã•</td></tr><tr><td>Couch</td><td>ã‚½ãƒ•ã‚¡ãƒ¼</td></tr></tbody></table><p>å½“ãŸã‚Šå‰ã¨è¨€ãˆã°å½“ãŸã‚Šå‰ãªã®ã§ã™ãŒã€ç”»åƒã‹ã‚‰é€£æƒ³ã•ã‚Œã‚‹èª¬æ˜ãŒè¿”å´ã•ã‚Œã¦ã¾ã™ã€‚<br>ã‚µãƒ©ãƒªãƒ¼ãƒãƒ³ãŒå¿«é©ã«ã‚½ãƒ•ã‚¡ãƒ¼ã«åº§ã£ã¦ã„ã¦ã»ã»ãˆã‚“ã§ãŠã‚Šã€é¦–ã‚„è…•ã€ã‚½ãƒ•ã‚¡ãƒ¼ã®ç¹Šç¶­ã‚‚æ˜ ã£ã¦ã„ã¾ã™ã­ã€‚</p><h2 id="Text-detection-å…‰å­¦å¼æ–‡å­—èªè­˜ï¼ˆOCRï¼‰"><a href="#Text-detection-å…‰å­¦å¼æ–‡å­—èªè­˜ï¼ˆOCRï¼‰" class="headerlink" title="Text detection(å…‰å­¦å¼æ–‡å­—èªè­˜ï¼ˆOCRï¼‰)"></a>Text detection(å…‰å­¦å¼æ–‡å­—èªè­˜ï¼ˆOCRï¼‰)</h2><p>ç¶šã„ã¦Text detectionã€‚æ¸‹å·ã®<a href="https://www.future.co.jp/recruit/common/img/member/chart_14_pc.png" target="_blank" rel="noopener">ã‚¹ãƒšãƒƒã‚¯ã®ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ</a>ã‚’è§£æã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><img src="/images/20200218/photo_20200218_06.png" class="img-middle-size"><figure class="highlight sh"><figcaption><span>Request</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -H <span class="string">'Content-Type:application/json'</span> -d <span class="string">'&#123;"requests":[&#123;"image":&#123;"source":&#123;"imageUri":"https://www.future.co.jp/recruit/common/img/member/chart_14_pc.png"&#125;&#125;,"features":[&#123;"type":"TEXT_DETECTION"&#125;]&#125;]&#125;'</span> https://vision.googleapis.com/v1/images:annotate?key=xxxxxxxxxxx</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;responses&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;textAnnotations&quot;: [</span><br><span class="line">      &quot;ï½ï½ã€€ä¸­ç•¥ã€€ï½ï½&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;text&quot;: &quot;ã‚³ãƒŸãƒ¥ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚«\nãƒ¡ã‚¤ã‚¿ãƒªãƒ†ã‚£\nç”»æ€§\n5.\n3\n4\n5.\nã‚¤ãƒ³ãƒ©ã‚¤ãƒ³\nã‚¹ã‚±ãƒ¼ãƒˆ\nãƒ¡ã‚¿å­¦ç¿’æ³•\nã‚ªã‚¿ã‚¯åº¦\nLO\n&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è§£æã—ãŸãƒ¯ãƒ¼ãƒ‰ã‚’æ•´ç†ã™ã‚‹ã¨</p><table><thead><tr><th>text</th></tr></thead><tbody><tr><td>ã‚³ãƒŸãƒ¥ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚«</td></tr><tr><td>ãƒ¡ã‚¤ã‚¿ãƒªãƒ†ã‚£</td></tr><tr><td>ç”»æ€§</td></tr><tr><td>5</td></tr><tr><td>3</td></tr><tr><td>4</td></tr><tr><td>5</td></tr><tr><td>ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¹ã‚±ãƒ¼ãƒˆ</td></tr><tr><td>ãƒ¡ã‚¿å­¦ç¿’æ³•ã‚ªã‚¿ã‚¯åº¦</td></tr></tbody></table><p>ä¸€éƒ¨ã®æ–‡å­—ã¯ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆã®ç·šã¨é‡ãªã£ã¦åˆ¥ã®æ–‡å­—ã¨ã—ã¦èªè­˜ã•ã‚Œã¦ã—ã¾ã£ãŸã‚Šã€èª­ã¿è¾¼ã‚ãªã‹ã£ãŸã‚Šã—ã¦ã„ã¾ã™ãŒ(ç›®çš„ã«ã‚‚ã‚ˆã‚Šã¾ã™ãŒ)ååˆ†ãªç²¾åº¦ã‹ã¨æ€ã„ã¾ã™ã€‚</p><p>ç”»åƒAIã£ã¦ã™ã”ã„ã§ã™ã­ã€‚</p><h1 id="ã•ã„ã”ã«"><a href="#ã•ã„ã”ã«" class="headerlink" title="ã•ã„ã”ã«"></a>ã•ã„ã”ã«</h1><p>æ©Ÿæ¢°å­¦ç¿’ã¨èãã¨åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã®ã«ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãŒå¿…è¦ã§ã€ã‚ã‚‹ç¨®ã®è»Šè¼ªã®å†ç™ºæ˜ã«è¿‘ã„ä½œæ¥­ãŒå¿…è¦ã«ãªã‚Šã€ã‚³ã‚¹ãƒˆã¨æ™‚é–“ãŒæ›ã‹ã‚‹ã‚‚ã®ã¨æ€ã£ã¦ã„ãŸã®ã§ã™ãŒã€äº‹å‰ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°æ¸ˆã¿ã®æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ãŒå®‰ä¾¡ã«ãŠæ‰‹è»½ã«åˆ©ç”¨ã§ãã¦ã¨ã¦ã‚‚ä¾¿åˆ©ã§ã™ã­ã€‚æ§˜ã€…ãªæ¤œå‡ºã®ã‚¿ã‚¤ãƒ—ãŒã‚ã‚Šã€(å½“ãŸã‚Šå‰ã§ã¯ã‚ã‚Šã¾ã™ãŒ)é©åˆ‡ãªã‚¿ã‚¤ãƒ—ã‚’é¸ã¶å¿…è¦ãŒã‚ã‚‹ã®ã§ãã“ã•ãˆé–“é•ãˆãªã‘ã‚Œã°å¤šç¨®å¤šæ§˜ãªãƒ‹ãƒ¼ã‚ºã«å¿œãˆã‚‰ã‚Œã‚‹ç´ æ™´ã‚‰ã—ã„APIã‹ã¨æ€ã„ã¾ã™ã€‚Vision APIã®ã™ã°ã‚‰ã—ã•ã‚’å®Ÿæ„Ÿã§ãã‚‹æ¤œè¨¼ã¨ãªã‚Šã¾ã—ãŸã€‚</p><p>ä»Šå›ã¯æ¤œè¨¼ç›®çš„ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ãŸã®ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å‰Šé™¤ã—ã¦å®Œäº†ã§ã™ã€‚</p><h2 id="é–¢é€£ãƒªãƒ³ã‚¯"><a href="#é–¢é€£ãƒªãƒ³ã‚¯" class="headerlink" title="é–¢é€£ãƒªãƒ³ã‚¯"></a>é–¢é€£ãƒªãƒ³ã‚¯</h2><ul><li><a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCPé€£è¼‰ä¼ç”»</a></li><li><a href="https://future-architect.github.io/articles/20190903/">Terraformã®ãƒ™ã‚¹ãƒˆãªãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã£ã¦ãªã‚“ã ã‚ã†ã‹</a></li><li><a href="https://future-architect.github.io/articles/20190909/">Letâ€™s Try GCP #1 ï½Cloud Run Buttonã‚’ä½¿ã£ãŸæ¥½ã€…ã‚³ãƒ³ãƒ†ãƒŠãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ã‚„ã£ã¦ã¿ãŸï½</a></li><li><a href="https://future-architect.github.io/tags/GoCDK/">Go Cloudé€£è¼‰</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h1&gt;&lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€‚TIG DXãƒãƒ¼ãƒ ã®æ‘ç€¬ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;ä»Šå›ã¯&lt;a href=&quot;https://future-archit
      
    
    </summary>
    
      <category term="Infrastructure" scheme="https://future-architect.github.io/categories/Infrastructure/"/>
    
    
      <category term="GCP" scheme="https://future-architect.github.io/tags/GCP/"/>
    
      <category term="GCPé€£è¼‰" scheme="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/"/>
    
  </entry>
  
  <entry>
    <title>GCPé€£è¼‰#8 gcloud compute sshã˜ã‚ƒãªãã¦sshã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã„ãŸã„ã‚ãªãŸã¸</title>
    <link href="https://future-architect.github.io/articles/20200217/"/>
    <id>https://future-architect.github.io/articles/20200217/</id>
    <published>2020-02-17T01:56:29.000Z</published>
    <updated>2020-03-11T00:50:52.877Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><p><a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCPé€£è¼‰ä¼ç”»</a>ã®8æ—¥ç›®ã§ã™ã€‚</p><p>ã„ããªã‚Šã§ã™ãŒã€ <code>gcloud compute ssh</code>ã‚³ãƒãƒ³ãƒ‰ã¯ä¾¿åˆ©ã§ã™ã‚ˆã­ã€‚ </p><p>sshå…ˆã®GCEã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆé–“ã§ã€ã‚­ãƒ¼ãƒšã‚¢(ç§˜å¯†éµ/å…¬é–‹éµ)ã®è‡ªå‹•ç”Ÿæˆ -&gt; GCEã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¸ã®éµé…ç½®ã‚’è‡ªå‹•ã§è¡Œã£ã¦ãã‚Œã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯éµã®å­˜åœ¨ã‚’æ„è­˜ã™ã‚‹ã“ã¨ãªãsshã§ãã‚‹ã‚³ãƒãƒ³ãƒ‰ã§ã™ãŒã€<code>gcloud compute ssh</code>ã‚³ãƒãƒ³ãƒ‰ã˜ã‚ƒãªãã¦ã€ç´ ã®sshã‚³ãƒãƒ³ãƒ‰ã§GCEã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«sshã—ãŸã„ã€ã¨ã„ã†æ–¹ã‚‚ã„ã‚‰ã£ã—ã‚ƒã‚‹ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚</p><p>ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚±ãƒ¼ã‚¹(ã‚ã‚Œã€å°‘ãªã„â€¦)</p><ul><li>ä½¿ã„æ…£ã‚ŒãŸsshã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ(TeraTermç­‰)ã‚’ä½¿ã£ã¦sshã—ãŸã„</li><li>VScodeã®sshãƒ—ãƒ©ã‚°ã‚¤ãƒ³(ä¾¿åˆ©ã§ã™ã‚ˆã­)ã‚’ä½¿ã£ã¦ãƒªãƒ¢ãƒ¼ãƒˆã‚µãƒ¼ãƒãƒ¼ä¸Šã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ãŸã„</li></ul><p>ãã‚“ãªæ–¹ã¯ã€ãã£ã¨ <code>~/.ssh</code> é…ä¸‹ã«ç”Ÿæˆã•ã‚ŒãŸç§˜å¯†éµ( <code>google_compute_engine</code>) ã¨ãƒ›ã‚¹ãƒˆæƒ…å ±ã‚’ <code>~/.ssh/config</code> ã«æ‰‹å‹•ã§è¿½åŠ ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã§ã—ã‚‡ã†ã€‚</p><p>ãŸã ã€å¯¾è±¡ã®ãƒ›ã‚¹ãƒˆãŒå¤šããªã‚‹ã¨éƒ½åº¦configã‚’æ›´æ–°ã™ã‚‹ã®ã¯å¤§å¤‰ã§ã™ã‚ˆã­ã€‚å®Ÿã¯ã“ã®configã¸ã®è¿½åŠ ã€ <code>gcloud compute config-ssh</code>ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ãˆã° è‡ªå‹•ã§ã‚„ã£ã¦ãã‚Œã¾ã™ã‚ˆ! (<strong>æœ¬é¡Œ</strong>)</p><h2 id="ã‚„ã£ã¦ã¿ã‚‹"><a href="#ã‚„ã£ã¦ã¿ã‚‹" class="headerlink" title="ã‚„ã£ã¦ã¿ã‚‹"></a>ã‚„ã£ã¦ã¿ã‚‹</h2><p>ã¾ãšã¯ã€ <code>gcloud compute ssh</code>ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦ <code>test-instance</code>ã«sshã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚<br>è‡ªå‹•ã§ã‚­ãƒ¼ãƒšã‚¢ã‚’ç”Ÿæˆã—ã¦ãã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">â¯ gcloud compute ssh <span class="built_in">test</span>-instance  --project <span class="built_in">test</span>-project --zone asia-northeast1<span class="_">-a</span>                                                 </span><br><span class="line">WARNING: The public SSH key file <span class="keyword">for</span> gcloud does not exist.</span><br><span class="line">WARNING: The private SSH key file <span class="keyword">for</span> gcloud does not exist.</span><br><span class="line">WARNING: You <span class="keyword">do</span> not have an SSH key <span class="keyword">for</span> gcloud.</span><br><span class="line">WARNING: SSH keygen will be executed to generate a key.</span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase):</span><br><span class="line">Enter same passphrase again:</span><br><span class="line">Your identification has been saved <span class="keyword">in</span> /Users/hoge/.ssh/google_compute_engine.</span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /Users/hoge/.ssh/google_compute_engine.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:PQXtls0bpoISsn+/u2vDpqMKBORO5VEFgEGqyJ4klcM hoge@MAC00011</span><br><span class="line">The key<span class="string">'s randomart image is:</span></span><br><span class="line"><span class="string">+---[RSA 2048]----+</span></span><br><span class="line"><span class="string">|.+o+ooo.  ..     |</span></span><br><span class="line"><span class="string">|+oo..      ..    |</span></span><br><span class="line"><span class="string">|ooE.       ..+   |</span></span><br><span class="line"><span class="string">|*o .. .  . .+ =  |</span></span><br><span class="line"><span class="string">|++.  o .S.o. o o |</span></span><br><span class="line"><span class="string">|+.. . . . ... .  |</span></span><br><span class="line"><span class="string">| o.  . . . .     |</span></span><br><span class="line"><span class="string">|   .  . o =      |</span></span><br><span class="line"><span class="string">|    ...o.***     |</span></span><br><span class="line"><span class="string">+----[SHA256]-----+</span></span><br><span class="line"><span class="string">Updating project ssh metadata...â ¹Updated [https://www.googleapis.com/compute/v1/projects/test-project].</span></span><br><span class="line"><span class="string">Updating project ssh metadata...done.</span></span><br><span class="line"><span class="string">Waiting for SSH key to propagate.</span></span><br><span class="line"><span class="string">Warning: Permanently added '</span>compute.3504985360589690116<span class="string">' (ECDSA) to the list of known hosts.</span></span><br><span class="line"><span class="string">Linux test-instance 4.9.0-12-amd64 #1 SMP Debian 4.9.210-1 (2020-01-20) x86_64</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">The programs included with the Debian GNU/Linux system are free software;</span></span><br><span class="line"><span class="string">the exact distribution terms for each program are described in the</span></span><br><span class="line"><span class="string">individual files in /usr/share/doc/*/copyright.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent</span></span><br><span class="line"><span class="string">permitted by applicable law.</span></span><br><span class="line"><span class="string">hoge@test-instance:~$</span></span><br></pre></td></tr></table></figure><p>ãƒ­ãƒ¼ã‚«ãƒ«ã®<code>~/.ssh</code>é…ä¸‹ã«ã‚­ãƒ¼ãƒšã‚¢( <code>google_compute_engine</code>, <code>google_compute_engine.pub</code>)ãŒç”Ÿæˆã•ã‚Œã¦ã„ã¾ã™ã­ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">â¯ ls ~/.ssh</span><br><span class="line">config                     google_compute_engine      google_compute_engine.pub  google_compute_known_hosts</span><br></pre></td></tr></table></figure><p><strong>ã“ã“ã§æœ¬é¡Œã® <code>gcloud compute config-ssh</code> ã®å‡ºç•ªã§ã™ã€‚</strong> å®Ÿè¡Œã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">â¯ gcloud compute config-ssh --project <span class="built_in">test</span>-project</span><br><span class="line">You should now be able to use ssh/scp with your instances.</span><br><span class="line">For example, try running:</span><br><span class="line"></span><br><span class="line">  $ ssh <span class="built_in">test</span>-instance.asia-northeast1-a.test-project</span><br></pre></td></tr></table></figure><p> <code>~/.ssh/config</code> ã« <code>test-instance</code>ãŒè¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ã­! </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">â¯ cat ~/.ssh/config</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment"># Google Compute Engine Section</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># The following has been auto-generated by "gcloud compute config-ssh"</span></span><br><span class="line"><span class="comment"># to make accessing your Google Compute Engine virtual machines easier.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># To remove this blob, run:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#   gcloud compute config-ssh --remove</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># You can also manually remove this blob by deleting everything from</span></span><br><span class="line"><span class="comment"># here until the comment that contains the string "End of Google Compute</span></span><br><span class="line"><span class="comment"># Engine Section".</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># You should not hand-edit this section, unless you are deleting it.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">Host <span class="built_in">test</span>-instance.asia-northeast1-a.test-project</span><br><span class="line">    HostName 35.200.9.109</span><br><span class="line">    IdentityFile /Users/hoge/.ssh/google_compute_engine</span><br><span class="line">    UserKnownHostsFile=/Users/hoge/.ssh/google_compute_known_hosts</span><br><span class="line">    HostKeyAlias=compute.3504985360589690116</span><br><span class="line">    IdentitiesOnly=yes</span><br><span class="line">    CheckHostIP=no</span><br><span class="line"></span><br><span class="line"><span class="comment"># End of Google Compute Engine Section</span></span><br></pre></td></tr></table></figure><p>ã‚ã¨ã¯ã€ä½¿ã„æ…£ã‚ŒãŸ sshã‚³ãƒãƒ³ãƒ‰ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã‚ˆã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">â¯ ssh <span class="built_in">test</span>-instance.asia-northeast1-a.test-project</span><br><span class="line">Last login: Sun Feb 16 11:58:05 2020 from 126.228.201.100</span><br><span class="line">hoge@<span class="built_in">test</span>-instance:~$</span><br></pre></td></tr></table></figure><p>ã“ã‚Œã§å¿«é©ãªsshãƒ©ã‚¤ãƒ•??ãŒé€ã‚Œã¾ã™ã­</p><h2 id="é–¢é€£ãƒªãƒ³ã‚¯"><a href="#é–¢é€£ãƒªãƒ³ã‚¯" class="headerlink" title="é–¢é€£ãƒªãƒ³ã‚¯"></a>é–¢é€£ãƒªãƒ³ã‚¯</h2><ul><li><a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCPé€£è¼‰ä¼ç”»</a></li><li><a href="https://future-architect.github.io/articles/20190903/">Terraformã®ãƒ™ã‚¹ãƒˆãªãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã£ã¦ãªã‚“ã ã‚ã†ã‹</a></li><li><a href="https://future-architect.github.io/articles/20190909/">Letâ€™s Try GCP #1 ï½Cloud Run Buttonã‚’ä½¿ã£ãŸæ¥½ã€…ã‚³ãƒ³ãƒ†ãƒŠãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ã‚„ã£ã¦ã¿ãŸï½</a></li><li><a href="https://future-architect.github.io/tags/GoCDK/">Go Cloudé€£è¼‰</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://future-architect.github.io/tags/GCP%E9%80%A3%
      
    
    </summary>
    
      <category term="Infrastructure" scheme="https://future-architect.github.io/categories/Infrastructure/"/>
    
    
      <category term="GCP" scheme="https://future-architect.github.io/tags/GCP/"/>
    
      <category term="GCPé€£è¼‰" scheme="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/"/>
    
  </entry>
  
  <entry>
    <title>GCPé€£è¼‰#7 GCPã®Data Transfer Serviceã‚’ä½¿ã£ã¦ç°¡å˜ã«S3ã‹ã‚‰BigQueryã«ãƒ‡ãƒ¼ã‚¿è»¢é€ã‚’ã—ã¦ã¿ã‚‹</title>
    <link href="https://future-architect.github.io/articles/20200214/"/>
    <id>https://future-architect.github.io/articles/20200214/</id>
    <published>2020-02-14T00:39:28.000Z</published>
    <updated>2020-03-11T00:50:57.531Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCPé›†ä¸­é€£è¼‰</a>ã®7å›ç›®ã§ã™ã€‚</p><p>ã¾ãšã¯ç°¡å˜ã«è‡ªå·±ç´¹ä»‹ã‚’ã•ã›ã¦ãã ã•ã„ã€‚TIGã®DXãƒãƒ¼ãƒ ã«æ‰€å±ã—ã¦ã„ã‚‹åŠ éƒ¨ã§ã™ã€‚å…¥ç¤¾ã—ã¦ã‹ã‚‰ã¯ä¸»ã«ã‚¤ãƒ³ãƒ•ãƒ©ã‚„ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä¸­å¿ƒã«ä»•äº‹ã‚’ã—ã¦ãŠã‚Šã€ç¾åœ¨ã¯GOã§ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®APIã®é–‹ç™ºãªã‚“ã‹ã‚‚ã—ã¦ã„ã¾ã™ã€‚<br>çªç„¶ã§ã™ãŒAWSã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ã‘ã©ãƒ“ãƒƒã‚°ãƒ‡ãƒ¼ã‚¿ã®è“„ç©ã‚„è§£æã¯BigQueryã§å®Ÿæ–½ã—ãŸã„ã€ãªã‚“ã¦æ„è¦‹ã‚‚æœ€è¿‘å¤šããªã£ã¦ãã¦ã„ã‚‹ã‚ˆã†ã§ã™ã­ã€‚å®Ÿéš›ã«S3ã‹ã‚‰BigQueryã®ãƒ‡ãƒ¼ã‚¿è»¢é€ã«ã¤ã„ã¦æ¤œç´¢ã™ã‚‹ã¨ã€è‡ªå‰ã§ãƒ‡ãƒ¼ã‚¿è»¢é€ã‚’ä½œæˆã—ã¦ã¿ã¾ã—ãŸã‚„ã€ãƒ‡ãƒ¼ã‚¿è»¢é€ã‚’ã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦è²©å£²ã—ã¦ã„ã‚‹ã‚ˆã†ãªä¼šç¤¾ã‚‚ã‚ã‚Šã¾ã™ã€‚ãã‚“ãªä¸­GCPãŒæä¾›ã—ã¦ã„ã‚‹BigQeryã¸ã®ãƒ‡ãƒ¼ã‚¿è»¢é€ã‚µãƒ¼ãƒ“ã‚¹<a href="https://cloud.google.com/bigquery/transfer/" target="_blank" rel="noopener">DataTransferService</a>ã®ã‚½ãƒ¼ã‚¹å…ƒã¨ã—ã¦S3ãŒè¿½åŠ ã•ã‚Œã€ç°¡å˜ã«S3ã‹ã‚‰BigQueryã®ãƒ‡ãƒ¼ã‚¿è»¢é€ã®ã‚¸ãƒ§ãƒ–ã‚’ä½œæˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ã¾ã ã€ãƒ™ãƒ¼ã‚¿ç‰ˆã§ã®ãƒªãƒªãƒ¼ã‚¹ã®ã¿ã§ã™ãŒä»Šå›ã¯å®Ÿéš›ã«S3ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿è»¢é€ã‚’è©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><h1 id="ãã‚‚ãã‚‚DataTransferServiceã¨ã¯"><a href="#ãã‚‚ãã‚‚DataTransferServiceã¨ã¯" class="headerlink" title="ãã‚‚ãã‚‚DataTransferServiceã¨ã¯"></a>ãã‚‚ãã‚‚DataTransferServiceã¨ã¯</h1><img src="/images/20200214/photo_20200214_01.png" class="img-very-small-size"><blockquote><p>BigQuery Data Transfer Service ã¯ã€ã‚ã‚‰ã‹ã˜ã‚è¨­å®šã•ã‚ŒãŸã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã«åŸºã¥ãã€BigQuery BigQuery Data Transfer Service ã¯ã€ã‚ã‚‰ã‹ã˜ã‚è¨­å®šã•ã‚ŒãŸã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã«åŸºã¥ãã€BigQuery ã¸ã®ãƒ‡ãƒ¼ã‚¿ã®ç§»å‹•ã‚’è‡ªå‹•åŒ–ã™ã‚‹ãƒãƒãƒ¼ã‚¸ãƒ‰ ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚ãã®ãŸã‚ã€ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ ãƒãƒ¼ãƒ ãŒ BigQuery ãƒ‡ãƒ¼ã‚¿ ã‚¦ã‚§ã‚¢ãƒã‚¦ã‚¹åŸºç›¤ã‚’æ§‹ç¯‰ã™ã‚‹éš›ã«ã‚³ãƒ¼ãƒ‰ã®ä½œæˆã¯ã¾ã£ãŸãå¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚<br><a href="https://cloud.google.com/bigquery/transfer" target="_blank" rel="noopener">https://cloud.google.com/bigquery/transfer</a></p></blockquote><p>è¦ã¯BigQueryã«å¯¾ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’è»¢é€ã™ã‚‹ã‚¸ãƒ§ãƒ–ã‚’ãƒãƒãƒ¼ã‚¸ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã§ç°¡å˜ã«ä½œæˆã§ãã‚‹ã‚ˆã¨ã„ã†ã“ã¨ã§ã™ã­ã€‚<br>ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã«ã‚ˆã‚‹ã¨ç¾åœ¨ä¸‹è¨˜ã®ã‚ˆã†ãªã‚µãƒ¼ãƒ“ã‚¹ã¨ã®é€£æºãŒå¯èƒ½ã¨ãªã£ã¦ã„ã¾ã™ã€‚</p><ul><li>AWS S3 </li><li>ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼</li><li>Cloud Strage</li><li>Google ã‚¢ãƒ‰ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼</li><li>Google åºƒå‘Š</li><li>Google Merchant Center</li><li>Google Play</li><li>æ¤œç´¢åºƒå‘Š360</li><li>YouTubeãƒãƒ£ãƒ³ãƒãƒ«</li><li>YouTubeã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ‰€æœ‰è€…</li></ul><p>ä»Šã¾ã§ã¯ä¸»ã«Googleç³»ã®ã‚µãƒ¼ãƒ“ã‚¹ã¨ã®è¦ªå’Œæ€§ãŒé«˜ãã€AWSã®Sï¼“ã¯åˆã‚ã¦ã®Googleä»¥å¤–ã®ã‚½ãƒ¼ã‚¹å…ƒã®ã‚µãƒ¼ãƒ“ã‚¹ã«ãªã‚‹ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚</p><h1 id="ä»Šå›ã®æ§‹æˆã¨æ‰‹é †"><a href="#ä»Šå›ã®æ§‹æˆã¨æ‰‹é †" class="headerlink" title="ä»Šå›ã®æ§‹æˆã¨æ‰‹é †"></a>ä»Šå›ã®æ§‹æˆã¨æ‰‹é †</h1><img src="/images/20200214/photo_20200214_02.png" class="img-middle-size"><p>ä»Šå›ã¯S3ã®ãƒã‚±ãƒƒãƒˆã«æ ¼ç´ã—ãŸCSVãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã€DataTransferServiceã®æ©Ÿèƒ½ã‚’ä½¿ã£ã¦BiqQueryã«è»¢é€ã—ã¾ã™ã€‚<br>è¤‡é›‘ãªã‚³ãƒãƒ³ãƒ‰ã‚„æ‰‹é †ãŒã‚ã‚‹ã‚ã‘ã§ã¯ç„¡ã„ãŸã‚ã€ã¨ã¦ã‚‚ã‹ã‚“ãŸã‚“ã«è¨­å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚æœ¬è¨˜äº‹ã§ã¯ä¸»ã«ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã«ã‚ˆã‚‹ä½œæˆã¨ãªã‚Šã¾ã™ãŒã€ã‚‚ã¡ã‚ã‚“ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‹ã‚‰ãƒãƒãƒãƒã—ã¦ä½œæˆã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</p><ol><li>S3ãƒã‚±ãƒƒãƒˆã®ä½œæˆ</li><li>ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚­ãƒ¼ã€ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã®ç™ºè¡Œ</li><li>DataTransfer APIã®æœ‰åŠ¹åŒ–</li><li>BigQueryã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã€ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ</li><li>è»¢é€ã‚¸ãƒ§ãƒ–ã®ä½œæˆ</li></ol><h1 id="æ‰‹é †1-AWSã§ã®S3ãƒã‚±ãƒƒãƒˆã®ä½œæˆ"><a href="#æ‰‹é †1-AWSã§ã®S3ãƒã‚±ãƒƒãƒˆã®ä½œæˆ" class="headerlink" title="æ‰‹é †1 AWSã§ã®S3ãƒã‚±ãƒƒãƒˆã®ä½œæˆ"></a>æ‰‹é †1 AWSã§ã®S3ãƒã‚±ãƒƒãƒˆã®ä½œæˆ</h1><p><strong>S3ã®ä½œæˆã«é–¢ã—ã¦ã¯ä¸‹è¨˜å‚ç…§</strong><br><a href="https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/user-guide/create-bucket.html" target="_blank" rel="noopener">https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/user-guide/create-bucket.html</a></p><h1 id="æ‰‹é †2-ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚­ãƒ¼ã€ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã®ç™ºè¡Œ"><a href="#æ‰‹é †2-ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚­ãƒ¼ã€ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã®ç™ºè¡Œ" class="headerlink" title="æ‰‹é †2 ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚­ãƒ¼ã€ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã®ç™ºè¡Œ"></a>æ‰‹é †2 ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚­ãƒ¼ã€ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã®ç™ºè¡Œ</h1><p>S3ã®ãƒ‡ãƒ¼ã‚¿è»¢é€ã‚’ã™ã‚‹ãŸã‚ã«ã¯ã€ŒAmazonS3ReadOnlyAccessã€ã®æ¨©é™ãŒå¿…è¦ã«ãªã‚‹ãŸã‚ã€ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚­ãƒ¼ã¨ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã‚’ç™ºè¡Œã™ã‚‹ãƒ¦ãƒ¼ã‚¶ã®æ¨©é™ã«è¿½åŠ ã—ã¦ãã ã•ã„ã€‚</p><p><strong>ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚­ãƒ¼ã€ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã®ç™ºè¡Œã¯ä¸‹è¨˜å‚ç…§</strong><br><a href="https://docs.aws.amazon.com/ja_jp/cli/latest/userguide/cli-services-iam-create-creds.html" target="_blank" rel="noopener">https://docs.aws.amazon.com/ja_jp/cli/latest/userguide/cli-services-iam-create-creds.html</a></p><h1 id="æ‰‹é †3-DataTransfer-APIã®æœ‰åŠ¹åŒ–"><a href="#æ‰‹é †3-DataTransfer-APIã®æœ‰åŠ¹åŒ–" class="headerlink" title="æ‰‹é †3 DataTransfer APIã®æœ‰åŠ¹åŒ–"></a>æ‰‹é †3 DataTransfer APIã®æœ‰åŠ¹åŒ–</h1><p>AWSç’°å¢ƒã®æº–å‚™ãŒå®Œäº†ã—ãŸã‚‰æ¬¡ã¯GCPç’°å¢ƒã®æº–å‚™ã§ã™ã€‚ã¾ãšã¯<a href="https://cloud.google.com/bigquery-transfer/docs/enable-transfer-service?hl=ja" target="_blank" rel="noopener">DataTransfer APIã®æœ‰åŠ¹åŒ–</a>ã«ã—ã¾ã—ã‚‡ã†ã€‚</p><p>ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚¿ãƒ–ã®ã€ŒAPIã¨ã‚µãƒ¼ãƒ“ã‚¹ã€ã‹ã‚‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’é¸æŠã—ã€ã€ŒBigQuery Data Transfer APIã€ã¨å…¥åŠ›ã—ã¦æ¤œç´¢ã—ã¦ãã ã•ã„ã€‚<br><img src="/images/20200214/photo_20200214_03.png"></p><p>æ¤œç´¢ã—ãŸAPIã‚’é¸æŠã—ã¦ã€æœ‰åŠ¹ã«ã™ã‚‹ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨APIãŒæœ‰åŠ¹åŒ–ã•ã‚Œã¾ã™ã€‚<br><img src="/images/20200214/photo_20200214_04.png"></p><h1 id="æ‰‹é †4-BigQueryã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã€ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ"><a href="#æ‰‹é †4-BigQueryã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã€ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ" class="headerlink" title="æ‰‹é †4 BigQueryã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã€ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ"></a>æ‰‹é †4 BigQueryã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã€ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ</h1><p>ä»Šå›ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦æ°—è±¡åºã®ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰2019å¹´ã®æ±äº¬ã®æ°—æ¸©ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã„ã¾ã™ã€‚<br><strong>ä¸‹è¨˜URLã‹ã‚‰å–å¾—</strong><br><a href="http://www.data.jma.go.jp/gmd/risk/obsdl/index.php" target="_blank" rel="noopener">http://www.data.jma.go.jp/gmd/risk/obsdl/index.php</a></p><p><a href="https://cloud.google.com/bigquery/docs/bq-command-line-tool?hl=ja" target="_blank" rel="noopener">bqã‚³ãƒãƒ³ãƒ‰</a>ã§ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä½œæˆã—ã¦ã€å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’æ ¼ç´ã§ãã‚‹ã‚ˆã†ãªãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚</p><p><strong>ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®ä½œæˆ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bq --location=asia-northeast1 mk \</span><br><span class="line">  --dataset <span class="built_in">test</span>-project-268106:from_s3</span><br></pre></td></tr></table></figure><p><strong>ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bq mk --table <span class="built_in">test</span>-project-268106:from_s3.temp_tokyo \</span><br><span class="line">  date:string,temp_avg:<span class="built_in">integer</span>,temp_max:<span class="built_in">integer</span>,temp_min:<span class="built_in">integer</span></span><br></pre></td></tr></table></figure><h1 id="æ‰‹é †5-è»¢é€ã‚¸ãƒ§ãƒ–ã®ä½œæˆ"><a href="#æ‰‹é †5-è»¢é€ã‚¸ãƒ§ãƒ–ã®ä½œæˆ" class="headerlink" title="æ‰‹é †5 è»¢é€ã‚¸ãƒ§ãƒ–ã®ä½œæˆ"></a>æ‰‹é †5 è»¢é€ã‚¸ãƒ§ãƒ–ã®ä½œæˆ</h1><p>ã„ã‚ˆã„ã‚ˆS3ã‹ã‚‰ã®è»¢é€ã‚¸ãƒ§ãƒ–ã®ä½œæˆã§ã™ã€‚ã“ã¡ã‚‰ã‚‚ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§ã®ä½œæˆã—ã¦ã„ãã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">bq mk \</span><br><span class="line">  --transfer_config  \</span><br><span class="line">  --project_id=*** \</span><br><span class="line">  --data_source=amazon_s3 \</span><br><span class="line">  --display_name=data_export_from_s3 \</span><br><span class="line">  --target_dataset=from_s3 \</span><br><span class="line">  --params=<span class="string">'&#123;</span></span><br><span class="line"><span class="string">"data_path":"s3://data-to-bq/temperature/data.csv",</span></span><br><span class="line"><span class="string">"destination_table_name_template":"temp_tokyo",</span></span><br><span class="line"><span class="string">"access_key_id":"***",</span></span><br><span class="line"><span class="string">"secret_access_key":"U***",</span></span><br><span class="line"><span class="string">"file_format":"CSV",</span></span><br><span class="line"><span class="string">"max_bad_records":"0",</span></span><br><span class="line"><span class="string">"ignore_unknown_values":"true",</span></span><br><span class="line"><span class="string">"field_delimiter":",",</span></span><br><span class="line"><span class="string">"skip_leading_rows":"0",</span></span><br><span class="line"><span class="string">"allow_quoted_newlines":"true",</span></span><br><span class="line"><span class="string">"allow_jagged_rows":"false"&#125;'</span></span><br></pre></td></tr></table></figure><p>ç°¡å˜ã«ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦æŠœç²‹ã—ã¦èª¬æ˜ã‚’è¨˜è¼‰ã—ã¾ã™ã€‚</p><ul><li><strong>data_source</strong> : BigQueryã«ãƒ‡ãƒ¼ã‚¿ã‚’è»¢é€ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã€‚ä»Šå›ã¯S3ãªã®ã§ã€Œamazon_s3ã€ã‚’é¸æŠ</li><li><strong>data_path</strong> : S3ã®URIã‚’å…¥åŠ›ã—ã¾ã™ã€‚åŸºæœ¬çš„ã«ã¯ã€ŒS3://ãƒã‚±ãƒƒãƒˆå/ãƒ•ã‚©ãƒ«ãƒ€å/ã‚ªãƒ–ã‚¨ã‚¸ã‚§ã‚¯ãƒˆåã€</li><li><strong>access_key_id/secret_access_key</strong> : æ‰‹é †ï¼’ã§ä½œæˆã—ãŸãƒ¦ãƒ¼ã‚¶ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã¨ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚­ãƒ¼</li><li><strong>file_format</strong> : ä»Šå›ã¯CSVãƒ‡ãƒ¼ã‚¿ãŒã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ãªã®ã§ã€ŒCSVã€ã‚’å…¥åŠ›ã€‚CSVä»¥å¤–ã«ã‚‚ã€JSONã‚„PARQUETãªã©ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚‚é¸æŠã™ã‚‹ã“ã¨ãŒå¯èƒ½</li><li><strong>field_delimiter</strong> : ä»Šå›ã¯ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã®CSVã®ãŸã‚ã€Œ,ã€ã‚’å…¥åŠ›</li><li><strong>skip_leading_rows</strong> : ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹ãƒ˜ãƒƒãƒ€ã®è¡Œæ•°ã€‚ä»Šå›ã¯ãƒ˜ãƒƒãƒ€è¡Œã‚’å«ã¾ãªã„ãƒ‡ãƒ¼ã‚¿ã«ã—ã¦ã„ã‚‹ãŸã‚ã€Œï¼ã€</li></ul><p>ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ãƒ­ã‚°ã‚¤ãƒ³è¨±å¯ã®URLãŒè¡¨ç¤ºã•ã‚Œã€URLã®ãƒªãƒ³ã‚¯ã«é£›ã³èªè¨¼ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã™ã‚‹ã¨æ­£å¸¸ã«ä½œæˆã•ã‚Œã¾ã—ãŸã¨è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‹ã‚‰ã‚‚è»¢é€ã‚¸ãƒ§ãƒ–ãŒä½œæˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã—ãŸã€‚<br><img src="/images/20200214/1.png" style="border:solid 1px #000000"></p><p>ã‚¸ãƒ§ãƒ–ãŒä½œæˆã•ã‚Œã‚‹ã¨ãã®å¾Œã™ãã«å®Ÿè¡Œã•ã‚Œã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‹ã‚‰å®Ÿè¡Œãƒ­ã‚°ã‚’ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚<br><img src="/images/20200214/2.png" style="border:solid 1px #000000"></p><p>ä»Šå›ã¯å°ã•ãªãƒ‡ãƒ¼ã‚¿ã§ã—ãŸãŒ3åˆ†ã»ã©ã‹ã‹ã£ã¦ã‚¸ãƒ§ãƒ–ã¯çµ‚äº†ã—ã¾ã—ãŸã€‚<br>å®Ÿéš›ã«SQLã§ãƒ‡ãƒ¼ã‚¿ã‚’è¦‹ã¦ã¿ã‚‹ã¨ä¸‹è¨˜ã®æ§˜ã«å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚<br><img src="/images/20200214/photo_20200214_05.png" class="img-small-size"></p><h2 id="æ³¨æ„ç‚¹"><a href="#æ³¨æ„ç‚¹" class="headerlink" title="æ³¨æ„ç‚¹"></a>æ³¨æ„ç‚¹</h2><p>æ³¨æ„ç‚¹ã¨ã—ã¦ã¯ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‹ã‚‰ã®ä½œæˆã®å ´åˆã€ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã®é¸æŠã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ã©ã†ã‚„ã‚‰ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã§ã‚ã‚‹24æ™‚é–“ã”ã¨(æ—¥æ™‚)ãŒè‡ªå‹•ã§é¸æŠã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚ä½œæˆå¾Œã«ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‹ã‚‰ã‚¸ãƒ§ãƒ–ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ç·¨é›†ã™ã‚‹ã“ã¨ã¯å¯èƒ½ã§ã™ã€‚ä¸‹è¨˜ã®ã‚ˆã†ã«æ¯æ—¥ã€æ¯é€±ã€æ¯æœˆã€ã‚«ã‚¹ã‚¿ãƒ ã€ã‚ªãƒ³ãƒ‡ãƒãƒ³ãƒ‰ã¨é¸ã¶ã“ã¨ãŒã§ãã¾ã™ã€‚<br><img src="/images/20200214/3.png" class="img-middle-size"></p><h1 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h1><p>ä»Šå›ã¯GCPã®ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§ä½œæˆã—ã¾ã—ãŸãŒInfrastructure as Codeã§æœ‰åãªTerraformãªã©ã§ã‚‚ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä»Šå›ã®æ©Ÿèƒ½ã‚’å®Ÿé‹ç”¨ã§åˆ©ç”¨ã™ã‚‹ã¨ãªã‚‹ã¨S3ã®ãƒ‘ã‚¹è¨­è¨ˆãªã©æ¤œè¨ã™ã‚‹ã“ã¨ã¯ä»–ã«ã‚‚ã‚ã‚‹ã¨ã¯æ€ã„ã¾ã™ãŒã€AWSã‚’ä½¿ã„ã¤ã¤GCPã®BigQueryã‚’åˆ©ç”¨ã™ã‚‹ãªã©ã®ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰ã®å¤¢ãŒåºƒãŒã‚‹ã‚ˆã†ãªæ©Ÿèƒ½ã§ã™ã­ã€‚ä»Šå¾Œã‚‚ã•ã‚‰ãªã‚‹æ©Ÿèƒ½æ‹¡å¼µã‚’æœŸå¾…ã—ã¾ã™ã€‚</p><h2 id="é–¢é€£ãƒªãƒ³ã‚¯"><a href="#é–¢é€£ãƒªãƒ³ã‚¯" class="headerlink" title="é–¢é€£ãƒªãƒ³ã‚¯"></a>é–¢é€£ãƒªãƒ³ã‚¯</h2><ul><li><a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCPé€£è¼‰ä¼ç”»</a></li><li><a href="https://future-architect.github.io/articles/20190909/">Letâ€™s Try GCP #1 ï½Cloud Run Buttonã‚’ä½¿ã£ãŸæ¥½ã€…ã‚³ãƒ³ãƒ†ãƒŠãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ã‚„ã£ã¦ã¿ãŸï½</a></li><li><a href="https://future-architect.github.io/articles/20190903/">Terraformã®ãƒ™ã‚¹ãƒˆãªãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã£ã¦ãªã‚“ã ã‚ã†ã‹</a></li><li><a href="https://future-architect.github.io/tags/GoCDK/">Go Cloudé€£è¼‰</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/&quot;&gt;GCPé›†ä¸­é€£è¼‰&lt;/a&gt;ã®7å›ç›®ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;ã¾ãšã¯ç°¡å˜ã«è‡ªå·±ç´¹ä»‹ã‚’ã•ã›ã¦ãã ã•ã„ã€‚TIGã®DXãƒãƒ¼ãƒ ã«æ‰€å±ã—ã¦ã„ã‚‹åŠ éƒ¨ã§
      
    
    </summary>
    
      <category term="Infrastructure" scheme="https://future-architect.github.io/categories/Infrastructure/"/>
    
    
      <category term="GCP" scheme="https://future-architect.github.io/tags/GCP/"/>
    
      <category term="GCPé€£è¼‰" scheme="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/"/>
    
      <category term="BigQuery" scheme="https://future-architect.github.io/tags/BigQuery/"/>
    
  </entry>
  
  <entry>
    <title>GCPé€£è¼‰#6 Terraform Validatorã‚’ä½¿ã£ã¦ã€GCPã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼ã®è‡ªå‹•ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã†</title>
    <link href="https://future-architect.github.io/articles/20200213/"/>
    <id>https://future-architect.github.io/articles/20200213/</id>
    <published>2020-02-13T01:26:28.000Z</published>
    <updated>2020-02-13T01:38:31.258Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCPé›†ä¸­é€£è¼‰</a>ã®6å›ç›®ã§ã™ã€‚ä»Šå›ã¯<strong>Terraform Validatorã‚’ä½¿ã£ã¦ã€çµ„ç¹”ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼ã®è‡ªå‹•ãƒã‚§ãƒƒã‚¯ã‚’ç¶™ç¶šçš„ã«è¡Œã†</strong>æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚ä½µã›ã¦ã€ãƒãƒªã‚·ãƒ¼ã‚’ã‚³ãƒ¼ãƒ‰ã¨ã—ã¦ç®¡ç†ã™ã‚‹æ–¹æ³•ã‚‚ç´¹ä»‹ã—ã¾ã™ã€‚<strong>Policy as code</strong> ã§ã™ã€‚ã‚‚ã¡ã‚ã‚“ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼ã®ã¿ã ã‘ã§ã¯ãªãã€å‘½åè¦å‰‡ã‚„ãƒªãƒ¼ã‚¸ãƒ§ãƒ³åˆ¶é™ãªã©ã‚‚æ‰±ãˆã¾ã™ã€‚</p><h1 id="Infrastructure-as-code-ç†æƒ³ã¨ç¾å®Ÿ"><a href="#Infrastructure-as-code-ç†æƒ³ã¨ç¾å®Ÿ" class="headerlink" title="Infrastructure as code ç†æƒ³ã¨ç¾å®Ÿ"></a>Infrastructure as code ç†æƒ³ã¨ç¾å®Ÿ</h1><p>Infrastructure as code (ä»¥ä¸‹ IaC)ã€ã“ã“æœ€è¿‘å¤§åˆ†ä¸€èˆ¬çš„ã«ãªã£ã¦ãã¾ã—ãŸã€‚å¼Šç¤¾ã§ã‚‚å¤§åŠã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯å°å…¥ã—ã¦ã„ã¾ã™ã€‚3å¹´å‰ã¨ã‹ã«å°å…¥ã™ã‚‹ãŸã‚ã«ä¸€è‹¦åŠ´ã—ã¦ã„ãŸæ™‚ä»£ãŒæ‡ã‹ã—ã„..<br>IaCãŒå½“ãŸã‚Šå‰ã«ãªã£ãŸä»Šã€ã‚¤ãƒ³ãƒ•ãƒ©ã®æ§‹æˆç®¡ç†ã¯ã‚‚ã†å•é¡Œãªã„ã‹ã¨ã„ã†ã¨ãã†ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚<strong>ç‰¹ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ•°ãŒã‚¹ã‚±ãƒ¼ãƒ«ã™ã‚‹å ´åˆ</strong>ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå•é¡ŒãŒç™ºç”Ÿã—ã¦ã—ã¾ã£ã¦ã„ã‚‹ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚</p><ul><li>å„ãƒãƒ¼ãƒ ã«æ¨©é™ã‚’å§”è­²ã—ã‚¤ãƒ³ãƒ•ãƒ©ã‚’ç®¡ç†ã—ã¦ã‚‚ã‚‰ã†ãŒã€çµ„ç¹”ã®ãƒãƒªã‚·ãƒ¼ã«åã—ãŸãƒªã‚½ãƒ¼ã‚¹ãŒä½œæˆã•ã‚Œã¦ã—ã¾ã†</li><li>ãã‚‚ãã‚‚çµ„ç¹”ã®ãƒãƒªã‚·ãƒ¼ãŒå®šç¾©ãƒ»æ˜æ–‡åŒ–ã§ãã¦ã„ãªã„</li><li>ã§ãã¦ã„ã¦ã‚‚å‘¨çŸ¥ã§ããªã„ã€å‘¨çŸ¥ã§ãã¦ã„ã¦ã‚‚ã€å®ˆã£ã¦ã‚‚ã‚‰ãˆãªã„</li></ul><p>ä¾‹ãˆã°ã€â€GCSã®ãƒã‚±ãƒƒãƒˆã‚’å…¨ä¸–ç•Œã«å…¬é–‹ã—ã¦ã—ã¾ã£ã¦ã„ã‚‹â€ ã¨ã„ã†èª¤ã£ãŸè¨­å®šã‚‚æœ¬ç•ªç’°å¢ƒã«ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã¦ã—ã¾ã†ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><img src="/images/20200213/photo_20200213_01.png"><p>GCPã ã‘ã§ã¯ãªãã€å¤šãã®ã‚¯ãƒ©ã‚¦ãƒ‰ç®¡ç†è€…ãŒåŒã˜ã‚ˆã†ãªæ‚©ã¿ã‚’æŠ±ãˆã¦ã„ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚ç§ã‚‚ãã®ä¸€äººã§ã™ã€‚å„ãƒãƒ¼ãƒ ã®é–‹ç™ºè€…ãŒã‚¯ãƒ©ã‚¦ãƒ‰ã‚¤ãƒ³ãƒ•ãƒ©ã«ç†ŸçŸ¥ã—ã¦ã„ã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã§ã¯ã€ã‚¯ãƒ©ã‚¦ãƒ‰ç®¡ç†è€…ãŒã™ã¹ã¦ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚Œã°ã‚ˆã„ã‹ã€ã„ã‚„ã„ã‚„ã€ãã‚Œã‚‚ç¾å®Ÿçš„ã§ã¯ãªã„ã€‚</p><p>IaCãŒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã‚„ã£ã¨åŒã˜åœŸä¿µã«ç«‹ã£ãŸä»Šã€åŒã˜ã <strong>CI(ç¶™ç¶šçš„ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³)</strong> ã®ä»•çµ„ã¿ãŒå¿…è¦ã«ãªã£ã¦ãã‚‹ã®ã¯ã€è‡ªç„¶ã®æµã‚Œã‹ã¨æ€ã„ã¾ã™ã€‚terraform fmtãŒã•ã‚Œã¦ã„ã‚‹ã‹ã€planãŒé€šã‚‹ã‹ã€ç­‰ã®ç°¡å˜ãªãƒã‚§ãƒƒã‚¯ã‚’ã‚„ã£ã¦ã„ã‚‹äººã¯å¤šã„ã¨æ€ã„ã¾ã™ãŒã€ãã‚Œã‚ˆã‚Šã‚‚é«˜åº¦ãªãƒã‚§ãƒƒã‚¯ã‚’è¡Œã†ä»•çµ„ã¿ãŒãªãç§ã‚‚æ–¹æ³•ã‚’æ¢ã—ã¦ãŠã‚Šã¾ã—ãŸã€‚</p><h1 id="Terraform-Validator-ã¨ã¯"><a href="#Terraform-Validator-ã¨ã¯" class="headerlink" title="Terraform Validator ã¨ã¯"></a>Terraform Validator ã¨ã¯</h1><p>ã“ã‚Œã‚’å®Ÿç¾ã™ã‚‹ã®ãŒã€ä»Šå›ç´¹ä»‹ã™ã‚‹ <strong>Terraform Validator</strong> ã§ã™ã€‚Terraform Validatorã¯ã€ <strong>terraformãŒapplyã•ã‚Œã‚‹å‰ã«ã€ã‚¤ãƒ³ãƒ•ãƒ©ã®ãƒªã‚½ãƒ¼ã‚¹è¨­å®šãŒå®šç¾©ã—ãŸãƒãƒªã‚·ãƒ¼ã«å¾“ã£ã¦ã„ã‚‹ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ãƒ„ãƒ¼ãƒ«</strong>ã§ã™ã€‚GCPã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã¨ã—ã¦å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚ <a href="https://github.com/GoogleCloudPlatform/terraform-validator" target="_blank" rel="noopener">GoogleCloudPlatform/terraform-validator</a></p><p>ä»¥ä¸‹ãŒæ¦‚è¦ã®å›³ã§ã™ã€‚</p><img src="/images/20200213/photo_20200213_02.png"><p>ä»•çµ„ã¿ã¯ã”ãå˜ç´”ã§ã™</p><ul><li>Policy ã‚’ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰(yaml)ã¨ã—ã¦å®šç¾©</li><li>Terraformã®planã®çµæœ(json)ã‚’ç”Ÿæˆ</li><li>Terraform Validatorã«èª­ã¿è¾¼ã¿ã•ã›ã€ãƒã‚§ãƒƒã‚¯çµæœã‚’å‡ºåŠ›</li></ul><p>ãƒãƒªã‚·ãƒ¼ã«åã—ãŸãƒªã‚½ãƒ¼ã‚¹ãŒterraformã§å®šç¾©ã•ã‚ŒãŸå ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ã« <code>Found Violations</code> ã¨å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚ (ä»¥ä¸‹ã®ã‚µãƒ³ãƒ—ãƒ«ã¯ã€GCSã®ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒè¨±å¯ã•ã‚Œã¦ã„ãªã„ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Sample</span></span><br><span class="line">$ terraform-validator validate --policy-path=<span class="variable">$&#123;POLICY_PATH&#125;</span> ./terraform.tfplan.json</span><br><span class="line">Found Violations:</span><br><span class="line">Constraint allow_some_storage_location on resource //storage.googleapis.com/validator-trial: //storage.googleapis.com/validator-trial is <span class="keyword">in</span> a disallowed location.</span><br></pre></td></tr></table></figure><h1 id="ãƒãƒ³ã‚ºã‚ªãƒ³"><a href="#ãƒãƒ³ã‚ºã‚ªãƒ³" class="headerlink" title="ãƒãƒ³ã‚ºã‚ªãƒ³"></a>ãƒãƒ³ã‚ºã‚ªãƒ³</h1><p>ã§ã¯ã•ã£ããã€å®Ÿéš›ã«è©¦ã—ã¦ã¿ã¾ã™ã€‚<strong>â€œGCSã®ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«åˆ¶é™ã‚’ã‹ã‘ã‚‹â€</strong> ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã§è©¦ã—ã¦ã¿ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆã‚’ç”¨æ„ã—ã€2ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã—ãŸã€‚</p><ul><li><code>storage_location.yaml</code> : (ãƒãƒªã‚·ãƒ¼ã‚’å®šç¾©ã™ã‚‹ã‚³ãƒ¼ãƒ‰)</li><li><code>main.tf</code> : (terraformã®ã‚³ãƒ¼ãƒ‰)</li></ul><img src="/images/20200213/photo_20200213_03.png"><h2 id="Terraform-Validator-ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"><a href="#Terraform-Validator-ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" class="headerlink" title="Terraform Validator ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"></a>Terraform Validator ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h2><p>ãƒã‚¤ãƒŠãƒªãƒ•ã‚¡ã‚¤ãƒ«ãŒGCSã§å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€æœ€æ–°ç‰ˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—é©å½“ãªãƒ‘ã‚¹ã«é…ç½®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ gsutil ls -r gs://terraform-validator/releases</span><br><span class="line">$ gsutil cp gs://terraform-validator/releases/2020-01-23/terraform-validator-linux-amd64 .</span><br><span class="line">$ mv terraform-validator-linux-amd64 terraform-validator-linux-amd64</span><br><span class="line">$ chmod 755 terraform-validator</span><br></pre></td></tr></table></figure><h2 id="Policyã‚’å®šç¾©"><a href="#Policyã‚’å®šç¾©" class="headerlink" title="Policyã‚’å®šç¾©"></a>Policyã‚’å®šç¾©</h2><p>Policyã‚’Git cloneã—ã€<code>POLICY_PATH</code> ã‚’å®šç¾©</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/forseti-security/policy-library.git</span><br><span class="line">$ <span class="built_in">export</span> POLICY_PATH=<span class="string">"/&lt;your_work_space&gt;/policy-library"</span></span><br></pre></td></tr></table></figure><p>Sampleã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ã—ã€ãƒãƒªã‚·ãƒ¼ã‚’å®šç¾©ã—ã¾ã™ã€‚policies/constraints é…ä¸‹ã«é…ç½®ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ãŒæœ‰åŠ¹åŒ–ã•ã‚Œã¾ã™ã€‚ä»Šå›ã¯GCSã®Locationã«åˆ¶é™ã‚’ã‹ã‘ã¾ã™ (<strong>ap-northeast-1ã®ã¿ã‚’è¨±å¯ã™ã‚‹</strong>)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /&lt;your_work_space&gt;/policy-library/policies/constraints</span><br><span class="line">$ cp ../../samples/storage_location.yaml .</span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">constraints.gatekeeper.sh/v1alpha1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">GCPStorageLocationConstraintV1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">allow_some_storage_location</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  severity:</span> <span class="string">high</span></span><br><span class="line"><span class="attr">  match:</span></span><br><span class="line"><span class="attr">    target:</span> <span class="string">["organization/*"]</span></span><br><span class="line"><span class="attr">  parameters:</span></span><br><span class="line"><span class="attr">    mode:</span> <span class="string">"allowlist"</span></span><br><span class="line"><span class="attr">    locations:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">asia-northeast1</span></span><br><span class="line"><span class="attr">    exemptions:</span> <span class="string">[]</span></span><br></pre></td></tr></table></figure><h2 id="Terraform-planã®å®Ÿè¡Œ"><a href="#Terraform-planã®å®Ÿè¡Œ" class="headerlink" title="Terraform planã®å®Ÿè¡Œ"></a>Terraform planã®å®Ÿè¡Œ</h2><p>main.tfã¯ä»¥ä¸‹ã®ã‚ˆã†ã«å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚<code>location=&quot;us-central1-a&quot;</code> ã¨è¨­å®šã—ã¦ã„ã¾ã™<br>(ãã®ä»– variable.tf, provider.tfç­‰ã¯çœç•¥)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">resource &quot;google_storage_bucket&quot; &quot;validator_trial&quot; &#123;</span><br><span class="line">      project       = &lt;your project&gt;</span><br><span class="line">      name          = &quot;validator-trial&quot;</span><br><span class="line">      force_destroy = false</span><br><span class="line">      storage_class = &quot;REGIONAL&quot;</span><br><span class="line">      location      = &quot;us-central1-a&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>planã‚’å®Ÿè¡Œ <code>--out=</code> optionã‚’åˆ©ç”¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ terraform plan --out=terraform.tfplan</span><br></pre></td></tr></table></figure><p>terraform.tfplanã®ãƒã‚¤ãƒŠãƒªã‚’jsonã¸å¤‰æ›</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ terraform show -json ./terraform.tfplan &gt; ./terraform.tfplan.json</span><br></pre></td></tr></table></figure><h2 id="Terraform-Validatorã®å®Ÿè¡Œ"><a href="#Terraform-Validatorã®å®Ÿè¡Œ" class="headerlink" title="Terraform Validatorã®å®Ÿè¡Œ"></a>Terraform Validatorã®å®Ÿè¡Œ</h2><p>ã“ã‚Œã§æº–å‚™ã¯æ•´ã„ã¾ã—ãŸã€‚Terraform Validatorã®å®Ÿè¡Œã‚’è¡Œã„ã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ terraform-validator validate --policy-path=<span class="variable">$&#123;POLICY_PATH&#125;</span> ./terraform.tfplan.json</span><br><span class="line">Found Violations:</span><br><span class="line">Constraint allow_some_storage_location on resource //storage.googleapis.com/validator-trial: //storage.googleapis.com/validator-trial is <span class="keyword">in</span> a disallowed location.</span><br></pre></td></tr></table></figure><p>Validationã«ã‚ˆã‚Šãƒãƒªã‚·ãƒ¼é•åã‚’æ¤œçŸ¥ã—ã¾ã—ãŸï¼ğŸš«</p><p>main.tf ã‚’ä¿®æ­£ã—ã¦..</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">resource "google_storage_bucket" "validator_trial" &#123;</span><br><span class="line">      project       = &lt;your project&gt;</span><br><span class="line">      name          = "validator-trial"</span><br><span class="line">      force_destroy = false</span><br><span class="line">      storage_class = "REGIONAL"</span><br><span class="line"><span class="deletion">-     location      = "us-central1-a"</span></span><br><span class="line"><span class="addition">+     location      = "asia-northeast1"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†åº¦å®Ÿè¡Œã—ã¦ã¿ã‚‹ã¨..</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ terraform-validator validate --policy-path=<span class="variable">$&#123;POLICY_PATH&#125;</span> ./terraform.tfplan.json</span><br><span class="line">No violations found</span><br></pre></td></tr></table></figure><p>ä»Šåº¦ã¯ValidationãŒæˆåŠŸã—ã¾ã—ãŸï¼âœ… æœŸå¾…é€šã‚Šã®å‹•ãã‚’ã—ã¦ãã‚Œã¾ã—ãŸã€‚</p><h1 id="ãƒãƒªã‚·ãƒ¼å®šç¾©-Policy-as-code"><a href="#ãƒãƒªã‚·ãƒ¼å®šç¾©-Policy-as-code" class="headerlink" title="ãƒãƒªã‚·ãƒ¼å®šç¾© (Policy as code)"></a>ãƒãƒªã‚·ãƒ¼å®šç¾© (Policy as code)</h1><p>ã‚µãƒ³ãƒ—ãƒ«ãƒãƒªã‚·ãƒ¼ã¯ã€å…ˆã»ã©åˆ©ç”¨ã—ãŸ <a href="https://github.com/forseti-security/policy-library/tree/master/samples" target="_blank" rel="noopener">forseti-security/policy-library</a> ã«ã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã‚‰ã®yamlãƒ•ã‚¡ã‚¤ãƒ«ã‚’ <code>POLICY_PATH</code> ã§å®šç¾©ã—ãŸ <code>/&lt;your_work_space&gt;/policy-library</code> ã®ä¸­ã® <code>policies/constraints/</code> é…ä¸‹ã«é…ç½®ã™ã‚Œã°OKã§ã™ã€‚Policy as codeãŒç°¡å˜ã«å®Ÿç¾ã§ãã¾ã™ã€‚<br>ä»¥ä¸‹ã«ã€ã‚µãƒ³ãƒ—ãƒ«ã‹ã‚‰ä¸€éƒ¨ã‚’ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¦ã”ç´¹ä»‹ã—ã¾ã™ã€‚ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼ã‚’å®šç¾©ã§ãã‚‹ã»ã‹ã«ã‚‚ã€ãƒªã‚½ãƒ¼ã‚¹ã®å‘½åè¦å‰‡ã®åˆ¶é™ãŒã§ããŸã‚Šã™ã‚‹ã®ã¯åœ°å‘³ã«å¬‰ã—ã„ã§ã™ã­ã€‚</p><h4 id="ãƒãƒªã‚·ãƒ¼å®šç¾©ã®ã‚µãƒ³ãƒ—ãƒ«"><a href="#ãƒãƒªã‚·ãƒ¼å®šç¾©ã®ã‚µãƒ³ãƒ—ãƒ«" class="headerlink" title="ãƒãƒªã‚·ãƒ¼å®šç¾©ã®ã‚µãƒ³ãƒ—ãƒ«"></a>ãƒãƒªã‚·ãƒ¼å®šç¾©ã®ã‚µãƒ³ãƒ—ãƒ«</h4><ul><li>ä¸€èˆ¬çš„ãªåˆ¶é™<ul><li>ãƒªã‚½ãƒ¼ã‚¹ã®å‘½åè¦å‰‡(æ­£è¦è¡¨ç¾ã§æŒ‡å®š)</li><li>Labelã®ã‚¢ã‚¿ãƒƒãƒã®å¼·åˆ¶</li><li>ãƒªã‚½ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ—ã®åˆ¶é™</li></ul></li><li>GCE<ul><li>Public IPã®ç„¡åŠ¹åŒ–</li><li>NWã®WhitelistæŒ‡å®š</li></ul></li><li>Cloud SQL<ul><li>Public IPã®ç„¡åŠ¹åŒ–</li><li>Maintenance Windownã®åˆ¶é™</li><li>SSLã®å¼·åˆ¶</li></ul></li><li>GKE<ul><li>Private Clusterã®å¼·åˆ¶</li><li>Dashboardã®ç„¡åŠ¹åŒ–</li><li>Node poolã®Auto upgradeã®å¼·åˆ¶</li><li>Node OSã®æŒ‡å®š</li></ul></li><li>BigQuery<ul><li>Datasetã®ãƒ‘ãƒ–ãƒªãƒƒã‚¯å…¬é–‹åˆ¶é™</li></ul></li><li>IAM<ul><li>Service Accountã¸ä»˜ä¸ã™ã‚‹Roleã®åˆ¶é™</li><li>Audit loggingã®å¼·åˆ¶</li></ul></li><li>Network<ul><li>Firewall ssh,rdp rule ãƒ‘ãƒ–ãƒªãƒƒã‚¯å…¬é–‹ã®ç¦æ­¢</li></ul></li><li>VPC Service Control<ul><li>æœ‰åŠ¹åŒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æŒ‡å®š</li></ul></li></ul><p>ã©ã®ã‚ˆã†ãªåˆ¶é™ã‚’ã‹ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹ã‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ããŸã§ã—ã‚‡ã†ã‹ã€‚å®Ÿã¯ã“ã¡ã‚‰ã«ç”¨æ„ã•ã‚Œã¦ã„ãªã„ã‚‚ã®ã§ã‚‚ã€Custom Policyã¨ã—ã¦è‡ªèº«ã§ãƒãƒªã‚·ãƒ¼ãƒ«ãƒ¼ãƒ«ã‚’è¨˜è¿°ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚è©³ç´°ã¯<a href="https://github.com/forseti-security/policy-library/blob/master/docs/constraint_template_authoring.md" target="_blank" rel="noopener">ã“ã¡ã‚‰</a></p><h1 id="å®Ÿéš›ã®é‹ç”¨"><a href="#å®Ÿéš›ã®é‹ç”¨" class="headerlink" title="å®Ÿéš›ã®é‹ç”¨"></a>å®Ÿéš›ã®é‹ç”¨</h1><p>å®Ÿè¡Œæ–¹æ³•ã¨ãƒãƒªã‚·ãƒ¼ã®å®šç¾©æ–¹æ³•ãŒåˆ†ã‹ã£ãŸã¨ã“ã‚ã§ã€å®Ÿéš›ã®é‹ç”¨æ–¹æ³•ã«ã¤ã„ã¦ã§ã™ã€‚<br>ä»¥ä¸‹ã®ã‚ˆã†ã«ã€Terraformã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®PRã«å¯¾ã—ã¦ã€Terraform Validatorã‚’å®Ÿè¡Œã—ã€çµæœã‚’PRã«ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã•ã›ã‚‹ã‚ˆã†ã«ã™ã‚‹ã®ãŒè‰¯ã„ã¨æ€ã„ã¾ã™ã€‚Githubã¨é€£æºãŒå¯èƒ½ã§ã‚ã‚Œã°ã€CloudBuildã§ä»¥ä¸‹ã®ã‚ˆã†ã«CIã‚’å›ã™ã®ãŒç°¡å˜ã§ã‚ˆã„ã§ã™ã€‚</p><img src="/images/20200213/photo_20200213_04.png"><p>Cloud Buildã®Steps ã‚¤ãƒ¡ãƒ¼ã‚¸</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">steps:</span></span><br><span class="line"><span class="attr">- name:</span> <span class="string">gcr.io/config-validator/terraform-validator</span></span><br><span class="line"><span class="attr">  entrypoint:</span> <span class="string">terraform</span></span><br><span class="line"><span class="attr">  dir:</span> <span class="string">your-terraform-folder</span></span><br><span class="line"><span class="attr">  args:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">init</span></span><br><span class="line"><span class="attr">- name:</span> <span class="string">gcr.io/config-validator/terraform-validator</span></span><br><span class="line"><span class="attr">  dir:</span> <span class="string">your-terraform-folder</span></span><br><span class="line"><span class="attr">  entrypoint:</span> <span class="string">terraform</span></span><br><span class="line"><span class="attr">  args:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">plan</span> </span><br><span class="line"><span class="bullet">  -</span> <span class="bullet">-out=terraform.tfplan</span></span><br><span class="line"><span class="attr">- name:</span> <span class="string">gcr.io/config-validator/terraform-validator</span></span><br><span class="line"><span class="attr">  entrypoint:</span> <span class="string">"/bin/bash"</span></span><br><span class="line"><span class="attr">  args:</span> <span class="string">['-c',</span> <span class="string">'terraform show -json terraform.tfplan &gt; terraform.tfplan.json'</span><span class="string">]</span></span><br><span class="line"><span class="attr">  dir:</span> <span class="string">your-terraform-folder</span></span><br><span class="line"><span class="attr">- name:</span> <span class="string">gcr.io/config-validator/terraform-validator</span></span><br><span class="line"><span class="attr">  dir:</span> <span class="string">your-terraform-folder</span></span><br><span class="line"><span class="attr">  args:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">validate</span></span><br><span class="line"><span class="bullet">  -</span> <span class="bullet">--policy-path=/&lt;your_work_space&gt;/policy-library</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">your-terraform-folder/terraform.tfplan.json</span></span><br></pre></td></tr></table></figure><p>PRä¸Šã§ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®ã‚¤ãƒ¡ãƒ¼ã‚¸<br><img src="/images/20200213/photo_20200213_05.png"></p><h1 id="æœ€å¾Œã«"><a href="#æœ€å¾Œã«" class="headerlink" title="æœ€å¾Œã«"></a>æœ€å¾Œã«</h1><p>æœ¬è¨˜äº‹ã§ã¯ã‚ã¾ã‚Šè§¦ã‚Œã¾ã›ã‚“ã§ã—ãŸãŒã€å®Ÿã¯ã€<a href="https://forsetisecurity.org/" target="_blank" rel="noopener">Forseti</a>ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’ç”¨ã„ã¦Ongoingã§ã®ç›£è¦–ã‚‚å¯èƒ½ã§ã™ã€‚ã“ã¡ã‚‰ã‚‚GCPãŒå…¬é–‹ã—ã¦ã„ã‚‹ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ã“ã‚Œã‚’ç”¨ã„ã‚Œã°ã€ä¸€å…ƒç®¡ç†ã•ã‚ŒãŸãƒãƒªã‚·ãƒ¼ã§TerraformçµŒç”±ã§ã¯ãªã„æ‰‹ä½œæ¥­ã«ã‚ˆã‚‹ãƒãƒªã‚·ãƒ¼é•åã®ç™ºç”Ÿã‚‚æ¤œçŸ¥ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><img src="/images/20200213/photo_20200213_06.png"><p>GCPã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ•°ãŒã‚¹ã‚±ãƒ¼ãƒ«ã™ã‚‹éš›ã«å¿…ãšã¶ã¡å½“ãŸã‚‹ã§ã‚ã‚ã†ã“ã®èª²é¡Œã€ç§ãŸã¡ã‚‚Terraform Validatorã‚’ç”¨ã„ã¦è§£æ±ºã—ã‚ˆã†ã¨ç¾åœ¨ã€è©¦è¡ŒéŒ¯èª¤ä¸­ã§ã™ã€‚å°å…¥è‡ªä½“ã¯ã‚·ãƒ³ãƒ—ãƒ«ã«ã§ãã‚‹ãŸã‚ã€ã¾ãšã¯ç°¡å˜ãªãƒãƒªã‚·ãƒ¼ã®ãƒã‚§ãƒƒã‚¯ã‹ã‚‰å§‹ã‚ã¦ã¿ã¦ã¯ã„ã‹ãŒã§ã—ã‚‡ã†ã‹ã€‚</p><h2 id="é–¢é€£ãƒªãƒ³ã‚¯"><a href="#é–¢é€£ãƒªãƒ³ã‚¯" class="headerlink" title="é–¢é€£ãƒªãƒ³ã‚¯"></a>é–¢é€£ãƒªãƒ³ã‚¯</h2><ul><li><a href="https://future-architect.github.io/articles/20190903/">Terraformã®ãƒ™ã‚¹ãƒˆãªãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã£ã¦ãªã‚“ã ã‚ã†ã‹</a></li><li><a href="https://future-architect.github.io/articles/20190816/">ã¯ã˜ã‚ã¦ã®Terraform 0.12 ï½ç’°å¢ƒæ§‹ç¯‰ï½</a></li><li><a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCPé€£è¼‰ä¼ç”»</a></li><li><a href="https://future-architect.github.io/tags/GoCDK/">Go Cloudé€£è¼‰</a></li><li><a href="https://future-architect.github.io/articles/20190909/">Letâ€™s Try GCP #1 ï½Cloud Run Buttonã‚’ä½¿ã£ãŸæ¥½ã€…ã‚³ãƒ³ãƒ†ãƒŠãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ã‚„ã£ã¦ã¿ãŸï½</a></li><li><a href="https://future-architect.github.io/articles/20190927/">Letâ€™s Try GCP #2 ï½Cloud Functionã‚’VPC connectorã¨ä¸€ç·’ã«ä½¿ã£ã¦ã¿ã‚‹ï½</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/&quot;&gt;GCPé›†ä¸­é€£è¼‰&lt;/a&gt;ã®6å›ç›®ã§ã™ã€‚ä»Šå›ã¯&lt;strong&gt;Terraform Validatorã‚’ä½¿ã£ã¦ã€çµ„ç¹”ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒª
      
    
    </summary>
    
      <category term="Infrastructure" scheme="https://future-architect.github.io/categories/Infrastructure/"/>
    
    
      <category term="GCP" scheme="https://future-architect.github.io/tags/GCP/"/>
    
      <category term="Terraform" scheme="https://future-architect.github.io/tags/Terraform/"/>
    
      <category term="GCPé€£è¼‰" scheme="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/"/>
    
  </entry>
  
  <entry>
    <title>GCPé€£è¼‰#5ã€ã‚‚ã†éµãªãã•ãªã„ã€‘GCPã®Secret Managerã¨Berglasã§å¹¸ã›ã«ãªã‚‹</title>
    <link href="https://future-architect.github.io/articles/20200212/"/>
    <id>https://future-architect.github.io/articles/20200212/</id>
    <published>2020-02-12T00:14:36.000Z</published>
    <updated>2020-02-12T00:45:18.458Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰æ›¸ã"><a href="#å‰æ›¸ã" class="headerlink" title="å‰æ›¸ã"></a>å‰æ›¸ã</h2><p>ã“ã‚“ã«ã¡ã¯ã€TIGæ‰€å±ã‚¤ãƒ³ãƒ•ãƒ©ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®å¸‚å·ã§ã™ã€‚</p><p>çªç„¶ã§ã™ãŒã€æ™®æ®µç”Ÿæ´»ã™ã‚‹ã†ãˆã§ã‚«ã‚®ğŸ”‘ã‚’ãªãã—ãŸã€å¿˜ã‚ŒãŸã“ã¨ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚ç§ã¯ã‚ã‚Šã¾ã™ã€‚ãªãã—ãŸã“ã¨ã¯ãªã„ã‘ã©ã€ã†ã£ã‹ã‚Šç½®ãå¿˜ã‚Œã¡ã‚ƒã†ã‚“ã§ã™ã‚ˆã­ã€‚</p><p>ãã‚ŒãŒã“ã¨ã‚¤ãƒ³ãƒ•ãƒ©æ§‹ç¯‰ã®å ´é¢ã§ã¯ã©ã†ã§ã—ã‚‡ã†ã‹ã€‚æœ€è¿‘ã¯ã¨ã«ã‹ãå¤šãã®ã‚«ã‚®ã‚’ç®¡ç†ã—ãªãã¦ã¯ãªã‚Šã¾ã›ã‚“ã€‚API Keyã¨ã‹æ°—ã¥ã„ãŸã‚‰ä½•ãŒä½•ã ã‹åˆ†ã‹ã‚‰ãªããªã‚Šã€è‹¦æ¸‹ã®æ±ºæ–­ã®æœ«ã€å†åº¦æ‰•ã„å‡ºã™ã“ã¨ã‚‚å¤šã„ã®ã§ã¯ç„¡ã„ã§ã—ã‚‡ã†ã‹ã€‚æ¤œè¨¼ãªã‚‰ã¾ãâ€¦ã‚®ãƒªã‚®ãƒªã§ã™ãŒã€æœ¬ç•ªã§ã¯ã‚„ã£ã¡ã‚ƒãƒ€ãƒ¡çµ¶å¯¾ã§ã™ã€‚</p><p>ã¨ã„ã†ã“ã¨ã§ã€ãã‚“ãªç®¡ç†äººã®çš†ã•ã‚“ã«æœ—å ±ã§ã™ã€‚ <strong>é‚ã«GCPã«ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç®¡ç†æ©Ÿèƒ½ãŒã‚„ã£ã¦ãã¾ã—ãŸï¼</strong> CLIãƒ„ãƒ¼ãƒ«ã®Berglasã¨GUIã§ç®¡ç†ã™ã‚‹Secret Managerã‚’ç°¡å˜ã«ã”ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><h2 id="Berglasã‚’ä½¿ã£ã¦ã¿ã‚‹"><a href="#Berglasã‚’ä½¿ã£ã¦ã¿ã‚‹" class="headerlink" title="Berglasã‚’ä½¿ã£ã¦ã¿ã‚‹"></a>Berglasã‚’ä½¿ã£ã¦ã¿ã‚‹</h2><p>ã‚µã‚¯ã£ã¨åˆ©ç”¨ã™ã‚‹ãªã‚‰Cloud Shellã ã‚ˆã­ï¼ã¨ã„ã†ã“ã¨ã§ã€ä»¥ä¸‹Cloud Shellã§ä½œæ¥­ã‚’ã—ã¦ã„ã¾ã™ã€‚</p><h3 id="Berglasã¨ã¯ï¼Ÿ"><a href="#Berglasã¨ã¯ï¼Ÿ" class="headerlink" title="Berglasã¨ã¯ï¼Ÿ"></a>Berglasã¨ã¯ï¼Ÿ</h3><p><a href="https://github.com/GoogleCloudPlatform/berglas" target="_blank" rel="noopener">Githubãƒšãƒ¼ã‚¸</a>ã§ã“ã®ãƒ„ãƒ¼ãƒ«ã«ã¤ã„ã¦ç¢ºèªã—ã¾ã™ã€‚</p><blockquote><p>Berglasã¯ã€Google Cloudã§ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’ä¿å­˜ãŠã‚ˆã³å–å¾—ã™ã‚‹ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ãŠã‚ˆã³ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã¯Cloud KMSã§æš—å·åŒ–ã•ã‚Œã€Cloud Storageã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚ Secret Managerã«ã¯ç›¸äº’é‹ç”¨å¯èƒ½ãªãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚‚ã‚ã‚Šã¾ã™ã€‚</p><ul><li>CLIã¨ã—ã¦ï¼šBerglasã¯ã€Google Cloudã§ã®ãƒ‡ãƒ¼ã‚¿ã®æš—å·åŒ–ã€å¾©å·åŒ–ã€ä¿å­˜ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’è‡ªå‹•åŒ–ã—ã¾ã™ã€‚</li><li>ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦ï¼šBerglasã¯ã•ã¾ã–ã¾ãªGoogle Cloudãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã¸ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®çµ„ã¿è¾¼ã¿ã‚’è‡ªå‹•åŒ–ã—ã¾ã™</li></ul><p>Berglasã¯ã€å…¬å¼ã«ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹Googleè£½å“ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p></blockquote><p>ãªã‚‹ã»ã©ã€‚GCPã®ãƒªãƒã‚¸ãƒˆãƒªã§é–‹ç™ºã•ã‚Œã¦ã‚‹ã®ã«å…¬å¼è£½å“ã§ã¯ãªã„ã®ã­ã€‚CLIã¨ã—ã¦ã‚‚ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦ã‚‚åˆ©ç”¨å¯èƒ½ã¨ã„ã†ã¨ã“ã‚ãŒã‚¤ã‚±ã¦ã¾ã™ã­ã€‚</p><h3 id="Berglasã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæ­£ç¢ºã«ã¯ãƒã‚¤ãƒŠãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼‰"><a href="#Berglasã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæ­£ç¢ºã«ã¯ãƒã‚¤ãƒŠãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼‰" class="headerlink" title="Berglasã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæ­£ç¢ºã«ã¯ãƒã‚¤ãƒŠãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼‰"></a>Berglasã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæ­£ç¢ºã«ã¯ãƒã‚¤ãƒŠãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼‰</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> wget https://storage.googleapis.com/berglas/master/linux_amd64/berglas</span><br><span class="line"><span class="meta">$</span> chmod +x berglas</span><br></pre></td></tr></table></figure><p>Dockerã‚³ãƒ³ãƒ†ãƒŠã‚‚ã‚ã‚‹ã‚ˆã†ãªã®ã§ã€å¥½ã¿ã«å¿œã˜ã¦ä½¿ã„åˆ†ã‘ãã ã•ã„ã€‚</p><h3 id="ç’°å¢ƒå¤‰æ•°ã®æº–å‚™ã¨ä¾å­˜ã—ã¦ã‚‹APIã®æœ‰åŠ¹åŒ–"><a href="#ç’°å¢ƒå¤‰æ•°ã®æº–å‚™ã¨ä¾å­˜ã—ã¦ã‚‹APIã®æœ‰åŠ¹åŒ–" class="headerlink" title="ç’°å¢ƒå¤‰æ•°ã®æº–å‚™ã¨ä¾å­˜ã—ã¦ã‚‹APIã®æœ‰åŠ¹åŒ–"></a>ç’°å¢ƒå¤‰æ•°ã®æº–å‚™ã¨ä¾å­˜ã—ã¦ã‚‹APIã®æœ‰åŠ¹åŒ–</h3><p>ã‚µã‚¯ãƒƒã¨è¨­å®šã—ã¾ã—ã‚‡ã†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç’°å¢ƒå¤‰æ•°ã®è¨­å®š</span></span><br><span class="line">$ <span class="built_in">export</span> PROJECT_ID=my-secret-project</span><br><span class="line">$ <span class="built_in">export</span> BUCKET_ID=my-secrets-bucket-123</span><br><span class="line"></span><br><span class="line"><span class="comment"># APIã®æœ‰åŠ¹åŒ–</span></span><br><span class="line">$ gcloud services <span class="built_in">enable</span> --project <span class="variable">$&#123;PROJECT_ID&#125;</span> \</span><br><span class="line">  cloudkms.googleapis.com \</span><br><span class="line">  storage-api.googleapis.com \</span><br><span class="line">  storage-component.googleapis.com</span><br></pre></td></tr></table></figure><h3 id="Berglasç’°å¢ƒã®Bootstrap"><a href="#Berglasç’°å¢ƒã®Bootstrap" class="headerlink" title="Berglasç’°å¢ƒã®Bootstrap"></a>Berglasç’°å¢ƒã®Bootstrap</h3><p>æ¬¡ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’ä¿å­˜ã™ã‚‹ãŸã‚ã®æ–°ã—ã„Cloud Storageãƒã‚±ãƒƒãƒˆã¨ã€ãƒ‡ãƒ¼ã‚¿ã‚’æš—å·åŒ–ã™ã‚‹ãŸã‚ã®Cloud KMSã‚­ãƒ¼ãŒè‡ªå‹•çš„ã«ä½œæˆã•ã‚Œã¾ã™ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> berglas bootstrap --project <span class="variable">$PROJECT_ID</span> --bucket <span class="variable">$BUCKET_ID</span></span></span><br></pre></td></tr></table></figure><p>æˆåŠŸã™ã‚‹ã¨ä¸‹è¨˜ã®ã‚ˆã†ãªå‡ºåŠ›ãŒç¢ºèªã§ãã¾ã™ï¼æœ€è¿‘ã®CLIãƒ„ãƒ¼ãƒ«ã£ã¦ã“ã‚Œã§ã‚‚ã‹ã£ã¦ãã‚‰ã„å„ªã—ãã§ãã¦ã„ã¾ã™ã‚ˆã­ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Successfully created berglas environment:</span><br><span class="line"></span><br><span class="line">  Bucket: my-secrets-bucket-123</span><br><span class="line">  KMS key: projects/my-secret-project/locations/global/keyRings/berglas/cryptoKeys/berglas-key</span><br><span class="line"></span><br><span class="line">To create a secret:</span><br><span class="line"></span><br><span class="line">  berglas create my-secrets-bucket-123/my-secret abcd1234 \</span><br><span class="line">    --key projects/my-secret-project/locations/global/keyRings/berglas/cryptoKeys/berglas-key</span><br><span class="line"></span><br><span class="line">To grant access to that secret:</span><br><span class="line"></span><br><span class="line">  berglas grant my-secrets-bucket-123/my-secret \</span><br><span class="line">    --member user:jane.doe@mycompany.com</span><br><span class="line"></span><br><span class="line">For more help and examples, please run &quot;berglas -h&quot;.</span><br></pre></td></tr></table></figure><h3 id="ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®ä½œæˆ"><a href="#ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®ä½œæˆ" class="headerlink" title="ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®ä½œæˆ"></a>ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®ä½œæˆ</h3><p>ã‚µãƒ³ãƒ—ãƒ«ã‚±ãƒ¼ã‚¹ã¨ã—ã¦ã€<a href="http://httpbin.org/" target="_blank" rel="noopener">httpbin</a>ã®Basicèªè¨¼APIã¸ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æŠ•ã’ <code>200 OK</code> ã™ã‚‹ã®Cloud Functionsã‚’ä½œã‚Šã¾ã™ã€‚</p><p><a href="http://httpbin.org/" target="_blank" rel="noopener">httpbin</a>ã®Basicèªè¨¼ã¯æ¬¡ã®ã‚ˆã†ãªãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™ãƒ¢ãƒƒã‚¯ã‚µãƒ¼ãƒã§ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># èªè¨¼æƒ…å ±ãªã—ã ã¨401ã‚’è¿”ã™</span></span><br><span class="line">$ curl -i -G <span class="string">"https://httpbin.org/basic-auth/basic-user-name/basic-user-pass"</span></span><br><span class="line">HTTP/2 401</span><br><span class="line">date: Tue, 11 Feb 2020 10:43:43 GMT</span><br><span class="line">content-length: 0</span><br><span class="line">server: gunicorn/19.9.0</span><br><span class="line">www-authenticate: Basic realm=<span class="string">"Fake Realm"</span></span><br><span class="line">access-control-allow-origin: *</span><br><span class="line">access-control-allow-credentials: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># èªè¨¼æƒ…å ±ã‚’ä»˜ã‘ã¦é€ã‚‹ã¨ã¡ã‚ƒã‚“ã¨200ã‚’è¿”ã™</span></span><br><span class="line">$ curl -i -G -u basic-user-name <span class="string">"https://httpbin.org/basic-auth/basic-user-name/basic-user-pass"</span></span><br><span class="line">Enter host password <span class="keyword">for</span> user <span class="string">'basic-user-name'</span>:</span><br><span class="line">HTTP/2 200</span><br><span class="line">date: Tue, 11 Feb 2020 10:45:16 GMT</span><br><span class="line">content-type: application/json</span><br><span class="line">content-length: 58</span><br><span class="line">server: gunicorn/19.9.0</span><br><span class="line">access-control-allow-origin: *</span><br><span class="line">access-control-allow-credentials: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"authenticated"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">"user"</span>: <span class="string">"basic-user-name"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã¨ã„ã†ã“ã¨ã§ã€ãƒ¦ãƒ¼ã‚¶åãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’èªè¨¼æƒ…å ±ã¨ã—ã¦ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã«ã—ã¦ã„ãã¾ã—ã‚‡ã†ï¼</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> berglas create <span class="variable">$&#123;BUCKET_ID&#125;</span>/api-user basic-user-name \</span></span><br><span class="line">  --key projects/$&#123;PROJECT_ID&#125;/locations/global/keyRings/berglas/cryptoKeys/berglas-key</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> berglas create <span class="variable">$&#123;BUCKET_ID&#125;</span>/api-pass basic-user-pass \</span></span><br><span class="line">  --key projects/$&#123;PROJECT_ID&#125;/locations/global/keyRings/berglas/cryptoKeys/berglas-key</span><br></pre></td></tr></table></figure><h3 id="æ‰‹é †"><a href="#æ‰‹é †" class="headerlink" title="æ‰‹é †"></a>æ‰‹é †</h3><ul><li>Cloud Functionã¸æ¸¡ã™ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆ</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> gcloud iam service-accounts create berglas-service-account \</span></span><br><span class="line">  --project $&#123;PROJECT_ID&#125; \</span><br><span class="line">  --display-name "berglas Cloud Functions Example"</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">export</span> SA_EMAIL=berglas-service-account@<span class="variable">$&#123;PROJECT_ID&#125;</span>.iam.gserviceaccount.com</span></span><br></pre></td></tr></table></figure><h4 id="Berglasã‹ã‚‰å…ˆã»ã©ä½œã£ãŸã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¸ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã‚’æ¸¡ã™"><a href="#Berglasã‹ã‚‰å…ˆã»ã©ä½œã£ãŸã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¸ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã‚’æ¸¡ã™" class="headerlink" title="Berglasã‹ã‚‰å…ˆã»ã©ä½œã£ãŸã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¸ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã‚’æ¸¡ã™"></a>Berglasã‹ã‚‰å…ˆã»ã©ä½œã£ãŸã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¸ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã‚’æ¸¡ã™</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> berglas grant <span class="variable">$&#123;BUCKET_ID&#125;</span>/api-user --member serviceAccount:<span class="variable">$&#123;SA_EMAIL&#125;</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> berglas grant <span class="variable">$&#123;BUCKET_ID&#125;</span>/api-pass --member serviceAccount:<span class="variable">$&#123;SA_EMAIL&#125;</span></span></span><br></pre></td></tr></table></figure><h4 id="Goã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ "><a href="#Goã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ " class="headerlink" title="Goã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ "></a>Goã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ </h4><p>golangã§BASICèªè¨¼ã‚’ã™ã‚‹å ´åˆã¯<a href="https://golang.org/pkg/net/http/#Request.SetBasicAuth" target="_blank" rel="noopener"><code>SetBasicAuth</code></a>ã‚’ä½¿ã„ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fn</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"io/ioutil"</span></span><br><span class="line"><span class="string">"net/http"</span></span><br><span class="line"><span class="string">"os"</span></span><br><span class="line"><span class="string">"log"</span></span><br><span class="line"><span class="string">"time"</span></span><br><span class="line"></span><br><span class="line">_ <span class="string">"github.com/GoogleCloudPlatform/berglas/pkg/auto"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">readBody</span><span class="params">(res *http.Response)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">    data, err := ioutil.ReadAll(res.Body)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        log.Fatal(err)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* dataã¯byteå‹ãªã®ã§ã€stringå‹ã« */</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">string</span>(data)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">F</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">fmt.Fprintf(w, <span class="string">"--- ENV VAR FROM BERGLAS ---\n"</span>)</span><br><span class="line">fmt.Fprintf(w, <span class="string">"API_USER: %s\n"</span>, os.Getenv(<span class="string">"API_USER"</span>))</span><br><span class="line">fmt.Fprintf(w, <span class="string">"API_PASS: %s\n"</span>, os.Getenv(<span class="string">"API_PASS"</span>))</span><br><span class="line"></span><br><span class="line">    client := &amp;http.Client&#123;Timeout: time.Duration(<span class="number">3</span>) * time.Second&#125;</span><br><span class="line"></span><br><span class="line">    req, _ := http.NewRequest(<span class="string">"GET"</span>, <span class="string">"https://httpbin.org/basic-auth/basic-user-name/basic-user-pass"</span>, <span class="literal">nil</span>)</span><br><span class="line">    req.SetBasicAuth(os.Getenv(<span class="string">"API_USER"</span>), os.Getenv(<span class="string">"API_PASS"</span>))</span><br><span class="line">    res, err := client.Do(req)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        log.Fatal(err)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">defer</span> res.Body.Close()</span><br><span class="line"></span><br><span class="line">fmt.Fprintf(w, <span class="string">"--- HTTPBIN RESPONSE ---\n"</span>)</span><br><span class="line">fmt.Fprintf(w, readBody(res))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ãƒ‡ãƒ—ãƒ­ã‚¤"><a href="#ãƒ‡ãƒ—ãƒ­ã‚¤" class="headerlink" title="ãƒ‡ãƒ—ãƒ­ã‚¤"></a>ãƒ‡ãƒ—ãƒ­ã‚¤</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> gcloud <span class="built_in">functions</span> deploy berglas-example-go \</span></span><br><span class="line">  --project $&#123;PROJECT_ID&#125; \</span><br><span class="line">  --region us-central1 \</span><br><span class="line">  --runtime go113 \</span><br><span class="line">  --memory 1G \</span><br><span class="line">  --max-instances 10 \</span><br><span class="line">  --service-account $&#123;SA_EMAIL&#125; \</span><br><span class="line">  --set-env-vars "API_USER=berglas://$&#123;BUCKET_ID&#125;/api-user,API_PASS=berglas://$&#123;BUCKET_ID&#125;/api-pass" \</span><br><span class="line">  --entry-point F \</span><br><span class="line">  --trigger-http \</span><br><span class="line">  --allow-unauthenticated</span><br></pre></td></tr></table></figure><h4 id="ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ"><a href="#ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ" class="headerlink" title="ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ"></a>ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</h4><p>ã¡ã‚ƒã‚“ã¨Berglasã§ä½œæˆã—ãŸã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãŒå–å¾—ã§ãã¾ã—ãŸã­ï¼<br>å‰²ã¨é“ã®ã‚ŠãŒé•·ã„ã§ã™ãŒã€GCPã®ã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰ç°¡å˜ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã®ã¯æ°—æŒã¡ãŒè‰¯ã„ã§ã™ã­ã€‚<br><img src="/images/20200212/photo_20200212_01.png" class="img-small-size"></p><h2 id="Secret-Managerã‚’åˆ©ç”¨"><a href="#Secret-Managerã‚’åˆ©ç”¨" class="headerlink" title="Secret Managerã‚’åˆ©ç”¨"></a>Secret Managerã‚’åˆ©ç”¨</h2><p>æŠ˜ã‚Šè¿”ã—ã§ã™ã€‚ã‚‚ã†ã—ã°ã—ãŠä»˜ãåˆã„ãã ã•ã„ã€‚</p><h3 id="Secret-Manageã¨ã¯ï¼Ÿ"><a href="#Secret-Manageã¨ã¯ï¼Ÿ" class="headerlink" title="Secret Manageã¨ã¯ï¼Ÿ"></a>Secret Manageã¨ã¯ï¼Ÿ</h3><blockquote><p>ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¬ãƒ™ãƒ«ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’æš—å·åŒ–ã€ä¿å­˜ã€ç®¡ç†ã€ç›£æŸ»ã—ã¾ã™ã€‚<br><a href="https://cloud.google.com/solutions/secrets-management/" target="_blank" rel="noopener">https://cloud.google.com/solutions/secrets-management/</a></p></blockquote><p>ç°¡æ½”ã§ã™ã­ã€‚CloudKMSã¯GCPã®ç®¡ç†ã™ã‚‹ã‚«ã‚®ã§æš—å·åŒ–ã€å¾©å·ãªã©ã‚’ã‚µãƒãƒ¼ãƒˆã—ãŸã‚µãƒ¼ãƒ“ã‚¹ã§ã™ãŒã€ã‚‚ã†ä¸€æšãƒ¬ã‚¤ãƒ¤ãŒä¸Šãªã‚µãƒ¼ãƒ“ã‚¹ã®ã‚ˆã†ã§ã™ã€‚Berglasã®GUIç‰ˆãã‚‰ã„ã®æ°—æŒã¡ã§ã„ã‚‹ã¨è‰¯ã„ã¨ãŠæ€ã„ã¾ã™ã€‚</p><h3 id="Secret-Managerç”»é¢"><a href="#Secret-Managerç”»é¢" class="headerlink" title="Secret Managerç”»é¢"></a>Secret Managerç”»é¢</h3><p>GUIç”»é¢ã¸ã¯<code>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ -&gt; ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼</code>ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚</p><p>ä½œæˆç”»é¢ã¯ã‹ãªã‚Šç°¡æ½”ã§å¥½æ„Ÿåº¦ãŒé«˜ã„ã§ã™ã€‚ã“ã®æ‰‹ã®ã‚µãƒ¼ãƒ“ã‚¹ã¯ã‚„ãŸã‚‰ã¨å…¥åŠ›é …ç›®ãŒå¤šãã¦åˆè¦‹æ®ºã—ãªã‚¤ãƒ¡ãƒ¼ã‚¸ï¼ˆå‹æ‰‹ï¼‰ãŒã‚ã£ãŸã®ã§ã€‚</p><img src="/images/20200212/photo_20200212_02.png" class="img-small-size" style="border:solid 1px #000000"><p>ãƒ©ãƒ™ãƒ«ã§æ•´ç†ãŒã§ãã‚‹ã®ã‚‚ç‰‡ã¥ã‘ãŒè‹¦æ‰‹ãªç§ã«ã´ã£ãŸã‚Šã§ã™ã€‚ï¼ˆä»Šå›ã¯ã¤ã‘ã¦ã„ãªã„ã§ã™ãŒã€‚ã€‚ã€‚ï¼‰</p><p>æœ‰åŠ¹åŒ–ã€ç„¡åŠ¹åŒ–ã€ç ´æ£„ã‚‚éå¸¸ã«å®¹æ˜“ã«ã§ãã¾ã™ã€‚æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’é¸æŠã™ã‚‹ã“ã¨ã§ã€ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®ä¸­èº«ã®æ›´æ–°ã¨éå»ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’ä¸€æ‹¬ç„¡åŠ¹ã«ã§ãã¾ã™ã€‚</p><img src="/images/20200212/photo_20200212_03.png" class="img-middle-size" style="border:solid 1px #000000"><img src="/images/20200212/photo_20200212_04.png" class="img-middle-size" style="border:solid 1px #000000"><h3 id="Berglasã§ç™»éŒ²ã—ãŸã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’Secret-Managerã«ç§»ã™"><a href="#Berglasã§ç™»éŒ²ã—ãŸã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’Secret-Managerã«ç§»ã™" class="headerlink" title="Berglasã§ç™»éŒ²ã—ãŸã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’Secret Managerã«ç§»ã™"></a>Berglasã§ç™»éŒ²ã—ãŸã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’Secret Managerã«ç§»ã™</h3><p>ä½•ã‚„ã‚‰Berglasã¨é€£æºã‚‚ã§ãã‚‹ã‚ˆã†ãªã®ã§ã€ã¡ã‚‡ã“ã£ã¨è§¦ã£ã¦ã¿ã¾ã™ã€‚</p><ul><li>Berglasã‹ã‚‰Secret Managerã®ã‚­ãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> berglas access sm://<span class="variable">$&#123;PROJECT_ID&#125;</span>/the-first-secret</span></span><br><span class="line">sugoi-secret</span><br></pre></td></tr></table></figure><ul><li>migrate</li></ul><p><a href="https://cloud.google.com/blog/ja/products/identity-security/introducing-google-clouds-secret-manager" target="_blank" rel="noopener">Google Cloud Blog</a>ã«ã€Œ1å›é™ã‚Šã®ã€ã£ã¦æ›¸ã„ã¦ã‚ã‚‹ã®ãŒä¸ç©ï½—</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> berglas migrate <span class="variable">$&#123;BUCKET_ID&#125;</span> --project <span class="variable">$&#123;PROJECT_ID&#125;</span></span></span><br><span class="line">Migrating api-user to projects/my-secret-project/secrets/api-user... done!</span><br><span class="line">Migrating api-pass to projects/my-secret-project/secrets/api-pass... done!</span><br></pre></td></tr></table></figure><p>äºŒå›ç›®ã®å®Ÿè¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> berglas migrate <span class="variable">$&#123;BUCKET_ID&#125;</span> --project <span class="variable">$&#123;PROJECT_ID&#125;</span></span></span><br><span class="line">Migrating api-user to projects/my-secret-project/secrets/api-user... done!</span><br><span class="line">Migrating api-pass to projects/my-secret-project/secrets/api-pass... done!</span><br></pre></td></tr></table></figure><p>é€šã‚Šã¾ã—ãŸã€‚</p><ul><li>ç”»é¢</li></ul><p>ã‚¤ã‚±ã¦ã¾ã™ã­ï¼å½“ç„¶ã§ã™ãŒã€æœ€çµ‚æ›´æ–°æ—¥ã¯UPLOADã—ãŸæ™‚é–“ã«ãªã‚Šã¾ã™ã€‚</p><img src="/images/20200212/photo_20200212_05.png" class="img-middle-size" style="border:solid 1px #000000"><h3 id="Cloud-Functionã‹ã‚‰Secret-Managerã‚’ä½¿ã†"><a href="#Cloud-Functionã‹ã‚‰Secret-Managerã‚’ä½¿ã†" class="headerlink" title="Cloud Functionã‹ã‚‰Secret Managerã‚’ä½¿ã†"></a>Cloud Functionã‹ã‚‰Secret Managerã‚’ä½¿ã†</h3><p>æµã‚Œã¨ã—ã¦ã¯ã€éå¸¸ã«ç°¡å˜ã§ã™ã€‚</p><ol><li>ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¢ã‚¯ã‚»ã‚µå½¹å‰²ã‚’Cloud Functionã®ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«å‰²ã‚Šå½“ã¦</li><li>åˆ©ç”¨</li></ol><h4 id="ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¸å½¹å‰²ã‚’å‰²ã‚Šå½“ã¦"><a href="#ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¸å½¹å‰²ã‚’å‰²ã‚Šå½“ã¦" class="headerlink" title="ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¸å½¹å‰²ã‚’å‰²ã‚Šå½“ã¦"></a>ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¸å½¹å‰²ã‚’å‰²ã‚Šå½“ã¦</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gcloud beta secrets add-iam-policy-binding the-first-secret \</span><br><span class="line">    --role roles/secretmanager.secretAccessor \</span><br><span class="line">    --member serviceAccount:<span class="variable">$&#123;PROJECT_ID&#125;</span>@appspot.gserviceaccount.com</span><br></pre></td></tr></table></figure><h4 id="ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚°ãƒ©ãƒ "><a href="#ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚°ãƒ©ãƒ " class="headerlink" title="ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚°ãƒ©ãƒ "></a>ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚°ãƒ©ãƒ </h4><p>ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’åãå‡ºã™ã®ã¿ã¨ã„ã†ã‚·ãƒ³ãƒ—ãƒ«ãªã‚³ãƒ¼ãƒ‰ã§ã™ã€‚Berglasã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯googlecloudãŒãƒ¡ãƒ³ãƒ†ã—ã¦ã„ã‚‹ã®ãŒGoã ã‘ã§ã—ãŸãŒã€ä»Šå›ã¯Pythonãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã‚ã£ãŸã®ã§Pythonã§æ›¸ãã¾ã™ã€‚</p><figure class="highlight python"><figcaption><span>main.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> google.cloud <span class="keyword">import</span> secretmanager</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_secret</span><span class="params">(request)</span>:</span></span><br><span class="line">    client = secretmanager.SecretManagerServiceClient()</span><br><span class="line">    secret_name = <span class="string">'the-first-secret'</span></span><br><span class="line">    project_id = os.getenv(<span class="string">'GCP_PROJECT'</span>)</span><br><span class="line">    resource_name = <span class="string">'projects/&#123;&#125;/secrets/&#123;&#125;/versions/latest'</span>.format(project_id, secret_name)</span><br><span class="line">    res = client.access_secret_version(resource_name)</span><br><span class="line">    secret_string = res.payload.data.decode(<span class="string">'utf-8'</span>)</span><br><span class="line">    <span class="keyword">return</span> secret_string</span><br></pre></td></tr></table></figure><p>ãƒ©ã‚¤ãƒ–ãƒ©ãƒª<code>google-cloud-secret-manager</code>ãŒå¿…è¦ãªã®ã§ã€<code>requirements.txt</code>ã‚‚ä½œæˆã—ã¾ã—ã‚‡ã†ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">google-cloud-secret-manager==0.1.1</span><br></pre></td></tr></table></figure><h4 id="ãƒ‡ãƒ—ãƒ­ã‚¤-1"><a href="#ãƒ‡ãƒ—ãƒ­ã‚¤-1" class="headerlink" title="ãƒ‡ãƒ—ãƒ­ã‚¤"></a>ãƒ‡ãƒ—ãƒ­ã‚¤</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> gcloud <span class="built_in">functions</span> deploy print_secret \</span></span><br><span class="line">  --runtime python37 \</span><br><span class="line">  --trigger-http \</span><br><span class="line">  --allow-unauthenticated</span><br></pre></td></tr></table></figure><img src="/images/20200212/photo_20200212_06.png"><p>â€¦ãƒ‹ãƒƒã‚³ãƒªğŸ˜„</p><h2 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h2><p>ä½¿ã„æ–¹ã«ã¡ã‚‡ã„ã¨ã‚¯ã‚»ã¨ã„ã†ã‹ã€ãŠä½œæ³•ãŒã‚ã‚‹ã®ã§ã€ç¿’ã†ã‚ˆã‚Šæ…£ã‚Œã‚ã‚·ãƒªãƒ¼ã‚ºã ã¨æ€ã„ã¾ã™ã€‚<br>ã“ã‚Œã§ã‚‚ã†ã€ã‚«ã‚®ã®ç®¡ç†ã«å›°ã‚‹ã“ã¨ã¯ãªããªã£ã¦ã€å¹¸ã›ãªä¸–ç•ŒãŒå¾…ã£ã¦ã„ã‚‹ã“ã¨ã§ã—ã‚‡ã†ã€‚<br>ã”èˆˆå‘³ã®ã‚ã‚‹æ–¹ã¯ã€ãœã²è§¦ã£ã¦ã¿ã¦ã¯ã„ã‹ãŒã§ã—ã‚‡ã†ã‹ã€‚</p><h2 id="é–¢é€£ãƒªãƒ³ã‚¯"><a href="#é–¢é€£ãƒªãƒ³ã‚¯" class="headerlink" title="é–¢é€£ãƒªãƒ³ã‚¯"></a>é–¢é€£ãƒªãƒ³ã‚¯</h2><ul><li><a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCPé€£è¼‰ä¼ç”»</a></li><li><a href="https://future-architect.github.io/tags/GoCDK/">Go Cloudé€£è¼‰</a></li><li><a href="https://future-architect.github.io/articles/20190909/">Letâ€™s Try GCP #1 ï½Cloud Run Buttonã‚’ä½¿ã£ãŸæ¥½ã€…ã‚³ãƒ³ãƒ†ãƒŠãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ã‚„ã£ã¦ã¿ãŸï½</a></li><li><a href="https://future-architect.github.io/articles/20190927/">Letâ€™s Try GCP #2 ï½Cloud Functionã‚’VPC connectorã¨ä¸€ç·’ã«ä½¿ã£ã¦ã¿ã‚‹ï½</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰æ›¸ã&quot;&gt;&lt;a href=&quot;#å‰æ›¸ã&quot; class=&quot;headerlink&quot; title=&quot;å‰æ›¸ã&quot;&gt;&lt;/a&gt;å‰æ›¸ã&lt;/h2&gt;&lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€TIGæ‰€å±ã‚¤ãƒ³ãƒ•ãƒ©ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®å¸‚å·ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;çªç„¶ã§ã™ãŒã€æ™®æ®µç”Ÿæ´»ã™ã‚‹ã†ãˆã§ã‚«ã‚®ğŸ”‘ã‚’ãªãã—ãŸã€å¿˜ã‚ŒãŸã“ã¨ã¯ãª
      
    
    </summary>
    
      <category term="Infrastructure" scheme="https://future-architect.github.io/categories/Infrastructure/"/>
    
    
      <category term="Python" scheme="https://future-architect.github.io/tags/Python/"/>
    
      <category term="GCP" scheme="https://future-architect.github.io/tags/GCP/"/>
    
      <category term="Go" scheme="https://future-architect.github.io/tags/Go/"/>
    
      <category term="GCPé€£è¼‰" scheme="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/"/>
    
  </entry>
  
  <entry>
    <title>GCPé€£è¼‰#4 Cloud Life Sciencesã‚’è¦‹ã¦ã¿ãŸ</title>
    <link href="https://future-architect.github.io/articles/20200210/"/>
    <id>https://future-architect.github.io/articles/20200210/</id>
    <published>2020-02-10T02:53:19.000Z</published>
    <updated>2020-02-10T03:14:00.237Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><p>ã“ã‚“ã«ã¡ã¯ã€‚TIG/DXãƒãƒ¼ãƒ ã®<a href="https://twitter.com/kaedemalu" target="_blank" rel="noopener">ä¼Šè—¤</a>ã§ã™ã€‚ä»Šå›ã¯GCPé€£è¼‰ä¼ç”»ã®4æ—¥ç›®ã§ã™ã€‚</p><p>ã“ã‚Œã¾ã§ã®å†…å®¹ã¯<a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCPé€£è¼‰</a>ã«ã‚ã‚Šã¾ã™ã€‚</p><p>ã•ã¦ã€ç§ã¯æ¥­å‹™ã§ã¯GCPã¨Terraformã‚’æ‰±ã£ã¦ã„ã¾ã™ã€‚ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ»ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãªã©ãŒç¾åœ¨ã®æ¥­å‹™é ˜åŸŸã§ã§ã‚ã‚‹ä¸€æ–¹ã§ã€ãƒ“ãƒƒã‚°ãƒ‡ãƒ¼ã‚¿ãƒ»æ©Ÿæ¢°å­¦ç¿’é–¢é€£ã®ã‚µãƒ¼ãƒ“ã‚¹ã¯ã‚ã¾ã‚Šä½¿ã†æ©Ÿä¼šãŒãªãç†è§£ã‚‚ã¾ã ã¾ã ãªéƒ¨åˆ†ãŒå¤šã„ã§ã™ã€‚ä»Šå›ã¯ã€Cloud Life Sciencesã¨ã„ã†ã€ãƒ“ãƒƒã‚°ãƒ‡ãƒ¼ã‚¿ã®ä¸­ã§ã‚‚æ¯›è‰²ã®é•ã†ã‚µãƒ¼ãƒ“ã‚¹ã‚’èª¿ã¹ã¦ã¿ã‚ˆã†ã¨æ€ã„ã“ã®é€£è¼‰ã«å‚åŠ ã—ã¦ãŠã‚Šã¾ã™ã€‚å‰²ã¨èª­ã¿ç‰©ã«è¿‘ããªã£ãŸã®ã§ã•ã‚‰ã£ã¨èª­ã¿æµã—ã¦ã„ãŸã ã‘ã‚Œã°å¹¸ã„ã§ã™ã€‚</p><h2 id="ç§ã®ä»Šã¾ã§"><a href="#ç§ã®ä»Šã¾ã§" class="headerlink" title="ç§ã®ä»Šã¾ã§"></a>ç§ã®ä»Šã¾ã§</h2><p>æœ¬è¨˜äº‹ã‚’æ›¸ããŸã‚ã®ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã—ã¦ã¯æ˜”è©±ã‚’ã™ã“ã—æŒŸã¿ã¾ã™ã€‚ç¾åœ¨ã¯ã‚¤ãƒ³ãƒ•ãƒ©ã‚„ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦æ—¥ã€…åƒã„ã¦ã„ã¾ã™ãŒã€å¤§å­¦æ™‚ä»£ã¯åŒ–å­¦ã‚’å°‚æ”»ã—å¤§å­¦é™¢ã§ã¯æ„ŸæŸ“ç—‡ã‚’å°‚é–€ã«ç ”ç©¶ã—ã¦ã„ã¾ã—ãŸã€‚æœ€çµ‚çš„ã«éºä¼å­ã‚’è§¦ã‚‹ã“ã¨ãªãä¿®äº†ã—ã¾ã—ãŸãŒã€ç”Ÿç‰©ç³»ã«å°‘ã—ã§ã‚‚åœ¨ç±ã—ã¦ã„ãŸã“ã¨ã‚‚ã‚ã‚Šã€ä»Šå›ã¯ã‚ãšã‹ãªè¨˜æ†¶ã‚’é ¼ã‚ŠãªãŒã‚‰èª¿ã¹ã¦ã„ã¾ã™ã€‚ã“ã®è¨˜äº‹ãŒæœ€çµ‚çš„ã«ã‹ã¤ã¦ã®ç ”ç©¶ã®ä½•ã‹ã«ä½¿ãˆãŸã‹ã‚‚ã—ã‚Œãªã„ã¨ç§ã®ä¸­ã§çŸ¥è­˜ãŒè½ã¨ã—è¾¼ã‚ã‚Œã°ã„ã„ãªã¨è€ƒãˆã¦ã„ã¾ã™ã€‚</p><h2 id="Cloud-Life-Sciencesã«ã¤ã„ã¦"><a href="#Cloud-Life-Sciencesã«ã¤ã„ã¦" class="headerlink" title="Cloud Life Sciencesã«ã¤ã„ã¦"></a><a href="https://cloud.google.com/life-sciences" target="_blank" rel="noopener">Cloud Life Sciences</a>ã«ã¤ã„ã¦</h2><img src="/images/20200210/1.png" class="img-very-small-size"><p>GCPã®ä¸­ã§ã¯ãƒ“ãƒƒã‚°ãƒ‡ãƒ¼ã‚¿ã«å±ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã«ãªã‚Šã¾ã™ã€‚å¤§è¦æ¨¡ãªç”Ÿç‰©åŒ»å­¦ãƒ‡ãƒ¼ã‚¿ã®å‡¦ç†ã‚’è²»ç”¨å¯¾åŠ¹æœãŒé«˜ãã§ãã‚‹ã“ã¨ãŒã‚¦ãƒªã§ã€å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯<code>ãƒ©ã‚¤ãƒ• ã‚µã‚¤ã‚¨ãƒ³ã‚¹æ©Ÿé–¢ã¨å­¦è¡“ç ”ç©¶æ©Ÿé–¢å‘ã‘</code>ã¨ãªã£ã¦ã„ã¾ã™ã€‚ç‰¹ã«å¼·ãè¬³ã‚ã‚Œã¦ã„ã‚‹ã®ãŒã€ç ”ç©¶ã«é›†ä¸­ã§ãã‚‹ã“ã¨ã¨çµæœã®å†ç¾æ€§ã«ã§ã™ã€‚éºä¼å­æƒ…å ±ã¯ç‰¹ã«å¤§ããªãƒ‡ãƒ¼ã‚¿é‡ã«ãªã‚‹ã®ã§ã€å¾—ãŸãƒ‡ãƒ¼ã‚¿ã®æ¤œè¨¼ã‚’ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚¢ãƒƒãƒ—ã•ã›ã‚‹ã“ã¨ã¯ç ”ç©¶ã‚¹ãƒ”ãƒ¼ãƒ‰å…¨ä½“ã‚’ä¸Šã’ã‚‹ã“ã¨ã«ã‚‚ç¹‹ãŒã‚Šã¾ã™ã€‚</p><p>ã¾ãŸã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¯ä»¥ä¸‹ã«ãªã£ã¦ãŠã‚Šã€ã‚µãƒ¼ãƒ“ã‚¹å˜ä½“ã¨ã—ã¦ã§ã¯ãªãã€1ã¤ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¨ã—ã¦å‹•ãã‚ˆã†ã§ã™ã€‚<br><img src="/images/20200210/photo_20200210_01.png"><br>(å¼•ç”¨ï¼š<a href="https://cloud.google.com/life-sciences/?hl=ja" target="_blank" rel="noopener">https://cloud.google.com/life-sciences/?hl=ja</a>)</p><h3 id="VCF"><a href="#VCF" class="headerlink" title="VCF"></a>VCF</h3><p>Variant Call Formatã¨è¨€ã‚ã‚Œã‚‹ã€éºä¼å­é…åˆ—ã®å¤‰ç•°ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹ã¨ãã«åˆ©ç”¨ã•ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã«ãªã‚Šã¾ã™ã€‚ãƒ•ã‚¡ã‚¤ãƒ«å†…ã®è¨˜è¼‰å†…å®¹ã¯ä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚</p><ul><li>VCFãƒ˜ãƒƒãƒ€ãƒ¼è¡Œ(1~8è¡Œç›®)</li><li>ãƒ‡ãƒ¼ã‚¿ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆè¡Œ(ã‚«ãƒ©ãƒ ã‚¿ã‚¤ãƒˆãƒ«)<ul><li>æŸ“è‰²ä½“ç•ªå·</li><li>å¡©åŸºã®ä½ç½®</li><li>å¡©åŸº(å¤‰ç•°ç®‡æ‰€)ã®ID</li><li>ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹é…åˆ—ä¸Šã®å¡©åŸº</li><li>ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ãƒ‡ãƒ¼ã‚¿ä¸Šã®å¡©åŸº</li><li>ã‚·ãƒ¼ã‚±ãƒ³ã‚·ãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ã®ã‚¹ã‚³ã‚¢</li><li>ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ¡ä»¶ã®é€šéã®æœ‰ç„¡</li><li>key:dataã®å½¢ã®è¿½åŠ æƒ…å ±</li></ul></li></ul><p>ã“ã®ã‚ˆã†ãªå½¢ã§ã‚·ãƒ¼ã‚±ãƒ³ã‚¹çµæœã‚’è¨˜è¼‰ã—ã¦ã„ã¾ã™ã€‚DNAã®å¡©åŸºé…åˆ—ã«ã¤ã„ã¦ã¯ã‚¢ãƒ‡ãƒ‹ãƒ³(A)ã€ãƒãƒŸãƒ³(T)ã€ã‚°ã‚¢ãƒ‹ãƒ³(G)ã€ã‚·ãƒˆã‚·ãƒ³(C)ã®4ç¨®é¡ãŒã‚ã‚Šã¾ã™ãŒã€ãã‚Œãã‚Œã€A=Tã€Gâ‰¡Cã¨ã—ã¦ãƒšã‚¢ã«ãªã£ã¦ã„ã‚‹ã®ã§ãœã²è©¦ã™ã¨ãã«ã¯æ€ã„å‡ºã—ã¦ã¿ã¦ãã ã•ã„ã€‚ã¾ãŸå¾Œã®ã‚¯ã‚¨ãƒªã«ä½¿ã„ã¾ã™ã€‚</p><h3 id="Variant-Transformsãƒ„ãƒ¼ãƒ«"><a href="#Variant-Transformsãƒ„ãƒ¼ãƒ«" class="headerlink" title="Variant Transformsãƒ„ãƒ¼ãƒ«"></a><a href="https://github.com/googlegenomics/gcp-variant-transforms" target="_blank" rel="noopener">Variant Transforms</a>ãƒ„ãƒ¼ãƒ«</h3><p>ã“ã¡ã‚‰ã®ãƒ„ãƒ¼ãƒ«ã¯GoogleãŒä½œæˆã—ãŸã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã«ãªã‚Šã¾ã™ã€‚å®Ÿéš›ã«BigQueryã«èª­ã¿è¾¼ã¾ã›ã‚‹ãŸã‚ã«ã¯ãƒ‡ãƒ¼ã‚¿ã®åŠ å·¥ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã®ã§ã€ã“ã¡ã‚‰ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦åˆ†æã«æœ€é©ãªå½¢ã§å‡ºåŠ›ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚å®Ÿéš›ã®ãƒ•ãƒ­ãƒ¼ã«ã¯DataflowãŒä½¿ç”¨ã•ã‚Œã¦ãŠã‚Šã€BigQueryã§åˆ†æã™ã‚‹ã¾ã§ã¯ä»¥ä¸‹ã®å›³ã«ãªã‚Šã¾ã™ã€‚</p><h2 id="å®Ÿéš›ã«æµã‚Œã‚’æ´ã‚€"><a href="#å®Ÿéš›ã«æµã‚Œã‚’æ´ã‚€" class="headerlink" title="å®Ÿéš›ã«æµã‚Œã‚’æ´ã‚€"></a>å®Ÿéš›ã«æµã‚Œã‚’æ´ã‚€</h2><p>å®Ÿéš›ã«å…¬é–‹ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä½¿ã£ã¦ãƒãƒªã‚¢ãƒ³ãƒˆã‚’ä½¿ã£ã¦å°‘ã—ã„ã˜ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã“ã“ã¯å®Ÿéš›ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã®ä¸€éƒ¨ã‚’è¡Œãªã£ã¦ã„ã‚‹ã®ã§ã€æœ¬è¨˜äº‹ä»¥å¤–ã®æ–¹æ³•ã‚’è©¦ã—ãŸã„æ–¹ã¯<a href="https://cloud.google.com/life-sciences/docs/how-tos/variant-transforms" target="_blank" rel="noopener">ã“ã¡ã‚‰</a>ã‹ã‚‰ç¢ºèªã—ã¦ãã ã•ã„ã€‚Cloud Consoleã§è¡Œã†ã¨ã‚¯ãƒªãƒ¼ãƒ³ã«é€²ã‚ã‚‰ã‚Œã¾ã™ã€‚</p><h3 id="GCSã‹ã‚‰Variant-Transformsãƒ„ãƒ¼ãƒ«ã‹ã‚‰BigQueryã«é€ã‚‹"><a href="#GCSã‹ã‚‰Variant-Transformsãƒ„ãƒ¼ãƒ«ã‹ã‚‰BigQueryã«é€ã‚‹" class="headerlink" title="GCSã‹ã‚‰Variant Transformsãƒ„ãƒ¼ãƒ«ã‹ã‚‰BigQueryã«é€ã‚‹"></a>GCSã‹ã‚‰Variant Transformsãƒ„ãƒ¼ãƒ«ã‹ã‚‰BigQueryã«é€ã‚‹</h3><p>GCSã«ãƒãƒªã‚¢ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…ç½®ã—ãŸã‚‰å®Ÿéš›ã«ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã„ã¾ã™ã€‚ä½¿ã†ãŸã‚ã«ã¯å…¬å¼ã®Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ãŒã‚ã‚‹ã®ã§ã“ã¡ã‚‰ã‚’è½ã¨ã—ã¦ãã¾ã™ã€‚ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒ2GBè¿‘ãã‚ã‚‹ã®ã§ã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã¯æ°—é•·ã«å¾…ã¡ã¾ã—ã‚‡ã†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker pull gcr.io/cloud-lifesciences/gcp-variant-transforms</span><br></pre></td></tr></table></figure><p>æ¬¡ã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™ã€‚å¤‰æ•°ã¯å®Ÿéš›ã«ä½¿ã£ã¦ã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã€ãƒã‚±ãƒƒãƒˆãªã©ã«ç½®ãæ›ãˆã¦ãã ã•ã„ã€‚</p><figure class="highlight sh"><figcaption><span>script.sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># Parameters to replace:</span></span><br><span class="line"><span class="comment"># The GOOGLE_CLOUD_PROJECT is the project that contains your BigQuery dataset.</span></span><br><span class="line">GOOGLE_CLOUD_PROJECT=GOOGLE_CLOUD_PROJECT</span><br><span class="line">INPUT_PATTERN=gs://BUCKET/*.vcf</span><br><span class="line">OUTPUT_TABLE=GOOGLE_CLOUD_PROJECT:BIGQUERY_DATASET.BIGQUERY_TABLE</span><br><span class="line">TEMP_LOCATION=gs://BUCKET/temp</span><br><span class="line"></span><br><span class="line">COMMAND=<span class="string">"vcf_to_bq \</span></span><br><span class="line"><span class="string">    --input_pattern <span class="variable">$&#123;INPUT_PATTERN&#125;</span> \</span></span><br><span class="line"><span class="string">    --output_table <span class="variable">$&#123;OUTPUT_TABLE&#125;</span> \</span></span><br><span class="line"><span class="string">    --temp_location <span class="variable">$&#123;TEMP_LOCATION&#125;</span> \</span></span><br><span class="line"><span class="string">    --job_name vcf-to-bigquery \</span></span><br><span class="line"><span class="string">    --runner DataflowRunner"</span></span><br><span class="line">docker run -v ~/.config:/root/.config \</span><br><span class="line">    gcr.io/cloud-lifesciences/gcp-variant-transforms \</span><br><span class="line">    --project <span class="string">"<span class="variable">$&#123;GOOGLE_CLOUD_PROJECT&#125;</span>"</span> \</span><br><span class="line">    --zones us-west1-b \</span><br><span class="line">    <span class="string">"<span class="variable">$&#123;COMMAND&#125;</span>"</span></span><br></pre></td></tr></table></figure><p>ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œå¾Œã¯æ™‚é–“ãŒã‹ã‹ã‚‹ã‚ˆã†ãªã®ã§ã€ã“ã‚Œã‚‚æ°—é•·ã«å¾…ã¡ã¾ã™ã€‚<br>å®Ÿè¡ŒãŒçµ‚ã‚ã£ãŸã‚‰<code>bq</code>ã‚³ãƒãƒ³ãƒ‰ã§ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆãŒã‚ã‚‹ã‹ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bq ls --format=pretty GOOGLE_CLOUD_PROJECT:BIGQUERY_DATASET</span><br></pre></td></tr></table></figure><p>ã“ã‚Œã§Variant Transformãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’BigQueryã«é©ã—ãŸå½¢ã«ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã—ãŸã€‚</p><h3 id="BigQueryã«èª­ã¿è¾¼ã¾ã›ã‚‹"><a href="#BigQueryã«èª­ã¿è¾¼ã¾ã›ã‚‹" class="headerlink" title="BigQueryã«èª­ã¿è¾¼ã¾ã›ã‚‹"></a>BigQueryã«èª­ã¿è¾¼ã¾ã›ã‚‹</h3><p>ã“ã¡ã‚‰ã§ã¯å…¬é–‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦ãƒãƒªã‚¢ãƒ³ãƒˆã®åˆ†æã‚’è¡Œã„ã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨ã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯<a href="https://www.illumina.com/platinumgenomes.html" target="_blank" rel="noopener">Illumina Platinum Genomes</a>ã€ãƒ†ãƒ¼ãƒ–ãƒ«åã¯<code>platinum_genomes_deepvariant_variants_20180823</code>ã«ãªã‚Šã¾ã™ã€‚å®Ÿéš›ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ï¼•ä»¶å‡ºåŠ›ã—ã¾ã—ãŸã€‚<br><img src="/images/20200210/photo_20200210_02.png"></p><p>å®Ÿéš›ã«æµã™ã‚¯ã‚¨ãƒªã¯ä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">WITH</span> filtered_snp_calls <span class="keyword">AS</span> (</span><br><span class="line">   <span class="keyword">SELECT</span></span><br><span class="line">     reference_name,</span><br><span class="line">     c.name,</span><br><span class="line">     <span class="keyword">CONCAT</span>(reference_bases, <span class="string">'-&gt;'</span>, alternate_bases[ORDINAL(<span class="number">1</span>)].alt) <span class="keyword">AS</span> mutation</span><br><span class="line">   <span class="keyword">FROM</span></span><br><span class="line">     <span class="string">`bigquery-public-data.human_genome_variants.platinum_genomes_deepvariant_variants_20180823`</span> <span class="keyword">AS</span> v, <span class="keyword">UNNEST</span>(v.call) <span class="keyword">AS</span> c</span><br><span class="line">   <span class="keyword">WHERE</span></span><br><span class="line">     <span class="comment"># Only include biallelic SNPs.</span></span><br><span class="line">     reference_bases <span class="keyword">IN</span> (<span class="string">'A'</span>,<span class="string">'C'</span>,<span class="string">'G'</span>,<span class="string">'T'</span>)</span><br><span class="line">     <span class="keyword">AND</span> alternate_bases[ORDINAL(<span class="number">1</span>)].alt <span class="keyword">IN</span> (<span class="string">'A'</span>,<span class="string">'C'</span>,<span class="string">'G'</span>,<span class="string">'T'</span>)</span><br><span class="line">     <span class="keyword">AND</span> (ARRAY_LENGTH(alternate_bases) = <span class="number">1</span></span><br><span class="line">       <span class="keyword">OR</span> (ARRAY_LENGTH(alternate_bases) = <span class="number">2</span> <span class="keyword">AND</span> alternate_bases[ORDINAL(<span class="number">2</span>)].alt = <span class="string">'&lt;*&gt;'</span>))</span><br><span class="line">     <span class="comment"># Skip homozygous reference calls and no-calls.</span></span><br><span class="line">     <span class="keyword">AND</span> <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> g <span class="keyword">FROM</span> <span class="keyword">UNNEST</span>(c.genotype) <span class="keyword">AS</span> g <span class="keyword">WHERE</span> g &gt; <span class="number">0</span>)</span><br><span class="line">     <span class="keyword">AND</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> g <span class="keyword">FROM</span> <span class="keyword">UNNEST</span>(c.genotype) <span class="keyword">AS</span> g <span class="keyword">WHERE</span> g &lt; <span class="number">0</span>)</span><br><span class="line">     <span class="comment"># Include only high quality calls.</span></span><br><span class="line">     <span class="keyword">AND</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> ft <span class="keyword">FROM</span> <span class="keyword">UNNEST</span>(c.filter) ft <span class="keyword">WHERE</span> ft <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="string">'PASS'</span>, <span class="string">'.'</span>))</span><br><span class="line"> ),</span><br><span class="line"></span><br><span class="line"> mutation_type_counts <span class="keyword">AS</span> (</span><br><span class="line">   <span class="keyword">SELECT</span></span><br><span class="line">     reference_name,</span><br><span class="line">     <span class="keyword">name</span>,</span><br><span class="line">     <span class="keyword">SUM</span>(<span class="keyword">CAST</span>(mutation <span class="keyword">IN</span> (<span class="string">'A-&gt;G'</span>, <span class="string">'G-&gt;A'</span>, <span class="string">'C-&gt;T'</span>, <span class="string">'T-&gt;C'</span>) <span class="keyword">AS</span> INT64)) <span class="keyword">AS</span> transitions,</span><br><span class="line">     <span class="keyword">SUM</span>(<span class="keyword">CAST</span>(mutation <span class="keyword">IN</span> (<span class="string">'A-&gt;C'</span>, <span class="string">'C-&gt;A'</span>, <span class="string">'G-&gt;T'</span>, <span class="string">'T-&gt;G'</span>,</span><br><span class="line">                           <span class="string">'A-&gt;T'</span>, <span class="string">'T-&gt;A'</span>, <span class="string">'C-&gt;G'</span>, <span class="string">'G-&gt;C'</span>) <span class="keyword">AS</span> INT64)) <span class="keyword">AS</span> transversions</span><br><span class="line">   <span class="keyword">FROM</span> filtered_snp_calls</span><br><span class="line">   <span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">     reference_name,</span><br><span class="line">     <span class="keyword">name</span></span><br><span class="line"> )</span><br><span class="line"></span><br><span class="line"> <span class="keyword">SELECT</span></span><br><span class="line">   reference_name,</span><br><span class="line">   <span class="keyword">name</span>,</span><br><span class="line">   transitions,</span><br><span class="line">   transversions,</span><br><span class="line">   transitions/transversions <span class="keyword">AS</span> titv</span><br><span class="line"> <span class="keyword">FROM</span> mutation_type_counts</span><br><span class="line"> <span class="keyword">WHERE</span></span><br><span class="line">   transversions &gt; <span class="number">0</span></span><br><span class="line"> <span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">   titv <span class="keyword">DESC</span>,</span><br><span class="line">   <span class="keyword">name</span></span><br></pre></td></tr></table></figure><p><code>mutation_type_counts</code>ã®ã¨ã“ã‚ã§ã€æ­£ç¢ºã«ãƒšã‚¢ã«ãªã£ã¦ã„ã‚‹å¡©åŸºå¯¾(A=Tã€ã‚‚ã—ãã¯Gâ‰¡C)ã«ã¤ã„ã¦ã¯<code>transitions</code>ã€æ­£ã—ã„ãƒšã‚¢ã«ãªã£ã¦ã„ãªã„å¡©åŸºå¯¾ã¯<code>transversions</code>(å¤‰ç•°)ã—ã¦ã„ã‚‹ã‚‚ã®ã‚’ãã‚Œãã‚Œintå‹ã«CASTã—ã¦åˆè¨ˆã‚’å–ã£ã¦ã„ã¾ã™ã€‚ä¸Šè¨˜ã‚¯ã‚¨ãƒªã‚’BigQueryã«æµã™ã¨ä»¥ä¸‹ã®çµæœãŒå‡ºåŠ›ã•ã‚Œã¾ã™(ä¸Šè¨˜10ä»¶)ã€‚</p><table><thead><tr><th>è¡Œ</th><th>referencce_name</th><th>name</th><th>transitions</th><th>transversions</th><th>titv</th></tr></thead><tbody><tr><td>1</td><td>chr22</td><td>NA12892</td><td>35299</td><td>15017</td><td>2.3506026503296265</td></tr><tr><td>2</td><td>chr22</td><td>NA12889</td><td>34091</td><td>14624</td><td>2.331167943107221</td></tr><tr><td>3</td><td>chr17</td><td>NA12892</td><td>67297</td><td>28885</td><td>2.3298251687727194</td></tr><tr><td>4</td><td>chr22</td><td>NA12878</td><td>33627</td><td>14439</td><td>2.3289008934136715</td></tr><tr><td>5</td><td>chr22</td><td>NA12877</td><td>34751</td><td>14956</td><td>2.3235490772933938</td></tr><tr><td>6</td><td>chr22</td><td>NA12891</td><td>33534</td><td>14434</td><td>2.323264514341139</td></tr><tr><td>7</td><td>chr17</td><td>NA12877</td><td>70600</td><td>30404</td><td>2.3220628864623074</td></tr><tr><td>8</td><td>chr17</td><td>NA12878</td><td>66010</td><td>28475</td><td>2.3181738366988585</td></tr><tr><td>9</td><td>chr17</td><td>NA12890</td><td>67242</td><td>29057</td><td>2.314141170802216</td></tr><tr><td>10</td><td>chr17</td><td>NA12889</td><td>69767</td><td>30189</td><td>2.311007320547219</td></tr></tbody></table><p>æœ€çµ‚åˆ—ã®<code>titv</code>ã§ã¯æ­£ã—ã„ãƒšã‚¢ã€ãŠã‚ˆã³å¤‰ç•°ã®å…¥ã£ãŸãƒšã‚¢ã®æ¯”ã‚’ã¨ã£ã¦ã„ã‚‹ã®ã§ã€å„ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã«å¯¾ã—ã¦ã©ã‚Œãã‚‰ã„å¤‰ç•°ã¯å…¥ã£ã¦ã„ã‚‹ã‹ãŒã‚ã‹ã‚Šã¾ã™ã€‚ã“ã“ã§ã¯20 GBã»ã©èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™ãŒã€å®Ÿéš›ã«ã‚¯ã‚¨ãƒªã«ã‹ã‹ã£ãŸæ™‚é–“ã¯1ç§’ã‚’åˆ‡ã£ã¦ã„ã‚‹ã®ã§ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§åŒæ§˜ã®ã‚¯ã‚¨ãƒªå®Ÿè¡Œã™ã‚‹ã‚ˆã‚Šã¯ã¯ã‚‹ã‹ã«æ—©ã„ã§ã—ã‚‡ã†ã€‚</p><h2 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h2><p>æœ¬è¨˜äº‹ã§ã¯ç°¡å˜ã§ã™ãŒã€Cloud Life Sciencesã‚’è§¦ã‚‹è¨˜äº‹ã‚’æ›¸ã„ã¦ãã¾ã—ãŸã€‚ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦åˆ†æã«ä½¿ã†ã‚‚ã®ã¯ã†ã£ã™ã‚‰ç†è§£ã—ã¦ã„ã¦ã‚‚ã€å®Ÿéš›ã«ä½¿ã†ãƒ•ã‚¡ã‚¤ãƒ«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãªã©ã¯çŸ¥è­˜ãŒæ·±ããªã„ã¨ãã‚‚ãã‚‚ä½•ã‚‚ã§ããªã„ãªã¨æ”¹ã‚ã¦æ„Ÿã˜ãŸã¨ã“ã‚ã§ã™ã€‚ä»Šå›ã¯VCFãƒ•ã‚¡ã‚¤ãƒ«ã¨ã„ã†å°‚é–€çš„ãªãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰BigQueryã«æµã™ã¨ã“ã‚ã¾ã§è¡Œã„ã¾ã—ãŸãŒã€Cloud Life Sciencesã¯ã‚‚ã¨ã‚‚ã¨ Google Genomicsã¨ã„ã†ã‚µãƒ¼ãƒ“ã‚¹ã ã£ãŸã‚ˆã†ã§ã€ä»¥å‰ã‚ˆã‚ŠGoogleãŒåŠ›ã‚’å…¥ã‚Œã¦ã„ãŸéƒ¨åˆ†ã®ä¸€ã¤ã§ã‚ã‚‹ã“ã¨ãŒä»Šå›è‰²ã€…èª¿ã¹ã¦ã‚ã‹ã‚Šã¾ã—ãŸã€‚åŒ»ç™‚åˆ†é‡ã¯æ­£ç¢ºã•ã‚’æ±‚ã‚ã‚‰ã‚Œã‚‹ä¸€æ–¹ã§ã€ãã®ãƒ‡ãƒ¼ã‚¿é‡ã¯è†¨å¤§ãªé‡ã«ãªã‚Šã¾ã™ã€‚å¤§å­¦é™¢æ™‚ä»£ã«è‚Œã§æ„Ÿã˜ãŸã“ã¨ã§ã™ãŒã€ãƒ­ãƒ¼ã‚«ãƒ«ã§åˆ†æã—ã¦ã„ã‚‹å…ˆè¼©ãŒã‹ãªã‚Šæ™‚é–“ã‚’ã‹ã‘ã¦ã„ãŸã“ã¨ã‚’æ€ã„å‡ºã—ã¾ã—ãŸã€‚ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ã®çŸ¥ååº¦ãŒä¸ŠãŒã‚‹ã¨ã¨ã‚‚ã«ã€ç ”ç©¶ãƒ¦ãƒ¼ã‚¹ã€éã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã§ã‚‚ä½¿ã„ã‚„ã™ã„ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã«ãªã‚‹ã¨ã‚ˆã‚Šè‰¯ã„ãªã¨æ€ã„ã¾ã—ãŸã€‚</p><p>æ˜æ—¥ã¯ç¥æ—¥ãªã®ã§æ¬¡å›æ›´æ–°ã¯æ°´æ›œæ—¥ã§ã™ã€‚ãŠæ¥½ã—ã¿ã«ï¼</p><h2 id="æœ€å¾Œã«"><a href="#æœ€å¾Œã«" class="headerlink" title="æœ€å¾Œã«"></a>æœ€å¾Œã«</h2><p>å…ˆæ—¥ã€GCPã®Professional Cloud Architectã«åˆæ ¼ã—ã¾ã—ãŸï¼çµæœãŒå‡ºåŠ›ã•ã‚Œã‚‹ç¬é–“ã¯ãªã‹ãªã‹ãƒ‰ã‚­ãƒ‰ã‚­ã§ã—ãŸãŒã€ãªã‚“ã¨ã‹åˆæ ¼ã§ãã¾ã—ãŸã€‚ç§ã‚‚å‚è€ƒã«ã—ã¾ã—ãŸãŒã€æœ¬æŠ€è¡“ãƒ–ãƒ­ã‚°ã§ã‚‚åˆæ ¼ä½“é¨“è¨˜ã‚’å‡ºã—ã¦ãŠã‚Šã¾ã™ã®ã§ã€ãã¡ã‚‰ã‚‚ãœã²ã”è¦§ãã ã•ã„ï¼<br><a href="https://future-architect.github.io/articles/20190530/">ã€åˆæ ¼è¨˜ã€‘GCP Professional Cloud Architectèªå®šè³‡æ ¼ã‚’æŒ¯ã‚Šè¿”ã‚‹</a></p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://bi.biopapyrus.jp/gwas/vcf.html" target="_blank" rel="noopener">VFC ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ç‰¹å¾´ãŠã‚ˆã³ Python ã§ãƒ‘ãƒ¼ã‚¹ã™ã‚‹æ–¹æ³•</a></p><hr><h2 id="é–¢é€£ãƒªãƒ³ã‚¯"><a href="#é–¢é€£ãƒªãƒ³ã‚¯" class="headerlink" title="é–¢é€£ãƒªãƒ³ã‚¯"></a>é–¢é€£ãƒªãƒ³ã‚¯</h2><ul><li><a href="https://future-architect.github.io/articles/20190909/">Letâ€™s Try GCP #1 ï½Cloud Run Buttonã‚’ä½¿ã£ãŸæ¥½ã€…ã‚³ãƒ³ãƒ†ãƒŠãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ã‚„ã£ã¦ã¿ãŸï½</a></li><li><a href="https://future-architect.github.io/articles/20190927/">Letâ€™s Try GCP #2 ï½Cloud Functionã‚’VPC connectorã¨ä¸€ç·’ã«ä½¿ã£ã¦ã¿ã‚‹ï½</a></li><li><a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCPé€£è¼‰ä¼ç”»</a></li><li><a href="https://future-architect.github.io/tags/GoCDK/">Go Cloudé€£è¼‰</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h2&gt;&lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€‚TIG/DXãƒãƒ¼ãƒ ã®&lt;a href=&quot;https://twitter.com/kaedemalu&quot; target
      
    
    </summary>
    
      <category term="Infrastructure" scheme="https://future-architect.github.io/categories/Infrastructure/"/>
    
    
      <category term="GCP" scheme="https://future-architect.github.io/tags/GCP/"/>
    
      <category term="GCPé€£è¼‰" scheme="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/"/>
    
  </entry>
  
</feed>
