<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ€è¡“ãƒ–ãƒ­ã‚°</title>
  
  <subtitle>Future Tech Blog</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://future-architect.github.io/"/>
  <updated>2020-06-03T02:24:10.645Z</updated>
  <id>https://future-architect.github.io/</id>
  
  <author>
    <name>Future Architect Consultants</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>æ˜¥ã®å…¥é–€ç¥­ã‚ŠğŸŒ¸#03 ã‚¼ãƒ­ã‹ã‚‰å§‹ã‚ã‚‹Flutterç”Ÿæ´»</title>
    <link href="https://future-architect.github.io/articles/20200603/"/>
    <id>https://future-architect.github.io/articles/20200603/</id>
    <published>2020-06-03T02:09:41.000Z</published>
    <updated>2020-06-03T02:24:10.645Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>ã“ã‚“ã«ã¡ã¯ã€TIGã®<a href="https://twitter.com/famipapamart" target="_blank" rel="noopener">æ‘ç”°</a>ã§ã™ã€‚<a href="https://future-architect.github.io/articles/20200529/">æ˜¥ã®å…¥é–€ç¥­ã‚ŠğŸŒ¸</a> ç¬¬3å¼¾ã¨ã—ã¦ã€å…¼ã­ã¦ã‚ˆã‚Šæ°—ã«ãªã£ã¦ã„ãŸFlutterã«å…¥é–€ã—ã¦ã¿ãŸè©±ã‚’ãŠå±Šã‘ã—ã¾ã™ã€‚</p><p>æ™®æ®µã¯ã‚¯ãƒ©ã‚¦ãƒ‰ã‚¤ãƒ³ãƒ•ãƒ©å¯„ã‚ŠãªæŠ€è¡“ã‚’è§¦ã£ã¦ã„ã‚‹ã®ã§ã™ãŒã€å®Ÿã¯ç”Ÿã¾ã‚Œã¨è‚²ã¡ã¯ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ç•‘ã§ã€éå»ã«ã¯<a href="https://github.com/future-architect/urushi" target="_blank" rel="noopener">Urushi</a>ã¨ã„ã†å½“ç¤¾è£½ã®OSSé–‹ç™ºã«æºã‚ã£ã¦ã„ã¾ã—ãŸã€‚</p><p>Urushiã«ã¤ã„ã¦ã¯ä»¥ä¸‹ã®ãƒ–ãƒ­ã‚°ã§è©³ç´°ã«èªã‚‰ã‚Œã¦ã„ã¾ã™ã€‚2017å¹´ã®è¨˜äº‹ã§ã™ã­ã€‚æ‡ã‹ã—ã„é™ã‚Šã§ã™ã€‚<br><a href="https://future-architect.github.io/articles/20170605/">ES2015 Web componentsã¨å›½ç”£Web componentsãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯Urushi</a></p><p>æ˜¨ä»Šã®è‡ªç²›ç”Ÿæ´»ã®ä¸­ã§ç§ã®ãƒãƒ¼ãƒ å†…ã§ã‚‚ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã‚‚ãã‚‚ãä¼šï¼ˆç¤¾å†…ã§ã¯é€šç§°ã€Œå¼•ãã“ã‚‚ã‚Šã‚‚ãã‚‚ãã€ï¼‰ãŒæµè¡Œã£ã¦ã„ã‚‹ã®ã§ã™ãŒã€ä¹…ã—ã¶ã‚Šã«ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«è§¦ã‚Œã‚ˆã†ã¨æ€ã„ç«‹ã£ãŸã®ãŒäº‹ã®çµŒç·¯ã§ã™ã€‚</p><h1 id="Flutterã¨ã¯"><a href="#Flutterã¨ã¯" class="headerlink" title="Flutterã¨ã¯"></a>Flutterã¨ã¯</h1><blockquote><p>Flutter is Googleâ€™s UI toolkit for building beautiful, natively compiled applications for mobile, web, and desktop from a single codebase.</p></blockquote><p><a href="https://flutter.dev/" target="_blank" rel="noopener">https://flutter.dev/</a></p><p>Flutterã¯Googleè£½ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œã¯Androidã¨iOSã ã‘ã§ãªãWebã¾ã§è¡Œãå±Šã„ã¦ã„ã¾ã™ãŒã€ã“ã‚Œã¯ReactNativeãªã©ä»–ã®ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ é–‹ç™ºãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã‚‚åŒæ§˜ã§ã™ã­ã€‚</p><p>Flutterã®ç‰¹å¾´ã¯ã€é–‹ç™ºè¨€èªã«<a href="https://dart.dev/" target="_blank" rel="noopener">Dart</a>ã¨ã„ã†è¨€èªã‚’æ¡ç”¨ã—ã¦ã„ã‚‹ç‚¹ã§ã™ã€‚Dartã¯Googleè£½ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªãªã®ã§ã™ãŒã€æ›¸ãå¿ƒåœ°ã¯JavaScriptã«éå¸¸ã«è¿‘ãã€ä¹…ã—ã¶ã‚Šã«JSã‚’å—œã‚“ã ç§ã§ã‚‚ã¨ã£ã¤ãã‚„ã™ã„è¨€èªã§ã—ãŸã€‚</p><h1 id="ã‚„ã‚ŠãŸã„ã“ã¨"><a href="#ã‚„ã‚ŠãŸã„ã“ã¨" class="headerlink" title="ã‚„ã‚ŠãŸã„ã“ã¨"></a>ã‚„ã‚ŠãŸã„ã“ã¨</h1><p>çµ¶è³›ç„¡äººå³¶ç”Ÿæ´»:island:ã‚’æº€å–«ã—ã¦ã„ãŸç§ã¯ã€Flutterã§ã‚‚ãã‚‚ãã™ã‚‹ã«ã‚ãŸã£ã¦ã€ã€Œã‚«ãƒ–ä¾¡ã®æ¨ç§»ã‚’å¯è¦–åŒ–ã™ã‚‹ã€ã¨ã„ã†ã‚´ãƒ¼ãƒ«ã‚’å®šã‚ã¾ã—ãŸã€‚æœ¬è¨˜äº‹ã§ã¯ã‚«ãƒ–ä¾¡ã«ã¤ã„ã¦ã®è©³ç´°ã¯å‰²æ„›ã—ã¾ã™ãŒã€æ ªä¾¡ã®ã‚ˆã†ã«æ™‚ç³»åˆ—ã«åˆã‚ã›ã¦ä¸Šä¸‹ã™ã‚‹å€¤ã®æ¨ç§»ã‚’éŠ˜æŸ„(å³¶)ã”ã¨ã«ã‚°ãƒ©ãƒ•:chart_with_upwards_trend:åŒ–ã—ãŸã„ã€ã¨ã„ã†ã®ãŒç§ã®ã‚„ã‚ŠãŸã‹ã£ãŸã“ã¨ã§ã™ã€‚</p><p>Flutterã¯ä»Šå›Webç‰ˆã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®DBã«ã¤ã„ã¦ã¯ã€Firebaseã§ã†ã¾ããƒ©ã‚¤ãƒˆã«ã‚„ã‚Œãªã„ã‹ãªãƒ¼ç¨‹åº¦ã«è€ƒãˆã¦ã„ã¾ã—ãŸã€‚ï¼ˆæœ€çµ‚çš„ã«Cloud Firestoreã‚’æ¡æŠã—ã¦ã¾ã™ãŒã€ãã‚Œã«ã¤ã„ã¦ã¯å¾Œè¿°ã—ã¾ã™ï¼‰</p><img src="/images/20200603/photo_20200603_01.png"><h1 id="å®Ÿéš›ã«ã‚„ã£ã¦ã¿ã‚‹"><a href="#å®Ÿéš›ã«ã‚„ã£ã¦ã¿ã‚‹" class="headerlink" title="å®Ÿéš›ã«ã‚„ã£ã¦ã¿ã‚‹"></a>å®Ÿéš›ã«ã‚„ã£ã¦ã¿ã‚‹</h1><h2 id="ã¾ãšã¯ç’°å¢ƒæ§‹ç¯‰"><a href="#ã¾ãšã¯ç’°å¢ƒæ§‹ç¯‰" class="headerlink" title="ã¾ãšã¯ç’°å¢ƒæ§‹ç¯‰"></a>ã¾ãšã¯ç’°å¢ƒæ§‹ç¯‰</h2><p>å…ã«ã‚‚è§’ã«ã‚‚ã¾ãšã¯ç’°å¢ƒæ§‹ç¯‰ã‚’ã—ã¦ã„ãã¾ã™ã€‚ç§ã®ç«¯æœ«ã¯MacOSãªã®ã§ã€<a href="https://flutter.dev/docs/get-started/install/macos" target="_blank" rel="noopener">MacOSç”¨ã®æ‰‹é †</a>ã«å¾“ã£ã¦ç’°å¢ƒæ§‹ç¯‰ã‚’é€²ã‚ã¦ã„ãã¾ã™ã€‚ã¡ãªã¿ã«ä»Šå›åˆ©ç”¨ã™ã‚‹ã®ã¯Webç‰ˆãªã®ã§ã€<a href="https://flutter.dev/docs/get-started/web" target="_blank" rel="noopener">Webç‰ˆå‘ã‘ã®æ‰‹é †</a>ã‚‚åˆã‚ã›ã¦å®Ÿæ–½ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p>Flutterã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚Flutter Webã‚’ä½¿ã†ã®ã§Channel betaã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ flutter --version</span><br><span class="line">Flutter 1.17.0 â€¢ channel beta â€¢ https://github.com/flutter/flutter.git</span><br><span class="line">Framework â€¢ revision e6b34c2b5c (4 weeks ago) â€¢ 2020-05-02 11:39:18 -0700</span><br><span class="line">Engine â€¢ revision 540786dd51</span><br><span class="line">Tools â€¢ Dart 2.8.1</span><br></pre></td></tr></table></figure><p>ã•ã¦ã€æ‰‹é †ã«ã¯mockã‚¢ãƒ—ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãã‚Œã‚’å‹•ä½œã™ã‚‹ã¨ã“ã‚ã¾ã§å«ã¾ã‚Œã¦ã„ã¾ã™ã®ã§ã€ã‚„ã£ã¦ã¿ã¾ã—ã‚‡ã†ï¼</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">$ flutter create myapp</span><br><span class="line">Creating project myapp...                                          </span><br><span class="line">ãƒ»</span><br><span class="line">ãƒ»</span><br><span class="line">(ä¸­ç•¥)</span><br><span class="line">ãƒ»</span><br><span class="line">ãƒ»</span><br><span class="line">Running <span class="string">"flutter pub get"</span> <span class="keyword">in</span> myapp...                               1.9s</span><br><span class="line">Wrote 77 files.</span><br><span class="line"></span><br><span class="line">All <span class="keyword">done</span>!</span><br><span class="line">[âœ“] Flutter: is fully installed. (Channel beta, v1.17.0, on Mac OS X 10.14.6 18G4032, locale ja-JP)</span><br><span class="line">[!] Android toolchain - develop <span class="keyword">for</span> Android devices: is partially installed; more components are available. (Android SDK version 28.0.3)</span><br><span class="line">[âœ—] Xcode - develop <span class="keyword">for</span> iOS and macOS: is not installed.</span><br><span class="line">[âœ“] Chrome - develop <span class="keyword">for</span> the web: is fully installed.</span><br><span class="line">[!] Android Studio: is partially installed; more components are available. (version 3.4)</span><br><span class="line">[âœ“] VS Code: is fully installed. (version 1.45.1)</span><br><span class="line">[âœ“] Connected device: is fully installed. (2 available)</span><br><span class="line"></span><br><span class="line">Run <span class="string">"flutter doctor"</span> <span class="keyword">for</span> information about installing additional components.</span><br><span class="line"></span><br><span class="line">In order to run your application, <span class="built_in">type</span>:</span><br><span class="line"></span><br><span class="line">  $ <span class="built_in">cd</span> myapp</span><br><span class="line">  $ flutter run</span><br><span class="line"></span><br><span class="line">Your application code is <span class="keyword">in</span> myapp/lib/main.dart.</span><br></pre></td></tr></table></figure><p>ã“ã‚Œã§å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ç¾¤ãŒ <code>myapp</code> é…ä¸‹ã«ä½œæˆã•ã‚Œã¾ã™ã€‚ <code>lib/main.dart</code> ãŒå®Ÿéš›ã«implementã™ã‚‹å¯¾è±¡ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ãªã‚‹ã®ã§ã™ãŒã€ä¸€æ—¦è§¦ã‚‰ãšã«ã‚¢ãƒ—ãƒªã®èµ·å‹•ã‚’ç¢ºèªã—ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> myapp</span><br><span class="line">$ flutter run -d chrome</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹ã®ã‚ˆã†ãªç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°æˆåŠŸã§ã™ï¼ç”»é¢ã¯ã¨ã¦ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ã§ã€å³ä¸‹ã®ã€Œ+ãƒœã‚¿ãƒ³ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ç”»é¢å†…ã®ã‚«ã‚¦ãƒ³ã‚¿ãŒã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã•ã‚Œã¦ã„ãã¾ã™ã€‚</p><img src="/images/20200603/photo_20200603_02.png" style="border:solid 1px #000000"><p>ã“ã‚Œã§ã‚¢ãƒ—ãƒªã®é–‹ç™ºç’°å¢ƒã¯æ•´ã„ã¾ã—ãŸã€‚ã§ã¯æ—©é€Ÿã‚¢ãƒ—ãƒªã®é–‹ç™ºã«ç§»ã£ã¦ã„ãã¾ã—ã‚‡ã†ã€‚</p><h2 id="ChartJSãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½¿ã£ã¦ã‚°ãƒ©ãƒ•è¡¨ç¤ºã‚’è¡Œã†"><a href="#ChartJSãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½¿ã£ã¦ã‚°ãƒ©ãƒ•è¡¨ç¤ºã‚’è¡Œã†" class="headerlink" title="ChartJSãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½¿ã£ã¦ã‚°ãƒ©ãƒ•è¡¨ç¤ºã‚’è¡Œã†"></a>ChartJSãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½¿ã£ã¦ã‚°ãƒ©ãƒ•è¡¨ç¤ºã‚’è¡Œã†</h2><p>Flutter(Dart)ã§åˆ©ç”¨ã§ãã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯<a href="https://pub.dev/" target="_blank" rel="noopener">pub.dev</a>ã¨ã„ã†ãƒšãƒ¼ã‚¸ã«ã¾ã¨ã¾ã£ã¦ã„ã‚‹ã®ã§ã™ãŒã€ä»Šå›ã¯ãã®ä¸­ã‹ã‚‰<a href="https://pub.dev/packages/flutter_web_chartjs" target="_blank" rel="noopener">flutter_web_chartjs</a>ã¨ã„ã†Webç‰ˆFlutterã§ä½¿ãˆã‚‹ChartJSãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã†ã“ã¨ã«ã—ã¾ã—ãŸã€‚</p><p>ä½¿ã„ãŸã„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ <code>pubspec.yaml</code> ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã«ä»¥ä¸‹ã®ã‚ˆã†ãªå½¢ã§è¨˜è¼‰ã—ã¾ã™ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line"><span class="attr">  flutter_web_chartjs:</span> <span class="string">^0.2.5</span></span><br></pre></td></tr></table></figure><p>ã“ã‚Œã§æº–å‚™å®Œäº†ã§ã™ã€‚<br><a href="https://pub.dev/packages/flutter_web_chartjs#-example-tab-" target="_blank" rel="noopener">Example</a>ã«å¾“ã£ã¦ã‚¢ãƒ—ãƒªã‚’å®Ÿè£…ã™ã‚Œã°ä»¥ä¸‹ã®ã‚ˆã†ãªç”»é¢ã‚’è¡¨ç¤ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ãŒã€è©³ç´°ã¯ã“ã“ã§ã¯å‰²æ„›ã—ã¾ã™ã€‚</p><img src="/images/20200603/photo_20200603_03.png" style="border:solid 1px #000000"><p>ç¸¦è»¸ã¨æ¨ªè»¸ã«è©²å½“ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆç¾¤ã‚’ç”¨æ„ã™ã‚Œã°ã‚°ãƒ©ãƒ•ã‚’è¡¨ç¤ºã§ãã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã—ãŸã€‚</p><h2 id="Firebaseã®DBã¨ç¹‹ããŸã„"><a href="#Firebaseã®DBã¨ç¹‹ããŸã„" class="headerlink" title="Firebaseã®DBã¨ç¹‹ããŸã„"></a>Firebaseã®DBã¨ç¹‹ããŸã„</h2><p>DBã¯ãªã‚‹ã¹ãç°¡å˜ã«æ‰±ãˆã‚‹ã‚‚ã®ã«ã—ãŸãã€Cloud Firestoreã‚’ä½¿ã†ã“ã¨ã«ã—ã¾ã—ãŸã€‚</p><p>ã¡ãªã¿ã«ã€Cloud Firestoreã‚’ä½¿ã†ã‹Realtime Databaseã‚’ä½¿ã†ã‹å°‘ã—ã ã‘æ‚©ã‚“ã ã®ã§ã™ãŒã€ãã®ã¸ã‚“ã¯<a href="https://speakerdeck.com/mura123yasu/zerokarashi-merufluttersheng-huo-prologue" target="_blank" rel="noopener">ã“ã¡ã‚‰</a>ã®è³‡æ–™ã«ã¾ã¨ã‚ã¦ã‚ã‚Šã¾ã™ã€‚</p><p>è«¸ã€…ã®èƒŒæ™¯ã¯çœãã¾ã™ãŒã€ã€ŒãŠã¨ãªã—ãCloud Firestoreã‚’Native Modeã§ä½¿ãŠã†ã€ã¨ã„ã†ã®ãŒç§ã®çµè«–ã§ã™ã€‚</p><h3 id="åˆ©ç”¨ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®è¿½åŠ "><a href="#åˆ©ç”¨ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®è¿½åŠ " class="headerlink" title="åˆ©ç”¨ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®è¿½åŠ "></a>åˆ©ç”¨ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®è¿½åŠ </h3><p>ã•ã¦ã€å®Ÿè£…ã«ç§»ã£ã¦ã„ãã¾ã™ã€‚å…ˆç¨‹åŒæ§˜ã€ã¾ãšã¯ä½¿ã„ãŸã„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ <code>pubspec.yaml</code> ã«è¨˜è¼‰ã™ã‚‹ã¨ã“ã‚ã‹ã‚‰ã§ã™ã€‚<a href="https://pub.dev/packages/cloud_firestore" target="_blank" rel="noopener">cloud_firestore</a>ã‚’ä½¿ã†ãŸã‚ã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¿½è¨˜ã—ã¾ã—ãŸã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line"><span class="attr">  flutter_web_chartjs:</span> <span class="string">^0.2.5</span></span><br><span class="line"><span class="attr">  cloud_firestore:</span> <span class="string">^0.13.5</span></span><br></pre></td></tr></table></figure><h3 id="Firebase-Appã®ä½œæˆ"><a href="#Firebase-Appã®ä½œæˆ" class="headerlink" title="Firebase Appã®ä½œæˆ"></a>Firebase Appã®ä½œæˆ</h3><p>æ¬¡ã«Firebase Appã®ä½œæˆã§ã™ã€‚Firebase Consoleã«ã¦ã€Œã‚¢ãƒ—ãƒªã‚’è¿½åŠ ã€ã‹ã‚‰ä½œæˆã—ã€ <code>ã‚¢ãƒ—ãƒªID</code> ã‚’å–å¾—ã—ã¾ã™ã€‚</p><p>ãã®éš›ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå½¢ã§HTMLãƒ•ã‚¡ã‚¤ãƒ«ã®ä¿®æ­£ã‚‚æ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚</p><img src="/images/20200603/photo_20200603_04.png" style="border:solid 1px #000000"><p>ä»Šå›ã¯ <code>web/index.html</code> ãŒä¿®æ­£å¯¾è±¡ã«ãªã‚Šã¾ã™ã€‚ã“ã®è¾ºã®çµŒç·¯ã¯<a href="https://github.com/FirebaseExtended/flutterfire/blob/master/packages/cloud_firestore/cloud_firestore_web/README.md" target="_blank" rel="noopener">GitHubãƒšãƒ¼ã‚¸ã®README</a>ã«ã‚‚è¨˜è¼‰ãŒã‚ã‚Šã¾ã™ã€‚</p><blockquote><p>Due to this bug in dartdevc, you will need to manually add the Firebase JavaScript files to your index.html file.</p></blockquote><p>Webç‰ˆã®Flutterã¯é‹­æ„ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆä¸­ã¨ã„ã†ã“ã¨ã‚‚ã‚ã‚Šã€ä»Šå¾Œæ”¹å–„ã•ã‚Œã¦ã„ããƒã‚¤ãƒ³ãƒˆãªã‚“ã ã‚ã†ãªã¨æ€ã£ã¦ã„ã¾ã™ã€‚</p><h3 id="index-html-ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ"><a href="#index-html-ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ" class="headerlink" title="index.html ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ"></a><code>index.html</code> ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ</h3><p>å¿…è¦ãªå¤‰æ›´ã‚’åŠ ãˆãŸ <code>index.html</code> ã® <code>&lt;body&gt;</code> ã‚¿ã‚°ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Due to this bug in dartdevc, you will need to manually add the Firebase JavaScript files to your index.html file. see: https://github.com/FirebaseExtended/flutterfire/blob/master/packages/cloud_firestore/cloud_firestore_web/README.md--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://www.gstatic.com/firebasejs/7.5.0/firebase-app.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://www.gstatic.com/firebasejs/7.5.0/firebase-firestore.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br><span class="line">  <span class="comment">&lt;!-- This script installs service_worker.js to provide PWA functionality to</span></span><br><span class="line"><span class="comment">       application. For more information, see:</span></span><br><span class="line"><span class="comment">       https://developers.google.com/web/fundamentals/primers/service-workers --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">    if ('serviceWorker' in navigator) &#123;</span><br><span class="line">      window.addEventListener('load', function () &#123;</span><br><span class="line">        navigator.serviceWorker.register('flutter_service_worker.js');</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ADD THIS BEFORE YOUR main.dart.js SCRIPT --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">    // TODO: Replace the following with your app's Firebase project configuration.</span><br><span class="line">    // See: https://support.google.com/firebase/answer/7015592</span><br><span class="line">    var firebaseConfig = &#123;</span><br><span class="line">      apiKey: "YOUR_API_KEY",</span><br><span class="line">      authDomain: "YOUR_AUTH_DOMAIN",</span><br><span class="line">      databaseURL: "YOUR_DATABASE_URL",</span><br><span class="line">      projectId: "YOUR_PROJECT_ID",</span><br><span class="line">      storageBucket: "YOUR_STORAGE_BUCKET",</span><br><span class="line">      messagingSenderId: "YOUR_MESSAGING_SENDER_ID",</span><br><span class="line">      appId: "YOUR_APP_ID",</span><br><span class="line">      measurementId: "YOUR_MEASUREMENT_ID"</span><br><span class="line">    &#125;;</span><br><span class="line">    // Initialize Firebase</span><br><span class="line">    firebase.initializeApp(firebaseConfig);</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- END OF FIREBASE INIT CODE --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"main.dart.js"</span> <span class="attr">type</span>=<span class="string">"application/javascript"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="main-dart-ã«ã¦æœ¬å®Ÿè£…"><a href="#main-dart-ã«ã¦æœ¬å®Ÿè£…" class="headerlink" title="main.dart ã«ã¦æœ¬å®Ÿè£…"></a><code>main.dart</code> ã«ã¦æœ¬å®Ÿè£…</h2><p>ã“ã“ã¾ã§ã®ä¸‹æº–å‚™ãŒæ•´ãˆã°ã€æœ¬å®Ÿè£…ã‚’è¡Œã†ã®ã¿ã§ã™ã€‚<br><a href="https://pub.dev/packages/cloud_firestore#-example-tab-" target="_blank" rel="noopener">Example</a>ç­‰ã‚’å‚è€ƒã«ã—ã¤ã¤å®Ÿè£…ã‚’é€²ã‚ãŸã®ãŒä»¥ä¸‹ã§ã™ã€‚</p><p>ã¾ãšã¯importæ–‡ã¨mainæ–‡ã€‚FirebaseAppã‚’è¨­å®šã—ã¦ã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã—ã¾ã™ã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_web_chartjs/chartjs.models.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter_web_chartjs/chartjs.wrapper.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'dart:async'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:firebase_core/firebase_core.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:cloud_firestore/cloud_firestore.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() <span class="keyword">async</span> &#123;</span><br><span class="line">  WidgetsFlutterBinding.ensureInitialized();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> FirebaseApp app = <span class="keyword">await</span> FirebaseApp.configure(</span><br><span class="line">    name: <span class="string">'Turniprice Visualizer'</span>,</span><br><span class="line">    options: <span class="keyword">const</span> FirebaseOptions(</span><br><span class="line">      apiKey: <span class="string">"YOUR_API_KEY"</span>,</span><br><span class="line">      projectID: <span class="string">"YOUR_PROJECT_ID"</span>,</span><br><span class="line">      googleAppID: <span class="string">"YOUR_APP_ID"</span>,</span><br><span class="line">      databaseURL: <span class="string">"YOUR_DATABASE_URL"</span>,</span><br><span class="line">      storageBucket: <span class="string">"YOUR_STORAGE_BUCKET"</span>,</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">final</span> Firestore firestore = Firestore(app: app);</span><br><span class="line"></span><br><span class="line">  runApp(MyApp(firestore: firestore));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…ˆç¨‹ <code>runApp()</code> ã«å¼•æ•°ã¨ã—ã¦æ¸¡ã•ã‚ŒãŸ <code>MyApp</code> ã‚¯ãƒ©ã‚¹ã®å®Ÿä½“ã§ã™ã€‚ <code>_getChartData()</code> ãŒä»Šå›ã®ã‚­ãƒ¢ã¨ãªã‚‹éƒ¨åˆ†ã§ã‚ã‚Šã€Firestoreã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã¨ChartJSã§æç”»ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®æ•´å½¢ã‚’æ‹…ã£ã¦ã„ã¾ã™ã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  MyApp(&#123;<span class="keyword">this</span>.firestore&#125;);</span><br><span class="line">  <span class="keyword">final</span> Firestore firestore;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> values = &#123;&#125;;</span><br><span class="line">  <span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; x = [];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> colors = [</span><br><span class="line">    Colors.blue.withOpacity(<span class="number">0.4</span>),</span><br><span class="line">    Colors.yellow.withOpacity(<span class="number">0.4</span>),</span><br><span class="line">    Colors.red.withOpacity(<span class="number">0.4</span>),</span><br><span class="line">    Colors.green.withOpacity(<span class="number">0.4</span>)</span><br><span class="line">  ];</span><br><span class="line"></span><br><span class="line">  Future&lt;ChartData&gt; _getChartData() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="comment">// Query documents</span></span><br><span class="line">    <span class="keyword">final</span> querySnapshot = <span class="keyword">await</span> firestore</span><br><span class="line">        .collection(<span class="string">"prices"</span>)</span><br><span class="line">        .orderBy(<span class="string">"date"</span>, descending: <span class="keyword">true</span>)</span><br><span class="line">        .orderBy(<span class="string">"ampm"</span>, descending: <span class="keyword">true</span>)</span><br><span class="line">        .getDocuments();</span><br><span class="line">    </span><br><span class="line">    querySnapshot.documents.forEach((doc) =&gt; format(doc));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ChartDataã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ</span></span><br><span class="line">    <span class="comment">// datasetsã‚’ä½œæˆ</span></span><br><span class="line">    <span class="built_in">List</span>&lt;ChartDataset&gt; datasets = [];</span><br><span class="line">    <span class="built_in">int</span> count = <span class="number">0</span>;</span><br><span class="line">    values.forEach((key, value) &#123;</span><br><span class="line">      datasets.add(</span><br><span class="line">        ChartDataset(</span><br><span class="line">          data: value,</span><br><span class="line">          label: key,</span><br><span class="line">          backgroundColor: colors[count],</span><br><span class="line">        )</span><br><span class="line">      );</span><br><span class="line">      count++;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> chartData = ChartData(</span><br><span class="line">      labels: x,</span><br><span class="line">      datasets: datasets,</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> chartData;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> format(DocumentSnapshot doc) &#123;</span><br><span class="line">    <span class="built_in">print</span>(doc[<span class="string">"date"</span>] + <span class="string">"/"</span>+ doc[<span class="string">"ampm"</span>] + <span class="string">"/"</span>+ doc[<span class="string">"label"</span>] + <span class="string">"/"</span>+ doc[<span class="string">"val"</span>].toString());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// "date+ampm"ãŒxã«ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ã—ã€ã„ãªã‘ã‚Œã°ãƒªã‚¹ãƒˆã«è¿½åŠ </span></span><br><span class="line">    <span class="keyword">var</span> xVal = doc[<span class="string">"date"</span>] + doc[<span class="string">"ampm"</span>];</span><br><span class="line">    <span class="keyword">if</span> (!x.contains(xVal)) &#123;</span><br><span class="line">      x.add(xVal);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// labelã‚’ã‚­ãƒ¼ã«ã—ãŸãƒªã‚¹ãƒˆãŒvaluesã«ã‚ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ã—ã€ã„ãªã‘ã‚Œã°ãƒªã‚¹ãƒˆã«è¿½åŠ </span></span><br><span class="line">    values[doc[<span class="string">"label"</span>]] ??= [];</span><br><span class="line">    <span class="comment">// valueã‚’ãƒªã‚¹ãƒˆã«è¿½åŠ </span></span><br><span class="line">    values[doc[<span class="string">"label"</span>]].add(doc[<span class="string">"val"</span>]);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _MyAppState createState() =&gt; _MyAppState();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã¡ãªã¿ã«ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæƒ…å ±ã‚’æŒã£ã¦ã„ã¾ã™ã€‚</p><img src="/images/20200603/photo_20200603_05.png" style="border:solid 1px #000000"><p>æœ€å¾Œã«Stateã‚¯ãƒ©ã‚¹ã§ã™ã€‚ <code>MyApp</code> ã‚¯ãƒ©ã‚¹ã¯ <code>StatefulWidget</code> ãªã®ã§ã“ã®Stateã‚¯ãƒ©ã‚¹ã«ã¦buildå‡¦ç†ã‚’å®Ÿè£…ã—ã¾ã™ã€‚å®Ÿè£…æ™‚ã«æ°—ã«ã—ãŸãƒã‚¤ãƒ³ãƒˆã¯å¾Œè¿°ã—ã¾ã™ã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_MyAppState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MyApp</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      home: Scaffold(</span><br><span class="line">        appBar: AppBar(</span><br><span class="line">          title: <span class="keyword">const</span> Text(<span class="string">'Turniprice Visualizer'</span>),</span><br><span class="line">        ),</span><br><span class="line">        body: Center(</span><br><span class="line">          child: FutureBuilder(</span><br><span class="line">            future: widget._getChartData(),</span><br><span class="line">            builder: (BuildContext context, AsyncSnapshot&lt;ChartData&gt; snapshot) &#123;</span><br><span class="line">              <span class="comment">// é€šä¿¡ä¸­</span></span><br><span class="line">              <span class="keyword">if</span> (snapshot.connectionState != ConnectionState.done) &#123;</span><br><span class="line">                <span class="keyword">return</span> CircularProgressIndicator();</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="comment">// é€šä¿¡çµ‚äº†ã ãŒã‚¨ãƒ©ãƒ¼ã‚ã‚Š</span></span><br><span class="line">              <span class="keyword">if</span> (snapshot.hasError) &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">"[USER-ERROR]"</span> + snapshot.error.toString());</span><br><span class="line">                <span class="keyword">return</span> Text(snapshot.error.toString());</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="comment">// é€šä¿¡æ­£å¸¸çµ‚äº†</span></span><br><span class="line">              <span class="keyword">if</span> (snapshot.hasData) &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">"[USER-INFO]Fetching data succeeded."</span>);</span><br><span class="line">                <span class="keyword">return</span> ChartJS(</span><br><span class="line">                    id: <span class="string">'graph'</span>,</span><br><span class="line">                    config: ChartConfig(</span><br><span class="line">                        type: ChartType.line,</span><br><span class="line">                        options: ChartOptions(</span><br><span class="line">                            animationConfiguration: ChartAnimationConfiguration(</span><br><span class="line">                              duration: <span class="built_in">Duration</span>(milliseconds: <span class="number">1200</span>),</span><br><span class="line">                              easing: ChartEasing.easeOutQuart,</span><br><span class="line">                            ),</span><br><span class="line">                            scales: ChartScales(</span><br><span class="line">                              xAxes: [</span><br><span class="line">                                ChartAxis(</span><br><span class="line">                                  type: ChartCartesianAxisType.category,</span><br><span class="line">                                )</span><br><span class="line">                              ],</span><br><span class="line">                            ),</span><br><span class="line">                            tooltip: ChartTooltip(</span><br><span class="line">                                intersect: <span class="keyword">false</span>,</span><br><span class="line">                                mode: ChartTooltipMode.isIndex,</span><br><span class="line">                                callbacks: ChartCallbacks(label: (tooltip) &#123;</span><br><span class="line">                                  <span class="keyword">return</span> <span class="string">'R\$ <span class="subst">$&#123;tooltip.value&#125;</span>'</span>;</span><br><span class="line">                                &#125;))),</span><br><span class="line">                        data: snapshot.data),</span><br><span class="line">                  );</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">"[USER-INFO]Fetching data failed."</span>);</span><br><span class="line">                <span class="keyword">return</span> Text(<span class="string">'No Data'</span>);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="main-dart-å®Ÿè£…æ™‚ã«æ°—ã«ã—ãŸã“ã¨"><a href="#main-dart-å®Ÿè£…æ™‚ã«æ°—ã«ã—ãŸã“ã¨" class="headerlink" title="main.dart å®Ÿè£…æ™‚ã«æ°—ã«ã—ãŸã“ã¨"></a><code>main.dart</code> å®Ÿè£…æ™‚ã«æ°—ã«ã—ãŸã“ã¨</h2><h3 id="StatefulWidget-vs-StatelessWidget"><a href="#StatefulWidget-vs-StatelessWidget" class="headerlink" title="StatefulWidget vs StatelessWidget"></a><code>StatefulWidget</code> vs <code>StatelessWidget</code></h3><p>Widgetã«ã¯ <code>Stateful</code> ã¨ <code>Stateless</code> ã®2ç¨®é¡ãŒã‚ã‚Šã€<a href="https://flutter.ctrnost.com/tutorial/tutorial05/" target="_blank" rel="noopener">Flutter Doc JP</a>ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«èª¬æ˜ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><img src="/images/20200603/photo_20200603_06.png" style="border:solid 1px #000000"><p>ä»Šå›åˆ©ç”¨ã—ã¦ã„ã‚‹ChartJSãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«ãŠã„ã¦ <code>ChartJS</code> ã‚¯ãƒ©ã‚¹ã¯ <code>StatefulWidget</code> ã¨ã—ã¦å®šç¾©ã•ã‚Œã¦ã„ãŸãŸã‚ã€ <code>MyApp</code> ã‚¯ãƒ©ã‚¹ã¯ <code>StatefulWidget</code> ã§å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚ç”¨é€”çš„ã«ã¯ã€åˆå›é€šä¿¡ã§ã®ã¿å€¤ã‚’å–å¾—ãŠã‚ˆã³æç”»ã§ãã‚Œã°ã‚ˆã‹ã£ãŸã®ã§ã€ <code>StatelessWidget</code> ã§ã‚‚è‰¯ã„ã®ã‹ãªã¨æ€ã„ã¾ã—ãŸãŒã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å®Ÿè£…ã«å¾“ã†å½¢ã§ <code>StatefulWidget</code> ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚</p><h3 id="FutureBuilder-vs-StreamBuilder"><a href="#FutureBuilder-vs-StreamBuilder" class="headerlink" title="FutureBuilder vs StreamBuilder"></a><code>FutureBuilder</code> vs <code>StreamBuilder</code></h3><p>ç´ ã®Builderã‚’ä½¿ã†ã¨ã€Cloud Firestoreã®ãƒ‡ãƒ¼ã‚¿å–å¾—ãŒå®Œäº†ã™ã‚‹å‰ã«ç”»é¢ã®æç”»å‡¦ç†ãŒèµ°ã£ã¦ã—ã¾ã„ã¾ã™ã€‚ãã®ãŸã‚ã€éåŒæœŸé€šä¿¡ã‚’å¾…ã¤Builderã‚’ä½¿ã†å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚</p><p>éåŒæœŸBuilderã«ã¯ <code>FutureBuilder</code> ã¨ <code>StreamBuilder</code> ã®2ç¨®é¡ãŒã‚ã‚Šã¾ã™ã€‚</p><ul><li>StreamBuilder<ul><li>éåŒæœŸå‡¦ç†ã®æ›´æ–°ã™ã‚‹å¤‰æ•°ãŒå¤‰åŒ–ã™ã‚‹åº¦ã«ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚’buildã—ç›´ã™Builder</li></ul></li><li>FutureBuilder<ul><li>æŒ‡å®šã—ãŸéåŒæœŸå‡¦ç†ã®å®Œäº†ã‚’å¾…ã¤Builder</li></ul></li></ul><p>ä¸Šè¨˜ã®èª¬æ˜ã¯<a href="https://qiita.com/sshon/items/9005cd64a4fc9f9b6a45" target="_blank" rel="noopener">ã“ã¡ã‚‰</a>ã®ãƒšãƒ¼ã‚¸ã‹ã‚‰æ‹å€Ÿã—ã¾ã—ãŸã€‚</p><p>ä»Šå›ã®ã‚¢ãƒ—ãƒªã§ã¯åˆå›ã®ãƒ‡ãƒ¼ã‚¿å–å¾—ã®ã¿ã‚’å¾…ã¦ã°ã‚ˆã„ã®ã§ã€Builderã¯ <code>FutureBuilder</code> ã‚’åˆ©ç”¨ã—ã¾ã—ãŸã€‚</p><h1 id="ãŠã‚ã‚Šã«"><a href="#ãŠã‚ã‚Šã«" class="headerlink" title="ãŠã‚ã‚Šã«"></a>ãŠã‚ã‚Šã«</h1><p>ä»Šå›ã¯Flutterå…¥é–€è¨˜äº‹ã¨ã„ã†ã“ã¨ã§ã€ç°¡å˜ã§ã¯ã‚ã‚Šã¾ã™ãŒFirebaseã‚’åˆ©ç”¨ã—ãŸã‚¢ãƒ—ãƒªé–‹ç™ºã‚’ã”ç´¹ä»‹ã•ã›ã¦é ‚ãã¾ã—ãŸã€‚</p><p>ãã‚Œã«ã—ã¦ã‚‚Dartã¨ã„ã†é–‹ç™ºè¨€èªã€Futureç¤¾å“¡ã®ç§ã«ã¨ã£ã¦Futureå‹ã®å­˜åœ¨ãŒãªã«ã‹ç‰¹åˆ¥ãªæ„Ÿæƒ…ã‚’ã‚‚ãŸã‚‰ã—ã¦ãã‚Œã¾ã—ãŸã€‚</p><blockquote class="twitter-tweet"><p lang="ja" dir="ltr">Flutterã§ã‚¢ãƒ—ãƒªæ›¸ã„ã¦ã‚‹ã‘ã©ä½•å›ã‚‚&quot;Future&quot;ã£ã¦ç™»å ´ã—ã¦ã¦ã€çŸ¥ã‚‰ã¬é–“ã«æ„›ç¤¾ç²¾ç¥ãŒç£¨ã‹ã‚Œã¦ã‚‹æ°—ãŒã™ã‚‹ã€‚Dart...ãŠå‰ã¾ã•ã‹...</p>&mdash; Yasuhiro Murata (@famipapamart) <a href="https://twitter.com/famipapamart/status/1254307447117737984?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">April 26, 2020</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><p>â€¦ã¨ã„ã†å†—è«‡ã¯ã•ã¦ãŠãã€æ›¸ã„ã¦ã„ã‚‹é–“ã«æ¥½ã—ã„æ°—åˆ†ã«ã•ã›ã¦ãã‚Œã‚‹è¨€èªã¨ã„ã†ã®ã‚‚ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã®ä¸€éƒ¨ã ã¨æ€ã†ã®ã§ã€ã“ã®æ„Ÿæƒ…ã¯ã“ã‚Œã‹ã‚‰ã‚‚å¤§äº‹ã«ã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚</p><p>æ˜¥ã®å…¥é–€ç¥­ã‚ŠğŸŒ¸ ã¯ã¾ã ã¾ã ç¶šãã¾ã™ï¼FutureæŠ€è¡“ãƒ–ãƒ­ã‚°å§‹ã¾ã£ã¦ä»¥æ¥ã®è¶…å¤§å‹é€£è¼‰ã€ãœã²ãœã²æœ€å¾Œã¾ã§ãŠä»˜ãåˆã„ãã ã•ã„ï¼ï¼</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h1&gt;&lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€TIGã®&lt;a href=&quot;https://twitter.com/famipapamart&quot; target=&quot;_
      
    
    </summary>
    
      <category term="Programming" scheme="https://future-architect.github.io/categories/Programming/"/>
    
    
      <category term="Flutter" scheme="https://future-architect.github.io/tags/Flutter/"/>
    
      <category term="Dart" scheme="https://future-architect.github.io/tags/Dart/"/>
    
      <category term="ã‚¢ãƒ—ãƒª" scheme="https://future-architect.github.io/tags/%E3%82%A2%E3%83%97%E3%83%AA/"/>
    
  </entry>
  
  <entry>
    <title>æ˜¥ã®å…¥é–€ç¥­ã‚Š ğŸŒ¸ #02 Google Cloud Platform 101</title>
    <link href="https://future-architect.github.io/articles/20200602/"/>
    <id>https://future-architect.github.io/articles/20200602/</id>
    <published>2020-06-02T00:54:02.000Z</published>
    <updated>2020-06-02T02:13:25.991Z</updated>
    
    <content type="html"><![CDATA[<img src="/images/20200602/top.jpg" class="img-middle-size"><p><a href="https://pixabay.com/ja/users/dendoktoor-14802912/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=4934438" target="_blank" rel="noopener">dendoktoor</a>ã«ã‚ˆã‚‹<a href="https://pixabay.com/ja/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=4934438" target="_blank" rel="noopener">Pixabay</a>ã‹ã‚‰ã®ç”»åƒ</p><br><p><a href="https://future-architect.github.io/articles/20200529/">æ˜¥ã®å…¥é–€ç¥­ã‚ŠğŸŒ¸</a>ã®ç¬¬2å¼¾ã§ã™ã€‚</p><p>ã“ã‚“ã«ã¡ã¯ã€TIG/DXãƒãƒ¼ãƒ ã®<a href="https://twitter.com/kaedemalu" target="_blank" rel="noopener">ä¼Šè—¤</a>ã§ã™ã€‚ä»Šå›ã¯GCPã§Webã‚¢ãƒ—ãƒªç’°å¢ƒã‚’ä½œã£ã¦ã¿ã‚ˆã†ã¨ã„ã†è¨˜äº‹ã«ãªã‚Šã¾ã™ã€‚ä»Šå›ã®ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã—ã¦ã¯ã€</p><ul><li>GCPã«ã¯ç‰¹æœ‰ã®æ€æƒ³ãƒ»è¨­è¨ˆãŒã‚ã‚‹ãŒã€ã¾ã ã¾ã ä¸–ã«æµ¸é€ã—ã¦ã„ãªã„ã¨æ€ã†ã®ã§ã€ãã‚Œã‚’è¡¨ç¾ã—ãŸã„</li><li>ä¸–ã®ä¸­ã®ã‚·ã‚¹ãƒ†ãƒ ã®ã»ã¨ã‚“ã©ãŒWebã‚µãƒ¼ãƒ“ã‚¹ãªã®ã§ã€ãã‚Œã‚’ä¾‹ã«æ§‹ç¯‰ã™ã‚‹</li></ul><p>ã¨ã„ã†ã®ãŒã‚ã‚Šã¾ã™ã€‚ä»Šå›ã¯ç¤¾å†…ã§GCPã‚’åºƒã‚ã¦ã„ã‚‹ç«‹å ´ã¨ã—ã¦ã‚‚ã€å…¥é–€è¨˜äº‹ã‚’å‡ºã—ã¦ã‚ˆã‚Šå¤šãã®äººã«GCPã‚’è§¦ã£ã¦ã‚‚ã‚‰ãˆãŸã‚‰ã¨æ€ã„ã¾ã™ã€‚GCPã®æ€æƒ³ã‚„è¨­è¨ˆã«ã¤ã„ã¦ã¯ä»¥å‰ç§ãŒæ›¸ã„ãŸãƒ–ãƒ­ã‚°ãŒã‚ã‚‹ã®ã§ä»¥ä¸‹ã‚’ã”è¦§ãã ã•ã„ã€‚<br>ã€Œ<a href="https://future-architect.github.io/articles/20200424/">ç¤¾å†…å‹‰å¼·ä¼šã§ç™ºè¡¨ã—ãŸGCPè³‡æ–™ã‚’å…¬é–‹ã—ã¾ã™</a>ã€</p><h2 id="GCPã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹"><a href="#GCPã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹" class="headerlink" title="GCPã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹"></a>GCPã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹</h2><p>ã¯ã˜ã‚ã«GCPã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¦ã€ç‰‡ä»˜ã‘ã‚’ç°¡å˜ã«ã—ã¾ã—ã‚‡ã†ã€‚GCPã¯1ã¤ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«å¯¾ã—ã¦è¤‡æ•°ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä»Šå›ã¯ä»¥ä¸‹ã®ç”»åƒã®æ§˜ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸã€‚</p><img src="/images/20200602/photo_20200602_01.png" class="img-middle-size" style="border:solid 1px #000000"><p>ã—ã°ã‚‰ãã™ã‚‹ã¨ä½œæˆãŒå®Œäº†ã™ã‚‹ã®ã§ã€å¾…ã¡ã¾ã—ã‚‡ã†ã€‚</p><h2 id="Compute-Engineã‚’ä½¿ã£ãŸWebã‚¢ãƒ—ãƒªç’°å¢ƒã®æ§‹ç¯‰"><a href="#Compute-Engineã‚’ä½¿ã£ãŸWebã‚¢ãƒ—ãƒªç’°å¢ƒã®æ§‹ç¯‰" class="headerlink" title="Compute Engineã‚’ä½¿ã£ãŸWebã‚¢ãƒ—ãƒªç’°å¢ƒã®æ§‹ç¯‰"></a>Compute Engineã‚’ä½¿ã£ãŸWebã‚¢ãƒ—ãƒªç’°å¢ƒã®æ§‹ç¯‰</h2><p>ã“ã“ã§ã¯Compute Engine(GCE)ã‚’ä½¿ã£ãŸWebã‚¢ãƒ—ãƒªç’°å¢ƒã®æ§‹ç¯‰ã‚’è¡Œã„ã¾ã™ã€‚å®Œæˆã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªæ§‹æˆã«ãªã‚Šã¾ã™ã€‚<br><img src="/images/20200602/photo_20200602_02.png"></p><h3 id="1-VPCã¨ã‚µãƒ–ãƒãƒƒãƒˆã‚’ä½œæˆã™ã‚‹"><a href="#1-VPCã¨ã‚µãƒ–ãƒãƒƒãƒˆã‚’ä½œæˆã™ã‚‹" class="headerlink" title="1.VPCã¨ã‚µãƒ–ãƒãƒƒãƒˆã‚’ä½œæˆã™ã‚‹"></a>1.VPCã¨ã‚µãƒ–ãƒãƒƒãƒˆã‚’ä½œæˆã™ã‚‹</h3><p>ã¯ã˜ã‚ã«ã€VPCã¨ã‚µãƒ–ãƒãƒƒãƒˆã‚’ä½œæˆã—ã¾ã—ã‚‡ã†ã€‚GCPã§ã¯VPCã¯ä¸–ç•Œä¸­ã®ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã¾ãŸãã“ã¨ãŒã§ãã¾ã™ã€‚ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰[VPCãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯]&gt;[VPCãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯]ã‚’é¸ã³ã¾ã—ã‚‡ã†ã€‚</p><img src="/images/20200602/photo_20200602_03.png" class="img-middle-size" style="border:solid 1px #000000"><p>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®VPCãŒã™ã§ã«ã‚ã‚Šã¾ã™ãŒã€ä»Šå›ã¯ä½¿ç”¨ã›ãšã€ç”»é¢ä¸Šéƒ¨ã«ã‚ã‚‹[VPCãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’ä½œæˆ]ã‚’æŠ¼ã—ã¾ã—ã‚‡ã†ã€‚<br>ä»Šå›ã¯VPCãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’ã€Œ<strong>sample-network</strong>ã€ã¨ã—ã€ã‚µãƒ–ãƒãƒƒãƒˆã‚’2ã¤ä»¥ä¸‹ã®ã‚ˆã†ã«ä½œæˆã—ã¾ã—ãŸã€‚</p><table><thead><tr><th>Subnet Name</th><th>Region</th><th>IP Address Range</th></tr></thead><tbody><tr><td>sample-subnet-pub</td><td>asia-northeast1</td><td>192.168.1.0/24</td></tr><tr><td>sample-subnet-prv</td><td>asia-northeast3</td><td>10.0.1.0/24</td></tr></tbody></table><p>ã¾ãŸã€å‹•çš„ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ¢ãƒ¼ãƒ‰ã¯ä»Šå›ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã¨ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã§VPCã¨ã‚µãƒ–ãƒãƒƒãƒˆã®ä½œæˆãŒçµ‚ã‚ã£ãŸã®ã§ã€ãƒªã‚½ãƒ¼ã‚¹ã®ä½œæˆã«å…¥ã‚Šã¾ã—ã‚‡ã†ã€‚</p><h3 id="2-GCEã®ä½œæˆ"><a href="#2-GCEã®ä½œæˆ" class="headerlink" title="2.GCEã®ä½œæˆ"></a>2.GCEã®ä½œæˆ</h3><p>ã¯ã˜ã‚ã«GCEã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç«‹ã¡ä¸Šã’ã¦ã„ãã¾ã—ã‚‡ã†ã€‚ã¾ãšã¯ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€ŒCompute Engineã€ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚ãƒªã‚½ãƒ¼ã‚¹ãŒä½•ã‚‚ãªã„çŠ¶æ…‹ã ã¨ä»¥ä¸‹ã®ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã®ã§ã€Œä½œæˆã€ã®é’ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¾ã—ã‚‡ã†ã€‚<br><img src="/images/20200602/photo_20200602_04.png" class="img-middle-size"></p><p>ä½œæˆç”»é¢ã«å…¥ã£ãŸã‚‰ã€ã„ãã¤ã‹é¸æŠã™ã‚‹é …ç›®ãŒã‚ã‚‹ã®ã§ã€ç”»åƒã®ä¸‹ã®è¡¨ã«å€£ã£ã¦åŸ‹ã‚ã¾ã—ã‚‡ã†ã€‚<br><img src="/images/20200602/photo_20200602_05.png" class="img-middle-size" style="border:solid 1px #000000"></p><table><thead><tr><th></th><th>è¸ã¿å°ã‚µãƒ¼ãƒãƒ¼</th><th>Webã‚µãƒ¼ãƒãƒ¼</th></tr></thead><tbody><tr><td>åå‰</td><td>bastion</td><td>web-instance</td></tr><tr><td>ãƒªãƒ¼ã‚¸ãƒ§ãƒ³</td><td>asia-northeast1</td><td>asia-northeast1-a</td></tr><tr><td>ã‚¾ãƒ¼ãƒ³</td><td>asia-northeast3</td><td>asia-northeast3-a</td></tr><tr><td>IDã¨APIã¸ã®ã‚¢ã‚¯ã‚»ã‚¹</td><td>å…¨ã¦ã®Cloud APIã«å®Œå…¨ã‚¢ã‚¯ã‚»ã‚¹æ¨©ã‚’è¨±å¯</td><td>å…¨ã¦ã®Cloud APIã«å®Œå…¨ã‚¢ã‚¯ã‚»ã‚¹æ¨©ã‚’è¨±å¯</td></tr><tr><td>ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«</td><td>-</td><td>HTTP ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’è¨±å¯ã™ã‚‹</td></tr><tr><td>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¿ã‚°</td><td>bastion</td><td>from-bastion, (http-server)</td></tr><tr><td>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯</td><td>sample-network</td><td>sample-network</td></tr><tr><td>ã‚µãƒ–ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯</td><td>sample-subnet-pub</td><td>sample-subnet-prv</td></tr><tr><td>å¤–éƒ¨IP</td><td>ã‚¨ãƒ•ã‚§ãƒ¡ãƒ©ãƒ«</td><td>ãªã—</td></tr></tbody></table><p>ä»–ã®é …ç›®ã«ã¤ã„ã¦ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§å…¥ã£ã¦ã„ã‚‹ã‚‚ã®ã§å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚ã“ã“ã¾ã§ãã‚‹ã¨ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒ2å°å‡ºæ¥ä¸ŠãŒã£ã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><p>ã“ã“ã§ã•ã‚‰ã«ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ä½œæˆã—ã¾ã—ã‚‡ã†ã€‚ã®ã¡ã®4ã§ä½¿ã„ã¾ã™ã€‚[Compute Engine]&gt;[ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚°ãƒ«ãƒ¼ãƒ—]ã¾ã§é€²ã¿ã¾ã™ã€‚ä»Šå›ã¯æ—¢ã«ä½œæˆã•ã‚Œã¦ã„ã‚‹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚°ãƒ«ãƒ¼ãƒ—ã«å±ã•ã›ã‚‹ã®ã§ã€ã€Œæ–°ã—ã„éãƒãƒãƒ¼ã‚¸ãƒ‰ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ ã‚°ãƒ«ãƒ¼ãƒ—ã€ã‚’ä½¿ã„ã¾ã™ã€‚ä»¥ä¸‹ã®ç”»åƒã®é€šã‚Šã«ä½œæˆã‚’é€²ã‚ã¾ã—ã‚‡ã†ã€‚<br><img src="/images/20200602/photo_20200602_06.png" class="img-middle-size" style="border:solid 1px #000000"></p><h3 id="3-ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ã®ä½œæˆ"><a href="#3-ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ã®ä½œæˆ" class="headerlink" title="3.ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ã®ä½œæˆ"></a>3.ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ã®ä½œæˆ</h3><p>ä»Šå›ã€2ã¤GCEã‚’ä½œæˆã—ã¦ã„ã¾ã™ã€‚ã‚µãƒ¼ãƒãƒ¼ãŒæ”»æ’ƒã‚’å—ã‘ãªã„ã‚ˆã†ã«å®ˆã‚Šã‚’å›ºã‚ã¾ã—ã‚‡ã†ã€‚[VPCãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯]&gt;[ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ãƒ«ãƒ¼ãƒ«]ã‹ã‚‰ä½œæˆã§ãã¾ã™ã€‚ä»¥ä¸‹ã®è¡¨ã®2ã¤ã‚’ä½œæˆã—ã¦ãã ã•ã„</p><table><thead><tr><th>åå‰</th><th>bastion</th><th>from-bastion</th></tr></thead><tbody><tr><td>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯</td><td>sample-network</td><td>sample-network</td></tr><tr><td>ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ</td><td>æŒ‡å®šã•ã‚ŒãŸã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚¿ã‚°</td><td>æŒ‡å®šã•ã‚ŒãŸã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚¿ã‚°</td></tr><tr><td>ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚¿ã‚°</td><td>bastion</td><td>from-bastion</td></tr><tr><td>ã‚½ãƒ¼ã‚¹ãƒ•ã‚£ãƒ«ã‚¿</td><td>IPç¯„å›²</td><td>ã‚½ãƒ¼ã‚¹ã‚¿ã‚°</td></tr><tr><td>ã‚½ãƒ¼ã‚¹IPã®ç¯„å›²/ã‚½ãƒ¼ã‚¹ã‚¿ã‚°</td><td>0.0.0.0/0</td><td>bastion</td></tr><tr><td>ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã¨ãƒãƒ¼ãƒˆ</td><td>ã™ã¹ã¦è¨±å¯</td><td>ã™ã¹ã¦è¨±å¯</td></tr></tbody></table><h3 id="4-ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µã®ä½œæˆ"><a href="#4-ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µã®ä½œæˆ" class="headerlink" title="4.ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µã®ä½œæˆ"></a>4.ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µã®ä½œæˆ</h3><p>ãƒªã‚½ãƒ¼ã‚¹ä½œæˆã®æœ€å¾Œã§ã™ã€‚<code>web-instance</code>ã«ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆä¸Šã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã‚µãƒ¼ãƒ“ã‚¹ã‚’è¦‹ã‚Œã‚‹ã‚ˆã†ã«ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µã®è¨­å®šã‚’ã—ã¾ã™ã€‚ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰[ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚µãƒ¼ãƒ“ã‚¹]&gt;[è² è·åˆ†æ•£]ã‚’é¸æŠã—ã¾ã—ã‚‡ã†ã€‚GCEã¨åŒæ§˜ã«ä½•ã‚‚ä½œæˆã•ã‚Œã¦ã„ãªã‘ã‚Œã°ã€ç”»é¢ä¸­å¤®ã«ã‚ã‚‹[ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µã‚’ä½œæˆ]ã‚’æŠ¼ã—ã¦ä½œæˆã«å…¥ã‚Šã¾ã™ã€‚ã“ã“ã§ä½¿ã†ã®ã¯ã€ŒHTTP(S)è² è·åˆ†æ•£ã€ã§ã™ã€‚ç”¨é€”ã¨ã—ã¦ã¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‹ã‚‰VMã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’å—ã‘å…¥ã‚Œã‚‹ã‚ˆã†ã«è¨­å®šã—ã¾ã™ã€‚åå‰ã‚’ã€Œweb-lbã€ã¨ã—ã¦ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‹ã‚‰ã©ã‚“ã©ã‚“è¨­å®šã‚’é€²ã‚ã¦ã„ãã¾ã—ã‚‡ã†ã€‚<br>ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã®è¨­å®šã«ã¤ã„ã¦ã€ä»Šå›ã¯ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’GCEã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã™ã‚‹ã®ã§ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã‚’é¸æŠã—ã€ä½œæˆã«é€²ã¿ã¾ã—ã‚‡ã†ã€‚å…¥åŠ›é …ç›®ã¯åå‰ã‚’ã€Œweb-backendã€ã€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ã€Œweb-instance-groupã€ã¨å…¥åŠ›ã—ã¾ã™ã€‚ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã®æ¬„ãŒã‚ã‚Šã¾ã™ãŒã€åå‰ã‚’ã€Œweb-healthã€ã€‚ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’ã€ŒHTTPã€ã«ã—ã¦ã€ä»–ã®æ¬„ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã¾ã¾ã§ä½œæˆã«é€²ã¿ã¾ã—ã‚‡ã†ã€‚<br>ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®è¨­å®šã¯ã€Œweb-frontendã€ã¨ã—ã¦å…¥åŠ›ã—ã€å®Œäº†ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¾ã—ã‚‡ã†ã€‚<br>ã“ã‚Œã§ä¸€é€šã‚Šå…¥åŠ›ãŒçµ‚ã‚ã£ãŸã®ã§ã€æœ€å¾Œã«ç¢ºèªã¨å®Œäº†ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã“ã“ã¾ã§ãã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚<br><img src="/images/20200602/photo_20200602_07.png" class="img-middle-size" style="border:solid 1px #000000"></p><h3 id="5-Cloud-Router-Cloud-NATã®è¨­å®š"><a href="#5-Cloud-Router-Cloud-NATã®è¨­å®š" class="headerlink" title="5. Cloud Router, Cloud NATã®è¨­å®š"></a>5. Cloud Router, Cloud NATã®è¨­å®š</h3><p>ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®è¨­å®šã‚’è¡Œã†å‰ã«Webã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰<code>apt-get</code>ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«Cloud Routerã¨Cloud NATã‚’è¨­å®šã—ã¾ã™ã€‚<br>Cloud Routerã¯ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®[ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ¥ç¶š]&gt;[ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ«ãƒ¼ã‚¿ãƒ¼]ã‚’é¸æŠã—ã€ä½œæˆã—ã¾ã™ã€‚</p><ul><li>åå‰ï¼šseoul-router</li><li>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ï¼šsample-network</li><li>ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ï¼šasia-northeast3</li></ul><p>ä»–ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã¾ã¾ã§å¤§ä¸ˆå¤«ã§ã™ã€‚ä½œæˆãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã—ã°ã‚‰ãå¾…ã¤ã¨å‡ºæ¥ä¸ŠãŒã‚Šã¾ã™ã€‚<br>æ¬¡ã«Cloud NATã‚’ä½œã‚Šã¾ã™ã€‚ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®[ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚µãƒ¼ãƒ“ã‚¹]&gt;[Cloud NAT]ã«å…¥ã‚Šã€ä½œæˆã—ã¾ã™ã€‚</p><ul><li>åå‰ï¼šseoul-nat</li><li>VPCãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ï¼šsample-network</li><li>ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ï¼šasia-northeast3</li><li>ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ«ãƒ¼ã‚¿ãƒ¼ï¼šseoul-router</li></ul><p>ã“ã¡ã‚‰ã‚‚ä»–ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã¾ã¾ä½œæˆã™ã‚Œã°å‡ºæ¥ä¸ŠãŒã‚Šã¾ã™ã€‚æ¬¡ã¯ã„ã‚ˆã„ã‚ˆãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®è¨­å®šã‚’ã—ã¾ã—ã‚‡ã†ã€‚</p><h2 id="6-ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®è¨­å®š"><a href="#6-ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®è¨­å®š" class="headerlink" title="6.ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®è¨­å®š"></a>6.ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®è¨­å®š</h2><p>ã“ã“ã‹ã‚‰ã¯<code>web-instance</code>ã®è¨­å®šã‚’ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚æ“ä½œã™ã‚‹ã¨ãã€ãƒ­ãƒ¼ã‚«ãƒ«PCã«è‰²ã€…è¨­å®šã‚’å…¥ã‚Œã¦è¡Œã†ã®ã‚‚ã„ã„ã®ã§ã™ãŒã€GCPã«ã¯Cloud Shellã¨ã„ã†ã‚‚ã®ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ä½¿ã£ã¦ã„ãã¾ã—ã‚‡ã†ã€‚ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã®ãƒ˜ãƒƒãƒ€ãƒ¼ã«ã‚ã‚‹ã®ã§æœ‰åŠ¹åŒ–ã—ã¦æ“ä½œã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚ã¾ãŸã€ã“ã®Cloud Shellã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç´ã¥ãã®ã§ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¨ªæ–­ã—ã¦ä½¿ã†ã“ã¨ã«ãªã‚Šã¾ã™ã€‚<br><img src="/images/20200602/photo_20200602_08.png"></p><p>Cloud Shellã«å…¥ã£ã¦ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã€è¸ã¿å°ã‚µãƒ¼ãƒãƒ¼ã«å…¥ã‚Šã¾ã—ã‚‡ã†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gcloud compute ssh bastion --project [PROJECT_ID] --zone asia-northeast1<span class="_">-a</span></span><br></pre></td></tr></table></figure><p>é€”ä¸­ã‚­ãƒ¼ãƒšã‚¢ã®ä½œæˆã‚’è¡Œã„ã¾ã™ãŒã€èã‹ã‚Œã¦ã„ã‚‹å†…å®¹ãã®ã¾ã¾ç­”ãˆã¦ã„ã‘ã°å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚sshã§ããŸã‚‰<code>uname -a</code>ã‚³ãƒãƒ³ãƒ‰ã§è¸ã¿å°ã‚µãƒ¼ãƒãƒ¼ã«ã„ã‚‹ã‹ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚<br>è¸ã¿å°ã«å…¥ã‚ŒãŸã‚‰æ¬¡ã¯webã‚µãƒ¼ãƒãƒ¼ã¸ã®sshã®ã‚³ãƒãƒ³ãƒ‰ã§è¡Œã„ã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gcloud compute ssh web-instance --project [PROJECT_ID] --zone asia-northeast3<span class="_">-a</span> --internal-ip</span><br></pre></td></tr></table></figure><p>ä»Šåº¦ã¯å¼•æ•°ã«<code>--internal-ip</code>ã¨å…¥ã‚Œã¾ã—ãŸãŒã€ã“ã‚Œã¯<code>web-instance</code>ã«å†…éƒ¨IPã—ã‹ã¤ã„ã¦ã„ãªã„ãŸã‚ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨ã—ã¦ä»˜ã‘ã¦ã„ã¾ã™ã€‚ã¾ãŸã€<code>uname -a</code>ã§è¸ã¿å°ã«å…¥ã‚Œã„ã¦ã„ã‚‹ã‹ç¢ºèªãŒã§ããŸã‚‰ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§Nginxã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install nginx</span><br><span class="line">$ systemctl status nginx <span class="comment"># NginxãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèªã™ã‚‹</span></span><br><span class="line">$ sudo systemctl <span class="built_in">enable</span> nginx <span class="comment"># ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å†èµ·å‹•å¾Œã«Nginxã‚‚è‡ªå‹•èµ·å‹•ã™ã‚‹ã‚ˆã†è¨­å®š</span></span><br></pre></td></tr></table></figure><p>ã“ã“ã¾ã§ã§ããŸã‚‰ã€ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µã«ä»˜ä¸ã•ã‚Œã¦ã„ã‚‹å¤–éƒ¨IPã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚<br><img src="/images/20200602/lb.png" style="border:solid 1px #000000"></p><p>ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ã“ã¡ã‚‰ã®Nginxã®ç”»é¢ãŒè¦‹ãˆãŸã‚‰ã“ã“ã¾ã§ã®æ“ä½œãŒã†ã¾ãã„ã£ã¦ã„ã¾ã™ã€‚ã‚ã¨ã¯å¥½ããªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¼‰ã›ã¾ã—ã‚‡ã†ï¼</p><h2 id="æœ€å¾Œã«"><a href="#æœ€å¾Œã«" class="headerlink" title="æœ€å¾Œã«"></a>æœ€å¾Œã«</h2><p>ä»Šå›ã¯GCPã®IaaSã§ã‚ã‚‹Compute Engineã‚’ä½¿ã£ã¦ä½œæˆã‚’è¡Œã„ã¾ã—ãŸã€‚GCPãªã‚‰ã§ã¯ã®å¼·ã¿ã¯ã„ãã¤ã‹ã‚ã‚Š</p><ul><li>ã‚µãƒ–ãƒãƒƒãƒˆã¯ãƒªãƒ¼ã‚¸ãƒ§ãƒ³å˜ä½ã§è¨­å®šãŒå¯èƒ½<ul><li>ã‚¾ãƒ¼ãƒ³ã”ã¨ç´°ã‹ãè¨­å®šã—ãªãã¦è‰¯ã„</li></ul></li><li>ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µã¯ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¢ã‚¯ã‚»ã‚¹ãŒå¯èƒ½<ul><li>ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’åˆ¥ã®ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚‚è¨­å®šã§ãã‚‹</li></ul></li><li>Cloud Shellã‚’ä½¿ã£ã¦ç°¡å˜ã«CUIç’°å¢ƒã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚</li></ul><p>ãªã©ã€GCPã‚’ä½¿ã†ã“ã¨ã®ãƒ¡ãƒªãƒƒãƒˆã¯ãŸãã•ã‚“ã‚ã‚Šã¾ã™ã€‚<br>ã“ã‚Œã‚’èª­ã‚“ã§è©¦ã—ãŸã„ï¼ã¨ã„ã†æ–¹ã¯ã€æ˜¯éã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã—ã¦ã€ã“ã¡ã‚‰è©¦ã—ã¦ã¿ã¦ãã ã•ã„ã€‚ãŠé‡‘ãŒã‹ã‹ã‚‹ã®ã§ã¯ï¼Ÿã¨æ€ã†äººãŒã„ã‚‹ã¨æ€ã„ã¾ã™ãŒã€ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’åˆå›ç™»éŒ²ã—ã¦ã‹ã‚‰1å¹´é–“æœ‰åŠ¹ãª$300ã®ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆãŒã‚ã‚‹ã®ã§ã€ãã‚Œã‚’ä½¿ã„åˆ‡ã‚‹ã¾ã§ã¯èª²é‡‘ã•ã‚Œã¾ã›ã‚“ã®ã§å®‰å¿ƒã—ã¦ãŠè©¦ã—ãã ã•ã„ï¼</p><h2 id="é–¢é€£ãƒªãƒ³ã‚¯"><a href="#é–¢é€£ãƒªãƒ³ã‚¯" class="headerlink" title="é–¢é€£ãƒªãƒ³ã‚¯"></a>é–¢é€£ãƒªãƒ³ã‚¯</h2><ul><li><a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCPé€£è¼‰ä¼ç”»</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;img src=&quot;/images/20200602/top.jpg&quot; class=&quot;img-middle-size&quot;&gt;

&lt;p&gt;&lt;a href=&quot;https://pixabay.com/ja/users/dendoktoor-14802912/?utm_source=link-
      
    
    </summary>
    
      <category term="Infrastructure" scheme="https://future-architect.github.io/categories/Infrastructure/"/>
    
    
      <category term="GCP" scheme="https://future-architect.github.io/tags/GCP/"/>
    
      <category term="introductory" scheme="https://future-architect.github.io/tags/introductory/"/>
    
  </entry>
  
  <entry>
    <title>æ˜¥ã®å…¥é–€ç¥­ã‚Š ğŸŒ¸ #01 Goã®ãƒ†ã‚¹ãƒˆã«å…¥é–€ã—ã¦ã¿ã‚ˆã†ï¼</title>
    <link href="https://future-architect.github.io/articles/20200601/"/>
    <id>https://future-architect.github.io/articles/20200601/</id>
    <published>2020-06-01T00:41:23.000Z</published>
    <updated>2020-06-01T00:47:57.184Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>TIG ã®è¾»ã§ã™ã€‚<a href="/articles/20200529/">ä»Šå›ã¯æ˜¥ã®å…¥é–€ç¥­ã‚ŠğŸŒ¸</a>ã¨ã„ã†ã“ã¨ã§ Go ã®ãƒ†ã‚¹ãƒˆã«å…¥é–€ã—ã¦ã¿ã‚ˆã†ï¼ã¨ã„ã†è¨˜äº‹ã§ã™ã€‚</p><p>æ›¸ã„ãŸèƒŒæ™¯ã§ã™ãŒ Go ã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¼šã§ <code>testing</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã¦ã¿ã¾ã—ãŸãŒã€é›£ã—ã™ãã¦ã‚ã‹ã‚‰ã‚“ã€‚ãã‚‚ãã‚‚ Go ã®ãƒ†ã‚¹ãƒˆã£ã¦ä½•ãŒã§ãã‚‹ã‚“ã ã£ã‘ï¼Ÿã¨ã„ã†è©±ã«ãªã‚Šã€åŸºæœ¬çš„ãªå†…å®¹ã‚’ãªã‚‹ã¹ãå…·ä½“ä¾‹ã‚’ã¾ã˜ãˆãªãŒã‚‰ã¾ã¨ã‚ã¾ã—ãŸã€‚</p><p>ã–ã£ã¨ã©ã‚“ãªã“ã¨ãŒã§ãã‚‹ã‚“ã ã‚ã†ã€ã¨ã„ã† index ã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚</p><h1 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h1><p>Go ã«çµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ãƒ†ã‚¹ãƒˆã®ä»•çµ„ã¿ã®ä¸­ã«ã€ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã«é–¢ã™ã‚‹ãƒ†ã‚¹ãƒˆã¨ Example ãƒ†ã‚¹ãƒˆã¨ã„ã†ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ç”¨ã®ãƒ†ã‚¹ãƒˆã‚‚å«ã¾ã‚Œã¦ã„ã‚‹ã®ã§ã™ãŒã€ã“ã® 2 ã¤ã¯å¯¾è±¡å¤–ã«ã—ã¾ã™ã€‚åŸºç¤çš„ã¨æ€ã‚ã‚Œã‚‹å†…å®¹ã‹ã‚‰é †ã«ä¸¦ã¹ã¦ã¿ã¾ã—ãŸã€‚</p><ul><li><a href="#ã¯ã˜ã‚ã«">ã¯ã˜ã‚ã«</a></li><li><a href="#tips">Tips</a><ul><li><a href="#ãƒ†ã‚¹ãƒˆãŒã—ãŸã„">ãƒ†ã‚¹ãƒˆãŒã—ãŸã„</a></li><li><a href="#ãƒ†ã‚¹ãƒˆã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ãŸã„">ãƒ†ã‚¹ãƒˆã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ãŸã„</a></li><li><a href="#ãƒ†ã‚¹ãƒˆã‚’ä¸¦åˆ—ã«å®Ÿæ–½ã—ãŸã„">ãƒ†ã‚¹ãƒˆã‚’ä¸¦åˆ—ã«å®Ÿæ–½ã—ãŸã„</a></li><li><a href="#ãƒ†ã‚¹ãƒˆã®å‰å‡¦ç†ã‚„å¾Œå‡¦ç†ã‚’å®Ÿæ–½ã—ãŸã„">ãƒ†ã‚¹ãƒˆã®å‰å‡¦ç†ã‚„å¾Œå‡¦ç†ã‚’å®Ÿæ–½ã—ãŸã„</a></li><li><a href="#ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’å–å¾—ã—ãŸã„">ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’å–å¾—ã—ãŸã„</a></li><li><a href="#ã‚ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã®ãƒ†ã‚¹ãƒˆã‚’ã™ã¹ã¦å®Ÿæ–½ã—ãŸã„">ã‚ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã®ãƒ†ã‚¹ãƒˆã‚’ã™ã¹ã¦å®Ÿæ–½ã—ãŸã„</a></li><li><a href="#ä¸€éƒ¨ã®ãƒ†ã‚¹ãƒˆã®ã¿å®Ÿæ–½ã—ãŸã„">ä¸€éƒ¨ã®ãƒ†ã‚¹ãƒˆã®ã¿å®Ÿæ–½ã—ãŸã„</a></li><li><a href="#ãƒ†ã‚¹ãƒˆã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å‰Šé™¤ã—ãŸã„">ãƒ†ã‚¹ãƒˆã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å‰Šé™¤ã—ãŸã„</a></li><li><a href="#ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®é››å½¢ã‚’æ¥½ã«ä½œã‚ŠãŸã„">ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®é››å½¢ã‚’æ¥½ã«ä½œã‚ŠãŸã„</a></li><li><a href="#æ§‹é€ ä½“ãƒãƒƒãƒ—ã‚„ã‚¹ãƒ©ã‚¤ã‚¹ã®æ¯”è¼ƒã‚’å®Ÿæ–½ã—ãŸã„">æ§‹é€ ä½“ã€ãƒãƒƒãƒ—ã‚„ã‚¹ãƒ©ã‚¤ã‚¹ã®æ¯”è¼ƒã‚’å®Ÿæ–½ã—ãŸã„</a></li><li><a href="#apiã‚µãƒ¼ãƒã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’ã—ãŸã„">APIã‚µãƒ¼ãƒã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’ã—ãŸã„</a></li><li><a href="#apiã‚µãƒ¼ãƒã®ãƒãƒ³ãƒ‰ãƒ©ã®ãƒ†ã‚¹ãƒˆã‚’ã—ãŸã„">APIã‚µãƒ¼ãƒã®ãƒãƒ³ãƒ‰ãƒ©ã®ãƒ†ã‚¹ãƒˆã‚’ã—ãŸã„</a></li><li><a href="#ãƒ‡ãƒ¼ã‚¿ç«¶åˆã‚’ãƒ†ã‚¹ãƒˆã§æ¤œçŸ¥ã—ãŸã„">ãƒ‡ãƒ¼ã‚¿ç«¶åˆã‚’ãƒ†ã‚¹ãƒˆã§æ¤œçŸ¥ã—ãŸã„</a></li><li><a href="#ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ç½®ã„ã¦ãŠããŸã„">ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ç½®ã„ã¦ãŠããŸã„</a></li><li><a href="#ãƒ†ã‚¹ãƒˆã«ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚’ä½¿ã„ãŸã„">ãƒ†ã‚¹ãƒˆã«ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚’ä½¿ã„ãŸã„</a></li><li><a href="#ãƒ–ãƒ©ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ãƒ†ã‚¹ãƒˆã‚’ã—ãŸã„">ãƒ–ãƒ©ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ãƒ†ã‚¹ãƒˆã‚’ã—ãŸã„</a></li><li><a href="#ç”¨é€”å˜ä½“ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãªã©ã«ã‚ˆã£ã¦ãƒ†ã‚¹ãƒˆã‚’åˆ‡ã‚Šæ›¿ãˆãŸã„">ç”¨é€”(å˜ä½“/ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãªã©)ã«ã‚ˆã£ã¦ãƒ†ã‚¹ãƒˆã‚’åˆ‡ã‚Šæ›¿ãˆãŸã„</a></li><li><a href="#ãƒ¢ãƒƒã‚¯ã‚’ä½¿ã£ã¦ãƒ†ã‚¹ãƒˆã‚’ã—ãŸã„">ãƒ¢ãƒƒã‚¯ã‚’ä½¿ã£ã¦ãƒ†ã‚¹ãƒˆã‚’ã—ãŸã„</a></li><li><a href="#ã‚´ãƒ«ãƒ¼ãƒãƒ³ãƒªãƒ¼ã‚¯ã‚’æ¤œå‡ºã—ãŸã„">ã‚´ãƒ«ãƒ¼ãƒãƒ³ãƒªãƒ¼ã‚¯ã‚’æ¤œå‡ºã—ãŸã„</a></li></ul></li><li><a href="#ã¾ã¨ã‚">ã¾ã¨ã‚</a></li><li><a href="#å‚è€ƒè³‡æ–™">å‚è€ƒè³‡æ–™</a></li></ul><h2 id="ãƒ†ã‚¹ãƒˆãŒã—ãŸã„"><a href="#ãƒ†ã‚¹ãƒˆãŒã—ãŸã„" class="headerlink" title="ãƒ†ã‚¹ãƒˆãŒã—ãŸã„"></a>ãƒ†ã‚¹ãƒˆãŒã—ãŸã„</h2><p>Goã®ãƒ†ã‚¹ãƒˆã¯ <code>go test</code> ã‚³ãƒãƒ³ãƒ‰ã‚’ç”¨ã„ã¦ãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½ã—ã¾ã™ã€‚ãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½ã™ã‚‹é–¢æ•°ã®å‘½åã¯ä»¥ä¸‹ã®ã‚ˆã†ãªå½¢å¼ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestXxx</span><span class="params">(*testing.T)</span></span></span><br></pre></td></tr></table></figure><p><code>TestXxx</code> ã¯ <code>Testxxx</code> ã§ã¯ãƒ€ãƒ¡ã§ã™ã€‚<code>Test_xxx</code> ã¨ã„ã†é–¢æ•°åã§ã‚ã‚Œã°å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚</p><p>ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã¯ <code>xxxx_test.go</code> ã¨ã„ã£ãŸå‘½åã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ãƒ“ãƒ«ãƒ‰æ™‚ã«ã¯é™¤ã‹ã‚Œã¾ã™ã€‚ç°¡å˜ãªãƒ†ã‚¹ãƒˆã‚’è©¦ã—ã¦ã¿ã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>main_test.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"testing"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestAdd</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line"><span class="keyword">type</span> args <span class="keyword">struct</span> &#123;</span><br><span class="line">a <span class="keyword">int</span></span><br><span class="line">b <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line">tests := []<span class="keyword">struct</span> &#123;</span><br><span class="line">name <span class="keyword">string</span></span><br><span class="line">args args</span><br><span class="line">want <span class="keyword">int</span></span><br><span class="line">&#125;&#123;</span><br><span class="line">&#123;</span><br><span class="line">name: <span class="string">"normal"</span>,</span><br><span class="line">args: args&#123;a: <span class="number">1</span>, b: <span class="number">2</span>&#125;,</span><br><span class="line">want: <span class="number">3</span>,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> _, tt := <span class="keyword">range</span> tests &#123;</span><br><span class="line">t.Run(tt.name, <span class="function"><span class="keyword">func</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> got := add(tt.args.a, tt.args.b); got != tt.want &#123;</span><br><span class="line">t.Errorf(<span class="string">"add() = %v, want %v"</span>, got, tt.want)</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://play.golang.org/p/XYrpmljtPrW" target="_blank" rel="noopener">https://play.golang.org/p/XYrpmljtPrW</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -v</span><br><span class="line">=== RUN   TestAdd</span><br><span class="line">=== RUN   TestAdd/normal</span><br><span class="line">--- PASS: TestAdd (0.00s)</span><br><span class="line">    --- PASS: TestAdd/normal (0.00s)</span><br><span class="line">PASS</span><br></pre></td></tr></table></figure><p>ä¸Šè¨˜ã®ãƒ†ã‚¹ãƒˆã¯ TableDrivenTest ã¨ã‚µãƒ–ãƒ†ã‚¹ãƒˆã‚’çµ„ã¿åˆã‚ã›ã¦ã„ã¾ã™ã€‚ã©ã¡ã‚‰ã‚‚ç¾å ´ã§ã‚ˆãä½¿ã‚ã‚Œã¾ã™ã€‚ã‚µãƒ–ãƒ†ã‚¹ãƒˆã‚’ç”¨ã„ã‚‹ã¨å„ãƒ†ã‚¹ãƒˆã”ã¨ã«çµæœãŒã‚ã‹ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ TableDrivenTest ã¯ã•ã¾ã–ã¾ãª Input/Output ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç¶²ç¾…ã™ã‚‹ã®ã«ä¾¿åˆ©ã§ã™ã€‚ä¸Šè¨˜ã®ãƒ†ã‚¹ãƒˆã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«æ›¸ãç›´ã™ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><ul><li><a href="https://github.com/golang/go/wiki/TableDrivenTests" target="_blank" rel="noopener">TableDrivenTests</a></li><li><a href="https://golang.org/pkg/testing/#T.Run" target="_blank" rel="noopener">T.Run</a></li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestAdd</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> add(<span class="number">1</span>, <span class="number">2</span>) != <span class="number">3</span> &#123;</span><br><span class="line">t.Errorf(<span class="string">"add() = %v, want %v"</span>, add(<span class="number">1</span>, <span class="number">2</span>), <span class="number">3</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://play.golang.org/p/-TQObdTOqPA" target="_blank" rel="noopener">https://play.golang.org/p/-TQObdTOqPA</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -v</span><br><span class="line">=== RUN   TestAdd</span><br><span class="line">--- PASS: TestAdd (0.00s)</span><br><span class="line">PASS</span><br></pre></td></tr></table></figure><h2 id="ãƒ†ã‚¹ãƒˆã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ãŸã„"><a href="#ãƒ†ã‚¹ãƒˆã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ãŸã„" class="headerlink" title="ãƒ†ã‚¹ãƒˆã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ãŸã„"></a>ãƒ†ã‚¹ãƒˆã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ãŸã„</h2><p>æ™‚é–“ãŒã‹ã‹ã‚‹ãƒ†ã‚¹ãƒˆãªã©ã€è‡ªå‹•ãƒ†ã‚¹ãƒˆãªã©ã§ã¯ãƒ†ã‚¹ãƒˆã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ãŸã„å ´åˆãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚æ¬¡ã®ã‚ˆã†ãªã‚ã‚‹æ¡ä»¶ã®å ´åˆã¯å‡¦ç†ã«ã‚ã¡ã‚ƒãã¡ã‚ƒæ™‚é–“ãŒã‹ã‹ã‚‹ä¾‹ã‚’è€ƒãˆã¦ã¿ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">time.Sleep(<span class="number">365</span> * <span class="number">24</span> * time.Hour)</span><br><span class="line"><span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã“ã®ãƒ†ã‚¹ãƒˆã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ãŸã„ã¨ã—ã¾ã™ã€‚ãã®å ´åˆã¯ <code>func (c *T) Skip(args ...interface{})</code> ã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã‚‹ã“ã¨ã§ã‚¹ã‚­ãƒƒãƒ—ã§ãã¾ã™ã€‚</p><p>ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã«ä»¥ä¸‹ã‚’è¿½åŠ ã—ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">b: <span class="number">2</span>,</span><br><span class="line">&#125;,</span><br><span class="line">want: <span class="number">3</span>,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> _, tt := <span class="keyword">range</span> tests &#123;</span><br><span class="line">t.Run(tt.name, <span class="function"><span class="keyword">func</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line"><span class="comment">// ä»¥ä¸‹ã‚’è¿½åŠ </span></span><br><span class="line"><span class="comment">// ---------------------------------</span></span><br><span class="line"><span class="keyword">if</span> testing.Short() &#123;</span><br><span class="line">t.Skip(<span class="string">"skipping test in short mode."</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ---------------------------------</span></span><br><span class="line"><span class="keyword">if</span> got := add(tt.args.a, tt.args.b); got != tt.want &#123;</span><br><span class="line">t.Errorf(<span class="string">"add() = %v, want %v"</span>, got, tt.want)</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ go test -v --short</span><br><span class="line">=== RUN   Test_add</span><br><span class="line">=== RUN   Test_add/normal_1</span><br><span class="line">--- PASS: Test_add (0.00s)</span><br><span class="line">    --- SKIP: Test_add/normal_1 (0.00s)</span><br><span class="line">        main_test.go:35: skipping test in short mode.</span><br><span class="line">PASS</span><br><span class="line">ok      github.com/d-tsuji/go-sandbox   0.339s</span><br></pre></td></tr></table></figure><p>ãƒ†ã‚¹ãƒˆãŒã‚¹ã‚­ãƒƒãƒ—ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚ã•ã‚‰ã£ã¨ <code>testing.Short()</code> ã¨ã„ã†é–¢æ•°ã‚‚ç”¨ã„ã¾ã—ãŸãŒ <a href="https://golang.org/pkg/testing/#Short" target="_blank" rel="noopener"><code>Short()</code></a> ã¯ <code>testing</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«å«ã¾ã‚Œã¦ã„ã‚‹é–¢æ•°ã§ã€<code>--short</code> ãƒ•ãƒ©ã‚°ãŒã‚»ãƒƒãƒˆã•ã‚Œã¦ã„ã‚‹ã¨ true ã«ãªã‚Šã¾ã™ã€‚ãã®ãŸã‚ãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½ã™ã‚‹ã¨ãã« <code>--short</code> ã¨ã„ã†ãƒ•ãƒ©ã‚°ã‚’ä»˜ä¸ã—ãŸã¨ãã ã‘ãƒ†ã‚¹ãƒˆãŒã‚¹ã‚­ãƒƒãƒ—ã•ã‚Œã‚‹ã€ãã†ã§ãªã„ã¨ãã¯ã‚¹ã‚­ãƒƒãƒ—ã•ã‚Œãšãƒ†ã‚¹ãƒˆãŒå®Ÿæ–½ã•ã‚Œã‚‹ã€ã¨ã„ã†ã‚ˆã†ã«ä½¿ã„åˆ†ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã‚‚ãƒ†ã‚¹ãƒˆã®ã‚¹ã‚­ãƒƒãƒ—ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã®ã‚’è‰²ã€…è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä»¥ä¸‹ã¯ <a href="https://github.com/golang/go/blob/master/src/io/ioutil/ioutil_test.go#L68-L71" target="_blank" rel="noopener"><code>io/ioutil/ioutil_test.go</code></a> ã‹ã‚‰ã®æŠœç²‹ã§ã™ã€‚ç‰¹å®šã®æ¡ä»¶ã‚’æº€ãŸã™å ´åˆã«ãƒ†ã‚¹ãƒˆã‚’ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹ã‚ˆã†ã«å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>io/ioutil/ioutil_test.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestReadOnlyWriteFile</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> os.Getuid() == <span class="number">0</span> &#123;</span><br><span class="line">t.Skipf(<span class="string">"Root can write to read-only files anyway, so skip the read-only test."</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br></pre></td></tr></table></figure><h2 id="ãƒ†ã‚¹ãƒˆã‚’ä¸¦åˆ—ã«å®Ÿæ–½ã—ãŸã„"><a href="#ãƒ†ã‚¹ãƒˆã‚’ä¸¦åˆ—ã«å®Ÿæ–½ã—ãŸã„" class="headerlink" title="ãƒ†ã‚¹ãƒˆã‚’ä¸¦åˆ—ã«å®Ÿæ–½ã—ãŸã„"></a>ãƒ†ã‚¹ãƒˆã‚’ä¸¦åˆ—ã«å®Ÿæ–½ã—ãŸã„</h2><p>ä»¥ä¸‹ã®ã‚ˆã†ãªè¬ã« sleep ã™ã‚‹å®Ÿè£…ãŒã‚ã‚‹ã¨ã—ã¾ã™ã€‚ãƒ†ã‚¹ãƒˆã‚’ä¸¦åˆ—ã«å®Ÿæ–½ã—ãŸã„ã¨ã—ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">time.Sleep(time.Duration(a+b) * time.Second)</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸¦åˆ—åŒ–ã›ãšã€é€æ¬¡ã‚µãƒ–ãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½ã™ã‚‹ã¨ 3 + 5 + 7 = 15 ã‹ã‚‰ç´„ 15 ç§’ãƒ†ã‚¹ãƒˆå®Ÿæ–½ã«æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Test_add</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line"><span class="keyword">type</span> args <span class="keyword">struct</span> &#123;</span><br><span class="line">a <span class="keyword">int</span></span><br><span class="line">b <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line">tests := []<span class="keyword">struct</span> &#123;</span><br><span class="line">name <span class="keyword">string</span></span><br><span class="line">args args</span><br><span class="line">want <span class="keyword">int</span></span><br><span class="line">&#125;&#123;</span><br><span class="line">&#123;<span class="string">"normal_1"</span>, args&#123;<span class="number">1</span>, <span class="number">2</span>&#125;, <span class="number">3</span>&#125;,</span><br><span class="line">&#123;<span class="string">"normal_2"</span>, args&#123;<span class="number">2</span>, <span class="number">3</span>&#125;, <span class="number">5</span>&#125;,</span><br><span class="line">&#123;<span class="string">"normal_3"</span>, args&#123;<span class="number">3</span>, <span class="number">4</span>&#125;, <span class="number">7</span>&#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> _, tt := <span class="keyword">range</span> tests &#123;</span><br><span class="line">t.Run(tt.name, <span class="function"><span class="keyword">func</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> got := add(tt.args.a, tt.args.b); got != tt.want &#123;</span><br><span class="line">t.Errorf(<span class="string">"add() = %v, want %v"</span>, got, tt.want)</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -v</span><br><span class="line">=== RUN   Test_add</span><br><span class="line">=== RUN   Test_add/normal_1</span><br><span class="line">=== RUN   Test_add/normal_2</span><br><span class="line">=== RUN   Test_add/normal_3</span><br><span class="line">--- PASS: Test_add (15.01s)</span><br><span class="line">    --- PASS: Test_add/normal_1 (3.00s)</span><br><span class="line">    --- PASS: Test_add/normal_2 (5.00s)</span><br><span class="line">    --- PASS: Test_add/normal_3 (7.00s)</span><br><span class="line">PASS</span><br><span class="line">ok      github.com/d-tsuji/go-sandbox   15.315s</span><br></pre></td></tr></table></figure><p>ä¸¦åˆ—ã«ãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½ã™ã‚‹ã«ã¯ <code>func (t *T) Parallel()</code> ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä¸Šè¨˜ã®ãƒ†ã‚¹ãƒˆã« <code>tt := tt</code> ã¨ <code>t.Parallel()</code> ã‚’è¿½è¨˜ã—ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> _, tt := <span class="keyword">range</span> tests &#123;</span><br><span class="line"><span class="comment">// ä»¥ä¸‹ã‚’è¿½åŠ </span></span><br><span class="line"><span class="comment">// ---------</span></span><br><span class="line">tt := tt</span><br><span class="line"><span class="comment">// ---------</span></span><br><span class="line">t.Run(tt.name, <span class="function"><span class="keyword">func</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line"><span class="comment">// ä»¥ä¸‹ã‚’è¿½åŠ </span></span><br><span class="line"><span class="comment">// -----------</span></span><br><span class="line">t.Parallel()</span><br><span class="line"><span class="comment">// -----------</span></span><br><span class="line"><span class="keyword">if</span> got := add(tt.args.a, tt.args.b); got != tt.want &#123;</span><br><span class="line">t.Errorf(<span class="string">"add() = %v, want %v"</span>, got, tt.want)</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šè¨˜ã®å®Ÿè£…ã‚’ç”¨ã„ã¦ãƒ†ã‚¹ãƒˆã‚’ã—ã¾ã™ã€‚ã™ã‚‹ã¨ãƒ†ã‚¹ãƒˆãŒä¸¦åˆ—ã«å®Ÿæ–½ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚çµæœã¨ã—ã¦ãƒ†ã‚¹ãƒˆã«ã‹ã‹ã£ãŸæ™‚é–“ã¯ç´„ 7 ç§’ã«ãªã‚Šã¾ã—ãŸã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -v</span><br><span class="line">=== RUN   Test_add</span><br><span class="line">=== RUN   Test_add/normal_1</span><br><span class="line">=== PAUSE Test_add/normal_1</span><br><span class="line">=== RUN   Test_add/normal_2</span><br><span class="line">=== PAUSE Test_add/normal_2</span><br><span class="line">=== RUN   Test_add/normal_3</span><br><span class="line">=== PAUSE Test_add/normal_3</span><br><span class="line">=== CONT  Test_add/normal_1</span><br><span class="line">=== CONT  Test_add/normal_3</span><br><span class="line">=== CONT  Test_add/normal_2</span><br><span class="line">--- PASS: Test_add (0.00s)</span><br><span class="line">    --- PASS: Test_add/normal_1 (3.00s)</span><br><span class="line">    --- PASS: Test_add/normal_2 (5.00s)</span><br><span class="line">    --- PASS: Test_add/normal_3 (7.00s)</span><br><span class="line">PASS</span><br><span class="line">ok      github.com/d-tsuji/go-sandbox   7.317s</span><br></pre></td></tr></table></figure><p>ãƒ«ãƒ¼ãƒ—æ™‚ã«å‰²ã‚Šå½“ã¦ã¦ã„ã‚‹ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•° <code>tt</code> ã‚’æ•æ‰ã™ã‚‹ã“ã¨ã¯é‡è¦ã§ã™ã€‚Go ã§ã¯ãƒ«ãƒ¼ãƒ—ã§ç”¨ã„ã‚‰ã‚Œã‚‹å¤‰æ•°ã¯åŒã˜ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ä½¿ã„ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">b := []<span class="keyword">byte</span>(<span class="string">"abcde"</span>)</span><br><span class="line"><span class="keyword">for</span> i, c := <span class="keyword">range</span> b &#123;</span><br><span class="line">fmt.Printf(<span class="string">"i: %#v, c: %#v ------- &amp;i: %#v, &amp;c: %#v\n"</span>, i, <span class="keyword">string</span>(c), &amp;i, &amp;c)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// å¤‰æ•°ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒã™ã¹ã¦åŒã˜ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å‚ç…§ã—ã¦ã„ã‚‹</span><br><span class="line">i: 0, c: <span class="string">"a"</span> ------- &amp;i: (*int)(0x40e020), &amp;c: (*uint8)(0x40e024)</span><br><span class="line">i: 1, c: <span class="string">"b"</span> ------- &amp;i: (*int)(0x40e020), &amp;c: (*uint8)(0x40e024)</span><br><span class="line">i: 2, c: <span class="string">"c"</span> ------- &amp;i: (*int)(0x40e020), &amp;c: (*uint8)(0x40e024)</span><br><span class="line">i: 3, c: <span class="string">"d"</span> ------- &amp;i: (*int)(0x40e020), &amp;c: (*uint8)(0x40e024)</span><br><span class="line">i: 4, c: <span class="string">"e"</span> ------- &amp;i: (*int)(0x40e020), &amp;c: (*uint8)(0x40e024)</span><br></pre></td></tr></table></figure><p><a href="https://play.golang.org/p/_tSALjq8yZ6" target="_blank" rel="noopener">https://play.golang.org/p/_tSALjq8yZ6</a></p><p>ãã®ãŸã‚ã€ãƒ†ã‚¹ãƒˆã‚’ä¸¦åˆ—ã«å®Ÿè¡Œã™ã‚‹ã¨ãã¯ <code>tt := tt</code> ãªã©ã¨ã—ã¦å¤‰æ•°ã‚’ã‚·ãƒ£ãƒ‰ã‚¦ã‚¤ãƒ³ã‚°ã—ã€ä¸¦åˆ—ã§å®Ÿè¡Œã—ã¦ã„ã‚‹ãƒ†ã‚¹ãƒˆã«å½±éŸ¿ãŒãªã„ã‚ˆã†ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ãŸã ã—ã€ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹è‡ªä½“ãŒãã‚‚ãã‚‚ä¸¦åˆ—ã«å®Ÿè¡Œã§ããªã„å ´åˆã€ä¾‹ãˆã°ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¸Šã®ãƒ†ãƒ¼ãƒ–ãƒ«ã¸ã® UPDATE ã‚„ INSERT ãŒç™ºç”Ÿã—ã€ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã§ç«¶åˆã™ã‚‹å ´åˆã€ãƒ†ã‚¹ãƒˆã‚’ä¸¦åˆ—ã«å®Ÿè¡Œã™ã‚‹ã“ã¨ã¯ã§ããªã„ãŸã‚ã€æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚</p><h2 id="ãƒ†ã‚¹ãƒˆã®å‰å‡¦ç†ã‚„å¾Œå‡¦ç†ã‚’å®Ÿæ–½ã—ãŸã„"><a href="#ãƒ†ã‚¹ãƒˆã®å‰å‡¦ç†ã‚„å¾Œå‡¦ç†ã‚’å®Ÿæ–½ã—ãŸã„" class="headerlink" title="ãƒ†ã‚¹ãƒˆã®å‰å‡¦ç†ã‚„å¾Œå‡¦ç†ã‚’å®Ÿæ–½ã—ãŸã„"></a>ãƒ†ã‚¹ãƒˆã®å‰å‡¦ç†ã‚„å¾Œå‡¦ç†ã‚’å®Ÿæ–½ã—ãŸã„</h2><p>ãƒ†ã‚¹ãƒˆã‚’ã—ã¦ã„ã‚‹ã¨ã€å‰å‡¦ç†ã‚„å¾Œå‡¦ç†ã‚’ã—ãŸã„å ´åˆãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚ä¸»ãªä¾‹ã® 1 ã¤ã¨ã—ã¦ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®å‡¦ç†åŒ–ãŒã‚ã‚‹ã§ã—ã‚‡ã†ã€‚ãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½ã™ã‚‹å‰å‡¦ç†ã¨ã—ã¦ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’ INSERT ã—ã¦ãŠã„ã¦ã€ãƒ†ã‚¹ãƒˆå®Ÿæ–½å¾Œã«å¯¾è±¡ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã™ã‚‹ã€ã¨ã„ã£ãŸã‚‚ã®ã§ã™ã€‚</p><p>ãã®ã‚ˆã†ãªå…±é€šçš„ãªå‰å‡¦ç†ã‚„å¾Œå‡¦ç†ã‚’å®Ÿæ–½ã—ãŸã„å ´åˆã¯ </p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestMain</span><span class="params">(m *testing.M)</span></span></span><br></pre></td></tr></table></figure><p>é–¢æ•°ã‚’ç”¨ã„ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>ä¾‹ã‚’è¦‹ã¦ã¿ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Println(<span class="string">"ãªã‚“ã‚‰ã‹ã®å‡¦ç†"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹ã®ã‚ˆã†ã« <code>TestMain</code> ã‚’ç”¨ã„ã¦ãƒ†ã‚¹ãƒˆã‚’åˆ¶å¾¡ã™ã‚‹ã¨ãƒ†ã‚¹ãƒˆã®å‰å¾Œ(ä»Šå›ã®å ´åˆã¯ <code>f()</code> ã®å‰å¾Œ)ã«å‡¦ç†ã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚<code>m.Run()</code> ã®å®Ÿè¡Œçµæœã‚’å–å¾—ã—ã¦ <code>os.Exit()</code> ã™ã‚‹ã®ãŒæ…£ç”¨çš„ã§ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Test_f</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">f()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestMain</span><span class="params">(m *testing.M)</span></span> &#123;</span><br><span class="line">fmt.Println(<span class="string">"å‰å‡¦ç†"</span>)</span><br><span class="line">status := m.Run()</span><br><span class="line">    fmt.Println(<span class="string">"å¾Œå‡¦ç†"</span>)</span><br><span class="line">    </span><br><span class="line">    os.Exit(status)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ go <span class="built_in">test</span></span><br><span class="line">å‰å‡¦ç†</span><br><span class="line">ãªã‚“ã‚‰ã‹ã®å‡¦ç†</span><br><span class="line">PASS</span><br><span class="line">å¾Œå‡¦ç†</span><br><span class="line">ok      github.com/d-tsuji/go-sandbox   0.298s</span><br></pre></td></tr></table></figure><p>å‚è€ƒã¾ã§ã« <code>google/trillian</code> ã¨ã„ã† OSS ã§ <code>TestMain</code> ãŒã©ã®ã‚ˆã†ã«ä½¿ã‚ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ã¿ã¾ã™ã€‚ä»¥ä¸‹ã¯ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ <code>openTestDBOrDie()</code> ã¨ã—ã¦ä½œæˆã—ã€ãƒ†ã‚¹ãƒˆçµ‚äº†å¾Œã« <code>done(context.Background())</code> ã¨ã„ã†å‡¦ç†ã‚’å®Ÿæ–½ã—ã¦ã„ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestMain</span><span class="params">(m *testing.M)</span></span> &#123;</span><br><span class="line">flag.Parse()</span><br><span class="line"><span class="keyword">if</span> !testdb.PGAvailable() &#123;</span><br><span class="line">glog.Errorf(<span class="string">"PG not available, skipping all PG storage tests"</span>)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> done <span class="function"><span class="keyword">func</span><span class="params">(context.Context)</span></span></span><br><span class="line"><span class="function"><span class="title">db</span>, <span class="title">done</span> = <span class="title">openTestDBOrDie</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">status</span> := <span class="title">m</span>.<span class="title">Run</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="title">done</span><span class="params">(context.Background()</span>)</span></span><br><span class="line"><span class="function"><span class="title">os</span>.<span class="title">Exit</span><span class="params">(status)</span></span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure><p><a href="https://github.com/google/trillian/blob/master/storage/postgres/storage_test.go#L168-L181" target="_blank" rel="noopener">https://github.com/google/trillian/blob/master/storage/postgres/storage_test.go#L168-L181</a></p><ul><li><strong>å¾Œå‡¦ç†ã«ã¯ <code>T.Cleanup</code> ãŒä¾¿åˆ©</strong></li></ul><p>Go1.14 ã§ãƒ†ã‚¹ãƒˆæ™‚ã«ç”Ÿæˆã—ãŸãƒªã‚½ãƒ¼ã‚¹ã‚’ä¾¿åˆ©ã«å¾Œå‡¦ç†ã§ãã‚‹é–¢æ•°ãŒç™»å ´ã—ã¾ã—ãŸã€‚<a href="https://golang.org/pkg/testing/#T.Cleanup" target="_blank" rel="noopener">T.Cleanup</a> ã§ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *T)</span> <span class="title">Cleanup</span><span class="params">(f <span class="keyword">func</span>()</span>)</span></span><br></pre></td></tr></table></figure><p>ãƒªã‚½ãƒ¼ã‚¹ã®å¾Œå‡¦ç†ã¨ã„ã†æ„å‘³ã§ã¯ <code>defer</code> ã‚’ç”¨ã„ã¦ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã§ãã‚‹ã®ã§ã€ä»Šã¾ã§ã¨ã‚ã¾ã‚Šå¤‰ã‚ã‚‰ãªã„ã®ã§ã¯ï¼Ÿã¨æ€ã†ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚<code>T.Cleanup</code> ã‚’ä¾¿åˆ©ã«ä½¿ãˆã‚‹ã“ã¨ãŒå®Ÿæ„Ÿã§ãã‚‹ã‚·ãƒ¼ãƒ³ã® 1 ã¤ã¨ã—ã¦ã€ãƒ†ã‚¹ãƒˆã«å¿…è¦ãªå‰å‡¦ç†ã‚’ãƒ†ã‚¹ãƒˆã¨ã¯åˆ¥ã®é–¢æ•°ã§å®Ÿæ–½ã—ã¦ã„ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚</p><p>ç°¡å˜ãªä¾‹ã§ã™ãŒã€ãƒ†ã‚¹ãƒˆã®å‰æº–å‚™ã¨ã—ã¦ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹å¿…è¦ãŒã‚ã£ãŸã¨ã—ã¦ã€ãƒ†ã‚¹ãƒˆçµ‚äº†å¾Œã«å‰Šé™¤ã—ãŸã„å ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ãªå®Ÿè£…ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚TempFile é–¢æ•°ã§ã¯ãƒªã‚½ãƒ¼ã‚¹ã‚’ã‚¯ãƒ­ãƒ¼ã‚ºã™ã‚‹å‡¦ç†ã‚’å‘¼ã³å‡ºã—å…ƒã«è¿”å´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€å‘¼ã³å‡ºã—å…ƒã§å¾Œå‡¦ç†ã¨ã—ã¦ teardown é–¢æ•°ã‚’å‘¼ã³å‡ºã™ã“ã¨ã«ãªã‚Šã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>testutil/file.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TempFile</span><span class="params">(t *testing.T, content []<span class="keyword">byte</span>)</span> <span class="params">(name <span class="keyword">string</span>, teardown <span class="keyword">func</span>()</span>)</span> &#123;</span><br><span class="line">file, err := ioutil.TempFile(<span class="string">""</span>, <span class="string">"test"</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">t.Error(err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> err = ioutil.WriteFile(file.Name(), content, <span class="number">0644</span>); err != <span class="literal">nil</span> &#123;</span><br><span class="line">t.Error(err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> file.Name(), <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">syscall.Unlink(file.Name())</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‘¼ã³å‡ºã—å…ƒã®å‡¦ç†ã§ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">file, <span class="built_in">delete</span> := testutil.TempFile(t, <span class="literal">nil</span> <span class="comment">/* something */</span>)</span><br><span class="line"><span class="keyword">defer</span> <span class="built_in">delete</span>()</span><br></pre></td></tr></table></figure><p><code>T.Cleanup</code> ã‚’ç”¨ã„ã‚‹ã¨å‰å‡¦ç†ã‚’å®Ÿæ–½ã™ã‚‹é–¢æ•°å†…ã§ãƒªã‚½ãƒ¼ã‚¹ã®å¾Œå‡¦ç†ãŒå®Ÿæ–½ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚TempFile é–¢æ•°ã®ä¾‹ã§ã‚ã‚Œã°ã€ä»¥ä¸‹ã®ã‚ˆã†ã« <code>t.Cleanup</code> ã‚’ç”¨ã„ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚é–¢æ•°ã‹ã‚‰ return ã—ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å‘¼ã³å‡ºã•ã‚Œã‚‹ <code>defer</code> ã¨ã¯ç•°ãªã‚Šã€ãƒ†ã‚¹ãƒˆãŒå®Œäº†ã—ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ Cleanup å‡¦ç†ãŒå‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TempFile</span><span class="params">(t *testing.T, content []<span class="keyword">byte</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">file, err := ioutil.TempFile(<span class="string">""</span>, <span class="string">"test"</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">t.Error(err)</span><br><span class="line">&#125;</span><br><span class="line">t.Cleanup(<span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123; syscall.Unlink(file.Name()) &#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> err = ioutil.WriteFile(file.Name(), content, <span class="number">0644</span>); err != <span class="literal">nil</span> &#123;</span><br><span class="line">t.Error(err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> file.Name()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ãƒ•ã‚¡ã‚¤ãƒ«ã§ãªãã¦ã‚‚ã€ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚„ HTTP ã‚µãƒ¼ãƒã® teardown ãªã©ã€ãƒ†ã‚¹ãƒˆã«å¿…è¦ãªãƒªã‚½ãƒ¼ã‚¹ã® teardown å‡¦ç†ã‚’åŒã˜é–¢æ•°å†…ã«è¨˜è¿°ã™ã‚‹ã“ã¨ãŒã§ãã€ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ãŒç°¡æ½”ã«ãªã‚Šã¾ã™ã€‚</p><h2 id="ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’å–å¾—ã—ãŸã„"><a href="#ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’å–å¾—ã—ãŸã„" class="headerlink" title="ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’å–å¾—ã—ãŸã„"></a>ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’å–å¾—ã—ãŸã„</h2><p>æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’å–å¾—ã—ã¦ã¿ã¾ã™ã€‚ä»Šå›ã¯ <code>io</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸( <code>ioutil</code> ã‚‚å«ã‚€)ã®ãƒ†ã‚¹ãƒˆã®ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’å–å¾—ã™ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚ã‚«ãƒãƒ¬ãƒƒã‚¸ã¯ <code>go test</code> ã‚³ãƒãƒ³ãƒ‰ã®å¼•æ•°ã¨ã—ã¦ <code>-covermode=count</code> ã‚’ä»˜ä¸ã™ã‚Œã°å–å¾—ã§ãã¾ã™ã€‚ <code>-coverprofile=c.out</code> ã§çµæœã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã—ã¾ã™ã€‚</p><p>Go ã®ã‚³ãƒ¼ãƒ‰ã¯ <code>/Go/src</code> ã«ã‚ã‚‹ã‚‚ã®ã¨ã—ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’å–å¾—ã—ã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> io/... -covermode=count -coverprofile=c.out</span><br><span class="line">ok      io      0.620s  coverage: 95.2% of statements</span><br><span class="line">ok      io/ioutil       0.311s  coverage: 68.9% of statements</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ä¸Šè¨˜ã®å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç°¡å˜ã« HTML ã§å¯è¦–åŒ–ã§ãã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ go tool cover -html=c.out -o coverage.html</span><br></pre></td></tr></table></figure><p>ã“ã®ã‚ˆã†ãªæ„Ÿã˜ã§ã©ã®ãƒ‘ã‚¹ãŒé€šã£ã¦ã„ãªã„ã‹ç¢ºèªã§ãã¾ã™ã€‚</p><img src="/images/20200601/photo_20200601_01.png"><h2 id="ã‚ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã®ãƒ†ã‚¹ãƒˆã‚’ã™ã¹ã¦å®Ÿæ–½ã—ãŸã„"><a href="#ã‚ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã®ãƒ†ã‚¹ãƒˆã‚’ã™ã¹ã¦å®Ÿæ–½ã—ãŸã„" class="headerlink" title="ã‚ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã®ãƒ†ã‚¹ãƒˆã‚’ã™ã¹ã¦å®Ÿæ–½ã—ãŸã„"></a>ã‚ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã®ãƒ†ã‚¹ãƒˆã‚’ã™ã¹ã¦å®Ÿæ–½ã—ãŸã„</h2><p>ãŸã¨ãˆã°æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾‹ã ã¨ã€<code>io</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ãƒ†ã‚¹ãƒˆå¯¾è±¡ã«å«ã‚ã‚‹ãŒã€ãã®ä»–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ãƒ†ã‚¹ãƒˆå¯¾è±¡ã«å«ã‚ãªã„â€¦ã¨ã„ã£ãŸè¦é ˜ã§ã™ã€‚ã“ã‚Œã¯ãƒ†ã‚¹ãƒˆã®ã‚³ãƒãƒ³ãƒ‰ã¨ã„ã†ã‚ˆã‚Šã¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚³ãƒãƒ³ãƒ‰ã«ãªã‚Šã¾ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã« <code>...</code> ã®æ–‡å­—åˆ—ã‚’ç”¨ã„ã¦ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ã¨ã—ã¦ãƒ†ã‚¹ãƒˆå¯¾è±¡ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã§ãã¾ã™ã€‚è©³ç´°ã¯ <code>go help packages</code> ã¨ã™ã‚‹ã“ã¨ã§ç¢ºèªã§ãã¾ã™ã€‚</p><p>ä»¥ä¸‹ã®å ´åˆã¯ <code>io</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«å«ã¾ã‚Œã‚‹ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go <span class="built_in">test</span> io/...</span><br></pre></td></tr></table></figure><p>åŒæ§˜ã« <code>io</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«å«ã¾ã‚Œã‚‹ <code>ioutil</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã¿ãƒ†ã‚¹ãƒˆã—ãŸã„å ´åˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -v io/ioutil/...</span><br><span class="line">=== RUN   TestReadFile</span><br><span class="line">--- PASS: TestReadFile (0.00s)</span><br><span class="line">=== RUN   TestWriteFile</span><br><span class="line">--- PASS: TestWriteFile (0.00s)</span><br><span class="line">=== RUN   TestReadDir</span><br><span class="line">--- PASS: TestReadDir (0.00s)</span><br><span class="line">=== RUN   TestTempFile</span><br><span class="line">--- PASS: TestTempFile (0.00s)</span><br><span class="line">=== RUN   TestTempFile_pattern</span><br><span class="line">--- PASS: TestTempFile_pattern (0.00s)</span><br><span class="line">=== RUN   TestTempDir</span><br><span class="line">--- PASS: TestTempDir (0.00s)</span><br><span class="line">=== RUN   TestTempDir_BadDir</span><br><span class="line">--- PASS: TestTempDir_BadDir (0.00s)</span><br><span class="line">=== RUN   ExampleReadAll</span><br><span class="line">--- PASS: ExampleReadAll (0.00s)</span><br><span class="line">=== RUN   ExampleReadFile</span><br><span class="line">--- PASS: ExampleReadFile (0.00s)</span><br><span class="line">PASS</span><br><span class="line">ok      io/ioutil       0.342s</span><br></pre></td></tr></table></figure><h2 id="ä¸€éƒ¨ã®ãƒ†ã‚¹ãƒˆã®ã¿å®Ÿæ–½ã—ãŸã„"><a href="#ä¸€éƒ¨ã®ãƒ†ã‚¹ãƒˆã®ã¿å®Ÿæ–½ã—ãŸã„" class="headerlink" title="ä¸€éƒ¨ã®ãƒ†ã‚¹ãƒˆã®ã¿å®Ÿæ–½ã—ãŸã„"></a>ä¸€éƒ¨ã®ãƒ†ã‚¹ãƒˆã®ã¿å®Ÿæ–½ã—ãŸã„</h2><p>å®Ÿè¡Œå¯¾è±¡ã®ãƒ†ã‚¹ãƒˆã‚’æŠ½å‡ºã™ã‚‹ã«ã¯ <code>-run</code> ãƒ•ãƒ©ã‚°ã‚’ç”¨ã„ã‚‹ã“ã¨ã§ãã¾ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«æ­£è¦è¡¨ç¾ã‚’ç”¨ã„ã¦ã€ä¸€è‡´ã™ã‚‹ãƒ†ã‚¹ãƒˆã®ã¿ã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-run regexp</span><br></pre></td></tr></table></figure><p>ä¾‹ãˆã° <code>io</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ Pipe ã«é–¢ã™ã‚‹ãƒ†ã‚¹ãƒˆã®ã¿å®Ÿè¡Œã—ãŸã„ã¨ã—ã¾ã—ã‚‡ã†ã€‚Pipe ã«é–¢ã™ã‚‹ãƒ†ã‚¹ãƒˆã¯ãƒ†ã‚¹ãƒˆé–¢æ•°ã« <code>Pipe</code> ã®æ–‡å­—åˆ—ãŒå«ã¾ã‚Œã‚‹ã‚‚ã®ã¨ã—ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«å®Ÿè¡Œã™ã‚‹ã¨ãƒ†ã‚¹ãƒˆã®é–¢æ•°åã« <code>Pipe</code> ãŒå«ã¾ã‚Œã‚‹ãƒ†ã‚¹ãƒˆã®ã¿å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">go <span class="built_in">test</span> -v io/... -run Pipe</span><br><span class="line">=== RUN   TestPipe1</span><br><span class="line">--- PASS: TestPipe1 (0.00s)</span><br><span class="line">=== RUN   TestPipe2</span><br><span class="line">--- PASS: TestPipe2 (0.00s)</span><br><span class="line">=== RUN   TestPipe3</span><br><span class="line">--- PASS: TestPipe3 (0.00s)</span><br><span class="line">=== RUN   TestPipeReadClose</span><br><span class="line">--- PASS: TestPipeReadClose (0.01s)</span><br><span class="line">=== RUN   TestPipeReadClose2</span><br><span class="line">--- PASS: TestPipeReadClose2 (0.00s)</span><br><span class="line">=== RUN   TestPipeWriteClose</span><br><span class="line">--- PASS: TestPipeWriteClose (0.01s)</span><br><span class="line">=== RUN   TestPipeWriteClose2</span><br><span class="line">--- PASS: TestPipeWriteClose2 (0.00s)</span><br><span class="line">=== RUN   TestPipeCloseError</span><br><span class="line">--- PASS: TestPipeCloseError (0.00s)</span><br><span class="line">=== RUN   TestPipeConcurrent</span><br><span class="line">=== RUN   TestPipeConcurrent/Write</span><br><span class="line">=== RUN   TestPipeConcurrent/Read</span><br><span class="line">--- PASS: TestPipeConcurrent (0.00s)</span><br><span class="line">    --- PASS: TestPipeConcurrent/Write (0.00s)</span><br><span class="line">    --- PASS: TestPipeConcurrent/Read (0.00s)</span><br><span class="line">=== RUN   ExamplePipe</span><br><span class="line">--- PASS: ExamplePipe (0.00s)</span><br><span class="line">PASS</span><br><span class="line">ok      io      0.345s</span><br><span class="line">testing: warning: no tests to run</span><br><span class="line">PASS</span><br><span class="line">ok      io/ioutil       0.575s [no tests to run]</span><br></pre></td></tr></table></figure><h2 id="ãƒ†ã‚¹ãƒˆã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å‰Šé™¤ã—ãŸã„"><a href="#ãƒ†ã‚¹ãƒˆã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å‰Šé™¤ã—ãŸã„" class="headerlink" title="ãƒ†ã‚¹ãƒˆã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å‰Šé™¤ã—ãŸã„"></a>ãƒ†ã‚¹ãƒˆã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å‰Šé™¤ã—ãŸã„</h2><p>Go ã§ãƒ†ã‚¹ãƒˆã‚’ã—ã¦ã„ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã« <code>cached</code> ã®æ–‡å­—åˆ—ã‚’è¦‹ã‚‹ã“ã¨ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚ãƒ†ã‚¹ãƒˆã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å‰Šé™¤ã™ã‚‹ã«ã¯ã©ã®ã‚ˆã†ã«ã™ã‚Œã°è‰¯ã„ã§ã—ã‚‡ã†ã‹ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> io/... -run Pipe</span><br><span class="line">ok      io      (cached)</span><br><span class="line">ok      io/ioutil       (cached) [no tests to run]</span><br></pre></td></tr></table></figure><p>ãƒ†ã‚¹ãƒˆã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¯ Go1.10 ã‹ã‚‰çµ„ã¿è¾¼ã¾ã‚Œã¾ã—ãŸã€‚ãƒ†ã‚¹ãƒˆã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®è©³ç´°ã¯ <a href="https://golang.org/doc/go1.10#test" target="_blank" rel="noopener">go1.10#test</a> ãŒè©³ã—ã„ã§ã™ã€‚ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä½¿ã‚ãªã„å ´åˆã¯ã‚’æ˜ç¤ºçš„ã« <code>-count=1</code> ã¨æŒ‡å®šã™ã‚Œã°ã‚ˆã„ã§ã™ã€‚<code>-count=1</code> ã¨æ˜ç¤ºçš„ã«æŒ‡å®šã™ã‚‹ã¨ãƒ†ã‚¹ãƒˆã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œãªããªã‚Šã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">go</span> test io/... -run Pipe -count=<span class="number">1</span></span><br><span class="line">ok      io      <span class="number">0.304s</span></span><br><span class="line">ok      io/ioutil       <span class="number">0.563s</span> [no tests to run]</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">go</span> test io/... -run Pipe -count=<span class="number">1</span></span><br><span class="line">ok      io      <span class="number">0.314s</span></span><br><span class="line">ok      io/ioutil       <span class="number">0.576s</span> [no tests to run]</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">go</span> test io/... -run Pipe -count=<span class="number">1</span></span><br><span class="line">ok      io      <span class="number">0.321s</span></span><br><span class="line">ok      io/ioutil       <span class="number">0.575s</span> [no tests to run]</span><br></pre></td></tr></table></figure><p>ã¾ãŸ <code>go clean -cache</code> ã‚’ç”¨ã„ã¦ã‚‚ãƒ“ãƒ«ãƒ‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥å…¨ä½“ã‚’å‰Šé™¤ã™ã‚‹ã“ã¨ãŒã§ãã€ãƒ†ã‚¹ãƒˆã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚‚å‰Šé™¤ã§ãã¾ã™ã€‚</p><h2 id="ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®é››å½¢ã‚’æ¥½ã«ä½œã‚ŠãŸã„"><a href="#ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®é››å½¢ã‚’æ¥½ã«ä½œã‚ŠãŸã„" class="headerlink" title="ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®é››å½¢ã‚’æ¥½ã«ä½œã‚ŠãŸã„"></a>ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®é››å½¢ã‚’æ¥½ã«ä½œã‚ŠãŸã„</h2><p>Tips ã§ã™ãŒ IDE ãªã©ã®æ©Ÿèƒ½ã‚’ä½¿ã†ã¨å°‘ã—ä¾¿åˆ©ã«ãªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ä¾‹ãˆã° GoLand ã®æ©Ÿèƒ½ã‚’ç”¨ã„ã‚‹ã¨ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ TableDrivenTest ã®é››å½¢ã‚’ç”Ÿæˆã—ã¦ãã‚Œã¾ã™ã€‚è©³ç´°ã¯å‰²æ„›ã—ã¾ã™ãŒ VS Code ã‚’ç”¨ã„ã¦é–‹ç™ºã™ã‚‹å ´åˆã§ã‚‚åŒæ§˜ã«é››å½¢ã‚’ç”Ÿæˆã§ãã¾ã™ã€‚</p><img src="/images/20200601/photo_20200601_02.gif"><h2 id="æ§‹é€ ä½“ã€ãƒãƒƒãƒ—ã‚„ã‚¹ãƒ©ã‚¤ã‚¹ã®æ¯”è¼ƒã‚’å®Ÿæ–½ã—ãŸã„"><a href="#æ§‹é€ ä½“ã€ãƒãƒƒãƒ—ã‚„ã‚¹ãƒ©ã‚¤ã‚¹ã®æ¯”è¼ƒã‚’å®Ÿæ–½ã—ãŸã„" class="headerlink" title="æ§‹é€ ä½“ã€ãƒãƒƒãƒ—ã‚„ã‚¹ãƒ©ã‚¤ã‚¹ã®æ¯”è¼ƒã‚’å®Ÿæ–½ã—ãŸã„"></a>æ§‹é€ ä½“ã€ãƒãƒƒãƒ—ã‚„ã‚¹ãƒ©ã‚¤ã‚¹ã®æ¯”è¼ƒã‚’å®Ÿæ–½ã—ãŸã„</h2><p><code>map</code> ã®ã‚­ãƒ¼ã¨å€¤ãŒä¸€è‡´ã—ã¦ã„ã‚‹ã‹ã©ã†ã‹ç¢ºèªã™ã‚‹ã‚ˆã†ãªãƒ†ã‚¹ãƒˆãŒã—ãŸã„ã¨ã—ã¾ã—ã‚‡ã†ã€‚<code>map</code> ã‚„ <code>slice</code> ã¯ <a href="https://golang.org/ref/pec#Comparison_operators" target="_blank" rel="noopener">spec#Comparison_operators</a> ã«ã‚‚ã‚ã‚‹ã‚ˆã†ã«æ¯”è¼ƒæ¼”ç®—å­ã‚’ç”¨ã„ã¦æ¯”è¼ƒã™ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚<code>map</code> ã«å«ã¾ã‚Œã‚‹ã‚­ãƒ¼ã¨å€¤ãŒåŒã˜ã‚‚ã®ã‚’å«ã‚“ã§ã„ã‚‹ã‹ã©ã†ã‹ã¯ãƒ«ãƒ¼ãƒ—ã‚’å›ã—ã¦ç¢ºèªã—ãªã„ã¨ã„ã‘ãªã„ã®ã§ã—ã‚‡ã†ã‹ã€‚</p><p><code>reflect</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«å«ã¾ã‚Œã‚‹ <a href="https://golang.org/pkg/reflect/#DeepEqual" target="_blank" rel="noopener"><code>reflect.DeepEqual</code></a> ã‚’ç”¨ã„ã‚‹ã¨ map ã®ã‚ˆã†ãªæ¯”è¼ƒæ¼”ç®—å­ã§æ¯”è¼ƒã§ããªã„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æ¯”è¼ƒãŒã§ãã¾ã™ã€‚</p><p><code>net/http</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã‚ã‚‹ <code>request_test.go</code> ã®ä¸­ã§ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãªã©ã«ç”¨ã„ã‚‰ã‚Œã‚‹ <code>map</code> (<code>map[string][]string</code> å‹)ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æ¯”è¼ƒã—ã¦åŒå€¤ã‹ã©ã†ã‹ãƒ†ã‚¹ãƒˆã—ã¦ã„ã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>net/http/request_test.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">wantForm := url.Values&#123;</span><br><span class="line"><span class="string">"language"</span>: []<span class="keyword">string</span>&#123;<span class="string">"Go"</span>&#125;,</span><br><span class="line"><span class="string">"name"</span>:     []<span class="keyword">string</span>&#123;<span class="string">"gopher"</span>&#125;,</span><br><span class="line"><span class="string">"skill"</span>:    []<span class="keyword">string</span>&#123;<span class="string">"go-ing"</span>&#125;,</span><br><span class="line"><span class="string">"field1"</span>:   []<span class="keyword">string</span>&#123;<span class="string">"value1"</span>&#125;,</span><br><span class="line"><span class="string">"field2"</span>:   []<span class="keyword">string</span>&#123;<span class="string">"initial-value2"</span>, <span class="string">"value2"</span>&#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> !reflect.DeepEqual(req.Form, wantForm) &#123;</span><br><span class="line">t.Fatalf(<span class="string">"req.Form = %v, want %v"</span>, req.Form, wantForm)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://github.com/golang/go/blob/master/src/net/http/request_test.go#L210-L219" target="_blank" rel="noopener">https://github.com/golang/go/blob/master/src/net/http/request_test.go#L210-L219</a></p><p>Go ã¯è¨€èªè‡ªä½“ã«ãƒ†ã‚¹ãƒ†ã‚£ãƒ³ã‚°ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’æä¾›ã—ã¦ã¾ã›ã‚“ã€‚<a href="https://golang.org/doc/faq#testing_framework" target="_blank" rel="noopener">Where is my favorite helper function for testing?</a> ã«ç†ç”±ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ãŒã€ç«¯çš„ã«è¨€ã†ã¨é–‹ç™ºè€…ãŒé©åˆ‡ã«ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã™ã‚‹ã“ã¨ã¨é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å‡ºåŠ›ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã‚ã‚‹ãŸã‚ã§ã™ã€‚</p><p>ã¨ã¯ã„ãˆè–„ã„ä¾¿åˆ©ãªãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã„ãŸããªã‚‹ã‚·ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã‚ã‚‹ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚<code>reflect.DeepEqual</code> ã‚’ä½¿ã£ãŸåŒå€¤ãƒã‚§ãƒƒã‚¯ã¯ <a href="https://github.com/google/go-cmp" target="_blank" rel="noopener">google/go-cmp</a> ã‚’ä½¿ã†ã¨ã‚ˆã‚Šä¾¿åˆ©ã«ãƒ†ã‚¹ãƒˆãŒã§ãã‚‹ã®ã§ã€ç§ã¯ <code>reflect.DeepEqual</code> ã®ä»£ã‚ã‚Šã¨ã—ã¦ <code>google/go-cmp</code> ã‚’ç”¨ã„ã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚</p><p><code>go-cmp</code> ã®ãƒªãƒã‚¸ãƒˆãƒªã«ã‚ã‚‹æ§‹é€ ä½“ã‚’æ¯”è¼ƒã™ã‚‹ã‚µãƒ³ãƒ—ãƒ«ã®ä¾‹ã‚’è¦‹ã¦ã¿ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ãª <code>net.IP</code> å‹ã‚„ <code>time.Time</code> å‹ã‚’ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«æŒã¤æ§‹é€ ä½“ã®æ¯”è¼ƒã§ã™ã€‚</p><figure class="highlight go"><figcaption><span>example_test.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> (</span><br><span class="line">Gateway <span class="keyword">struct</span> &#123;</span><br><span class="line">SSID      <span class="keyword">string</span></span><br><span class="line">IPAddress net.IP</span><br><span class="line">NetMask   net.IPMask</span><br><span class="line">Clients   []Client</span><br><span class="line">&#125;</span><br><span class="line">Client <span class="keyword">struct</span> &#123;</span><br><span class="line">Hostname  <span class="keyword">string</span></span><br><span class="line">IPAddress net.IP</span><br><span class="line">LastSeen  time.Time</span><br><span class="line">&#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">MakeGatewayInfo</span><span class="params">()</span> <span class="params">(x, y Gateway)</span></span> &#123;</span><br><span class="line">x = Gateway&#123;</span><br><span class="line">SSID:      <span class="string">"CoffeeShopWiFi"</span>,</span><br><span class="line">IPAddress: net.IPv4(<span class="number">192</span>, <span class="number">168</span>, <span class="number">0</span>, <span class="number">1</span>),</span><br><span class="line">NetMask:   net.IPv4Mask(<span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>),</span><br><span class="line">Clients: []Client&#123;&#123;</span><br><span class="line">Hostname:  <span class="string">"ristretto"</span>,</span><br><span class="line">IPAddress: net.IPv4(<span class="number">192</span>, <span class="number">168</span>, <span class="number">0</span>, <span class="number">116</span>),</span><br><span class="line">&#125;, &#123;</span><br><span class="line">Hostname:  <span class="string">"aribica"</span>,</span><br><span class="line">IPAddress: net.IPv4(<span class="number">192</span>, <span class="number">168</span>, <span class="number">0</span>, <span class="number">104</span>),</span><br><span class="line">LastSeen:  time.Date(<span class="number">2009</span>, time.November, <span class="number">10</span>, <span class="number">23</span>, <span class="number">6</span>, <span class="number">32</span>, <span class="number">0</span>, time.UTC),</span><br><span class="line">&#125;, &#123;</span><br><span class="line">Hostname:  <span class="string">"macchiato"</span>,</span><br><span class="line">IPAddress: net.IPv4(<span class="number">192</span>, <span class="number">168</span>, <span class="number">0</span>, <span class="number">153</span>),</span><br><span class="line">LastSeen:  time.Date(<span class="number">2009</span>, time.November, <span class="number">10</span>, <span class="number">23</span>, <span class="number">39</span>, <span class="number">43</span>, <span class="number">0</span>, time.UTC),</span><br><span class="line">&#125;, &#123;</span><br><span class="line">Hostname:  <span class="string">"espresso"</span>,</span><br><span class="line">IPAddress: net.IPv4(<span class="number">192</span>, <span class="number">168</span>, <span class="number">0</span>, <span class="number">121</span>),</span><br><span class="line">&#125;, &#123;</span><br><span class="line">Hostname:  <span class="string">"latte"</span>,</span><br><span class="line">IPAddress: net.IPv4(<span class="number">192</span>, <span class="number">168</span>, <span class="number">0</span>, <span class="number">219</span>),</span><br><span class="line">LastSeen:  time.Date(<span class="number">2009</span>, time.November, <span class="number">10</span>, <span class="number">23</span>, <span class="number">0</span>, <span class="number">23</span>, <span class="number">0</span>, time.UTC),</span><br><span class="line">&#125;, &#123;</span><br><span class="line">Hostname:  <span class="string">"americano"</span>,</span><br><span class="line">IPAddress: net.IPv4(<span class="number">192</span>, <span class="number">168</span>, <span class="number">0</span>, <span class="number">188</span>),</span><br><span class="line">LastSeen:  time.Date(<span class="number">2009</span>, time.November, <span class="number">10</span>, <span class="number">23</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">0</span>, time.UTC),</span><br><span class="line">&#125;&#125;,</span><br><span class="line">&#125;</span><br><span class="line">y = Gateway&#123;</span><br><span class="line">SSID:      <span class="string">"CoffeeShopWiFi"</span>,</span><br><span class="line">IPAddress: net.IPv4(<span class="number">192</span>, <span class="number">168</span>, <span class="number">0</span>, <span class="number">2</span>),</span><br><span class="line">NetMask:   net.IPv4Mask(<span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>),</span><br><span class="line">Clients: []Client&#123;&#123;</span><br><span class="line">Hostname:  <span class="string">"ristretto"</span>,</span><br><span class="line">IPAddress: net.IPv4(<span class="number">192</span>, <span class="number">168</span>, <span class="number">0</span>, <span class="number">116</span>),</span><br><span class="line">&#125;, &#123;</span><br><span class="line">Hostname:  <span class="string">"aribica"</span>,</span><br><span class="line">IPAddress: net.IPv4(<span class="number">192</span>, <span class="number">168</span>, <span class="number">0</span>, <span class="number">104</span>),</span><br><span class="line">LastSeen:  time.Date(<span class="number">2009</span>, time.November, <span class="number">10</span>, <span class="number">23</span>, <span class="number">6</span>, <span class="number">32</span>, <span class="number">0</span>, time.UTC),</span><br><span class="line">&#125;, &#123;</span><br><span class="line">Hostname:  <span class="string">"macchiato"</span>,</span><br><span class="line">IPAddress: net.IPv4(<span class="number">192</span>, <span class="number">168</span>, <span class="number">0</span>, <span class="number">153</span>),</span><br><span class="line">LastSeen:  time.Date(<span class="number">2009</span>, time.November, <span class="number">10</span>, <span class="number">23</span>, <span class="number">39</span>, <span class="number">43</span>, <span class="number">0</span>, time.UTC),</span><br><span class="line">&#125;, &#123;</span><br><span class="line">Hostname:  <span class="string">"espresso"</span>,</span><br><span class="line">IPAddress: net.IPv4(<span class="number">192</span>, <span class="number">168</span>, <span class="number">0</span>, <span class="number">121</span>),</span><br><span class="line">&#125;, &#123;</span><br><span class="line">Hostname:  <span class="string">"latte"</span>,</span><br><span class="line">IPAddress: net.IPv4(<span class="number">192</span>, <span class="number">168</span>, <span class="number">0</span>, <span class="number">221</span>),</span><br><span class="line">LastSeen:  time.Date(<span class="number">2009</span>, time.November, <span class="number">10</span>, <span class="number">23</span>, <span class="number">0</span>, <span class="number">23</span>, <span class="number">0</span>, time.UTC),</span><br><span class="line">&#125;&#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> x, y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã“ã®æ§‹é€ ä½“ãŒåŒå€¤ã‹ã©ã†ã‹ãƒ†ã‚¹ãƒˆã—ã¦ã¿ã¾ã™ã€‚ä¸Šè¨˜ã®å®Ÿè£…ã®é€šã‚Š <code>MakeGatewayInfo</code> ã¯ç•°ãªã‚‹ 2 ã¤ã®å¤‰æ•° <code>x</code> ã¨ <code>y</code> ã‚’è¿”ã™é–¢æ•°ã§ã™ã€‚ã“ã‚Œã‚’ <code>go-cmp</code> ã¨ <code>reflect.DeepEqual</code> ã®ãã‚Œãã‚Œã‚’ç”¨ã„ã¦æ¯”è¼ƒã—ã¦ã¿ã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>example_test.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestMakeGatewayInfoDeepEqual</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">got, want := MakeGatewayInfo()</span><br><span class="line"><span class="keyword">if</span> !reflect.DeepEqual(got, want) &#123;</span><br><span class="line">t.Errorf(<span class="string">"MakeGatewayInfo() got = %v, want %v"</span>, got, want)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestMakeGatewayInfoGoCmp</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">got, want := MakeGatewayInfo()</span><br><span class="line"><span class="keyword">if</span> diff := cmp.Diff(want, got); diff != <span class="string">""</span> &#123;</span><br><span class="line">t.Errorf(<span class="string">"MakeGatewayInfo() mismatch (-want +got):\n%s"</span>, diff)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®Ÿè¡Œã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªçµæœã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> example_test.go</span><br><span class="line">--- FAIL: TestMakeGatewayInfoDeepEqual (0.00s)</span><br><span class="line">    example_test.go:15: MakeGatewayInfo() got = &#123;CoffeeShopWiFi 192.168.0.1 ffff0000 [&#123;ristretto 192.168.0.116 0001-01-01 00:00:00 +0000 UTC&#125; &#123;aribica 192.168.0.104 2009-11-10 23:06:32 +0000 UTC&#125; &#123;macchiato 192.168.0.153 2009-11-10 23:39:43 +0000 UTC&#125; &#123;espresso 192</span><br><span class="line">.168.0.121 0001-01-01 00:00:00 +0000 UTC&#125; &#123;latte 192.168.0.219 2009-11-10 23:00:23 +0000 UTC&#125; &#123;americano 192.168.0.188 2009-11-10 23:03:05 +0000 UTC&#125;]&#125;, want &#123;CoffeeShopWiFi 192.168.0.2 ffff0000 [&#123;ristretto 192.168.0.116 0001-01-01 00:00:00 +0000 UTC&#125; &#123;aribica 192.</span><br><span class="line">168.0.104 2009-11-10 23:06:32 +0000 UTC&#125; &#123;macchiato 192.168.0.153 2009-11-10 23:39:43 +0000 UTC&#125; &#123;espresso 192.168.0.121 0001-01-01 00:00:00 +0000 UTC&#125; &#123;latte 192.168.0.221 2009-11-10 23:00:23 +0000 UTC&#125;]&#125;</span><br><span class="line">--- FAIL: TestMakeGatewayInfoGoCmp (0.00s)</span><br><span class="line">    example_test.go:22: MakeGatewayInfo() mismatch (-want +got):</span><br><span class="line">        &#123;t.Gateway&#125;.IPAddress:</span><br><span class="line">                -: s<span class="string">"192.168.0.2"</span></span><br><span class="line">                +: s<span class="string">"192.168.0.1"</span></span><br><span class="line">        &#123;t.Gateway&#125;.Clients[4].IPAddress:</span><br><span class="line">                -: s<span class="string">"192.168.0.221"</span></span><br><span class="line">                +: s<span class="string">"192.168.0.219"</span></span><br><span class="line">        &#123;t.Gateway&#125;.Clients[?-&gt;5]:</span><br><span class="line">                -: &lt;non-existent&gt;</span><br><span class="line">                +: t.Client&#123;Hostname: <span class="string">"americano"</span>, IPAddress: s<span class="string">"192.168.0.188"</span>, LastSeen: s<span class="string">"2009-11-10 23:03:05 +0000 UTC"</span>&#125;</span><br><span class="line">FAIL</span><br><span class="line">FAIL    <span class="built_in">command</span>-line-arguments  0.304s</span><br><span class="line">FAIL</span><br></pre></td></tr></table></figure><p><code>go-cmp</code> ã®çµæœã¯ä½•ãŒåŒå€¤ã§ã€ä½•ãŒåŒå€¤ã§ãªã‹ã£ãŸã‹ã€åŒå€¤ã§ãªã‹ã£ãŸã¨ãã¯å–å¾—ã—ãŸå€¤ã¨æƒ³å®šã™ã‚‹å€¤ã¯ä½•ã‹æ˜ç¤ºçš„ã«ã‚ã‹ã‚‹ã®ãŒã‚ˆã„ã§ã™ã€‚ä»–ã«ã‚‚ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§æ¡ä»¶ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã¾ã™ã€‚(ã‚„ã‚Šã™ãæ³¨æ„)</p><p>ç¤¾å†…ã§ã‚‚ <a href="https://github.com/stretchr/testify/tree/master/assert" target="_blank" rel="noopener"><code>stretchr/testify/assert</code></a> ã‚’ä½¿ã†å‹¢ãªã©ã‚‚è¦‹ã‹ã‘ã¾ã™ã€‚Go ã®ãƒ†ã‚¹ãƒ†ã‚£ãƒ³ã‚°ãƒ•ãƒ¬ãƒ¼ãƒ ã«é–¢ã™ã‚‹è©±ã¯å¥½ã¿ãŒåˆ†ã‹ã‚Œã‚‹ã¨ã“ã‚ã ã¨æ€ã†ã®ã§ã€æ·±ãã¯è§¦ã‚Œã¾ã›ã‚“ã€‚</p><h2 id="APIã‚µãƒ¼ãƒã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’ã—ãŸã„"><a href="#APIã‚µãƒ¼ãƒã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’ã—ãŸã„" class="headerlink" title="APIã‚µãƒ¼ãƒã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’ã—ãŸã„"></a>APIã‚µãƒ¼ãƒã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’ã—ãŸã„</h2><p><code>net/http/httptest</code> ã‚’ç”¨ã„ã‚‹ã¨ç°¡å˜ã«ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ¢ãƒƒã‚¯ã‚µãƒ¼ãƒã‚’ãŸã¦ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å¯¾ã—ã¦ <code>Hello, client</code> ã¨ã„ã†ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”å´ã™ã‚‹ API ã‚’ç”¨ã„ãŸã€API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®è¦–ç‚¹ã§å˜ä½“ãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½ã™ã‚‹ä¾‹ã‚’è€ƒãˆã¦ã¿ã¾ã™ã€‚</p><p><code>httptest.NewServer</code> ã«ãƒãƒ³ãƒ‰ãƒ©ã‚’æ¸¡ã™ã“ã¨ã§ãƒãƒ³ãƒ‰ãƒ©ã®æŒ¯ã‚‹èˆã„ã‚’ã™ã‚‹ãƒ­ãƒ¼ã‚«ãƒ«ã® HTTP ã‚µãƒ¼ãƒã‚’æä¾›ã—ã¦ãã‚Œã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã ã¨ã“ã®ãƒ†ã‚¹ãƒˆç”¨ã® HTTP ã‚µãƒ¼ãƒã¯ <code>127.0.0.1:0</code> ã§èµ·å‹•ã—ã¾ã™ã€‚ãƒãƒ¼ãƒˆãŒ <code>0</code> ã«ãƒã‚¤ãƒ³ãƒ‰ã•ã‚Œã¦ã„ã¾ã™ãŒã€ã“ã‚Œã¯ç©ºã„ã¦ã„ã‚‹ä»»æ„ãƒãƒ¼ãƒˆã‚’å‰²ã‚Šå½“ã¦ã¾ã™ã€‚ãªãŠã€ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ãƒ‡ãƒãƒƒã‚°ã—ãŸã„ãªã©ã®ç”¨é€”ã¨ã—ã¦ <code>httptest.serve</code> ãƒ•ãƒ©ã‚°ã‚’æ¸¡ã™ã“ã¨ã‚‚ã§ãã¾ã™ã€‚<code>-httptest.serve=127.0.0.1:18888</code> ãªã©ã¨ã—ã¦ãƒ•ãƒ©ã‚°ã‚’æŒ‡å®šã—ãŸå ´åˆã€HTTP ã‚µãƒ¼ãƒã¯ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>x_test.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestX</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">ts := httptest.NewServer(http.HandlerFunc(<span class="function"><span class="keyword">func</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">fmt.Fprintln(w, <span class="string">"Hello, client"</span>)</span><br><span class="line">&#125;))</span><br><span class="line"><span class="keyword">defer</span> ts.Close()</span><br><span class="line"></span><br><span class="line">res, err := http.Get(ts.URL)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">t.Error(err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">got, err := ioutil.ReadAll(res.Body)</span><br><span class="line">res.Body.Close()</span><br><span class="line"></span><br><span class="line"><span class="comment">// API ã‹ã‚‰ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ç”¨ã„ã¦ãªã‚“ãªã‚‰ã®å‡¦ç†ã‚’ã™ã‚‹</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> res.StatusCode != <span class="number">200</span> &#123;</span><br><span class="line">t.Errorf(<span class="string">"GET %s: expected status code = %d; got %d"</span>, ts.URL, <span class="number">200</span>, res.StatusCode)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">string</span>(got) != <span class="string">"Hello, client\n"</span> &#123;</span><br><span class="line">t.Errorf(<span class="string">"expected body %v; got %v"</span>, <span class="string">"Hello, client"</span>, <span class="keyword">string</span>(got))</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://play.golang.org/p/i1Dz5alS4hQ" target="_blank" rel="noopener">https://play.golang.org/p/i1Dz5alS4hQ</a></p><p>å®Ÿéš›ã«ã¯ãƒ†ã‚¹ãƒˆã§ç”¨ã„ã‚‹æ§‹é€ ä½“ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã« URL ã‚’ä¿æŒã§ãã‚‹ã‚ˆã†ã«ã—ã¦ <code>httptest</code> ã§èµ·å‹•ã•ã›ãŸãƒ¢ãƒƒã‚¯ã‚µãƒ¼ãƒã® URL ã«åˆ‡ã‚Šæ›¿ãˆã‚‹ãªã©ã“ã¨ãŒå¤šã„ã®ã§ã¯ãªã„ã‹ã€ã¨æ€ã„ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">setup</span><span class="params">()</span> <span class="params">(client *Client, mux *http.ServeMux, serverURL <span class="keyword">string</span>, teardown <span class="keyword">func</span>()</span>)</span> &#123;</span><br><span class="line">mux = http.NewServeMux()</span><br><span class="line"></span><br><span class="line">apiHandler := http.NewServeMux()</span><br><span class="line">apiHandler.Handle(baseURLPath+<span class="string">"/"</span>, http.StripPrefix(baseURLPath, mux))</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">server := httptest.NewServer(apiHandler)</span><br><span class="line"></span><br><span class="line">client = NewClient(<span class="literal">nil</span>)</span><br><span class="line">url, _ := url.Parse(server.URL + baseURLPath + <span class="string">"/"</span>)</span><br><span class="line">client.BaseURL = url</span><br><span class="line">client.UploadURL = url</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> client, mux, server.URL, server.Close</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://github.com/google/go-github/blob/master/github/github_test.go#L31-L64" target="_blank" rel="noopener">https://github.com/google/go-github/blob/master/github/github_test.go#L31-L64</a></p><h2 id="APIã‚µãƒ¼ãƒã®ãƒãƒ³ãƒ‰ãƒ©ã®ãƒ†ã‚¹ãƒˆã‚’ã—ãŸã„"><a href="#APIã‚µãƒ¼ãƒã®ãƒãƒ³ãƒ‰ãƒ©ã®ãƒ†ã‚¹ãƒˆã‚’ã—ãŸã„" class="headerlink" title="APIã‚µãƒ¼ãƒã®ãƒãƒ³ãƒ‰ãƒ©ã®ãƒ†ã‚¹ãƒˆã‚’ã—ãŸã„"></a>APIã‚µãƒ¼ãƒã®ãƒãƒ³ãƒ‰ãƒ©ã®ãƒ†ã‚¹ãƒˆã‚’ã—ãŸã„</h2><p>ä¸Šè¨˜ã®ã€ŒAPIã‚µãƒ¼ãƒã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’ã—ãŸã„ã€ã®é …ç›®ã§ã¯ <code>httptest.NewServer</code> ã§ãƒ¢ãƒƒã‚¯ã‚µãƒ¼ãƒã‚’ç«‹ã¦ã¦ã€API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã„ã†è¦–ç‚¹ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ç™ºè¡Œã—ã¦ãƒ†ã‚¹ãƒˆã‚’ã—ã¾ã—ãŸã€‚ä»Šåº¦ã¯ API ã‚µãƒ¼ãƒã‚’æä¾›ã™ã‚‹è¦–ç‚¹ã‹ã‚‰ã€ãƒãƒ³ãƒ‰ãƒ©ã®å˜ä½“ãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½ã™ã‚‹å ´åˆã‚’è€ƒãˆã¦ã¿ã¾ã™ã€‚<a href="https://golang.org/pkg/net/http/httptest/#NewRequest" target="_blank" rel="noopener"><code>httptest.NewRequest</code></a> ã‚’ç”¨ã„ã‚‹ã¨ã€ãƒãƒ³ãƒ‰ãƒ©ã®å˜ä½“ãƒ†ã‚¹ãƒˆã‚’ç°¡æ½”ã«å®Ÿæ–½ã§ãã¾ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ãªãƒãƒ³ãƒ‰ãƒ©ã‚’è€ƒãˆã¦ã¿ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">helloHandler</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">w.WriteHeader(http.StatusOK)</span><br><span class="line">w.Write([]<span class="keyword">byte</span>(<span class="string">"hello world!"</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã“ã®ãƒãƒ³ãƒ‰ãƒ©ã«å¯¾ã—ã¦ GET ãƒªã‚¯ã‚¨ã‚¹ãƒˆã—ãŸã¨ãã« <code>hello world!</code> ã¨ã„ã†ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒå¾—ã‚‰ã‚Œã‚‹ã‹ã©ã†ã‹ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚<code>httptest.NewRequest</code> ã¯ãƒ†ã‚¹ãƒˆã®ãŸã‚ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ç”Ÿæˆã™ã‚‹ã®ã«ä¾¿åˆ©ã§ã™ã€‚<code>httptest.NewRequest</code> ã§ç”Ÿæˆã—ãŸ <code>*http.Request</code> ã‚’ãƒãƒ³ãƒ‰ãƒ©ã«æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚ã¾ãŸ <code>httptest.NewRecorder()</code> ã§ç”Ÿæˆã§ãã‚‹ <code>*httptest.ResponseRecorder</code> ã‚’ç”¨ã„ã‚‹ã¨ãƒãƒ³ãƒ‰ãƒ©ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¨˜éŒ²ã§ãã¾ã™ã€‚</p><p>ã“ã‚Œã‚‰ã‚’ç”¨ã„ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒãƒ³ãƒ‰ãƒ©ã‹ã‚‰æƒ³å®šã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒå¾—ã‚‰ã‚Œã‚‹ã‹ã©ã†ã‹ãƒ†ã‚¹ãƒˆã§ãã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"io/ioutil"</span></span><br><span class="line"><span class="string">"net/http/httptest"</span></span><br><span class="line"><span class="string">"testing"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestHelloHandler</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">r := httptest.NewRequest(<span class="string">"GET"</span>, <span class="string">"/dummy"</span>, <span class="literal">nil</span>)</span><br><span class="line">w := httptest.NewRecorder()</span><br><span class="line"></span><br><span class="line">helloHandler(w, r)</span><br><span class="line"></span><br><span class="line">resp := w.Result()</span><br><span class="line"></span><br><span class="line">body, err := ioutil.ReadAll(resp.Body)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">t.Errorf(<span class="string">"cannot read test response: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> resp.StatusCode != <span class="number">200</span> &#123;</span><br><span class="line">t.Errorf(<span class="string">"got = %d, want = 200"</span>, resp.StatusCode)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">string</span>(body) != <span class="string">"hello world!"</span> &#123;</span><br><span class="line">t.Errorf(<span class="string">"got = %s, want = hello world!"</span>, body)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ go test -v</span><br><span class="line">=== RUN   TestHelloHandler</span><br><span class="line">--- PASS: TestHelloHandler (0.00s)</span><br><span class="line">PASS</span><br><span class="line">ok      github.com/d-tsuji/go-sandbox/x 0.186s</span><br></pre></td></tr></table></figure><p><code>httptest.NewRequest()</code> ã‚„ <code>httptest.NewRecorder()</code> ã‚’ç”¨ã„ã‚‹ã“ã¨ã§ã€<a href="https://echo.labstack.com/" target="_blank" rel="noopener">Echo</a> ã‚„ <a href="https://github.com/go-swagger/go-swagger" target="_blank" rel="noopener">go-swagger</a> ã¨ã„ã£ãŸ Web ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ç”¨ã„ã¦æ§‹ç¯‰ã—ã¦ã„ã‚‹ãƒãƒ³ãƒ‰ãƒ©ã‚‚åŒæ§˜ã«ãƒ†ã‚¹ãƒˆã§ãã¾ã™ã€‚</p><p>ã¡ãªã¿ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ <a href="https://golang.org/pkg/net/http/#NewRequestWithContext" target="_blank" rel="noopener"><code>http.NewRequestWithContext</code></a> (<a href="https://golang.org/pkg/net/http/#NewRequest" target="_blank" rel="noopener"><code>http.NewRequest</code></a>) ã§ã‚‚ç”Ÿæˆã§ãã‚‹ã®ã¯ï¼Ÿã¨æ€ã†ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ä½•ãŒç•°ãªã‚‹ã‹ã¨ã„ã†ã¨ã€<code>httptest.NewRequest</code> ã¯ <code>http.Handler</code> ã«é©ã—ã¦ã„ã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è¿”å´ã—ã¾ã™ã€‚ä¸€æ–¹ã§ <code>http.NewRequestWithContext</code> (<code>http.NewRequest</code>) ã¯ <code>Client.Do</code> ã‚„ <code>Transport.RoundTrip</code> ã«é©ã—ã¦ã„ã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è¿”å´ã—ã¾ã™ã€‚ãã®ãŸã‚ã€å˜ä½“ãƒ†ã‚¹ãƒˆã®ç”¨é€”ã§ç›´æ¥ãƒãƒ³ãƒ‰ãƒ©ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ¸¡ã™å ´åˆã¯ <code>httptest.NewRequest</code> ã‚’ç”¨ã„ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚</p><h2 id="ãƒ‡ãƒ¼ã‚¿ç«¶åˆã‚’ãƒ†ã‚¹ãƒˆã§æ¤œçŸ¥ã—ãŸã„"><a href="#ãƒ‡ãƒ¼ã‚¿ç«¶åˆã‚’ãƒ†ã‚¹ãƒˆã§æ¤œçŸ¥ã—ãŸã„" class="headerlink" title="ãƒ‡ãƒ¼ã‚¿ç«¶åˆã‚’ãƒ†ã‚¹ãƒˆã§æ¤œçŸ¥ã—ãŸã„"></a>ãƒ‡ãƒ¼ã‚¿ç«¶åˆã‚’ãƒ†ã‚¹ãƒˆã§æ¤œçŸ¥ã—ãŸã„</h2><p>ãƒ†ã‚¹ãƒˆã§ãƒ¬ãƒ¼ã‚¹ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã‚’æ¤œçŸ¥ã—ãŸã„å ´åˆã¯ã©ã†ã™ã‚Œã°ã‚ˆã„ã§ã—ã‚‡ã†ã‹ã€‚ãƒ¬ãƒ¼ã‚¹ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ãŒèµ·ãã¦ã„ãªã„ã‹ã©ã†ã‹ç¢ºèªã™ã‚‹ã®ã« <code>-race</code> ãƒ•ãƒ©ã‚°ãŒå½¹ã«ç«‹ã¡ã¾ã™ã€‚</p><p>å…¬å¼ã® <a href="https://blog.golang.org/race-detector" target="_blank" rel="noopener">The Go Blog</a> ã®ä¾‹ã‚’å¼•ç”¨ã—ã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>race_test.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"math/rand"</span></span><br><span class="line"><span class="string">"testing"</span></span><br><span class="line"><span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestFoo</span><span class="params">(te *testing.T)</span></span> &#123;</span><br><span class="line">start := time.Now()</span><br><span class="line"><span class="keyword">var</span> t *time.Timer</span><br><span class="line">t = time.AfterFunc(randomDuration(), <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Println(time.Now().Sub(start))</span><br><span class="line">t.Reset(randomDuration())</span><br><span class="line">&#125;)</span><br><span class="line">time.Sleep(<span class="number">5</span> * time.Second)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">randomDuration</span><span class="params">()</span> <span class="title">time</span>.<span class="title">Duration</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> time.Duration(rand.Int63n(<span class="number">1e9</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šè¨˜ã®å®Ÿè£…ã¯ç•°ãªã‚‹ã‚´ãƒ«ãƒ¼ãƒãƒ³ã‹ã‚‰å¤‰æ•° <code>t</code> ã®èª­ã¿æ›¸ãã‚’ã—ã¦ã„ã¦ã€ãƒ¬ãƒ¼ã‚¹ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã‚’å¼•ãèµ·ã“ã—ã¾ã™ã€‚ã“ã‚Œã¯ <code>-race</code> ã‚’ã¤ã‘ã‚‹ã“ã¨ã§ç¢ºèªã§ãã¾ã™ã€‚<code>-race</code> ã¯ <code>go test</code> ä»¥å¤–ã«ã‚‚ä»¥ä¸‹ã®ã‚ˆã†ã«ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -race mypkg    // <span class="built_in">test</span> the package</span><br><span class="line">$ go run -race mysrc.go  // compile and run the program</span><br><span class="line">$ go build -race mycmd   // build the <span class="built_in">command</span></span><br><span class="line">$ go install -race mypkg // install the package</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&gt; go <span class="built_in">test</span> -v -race race_test.go</span><br><span class="line">=== RUN   TestFoo</span><br><span class="line">947.9969ms</span><br><span class="line">==================</span><br><span class="line">WARNING: DATA RACE</span><br><span class="line">Read at 0x00c00009a030 by goroutine 9:</span><br><span class="line">  <span class="built_in">command</span>-line-arguments.TestFoo.func1()</span><br><span class="line">      C:/Users/d-tsuji/go/src/github.com/d-tsuji/go-sandbox/race_test.go:15 +0x128</span><br><span class="line"></span><br><span class="line">Previous write at 0x00c00009a030 by goroutine 8:</span><br><span class="line">  <span class="built_in">command</span>-line-arguments.TestFoo()</span><br><span class="line">      C:/Users/d-tsuji/go/src/github.com/d-tsuji/go-sandbox/race_test.go:13 +0x194</span><br><span class="line">  testing.tRunner()</span><br><span class="line">      C:/Go/src/testing/testing.go:909 +0x1a0</span><br><span class="line"></span><br><span class="line">Goroutine 9 (running) created at:</span><br><span class="line">  time.goFunc()</span><br><span class="line">      C:/Go/src/time/sleep.go:168 +0x58</span><br><span class="line"></span><br><span class="line">Goroutine 8 (running) created at:</span><br><span class="line">  testing.(*T).Run()</span><br><span class="line">      C:/Go/src/testing/testing.go:960 +0x658</span><br><span class="line">  testing.runTests.func1()</span><br><span class="line">      C:/Go/src/testing/testing.go:1202 +0xad</span><br><span class="line">  testing.tRunner()</span><br><span class="line">      C:/Go/src/testing/testing.go:909 +0x1a0</span><br><span class="line">  testing.runTests()</span><br><span class="line">      C:/Go/src/testing/testing.go:1200 +0x528</span><br><span class="line">  testing.(*M).Run()</span><br><span class="line">      C:/Go/src/testing/testing.go:1117 +0x306</span><br><span class="line">  main.main()</span><br><span class="line">      _testmain.go:44 +0x22a</span><br><span class="line">==================</span><br><span class="line">1.0319969s</span><br><span class="line">1.6985715s</span><br><span class="line">1.9336667s</span><br><span class="line">2.22163s</span><br><span class="line">2.7717493s</span><br><span class="line">3.4048429s</span><br><span class="line">3.7370048s</span><br><span class="line">3.9208427s</span><br><span class="line">4.4012115s</span><br><span class="line">--- FAIL: TestFoo (5.00s)</span><br><span class="line">    testing.go:853: race detected during execution of <span class="built_in">test</span></span><br><span class="line">FAIL</span><br><span class="line">FAIL    <span class="built_in">command</span>-line-arguments  5.122s</span><br><span class="line">FAIL</span><br></pre></td></tr></table></figure><p>ä¸Šè¨˜ã®ã‚ˆã†ã«ãƒ¬ãƒ¼ã‚¹ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ãŒç™ºç”Ÿã—ã¦ã„ã‚‹å ´åˆã¯ã€ãƒ†ã‚¹ãƒˆãŒ FAIL ã«ãªã‚Šã¾ã™ã€‚</p><p><code>-race</code> ã‚’ã¤ã‘ã¦ãƒ†ã‚¹ãƒˆã™ã‚‹ã¨å¤šå°‘å®Ÿè¡Œã«æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ãŒã€æƒ³å®šã—ãªã„ãƒ¬ãƒ¼ã‚¹ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ãŒç™ºç”Ÿã—ã¦ã€ãƒ†ã‚¹ãƒˆãŒ FAIL ã«ãªã‚‹ã¨ãƒ‡ãƒãƒƒã‚°ãŒå¤§å¤‰ã§ã™ã€‚ãƒ†ã‚¹ãƒˆã®éš›ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ <code>-race</code> ã‚’ã¤ã‘ã¦ãŠãã®ã‚‚ä¸€ã¤ã®æ–¹æ³•ã§ã™ã€‚</p><h2 id="ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ç½®ã„ã¦ãŠããŸã„"><a href="#ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ç½®ã„ã¦ãŠããŸã„" class="headerlink" title="ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ç½®ã„ã¦ãŠããŸã„"></a>ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ç½®ã„ã¦ãŠããŸã„</h2><p>ãƒ†ã‚¹ãƒˆã® Input ã‚„ Output ã«ãªã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ <code>testdata</code> ã¨ã„ã†åå‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç½®ã„ã¦ãŠãã“ã¨ãŒã§ãã¾ã™ã€‚<code>testdata</code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å«ã¾ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã¯ãƒ†ã‚¹ãƒˆã®ã¨ãã®ã¿ç”¨ã„ã‚‰ã‚Œã¾ã™ã€‚æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¸­ã§ãŸãã•ã‚“ç”¨ã„ã‚‰ã‚Œã¦ã„ã¾ã™ãŒã€<code>image</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾‹ã‚’ä¸Šã’ã‚‹ã¨ <a href="https://github.com/golang/go/tree/master/src/image/testdata" target="_blank" rel="noopener">https://github.com/golang/go/tree/master/src/image/testdata</a> ã¨ã„ã£ãŸã‚‚ã®ã§ã™ã€‚</p><h2 id="ãƒ†ã‚¹ãƒˆã«ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚’ä½¿ã„ãŸã„"><a href="#ãƒ†ã‚¹ãƒˆã«ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚’ä½¿ã„ãŸã„" class="headerlink" title="ãƒ†ã‚¹ãƒˆã«ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚’ä½¿ã„ãŸã„"></a>ãƒ†ã‚¹ãƒˆã«ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚’ä½¿ã„ãŸã„</h2><p>è¤‡æ•°ã®ãƒ†ã‚¹ãƒˆã§ç”¨ã„ã‚‹ã‚ˆã†ãªå…±é€šã®é–¢æ•°ã‚’ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã¨ã—ã¦å®Ÿè£…ã™ã‚‹å ´åˆãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã®ç‰¹å¾´ã¯ä»¥ä¸‹ã§ã™ã€‚</p><ul><li>ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã¯ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã•ãªã„</li><li><code>*testing.T</code> ã‚’å—ã‘å–ã£ã¦ãƒ†ã‚¹ãƒˆã‚’è½ã¨ã™</li><li>Go 1.9 ã‹ã‚‰ã¯ <code>T.Helper</code> ã‚’ä½¿ã£ã¦æƒ…å ±ã‚’è£œè¶³ã™ã‚‹<ul><li><a href="https://tip.golang.org/pkg/testing/#T.Helper" target="_blank" rel="noopener">https://tip.golang.org/pkg/testing/#T.Helper</a></li></ul></li></ul><p><a href="https://www.slideshare.net/takuyaueda967/go-friday" target="_blank" rel="noopener">Go Friday å‚‘ä½œé¸</a> ã‚ˆã‚Šå¼•ç”¨</p><p>ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«å®Ÿè£…ã•ã‚Œã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">mustUrlParse</span><span class="params">(t *testing.T, s <span class="keyword">string</span>)</span> *<span class="title">url</span>.<span class="title">URL</span></span> &#123;</span><br><span class="line">t.Helper()</span><br><span class="line">u, err := url.Parse(s)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">t.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> u</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã« <code>t.Helper()</code> ã‚’ä»˜ä¸ã™ã‚‹ã¨ä½•ãŒå¬‰ã—ã„ã®ã§ã—ã‚‡ã†ã‹ã€‚ä¸Šè¨˜ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•° <code>mustUrlParse</code> ã‚’ç”¨ã„ãŸãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½ã—ã¦ã¿ã¦ç¢ºèªã—ã¦ã¿ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestX</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line"><span class="keyword">type</span> args <span class="keyword">struct</span> &#123;</span><br><span class="line">str <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line">tests := []<span class="keyword">struct</span> &#123;</span><br><span class="line">name <span class="keyword">string</span></span><br><span class="line">args args</span><br><span class="line">want <span class="keyword">int</span></span><br><span class="line">&#125;&#123;</span><br><span class="line">&#123;<span class="string">"normal1"</span>, args&#123;<span class="string">"http://example.com/"</span>&#125;, <span class="number">0</span>&#125;,</span><br><span class="line">&#123;<span class="string">"normal2"</span>, args&#123;<span class="string">"%zzzzz"</span> <span class="comment">/* error occured */</span>&#125;, <span class="number">1</span>&#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> _, tt := <span class="keyword">range</span> tests &#123;</span><br><span class="line">t.Run(tt.name, <span class="function"><span class="keyword">func</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">url := mustUrlParse(t, tt.args.str)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½•ã‚‰ã‹ã®å‡¦ç†ã‚’ã—ã¦ãƒ†ã‚¹ãƒˆã™ã‚‹</span></span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‹ã‚‰ <code>t.Helper()</code> ã‚’é™¤ã„ãŸå ´åˆ</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">go <span class="built_in">test</span> -v</span><br><span class="line">=== RUN   TestX</span><br><span class="line">=== RUN   TestX/normal1</span><br><span class="line">=== RUN   TestX/normal2</span><br><span class="line">--- FAIL: TestX (0.00s)</span><br><span class="line">    --- PASS: TestX/normal1 (0.00s)</span><br><span class="line">    --- FAIL: TestX/normal2 (0.00s)</span><br><span class="line">        x_test.go:44: parse %zzzzz: invalid URL escape <span class="string">"%zz"</span></span><br><span class="line">FAIL</span><br><span class="line"><span class="built_in">exit</span> status 1</span><br><span class="line">FAIL    github.com/d-tsuji/go-sandbox/x 0.299s</span><br></pre></td></tr></table></figure><ul><li>ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã« <code>t.Helper()</code> ãŒã‚ã‚‹å ´åˆ</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">go <span class="built_in">test</span> -v</span><br><span class="line">=== RUN   TestX</span><br><span class="line">=== RUN   TestX/normal1</span><br><span class="line">=== RUN   TestX/normal2</span><br><span class="line">--- FAIL: TestX (0.00s)</span><br><span class="line">    --- PASS: TestX/normal1 (0.00s)</span><br><span class="line">    --- FAIL: TestX/normal2 (0.00s)</span><br><span class="line">        x_test.go:34: parse %zzzzz: invalid URL escape <span class="string">"%zz"</span></span><br><span class="line">FAIL</span><br><span class="line"><span class="built_in">exit</span> status 1</span><br><span class="line">FAIL    github.com/d-tsuji/go-sandbox/x 0.296s</span><br></pre></td></tr></table></figure><p>ä¸Šè¨˜ã® 2 é€šã‚Šã®çµæœã‚’æ¯”è¼ƒã™ã‚‹ã¨ FAIL ã«ãªã£ãŸè¡ŒãŒä½•è¡Œç›®ã‚’æŒ‡ã—ã¦ã„ã‚‹ã®ã‹ã€ãŒå¤‰ã‚ã£ã¦ã„ã¾ã™ã€‚</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// t.Helper() ãŒãªã„å ´åˆ</span><br><span class="line">x_test.go:44: parse %zzzzz: invalid URL escape "%zz"</span><br><span class="line"></span><br><span class="line">// t.Helper() ãŒã‚ã‚‹å ´åˆ</span><br><span class="line">x_test.go:34: parse %zzzzz: invalid URL escape "%zz"</span><br></pre></td></tr></table></figure><p><code>t.Helper()</code> ã‚’ä»˜ã‘ãŸå ´åˆã¯ <code>t.Run()</code> å†…ã® <code>_ = mustUrlParse(t, tt.args.str)</code> ã®è¡Œã‚’æŒ‡ã—ã¦ã„ã¾ã™ã€‚ä»˜ã‘ãªã‹ã£ãŸå ´åˆã¯ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã§ã‚¨ãƒ©ãƒ¼ã«ãªã£ãŸ <code>t.Fatal(err)</code> ã®è¡Œã‚’æŒ‡ã—ã¦ã„ã¾ã™ã€‚<code>t.Helper()</code> ã‚’ä»˜ã‘ãŸå ´åˆã®ã»ã†ãŒã€ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹å†…ã®ã©ã®è¡Œã§å¤±æ•—ã—ãŸã‹åˆ†ã‹ã‚Šã‚„ã™ããªã‚Šã€ã‚¨ãƒ©ãƒ¼ã®åŸå› ã‚’æ¢ã‚Šã‚„ã™ããªã‚‹ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚</p><h2 id="ãƒ–ãƒ©ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ãƒ†ã‚¹ãƒˆã‚’ã—ãŸã„"><a href="#ãƒ–ãƒ©ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ãƒ†ã‚¹ãƒˆã‚’ã—ãŸã„" class="headerlink" title="ãƒ–ãƒ©ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ãƒ†ã‚¹ãƒˆã‚’ã—ãŸã„"></a>ãƒ–ãƒ©ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ãƒ†ã‚¹ãƒˆã‚’ã—ãŸã„</h2><p>ã‚ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ <code>mypkg</code> ãŒã‚ã£ã¦ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã«ãªã£ã¦ã„ã‚‹ã¨ã—ã¾ã™ã€‚ãƒ–ãƒ©ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ãƒ†ã‚¹ãƒˆãªã©ã‚’å®Ÿæ–½ã™ã‚‹ã¨ãã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã‚’åˆ†ã‘ãŸã„ã€ãªã©ã®ãƒ‹ãƒ¼ã‚ºãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“(ãã‚“ãªã«å¤šãã¯ç„¡ã„ã¨æ€ã„ã¾ã™ãŒ)ã€‚Go ã§ã¯ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã¯åŒã˜ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€ç•°ãªã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚ã—ã‹ã—ä¾‹å¤–çš„ã« <code>mypkg_test</code> ã¨ã„ã†ã€<code>mypkg</code> ã« <code>_test</code> ã‚’ä»˜ä¸ã—ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã¯ç”¨ã„ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚<a href="https://tip.golang.org/cmd/go/#hdr-Test_packages" target="_blank" rel="noopener">Test packages</a> ã«ã‚‚ã‚ã‚‹ã‚ˆã†ã« Go ã§ã¯ <code>_test</code> ã®æ¥å°¾èªã‚’ã‚‚ã¤ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã¯åˆ¥ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™ã€‚ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã‚’ <code>mypkg</code> ã¨ <code>mypkg_test</code> ã¨ã§åˆ†ã‘ã‚‹ã“ã¨ã§ãƒ†ã‚¹ãƒˆå®Ÿæ–½æ™‚ã« <code>mypkg</code> ã®éå…¬é–‹ã®é–¢æ•°ã‚’å‘¼ã³å‡ºã™ã“ã¨ã¯ã§ããªããªã‚Šã¾ã™ã€‚ä¼¼ãŸã‚ˆã†ãªè­°è«–ã‚’ <a href="https://stackoverflow.com/questions/19998250/proper-package-naming-for-testing-with-the-go-language" target="_blank" rel="noopener">Proper package naming for testing with the Go language</a> ã§è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>å…·ä½“çš„ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã«ãªã£ã¦ã„ã¦ <code>x.go</code> ã¨ <code>x_test.go</code> ã§åˆ¥ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã¨ã§ãã¾ã™ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mypkg</span><br><span class="line">|--x.go</span><br><span class="line">|--x_test.go</span><br></pre></td></tr></table></figure><figure class="highlight go"><figcaption><span>x.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> mypkg</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure><figure class="highlight go"><figcaption><span>x_test.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mypkg ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚ã‚‹ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚‚ _test ã‚’ä»˜ã‘ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã‚’æ··åœ¨ã§ãã‚‹</span></span><br><span class="line"><span class="keyword">package</span> mypkg_test</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure><h2 id="ç”¨é€”-å˜ä½“-ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãªã©-ã«ã‚ˆã£ã¦ãƒ†ã‚¹ãƒˆã‚’åˆ‡ã‚Šæ›¿ãˆãŸã„"><a href="#ç”¨é€”-å˜ä½“-ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãªã©-ã«ã‚ˆã£ã¦ãƒ†ã‚¹ãƒˆã‚’åˆ‡ã‚Šæ›¿ãˆãŸã„" class="headerlink" title="ç”¨é€”(å˜ä½“/ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãªã©)ã«ã‚ˆã£ã¦ãƒ†ã‚¹ãƒˆã‚’åˆ‡ã‚Šæ›¿ãˆãŸã„"></a>ç”¨é€”(å˜ä½“/ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãªã©)ã«ã‚ˆã£ã¦ãƒ†ã‚¹ãƒˆã‚’åˆ‡ã‚Šæ›¿ãˆãŸã„</h2><p>ãƒ†ã‚¹ãƒˆã¯å˜ä½“ãƒ†ã‚¹ãƒˆã®ä»–ã€ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆãªã©ç”¨é€”ã«ã‚ˆã£ã¦ã„ãã¤ã‹å­˜åœ¨ã—ã¾ã™ã€‚ç”¨é€”ã«ã‚ˆã£ã¦å®Ÿè¡Œã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’åˆ†ã‘ã‚‹ã«ã¯ã©ã®ã‚ˆã†ã«ã™ã‚Œã°è‰¯ã„ã§ã—ã‚‡ã†ã‹ã€‚<a href="https://golang.org/pkg/go/build/#hdr-Build_Constraints" target="_blank" rel="noopener">ãƒ“ãƒ«ãƒ‰ã‚¿ã‚°</a> ã‚’ç”¨ã„ã‚‹æ–¹æ³•ã‚„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’åˆ†ã‘ã‚‹æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚</p><ul><li>ãƒ“ãƒ«ãƒ‰ã‚¿ã‚°ã‚’ç”¨ã„ã‚‹æ–¹æ³•</li></ul><p>ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒ“ãƒ«ãƒ‰ã‚¿ã‚° <code>// +build integration</code> ã‚’ä»˜ä¸ã—ã¾ã™ã€‚ã“ã®ã‚ˆã†ã«ã™ã‚‹ã¨ <code>go test -tags=integration</code> ã¨ã‚¿ã‚°ã‚’ä»˜ã‘ãŸã¨ãã®ã¿ãƒ†ã‚¹ãƒˆãŒå®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã‚¿ã‚°ãŒãªã„å ´åˆã¯ãƒ†ã‚¹ãƒˆå¯¾è±¡ã«å«ã¾ã‚Œã¾ã›ã‚“ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// +build integration</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> x</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"testing"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestX</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// connecting server and some processing and so on...</span></span><br><span class="line"></span><br><span class="line">t.Log(<span class="string">"run integration test"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>OSS ã‹ã‚‰å…·ä½“ä¾‹ã‚’ã‚ã’ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ã§ã™ã€‚ä»¥ä¸‹ã®ä¾‹ã¯ãƒ†ã‚¹ãƒˆã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã« <code>_test</code> ã‚’ã¤ã‘ã‚‹ã“ã¨ã§ãƒ†ã‚¹ãƒˆã§ã‚ã‚‹ã“ã¨ã‚’æ˜ç¤ºçš„ã«åˆ†ã‘ã¦ã„ã¾ã™ã€‚ãƒ†ã‚¹ãƒˆã§ç”¨ã„ã‚‹é–¢æ•°ã¯ã€ãƒ†ã‚¹ãƒˆå†…ã§ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Copyright 2019 Google Inc. All Rights Reserved.</span></span><br><span class="line"><span class="comment">// This file is available under the Apache license.</span></span><br><span class="line"><span class="comment">// +build integration</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> mtail_test</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"os"</span></span><br><span class="line"><span class="string">"path"</span></span><br><span class="line"><span class="string">"testing"</span></span><br><span class="line"><span class="string">"time"</span></span><br><span class="line"></span><br><span class="line"><span class="string">"github.com/google/mtail/internal/mtail"</span></span><br><span class="line"><span class="string">"github.com/google/mtail/internal/testutil"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestNewProg</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">tmpDir, rmTmpDir := testutil.TestTempDir(t)</span><br><span class="line"><span class="keyword">defer</span> rmTmpDir()</span><br><span class="line"></span><br><span class="line">logDir := path.Join(tmpDir, <span class="string">"logs"</span>)</span><br><span class="line">progDir := path.Join(tmpDir, <span class="string">"progs"</span>)</span><br><span class="line">err := os.Mkdir(logDir, <span class="number">0700</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">t.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line">err = os.Mkdir(progDir, <span class="number">0700</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">t.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">m, stopM := mtail.TestStartServer(t, <span class="number">0</span>, <span class="literal">false</span>, mtail.ProgramPath(progDir), mtail.LogPathPatterns(logDir+<span class="string">"/*"</span>))</span><br><span class="line"><span class="keyword">defer</span> stopM()</span><br><span class="line"></span><br><span class="line">startProgLoadsTotal := mtail.TestGetMetric(t, m.Addr(), <span class="string">"prog_loads_total"</span>).(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>&#123;&#125;)</span><br><span class="line"></span><br><span class="line">testutil.TestOpenFile(t, progDir+<span class="string">"/nocode.mtail"</span>)</span><br><span class="line">time.Sleep(time.Second)</span><br><span class="line"></span><br><span class="line">progLoadsTotal := mtail.TestGetMetric(t, m.Addr(), <span class="string">"prog_loads_total"</span>).(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>&#123;&#125;)</span><br><span class="line"></span><br><span class="line">mtail.ExpectMetricDelta(t, progLoadsTotal[<span class="string">"nocode.mtail"</span>], startProgLoadsTotal[<span class="string">"nocode.mtail"</span>], <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://github.com/google/mtail/blob/master/internal/mtail/new_prog_integration_test.go#L1-L44" target="_blank" rel="noopener">https://github.com/google/mtail/blob/master/internal/mtail/new_prog_integration_test.go#L1-L44</a></p><ul><li>ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’åˆ†ã‘ã‚‹</li></ul><p>ã‚·ãƒ³ãƒ—ãƒ«ãªãŒã‚‰ã€ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆã¯ <code>integration</code> ãªã©ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å¯¾è±¡ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’å«ã‚ã‚‹ã“ã¨ãŒå¤šã„ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚ãã® <code>integration</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ <code>// +build integration</code> ã®ãƒ“ãƒ«ãƒ‰ã‚¿ã‚°ã‚’çµ„ã¿åˆã‚ã›ã‚‹æ–¹æ³•ã‚‚è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚OSS ã ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚</p><ul><li>google/go-github<ul><li><a href="https://github.com/google/go-github/blob/master/test/integration" target="_blank" rel="noopener">/test/integration</a></li></ul></li></ul><h2 id="ãƒ¢ãƒƒã‚¯ã‚’ä½¿ã£ã¦ãƒ†ã‚¹ãƒˆã‚’ã—ãŸã„"><a href="#ãƒ¢ãƒƒã‚¯ã‚’ä½¿ã£ã¦ãƒ†ã‚¹ãƒˆã‚’ã—ãŸã„" class="headerlink" title="ãƒ¢ãƒƒã‚¯ã‚’ä½¿ã£ã¦ãƒ†ã‚¹ãƒˆã‚’ã—ãŸã„"></a>ãƒ¢ãƒƒã‚¯ã‚’ä½¿ã£ã¦ãƒ†ã‚¹ãƒˆã‚’ã—ãŸã„</h2><p>å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã«ä¾å­˜ã™ã‚‹å®Ÿè£…ã®ãƒ†ã‚¹ãƒˆã‚’ã™ã‚‹ã¨ãã«ã€å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã‚’ãƒ¢ãƒƒã‚¯ã—ãŸã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ç‰¹ã«å¤–éƒ¨ã® API ã‚’å®Ÿè¡Œã—ãŸçµæœã«ä¾å­˜ã™ã‚‹å ´åˆã€API ã®ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆã‚„ãƒ†ã‚¹ãƒˆã®çµæœãŒå¤–éƒ¨ API ã®ä»•æ§˜å¤‰æ›´ãªã©ã«å¼•ãã¥ã‚‰ã‚Œã€ãƒ†ã‚¹ãƒˆçµæœãŒä¸å®‰å®šã«ãªã‚Šã¾ã™ã€‚ã©ã®ã‚ˆã†ã«ã™ã‚Œã°ãƒ¢ãƒƒã‚¯åŒ–ã§ãã‚‹ã§ã—ã‚‡ã†ã‹ã€‚æ–¹æ³•ã¯ã„ãã¤ã‹ã‚ã‚Šã¾ã™ãŒã€åŸºæœ¬çš„ãªè€ƒãˆã¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æº€ãŸã™å®Ÿè£…ã‚’ã€æœ¬ç‰©ã®å®Ÿè£…ã¨ãƒ¢ãƒƒã‚¯ã§åˆ‡ã‚Šæ›¿ãˆã¦ã„ãã“ã¨ã«ãªã‚Šã¾ã™ã€‚</p><p>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹å‡¦ç†ã‚’ãƒ¢ãƒƒã‚¯ã™ã‚‹ç°¡å˜ãªç–‘ä¼¼ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã¿ã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ã®æ¤œç´¢ã¨ä½œæˆã‚’ã—ã¾ã™ã€‚ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚ã‚‹ã¨ã—ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> DataStore <span class="keyword">interface</span> &#123;</span><br><span class="line">FindUser(ctx context.Context, id <span class="keyword">int</span>) (*User, error)</span><br><span class="line">CreateUser(ctx context.Context, name <span class="keyword">string</span>) error</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">id   <span class="keyword">int</span></span><br><span class="line">name <span class="keyword">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šå¸¸ã®å®Ÿè£…ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæ„Ÿã˜ã‚’æƒ³å®šã—ã¾ã™ã€‚ãƒã‚¤ãƒ³ãƒˆã¯ DataStore ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ãƒ•ã‚¡ã‚¯ãƒˆãƒªé–¢æ•°ã§ã‚ã‚‹ <code>NewDataStore</code> ã§è¿”ã™ã¨ã“ã‚ã§ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> UserDataStore <span class="keyword">struct</span> &#123;</span><br><span class="line">*sql.DB</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// DataStore ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’è¿”ã™ã®ãŒãƒã‚¤ãƒ³ãƒˆ</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewDataStore</span><span class="params">(db *sql.DB)</span> <span class="title">DataStore</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> &amp;UserDataStore&#123;db&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u *UserDataStore)</span> <span class="title">FindUser</span><span class="params">(ctx context.Context, id <span class="keyword">int</span>)</span> <span class="params">(*User, error)</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> user *User</span><br><span class="line">row := u.QueryRowContext(context.Background(), <span class="string">`SELECT * FROM user WHERE userId = ?`</span>, id)</span><br><span class="line"><span class="keyword">if</span> err := row.Scan(&amp;user); err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> user, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u *UserDataStore)</span> <span class="title">CreateUser</span><span class="params">(ctx context.Context, name <span class="keyword">string</span>)</span> <span class="title">error</span></span> &#123;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã‚ã‚‹ãƒ†ã‚¹ãƒˆã‚’ã™ã‚‹éš›ã«ã€ã“ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¾å­˜ã™ã‚‹å®Ÿè£…ã‚’ãƒ¢ãƒƒã‚¯ã™ã‚‹ä¾‹ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æº€ãŸã™ã€ãƒ¢ãƒƒã‚¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«æƒ³å®šã®çµæœãŒå–å¾—ã§ãã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿæ–½ã—ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> MockUserDataStore <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewMockDataStore</span><span class="params">()</span> <span class="title">DataStore</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> &amp;MockUserDataStore&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m *MockUserDataStore)</span> <span class="title">FindUser</span><span class="params">(ctx context.Context, id <span class="keyword">int</span>)</span> <span class="params">(*User, error)</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> &amp;User&#123;</span><br><span class="line">id:   <span class="number">1</span>,</span><br><span class="line">name: <span class="string">"test user"</span>,</span><br><span class="line">&#125;, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m *MockUserDataStore)</span> <span class="title">CreateUser</span><span class="params">(ctx context.Context, name <span class="keyword">string</span>)</span> <span class="title">error</span></span> &#123;</span><br><span class="line">fmt.Println(<span class="string">"create user. dummy"</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã“ã®ãƒ¢ãƒƒã‚¯ã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒ†ã‚¹ãƒˆã§ç”¨ã„ã‚‹å ´åˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestXXX</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">storage := NewMockDataStore()</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">user, err = storage.FindUser(context.TODO(), <span class="number">1</span>)</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šè¨˜ã®ã‚ˆã†ã«ã—ã¦å¤–éƒ¨ä¾å­˜ã™ã‚‹å‡¦ç†ã‚’ãƒ¢ãƒƒã‚¯ã§ãã¾ã™ã€‚ãƒ¢ãƒƒã‚¯ã® struct ã‚„ãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£…ãŒæ‰‹é–“ãªã®ã§ <a href="https://github.com/golang/mock" target="_blank" rel="noopener"><code>gomock</code></a> ã‚’ä½¿ã†ã“ã¨ã‚‚ã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“(<code>gomock</code> ã«é–¢ã—ã¦è©³ç´°ã¯èª¬æ˜ã‚’å‰²æ„›ã—ã¾ã™)ã€‚</p><p>ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ç”¨ã„ãŸãƒ†ã‚¹ãƒˆã«é–¢ã—ã¦ã¯ <a href="https://deeeet.com/writing/2016/10/25/go-interface-testing/" target="_blank" rel="noopener">Golangã«ãŠã‘ã‚‹interfaceã‚’ã¤ã‹ã£ãŸãƒ†ã‚¹ãƒˆæŠ€æ³•</a> ãŒè©³ã—ã„ã§ã™ã€‚ã¾ãŸã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®åŸ‹ã‚è¾¼ã¿ã‚’ç”¨ã„ãŸãƒ¢ãƒƒã‚¯ã«é–¢ã—ã¦ã¯ <a href="http://haya14busa.com/golang-how-to-write-mock-of-interface-for-testing/" target="_blank" rel="noopener">Golangã«ãŠã‘ã‚‹interfaceã‚’ã¤ã‹ã£ãŸãƒ†ã‚¹ãƒˆã§ Mock ã‚’æ›¸ãæŠ€æ³•</a> ãŒè©³ã—ã„ã§ã™ã€‚</p><p>ä½™è«‡ã§ã™ãŒã€ãƒ†ã‚¹ãƒˆãŒãƒ¢ãƒƒã‚¯ã«ä¾å­˜ã—ã™ãã‚‹ã¨ãªã‚“ã®ãŸã‚ã®ãƒ†ã‚¹ãƒˆã‚’ã—ã¦ã„ã‚‹ã‹åˆ†ã‹ã‚‰ãªããªã£ãŸã‚Šã€ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã®ã¨ãã«è¾›ã‹ã£ãŸã‚Šã™ã‚‹ã®ã§ã€ãƒ¢ãƒƒã‚¯ã‚’ä½¿ã£ãŸãƒ†ã‚¹ãƒˆã¯ç”¨æ³•ç”¨é‡ã«æ³¨æ„ã§ã™ã€‚</p><h2 id="ã‚´ãƒ«ãƒ¼ãƒãƒ³ãƒªãƒ¼ã‚¯ã‚’æ¤œå‡ºã—ãŸã„"><a href="#ã‚´ãƒ«ãƒ¼ãƒãƒ³ãƒªãƒ¼ã‚¯ã‚’æ¤œå‡ºã—ãŸã„" class="headerlink" title="ã‚´ãƒ«ãƒ¼ãƒãƒ³ãƒªãƒ¼ã‚¯ã‚’æ¤œå‡ºã—ãŸã„"></a>ã‚´ãƒ«ãƒ¼ãƒãƒ³ãƒªãƒ¼ã‚¯ã‚’æ¤œå‡ºã—ãŸã„</h2><p>ã‚´ãƒ«ãƒ¼ãƒãƒ³ãŒãƒªãƒ¼ã‚¯ã™ã‚‹ã‚ˆã†ãªå®Ÿè£…ã«ãªã£ã¦ã„ã‚‹ã“ã¨ã‚’ãƒ†ã‚¹ãƒˆæ™‚ã«ç¢ºèªã—ãŸã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚å…¬å¼ã®ãƒ„ãƒ¼ãƒ«ãƒã‚§ãƒ¼ãƒ³ã«ã¯å«ã¾ã‚Œã¦ã„ã¾ã›ã‚“ãŒã€<a href="https://github.com/uber-go/goleak" target="_blank" rel="noopener"><code>goleak</code></a> ã¯ã‚´ãƒ«ãƒ¼ãƒãƒ³ãƒªãƒ¼ã‚¯ã®æ¤œå‡ºã«å½¹ã«ç«‹ã¡ã¾ã™ã€‚ã“ã®ãƒ„ãƒ¼ãƒ«ã‚’ç”¨ã„ã‚‹ã¨ãƒ†ã‚¹ãƒˆæ™‚ã«ã‚´ãƒ«ãƒ¼ãƒãƒ³ãŒãƒªãƒ¼ã‚¯ã—ã¦ã„ã‚‹å ´åˆã«ãƒ†ã‚¹ãƒˆãŒ FAIL ã«ãªã‚Šã¾ã™ã€‚</p><p>ç°¡å˜ãªä¾‹ã§ç¢ºèªã—ã¦ã¿ã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>leak.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">X</span><span class="params">(send <span class="keyword">chan</span> <span class="keyword">struct</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line"><span class="keyword">select</span> &#123;</span><br><span class="line"><span class="comment">// ãƒãƒ£ãƒãƒ«ã«ãªã‚“ã‚‰ã‹ã®å€¤ãŒæ›¸ãè¾¼ã¾ã‚Œãªã„ or ãƒãƒ£ãƒãƒ«ãŒã‚¯ãƒ­ãƒ¼ã‚ºã•ã‚Œãªã„é™ã‚Š</span></span><br><span class="line"><span class="comment">// ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¦ã€ã‚´ãƒ«ãƒ¼ãƒãƒ³ãƒªãƒ¼ã‚¯ã«ãªã‚‹</span></span><br><span class="line"><span class="keyword">case</span> &lt;-send:</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><figcaption><span>leak_test.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestDoLeak</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">closedchan := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">struct</span>&#123;&#125;)</span><br><span class="line"><span class="built_in">close</span>(closedchan)</span><br><span class="line"></span><br><span class="line">tests := []<span class="keyword">struct</span> &#123;</span><br><span class="line">name <span class="keyword">string</span></span><br><span class="line">ch   <span class="keyword">chan</span> <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line">&#125;&#123;</span><br><span class="line">&#123;</span><br><span class="line">name: <span class="string">"not leak"</span>,</span><br><span class="line"><span class="comment">// ã‚¯ãƒ­ãƒ¼ã‚ºã•ã‚Œã¦ã„ã‚‹ãƒãƒ£ãƒãƒ«ã‚’æ¸¡ã™</span></span><br><span class="line">ch:   closedchan,</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">name: <span class="string">"leak"</span>,</span><br><span class="line">ch:   <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">struct</span>&#123;&#125;),</span><br><span class="line">&#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> _, tt := <span class="keyword">range</span> tests &#123;</span><br><span class="line">t.Run(tt.name, <span class="function"><span class="keyword">func</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line"><span class="keyword">defer</span> goleak.VerifyNone(t)</span><br><span class="line">X(tt.ch)</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çµæœã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚æƒ³å®šé€šã‚Š <code>leak</code> ã®ãƒ†ã‚¹ãƒˆãŒ FAIL ã«ãªã£ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&gt; go <span class="built_in">test</span> -v</span><br><span class="line">=== RUN   TestDoLeak</span><br><span class="line">=== RUN   TestDoLeak/not_leak</span><br><span class="line">=== RUN   TestDoLeak/leak</span><br><span class="line">--- FAIL: TestDoLeak (0.46s)</span><br><span class="line">    --- PASS: TestDoLeak/not_leak (0.00s)</span><br><span class="line">    --- FAIL: TestDoLeak/leak (0.46s)</span><br><span class="line">        leaks.go:78: found unexpected goroutines:</span><br><span class="line">            [Goroutine 11 <span class="keyword">in</span> state chan receive, with github.com/d-tsuji/go-sandbox/t.X.func1 on top of the stack:</span><br><span class="line">            goroutine 11 [chan receive]:</span><br><span class="line">            github.com/d-tsuji/go-sandbox/t.X.func1(0xc000010360)</span><br><span class="line">                C:/Users/d-tsuji/go/src/github.com/d-tsuji/go-sandbox/t/leak.go:13 +0x40</span><br><span class="line">            created by github.com/d-tsuji/go-sandbox/t.X</span><br><span class="line">                C:/Users/d-tsuji/go/src/github.com/d-tsuji/go-sandbox/t/leak.go:10 +0x46</span><br><span class="line">            ]</span><br><span class="line">FAIL</span><br><span class="line"><span class="built_in">exit</span> status 1</span><br><span class="line">FAIL    github.com/d-tsuji/go-sandbox/t 0.761s</span><br></pre></td></tr></table></figure><p><a href="https://play.golang.org/p/wWGWe8_S0WN" target="_blank" rel="noopener">https://play.golang.org/p/wWGWe8_S0WN</a></p><h1 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h1><p>ãƒ†ã‚¹ãƒˆã«é–¢ã™ã‚‹ Go ã®åŸºæœ¬çš„ãªæ©Ÿèƒ½ã®ã¾ã¨ã‚ã¦ã¿ã¾ã—ãŸã€‚ãªã‚‹ã¹ãä½¿ã„æ–¹ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒã‚ã‹ã‚‹ã‚ˆã†ã«å…·ä½“çš„ãªä¾‹ã‚’å¤šãè¼‰ã›ã¾ã—ãŸã€‚å‚è€ƒã«ã—ãŸç´ æ™´ã‚‰ã—ã„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã® URL ã¯ä»¥ä¸‹ã«è¨˜è¼‰ã—ã¦ã„ã¾ã™ã€‚åˆã‚ã›ã¦ã¿ã¦ã¿ã¦ãã ã•ã„ã€‚</p><h1 id="å‚è€ƒè³‡æ–™"><a href="#å‚è€ƒè³‡æ–™" class="headerlink" title="å‚è€ƒè³‡æ–™"></a>å‚è€ƒè³‡æ–™</h1><ul><li><a href="https://blog.golang.org/race-detector" target="_blank" rel="noopener">https://blog.golang.org/race-detector</a></li><li><a href="https://github.com/golang/go/wiki/LearnTesting" target="_blank" rel="noopener">https://github.com/golang/go/wiki/LearnTesting</a></li><li><a href="https://golang.org/cmd/cover/" target="_blank" rel="noopener">https://golang.org/cmd/cover/</a></li><li><a href="https://golang.org/doc/articles/race_detector.html" target="_blank" rel="noopener">https://golang.org/doc/articles/race_detector.html</a></li><li><a href="https://golang.org/pkg/cmd/go/internal/test/" target="_blank" rel="noopener">https://golang.org/pkg/cmd/go/internal/test/</a></li><li><a href="https://golang.org/pkg/testing" target="_blank" rel="noopener">https://golang.org/pkg/testing</a></li><li><a href="https://talks.godoc.org/github.com/tcnksm/talks/2016/12/golang-tokyo/golang-tokyo.slide" target="_blank" rel="noopener">https://talks.godoc.org/github.com/tcnksm/talks/2016/12/golang-tokyo/golang-tokyo.slide</a></li><li><a href="https://talks.golang.org/2014/testing.slide" target="_blank" rel="noopener">https://talks.golang.org/2014/testing.slide</a></li></ul><h1 id="é–¢é€£è¨˜äº‹"><a href="#é–¢é€£è¨˜äº‹" class="headerlink" title="é–¢é€£è¨˜äº‹"></a>é–¢é€£è¨˜äº‹</h1><ul><li><a href="https://future-architect.github.io/articles/20190604/">OpenCensus(OpenTelemetry)ã¨ã¯</a></li><li><a href="/tags/GoCDK/">GoCDK</a></li><li><a href="/tags/Serverless%E9%80%A3%E8%BC%89/">Serverlessé€£è¼‰</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h1&gt;&lt;p&gt;TIG ã®è¾»ã§ã™ã€‚&lt;a href=&quot;/articles/20200529/&quot;&gt;ä»Šå›ã¯æ˜¥ã®å…¥é–€ç¥­ã‚ŠğŸŒ¸&lt;/a&gt;ã¨ã„ã†ã“ã¨ã§ G
      
    
    </summary>
    
      <category term="Programming" scheme="https://future-architect.github.io/categories/Programming/"/>
    
    
      <category term="Go" scheme="https://future-architect.github.io/tags/Go/"/>
    
      <category term="introductory" scheme="https://future-architect.github.io/tags/introductory/"/>
    
  </entry>
  
  <entry>
    <title>ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ€è¡“ãƒ–ãƒ­ã‚°ã®é‹å–¶ã§å¿ƒãŒã‘ã¦ã„ã‚‹ã“ã¨</title>
    <link href="https://future-architect.github.io/articles/20200530/"/>
    <id>https://future-architect.github.io/articles/20200530/</id>
    <published>2020-05-30T04:28:08.000Z</published>
    <updated>2020-06-02T07:57:31.064Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>TIG DXãƒ¦ãƒ‹ãƒƒãƒˆã®çœŸé‡ã§ã™ã€‚ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ€è¡“ãƒ–ãƒ­ã‚°ã®é‹å–¶ã®1äººã§ã™ã€‚<a href="https://note.future.co.jp/" target="_blank" rel="noopener">æœªæ¥å ±</a>ã‚’é‹å–¶ã—ã¦ã„ã‚‹å²¡ç”°ã•ã‚“ãªã©ã¨ä¸€ç·’ã«ã€æ°—æŒã¡ã¯è‰ã®æ ¹æ´»å‹•ã§å¤–éƒ¨ç™ºä¿¡ã«æºã‚ã£ã¦ã„ã¾ã™ã€‚</p><p>ITä¼æ¥­ã®æŠ€è¡“ãƒ–ãƒ­ã‚°é‹å–¶ã¯ã€<strong>ã‚ã‚‹ä¸€å®šã®è³ªã‚’ã‚­ãƒ¼ãƒ—</strong>ã—ãªãŒã‚‰ã‚‚ã€<strong>æŠ•ç¨¿é »åº¦ã‚’é«˜ã‚</strong>ãƒ»<strong>ãã‚Œã‚’ç¶™ç¶šã™ã‚‹</strong>ã“ã¨ãŒæ±‚ã‚ã‚‰ã‚Œã€å‘¨å›²ã®æœŸå¾…å€¤ã‚‚ã‚ã‚‹ã®ã§ä¸­ã€…æ°—ã‚’æŠœã‘ãªã„ä»•äº‹ã ã¨æ€ã„ã¾ã™ã€‚å˜ç™ºãªã‚‰ã¨ã‚‚ã‹ãã€ç¶™ç¶šã™ã‚‹ã“ã¨ã¯å¿è€ãŒå¿…è¦ãªã®ã§ç‰¹ã«å¤§å¤‰ã§ã™ã€‚é‹å–¶ã—ã¦ã„ã¦ã“ã‚Œã¯ãƒŠãƒ¬ãƒƒã‚¸ã ãªã¨æ„Ÿã˜ãŸã“ã¨ã‚’ã¾ã¨ã‚ã¦ã„ãã¾ã™ã€‚</p><h1 id="æŠ€è¡“ãƒ–ãƒ­ã‚°ã®å¤§å¤‰ãªã¨ã“ã‚â‰’è¨˜äº‹ãƒã‚¿ã‚’æ¢ã™ã¨ã“ã‚"><a href="#æŠ€è¡“ãƒ–ãƒ­ã‚°ã®å¤§å¤‰ãªã¨ã“ã‚â‰’è¨˜äº‹ãƒã‚¿ã‚’æ¢ã™ã¨ã“ã‚" class="headerlink" title="æŠ€è¡“ãƒ–ãƒ­ã‚°ã®å¤§å¤‰ãªã¨ã“ã‚â‰’è¨˜äº‹ãƒã‚¿ã‚’æ¢ã™ã¨ã“ã‚"></a>æŠ€è¡“ãƒ–ãƒ­ã‚°ã®å¤§å¤‰ãªã¨ã“ã‚â‰’è¨˜äº‹ãƒã‚¿ã‚’æ¢ã™ã¨ã“ã‚</h1><p>ç†±å¿ƒãªå¯„ç¨¿è€…ãŒè¤‡æ•°ã„ã¦ã€é‹å–¶ã‹ã‚‰ã®å£°æ›ã‘ç„¡ã—ã§è¨˜äº‹ãŒé›†ã¾ã‚‹ã®ã§ã‚ã‚Œã°éå¸¸ã«æ¥½ã§ã™ãŒã€ãŸã„ã¦ã„ã®çµ„ç¹”ã‚„ãƒãƒ¼ãƒ ã¯ãã†ã§ãªã„ã¨æ€ã„ã¾ã™ã€‚ã¾ãŸã€æœ¬æ¥­ã¯è¨˜äº‹ã‚’æ›¸ãã“ã¨ã§ã¯ãªãã€è‡ªç¤¾ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®é–‹ç™ºã‚„ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºï¼ˆå½“ç¤¾ã ã¨ITã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ï¼‰ã§ã‚ã‚‹ãŸã‚ã€ãã¡ã‚‰ãŒå¿™ã—ã„å ´åˆã¯ã€å½“ç„¶æŠ€è¡“ãƒ–ãƒ­ã‚°ã¸ã®å„ªå…ˆåº¦ãŒã©ã†ã—ã¦ã‚‚ä¸‹ãŒã£ã¦ã—ã¾ã„ã¾ã™ã€‚ã¾ãŸã€ä½™åŠ›ãŒã‚ã£ã¦ã‚‚ãã‚Œãã‚Œã®ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚„ã€OSSã€ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã€å€‹äººã‚µãƒ¼ãƒ“ã‚¹é–‹ç™ºã€è³‡æ ¼å–å¾—ã€åŸ·ç­†ãªã©ãªã©ã€èˆˆå‘³ãŒãƒãƒ©ãƒãƒ©ã§ã‚ã£ã¦å¿…ãšã—ã‚‚åŸ·ç­†ã«é–¢å¿ƒãŒã‚ã‚‹ã¨ã¯é™ã‚Šã¾ã›ã‚“ã€‚</p><p>ãã“ã§<strong>ãƒ–ãƒ­ã‚°é‹å–¶ã¯ãƒ–ãƒ­ã‚°è¨˜äº‹ã®ç¨®ã‚’æ¢ã™</strong>ã“ã¨ã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚ãƒ–ãƒ­ã‚°é‹å–¶è€…ãŒå…¨ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®å‹•ãã‚’è£œè¶³ã™ã‚‹ã“ã¨ã¯ä¸å¯èƒ½ãªã®ã§ã€é€šå¸¸ã¯ã€Œä½•ã‹ãƒã‚¿ãŒã‚ã£ãŸã‚‰æ›¸ã„ã¦ãã ã•ã„ï½ã€ã¨ã„ã£ãŸä¾é ¼ã«ã¨ã©ã¾ã‚‹ã“ã¨ãŒé™ç•Œãªæ°—ãŒã—ã¾ã™ã€‚ä»Šå›ã¯ã“ã®è¾ºã‚Šã®å£°æ›ã‘ã‚‚å«ã‚ã¦ã„ãã¤ã‹ã‚„ã£ã¦è‰¯ã‹ã£ãŸå·¥å¤«ç‚¹ãŒã¾ã¨ã¾ã£ã¦ããŸã®ã§èª¬æ˜ã—ã¦ãã¾ã™ã€‚</p><p>ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ€è¡“ãƒ–ãƒ­ã‚°ã¯é–‹è¨­ã—ã¦4å¹´ä½çµŒéã—ã¾ã™ãŒã€æœ€åˆã¯æœˆ2,3ãƒšãƒ¼ã‚¹ã ã£ãŸã®ãŒã€æœ€è¿‘ã¯é€±2,3ãƒšãƒ¼ã‚¹ï¼ˆå¤šã„ã¨ãã¯é€±5ã‚‚ã‚¶ãƒ©ï¼‰ã«ä¸ŠãŒã£ã¦ãã¦ã„ã¾ã™ã€‚2019å¹´ã®4æœˆãã‚‰ã„ã‹ã‚‰ä½“åˆ¶ãŒå¤‰ã‚ã£ã¦æ˜ã‚‰ã‹ã«æ”¹å–„ã—ãŸã®ã§ã“ã“ã®è©±ã‚‚ã—ã¾ã™ã€‚</p><h1 id="ãƒãƒ¼ãƒ ã”ã¨ã®å½“ç•ªåˆ¶ã¯ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³"><a href="#ãƒãƒ¼ãƒ ã”ã¨ã®å½“ç•ªåˆ¶ã¯ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³" class="headerlink" title="ãƒãƒ¼ãƒ ã”ã¨ã®å½“ç•ªåˆ¶ã¯ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³"></a>ãƒãƒ¼ãƒ ã”ã¨ã®å½“ç•ªåˆ¶ã¯ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³</h1><p>ãƒ–ãƒ­ã‚°é–‹è¨­2å¹´ã»ã©ã¯ITæŠ€è¡“éƒ¨ç½²ã”ã¨ã«ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å›ã™åˆ¶åº¦ã«ã—ã¦ã„ã¾ã—ãŸã€‚ã“ã‚Œã®ç†ç”±ã§ã™ãŒã€ãƒ–ãƒ­ã‚°é‹å–¶è€…çš„ã«ã¯ã©ã®ãã‚Œãã‚Œã®ãƒãƒ¼ãƒ ãƒ¬ãƒ™ãƒ«ã¯ã¨ã‚‚ã‹ãå€‹äººãƒ¬ãƒ™ãƒ«ä½•ã‚’ã—ã¦ã„ã‚‹ã‹ã‚µãƒƒãƒ‘ãƒªåˆ†ã‹ã£ã¦ã„ãªã‹ã£ãŸã¨ã„ã†ã“ã¨ã¨ã€ä»®ã«å…¥ç¨¿ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å®ˆã‚‰ãªã‹ã£ãŸäººã«å¯¾ã—ã¦ã€ãƒ–ãƒ­ã‚°é‹å–¶è€…ãŒæ¥­å‹™èª¿æ•´ã™ã‚‹ã¨ã‹ã€ãƒã‚¤ãƒŠã‚¹è©•ä¾¡ã«ã™ã‚‹ã¨ã‹ã¯ã§ããªã„ã®ã§ã€ãã‚Œã ã£ãŸã‚‰ãã®ãƒªãƒ¼ãƒ€çµŒç”±ã«ã—ãŸã»ã†ãŒæ¥½ãªã‚“ã˜ã‚ƒãªã„ã‹ï¼Ÿã£ã¦ã„ã†å‰²ã¨ãƒã‚¬ãƒ†ã‚£ãƒ–ãªç†ç”±ã‹ã‚‰ã§ã™ã€‚</p><p>ã“ã‚Œã¯ã“ã‚Œã§æœ€ä½é™ä¸Šæ‰‹ãå›ã£ãŸã®ã§ã™ãŒã€æƒ³å®šã—ã¦ã„ãŸä»¥ä¸Šã®æŠ•ç¨¿é »åº¦ã«ã¯ãªã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ã¾ãŸã€é€”ä¸­ã§çµ„ç¹”å¤‰æ›´ãŒç™ºç”Ÿã—ãŸã®ã§ã™ãŒã€ãƒ–ãƒ­ã‚°é‹å–¶ã¯ãã‚Œã«è¿½éšã§ããšé€”ä¸­ã‹ã‚‰å½¢éª¸åŒ–ã—ã¾ã—ãŸã€‚</p><p>ã“ã®ãŸã‚ã€é€”ä¸­ã‹ã‚‰ã¯ãƒãƒ¼ãƒ ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç„¡ãã—ã¦ã€ãƒ–ãƒ­ã‚°é‹å–¶è€…ãŒç›´æ¥ãƒ¡ãƒ³ãƒãƒ¼ã«å£°ã‚’æ›¸ã‘ã¦è¨˜äº‹ã‚’æ›¸ããªãã‚‹ã‚¹ã‚¿ã‚¤ãƒ«ã«å¤‰æ›´ã—ã¾ã—ãŸã€‚ãƒãƒ¼ãƒ ã”ã¨ã®å½“ç•ªåˆ¶ãªã©ã¨ã„ã†æ¦‚å¿µã‚‚æ¶ˆãˆã¾ã—ãŸã€‚</p><img src="/images/20200530/photo_20200530_01.png"><p>ã“ã‚Œã¯ã¨ã¦ã‚‚ä¸Šæ‰‹ãå›ã‚Šã¾ã—ãŸã€‚ä½“åˆ¶å¤‰æ›´ã ã‘ãŒç†ç”±ã§ã¯ãªãè‰²ã€…å¹¸é‹ãŒé‡ãªã£ãŸçµæœã§ã™ãŒèª¬æ˜ã—ã¦ã„ãã¾ã™ã€‚</p><ol><li>2å¹´é–“ã§ä¼šç¤¾ã®Advent Calendarãªã©ã‚’è¤‡æ•°å›ã“ãªã—ã€è¨˜äº‹ã‚’æ›¸ãã“ã¨ã«æ…£ã‚ŒãŸãƒ¡ãƒ³ãƒãƒ¼ãŒå¢—ãˆãŸã“ã¨</li><li>200åã»ã©å‚åŠ ã—ã¦ã„ã‚‹ç¤¾å†…ãƒãƒ£ãƒƒãƒˆã‚°ãƒ«ãƒ¼ãƒ—ãŒã§ãã¦ã€æƒ…å ±åé›†ãŒã—ã‚„ã™ããªã£ãŸã“ã¨</li><li>2å¹´ã»ã©éƒ¨ç½²å˜ä½ã§ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å›ã—ãŸã“ã¨ã§ã‚ã‚‹ç¨‹åº¦å„äººã®æŠ€è¡“ã‚’å¿—å‘ã‚’ç†è§£ã—ã¦ã„ãŸã®ã§ã€é‹å–¶è€…ãŒèª­ã¿ãŸã„ãªã¨æ€ã£ãŸæŠ€è¡“ãƒ†ãƒ¼ãƒã«ã¤ã„ã¦å„äººã«ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã«ãŠé¡˜ã„ã§ããŸã“ã¨</li></ol><p>æœ¬å½“ã«èª­ã¿ãŸã„è¨˜äº‹ã«å¯¾ã—ã¦ã¯ã ã‚Œã‹ã‚’çµŒç”±ã›ãšç›´æ¥ç†±æ„ã‚’ä¼ãˆãŸæ–¹ãŒè‰¯ã„ãªã¨æ€ã£ã¦ã¾ã™ã€‚ã¾ãŸã€å½“ç•ªåˆ¶ã¯ãƒ–ãƒ­ã‚°ã‚’æ›¸ãã®ãŒ<strong>ã¤ã¾ã‚‰ãªã„ä»•äº‹ã«ãªã£ã¦ã—ã¾ã†</strong>ã®ãŒNGãƒã‚¤ãƒ³ãƒˆã ãªã¨æ€ã„ã¾ã™ã€‚æœ‰å¿—ã§ä½•ã‹ã‚’ã‚„ã‚‹åˆ†ã«ã¯è‰¯ã„ã§ã™ãŒã€ç¾©å‹™æ„ŸãŒç”Ÿã˜ãŸç¬é–“ã«ã‚„ã‚‹æ°—ãŒãªããªã‚‹ã‚¢ãƒ¬ã§ã™ã­ã€‚å½“ç•ªåˆ¶ã§ãƒãƒ¼ãƒ ãƒªãƒ¼ãƒ€ãƒ¼ãŒãƒ–ãƒ­ã‚°åŒ–ã‚’æŒ‡ç¤ºã™ã‚‹å¼·åˆ¶åŠ›ãŒè‡ªç™ºçš„ãªãƒ–ãƒ­ã‚°æŠ•ç¨¿ã®æ°—æŒã¡ã‚’æŠ‘åˆ¶ã—ã¦ã„ãŸã‹ã‚‚ï¼Ÿã¨ä»Šã¨ãªã£ã¦ã¯æ€ã„ã¾ã™ã€‚</p><h1 id="ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®æŠ€è¡“ãƒ–ãƒ­ã‚°ã‚’å–ã‚Šå·»ãåˆ¶åº¦"><a href="#ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®æŠ€è¡“ãƒ–ãƒ­ã‚°ã‚’å–ã‚Šå·»ãåˆ¶åº¦" class="headerlink" title="ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®æŠ€è¡“ãƒ–ãƒ­ã‚°ã‚’å–ã‚Šå·»ãåˆ¶åº¦"></a>ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®æŠ€è¡“ãƒ–ãƒ­ã‚°ã‚’å–ã‚Šå·»ãåˆ¶åº¦</h1><p>ãƒ–ãƒ­ã‚°ã‚’é€šã—ãŸå¤–éƒ¨ç™ºä¿¡è‡ªä½“ã‚’çµŒå–¶ãŒä¾¡å€¤ã‚’èªã‚ã¦ãã‚Œã¦ãŠã‚Šã€ã¾ãŸ<strong>ã‚„ã‚‹ã“ã¨ã‚’ã‚„ã£ã¦ã„ã‚Œã°ä»–ã¯å¥½ãã«ã™ã‚Œã°è‰¯ã„ã‚“ã˜ã‚ƒãªã„ï¼Ÿ</strong>ã¨ã„ã†ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®ä¾¡å€¤è¦³ãŒå‰æã¨ã—ã¦ã‚ã‚Šã¾ã™ã€‚</p><p>ã‚³ãƒ³ã‚µãƒ«æ¥­ç•Œã§ã¯ãŠå®¢æ§˜ã«ç›´æ¥çš„ã«è²¢çŒ®ã™ã‚‹æ´»å‹•ãŒå„ªå…ˆã•ã‚Œã‚‹ã“ã¨ãŒå¸¸è­˜ã«ãªã£ã¦ã¾ã™ãŒã€<strong>ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã§ã®æŠ€è¡“ãƒ–ãƒ­ã‚°ã®åŸ·ç­†æ´»å‹•ã¯ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æ´»å‹•ã‚„è‡ªå·±ç ”é‘½æ´»å‹•ã®ä¸€è²«ã¨ã—ã¦ç¤¾å†…ã«èªçŸ¥</strong>ã•ã‚Œã¦ãŠã‚Šã€å¤§äº‹ãªæ¥­å‹™ã®ä¸€ã¤ã¨ã—ã¦æ‰±ã‚ã•ã‚Œã¦ã„ã¾ã™ã€‚ç¤¾å†…ç”¨èªã§è¨€ã†ã¨ãƒãƒ£ãƒ¼ã‚¸ã‚³ãƒ¼ãƒ‰ãŒã¡ã‚ƒã‚“ã¨æº–å‚™ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯æ–°å’ã€ã‚­ãƒ£ãƒªã‚¢æ¡ç”¨é¢æ¥ã¨ã‹ã€æ–°äººç ”ä¿®ã¨ã‹ã€OJTã¨ã‹ãªã©ã¨ä¸¦ã¶é‡è¦ãªæ¥­å‹™ã¨ã—ã¦ã€ç¾å ´ã®ã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆã‚‚èªè­˜ã§ãã‚‹ã®ã§ã€éå¸¸ã«è‰¯ã„ãªã¨æ€ã„ã¾ã™ã€‚</p><p>ã€Œãƒªãƒ¼ãƒ€ãƒ¼ã«ã‚ˆã£ã¦ã¯ãƒ–ãƒ­ã‚°åŸ·ç­†æ™‚é–“ã‚’å«ŒãŒã‚‹ã‚“ã˜ã‚ƒãªã„ï¼Ÿã€ã¨ãŸã¾ã«å¤–éƒ¨ã®äººã«èã‹ã‚Œã¾ã™ãŒã€ã¶ã£ã¡ã‚ƒã‘ã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚ãƒãƒ¼ãƒ ãƒªãƒ¼ãƒ€ãƒ¼ã®ãƒãƒªã‚·ãƒ¼ã«ã‚ˆã£ã¦ã¯ã€ãƒãƒ¼ãƒ å†…Wikiã«éå¸¸ã«åŠ›ã‚’å…¥ã‚Œã¦ã„ãŸã‚Šã‚‚ã—ã¾ã™ã€‚ã¾ãŸã€ãã‚‚ãã‚‚ã‚„ã‚ã†ã¨ã—ã¦ã„ã‚‹ã“ã¨ãŒãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ£ãƒ–ãƒ«ãªã‚†ãˆã«è³ªãƒ»é‡ã¨ã‚‚ã«é›£ã—ã„æ¡ˆä»¶ãŒå¤šã„ã®ã§ã€ãƒ–ãƒ­ã‚°æ›¸ãã‚ˆã‚Šãƒãƒ¼ãƒ ã®ã‚¿ã‚¹ã‚¯ã‚’æ¶ˆåŒ–ã—ã¦ãã‚Œã‚ˆã€‚è‹¦ç¬‘ ã£ã¦æ€ã£ã¦ã„ã‚‹äººã‚‚ï¼ˆç›´æ¥è¨€ã‚ã‚ŒãŸã“ã¨ã¯ä¸€åº¦ã‚‚ç„¡ã„ã§ã™ãŒï¼‰å¤šã„ã¨æ€ã„ã¾ã™ã€‚</p><p>ã¨ã¯è¨€ãˆã€å…ˆã»ã©è¨€ã£ãŸã¨ãŠã‚Šã‚„ã‚‹ã“ã¨ã‚’ã‚„ã£ã¦ã„ã‚Œã°ï¼ˆå®£è¨€ã—ã¦ãƒªãƒ¼ãƒ€ãƒ¼ã¨åˆæ„ã—ãŸã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã‚’å‡ºã›ã°ï¼‰å‰²ã¨å¾Œã¯è‡ªç”±ã«ã‚„ã£ã¦è‰¯ã„ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®æ–‡åŒ–ãŒã‚ã‚‹ã®ã‹ã€ã‚ã¾ã‚Šã¨ã‚„ã‹ãè¨€ã‚ã‚Œã¾ã›ã‚“ã€‚</p><h1 id="æŠ•ç¨¿ãƒã‚¿ã®ç™ºè¦‹ã¨äºˆç´„ã®ç¢ºå®š"><a href="#æŠ•ç¨¿ãƒã‚¿ã®ç™ºè¦‹ã¨äºˆç´„ã®ç¢ºå®š" class="headerlink" title="æŠ•ç¨¿ãƒã‚¿ã®ç™ºè¦‹ã¨äºˆç´„ã®ç¢ºå®š"></a>æŠ•ç¨¿ãƒã‚¿ã®ç™ºè¦‹ã¨äºˆç´„ã®ç¢ºå®š</h1><p>å‰ã®ç« ã§å°‘ã—è§¦ã‚Œã¾ã—ãŸãŒã€ç¤¾å†…ãƒãƒ£ãƒƒãƒˆã¯ãƒã‚¿ã®å®åº«ã ãªã¨æ€ã„ã¾ã™ã€‚æ§˜ã€…ãªç¤¾å†…ãƒãƒ£ãƒƒãƒˆã‚’å¾˜å¾Šã—ã¾ã—ã‚‡ã†ã€‚<strong>ã‚‚ã—ãƒãƒ£ãƒƒãƒˆãŒãªã‘ã‚Œã°å°å…¥ã—ã¾ã—ã‚‡ã†</strong>ã€‚Slackã®ç„¡æ–™ãƒ—ãƒ©ãƒ³ã§ã‚ã‚Œã°ä»Šã™ãæœ‰æ–™ãƒ—ãƒ©ãƒ³ã«åŠ å…¥ã—ã¦ã€ãƒ­ã‚°ãŒæ¶ˆãˆãªã„ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚å†—è«‡ã®ã‚ˆã†ã§ã™ãŒåŠåˆ†ä»¥ä¸Šã¯æœ¬æ°—ã§ã™ã€‚</p><p>ãƒãƒ£ãƒƒãƒˆä¸Šã§<strong>ã€Œä»Šâ—‹â—‹ãŒç†è§£ã§ããšNæ™‚é–“æº¶ã‹ã—ã¦ã„ã‚‹ã€â†’ã€Œè§£æ±ºã—ãŸï¼ã€</strong>ã¨ã„ã£ãŸã‚³ãƒ¡ãƒ³ãƒˆãŒã‚ã‚Œã°ãƒãƒ£ãƒ³ã‚¹ã§ã™ã€‚ã™ã‹ã•ãš<strong>ãã®çŸ¥è¦‹ã‚’ãƒ–ãƒ­ã‚°ã«æ®‹ã—ã¾ã›ã‚“ã‹ï¼Ÿ</strong>ã¨ã•ã•ã‚„ãã¾ã—ã‚‡ã†ã€‚é‰„ã¯ã‚¢ãƒ„ã„ã†ã¡ãŒè‰¯ã„ã§ã™ã€‚è§£æ±ºã—ã¦ä½•ã‹ã—ã‚‰ã®è„³å†…éº»è–¬ãŒã§ã¦ã„ã‚‹çŠ¶æ…‹ã§ã™ã®ã§ã€ã€Œãœã²ã‚„ã‚Šã¾ã—ã‚‡ã†ï¼ã€ã¨å›ç­”ã—ã¦ãã‚Œã‚‹ã¨æ€ã„ã¾ã™ã€‚ã“ã®ã¨ãã®ã‚³ãƒ„ã§ã™ãŒã€ãã“ã§çµ‚ã‚ã‚Šã§ã¯ãªã<strong>ã€Œã§ã¯å†æ¥æœˆã®â—‹æ—¥ã¯ã©ã†ã§ã—ã‚‡ã†ï¼Ÿå‚™å¿˜ã«ä¼šè­°é€šçŸ¥ã‚’é€ã£ã¦ãŠãã¾ã™ã­ã€ã¨ç¶šã‘ã¾ã™</strong>ã€‚ã“ã‚ŒãŒå¤§äº‹ã§ã™ã€‚<strong>æœŸé–“ã¯1.5~2ãƒ¶æœˆãŒã¡ã‚‡ã†ã©ã‚ˆã„</strong>ã§ã™ã€‚1ãƒ¶æœˆã ã¨æ›¸ãå´ã®æ°—æŒã¡çš„ã«ã¯ã™ãã ãªã£ã¦æ€ã£ã¦ã—ã¾ã„ã¾ã™ã€‚2ãƒ¶æœˆã‚ˆã‚Šé•·ã„ã¨ã€å†…å®¹ã‚’å¿˜ã‚Œã¦ã—ã¾ã†æ°—ãŒã—ã¾ã™ã€‚ã¾ãŸã€ä¾é ¼è‡ªä½“ã‚‚æ™‚é–“ãŒçµŒéã™ã‚‹ã¨ã€ãƒãƒã£ãŸæœ¬äººã¨ã—ã¦ã‚‚å¤§ã—ãŸã“ã¨ãŒç„¡ã„ãƒã‚¿ã ã‚ã¨è„³å†…å¤‰æ›ã—ã¦ã—ã¾ã†ã®ã§ã€ã¾ã•ã«ãƒãƒã£ã¦è§£æ±ºã—ãŸã‚ˆï¼ã¨ã„ã†ç¬é–“ã‚’ç‹™ã£ã¦ã„ãã®ãŒè‰¯ã„ã§ã™ã€‚</p><p>ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã ã¨ã€Slackä»¥å¤–ã«ã‚‚ã€ŒGoç›¸è«‡å®¤ã€ã€Œã‚¯ãƒ©ã‚¦ãƒ‰ã‚¢ãƒ¼ã‚­ãƒŠãƒ¬ãƒƒã‚¸å…±æœ‰ä¼šã€ã€ŒğŸ’¡é›»å­å·¥ä½œéƒ¨ã€ã€Œâ˜ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ç›¸è«‡å®¤ã€ã€ŒAWS-APNã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã€ã€ŒOCV(ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°éƒ¨)ã€ãªã©å¤šãã®Google Hangoutãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ ãŒå­˜åœ¨ã—ã¾ã™ã€‚é‹å–¶çš„ã«ã¯ãªã‚‹ã¹ãå¤šãã®ãƒãƒ£ãƒãƒ«ã«å…¥ã‚Œã‚‹ãã‚‰ã„å‹äººé–¢ä¿‚ã‚„èˆˆå‘³ã‚’åºƒã’ã¦ãŠãã¨ã‚ˆã„ã§ã—ã‚‡ã†ã€‚å®Ÿéš›ã«ã€<a href="https://future-architect.github.io/tags/GoCDK/">GoCloudã®é€£è¼‰</a>ã‚’å§‹ã‚ã¨ã™ã‚‹ã„ãã¤ã‹ã®é€£è¼‰è¨˜äº‹ã¯ã€ã€ŒGoç›¸è«‡å®¤ã€ã§ç››ã‚Šä¸ŠãŒã£ã¦é–‹å§‹ã—ãŸã‚Šã€<a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCPé€£è¼‰</a>ã¯ã€Œã‚¯ãƒ©ã‚¦ãƒ‰ã‚¢ãƒ¼ã‚­ãƒŠãƒ¬ãƒƒã‚¸å…±æœ‰ä¼šã€ã§ã ã‚Œã‹ã®GCPã‚’å‹‰å¼·ã—ãŸã„ã¨ã„ã†ã¡ã‚‡ã£ã¨ã—ãŸã‚³ãƒ¡ãƒ³ãƒˆãŒã‚­ãƒƒã‚«ã‚±ã§ã™ã€‚</p><p>Goç›¸è«‡å®¤ã®ä¾‹ã§ã™ã€‚50äººãã‚‰ã„å‚åŠ ã—ã¦ã„ã¦å‰²ã¨ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ç›¸è«‡ãŒè¡Œã‚ã‚Œã¦ã„ã¾ã™ã€‚</p><img src="/images/20200530/photo_20200530_02.png" style="border:solid 1px #000000"><p>ã ã‚Œã‹ã®ç–‘å•ã¯ãƒ–ãƒ­ã‚°ãƒã‚¿ã®ç¨®ã§ã™ã—ã€åˆå¿ƒè€…ã®åŸºæœ¬çš„ãªè³ªå•ã‚‚æ­“è¿ã™ã‚‹é›°å›²æ°—ã‚’å‡ºã™ã®ãŒé‡è¦ã§ã™ã‚ˆã­ã€‚</p><p>ã“ã£ã¡ã¯ã€Œé›»å­å·¥ä½œéƒ¨ã€ã¨ã„ã†å…¬èªç¤¾å†…ã‚µãƒ¼ã‚¯ãƒ«ã®æ§˜å­ã§ã™ã€‚</p><img src="/images/20200530/photo_20200530_03.png" style="border:solid 1px #000000"><p>ãƒŸãƒ‹å››é§†ã‚‚æœ€é«˜ã§ã™ãŒã€AWS DeepRacerã‚’è²·ã„ãŸã„ã§ã™ãŒæŠ€é©ãŒ..ã¨ã„ã†ã‚ã‘ã§ã€ç„¡ã„ã‚‚ã®ã¯ä½œã‚‹ç²¾ç¥ã§HWã‹ã‚‰è¨­è¨ˆã€‚<a href="https://future-architect.github.io/articles/20191018/">ç¬¬1å›ç¤¾å†…ãƒ­ãƒœã‚³ãƒ³é–‹å‚¬è¨˜-ãƒ©ã‚¤ãƒ³ãƒˆãƒ¬ãƒ¼ã‚µãƒ¼ç·¨-</a> ã¨ã„ã†è¨˜äº‹ã«ç¹‹ã’ã¦ã„ã¾ã—ãŸã€‚åŸ·ç­†è€…ã®å‹æ‘ã•ã‚“ã¯ãƒãƒ£ãƒƒãƒˆç”»åƒã®ç­’äº•ã•ã‚“ã¨ã¨ã‚‚ã«é›»å­å·¥ä½œéƒ¨ã‚’æ”¯ãˆã‚‹ã‚¨ãƒ¼ã‚¹é”ã§ã™ãŒã€å®Ÿã¯AIã®æ–¹ãŒå°‚é–€ã¨ã„ã†äººç”Ÿ2é€±ç›®ã‹ãªï¼Ÿã£ã¦æ„Ÿã˜ã§ã™ã€‚ç­’äº•ã•ã‚“ã¯ä»–ã«ã‚‚<a href="https://future-architect.github.io/articles/20190826/">ã‚½ãƒ•ãƒˆã¨ãƒãƒ¼ãƒ‰ã®å£æ ¹ã‚’è¶Šãˆã‚ - IoTãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã®é–‹ç™ºã‚’ã‚½ãƒ•ãƒˆå±‹è¦–ç‚¹ã§è§£èª¬ã—ã¾ã™</a> ã¨ã„ã†è¨˜äº‹ã§ã€IoTã§ç£å®³å•é¡Œã«å–ã‚Šçµ„ã‚“ã è¨˜äº‹ã‚‚æ›¸ã„ã¦ãŠã‚Šã€å¼·ã„ã§ã™ã€‚</p><h1 id="æŠ½å‡ºã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å­¦ã¶"><a href="#æŠ½å‡ºã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å­¦ã¶" class="headerlink" title="æŠ½å‡ºã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å­¦ã¶"></a>æŠ½å‡ºã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å­¦ã¶</h1><p>æ¯æ—¥ã®ã‚ˆã†ã«ãƒãƒ£ãƒƒãƒˆã‚’å¾˜å¾Šã™ã‚‹ä½™è£•ãŒç„¡ã„ã¨ã„ã†æ–¹ãŒå¤§åŠã ã¨æ€ã†ã®ã§ã€ãƒãƒ£ãƒƒãƒˆã‚’æ¤œç´¢ã—ã¾ã—ã‚‡ã†ã€‚ã“ã‚Œã¯çµ„ç¹”é¢¨åœŸã‚„ãƒãƒ¼ãƒ ã®æ–‡åŒ–ã«å®Œå…¨ã«ä¾å­˜ã—ã¾ã™ãŒã€ä¾‹ãˆã°ã€ã€Œå­¦ã³ã€ã€ŒçŸ¥è¦‹ã€ã€ŒãƒŠãƒ¬ãƒƒã‚¸ã€ãªã©ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢ã—ã¦ã¿ã‚‹ã¨ã€ä½•ã‹ã—ã‚‰æ–°ã—ã„ç™ºè¦‹ã‚’ã—ãŸãƒ¡ãƒ³ãƒãƒ¼ã®ç”Ÿã®å£°ãŒçŸ¥ã‚Œã‚‹ã¨æ€ã„ã¾ã™ã€‚ãã®å†…å®¹ãŒè‰¯ã„ãªã¨æ€ã£ãŸã‚‰ãƒ–ãƒ­ã‚°åŸ·ç­†ä¾é ¼ã‚’ã—ã¦ã¿ã‚‹ã¨è‰¯ã„ã‹ãªã¨æ€ã„ã¾ã™ã€‚</p><p>Slackã§ã‚ã‚Œã°ã€ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚¹ã‚¿ãƒ³ãƒ—ï¼ˆAdd reactionï¼‰ã‚’æŒã¤ã‚³ãƒ¡ãƒ³ãƒˆã‚‚æ¤œç´¢ã§ãã¾ã™ã€‚ä¾‹ãˆã°ã€ŒçŸ¥è¦‹ã€ã¨ã„ã†çµµæ–‡å­—ãŒ <code>:chiken</code> ã§ä½¿ãˆã‚‹ã®ã§ã‚ã‚Œã°ã€ <code>has::chiken:</code> ã§æ¤œç´¢ã§ãã¾ã™ã€‚</p><img src="/images/20200530/photo_20200530_04.png" style="border:solid 1px #000000"><p>ä¸­ã€…è¨˜äº‹ãŒé›†ã¾ã‚‰ãªã„å ´åˆã¯ã€ã“ã†ã„ã£ãŸã‚¹ã‚¿ãƒ³ãƒ—ãƒˆãƒªã‚¬ãƒ¼ã«è¨˜äº‹å€™è£œã‚’è¦‹ç¹•ã†ã“ã¨ã‚‚æœ‰åŠ¹ã ãªã¨æ€ã„ã¾ã™ã€‚</p><h1 id="ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç‹¬è‡ªã®æˆæœç‰©ã«ãƒãƒ£ãƒ³ã‚¹ã‚ã‚Š"><a href="#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç‹¬è‡ªã®æˆæœç‰©ã«ãƒãƒ£ãƒ³ã‚¹ã‚ã‚Š" class="headerlink" title="ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç‹¬è‡ªã®æˆæœç‰©ã«ãƒãƒ£ãƒ³ã‚¹ã‚ã‚Š"></a>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç‹¬è‡ªã®æˆæœç‰©ã«ãƒãƒ£ãƒ³ã‚¹ã‚ã‚Š</h1><p>ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã¯ç¤¾å†…ã«ã„ã‚‹ã¨ã‚„ã‚‹ã“ã¨ã‚’ã‚„ã£ã¦ã„ã‚Œã°è‡ªç”±åº¦ãŒé«˜ãã€ãƒ™ãƒ³ãƒãƒ£ãƒ¼æ„ŸãŒã‚ã‚Šã¾ã™ãŒæ³•çš„ã«ã¯å¤§ä¼æ¥­ã«åˆ†é¡ã•ã‚Œã¦ã„ã¾ã™ã€‚èƒŒæ™¯ã«ã¯ãã†ã„ã†ãƒªãƒƒãƒãªé–‹ç™ºãƒªã‚½ãƒ¼ã‚¹ãŒã‚ã‚‹ã‹ã‚‰ã‹ã€ç¤¾å†…ã«ã¯ç”Ÿç”£æ€§ã‚’é«˜ã‚ã‚‹ãŸã‚ã«å¤šãã®ä»•çµ„ã¿ï¼ˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€è¨­è¨ˆãƒ„ãƒ¼ãƒ«ã€ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«ã€æ–¹æ³•è«–ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€etcï¼‰ãŒå­˜åœ¨ã—ã¾ã™ã€‚ãã®ä¸­ã§ã‚‚PJã§ç‹¬è‡ªã«ä½œã‚‰ã‚Œã‚‹æ¨™æº–è¦ç´„ãªã©ã¯ãƒã‚¿ã®å®åº«ã ãªã¨æ€ã„ã¾ã™ã€‚</p><p><a href="https://future-architect.github.io/articles/20200203/">ãƒãƒ¼ãƒ ã§æ©Ÿèƒ½è¨­è¨ˆã™ã‚‹ãŸã‚ã®PlantUMLæ¨™æº–åŒ–</a> ã‚„<a href="https://future-architect.github.io/articles/20200409/">ã‚¹ã‚­ãƒ¼ãƒãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆé–‹ç™ºã®ãŸã‚ã®OpenAPIï¼ˆSwaggerï¼‰è¨­è¨ˆè¦ç´„</a>ã¨ã„ã£ãŸã€ã‚ˆããã‚Œã‚’ã¾ã¨ã‚ã‚‹å·¥æ•°ãŒã‚ã£ãŸãª..!!ã¨è‡ªåˆ†ã§ã‚‚æ€ã†ã‚ˆã†ãªã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆãŒã€ã‚ã‚‹ä¸€ã¤ã®PJã®ãŸã‚ã«ä½œæˆã•ã‚ŒãŸã‚Šã—ã¾ã™ã€‚ã“ã†ã„ã£ãŸã‚‚ã®ã§ã‚‚ã¡ã‚ã‚“çŸ¥è²¡çš„ã«å•é¡Œãªã„ã‚‚ã®ã¯ã€ãƒ‰ãƒ³ãƒ‰ãƒ³æ±åŒ–ã—ã¦å¤–éƒ¨å…¬é–‹ã§ããªã„ã‹äº¤æ¸‰ã™ã‚‹ã¨è‰¯ã„ã‹ãªã¨æ€ã„ã¾ã™ã€‚<a href="https://future-architect.github.io/articles/20190612/">TypeScriptæ•™è‚²ç”¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å…¬é–‹ã®ãŠçŸ¥ã‚‰ã›</a>ã®è¨˜äº‹ã¯é€†ã«æœ€åˆã‹ã‚‰å¤–éƒ¨å…¬é–‹ã‚’è¦–é‡ã«å…¥ã‚Œã¦ä½œæˆã•ã‚ŒãŸã‚ˆã†ã§ã™ã€‚è‰²ã€…ãªæµã‚ŒãŒã‚ã‚Šã¾ã™ã­ã€‚</p><p>ã“ã‚“ãªã®éœ€è¦ãªã„ã§ã—ã‚‡ï¼Ÿã¨æ€ã†ãã‚‰ã„ã®æ–¹ãŒã€å‡ºã—ã¦ã¿ã‚‹ã¨æ„å¤–ã¨åå¿œãŒã‚ã‚Šé¢ç™½ã„ã§ã™ã€‚å®Ÿã¯ã“ã†ã„ã†è¦ç´„ãŒä½œã‚‰ã‚ŒãŸäº‹è‡ªä½“ã€é€šã®äººé–“ã—ã‹çŸ¥ã‚‰ãšã«ãã®ã¾ã¾åŸ‹ã‚‚ã‚Œã‚‹ã“ã¨ã‚‚å¤šã„ã§ã™ã€‚ç¤¾å†…ã«æµ¸é€ã•ã›ã‚‹ãŸã‚ã«ã¯ã€é€†èª¬çš„ã«ç¤¾å¤–ã«ä¸€èˆ¬å…¬é–‹ã—ã¦ã€Googleã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«å¼•ã£ã‹ã‹ã‚‹ã‚ˆã†ã«ã—ãŸã»ã†ãŒã€çµæœçš„ã«ã¯ç¤¾å†…ã®åˆ¥ã®PJã‹ã‚‰ã€Œã“ã‚Œè‰¯ã„è¦ç´„ã ã‹ã‚‰ãã®ã¾ã¾ã†ã¡ã§ã‚‚æµç”¨ã—ãŸã‚ˆã€ã¨ã„ã£ãŸå£°ã‚‚å¢—ãˆãŸå®Ÿæ„ŸãŒã‚ã‚Šã¾ã™ã€‚</p><h1 id="æ¨è–¦ã—ã¦ã‚‚ã‚‰ã†"><a href="#æ¨è–¦ã—ã¦ã‚‚ã‚‰ã†" class="headerlink" title="æ¨è–¦ã—ã¦ã‚‚ã‚‰ã†"></a>æ¨è–¦ã—ã¦ã‚‚ã‚‰ã†</h1><p>é‹å–¶è€…1äººã ã‘ã§ãƒ–ãƒ­ã‚°ãƒã‚¿ã‚’æ¢ã™ã®ã¯é™ç•ŒãŒã‚ã‚‹ã®ã§ã€å‘¨å›²ã®äººã‚’å·»ãè¾¼ã‚“ã§ã„ãã¾ã—ã‚‡ã†ã€‚ç‰¹ã«ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒãƒãƒ¼ã‚¸ãƒ£ã¯ã‚ªã‚¹ã‚¹ãƒ¡ã®å”åŠ›è€…ã§ã™ã€‚ãƒãƒ¼ãƒ ã®é€²æ—ã®å½±éŸ¿ã«ãªã‚‰ãªã„ç¯„å›²ã§é©ä»»è€…ã‚’æ•™ãˆã¦ãã‚Œã¾ã™ã—ã€è‡ªãƒãƒ¼ãƒ ä»¥å¤–ã®ä»–ã®ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã®æ¨è–¦ã‚‚ã—ã¦ãã‚Œã‚‹å¯èƒ½æ€§ãŒé«˜ã„ã§ã™ã€‚</p><p><a href="https://future-architect.github.io/articles/20200429/">Reduxã‚’åˆ†ã‹ã‚Šã‚„ã™ãè§£èª¬ã—ã¦ã¿ãŸ</a>ã‚„<a href="https://future-architect.github.io/articles/20200428/">Vue.jsã®slotã®æ©Ÿèƒ½ã‚’åˆå¿ƒè€…ã«ã‚ã‹ã‚‹ã‚ˆã†ã«è§£èª¬ã—ã¦ã¿ãŸ</a>ã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ç³»ã®è¨˜äº‹ã¯ã€ã ã‚Œã‹ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è¨˜äº‹ã‚’æ›¸ã‘ã‚‹äººãŒã„ãªã„ã§ã™ã‹ã­ãƒ¼ï¼Ÿã¨ã€éƒ¨ç½²ã®ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’ã—ã¦ã„ã‚‹æ˜Ÿã•ã‚“ã«èã„ã¦æ•™ãˆã¦ã‚‚ã‚‰ã£ãŸã‚Šã€ã•ã‚‰ã«ãã®äººã«æ¨è–¦ã—ã¦ã‚‚ã‚‰ã£ãŸäººã ã£ãŸã‚Šã—ã¾ã™ã€‚</p><h1 id="ç¤¾å†…ã‚¤ãƒ™ãƒ³ãƒˆã¯ãƒãƒ£ãƒ³ã‚¹"><a href="#ç¤¾å†…ã‚¤ãƒ™ãƒ³ãƒˆã¯ãƒãƒ£ãƒ³ã‚¹" class="headerlink" title="ç¤¾å†…ã‚¤ãƒ™ãƒ³ãƒˆã¯ãƒãƒ£ãƒ³ã‚¹"></a>ç¤¾å†…ã‚¤ãƒ™ãƒ³ãƒˆã¯ãƒãƒ£ãƒ³ã‚¹</h1><p>ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã¯ã€<a href="https://note.future.co.jp/n/n08d63ab0be11?gs=11b5819f8317" target="_blank" rel="noopener">å€‹äººãƒ—ãƒ¬ã‚¼ãƒ³æ±ºå‹æˆ¦</a>ã‚„ã€å¹´æœ«ã®<a href="https://note.future.co.jp/n/n7b0e5de1b2bc" target="_blank" rel="noopener">BPY</a>ãªã©ãªã©ç¤¾å†…ã‚¤ãƒ™ãƒ³ãƒˆãŒç››ã‚Šã ãã•ã‚“ã§ã™ã€‚ç‰¹ã«ã“ã†ã„ã£ãŸã‚ã‚‹ç¨‹åº¦ç«¶ã„åˆã†ã‚¤ãƒ™ãƒ³ãƒˆã«ç™»å£‡ã—ã¦ãã‚‹äººã¯ã€ã‚‚ã‚Œãªãå„ãƒãƒ¼ãƒ ã®ã‚¨ãƒ¼ã‚¹ç´šãŒå‡ºã¦ãã‚‹ã®ã§ã€ãƒãƒ£ãƒ³ã‚¹ã®å¡Šæ„ŸãŒã‚ã‚Šã¾ã™ã€‚</p><p>ã¡ã‚‡ã£ã¨ã§ã‚‚ã“ã®äººã®è©±ã®ç¶šãã‚’èããŸã„ã€ã¨æ€ã£ãŸã‚‰ãƒ–ãƒ­ã‚°åŒ–ã®ä¾é ¼ã‚’ã—ã¾ã—ã‚‡ã†ã€‚ã‚¢ãƒ„ã„ã†ã¡ã«ãƒãƒ£ãƒƒãƒˆã§DMã‚’é€ã‚Šã¾ã—ã‚‡ã†ã€‚å¤§ä½“å„ªã—ãç­”ãˆã¦ãã‚Œã‚‹ã®ã§ã€é–“é«ªå…¥ã‚Œãšä¼šè­°é€šçŸ¥ã‚’å…¥ã‚Œã¦æ—¢æˆäº‹å®ŸåŒ–ã—ã¾ã—ã‚‡ã†ã€‚</p><p>ä»–ã«ã‚‚ã€æœ‰å¿—ã®å‹‰å¼·ä¼šã‚„è¼ªèª­ä¼šãªã©ãƒãƒ£ãƒ³ã‚¹ã¯å¤šã„ã§ã™ã€‚</p><p><a href="https://future-architect.github.io/articles/20190729/">ç¤¾å†…æŠ€è¡“æ›¸è¼ªèª­ä¼šã¨Site Reliability Engineering</a> ã®è¨˜äº‹ã¯ãŸã¾ãŸã¾ã‚ªãƒ©ã‚¤ãƒªãƒ¼æœ¬ã‚’èª­ã‚“ã§ã„ãŸã‚°ãƒ«ãƒ¼ãƒ—ã«æ··ã–ã£ã¦æ›¸ã„ã¦ã‚‚ã‚‰ã„ã¾ã—ãŸãŒã€æ›¸ãå‡ºã™ã¨è‰²ã€…ãƒŠãƒ¬ãƒƒã‚¸ãŒã‚ã£ã¦è‰¯ã„çŸ¥è¦‹ã‚’ä¸–ã«å‡ºã›ãŸæ°—ãŒã—ã¾ã™ã€‚ã¾ãŸã€<a href="https://future-architect.github.io/articles/20200310/">Goã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®ã™ã™ã‚</a>ã‚‚åŒæ§˜ã«æœ‰å¿—ã®å‹‰å¼·ä¼šã®æ§˜å­ã‚’è¨˜äº‹åŒ–ã—ã¦ã‚‚ã‚‰ã£ãŸã‚‚ã®ã§ã™ã€‚å€‹äººçš„ã«ã¯ã€å®Œèµ°ã—ã¦ã‹ã‚‰ã§ã¯ãªãã€ä¸­é–“ã®æ®µéšã§è¨˜äº‹ã‚’æ›¸ãã¨ã€ãã®å¾Œã®ç¤¾å†…ã®å‹Ÿé›†æ™‚ã‚‚æ¥½ã«ãªã‚‹åŠ¹æœãŒã‚ã‚‹ã®ã§ã‚ªã‚¹ã‚¹ãƒ¡ã§ã™ã€‚</p><h1 id="ãƒ†ãƒ¼ãƒã‚’æ±ºã‚ã¦å‹Ÿé›†ã™ã‚‹"><a href="#ãƒ†ãƒ¼ãƒã‚’æ±ºã‚ã¦å‹Ÿé›†ã™ã‚‹" class="headerlink" title="ãƒ†ãƒ¼ãƒã‚’æ±ºã‚ã¦å‹Ÿé›†ã™ã‚‹"></a>ãƒ†ãƒ¼ãƒã‚’æ±ºã‚ã¦å‹Ÿé›†ã™ã‚‹</h1><p>ã€Œä½•ã‹æ›¸ã„ã¦ã€ã¨ã„ã†è‡ªç”±åº¦ã®é«˜ã„ä¾é ¼ãƒ™ãƒ¼ã‚¹ã ã¨ä¸­ã€…è¨˜äº‹ãŒé›†ã¾ã‚Šã«ãã„ã§ã™ã€‚ãã®ãŸã‚ä½•ã‹ã—ã‚‰ã®ãƒ†ãƒ¼ãƒã‚’æ±ºã‚ã‚‹ã¨çµŒé¨“ä¸Šè‰¯ã„ã§ã™ã€‚ã‚‚ã—ã€ãƒ†ãƒ¼ãƒå‹Ÿé›†ã§ã‚‚é›†ã¾ã‚‰ãªã„å ´åˆã¯ã€ãƒ†ãƒ¼ãƒã«èˆˆå‘³ãŒã‚ã‚‹äººãŒå°‘ãªã„ã‹ã—ã£ãã‚Šæ¥ã¦ã„ãªã„ã“ã¨ãŒå¤šã„ã®ã‹ãªã¨æ€ã„ã¾ã™ã€‚ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ€è¡“ãƒ–ãƒ­ã‚°ã ã¨ã€åŠåˆ†ãã‚‰ã„ãŒä¼ç”»é€£è¼‰ãƒ¢ãƒãŒç· ã‚ã¦ã„ã‚‹ãã‚‰ã„ã€é‡è¦ãªå–ã‚Šçµ„ã¿ã§ã™ã€‚</p><p>ã“ã®è¾ºã‚Šã®å†…å®¹ã¯ã€â€ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ€è¡“ãƒ–ãƒ­ã‚°ã§è¡Œã£ã¦ã„ã‚‹é€£è¼‰ä¼ç”»ãŒè‰¯ã„ã‚ˆã£ã¦è©±â€ã®è¨˜äº‹ã‚’è¿‘ã€…å…¬é–‹ã—ã¦ã€ãã¡ã‚‰ã«è©³ã—ãæ›¸ãã¾ã™ã®ã§ã€ãœã²å…¬é–‹å¾Œã«å‚è€ƒã«ã—ã¦ã¿ã¦ãã ã•ã„ã€‚</p><h1 id="ã‚¢ãƒ«ãƒã‚¤ãƒˆerã‚„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ç”Ÿã«å°±è·æ´»å‹•ãƒã‚¿ã¨ã—ã¦æ›¸ã„ã¦ã‚‚ã‚‰ã†"><a href="#ã‚¢ãƒ«ãƒã‚¤ãƒˆerã‚„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ç”Ÿã«å°±è·æ´»å‹•ãƒã‚¿ã¨ã—ã¦æ›¸ã„ã¦ã‚‚ã‚‰ã†" class="headerlink" title="ã‚¢ãƒ«ãƒã‚¤ãƒˆerã‚„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ç”Ÿã«å°±è·æ´»å‹•ãƒã‚¿ã¨ã—ã¦æ›¸ã„ã¦ã‚‚ã‚‰ã†"></a>ã‚¢ãƒ«ãƒã‚¤ãƒˆerã‚„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ç”Ÿã«å°±è·æ´»å‹•ãƒã‚¿ã¨ã—ã¦æ›¸ã„ã¦ã‚‚ã‚‰ã†</h1><p>ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã§ã¯å¤šãã®ã‚¢ãƒ«ãƒã‚¤ãƒˆerã‚„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ç”Ÿã‚’å—ã‘å…¥ã‚Œã¦ã„ã¾ã™ã€‚ä¸­ã«ã¯NDAï¼ˆç§˜å¯†ä¿æŒå¥‘ç´„æ›¸ï¼‰ã‚’çµã‚“ã§æ¥­å‹™ã—ã¦ã‚‚ã‚‰ã†æ–¹ã‚‚ã„ã‚‹ãã†ã§ã™ãŒã€ãã‚Œä»¥å¤–ã®OSSé–‹ç™ºãªã©ã«æºã‚ã£ã¦ã‚‚ã‚‰ã£ã¦ã„ã‚‹ãƒ¡ãƒ³ãƒãƒ¼ã«ã¯ã€<strong>å°±è·æ´»å‹•ã§ã‚‚ä½¿ãˆã‚‹ã‚ˆã†ã«</strong>ãƒ‰ãƒ³ãƒ‰ãƒ³è¨˜äº‹ã‚’æ›¸ã„ã¦ã‚‚ã‚‰ã£ã¦ã„ã¾ã™ã€‚ã‚¢ãƒ«ãƒã‚¤ãƒˆã‚„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã®æ¥­å‹™å†…å®¹ã®ç”Ÿã®å£°ã‚’å¤–éƒ¨ã«ç™ºä¿¡ã§ãã¦ã€å¤šåˆ†ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼çš„ã«ã‚‚ãƒãƒƒãƒ”ãƒ¼ã€ãã£ã¨ä¸–ã®ä¸­ã«ã‚ã‚‹å¹¸ã›ã®ç·é‡ã‚’å¢—ã‚„ã›ã¾ã™ã€‚</p><p>æœ€åˆã¯<a href="https://future-architect.github.io/articles/20170421/">UnityæœªçµŒé¨“è€…ãŒHoloLensã‚¢ãƒ—ãƒªã®é–‹ç™ºã‚’ã—ã¦ã¿ãŸ</a>ã®æ¾¤ç”°ã•ã‚“ï¼ˆãã®å¾Œå…¥ç¤¾ã‚’æ±ºã‚ã¦ãã‚ŒãŸï¼‰ãŒ1ã¤ç›®ã§ã“ã‚Œã¯3å¹´å‰ãã‚‰ã„ã®äº‹ä¾‹ã§ã™ã€‚æœ€è¿‘ã ã¨<a href="https://future-architect.github.io/articles/20200512/">æ—¥æœ¬è£½HeadlessCMSã®microCMSã‚’è§¦ã£ã¦ã¿ãŸ</a>ã®ä¸‰æ‘ã•ã‚“ã‚„ã€<a href="https://future-architect.github.io/articles/20200526/">æ–°ç±³ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒï¼‘ã‹æœˆã®ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã§å­¦ã‚“ã ã“ã¨</a>ã‚’æ›¸ã„ã¦ãã‚ŒãŸæœ¬ç”°ã•ã‚“ãªã©ã€æ§˜ã€…ã§ã™ã€‚ã‚‚ã¡ã‚ã‚“Qiitaãªã©åˆ¥ã®ãƒ–ãƒ­ã‚°åª’ä½“ã«ã‚‚ã€æ¥­å‹™ã§å¾—ãŸãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãªã©æ±ç”¨çš„ãªå†…å®¹ã¯ãƒ‰ãƒ³ãƒ‰ãƒ³æ›¸ãã‚ˆã†ã«èƒŒä¸­ã‚’ãŠã—ã¦ã„ã¾ã™ã€‚</p><h1 id="Advent-Calendaræ™‚æœŸã®é‹å–¶"><a href="#Advent-Calendaræ™‚æœŸã®é‹å–¶" class="headerlink" title="Advent Calendaræ™‚æœŸã®é‹å–¶"></a>Advent Calendaræ™‚æœŸã®é‹å–¶</h1><p>ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ€è¡“ãƒ–ãƒ­ã‚°ã®å‡ºè‡ªã¯ã€<a href="https://qiita.com/organizations/future?page=1" target="_blank" rel="noopener">Qiita Organization</a>ã«ã‚ã‚‹ãŸã‚ã€å½“ç„¶ã®ã‚ˆã†ã«Qiitaã®Advent Calendarã«æ¯å¹´å‚åŠ ã—ã¦ã„ã¾ã™ã€‚</p><ul><li><a href="http://qiita.com/advent-calendar/2019/future" target="_blank" rel="noopener">2019</a></li><li><a href="http://qiita.com/advent-calendar/2018/future" target="_blank" rel="noopener">2018</a></li><li><a href="http://qiita.com/advent-calendar/2017/future" target="_blank" rel="noopener">2017</a></li><li><a href="http://qiita.com/advent-calendar/2016/future" target="_blank" rel="noopener">2016</a></li><li><a href="http://qiita.com/advent-calendar/2015/future" target="_blank" rel="noopener">2015</a></li></ul><p>ã“ã®12æœˆã¯æŠ€è¡“ãƒ–ãƒ­ã‚°ç•Œéšˆã§ã¯ã€è±Šä½œã®æœˆã¨å‘¼ã°ã‚Œ(è¦å‡ºå…¸)ã€è¨€ã„æ›ãˆã‚Œã°ãƒ¬ãƒƒãƒ‰ã‚ªãƒ¼ã‚·ãƒ£ãƒ³ã§ã™ã€‚ã¾ãŸç¤¾å“¡ã®å¤šããŒæ§˜ã€…ãªã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«å‚æˆ¦ã—ã¦ã„ãŸã‚Šã€ãã‚‚ãã‚‚12æœˆã¯BPYã‚„è©•ä¾¡æ™‚æœŸã¨é‡ãªã‚Šå½“ç¤¾ã®ç¹å¿™æœŸã§ã™ã€‚ãã®ãŸã‚<strong>ã“ã®æ™‚æœŸã«ã¯ã‚ã¾ã‚Šæ´»å‹•ã‚’ã—ãªã„</strong>ã‚ˆã†ã«å¿ƒãŒã‘ã¦ã„ã¾ã™ã€‚ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã¨ã—ã¦ã‚‚Advent Calendarã«å‚åŠ ã™ã‚‹ã‘ã©ã€ãã®è¨˜äº‹ã¯Qiitaä¸Šã«ç›´æ¥æ›¸ã„ã¦ã‚‚ã‚‰ã†ã“ã¨ã‚’åŸºæœ¬ã¨ã—ã¦ã„ã¾ã™ã€‚Qiitaè¨˜äº‹ã‚’æ›¸ã„ãŸã“ã¨ãŒãªã„äººã«ã‚‚ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ã«è¨˜äº‹ã‚’æ›¸ã„ã¦ã‚‚ã‚‰ã†ã“ã¨ã‚’æœŸå¾…ã‚‚ã—ã¦ã„ã¾ã™ã€‚</p><p>Advent Calendarã®å‰æœˆ11æœˆã¯å‡ªã®æœˆã¨å‘¼ã°ã‚Œï¼ˆè¦å‡ºå…¸)ã€æ°—æŒã¡æŠ€è¡“ãƒ–ãƒ­ã‚°ç•Œã§ã®æŠ•ç¨¿ãŒæ¸›ã‚‹ã®ã§ã€<strong>é€†å¼µã‚Šã§11æœˆã«æŠ•ç¨¿ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å¯„ã›ã‚‹</strong>å·¥å¤«ã‚’ã—ã¦ã„ã¾ã™ã€‚</p><h1 id="ä¾é ¼ã®ã‚³ãƒ„"><a href="#ä¾é ¼ã®ã‚³ãƒ„" class="headerlink" title="ä¾é ¼ã®ã‚³ãƒ„"></a>ä¾é ¼ã®ã‚³ãƒ„</h1><p>ã€Œã¨ã‚Šã‚ãˆãšæ›¸ã„ã¦ãã ã•ã„ã€ã¨ã„ã†ãƒ†ã‚¤ã‚¹ãƒˆã ã¨ã€é ¼ã¾ã‚ŒãŸå´ã‚‚ä½•ã‚’æ›¸ã„ã¦è‰¯ã„ã‹åˆ†ã‹ã‚‰ãªã„ã®ã§ã€ãªã‚‹ã¹ãå…·ä½“çš„ã«â—‹â—‹ã«ãƒãƒã£ãŸå†…å®¹ã«ã¤ã„ã¦æ›¸ã„ã¦ãã ã•ã„ã¨ã‹ã€ãƒãƒ¼ãƒ ã®ãƒªãƒã‚¸ãƒˆãƒªæ§‹é€ ã«ã¤ã„ã¦ã®å·¥å¤«ã«ã¤ã„ã¦æ›¸ã„ã¦ãã ã•ã„ã¨ã‹ã€ç´°ã‹ããƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡ºã—ãŸã»ã†ãŒçµŒé¨“çš„ã«åå¿œã¯è‰¯ã‹ã£ãŸã§ã™ã€‚</p><p><a href="https://future-architect.github.io/articles/20200129/">ãƒªãƒ¢ãƒ¼ãƒˆãƒ¯ãƒ¼ã‚¯ã‚’ä¿ƒé€²ã•ã›ã‚‹Daily Stand-up Meeting</a>ã®è¨˜äº‹ã¯ã€ã‚ã‚‹ãƒãƒ¼ãƒ ãŒæ¯æ—¥15åˆ†ãã‚‰ã„ã®ã‚·ãƒ§ãƒ¼ãƒˆæœä¼šã‚’ã—ã¦ã„ã‚‹é¢¨æ™¯ã‚’è¦‹ã¦ï¼ˆã¾ã ã‚³ãƒ­ãƒŠãŒç„¡ã‹ã£ãŸé ƒã§ã™ï¼‰ã€èã„ã¦ã¿ã‚‹ã¨è‰²ã€…ä½œæˆ¦ãŒã‚ã‚Šé¢ç™½ãã†ã ã£ãŸã®ã§è¨˜äº‹åŒ–ã‚’ä¾é ¼ã—ã¾ã—ãŸã€‚ã“ã‚Œã‚’ä¾é ¼ã—ãŸã¨ãã¯ã€ã€Œè‰¯ã„ãƒ†ãƒ¼ãƒã‚’è¦‹ã¤ã‘ã¦ãã‚Œã¦ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼ã€ã¨é€†ã«æ„Ÿè¬ã•ã‚Œæ–°é®®ãªæ°—æŒã¡ã«ãªã‚Šã¾ã—ãŸã€‚ãƒ–ãƒ­ã‚°ã‚’æ›¸ããŸã„ã‘ã©ãƒã‚¿ã‚’ã†ã¾ãæ€ã„ã¤ã‘ãªã„äººã‚‚ã„ã¦ã€<strong>å®¢è¦³çš„ãªç«‹å ´ã‹ã‚‰ãƒã‚¿ã‚’å¼•ãå‡ºã—ã¦ã‚ã’ã‚‹èƒ½åŠ›ã‚‚å¤§äº‹</strong>ãªã®ã‹ã‚‚ãªã€ã¨æ€ã£ãŸè¨˜æ†¶ãŒã‚ã‚Šã¾ã™ã€‚ã‚‚ã—ã‹ã™ã‚‹ã¨ãƒã‚¿ã‚’è¦‹ã¤ã‘ã‚‹ã®ã‚‚ä¸€ç¨®ã®å‰µé€ æ€§ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹ä»•äº‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><p>ä¼æ¥­ITæŠ€è¡“ãƒ–ãƒ­ã‚°ã§ã™ãŒã€ç´”ç²‹ãªãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®å†…å®¹ä»¥å¤–ã«ã‚‚ã€<a href="https://future-architect.github.io/articles/20200116/">å®Ÿè·µDrawio</a>ã®ã‚ˆã†ãªãƒ„ãƒ¼ãƒ«ã®ä½¿ã„æ–¹ãªã©ã€å¹…ã¯ã‹ãªã‚Šåºƒã„ã¨æ€ã„ã¾ã™ã€‚è‡ªåˆ†ãŒçŸ¥ã‚‰ãªãã¦å‹‰å¼·ã«ãªã£ãŸã“ã¨ã¯ã€å¸¸ã«ä¸–ã«å…¬é–‹ã—ã¦è²¢çŒ®ã§ããªã„ã‹æ•™ãˆã¦ãã‚ŒãŸäººã«ç›¸è«‡ã™ã‚‹ã¨è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚</p><h1 id="ãƒ™ãƒ†ãƒ©ãƒ³ã‚’å‘³æ–¹ã«ä»˜ã‘ã‚‹"><a href="#ãƒ™ãƒ†ãƒ©ãƒ³ã‚’å‘³æ–¹ã«ä»˜ã‘ã‚‹" class="headerlink" title="ãƒ™ãƒ†ãƒ©ãƒ³ã‚’å‘³æ–¹ã«ä»˜ã‘ã‚‹"></a>ãƒ™ãƒ†ãƒ©ãƒ³ã‚’å‘³æ–¹ã«ä»˜ã‘ã‚‹</h1><p>ã‹ãªã‚Šã®ã‚¹ãƒ†ãƒ¬ã‚ªã‚¿ã‚¤ãƒ—ãŒå…¥ã£ã¦ã„ã‚‹ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ãŒã€ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ä¸­ã§30ä¸­ç›¤ã‚’è¶…ãˆã¦ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã«äººç”Ÿã‚’æ›ã‘ã¦ã„ã‚‹å‹¢ã¯æ§ãˆã‚ã«ã„ã£ã¦ã‹ãªã‚Šå¼·ã„ã§ã™ã€‚ç”Ÿå­˜ãƒã‚¤ã‚¢ã‚¹ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ã€‚å½¼ã‚‰ã¯ãŠãã‚‰ãæŠ€è¡“ãƒ–ãƒ­ã‚°ã®è¨˜äº‹ãƒ¬ãƒ™ãƒ«ã‚’åº•ä¸Šã’ã—ã¦ãã‚Œã‚‹ãã®é“ã®å°‚é–€å®¶é›†å›£ã ã¨æ€ã„ã¾ã™ãŒã€ä¸­ã«ã¯å…¨ãæŠ€è¡“ç™ºä¿¡ã«èˆˆå‘³ãŒãªã„äººãŒã„ã¾ã™ã€‚ã©ã®ã‚ˆã†ã«ä¾é ¼ã™ã¹ãã§ã—ã‚‡ã†ã‹ï¼Ÿæ›¸ã„ã¦æ¬²ã—ã„ãƒ†ãƒ¼ãƒã«ã¤ã„ã¦å…·ä½“çš„ã«ãŠé¡˜ã„ã™ã‚Œã°ã‚ˆã„ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿã‚¹ã‚­ãƒ«ã‚‚å®Ÿç¸¾ã‚‚æ–‡å¥ãªã„ã®ã§ã€ãœã²1æœ¬ã ã‘ã§ã‚‚..1æœ¬ã ã‘ã§ã‚‚æ›¸ã„ã¦æ¬²ã—ã„ã¨æ€ã†æ°—æŒã¡ã¯ã‚ã‚Šã¾ã™ã€‚</p><p>æ®‹å¿µãªãŒã‚‰ã€çµŒé¨“ä¸Šã§ã™ãŒã“ã®æ‰‹ã®èˆˆå‘³ã®ç„¡ã„ãƒ™ãƒ†ãƒ©ãƒ³å‹¢ã«åŸ·ç­†ã‚’ä¾é ¼ã—ã¦ã‚‚ä¸€åº¦ã‚‚æˆåŠŸã—ãŸè©¦ã—ãŒç„¡ã„ã®ã§ã™ã€‚æŠ¼ã™ã ã‘ç„¡é§„ã§ã™ã€‚ãã®åŠ´åŠ›ãŒã‚ã‚‹ãªã‚‰åˆ¥ã®ã¨ã“ã‚ã«æ³¨ã„ã æ–¹ãŒãŠäº’ã„å¹¸ã›ã§ã™ã€‚ã¡ã‚‡ã£ã¨ã§ã‚‚å«Œãã†ãªã‚ªãƒ¼ãƒ©ã‚’æ„Ÿã˜ãŸã‚‰å³æ™‚æ’¤é€€ã—ã¾ã—ã‚‡ã†ã€‚å¤šåˆ†ã€å¤§äººãªã ã‘ã«ãƒã‚¤ãƒ«ãƒ‰ã«åŒ…ã‚“ã§ã„ã‚‹ã ã‘ã§æœ¬å½“ã«å«ŒãŒã£ã¦ã„ã¾ã™ã€‚ãƒ™ãƒ†ãƒ©ãƒ³ã«ãªã‚‹ã¨ITæŠ€è¡“ä»¥å¤–ã«ä»•äº‹ã®é€²ã‚æ–¹ãŒä¸Šæ‰‹ããªã‚Šã€å„ªå…ˆåº¦ä»˜ã‘ã‚‚ãƒ¬ãƒ™ãƒ«ãŒé«˜ã„äººãŒå¤šã„ã§ã™ã€‚å¿…è¦ã«ãªã£ãŸã‚‰æœ¬äººã‹ã‚‰ä½•ã‹æ›¸ã“ã†ã‹ï¼Ÿï¼ˆã¨ã„ã†ã‚ˆã‚Šã“ã®â—‹â—‹ã®è¨˜äº‹ã‚’å‡ºã—ãŸã„ã‘ã©è‰¯ã„ã‹ãªï¼Ÿã£ã¦æ„Ÿã˜ã§ã™ï¼‰ã£ã¦è¨€ã£ã¦ãã‚Œã‚‹ã®ã§ã€ã®ã‚“ã³ã‚Šå¾…ã¡ã¾ã—ã‚‡ã†ã€‚ç¹°ã‚Šè¿”ã—ã¾ã™ãŒãã®æ™‚ãŒæ¥ãªã„é™ã‚Šã€é ¼ã¿è¾¼ã‚“ã§ã‚‚æ›¸ã„ã¦ãã‚Œã‚‹ã“ã¨ã¯ã»ã¼ç„¡ã„ã§ã™ã€‚é€†ã«æ™‚ãŒæ¥ã‚Œã°å°–ã£ãŸè¨˜äº‹ã‚’å‡ºã—ã¦ãã‚Œã¾ã™ã€‚ã¾ã‚‹ã§å¤§è‡ªç„¶ã€è’ã¶ã‚‹ç¥ã®ã‚ˆã†ã§ã™ã­ã€‚</p><p>ã¾ãŸã€ã“ã†ã„ã£ãŸæ°—è³ªã®äººã¯ã€æœ¬å½“ã«ä¸€åŒ¹ç‹¼æ°—è³ªã‚‚ã„ã¾ã™ãŒã€è‡ªåˆ†ã®çŸ¥è¦‹ã‚’ä¸–ç•Œã«å…¬é–‹ã™ã‚‹ã‚ˆã‚Šã©ã¡ã‚‰ã‹ã¨è¨€ãˆã°ç›®ã®å‰ã®ãƒ¡ãƒ³ãƒãƒ¼è‚²æˆã«èˆˆå‘³ã‚’æŒã£ã¦ã„ã‚‹æ°—ãŒã—ã¾ã™ã€‚ã‚‚ã—ãƒ¡ãƒ³ãƒãƒ¼è‚²æˆã«èˆˆå‘³ã‚’æŒã£ã¦ã„ã‚‹äººã§ã‚ã‚Œã°ã€ãƒ¡ãƒ³ãƒãƒ¼ã‚µã‚¤ãƒ‰ã«è¨˜äº‹ã‚’æ›¸ã‘ãã†ãªäººãŒã„ãªã„ã‹ç´¹ä»‹ã‚‚ã‚‰ã£ãŸã»ã†ãŒè‰¯ã„ã§ã—ã‚‡ã†ã€‚ã“ã®ã¸ã‚“ã¯ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ãŒè‰¯ã„ç´¹ä»‹å½¹ã¨ã„ã£ãŸã¨ã“ã‚ã¨å…±é€šã—ã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><p>ã‚‚ã¡ã‚ã‚“ã€ä¸­ã«ã¯åŸ·ç­†ã«å”åŠ›çš„ãªæ–¹ã‚‚ã„ã‚‰ã£ã—ã‚ƒã‚‹ã®ã§ã€ãã†ã„ã†è«¸å…ˆè¼©ã«ã¯å…¨åŠ›ã§ã‚ªãƒãƒ€ãƒªã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚</p><h1 id="å…¥ç¨¿ãŒé…ã‚ŒãŸæ™‚"><a href="#å…¥ç¨¿ãŒé…ã‚ŒãŸæ™‚" class="headerlink" title="å…¥ç¨¿ãŒé…ã‚ŒãŸæ™‚"></a>å…¥ç¨¿ãŒé…ã‚ŒãŸæ™‚</h1><p>ã‚‚ã—ã€å…¥ç¨¿ãŒé…ã‚Œã‚‹ã¨ã„ã†é€£çµ¡ãŒã‚ã£ãŸæ™‚ã§ã™ãŒã€<strong>åŸºæœ¬çš„ã«æ¥­å‹™å„ªå…ˆ</strong>ãªã®ã§æ°—ã«ã—ãªã„ã§ã™ã€‚å¤§ä½“1é€±é–“ãã‚‰ã„ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚ºãƒ©ã—ãŸã„ã¨è¨€ã‚ã‚Œã¾ã™ãŒã€ãã‚“ãªã«ä½™åŠ›ãŒãªã„ä¸­ã§1é€±é–“å¾Œã ã¨ã€ã‚¢ã‚¯ã‚·ãƒ‡ãƒ³ãƒˆãŒç™ºç”Ÿã—ãŸæ™‚ã«ãƒ–ãƒ©ãƒƒã‚¯ä¼æ¥­ãƒ¢ãƒ¼ãƒ‰ã«é™¥ã‚‹æã‚ŒãŒã‚ã‚Šã¾ã™ã€‚æœ¬å½“ã«ã‚ã¨ã¡ã‚‡ã£ã¨ã ã£ãŸã‚‰è‰¯ã„ã§ã™ãŒã€1é€±é–“ã¨è¨€ã‚ãš1ãƒ¶æœˆã‚ºãƒ©ã—ã¦ãƒ›ãƒ¯ã‚¤ãƒˆåŒ–ã—ã‚ˆã†ã¨æ„è­˜ã—ã¦ã„ã¾ã™ã€‚</p><p>ã‚‚ã—ã€é€£çµ¡ãŒç„¡ãã¦ã‚¹ãƒ«ãƒ¼ã—ã¦ã„ã‚‹ã¨ãã§ã™ãŒã€ãƒãƒ£ãƒƒãƒˆã®DMã§ãƒãƒ©ã£ã¦ã‚³ãƒ¡ãƒ³ãƒˆã‚’é€ã£ã¦ã„ã¾ã™ã€‚å¤§ä½“æ‚ªæ°—ã¯ç„¡ã„ã®ã§ã€ãƒªã‚¹ã‚±ã™ã‚‹ã‹ã©ã†ã‹ç¢ºèªã—ã¦ã€ã“ã‚Œã¯1.5ãƒ¶æœˆãã‚‰ã„å¾Œã‚ã«ã—ã¦ã„ã¾ã™ã€‚ã‚ã¾ã‚Š1äººã«é ¼ã‚‹å…¬é–‹ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ç«‹ã¦ã‚‹ã¨ã€å´©å£Šã—ãŸæ™‚ã«ãƒªã‚¹ã‚¯ãŒå¤§ããç²¾ç¥çš„ã«ã‚‚ã‚ˆã‚ã—ããªã„ã§ã™ã€‚ãã®ãŸã‚ã€å¤§ä½“<strong>3äººãã‚‰ã„ã®å†—é•·æ€§ã‚’æŒã£ã¦ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¨ˆç”»ã™ã‚‹ã¨è‰¯ã„</strong>ã‹ãªã¨æ€ã„ã¾ã™ã€‚</p><p>ğŸš©ç¹°ã‚Šè¿”ã•ã‚Œã‚‹ãƒªã‚¹ã‚±ã®å›³</p><img src="/images/20200530/photo_20200530_05.png"><p>å¤§å…ˆè¼©ã®æ‰æ±Ÿã•ã‚“ã‚’æ™’ã—ãŸã‚ˆã†ã§ã™ãŒã€<a href="https://future-architect.github.io/articles/20161031/">SQLå®Ÿè¡Œæ™‚ã®ãƒ–ãƒ«ãƒ¼ãƒ ãƒ•ã‚£ãƒ«ã‚¿(Bloom Filter)ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ </a>ã¨ã„ã†è¨˜äº‹ã‚’éå»ã«æ›¸ã„ã¦ã„ã¦ã€ã“ã†ã„ã£ãŸæ„Ÿã˜ã®å¤§ä½œã‚’æ›¸ãã‚¿ã‚¤ãƒ—ã‚†ãˆã«ã€åŸ·ç­†ã«æ™‚é–“ãŒã‹ã‹ã‚‹ã¨ã„ã†ç†ç”±ãŒã‚ã‚Šã¾ã™ã€‚ä»–ã«ã‚‚ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã®ã‚¢ãƒ¬ã‚³ãƒ¬ãŒã‚ã£ãŸã‚Šå€‹äººã®äº‹æƒ…ã¯æ§˜ã€…ã‚†ãˆã€ã¨ã¦ã‚‚ã˜ã‚ƒãªã„ã§ã™ãŒå¼·æ¨©çš„ã«è¨˜äº‹ã‚’æ›¸ã„ã¦ï¼ã¨ã¯è¨€ãˆã¾ã›ã‚“ã€‚</p><h1 id="åŸç¨¿ã«ã¤ã„ã¦"><a href="#åŸç¨¿ã«ã¤ã„ã¦" class="headerlink" title="åŸç¨¿ã«ã¤ã„ã¦"></a>åŸç¨¿ã«ã¤ã„ã¦</h1><p>ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ã™ãŒé‹å–¶ãŒå…¨ã¦ã®æŠ€è¡“ã«ç²¾é€šã—ã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªã„ã®ã§ï¼ˆæ†§ã‚Œã¾ã™ãŒï¼‰ã€åŸºæœ¬çš„ã«æ–‡ç« ãƒã‚§ãƒƒã‚¯ä»¥å¤–ã¯æœ‰è­˜è€…ã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ä¾é ¼ã—ã¾ã™ã€‚ã“ã®æ™‚ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒå¾—æ„ãªäººã¨ãã†ã§ãªã„äººã¯ã©ã†ã—ã¦ã‚‚å­˜åœ¨ã™ã‚‹ã®ã§ã€ä¿¡é ¼ã§ãã‚‹ãƒ¬ãƒ“ãƒ¥ã‚¢ãƒ¼ã¯è‡ªåˆ†ã®ä¸­ã§æŒã£ã¦ãŠãã¾ã—ã‚‡ã†ã€‚ã ã‚Œã«èãã‹ã¯éå¸¸ã«å¤§äº‹ã§ã™ã€‚</p><p>åŸç¨¿ã§ã‚ˆãè¿½è¨˜ã®ãŠé¡˜ã„ã™ã‚‹ãƒã‚¤ãƒ³ãƒˆãŒã„ãã¤ã‹ã‚ã‚Šã¾ã™ã€‚ã¾ãšã€ä¸€è¨€ã§ã‚‚è‡ªå·±ç´¹ä»‹ã‚’æ›¸ã„ã¦æ¬²ã—ã„ã“ã¨ï¼ˆåŸ·ç­†è€…ã®ãƒ–ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã«ç¹‹ã’ãŸã„ï¼‰ã‚„ã€è¨˜äº‹å†…ã§åˆ¥ã®è¨˜äº‹ã‚’ç´¹ä»‹ã—ã¦ãƒªãƒ³ã‚¯ã‚’è²¼ã£ã¦ã‚‚ã‚‰ã†ã“ã¨ã§ã™ã€‚å¾Œè€…ã¯ãƒ–ãƒ­ã‚°å†…ã®å›éŠç‡ã‚’ä¸Šã’ãŸã„å–ã‚Šçµ„ã¿ã§ã™ãŒã€Googleã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ã‚’è¦‹ã‚‹ã¨ã‚ã¾ã‚Šã†ã¾ãè¡Œã£ã¦ã¯ã„ãªã„ã‚ˆã†ã§ã™ã€‚</p><p>å€‹äººçš„ã«è¾›ã„ç³»ã®åŸç¨¿ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯ã€<a href="https://future-architect.github.io/articles/20191024/">ãƒ†ã‚­ã‚¹ãƒˆã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ã‚·ãƒ³ãƒã‚¸ã‚¦ãƒ é–‹å‚¬å ±å‘Š&amp;ACL2019å‚åŠ å ±å‘Š</a>ã‚’å§‹ã‚ã¨ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ã‚¹ç³»ã®è¨˜äº‹ã§ã™ã€‚ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®AIãƒãƒ¼ãƒ ã®å°‚é–€æ€§ãŒé«˜ã™ãã¦ã„ã¤ã‚‚æ¶™ç›®ã«ãªã£ã¦ã„ã¾ã™ã€‚ã‚»ã‚¯ã‚·ãƒ§ãƒŠãƒªã‚ºãƒ ã¯æ•µã§ã™ãŒã€é¤…ã¯é¤…å±‹ã§ã‚‚ã‚ã‚‹ã®ã§ã€ï¼‘äººã§æŠ±ãˆè¾¼ã¿ã™ããšãƒãƒ¼ãƒ å†…ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ã—ã¦ã‚‚ã‚‰ã†ãªã©çŠ¶æ³ã«å¿œã˜ã¦å¯¾å¿œã‚’å¤‰ãˆã¦ã„ã¾ã™ã€‚</p><h1 id="FAQã‚’ä½œã‚‹"><a href="#FAQã‚’ä½œã‚‹" class="headerlink" title="FAQã‚’ä½œã‚‹"></a>FAQã‚’ä½œã‚‹</h1><p>æŠ€è¡“ãƒ–ãƒ­ã‚°ã§ç« ç«‹ã¦ãªã©ã«ãŠä½œæ³•ãŒç„¡ã„ã®ã‹ï¼Ÿã¯éå¸¸ã«ã‚ˆãèã‹ã‚Œã‚‹ãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚ãã®ä»–æ³¨æ„äº‹é …ã‚„ã‚ˆãèã‹ã‚Œã‚‹ãƒã‚¤ãƒ³ãƒˆãŒã‚ã‚Œã°FAQã¨ã„ã†å½¢ã§ã¾ã¨ã‚ã¾ã—ã‚‡ã†ã€‚<br>ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ€è¡“ãƒ–ãƒ­ã‚°ã ã¨ã€GSuiteãŒå°å…¥ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ã ã‚Œã§ã‚‚è¦‹ã‚Œã‚‹ç’°å¢ƒã«Documentã‚’é…å‚™ã—ã¦ã„ã¾ã™ã€‚å…±åŒç·¨é›†ã‚‚ã§ãã‚‹ãŸã‚ã‚ªã‚¹ã‚¹ãƒ¡ã§ã™ã€‚</p><h1 id="å…¬é–‹å¾Œã®å®£ä¼"><a href="#å…¬é–‹å¾Œã®å®£ä¼" class="headerlink" title="å…¬é–‹å¾Œã®å®£ä¼"></a>å…¬é–‹å¾Œã®å®£ä¼</h1><p>è¨˜äº‹ã®å…¬é–‹ã§ã™ãŒã€å®£ä¼ã¯<strong>é‹å–¶è€…è‡ªã‚‰ãŒè¡Œã„ã¾ã—ã‚‡ã†</strong>ã€‚å…¬é–‹ã ã‘ã—ã¦è‡ªç¤¾ã‚„å¤–éƒ¨å‘ã‘ã®å‘ŠçŸ¥ã¯ã€åŸ·ç­†è€…æœ¬äººã«ä¾é ¼ã—ã¦ä»»ã›ã‚‹ã®ã¯NGã§ã™ã€‚ã‚‚ã¡ã‚ã‚“åŸ·ç­†è€…ã‹è‡ªç™ºçš„ã«å®£ä¼ã—ã¦ãã‚Œã‚‹ã®ã¯Welcomeã§ã™ã€‚ç†ç”±ã¯ã„ãã¤ã‹ã‚ã‚Šã¾ã™ã€‚</p><ol><li>åŸ·ç­†è€…ãŒè‡ªåˆ†ã§è‡ªåˆ†ã®è¨˜äº‹ã‚’è‡ªãƒãƒ¼ãƒ ã«å®£ä¼ã™ã‚‹ã®ã¯æ¥ãšã‹ã—ãŒã‚‹äººã‚‚ã„ã‚‹ï¼ˆæ›¸ã„ãŸãœã‚¢ãƒ”ãƒ¼ãƒ«ãŒå¼·ããªã‚Šã™ãã‚‹ï¼‰</li><li>ç‰¹ã«åˆæŠ•ç¨¿ã®å ´åˆã€ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã«ç·Šå¼µã™ã‚‹ï¼ˆåå¿œãŒã‚¼ãƒ­ã ã£ãŸã‚‰ã©ã†ã—ã‚ˆã†ã¨ã‹ã€åè«–ãŒæ¥ãŸã‚‰ã©ã†ã—ã‚ˆã†ã¨ã‹ï¼‰</li><li>ç´”ç²‹ã«å®£ä¼ãŒæ…£ã‚Œã¦ã„ãªã„ã®ã§ã€æ™‚é–“ãŒã‹ã‹ã‚‹ã€‚ã ã£ãŸã‚‰é‹å–¶ãŒã‚„ã£ãŸã»ã†ãŒä¾é ¼ã™ã‚‹ã‚„ã‚Šå–ã‚ŠãŒæ¸›ã‚‹åˆ†ã€åŠ¹ç‡çš„</li></ol><p>é¢å€’ã§ã™ãŒãªã‚‹ã¹ãå¤šãã®ãƒãƒ£ãƒãƒ«ï¼ˆç¤¾å†…ã®è¤‡æ•°ã®ãƒãƒ£ãƒƒãƒˆã‚°ãƒ«ãƒ¼ãƒ—ã€è¤‡æ•°ã®SNSãªã©ï¼‰ã«æŠ•ç¨¿ã—ã¾ã—ã‚‡ã†ã€‚</p><p>ğŸš©200äººè¶…ãˆã®ç¤¾å†…ãƒãƒ£ãƒƒãƒˆã«å®£ä¼ã™ã‚‹å›³<br><img src="/images/20200530/photo_20200530_06.png" style="border:solid 1px #000000"></p><p>ğŸš©Twitterã«å®£ä¼ã—ã¦ã„ã‚‹å›³</p><blockquote class="twitter-tweet"><p lang="ja" dir="ltr">Goã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆã§æ‚©ã‚“ã§ã„ã‚‹äººã«ã‚ªã‚¹ã‚¹ãƒ¡ã®è¨˜äº‹ã‚’å…¬é–‹ã—ã¾ã—ãŸâœ¨ / ã‚ãªãŸã®Goã‚¢ãƒ—ãƒª/ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆã‚‚ã£ã¨ã‚·ãƒ³ãƒ—ãƒ«ã§ã‚ˆããªã„ï¼Ÿ <a href="https://t.co/Mi8nvhQpfz" target="_blank" rel="noopener">https://t.co/Mi8nvhQpfz</a></p>&mdash; ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ€è¡“ãƒ–ãƒ­ã‚°ğŸ¥¢ (@future_techblog) <a href="https://twitter.com/future_techblog/status/1265813149883613184?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">May 28, 2020</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><h1 id="å…¬é–‹å¾Œã«åå¿œãŒã‚ã£ãŸå ´åˆ"><a href="#å…¬é–‹å¾Œã«åå¿œãŒã‚ã£ãŸå ´åˆ" class="headerlink" title="å…¬é–‹å¾Œã«åå¿œãŒã‚ã£ãŸå ´åˆ"></a>å…¬é–‹å¾Œã«åå¿œãŒã‚ã£ãŸå ´åˆ</h1><p>è‰¯ã„å†…å®¹ã§ã‚ã‚Œã°ãƒ‰ãƒ³ãƒ‰ãƒ³åºƒãå…±æœ‰ã—ãŸã»ã†ãŒè‰¯ã„ã§ã™ã€‚Twitterã§ã€Œâ—‹â—‹ã«é–¢ã—ã¦è‰¯ã„è¨˜äº‹ã ã£ãŸã€ã¨ã„ã£ãŸå…·ä½“çš„ã§ã‚ã‚Œã°ã‚ã‚‹ã»ã©ã€ãƒ‰ãƒ³ãƒ‰ãƒ³ç¤¾å†…ã§ã‚·ã‚§ã‚¢ã—ã¾ã—ã‚‡ã†ã€‚ç¹°ã‚Šè¿”ã™ã¨è¨˜äº‹ã‚’æ›¸ãã“ã¨ã«å¯¾ã—ã¦ã€ç¤¾å†…ãŒãƒã‚¸ãƒ†ã‚£ãƒ–ã«æ‰ãˆã¦ãã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><h1 id="ãƒã‚ºã£ãŸæ™‚ã¯ç¤¼è³›ã™ã‚‹"><a href="#ãƒã‚ºã£ãŸæ™‚ã¯ç¤¼è³›ã™ã‚‹" class="headerlink" title="ãƒã‚ºã£ãŸæ™‚ã¯ç¤¼è³›ã™ã‚‹"></a>ãƒã‚ºã£ãŸæ™‚ã¯ç¤¼è³›ã™ã‚‹</h1><p>ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãªã©ã®ãƒ›ãƒƒãƒˆã‚¨ãƒ³ãƒˆãƒªãƒ¼ã«å…¥ã£ãŸå ´åˆã‚„å¤§é‡ã«RTã•ã‚ŒãŸå ´åˆã«ã¯ã€ãƒ‰ãƒ³ãƒ‰ãƒ³ç”»åƒã”ã¨ç¤¾å†…ã«ã‚·ã‚§ã‚¢ã—ã¦ã„ã¾ã™ã€‚ã“ã®æ™‚ã€æ›¸ã„ãŸæœ¬äººã‚’å«ã‚ã¦ã€ŒãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼ğŸ‰ã€ã¨<strong>ç¤¼è³›ã™ã‚‹ã“ã¨</strong>ãŒéå¸¸ã«å¤§äº‹ã ãªã¨æ€ã„ã¾ã™ã€‚</p><p>ğŸš©å°‘ã—ã§ã‚‚ãƒã‚ºã£ãŸæ°—é…ãŒã‚ã‚Œã°ã™ã‹ã•ãšã‚¢ãƒ”ãƒ¼ãƒ«ã™ã‚‹å›³<br><img src="/images/20200530/photo_20200530_07.png"></p><p>ã“ã†ã„ã£ãŸå›½å†…ITæ¥­ç•Œã‚’æŠ€è¡“ç™ºä¿¡ã§è²¢çŒ®ã—ãŸã‚Šãƒªãƒ¼ãƒ‰ã™ã‚‹äººãŒç¤¾å†…ã«ã„ã¦ä¸€ç·’ã«ä»•äº‹ã‚’ã§ãã‚‹ã¨ã„ã†ã“ã¨ã¯ã€è‹¥æ‰‹ã«ã¨ã£ã¦ã‚‚ãƒ™ãƒ†ãƒ©ãƒ³ã«ã¨ã£ã¦ã‚‚å¬‰ã—ã„ã“ã¨ã§ã™ã—ã€ã•ã‚‰ã«è¨˜äº‹ã‚’å…¬é–‹ã™ã‚‹ã“ã¨ã«å¯¾ã—ã¦ãƒã‚¸ãƒ†ã‚£ãƒ–ã«æ‰ãˆã¦ãã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã¨ã«ã‹ãå…¥ç¤¾1å¹´ä»¥å†…ã®è‹¥æ‰‹ã®äººã‹ã‚‰ã‚‚ãƒ–ãƒ­ã‚°æ´»å‹•ã«èˆˆå‘³ã‚’æŒã£ã¦ã‚‚ã‚‰ãˆã‚‹ãã‚‰ã„ã€ãƒ‰ãƒ³ãƒ‰ãƒ³æ–°è¦ã®åŸ·ç­†è€…å€™è£œã‚’ä½œã‚‹ã“ã¨ãŒã€ç¶™ç¶šã—ãŸãƒ–ãƒ­ã‚°é‹å–¶ã«ç¹‹ãŒã‚‹ã¨æ€ã„ã¾ã™ã€‚åˆ†ã‹ã‚Šã‚„ã™ã„æˆæœãŒå‡ºãŸå ´åˆã¯æ›¸ã„ãŸäººã‚’ç§°ãˆã‚‹æ°—æŒã¡ã§ã‚·ã‚§ã‚¢ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚</p><h1 id="1å¹´ã»ã©ç¹°ã‚Šè¿”ã™ã¨"><a href="#1å¹´ã»ã©ç¹°ã‚Šè¿”ã™ã¨" class="headerlink" title="1å¹´ã»ã©ç¹°ã‚Šè¿”ã™ã¨"></a>1å¹´ã»ã©ç¹°ã‚Šè¿”ã™ã¨</h1><p>ã“ã†ã„ã£ãŸå–ã‚Šçµ„ã¿ã‚’1å¹´ã»ã©ç¹°ã‚Šè¿”ã™ã¨ã€æ°—ãŒã¤ã‘ã°ãƒãƒ¼ãƒ Slackã§ã‚‚ã€å¤šãã®äººãŒä½•ã‹äº‹ã‚ã‚‹ãŸã³ã«ã€ã€Œã“ã‚Œã¯ãƒ–ãƒ­ã‚°ãƒã‚¿ã€ã¨è¨€ã£ã¦ãã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p><img src="/images/20200530/photo_20200530_08.png"><p>ãã†ã™ã‚‹ã¨ã•ã‚‰ã«å¤–éƒ¨å…¬é–‹ã‚’æ„è­˜ã—ãŸãƒ“ã‚¸ãƒã‚¹çš„ã€æŠ€è¡“çš„ãªãƒãƒ£ãƒ¬ãƒ³ã‚¸ãŒå–ã‚Šã‚„ã™ã„æ–‡åŒ–ãŒé†¸é€ ã•ã‚Œã¦ããŸæ°—ãŒã—ã¾ã™ã€‚ä¸Šã®ç”»åƒã®ä¸­ã®ã‚³ãƒ¡ãƒ³ãƒˆã«ã‚‚æ›¸ã„ã¦ã„ã¾ã™ãŒã€ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ãŸçµæœã ã‚ã ã£ãŸå ´åˆã§ã‚‚ã€ã€Œ<strong>ãƒ–ãƒ­ã‚°ã§ä¾›é¤Šã™ã‚Œã°è‰¯ã„ã˜ã‚ƒãªã„</strong>ã€ã¨ã„ã£ãŸå½¢ã§ã™ã€‚å¤±æ•—ãŒãƒ€ãƒ¡ã¨ã„ã†ã‚ˆã‚Šãã®å¾Œã®æ”¹å–„ã‚„ã€å¤±æ•—ã™ã‚‹ãªã‚‰æ—©ãå¤±æ•—ã™ã‚‹ãŸã‚ã®å·¥å¤«ã‚’ã—ã‚ˆã†ã‚ˆã¨ãƒã‚¤ãƒ³ãƒ‰ã‚‚å¤‰ã‚ã£ã¦ãã¾ã™ã€‚è‰¯ã„ã‚µã‚¤ã‚¯ãƒ«ã§ã™ã­ã€‚</p><h1 id="ä»Šå¾Œã®æ–½ç­–"><a href="#ä»Šå¾Œã®æ–½ç­–" class="headerlink" title="ä»Šå¾Œã®æ–½ç­–"></a>ä»Šå¾Œã®æ–½ç­–</h1><p>ã„ãã¤ã‹è¿½åŠ ã§ã‚„ã‚ŠãŸã„ãƒ†ãƒ¼ãƒãŒã‚ã‚Šã¾ã™ãŒã€æ°—å¼µã‚Šã™ããšã‚„ã‚Œã‚‹ç¯„å›²ã§ã£ã¦æ°—æŒã¡ã§ã™ã€‚</p><ol><li>ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼<strong>ç¤¾å¤–</strong>ã®äººã«ã‚‚è¨˜äº‹ã‚’æ›¸ã„ã¦ã‚‚ã‚‰ã†</li><li>1ã®å»¶é•·ã§ã™ãŒã€ç¤¾å¤–ã®äººã¨æŠ€è¡“ãƒ†ãƒ¼ãƒã§è©±ã™ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼è¨˜äº‹ã‚’ä½œã‚‹</li><li>Youtubeã‚„ãƒãƒƒãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã§ã€æŠ€è¡“è«‡ç¾©ã‚’ã—ã¦å…¬é–‹ã™ã‚‹</li><li><a href="https://atcoder.jp/contests/future-contest-2020-final" target="_blank" rel="noopener">HACK TO THE FUTURE</a>ã¨ã®ã‚³ãƒ©ãƒœ</li><li><a href="https://note.future.co.jp/" target="_blank" rel="noopener">æœªæ¥å ±</a>ã¨ã‚³ãƒ©ãƒœè¨˜äº‹</li></ol><p>ç›´è¿‘ã¯å¢—ãˆã¦ãã¦ã„ã‚‹é€£è¼‰ä¼ç”»ã‚’ç¤¾å†…ã«å®šç€ã™ã‚‹ã‚ˆã†ã€è‰²ã€…ç™ºä¿¡ã—ã¦ã„ã“ã†ã¨æ€ã£ã¦ã„ã¾ã™ã€‚</p><h1 id="ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ã‚„è³ªã¨é‡ã®è«–è­°"><a href="#ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ã‚„è³ªã¨é‡ã®è«–è­°" class="headerlink" title="ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ã‚„è³ªã¨é‡ã®è«–è­°"></a>ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ã‚„è³ªã¨é‡ã®è«–è­°</h1><p>ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ã‚’å›“ã£ãŸã“ã¨ãŒã‚ã‚‹äººã«ã‚ˆãè¨€ã‚ã‚Œã‚‹ã“ã¨ã§ã™ãŒã€èª­è€…ã®ãƒšãƒ«ã‚½ãƒŠã‚’ä½œã£ã¦SEOãƒ¯ãƒ¼ãƒ‰ã‚’æ°—ã«ã—ã¦â€¦etc. ãªã©è‰²ã€…è¨€ã£ã¦ãã‚Œã‚‹äººã‚‚ã„ã¾ã™ãŒã€ã“ã†ã„ã£ãŸã“ã¨ã¯å…¨ãæ‰‹ãŒå›ã£ã¦ã„ã¾ã›ã‚“ã€‚ä»Šã¯é¢ç™½ã„ã¨æ€ã£ãŸãƒã‚¿ã‚’ãªã‚‹ã¹ãç¤¾å†…ã‹ã‚‰æŠ½å‡ºã—ã¦ç”Ÿã¿å‡ºãã†ã¨ã„ã†æ„è­˜ã§ã™ã€‚æœ¬å½“ã¯å°ç·šåˆ†æãªã©ã‚’ã—ãŸã»ã†ãŒè‰¯ã„ã‚ˆã­ã€ã¨ã¯ECã‚µã‚¤ãƒˆã®æ§‹ç¯‰ãªã©çµŒé¨“è±Šå¯Œãªæ˜Ÿã•ã‚“ã¨ãŸã¾ã«è©±ã—ã¦ã„ã¾ã™ã€‚</p><p>ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã§ã„ã†ã¨ã€<strong>ã¾ãšã¯æŠ•ç¨¿é‡</strong>ã‚’å¢—ã‚„ãã†ã¨æ€ã£ã¦ã„ã¾ã™ã€‚ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ€è¡“ãƒ–ãƒ­ã‚°ã¯200è¨˜äº‹ãã‚‰ã„ã§ã¾ã é“åŠã°ã§ã™ã€‚å¿ƒãŒæŠ˜ã‚Œãªã„é™ã‚Š500è¨˜äº‹ãã‚‰ã„ã¯ç¶™ç¶šã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚é‡ã‚’å¢—ã‚„ã™ã¨SNSã§ã‚‚æ³¨ç›®ã•ã‚Œã‚‹è¨˜äº‹ãŒå¢—ãˆã¦ãã¾ã—ãŸã€‚è³ªã¯typoã‚„æ—¥æœ¬èªã®è¨€ã„å›ã—ãªã©ã¯ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ãŒã€æŠ€è¡“ãƒ¬ãƒ™ãƒ«ã¯ã‚ã¾ã‚Šæ°—ã«ã—ã¦ã„ã¾ã›ã‚“ã€‚ã¨ã„ã†ã®ã‚‚ã€ãƒ–ãƒ­ã‚°ã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆã¨ã—ã¦ã€<strong>åˆå¿ƒè€…ï½ç¿’ç†Ÿè€…ã¾ã§æ¥½ã—ã‚ã‚‹ãƒ¡ãƒ‡ã‚£ã‚¢ã«ã—ãŸã„</strong>ã¨ã„ã†ã®ãŒã‚ã‚‹ã‹ã‚‰ã§ã™ã€‚ï¼ˆãã†ã„ã†æ„å‘³ã ã¨ã€å¯¾è±¡èª­è€…ã¯å­¦ç”Ÿã•ã‚“ï½ç¤¾ä¼šäººã®è‹¥æ‰‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã§ã™ï¼‰ã€‚ã¾ãšã¯500è¨˜äº‹ãã‚‰ã„ã¾ã§ã¯ã“ã®ã¾ã¾å‹¢ã„ã§èµ°ã‚ŠæŠœããŸã„ã¨æ€ã£ã¦ã„ã¾ã™ã€‚ãã®ä¸­ã§é †æ¬¡è¶³ã‚Šãªã„ã¨ã“ã‚ã§ã‹ã¤é¢ç™½ã„ã‚¢ã‚¤ãƒ‡ã‚¢ãŒæµ®ã‹ã‚“ã ã‚‰å®Ÿè¡Œã—ã¦ã„ãã¨è¨€ã£ãŸè€ƒãˆã§ã™ã€‚</p><h1 id="ã“ã†ã„ã†æ„è¦‹ã¯æµã™ã«é™ã‚‹ã€ã‚ˆãè¨€ã‚ã‚ŒãŒã¡ãªã“ã¨"><a href="#ã“ã†ã„ã†æ„è¦‹ã¯æµã™ã«é™ã‚‹ã€ã‚ˆãè¨€ã‚ã‚ŒãŒã¡ãªã“ã¨" class="headerlink" title="ã“ã†ã„ã†æ„è¦‹ã¯æµã™ã«é™ã‚‹ã€ã‚ˆãè¨€ã‚ã‚ŒãŒã¡ãªã“ã¨"></a>ã“ã†ã„ã†æ„è¦‹ã¯æµã™ã«é™ã‚‹ã€ã‚ˆãè¨€ã‚ã‚ŒãŒã¡ãªã“ã¨</h1><p>2ç‚¹ã ã‘ã€çµŒé¨“ä¸Šãªãœã‹å¹´æ¬¡ãŒä¸Šã®äººã‹ã‚‰è¨€ã‚ã‚ŒãŒã¡ãªã‚¢ãƒ‰ãƒã‚¤ã‚¹ãŒã‚ã‚‹ã®ã§æ³¨æ„å–šèµ·ã—ã¾ã™ã€‚</p><p><strong>ã€Œè¨˜äº‹ã‚’æ›¸ããƒ¡ãƒªãƒƒãƒˆãŒæ¬²ã—ã„ã€</strong><br>ãŸã¾ã«ä»Šã§ã‚‚è¨€ã‚ã‚Œã¾ã™ã€‚ã‚¤ãƒ³ã‚»ãƒ³ãƒ†ã‚£ãƒ–ã‚’ä½œã£ãŸã»ã†è‰¯ã„ã‚“ã˜ã‚ƒãªã„ï¼Ÿã¨åŒç¾©ã§ã™ã€‚å®Ÿã¯éå»ã€ã“ã®æ„è¦‹ã«å¾“ã„å®Ÿéš›ã«ç¤¾å†…ã§ä½¿ãˆã‚‹ãƒã‚¤ãƒ«ãƒã‚¤ãƒ³ãƒˆã¿ãŸã„ãªã®ã‚’é¢å€’ãªèª¿æ•´ã‚’ã—ã¦ä»˜ä¸ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚ã—ã‹ã—ã€<strong>å®Ÿéš›ã«ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã£ã¦ã‚‚ãã†ã„ã£ãŸäººã¯ä¸€äººã‚‚æ›¸ã‹ãªã‹ã£ãŸ</strong>ã“ã¨ã‚’ã€å£°ã‚’å¤§ã«ã—ã¦æ®‹ã—ã¦ãŠãã¾ã™ã€‚æœ¬å½“ã«ã ã‚Œã‚‚æ›¸ã‹ãªã‹ã£ãŸã—ã€ã‚€ã—ã‚ä»Šã¾ã§æ›¸ã„ã¦ãã‚ŒãŸäººãŒæ™‚çµ¦æ›ç®—ã§ã€‡ã€‡å††ã‹ã€ã¨ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ãŒä¸‹ãŒã£ã¦ã„ãŸã®ãŒå°è±¡çš„ã§ã™ã€‚</p><p>ãã‚‚ãã‚‚<strong>ç‰©ç†çš„ãªå ±å¥¨ã¯åŸè³‡ã«é™ã‚ŠãŒã‚ã‚‹</strong>ã®ã§ã‚„ã‚ãŸã»ã†ãŒè‰¯ã„ã§ã™ã€‚æ–‡åŒ–çš„ãªå ±å¥¨ï¼ˆã¤ã¾ã‚Šç¤¼è³›ã™ã‚‹ã“ã¨ï¼‰ã«ç§»è¡Œã—ãŸã»ã†ãŒåŸè³‡ãŒç„¡é™å¤§ãªã®ã§ã€ã“ã¡ã‚‰ã®ä»•çµ„ã¿ã‚’ä¸Šæ‰‹ãä½œã‚‹ã“ã¨ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã—ã¾ã—ã‚‡ã†ã€‚</p><br><br><p><strong>ã€Œé‹å–¶ã‚’æŒã¡å›ã‚Šåˆ¶ã«ã—ãŸã»ã†ãŒè‰¯ã„ã®ã§ã¯ï¼Ÿã€</strong><br>ãƒ–ãƒ­ã‚°é–‹è¨­æœŸã«ä½•åº¦ã‹è¨€ã‚ã‚Œã¾ã—ãŸã€‚é‹å–¶è€…ã«è² è·ãŒã‹ã‹ã‚Šã™ããªã„ã‚ˆã†ã«ã—ãŸã„ã¨ã„ã†ãƒãƒãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆçš„ãªæ„å›³ã ã¨æ€ã„ã¾ã™ã€‚ã—ã‹ã—ã€<strong>æŒã¡å›ã‚Šåˆ¶ã¯å€‹äººçš„ã«æ‚ªé­”ã®å›ã</strong>ã ã¨æ€ã£ã¦ã„ã¾ã™ã€‚ãªãœãªã‚‰ãƒ–ãƒ­ã‚°ã®é‹å–¶ã‚¿ã‚¹ã‚¯ã‚’ã“ãªã™ã“ã¨ã¯ã€<strong>æœ€åˆã«ç«‹ã¡ä¸Šã’ãŸäººä»¥å¤–ã«ãƒ¡ãƒªãƒƒãƒˆãŒå°‘ãªã</strong>ã€æœ€åˆã¯æœ‰å¿—ã§å›ã›ã¦ã‚‚ã€ä»£ã‚’çµŒã‚‹ã”ã¨ã«ã„ã¤ã—ã‹<strong>ã„ã¤ã®é–“ã«ã‹å¢—ãˆãŸã‚¿ã‚¹ã‚¯</strong>ã«ãªã‚ŠãŒã¡ã§ã™ã€‚ã“ã†ã„ã£ãŸé–‹è¨­æ™‚ã®æ€ã„ãŒå¤±ã‚ã‚ŒãŸã‚¿ã‚¹ã‚¯ã¯ã€ã‚ã‚‹æ™‚ã€æ„Ÿè¬ã¨ã¨ã‚‚ã«åˆ¥ã‚Œã‚’å‘Šã’ã‚‰ã‚Œã‚‹ã“ã¨ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚ã¾ãŸã€ãã†ã§ãªãã¦ã‚‚<strong>æŒã¡å›ã‚Šåˆ¶ã ã¨é‹å–¶ã®ãƒŠãƒ¬ãƒƒã‚¸ãŒè“„ç©ã•ã‚Œã¾ã›ã‚“</strong>ã€‚æœ¬å½“ã«æ”¹å–„ã®ä½™åœ°ãŒç„¡ãé™³è…åŒ–ã—ãŸã‚¿ã‚¹ã‚¯ï¼ˆä¾‹ãŒé©åˆ‡ã‹ã‚ã‹ã‚‰ãªã„ã§ã™ãŒçµŒè²»ç”³è«‹ã¨ã‹ï¼‰ã§ã‚ã‚Œã°åˆ¥ã§ã™ãŒã€å‰µæ„å·¥å¤«ã®ä½™åœ°ãŒå¤šåˆ†ã«ã‚ã‚‹ãƒãƒ¼ãƒ ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢æ–‡åŒ–ã‚’é«˜ã‚ã¦å¤–éƒ¨ã«ä¸Šæ‰‹ãç™ºä¿¡ã™ã‚‹ãƒ–ãƒ­ã‚°é‹å–¶ã¨ã„ã†å½¹å‰²ã¯ã€ã¾ã ã¾ã ç†±é‡ã®ã‚ã‚‹æœ‰å¿—ã§é‹å–¶ã—ãŸã»ã†ãŒè‰¯ã„ã¨æ€ã„ã¾ã™ã€‚</p><h1 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h1><ul><li>ç¤¾å†…ãƒãƒ£ãƒƒãƒˆãªã©ã§å‹‰å¼·ã«ãªã£ãŸã‚Šç‹¬ç‰¹ã ãªã¨æ€ã£ãŸã“ã¨ã‚’è¦‹ã¤ã‘ã‚‹</li><li>æ›¸ã„ã¦ãã‚Œãã†ãªäººã«é ¼ã‚“ã§ã€ä¼šè­°é€šçŸ¥ã‚’é€ã‚‹</li><li>å…¥ç¨¿ãŒé…ã‚Œã¦ã‚‚æ°—ã«ã—ãªã„ã€‚æ‰¿è«¾ã—ã¦ãã‚ŒãŸã ã‘ã§å”åŠ›è€…ã¨ã—ã¦æ„Ÿè¬ã—ã‹ãªã„</li></ul><p>ï¼ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®çš†ã•ã‚“</p><p>ä¼æ¥­ãƒ–ãƒ­ã‚°é‹å–¶ã‚‚ãã®ä½ç½®ã¥ã‘ã‚’ã©ã†æ‰ãˆã‚‹ã‹ã«ã‚ˆã£ã¦ã€å‰µé€ çš„ã ã—é¢ç™½ã„ã—å­¦ã³ã‚‚å¤šã„ã¨æ€ã„ã¾ã™ã€‚èˆˆå‘³ãŒã‚ã‚‹æ–¹ã¯ãœã²ä¸€ç·’ã«ç››ã‚Šä¸Šã’ã¦ã„ãã¾ã—ã‚‡ã†ã€‚é‹å–¶ã‚¹ã‚¿ãƒƒãƒ•å‹Ÿé›†ã—ã¦ã„ã¾ã™ã€‚</p><h1 id="é–¢é€£è¨˜äº‹"><a href="#é–¢é€£è¨˜äº‹" class="headerlink" title="é–¢é€£è¨˜äº‹:"></a>é–¢é€£è¨˜äº‹:</h1><ul><li><a href="https://future-architect.github.io/articles/20200529/">æ˜¥ã®å…¥é–€ç¥­ã‚ŠğŸŒ¸é€£è¼‰ã‚’å§‹ã‚ã¾ã™</a></li><li><a href="https://future-architect.github.io/articles/20190425/">Qiita Jobsã‚’å§‹ã‚ã¾ã—ãŸ</a></li><li><a href="https://future-architect.github.io/articles/20160216/">ã”ã‚ã„ã•ã¤</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h1&gt;&lt;p&gt;TIG DXãƒ¦ãƒ‹ãƒƒãƒˆã®çœŸé‡ã§ã™ã€‚ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ€è¡“ãƒ–ãƒ­ã‚°ã®é‹å–¶ã®1äººã§ã™ã€‚&lt;a href=&quot;https://note.futu
      
    
    </summary>
    
      <category term="Culture" scheme="https://future-architect.github.io/categories/Culture/"/>
    
    
      <category term="TechBlog" scheme="https://future-architect.github.io/tags/TechBlog/"/>
    
  </entry>
  
  <entry>
    <title>æ˜¥ã®å…¥é–€ç¥­ã‚ŠğŸŒ¸é€£è¼‰ã‚’å§‹ã‚ã¾ã™</title>
    <link href="https://future-architect.github.io/articles/20200529/"/>
    <id>https://future-architect.github.io/articles/20200529/</id>
    <published>2020-05-29T02:56:30.000Z</published>
    <updated>2020-06-02T02:14:42.190Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>ã“ã‚“ã«ã¡ã¯ã€TIG DXãƒ¦ãƒ‹ãƒƒãƒˆã®çœŸé‡ã§ã™ã€‚æŠ€è¡“ãƒ–ãƒ­ã‚°ã®é‹å–¶ã‚‚ã‚„ã£ã¦ã„ã¾ã™ã€‚</p><p>æœ¬è¨˜äº‹ã¯ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ€è¡“ãƒ–ãƒ­ã‚°ã§ã®ä¼ç”»ã®ãŠçŸ¥ã‚‰ã›ã«ãªã‚Šã¾ã™ã€‚6/1ã€œ25ã®ã€Œ<strong>æ˜¥ã®å…¥é–€ç¥­ã‚ŠğŸŒ¸</strong>ã€ã¨é¡Œã—ã¦ã€åœŸæ—¥ã‚’é™¤ãæ¯æ—¥ã€è¨˜äº‹ã‚’å…¬é–‹ã„ãŸã—ã¾ã™ã€‚</p><img src="/images/20200529/photo_20200529_01.jpeg"><a href="https://pixabay.com/ja/users/pixel2013-2364555/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1510602" target="_blank" rel="noopener">S. Hermann &amp; F. Richter</a>ã«ã‚ˆã‚‹<a href="https://pixabay.com/ja/?utm_source=link-![flower-meadow-1510602_1280.jpg](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/6463/a1fc97ab-4cc8-57f2-c5ad-a02bd9c64cd0.jpeg)attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1510602" target="_blank" rel="noopener">Pixabay</a>ã‹ã‚‰ã®ç”»åƒ<p>6æœˆã¨ã„ãˆã°ã€å…¥å­¦ãƒ»å…¥ç¤¾ã‚’ã•ã‚ŒãŸæ–¹ã€…ãŒæ–°ã—ã„ç’°å¢ƒã«æ…£ã‚Œã€æ–°ç¤¾ä¼šäººã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãªçš†ã•ã¾ã¯æ–°äººç ”ä¿®ãŒã¡ã‚‡ã†ã©çµ‚ã‚ã‚‹é ƒã§ã¯ç„¡ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿè©²å½“ã™ã‚‹æ–¹ã‚‚ã€ãã†ã§ãªã„æ–¹ã‚‚ã€ã•ã‚‰ãªã‚‹é£›èºã‚’ç›®æŒ‡ã—ã¦æ–°ã—ã„ã“ã¨ã«æŒ‘æˆ¦ã—ã‚ˆã†ã¨ã„ã†æ„æ¬²ã‚‚é«˜ã¾ã£ã¦æ¥ã‚‹æ™‚æœŸãªã®ã‹ãªã¨æ€ã„ã¾ã™ã€‚</p><p>æœ¬ä¼ç”»ã¯<strong>ä½•ã‹æ–°ã—ã„ã“ã¨ã‚’å­¦ã¶ã‚­ãƒƒã‚«ã‚±ã¥ãã‚Š</strong>ã¨ã—ã¦ã€<strong>æ§˜ã€…ãªç¨®é¡ã®å…¥é–€è¨˜äº‹ã‚’é€£ç¶šã§å…¬é–‹</strong>ã—ã‚ˆã†ã¨ã„ã£ãŸã“ã¨ã‚’ãƒ†ãƒ¼ãƒã«ã—ã¦ã„ã¾ã™ã€‚ãã‚Œä»¥å¤–ã®åˆ¶ç´„ã¯ç‰¹ã«ãªãå„åŸ·ç­†è€…ã«ãŠä»»ã›ã—ã¦ã„ã¾ã™ã€‚ä»Šã¾ã§ä¸€åº¦ã‚‚ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ€è¡“ãƒ–ãƒ­ã‚°ã«æŠ•ç¨¿ã—ãŸã“ã¨ãŒç„¡ã„ãƒ¡ãƒ³ãƒãƒ¼ãŒå¤šãå‚åŠ ã—ã¦ã„ãŸã ã„ã¦ã„ã¾ã™ã€‚ã“ã†ã„ã£ãŸä¼ç”»ã‚’é€šã—ã¦æœ‰ç›Šãªæƒ…å ±ã‚’ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ã«ç™ºä¿¡ã™ã‚‹æ–‡åŒ–ãŒã€ã‚‚ã£ã¨åºƒãŒã‚Œã°è‰¯ã„ãªã¨é¡˜ã£ã¦ã„ã¾ã™ã€‚</p><h1 id="åŸ·ç­†ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«"><a href="#åŸ·ç­†ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«" class="headerlink" title="åŸ·ç­†ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«"></a>åŸ·ç­†ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</h1><p>TIGï¼ˆTechnology Innovation Unitï¼‰ã‚„CSIG(Cyber Security Innovation Group)ã‹ã‚‰å¤šæ•°ã®äººãŒæŠ•ç¨¿ã—ã¾ã™ã€‚é †æ¬¡ãƒªãƒ³ã‚¯ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ãã¾ã™ã®ãŠæ¥½ã—ã¿ã«ã€‚è¨˜äº‹ã¯æ—¥ä»˜ã®åˆå‰ä¸­ã«å…¬é–‹ã—ã¦ã„ãäºˆå®šã§ã™ã€‚</p><table><thead><tr><th>æ—¥ä»˜</th><th>åŸ·ç­†è€…</th><th>ã‚¿ã‚¤ãƒˆãƒ«</th></tr></thead><tbody><tr><td>6/1</td><td>è¾»å¤§å¿—éƒ</td><td><a href="/articles/20200601/">Goã®ãƒ†ã‚¹ãƒˆã«å…¥é–€ã—ã¦ã¿ã‚ˆã†ï¼</a></td></tr><tr><td>6/2</td><td>ä¼Šè—¤å¤ªæ–‰</td><td><a href="/articles/20200602/">Google Cloud Platform 101</a></td></tr><tr><td>6/3</td><td>æ‘ç”°é–æ‹“</td><td>Flutterå…¥é–€</td></tr><tr><td>6/4</td><td>è¥¿ç”°å¥½å­</td><td>NWå…¥é–€</td></tr><tr><td>6/5</td><td>æ‘ç€¬å–„å‰‡</td><td>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆå…¥é–€</td></tr><tr><td>6/8</td><td>æ —ç”°çœŸ</td><td>ã‚¯ãƒ­ã‚¹ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ä½œã£ã¦ã¿ãŸï¼</td></tr><tr><td>6/9</td><td>çœŸé‡éš¼è¨˜</td><td>åˆã‚ã¦ã®GraphQL</td></tr><tr><td>6/10</td><td>æ¾å·å–œè¦</td><td>æ–‡å­—åˆ—ã®å·®åˆ†è¡¨ç¤ºå…¥é–€</td></tr><tr><td>6/11</td><td>å²¸æœ¬å“ä¹Ÿ</td><td>grepå…¥é–€</td></tr><tr><td>6/12</td><td>æå…‰ç„„</td><td>KeyCloakå…¥é–€</td></tr><tr><td>6/15</td><td>ä½è—¤å°šè‡³</td><td>Dockerå…¥é–€</td></tr><tr><td>6/16</td><td>å·å³¶èª ä¸€</td><td>DBï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«è¨­è¨ˆï¼‰</td></tr><tr><td>6/17</td><td>ç¦è°·å‹å®</td><td>Swift Compositional Layoutså…¥é–€</td></tr><tr><td>6/18</td><td>ç«¹ä¸­é™½å¹³</td><td>æš—å·é€šä¿¡å…¥é–€</td></tr><tr><td>6/19</td><td>ä¹…ä¿æ¨¹ç¤¼</td><td>å®Ÿéš›ã«ã€Œãã®ä»•äº‹ã€Slackã§ã€‚ã€ã—ã¦ã¿ãŸäº‹ä¾‹ã‚’ç´¹ä»‹</td></tr><tr><td>6/22</td><td>äºŒç“¶è³¢</td><td>webpackç’°å¢ƒæ§‹ç¯‰å…¥é–€</td></tr><tr><td>6/23</td><td>ç”ºç”°è–æ…ˆ</td><td>ElasticSearchå…¥é–€</td></tr><tr><td>6/24</td><td>ä¼Šè—¤å¤ªæ–‰</td><td>Terraformå…¥é–€</td></tr><tr><td>6/25</td><td>è°·ç”°å½©èŠ±</td><td>Chromeã®æ‹¡å¼µæ©Ÿèƒ½ä½œã£ã¦ã¿ãŸï¼</td></tr></tbody></table><p>â€»æ­£ç¢ºãªã‚¿ã‚¤ãƒˆãƒ«ã¯ç›´å‰ã§å¤‰æ›´ã™ã‚‹ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ãŒã€ã”äº†æ‰¿ãã ã•ã„ï¼</p><p>ï¼ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®çš†ã•ã¾ã¸<br>è‡ªåˆ†ã‚‚é£›ã³å…¥ã‚Šã§å‚åŠ ã—ãŸã„ï¼ã£ã¦æ–¹ã¯æ—©ã‚ã«çœŸé‡ã¾ã§é€£çµ¡ãã ã•ã„ğŸ‘·</p><h1 id="ä»–ã«ã‚‚é€£è¼‰ä¼ç”»ãŒã–ãã–ã"><a href="#ä»–ã«ã‚‚é€£è¼‰ä¼ç”»ãŒã–ãã–ã" class="headerlink" title="ä»–ã«ã‚‚é€£è¼‰ä¼ç”»ãŒã–ãã–ã"></a>ä»–ã«ã‚‚é€£è¼‰ä¼ç”»ãŒã–ãã–ã</h1><p>ä»–ã«ã‚‚å¤šãã®é€£è¼‰ä¼ç”»ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚ç‰¹ã« <strong>ã‚¤ãƒ³ãƒ•ãƒ©å…¥é–€</strong> è¨˜äº‹ã¯é¡ä¼¼ã®ãƒ†ãƒ¼ãƒã‚’æ²ã’ã¦ã„ã¾ã™ã®ã§ã€ãœã²ã‚¤ãƒ³ãƒ•ãƒ©ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«é–¢å¿ƒãŒã‚ã‚‹æ–¹ã¯ãƒã‚§ãƒƒã‚¯ã—ã¦ã„ãŸã ããŸã„ãªã¨æ€ã£ã¦ã¾ã™ã€‚</p><ul><li><a href="/tags/%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E5%85%A5%E9%96%80/">ã‚¤ãƒ³ãƒ•ãƒ©å…¥é–€</a></li><li><a href="/tags/GCP%E9%80%A3%E8%BC%89/">GCPé€£è¼‰</a></li><li><a href="/tags/GoTips%E9%80%A3%E8%BC%89/">Go Tipsé€£è¼‰</a></li><li><a href="/tags/GoCDK/">Go Cloud</a></li><li><a href="/tags/Auth0/">Auth0</a></li><li><a href="/tags/DynamoDB%C3%97Go/">DynamoDBÃ—Go</a></li><li><a href="/tags/%E3%83%95%E3%83%AD%E3%83%B3%E3%83%88%E3%82%A8%E3%83%B3%E3%83%89%E8%A8%98%E4%BA%8B%E9%9B%86%E4%B8%AD%E6%8A%95%E7%A8%BF/">ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è¨˜äº‹é›†ä¸­æŠ•ç¨¿</a></li><li><a href="/tags/Serverless%E9%80%A3%E8%BC%89/">Serverlessé€£è¼‰</a></li></ul><p>æ˜¥ã®å…¥é–€ç¥­ã‚ŠğŸŒ¸ã¯äººæ•°ãŒå¤šãé›†ã¾ã£ãŸãŸã‚ã€ãŸã¾ãŸã¾ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒšãƒ¼ã‚¸ã‚’ä½œã‚Šã¾ã—ãŸãŒã€ä»–ã®é€£è¼‰ã‚‚åŠ›ä½œãã‚ã„ã§ã™ã€‚</p><p>ã¾ã ã¾ã Stay Homeãªæ—¥ãŒç¶šãå¤§å¤‰ãªæ—¥ã€…ã§ã™ãŒã€å°‘ã—ã§ã‚‚çš†ã•ã¾ã®å½¹ã«ç«‹ã¦ã‚Œã°ãªã¨æ€ã„ã¾ã™ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h1&gt;&lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€TIG DXãƒ¦ãƒ‹ãƒƒãƒˆã®çœŸé‡ã§ã™ã€‚æŠ€è¡“ãƒ–ãƒ­ã‚°ã®é‹å–¶ã‚‚ã‚„ã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬è¨˜äº‹ã¯ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ€è¡“ãƒ–ãƒ­ã‚°ã§
      
    
    </summary>
    
      <category term="Culture" scheme="https://future-architect.github.io/categories/Culture/"/>
    
    
      <category term="introductory" scheme="https://future-architect.github.io/tags/introductory/"/>
    
  </entry>
  
  <entry>
    <title>ã‚ãªãŸã®Goã‚¢ãƒ—ãƒª/ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆã‚‚ã£ã¨ã‚·ãƒ³ãƒ—ãƒ«ã§ã‚ˆããªã„ï¼Ÿ</title>
    <link href="https://future-architect.github.io/articles/20200528/"/>
    <id>https://future-architect.github.io/articles/20200528/</id>
    <published>2020-05-28T00:49:19.000Z</published>
    <updated>2020-05-28T00:57:48.224Z</updated>
    
    <content type="html"><![CDATA[<p>Goã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆã©ã†ã—ã‚ˆã†ã€ã¨ã‚°ã‚°ã‚‹ã¨è¦‹ã¤ã‹ã‚‹<a href="https://github.com/golang-standards/project-layout" target="_blank" rel="noopener">Standard Go Project Layout</a>ã€‚ã¨ã¯ã„ãˆã€ã“ã‚Œã¯ã‹ãªã‚Šã‚³ãƒ¼ãƒ‰é‡ã‚’å¢—ã‚„ã—ã¦ã—ã¾ã†æã‚ŒãŒã‚ã‚Šã¾ã™ã®ã§ã€å°å…¥ã™ã‚‹å ´åˆã®ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã‚‚è€ƒãˆã¦ãŠãæ–¹ãŒè‰¯ã„ã§ã™ã€‚</p><p>ç‰¹ã«ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã¯ã€æœ€åˆã«ã¿ãŸãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã®ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆã‚’è¦ªã ã¨æ€ã†ç‰¹æ€§ãŒã‚ã‚Šã€Javaã‚„.NETã«å½±éŸ¿ã•ã‚Œã‚‹ã¨ã‹ãªã‚Šç´°ã‹ããƒ•ã‚©ãƒ«ãƒ€ã‚’åˆ‡ã‚ŠãŸããªã£ãŸã‚Šã€package privateãªã©ç´°ã‹ãå¯è¦–æ€§ã‚’åˆ¶å¾¡ã—ã‚ˆã†ã¨ã—ãŸã‚Šã—ã¦ã€ãªãŠã‹ã¤ã€Œprivateã®ãƒ†ã‚¹ãƒˆã£ã¦ã©ã†ã™ã¹ããªã‚“ã§ã™ã‹ï¼Ÿã€ã¨ã‹è­°è«–ã‚’å§‹ã‚ãŸã‚Šã‚‚ã—ã¾ã™ãŒã€Goå…ˆç”Ÿã«ã‚ˆã‚Œã°<a href="https://github.com/golang/go/tree/master/src/os" target="_blank" rel="noopener">ã“ã‚Œãã‚‰ã„</a>ã¯1ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã¶ã£ã“ã‚“ã§ã‚‚ã„ã„ã‚ã‘ã§ã™ã€‚å‹‡æ°—ã‚’æŒã¡ã¾ã—ã‚‡ã†ã€‚</p><p>æœ¬ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã§ã¯ã€å°ä¸­è¦æ¨¡ã®Goãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€ã‚ã‚‹ã„ã¯å°ã•ã„ã¨ã“ã‚ã‹ã‚‰å°‘ã—ãšã¤è‚²ã¦ã¦ã„ãä¸Šã§ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ã€‚ã™ã§ã«ãƒ¡ãƒ³ãƒãƒ¼ãŒæ…£ã‚Œã¦ã„ã‚‹æ§‹æˆãŒã‚ã‚‹ãªã‚‰ãã‚Œã‚’ç¶­æŒã—ãŸã»ã†ãŒè‰¯ã„ã§ã™ã€‚</p><p>ã‚ã¨ã€å†åˆ©ç”¨ã¨ã„ã†è¨€è‘‰ã®æ„å‘³ãŒåŒåƒšã¨è©±ã‚’ã—ã¦ã„ã¦ã€äººã«ã‚ˆã£ã¦é•ã„ãã†ã ãªã¨æ€ã£ãŸã®ã§ã€Œãã®ã¾ã¾åˆ©ç”¨ã€ã€Œã‚³ãƒ”ãƒ¼ã—ã¦åˆ©ç”¨ã€ã¨ã„ã†ã®ã¯é©å®œè¿½è¨˜ã—ã¦ã„ã¾ã™ã€‚</p><h1 id="äº‹å‰çŸ¥è­˜"><a href="#äº‹å‰çŸ¥è­˜" class="headerlink" title="äº‹å‰çŸ¥è­˜"></a>äº‹å‰çŸ¥è­˜</h1><p>Goã«ã¯å‡¦ç†ç³»ã«ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸã„ãã¤ã‹ç‰¹åˆ¥ãªãƒ«ãƒ¼ãƒ«ãŒã‚ã‚Šã¾ã™ã€‚</p><ul><li>ãƒ•ã‚©ãƒ«ãƒ€ãŒãƒ‘ãƒƒã‚±ãƒ¼ã‚¸<ul><li>ãƒ•ã‚©ãƒ«ãƒ€å†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯åŸºæœ¬çš„ã«åŒã˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ãªã„ã¨ã„ã‘ãªã„ï¼ˆãƒ†ã‚¹ãƒˆå°‚ç”¨ã®<code>&lt;package&gt;_test</code>ã ã‘ã¯å…±å­˜å¯èƒ½ï¼‰</li></ul></li><li>ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆãŒã‚ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯<code>main</code>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ãªã‘ã‚Œã°ãªã‚‰ãªã„</li><li><code>vendor</code><ul><li>importæ™‚ã«ã¾ãšã“ã®ãƒ‘ã‚¹ã‚’è¦‹ã«ã„ãã¾ã™ã€‚ç”¨é€”ã¨ã—ã¦ã¯ã€go getã›ãšã«ãã®ãƒªãƒã‚¸ãƒˆãƒªã ã‘ã§å‹•ãã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã¾ãŸã€ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã¡ã‚‡ã£ã¨æ”¹å¤‰ã—ãŸã„ã¨ãã«ä½¿ã£ãŸã‚Šã—ã¾ã™ãŒã€ä»Šã ã¨go.modã®replaceãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã§åŒã˜ã“ã¨ãŒã§ãã¾ã™ã€‚</li></ul></li><li><code>internal</code><ul><li>ã“ã®ä¸­ã«ç½®ã„ãŸã‚³ãƒ¼ãƒ‰ã¯å¤–éƒ¨ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‹ã‚‰åˆ©ç”¨ã§ããªããªã‚Šã¾ã™ã€‚</li></ul></li><li>ç„¡è¦–ã•ã‚Œã‚‹ãƒ•ã‚©ãƒ«ãƒ€<ul><li><code>.</code>ã¨<code>_</code>ã§å§‹ã¾ã‚‹åå‰ã¨ã€<code>testdata</code>ã¨è¨€ã†åå‰ã®ãƒ•ã‚©ãƒ«ãƒ€å†…éƒ¨ã¯ã€Goã®å‡¦ç†ç³»ãŒã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å¯¾è±¡ã‹ã‚‰é™¤å¤–ã—ã¾ã™ã€‚ä¾‹ãˆã°é™çš„è§£æãƒ„ãƒ¼ãƒ«ã‚’å®Ÿè£…ã—ã¦ã„ã¦ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦goã‚³ãƒ¼ãƒ‰ã‚’ç½®ã„ã¦ãŠããŸã„å ´åˆã¨ã‹ã€NGã‚±ãƒ¼ã‚¹ã®Goå‡¦ç†ç³»ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã¯ãšã®ã‚³ãƒ¼ãƒ‰ãªã©ã¯<code>testdata</code>ãƒ•ã‚©ãƒ«ãƒ€ã®ä¸­ã«ç½®ã</li></ul></li><li>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®importãŒå¾ªç’°ã—ã¦ã¯ãƒ€ãƒ¡<ul><li>ã“ã‚Œã¯ä»–ã®è¨€èªã§ã‚‚å¤§æŠµãã†ã ã¨æ€ã†ã®ã§å•é¡Œã¯ãªã„ã‹ã¨æ€ã„ã¾ã™ã€‚å‹•çš„è¨€èªã®Pythonã ã¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚°ãƒ­ãƒ¼ãƒãƒ«ã§ã¯ãªãã€é–¢æ•°ã®ä¸­ã§importã™ã‚‹ã“ã¨ã§å¾ªç’°ã—ã¦ã‚‚ãªã‚“ã¨ã‹ã™ã‚‹æ‚ªã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã¯ã‚ã‚Šã¾ã™ãŒã€ã‚ã¾ã‚Šã‚„ã‚‰ãªã„æ–¹ãŒã„ã„ã§ã™</li></ul></li><li>è¦ªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨å­ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ç‹¬ç«‹ã—ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸<ul><li>ãƒ•ã‚©ãƒ«ãƒ€ã®ä¸Šä¸‹é–¢ä¿‚ã§è¦ªå­ãŒã‚ã£ã¦ã‚‚ã€è¦ªã¨å­ã¯ç‹¬ç«‹ã—ã¦ã„ã¾ã™ã€‚è¦ªâ†’å­ã«ä¾å­˜ãŒã‚ã£ã¦ã‚‚ã€å­â†’è¦ªã®ä¾å­˜ãŒã‚ã£ã¦ã‚‚å•é¡Œã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ä¸Šè¨˜ã®ãƒ«ãƒ¼ãƒ«ã®å¾ªç’°ã ã‘æ°—ã‚’ã¤ã‘ã‚Œã°OKã§ã™</li></ul></li><li>go gettable<ul><li>ãƒªãƒã‚¸ãƒˆãƒªã«ã¯ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ã¿ã€æˆæœç‰©ã‚’å…¥ã‚Œã‚‹ãªã€ã¿ãŸã„ãªã®ã¯VSSã¨ã‹RCSã®æ™‚ä»£ã‹ã‚‰ã®ã‚³ãƒ¼ãƒ‰ç®¡ç†ã®é‰„å‰‡ã§ã—ãŸãŒã€è‰¯ãã‚‚æ‚ªãã‚‚Goã‚‚å«ã‚ã¦è¿‘å¹´ã¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ã¨ã‚‚å¯†æ¥ã«çµã³ã¤ã„ã¡ã‚ƒã£ã¦ã„ã¾ã™ã€‚ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å ´åˆã ã¨ç‰¹ã«go getã—ãŸã ã‘ã§å‹•ãgo gettableã¨ã„ã†ã®ãŒå¥½ã¾ã‚Œã¾ã™ã€‚npmã®ã‚ˆã†ã«ãƒ“ãƒ«ãƒ‰ã—ãŸçµæœã‚’ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦ã‚¢ãƒƒãƒ—ã™ã‚‹æ–¹å¼ã ã¨åˆ†é›¢ã‚‚å¯èƒ½ã§ã™ã—ã€npmã ã¨ã•ã‚‰ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã«ãªã‚“ã‹ã‚’ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒçµ„ã‚ã‚‹ã®ã§ã™ãŒGoã«ã¯ã©ã¡ã‚‰ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚Goã ã¨ã€ä¾‹ãˆã°gRPCã®ãŸã‚ã«protobufã‹ã‚‰ç”Ÿæˆã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’å…¥ã‚ŒãŸæ–¹ãŒä¾¿åˆ©ã§ã™ã­ã€ã¨ãªã‚Šã¾ã™ã€‚</li></ul></li></ul><p>ãã‚Œä»¥å¤–ã®ãƒã‚¤ãƒ³ãƒˆã¨ã—ã¦ã¯åŒä¸€ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã¯ãªã‚‹ã¹ãé¿ã‘ãŸæ–¹ãŒè‰¯ã„ã§ã™ã€‚ç‰¹ã«æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã®ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆã¯é¿ã‘ã‚‹ã¹ãã§ã™ã€‚importæ™‚ã«åŒä¸€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã®è¦ç´ ã‚’ã„ãã¤ã‚‚åˆ©ç”¨ã—ãŸããªã£ãŸã¨ã™ã‚‹ã¨ã€å¿…ãšåˆ¥åã‚’è¨­å®šã—ãªã„ã¨ã„ã‘ãªããªã‚Šã¾ã™ã€‚å‡¦ç†ç³»ã§ã¯ãªã„ã§ã™ãŒã€ã‚³ãƒ¼ãƒ‰è£œå®Œã¨ã®ç›¸æ€§ãŒã‚ã‚Šã¾ã™ã€‚åŒä¸€åç§°ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã‚ã‚‹ã¨ã€ã‚³ãƒ¼ãƒ‰è£œå®ŒãŒãªã‹ãªã‹ã†ã¾ãæ±ºã¾ã‚‰ãšã€é–“é•ã£ãŸã‚‚ã®ã‚’é¸æŠã—ã¦æƒ³å®šå¤–ã®importæ–‡ãŒè¿½åŠ ã•ã‚ŒãŸã‚Šã¨ã„ã£ãŸçµŒé¨“ã‚’ãŠæŒã¡ã®æ–¹ã¯å¤šã„ã¨æ€ã„ã¾ã™ã€‚ã“ã®å•é¡ŒãŒã‚ã‚‹ã®ã§ã€ç´°ã‹ããƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’åˆ†ã‘ã‚‹ã‚ˆã‚Šã‹ã¯ã€ã¾ã‚‹ã£ã¨å¤§ãã‚ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã—ã¦ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®å…ˆé ­ãŒimportã§åŸ‹ã‚å°½ãã•ã‚Œã‚‹ã€ã¿ãŸã„ãªã“ã¨ã¯é¿ã‘ãŸæ–¹ãŒã¾ã—ã‹ãªã€ã¨æ€ã£ã¦ã„ã¾ã™ã€‚</p><p>Goä»¥å¤–ã®ä»–ã®ãƒ«ãƒ¼ãƒ«ã¨ã—ã¦ã¯ã€GitHubãŒGitHub pagesã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’å…¬é–‹ã™ã‚‹å ´åˆã«ã€masterãƒ–ãƒ©ãƒ³ãƒã®<code>/docs</code>ãƒ•ã‚©ãƒ«ãƒ€ã‚’å…¬é–‹ã™ã‚‹ã€ã¨ã„ã†ã®ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ã“ã®ã‚ãŸã‚Šã¯ã„ã¡ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ„æ€ã§å¤‰ã‚ã‚‹ã‚‚ã®ã§ã¯ãªã„ã®ã§ã€ç´ ç›´ã«å¾“ã†å¿…è¦ãŒã‚ã‚Šã€ã“ã‚Œå‰æã®ãƒ«ãƒ¼ãƒ«ã‚’ä½œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã•ã‚Œã¦ã„ãªã„æ¨å¥¨ã®è€ƒãˆæ–¹ã¨ã—ã¦ã¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã¯1ã¤ã®å˜èªã§ç†Ÿèªã«ã¯ã—ãªã„ã€ã¨ã„ã†ã®ãŒã‚ã‚Šã¾ã™ãŒã€ãŸã¾ã«ä»–ã®ãƒ«ãƒ¼ãƒ«ã¨ã¶ã¤ã‹ã‚‹ã®ã§ã€ã“ã“ã¯æŸ”è»Ÿã«å¯¾å¿œã™ã‚Œã°ã„ã„ã¨æ€ã„ã¾ã™ã€‚</p><h1 id="æœ€å°æ§‹æˆ"><a href="#æœ€å°æ§‹æˆ" class="headerlink" title="æœ€å°æ§‹æˆ"></a>æœ€å°æ§‹æˆ</h1><p>ä¸€ç•ªGoã‚‰ã—ã•ãŒæº¢ã‚Œã‚‹æœ€å°æ§‹æˆã¯ã“ã‚Œã ã¨æ€ã„ã¾ã™ã€‚å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã¯<code>cmd</code>ãƒ•ã‚©ãƒ«ãƒ€å†…ã«ã•ã‚‰ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åã®ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œã‚Šã¾ã™ã€‚ãã“ã®å†…éƒ¨ã¯<code>main</code>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã—ã¦ã€<code>main</code>é–¢æ•°ãŒå«ã¾ã‚Œã‚‹<code>main.go</code>ã‚’ç½®ãã¾ã™ã€‚</p><p>å¿…è¦ã§ã‚ã‚Œã°ã€<code>/docs</code>ï¼ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼‰ã€<code>/testdata</code>ãªã©ã‚’è¶³ã—ã¾ã—ã‚‡ã†ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;projectroot&gt; (projectrootãƒ‘ãƒƒã‚±ãƒ¼ã‚¸)</span><br><span class="line"> + cmd</span><br><span class="line"> | + &lt;application1&gt; (mainãƒ‘ãƒƒã‚±ãƒ¼ã‚¸)</span><br><span class="line"> | |  + main.go</span><br><span class="line"> | + &lt;application2&gt; (mainãƒ‘ãƒƒã‚±ãƒ¼ã‚¸) </span><br><span class="line"> |    + main.go</span><br><span class="line"> + project.go</span><br><span class="line">   :</span><br></pre></td></tr></table></figure><p>cmdã‚‚ãªãã—ã¦ã€å…¨éƒ¨ã‚’mainãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã—ã¦ã—ã¾ã†ã¨ã„ã†ã•ã‚‰ã«ã‚¨ã‚¯ã‚¹ãƒˆãƒªãƒ¼ãƒ ãªæ–¹æ³•ã‚‚ã‚ã‚Šã¾ã™ãŒã€èµ·å‹•éƒ¨åˆ†ã¨ã‚³ã‚¢ã®éƒ¨åˆ†ã‚’åˆ†ã‘ã‚‹ã“ã¨ã¯ã€å†åˆ©ç”¨ï¼ˆãã®ã¾ã¾å‘¼ã¶ï¼‰ã‚„ãƒ†ã‚¹ãƒˆã®ã—ã‚„ã™ã•ã®è¦³ç‚¹ã§ã¯æœ€ä½é™å®ˆã‚‹ã¹ããƒ©ã‚¤ãƒ³ã‹ã¨æ€ã„ã¾ã™ã€‚ã¾ãŸã€ã‚³ãƒ¼ãƒ‰ãŒè‚²ã£ã¦å¤§ãããªã£ãŸã¨ãã«ã€mainã®ä½ç½®ã‚’å¤‰ãˆã‚‹ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã‚’å¤‰ãˆã‚‹ã¨ã„ã†ã®ã¯ã‚³ãƒ¼ãƒ‰å…¨èˆ¬ã«å½±éŸ¿ã®ã‚ã‚‹å¤§ããªå¤‰æ›´ã«ãªã‚‹ã®ã§ã€ä»®ã«å…¨éƒ¨mainãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ãŠã•ã¾ã‚‹ç¨‹åº¦ã®å°ã•ã„ã‚³ãƒ¼ãƒ‰ã§ã‚ã£ã¦ã‚‚ã€å¤§ã—ãŸæ‰‹é–“ã§ã¯ãªã„ã®ã§ã€cmdãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œã£ã¦ãã®ä¸­ã§ã‚„ã‚‹æ–¹ãŒå¤‰æ›´æ™‚ã®æ‰‹é–“ã‚‚å‰Šæ¸›ã§ãã¾ã™ã€‚</p><p>ã“ã®æ§‹æˆã®å ´åˆã¯ã€mainãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ãªã‚‹ã¹ãè–„ãã—ã¦ã€ãªã‚‹ã¹ãprojectã®ãƒ«ãƒ¼ãƒˆã®æ–¹ã®mainã§ã¯ãªã„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã‚³ãƒ¼ãƒ‰ã‚’å¯„ã›ã¦ã„ãæ–¹ãŒè‰¯ã„ã§ã™ã€‚åƒ•ã¯ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®ãƒ‘ãƒ¼ã‚¹ã¨èµ·å‹•æ™‚ã®æ¡ä»¶ç¢ºèªãã‚‰ã„ã¯mainãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã‚„ã‚ŠãŸã„ã§ã™ãŒã€<a href="https://songmu.jp/riji/entry/2019-07-16-gocon-fukuoka.html" target="_blank" rel="noopener">mainã‚’ç©¶æ¥µã¾ã§è–„ãã—ãŸã„æ´¾</a>ã®äººã‚‚ã„ã¾ã™ã—ã€ã“ã“ã¯ãŠå¥½ã¿ã§ã€‚</p><h1 id="ã‚‚ã£ã¨ã‚³ãƒ¼ãƒ‰ã‚’å¤§ããã—ã¦ã„ãå ´åˆ"><a href="#ã‚‚ã£ã¨ã‚³ãƒ¼ãƒ‰ã‚’å¤§ããã—ã¦ã„ãå ´åˆ" class="headerlink" title="ã‚‚ã£ã¨ã‚³ãƒ¼ãƒ‰ã‚’å¤§ããã—ã¦ã„ãå ´åˆ"></a>ã‚‚ã£ã¨ã‚³ãƒ¼ãƒ‰ã‚’å¤§ããã—ã¦ã„ãå ´åˆ</h1><p>ã‚³ãƒ¼ãƒ‰ãŒé †èª¿ã«è‚²ã£ã¦ãƒ•ã‚©ãƒ«ãƒ€ã‚’åˆ†ã‘ãŸããªã‚Šã¾ã—ãŸã€‚ä»Šã¾ã§ã¯ã€èµ·å‹•éƒ¨åˆ†ã¯<code>cmd/&lt;application&gt;</code>ã«ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰ã®å¤§éƒ¨åˆ†ã‚„ä¾‹ãˆã°ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ¢ãƒ¼ãƒ‰ã‚’è¡¨ã™enumçš„ãªå‹ã¨ã‹å®šæ•°ã¯<code>&lt;projectroot&gt;</code>ã«ã„ãŸã¨ã—ã¾ã™ã€‚ã“ã“ã§ã‚µãƒ–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’è¿½åŠ ã™ã‚‹ã®ã§ã™ãŒã€ã“ã“ã§ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ–¹é‡ã®æ„æ€æ±ºå®šãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚</p><p>å˜ç´”ã«ãƒ•ã‚©ãƒ«ãƒ€ã‚’åˆ‡ã£ã¦ã‚³ãƒ¼ãƒ‰ã‚’ãã£ã¡ã«æŒã£ã¦ã„ãã¨ã€å…±é€šã®å®šæ•°ã‚„ã‚‰å‹å®šç¾©ãŒ<code>&lt;projectroot&gt;</code>ã«ã„ã‚‹ã®ã§ã€ã“ã®<code>&lt;projectroot&gt;</code>ã¨ã€ã‚µãƒ–ãƒ•ã‚©ãƒ«ãƒ€ã§å¾ªç’°ã—ã¡ã‚ƒã†ã®ã§ã™ã‚ˆã­ã€‚å¯¾ç­–ã¯ã„ãã¤ã‹ã‚ã‚Šã¾ã™ã€‚</p><img src="/images/20200528/photo_20200528_01.png" class="img-small-size"><h2 id="commonçš„ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½œã‚‹"><a href="#commonçš„ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½œã‚‹" class="headerlink" title="commonçš„ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½œã‚‹"></a>commonçš„ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½œã‚‹</h2><p>ãƒŠã‚¤ãƒ¼ãƒ–ã«è¨­è¨ˆã—ã¦ã„ãã¨ç™»å ´ã—ãŒã¡ãªã®ãŒã“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚å¾ªç’°å‚ç…§ã—ã¡ã‚ƒã£ãŸå ´åˆã€ä¸¡æ–¹ã‹ã‚‰å‚ç…§ã•ã‚Œã†ã‚‹ã‚‚ã®ã‚’åˆ‡ã‚Šå‡ºã—ã¦ç§»å‹•ã™ã‚‹ã“ã¨ã§è§£æ¶ˆã—ã¾ã™ã€‚<code>common</code>ã¨ã„ã†åå‰ã¯è‰¯ããªã„ã€ã¨è¨€ã‚ã‚Œã‚‹ã“ã¨ãŒå¤šã„ã®ã§ã™ãŒã€ã‚‚ã—ã€ãã®åˆ‡ã‚Šå‡ºã—ãŸã‚‚ã®ã‚’è¡¨ã™ãã¡ã‚“ã¨ã—ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åãŒç·¨ã¿å‡ºã›ã‚‹ãªã‚‰ã‚ã‚Šã§ã™ã€‚</p><img src="/images/20200528/photo_20200528_02.png" class="img-small-size"><p><a href="https://dave.cheney.net/2019/01/08/avoid-package-names-like-base-util-or-common" target="_blank" rel="noopener">commonã¨ã‹baseã¨ã‹utilã¨ã„ã†åå‰ã‚’ä»˜ã‘ã‚‹ãã‚‰ã„ãªã‚‰1ã¤ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã¾ã¨ã‚ã¦ã—ã¾ãˆ</a>ã¨ã„ã†äººã‚‚ã„ã¾ã™ã€‚</p><h2 id="ãƒ«ãƒ¼ãƒˆã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’å»ƒã—ã¦ã„ã"><a href="#ãƒ«ãƒ¼ãƒˆã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’å»ƒã—ã¦ã„ã" class="headerlink" title="ãƒ«ãƒ¼ãƒˆã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’å»ƒã—ã¦ã„ã"></a>ãƒ«ãƒ¼ãƒˆã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’å»ƒã—ã¦ã„ã</h2><img src="/images/20200528/photo_20200528_03.png" class="img-small-size"><p>HTTPã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®åˆæœŸåŒ–ã¯<code>handlers</code>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã€DBåˆæœŸåŒ–ã‚³ãƒ¼ãƒ‰ã¯<code>repositories</code>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã€ã®ã‚ˆã†ã«åˆ‡ã‚Šåˆ†ã‘ã¦ã€ã‚³ãƒ¼ãƒ‰ã‚’å…¨éƒ¨ã‚µãƒ–ãƒ•ã‚©ãƒ«ãƒ€å´ã«ç§»å‹•ã—ã¾ã™ã€‚æ¬ ç‚¹ã¨ã—ã¦ã¯ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã®<code>main.go</code>ãŒå¤ªã‚Šã‚„ã™ã„ç‚¹ã§ã™ã‹ã­ã€‚</p><h2 id="ãƒ«ãƒ¼ãƒˆã®å®šæ•°ã‚„å…±é€šã®ã‚‚ã®ã‚’æœ«ç«¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ç§»å‹•ã™ã‚‹"><a href="#ãƒ«ãƒ¼ãƒˆã®å®šæ•°ã‚„å…±é€šã®ã‚‚ã®ã‚’æœ«ç«¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ç§»å‹•ã™ã‚‹" class="headerlink" title="ãƒ«ãƒ¼ãƒˆã®å®šæ•°ã‚„å…±é€šã®ã‚‚ã®ã‚’æœ«ç«¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ç§»å‹•ã™ã‚‹"></a>ãƒ«ãƒ¼ãƒˆã®å®šæ•°ã‚„å…±é€šã®ã‚‚ã®ã‚’æœ«ç«¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ç§»å‹•ã™ã‚‹</h2><img src="/images/20200528/photo_20200528_04.png" class="img-small-size"><p>èµ·å‹•å¾Œã®ã¡ã‚‡ã£ã¨ã—ãŸå‡¦ç†ï¼ˆDBåˆæœŸåŒ–ã¨ã‹ï¼‰ãŒãƒ«ãƒ¼ãƒˆã«ã‚ã£ãŸã¨ã—ã¦ã€<code>&lt;projectroot&gt;</code>ã‹ã‚‰<code>handlers</code>ãªã©ã®ã‚µãƒ–ãƒ•ã‚©ãƒ«ãƒ€ã«ä¸€éƒ¨ãƒ­ã‚¸ãƒƒã‚¯ã¨ã¨ã‚‚ã«å®šæ•°å®šç¾©ãªã©ã‚‚ã¾ã‚‹ã”ã¨ç§»è­²ã™ã‚‹æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚ã†ã¾ãã„ã‘ã°ã€å®Œå…¨ã«ä¸€æ–¹çš„ã«åˆ©ç”¨ã•ã‚Œã‚‹ã ã‘ã®ç–ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã§ãã¾ã™ã€‚ã“ã“ã§ã¯<code>handlers</code>ã¿ãŸã„ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ä¸€éƒ¨ã‚’ä¾‹ã«èª¬æ˜ã—ã¦ã„ã¾ã™ãŒã€ç‹¬ç«‹ã—ãŸæ©Ÿèƒ½ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒæ§‹æˆã§ãã‚Œã°ã€ãã®ã¾ã¾åˆ‡ã‚Šå‡ºã—ã¦go getã§åˆ©ç”¨ã™ã‚‹ç‹¬ç«‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–ã—ã¦ä»–ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰åˆ©ç”¨ã—ãŸã‚Šã€OSSåŒ–ã§ããŸã‚Šã‚‚ã™ã‚‹ã§ã—ã‚‡ã†ã€‚</p><p>æ¬ ç‚¹ã¨ã—ã¦ã¯ã€ã“ã“ã§ã¯ã‚µãƒ–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯1ã¤ã ã‘ãªã®ã§å•é¡Œãªã„ã§ã™ãŒã€ã•ã‚‰ã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå¢—ãˆã¦å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å®šæ•°ã§ä¼¼ãŸã‚ˆã†ãªã‚‚ã®ãŒç™»å ´ã™ã‚‹ã¨ã€å®šæ•°å¤‰æ›ã¿ãŸã„ãªãƒ­ã‚¸ãƒƒã‚¯ãŒå¿…è¦ã«ãªã£ãŸã‚Šã€è©°æ›¿ãˆä½œæ¥­ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ç‚¹ã§ã™ã‹ã­ã€‚</p><h2 id="æŠ½è±¡ã¨å…·è±¡ã§éšå±¤åŒ–ã™ã‚‹"><a href="#æŠ½è±¡ã¨å…·è±¡ã§éšå±¤åŒ–ã™ã‚‹" class="headerlink" title="æŠ½è±¡ã¨å…·è±¡ã§éšå±¤åŒ–ã™ã‚‹"></a>æŠ½è±¡ã¨å…·è±¡ã§éšå±¤åŒ–ã™ã‚‹</h2><p>ä»Šå›ã®ã‚ˆã†ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒè‚²ã£ã¦ã„ãéç¨‹ã§ãƒ­ã‚¸ãƒƒã‚¯ã‚’åˆ†å‰²ã™ã‚‹æµã‚Œã ã¨ãã“ã¾ã§ç™ºç”Ÿã—ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®<code>crypto</code>ã‚„<code>hash</code>ãªã©ã¯ã€è¦ªã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒæŠ½è±¡ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã€å­ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒè©³ç´°å®Ÿè£…ã®ã‚ˆã†ã«åˆ†ã‹ã‚Œã¦ã„ã¾ã™ã€‚ä¾å­˜ã¯å­ã‹ã‚‰è¦ªæ–¹å‘ã§ã™ã€‚ã¡ã‚‡ã£ã¨å¤§è¦æ¨¡ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã¯å…±é€šè¦ç´ ã‚’ç½®ãæ–¹æ³•ã¨ã—ã¦ã“ã®ã‚±ãƒ¼ã‚¹ãŒç™»å ´ã™ã‚‹ã“ã¨ã‚‚ã‚ã‚‹ã§ã—ã‚‡ã†ã€‚</p><h1 id="å„è«–"><a href="#å„è«–" class="headerlink" title="å„è«–"></a>å„è«–</h1><h2 id="internalä½¿ã†ï¼Ÿ"><a href="#internalä½¿ã†ï¼Ÿ" class="headerlink" title="internalä½¿ã†ï¼Ÿ"></a><code>internal</code>ä½¿ã†ï¼Ÿ</h2><p>å€‹äººçš„ã«ã¯ä½¿ã‚ãªãã¦ã‚‚ã„ã„ã‹ãªã¨æ€ã„ã¾ã™ã€‚å°‘ãªãã¨ã‚‚ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯å®Œå…¨ã«ãƒŠãƒ³ã‚»ãƒ³ã‚¹ã§ã™ã­ã€‚ä»–ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œãªã„ã‚ˆã†ã«ã™ã‚‹ã¨ã„ã†ã®ã¯ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦ã®åˆ©ç”¨ã®æ™‚ãªã®ã§ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã§ã¯å®Œå…¨ã«ç„¡ã§ã™ã€‚<a href="https://gakkenmu.jp/" target="_blank" rel="noopener">ãƒ ãƒ¼</a>ã€‚</p><p>Goæœ¬ä½“ã®ã‚³ãƒ¼ãƒ‰ã®æ‚ªã„ã¨ã“ã‚ã§ã‚‚ã‚ã‚‹ã¨æ€ã†ã®ã§ã™ãŒã€<code>internal</code>å†…éƒ¨ã§å®£è¨€ã•ã‚Œã¦ã„ã‚‹ã›ã„ã§ã€åŒã˜ã“ã¨ã‚’ã‚„ã‚ŠãŸã„ãŸã‚ã«ã‚³ãƒ¼ãƒ‰ã®ä¸¸ã‚³ãƒ”ãƒ¼ãŒä½œã‚‰ã‚ŒãŸã‚Šã—ã¦ã€ã‹ãˆã£ã¦ä¿å®ˆæ€§ãŒæ‚ªããªã£ãŸã‚Šã¨ã„ã†ã®ã‚‚ã‚ã‚Šã¾ã™ã€‚</p><p>importã§ãã®ã¾ã¾åˆ©ç”¨ã™ã‚‹å†åˆ©ç”¨æ€§ã‚’æ‹…ä¿ã—ãŸã„å ´åˆã«ã¯ä½¿ã†ç†ç”±ã¯ä¸€åˆ‡ã‚ã‚Šã¾ã›ã‚“ã€‚ã‚³ãƒ¼ãƒ‰ã‚³ãƒ”ãƒ¼ã§å†åˆ©ç”¨ã™ã‚‹æ–¹é‡ã§ã‚ã‚Œã°ä½¿ã£ã¦ã‚‚è‰¯ã„ã§ã™ã€‚</p><h2 id="ãƒ‰ãƒ¡ã‚¤ãƒ³-ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼Ÿ-or-ãƒ¬ã‚¤ãƒ¤ãƒ¼-ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼Ÿ-or-ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼Ÿ-or-ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼Ÿ"><a href="#ãƒ‰ãƒ¡ã‚¤ãƒ³-ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼Ÿ-or-ãƒ¬ã‚¤ãƒ¤ãƒ¼-ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼Ÿ-or-ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼Ÿ-or-ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼Ÿ" class="headerlink" title="ãƒ‰ãƒ¡ã‚¤ãƒ³/ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼Ÿ or ãƒ¬ã‚¤ãƒ¤ãƒ¼/ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼Ÿ or ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼Ÿ or ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼Ÿ"></a>ãƒ‰ãƒ¡ã‚¤ãƒ³/ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼Ÿ or ãƒ¬ã‚¤ãƒ¤ãƒ¼/ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼Ÿ or ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼Ÿ or ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼Ÿ</h2><p>ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’Goã«å°å…¥ã™ã‚‹å ´åˆã«ã©ã†ã™ã‚Œã°ã„ã„ã®ã‹è­°è«–ã«ãªã‚ŠãŒã¡ãªã®ãŒã“ã“ã§ã™ã­ã€‚è­°è«–ãŒç››ã‚Šä¸ŠãŒã‚‹ãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚</p><p>ãƒ‰ãƒ¡ã‚¤ãƒ³/ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§ã‚‚ã€ãƒ¬ã‚¤ãƒ¤ãƒ¼/ãƒ‰ãƒ¡ã‚¤ãƒ³ã§ã‚‚ã€2éšå±¤ä½œã‚‹ã¨ã€ä¾‹ãˆã°ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã®DBã®ãƒ¢ãƒ‡ãƒ«ã¨ã‹ã€å…±é€šã§ä½¿ã„ãŸã„éƒ¨å“ã¨ã‹ãŒå‡ºã¦ãã¦ã€ãƒ‰ãƒ¡ã‚¤ãƒ³ã¾ãŸãã§importã—ãŸããªã£ãŸå ´åˆã«ã¡ã‚‡ã£ã¨å•é¡ŒãŒç™ºç”Ÿã—ã¾ã™ã€‚åŒä¸€åç§°ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒè¤‡æ•°ã‚ã‚‹ãŸã‚ã€ã‚³ãƒ¼ãƒ‰è£œå®ŒãŒèãã«ããã€å ´åˆã«ã‚ˆã£ã¦ã¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’æ¯å›å®šç¾©ã—ãªã„ã¨ã„ã‘ãªããªã£ãŸã‚Šã—ã¾ã™ã€‚ã‚³ãƒ¼ãƒ‰ã®å¯èª­æ€§ã¯è½ã¡ã¾ã™ã­ã€‚</p><p>ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§åˆ†ã‘ã‚‹ã‹ã€ãƒ‰ãƒ¡ã‚¤ãƒ³ã§åˆ†ã‘ã‚‹ã‹ã§ã™ãŒã€å€‹äººçš„ã«ã¯ãƒ‰ãƒ¡ã‚¤ãƒ³ã§åˆ†ã‘ãŸã„ã§ã™ã­ã€‚ãƒ‰ãƒ¡ã‚¤ãƒ³ã§åˆ†ã‘ã‚‹ã¨ã€ãƒ‰ãƒ¡ã‚¤ãƒ³é–“ã§ä¾å­˜ãŒç™ºç”Ÿã™ã‚‹å ´åˆã«å¾ªç’°ã«æ°—ã‚’ã¤ã‘ãªã„ã¨ã„ã‘ãªã„ã®ã§ã™ãŒã€å¾ªç’°ã—ãªã„ã‚ˆã†ãªãƒ‰ãƒ¡ã‚¤ãƒ³è¨­è¨ˆãŒã§ãã‚Œã°ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ãªã©ã®æ§‹é€ ã¯ãã‚Œã„ã«ãªã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚å¾ªç’°ã§ããªã„ã“ã¨ã‚’é€†æ‰‹ã«å–ã£ã¦è¨­è¨ˆã‚’ãã‚Œã„ã«ã™ã‚‹ã€‚ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹åŒ–ã—ã¾ã™ã­ãƒ¼ã€ã¨ã„ã†ã¨ãã‚‚ã‚„ã‚Šã‚„ã™ããªã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚ã‚ã¨ã€ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£çš„ã«ã¯NGã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€Goã£ã¦æ§‹é€ ä½“ã«ã‚¿ã‚°ã‚’æ›¸ã„ã¦ãƒ‡ãƒ¼ã‚¿ã‚’æµã—è¾¼ã¿ã¾ã™ã‚ˆã­ã€‚JSONã‚¿ã‚°ã¨ã€ORMã‚¿ã‚°ã®ä¸¡æ–¹ã‚’æ›¸ã„ã¦ã€HTTP APIã¨DBã‚¢ã‚¯ã‚»ã‚¹ã®ä¸¡æ–¹ã§åŒã˜æ§‹é€ ä½“ã‚’ä½¿ã£ã¡ã‚ƒã†ã®ã‚‚é¸æŠè‚¢ã‹ãªãã¨æ€ã„ã¾ã™ã€‚</p><p>ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§åˆ†ã‘ã‚‹ã¨ã€ãƒ‰ãƒ¡ã‚¤ãƒ³é–“ã®ä¾å­˜ã¯æ¯”è¼ƒçš„è‡ªç”±ã§ã‚„ã‚Šã‚„ã™ããªã‚Šã¾ã™ã€‚ã¾ãŸãƒ¬ã‚¤ãƒ¤ãƒ¼é–“ã§ã®ä¾å­˜ã¯æ¯”è¼ƒçš„è¦³æ¸¬ã—ã‚„ã™ããªã‚‹ãŸã‚ã€ã‚¸ãƒ¥ãƒ‹ã‚¢ãªãƒ¡ãƒ³ãƒãƒ¼ãŒå¤šãã¦ã€ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®è² è·ã‚’æ¸›ã‚‰ã—ãŸã„ã€ã¨ã„ã†å ´åˆã«è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚ãã®ä»£ã‚ã‚Šã€ãƒ¬ã‚¤ãƒ¤ãƒ¼é–“ã§ã®ãƒã‚±ãƒ„ãƒªãƒ¬ãƒ¼ãªã‚³ãƒ¼ãƒ‰ã¯ä¸€ç”Ÿæ‡¸å‘½ä½œã‚‰ãªã„ã¨ã„ã‘ãªããªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><p>ã“ã®ã‚ãŸã‚Šã¯ãƒãƒ¼ãƒ ã§è©±ã—åˆã£ã¦æ±ºã‚ã‚‹ã¨è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚</p><p>ãªãŠã€åŒä¸€DBãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å‚ç…§ã™ã‚‹å ´åˆã«ã‚‚ã€ãƒ‰ãƒ¡ã‚¤ãƒ³é–“ã§importã—ãªã„ã§ã€å…¨éƒ¨ã‚³ãƒ”ãƒ¼ã—ã¦ãƒ‰ãƒ¡ã‚¤ãƒ³é–“ã®ä¾å­˜ã‚’ãªãã™ã¨ã„ã†éæ¿€æ´¾ã‚‚ã„ã¾ã™ã€‚ã‚³ãƒ¼ãƒ‰ã¯é‡è¤‡ã—ã¾ã™ãŒä¾å­˜æ€§ã‚„importæ–‡ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹å•é¡Œã¯è§£æ±ºã—ã¾ã™ã€‚</p><h2 id="ã‚ãˆã¦ãƒ•ã‚©ãƒ«ãƒ€ã‚’åˆ†ã‘ã‚‹ã‚±ãƒ¼ã‚¹"><a href="#ã‚ãˆã¦ãƒ•ã‚©ãƒ«ãƒ€ã‚’åˆ†ã‘ã‚‹ã‚±ãƒ¼ã‚¹" class="headerlink" title="ã‚ãˆã¦ãƒ•ã‚©ãƒ«ãƒ€ã‚’åˆ†ã‘ã‚‹ã‚±ãƒ¼ã‚¹"></a>ã‚ãˆã¦ãƒ•ã‚©ãƒ«ãƒ€ã‚’åˆ†ã‘ã‚‹ã‚±ãƒ¼ã‚¹</h2><p>ã“ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã§ã¯ãƒ•ã‚©ãƒ«ãƒ€ã‚’ã‚ã¾ã‚Šã‚ã‘ãªã„æ–¹å‘ã§è©±ã‚’é€²ã‚ã¦ã„ã¾ã™ãŒã€æ˜ç¢ºã«ãƒ•ã‚©ãƒ«ãƒ€ã‚’åˆ‡ã£ãŸæ–¹ãŒè‰¯ã„ã‚±ãƒ¼ã‚¹ã‚‚ã‚ã‚Šã¾ã™ã€‚</p><p><a href="https://gocloud.dev" target="_blank" rel="noopener">gocloud.dev</a>ã§ã¯ã€å…±é€šAPIã®ä¸‹ã«ã€å„ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã®ã‚¢ãƒ€ãƒ—ã‚¿ã®ã‚µãƒ–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã‚ã‚Šã¾ã™ã€‚ãã‚Œãã‚Œã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯<code>import</code>ã™ã‚‹ã ã‘ã§<code>init()</code>ãŒå„ã‚¢ãƒ€ãƒ—ã‚¿ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ä½¿ãˆã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚<code>init()</code>ã®å‰¯ä½œç”¨ãŒã‚ã‚Šã€ä¾å­˜ãŒå¤§é‡ã«ã¤ã„ã¦ã¾ã‚ã‚‹ã®ã§ã€åˆ†ã‘ã‚‹ã»ã†ãŒè‰¯ã„ã§ã—ã‚‡ã†ã€‚GCPã¨AWSã¨Azureã®å…¨SDKã‚’ãƒªãƒ³ã‚¯ã™ã‚‹ã¨ã€çµæ§‹ãªãƒã‚¤ãƒŠãƒªã‚µã‚¤ã‚ºã«ãªã£ã¦ã—ã¾ã„ã¾ã™ã®ã§ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> _ <span class="string">"gocloud.dev/docstore/gcpfirestore"</span></span><br></pre></td></tr></table></figure><p>OpenTelemetryã¯<code>init()</code>ã®å‰¯ä½œç”¨ã¯ãªãã€æ˜ç¤ºçš„ã«åˆæœŸåŒ–ãŒå¿…è¦ã§ã™ãŒã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯åˆ¥ã‚Œã¦ã„ã¾ã™ã€‚é€£æºå…ˆã”ã¨ã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒç‹¬ç«‹ã—ãŸã»ã†ãŒã€è‡ªåˆ†ã§ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’æ›¸ã„ã¦ã¿ãŸã„äººãŒå‹‰å¼·ã™ã‚‹ã«ã¯å˜æ©Ÿèƒ½ã®ã‚³ãƒ¼ãƒ‰ã ã‘ãŒã‚ã‹ã‚Šã‚„ã™ãåˆ†é›¢ã•ã‚Œã¦ã„ã‚‹ã®ã§å­¦ã³ã‚„ã™ã„ã§ã™ã­ã€‚<code>init()</code>ã¯ãªãã¦ã‚‚ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªå¤‰æ•°å®šç¾©ã¨ã‹ã§åˆ©ç”¨ã—ã¦ã„ãªã„æ©Ÿèƒ½ã®ä¾å­˜ãŒç™ºç”Ÿã—ã¦ã—ã¾ã†å¯èƒ½æ€§ã¯ã‚ã‚‹ã®ã§ã€åˆ†ã‘ã‚‹æ–¹ãŒå®‰å…¨ã¨ã„ãˆã°å®‰å…¨ã€‚</p><p><a href="https://github.com/open-telemetry/opentelemetry-go" target="_blank" rel="noopener">https://github.com/open-telemetry/opentelemetry-go</a></p><h2 id="vendorä½¿ã†ï¼Ÿ"><a href="#vendorä½¿ã†ï¼Ÿ" class="headerlink" title="vendorä½¿ã†ï¼Ÿ"></a><code>vendor</code>ä½¿ã†ï¼Ÿ</h2><p><code>vendor</code>ã¯æœ€åˆã«èª¬æ˜ã—ãŸã¨ãŠã‚Šå¿…è¦æ€§ã¯è–„ããªã£ã¦ã„ã¾ã™ã€‚æ—¢è£½ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ”¹å¤‰ã¯go modãŒä½¿ãˆã¾ã™ã‹ã‚‰ã­ã€‚ä¸€æ–¹ã§ã€ã¡ã‚‡ã£ã¨ä¾¿åˆ©ã‹ãªã¨æ€ã£ã¦ã„ã‚‹ã®ã¯ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã«ä¾å­˜ã™ã‚‹å ´åˆã§ã™ã€‚</p><p>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚‚å…±é€šãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚‚ä¸¡æ–¹ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãªå ´åˆã«Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œã‚‹ã€CIã§ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã¨ã„ã£ãŸã¨ãã«çµæ§‹å„ä»‹ãªã®ãŒãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•ã§ã™ã€‚ç’°å¢ƒå¤‰æ•°ã§ç§˜å¯†éµã‚’ã‚ãŸã—ã¦ã€RUNèŠ¸ã‚’é§†ä½¿ã—ã¦ã€ä¸€ç­†æ›¸ãã§privateãƒªãƒã‚¸ãƒˆãƒªã®ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆã‚’ã—ã¦æ¶ˆã™ã¨ã‹ã€ã„ã‚ã„ã‚é ‘å¼µã£ã¦ã„ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ãŸã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</p><p>cloud buildã¿ãŸã„ãªãã‚Œã«å¯¾ã™ã‚‹ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç”¨æ„ã—ã¦ãã‚Œã¦ã„ã‚‹ã‚‚ã®ã‚‚ã‚ã‚Šã¾ã™ãŒã€ã„ã£ãã®ã“ã¨ã€vendorã«ä¾å­˜ã‚³ãƒ¼ãƒ‰ã‚’å…¨éƒ¨å…¥ã‚Œã¦ã‹ã‚‰ãƒ“ãƒ«ãƒ‰ã€ã¿ãŸã„ã«ã—ãŸã»ã†ãŒæ¥½ã˜ã‚ƒãªã„ã‹ã¨æ€ã„ã¾ã™ã€‚Dockerå†…éƒ¨ã§ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã‚¢ã‚¯ã‚»ã‚¹ãŒå¿…è¦ã˜ã‚ƒãªããªã‚Šã¾ã™ã‹ã‚‰ã­ã€‚</p><p>Dockerfileã®ä¸­ã§é ‘å¼µã‚‹ã®ã‹ã€docker buildã®å‰ã«go mod vendorã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ã‹ã€ã„ã£ãã®ã“ã¨go mod vendorã‚’å®Ÿè¡Œã—ãŸçµæœã‚‚ãƒªãƒã‚¸ãƒˆãƒªã«å…¥ã‚Œã¦ã—ã¾ã†ã‹ã€‚ã©ã“ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«ã—ãŸã„ã‹æ¬¡ç¬¬ã‹ãªã€ã¨æ€ã„ã¾ã™ã€‚æœ€è¿‘ã®Goã‚‚Node.jsã¿ãŸã„ã«ä¾å­˜ä½¿ã„ã¾ãã‚‹æ„Ÿã˜ã«ãªã£ã¦ãã¦ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®ã‚³ãƒ”ãƒ¼ã®æ™‚é–“ãŒå¢—ãˆã¦ã„ã‚‹ã®ã§ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ã¯ã‚ã‚Šã¾ã™ã€‚</p><h2 id="toolsä½¿ã†ï¼Ÿ"><a href="#toolsä½¿ã†ï¼Ÿ" class="headerlink" title="toolsä½¿ã†ï¼Ÿ"></a><code>tools</code>ä½¿ã†ï¼Ÿ</h2><p>ã‚³ãƒ¼ãƒ‰ç”Ÿæˆç­‰ã«ä½¿ã†ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚„ãƒ„ãƒ¼ãƒ«ãªã©ã®å®£è¨€å ´æ‰€ã¨ã—ã¦<code>tools</code>ãƒ•ã‚©ãƒ«ãƒ€ãŒå¥½ã¾ã‚Œã¦ãã¾ã—ãŸã€‚ç‰¹ã«go getã—ã¦å‹•ãGoè£½ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åˆ©ç”¨ã™ã‚‹å ´åˆã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ«ãƒ¼ãƒˆã®go.modã§ãƒ„ãƒ¼ãƒ«ã‚’å®£è¨€ã—ã¦ã—ã¾ã†ã¨ã€go getã™ã‚‹äººãŒã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®åˆ©ç”¨ã§ã¯å¿…ãšã—ã‚‚å¿…è¦ãŒãªã„ãƒ„ãƒ¼ãƒ«ã¾ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã›ã‚‰ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚ã¿ã‚“ãªåœ¨å®…ã§ã€å®¶ã§Netflixã¨ã‹ã‚’è¦‹ã¾ãã£ã¦å›ç·šãŒè¼»è¼³ã—ã¦é…ããªã£ã¦ã„ã‚‹æ˜¨ä»Šã§ã¯ã€ä½™è¨ˆãªãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚’ã•ã›ã‚‹ã®ã¯é‚ªæ‚ªãªè¡Œç‚ºã§ã™ã€‚ãã®ãŸã‚ã€<code>tools</code>ãƒ•ã‚©ãƒ«ãƒ€å†…ã§<code>go mod init</code>ã—ã¦ã€é–‹ç™ºè€…ã®ã¿ãŒåˆ©ç”¨ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã¯ãã“ã§å®£è¨€ã™ã‚‹ã¨ã„ã†ã“ã¨ãŒè¡Œã‚ã‚Œã¦ãã¾ã—ãŸã€‚</p><p>ç¾åœ¨ã¯ã€ã‚ã–ã‚ã–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½œã‚‰ãªãã¦ã‚‚ã€<code>go:generate</code>ã«<code>go run</code>ã‹ã‚‰æ›¸ãã“ã¨ã§ã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦å®Ÿè¡Œã¾ã§ä¸€è¡Œã§å¯¾å¿œã§ãã¾ã™ã€‚ãƒ«ãƒ¼ãƒˆã®go.modã«ä¾å­˜ã‚’æ›¸ãå¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚Goè£½ä»¥å¤–ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã†å ´åˆã«ã¯ã‚ã£ã¦ã‚‚ã„ã„ã¨æ€ã„ã¾ã™ãŒã€Goè£½ãƒ„ãƒ¼ãƒ«ã ã‘ãªã‚‰ä»Šã©ãã¯ä¸è¦ã¨è¨€ãˆã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//go:generate go run github.com/go-swagger/go-swagger/cmd/swagger generate server -f swagger.yaml --target=webapi --exclude-main</span></span><br></pre></td></tr></table></figure><h1 id="Standard-Go-Project-Layoutã«ã¤ã„ã¦å€‹äººçš„ã«æ°—ã«ãªã‚‹ç‚¹"><a href="#Standard-Go-Project-Layoutã«ã¤ã„ã¦å€‹äººçš„ã«æ°—ã«ãªã‚‹ç‚¹" class="headerlink" title="Standard Go Project Layoutã«ã¤ã„ã¦å€‹äººçš„ã«æ°—ã«ãªã‚‹ç‚¹"></a>Standard Go Project Layoutã«ã¤ã„ã¦å€‹äººçš„ã«æ°—ã«ãªã‚‹ç‚¹</h1><p>ã„ã‚ã‚“ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æœ€å¤§å…¬ç´„æ•°ã§ã—ã‹ãªã„ã®ã§ã€ã‚ã‚“ã¾ã‚Šæ•™æ¡çš„ã«ã“ã‚Œã«å¾“ã†ã¨ã‹ã¯è€ƒãˆãªãã¦ã‚‚ã„ã„ã‹ãªã¨æ€ã„ã¾ã™ã€‚æ°—ã«ãªã£ãŸãƒ•ã‚©ãƒ«ãƒ€ã®READMEã«ã¯ã©ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒä½¿ã£ã¦ã„ã‚‹ã‹ã€ã¨ã„ã£ãŸã“ã¨ãŒæ›¸ã‹ã‚Œã¦ã„ã‚‹ã®ã§ã€ãã‚Œã‚’è¦‹ã¦å–ã‚Šå…¥ã‚ŒãŸã„ã‚‚ã®ã ã‘ã‚’å–ã‚Šå…¥ã‚Œã‚‹ã‚¹ã‚¿ã‚¤ãƒ«ã§ã‚ˆã„ã‹ã¨æ€ã„ã¾ã™ã€‚å€‹åˆ¥ã«æ°—ã«ãªã‚‹ç‚¹ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚</p><ul><li><code>testdata</code>ã«ã¯è§¦ã‚Œã¦ã„ãªã„ã§ã™ã­ã€‚å°‘ãªãã¨ã‚‚Goã§ã®ãƒ†ã‚¹ãƒˆç³»ã®è¦ç´ ã¯Goã‚³ãƒ¼ãƒ‰ã˜ã‚ƒãªãã¦ã‚‚testã˜ã‚ƒãªãã¦<code>testdata</code>ã«å…¥ã‚Œã‚‹æ–¹ãŒè‰¯ã„ã‹ã¨æ€ã„ã¾ã™ã€‚ã‚ãˆã¦åˆ†ã‘ã‚‹å¿…è¦ã‚‚ãªã„ã®ã§ã€‚</li><li><code>examples</code>ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å¯¾è±¡ã«ãªã£ã¦ã—ã¾ã†ã€‚<code>_examples</code>ã¨ã‹ã«ã—ãŸæ–¹ãŒè‰¯ã•ãã†</li><li>æœ¬æ–‡ã§ã‚‚èª¬æ˜ã—ãŸãŒ<code>internal</code>ã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯æ„å‘³ãŒãªã„ã¨ã„ã†èª¬æ˜ãŒãªã„</li><li>ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ«ãƒ€ã®æ‰±ã„ã«ã¤ã„ã¦ã¯èª¬æ˜ãŒãªã„ã§ã™ã­ã€‚ã“ã“ã«å…±æœ‰ã®å®šæ•°å®šç¾©ã¨ã‹Enumå®šç¾©ã‚’æ›¸ãã¨ã‹ã€‚å…±æœ‰ã‚³ãƒ¼ãƒ‰ã®ç½®ãå ´æ‰€ã«ã¤ã„ã¦ã‚‚ç‰¹ã«ãªã•ãã†</li><li>websiteã¯github pagesã§å…¬é–‹ã™ã‚‹ãªã‚‰docsã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æˆæœç‰©ã‚’å…¥ã‚Œã‚‹é‹ç”¨ã®æ–¹ãŒã‚¹ãƒ ãƒ¼ã‚ºã§è‰¯ã„ãªã¨æ€ã„ã¾ã™ã€‚gh-pagesãƒ–ãƒ©ãƒ³ãƒã¨ã‹ã‚‚ã‚ã‚Šã¾ã™ãŒã€ãƒ–ãƒ©ãƒ³ãƒã ã¨stableã¨unstableã®è¤‡æ•°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§å†…å®¹é•ã„ã¨ã‹ãŒä½œã‚Œãªã„ã®ã§ã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã‚½ãƒ¼ã‚¹ã®mdãªã‚Šsphinxã‚’ã©ã“ã«ç½®ãã®ã‹ã¯æ¤œè¨ãŒå¿…è¦ã§ã™ãŒã€åƒ•ã¯docsrcã¨ã‹ã«ã™ã‚‹ã‹ãªï¼Ÿ</li><li>åˆ¥ã«Standard Go Project Layoutã®ã›ã„ã˜ã‚ƒãªã„ã‘ã©ã€ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ç”¨èªã®Evilã•ã¯ãªã‚“ã¨ã‹ãªã‚‰ãªã„ã§ã™ã‹ã­ã€‚DDDã‚‚ãã†ã ã‘ã©ã€‚è¨€è‘‰ã‚’å¤§äº‹ã«ã—ã¦æ¬²ã—ã„ã€‚ã€Œãƒªãƒã‚¸ãƒˆãƒªã€ã¨ã„ã†è¨€è‘‰ã§æƒ‘ã‚ã•ã‚Œã‚‹è‹¥è€…ã‚’ä»Šé€±ã¾ãŸè¦‹ã‹ã‘ã¾ã—ãŸã€‚</li></ul><h1 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h1><p>ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ ã‚’è€ƒãˆã‚‹ã¨ãã§ã‚‚ã€æ™®æ®µã®ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã§ã‚‚ã€ãã®ãƒ«ãƒ¼ãƒ«ã‚’å¤‰ãˆã‚‹è¦ä»¶ãŒç™ºç”Ÿã—ãŸã¨ãã«ã„ã¤ã§ã‚‚å¤‰ãˆã‚‰ã‚Œã‚‹æŸ”è»Ÿã•ã‚’ã‚‚ã£ãŸã¾ã¾ã€ãªã‚‹ã¹ãã‚·ãƒ³ãƒ—ãƒ«ã§ã‚ã‚Œã€ã¨æ€ã£ã¦ã„ã‚‹ãŸã‚ã€ãã‚Œã‚’æ›¸ã„ã¦è¦‹ã¾ã—ãŸã€‚</p><p>äººã¯ãƒ«ãƒ¼ãƒ«ã‚’ä½œã‚‹ã¨ãã¯å³ã—ã‚ã®ãƒ«ãƒ¼ãƒ«ã®æ–¹ãŒã„ã„ã€ã¨æ€ã£ã¦ã—ã¾ã„ãŒã¡ã§ã™ã€‚ç‰¹ã«ã€ãƒ«ãƒ¼ãƒ«ã‚’æ±ºã‚ã‚‹äººã¨ã€ãã®ãƒ«ãƒ¼ãƒ«ã«å¾“ã†äººãŒåˆ¥ã®å ´åˆã¯é¡•è‘—ã§ã™ã€‚Goã§ã‚‚ç´°ã‹ãƒ¼ãä¸å¯§ã«ãƒ•ã‚©ãƒ«ãƒ€ã‚’åˆ‡ã‚Šã¾ãã£ã¦ã„ã‚‹æ¡ˆä»¶ã‚’æ•°å¤šãè¦‹ã¦ãã¾ã—ãŸã€‚ç‰©äº‹ã¯ãƒãƒ©ãƒ³ã‚¹ã§ã™ã€‚å³ã—ããªã‚‹ãƒ•ã‚©ãƒ¼ã‚¹ã ã‘ã—ã‹ãªã„ã¨ã€ãƒãƒ©ãƒ³ã‚¹èª¿æ•´ãŒåƒã‹ãšã€ä¸å…·åˆç™ºç”Ÿã®ãŸã³ã«åšããªã‚‹éšœå®³å¯¾ç­–ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã¿ãŸã„ã«ãªã‚ŠãŒã¡ã§ã™ã€‚ã¡ã‚‡ã†ã©è‰¯ã„ãƒãƒ©ãƒ³ã‚¹ã‚’ç¶­æŒã™ã‚‹ãŸã‚ã«ã¯ã€Œãã‚“ãªé ‘å¼µã‚‰ãªãã¦ã‚‚ã„ã„ã‚µãƒ¼ã€ã€Œãªã‚“ãã‚‹ãªã„ã•ãƒ¼ã€ã¨è¨€ã†ãŠã£ã•ã‚“ãŒ1äººã¯å¿…è¦ãªã‚ã‘ã§ã™ã€‚ã¨ãã«Goã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆã§ã‚°ã‚°ã‚‹ã¨æœ€åˆã«å‡ºã¦ãã‚‹ã®ãŒä¸€ç•ªå³ã—ã‚ãƒ«ãƒ¼ãƒ«ã¨ã„ã†ã“ã¨ã§ã€ãŸã ã§ã•ãˆã‚³ãƒ¼ãƒ‰ãŒé•·ããªã‚ŠãŒã¡ãªGoã®ã‚³ãƒ¼ãƒ‰ãŒé•·ããªã£ã¦ã€Goå«Œã„ã«ãªã£ãŸã‚Šã—ãŸã‚‰ã„ã‚„ã ãªãã€Goã¯ã‚·ãƒ³ãƒ—ãƒ«ã«ã‚¹ã‚¿ãƒ¼ãƒˆã§ãã‚‹ã‚“ã§ã™ã‚ˆã€ã¨ã„ã†æ°—æŒã¡ã§æ›¸ãã¾ã—ãŸã€‚</p><h1 id="é–¢é€£è¨˜äº‹"><a href="#é–¢é€£è¨˜äº‹" class="headerlink" title="é–¢é€£è¨˜äº‹"></a>é–¢é€£è¨˜äº‹</h1><ul><li><a href="https://future-architect.github.io/articles/20190604/">OpenCensus(OpenTelemetry)ã¨ã¯</a></li><li><a href="/tags/GoCDK/">GoCDK</a></li><li><a href="/tags/Serverless%E9%80%A3%E8%BC%89/">Serverlessé€£è¼‰</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Goã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆã©ã†ã—ã‚ˆã†ã€ã¨ã‚°ã‚°ã‚‹ã¨è¦‹ã¤ã‹ã‚‹&lt;a href=&quot;https://github.com/golang-standards/project-layout&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Standard Go Pr
      
    
    </summary>
    
      <category term="Programming" scheme="https://future-architect.github.io/categories/Programming/"/>
    
    
      <category term="Go" scheme="https://future-architect.github.io/tags/Go/"/>
    
      <category term="è¨­è¨ˆ" scheme="https://future-architect.github.io/tags/%E8%A8%AD%E8%A8%88/"/>
    
  </entry>
  
  <entry>
    <title>Go Tipsé€£è¼‰8: logãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ãƒ­ã‚°å‡ºåŠ›ã—ã¦ã„ã‚‹å ´æ‰€ã®æƒ…å ±ã‚’å‡ºã™</title>
    <link href="https://future-architect.github.io/articles/20200527/"/>
    <id>https://future-architect.github.io/articles/20200527/</id>
    <published>2020-05-27T01:36:36.000Z</published>
    <updated>2020-05-27T01:56:22.996Z</updated>
    
    <content type="html"><![CDATA[<img src="/images/20200527/top.png" class="img-small-size"><p><a href="/tags/GoTips%E9%80%A3%E8%BC%89/">Go Tipsé€£è¼‰</a>ã®ç¬¬8å¼¾ã§ã™ã€‚</p><p>Go tipsã¨ã„ã†ã“ã¨ã§ã€ã‚·ãƒ³ãƒ—ãƒ«ãƒã‚¿ã‚’æŠ•ç¨¿ã—ã¾ã™ã€‚</p><p>æ¤œç´¢çª“ã«å…¥ã‚Œã‚‹ã¨ã€Œprintãƒ‡ãƒãƒƒã‚°ã§ã„ã¤ã¾ã§æ¶ˆè€—ã—ã¦ã„ã‚‹ã®ï¼Ÿã€ã¨ã‹ã€Œprintãƒ‡ãƒãƒƒã‚°ã«ã•ã‚ˆã†ãªã‚‰ã€ã¨ã‹ã‚µã‚¸ã‚§ã‚¹ãƒˆã•ã‚Œã¤ã¤ã‚‚ã€æ ¹å¼·ãç”Ÿãæ®‹ã£ã¦ã„ã‚‹ã®ãŒprintãƒ‡ãƒãƒƒã‚°ã§ã™ã€‚ã‚€ã—ã‚ã€éåŒæœŸã ã£ãŸã‚Šä¸¦åˆ—å‡¦ç†ã ã£ãŸã‚Šãƒ—ãƒ­ã‚»ã‚¹ã¾ãŸãã€ãƒ›ã‚¹ãƒˆã¾ãŸããŒå¢—ãˆã¦ãã‚‹ã¨ã€åŒæœŸçš„ã«å‹•ããƒ‡ãƒãƒƒã‚¬ãƒ¼ãŒé€†ã«ä½¿ã„ã«ãã‹ã£ãŸã‚Šã‚‚ã‚ã‚Šã¾ã™ã—ã€ãƒ‡ãƒãƒƒã‚¬ãƒ¼ã‚’ä½¿ã†ã«ã—ã¦ã‚‚ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆã‚’ä»•æ›ã‘ã‚‹å ´æ‰€ã®ã‚ãŸã‚Šã‚’ã¤ã‘ã‚‹ãŸã‚ã«printãƒ‡ãƒãƒƒã‚°ã®åŠ›ã‚’å€Ÿã‚ŠãŸã‚Šã‚‚ã‚ã‚‹ã—ã€ã„ã£ãã®ã“ã¨printãƒ‡ãƒãƒƒã‚°ã®æ–¹ãŒé€²åŒ–ã—ã‚ã€ã¨å€‹äººçš„ã«ã¯æ€ã£ã¦ã„ã¾ã™ã€‚åˆ†æ•£ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°ã¯é€²åŒ–ã—ãŸprintãƒ‡ãƒãƒƒã‚°ã ã¨æ€ã£ã¦ã„ã¾ã™ã€‚</p><p>Goã§printãƒ‡ãƒãƒƒã‚°ã®å‹ã¨ã„ãˆã°æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®<a href="https://golang.org/pkg/log/" target="_blank" rel="noopener">logãƒ‘ãƒƒã‚±ãƒ¼ã‚¸</a>ã§ã™ã­ã€‚logãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã¯è‰²ã€…ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãƒã‚¤ãƒ³ãƒˆãŒã‚ã‚Šã¾ã™ã®ã§ãã‚Œã‚’ç´¹ä»‹ã—ã¾ã™ã€‚</p><h1 id="ãƒ­ã‚°å‡ºåŠ›ã—ã¦ã„ã‚‹å ´æ‰€ã‚’è¡¨ç¤º"><a href="#ãƒ­ã‚°å‡ºåŠ›ã—ã¦ã„ã‚‹å ´æ‰€ã‚’è¡¨ç¤º" class="headerlink" title="ãƒ­ã‚°å‡ºåŠ›ã—ã¦ã„ã‚‹å ´æ‰€ã‚’è¡¨ç¤º"></a>ãƒ­ã‚°å‡ºåŠ›ã—ã¦ã„ã‚‹å ´æ‰€ã‚’è¡¨ç¤º</h1><p>printãƒ‡ãƒãƒƒã‚°ã‚’ã™ã‚‹ã«ã¯ã€ã©ã“ã‹ã‚‰å‡ºåŠ›ã•ã‚ŒãŸæ–‡å­—åˆ—ã‹ãŒåˆ†ã‹ã‚‰ãªã„ã¨æ„å‘³ãŒã‚ã‚Šã¾ã›ã‚“ã€‚Goã®æ¨™æº–ã®ãƒ­ã‚°å‡ºåŠ›ã ã¨ã€æ—¥ä»˜ã¨æ™‚é–“ã®æƒ…å ±ãŒä»˜ä¸ã•ã‚Œã‚‹ã ã‘ã§ã™ã€‚ã“ã“ã¯ãƒ•ãƒ©ã‚°ã§å¤‰æ›´ã§ãã¾ã™ã€‚ãƒ•ãƒ©ã‚°ã¯ã“ã‚“ãªæ„Ÿã˜ã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Ldate         = <span class="number">1</span> &lt;&lt; <span class="literal">iota</span>     <span class="comment">// the date in the local time zone: 2009/01/23</span></span><br><span class="line">Ltime                         <span class="comment">// the time in the local time zone: 01:23:23</span></span><br><span class="line">Lmicroseconds                 <span class="comment">// microsecond resolution: 01:23:23.123123.  assumes Ltime.</span></span><br><span class="line">Llongfile                     <span class="comment">// full file name and line number: /a/b/c/d.go:23</span></span><br><span class="line">Lshortfile                    <span class="comment">// final file name element and line number: d.go:23. overrides Llongfile</span></span><br><span class="line">LUTC                          <span class="comment">// if Ldate or Ltime is set, use UTC rather than the local time zone</span></span><br><span class="line">Lmsgprefix                    <span class="comment">// move the "prefix" from the beginning of the line to before the message</span></span><br><span class="line">LstdFlags     = Ldate | Ltime <span class="comment">// initial values for the standard logger</span></span><br></pre></td></tr></table></figure><p><code>Lmicroseconds</code>ã®ãƒã‚¤ã‚¯ãƒ­ç§’å˜ä½ã®æ™‚é–“æƒ…å ±ãŒã‚ã‚Œã°ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒé…ã„ã€è¨ˆæ¸¬ãŒå¿…è¦ãªå ´æ‰€ã®ã‚ãŸã‚Šã‚’ã¤ã‘ã‚‹ã®ã«ä¾¿åˆ©ãã†ã§ã™ã­ã€‚ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ä»˜ä¸ã™ã‚‹ã«ã¯ã€<code>log.Lshortfile</code>ã‹<code>log.Llongfile</code>ã‚’ä»˜ä¸ã—ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"log"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">log.Println(<span class="string">"æ¨™æº–çŠ¶æ…‹"</span>)</span><br><span class="line">log.SetFlags(log.LstdFlags | log.Lshortfile)</span><br><span class="line">log.Println(<span class="string">"ğŸ™ ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ä»˜ä¸"</span>)</span><br><span class="line">log.SetFlags(log.LstdFlags | log.Llongfile)</span><br><span class="line">log.Println(<span class="string">"ğŸ¦‘ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»˜ãã®ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ä»˜ä¸"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ãƒ•ã‚©ãƒ«ãƒ€ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ãƒ•ãƒ«ãƒ‘ã‚¹è¡¨ç¤ºã•ã‚Œã¾ã™ãŒã€ã„ã¾ã©ãã¯<code>-tirmpath</code>ã¤ã‘ã¦ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã§ã—ã‚‡ã†ã—ã€ãã†ãªã‚‹ã¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åï¼‹ç›¸å¯¾ãƒ‘ã‚¹ã ã‘ã«ãªã‚Šã¾ã™ã€‚</p><img src="/images/20200527/1.png"><h1 id="å‡ºåŠ›å…ˆã¨ã‹ãƒ­ã‚°ã«æ±ºã¾ã£ãŸæ–‡å­—åˆ—ã‚’è¿½åŠ "><a href="#å‡ºåŠ›å…ˆã¨ã‹ãƒ­ã‚°ã«æ±ºã¾ã£ãŸæ–‡å­—åˆ—ã‚’è¿½åŠ " class="headerlink" title="å‡ºåŠ›å…ˆã¨ã‹ãƒ­ã‚°ã«æ±ºã¾ã£ãŸæ–‡å­—åˆ—ã‚’è¿½åŠ "></a>å‡ºåŠ›å…ˆã¨ã‹ãƒ­ã‚°ã«æ±ºã¾ã£ãŸæ–‡å­—åˆ—ã‚’è¿½åŠ </h1><p>ä»–ã«ã‚‚å‡ºåŠ›å…ˆã¨ã‹ã‚‚å¤‰æ›´ã§ãã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"log"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">log.Println(<span class="string">"æ¨™æº–çŠ¶æ…‹"</span>)</span><br><span class="line">log.SetPrefix(<span class="string">"ğŸ¤ "</span>)</span><br><span class="line">log.Println(<span class="string">"prefixã‚’ã‚»ãƒƒãƒˆ"</span>)</span><br><span class="line">log.SetOutput(&amp;OrigWriter&#123;&#125;)</span><br><span class="line">log.Println(<span class="string">"å‡ºåŠ›å…ˆã‚’å¤‰æ›´"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»Šå›ã¯å‡ºåŠ›å…ˆãŒå¤‰ã‚ã£ãŸã“ã¨ãŒã™ãã‚ã‹ã‚‹ã‚ˆã†ã«ã¡ã‚‡ã£ã¨io.Writerã‚’ä½œã£ã¦ã„ã¾ã™ãŒã€å®Ÿéš›ã¯io.MultiWriterã‚’ä½¿ã£ã¦ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã¨ã‹ãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚¯ãƒ­ã‚¹ãƒã‚¹ãƒˆã™ã‚‹ãã‚‰ã„ã§ã™ã‹ã­ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> OrigWriter <span class="keyword">struct</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(w OrigWriter)</span> <span class="title">Write</span><span class="params">(b []<span class="keyword">byte</span>)</span> <span class="params">(<span class="keyword">int</span>, error)</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> fmt.Fprintf(os.Stderr, <span class="string">"[stderr] %s"</span>, b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h1><p>ãƒ•ã‚¡ã‚¤ãƒ«åã®å‡ºåŠ›ã‚’å…¥ã‚Œã‚‹ã¨ä¾¿åˆ©ã§ã™ã€‚ã¾ãŸã€çµµæ–‡å­—ã‚’ä»Šå›ã‚µãƒ³ãƒ—ãƒ«ã«ä½¿ã„ã¾ã—ãŸãŒã€çµµæ–‡å­—ã£ã¦è‰²ãŒã¤ãã®ã§ï¼ˆãŸã¨ãˆ<a href="https://play.golang.org/p/-wnBrYmGqwI" target="_blank" rel="noopener">go playground</a>ã§ã‚ã£ã¦ã‚‚ï¼‰è¦–èªæ€§ãŒã„ã„ã‚“ã§ã™ã‚ˆã­ã€‚çµµæ–‡å­—ã‚’<code>log.SetPrefix()</code>ã«å…¥ã‚Œã¦ã‚ã’ã‚‹ã®ã‚‚ãŠã™ã™ã‚ã§ã™ã€‚çµµæ–‡å­—ã‚’ä½¿ã†å ´åˆã¯ã‚°ãƒªãƒ•ãŒåŠè§’ç›¸å½“ã®å¹…ã‹å…¨è§’ç›¸å½“ã®å¹…ã‹ã¯ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã®è¨­å®šã«ã‚ˆã£ã¦å‡ºåŠ›ã®ã•ã‚Œæ–¹ãŒå¤‰ã‚ã‚‹ã“ã¨ãŒã‚ã‚Šã€åŠè§’ã®å¹…ã ã¨çµµã«æ¬¡ã®æ–‡å­—ãŒã‚ã‚Šè¾¼ã‚“ã§ã‚ˆã¿ã«ãããªã‚‹ãŸã‚ã€çµµæ–‡å­—ã®å¾Œã‚ã«ã¯åŠè§’ã‚¹ãƒšãƒ¼ã‚¹ã‚’å…¥ã‚Œã¦ãŠãã®ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚</p><img src="/images/20200527/2.png"><h1 id="é–¢é€£è¨˜äº‹"><a href="#é–¢é€£è¨˜äº‹" class="headerlink" title="é–¢é€£è¨˜äº‹"></a>é–¢é€£è¨˜äº‹</h1><ul><li><a href="https://future-architect.github.io/articles/20190604/">OpenCensus(OpenTelemetry)ã¨ã¯</a></li><li><a href="/tags/GoCDK/">GoCDK</a></li><li><a href="/tags/Serverless%E9%80%A3%E8%BC%89/">Serverlessé€£è¼‰</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;img src=&quot;/images/20200527/top.png&quot; class=&quot;img-small-size&quot;&gt;

&lt;p&gt;&lt;a href=&quot;/tags/GoTips%E9%80%A3%E8%BC%89/&quot;&gt;Go Tipsé€£è¼‰&lt;/a&gt;ã®ç¬¬8å¼¾ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;Go tip
      
    
    </summary>
    
      <category term="Programming" scheme="https://future-architect.github.io/categories/Programming/"/>
    
    
      <category term="Go" scheme="https://future-architect.github.io/tags/Go/"/>
    
      <category term="GoTipsé€£è¼‰" scheme="https://future-architect.github.io/tags/GoTips%E9%80%A3%E8%BC%89/"/>
    
  </entry>
  
  <entry>
    <title>æ–°ç±³ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒï¼‘ã‹æœˆã®ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã§å­¦ã‚“ã ã“ã¨</title>
    <link href="https://future-architect.github.io/articles/20200526/"/>
    <id>https://future-architect.github.io/articles/20200526/</id>
    <published>2020-05-26T00:27:03.000Z</published>
    <updated>2020-05-26T00:44:11.129Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ã¾ãˆãŒã"><a href="#ã¾ãˆãŒã" class="headerlink" title="ã¾ãˆãŒã"></a>ã¾ãˆãŒã</h1><p>ã¯ã˜ã‚ã¾ã—ã¦ã€‚TIG DXãƒãƒ¼ãƒ ã«ã‚¢ãƒ«ãƒã‚¤ãƒˆã¨ã—ã¦å‚åŠ ã•ã›ã¦ã„ãŸã ã„ã¦ã„ã‚‹æœ¬ç”°ç›´æ¨¹ã¨ç”³ã—ã¾ã™ã€‚<br>æ˜¨å¹´12æœˆã«AtCoder JobsçµŒç”±ã§ã‚¢ãƒ«ãƒã‚¤ãƒˆæ¡ç”¨ã—ã¦ã„ãŸã ãã€ä»Šæœˆã§ã¡ã‚‡ã†ã©åŠå¹´ã«ãªã‚Šã¾ã™ã€‚æ™®æ®µã¯æ–‡ç³»å¤§å­¦ç”Ÿã‚’ã—ã¦ã„ã¾ã™ã€‚</p><p>æ¡ç”¨å¾Œã®ã‚¢ãƒ«ãƒã‚¤ãƒˆã®ä½œæ¥­ã¯ã€</p><ul><li>ã‚²ãƒ¼ãƒ ã‚¨ãƒ³ã‚¸ãƒ³ã‚’åˆ©ç”¨ã—ãŸIoTæƒ…å ±å¯è¦–åŒ–ãƒ„ãƒ¼ãƒ«ã®é–‹ç™º<ul><li><a href="https://qiita.com/Khdbble/items/491a48effc8dd4bd1133" target="_blank" rel="noopener">Qiitaè¨˜äº‹ã‚’ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®AdventCalendarã«æŠ•ç¨¿</a></li><li><a href="https://future-architect.github.io/articles/20200209/">golang.tokyo #29ã«ç¤¾å“¡ã®å…ˆè¼©æ–¹ã¨ç™»å£‡</a></li></ul></li><li>IoTã‚¯ãƒ©ã‚¦ãƒ‰ã‚¤ãƒ³ãƒ•ãƒ©ã®é–‹ç™º<ul><li>ç¾åœ¨é€²è¡Œå½¢ã§ãŠæ‰‹ä¼ã„ã—ã¦ã„ã¾ã™</li></ul></li></ul><p>ã«æºã‚ã‚‰ã›ã¦ã„ãŸã ã„ã¦ãŠã‚Šã¾ã™ã€‚</p><p>ä»Šå›ã¯ã€ã‚¢ãƒ«ãƒã‚¤ãƒˆæ¥­å‹™ã§ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã™ã‚‹ã«ã‚ãŸã‚Šã€Proxyã‚„DNSãªã©ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å‘¨ã‚Šã§ä¸€ã‹æœˆå¼·ã‚‚æº¶ã‹ã—ã¦ã—ã¾ã£ãŸã®ã§ã€ãã®éç¨‹ã§å­¦ã‚“ã ãƒˆãƒ©ãƒ–ãƒ«ã¨ã®å‘ãåˆã„æ–¹ã«ã¤ã„ã¦ã¾ã¨ã‚ã¾ã™ã€‚</p><h1 id="ãƒˆãƒ©ãƒ–ãƒ«ã®å†…å®¹"><a href="#ãƒˆãƒ©ãƒ–ãƒ«ã®å†…å®¹" class="headerlink" title="ãƒˆãƒ©ãƒ–ãƒ«ã®å†…å®¹"></a>ãƒˆãƒ©ãƒ–ãƒ«ã®å†…å®¹</h1><h2 id="ç’°å¢ƒ"><a href="#ç’°å¢ƒ" class="headerlink" title="ç’°å¢ƒ"></a>ç’°å¢ƒ</h2><ul><li>WSL (Ubuntu 18.04)</li><li>Goè¨€èª(go1.14.2 linux/amd64)</li></ul><p>â€» VPNçµŒç”±ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«æ¥ç¶šã™ã‚‹éš›ã¯ç¤¾å†…ã®èªè¨¼ä»˜ããƒ—ãƒ­ã‚­ã‚·ã‚µãƒ¼ãƒãƒ¼ã‚’çµŒç”±ã™ã‚‹ã€‚<br>  VPNã‚’çµŒç”±ã—ãªã„å ´åˆã¯ã€èªè¨¼ãªã—ã§ãƒ—ãƒ­ã‚­ã‚·ã‚µãƒ¼ãƒãƒ¼ã‚’çµŒç”±ã™ã‚‹</p><h2 id="ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸"><a href="#ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸" class="headerlink" title="ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸"></a>ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</h2><p>Goè¨€èªã§ã¯ã€ãƒ†ã‚¹ãƒˆã‚’èµ°ã‚‰ã›ã‚‹(<code>go test</code>)éš›ã«ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã§importã—ã¦ã„ã‚‹ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒãƒ­ãƒ¼ã‚«ãƒ«ã«å­˜åœ¨ã™ã‚‹ã‹ç¢ºèªã—ã€ãªã„ã‚‚ã®ã«ã¤ã„ã¦ã¯<code>go get</code>(é©åˆ‡ãªãƒ‘ã‚¹ã«<code>git clone</code>ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰)ã—ã¦ã€ãƒ†ã‚¹ãƒˆã®ãŸã‚ã®æº–å‚™ã‚’è‡ªå‹•ã§ã—ã¦ãã‚Œã¾ã™ã€‚</p><p>ä»Šå›ã®ã‚¨ãƒ©ãƒ¼ã¯ã€<code>go test</code>ã®éš›ã«è¡Œã‚ã‚Œã‚‹<code>go get</code>ã®éƒ¨åˆ†ã§ç™ºç”Ÿã—ã¾ã—ãŸã€‚ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ go <span class="built_in">test</span></span><br><span class="line">go: &#123;ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å&#125;: unrecognized import path <span class="string">"&#123;ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å&#125;"</span></span><br><span class="line">(https fetch: Get https://&#123;ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸URL&#125;?go-get=1:</span><br><span class="line">proxyconnect tcp: dial tcp:</span><br><span class="line">lookup http on &#123;DNSã‚µãƒ¼ãƒãƒ¼ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹&#125;:53: server misbehaving)</span><br></pre></td></tr></table></figure><p><strong>ã“ã®äº‹è±¡ã¯ãƒªãƒ¢ãƒ¼ãƒˆç’°å¢ƒã®æ™‚ã®ã¿è¦‹ã‚‰ã‚Œ</strong>ã€ç¾åœ¨ã®å‡ºç¤¾ã§ããªã„çŠ¶æ³(â€»ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã¯2020/05/26æ™‚ç‚¹ã§ã¯åŸå‰‡å‡ºç¤¾NG)ã§ã¯ã“ã‚Œã‚’è§£æ±ºã—ãªã„ã¨é–‹ç™ºã«å–ã‚Šçµ„ã‚ãªã„çŠ¶æ³ã§ã—ãŸã€‚</p><h2 id="ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ã®å®Ÿè¡Œçµæœ"><a href="#ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ã®å®Ÿè¡Œçµæœ" class="headerlink" title="ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ã®å®Ÿè¡Œçµæœ"></a>ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ã®å®Ÿè¡Œçµæœ</h2><p>å…¨ãåŒæ§˜ã®ç’°å¢ƒå¤‰æ•°ã€<code>git config</code>ã€<code>go env</code>ã®è¨­å®šã§ã€ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§å®Ÿè¡Œã—ãŸã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ go <span class="built_in">test</span></span><br><span class="line">go: &#123;ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å&#125;: unrecognized import path <span class="string">"&#123;ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å&#125;"</span></span><br><span class="line">(https fetch: Get https://&#123;ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸URL&#125;?go-get=1:</span><br><span class="line">proxyconnect tcp: dial tcp: 52.206.222.245:443: connectex: </span><br><span class="line">An attempt was made to access a socket <span class="keyword">in</span> a way forbidden by its access permissions.</span><br></pre></td></tr></table></figure><p>ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒç•°ãªã‚‹ã®ã§ã€åˆ¥ç‰©ã®åŸå› ãŒã‚ã‚‹ã®ã‹ã¨æ€ã‚ã‚Œã¾ã—ãŸãŒã€çµæœçš„ã«ã¯åŒã˜åŸå› ã«ã‚ˆã£ã¦ç™ºç”Ÿã—ã¦ã‚‹ã“ã¨ãŒ<a href="#å°è©±wslã¨ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒç•°ãªã£ãŸç†ç”±">å¾Œè¿°ã®å†…å®¹</a>ã§åˆ†ã‹ã‚Šã¾ã™ã€‚</p><h1 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h1><p>ãƒ—ãƒ­ã‚­ã‚·ã®èªè¨¼ç”¨ã«è¨­å®šã—ã¦ã„ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼åã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã«URLã§ä½¿ç”¨ä¸å¯ã¨ã•ã‚Œã‚‹ï¼ˆä½¿ã†éš›ã«URLã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã‚’å¿…è¦ã¨ã™ã‚‹ï¼‰è¨˜å·ãŒå«ã¾ã‚Œã¦ã„ã¦ã€<code>go get</code>ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œæ™‚ã«ãƒ—ãƒ­ã‚­ã‚·ã‚µãƒ¼ãƒã®URLã®ãƒ‘ãƒ¼ã‚¹ã«å¤±æ•—ã—ã¦ã„ãŸã€‚</p><h1 id="è§£æ±ºã«å‘ã‘ã¦è¡Œã£ãŸã“ã¨"><a href="#è§£æ±ºã«å‘ã‘ã¦è¡Œã£ãŸã“ã¨" class="headerlink" title="è§£æ±ºã«å‘ã‘ã¦è¡Œã£ãŸã“ã¨"></a>è§£æ±ºã«å‘ã‘ã¦è¡Œã£ãŸã“ã¨</h1><h2 id="0-åŸå› ã®åˆ‡ã‚Šåˆ†ã‘ã¨ä»®èª¬æ¤œè¨¼"><a href="#0-åŸå› ã®åˆ‡ã‚Šåˆ†ã‘ã¨ä»®èª¬æ¤œè¨¼" class="headerlink" title="0:åŸå› ã®åˆ‡ã‚Šåˆ†ã‘ã¨ä»®èª¬æ¤œè¨¼"></a>0:åŸå› ã®åˆ‡ã‚Šåˆ†ã‘ã¨ä»®èª¬æ¤œè¨¼</h2><p>ã“ã®éƒ¨åˆ†ãŒæœ€ã‚‚è‡ªåˆ†ãŒå‹‰å¼·ã«ãªã£ãŸéƒ¨åˆ†ã§ã€ä»–ã®ã‚±ãƒ¼ã‚¹ã§ã‚‚å‚è€ƒã«ãªã‚‹éƒ¨åˆ†ã ã¨æ€ã„ã¾ã™ã€‚<br><a href="https://qiita.com/keigodasu/items/a9af6512bf0ae942ca9f" target="_blank" rel="noopener">ã“ã¡ã‚‰ã®è¨˜äº‹</a>ã‚‚å‚è€ƒã«ã•ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚</p><p>å•é¡ŒãŒç™ºç”Ÿã—ãŸã¨ãã«ã€ã¨ã‚‹ã¹ãæ‰‹é †ã¨ã—ã¦ã€</p><pre><code>1. ãƒˆãƒ©ãƒ–ãƒ«ã®å†…å®¹ã‚„èµ·ã“ã£ãŸçŠ¶æ³ã‚’æ˜ç¢ºã«ã™ã‚‹2. åŸå› ã¨ãªã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹åˆ†é‡ã®åˆ‡ã‚Šåˆ†ã‘ã‚’è¡Œã†3. åˆ‡ã‚Šåˆ†ã‘ãŸå†…å®¹ã‹ã‚‰ã‚¨ãƒ©ãƒ¼ã®åŸå› ã«ã¤ã„ã¦ã®æ¨æ¸¬/ä»®èª¬ã‚’ç«‹ã¦ã‚‹4. ä»®èª¬ã‚’æ¤œè¨¼ã™ã‚‹5. æ¤œè¨¼çµæœã‹ã‚‰ã€æ–°ãŸãªä»®èª¬ã«æ´¾ç”Ÿã™ã‚‹å ´åˆã¯ãã‚Œã‚’ã‚¨ãƒ©ãƒ¼åŸå› ã®å€™è£œã«å…¥ã‚Œã‚‹6. è§£æ±ºã—ã¦ã„ãªã„å ´åˆã¯ã€è¿½åŠ ã®æƒ…å ±ã‚’ã‚‚ã¨ã« 2. ã‹ã‚‰è¦‹ç›´ã™</code></pre><p>ã¨ã„ã†ã‚ˆã†ã«è¡¨ç¾ã§ãã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚</p><p>ä»Šå›è¡Œã£ãŸä»®èª¬ã®ä¾‹ã¨ã—ã¦ã¯</p><blockquote><p>ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã‚ã‚‹ãƒãƒ¼ãƒˆç•ªå·ãŒ53ãªã®ã§ã€DNSã§ã¤ã¾ãšã„ã¦ã‚‹ã¨ä»®å®šã—ã¦<code>/etc/resolv.conf</code>ã‚’ã„ã˜ã£ã¦ã¿ã‚‹ã€‚<br>(<code>nameserver 8.8.8.8</code>ã®è¿½è¨˜ãªã©)</p></blockquote><p>ãªã©ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ã¾ãŸã€ã“ã®éç¨‹ã§è©¦ã—ãŸã“ã¨ã«ã¤ã„ã¦ã®ãƒ­ã‚°ï¼ˆä»®èª¬ã®å†…å®¹ã€æ¤œè¨¼ã®æº–å‚™ã®ãŸã‚ã®ç’°å¢ƒå¤‰æ•°ã®è¨­å®šã€æ¤œè¨¼çµæœãªã©ï¼‰ã‚’è¨˜éŒ²ã—ã¦ã„ãã“ã¨ãŒã¨ã¦ã‚‚å¤§åˆ‡ã§ã™ã€‚ãƒ­ã‚°ã«ã‚ã‚‹éå»ã®æ¤œè¨¼çµæœã¨ç…§ã‚‰ã—åˆã‚ã›ã¦ã€åŸå› ã¨ãªã‚Šã†ã‚‹å€™è£œã‚’çµã‚ŒãŸã‚Šã€éå»ã«è©¦ã—ãŸã“ã¨ã‚’å†åº¦è¡Œã†ã‚ˆã†ãªç„¡é§„ã‚’çœãã“ã¨ãŒã§ãã€ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒˆã«æ™‚é–“ã‚’ã‹ã‘ã‚Œã°ã‹ã‘ã‚‹ã»ã©è§£æ±ºã«è¿‘ã¥ã„ã¦ã„ãã¾ã™ã€‚</p><h2 id="1-ç’°å¢ƒè¨­å®š"><a href="#1-ç’°å¢ƒè¨­å®š" class="headerlink" title="1: ç’°å¢ƒè¨­å®š"></a>1: ç’°å¢ƒè¨­å®š</h2><p><code>go get</code>ã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã„ã‚‹ã“ã¨ã‹ã‚‰ã€<code>go get</code>ã®æŒ™å‹•ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹ã‚ˆã†ãªç’°å¢ƒè¨­å®šã‚’åˆ—æŒ™ã—ã¦ã¿ã¾ã—ãŸã€‚</p><ul><li>ç’°å¢ƒå¤‰æ•°</li><li><code>git config</code></li><li><code>go env</code></li></ul><p>åŒã˜ãä¼šç¤¾æ”¯çµ¦ã®ãƒã‚·ãƒ³ã‚’ä½¿ã£ã¦ã„ã¦ã€WSLç’°å¢ƒã€Windows DOSç’°å¢ƒã§åŒæ§˜ã®ãƒ†ã‚¹ãƒˆã‚’æˆåŠŸã—ã¦ã„ã‚‹æ–¹ã€…ã«ã”å”åŠ›ã„ãŸã ãã€ã™ã¹ã¦ã®ç’°å¢ƒè¨­å®šã‚’åæ˜ ã•ã›ã¦ã¿ã¾ã—ãŸã€‚</p><p>ã“ã®æ¤œè¨¼ã‹ã‚‰åˆ†ã‹ã£ãŸã“ã¨ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚</p><ul><li><code>ping</code>, <code>dig</code>, <code>nslookup</code> ãªã©ã§ã®<code>go get</code>ã®ç›®çš„ã®åå‰è§£æ±ºã¯æˆåŠŸã—ã¦ã„ã‚‹</li><li><code>go get</code>å®Ÿè¡Œæ™‚ã«ã¯DNSã‚µãƒ¼ãƒãƒ¼ã®misbehavingã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ï¼ˆå…ˆè¿°ã®ã‚¨ãƒ©ãƒ¼ã¨å¤‰åŒ–ãªã—ï¼‰</li><li>åˆ¥ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§<code>go get</code>ã‚’å®Ÿè¡Œã™ã‚‹ã¨<ul><li><code>github.com/...</code>ã§å§‹ã¾ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯å•é¡Œãªãçµ‚äº†</li><li>ä¸Šè¨˜ä»¥å¤–ï¼ˆ<code>golang.org/...</code>ãªã©ï¼‰ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ä¸Šè¨˜ã®ã‚¨ãƒ©ãƒ¼</li></ul></li></ul><p><code>dig</code>ã§åå‰è§£æ±ºãŒæˆåŠŸã—ã¦ã„ã‚‹ã«ã‚‚ã‹ã‹ã‚ã‚‰ãšã€<code>go get</code>ã§ã¯DNSã‚µãƒ¼ãƒãƒ¼ã§ã®ã‚¨ãƒ©ãƒ¼ãŒå¼•ãç¶šãå‡ºã¦ã„ã‚‹ã“ã¨ã‹ã‚‰ã€ã‚ˆã‚Šä½ã„ãƒ¬ã‚¤ãƒ¤ã§ä½•ãŒèµ·ãã¦ã„ã‚‹ã®ã‹ã‚’çŸ¥ã‚‹ãŸã‚ã«<code>Wireshark</code>ã§ãƒ‘ã‚±ãƒƒãƒˆè§£æã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚</p><h2 id="2-Wireshark"><a href="#2-Wireshark" class="headerlink" title="2: Wireshark"></a>2: Wireshark</h2><p>Wiresharkã¨ã¯ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã§ã‚„ã‚Šå–ã‚Šã™ã‚‹ãƒ‘ã‚±ãƒƒãƒˆã‚’è§£æã™ã‚‹ã“ã¨ãŒã§ãã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚<br>Wiresharkã§ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ãªãŒã‚‰<code>go test</code>ã‚’èµ°ã‚‰ã›ã€ã¾ãšã¯è‡ªåˆ†ã®ãƒã‚·ãƒ³ã‹ã‚‰ã©ã“ã¾ã§ã®é€šä¿¡ãŒå±Šã„ã¦ã„ã‚‹ã®ã‹ã‚’ç¢ºèªã—ã€ä»¥ä¸‹ã®ã‚ˆã†ãªç°¡å˜ãªå›³ã«ã¾ã¨ã‚ã¾ã—ãŸï¼ˆIPã‚¢ãƒ‰ãƒ¬ã‚¹ãªã©ã¯ä¸€ä¾‹ã§ã™ï¼‰ã€‚</p><img src="/images/20200526/photo_20200526_01.png"><p>ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã—ãŸã€‚</p><ul><li>DNSã®åå‰è§£æ±ºã®æ™‚ç‚¹ã§æ»ã£ã¦ã„ã‚‹</li><li><code>http</code>ã¨ã„ã†ãƒ‰ãƒ¡ã‚¤ãƒ³åã‚’DNSã‚µãƒ¼ãƒãƒ¼ã«æ¢ã—ã¦ã„ãŸã€‚ï¼ˆãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ä¸æ­£ï¼‰</li><li>ãã®ã‚ˆã†ãªãƒ‰ãƒ¡ã‚¤ãƒ³åã¯å­˜åœ¨ã—ãªã„ãŸã‚ã€åå‰è§£æ±ºã«å¤±æ•—ã—ã¦ã„ãŸã€‚</li></ul><p>å…ˆè¿°ã®<a href="#ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸">ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</a>ã‚’æŒ¯ã‚Šè¿”ã£ã¦è¦‹ã‚‹ã¨ã€</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lookup http on &#123;DNSã‚µãƒ¼ãƒãƒ¼ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹&#125;:53: server misbehaving)</span><br></pre></td></tr></table></figure><p>ã¨ã‚ã‚Šã¾ã™ãŒã€ã“ã‚Œã¯æ–‡å­—é€šã‚Š<code>http</code>ã¨ã„ã†ãƒ‰ãƒ¡ã‚¤ãƒ³åã‚’åå‰è§£æ±ºã—ã‚ˆã†ã¨ã—ã¦ã„ã¦ã€DNSã«å­˜åœ¨ã—ãªã„ãƒ‰ãƒ¡ã‚¤ãƒ³åã‚’åå‰è§£æ±ºã§ããšã«ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã—ã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ãŒå¾Œã‹ã‚‰åˆ†ã‹ã‚Šã¾ã—ãŸã€‚</p><p>ã¾ã•ã‹<code>http</code>ã¨ã„ã†æ–‡å­—åˆ—ã‚’è¦‹ã¦ã€ãã‚Œã‚’ï¼ˆãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã¯ãªãï¼‰ãƒ‰ãƒ¡ã‚¤ãƒ³åã ã¨ã¯æ€ã‚ãªã‹ã£ãŸã®ã§ã€Wiresharkã§ã‚„ã£ã¨ã‚¨ãƒ©ãƒ¼ã®å†…å®¹ã‚’æ­£ç¢ºã«æŠŠæ¡ã§ãã¾ã—ãŸã€‚</p><h3 id="ï¼ˆå°è©±ï¼‰WSLã¨ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒç•°ãªã£ãŸç†ç”±"><a href="#ï¼ˆå°è©±ï¼‰WSLã¨ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒç•°ãªã£ãŸç†ç”±" class="headerlink" title="ï¼ˆå°è©±ï¼‰WSLã¨ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒç•°ãªã£ãŸç†ç”±"></a>ï¼ˆå°è©±ï¼‰WSLã¨ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒç•°ãªã£ãŸç†ç”±</h3><p>ã¡ãªã¿ã«ã§ã™ãŒã€WSLãªã©linuxç’°å¢ƒã§ã¯ã€ãƒ‰ãƒ¡ã‚¤ãƒ³åã‚’æ¢ã—ã«è¡Œãã¨ãã«ã€DNSã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚ã‚‹<code>/etc/resolv.conf</code>å†…ã«<code>search</code>ã®è¨˜è¿°ãŒã‚ã‚Œã°ã€ãã‚Œã‚’ã‚µãƒ•ã‚£ãƒƒã‚¯ã‚¹ã¨ã—ã¦æ¢ã—ãŸã„ãƒ‰ãƒ¡ã‚¤ãƒ³åã®å¾Œã«ãã£ã¤ã‘ãŸãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ‰ãƒ¡ã‚¤ãƒ³åã®åå‰è§£æ±ºã‚‚è©¦ã—ã¦ãã‚Œã¾ã™ã€‚<a href="http://man7.org/linux/man-pages/man5/resolv.conf.5.html" target="_blank" rel="noopener">å‚è€ƒ</a></p><p>Windows DOSã®æ–¹ã®ç’°å¢ƒã§ã¯ãã‚Œã¨åŒæ§˜ã®è¨­å®šã¯ã„ã˜ã£ã¦ã„ãªã‹ã£ãŸã®ã§ã™ãŒã€ã©ã†ã‚„ã‚‰ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§<code>.co.jp</code>ã¨ã„ã†ã‚µãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’ã¤ã‘ã¦æ¢ã—ã¦ãã‚Œã¦ã„ãŸã®ã§ã€ãŸã¾ãŸã¾ãã®ãƒ‰ãƒ¡ã‚¤ãƒ³åã§ã‚ã‚‹<a href="https://http.co.jp/" target="_blank" rel="noopener">http.co.jp</a>ãŒå®Ÿåœ¨ã—ã€åå‰è§£æ±ºã«æˆåŠŸã—ã¦ã„ã¾ã—ãŸã€‚ãƒ‰ãƒ¡ã‚¤ãƒ³åã®ãƒãƒ¼ãƒŸãƒ³ã‚°ã‚»ãƒ³ã‚¹ãŒè‰¯ãã¦æ„Ÿå‹•ã—ã¾ã—ãŸã€‚</p><p>çµæœã¨ã—ã¦ã€ãƒ›ã‚¹ãƒˆã§ã‚ã‚‹<code>http.co.jp</code>ãŒè¨±å¯ã—ã¦ã„ãªã„ãƒãƒ¼ãƒˆã¸ã®æ¥ç¶šã‚’è©¦ã¿ã‚ˆã†ã¨ã—ã¦ã—ã¾ã„ã€ãã®ã‚¨ãƒ©ãƒ¼ãŒå¸°ã£ã¦ãã¦ã„ã¾ã—ãŸã€‚<br>ãã‚ŒãŒWSLç’°å¢ƒã¨ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒç•°ãªã‚‹ç†ç”±ã§ã—ãŸã€‚</p><h2 id="3-URLã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰"><a href="#3-URLã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰" class="headerlink" title="3: URLã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰"></a>3: URLã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰</h2><p>ã‚ã‚‹æ—¥ã€ã“ã®ãƒˆãƒ©ãƒ–ãƒ«ãŒç™ºç”Ÿã™ã‚‹ã‚ˆã‚Šä»¥å‰ã«ã€ãƒãƒ¼ãƒˆç•ªå·ãŒä¸æ­£ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ã‚’è¦‹ãŸã“ã¨ã‚’ãµã¨æ€ã„å‡ºã—ã¾ã—ãŸã€‚ãã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…ãƒãƒ¼ãƒˆç•ªå·ã¯ã€æ•°å­—ã§ã¯ãªãè‡ªåˆ†ã®èªè¨¼ä»˜ããƒ—ãƒ­ã‚­ã‚·ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ã—ãŸã€‚<br>èªè¨¼ä»˜ããƒ—ãƒ­ã‚­ã‚·ã®è¨­å®šã‚’ã¿ã¦ã¿ã‚‹ã¨ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚‚ãƒãƒ¼ãƒˆç•ªå·ã‚‚ã€<code>:</code>ä»¥é™ã«ä½ç½®ã—ã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> HTTP_PROXY=http://<span class="variable">$&#123;user&#125;</span>:<span class="variable">$&#123;pass&#125;</span>@proxy.example.com:<span class="variable">$&#123;port&#125;</span>/</span><br></pre></td></tr></table></figure><p>ã“ã®ã“ã¨ã‹ã‚‰ã€ãƒ—ãƒ­ã‚­ã‚·è¨­å®šã®ãƒ‘ãƒ¼ã‚¹å‡¦ç†ã§æ‰‹ã“ãšã£ã¦ã„ã‚‹ã®ã§ã¯ã¨ã„ã†ä»®èª¬ã‚’ç«‹ã¦ã¾ã—ãŸã€‚</p><p>ãƒ—ãƒ­ã‚­ã‚·è¨­å®šã¯URLãªã®ã§ã€ãƒ‘ãƒ¼ã‚¹å‡¦ç†ã§å•é¡ŒãŒç™ºç”Ÿã™ã‚‹ã¨ã™ã‚Œã°URLã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’ã™ã‚Œã°è‰¯ã„ã®ã§ã¯ã¨ã„ã†ã®ã¯å¦¥å½“ãªæ€è€ƒã‹ã¨æ€ã„ã¾ã™ã€‚å®Ÿéš›ã€è‡ªåˆ†ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã«ã¯URLã«ä½¿ç”¨ä¸å¯ã¨ã•ã‚Œã‚‹ã‚ˆã†ãªè¨˜å·ã‚’å«ã‚“ã§ã„ãŸãŸã‚ã€ãã‚Œã‚’ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ã¦ã‚ã’ãŸè¨­å®šã‚’ç’°å¢ƒå¤‰æ•°ã«å†è¨­å®šã—ã€<code>go get</code>ãŒé€šã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚</p><h2 id="4-ãã®ä»–ã®å¯„ã‚Šé“"><a href="#4-ãã®ä»–ã®å¯„ã‚Šé“" class="headerlink" title="4. ãã®ä»–ã®å¯„ã‚Šé“"></a>4. ãã®ä»–ã®å¯„ã‚Šé“</h2><p>è§£æ±ºã¾ã§ã®é“ã®ã‚Šã‚’ç°¡æ½”ã«è¿°ã¹ã‚‹ãŸã‚ã«ã€è§£æ±ºã«ç¹‹ãŒã‚‹ã“ã¨ã®ãªã‹ã£ãŸæ§˜ã€…ãªãƒˆãƒ©ã‚¤ã‚¢ãƒ³ãƒ‰ã‚¨ãƒ©ãƒ¼ã‚’ç«¯æŠ˜ã‚Šã¾ã—ãŸã€‚ã—ã‹ã—ã€å†’é ­ã«ï¼‘ã‹æœˆã¨è¿°ã¹ãŸé€šã‚Šã€ãã®æœŸé–“ã®è©¦è¡ŒéŒ¯èª¤ã®ä¸­ã«ã¯ã†ã¾ãã„ã‹ãªã„ã€ã‚‚ã—ãã¯çµæœçš„ã«æ„å‘³ã‚’ãªã•ãªã‹ã£ãŸã‚‚ã®ã‚‚ã‚ã‚Šã¾ã—ãŸã€‚</p><p>æ³¥è‡­ã„å¤±æ•—ã®éƒ¨åˆ†ã‚‚æ®‹ã—ã¦ãŠããŸã„ã®ã§ã€ä¸Šè¨˜ä»¥å¤–ã«ã©ã®ã‚ˆã†ãªã“ã¨ã‚’è©¦ã—ãŸã‹ã‚’ä»¥ä¸‹ã«æ®‹ã—ã¾ã™ã€‚</p><ul><li>DNSã‚’<code>8.8.8.8</code>ã«å¤‰æ›´</li><li><code>go env -w GO111MODULE-off</code></li><li>åˆ¥ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã®ç›®çš„ã®<code>go get</code>ã®å®Ÿè¡Œ</li><li><code>git config</code>ã®<code>http.proxy</code>ãªã©ã®ç·¨é›†</li><li>GitHubã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«åˆ‡ã‚Šæ›¿ãˆï¼ˆhttp &lt;-&gt; sshï¼‰</li><li>â€¦etc</li></ul><h1 id="æŒ¯ã‚Šè¿”ã‚Š"><a href="#æŒ¯ã‚Šè¿”ã‚Š" class="headerlink" title="æŒ¯ã‚Šè¿”ã‚Š"></a>æŒ¯ã‚Šè¿”ã‚Š</h1><p>æŒ¯ã‚Šè¿”ã£ã¦ã¿ã‚‹ã¨ã€ä»Šã¾ã§é›†ã‚ãŸæƒ…å ±ã§ã“ã“ã«ãŸã©ã‚Šç€ã‘ã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹ãƒ’ãƒ³ãƒˆã¨ã—ã¦ä»¥ä¸‹ã®3ã¤ãŒã‚ã‚Šã¾ã™ã€‚</p><blockquote><p>ãƒªãƒ¢ãƒ¼ãƒˆã§ã—ã‹ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãªã„</p></blockquote><p>å‡ºç¤¾æ™‚ã¯èªè¨¼ãªã—ã®ãƒ—ãƒ­ã‚­ã‚·ã€ãƒªãƒ¢ãƒ¼ãƒˆæ™‚ã¯èªè¨¼ä»˜ãã®ãƒ—ãƒ­ã‚­ã‚·ã§ã‚ã‚‹ã“ã¨ã‹ã‚‰ã€èªè¨¼ã®éƒ¨åˆ†ã«å•é¡ŒãŒã‚ã‚‹å¯èƒ½æ€§ã¯å¤§ã„ã«ã‚ã‚‹</p><blockquote><p><a href="#1-ç’°å¢ƒè¨­å®š">1: ç’°å¢ƒè¨­å®š</a>ã§è‡ªåˆ†ä»¥å¤–ã¯<code>go test</code>ã‚’æˆåŠŸã•ã›ã¦ã„ãŸ</p></blockquote><ul><li><code>go test</code>ï¼ˆãŠã‚ˆã³<code>go get</code>ï¼‰ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹ã‚ˆã†ãªç’°å¢ƒè¨­å®šã¯ã€åˆ—æŒ™ã•ã‚ŒãŸï¼“ã¤ã—ã‹ãªã„ã¨ä»®å®šã™ã‚‹ã¨</li><li><code>go test</code> ã«æˆåŠŸã—ã¦ã„ãŸæ–¹ã€…ã®ç’°å¢ƒè¨­å®šã‚’å¿ å®Ÿã«å†ç¾ã—ã¦ã‚‚è§£æ±ºã—ãªã‹ã£ãŸã€‚</li><li>ç’°å¢ƒè¨­å®šã§ã¾ã å€‹äººå·®ãŒå‡ºã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã¨ã™ã‚Œã°ã€å€‹äººã«ç´ã¥ã‘ã‚‰ã‚ŒãŸã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«</li></ul><blockquote><ul><li><code>github.com/...</code>ã§å§‹ã¾ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯å•é¡Œãªãçµ‚äº†</li></ul></blockquote><ul><li>ã“ã‚Œã‚‰ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ãƒ­ãƒ¼ã‚«ãƒ«PCã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¦ã„ãŸå¯èƒ½æ€§</li><li>ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æ¶ˆã™ã‹ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’åˆ©ç”¨ã—ãªã„è¨­å®šã«ã™ã‚Œã°ã‚‚ã£ã¨æ—©ãåŸå› ãŒã‚ã‹ã£ãŸï¼Ÿ</li></ul><p>çµæœè«–ã«ã¯ãªã‚Šã¾ã™ãŒã€ã‚‚ã†å°‘ã—ä»®èª¬ã‚’è€ƒãˆæŠœã„ã¦ã„ãŸã‚‰ã€ã‚‚ã£ã¨æ—©ãè§£æ±ºã§ããŸã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><p>åŸå› ã®åˆ‡ã‚Šåˆ†ã‘ã‚„ã€ä»®èª¬/æ¨æ¸¬ã‚’è€ƒãˆã‚‹ã‚ˆã†ãª <strong><em>æ‰‹ã‚’å‹•ã‹ã•ãªã„æ™‚é–“</em></strong> ã«ã‚ˆã£ã¦ã€ãã‚Œã ã‘Wiresharkã§ãƒ‘ã‚±ãƒƒãƒˆè§£æã‚’ã—ãŸã‚Šã™ã‚‹ã‚ˆã†ãªæ™‚é–“ã‚’å‰Šæ¸›ã™ã‚‹ã“ã¨ãŒã§ããŸã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚</p><h1 id="å­¦ã‚“ã ã“ã¨"><a href="#å­¦ã‚“ã ã“ã¨" class="headerlink" title="å­¦ã‚“ã ã“ã¨"></a>å­¦ã‚“ã ã“ã¨</h1><h2 id="0-åŸå› ã®åˆ‡ã‚Šåˆ†ã‘ã¨ä»®èª¬æ¤œè¨¼ã«ã¤ã„ã¦"><a href="#0-åŸå› ã®åˆ‡ã‚Šåˆ†ã‘ã¨ä»®èª¬æ¤œè¨¼ã«ã¤ã„ã¦" class="headerlink" title="0:åŸå› ã®åˆ‡ã‚Šåˆ†ã‘ã¨ä»®èª¬æ¤œè¨¼ã«ã¤ã„ã¦"></a><a href="#0åŸå› ã®åˆ‡ã‚Šåˆ†ã‘ã¨ä»®èª¬æ¤œè¨¼">0:åŸå› ã®åˆ‡ã‚Šåˆ†ã‘ã¨ä»®èª¬æ¤œè¨¼</a>ã«ã¤ã„ã¦</h2><p>ç§ã¯ã€æœ€åˆã¯ãƒ­ã‚°ã‚’ã¨ã‚‰ãšè©¦è¡ŒéŒ¯èª¤ã®ã¿ã‚’ï¼ˆï¼‘ã‹æœˆã®åŠåˆ†ç¨‹åº¦ï¼‰ã—ã¦ã„ãŸã®ã§ã€ä»¥å‰ã«ã‚‚è©¦ã—ãŸã“ã¨ã‚’å†åº¦è©¦ã™ãªã©ç„¡é§„ãŒéå¸¸ã«å¤šã‹ã£ãŸã§ã™ã€‚è‡ªåˆ†ã¯æ°¸é ã«ã“ã®ãƒˆãƒ©ãƒ–ãƒ«ã¨æˆ¦ã‚ãªãã‚ƒã„ã‘ãªã„ã®ã§ã¯ãªã„ã‹ã¨æ„Ÿã˜ã‚‹ã»ã©é€²æ­©ã‚’æ„Ÿã˜ã¾ã›ã‚“ã§ã—ãŸã€‚</p><p>æ‰‹ã‚’å‹•ã‹ã™å‰ã«çŠ¶æ³æ•´ç†ã—ã€Educated Guess(çŸ¥è­˜ã‚„çµŒé¨“ã«åŸºã¥ã„ãŸæ¨æ¸¬)ã‚’ã—ã¦ã„ãã“ã¨ã‚„ã€ãƒ­ã‚°ã‚’ã¨ã£ã¦éå»ã®æ¤œè¨¼çµæœã¨ç¾åœ¨ã®çµæœã‚’ç…§ã‚‰ã—åˆã‚ã›ã¦æƒ…å ±ã‚’é›†ã‚ã¦ã„ãã“ã¨ã¯ã€æš—é—‡ã®ä¸­ã‚’æ­©ãã‚ˆã†ãªãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’ã€éšæ®µã‚’ä¸Šã‚‹ã‚ˆã†ã«ä¸€æ­©ãšã¤ç¢ºå®Ÿã«é€²ã‚“ã§ã„ãã‚‚ã®ã«å¤‰ãˆã¦ãã‚Œã‚‹ã¨æ€ã„ã¾ã—ãŸã€‚</p><p>åŸå› ã®å€™è£œã¨ãªã‚Šãˆã‚‹è¦ç´ ãŒæœ‰é™ã§ã‚ã‚‹ã¨ã„ã†æ¥µã‚ã¦ç¾å®Ÿçš„ãªä»®å®šã®ä¸‹ã§ã¯ã€ãã®ã‚ˆã†ãªå§¿å‹¢ã§å–ã‚Šçµ„ã‚€ã“ã¨ã¯ã€ã©ã‚“ãªã«å¯èƒ½æ€§ã®è–„ã„æ¨æ¸¬ã®æ¤œè¨¼ã‚’ã—ç¶šã‘ã¦ã„ã¦ã‚‚ã€ã„ã¤ã‹å¿…ãšè§£æ±ºã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã¨ã„ã†ã“ã¨ã«ãªã‚Šã¾ã™ã€‚</p><h2 id="ãã®ä»–ã®ä»®èª¬æ¤œè¨¼ã«ã¤ã„ã¦"><a href="#ãã®ä»–ã®ä»®èª¬æ¤œè¨¼ã«ã¤ã„ã¦" class="headerlink" title="ãã®ä»–ã®ä»®èª¬æ¤œè¨¼ã«ã¤ã„ã¦"></a>ãã®ä»–ã®ä»®èª¬æ¤œè¨¼ã«ã¤ã„ã¦</h2><p>ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã§ã¯ã€æ§˜ã€…ãªã“ã¨ã‚’å­¦ã¶ã“ã¨ãŒã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚ä»Šå›ã®çµŒé¨“ã‹ã‚‰ã€ãƒ—ãƒ­ã‚­ã‚·ã‚„DNSãªã©ã«ã¤ã„ã¦è‡ªåˆ†ã®çŸ¥è­˜ã‚’æ·±ã‚ã‚‰ã‚ŒãŸã¨æ€ã„ã¾ã™ã€‚ã¾ãŸã€ãƒ‘ã‚±ãƒƒãƒˆã®è§£æã‚’ã™ã‚‹æ–¹æ³•ãªã©ã‚‚å­¦ã¶ã“ã¨ãŒã§ãã¾ã—ãŸã€‚</p><h1 id="ãŠã‚ã‚Šã«"><a href="#ãŠã‚ã‚Šã«" class="headerlink" title="ãŠã‚ã‚Šã«"></a>ãŠã‚ã‚Šã«</h1><p>çµŒé¨“è±Šå¯Œã§ã‚ã‚Œã°ã€ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒˆã«æ•°ã‹æœˆã¨ã„ã£ãŸå˜ä½ã§æ¶ˆè€—ã™ã‚‹ã“ã¨ã¯ãªã„ã‹ã¨æ€ã„ã¾ã™ãŒã€æ–°ç±³ã®è‡ªåˆ†ã§ã‚‚ä»Šå›ã®ã‚ˆã†ãªãƒˆãƒ©ãƒ–ãƒ«ã¨æ­£ã—ãå‘ãåˆã†çµŒé¨“ã‚’ç©ã‚“ã§ã„ãã“ã¨ã§ã€ãã®å ´ã—ã®ãã§ã‚¢ãƒ‰ãƒ›ãƒƒã‚¯ãªã‚‚ã®ã§ãªã„ã€å­¦ã³ã‚„çµŒé¨“ã«çµã³ä»˜ãæœ‰æ„ç¾©ãªãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã¨æ„Ÿã˜ã¾ã—ãŸã€‚</p><p>ä»Šå¾Œãƒˆãƒ©ãƒ–ãƒ«ã«ç›´é¢ã—ãŸæ™‚ã‚‚ã€æ‰‹ã‚’å‹•ã‹ã—ãŸã„æ°—æŒã¡ã‚’ä¸€æ—¦æŠ‘ãˆã¦ã€ã¾ãšã¯çŠ¶æ³ã‚’æ˜ç¢ºã«ã—ã¦ä»®èª¬ã‚’ãŸã¦åŸå› ã‚’åˆ‡ã‚Šåˆ†ã‘ã¦ã„ãã¨ã“ã‚ã‹ã‚‰å§‹ã‚ã¦ç¿’æ…£ã¥ã‘ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚</p><p>é•·æ–‡ã«ãªã‚Šã¾ã—ãŸãŒã€èª­ã‚“ã§ãã ã•ã£ãŸæ–¹ãŒåˆå¿ƒã‚’æ€ã„å‡ºã›ã‚‹ã€ã¾ãŸè‡ªåˆ†ã¨åŒã˜ã‚ˆã†ãªæ–°äººã®æ–¹ã«ã¨ã£ã¦ã¯å®Ÿã‚Šã®ã‚ã‚‹ã‚‚ã®ã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚</p><p>èª­ã‚“ã§ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ã¾ãˆãŒã&quot;&gt;&lt;a href=&quot;#ã¾ãˆãŒã&quot; class=&quot;headerlink&quot; title=&quot;ã¾ãˆãŒã&quot;&gt;&lt;/a&gt;ã¾ãˆãŒã&lt;/h1&gt;&lt;p&gt;ã¯ã˜ã‚ã¾ã—ã¦ã€‚TIG DXãƒãƒ¼ãƒ ã«ã‚¢ãƒ«ãƒã‚¤ãƒˆã¨ã—ã¦å‚åŠ ã•ã›ã¦ã„ãŸã ã„ã¦ã„ã‚‹æœ¬ç”°ç›´æ¨¹ã¨ç”³ã—ã¾ã™ã€‚&lt;br&gt;æ˜¨å¹´12æœˆã«AtCod
      
    
    </summary>
    
      <category term="Infrastructure" scheme="https://future-architect.github.io/categories/Infrastructure/"/>
    
    
      <category term="Network" scheme="https://future-architect.github.io/tags/Network/"/>
    
      <category term="Troubleshooting" scheme="https://future-architect.github.io/tags/Troubleshooting/"/>
    
  </entry>
  
  <entry>
    <title>Go Tips é€£è¼‰7:ã€golngci-lintã€‘lint issueã‚’æ–°ãŸã«ä½œã‚Šå‡ºã•ãªã„ãŸã‚ã®Tips</title>
    <link href="https://future-architect.github.io/articles/20200525/"/>
    <id>https://future-architect.github.io/articles/20200525/</id>
    <published>2020-05-25T00:30:35.000Z</published>
    <updated>2020-05-25T01:00:44.577Z</updated>
    
    <content type="html"><![CDATA[<img src="/images/20200525/photo_20200525_01.png"><p><a href="/tags/GoTips%E9%80%A3%E8%BC%89/">Go Tipsé€£è¼‰</a>ã®ç¬¬6å¼¾ã§ã™ã€‚</p><p>Gopherã®ä½è—¤ã§ã™ã€‚ä»Šå›ã¯<code>golangci-lint</code>ã®è»½ã‚ã®GoTipsãƒã‚¿ã‚’å–ã‚Šä¸Šã’ã¾ã™ã€‚</p><p>Goã®ã‚³ãƒ¼ãƒ‰å“è³ªã®ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã‚’ä¸Šã’ã‚‹ç›®çš„ã§<a href="https://golangci-lint.run/" target="_blank" rel="noopener">golngci-lint</a>ã¨ã„ã†lintã‚¢ã‚°ãƒªã‚²ãƒ¼ã‚¿ãƒ¼ã‚’åˆ©ç”¨ã•ã‚Œã¦ã„ã‚‹ã‹ãŸã‚‚å¤šã„ã‹ã¨æ€ã„ã¾ã™ã€‚</p><p>ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ãŒlint issue(Linterã«ã‚ˆã‚Šæ¤œå‡ºã•ã‚ŒãŸå•é¡Œ)ãŒãªã„ã‚¯ãƒªãƒ¼ãƒ³ãªçŠ¶æ…‹ã«ä¿ãŸã‚Œã¦ã„ã‚‹ã“ã¨ãŒæœ›ã¾ã—ã„ã®ã§ã™ãŒã€å¿…ãšã—ã‚‚ãã†ã„ã£ãŸçŠ¶æ…‹ã‚’ç¶­æŒã§ãã‚‹ã¨ã¯ã‹ãã‚Šã¾ã›ã‚“ã€‚</p><p>ä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ãªå ´åˆã€ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã«lint issueãŒå¤§é‡ã«å­˜åœ¨ã—ã¦ã„ã‚‹çŠ¶æ…‹ã§ã€<code>golngci-lint</code>ã‚’åˆ©ç”¨ã—ã¦ã„ã‹ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚</p><ul><li>æ—¢ã«ã‚ã‚‹ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã«golngci-lintã‚’æ–°ãŸã«é©ç”¨ã—ã‚ˆã†ã¨ã—ãŸå ´åˆ</li><li>ä½•ã‚‰ã‹ã®ç†ç”±ã§baseãƒ–ãƒ©ãƒ³ãƒ(develop, master etcâ€¦)ã«lint issueãŒå¤§é‡ã«æ··å…¥ã—ã¦ã—ã¾ã£ãŸå ´åˆ</li></ul><p>ã“ã®ã‚ˆã†ãªå ´åˆã€ã„ã£ãŸã‚“baseãƒ–ãƒ©ãƒ³ãƒã«å­˜åœ¨ã—ã¦ã„ã‚‹lint issueã‚’ç„¡è¦–ã—ã¦é–‹ç™ºã‚’é€²ã‚ã€ã‚ã¨ã§ã¾ã¨ã‚ã¦lint issueã®æ”¹ä¿®ã‚’è¡Œã†ã¨ã„ã†ã®ã‹å®šçŸ³ã‹ã¨æ€ã„ã¾ã™ã€‚</p><p>ã•ã¦ã€ã“ã®æš«å®šå¯¾å¿œã‚’ã—ã¦ã„ã‚‹æœ€ä¸­ã§ã‚‚ã€lint issueãŒæ··å…¥ã—ç¶šã‘ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚æ—¢å­˜ã®å¤§é‡ã®lint issueã«åŸ‹ã‚‚ã‚Œã¦ã€é–‹ç™ºä¸­ã«æ–°ãŸã«ç”Ÿã¿å‡ºã—ã¦ã—ã¾ã£ãŸlint issueã«æ°—ã¥ãã«ãã„ãŸã‚ã§ã™ã€‚</p><p>ãã‚“ãªã¨ãã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’æ‰“ã¤ã“ã¨ã§ã€ã€Œbaseãƒ–ãƒ©ãƒ³ãƒã‹ã‚‰ä½œæ¥­ãƒ–ãƒ©ãƒ³ãƒåˆ‡ã£ãŸæ–­é¢ã€ã®é–“ã§æ–°ãŸã«ç”Ÿã¿å‡ºã—ã¦ã—ã¾ã£ã¦lint issueãŒãªã„ã‹ã®ãƒã‚§ãƒƒã‚¯ãŒã§ãã¾ã™ã€‚</p><figure class="highlight bash"><figcaption><span>æ–°ãŸã«ç™ºç”Ÿã—ãŸlint-issueãŒç„¡ã„ã‹ãƒã‚§ãƒƒã‚¯ã™ã‚‹</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">golangci-lint run --new-from-rev=`git merge-base HEAD origin/develop` ./...</span><br></pre></td></tr></table></figure><p>å°‘ã—ã‚³ãƒãƒ³ãƒ‰ã‚’è§£èª¬ã—ã¾ã™ã€‚<br><code>git merge-base HEAD origin/develop</code> ã¯ä»Šcheckoutã—ã¦ã„ã‚‹ã‚³ãƒŸãƒƒãƒˆã¨baseãƒ–ãƒ©ãƒ³ãƒ(ã“ã®å ´åˆã¯origin/develop)ã¨ã®åˆ†å²ç‚¹ã¨ãªã‚‹ã‚³ãƒŸãƒƒãƒˆ(merge base)ã®commit_idã‚’æ•™ãˆã¦ãã‚Œã‚‹ã‚³ãƒãƒ³ãƒ‰ã§ã™ã€‚</p><p>ã“ã‚Œã‚’<code>golangci-lint</code>ã®<code>--new-from-rev=</code>ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«æ¸¡ã—ã¦ã‚ã’ã‚‹ã¨ã€ãã®ã‚³ãƒŸãƒƒãƒˆæ–­é¢ã‹ã‚‰ä½œæ¥­ãƒ–ãƒ©ãƒ³ãƒã®HEADã¾ã§ã«æ–°ãŸã«ç”Ÿã¿å‡ºã—ã¦ã—ã¾ã£ãŸlint issueã®ã¿ãŒãƒ¬ãƒãƒ¼ãƒˆã•ã‚Œã¾ã™ã€‚</p><p>PullRequestã‚’å‡ºã™å‰ã«ã€ã“ã®ã‚³ãƒãƒ³ãƒ‰ã§lint issueãŒãªã„ã‹ã®ãƒã‚§ãƒƒã‚¯ã‚’ã—ã¦ã‚ã’ã‚‹ã¨ã‚ˆã„ã®ã§ã¯ãªã„ã‹ã¨æ€ã„ã¾ã™ï¼</p><h2 id="é–¢é€£è¨˜äº‹"><a href="#é–¢é€£è¨˜äº‹" class="headerlink" title="é–¢é€£è¨˜äº‹"></a>é–¢é€£è¨˜äº‹</h2><p>Goã«é–¢é€£ã—ãŸä»–ã®é€£è¼‰ä¼ç”»ã§ã™ã€‚</p><ul><li><a href="/tags/Serverless%E9%80%A3%E8%BC%89/">Serverlessé€£è¼‰</a></li><li><a href="/tags/DynamoDB%C3%97Go/">DynamoDBÃ—Go</a></li><li><a href="/tags/GCP%E9%80%A3%E8%BC%89/">GCPé€£è¼‰</a></li><li><a href="/tags/GoCDK/">GoCDK</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;img src=&quot;/images/20200525/photo_20200525_01.png&quot;&gt;

&lt;p&gt;&lt;a href=&quot;/tags/GoTips%E9%80%A3%E8%BC%89/&quot;&gt;Go Tipsé€£è¼‰&lt;/a&gt;ã®ç¬¬6å¼¾ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;Gopherã®ä½è—¤ã§ã™ã€‚ä»Šå›ã¯
      
    
    </summary>
    
      <category term="Programming" scheme="https://future-architect.github.io/categories/Programming/"/>
    
    
      <category term="Go" scheme="https://future-architect.github.io/tags/Go/"/>
    
      <category term="GoTipsé€£è¼‰" scheme="https://future-architect.github.io/tags/GoTips%E9%80%A3%E8%BC%89/"/>
    
  </entry>
  
  <entry>
    <title>Go Tipsé€£è¼‰6: Error wrappingã•ã‚ŒãŸå„ã‚¯ãƒ©ã‚¦ãƒ‰SDKã®ç‹¬è‡ªå‹ã‚¨ãƒ©ãƒ¼ã‚’æ‰±ã†</title>
    <link href="https://future-architect.github.io/articles/20200523/"/>
    <id>https://future-architect.github.io/articles/20200523/</id>
    <published>2020-05-23T02:12:30.000Z</published>
    <updated>2020-05-23T05:26:20.332Z</updated>
    
    <content type="html"><![CDATA[<img src="/images/20200523/top.png"><p><a href="/tags/GoTips%E9%80%A3%E8%BC%89/">Go Tipsé€£è¼‰</a>ã®ç¬¬6å¼¾ã§ã™ã€‚</p><h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>TIG DXãƒ¦ãƒ‹ãƒƒãƒˆã®çœŸé‡ã§ã™ã€‚å…ˆé€±ã®<a href="/articles/20200519/">ã“ã®è¨˜äº‹</a>ã¶ã‚Šã®æŠ•ç¨¿ã«ãªã‚Šã¾ã™ã€‚</p><p>ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ç¤¾å†…ã«ã¯ã€ŒGoç›¸è«‡å®¤ã€ã¨ã„ã†ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ ãŒã‚ã‚Šã€ãã“ã§Goã«é–¢é€£ã™ã‚‹ç–‘å•ã‚’æŠ•ã’ãŸã‚‰ã€å¤§ä½“1æ—¥ãã‚‰ã„ã§å¼·ã„äººãŒè§£æ±ºã—ã¦ãã‚Œã‚‹ã¨ã„ã†ç¥å¯¾å¿œãŒè¡Œã‚ã‚Œã¦ã„ã¾ã™ã€‚ãã“ã§AWSã‚„GCPã®ç‹¬è‡ªã‚¨ãƒ©ãƒ¼ã‚’Error warppingã•ã‚ŒãŸæ™‚ã«ã©ã†ã‚„ã£ã¦ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã™ã‚Œã°ã‚ˆã„ã®ï¼Ÿã¨èã„ãŸæ™‚ã«ã‚„ã‚Šå–ã‚Šã—ãŸå†…å®¹ã‚’ã¾ã¨ã‚ã¾ã—ãŸã€‚</p><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>Go1.13ã‹ã‚‰<code>fmt.Errorf</code> é–¢æ•°ã« <code>%w</code>ã¨ã„ã†<a href="https://blog.golang.org/go1.13-errors" target="_blank" rel="noopener">æ–°ã—ã„æ§‹æ–‡ãŒè¿½åŠ ã‚µãƒãƒ¼ãƒˆ</a>ã•ã‚ŒãŸã“ã¨ã¯ã€ã”å­˜çŸ¥ã®æ–¹ãŒå¤šã„ã¨æ€ã„ã¾ã™ã€‚</p><p>åˆ©ç”¨æ–¹æ³•ã¯ã€<code>%w</code> (pkg/errorsã®æ™‚ã¨ç•°ãªã‚Šã‚³ãƒ­ãƒ³ã¯ä¸è¦ã ã—æœ«å°¾ã˜ã‚ƒãªãã¦ã‚‚OK) ã¨ä¸€ç·’ã« <code>fmt.Errorf</code> ã‚’ç”¨ã„ã‚‹ã“ã¨ã§ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«åˆã‚ã›ãŸæƒ…å ±ã‚’ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«è¿½åŠ ã§ãã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>%wã‚’ä½¿ã£ãŸä¾‹</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> err := AnyFunc(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="comment">// 2009/11/10 23:00:00 main process: any func: strconv.Atoi: parsing "ABC": invalid syntax</span></span><br><span class="line">        log.Fatalf(<span class="string">"main process: %v"</span>, err) </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">AnyFunc</span><span class="params">()</span> <span class="title">error</span></span> &#123;</span><br><span class="line">    <span class="comment">// ä½•ã‹ã—ã‚‰ã®å‡¦ç†</span></span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> fmt.Errorf(<span class="string">"any func: %w"</span>, err)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>[Go Playground] <a href="https://play.golang.org/p/C__gN90iyt7" target="_blank" rel="noopener">https://play.golang.org/p/C__gN90iyt7</a></li></ul><p>ã¾ãŸã€errorç¨®åˆ¥ã”ã¨ã«å‡¦ç†ã‚’åˆ†ã‘ãŸã„å ´åˆã§ã€Sentinel errorã‚’åˆ¤å®šã™ã‚‹å ´åˆã¯ã€ errorsãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«è¿½åŠ ã•ã‚ŒãŸ <code>errors.Is</code> ã§Wrapã®åˆ¤å®šã§ãã¾ã™ã€‚é€†ã«è¨€ã†ã¨Wrapã•ã‚Œã¦ã„ã‚‹å ´åˆã€ä»Šã¾ã§é€šã‚Šã® <code>if err == ErrNotFound {</code> ã¨ã„ã£ãŸæ§‹æ–‡ã§ã¯åˆ¤å®šã§ããªããªã‚‹ã®ã§ã€æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã¸ã®å°å…¥æ™‚ã¯å‘¼ã³å‡ºã—å…ƒã¨åˆã‚ã›ã¦ãƒªãƒ©ã‚¤ãƒˆãŒå¿…è¦ã§ã™ã€‚</p><figure class="highlight go"><figcaption><span>SentinelErrorã‚’Wrapã—ãŸã¨ãã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ErrNotFound = errors.New(<span class="string">"not found"</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> err := AnyFunc(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> errors.Is(err, ErrNotFound) &#123;</span><br><span class="line">            <span class="comment">// ErrorNotFoundæ™‚ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// ãã®ä»–ã®å ´åˆã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">AnyFunc</span><span class="params">()</span> <span class="title">error</span></span> &#123;</span><br><span class="line">    <span class="comment">// ä½•ã‹ã—ã‚‰ã®å‡¦ç†</span></span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> fmt.Errorf(<span class="string">"any func: %w"</span>, ErrNotFound) <span class="comment">// Wrap</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>[Go Playground] <a href="https://play.golang.org/p/R4KzOPVd_SA" target="_blank" rel="noopener">https://play.golang.org/p/R4KzOPVd_SA</a></li></ul><p>ã“ã®å ´åˆã¯ã‚·ãƒ³ãƒ—ãƒ«ã§è‰¯ã„ã®ã§ã™ãŒã€AWS SDK for Goãªã©ã®errorã‚’Wrapã—ãŸæ™‚ã«å‘¼ã³å‡ºã—å´ã§åˆ¤å®šã‚’ã—ãŸã„æ™‚ã€ã©ã†ã™ã‚Œã°ã‚ˆã„ã®ã‹ãŒç›´æ¥çš„ãªå†…å®¹ãŒè¦‹å½“ãŸã‚‰ãªã‹ã£ãŸã®ã§ã“ã“ã«ã¾ã¨ã‚ã¦ãŠããŸã„ã¨æ€ã„ã¾ã™ã€‚</p><h1 id="Handling-Errors-in-the-AWS-SDK-for-Go"><a href="#Handling-Errors-in-the-AWS-SDK-for-Go" class="headerlink" title="Handling Errors in the AWS SDK for Go"></a>Handling Errors in the AWS SDK for Go</h1><p><a href="https://docs.aws.amazon.com/sdk-for-go/v1/developer-guide/handling-errors.html" target="_blank" rel="noopener">ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>ã‚’èª­ã‚€ã¨ä¾‹ãˆã°ã€AWSã®Erorrãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ã€<code>awserr.Error</code> ã¨ã„ã†ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§è¡¨ç¾ã•ã‚Œã¦ãŠã‚Šã€ä¸€åº¦errã‚’å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã—ã¦ã‹ã‚‰å†…éƒ¨çš„ãªã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã«å¿œã˜ã¦ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã™ã‚‹ã“ã¨ã«ãªã£ã¦ã„ã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>AWS-SDKã®é€šå¸¸ç‰ˆã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> aerr, ok := err.(*awserr.Error); ok &#123;</span><br><span class="line">        <span class="keyword">switch</span> aerr.Code() &#123;</span><br><span class="line">        <span class="keyword">case</span> dynamodb.ErrCodeConditionalCheckFailedException:</span><br><span class="line">            <span class="comment">// ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</span></span><br><span class="line">        <span class="keyword">case</span> dynamodb.ErrCodeProvisionedThroughputExceededException:</span><br><span class="line">            <span class="comment">// ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</span></span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="comment">// ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã“ã‚Œã‚’Wrapã•ã‚ŒãŸã¨ãã¯ã€å‘¼ã³å‡ºã—å…ƒã§å˜ç´”ã«å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã£ã¦ã‚‚ã†ã¾ãåˆ¤å®šã§ãã¾ã›ã‚“ã€‚</p><figure class="highlight go"><figcaption><span>NGãªã‚±ãƒ¼ã‚¹</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">AnyFunc</span><span class="params">()</span> <span class="title">error</span></span> &#123;</span><br><span class="line">    <span class="comment">// ä½•ã‹ã—ã‚‰ã®AWS SDKã‚’åˆ©ç”¨ã—ãŸã‚³ãƒ¼ãƒ‰</span></span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> fmt.Errorf(<span class="string">"aws operation: %w"</span>, err)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> err := AnyFunc(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> aErr, ok := err.(*awserr.Error); ok &#123; <span class="comment">// ğŸ†–å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯åˆ¤å®šã§ããªã„</span></span><br><span class="line">            <span class="comment">// AWSæ“ä½œã‚¨ãƒ©ãƒ¼ç‰¹æœ‰ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// ãã®ä»–ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€»Go Playgroundã§ã‚µãƒ³ãƒ—ãƒ«ã‚’è¼‰ã›ã‚ˆã†ã¨æ€ã„ã¾ã—ãŸãŒã€importã§Timeoutã«ãªã£ãŸã®ã§è«¦ã‚ã¾ã—ãŸ</p><h1 id="å¯¾å¿œæ–¹æ³•"><a href="#å¯¾å¿œæ–¹æ³•" class="headerlink" title="å¯¾å¿œæ–¹æ³•"></a>å¯¾å¿œæ–¹æ³•</h1><p>ã“ã® <code>awserr.Error</code> ã‚’æº€ãŸã™errorã‚’Wrapã—ãŸã¨ãã¯ã©ã†ã™ã¹ãã‹ã¨ã„ã†ã¨ã€ <code>errors.As</code> ã‚’ç”¨ã„ã¾ã™ã€‚<code>errors.As</code> ã‚’ä»£å…¥ç”¨ã®å¤‰æ•°ã¨ã¨ã‚‚ã«åˆ©ç”¨ã™ã‚‹ã¨ã†ã¾ãã„ãã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>OKãªã‚³ãƒ¼ãƒ‰</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> err := AnyFunc(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> aErr *awserr.Error</span><br><span class="line">    <span class="keyword">if</span> ok := errors.As(err, &amp;aErr); ok &#123;</span><br><span class="line">        <span class="keyword">switch</span> aErr.Code() &#123;</span><br><span class="line">        <span class="keyword">case</span> dynamodb.ErrCodeConditionalCheckFailedException:</span><br><span class="line">            <span class="comment">// ä½•ã‹ã—ã‚‰ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</span></span><br><span class="line">        <span class="keyword">case</span> dynamodb.ErrCodeProvisionedThroughputExceededException:</span><br><span class="line">            <span class="comment">// ä½•ã‹ã—ã‚‰ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</span></span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="comment">// ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// ãã®ä»–ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¾‹ã¨ã—ã¦æ„šç›´ã«ifåˆ†å²ã‚’ã™ã¹ã¦ç¶²ç¾…ã™ã‚‹ã‚ˆã†ã«æ›¸ãã¾ã—ãŸãŒã€æ—©æœŸreturnã‚’æ´»ç”¨ã™ã‚‹ã¨ã€ã‚ˆã‚Šãƒã‚¹ãƒˆãŒæµ…ãè¦‹é€šã—ãŒè‰¯ã„ã‚³ãƒ¼ãƒ‰ã«ã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><h2 id="GCP-SDKã®å ´åˆ"><a href="#GCP-SDKã®å ´åˆ" class="headerlink" title="GCP SDKã®å ´åˆ"></a>GCP SDKã®å ´åˆ</h2><p>ã—ã°ã—ã°<a href="https://godoc.org/cloud.google.com/go/bigquery#hdr-Errors" target="_blank" rel="noopener">ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã™ã“ã¨ãŒå¤šã„</a>ã¨ã®ã“ã¨ã§ã™ã€‚</p><p><a href="https://godoc.org/google.golang.org/api/googleapi#Error" target="_blank" rel="noopener">https://godoc.org/google.golang.org/api/googleapi#Error</a></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> e, ok := err.(*googleapi.Error); ok &#123;</span><br><span class="line">    <span class="keyword">if</span> e.Code == <span class="number">409</span> &#123; ... &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã‚‚ã—ã“ã‚Œã‚‰ã®errorã‚’Wrapã™ã‚‹å ´åˆã¯ã€åŒæ§˜ã« <code>errors.As</code> ã§åˆ¤å®šã—ã¾ã™ã€‚ï¼ˆå®Ÿéš›ã¯å¾Œè¿°ã™ã‚‹å„ã‚µãƒ¼ãƒ“ã‚¹ã”ã¨ã«å®£è¨€ã•ã‚Œã¦ã„ã‚‹Sentinel errorã§åˆ¤æ–­ã™ã‚‹ã“ã¨ãŒå¤šã„ã¨æ€ã„ã¾ã™ï¼‰</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> err := AnyFunc(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> gerr *googleapi.Error</span><br><span class="line">    <span class="keyword">if</span> ok := errors.As(err, &amp;gerr); ok &#123;</span><br><span class="line">        <span class="keyword">switch</span> gerr.Code() &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">409</span>:</span><br><span class="line">            <span class="comment">// ä½•ã‹ã—ã‚‰ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</span></span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="comment">// ä½•ã‹ã—ã‚‰ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// ãã®ä»–ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸€æ–¹ã§ã€<a href="https://godoc.org/cloud.google.com/go/storage#pkg-variables" target="_blank" rel="noopener">Storageãªã©ã¯Sentinel error</a>ã‚’è¿”ã—ã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>Storageã®SentinelError</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> (</span><br><span class="line">    <span class="comment">// ErrBucketNotExist indicates that the bucket does not exist.</span></span><br><span class="line">    ErrBucketNotExist = errors.New(<span class="string">"storage: bucket doesn't exist"</span>)</span><br><span class="line">    <span class="comment">// ErrObjectNotExist indicates that the object does not exist.</span></span><br><span class="line">    ErrObjectNotExist = errors.New(<span class="string">"storage: object doesn't exist"</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>errorã‚’è¿”ã™APIã‚’åˆ©ç”¨ã—ã¦Wrapã—ãŸå ´åˆã¯ <code>errors.Is</code> ã§åˆ¤å®šã—ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Storageã«å¯¾ã—ã¦ä½•ã‹ã—ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹å‡¦ç†</span></span><br><span class="line"><span class="keyword">if</span> err := AnyFunc(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> ok := errors.Is(err, storage.ErrObjectNotExist); ok &#123;</span><br><span class="line">        <span class="comment">// ä½•ã‹ã—ã‚‰ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// ãã®ä»–ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã©ã®APIãŒã©ã†ã„ã£ãŸerrorã‚’è¿”ã—ã†ã‚‹ã‹ã¯ã€å„<a href="https://godoc.org/cloud.google.com/go" target="_blank" rel="noopener">GoDoc</a>ã«æ›¸ã„ã¦ã‚ã‚Šã¾ã™ã®ã§ã€å€‹åˆ¥ã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒå¿…è¦ãªå ´åˆã¯ç¢ºèªã™ã‚‹ã“ã¨ã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><h1 id="Stacktraceã®å‡ºåŠ›ã«ã¤ã„ã¦"><a href="#Stacktraceã®å‡ºåŠ›ã«ã¤ã„ã¦" class="headerlink" title="Stacktraceã®å‡ºåŠ›ã«ã¤ã„ã¦"></a>Stacktraceã®å‡ºåŠ›ã«ã¤ã„ã¦</h1><p><a href="https://play.golang.org/p/NAYR7XySCdW" target="_blank" rel="noopener">https://play.golang.org/p/NAYR7XySCdW</a> ã«ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’è¼‰ã›ã¾ã—ãŸãŒã€ <code>%w</code>æ§‹æ–‡ã‚’ç”¨ã„ãŸ<code>fmt</code>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã¯StacktraceãŒå‡ºåŠ›ã•ã‚Œã¾ã›ã‚“ã€‚ã‚‚ã—ã€StacktraceãŒå¿…è¦ãªå ´åˆã¯ <code>fmt.Errorf</code>ã§ã¯ãªã <code>xerrors.Errorf</code> ã‚’ç”¨ã„ã¦Wrapã—ã¾ã™ã€‚</p><p>ã‚·ãƒ“ã‚¢ã«æ€§èƒ½ãŒæ±‚ã‚ã‚‰ã‚Œãªã„ã€ä¾‹ãˆã°Backendã®WebAPIã‚’Goã§å®Ÿè£…ã™ã‚‹å ´åˆã¯ã€ <a href="https://godoc.org/golang.org/x/xerrors" target="_blank" rel="noopener">xerrorsãƒ‘ãƒƒã‚±ãƒ¼ã‚¸</a>ã‚’åˆ©ç”¨ã—ãŸæ–¹ãŒã€2020/01/26 æ™‚ç‚¹ã§ã¯è‰¯ã•ãã†ã§ã™ã€‚</p><ul><li>xerrorsã«ã¤ã„ã¦ã¯ã€ããªå¤ªã•ã‚“ã® <a href="https://qiita.com/sonatard/items/9c9faf79ac03c20f4ae1" target="_blank" rel="noopener">Goã®æ–°ã—ã„errors ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ xerrors</a> ã®è¨˜äº‹ãŒã¨ã¦ã‚‚å‚è€ƒã«ãªã‚Šã¾ã—ãŸ</li></ul><figure class="highlight go"><figcaption><span>xerrorsã‚’ä½¿ã£ãŸä¾‹</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"golang.org/x/xerrors"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> err := Func(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">fmt.Printf(<span class="string">"stacktrace: %+v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Func</span><span class="params">()</span> <span class="title">error</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> err := FuncInternal(); err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> xerrors.Errorf(<span class="string">"anyFunc %w - internal failed"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">FuncInternal</span><span class="params">()</span> <span class="title">error</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> xerrors.Errorf(<span class="string">"any error"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>[Go Playground] <a href="https://play.golang.org/p/4xcqP7Ukt0H" target="_blank" rel="noopener">https://play.golang.org/p/4xcqP7Ukt0H</a></li></ul><p>ã“ã‚Œã‚’å®Ÿè¡Œã™ã‚‹ã¨StacktraceãŒå‡ºåŠ›ã•ã‚Œã¾ã—ãŸã€‚</p><figure class="highlight console"><figcaption><span>Stacktraceå‡ºåŠ›ä¾‹</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">stacktrace: anyFunc any error - internal failed:</span><br><span class="line">    main.Func</span><br><span class="line">        /tmp/sandbox921242282/prog.go:16</span><br><span class="line">  - any error:</span><br><span class="line">    main.FuncInternal</span><br><span class="line">        /tmp/sandbox921242282/prog.go:22</span><br></pre></td></tr></table></figure><p>ã¡ãªã¿ã«ã€xerrorsã§Wrapã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼ã§ã‚‚ã€errors.Is, errors.Asã§åˆ¤å®šã§ãã¾ã—ãŸã€‚ï¼ˆæ··åœ¨ã™ã‚‹ã¨å°‘ã—æ°—æŒã¡æ‚ªã„ã§ã™ãŒï¼‰</p><ul><li>[Go Playground] <a href="https://play.golang.org/p/nfu_JXo6N_e" target="_blank" rel="noopener">https://play.golang.org/p/nfu_JXo6N_e</a></li></ul><h1 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h1><ul><li>Sentinel errorã®å ´åˆã¯ã€<code>errors.Is</code> ã§ã€ç‹¬è‡ªErrorå‹ã‚’å®£è¨€ã—ã¦ã„ã‚‹å ´åˆã¯ã€ <code>errors.As</code> ã‚’åˆ©ç”¨ã—ã¦ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã™ã‚‹</li><li>Stacktraceæƒ…å ±ãŒå¿…è¦ãªå ´åˆã¯ã€xerrorsãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’åˆ©ç”¨ã™ã‚‹</li><li>xerrorsã§Wrapã—ã¦ã‚‚ <code>errors.Is</code>, <code>errors.As</code> ã§æ‰±ãˆã‚‹</li></ul><h2 id="é–¢é€£è¨˜äº‹"><a href="#é–¢é€£è¨˜äº‹" class="headerlink" title="é–¢é€£è¨˜äº‹"></a>é–¢é€£è¨˜äº‹</h2><p>Goã«é–¢é€£ã—ãŸä»–ã®é€£è¼‰ä¼ç”»ã§ã™ã€‚</p><ul><li><a href="/tags/Serverless%E9%80%A3%E8%BC%89/">Serverlessé€£è¼‰</a></li><li><a href="/tags/DynamoDB%C3%97Go/">DynamoDBÃ—Go</a></li><li><a href="/tags/GCP%E9%80%A3%E8%BC%89/">GCPé€£è¼‰</a></li><li><a href="/tags/GoCDK/">GoCDK</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;img src=&quot;/images/20200523/top.png&quot;&gt;


&lt;p&gt;&lt;a href=&quot;/tags/GoTips%E9%80%A3%E8%BC%89/&quot;&gt;Go Tipsé€£è¼‰&lt;/a&gt;ã®ç¬¬6å¼¾ã§ã™ã€‚&lt;/p&gt;
&lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; c
      
    
    </summary>
    
      <category term="Programming" scheme="https://future-architect.github.io/categories/Programming/"/>
    
    
      <category term="Go" scheme="https://future-architect.github.io/tags/Go/"/>
    
      <category term="GoTipsé€£è¼‰" scheme="https://future-architect.github.io/tags/GoTips%E9%80%A3%E8%BC%89/"/>
    
  </entry>
  
  <entry>
    <title>Go Tips é€£è¼‰5: ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®ä¾‹å¤–ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å®Ÿè£…ï¼‹morikuni/failureã‚µãƒ³ãƒ—ãƒ«</title>
    <link href="https://future-architect.github.io/articles/20200522/"/>
    <id>https://future-architect.github.io/articles/20200522/</id>
    <published>2020-05-21T15:14:52.000Z</published>
    <updated>2020-05-23T05:17:25.456Z</updated>
    
    <content type="html"><![CDATA[<img src="/images/20200522/top.png"><h1 id="æ¦‚è¦"><a href="#æ¦‚è¦" class="headerlink" title="æ¦‚è¦"></a>æ¦‚è¦</h1><p>TIG DXæ‰€å±ã®å¤šè³€ã§ã™ã€‚æœ€è¿‘ã¯è¨­è¨ˆã‚’ã—ã¤ã¤ Go ã‚‚è§¦ã‚Œã¦å¼•ãç¶šãæ¥½ã—ãä»•äº‹ã—ã¦ã¾ã™ã€‚</p><p>ä»Šå›ã¯ã€<a href="https://pkg.go.dev/errors?tab=doc" target="_blank" rel="noopener">errors</a> package ã‚’ä¸€éƒ¨åˆ©ç”¨ã—ã¦ã€ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å‡¦ç†ã‚’å®Ÿè£…ã—ã¾ã—ãŸã€‚ã¾ãŸã€morikuni/failure ã‚’åˆ©ç”¨ã—ãŸå®Ÿè£…ã¸ã®æ›¸ãæ›ãˆã‚‚è©¦ã—ã¦ã¿ã¦ã„ã¾ã™ã€‚</p><h1 id="ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®ä¾‹å¤–ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã«ã¤ã„ã¦"><a href="#ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®ä¾‹å¤–ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã«ã¤ã„ã¦" class="headerlink" title="ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®ä¾‹å¤–ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã«ã¤ã„ã¦"></a>ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®ä¾‹å¤–ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã«ã¤ã„ã¦</h1><p>å‰æã¨ã—ã¦Goã§æ›¸ã‹ã‚ŒãŸ HTTP APIã‚µãƒ¼ãƒãƒ¼ã«å¯¾ã—ã¦ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã«ã¤ã„ã¦è¨˜è¼‰ã—ã¾ã™ã€‚</p><p><strong>ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®ä¾‹å¤–ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</strong>ã«ã¤ã„ã¦ã§ã™ãŒã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ç™ºç”Ÿã™ã‚‹ã‚¨ãƒ©ãƒ¼ã‚’äº‹å‰ã«ãƒ©ãƒ™ãƒªãƒ³ã‚°ã—ã¦ã‚³ãƒ¼ãƒ‰åŒ–ã—ã€ã‚³ãƒ¼ãƒ‰ã‚’ã‚‚ã¨ã«ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’å®Ÿæ–½ã™ã‚‹ã“ã¨ã¨ã—ã¾ã™ã€‚ç™ºç”Ÿæ™‚ã®é‹ç”¨å¯¾å¿œã‚„å½±éŸ¿ã«ã¤ã„ã¦ã€äº‹å‰ã«ä¸€è¦§ã§æ•´ç†ã™ã‚‹ã“ã¨ã§ã€é‹ç”¨è² è·ã‚’ä¸‹ã’ã‚‹æ„å‘³ãŒã‚ã‚‹ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚(è£œè¶³: Futureã§ã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚³ãƒ¼ãƒ‰ã¨å‘¼ç§°ã™ã‚‹ã“ã¨ãŒå¤šã„ã§ã™ãŒã€ä¸€èˆ¬çš„ãªå‘½åã§ã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã§çµ±ä¸€ã—ã¾ã™)</p><p>ä»¥ä¸‹ã®ã‚ˆã†ãªå½¢ã§æ•´ç†ã—ã¦ã„ã¾ã™ã€‚<br>å®Ÿéš›ã¯ã€ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰åˆ¥ã«é‹ç”¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚‚åˆã‚ã›ã¦æ•´ç†ã—ã¾ã™ã€‚</p><p>ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰è¡¨ (ä¾‹)</p><table><thead><tr><th align="left">ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰</th><th align="left">ã‚¨ãƒ©ãƒ¼å</th></tr></thead><tbody><tr><td align="left">XXX0001</td><td align="left">ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¨ãƒ©ãƒ¼</td></tr><tr><td align="left">XXX0002</td><td align="left">DBã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼</td></tr><tr><td align="left">XXX0003</td><td align="left">å¤–éƒ¨APIã‚µãƒ¼ãƒãƒ¼ã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼</td></tr></tbody></table><p>ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã‚’åˆ©ç”¨ã—ãŸéš›ã«é‡è¦ãªã“ã¨ã¯ã€ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰å¤–ã®ã‚¨ãƒ©ãƒ¼ã‚’ç™ºç”Ÿã•ã›ãªã„ã“ã¨ã«ã‚ã‚‹ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰å¤–ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸéš›ã€ä½•ã‚’ã©ã†ã—ãŸã‚‰ã‚ˆã„ã‹ãŒæ˜æ–‡åŒ–ã•ã‚Œã¦ã„ãªã„ãŸã‚ã§ã™ã€‚ã‚¨ãƒ©ãƒ¼ã¯ã€ãƒ­ã‚°ã‚ˆã‚Šç™ºç”Ÿã‚’æ¤œçŸ¥ã—å¯¾å¿œã™ã‚‹ã‚‚ã®ã¨ã—ãŸéš›ã«ã€ã„ã‹ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰å‡ºåŠ›ã•ã‚Œã‚‹ãƒ­ã‚°ã«å¯¾ã—ã¦ã€é©åˆ‡ã«ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã‚’ä»˜ä¸ã§ãã‚‹ã‹ãŒå¤§äº‹ã§ã™ã€‚</p><h1 id="errors-package-ã‚’åˆ©ç”¨ã—ãŸå®Ÿè£…ä¾‹"><a href="#errors-package-ã‚’åˆ©ç”¨ã—ãŸå®Ÿè£…ä¾‹" class="headerlink" title="errors package ã‚’åˆ©ç”¨ã—ãŸå®Ÿè£…ä¾‹"></a>errors package ã‚’åˆ©ç”¨ã—ãŸå®Ÿè£…ä¾‹</h1><p>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å´ã§ã®ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãƒ¬ãƒ™ãƒ«ã§ã®åˆ¶ç´„ã¯é›£ã—ãã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ã®æ‹…ä¿ã‚‚ãµãã¾ã‚Œã¾ã™ãŒã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¦ã‚¨ãƒ©ãƒ¼ã‚’å‡ºåŠ›ã—ã¦ã„ã¾ã™ã€‚</p><p>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æ§‹é€ ã¨ã—ã¦ã¯ã‚·ãƒ³ãƒ—ãƒ«ãªä»¥ä¸‹ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ handler    <span class="comment"># httpãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã™ã‚‹å±¤</span></span><br><span class="line">â”œâ”€â”€ service    <span class="comment"># ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å±¤ </span></span><br><span class="line">â””â”€â”€ infra      <span class="comment"># DBã‚„å¤–éƒ¨APIç­‰ã®å¤–éƒ¨ãƒªã‚½ãƒ¼ã‚¹ã¸ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹å±¤</span></span><br></pre></td></tr></table></figure><h2 id="ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰åˆ¥ã®ã‚¨ãƒ©ãƒ¼ã‚’å®šç¾©"><a href="#ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰åˆ¥ã®ã‚¨ãƒ©ãƒ¼ã‚’å®šç¾©" class="headerlink" title="ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰åˆ¥ã®ã‚¨ãƒ©ãƒ¼ã‚’å®šç¾©"></a>ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰åˆ¥ã®ã‚¨ãƒ©ãƒ¼ã‚’å®šç¾©</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> apperror</span><br><span class="line"></span><br><span class="line"><span class="comment">// AppError ã¯ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ãŒä»˜ä¸ã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼ã®interface</span></span><br><span class="line"><span class="keyword">type</span> AppError <span class="keyword">interface</span> &#123;</span><br><span class="line">error</span><br><span class="line">Code() <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥ä¸‹ã«ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰åˆ¥ã«ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ©ãƒ¼ã‚’å®šç¾©</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> ClientError <span class="keyword">struct</span> &#123;</span><br><span class="line">Err error</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(e ClientError)</span> <span class="title">Error</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">"client error"</span> + <span class="string">": "</span> + e.Err.Error()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(e ClientError)</span> <span class="title">Code</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">"XXX0001"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(e *ClientError)</span> <span class="title">Unwrap</span><span class="params">()</span> <span class="title">error</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> e.Err</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="handler-å±¤ã«è¿”å´ã•ã‚Œã‚‹-error-ã‚’å¿…ãšã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰å¯¾å¿œErrorå‹ã¨ã™ã‚‹"><a href="#handler-å±¤ã«è¿”å´ã•ã‚Œã‚‹-error-ã‚’å¿…ãšã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰å¯¾å¿œErrorå‹ã¨ã™ã‚‹" class="headerlink" title="handler å±¤ã«è¿”å´ã•ã‚Œã‚‹ error ã‚’å¿…ãšã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰å¯¾å¿œErrorå‹ã¨ã™ã‚‹"></a>handler å±¤ã«è¿”å´ã•ã‚Œã‚‹ error ã‚’å¿…ãšã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰å¯¾å¿œErrorå‹ã¨ã™ã‚‹</h2><p>å„å±¤ã®error ã‚’ wrappingã—ã¦ handler å±¤ã«è¿”å´ã—ã¾ã™ã€‚ã“ã“ã¯æ„šç›´ã«ã‚„ã‚‰ãªã„ã¨ã„ã‘ãªã„ã¨ã“ã‚ã§ã™ã€‚(é™çš„è§£æãƒ„ãƒ¼ãƒ«ã‚’ä½œã£ã¦ãƒã‚§ãƒƒã‚¯ã™ã‚‹æ©Ÿæ§‹ã‚’ç”¨æ„ã™ã‚‹ã»ã†ãŒã‚ˆã‚Šè‰¯ã„ã§ã™ã­ã€‚)</p><p>é–¢æ•°ã®æˆ»ã‚Šå€¤ã®ç¬¬2å¼•æ•°è‡ªä½“ã‚’ <code>AppError</code> å‹ã«ã™ã‚‹ã“ã¨ã‚‚è€ƒãˆã‚‰ã‚Œã¾ã™ãŒã€æ¨™æº– error ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã‚’å°Šé‡ã—ãŸã»ã†ãŒè‰¯ã„ã¨ã®ãƒã‚¦ãƒã‚¦ãŒã‚ã‚‹ã®ã§å¯¾å¿œã—ã¾ã›ã‚“ã§ã—ãŸã€‚</p><p>å‚è€ƒ: <a href="https://www.slideshare.net/yuichi1004/golangtokyo-6-in-japanese?ref=https://golangtokyo.connpass.com/event/57168/presentation/" target="_blank" rel="noopener">åˆã‚ã¦Golangã§å¤§è¦æ¨¡Microservicesã‚’ä½œã‚Šå¾—ãŸæ•™è¨“</a></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> service</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(h User)</span> <span class="title">Search</span><span class="params">(id <span class="keyword">string</span>)</span> <span class="params">(<span class="keyword">string</span>, error)</span></span> &#123;</span><br><span class="line"><span class="comment">// å‡¦ç†...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="comment">// err ã‚’ wrap ã—ã¦ã‚¨ãƒ©ãƒ¼æƒ…å ±ã‚’è¿½åŠ ã™ã‚‹</span></span><br><span class="line"><span class="keyword">return</span> <span class="string">""</span>, apperror.ClientError&#123;Err: fmt.Errorf(<span class="string">"invalid id = %v: %w"</span>, id, err)&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’å‡ºåŠ›ã™ã‚‹ç®‡æ‰€ã‚’é›†ç´„"><a href="#ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’å‡ºåŠ›ã™ã‚‹ç®‡æ‰€ã‚’é›†ç´„" class="headerlink" title="ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’å‡ºåŠ›ã™ã‚‹ç®‡æ‰€ã‚’é›†ç´„"></a>ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’å‡ºåŠ›ã™ã‚‹ç®‡æ‰€ã‚’é›†ç´„</h2><p>handler å±¤ã«é›†ç´„ã•ã›ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> handler</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">UserHandleFunc</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">app := service.User&#123;&#125;</span><br><span class="line">h, err := app.Search(<span class="string">"id1"</span>)</span><br><span class="line"><span class="comment">// err ã¯ å¿…ãšã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰å®šç¾©ã®ã‚¨ãƒ©ãƒ¼</span></span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="comment">// ã‚¨ãƒ©ãƒ¼ã‹ã‚‰å…±é€šã®ãƒ­ã‚°ã‚’å‡ºåŠ›ã™ã‚‹é–¢æ•°ã‚’å‘¼ã³å‡ºã™</span></span><br><span class="line">errorLog(err)</span><br><span class="line">w.WriteHeader(<span class="number">500</span>)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">errorLog</span><span class="params">(err error)</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> e, ok := err.(apperror.AppError); ok &#123;</span><br><span class="line"><span class="comment">// ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ãƒ­ã‚°ã«å‡ºåŠ›</span></span><br><span class="line">log.Printf(<span class="string">"[%v] %v\n"</span>, e.Code(), e.Error())</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">// äºˆæƒ³å¤–ã®ã‚¨ãƒ©ãƒ¼(å®Ÿè£…ãƒŸã‚¹)</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šè¨˜ã®é€šã‚Šã«å®Ÿè£…ã™ã‚‹ã“ã¨ã§ã€ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã«ã‚¨ãƒ©ãƒ¼ã‚’é›†ç´„ã™ã‚‹ã“ã¨è‡ªä½“ã¯ã§ãã¾ã—ãŸã€‚</p><p>ãŸã ã€ç‹¬è‡ªã‚¨ãƒ©ãƒ¼ã‚’å®šç¾©ã—ã¦ Wrapã™ã‚‹ã¨ã“ã‚ã¯ã‚‚ã£ã¨æ›¸ãã‚„ã™ãã§ããªã„ã‹ã€æ¤œè¨ã®ä½™åœ°ãŒã‚ã‚Šãã†ã ã¨æ„Ÿã˜ã¾ã—ãŸã€‚</p><h1 id="morikuni-failure-ã‚’åˆ©ç”¨ã§ããªã„ã‹"><a href="#morikuni-failure-ã‚’åˆ©ç”¨ã§ããªã„ã‹" class="headerlink" title="morikuni/failure ã‚’åˆ©ç”¨ã§ããªã„ã‹?"></a>morikuni/failure ã‚’åˆ©ç”¨ã§ããªã„ã‹?</h1><p>morikuni/failure ã¯ morikuni ã•ã‚“ãŒä½œæˆã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å‘ã‘ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚errors package å­˜åœ¨å‰ã‚ˆã‚Šé–‹ç™ºã•ã‚Œã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚</p><p><a href="https://github.com/morikuni/failure" target="_blank" rel="noopener">https://github.com/morikuni/failure</a></p><blockquote><p>Package failure provides an error represented as error code and extensible error interface with wrappers.</p></blockquote><p>ã¨ã®ã“ã¨ãªã®ã§ã€ã‚¨ãƒ©ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®åˆ©ç”¨ã«ãƒãƒƒãƒã—ãã†ã§ã™ã€‚</p><p>ä»¥å‰ã® <a href="https://speakerdeck.com/morikuni/designing-errors" target="_blank" rel="noopener">Go Conference 2019 Spring ã«ã¦ç™ºè¡¨ã•ã‚Œã¦ã„ã‚‹è³‡æ–™</a> ã«ã¦ã€failure ã¨ errors (å½“æ™‚ã¯ xerrors) ã®ä½¿ã„åˆ†ã‘ã«ã¤ã„ã¦æ˜ç¢ºã«èª¬æ˜ã•ã‚Œã¦ã„ã¾ã™ã€‚ã¨ã¦ã‚‚ã‚ã‹ã‚Šã‚„ã™ãã¦ã€ã—ã£ãã‚ŠããŸã“ã¨ã‚’è¦šãˆã¦ã„ã¾ã™ã€‚</p><img src="/images/20200522/photo_20200522_01.png" style="border:solid 1px #000000"><p>å‚è€ƒ: <a href="https://speakerdeck.com/morikuni/designing-errors?slide=33" target="_blank" rel="noopener">https://speakerdeck.com/morikuni/designing-errors?slide=33</a></p><h2 id="ã‚„ã£ã¦ã¿ãŸ"><a href="#ã‚„ã£ã¦ã¿ãŸ" class="headerlink" title="ã‚„ã£ã¦ã¿ãŸ"></a>ã‚„ã£ã¦ã¿ãŸ</h2><p>morikuni/failure ã‚’åˆ©ç”¨ã—ã¦ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãæ›ãˆã¦ã¿ã¾ã—ãŸã€‚</p><h3 id="ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰åˆ¥ã®ã‚¨ãƒ©ãƒ¼ã‚’å®šç¾©-1"><a href="#ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰åˆ¥ã®ã‚¨ãƒ©ãƒ¼ã‚’å®šç¾©-1" class="headerlink" title="ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰åˆ¥ã®ã‚¨ãƒ©ãƒ¼ã‚’å®šç¾©"></a>ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰åˆ¥ã®ã‚¨ãƒ©ãƒ¼ã‚’å®šç¾©</h3><p>ã¨ã¦ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ã§ã™ã­ã€‚è¿½åŠ ã‚‚ç°¡å˜ã«ãªã‚Šãã†ã§ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> apperror</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"github.com/morikuni/failure"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">ClientError       failure.StringCode = <span class="string">"XXX0001"</span></span><br><span class="line">DBConnectionError failure.StringCode = <span class="string">"XXX0002"</span></span><br><span class="line">XXAPIRequestError failure.StringCode = <span class="string">"XXX0003"</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="handler-å±¤ã«è¿”å´ã•ã‚Œã‚‹-error-ã‚’å¿…ãšã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã«å¯¾å¿œã•ã›ãŸç‹¬è‡ªã‚¨ãƒ©ãƒ¼ã¨ã™ã‚‹"><a href="#handler-å±¤ã«è¿”å´ã•ã‚Œã‚‹-error-ã‚’å¿…ãšã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã«å¯¾å¿œã•ã›ãŸç‹¬è‡ªã‚¨ãƒ©ãƒ¼ã¨ã™ã‚‹" class="headerlink" title="handler å±¤ã«è¿”å´ã•ã‚Œã‚‹ error ã‚’å¿…ãšã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã«å¯¾å¿œã•ã›ãŸç‹¬è‡ªã‚¨ãƒ©ãƒ¼ã¨ã™ã‚‹"></a>handler å±¤ã«è¿”å´ã•ã‚Œã‚‹ error ã‚’å¿…ãšã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã«å¯¾å¿œã•ã›ãŸç‹¬è‡ªã‚¨ãƒ©ãƒ¼ã¨ã™ã‚‹</h3><p>morikuni/failure ã§ã‚‚ã€ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã¸ã®å¤‰æ› ( <code>failure.Translate</code>  ) ã‚„ ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã® Wrap ( <code>failure.Wrap</code> ) ã¯å¯èƒ½ã§ã™ã€‚<br>(ã¡ãªã¿ã«ã€failureã§ç”Ÿæˆã—ãŸã‚¨ãƒ©ãƒ¼ã‚‚ errors package ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã‚’æº€ãŸã—ã¦ã„ã¾ã™ã€‚)</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> service</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"errors"</span></span><br><span class="line"></span><br><span class="line"><span class="string">"github.com/xxx/failure_sample/apperror"</span></span><br><span class="line"><span class="string">"github.com/morikuni/failure"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(h User)</span> <span class="title">Search</span><span class="params">(id <span class="keyword">string</span>)</span> <span class="params">(<span class="keyword">string</span>, error)</span></span> &#123;</span><br><span class="line"><span class="comment">// å‡¦ç†...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="comment">// err ã‚’ wrap ã—ã¦ã‚¨ãƒ©ãƒ¼æƒ…å ±ã‚’è¿½åŠ ã™ã‚‹</span></span><br><span class="line"><span class="keyword">return</span> <span class="string">""</span>, failure.Translate(err, apperror.ClientError, failure.Messagef(<span class="string">"invalid id=%v"</span>, id))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’å‡ºåŠ›ã™ã‚‹ç®‡æ‰€ã‚’é›†ç´„-1"><a href="#ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’å‡ºåŠ›ã™ã‚‹ç®‡æ‰€ã‚’é›†ç´„-1" class="headerlink" title="ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’å‡ºåŠ›ã™ã‚‹ç®‡æ‰€ã‚’é›†ç´„"></a>ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’å‡ºåŠ›ã™ã‚‹ç®‡æ‰€ã‚’é›†ç´„</h3><p>README ã® sample ã‚’å‚è€ƒã«ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å‡¦ç†ã‚’å®Ÿè£…ã—ã¦ã¿ã¾ã—ãŸã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> handler</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"log"</span></span><br><span class="line"><span class="string">"net/http"</span></span><br><span class="line"></span><br><span class="line"><span class="string">"github.com/xxx/failure_sample/apperror"</span></span><br><span class="line"><span class="string">"github.com/xxx/failure_sample/service"</span></span><br><span class="line"><span class="string">"github.com/morikuni/failure"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">UserHandleFunc</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">app := service.User&#123;&#125;</span><br><span class="line">_, err := app.Search(<span class="string">"id1"</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">errorLog(err)</span><br><span class="line">w.WriteHeader(httpStatus(err))</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">w.WriteHeader(http.StatusOK)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">errorLog</span><span class="params">(err error)</span></span> &#123;</span><br><span class="line">code, ok := failure.CodeOf(err)</span><br><span class="line"><span class="keyword">if</span> !ok &#123;</span><br><span class="line">log.Printf(<span class="string">"unexpected error: %v\n"</span>, err)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">log.Printf(<span class="string">"[%v] %v\n"</span>, code, err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">httpStatus</span><span class="params">(err error)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">switch</span> c, _ := failure.CodeOf(err); c &#123;</span><br><span class="line"><span class="keyword">case</span> apperror.ClientError:</span><br><span class="line"><span class="keyword">return</span> http.StatusBadRequest</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"><span class="keyword">return</span> http.StatusInternalServerError</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ„Ÿæƒ³"><a href="#æ„Ÿæƒ³" class="headerlink" title="æ„Ÿæƒ³"></a>æ„Ÿæƒ³</h1><p>ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®ä¾‹å¤–ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®Tipsã«ã¤ã„ã¦è¨˜è¼‰ã—ã¾ã—ãŸã€‚</p><p>failure ã‚’åˆ©ç”¨ã—ãŸã»ã†ãŒã‚ˆã‚Šã‚·ãƒ³ãƒ—ãƒ«ã«æ›¸ã‘ã¦è‰¯ã„ã®ã§ã¯ãªã„ã‹ã¨æ„Ÿã˜ã¦ã„ã¾ã™ã€‚<br>ã¾ãŸã€ä»–ã®ãƒ¡ãƒªãƒƒãƒˆã¨ã—ã¦ã¯ä»¥ä¸‹ãŒã‚ã‚Šãã†ã§ã™ã€‚</p><ul><li>failureã§Wrapã™ã‚‹ã“ã¨ã§ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ãŒæ®‹ã‚‹</li><li>failureã®ä¾¿åˆ©é–¢æ•°ã‚’åˆ©ç”¨ã—ã¦ Error ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’æ–‡å­—åˆ—ä»¥å¤–ã®å½¢å¼ã§ä½œæˆã§ãã‚‹</li></ul><p>failureã¯å®Ÿæˆ¦ã§ä½¿ãˆã¦ãªã„ã®ã§ã€æ¬¡å›ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã¦ã¿ãŸã„ã§ã™ã€‚</p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href="https://blog.golang.org/go1.13-errors" target="_blank" rel="noopener">Working with Errors in Go 1.13 - The Go Blog</a></li><li><a href="https://pkg.go.dev/github.com/morikuni/failure?tab=doc" target="_blank" rel="noopener">failure package Â· go.dev</a></li><li><a href="https://speakerdeck.com/morikuni/designing-errors" target="_blank" rel="noopener">ã‚¨ãƒ©ãƒ¼è¨­è¨ˆã«ã¤ã„ã¦ / Designing Errors - Speaker Deck</a></li></ul><h2 id="é–¢é€£è¨˜äº‹"><a href="#é–¢é€£è¨˜äº‹" class="headerlink" title="é–¢é€£è¨˜äº‹"></a>é–¢é€£è¨˜äº‹</h2><p>Goã«é–¢é€£ã—ãŸä»–ã®é€£è¼‰ä¼ç”»ã§ã™ã€‚</p><ul><li><a href="/tags/Serverless%E9%80%A3%E8%BC%89/">Serverlessé€£è¼‰</a></li><li><a href="/tags/DynamoDB%C3%97Go/">DynamoDBÃ—Go</a></li><li><a href="/tags/GCP%E9%80%A3%E8%BC%89/">GCPé€£è¼‰</a></li><li><a href="/tags/GoCDK/">GoCDK</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;img src=&quot;/images/20200522/top.png&quot;&gt;

&lt;h1 id=&quot;æ¦‚è¦&quot;&gt;&lt;a href=&quot;#æ¦‚è¦&quot; class=&quot;headerlink&quot; title=&quot;æ¦‚è¦&quot;&gt;&lt;/a&gt;æ¦‚è¦&lt;/h1&gt;&lt;p&gt;TIG DXæ‰€å±ã®å¤šè³€ã§ã™ã€‚æœ€è¿‘ã¯è¨­è¨ˆã‚’ã—ã¤ã¤ Go ã‚‚è§¦ã‚Œã¦å¼•
      
    
    </summary>
    
      <category term="Programming" scheme="https://future-architect.github.io/categories/Programming/"/>
    
    
      <category term="Go" scheme="https://future-architect.github.io/tags/Go/"/>
    
      <category term="GoTipsé€£è¼‰" scheme="https://future-architect.github.io/tags/GoTips%E9%80%A3%E8%BC%89/"/>
    
  </entry>
  
  <entry>
    <title>Go Tipsé€£è¼‰4: GoDocã®èª­ã¿æ–¹</title>
    <link href="https://future-architect.github.io/articles/20200521/"/>
    <id>https://future-architect.github.io/articles/20200521/</id>
    <published>2020-05-21T13:23:40.000Z</published>
    <updated>2020-05-23T05:17:05.871Z</updated>
    
    <content type="html"><![CDATA[<p><a href="/tags/GoTipsé€£è¼‰/">Go Tipsé€£è¼‰</a>ã®ç¬¬4å¼¾ç›®ã§ã™ã€‚</p><p>æ–°ã—ã„ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã‚’å­¦ã¶ã¨ãã¯ã€ã¾ãšã€æƒ…å ±ã®å–å¾—ã®ä»•æ–¹ã‚’è¦šãˆã¦ãŠãã¨å­¦ç¿’åŠ¹ç‡ãŒä¸ŠãŒã‚Šã¾ã™ã€‚æ¤œç´¢ã—ã¦ã€æ—¥æœ¬èªã§èª°ã‹ãŒè§£èª¬ã—ã¦ã„ã‚‹äºŒæ¬¡æƒ…å ±ã‚’æ¢ã™ã®ã‚‚ã„ã„ã®ã§ã™ãŒã€å¤ããªã£ã¦ä½¿ãˆãªã‹ã£ãŸã‚Šã€äººæ°—ã®ã‚ã‚‹æƒ…å ±ã«åã£ã¦ã—ã¾ã£ã¦ã€ã¡ã‚‡ã£ã¨æ··ã¿å…¥ã£ãŸè©±ã«ãªã‚‹ã¨æƒ…å ±ãŒè¦‹ã¤ã‹ã‚‰ãªããªã£ãŸã‚Šã—ãŒã¡ã§ã™ã€‚å¤šå°‘ç´ ã£æ°—ãªãæ„Ÿã˜ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ä¸€æ¬¡æƒ…å ±ã‚’èª­ã¿è§£ãæ–¹æ³•ã‚’çŸ¥ã£ã¦ãŠãã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚æœ¬å®¶ãŒä½œã£ãŸã‚‚ã®ã§ã¯ãªãã¦ã‚‚ç¶²ç¾…çš„ã«ã€ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã¨ãªã‚‹å¿ƒæ„æ°—ã§æ›¸ã‹ã‚ŒãŸã‚‚ã®ã‚‚ãŸã¾ã«ã‚ã‚Šã¾ã™ã€‚</p><table><thead><tr><th align="center">ç¨®é¡</th><th align="center">åŒºåˆ†</th><th align="center">ç¿»è¨³</th><th align="left">è§£èª¬</th></tr></thead><tbody><tr><td align="center"><a href="https://tour.golang.org/welcome/1" target="_blank" rel="noopener">Tour of Go</a></td><td align="center">ä¸€æ¬¡</td><td align="center"><a href="https://go-tour-jp.appspot.com/welcome/1" target="_blank" rel="noopener">ã‚ã‚Š</a></td><td align="left">Goã®æ›¸ãæ–¹ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«</td></tr><tr><td align="center"><a href="https://golang.org/doc/effective_go.html" target="_blank" rel="noopener">Effective Go</a></td><td align="center">ä¸€æ¬¡</td><td align="center">ãƒ¡ãƒ³ãƒ†ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã¯ãªã—ï¼Ÿ</td><td align="left">Goã®ã‚³ãƒ¼ãƒ‰ã¯ã“ã†æ›¸ãã¹ãã¨ã„ã£ãŸæŒ‡æ¨™</td></tr><tr><td align="center"><a href="https://blog.golang.org/" target="_blank" rel="noopener">The Go Blog</a></td><td align="center">ä¸€æ¬¡</td><td align="center"><a href="https://www.ymotongpoo.com/works/goblog-ja/" target="_blank" rel="noopener">ã‚ã‚Š</a></td><td align="left">æ–°ã—ç›®ã®æ©Ÿèƒ½ãªã©å¤§ãã‚ã®ãƒˆãƒ”ãƒƒã‚¯ã«ã¤ã„ã¦è¨­è¨ˆæ€æƒ³ã¨ã‹è§£èª¬ãŒæ›¸ã‹ã‚Œã‚‹ã“ã¨ãŒã‚ã‚‹</td></tr><tr><td align="center"><a href="https://godoc.org/" target="_blank" rel="noopener">Go Doc</a></td><td align="center">ä¸€æ¬¡</td><td align="center">ï¾‘ï¾˜</td><td align="left">æ¨™æº–ãƒ»ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ†ã‚£ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹</td></tr><tr><td align="center"><a href="https://github.com/golang/go/wiki" target="_blank" rel="noopener">Go Wiki</a></td><td align="center">ä¸€æ¬¡</td><td align="center"></td><td align="left">æ–‡æ³•ã®è§£èª¬ã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£æƒ…å ±ãªã©ã„ã‚ã„ã‚ã‚ã£ãŸã‚Š</td></tr><tr><td align="center"><a href="https://golang.org/doc/devel/release.html" target="_blank" rel="noopener">Release Notes</a></td><td align="center">ä¸€æ¬¡</td><td align="center">Qiitaç­‰ã«æœ‰å¿—ãŒè¨³ã—ãŸã‚‚ã®ãŒã‚ãŒã‚‹</td><td align="left">æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®å·®åˆ†ã¯ã“ã“</td></tr><tr><td align="center"><a href="https://gobyexample.com/" target="_blank" rel="noopener">Go by Example</a></td><td align="center">äºŒæ¬¡</td><td align="center"><a href="https://oohira.github.io/gobyexample-jp/" target="_blank" rel="noopener">ã‚ã‚Š</a></td><td align="left">ç´°ã‹ã„æ›¸ãæ–¹ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰é›†</td></tr><tr><td align="center"><a href="https://yourbasic.org/golang/go-java-tutorial/" target="_blank" rel="noopener">Java to Go in-depth tutorial</a></td><td align="center">äºŒæ¬¡</td><td align="center"><a href="https://future-architect.github.io/articles/20200311/">ã‚ã‚Š</a></td><td align="left">æ—¢å­˜ã®è¨€èªãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãŸã‚ã®Goå…¥é–€</td></tr></tbody></table><p>ä»Šå›ã¯ã€GoDocã«ã¤ã„ã¦å–ã‚Šä¸Šã’ã¾ã™ã€‚</p><p>é•·ã„ã®ã§3è¡Œã«ã¾ã¨ã‚ã‚‹ã¨</p><ul><li>GoDocã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã¯ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã¨ã£ã¦ã¯ä¸€æ¬¡æƒ…å ±ã ãŒã€ä½¿ã„æ–¹ãªã©ã¯ãƒªãƒã‚¸ãƒˆãƒªã®READMEã«æ›¸ã‹ã‚Œã‚‹ã“ã¨ã‚‚å¤šã„</li><li>æ§‹é€ ä½“ã‚„ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã¯ã€ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã ã‘ã‚’è¦‹ã¦ã‚‚ä½¿ã„æ–¹ãŒã‚ã‹ã‚‰ãªã„ã“ã¨ã‚‚ã‚ã‚‹ã®ã§ã€åˆ†ã‹ã‚‰ãªã„ã‹ã‚‰ã¨ã„ã£ã¦è½ã¡è¾¼ã¾ãªã„ã§ãã ã•ã„</li><li>ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚‚åˆã‚ã›ã¦ç¢ºèªã—ã¦ä½¿ã„æ–¹ã‚’ç¢ºèªã™ã‚‹ã¨è‰¯ã„ã§ã™</li></ul><h1 id="GoDoc"><a href="#GoDoc" class="headerlink" title="GoDoc"></a>GoDoc</h1><p>GoDocã¯æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚„ã€ä»–ã®ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ†ã‚£è£½ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ãƒ›ã‚¹ãƒˆã—ã¦ã„ã‚‹ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã«ãªã‚Šã¾ã™ã€‚ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ãªã©ã¯ä¸€åº¦ã‚¯ãƒªã‚¢ã—ãŸã‚‰è¦‹è¿”ã™ã“ã¨ã‚‚ã‚ã¾ã‚Šãªã„ã§ã—ã‚‡ã†ã‘ã©ã‚‚ã€GoDocã¯Goã§é–‹ç™ºã—ã¦ã„ã‚‹é™ã‚Šã€ãšã£ã¨å‚ç…§ã—ç¶šã‘ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚GoDocã®èª­ã¿æ–¹ã‚’çŸ¥ã£ã¦ãŠãã“ã¨ã¯ã€GoåŠ›ã‚’ã‚ã’ã‚‹ã«ã¯å¿…é ˆãªã‚¹ã‚­ãƒ«ã ã¨æ€ã„ã¾ã™ã€‚</p><p>GoDocã®URLã¯ä»¥ä¸‹ã®é€šã‚Šã®å ´æ‰€</p><ul><li><a href="https://pkg.go.dev/" target="_blank" rel="noopener">https://pkg.go.dev/</a></li></ul><p>ä»¥å‰ã¯ã“ã¡ã‚‰ã§ã€æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ¤œç´¢ã™ã‚‹ã¨ã“ã£ã¡ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¨æ€ã„ã¾ã™ãŒã€ä¸Šã®ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã®ã€always use pkg.go.devã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ä¸Šè¨˜ã®URLã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã‚Œã¾ã™ã€‚</p><ul><li><a href="https://godoc.org/" target="_blank" rel="noopener">https://godoc.org/</a></li></ul><h1 id="æ›¸ã„ã¦ã‚ã‚‹å†…å®¹"><a href="#æ›¸ã„ã¦ã‚ã‚‹å†…å®¹" class="headerlink" title="æ›¸ã„ã¦ã‚ã‚‹å†…å®¹"></a>æ›¸ã„ã¦ã‚ã‚‹å†…å®¹</h1><p>æœ€è¿‘äººæ°—ã®chiã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¡¨ç¤ºã—ã¦ã¿ã¾ã—ãŸã€‚</p><img src="/images/20200521/1.png"><p>ä¸Šã‹ã‚‰ã€importã™ã‚‹ã¨ãã®åå‰ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãªã©ãŒæ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚<br>ãã®ä¸‹ã¯æ›´æ–°æ—¥æ™‚ã€ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒšãƒ¼ã‚¸ã§ã™ã€‚</p><p>ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã„ã†ã®ã¯ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨ã‹ã‚‚å«ã‚ãŸå…±é€šã®ãƒ«ãƒ¼ãƒˆãƒšãƒ¼ã‚¸ã§ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ãŒãŠã„ã¦ã‚ã‚‹ãƒªãƒã‚¸ãƒˆãƒªã®ãƒªãƒ³ã‚¯ã‚„ã€ãƒªãƒã‚¸ãƒˆãƒªã®Readmeãªã©ãŒæ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚</p><p>ãã®ä¸‹ã®ã‚¿ãƒ–ã¯ã€è‰²ã€…ãªæƒ…å ±ã¸ã®ãƒãƒ–ã«ãªã£ã¦ã„ã¾ã™ã€‚</p><ul><li>Doc: å®Ÿéš›ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ<ul><li>ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã¨æ¦‚è¦</li></ul></li><li>Overview: ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨åŒã˜</li><li>Versions: ä»Šã¾ã§å…¬é–‹ã•ã‚ŒãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ä¸€è¦§</li><li>Imports: ã©ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ä¾å­˜ã—ã¦ã„ã‚‹ã‹ï¼Ÿ</li><li>Imported By: ã©ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‹ã‚‰åˆ©ç”¨ã•ã‚Œã¦ã„ã‚‹ã‹ï¼Ÿäººæ°—ãªã‚‚ã®ã»ã©å¤šã„</li><li>License: ãƒ©ã‚¤ã‚»ãƒ³ã‚¹</li></ul><h1 id="ã¾ãšèª­ã‚€ã¨ã“ã‚"><a href="#ã¾ãšèª­ã‚€ã¨ã“ã‚" class="headerlink" title="ã¾ãšèª­ã‚€ã¨ã“ã‚"></a>ã¾ãšèª­ã‚€ã¨ã“ã‚</h1><p>ã„ããªã‚Šãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚’èª­ã¿ãŸã„äººã‚‚ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ãµã¤ã†ã¯æ¦‚è¦ã‚’ç†è§£ã—ãŸã„ã§ã™ã‚ˆã­ï¼ŸGoã®å ´åˆã¯2ç®‡æ‰€ã‚ã‚Šã¾ã™ã€‚</p><ul><li>Docã®Overview</li><li>ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒšãƒ¼ã‚¸ã®README</li></ul><p>Goã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ä¸­ã®ã‚³ãƒ¡ãƒ³ãƒˆã¨ã—ã¦æ›¸ã„ãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã‚ã‚Œã°å‰è€…ã«ã€ãƒªãƒã‚¸ãƒˆãƒªã®READMEã«æ›¸ã‹ã‚ŒãŸå†…å®¹ã§ã‚ã‚Œã°å¾Œè€…ã«æ¦‚è¦ãŒæ›¸ã‹ã‚Œã¾ã™ã€‚æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å ´åˆã¯å‰è€…ã—ã‹ãªã„ã§ã™ãŒã€ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã®å ´åˆã€å¾Œè€…ã®æ–¹ãŒãƒªãƒƒãƒã«ä¸å¯§ã«æ›¸ã‹ã‚Œã‚‹ã“ã¨ãŒå¤šã„ã‚ˆã†ã«æ€ã„ã¾ã™ã€‚ã©ã¡ã‚‰ã«è©³ã—ã„æƒ…å ±ãŒæ›¸ã‹ã‚Œã‚‹ã‹ã¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å®Ÿè£…è€…æ¬¡ç¬¬ãªã®ã§ä¸¡æ–¹è¦‹ã¦è¦‹ã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚</p><h1 id="ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰"><a href="#ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰" class="headerlink" title="ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰"></a>ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰</h1><p>æ¦‚è¦ã‚’æŠŠæ¡ã—ãŸã¨ã“ã‚ã§ã€ã©ã†æ›¸ãã®ã‹ã‚’è¦‹ã¦è¦‹ãŸã„äººã‚‚ã„ã‚‹ã§ã—ã‚‡ã†ã€‚ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’æ¢ã—ã¦è¦‹ã¾ã—ã‚‡ã†ã€‚Docã®Overviewã«ã¯3ç®‡æ‰€ã€ã‚µãƒ³ãƒ—ãƒ«ãŒç½®ã‹ã‚Œã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹å ´æ‰€ãŒã‚ã‚Šã¾ã™ã€‚</p><ol><li>Docã®Overviewã‚„å„ãƒ¡ã‚½ãƒƒãƒ‰ã®èª¬æ˜: Goã®ã‚³ãƒ¡ãƒ³ãƒˆã®æµå„€ã«å¾“ã£ã¦ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã•ã‚Œã¦ã„ã‚‹ã‚µãƒ³ãƒ—ãƒ«</li><li>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å…¨ä½“ã®ã‚µãƒ³ãƒ—ãƒ«ã¯ã€ï¼ˆã‚ã‚Œã°ï¼‰Docã®Overviewã®æœ«å°¾ã«ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ãŒç½®ã‹ã‚Œã‚‹</li><li>å„æ§‹é€ ä½“ã‚„é–¢æ•°ã€ãƒ¡ã‚½ãƒƒãƒ‰ã®ã‚µãƒ³ãƒ—ãƒ«ã¯ã€ãã‚Œãã‚Œã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã®ä¸­ã«æ›¸ã‹ã‚Œã‚‹</li></ol><p>chiã¯ã“ã®æœ€åˆã®1ã®å½¢å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒæ›¸ã‹ã‚Œã¦ã„ã¾ã—ãŸã€‚</p><p>2ã¤ç›®ã¨3ã¤ç›®ã¯chiã«ã¯ãªã‹ã£ãŸã®ã§ã€æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®database/sqlãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã¦è¦‹ã¾ã—ã‚‡ã†ã€‚Overviewã®ä¸‹ã«ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ¬ãƒ™ãƒ«ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ãŒ2ã¤ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚â–¼ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p><img src="/images/20200521/2.png"><p>ãƒ¡ã‚½ãƒƒãƒ‰ãªã©ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€ãã‚Œãã‚Œã®èª¬æ˜ã®ãƒ†ã‚­ã‚¹ãƒˆã®å¾Œã‚ã«ã‚µãƒ³ãƒ—ãƒ«ãŒç½®ã‹ã‚Œã¦ã„ã¾ã™ã€‚</p><img src="/images/20200521/3.png"><p>Goã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ãŠã‘ã‚‹ã‚µãƒ³ãƒ—ãƒ«ã¨ã„ã†ã®ã¯ã€ã‚µãƒ³ãƒ—ãƒ«ã®å½¢ã‚’æ¨¡ã—ãŸãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã ã£ãŸã‚Šã—ã¾ã™ã€‚ã‚‚ã—ã€æœŸå¾…ã™ã‚‹ã‚³ãƒ¼ãƒ‰ãŒãªã‘ã‚Œã°ã€ãƒªãƒã‚¸ãƒˆãƒªã®ã‚µãƒ³ãƒ—ãƒ«ã‚’è¦‹ã¦è¦‹ã¦ã‚‚ã„ã„ã§ã—ã‚‡ã†ã€‚<code>_example.go</code>ã‚ã‚‹ã„ã¯ã€<code>_test.go</code>ã¨ã„ã£ãŸãƒ•ã‚¡ã‚¤ãƒ«ã«å…¥ã£ã¦ã„ã¾ã™ã€‚<code>Example</code>ã‹ã‚‰å§‹ã¾ã‚‹é–¢æ•°ãŒã‚µãƒ³ãƒ—ãƒ«ã€<code>Test</code>ã‹ã‚‰å§‹ã¾ã‚‹é–¢æ•°ãŒãƒ†ã‚¹ãƒˆã§ã™ã€‚</p><p>ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã€ã“ã‚Œã‚‰ã®ã©ã“ã«ã‚‚ãªã‹ã£ãŸå ´åˆã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒšãƒ¼ã‚¸ã®READMEã«ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã“ã¡ã‚‰ã¯Markdownãªã®ã§ã€ã‚µãƒ³ãƒ—ãƒ«ã§ã‚‚ãªã‚“ã§ã‚‚è‡ªç”±ã«æ›¸ã‘ã¾ã™ã€‚ã“ã®ä¸­ã«ã‚µãƒ³ãƒ—ãƒ«ã‚‚æ›¸ã‹ã‚Œã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚</p><h1 id="ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹"><a href="#ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹" class="headerlink" title="ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹"></a>ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹</h1><p>ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã¯Docã‚¿ãƒ–ã®Indexã¨ã„ã†é …ç›®ä»¥ä¸‹ã«ã‚ã‚Šã¾ã™ã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã§ã™ã€‚</p><img src="/images/20200521/4.png"><p>ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã¯ä»¥ä¸‹ã®é †ç•ªã«ä¸¦ã‚“ã§ã„ã¾ã™ã€‚</p><ul><li>Constants: å®šæ•°ä¸€è¦§</li><li>Variables: å¤‰æ•°ä¸€è¦§</li><li>func â€¦ã®å„é …ç›®: ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å†…ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹é–¢æ•°</li><li>type â€¦ã®å„é …ç›®: ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å†…ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹å‹ï¼ˆæ§‹é€ ä½“ã€åå‰ä»˜ãå‹ã€ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ï¼‰</li></ul><p>å®šæ•°ã€å¤‰æ•°ã¯åå‰ã¨ã‹å‹ã‚’ç¢ºèªã™ã‚‹ãã‚‰ã„ã ã¨æ€ã„ã¾ã™ã—ã€é–¢æ•°ã‚„å‹ã®èª¬æ˜ã®ä¸­ã§å‚ç…§ã•ã‚Œã‚‹ã®ã§ã€ãã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§èª­ã‚€ã“ã¨ã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚é–¢æ•°ã‚‚ã€èª­ã¿æ–¹ã¨ã—ã¦ã¯ç‰¹ã«é›£ã—ãã¯ãªã„ã¨æ€ã„ã¾ã™ã€‚ã“ã“ã§ã¯typeã®å„é …ç›®ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ã€‚</p><p>è¦æ³¨æ„ãƒã‚¤ãƒ³ãƒˆã¨ã—ã¦ã¯ã€GoDocã¯ãã®ã‚µãƒ¼ãƒ“ã‚¹ãŒèµ·å‹•ã—ã¦ã„ã‚‹OSå‘ã‘ã®è¦ç´ ã—ã‹è¡¨ç¤ºã—ã¾ã›ã‚“ã€‚osãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã¯Windowsç”¨ã®è¦ç´ ã ã£ãŸã‚Šã¨ã‹ã‚‚ã‚ã£ãŸã‚Šã—ã¾ã™ãŒã€pkg.go.devã¯Linuxã§å‹•ä½œã—ã¦ãŠã‚Šã€ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚‚Linuxã§æœ‰åŠ¹ãªé …ç›®ã®ã¿ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã®ãƒãƒƒãƒã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¨ã‹ã‚’ä½œæˆã™ã‚‹å ´åˆã«ã¯æ³¨æ„ã—ã¦ãã ã•ã„ã€‚</p><h2 id="æ§‹é€ ä½“"><a href="#æ§‹é€ ä½“" class="headerlink" title="æ§‹é€ ä½“"></a>æ§‹é€ ä½“</h2><p>typeã®ã†ã¡ã€æ§‹é€ ä½“ã¯çµæ§‹ã€ä»–ã®è¨€èªã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã™ã‚‹ã¨åˆè¦‹æ®ºã—ãªæ°—ãŒã—ã¾ã™ã€‚ãŸã„ã¦ã„ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã‚‹ã¨ã€Œã‚ã€ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã‚“ã§ã‚ã’ã‚Œã°ã€ã‚„ã‚ŠãŸã„ã“ã¨ãŒã§ããã†ã ã€ã¨ã„ã†ã®ã¯æŠŠæ¡ã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚ã—ã‹ã—ã€ãã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ã©ã†å‘¼ã‚“ã§ã‚ã’ã‚Œã°ã„ã„ã®ã‹ã€ã§è©°ã¾ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ãƒ™ãƒ†ãƒ©ãƒ³ã§ã‚ã£ã¦ã‚‚ã€‚</p><img src="/images/20200521/5.png"><p>æ§‹é€ ä½“ã®èª¬æ˜ã¯ã¾ãšã¯Goã®å®šç¾©ã‚³ãƒ¼ãƒ‰ã»ã¼ãã®ã¾ã¾ï¼ˆprivateãªè¦ç´ ä»¥å¤–ï¼‰ãŒæ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚</p><p>ã•ã¦ã€ã“ã®æ§‹é€ ä½“ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œã£ã¦ä½¿ã†ã«ã¯ã©ã†ã™ã‚Œã°ã„ã„ã§ã—ã‚‡ã†ã‹ï¼ŸGoã®æ–‡æ³•çš„ã«ã¯3é€šã‚Šã‚ã‚Šã¾ã™(newã¯ã‚ã‚“ã¾ã‚Šè¦‹ãªã„ã®ã§çœç•¥)ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// cã¯ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹</span></span><br><span class="line"><span class="keyword">var</span> c Context</span><br><span class="line"><span class="comment">// cã¯ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ï¼ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®åˆæœŸåŒ–ã‚‚ã§ãã‚‹ï¼‰</span></span><br><span class="line">c := Context&#123;&#125;</span><br><span class="line"><span class="comment">// cã¯ãƒã‚¤ãƒ³ã‚¿ï¼ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®åˆæœŸåŒ–ã‚‚ã§ãã‚‹ï¼‰</span></span><br><span class="line">c := &amp;Context&#123;&#125;</span><br></pre></td></tr></table></figure><p>ãã‚Œä»¥å¤–ã«ã€ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚’è¦‹ã‚‹ã¨ã€ãƒ¬ã‚·ãƒ¼ãƒãƒ¼ãŒã¤ã„ã¦ãªã„ãƒ¡ã‚½ãƒƒãƒ‰ãŒæ§‹é€ ä½“ã®ãƒ¡ã‚½ãƒƒãƒ‰ä¸€è¦§ã®å…ˆé ­ã«ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿é–¢æ•°ã¨ã‹ãƒ•ã‚¡ã‚¯ãƒˆãƒªé–¢æ•°ã¨å‘¼ã°ã‚Œã¦ã„ã‚‹ã‚‚ã®ã§ã€å¿…è¦ãªå±æ€§ã‚’æŒã£ãŸã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã—ã€ãã®ãƒã‚¤ãƒ³ã‚¿ã‚„å®Ÿä½“ã‚’è¿”ã™ã‚‚ã®ã§ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Context</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">NewRouteContext</span><span class="params">()</span> *<span class="title">Context</span></span></span><br><span class="line"><span class="function">    <span class="title">func</span> <span class="title">RouteContext</span><span class="params">(ctx context.Context)</span> *<span class="title">Context</span></span></span><br></pre></td></tr></table></figure><p>ã“ã‚Œã‚‰ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ä½œæˆæ–¹æ³•ã®ã†ã¡ã€ã©ã®æ‰‹æ³•ã§ä½œã‚Œã°ã„ã„ã®ã‹ã€ã¨ã„ã†ã®ã¯ãã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã‚ˆã£ã¦é•ã„ã¾ã™ã€‚</p><ul><li>ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼é–¢æ•°ãŒã‚ã‚‹ã‚‚ã®ã§ã‚ã‚Œã°ã€ã»ã¼ãã‚Œã§ã„ã„ã¯ãš<ul><li>ãƒ¡ãƒ³ãƒãƒ¼å¤‰æ•°ã«privateãªã‚‚ã®ãŒã‚ã‚Šã€ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼é–¢æ•°ã§ã®ã¿åˆæœŸåŒ–ã¨ã„ã†å ´åˆã¯ç¢ºåº¦ãŒé«˜ã„</li><li>ãŸã ã—ã€ãã®ä¸­ã«ã‚‚Goã®æ–‡æ³•ã§ä½œã£ã¦ã‚‚å‹•ä½œã™ã‚‹ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãªã‚‚ã®ã¨ã‹ã‚‚ã‚ã‚‹</li></ul></li><li>è‡ªåˆ†ã§ä½œã‚‰ãšã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å†…éƒ¨ã§ä½œã£ã¦ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã ã‘æ¸¡ã£ã¦ãã‚‹ã‚‚ã®ã‚‚ã‚ã‚‹ã€‚net/httpã®ã‚µãƒ¼ãƒãƒ¼ã®ãƒãƒ³ãƒ‰ãƒ©ã®Requestã¨ã‹</li><li>Goã®æ–‡æ³•ã§ä½œæˆã™ã‚‹ã‚‚ã®ã®ã†ã¡ã€ã‚³ãƒ”ãƒ¼ä¸èƒ½ã§ãƒã‚¤ãƒ³ã‚¿å‹ã§å–ã‚Šæ‰±ã‚ãªã„ã¨ã„ã‘ãªã„ã‚‚ã®ã‚‚ã‚ã‚Š</li></ul><p>ã©ã®æ‰‹æ³•ã§æ§‹é€ ä½“ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œã‚Œã°ã„ã„ã®ã‹ã€ã¨ã„ã†ã®ã¯ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¨ã‹ã‚’è¦‹ã¦åˆ¤æ–­ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚</p><p>èª­ã¿æ‰‹ã®æ°—æŒã¡ã‚’è€ƒãˆã‚‹ã¨ã€ä½•ã‹ã—ã‚‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½œã£ã¦æ§‹é€ ä½“ã‚’æä¾›ã™ã‚‹ã¨ãã¯ã€ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼é–¢æ•°ã‚’ä½œã£ã¦æä¾›ã—ã¾ã—ã‚‡ã†ã€ã¨ã„ã†ã®ãŒãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã«ãªã‚‹æ°—ãŒã—ã¾ã™ã€‚</p><h2 id="åå‰ä»˜ãå‹-named-type"><a href="#åå‰ä»˜ãå‹-named-type" class="headerlink" title="åå‰ä»˜ãå‹(named type)"></a>åå‰ä»˜ãå‹(named type)</h2><p>Goã§ã¯ã€ãƒ¡ãƒ¢ãƒªä¸Šã®å®Ÿæ…‹ã¯åŒã˜ã ã‘ã©ã€åˆ¥ã®å‹ã¨ã—ã¦æŒ¯ã‚‹èˆã‚ã›ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚ä¾‹ãˆã°ã€ç”»é¢ã«è¡¨ç¤ºã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã‚¢ã‚¹ã‚¿ãƒªã‚¹ã‚¯ã«å¡—ã‚Šã¤ã¶ã™æ–‡å­—åˆ—å‹ã€ã¿ãŸã„ãªã“ã¨ãŒã§ãã¾ã™ï¼ˆã“ã‚Œã¯%vã¨ã‹ã§ãƒ€ãƒ¡ãªã®ã§ç°¡æ˜“å®Ÿè£…ã§ã™ã€‚ã“ã®ã¾ã¾åˆ©ç”¨ã¯ã—ãªã„ã§ãã ã•ã„ï¼‰ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> SecretString <span class="keyword">string</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s SecretString)</span> <span class="title">String</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">result := <span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="built_in">len</span>(s))</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(s); i++ &#123;</span><br><span class="line">result[i] = <span class="string">'*'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">string</span>(result)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã“ã‚Œã‚‚ã€ä¾‹ãˆã°åˆ—æŒ™å‹ã®ã‚ˆã†ãªã‚‚ã®ã‚’ä½œã£ãŸã‚Šã™ã‚‹ã«ã¯ä¾¿åˆ©ãªæ–¹æ³•ã§ã™ã€‚ã—ã‹ã—ã€ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚’è¦‹ã¦ã‚‚ã€ã“ã®å‹ã‚’ã©ã†ä½œã‚‹ã®ã‹ã®èª¬æ˜ãŒã•ã‚Œã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã“ã‚Œã¯ã©ã†ã‚„ã£ã¦ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œã‚Œã°ã„ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿä½œã‚Šæ–¹ã¨ã—ã¦ã¯æ¬¡ã®ã‚ˆã†ãªæ„Ÿã˜ã«ãªã‚Šã¾ã™ã­ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‹ã‚­ãƒ£ã‚¹ãƒˆ</span></span><br><span class="line">s := <span class="string">"important credential"</span> <span class="comment">// sã¯string</span></span><br><span class="line">ss := SecretString(s)       <span class="comment">// ã“ã“ã§ã‚­ãƒ£ã‚¹ãƒˆã€‚ssã¯SecretString</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ€åˆã‹ã‚‰ãã®å‹ã§å®£è¨€</span></span><br><span class="line"><span class="keyword">var</span> ss SecretString = <span class="string">"secret password"</span></span><br></pre></td></tr></table></figure><p>ã“ã‚Œã§ã€ã©ã¡ã‚‰ã‚‚ssãŒSecretStringå‹ã«ãªã‚‹ã®ã§ã€ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã«æ›¸ã‹ã‚Œã¦ã„ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><p>å ´åˆã«ã‚ˆã£ã¦ã¯ã€Constantsã®å®šæ•°ã¨ã—ã¦äº‹å‰ã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã®ã¿ã‚’ä½¿ã†ã¨ã„ã†æµå„€ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚‚ã‚ã‚Šã¾ã™ã€‚ãã®å ´åˆã¯ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œã‚‰ãšã«ã€importã—ã¦åˆ©ç”¨ã™ã‚‹ã ã‘ã§ã„ã‘ã¾ã™ã€‚ã©ã®æ–¹æ³•ã§ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’åˆ©ç”¨ã™ã‚Œã°ã„ã„ã®ã‹ã¯å®Ÿè£…æ¬¡ç¬¬ãªã®ã§ã€ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¨ã‹ã‚’è¦‹ã¦ã¿ã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚</p><h2 id="ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹"><a href="#ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹" class="headerlink" title="ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹"></a>ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹</h2><p>ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã‚‚ã€ä¾¿åˆ©ãªãƒ¡ã‚½ãƒƒãƒ‰ã¯è¦‹ã¤ã‘ãŸãŒã€ã©ã†ã‚„ã£ã¦ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å–å¾—ã™ã‚Œã°ã„ã„ã®ã‹ã‚ã‹ã‚‰ãªã„ç­†é ­ã§ã™ã€‚ã“ã‚Œã¯ãƒ™ãƒ†ãƒ©ãƒ³ã§ã‚‚åˆè¦‹ã§ã¯åˆ†ã‹ã‚‰ãªã„ã“ã¨å¤šæ•°ã§ã™ã€‚åˆ†ã‹ã‚‰ãªã„ã‹ã‚‰ã¨ã„ã£ã¦è½ã¡è¾¼ã¾ãªã„ãã ã•ã„ã€‚ã¿ã‚“ãªåˆ†ã‹ã‚‰ãªã„ã®ã§ã™ã€‚</p><p>ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã¯ã€ã¨ã‚ã‚‹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒã€ãã®ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æŒã£ã¦ã„ã‚‹ã€ã¨ã„ã†ã ã‘ã®æƒ…å ±ã—ã‹ã‚ã‚Šã¾ã›ã‚“ã€‚ä¸»ã«4é€šã‚Šã‚ã‚Šã¾ã™ã€‚2ç•ªç›®ã®ã‚‚ã®ã¯ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒ‰ã§ã¯ãªããƒ­ãƒ¼ã‚«ãƒ«ã§å‹•ä½œã™ã‚‹<a href="https://qiita.com/shibukawa/items/8c70fdd1972fad76a5ce#godoc%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%81%AB%E3%82%88%E3%82%8B%E9%9D%99%E7%9A%84%E8%A7%A3%E6%9E%90" target="_blank" rel="noopener">godocã‚³ãƒãƒ³ãƒ‰ã®è§£ææ©Ÿèƒ½</a>ã‚’åˆ©ç”¨ã™ã‚‹ã¨ç™ºè¦‹ã§ãã¾ã™ã€‚ç™ºè¦‹ã§ããŸå¾Œã¯ã€ã“ã®ä¸Šã®ç¯€ã®æ§‹é€ ä½“ã‚’ã©ã†ã™ã‚‹å•é¡Œã«é·ç§»ã—ã¾ã™ã€‚æœ€å¾Œã®ã‚‚ã®ã¯ä»Šã®ã¨ã“ã‚åƒ•ãŒè¦‹ãŸã“ã¨ãŒã‚ã‚‹ã®ã¯net/httpã®Pusherã¨ã‹ã ã‘ã§ã™ã®ã§ç„¡è¦–ã—ã¦ã‚‚ã„ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><ul><li>è‡ªåˆ†ã§ä½œã‚‹<ul><li>ãã®ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æº€ãŸã™ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æŒã£ãŸæ§‹é€ ä½“ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä½œæˆã—ã¦ãã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ä»–ã®ãƒ¡ã‚½ãƒƒãƒ‰ã«æ¸¡ã›ã°ã„ã„ã®ã‹</li></ul></li><li>æ—¢æˆã®æ§‹é€ ä½“ãŒã“ã®ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æº€ãŸã—ã¦ã„ã‚‹<ul><li>ä½•ã‹ã—ã‚‰ã®æ§‹é€ ä½“ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œã‚‹ã¨ã€ãã®ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æº€ãŸã—ã¦ã€ãã®ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã®å‹ã®å¤‰æ•°ã«ä»£å…¥ã—ãŸã‚Šã€ãƒ¡ã‚½ãƒƒãƒ‰ã®å¼•æ•°ã«æ¸¡ã›ã‚‹ã‚ˆã†ã«ãªã‚‹</li></ul></li><li>ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒä½œæˆã—ã¦ãã‚Œã‚‹ã‚‚ã®<ul><li>net/httpã®ResponeWriterãªã©</li></ul></li><li>ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹é–“ã®ã‚­ãƒ£ã‚¹ãƒˆ<ul><li>ç‰¹å®šã®ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚­ãƒ£ã‚¹ãƒˆã™ã‚‹ã¨ã€ãã®ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ãŒå¾—ã‚‰ã‚Œã¦ãƒ¡ã‚½ãƒƒãƒ‰ãŒåˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹</li></ul></li></ul><p>ã“ã‚Œã®ã©ã‚Œã«å½“ãŸã‚‹ã‹ã¯ã€ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã ã‘ã‚’è¦‹ã¦ã‚‚ã•ã£ã±ã‚Šè¦‹ãˆã¦ã“ãªã„ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã‚‚ç´ ç›´ã«ã€ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ãªã©ã‚’å‚ç…§ã™ã‚‹ã‚ˆã†ã«ã—ãŸæ–¹ãŒè‰¯ã„ã§ã—ã‚‡ã†ã€‚</p><p>ã“ã‚Œã‚’èª­ã‚“ã§ã„ã‚‹ä¸Šç´šè€…ã®æ–¹ã€…ã¯ã€ã‚‚ã—ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®Ÿè£…ã—ã¦ä»–ã®äººã«ä½¿ã£ã¦ã‚‚ã‚‰ãŠã†ã¨æ€ã£ã¦ã„ã‚‹ã®ã§ã‚ã‚Œã°ã€å¿…ãšã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ãˆã‚‹ä½ç½®ã«ç½®ã„ã¦ã‚ã’ã¦ãã ã•ã„ã€‚ç§ã‹ã‚‰ã®ä¸€ç”Ÿã®ãŠé¡˜ã„ã§ã™ã€‚</p><h2 id="å¼•æ•°ã®interface"><a href="#å¼•æ•°ã®interface" class="headerlink" title="å¼•æ•°ã®interface{}"></a>å¼•æ•°ã®<code>interface{}</code></h2><p>Goã¯é™çš„å‹ä»˜ã‘è¨€èªã§ã¯ã‚ã‚‹ã‚‚ã®ã®ã€ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä½¿ã£ã¦ã‚ã‚‹ç¨‹åº¦å‹•çš„å‹ä»˜ã‘è¨€èªã®ã‚ˆã†ãªå‹•ä½œã‚’ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã‚ˆã£ã¦ã¯ã€ã€Œã‚ã‚‹ç¨‹åº¦ã©ã‚“ãªå‹ã§ã‚‚å—ã‘ä»˜ã‘ã¾ã™ã‚ˆã€ã¨ã„ã†ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚Goã®<code>interface{}</code>å‹ã¯ä»–ã®è¨€èªã§ã„ã†<code>any</code>ã ã£ãŸã‚Š<code>void *</code>ã ã£ãŸã‚Šã—ã¾ã™ã€‚ä¾‹ãˆã°ã€Goã§JSONã‚’æ‰±ãŠã†ã€ã¨ãªã‚‹ã¨ã“ã®<a href="https://golang.org/pkg/encoding/json/#Marshal" target="_blank" rel="noopener">interface{}</a>ãŒç™»å ´ã—ã¾ã™ã€‚</p><p>ã§ã€ã“ã„ã¤ã‚’ã©ã†ã‚„ã£ã¦ä½œã‚Œã°ã„ã„ã®ã‹ã€ã¨ã„ã†ã®ã‚‚ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã®é–¢æ•°ã®å®šç¾©ã‚’ã„ãã‚‰ã«ã‚‰ã‚ã£ã“ã—ã¦ã‚‚å‡ºã¦ãã¾ã›ã‚“ã€‚æ•°å­—ã§ã‚‚æ–‡å­—åˆ—ã§ã‚‚å—ã‘ã¤ã‘ã¾ã™ã‚ˆã€ã¨ã„ã†ã“ã¨ã§<code>interface{}</code>ã«ã—ã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã—ã€ä¸Šè¨˜ã®JSONã®å ´åˆã¯ã€è‡ªä½œã®æ§‹é€ ä½“ã‚’ä½œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãã®æ§‹é€ ä½“ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã¯ã‚¿ã‚°ã‚’ä»˜ä¸ã—ã¾ã™ã€‚ã“ã®ã‚¿ã‚°ã«ã¯DSLã¨ã„ã†ã‹ãƒ«ãƒ¼ãƒ«ãŒã‚ã‚‹ã®ã§ã™ãŒã€ã“ã®ãƒ«ãƒ¼ãƒ«ã¯é–¢æ•°ã®å¼•æ•°ã¨ã‹ã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚’ç©´ãŒã‚ãã»ã©è¦‹ã¦ã‚‚åˆ†ã‹ã‚Šã¾ã›ã‚“ã€‚ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ä½œè€…ãŒè‡ªç„¶è¨€èªã§è§£èª¬ã‚’æ›¸ãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã¾ãŸJSONã¨ã‹ã‚‚ã‚¿ã‚°ã‚’æ›¸ã‹ãªã‹ã£ãŸå ´åˆã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå‹•ä½œã¿ãŸã„ãªã®ã‚‚ã‚ã£ãŸã‚Šã—ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> MyStruct <span class="keyword">struct</span> &#123;</span><br><span class="line">    Name <span class="keyword">string</span>         <span class="string">`json:"name"`</span></span><br><span class="line">    SessionToken <span class="keyword">string</span> <span class="string">`json:"-"`</span></span><br><span class="line">    NickName <span class="keyword">string</span>     <span class="string">`json:"nickname,omitempty"`</span></span><br><span class="line">    Age <span class="keyword">int</span>             <span class="string">`json:"num,string"`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã“ã®<code>interface{}</code>ã¯è‡ªç„¶è¨€èªéƒ¨åˆ†ã®èª¬æ˜ã¨ã‹ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’å‚ç…§ã™ã‚‹ã®ãŒè‰¯ã„ã§ã—ã‚‡ã†ã€‚</p><h1 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h1><p>ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚’å­¦ã¶ã¨ã€ä¸€æ¬¡æƒ…å ±ã«ã‚ãŸã‚Œã€ã¿ãŸã„ãªã“ã¨ã¯ã‚ˆãè¨€ã‚ã‚Œã¾ã™ã€‚ä»Šå›ã¯ã€ãã®ä¸­ã§GoDocã®èª­ã¿æ–¹ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã—ãŸã€‚ã‚€ã—ã‚ã€GoDocèª­ã‚“ã§ã‚‚ã“ã“ã¯é›£ã—ã„ãã€ã¨ã„ã†ã®ã‚’ç†è§£ã—ã¦ã‚‚ã‚‰ã‚Œã°ã€GoDocã¨ã†ã¾ãæŠ˜ã‚Šåˆã„ã‚’ã¤ã‘ã¦ã‚„ã£ã¦ã„ã‘ã‚‹ã‚ˆã†ã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><p>ä¸Šç´šè€…ã«ãªã‚‹ã¨ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚’è¦‹ã¦ä½¿ã„æ–¹ã‚’æƒ³åƒã—ãŸã‚Šã€ç”Ÿã®ã‚³ãƒ¼ãƒ‰ã‚’è§£æã—ã¦ãªã‚“ã¨ã‹ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ãŒã€åˆå¿ƒè€…ã ã¨ä½¿ã„æ–¹ã‚’çŸ¥ã‚‹éƒ¨åˆ†ã‚‚çµæ§‹é›£ã—ã„ã§ã™ã€‚ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚‚æ¢ã—ãªãŒã‚‰ã€æŒ‘æˆ¦ã—ã¦è¦‹ã¦ãã ã•ã„ã€‚çµŒé¨“ã‚’ç©ã‚ã°ã€å°‘ã—ãšã¤äºˆæƒ³ãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ãã¾ã™ã€‚</p><h2 id="é–¢é€£è¨˜äº‹"><a href="#é–¢é€£è¨˜äº‹" class="headerlink" title="é–¢é€£è¨˜äº‹"></a>é–¢é€£è¨˜äº‹</h2><p>Goã«é–¢é€£ã—ãŸä»–ã®é€£è¼‰ä¼ç”»ã§ã™ã€‚</p><ul><li><a href="/tags/Serverless%E9%80%A3%E8%BC%89/">Serverlessé€£è¼‰</a></li><li><a href="/tags/DynamoDB%C3%97Go/">DynamoDBÃ—Go</a></li><li><a href="/tags/GCP%E9%80%A3%E8%BC%89/">GCPé€£è¼‰</a></li><li><a href="/tags/GoCDK/">GoCDK</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;/tags/GoTipsé€£è¼‰/&quot;&gt;Go Tipsé€£è¼‰&lt;/a&gt;ã®ç¬¬4å¼¾ç›®ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;æ–°ã—ã„ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã‚’å­¦ã¶ã¨ãã¯ã€ã¾ãšã€æƒ…å ±ã®å–å¾—ã®ä»•æ–¹ã‚’è¦šãˆã¦ãŠãã¨å­¦ç¿’åŠ¹ç‡ãŒä¸ŠãŒã‚Šã¾ã™ã€‚æ¤œç´¢ã—ã¦ã€æ—¥æœ¬èªã§èª°ã‹ãŒè§£èª¬ã—ã¦ã„ã‚‹äºŒæ¬¡æƒ…å ±ã‚’æ¢ã™ã®ã‚‚ã„ã„ã®ã§ã™ãŒã€
      
    
    </summary>
    
      <category term="Programming" scheme="https://future-architect.github.io/categories/Programming/"/>
    
    
      <category term="Go" scheme="https://future-architect.github.io/tags/Go/"/>
    
      <category term="GoTipsé€£è¼‰" scheme="https://future-architect.github.io/tags/GoTips%E9%80%A3%E8%BC%89/"/>
    
      <category term="Document" scheme="https://future-architect.github.io/tags/Document/"/>
    
  </entry>
  
  <entry>
    <title>Go Tipsé€£è¼‰3: ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ‰±ã†ã¡ã‚‡ã£ã¨ã—ãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’Goã§æ›¸ãã¨ãã®Tips5é¸</title>
    <link href="https://future-architect.github.io/articles/20200520/"/>
    <id>https://future-architect.github.io/articles/20200520/</id>
    <published>2020-05-20T00:43:46.000Z</published>
    <updated>2020-05-23T05:17:00.727Z</updated>
    
    <content type="html"><![CDATA[<img src="/images/20200518/Go-Logo_LightBlue.png" class="img-small-size"><p><a href="/tags/GoTipsé€£è¼‰/">Go Tipsé€£è¼‰</a>ã®ç¬¬3å¼¾ç›®ã§ã™ã€‚</p><h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><p>TIG ã®è¾»ã§ã™ã€‚</p><p>ç­†è€…ã¯æ™®æ®µãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ‰±ã£ã¦ä½•ã‹ç°¡å˜ãªå‡¦ç†ã‚’ã™ã‚‹å ´åˆã¯ã€ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§å®Ÿè£…ã™ã‚‹ã“ã¨ãŒå¤šã‹ã£ãŸã®ã§ã™ãŒã€å®Ÿã¯ Go ã§æ›¸ãã¨ç°¡å˜ã«ã€ã‹ã¤ Testable ã§ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¡ã£ã <sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup> ã«æ›¸ãã“ã¨ã§ã§ãã¦ã€å¹¸ã›ã«ãªã‚‹ã‚“ã˜ã‚ƒãªã„ã‹ï¼Ÿã¨æœ€è¿‘è€ƒãˆã¦ã„ã¾ã™ã€‚</p><p>ã¨ã‚ã‚‹æ¥­å‹™ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ‰±ã„ã€ã¡ã‚‡ã£ã¨ã ã‘è¤‡é›‘ãªç¹°ã‚Šè¿”ã—ã‚’è¦ã™ã‚‹å‡¦ç†ã‚’ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚æ‰‹å‹•ã§ä½œæ¥­ã™ã‚‹ã®ã¯ã‚ã‚“ã©ãã•ã„ã—ã€<del>(ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã‚‚ä¸ŠãŒã‚‰ãªã„ã—)</del> ãƒ­ã‚¸ãƒƒã‚¯ã‚‚ã¡ã‚‡ã£ã¨é¢å€’ã ã£ãŸã®ã§ã€Go ã§ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ã„ã¦å‡¦ç†ã—ã¾ã—ãŸã€‚</p><p>ãã“ã§ä»Šå›ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ‰±ã†ã‚ˆã†ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ Go ã§æ›¸ãã¨ãã«å½¹ã«ç«‹ã¡ãã†ãª Tips 5 é¸ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚</p><ol><li>ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«io.Readerã‚’ç”¨ã„ã‚‹</li><li>ãƒ•ã‚¡ã‚¤ãƒ«ã®æ›¸ãè¾¼ã¿ã«io.Writerã‚’ç”¨ã„ã‚‹</li><li>ãƒªã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰1è¡Œãšã¤èª­ã¿è¾¼ã‚€</li><li>os/execã‚’ä½¿ã†</li><li>ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®æ“ä½œã«path/filepathã‚’ä½¿ã†</li></ol><h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><h3 id="1-ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«io-Readerã‚’ç”¨ã„ã‚‹"><a href="#1-ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«io-Readerã‚’ç”¨ã„ã‚‹" class="headerlink" title="1.ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«io.Readerã‚’ç”¨ã„ã‚‹"></a>1.ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«io.Readerã‚’ç”¨ã„ã‚‹</h3><p>ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€éš›ã« <a href="https://golang.org/pkg/io/#Reader" target="_blank" rel="noopener">io.Reader</a> ã‚’å—ã‘å–ã£ã¦å‡¦ç†ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ã¨ Testable ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã«ãªã£ã¦å®‰å¿ƒã§ã™ã€‚ç°¡å˜ãªå‡¦ç†ã¨ã¯ã„ãˆã‚„ã¯ã‚Šãƒ†ã‚¹ãƒˆã¯æ›¸ããŸã„ã§ã™ã‚ˆã­ã€‚</p><p>ä¾‹ã¨ã—ã¦ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­ã«ã€ŒCopyrightã€ã¨ã„ã†æ–‡å­—åˆ—ãŒå«ã¾ã‚Œã‚‹ã‹ã©ã†ã‹èª¿ã¹ã‚‹å‡¦ç†ã‚’è€ƒãˆã¦ã¿ã¾ã™ã€‚å®Ÿè£…ä¾‹ã¨ã—ã¦ä»¥ä¸‹ã® hasCopyright ã®ã‚ˆã†ãªå®Ÿè£…ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚ãƒã‚¤ãƒ³ãƒˆã¯ io.Reader ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’é–¢æ•°ã®å¼•æ•°ã¨ã—ã¦å—ã‘å–ã‚‹ã“ã¨ã§ã™ã€‚</p><figure class="highlight go"><figcaption><span>io.Readerã®å¼•æ•°ãŒãƒã‚¤ãƒ³ãƒˆ</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">hasCopyright</span><span class="params">(r io.Reader)</span> <span class="params">(<span class="keyword">bool</span>, error)</span></span> &#123;</span><br><span class="line">b, err := ioutil.ReadAll(r)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>, err</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> bytes.Contains(b, []<span class="keyword">byte</span>(<span class="string">"Copyright"</span>)), <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‘¼ã³å…ƒã®å®Ÿè£…ä¾‹ã§ã™ã€‚â€LICENSEâ€ ãƒ•ã‚¡ã‚¤ãƒ«ã¯ MIT ã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ãŒæ›¸ã‹ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ Open ã—ã¦ã„ã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>main.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">f, err := os.Open(<span class="string">"LICENSE"</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">defer</span> f.Close()</span><br><span class="line">ok, err := hasCopyright(f)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä½•ã‚‰ã‹ã®å‡¦ç†</span></span><br><span class="line">fmt.Println(ok)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>hasCopyright é–¢æ•°ã¯ io.Reader ã‚’å—ã‘å–ã‚‹é–¢æ•°ã§ã—ãŸã€‚ã‚‚ã¡ã‚ã‚“ä»¥ä¸‹ã®ã‚ˆã†ã« <a href="https://golang.org/pkg/os/#File" target="_blank" rel="noopener">*os.File</a> æ§‹é€ ä½“ã‚’å—ã‘å–ã£ã¦å‡¦ç†ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚ã—ã‹ã—ã“ã®ã‚ˆã†ã«ã™ã‚‹ã¨ã€å¼•æ•°ã«ã¯ *os.File æ§‹é€ ä½“ã‚’å—ã‘å–ã‚‹å¿…è¦ãŒã‚ã‚Šã€ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã”ã¨ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ãªã„ã¨ã„ã‘ã¾ã›ã‚“ã€‚</p><figure class="highlight go"><figcaption><span>éæ¨å¥¨ãªå¼•æ•°ã®ã¨ã‚Šæ–¹</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// éæ¨å¥¨: å…·è±¡ã®æ§‹é€ ä½“ã‚’å¼•æ•°ã«å–ã‚‹é–¢æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">hasCopyright</span><span class="params">(f *os.File)</span> <span class="params">(<span class="keyword">bool</span>, error)</span></span> &#123;</span><br><span class="line">b, err := ioutil.ReadAll(f)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>, err</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> bytes.Contains(b, []<span class="keyword">byte</span>(<span class="string">"Copyright"</span>)), <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§ã‚ã‚‹ io.Reader ã‚’å—ã‘å–ã‚‹é–¢æ•°ã«ã™ã‚‹ã“ã¨ã§ io.Reader ã‚’æº€ãŸã™ä»»æ„ã®æ§‹é€ ä½“ã‚’é–¢æ•°ã«æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚ã¤ã¾ã‚Šãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚¿ã‚’ç¤ºã™ os.File ã ã‘ã§ãªã <a href="https://golang.org/pkg/bytes/#Buffer" target="_blank" rel="noopener">byte.Buffer</a> ã‚„ <a href="https://golang.org/pkg/strings/#Reader" target="_blank" rel="noopener">strings.Reader</a> ã¨ã„ã£ãŸæ§‹é€ ä½“ã‚’æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚æ–‡å­—åˆ—ã®å ´åˆã¯ <a href="https://golang.org/pkg/strings/#NewReader" target="_blank" rel="noopener">strings.NewReader</a> ã‚’ç”¨ã„ã¦ string ã‹ã‚‰ io.Reader ã‚’ç”Ÿæˆã§ãä¾¿åˆ©ã§ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒ†ã‚¹ãƒˆã™ã‚‹ã“ã¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>main_test.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"io"</span></span><br><span class="line"><span class="string">"strings"</span></span><br><span class="line"><span class="string">"testing"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Test_hasCopyright</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line"><span class="keyword">type</span> args <span class="keyword">struct</span> &#123;</span><br><span class="line">reader io.Reader</span><br><span class="line">&#125;</span><br><span class="line">tests := []<span class="keyword">struct</span> &#123;</span><br><span class="line">name    <span class="keyword">string</span></span><br><span class="line">args    args</span><br><span class="line">want    <span class="keyword">bool</span></span><br><span class="line">wantErr <span class="keyword">bool</span></span><br><span class="line">&#125;&#123;</span><br><span class="line">&#123;<span class="string">"æ­£å¸¸"</span>, args&#123;strings.NewReader(<span class="string">`Copyright`</span>)&#125;, <span class="literal">true</span>, <span class="literal">false</span>&#125;,</span><br><span class="line">&#123;<span class="string">"MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹"</span>, args&#123;strings.NewReader(<span class="string">`MIT License</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Copyright (c) 2020, Future Corporation</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Permission is hereby granted, free of charge, to any person obtaining a copy</span></span><br><span class="line"><span class="string">of this software and associated documentation files (the "Software"), to deal</span></span><br><span class="line"><span class="string">in the Software without restriction, including without limitation the rights</span></span><br><span class="line"><span class="string">to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span></span><br><span class="line"><span class="string">copies of the Software, and to permit persons to whom the Software is</span></span><br><span class="line"><span class="string">furnished to do so, subject to the following conditions:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">The above copyright notice and this permission notice shall be included in all</span></span><br><span class="line"><span class="string">copies or substantial portions of the Software.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></span><br><span class="line"><span class="string">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></span><br><span class="line"><span class="string">FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span></span><br><span class="line"><span class="string">AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span></span><br><span class="line"><span class="string">LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span></span><br><span class="line"><span class="string">OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE</span></span><br><span class="line"><span class="string">SOFTWARE.`</span>)&#125;, <span class="literal">true</span>, <span class="literal">false</span>&#125;,</span><br><span class="line">&#123;<span class="string">"ç©ºæ–‡å­—"</span>, args&#123;strings.NewReader(<span class="string">``</span>)&#125;, <span class="literal">false</span>, <span class="literal">false</span>&#125;,</span><br><span class="line">&#123;<span class="string">"cãŒå°æ–‡å­—"</span>, args&#123;strings.NewReader(<span class="string">`copyright`</span>)&#125;, <span class="literal">false</span>, <span class="literal">false</span>&#125;,</span><br><span class="line">&#123;<span class="string">"ã‚¹ãƒšãƒ¼ã‚¹æœ‰ã‚Š"</span>, args&#123;strings.NewReader(<span class="string">`Copy right`</span>)&#125;, <span class="literal">false</span>, <span class="literal">false</span>&#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> _, tt := <span class="keyword">range</span> tests &#123;</span><br><span class="line">t.Run(tt.name, <span class="function"><span class="keyword">func</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">got, err := hasCopyright(tt.args.reader)</span><br><span class="line"><span class="keyword">if</span> (err != <span class="literal">nil</span>) != tt.wantErr &#123;</span><br><span class="line">t.Errorf(<span class="string">"hasCopyright() error = %v, wantErr %v"</span>, err, tt.wantErr)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> got != tt.want &#123;</span><br><span class="line">t.Errorf(<span class="string">"hasCopyright() got = %v, want %v"</span>, got, tt.want)</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ go <span class="built_in">test</span></span><br><span class="line">=== RUN   Test_hasCopyright</span><br><span class="line">=== RUN   Test_hasCopyright/æ­£å¸¸</span><br><span class="line">=== RUN   Test_hasCopyright/MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹</span><br><span class="line">=== RUN   Test_hasCopyright/ç©ºæ–‡å­—</span><br><span class="line">=== RUN   Test_hasCopyright/cãŒå°æ–‡å­—</span><br><span class="line">=== RUN   Test_hasCopyright/ã‚¹ãƒšãƒ¼ã‚¹æœ‰ã‚Š</span><br><span class="line">--- PASS: Test_hasCopyright (0.00s)</span><br><span class="line">    --- PASS: Test_hasCopyright/æ­£å¸¸ (0.00s)</span><br><span class="line">    --- PASS: Test_hasCopyright/MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ (0.00s)</span><br><span class="line">    --- PASS: Test_hasCopyright/ç©ºæ–‡å­— (0.00s)</span><br><span class="line">    --- PASS: Test_hasCopyright/cãŒå°æ–‡å­— (0.00s)</span><br><span class="line">    --- PASS: Test_hasCopyright/ã‚¹ãƒšãƒ¼ã‚¹æœ‰ã‚Š (0.00s)</span><br><span class="line">PASS</span><br></pre></td></tr></table></figure><p>ãƒ†ã‚¹ãƒˆãŒé€šã‚‹ã¨ã€æƒ³å®šã—ãŸå‹•ä½œã‚’ã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã€å®‰å¿ƒã—ã¾ã™ã€‚ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§åŒã˜ã‚ˆã†ãªç¢ºèªã‚’ã—ã‚ˆã†ã¨æ€ã†ã¨ã€ã¡ã‚‡ã£ã¨æ‰‹é–“ã§ã™ã€‚</p><h3 id="2-ãƒ•ã‚¡ã‚¤ãƒ«ã®æ›¸ãè¾¼ã¿ã«io-Writerã‚’ç”¨ã„ã‚‹"><a href="#2-ãƒ•ã‚¡ã‚¤ãƒ«ã®æ›¸ãè¾¼ã¿ã«io-Writerã‚’ç”¨ã„ã‚‹" class="headerlink" title="2.ãƒ•ã‚¡ã‚¤ãƒ«ã®æ›¸ãè¾¼ã¿ã«io.Writerã‚’ç”¨ã„ã‚‹"></a>2.ãƒ•ã‚¡ã‚¤ãƒ«ã®æ›¸ãè¾¼ã¿ã«io.Writerã‚’ç”¨ã„ã‚‹</h3><p>ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã« io.Reader ã‚’ç”¨ã„ã‚‹å ´åˆã¨åŒã˜è©±ã§ã™ã€‚ãƒ•ã‚¡ã‚¤ãƒ«ã®æ›¸ãè¾¼ã¿ã« <a href="https://golang.org/pkg/io/#Writer" target="_blank" rel="noopener">io.Writer</a> ã‚’ç”¨ã„ã‚‹ã¨ Testable ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã«ãªã‚Šã¾ã™ã€‚ç°¡å˜ãªä¾‹ã¨ã—ã¦ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®æœ«å°¾ã« ã€ŒHello World.ã€ã¨ã„ã†æ–‡å­—åˆ—ã‚’è¿½è¨˜ã™ã‚‹é–¢æ•°ã‚’è€ƒãˆã¦ã¿ã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>io.Writerã‚’åˆ©ç”¨ã™ã‚‹</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æœ«å°¾ã« Hello World. ã‚’æ›¸ãè¾¼ã‚€ã‚µãƒ³ãƒ—ãƒ«å®Ÿè£…</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">writeHello</span><span class="params">(w io.Writer)</span></span> &#123;</span><br><span class="line">fmt.Fprintln(w, <span class="string">"\nHello World."</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®Ÿéš›ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã¾ãªãã¦ã‚‚ io.Writer ã‚’å®Ÿè£…ã—ã¦ã„ã‚‹ <a href="https://golang.org/pkg/bytes/#Buffer" target="_blank" rel="noopener">bytes.Buffer</a> ã«æ–‡å­—åˆ—ã‚’æ›¸ãè¾¼ã¿ã€æ¯”è¼ƒã—ã¦ãƒ†ã‚¹ãƒˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚å®Ÿéš›ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ãŸã„å ´åˆã¯ <a href="https://golang.org/pkg/os/#Create" target="_blank" rel="noopener">os.Create</a> ãªã©ã¨ã™ã‚Œã°ç”Ÿæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>main_test.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"bytes"</span></span><br><span class="line"><span class="string">"testing"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Test_writeHello</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">tests := []<span class="keyword">struct</span> &#123;</span><br><span class="line">name  <span class="keyword">string</span></span><br><span class="line">wantW <span class="keyword">string</span></span><br><span class="line">diff  <span class="keyword">bool</span></span><br><span class="line">&#125;&#123;</span><br><span class="line">&#123;<span class="string">"æ­£å¸¸"</span>, <span class="string">"\nHello World.\n"</span>, <span class="literal">false</span>&#125;,</span><br><span class="line">&#123;<span class="string">"çµ‚ç«¯ã®æ”¹è¡ŒãŒãªã„"</span>, <span class="string">"\nHello World."</span>, <span class="literal">true</span>&#125;,</span><br><span class="line">&#123;<span class="string">"å…ˆé ­ã®æ”¹è¡ŒãŒãªã„"</span>, <span class="string">"Hello World.\n"</span>, <span class="literal">true</span>&#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> _, tt := <span class="keyword">range</span> tests &#123;</span><br><span class="line">t.Run(tt.name, <span class="function"><span class="keyword">func</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">w := &amp;bytes.Buffer&#123;&#125;</span><br><span class="line">writeHello(w)</span><br><span class="line"><span class="keyword">if</span> gotW := w.String(); gotW != tt.wantW &#123;</span><br><span class="line"><span class="keyword">if</span> !tt.diff &#123;</span><br><span class="line">t.Errorf(<span class="string">"writeHello() = %v, want %v"</span>, gotW, tt.wantW)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ go <span class="built_in">test</span></span><br><span class="line">=== RUN   Test_writeHello</span><br><span class="line">=== RUN   Test_writeHello/æ­£å¸¸</span><br><span class="line">=== RUN   Test_writeHello/çµ‚ç«¯ã®æ”¹è¡ŒãŒãªã„</span><br><span class="line">=== RUN   Test_writeHello/å…ˆé ­ã®æ”¹è¡ŒãŒãªã„</span><br><span class="line">--- PASS: Test_writeHello (0.00s)</span><br><span class="line">    --- PASS: Test_writeHello/æ­£å¸¸ (0.00s)</span><br><span class="line">    --- PASS: Test_writeHello/çµ‚ç«¯ã®æ”¹è¡ŒãŒãªã„ (0.00s)</span><br><span class="line">    --- PASS: Test_writeHello/å…ˆé ­ã®æ”¹è¡ŒãŒãªã„ (0.00s)</span><br><span class="line">PASS</span><br></pre></td></tr></table></figure><p>ã¡ã‚ƒã‚“ã¨æƒ³å®šé€šã‚Šæ›¸ãè¾¼ã‚ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚</p><h3 id="3-ãƒªã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰1è¡Œãšã¤èª­ã¿è¾¼ã‚€"><a href="#3-ãƒªã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰1è¡Œãšã¤èª­ã¿è¾¼ã‚€" class="headerlink" title="3.ãƒªã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰1è¡Œãšã¤èª­ã¿è¾¼ã‚€"></a>3.ãƒªã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰1è¡Œãšã¤èª­ã¿è¾¼ã‚€</h3><p>ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹æ–‡å­—åˆ—ã‚’æ”¹è¡Œã‚³ãƒ¼ãƒ‰ã§åŒºåˆ‡ã£ã¦ä¸€è¡Œãšã¤å‡¦ç†ã‚’ã™ã‚‹æ©Ÿä¼šã¯å¤šã„ã¨æ€ã„ã¾ã™ã€‚ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¦å„è¡Œã‚’èª­ã¿è¾¼ã‚“ã§ãªã‚“ã‚„ã‹ã‚“ã‚„ã™ã‚‹æ„Ÿã˜ã§ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> line</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  <span class="comment"># ä½•ã‚‰ã‹ã®å‡¦ç†ã‚’ã™ã‚‹</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;line&#125;</span>"</span></span><br><span class="line"><span class="keyword">done</span> &lt; list.txt</span><br></pre></td></tr></table></figure><p>æ–‡å­—åˆ—ãƒªã‚¹ãƒˆã®ä¸€è¦§ã‚’ list.txt ãªã©ã¨ã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¦ãŠã„ã¦ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ 1 è¡Œãšã¤èª­ã¿è¾¼ã¿ãŸã„ã¨ãã® Go ã® Tips ã§ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ãªéšå±¤ã«ãªã£ã¦ã„ã‚‹ã¨ã—ã¾ã™ã€‚</p><figure class="highlight bash"><figcaption><span>ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ list.txt</span><br><span class="line">â””â”€â”€ main.go</span><br></pre></td></tr></table></figure><p>list.txt ã®ä¸­èº«ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒªãƒã‚¸ãƒˆãƒªåãŒæ›¸ã„ã¦ã‚ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¾ã™ã€‚</p><figure class="highlight bash"><figcaption><span>list.txt</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">future-architect/vuls</span><br><span class="line">future-architect/gcp-instance-scheduler</span><br><span class="line">future-architect/cheetah-grid</span><br><span class="line">future-architect/uroborosql</span><br><span class="line">future-architect/icons</span><br></pre></td></tr></table></figure><p><a href="https://golang.org/pkg/bufio/#NewScanner" target="_blank" rel="noopener">bufio.NewScanner</a> ã‚’ç”¨ã„ã¦ io.Reader (ãƒ•ã‚¡ã‚¤ãƒ«ã‚„æ¨™æº–å…¥å‡ºåŠ›ãªã©)ã‹ã‚‰æ–‡å­—åˆ—ã‚’èª­ã¿è¾¼ã‚€ã“ã¨ã§ãã¾ã™ã€‚æ”¹è¡Œã‚³ãƒ¼ãƒ‰ã‚’æ°—ã«ã›ãšã€å„è¡Œã‚’èª­ã¿è¾¼ã‚€ã“ã¨ãŒã§ãã‚‹ã®ãŒå¬‰ã—ã„ãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚</p><figure class="highlight go"><figcaption><span>main.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"bufio"</span></span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"log"</span></span><br><span class="line"><span class="string">"os"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">f, err := os.Open(<span class="string">"list.txt"</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">defer</span> f.Close()</span><br><span class="line">sc := bufio.NewScanner(f)</span><br><span class="line"><span class="keyword">for</span> sc.Scan() &#123;</span><br><span class="line"><span class="comment">// list.txt ã«ã‹ã‹ã‚Œã¦ã„ã‚‹è¡Œã®æ–‡å­—åˆ—ã‚’ç”¨ã„ã¦å‡¦ç†ã‚’ã™ã‚‹</span></span><br><span class="line">line := sc.Text()</span><br><span class="line">fmt.Println(line)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> err := sc.Err(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å‡ºåŠ›çµæœ:</span></span><br><span class="line"><span class="comment">// future-architect/vuls</span></span><br><span class="line"><span class="comment">// future-architect/gcp-instance-scheduler</span></span><br><span class="line"><span class="comment">// future-architect/cheetah-grid</span></span><br><span class="line"><span class="comment">// future-architect/uroborosql</span></span><br><span class="line"><span class="comment">// future-architect/icons</span></span><br></pre></td></tr></table></figure><p><a href="https://golang.org/pkg/bufio/#Reader" target="_blank" rel="noopener">bufio.Reader</a> ã‚’ç”¨ã„ã¦ã‚‚ bufio.NewScanner ã‚’ç”¨ã„ãŸã¨ãã¨åŒæ§˜ã«èª­ã¿è¾¼ã‚€ã“ã¨ãŒã§ãã¾ã™ãŒ <code>io.EOF</code> ã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã™ã‚‹å¿…è¦ãŒã‚ã‚‹åˆ†ã€å¹¾åˆ†ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ãªå®Ÿè£…ã§ã™ã€‚</p><figure class="highlight go"><figcaption><span>å¹¾åˆ†ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ãªå®Ÿè£…</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">f, err := os.Open(<span class="string">"list.txt"</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">defer</span> f.Close()</span><br><span class="line">r := bufio.NewReader(f)</span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line"><span class="comment">// list.txt ã«ã‹ã‹ã‚Œã¦ã„ã‚‹è¡Œã®æ–‡å­—åˆ—ã‚’ç”¨ã„ã¦å‡¦ç†ã‚’ã™ã‚‹</span></span><br><span class="line">line, _, err := r.ReadLine()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">if</span> err == io.EOF &#123;</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Printf(<span class="string">"%s\n"</span>, <span class="keyword">string</span>(line))</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-os-execã‚’ä½¿ã†"><a href="#4-os-execã‚’ä½¿ã†" class="headerlink" title="4.os/execã‚’ä½¿ã†"></a>4.os/execã‚’ä½¿ã†</h3><p>ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ‰±ã†ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«é™ã£ãŸè©±ã§ã¯ãªã„ã§ã™ãŒ Go ã§ã¯ <a href="https://golang.org/pkg/os/exec/#Cmd" target="_blank" rel="noopener">exec.Cmd</a> ã‚’ç”¨ã„ã¦å¤–éƒ¨ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã¨ã¦ã‚‚ä¾¿åˆ©ã§ã™ã€‚<a href="https://golang.org/pkg/os/exec/#Command" target="_blank" rel="noopener">exec.Command</a> é–¢æ•°ã‚’ç”¨ã„ã¦ Path ã¨ Args ã«å®Ÿè¡Œã—ãŸã„æ–‡å­—åˆ—ã‚’ã‚»ãƒƒãƒˆã—ã¾ã™ã€‚å¤–éƒ¨ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡ŒçµæœãŒä¸è¦ã§ã‚ã‚Œã° <a href="https://golang.org/pkg/os/exec/#Cmd.Run" target="_blank" rel="noopener">Run()</a>, å¿…è¦ã§ã‚ã‚Œã° <a href="https://golang.org/pkg/os/exec/#Cmd.Output" target="_blank" rel="noopener">Output()</a> ã‚’ç”¨ã„ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãŸã„ã¦ã„ã®å ´åˆã“ã® 2 ã¤ã®ãƒ¡ã‚½ãƒƒãƒ‰ã§å……è¶³ã™ã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚</p><p>å¤–éƒ¨ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œã—ãŸçµæœã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚Œã°æˆ»ã‚Šå€¤ã® error ã«å€¤ãŒæ ¼ç´ã•ã‚Œã¾ã™ã€‚<code>_</code> ãªã©ã¨ã—ã¦ã‚¨ãƒ©ãƒ¼ã‚’ç„¡è¦–ã—ãªã„ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚ã¡ã‚ƒã‚“ã¨ã‚¨ãƒ©ãƒ¼ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚Œã°ç›´å‰ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã„ãŸã‘ã©ã€é–“é•ã£ã¦æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ãŒå®Ÿè¡Œã•ã‚Œã¦ã—ã¾ã£ãŸã€‚<code>cd</code> ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã„ãŸã‘ã©ã€å¾Œç¶šã® <code>rm</code> ãŒå®Ÿè¡Œã•ã‚Œã¦æ„å›³ã—ãªã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå‰Šé™¤ã•ã‚Œã¦ã—ã¾ã£ãŸã€‚ã€‚ã€‚ãªã©ã¨ã„ã†ã“ã¨ã¯é˜²ã’ã¾ã™ã€‚Bash ã§ <code>set -ue</code> ã—ã¦ãŠãã®ã¨ä¼¼ãŸã‚ˆã†ãªé›°å›²æ°—ã§ã™ã€‚</p><p>ãã®ä»–ã®æƒ…å ±ã€ä¾‹ãˆã° PID ã‚„çµ‚äº†ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¨ã„ã£ãŸå®Ÿè¡Œçµæœã‚’å–å¾—ã—ãŸã„å ´åˆã¯ Cmd æ§‹é€ ä½“ã«å«ã¾ã‚Œã‚‹ ProcessState ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰(<a href="https://golang.org/pkg/os/#ProcessState" target="_blank" rel="noopener">*os.ProcessState</a> å‹)ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ã„ã‚ã„ã‚ãªæƒ…å ±ã‚’å–å¾—ã§ãã¾ã™ã€‚<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup></p><figure class="highlight go"><figcaption><span>main.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"log"</span></span><br><span class="line"><span class="string">"os/exec"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">cmd := exec.Command(<span class="string">"git"</span>, <span class="string">"clone"</span>, <span class="string">"-b"</span>, <span class="string">"delelop"</span>, <span class="string">"https://..."</span>)</span><br><span class="line"><span class="keyword">if</span> err := cmd.Run(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(cmd.ProcessState.Pid())</span><br><span class="line">fmt.Println(cmd.ProcessState.String())</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å®Ÿè¡Œçµæœ:</span></span><br><span class="line"><span class="comment">// 1234</span></span><br><span class="line"><span class="comment">// exit status 0</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ã—ã¦ãŠããŸã„ãƒã‚¤ãƒ³ãƒˆã¨ã—ã¦ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ <code>*</code> (ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰)ã‚’ä½¿ã£ã¦ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ãã« Go ã® exec.Command ã®å¼•æ•°ã« <code>*</code> ã‚’å«ã‚ã¦ã‚‚å±•é–‹ã•ã‚Œã¾ã›ã‚“ã€‚ä»¥ä¸‹ã®ã‚ˆã†ãªå®Ÿè£…ã¯ã‚¨ãƒ©ãƒ¼ãŒè¿”ã£ã¦ãã¾ã™ã€‚<code>*</code> ã¯ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒå±•é–‹ã™ã‚‹(glob ã§ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°ã™ã‚‹)ãŸã‚ã§ã™ã€‚</p><figure class="highlight go"><figcaption><span>main.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"log"</span></span><br><span class="line"><span class="string">"os/exec"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">b, err := exec.Command(<span class="string">"ls"</span>, <span class="string">"*.go"</span>).Output()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(<span class="keyword">string</span>(b))</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å®Ÿè¡Œçµæœ:</span></span><br><span class="line"><span class="comment">// 2020/04/17 10:57:11 exit status 2</span></span><br></pre></td></tr></table></figure><p>ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã® <code>*</code> ã‚’ä½¿ã„ãŸã„å ´åˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã« exec.Command ã®å¼•æ•°ã§æ˜ç¤ºçš„ã« <code>/bin/sh -c</code> ã¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b, err := exec.Command(<span class="string">"/bin/sh"</span>, <span class="string">"-c"</span>, <span class="string">"ls"</span>, <span class="string">"*.go"</span>).Output()</span><br></pre></td></tr></table></figure><p>ãã®ä»–ã«ã‚‚ os.exec ã® <a href="https://golang.org/pkg/os/exec/#pkg-overview" target="_blank" rel="noopener">Overview</a> ã«ã¯ã€ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã¯ã•ã‚Œãªã„ã€glob ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å±•é–‹ã«ã¯ <code>filepath.Glob</code> ã‚’ç”¨ã„ã‚‹ã“ã¨ãŒã§ãã‚‹ã€ãªã©ã¨ã„ã£ãŸ os.exec ã‚’æ‰±ã†ä¸Šã§ã®æ³¨æ„ç‚¹ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚ã‚ã‚‰ãŸã‚ã¦ç¢ºèªã—ã¦ã¿ã¦ãã ã•ã„ã€‚</p><h3 id="5-ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®æ“ä½œã«path-filepathã‚’ä½¿ã†"><a href="#5-ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®æ“ä½œã«path-filepathã‚’ä½¿ã†" class="headerlink" title="5.ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®æ“ä½œã«path/filepathã‚’ä½¿ã†"></a>5.ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®æ“ä½œã«path/filepathã‚’ä½¿ã†</h3><p>ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®çµåˆã«ä»¥ä¸‹ã®ã‚ˆã†ã«æ–‡å­—åˆ—ã§ <code>/</code> ã‚’çµåˆã•ã›ã¦ã€ã‚ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">testFilePath := tempDir + <span class="string">"/"</span> + <span class="string">"test.txt"</span></span><br></pre></td></tr></table></figure><p>ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹é–¢é€£ã§å•é¡Œã®ä¸€ã¤ã¨ã—ã¦ Unix ç³» OS ã¨ Windows ã§ãƒ‘ã‚¹ã®ã‚»ãƒ‘ãƒ¬ãƒ¼ã‚¿ãŒç•°ãªã‚‹ã¨ã„ã†å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚Unix ç³» OS ã§ã¯ã‚»ãƒ‘ãƒ¬ãƒ¼ã‚¿ãŒ <code>/</code> ã§ã‚ã£ã¦ Windows ã§ã¯ <code>\</code> ã¨ã„ã†è©±ã§ã™ã€‚é€šå¸¸ã€ã“ã®æ‰‹ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ Unix ç³» OS ã¨ Windows ã®ä¸¡æ–¹ã§å‹•ä½œã•ã›ã‚‹ã“ã¨ã¯å°‘ãªã„ã¨æ€ã†ã®ã§ã€å•é¡Œã«ãªã‚‹ã“ã¨ã¯ã‚ã¾ã‚Šãªã„ã¨æ€ã„ã¾ã™ãŒã€<a href="https://golang.org/pkg/path/filepath/" target="_blank" rel="noopener">path/filepath</a> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ç”¨ã„ã‚‹ã¨ãƒãƒ«ãƒãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§æ‰±ã†ã“ã¨ãŒã§ãã‚¹ãƒãƒ¼ãƒˆã§ã™ã€‚path/filepath ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯å¯¾è±¡ã® OS ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã¨äº’æ›æ€§ã®ã‚ã‚‹æ–¹æ³•ã§ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’æ“ä½œã™ã‚‹ã“ã¨ãŒã§ãã‚‹ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚’æä¾›ã—ã¦ã„ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã™ã€‚</p><p>ä»¥ä¸‹ã¯ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç›´ä¸‹ã«ä¸€æ™‚çš„ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª tempxxxx ã‚’ä½œæˆã—ã¦ã€ãã®ä¸€æ™‚ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹å®Ÿè£…ä¾‹ã§ã™ã€‚ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®çµåˆã« <a href="https://golang.org/pkg/path/filepath/#Join" target="_blank" rel="noopener">filepath.Join</a> ã‚’ç”¨ã„ã¦ã„ã¾ã™ã€‚ä»¥ä¸‹ã®å®Ÿè£…ã§ã¯ tempDir ã¨ test.txt ã‚’ Join ã—ã¦ã„ã¾ã™ãŒã€3 ã¤ä»¥ä¸Šã®æ–‡å­—åˆ—ã‚’ Join ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚</p><figure class="highlight go"><figcaption><span>main.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"bytes"</span></span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"io"</span></span><br><span class="line"><span class="string">"io/ioutil"</span></span><br><span class="line"><span class="string">"log"</span></span><br><span class="line"><span class="string">"os"</span></span><br><span class="line"><span class="string">"path/filepath"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">tempDir, err := ioutil.TempDir(<span class="string">"."</span>, <span class="string">"temp"</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// defer os.RemoveAll(tempDir) ã¨ã™ã‚Œã°ã‚¹ã‚¯ãƒªãƒ—ãƒˆçµ‚äº†æ™‚ã«ä¸€æ™‚ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å‰Šé™¤ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½</span></span><br><span class="line"></span><br><span class="line">testFilePath := filepath.Join(tempDir, <span class="string">"test.txt"</span>)</span><br><span class="line">f, err := os.Create(testFilePath)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">defer</span> f.Close()</span><br><span class="line">writeHello(f)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h2><p>ãƒ•ã‚¡ã‚¤ãƒ«æ‰±ã†ã‚ˆã†ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ Go ã§å®Ÿè£…ã™ã‚‹ä¸Šã§ã® Tips 5 é¸ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚io.Reader ã‚„ io.Writer ã¨ã„ã£ãŸã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å—ã‘å–ã‚‹ã“ã¨ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ‰±ã†ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã‚‚ç°¡å˜ã«ãƒ†ã‚¹ãƒˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã‚¨ãƒ©ãƒ¼ã‚‚æ˜ç¤ºçš„ã«ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã™ã‚‹ã“ã¨ãŒã§ãã¦ã„ã„æ„Ÿã˜ã§ã™ã€‚ã¡ã‚‡ã£ã¨ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ‰±ã†å‡¦ç†ã‚’ Go ã§æ›¸ã„ã¦ã¿ã¦ã¯ã„ã‹ãŒã§ã—ã‚‡ã†ã‹ã€‚</p><h2 id="é–¢é€£è¨˜äº‹"><a href="#é–¢é€£è¨˜äº‹" class="headerlink" title="é–¢é€£è¨˜äº‹"></a>é–¢é€£è¨˜äº‹</h2><p>Goã«é–¢é€£ã—ãŸä»–ã®é€£è¼‰ä¼ç”»ã§ã™ã€‚</p><ul><li><a href="/tags/Serverless%E9%80%A3%E8%BC%89/">Serverlessé€£è¼‰</a></li><li><a href="/tags/DynamoDB%C3%97Go/">DynamoDBÃ—Go</a></li><li><a href="/tags/GCP%E9%80%A3%E8%BC%89/">GCPé€£è¼‰</a></li><li><a href="/tags/GoCDK/">GoCDK</a><div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none; padding-left: 0;"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">1.</span><span style="display: inline-block; vertical-align: top;">ProcessState ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å‚ç…§ã™ã‚‹ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã¯ <a href="https://umedago.connpass.com/event/159972/" target="_blank" rel="noopener">Umeda.go 2020 Winter</a> ã§æ¸‹å·ã•ã‚“ãŒè©±ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚</span><a href="#fnref:1" rev="footnote"> â†©</a></li><li id="fn:2"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">2.</span><span style="display: inline-block; vertical-align: top;">ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¡ã£ãã¨ã¯ main.go ã¨ main_test.go ã® 2 ãƒ•ã‚¡ã‚¤ãƒ«ã§ç°¡æ½”ã«å®Ÿè£…ã§ãã‚‹ç¨‹åº¦ã®å‡¦ç†ã€ãã‚‰ã„ã®ãƒ‹ãƒ¥ã‚¢ãƒ³ã‚¹ã§ä½¿ã£ã¦ã„ã¾ã™ã€‚</span><a href="#fnref:2" rev="footnote"> â†©</a></li></ol></div></div></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;img src=&quot;/images/20200518/Go-Logo_LightBlue.png&quot; class=&quot;img-small-size&quot;&gt;


&lt;p&gt;&lt;a href=&quot;/tags/GoTipsé€£è¼‰/&quot;&gt;Go Tipsé€£è¼‰&lt;/a&gt;ã®ç¬¬3å¼¾ç›®ã§ã™ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ã¯
      
    
    </summary>
    
      <category term="Programming" scheme="https://future-architect.github.io/categories/Programming/"/>
    
    
      <category term="Go" scheme="https://future-architect.github.io/tags/Go/"/>
    
      <category term="GoTipsé€£è¼‰" scheme="https://future-architect.github.io/tags/GoTips%E9%80%A3%E8%BC%89/"/>
    
  </entry>
  
  <entry>
    <title>Go Tipsé€£è¼‰2: Golandã§ç’°å¢ƒå¤‰æ•°ã‚’ã•ã£ã¨è²¼ã‚‹æ–¹æ³• </title>
    <link href="https://future-architect.github.io/articles/20200519/"/>
    <id>https://future-architect.github.io/articles/20200519/</id>
    <published>2020-05-19T12:52:54.000Z</published>
    <updated>2020-05-23T05:17:17.033Z</updated>
    
    <content type="html"><![CDATA[<img src="/images/20200519/top.png"><h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p><a href="/tags/GoTips%E9%80%A3%E8%BC%89/">Go Tipsé€£è¼‰</a>ã®ç¬¬2å¼¾ã§ã™ã€‚</p><p>ã“ã‚“ã«ã¡ã¯ã€‚TIG DXãƒ¦ãƒ‹ãƒƒãƒˆã®çœŸé‡ã§ã™ã€‚ã“ã“æ•°ãƒ¶æœˆã¯æŸIoTæ¡ˆä»¶ã§Goã‚’ç”¨ã„ã¦ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é–‹ç™ºã«å‹¤ã—ã‚“ã§ã„ã¾ã—ãŸã€‚é€£è¼‰ç¬¬1å¼¾ã®<a href="/articles/20200518/">ãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆProxyç”³è«‹ã™ã‚‹ã¨ãã®Goä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªURLãƒ‰ãƒ¡ã‚¤ãƒ³ã®èª¿ã¹æ–¹</a>ã‚’æ›¸ã„ãŸå®®å´ã•ã‚“ã¨ã¯ã€Goã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç®¡ç†ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã‹ã€2-Way-SQLã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã‹ã‚’ä½œã‚ŠãŸã„ã‚ˆã­ã¨ã„ã£ãŸãƒã‚¿ã‚’äº¤æ›ã‚’è‰¯ãã™ã‚‹ä»²ã§ã™ã€‚</p><p>ä»Šå›ã¯Goã§ã‚¢ãƒ—ãƒªé–‹ç™ºã™ã‚‹ã¨ãã«ãŠä¸–è©±ã«ãªã£ã¦ã„ã‚‹äººãŒå¤šã„ã€<a href="https://www.jetbrains.com/go/" target="_blank" rel="noopener">Goland</a>ã®Tipsã‚’ç´¹ä»‹ã—ã¾ã™ã€‚</p><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p><a href="https://12factor.net/ja/" target="_blank" rel="noopener">The Twelve-Factor App</a>ã®æ–¹æ³•è«–ã‚„ã€Dockerãªã©ã‚³ãƒ³ãƒ†ãƒŠã®æµè¡Œã«åˆã‚ã›ã¦ã€ç’°å¢ƒå¤‰æ•°ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è¨­å®šã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ãŒå¢—ãˆã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><p>å˜ç´”ã«ã“ã®è¨€è‘‰é€šã‚Šã«è¨­è¨ˆã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ç’°å¢ƒå¤‰æ•°ã®ç¨®é¡ãŒå¢—ãˆã¦ãã‚‹å ´åˆãŒå¤šã„ã¨æ€ã„ã¾ã™ã€‚å™‚ã§ã¯30~40ã®ç’°å¢ƒå¤‰æ•°ã‚’ä½¿ã†ã‚³ãƒ³ãƒ†ãƒŠã‚¢ãƒ—ãƒªã‚‚èã„ãŸã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</p><figure class="highlight bash"><figcaption><span>ã¾ã ã“ã‚Œã§ã‚‚å°‘ãªã„æ–¹ã‹ã‚‚ã—ã‚Œãªã„ç’°å¢ƒå¤‰æ•°ãŒæ²¢å±±ã‚ã‚‹ä¾‹</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> DYNAMO_TABLE_USER=local_user</span><br><span class="line"><span class="built_in">export</span> DYNAMO_TABLE_ITEM=local_item</span><br><span class="line"><span class="built_in">export</span> DYNAMO_TABLE_PROFILE=local_profile</span><br><span class="line"><span class="built_in">export</span> DYNAMO_TABLE_INSTALLATION=local_installation</span><br><span class="line"><span class="built_in">export</span> DYNAMO_TABLE_CALENDAR=local_calendar</span><br><span class="line"><span class="built_in">export</span> AUDIT_API_ENDPOINT=http://localhost:8000</span><br><span class="line"><span class="built_in">export</span> AUDIT_ID_TRACE_ENDPOINT=http://localhost:8001</span><br><span class="line"><span class="built_in">export</span> AWS_ACCESS_KEY_ID=dummy</span><br><span class="line"><span class="built_in">export</span> AWS_SECRET_ACCESS_KEY=dummy</span><br><span class="line"><span class="built_in">export</span> AWS_REGION=ap-northeast-1</span><br></pre></td></tr></table></figure><p>ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§Goã®ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚„ã‚¢ãƒ—ãƒªèµ·å‹•ã‚’è¡Œã†å ´åˆã¯ã€ä¸Šè¨˜ã‚’ãã®ã¾ã¾å‹•ã‹ã›ã°ã‚ˆã„ã ã‘ã§ã™ãŒã€Golandä¸Šã§Debugå®Ÿè¡Œã™ã‚‹ã¨ããªã©ã¯å¤§å¤‰ã§ã™ã€‚ãªãœãªã‚‰ <code>Run Configurations</code> ã§å¿ƒã‚’è¾¼ã‚ã¦ãƒãƒãƒãƒç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‹ã‚‰ã§ã™ã€‚ã¨ã¦ã‚‚é¢å€’ã ã¨æ€ã„ã¾ã—ãŸã€‚</p><img src="/images/20200519/photo_20200519_01.png"><p>ã“ã‚Œã¯å¤§å¤‰ãªã‚¿ã‚¹ã‚¯ã§ã™ã€‚</p><h1 id="çµè«–"><a href="#çµè«–" class="headerlink" title="çµè«–"></a>çµè«–</h1><p>Key=Valueå½¢å¼ã‚’ã‚»ãƒŸã‚³ãƒ­ãƒ³åŒºåˆ‡ã‚Šã§ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹ã¨ã€ä¸€æ‹¬ã§è²¼ã‚Šä»˜ã‘å¯èƒ½ã§ã™ã€‚</p><p>ä»Šå›ã®ä¾‹ã ã¨ã€exportã‚’å¤–ã—ã¦æ”¹è¡Œã‚³ãƒ¼ãƒ‰ã®ä»£ã‚ã‚Šã«ã‚»ãƒŸã‚³ãƒ­ãƒ³ã«æ›¸ãæ›ãˆã¦Ctr+Câ€¦</p><p><code>DYNAMO_TABLE_USER=local_user;DYNAMO_TABLE_ITEM=local_item;DYNAMO_TABLE_PROFILE=local_profile;DYNAMO_TABLE_INSTALLATION=local_installation;DYNAMO_TABLE_CALENDAR=local_calendar;AUDIT_API_ENDPOINT=http://localhost:8000;AUDIT_ID_TRACE_ENDPOINT=http://localhost:8001;AWS_ACCESS_KEY_ID=dummy;AWS_SECRET_ACCESS_KEY=dummy;AWS_REGION=ap-northeast-1;</code></p><p>Environment Variablesã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚Œã°OKã§ã™ã€‚</p><img src="/images/20200519/photo_20200519_02.gif"><p>CLIæ“ä½œã§ã¯ç„¡ã„ã®ãŒå¼·ã„ã¦ã„ã†ã¨ä¸æº€ã§ã™ãŒã€ã¨ã¦ã‚‚æ¥½ã¡ã‚“ã§ã™ã€‚</p><h1 id="ãŠã¾ã‘"><a href="#ãŠã¾ã‘" class="headerlink" title="ãŠã¾ã‘"></a>ãŠã¾ã‘</h1><p><code>envfile</code> ã‚’èª­ã¿è¾¼ã‚€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒå­˜åœ¨ã—ã¾ã™ã€‚<br><a href="https://plugins.jetbrains.com/plugin/7861-envfile" target="_blank" rel="noopener">https://plugins.jetbrains.com/plugin/7861-envfile</a></p><p>ã“ã‚Œã‚’ç”¨ã„ã‚Œã°ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã¯direnv ã€Golandä¸Šã§ã¯EnvFileã«ä»»ã›ã‚‹ã¨ä¸€è²«æ€§ãŒã‚ã‚‹ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ã€‚</p><h1 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h1><ul><li>Golandã¯ã‚»ãƒŸã‚³ãƒ­ãƒ³åŒºåˆ‡ã‚Šã§è¤‡æ•°ã®ç’°å¢ƒå¤‰æ•°ã‚’ã‚³ãƒ”ãƒšå¯èƒ½</li><li>ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å…¥ã‚Œã‚Œã°ã‚‚ã†å°‘ã—å›ºãç®¡ç†ã‚‚å¯èƒ½</li></ul><p>çš†ã•ã¾ã®é–‹ç™ºç”Ÿç”£æ€§ã«å°‘ã—ã§ã‚‚å½¹ç«‹ã¦ã‚Œã°å¹¸ã„ã§ã™ã€‚</p><h2 id="é–¢é€£è¨˜äº‹"><a href="#é–¢é€£è¨˜äº‹" class="headerlink" title="é–¢é€£è¨˜äº‹"></a>é–¢é€£è¨˜äº‹</h2><p>Goã«é–¢é€£ã—ãŸä»–ã®é€£è¼‰ä¼ç”»ã§ã™ã€‚</p><ul><li><a href="/tags/Serverless%E9%80%A3%E8%BC%89/">Serverlessé€£è¼‰</a></li><li><a href="/tags/DynamoDB%C3%97Go/">DynamoDBÃ—Go</a></li><li><a href="/tags/GCP%E9%80%A3%E8%BC%89/">GCPé€£è¼‰</a></li><li><a href="/tags/GoCDK/">GoCDK</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;img src=&quot;/images/20200519/top.png&quot;&gt;


&lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;/tags/GoTips%E
      
    
    </summary>
    
      <category term="Programming" scheme="https://future-architect.github.io/categories/Programming/"/>
    
    
      <category term="Go" scheme="https://future-architect.github.io/tags/Go/"/>
    
      <category term="Goland" scheme="https://future-architect.github.io/tags/Goland/"/>
    
      <category term="GoTipsé€£è¼‰" scheme="https://future-architect.github.io/tags/GoTips%E9%80%A3%E8%BC%89/"/>
    
  </entry>
  
  <entry>
    <title>Go Tipsé€£è¼‰1: ãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆProxyç”³è«‹ã™ã‚‹ã¨ãã®Goä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªURLãƒ‰ãƒ¡ã‚¤ãƒ³ã®èª¿ã¹æ–¹</title>
    <link href="https://future-architect.github.io/articles/20200518/"/>
    <id>https://future-architect.github.io/articles/20200518/</id>
    <published>2020-05-18T00:55:52.000Z</published>
    <updated>2020-05-23T05:17:09.716Z</updated>
    
    <content type="html"><![CDATA[<img src="/images/20200518/Go-Logo_LightBlue.png" class="img-small-size"><h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p><a href="/tags/GoTipsé€£è¼‰/">Go Tipsé€£è¼‰</a>ã®ç¬¬1å¼¾ç›®ã§ã™ã€‚</p><p>TIG DXãƒ¦ãƒ‹ãƒƒãƒˆã®å®®å´ã§ã™ã€‚ã“ã‚Œã¾ã§Rubyã€Javaä¸­å¿ƒã«ä»•äº‹ã‚’ã—ã¦ãã¾ã—ãŸãŒã€ã“ã“1å¹´ã¯æŸé‰„é“ä¼šç¤¾ã®IDé€£æºåŸºç›¤ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã‚’Golangã§ä½œã£ã¦ã„ã¾ã™ã€‚ä»Šå›ã¯Go Tipsé€£è¼‰ã®ç¬¬ä¸€å›ã¨ã—ã¦ã€ãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆProxyç”³è«‹ã™ã‚‹ã¨ãã®Goä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªURLãƒ‰ãƒ¡ã‚¤ãƒ³ã®èª¿ã¹æ–¹ã‚’è¨˜è¼‰ã—ã¾ã™ã€‚</p><p>â€»ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ã«ã¯Go Modulesã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å‰æã§ã™ã€‚</p><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>ç¤¾å†…CIã‚µãƒ¼ãƒã‹ã‚‰ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚¢ã‚¯ã‚»ã‚¹ãŒã‚„ã‚“ã”ã¨ãªãäº‹æƒ…ã§ãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆå½¢å¼ã§è¨±å¯ã•ã‚Œã¦ãŠã‚Šã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³ã¸ã®æ¥ç¶šè§£é™¤ç”³è«‹ã‚’ä¸Šã’ã‚ˆã†ã¨ã—ãŸã®ãŒå¥‘æ©Ÿã€‚  </p><p>go.modã§requireã—ã¦ã„ã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’å…¨ã¦è¨±å¯ã—ãŸã®ã«ã‚‚é–¢ã‚ã‚‰ãšä¸€éƒ¨ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒè½ã¨ã›ãªãã€(;Â´ï½¥Ï‰ï½¥)? ã¨ãªã£ãŸã®ã§ã“ã‚Œä»¥ä¸Šã®çŠ ç‰²è€…ã‚’å‡ºã•ãªã„ãŸã‚Tipsé€£è¼‰ãƒã‚¿ã«ã—ã¾ã™ã€‚</p><h1 id="çµè«–"><a href="#çµè«–" class="headerlink" title="çµè«–"></a>çµè«–</h1><ul><li>ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ç’°å¢ƒã«ã¦<code>go mod download -v</code>ã§ã‚¢ã‚¯ã‚»ã‚¹å…ˆã‚’å…¨ã¦è¡¨ç¤ºã•ã›ã‚‹ã€‚</li><li>ã“ã®æ™‚ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã‚ˆã£ã¦ã¯requireãƒ‰ãƒ¡ã‚¤ãƒ³ã§ã¯ãªã„ãƒªãƒã‚¸ãƒˆãƒªã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ã‚¢ã‚¯ã‚»ã‚¹è¨±å¯ãƒ‰ãƒ¡ã‚¤ãƒ³ã¨ã—ã¦è¦‹é€ƒã•ãªã„ã“ã¨ã€‚(ãƒãƒã‚Šãƒã‚¤ãƒ³ãƒˆ)ã€€  <ul><li>â†“ã®å ´åˆã ã¨requireå…ˆã¯<code>cloud.google.com</code>ã ãŒãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰è‡ªä½“ã¯<code>code.googlesource.com</code>ã‹ã‚‰å®Ÿæ–½ã•ã‚Œã‚‹ã€‚</li></ul></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">get <span class="string">"cloud.google.com/go"</span>: found meta tag get.metaImport&#123;Prefix:<span class="string">"cloud.google.com/go"</span>, VCS:<span class="string">"git"</span>, </span><br><span class="line">RepoRoot:<span class="string">"https://code.googlesource.com/gocloud"</span>&#125; at https://cloud.google.com/go?go-get=1</span><br></pre></td></tr></table></figure><br>ã“ã®è¨˜äº‹ã§å°‘ã—ã§ã‚‚çŠ ç‰²è€…ãŒæ¸›ã‚‹ã“ã¨ã‚’ç¥ˆã£ã¦ã„ã¾ã™ã€‚<h2 id="é–¢é€£è¨˜äº‹"><a href="#é–¢é€£è¨˜äº‹" class="headerlink" title="é–¢é€£è¨˜äº‹"></a>é–¢é€£è¨˜äº‹</h2><p>Goã«é–¢é€£ã—ãŸä»–ã®é€£è¼‰ä¼ç”»ã§ã™ã€‚</p><ul><li><a href="/tags/Serverless%E9%80%A3%E8%BC%89/">Serverlessé€£è¼‰</a></li><li><a href="/tags/DynamoDB%C3%97Go/">DynamoDBÃ—Go</a></li><li><a href="/tags/GCP%E9%80%A3%E8%BC%89/">GCPé€£è¼‰</a></li><li><a href="/tags/GoCDK/">GoCDK</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;img src=&quot;/images/20200518/Go-Logo_LightBlue.png&quot; class=&quot;img-small-size&quot;&gt;

&lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a
      
    
    </summary>
    
      <category term="Programming" scheme="https://future-architect.github.io/categories/Programming/"/>
    
    
      <category term="Go" scheme="https://future-architect.github.io/tags/Go/"/>
    
      <category term="GoTipsé€£è¼‰" scheme="https://future-architect.github.io/tags/GoTips%E9%80%A3%E8%BC%89/"/>
    
  </entry>
  
  <entry>
    <title>Serverlessé€£è¼‰6: AWSã®Step Functionsã¨Lambdaã§ServelessãªBatchå‡¦ç†ã‚’å®Ÿç¾ã™ã‚‹</title>
    <link href="https://future-architect.github.io/articles/20200515/"/>
    <id>https://future-architect.github.io/articles/20200515/</id>
    <published>2020-05-15T13:25:58.000Z</published>
    <updated>2020-05-15T01:12:46.976Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>AWS StepFunctionsã¨Lambdaã‚’æ´»ç”¨ã—ã¦ãƒãƒƒãƒå‡¦ç†ã‚’è¡Œã†è¨˜äº‹ã§ã™ã€‚<a href="https://future-architect.github.io/tags/Serverless%E9%80%A3%E8%BC%89/">ã‚µãƒ¼ãƒãƒ¬ã‚¹é€£è¼‰ä¼ç”»</a>ã®6å›ç›®ã§ã™ã€‚</p><p>2020å¹´ã¯Serverlessã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãŒå½“ãŸã‚Šå‰ã®ã‚ˆã†ã«æ¡ç”¨ã•ã‚Œã‚‹æ™‚ä»£ã«ãªã£ã¦ãã¦ã„ã‚‹ã¨å®Ÿæ„Ÿã—ã¾ã™ã€‚ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œã‚‹Backendã®APIã¯AWSç’°å¢ƒã ã¨ã€Appsyncã‚„API Gateway+Lambaã®åˆ©ç”¨ã€IoTãªã©ã‚¤ãƒ™ãƒ³ãƒˆãƒ‰ãƒªãƒ–ãƒ³ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«å¯¾ã—ã¦ã¯AWS IoTã€ãã®å¾Œç¶šã¯Kinesisã‚’ä½¿ã„ã€ã•ã‚‰ã«ãã®å¾Œç¶šã§Lambdaã‚„Kinesis Analyticsã§ETLå‡¦ç†ã‚’è¡Œã„ã€ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢ã¨ã—ã¦DynamoDBã‚„S3ã«æ ¼ç´ã™ã‚‹ã¨ã„ã£ãŸä¸€é€£ã®æµã‚Œå…¨ã¦ãƒ•ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ‰ãªã‚µãƒ¼ãƒ“ã‚¹ã«å¯„ã›ã¦æ§‹ç¯‰ã™ã‚‹ã“ã¨ã‚‚å½“ãŸã‚Šå‰ã§ã™ã—ã€ãã†ã„ã£ãŸäº‹ä¾‹ã‚‚çã—ãç„¡ããªã£ã¦ãã¾ã—ãŸã€‚</p><h1 id="ã‚µãƒ¼ãƒãƒ¬ã‚¹ã®ãƒãƒƒãƒå‡¦ç†"><a href="#ã‚µãƒ¼ãƒãƒ¬ã‚¹ã®ãƒãƒƒãƒå‡¦ç†" class="headerlink" title="ã‚µãƒ¼ãƒãƒ¬ã‚¹ã®ãƒãƒƒãƒå‡¦ç†"></a>ã‚µãƒ¼ãƒãƒ¬ã‚¹ã®ãƒãƒƒãƒå‡¦ç†</h1><p>ãã‚“ãªä¸­ã§ã€ãƒãƒƒãƒå‡¦ç†ï¼ˆå®šæ™‚èµ·å‹•ã‚„ãƒ¦ãƒ¼ã‚¶ã®éåŒæœŸã‚¤ãƒ™ãƒ³ãƒˆã§å‡¦ç†ã‚’è¡Œã†ã‚¸ãƒ§ãƒ–ï¼‰ã«é–¢ã—ã¦ã¯Lambdaã§ã¯ãªãECSãªã©ã‚’æ¡ç”¨ã™ã‚‹ã“ã¨ãŒå¤šã„ã¨æ€ã„ã¾ã™ã€‚ç†ç”±ã¨ã—ã¦ã¯ã‚„ã¯ã‚Š <a href="https://aws.amazon.com/jp/blogs/news/aws-lambda-timeout-15min/" target="_blank" rel="noopener">Lambdaã®Timeoutæ™‚é–“ãŒæœ€å¤§ã§15åˆ†</a> <sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup> ã§ã‚ã‚‹ãŸã‚ã§ã™ã€‚ã¾ãŸã€ECSã‚‚éåŒæœŸã‚¿ã‚¹ã‚¯èµ·å‹•ã§ã¯ãªãå¸¸é§ã«ã—ã¦HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆãªã©ã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’å¾…ã¡å—ã‘ã‚‹ã‚¿ã‚¤ãƒ—ã«é–¢ã—ã¦ã¯ã€<a href="https://docs.aws.amazon.com/ja_jp/elasticloadbalancing/latest/application/application-load-balancers.html#connection-idle-timeout" target="_blank" rel="noopener">ALBã§ã‚ã‚Œã°4000ç§’ï¼ˆç´„66åˆ†ï¼‰</a> <sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>ãªãŸã‚ã€1hè¶…ãˆã®å‡¦ç†æ™‚é–“ã«ãªã‚Šã†ã‚‹æ©Ÿèƒ½ã¯æ¡ç”¨ã§ããªã„ã§ã—ã‚‡ã†ã€‚ALBã§ã¯ãªãNLBã‚’æ¡ç”¨ã™ã‚‹ã¨ã“ã®åˆ¶ç´„ã‹ã‚‰ã¯é€ƒã’ã‚‰ã‚Œã‚‹ã®ã§ã€SecurityGroupãªã©ã®è€ƒãˆãŒã‚„ã‚„ALBã¨ç•°ãªã‚Šã¾ã™ãŒã“ã¡ã‚‰ã‚’æ¡ç”¨ã™ã‚‹ãƒãƒ¼ãƒ ã‚‚ã„ã‚‰ã£ã—ã‚ƒã‚‹ã¨æ€ã„ã¾ã™ã€‚ã‚‚ã—ãã¯æ¬¡ã® <a href="https://docs.aws.amazon.com/cli/latest/reference/ecs/run-task.html" target="_blank" rel="noopener">ecs-run-task</a> ã§éåŒæœŸã«ECSã‚³ãƒ³ãƒ†ãƒŠã‚’å‘¼ã³å‡ºã—ã¦ã„ã‚‹ã€ã¨ã„ã†æ–¹å¼ã‚’ã¨ã‚‹ã“ã¨ã‚‚å¤šã„ã®ã§ã¯ç„¡ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ å®šæœŸå®Ÿè¡Œã§ã‚ã‚Œã°ã€ECS Scheduled Tasksã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã®ã§ä¾¿åˆ©ã§ã™ã‚ˆã­ã€‚</p><h1 id="ECS-Run-Taskã«ã¤ã„ã¦"><a href="#ECS-Run-Taskã«ã¤ã„ã¦" class="headerlink" title="ECS Run Taskã«ã¤ã„ã¦"></a>ECS Run Taskã«ã¤ã„ã¦</h1><p>ecs-run-taskã§éåŒæœŸï¼ˆã¾ãŸã¯å®šæœŸçš„ï¼‰ã«ECSã‚’å‘¼ã³å‡ºã™æ–¹æ³•ã‚’å–ã‚‹ãƒ¡ãƒªãƒƒãƒˆã¯å¤šãã€ã€</p><ul><li>Timeoutãªã©ã®å„ç¨®åˆ¶ç´„ã‚’ç„¡è¦–ã—ã¦å®Ÿè¡Œã§ãã‚‹</li><li>å®Ÿè³ªmainé–¢æ•°ã‚’å®Ÿè£…ã™ã‚Œã°è‰¯ã„ã®ã§é–‹ç™ºæ™‚ã«ã‚³ãƒ³ãƒ†ãƒŠã‚’æ„è­˜ã™ã‚‹ã“ã¨ã¯å°‘ãªã„æ„å‘³ã§é›£æ˜“åº¦ã¯é«˜ããªã„</li><li>logå‡ºåŠ›ã‚‚è‡ªç”±è‡ªåœ¨ï¼ˆç›´æ¥ElasticSearchã«ãƒ­ã‚°ã‚’æŠ•ã’ã¤ã‘ã‚‹ã“ã¨ãªã©ä½•ã§ã‚‚ã§ãã‚‹ï¼‰</li><li>Fargateã‚’ç”¨ã„ã‚‹ã¨ã‚µãƒ¼ãƒã‚¤ãƒ³ãƒ•ãƒ©ã‚’æ„è­˜ã—ãªã„ã§æ¸ˆã‚€ãŸã‚ã€å®Ÿè³ªServerlessã¨ã—ã¦é‹ç”¨ã§ããã†</li></ul><p>â€¦ã¨è¨€ã£ãŸã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ã¨ã¯è¨€ãˆã„ãã¤ã‹ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ã‚‚ã‚ã‚Šã¾ã™ã€‚æ€ã„ã¤ãé™ã‚Šã ã¨â€¦</p><ul><li>ECSã‚¿ã‚¹ã‚¯ã®çµ‚äº†ã‚’ <strong>å¾…ã¡å—ã‘ã¦</strong> æ¬¡å‡¦ç†ã‚’è¡Œã†ã¨ã„ã£ãŸã“ã¨ãŒã‚„ã‚Šã«ãã„<ul><li>èµ·å‹•ã—ãŸECSã‚¿ã‚¹ã‚¯ãŒçµ‚äº†ã—ãŸã¨ã„ã†ã“ã¨ã‚’ã€é€šå¸¸ã¯Pollingçš„ã«ç›£è¦–ã™ã‚‹å¿…è¦ãŒã‚ã‚‹<ul><li>ã‚‚ã—ãã¯ã€ECSã‚³ãƒ³ãƒ†ãƒŠã‚¢ãƒ—ãƒªã®çµ‚äº†æ™‚ã«ã€SQSãªã©ã«å®Ÿè¡Œçµ‚äº†ã—ãŸã“ã¨ã‚’é€šçŸ¥ã™ã‚‹å¿…è¦ãŒã‚ã‚‹</li></ul></li></ul></li><li>ã‚³ãƒ³ãƒ†ãƒŠã‚µã‚¤ã‚ºã«ä¾å­˜ã—ã¦èµ·å‹•æ™‚é–“ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ãŒã‚ã‚‹</li><li>ECS TaskDefinitionã®ç®¡ç†ãŒå¤§å¤‰</li></ul><p>ãªã©ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚<a href="https://github.com/kayac/ecspresso" target="_blank" rel="noopener">kayac/ecspresso</a> ã®ã‚ˆã†ãªECSãƒ‡ãƒ—ãƒ­ã‚¤ãƒ„ãƒ¼ãƒ«ã‚„ã€ECSä»¥å¤–ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’æ¡ç”¨ã—ã¦ã‚‚å­¦ç¿’ã‚³ã‚¹ãƒˆãƒ»ã‚¤ãƒ³ãƒ•ãƒ©ä¿å®ˆã‚³ã‚¹ãƒˆã¯ã©ã†ã—ã¦ã‚‚ã‹ã‹ã‚‹ã®ã§ã‚„ã‚„ç„¡ç†ã‚„ã‚Šä¸Šã’ãŸæ„ŸãŒã‚ã‚Šã¾ã™ãŒã”å®¹èµ¦ãã ã•ã„ã€‚</p><p>å€‹äººçš„ã«ã¯ã‚¸ãƒ¥ãƒ‹ã‚¢ãªã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒãƒãƒ¼ãƒ ã«å¤šã„ã®ã¨ã€AWSã«æ…£ã‚Œã¦ã„ãªã„æ–°è¦å‚ç”»è€…ãŒå¤šã„ã¨ã„ã†ã€ã€Œ<strong>ä»–ã‚¢ãƒ—ãƒªãŒLambdaã§å®Œçµã—ã¦ã„ã‚‹å ´åˆã«ã€ECSã¨ã„ã†åˆ¥ã®ã‚¢ãƒ—ãƒªãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚’å…¥ã‚ŒãŸããªã„</strong>ã€ ã¨ã„ã†æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã‚’ãªã‚‹ã¹ãå¢—ã‚„ã—ãŸããªã„ã¨ã„ã†æ€ã„ãŒã‚ã‚Šã€ã§ãã‚‹é™ã‚Šã‚¢ãƒ—ãƒªé–‹ç™ºã¯Lambdaã§ã‚„ã‚ŠãŸã„ã¨æ€ã£ã¦ã¾ã™ã€‚ï¼ˆDockerfileã‚‚ãªã‚‹ã¹ãæ›¸ã‹ã›ãªãç„¡ã‘ã‚Œã°ã€ ECRã‚„ECSãªã©ã‚¤ãƒ³ãƒ•ãƒ©ç®¡ç†å¯¾è±¡ã‚‚å¢—ã‚„ã—ãŸããªã„ã—ã€CI/CDã®ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã‚‚ä¸‹ã’ã¦æ¥½ã—ãŸã„ã¨ã„ã†ã®ãŒã‚ã‚Šã¾ã™ï¼‰</p><h1 id="Lambdaã§ãƒãƒƒãƒå‡¦ç†ã‚’ã‚¬ãƒ³ãƒãƒ«"><a href="#Lambdaã§ãƒãƒƒãƒå‡¦ç†ã‚’ã‚¬ãƒ³ãƒãƒ«" class="headerlink" title="Lambdaã§ãƒãƒƒãƒå‡¦ç†ã‚’ã‚¬ãƒ³ãƒãƒ«"></a>Lambdaã§ãƒãƒƒãƒå‡¦ç†ã‚’ã‚¬ãƒ³ãƒãƒ«</h1><p>èµ·å‹•æ™‚é–“ã®åˆ¶ç´„ãŒã‚ã‚‹ã‚‚ã®ã®Lambdaã§ãƒãƒƒãƒå‡¦ç†ã‚’ã‚¬ãƒ³ãƒãƒ«å‰æã§é€²ã‚ã¾ã™ã€‚</p><p>ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¨ã—ã¦ã¯è‰²ã€…ã‚ã‚‹ã¨æ€ã„ã¾ã™ãŒã€ã‚ˆãæ€ã„ã¤ãã®ã¯æ¬¡ã®2ã¤ã®æ‰‹æ³•ã§ã™ã€‚</p><ol><li>Lambdaã®å®Ÿè¡Œæ™‚é–“ã‚’ã‚¢ãƒ—ãƒªä¸Šã§è¨ˆæ¸¬ã—ã€ã‚·ãƒ³ãƒ‡ãƒ¬ãƒ©ã‚¿ã‚¤ãƒ ãŒè¿‘ã¥ããã†ã§ã‚ã‚Œã°è‡ªåˆ†ã§å‡¦ç†ã‚’ä¸­æ–­ã€ã‚ªãƒ•ã‚»ãƒƒãƒˆã‚’å¼•æ•°ã«SQSã«æŠ•ã’ã‚‹ã‹ã€éåŒæœŸã§æ¬¡ã®Lambdaã‚’Invokeã—ã¦å‡¦ç†ã‚’ç¶™ç¶šã™ã‚‹(ä¸‹å›³ã®Lambdaå»¶å‘½ã‚¤ãƒ¡ãƒ¼ã‚¸)</li><li>å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‚’ä¸€å®šã®å¤§ãã•ã§ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³åŒ–ã—ã¦ã€1ã¨åŒã˜ãSQSã‚„Lambdaã‚’Invokeã—ã¦å¾Œç¶šã®è¤‡æ•°ã®Lambdaã§å‡¦ç†ã‚’è¡Œã†ï¼ˆä¸‹å›³ã®Lambdaå…¥åŠ›ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼‰</li></ol><img src="/images/20200515/photo_20200515_01.png"><p>å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‚’ä¸Šæ‰‹ãåˆ†å‰²å®Ÿè¡Œã§ããªã„ã‚‚ã®ã«é–¢ã—ã¦ã¯1ã§ã‚·ãƒ¼ã‚±ãƒ³ã‚·ãƒ£ãƒ«ã«è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ãŒã€ãã†ã§ãªã„å ´åˆã¯2ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®ã»ã†ãŒã€å¾Œã€…ä¸¦åˆ—å®Ÿè¡Œã—ãŸã„å ´åˆã«ã‚‚è»¢ç”¨ã§ãã‚‹ã®ã§ä¾¿åˆ©ã ã¨æ€ã„ã¾ã™ã®ã§ã€2ã®æ–¹é‡ã§é€²ã‚ã¾ã™ã€‚</p><h1 id="ã‚³ãƒ¼ãƒ‰ã«ã¤ã„ã¦"><a href="#ã‚³ãƒ¼ãƒ‰ã«ã¤ã„ã¦" class="headerlink" title="ã‚³ãƒ¼ãƒ‰ã«ã¤ã„ã¦"></a>ã‚³ãƒ¼ãƒ‰ã«ã¤ã„ã¦</h1><p>æ¬¡ã‹ã‚‰Goã®ã‚³ãƒ¼ãƒ‰ã‚’ã¾ã˜ãˆãªãŒã‚‰é€²ã‚ã¦ã„ãã¾ã™ã€‚è¨˜è¼‰ã™ã‚‹ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯importæ–‡ãªã©ã‚’çœç•¥ã—ã¦ã„ã¾ã™ã€‚å…¨æ–‡ã¯ä»¥ä¸‹ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’å‚ç…§ãã ã•ã„ã€‚</p><p><a href="https://github.com/laqiiz/servlerless-batch-example" target="_blank" rel="noopener">https://github.com/laqiiz/servlerless-batch-example</a></p><h1 id="å…¥åŠ›ãŒDynmaoDBã®å ´åˆ"><a href="#å…¥åŠ›ãŒDynmaoDBã®å ´åˆ" class="headerlink" title="å…¥åŠ›ãŒDynmaoDBã®å ´åˆ"></a>å…¥åŠ›ãŒDynmaoDBã®å ´åˆ</h1><p>DynamoDBã¯KVSã¨ã„ã†å°è±¡ãŒå¼·ã„ã§ã™ãŒã€éå¸¸ã«å¤šãã®æ©Ÿèƒ½ã‚’æŒã£ã¦ã„ã¾ã™ã€‚ã„ã‚ã‚†ã‚‹PKï¼ˆHashKeyã‹HashKeyï¼‹SortKeyï¼‰ã‚’æŒ‡å®šã›ãšã«ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—ã™ã‚‹æ–¹æ³•ã«ã¯ã€æ¬¡ã®1,2ãŒã‚ã‚Šã¾ã™ãŒãƒãƒƒãƒç”¨é€”ã ã¨ãŠãã‚‰ã1ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒå¤šã„ã¨æ€ã„ã¾ã™ã€‚ã¡ãªã¿ã«ã€2ã¯GSIã«å¯¾ã—ã¦ã‚‚å®Ÿæ–½ã§ãã¾ã™ã€‚</p><ol><li><strong>Scan</strong>: HashKeyã‚’æŒ‡å®šã›ãšãƒ•ãƒ«ã‚¹ã‚­ãƒ£ãƒ³ã™ã‚‹</li><li><strong>Query</strong>: HashKeyã‚’æŒ‡å®šã—ã¦SortKeyã«å¯¾ã—ã¦æ¡ä»¶ã§çµã‚‹</li></ol><p>1ã®ãƒ•ãƒ«ã‚¹ã‚­ãƒ£ãƒ³ã§ã™ãŒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å´ã§PartitionKeyã®ã‚ˆã†ãªã‚‚ã®ã‚’æŒãŸã›ã‚‹ã“ã¨ç„¡ãã€DynamoDBã®æ©Ÿèƒ½ã¨ã—ã¦ä¸‹å›³ã®ã‚ˆã†ã« <a href="https://docs.aws.amazon.com/ja_jp/amazondynamodb/latest/developerguide/Scan.html#Scan.ParallelScan" target="_blank" rel="noopener">ä¸¦åˆ—ã‚¹ã‚­ãƒ£ãƒ³</a>ãŒå¯èƒ½ã§ã™ã€‚</p><img src="/images/20200515/photo_20200515_02.png"><p>AWSã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‹ã‚‰å¼•ã£å¼µã£ã¦æ¥ã¾ã—ãŸãŒã€ <code>TotalSegments</code> ã¨ <code>Segment</code> ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€DynamoDBå´ãŒãƒ‡ãƒ¼ã‚¿ã‚’è«–ç†çš„ã«TotalSegmentsã®æ•°ã«åˆ†å‰²ã—ã¦ãã‚Œã¾ã™ã€‚ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å´ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æŒ‡å®šã™ã‚‹ã ã‘ã§OKã§ã™ã€‚</p><p>ä¾‹ã¨ã—ã¦TotalSegmentsã€Segmentã‚’æŒ‡å®šã—ãŸå ´åˆã®DynamoDB Scanã®Goå®Ÿè£…ã®ä¾‹ã§ã™ã€‚TotalSegmentsã‚’<code>4</code>ã«ã™ã‚‹å ´åˆã¯ã€total=4ã«ã—ã€segã«0,1,2,3æŒ‡å®šã—ãŸå®Ÿè¡Œã™ã‚Œã°æ’ä»–çš„ã«ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã§ãã¾ã™ã€‚ä½•ã‹ã—ã‚‰ã®PartitionKeyã¨SortKeyã‚’è¨­å®šã—ã¦GSIã§ä¸Šæ‰‹ããƒ‡ãƒ¼ã‚¿ã‚’åˆ†å‰²ã™ã‚‹ã¨è¨€ã£ãŸè€ƒæ…®ãªã—ã«åˆ©ç”¨ã§ãã‚‹ãŸã‚éå¸¸ã«ä¾¿åˆ©ã ã¨æ€ã„ã¾ã™ã€‚</p><p>ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•ã‚’æ›¸ã„ã¦ã„ãã¾ã™ã€‚æœ€åˆã«DynamoDBã‚’åˆæœŸåŒ–ã—ã¦ãŠãã¾ã™ã€‚å¿…è¦ã«å¿œã˜ã¦å„ç¨®Configè¨­å®šã‚’è¡Œã„ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> db = dynamodb.New(session.Must(session.NewSession(aws.NewConfig().WithRegion(<span class="string">"ap-northeast-1"</span>))))</span><br></pre></td></tr></table></figure><p>å…ˆã»ã©åˆæœŸåŒ–ã—ãŸdbã«å¯¾ã—ã¦ãƒ‡ãƒ¼ã‚¿æ“ä½œã‚’è¡Œã„ã¾ã™ã€‚<code>TotalSegments</code>, <code>Segment</code> ã®æŒ‡å®šãŒåˆ†å‰²ã®ã‚­ãƒ¼ã¨ãªã‚Šã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>SegmentæŒ‡å®šã®å®Ÿè£…ä¾‹</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ScanSegment</span><span class="params">(ctx context.Context, total, seg <span class="keyword">int64</span>, startKey <span class="keyword">map</span>[<span class="keyword">string</span>]*dynamodb.AttributeValue)</span> <span class="params">([]Resp, <span class="keyword">map</span>[<span class="keyword">string</span>]*dynamodb.AttributeValue, error)</span></span> &#123;</span><br><span class="line">out, err := db.ScanWithContext(ctx, &amp;dynamodb.ScanInput&#123;</span><br><span class="line">TableName:         aws.String(<span class="string">"&lt;DynamoDB Scan Table&gt;"</span>),</span><br><span class="line">TotalSegments:     aws.Int64(total), <span class="comment">// ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã¸ã®åˆ†å‰²æ•°</span></span><br><span class="line">Segment:           aws.Int64(seg),   <span class="comment">// å‡¦ç†ç•ªå·ï¼ˆ0,1,2,3ã‚’æŒ‡å®šï¼‰</span></span><br><span class="line">ExclusiveStartKey: startKey,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, <span class="literal">nil</span>, fmt.Errorf(<span class="string">"db.ScanWithContext: %w"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> resp []Resp</span><br><span class="line"><span class="keyword">if</span> err := dynamodbattribute.UnmarshalListOfMaps(out.Items, &amp;resp); err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, <span class="literal">nil</span>, fmt.Errorf(<span class="string">"dynamodbattribute.UnmarshalListOfMaps: %w"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> resp, out.LastEvaluatedKey, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã“ã® <code>ScanSegment</code> é–¢æ•°ã‚’å‘¼ã³å‡ºã™ã¨ã€æŒ‡å®šã•ã‚ŒãŸSegmentç•ªå·ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã®ã¿èª­ã¿å–ã‚‹äº‹ãŒã§ãã¾ã™ã€‚å‘¼ã³å‡ºã—æ–¹ã¯å¾Œè¿°ã—ã¾ã™ã€‚æ¬¡ã®<strong>ãƒšãƒ¼ã‚¸ãƒ³ã‚°</strong>ã®è€ƒãˆã¨åˆã‚ã›ã¦è€ƒæ…®ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><h2 id="DynamoDBã‚’ãƒãƒƒãƒå‡¦ç†ã§æ‰±ã†ã¨ãã®æ³¨æ„"><a href="#DynamoDBã‚’ãƒãƒƒãƒå‡¦ç†ã§æ‰±ã†ã¨ãã®æ³¨æ„" class="headerlink" title="DynamoDBã‚’ãƒãƒƒãƒå‡¦ç†ã§æ‰±ã†ã¨ãã®æ³¨æ„"></a>DynamoDBã‚’ãƒãƒƒãƒå‡¦ç†ã§æ‰±ã†ã¨ãã®æ³¨æ„</h2><p>ã„ãã¤ã‹è£œè¶³ã—ã¦ã€DynamoDBã§å¤§ããªãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚ºã®ãƒ‡ãƒ¼ã‚¿ã‚’æ‰±ã†å ´åˆã®æ³¨æ„ã‚’è¨˜è¼‰ã—ã¾ã™ã€‚</p><h3 id="ãƒšãƒ¼ã‚¸ãƒ³ã‚°ã«ã¤ã„ã¦"><a href="#ãƒšãƒ¼ã‚¸ãƒ³ã‚°ã«ã¤ã„ã¦" class="headerlink" title="ãƒšãƒ¼ã‚¸ãƒ³ã‚°ã«ã¤ã„ã¦"></a>ãƒšãƒ¼ã‚¸ãƒ³ã‚°ã«ã¤ã„ã¦</h3><p>DynamoDBã®1åº¦ã®Scanã§ã®æœ€å¤§ã‚µã‚¤ã‚ºã¯1MBã¨ã„ã†åˆ¶ç´„ãŒã‚ã‚Šã¾ã™ã€‚ãã‚Œä»¥ä¸Šã®ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿å–ã‚Šã‚‹å ´åˆã¯ã€ ExclusiveStartKeyã§æŒ‡å®šã—ã¦ã„ã‚‹ã‚ˆã†ãª <a href="https://docs.aws.amazon.com/ja_jp/amazondynamodb/latest/developerguide/Scan.html#Scan.Pagination" target="_blank" rel="noopener">ãƒšãƒ¼ã‚¸ãƒ³ã‚°</a> ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä¸Šè¨˜ã®å®Ÿè£…ã§ã‚ã‚Œã° <code>ExclusiveStartKey</code> ãŒãã‚Œã«ã‚ãŸã‚Šã¾ã™ã€‚</p><p><code>ScanSegment</code> ã®å‘¼ã³å‡ºã—å´ã®å®Ÿè£…ä¾‹ã‚‚è¨˜è¼‰ã—ã¦ãŠãã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>ScanSegmentã®å‘¼ã³å‡ºã—å´ã®å®Ÿè£…ä¾‹</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ScanWithLogic</span><span class="params">(ctx context.Context, total, seg <span class="keyword">int64</span>)</span> <span class="title">error</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> startKey <span class="keyword">map</span>[<span class="keyword">string</span>]*dynamodb.AttributeValue <span class="comment">// åˆå›ã¯nilã§OK</span></span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">resp, sk, err := ScanSegment(context.Background(), total, seg startKey)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> fmt.Errorf(<span class="string">"ScanSegment: %w"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO respã«å¯¾ã—ã¦ä½•ã‹ã—ã‚‰ã®ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯</span></span><br><span class="line"></span><br><span class="line">startKey = sk</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(startKey) == <span class="number">0</span> &#123;</span><br><span class="line"><span class="keyword">break</span> <span class="comment">// ç¶šããŒç„¡ã„ã¨ã„ã†ã“ã¨ãªã®ã§çµ‚äº†</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Scanã®çµæœã‚’ãƒšãƒ¼ã‚¸ãƒ³ã‚°ã‚’é§†ä½¿ã—ã¤ã¤æœ€å¾Œã¾ã§èª­ã¿å–ã‚‹å ´åˆã¯ã€ Scançµæœã® <code>LastEvaluatedKey</code> ãŒå­˜åœ¨ã—ãªããªã‚‹ã¾ã§ç¹°ã‚Šè¿”ã—ã¦å‘¼ã³å‡ºã™ã“ã¨ã«ãªã‚Šã¾ã™ã€‚ä¸Šè¨˜ã§ segments=0 ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã™ã¹ã¦èª­ã¿å–ã‚‹äº‹ãŒã§ãã¾ã—ãŸã€‚</p><h3 id="å˜ä¸€ãƒ—ãƒ­ã‚»ã‚¹ã§ã®åˆ†æ•£å®Ÿè¡Œ"><a href="#å˜ä¸€ãƒ—ãƒ­ã‚»ã‚¹ã§ã®åˆ†æ•£å®Ÿè¡Œ" class="headerlink" title="å˜ä¸€ãƒ—ãƒ­ã‚»ã‚¹ã§ã®åˆ†æ•£å®Ÿè¡Œ"></a>å˜ä¸€ãƒ—ãƒ­ã‚»ã‚¹ã§ã®åˆ†æ•£å®Ÿè¡Œ</h3><p>ã‚‚ã—ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§åˆ†æ•£å®Ÿè¡Œã—ãŸã„å ´åˆã¯Goã§ã‚ã‚Œã° errgroupã‚’ç”¨ã„ã‚‹ã¨ä¾¿åˆ©ã§ã™ã€‚æ³¨æ„ã¨ã—ã¦ã©ã‚Œã‹1ã¤ã®goroutineãŒå¤±æ•—ã—ãŸå ´åˆã§ã‚‚ã€ãã‚Œã ã‘ã‚„ã‚Šç›´ã™ã®ã§ã¯ãªãå…¨ã¦ã‚„ã‚Šç›´ã™ã“ã¨ã«ãªã‚‹ã®ã§ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å†ªç­‰ã«ä½œã£ã¦ç½®ãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®åˆ†æ•£å®Ÿè¡Œ</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">parallel := <span class="number">4</span></span><br><span class="line"></span><br><span class="line">eg := errgroup.Group&#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; parallel; i++ &#123;</span><br><span class="line">i := i</span><br><span class="line">eg.Go(<span class="function"><span class="keyword">func</span><span class="params">()</span> <span class="title">error</span></span> &#123;</span><br><span class="line">err := ScanWithLogic(context.Background(), <span class="keyword">int64</span>(parallel), <span class="keyword">int64</span>(i))</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> err := eg.Wait(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fmt.Printf(<span class="string">"finished"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å‡ºåŠ›å…ˆã‚’DynamoDBã«ã™ã‚‹å ´åˆã®ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°å¯¾ç­–"><a href="#å‡ºåŠ›å…ˆã‚’DynamoDBã«ã™ã‚‹å ´åˆã®ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°å¯¾ç­–" class="headerlink" title="å‡ºåŠ›å…ˆã‚’DynamoDBã«ã™ã‚‹å ´åˆã®ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°å¯¾ç­–"></a>å‡ºåŠ›å…ˆã‚’DynamoDBã«ã™ã‚‹å ´åˆã®ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°å¯¾ç­–</h3><p>ä»Šå›ã€å‡ºåŠ›å…ˆã«ã¤ã„ã¦ã¯ãƒ†ãƒ¼ãƒã§ã¯ãªã„ã§ã™ãŒã€DynamoDBã«å¯¾ã—ã¦è¡Œã†å ´åˆã¯ã‚¯ã‚»ãŒã‚ã‚‹ãŸã‚è¿½è¨˜ã—ã¦ãŠãã¾ã™ã€‚</p><p>å¤§é‡ãƒ‡ãƒ¼ã‚¿ã‚’DynamoDBã«æ›¸ãè¾¼ã‚€å ´åˆã¯ã€BatchWriteItemã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒå¤šã„ã§ã—ã‚‡ã†ã€‚ã“ã®ã¨ã<a href="https://docs.aws.amazon.com/ja_jp/amazondynamodb/latest/developerguide/Limits.html#limits-api" target="_blank" rel="noopener">DynamoDBã®APIåˆ¶é™</a> ã¨ã—ã¦ã€ä»¥ä¸‹ã®25ä»¶ã®åˆ¶ç´„ãŒã‚ã‚Šã¾ã™ã€‚</p><blockquote><p>å˜ä¸€ã® BatchWriteItem ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€æœ€å¤§ 25 ã® PutItem ã¾ãŸã¯ DeleteItem ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å«ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚æ›¸ãè¾¼ã‚€ã™ã¹ã¦ã®é …ç›®ã®åˆè¨ˆã‚µã‚¤ã‚ºã¯ 16 MB ã‚’è¶…ãˆã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚</p></blockquote><p>ã“ã¡ã‚‰ã¯è¶…éã—ãŸå ´åˆã«ã¯å…¨ä»¶ç™»éŒ²ã«å¤±æ•—ã—ã€errorãŒè¿”ã£ã¦ãã‚‹ã®ã§ã¾ã è‰¯å¿ƒçš„ãªåˆ¶ç´„ã§ã™ã€‚</p><p>ã—ã‹ã—ã€<a href="https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_BatchWriteItem.html" target="_blank" rel="noopener">BatchWriteItemã®ä»•æ§˜</a>ã¨ã—ã¦ãƒãƒƒãƒã® <strong>éƒ¨åˆ†çš„ãªæ›¸ãè¾¼ã¿æˆåŠŸ</strong> ãŒç™ºç”Ÿã™ã‚‹ã“ã¨ãŒã‚ã‚Šãˆã¾ã™ã€‚ãƒ†ãƒ¼ãƒ–ãƒ«åã®æŒ‡å®šãªã©åŸºæœ¬çš„ãªã¨ã“ã‚ãŒå¤±æ•—ã—ã¦ã„ã‚Œã°ã€å…¨ä»¶å¤±æ•—ã«ãªã‚‹ã®ã§ã™ãŒã€æ›¸ãè¾¼ã¿ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆè¶…éã‚¨ãƒ©ãƒ¼ã§ã‚ã‚Œã° <code>UnprocessedItems</code> ã¨ã—ã¦ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«å«ã¾ã‚Œã€ãã®Itemã¯æ›¸ãè¾¼ã¿å¤±æ•—ã«ãªã‚Šã¾ã™ã€‚æœ€åˆã¯mjkã¨æ€ã„ã€ã„ã¾ã§ã‚‚mjkã£ã¦æ€ã£ã¦ã¾ã™ã€‚</p><p>ãã®ãŸã‚ã€ä¸‹è¨˜ã®å®Ÿè£…ä¾‹ã®ã‚ˆã†ã«ã€å®Ÿè¡Œçµæœã‹ã‚‰ <code>UnprocessedItems</code> ã‚’å–ã‚Šå‡ºã—æœªå‡¦ç†ã®ä»¶æ•°ãŒ0ã«ãªã‚‹ã¾ã§ç¹°ã‚Šè¿”ã—ã¦BatchWriteè¦æ±‚ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>BatchPutæ™‚ã®UnprocessedItemsã‚’è€ƒæ…®ã—ãŸå®Ÿè£…ä¾‹</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BatchPut</span><span class="params">(ctx context.Context, puts []Output)</span> <span class="title">error</span></span> &#123;</span><br><span class="line">batchReq := <span class="built_in">make</span>([]*dynamodb.WriteRequest, <span class="number">0</span>, <span class="number">25</span>) <span class="comment">// dynamodb max batch size is 25</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i, v := <span class="keyword">range</span> puts &#123;</span><br><span class="line">av, err := dynamodbattribute.MarshalMap(v)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> fmt.Errorf(<span class="string">"dynamodbattribute.MarshalMap: %w"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">batchReq = <span class="built_in">append</span>(batchReq, &amp;dynamodb.WriteRequest&#123;</span><br><span class="line">PutRequest: &amp;dynamodb.PutRequest&#123;</span><br><span class="line">Item: av,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">len</span>(batchReq) &gt;= <span class="number">25</span> || (i == <span class="built_in">len</span>(puts) <span class="number">-1</span> &amp;&amp; <span class="built_in">len</span>(batchReq) &gt; <span class="number">0</span>) &#123;</span><br><span class="line"><span class="comment">// 25ä»¶ã«é”ã—ãŸã‹ã€æœ€å¾Œã®ãƒ«ãƒ¼ãƒ—ã®å ´åˆã«æ›¸ãè¾¼ã‚€</span></span><br><span class="line">out, err := db.BatchWriteItemWithContext(ctx, &amp;dynamodb.BatchWriteItemInput&#123;</span><br><span class="line">RequestItems: <span class="keyword">map</span>[<span class="keyword">string</span>][]*dynamodb.WriteRequest&#123;</span><br><span class="line"><span class="string">"&lt;Your Write Table&gt;"</span>: batchReq,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> fmt.Errorf(<span class="string">"db.BatchWriteItemWithContext: %w"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">batchReq = batchReq[:<span class="number">0</span>] <span class="comment">// æˆåŠŸã—ãŸå ´åˆã¯ãƒãƒƒãƒå¯¾è±¡ã‚’åˆæœŸåŒ–</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(out.UnprocessedItems[<span class="string">"&lt;Your Write Table&gt;"</span>]) &gt; <span class="number">0</span> &#123;</span><br><span class="line"><span class="comment">// æœªå‡¦ç†ItemãŒå­˜åœ¨ã—ãŸå ´åˆã¯å†è¨­å®š</span></span><br><span class="line">batchReq = <span class="built_in">append</span>(batchReq, out.UnprocessedItems[<span class="string">"&lt;Your Write Table&gt;"</span>]...)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã¡ã‚‡ã£ã¨å¤§å¤‰ã§ã™ãŒã€ä¸Šè¨˜ã«ã‚ˆã£ã¦ãƒãƒƒãƒæœªå‡¦ç†ã®å–ã‚Šã“ã¼ã—ç„¡ãDynamoDBã«ãƒ‡ãƒ¼ã‚¿ã‚’ç™»éŒ²ã§ãã¾ã™ã€‚é€†ã«UnprocessedItemsã‚’è€ƒæ…®ã›ãšã«å®Ÿè¡Œã—ãŸå ´åˆã€ err ãŒç™ºç”Ÿã›ãšæ­£å¸¸çµ‚äº†ã™ã‚‹ã‘ã©ãƒ‡ãƒ¼ã‚¿ãŒå®Ÿã¯æœªç™»éŒ²ã ã£ãŸã€ã¨ã„ã†ã“ã¨ãŒã‚ã‚Šãˆã‚‹ã®ã§ã”æ³¨æ„ãã ã•ã„ã€‚</p><h1 id="å…¥åŠ›ãŒS3ã®å ´åˆ"><a href="#å…¥åŠ›ãŒS3ã®å ´åˆ" class="headerlink" title="å…¥åŠ›ãŒS3ã®å ´åˆ"></a>å…¥åŠ›ãŒS3ã®å ´åˆ</h1><p>å‰æã¨ã—ã¦S3ã«å·¨å¤§ãª1ãƒ•ã‚¡ã‚¤ãƒ«ã«å¯¾ã—ã¦ä½•ã‹ã—ã‚‰ã®æ¤œè¨¼ã‚„ETLãªã©ã®å‡¦ç†ã‚’è¡Œã†ã“ã¨ã¨ã—ã¾ã™ã€‚ã‚‚ã—è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚ã‚Œã°AWS Athenaã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã‚’ç”¨ã„ãŸæ–¹ãŒåŠ¹ç‡çš„ã ã¨æ€ã„ã¾ã™ã€‚Athenaã®å ´åˆã¯ã‚¯ã‚¨ãƒªçµæœãŒéåŒæœŸã§å–å¾—ã™ã‚‹ã“ã¨ã«ãªã‚‹ã®ã§å†…éƒ¨ã§çµæœã‚’ãƒãƒ¼ãƒªãƒ³ã‚°ã™ã‚‹ãªã©å°‘ã—ä½œã‚Šè¾¼ã¿ãŒå¿…è¦ã ã¨æ€ã„ã¾ã™ã®ã§ã€ãã®ç‚¹ã®è€ƒæ…®ã¯ã”æ³¨æ„ãã ã•ã„ã€‚</p><p>ã•ã¦ã€S3ã®1ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ‰±ã†å ´åˆã§è¡Œå˜ä½ã§ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ‹ãƒ³ã‚°ã—ã¦èª­ã¿å–ã‚‹æ–¹æ³•ã¯ï¼ˆèª¿æŸ»ã—ãŸé™ã‚Šã¯ï¼‰å­˜åœ¨ã—ã¾ã›ã‚“ã€‚å…¥åŠ›ãŒCSVã‚„JSON Lineã®å‰æã ã¨ <a href="https://aws.amazon.com/jp/blogs/news/querying-data-without-servers-or-databases-using-amazon-s3-select/" target="_blank" rel="noopener">S3 Select</a> ãŒåˆ©ç”¨ã§ãã‚‹ã®ã§ã€ã“ã¡ã‚‰ã§å¯¾å¿œã—ã¾ã™ã€‚</p><p>S3 Selectã¯S3ã®å˜ä¸€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¯¾ã—ã¦ã®ã¿åˆ©ç”¨å¯èƒ½ã€‚SQLã®ãƒ†ãƒ¼ãƒ–ãƒ«åã¯ <code>s3object</code> å›ºå®šã«ãªã‚Šã¾ã™ã€‚ä½•ã‹ã—ã‚‰ã®æ•°å€¤é …ç›®ã«å¯¾ã—ã¦ã€ <code>SELECT * FROM s3object WHERE (item_no % 4) = 0</code> ã¨ã™ã‚Œã°å¯¾è±¡ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®ã¿ã‚’æ‰±ãˆã¾ã™ã€‚</p><p>CSVã®å…¥åŠ›ã«å¯¾ã—ã¦ã¯ã€S3 Selectã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ–‡å­—åˆ—ã§å‹åˆ¤å®šã™ã‚‹ã‚ˆã†ãªã®ã§ã€æ•°å€¤é …ç›®ãŒå­˜åœ¨ã™ã‚‹å ´åˆã¯SQLä¸Šã§<code>CAST</code>ãŒå¿…è¦ãªã®ã§æ³¨æ„ã§ã™ã€‚<a href="https://aws.amazon.com/jp/blogs/developer/introducing-support-for-amazon-s3-select-in-the-aws-sdk-for-go/" target="_blank" rel="noopener">AWS Developer Blog - Introducing support for Amazon S3 Select in the AWS SDK for Go</a>ã§ã¯ <code>io.Pipe</code> + <code>csv.NewReader</code> ã‚’ä½¿ã£ã¦ã„ã‚‹å®Ÿè£…ä¾‹ãŒç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã™ãŒã€ä»Šå›ã¯æŠ˜è§’ãªã®ã§JSON Outputã‚’ä½¿ã£ã¦å®Ÿè£…ã—ã¦ã¿ã¾ã™ã€‚</p><p>ä»¥ä¸‹ã®ã‚ˆã†ã«S3 Selectéƒ¨åˆ†ã«SQLã‚’è¨˜è¼‰ã—ã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>S3-Selectã®å‘¼ã³å‡ºã—ä¾‹</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">resp, err := svc.SelectObjectContent(&amp;s3.SelectObjectContentInput&#123;</span><br><span class="line">Bucket:         aws.String(<span class="string">"&lt;Your S3 Bucket&gt;"</span>),</span><br><span class="line">Key:            aws.String(<span class="string">"&lt;S3 Key Name&gt;.csv"</span>),</span><br><span class="line">ExpressionType: aws.String(s3.ExpressionTypeSql),</span><br><span class="line">Expression:     aws.String(<span class="string">"SELECT cast(item_no integer), item_name FROM s3object s WHERE cast(item_no integer) % 4 = 0"</span>), <span class="comment">// 4åˆ†å‰²ã®ã†ã¡ã‹ã‚‰0~3ã‚’æŒ‡å®š</span></span><br><span class="line">InputSerialization: &amp;s3.InputSerialization&#123;</span><br><span class="line">CompressionType: aws.String(<span class="string">"NONE"</span>),</span><br><span class="line">CSV: &amp;s3.CSVInput&#123;</span><br><span class="line">FileHeaderInfo: aws.String(s3.FileHeaderInfoUse),</span><br><span class="line">&#125;,</span><br><span class="line">&#125;,</span><br><span class="line">OutputSerialization: &amp;s3.OutputSerialization&#123;</span><br><span class="line">JSON: &amp;s3.JSONOutput&#123;&#125;,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> fmt.Errorf(<span class="string">"svc.SelectObjectContent: %w"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">defer</span> resp.EventStream.Close()</span><br></pre></td></tr></table></figure><p>ä¸Šè¨˜ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€<code>resp.EventStream</code> ã‹ã‚‰å®Ÿè¡Œçµæœã‚’å–å¾—ã§ãã‚‹ã®ã§ã€æ¬¡ã®ã‚ˆã†ã«å‡¦ç†ã—ã¾ã™ã€‚</p><p><code>OutputSerialization</code> ã§ <code>JSON</code> ã‚’æŒ‡å®šã™ã‚‹ã¨ <strong>JSONé…åˆ—ã§ã¯ãªã</strong>ã€<a href="http://jsonlines.org/" target="_blank" rel="noopener">JSON Lines</a>ã§ãƒ‡ãƒ¼ã‚¿ãŒå–å¾—ã§ãã‚‹ãŸã‚ã€1è¡Œãšã¤èª­ã¿è¾¼ã¿JSONã‚’ãƒ‡ã‚³ãƒ¼ãƒ‰ã—ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> event := <span class="keyword">range</span> resp.EventStream.Events() &#123;</span><br><span class="line"><span class="keyword">switch</span> v := event.(<span class="keyword">type</span>) &#123;</span><br><span class="line"><span class="keyword">case</span> *s3.RecordsEvent:</span><br><span class="line">r := bufio.NewReader(bytes.NewReader(v.Payload))</span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">line, _, err := r.ReadLine()</span><br><span class="line"><span class="keyword">if</span> err == io.EOF &#123;</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> fmt.Errorf(<span class="string">"readLine :%w"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> resp Resp</span><br><span class="line"><span class="keyword">if</span> err := json.Unmarshal(line, &amp;resp); err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// TODO ä½•ã‹ã—ã‚‰ã®ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> err := resp.EventStream.Err(); err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> fmt.Errorf(<span class="string">"resp.EventStream: %w"</span>, err)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã“ã‚Œã«ã‚ˆã‚Šã€S3 Selectãƒ¬ãƒ™ãƒ«ã§åˆ†å‰²ã•ã‚ŒãŸãƒ¬ã‚³ãƒ¼ãƒ‰ã«å¯¾ã—ã¦ä½•ã‹ã—ã‚‰ã®å‡¦ç†ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚ä»Šå›ã¯JSON Outputã‚’ç”¨ã„ã¾ã—ãŸãŒã€å…¥åŠ›ãŒCSVã®å ´åˆã¯CSVãã®ã¾ã¾ã§å‡¦ç†ã—ãŸã»ã†ãŒæ€§èƒ½ã¯è‰¯ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><h2 id="S3-Selectã‚’ä½¿ã†ä¸Šã§ã®æ³¨æ„"><a href="#S3-Selectã‚’ä½¿ã†ä¸Šã§ã®æ³¨æ„" class="headerlink" title="S3 Selectã‚’ä½¿ã†ä¸Šã§ã®æ³¨æ„"></a>S3 Selectã‚’ä½¿ã†ä¸Šã§ã®æ³¨æ„</h2><p>ãƒãƒƒãƒå‡¦ç†ã«é™ã‚‰ãšã§ã™ãŒã€2020/04æœˆæ™‚ç‚¹ã§ã¯Athenaã®ã‚ˆã†ã«S3 Selectã¯å¤–éƒ¨ã‚¹ã‚­ãƒ¼ãƒã‚’å‚ç…§ã§ããªã„ã‚ˆã†ãªã®ã§ã€Structã¸ã®ãƒãƒƒãƒ”ãƒ³ã‚°ã§æ•°å€¤é …ç›®ãŒæ¥ãŸå ´åˆã¯ã€SQLå´ã§CASTã™ã‚‹ã®ãŒæ‰‹é–“ã§ã—ãŸã€‚çœŸé¢ç›®ã«ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã§é‹ç”¨ã™ã‚‹ã“ã¨ã‚’è€ƒãˆã‚‹ã¨ã€AWS Athenaã‚’åˆ©ç”¨ã™ã‚‹ã»ã†ãŒ Schema on READ ã«ãªã‚‹ã‚‚ã®å‹ã®æ©æµã‚’å—ã‘ã‚‰ã‚Œè‰¯ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><h1 id="Step-Functions"><a href="#Step-Functions" class="headerlink" title="Step Functions"></a>Step Functions</h1><p><a href="https://aws.amazon.com/jp/step-functions/" target="_blank" rel="noopener">AWS Step Functions</a> ã¯AWS ã®è¤‡æ•°ã®ã‚µãƒ¼ãƒ“ã‚¹ã«å¯¾ã—ã¦ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’çµ„ã‚€ã“ã¨ãŒã§ãã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¯ã‚¹ãƒ†ãƒ¼ãƒˆãƒã‚·ãƒ³ã¨ã—ã¦è¡¨ç¾ã™ã‚‹ã“ã¨ã§Lambdaã®å®Ÿè¡Œç®¡ç†ã‚’ä»»ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’JSONãƒ™ãƒ¼ã‚¹ã®æ§‹é€ åŒ–è¨€èªã§ã‚ã‚‹<a href="https://docs.aws.amazon.com/step-functions/latest/dg/concepts-amazon-states-language.html" target="_blank" rel="noopener">Amazon States Language</a>ã§è¨˜è¼‰ã™ã‚‹ã¨ã„ã†ç‚¹ãŒãƒ„ãƒ©ãƒŸã¨ã—ã¦æŒ™ã’ã‚‰ã‚Œã‚‹ã“ã¨ãŒå¤§ãã‚‚ã—ã¾ã™ãŒã€å®šç¾©ã—ãŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¯å³åº§ã«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§å¯è¦–åŒ–ã•ã‚Œã¾ã™ã—ãã‚Œã‚’SVGãªã©ã§Exportã‚‚ã§ãã‚‹ã®ã§ã€JSONåŠ›ã‚’é›ãˆãªãŒã‚‰é–‹ç™ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><img src="/images/20200515/photo_20200515_03.png"><p>â€»HelloWorldã®Step Functionsã®é–‹ç™ºã‚¤ãƒ¡ãƒ¼ã‚¸</p><h2 id="Step-Functions-Ã—-Lambda"><a href="#Step-Functions-Ã—-Lambda" class="headerlink" title="Step Functions Ã— Lambda"></a>Step Functions Ã— Lambda</h2><p>Lambdaã®å®Ÿè¡Œæ™‚é–“åˆ¶ç´„ã‚’Step Functionsã§çªç ´ã—ã‚ˆã†ã¨ã„ã†è©¦ã¿ã§ã™ã€‚å®Ÿéš›ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚å‰æã¨ã—ã¦ã€å‡¦ç†ä»¶æ•°ãŒäº‹å‰ã«ã‚ã‚‹ç¨‹åº¦åˆ†ã‹ã£ã¦ã„ã‚‹å ´åˆã«ãŠã„ã¦ã¯ã€å˜ç´”ã«Nå€‹ã«ã‚¿ã‚¹ã‚¯ã‚’åˆ†å‰²ã—ã¦Step Functionsã‹ã‚‰Lambdaã‚’å‘¼ã³å‡ºã›ã°è‰¯ã„ã§ã™ã€‚ã“ã®åˆ†æ•£ã—ãŸLambdaãã‚Œãã‚Œã§DynamoDBã®ã‚ã‚‹Segmentã ã‘ã‚’æ‹…å½“ã•ã›ã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚</p><p>DynamoDBã‚„Lambdaã®å ´åˆã¯ã‚¹ã‚±ãƒ¼ãƒ«ã‚¢ã‚¦ãƒˆã•ã›ã‚„ã™ã„ã‚µãƒ¼ãƒ“ã‚¹ã®ãŸã‚ã€å›ºå®šã§ã‚ã‚Œã°Parallelã‚¹ãƒ†ãƒ¼ãƒˆã‚’åˆ©ç”¨ã—ã¦ä¸¦åˆ—å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><img src="/images/20200515/photo_20200515_04.png"><p>ãŸã ã€Parallelã‚¹ãƒ†ãƒ¼ãƒˆã ã¨åˆ†æ•£ã™ã‚‹ã‚¿ã‚¹ã‚¯è‡ªä½“ã‚’JSONã§å®šç¾©ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€åŒæ™‚å®Ÿè¡Œæ•°ã‚’å¢—ã‚„ã™ãŸã³ã«StepFunctionsã®å®šç¾©ã‚’æ›´æ–°ã™ã‚‹å¿…è¦ãŒã‚ã‚Šæ‰‹é–“ã§ã™ã€‚æ¬¡ã®å‹•çš„ä¸¦åˆ—ã®æ©Ÿèƒ½ã‚’ä»Šå›ã¯åˆ©ç”¨ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><h2 id="å‹•çš„ä¸¦åˆ—ã™ã‚‹å ´åˆ"><a href="#å‹•çš„ä¸¦åˆ—ã™ã‚‹å ´åˆ" class="headerlink" title="å‹•çš„ä¸¦åˆ—ã™ã‚‹å ´åˆ"></a>å‹•çš„ä¸¦åˆ—ã™ã‚‹å ´åˆ</h2><p>Step Functionsã¯ <a href="https://aws.amazon.com/jp/blogs/news/new-step-functions-support-for-dynamic-parallelism/" target="_blank" rel="noopener">Amazon Web Services ãƒ–ãƒ­ã‚° - æ–°æ©Ÿèƒ½ â€“ Step Functions ãŒå‹•çš„ä¸¦åˆ—å‡¦ç†ã‚’ã‚µãƒãƒ¼ãƒˆ</a> ã§ç´¹ä»‹ã•ã‚Œã¦ã„ã‚‹Map çŠ¶æ…‹ã‚’ç”¨ã„ã€ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§ã‚¹ã‚­ãƒ£ãƒƒã‚¿ãƒ¼ã‚®ãƒ£ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆåˆ†æ•£ã—ã¦é›†ç´„ã™ã‚‹ã‚ˆã†ãªãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>ä»Šå›ã¯ã“ã¡ã‚‰ã‚’æ¡ç”¨ã—ã¦ã€æœ€åˆã«ScatterLambdaã¨ã„ã†ã‚¿ã‚¹ã‚¯ã§ã€åˆ†æ•£æƒ…å ±ã‚’å‹•çš„ã«ç”Ÿæˆã—ã€TaskLambdaã§DynamoDBã‚’Scanã—ã€æœ€å¾Œã«GatherLambdaã§å®Ÿè¡Œä»¶æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆã™ã‚‹ã¨ã„ã†ãƒ•ãƒ­ãƒ¼ã‚’çµ„ã‚€ã“ã¨ã«ã—ã¾ã™ï¼ˆä¸‹å›³ï¼‰ã€‚</p><img src="/images/20200515/photo_20200515_05.png"><p>â€»æ°´è‰²ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒé‡ãªã£ã¦ã„ã‚‹ã¨ã“ã‚ãŒä¸¦åˆ—å®Ÿè¡Œã•ã‚Œã‚‹ã‚¿ã‚¹ã‚¯ã§ã™ã€‚ã“ã®å„Lambdaã§DynamoDBã®ã‚ã‚‹Segmentæ•°ã ã‘æ‹…å½“ã•ã›ã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚</p><h2 id="Lambdaã®-In-Out-è¨­è¨ˆ"><a href="#Lambdaã®-In-Out-è¨­è¨ˆ" class="headerlink" title="Lambdaã® In/Out è¨­è¨ˆ"></a>Lambdaã® In/Out è¨­è¨ˆ</h2><p>3ã¤ã®Lambdaã‚’åˆ©ç”¨ã—ã¾ã™ãŒã€æ¦‚å¿µçš„ã«ãã‚Œãã‚Œã®å…¥åŠ›ãƒ»å‡ºåŠ›ã‚’ç¤ºã—ã¾ã™ã€‚</p><img src="/images/20200515/photo_20200515_06.png"><h2 id="å®Ÿè£…ã«ã¤ã„ã¦"><a href="#å®Ÿè£…ã«ã¤ã„ã¦" class="headerlink" title="å®Ÿè£…ã«ã¤ã„ã¦"></a>å®Ÿè£…ã«ã¤ã„ã¦</h2><p>ä¸Šå›³ã®ã‚ˆã†ãªçŠ¶æ…‹é·ç§»å›³ã¯ã€ä¸‹è¨˜ã®JSONã§è¡¨ç¾ã§ãã¾ã™ã€‚<code>ProcessAllSegments</code> ã® <code>Type: Map</code>ã¨ <code>Iterator</code> ã®éƒ¨åˆ†ãŒãƒŸã‚½ã§ã€ã“ã‚Œã«ã‚ˆã£ã¦å‹•çš„ã« <code>tasklambda</code> ä¸¦åˆ—å®Ÿè¡Œã§ãã¾ã™ã€‚</p><figure class="highlight json"><figcaption><span>åˆ†æ•£å®Ÿè¡Œã®çŠ¶æ…‹é·ç§».json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"StartAt"</span>: <span class="string">"ScatterLambda"</span>,</span><br><span class="line">  <span class="attr">"States"</span>: &#123;</span><br><span class="line">    <span class="attr">"ScatterLambda"</span>: &#123;</span><br><span class="line">      <span class="attr">"Type"</span>: <span class="string">"Task"</span>,</span><br><span class="line">      <span class="attr">"Resource"</span>: <span class="string">"arn:aws:lambda:ap-northeast-1:123456789012:function:scatterlambda"</span>,</span><br><span class="line">      <span class="attr">"Next"</span>: <span class="string">"ProcessAllSegments"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"ProcessAllSegments"</span>: &#123;</span><br><span class="line">      <span class="attr">"Type"</span>: <span class="string">"Map"</span>,</span><br><span class="line">      <span class="attr">"InputPath"</span>: <span class="string">"$.task_definitions"</span>,</span><br><span class="line">      <span class="attr">"ItemsPath"</span>: <span class="string">"$"</span>,</span><br><span class="line">      <span class="attr">"MaxConcurrency"</span>: <span class="number">100</span>,</span><br><span class="line">      <span class="attr">"Iterator"</span>: &#123;</span><br><span class="line">        <span class="attr">"StartAt"</span>: <span class="string">"TaskLambda"</span>,</span><br><span class="line">        <span class="attr">"States"</span>: &#123;</span><br><span class="line">          <span class="attr">"TaskLambda"</span>: &#123;</span><br><span class="line">            <span class="attr">"Type"</span>: <span class="string">"Task"</span>,</span><br><span class="line">            <span class="attr">"Resource"</span>: <span class="string">"arn:aws:lambda:ap-northeast-1:123456789012:function:tasklambda"</span>,</span><br><span class="line">            <span class="attr">"End"</span>: <span class="literal">true</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">"ResultPath"</span>: <span class="string">"$.task_results"</span>,</span><br><span class="line">      <span class="attr">"Next"</span>: <span class="string">"GatherLambda"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"GatherLambda"</span>: &#123;</span><br><span class="line">      <span class="attr">"Type"</span>: <span class="string">"Task"</span>,</span><br><span class="line">      <span class="attr">"InputPath"</span>: <span class="string">"$"</span>,</span><br><span class="line">      <span class="attr">"Resource"</span>: <span class="string">"arn:aws:lambda:ap-northeast-1:123456789012:function:gatherlambda"</span>,</span><br><span class="line">      <span class="attr">"End"</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Scatter, Task, Gatherã®Lambdaã¯ãã‚Œãã‚Œä»¥ä¸‹ã®ã‚ˆã†ãªæ¦‚è¦ã§ã™ã€‚</p><h1 id="Scatteréƒ¨åˆ†"><a href="#Scatteréƒ¨åˆ†" class="headerlink" title="Scatteréƒ¨åˆ†"></a>Scatteréƒ¨åˆ†</h1><p>Scatterã¯å…¥ã‚Šå£ã®Lambdaã§ã€<code>InEvent</code> ã‚’å¼•æ•°ã«æŒã¡ã¾ã™ã€‚ä¸¦åˆ—æ•°ã‚’å—ã‘å–ã‚‹ã“ã¨ãŒã§ãã“ã‚Œã«å¿œã˜ãŸTaskå®šç¾©ã‚’ä½œæˆã—ã¦ã€å¾Œç¶šã® TaskLambda ã«æ¸¡ã—ã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>ScatterLambda</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> InEvent <span class="keyword">struct</span> &#123;</span><br><span class="line">Total <span class="keyword">int</span> <span class="string">`json:"total"`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> OutEvent <span class="keyword">struct</span> &#123;</span><br><span class="line">TaskDefinitions []TaskDefinition <span class="string">`json:"task_definitions"`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> TaskDefinition <span class="keyword">struct</span> &#123;</span><br><span class="line">Total <span class="keyword">int64</span> <span class="string">`json:"total"`</span></span><br><span class="line">Seg   <span class="keyword">int64</span> <span class="string">`json:"seg"`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">lambda.Start(HandleRequest)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">HandleRequest</span><span class="params">(e InEvent)</span> <span class="params">(*OutEvent, error)</span></span> &#123;</span><br><span class="line">total := <span class="number">4</span> <span class="comment">// default</span></span><br><span class="line"><span class="keyword">if</span> e.Total != <span class="number">0</span> &#123;</span><br><span class="line">total = e.Total</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">defs := <span class="built_in">make</span>([]TaskDefinition, <span class="number">0</span>, total)</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; total; i++ &#123;</span><br><span class="line">defs = <span class="built_in">append</span>(defs, TaskDefinition&#123;</span><br><span class="line">Total: <span class="keyword">int64</span>(total),</span><br><span class="line">Seg:   <span class="keyword">int64</span>(i),</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> &amp;OutEvent&#123;</span><br><span class="line">TaskDefinitions: defs,</span><br><span class="line">&#125;, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‡ºåŠ›ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ã€ä¾‹ãˆã°4ä¸¦åˆ—ã§ã‚ã‚Œã°æ¬¡ã®ã‚ˆã†ãªJSONé…åˆ—ã«ãªã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;task_definitions&quot;: [</span><br><span class="line">    &#123;&quot;total&quot;: 4, &quot;seg&quot;: 0&#125;,</span><br><span class="line">    &#123;&quot;total&quot;: 4, &quot;seg&quot;: 1&#125;,</span><br><span class="line">    &#123;&quot;total&quot;: 4, &quot;seg&quot;: 2&#125;,</span><br><span class="line">    &#123;&quot;total&quot;: 4, &quot;seg&quot;: 3&#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã“ã®JSONé…åˆ—  <code>task_definitions</code> ã®1è¦ç´ ãšã¤å¾Œç¶šã®Lambdaã«æ¸¡ã—ã¾ã™ã€‚</p><h2 id="TaskLambad"><a href="#TaskLambad" class="headerlink" title="TaskLambad"></a>TaskLambad</h2><p>TaskLambdaã¯å®Ÿéš›ã«DynamoDBã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã€ãƒãƒƒãƒå‡¦ç†ã‚’è¡Œã†ãƒ¡ã‚¤ãƒ³å‡¦ç†ã§ã™ã€‚ä»Šå›ã¯ãŸã Scanã—ã¦ä»¶æ•°ã‚’è¨ˆç®—ã™ã‚‹ã ã‘ã§ã™ãŒå®Ÿéš›ã¯ã€å¤–éƒ¨ã®APIã‚µãƒ¼ãƒã«å•ã„åˆã‚ã‚¨ãƒ³ãƒªãƒƒãƒã—ãŸã‚Šã€é›†ç´„ã—ã¦è¨ˆç®—ã—ãŸã‚Šã€ä»–ã®ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢ã«æ›¸ãè¾¼ã‚€ãªã©ã‚’è¡Œã„ã¾ã™ã€‚å¼•æ•°ã§ã‚ã‚‹ <code>InEvent</code> ãŒç¤ºã™é€šã‚Šã€Scattterã®Lambdaã§ç”Ÿæˆã•ã‚ŒãŸDynamoDBã®Segumentæƒ…å ±ã‚’å—ã‘å–ã‚Šåˆ©ç”¨ã—ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> InEvent <span class="keyword">struct</span> &#123;</span><br><span class="line">Total <span class="keyword">int64</span> <span class="string">`json:"total"`</span></span><br><span class="line">Seg   <span class="keyword">int64</span> <span class="string">`json:"seg"`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> OutEvent <span class="keyword">struct</span> &#123;</span><br><span class="line">Count <span class="keyword">int64</span> <span class="string">`json:"count"`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Resp <span class="keyword">struct</span> &#123;</span><br><span class="line"><span class="comment">// Any fields</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">db    = dynamodb.New(session.Must(session.NewSession(aws.NewConfig().WithRegion(<span class="string">"ap-northeast-1"</span>))))</span><br><span class="line">table = os.Getenv(<span class="string">"DYNAMO_TABLE"</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">lambda.Start(HandleRequest)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">HandleRequest</span><span class="params">(e InEvent)</span> <span class="params">(*OutEvent, error)</span></span> &#123;</span><br><span class="line">log.Printf(<span class="string">"InEvent: %+v"</span>, e)</span><br><span class="line">total, seg := e.Total, e.Seg</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> startKey <span class="keyword">map</span>[<span class="keyword">string</span>]*dynamodb.AttributeValue</span><br><span class="line">count := <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">resp, sk, err := ScanSegment(context.Background(), total, seg, startKey)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Printf(<span class="string">"scan error: %v"</span>, err)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, fmt.Errorf(<span class="string">"ScanSegment: %w"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">count += <span class="built_in">len</span>(resp)</span><br><span class="line">log.Printf(<span class="string">"count: %v"</span>, count)</span><br><span class="line"></span><br><span class="line">startKey = sk</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(startKey) == <span class="number">0</span> &#123;</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">log.Printf(<span class="string">"total count: %v"</span>, count)</span><br><span class="line"><span class="keyword">return</span> &amp;OutEvent&#123;</span><br><span class="line">Count: <span class="keyword">int64</span>(count),</span><br><span class="line">&#125;, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>1ã¤1ã¤ã®Lambdaã®å‡ºåŠ›ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚·ãƒ³ãƒ—ãƒ«ãªã‚‚ã®ã§ã™ã€‚</p><figure class="highlight json"><figcaption><span>å‡ºåŠ›ä¾‹</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"count"</span>: <span class="number">6293</span>&#125;</span><br></pre></td></tr></table></figure><p>ä¸¦åˆ—å®Ÿè¡Œã•ã‚ŒãŸå…¨ã¦LambdaãŒçµ‚ã‚ã‚‹ã¨ã€æœ€å¾Œã«Gatherã®LambdaãŒèµ·å‹•ã—ã¾ã™ã€‚</p><h2 id="GatherLambda"><a href="#GatherLambda" class="headerlink" title="GatherLambda"></a>GatherLambda</h2><p>æœ€å¾Œã«é›†ç´„ã™ã‚‹Lambdaã§ã™ã€‚TaskLambdaã§ã¯Scanã—ãŸä»¶æ•°ã‚’å‡ºåŠ›ã—ã¦ã„ã‚‹ã®ã§ã€ãã‚Œã‚’é›†ç´„ã—ã¦ç·ä»¶æ•°ã‚’è¨ˆç®—ã ã‘ã™ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚ å¼•æ•°ã® <code>InEvent</code>ãŒé…åˆ—ã«ãªã£ã¦ã„ã‚‹ã®ã¯ã€ä»Šå›Iterationã§ä¸¦åˆ—å®Ÿè¡Œã•ã‚ŒãŸãŸã‚è¤‡æ•°ã®OutputãŒã‚ã‚‹ãŸã‚ã§ã™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"github.com/aws/aws-lambda-go/lambda"</span></span><br><span class="line"><span class="string">"log"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> InEvent <span class="keyword">struct</span> &#123;</span><br><span class="line">Results []TaskResult <span class="string">`json:"task_results"`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> TaskResult <span class="keyword">struct</span> &#123;</span><br><span class="line">Count <span class="keyword">int64</span> <span class="string">`json:"count"`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> OutEvent <span class="keyword">struct</span> &#123;</span><br><span class="line">TotalCount <span class="keyword">int64</span> <span class="string">`json:"total_count"`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">lambda.Start(HandleRequest)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">HandleRequest</span><span class="params">(e InEvent)</span> <span class="params">(*OutEvent, error)</span></span> &#123;</span><br><span class="line">totalCount := <span class="keyword">int64</span>(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">for</span> _, v := <span class="keyword">range</span> e.Results &#123;</span><br><span class="line">totalCount += v.Count</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">log.Printf(<span class="string">"total: %d"</span>, totalCount)</span><br><span class="line"><span class="keyword">return</span> &amp;OutEvent&#123;</span><br><span class="line">TotalCount: totalCount,</span><br><span class="line">&#125;, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»Šå›ã¯Gatherã®Lambdaã§çµ‚äº†ãªã®ã§ã™ãŒã€ä½•ã‹ã—ã‚‰æˆ»ã‚Šå€¤ã‚’å®šç¾©ã—ã¦ãŠãã¨StepFunctionsã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç”»é¢ã‹ã‚‰å®Ÿè¡Œçµæœã‚’ç¢ºèªã§ãã‚‹ã®ã§ä¾¿åˆ©ã§ã™ã€‚ã‚‚ã—ã€é›†ç´„å‡¦ç†ãŒä¸è¦ãªå ´åˆã¯ã“ã®Lambdaã‚’ãªãã—ã¦ãã®ã¾ã¾Endã—ã¦ã—ã¾ã†ã®ã‚‚æ‰‹ã ã¨æ€ã„ã¾ã™ã€‚ãã®å ´åˆã¯Scatter&amp;Gatherã¨ã„ã†ã‚ˆã‚Šã¯ã€Fan-Outãƒ‘ã‚¿ãƒ¼ãƒ³ã¨è¨€ã†ã‚ˆã†ã§ã™ã€‚</p><h2 id="Deploy"><a href="#Deploy" class="headerlink" title="Deploy"></a>Deploy</h2><p>ãã‚Œãã‚Œã€ãã‚Œãã‚Œã®Lambdaã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã€StepFunctionsã®JSONã®ARNéƒ¨åˆ†ã‚’æ›¸ãæ›ãˆã‚‹ã¨å®Ÿè¡Œå¯èƒ½ã§ã™ã€‚ãŸã ã—ã€TaskLambdaã ã‘ã¯DynamoDBã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚IAM Roleã«DynamoDBã®Scanæ¨©é™ã‚’ä»˜ä¸ã—ã¦ãã ã•ã„ã€‚ã„ãã¤ã‹ã®ã‚³ãƒãƒ³ãƒ‰ã¯ <a href="https://github.com/laqiiz/servlerless-batch-example" target="_blank" rel="noopener">https://github.com/laqiiz/servlerless-batch-example</a> ã«ã‚‚è¨˜è¼‰ã—ã¦ã„ã‚‹ã®ã§å‚è€ƒãã ã•ã„ã€‚</p><h1 id="æ€§èƒ½æ¤œè¨¼"><a href="#æ€§èƒ½æ¤œè¨¼" class="headerlink" title="æ€§èƒ½æ¤œè¨¼"></a>æ€§èƒ½æ¤œè¨¼</h1><p>ä½œæˆã—ãŸStepFunctionsãŒã©ã‚Œãã‚‰ã„å‡¦ç†æ€§èƒ½ãŒã‚¹ã‚±ãƒ¼ãƒ«ã™ã‚‹ã‹æ¤œè¨¼ã—ã¾ã—ãŸã€‚åˆ†æ•£æ•°ã‚’1, 2, 4, 8, 16 ã§è¨ˆæ¸¬ã—ã¦ã„ã¾ã™ã€‚</p><p><strong>ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿</strong></p><ul><li>ä»¶æ•°ï¼šç´„10ä¸‡ä»¶</li><li>1ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚ãŸã‚Šã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ•°ï¼š15é …ç›®</li><li>1ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚ãŸã‚Šã®ãƒ‡ãƒ¼ã‚¿é‡ï¼šJSONè¡¨ç¾ã§300[KB]å¼±</li></ul><h2 id="å®Ÿè¡Œçµæœ"><a href="#å®Ÿè¡Œçµæœ" class="headerlink" title="å®Ÿè¡Œçµæœ"></a>å®Ÿè¡Œçµæœ</h2><p>å‡¦ç†æ™‚é–“ã¨[ms]ã¨åˆ†æ•£æ•°1ã¨ã®æ¯”ç‡ã‚’è¡¨ã«ã—ã¾ã—ãŸã€‚å¤§ä½“10ä¸‡ä»¶ã®DynamoDBã‚’Scanã™ã‚‹ã®ã«1ä¸¦åˆ—ã ã¨30ç§’ç¨‹åº¦ã‹ã‹ã‚Šã¾ã™ã€‚DynamoDBã‚’Scanã™ã‚‹ã ã‘ã®å‡¦ç†ã§ã¯å®Œå…¨ã«ãƒªãƒ‹ã‚¢ã«ã‚¹ã‚±ãƒ¼ãƒ«ã™ã‚‹ã¨ã„ã†ã‚ã‘ã§ã¯ãªã„ã§ã™ãŒã€æœ¬æ¥ã¯ã“ã®èª­ã¿å–ã£ãŸãƒ¬ã‚³ãƒ¼ãƒ‰ã«å¯¾ã—ã¦ã€ãªã«ã‹ã—ã‚‰ã®è¿½åŠ å‡¦ç†ã‚’è¡Œã†æ™‚é–“ãŒåŠ ç®—ã•ã‚Œã‚‹ã¯ãšãªã®ã§ã»ã¨ã‚“ã©ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã§ã¯å•é¡Œãªã„ã¨æ€ã„ã¾ã™ã€‚</p><table><thead><tr><th>åˆ†æ•£æ•°</th><th>å‡¦ç†æ™‚é–“[ms]</th><th>åˆ†æ•£æ•°1ã¨ã®æ¯”ç‡[%]</th></tr></thead><tbody><tr><td>1</td><td>31077</td><td>100</td></tr><tr><td>2</td><td>15414</td><td>49.6</td></tr><tr><td>4</td><td>9035</td><td>29.1</td></tr><tr><td>8</td><td>5047</td><td>16.2</td></tr><tr><td>16</td><td>3402</td><td>10.9</td></tr></tbody></table><p>ã¡ãªã¿ã«ã€16ä¸¦åˆ—ã§ã¯å„å®Ÿè¡Œæ•°ãŒ6203~6577ã®é–“ã§Scanã§ãã¦ã„ãŸã®ã§ã‹ãªã‚Šä»¶æ•°ã¯å¹³æº–åŒ–ã§ãã¦ã„ã¾ã—ãŸã€‚</p><h1 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h1><p>é•·ã„ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚’æœ€å¾Œã¾ã§èª­ã‚“ã§ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚</p><ul><li>Serverlessã®Batchã¨ã„ãˆã°FargateãŒãƒ¡ã‚¸ãƒ£ãƒ¼ã ã¨æ€ã†ãŒã€Lambdaã‚‚å·¥å¤«æ¬¡ç¬¬ã§ååˆ†æˆ¦ãˆã‚‹</li><li>DynamoDBã®ä¸¦åˆ—ScanãŒä¾¿åˆ©ã§ã€10ä¸‡ä»¶ScanãŒ1ä¸¦åˆ—ã§30ç§’ã»ã©ãŒç›®å®‰</li><li>S3ãŒå…¥åŠ›ã ã¨ã—ã¦ã‚‚S3 Selectã§å…¥åŠ›ã‚’åˆ†å‰²ã™ã‚‹è¨­è¨ˆã§å¯¾å¿œã§ãã‚‹</li><li>StepFunctionsã®å‹•çš„ä¸¦åˆ—å®Ÿè¡Œã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§Lambdaã®å®Ÿè¡Œæ™‚é–“åˆ¶ç´„ã«å¼•ã£ã‹ã‹ã‚‰ãªã„ã‚ˆã†ã«ã€äº‹å‰ã§å…¥åŠ›ã‚’åˆ†å‰²ã—ãã‚Œãã‚Œã®Lambdaã«æ¸¡ã™ä»•çµ„ã¿ãŒä½œã‚Œã‚‹</li></ul><h2 id="é–¢é€£ãƒªãƒ³ã‚¯"><a href="#é–¢é€£ãƒªãƒ³ã‚¯" class="headerlink" title="é–¢é€£ãƒªãƒ³ã‚¯"></a>é–¢é€£ãƒªãƒ³ã‚¯</h2><ul><li><a href="/tags/Serverless%E9%80%A3%E8%BC%89/">ã‚µãƒ¼ãƒãƒ¬ã‚¹é€£è¼‰</a></li><li><a href="https://future-architect.github.io/tags/GCP%E9%80%A3%E8%BC%89/">GCP é€£è¼‰</a></li><li><a href="https://future-architect.github.io/tags/GoCDK/">Go Cloud é€£è¼‰</a></li><li><a href="https://future-architect.github.io/tags/DynamoDB%C3%97Go/">DynamoDBÃ—Goé€£è¼‰</a></li><li><a href="https://future-architect.github.io/articles/20190713/">Goã‚’å­¦ã¶ã¨ãã«ã¤ã¾ãšãã‚„ã™ã„ãƒã‚¤ãƒ³ãƒˆFAQ</a><div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none; padding-left: 0;"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">1.</span><span style="display: inline-block; vertical-align: top;">2020/04/26æ™‚ç‚¹ã®è©±ã§ã™ã€‚å°†æ¥çš„ã«ä¼¸ã³ã‚‹å¯èƒ½æ€§ãŒé«˜ã„ã¨ã¯æ€ã£ã¦ã„ã¾ã™ã€‚</span><a href="#fnref:1" rev="footnote"> â†©</a></li></ol></div></div></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h1&gt;&lt;p&gt;AWS StepFunctionsã¨Lambdaã‚’æ´»ç”¨ã—ã¦ãƒãƒƒãƒå‡¦ç†ã‚’è¡Œã†è¨˜äº‹ã§ã™ã€‚&lt;a href=&quot;https://fut
      
    
    </summary>
    
      <category term="Programming" scheme="https://future-architect.github.io/categories/Programming/"/>
    
    
      <category term="AWS" scheme="https://future-architect.github.io/tags/AWS/"/>
    
      <category term="Serverless" scheme="https://future-architect.github.io/tags/Serverless/"/>
    
      <category term="Serverlessé€£è¼‰" scheme="https://future-architect.github.io/tags/Serverless%E9%80%A3%E8%BC%89/"/>
    
  </entry>
  
  <entry>
    <title>ä»•äº‹ã§Pythonã‚³ãƒ³ãƒ†ãƒŠã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹äººå‘ã‘ã®Dockerfile (2): distrolessç·¨</title>
    <link href="https://future-architect.github.io/articles/20200514/"/>
    <id>https://future-architect.github.io/articles/20200514/</id>
    <published>2020-05-13T23:51:53.000Z</published>
    <updated>2020-05-14T01:08:25.028Z</updated>
    
    <content type="html"><![CDATA[<img src="/images/20200514/top.png"><p><a href="https://future-architect.github.io/articles/20200513/">å‰å›ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼</a>ã§ã¯ã€Debianãƒ™ãƒ¼ã‚¹ã®å …å®Ÿãªä»•äº‹å‘ã‘ã®Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ä½œæˆæ–¹æ³•ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã—ãŸã€‚</p><p>Goã§ã¯ãã“ãã“å®Ÿç¸¾ã‚‚å¢—ãˆã¤ã¤ã‚ã‚‹æ°—ãŒã™ã‚‹distrolessã€‚ã‚·ã‚§ãƒ«ãŒå…¥ã£ã¦ã„ãªã„ãã¦ã€ãƒ­ã‚°ã‚¤ãƒ³ã•ã‚Œã‚‹ã“ã¨ã‚‚ãªãå®‰å…¨ã¨ã„ã†Googleè£½ã®Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚Python3ã¯ã¾ã experimentalã§ã™ãŒã€å®Ÿã¯å°ã•ã„ã¨è¨€ã‚ã‚Œã‚‹alpineç‰ˆã‚ˆã‚Šã‚‚ã€ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚µã‚¤ã‚ºãŒåŠåˆ†ãã‚‰ã„ã ã£ãŸã‚Šã‚‚ã—ã¾ã™ã€‚distrolessã§ã¯3.7ã—ã‹ãªã„ã®ã§ã€3.7ã®ã‚¤ãƒ¡ãƒ¼ã‚¸åŒå£«ã®æ¯”è¼ƒã§ã™ã€‚</p><table><thead><tr><th>ã‚¤ãƒ¡ãƒ¼ã‚¸</th><th>ã‚µã‚¤ã‚º</th></tr></thead><tbody><tr><td>python:3.7-alpine</td><td>96MB</td></tr><tr><td>python:3.7-slim-buster</td><td>179MB</td></tr><tr><td>python:3.7-buster</td><td>919MB</td></tr><tr><td>gcr.io/distroless/python3-debian10</td><td>52MB</td></tr></tbody></table><p>ãªãŠã€distrolessã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯2ç¨®é¡ï¼ˆ3é€šã‚Šã®åå‰ï¼‰ãŒã‚ã‚Šã¾ã™ãŒã€Python 3.5ã¯ãƒã‚°ä¿®æ­£ã¯ã›ãšã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¿®æ­£ã®ã¿ã§ã‚µãƒãƒ¼ãƒˆæœŸé™ãŒ2020/9/13ã¨ã„ã†ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãªã®ã§ã€æœ¬ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã§ã¯3.7ã®æ–¹ã®ã¿ã‚’æ‰±ã„ã¾ã™ã€‚</p><ul><li>gcr.io/distroless/python3: Python 3.5.3</li><li>gcr.io/distroless/python3-debian9: Python 3.5.3(ä¸Šã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã¨åŒä¸€)</li><li>gcr.io/distroless/python3-debian10: Python 3.7.3</li></ul><p>ä¸€å¿œã‚µãƒ³ãƒ—ãƒ«ç­‰ã‚‚ã‚ã‚Šã¾ã™ãŒã€ã©ã‚Œã‚‚1ãƒ•ã‚¡ã‚¤ãƒ«ã§æ§‹æˆã•ã‚ŒãŸã‚µãƒ³ãƒ—ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã°ã‹ã‚Šã§ã™ã€‚å‰å›ã®site-packagesã«ã‚³ãƒ”ãƒ¼ã™ã‚‹æ–¹æ³•ã‚’è»½ãè©¦ã—ãŸã¨ã“ã‚ã†ã¾ãå‹•ã‹ãšã€ã‚·ã‚§ãƒ«ã‚‚pipã‚‚ensurepipã‚‚ãªã„ãŸã‚ã€ãƒ“ãƒ«ãƒ‰ã‚¤ãƒ¡ãƒ¼ã‚¸ã«ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã›ã‚“ã€‚ã„ã‚ã„ã‚èª¿ã¹ãŸçµæœã€ä½¿ã„æ–¹ãŒã‚ã‹ã£ãŸã®ã§ã€ãã®ã‚„ã‚Šæ–¹ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚</p><p><a href="https://github.com/GoogleContainerTools/distroless/tree/master/examples/python3" target="_blank" rel="noopener">https://github.com/GoogleContainerTools/distroless/tree/master/examples/python3</a></p><h1 id="ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸ã®çµ„ã¿åˆã‚ã›"><a href="#ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸ã®çµ„ã¿åˆã‚ã›" class="headerlink" title="ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸ã®çµ„ã¿åˆã‚ã›"></a>ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸ã®çµ„ã¿åˆã‚ã›</h1><p>å¤šå°‘ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚µã‚¤ã‚ºã«ã‚ˆã‚‹ã‚³ã‚¹ãƒˆå‰Šæ¸›å¹…ã‚ˆã‚Šã‚‚ã€ç¤¾å“¡ãŒãƒ“ãƒ«ãƒ‰ã§è‹¦åŠ´ã—ãªã„ã€æ®‹æ¥­ä»£ãŒæ¸›ã‚‰ã›ã‚‹ã€ã¨ã„ã†æ–¹ãŒä»•äº‹ä¸Šã¯åœ§å€’çš„ã«ãƒãƒªãƒ¥ãƒ¼ã¨ã—ã¦å¤§åˆ‡ãªã“ã¨ãŒå¤šã„ã®ã§ã€Debianç‰ˆã‚’æœ€åˆã«ç´¹ä»‹ã—ã¾ã—ãŸã—ã€ãã“ã®ä¾¡å€¤ã¯å¤‰ã‚ã‚Šã¾ã›ã‚“ã€‚ã—ã‹ã—ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã‚‚ã†ã‚Œã—ã„ã¨ã„ã†ã®ã§ã‚ã‚Œã°ä½¿ã‚ãªã„æ‰‹ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€æ®‹å¿µãªãŒã‚‰ã™ã¹ã¦ã®ã‚±ãƒ¼ã‚¹ã«ä½¿ãˆã‚‹ã‚ã‘ã§ã¯ãªã•ãã†ã§ã™ã€‚ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸ã®çµ„ã¿åˆã‚ã›åˆ¥ã®ä½¿ãˆã‚‹ä¾‹ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚</p><table><thead><tr><th align="center">ãƒ“ãƒ«ãƒ‰ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸</th><th align="center">å®Ÿè¡Œãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸</th><th align="center">Pure Python</th><th align="center">Cæ‹¡å¼µ(wheelã‚ã‚Š)</th><th align="center">Cæ‹¡å¼µ(wheelãªã—)</th></tr></thead><tbody><tr><td align="center">fullç‰ˆDebian</td><td align="center">slimç‰ˆDebian</td><td align="center">â—‹</td><td align="center">â—‹</td><td align="center">â—‹</td></tr><tr><td align="center">slimç‰ˆDebian</td><td align="center">slimç‰ˆDebian</td><td align="center">â—‹</td><td align="center">â—‹</td><td align="center"></td></tr><tr><td align="center">slimç‰ˆDebian</td><td align="center">distroless</td><td align="center">â—‹</td><td align="center">â—‹</td><td align="center"></td></tr><tr><td align="center">(å‚è€ƒ)Alpine</td><td align="center">Alpine</td><td align="center">â—‹</td><td align="center">â€»1</td><td align="center">â€»2</td></tr></tbody></table><p>â€»1 manylinux1ãŒå‹•ä½œã›ãšã€ã‚½ãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰ã«ãªã‚‹ã€‚apkã§gccç­‰ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¿…è¦<br>â€»2 apkã§gccç­‰ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¿…è¦</p><p>Pythonã®å ´åˆã€å¤šãã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒãƒã‚¤ãƒŠãƒªwheelã‚’æä¾›ã—ã¦ãã‚Œã¦ã„ã¾ã™ã€‚ãã®ãŸã‚ã€Cã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚„è¨­å®šãŒå¤§å¤‰ãªWindowsã§ã‚ã£ã¦ã‚‚ã€æ˜”ã‹ã‚‰Pythonãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ‰ã‚’ä½¿ã£ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ©æµã«æˆã‹ã‚Šã‚„ã™ãã€ç’°å¢ƒæ§‹ç¯‰ã‚‚çŸ­æ™‚é–“ã§å®Œäº†ã—ã¦ã„ã¾ã—ãŸã€‚ã€Œãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒ“ãƒ«ãƒ‰ãŒé›£ã—ã„ã€ã¿ãŸã„ãªè©±ã¯åƒ•ã¯Pythonã§ã¯ã»ã¨ã‚“ã©èã„ãŸã“ã¨ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ãã®ãŸã‚ã€distrolessã‚’ä½¿ã†ãƒãƒ£ãƒ³ã‚¹ã¯ã‚‚ã—ã‹ã—ãŸã‚‰çµæ§‹å¤šã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã—ã‹ã—ã€å‰å›ç´¹ä»‹ã—ãŸuwsgiã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŒå¿…è¦ãªã®ã§é›£ã—ã„ã§ã™ã€‚</p><p>ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŒå¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã—ã¦ã‚‚ã€libpython3.7m.soãŒè¦‹ã¤ã‹ã‚‰ãªã„ã€ã¿ãŸã„ãªã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã—ã¾ã„ã€ä¸€ç­‹ç¸„ã§ã¯ã„ã‹ãªãã†ãªã®ã§ã™ã‚ˆã­ï¼ˆæ•°æ—¥ãƒˆãƒ©ã‚¤ã—ãŸãŒã„ã‹ãªã‹ã£ãŸï¼‰ã€‚ã‚‚ã—è§£æ±ºç­–ã‚’è¦‹ã¤ã‘ãŸæ–¹ã¯ãŠã—ã‚‰ã›ãã ã•ã„ã€‚</p><h1 id="æ•µã‚’çŸ¥ã‚Šå·±ã‚’çŸ¥ã‚Œã°ç™¾æˆ¦æ®†ã†ã‹ã‚‰ãš"><a href="#æ•µã‚’çŸ¥ã‚Šå·±ã‚’çŸ¥ã‚Œã°ç™¾æˆ¦æ®†ã†ã‹ã‚‰ãš" class="headerlink" title="æ•µã‚’çŸ¥ã‚Šå·±ã‚’çŸ¥ã‚Œã°ç™¾æˆ¦æ®†ã†ã‹ã‚‰ãš"></a>æ•µã‚’çŸ¥ã‚Šå·±ã‚’çŸ¥ã‚Œã°ç™¾æˆ¦æ®†ã†ã‹ã‚‰ãš</h1><p>ã€Œå‰å›ã®site-packagesã«ã‚³ãƒ”ãƒ¼ã™ã‚‹æ–¹æ³•ã‚’è»½ãè©¦ã—ãŸã¨ã“ã‚ã†ã¾ãå‹•ã‹ãªã‹ã£ãŸã€ã¨ç´¹ä»‹ã—ã¾ã—ãŸãŒã€è¨­å®šãŒã‚‚ã‚ã‚‚ã‚é•ã†ã®ã§ã™ã‚ˆã­ã€‚ã“ã®ã‚ãŸã‚Šã‚’çŸ¥ã£ã¦ãŠã‹ãªã„ã¨ã€ã„ã–distrolessã§ãƒˆãƒ©ãƒ–ãƒ«ãŒç™ºç”Ÿã—ãŸã¨ãã«è§£æ±ºã«æ™‚é–“ãŒã‹ã‹ã‚‹ã¨æ€ã†ã®ã§ï¼ˆå®Ÿéš›ã‹ã‹ã£ãŸï¼‰ã€ã©ã‚“ãªæ„Ÿã˜ã‹èª¿æŸ»çµæœã‚’ã¾ã¨ã‚ã¦ãŠãã¾ã™ã€‚</p><h2 id="ã‚·ã‚§ãƒ«ãŒãªã„"><a href="#ã‚·ã‚§ãƒ«ãŒãªã„" class="headerlink" title="ã‚·ã‚§ãƒ«ãŒãªã„"></a>ã‚·ã‚§ãƒ«ãŒãªã„</h2><p>ã¾ãšã‚·ã‚§ãƒ«ãŒãªã„ã®ã§ã€é€šå¸¸ã®Dockerã¯ENTRYPOINTãŒã‚·ã‚§ãƒ«ã§ã€CMDã«å®Ÿè¡Œã•ã‚Œã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’æ›¸ãã€ã¨ã„ã†ã®ãŒé€šä¾‹ã§ã™ãŒã€distrolessã¯CMDãŒpython3ã§ã™ã€‚CMDã«ã¯Pythonã®å‡¦ç†ç³»ã§å‡¦ç†ã§ãã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æ¸¡ã•ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚ã‚¤ãƒ¡ãƒ¼ã‚¸ã®latestï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ã§ã¯ãªãã€debugã‚¿ã‚°ï¼ˆã‚¤ãƒ¡ãƒ¼ã‚¸åã®æœ«å°¾ã«<code>:debug</code>ã‚’ã¤ã‘ã‚‹ï¼‰ã¨ã€busyboxã®ã‚·ã‚§ãƒ«ãŒæœ‰åŠ¹ã«ãªã‚Šã¾ã™ãŒã€ã‚ãã¾ã§ã‚‚ãƒ‡ãƒãƒƒã‚°ç”¨é€”ã§ã™ã­ã€‚</p><h2 id="Pythonã®ãƒ‘ã‚¹ãªã©ãŒDebianç‰ˆã¨é•ã†"><a href="#Pythonã®ãƒ‘ã‚¹ãªã©ãŒDebianç‰ˆã¨é•ã†" class="headerlink" title="Pythonã®ãƒ‘ã‚¹ãªã©ãŒDebianç‰ˆã¨é•ã†"></a>Pythonã®ãƒ‘ã‚¹ãªã©ãŒDebianç‰ˆã¨é•ã†</h2><p>é€šå¸¸ã€<code>sys.path</code>ã«ã¯<code>/usr/local/lib/python3.7/site-packages</code>ã¨ã„ã£ãŸãƒ‘ã‚¹ãŒã‚ã‚Šã€pipã§ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ãã“ã«å…¥ã‚Šã¾ã™ã€‚ã—ã‹ã—ã€ãã‚‚ãã‚‚ãã®ã‚ˆã†ãªãƒ‘ã‚¹ãŒãªãã€<code>sys.path</code>ã«ã‚‚æ ¼ç´ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã¾ãšã€Pythonã®ä½ç½®ã‹ã‚‰ã—ã¦<code>/usr/local/lib</code>ã§ã¯ãªãã€<code>/usr/lib</code>ã§ã—ãŸã€‚</p><figure class="highlight py"><figcaption><span>sys.path</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">'/app'</span>, <span class="string">'/usr/lib/python37.zip'</span>, <span class="string">'/usr/lib/python3.7'</span>, <span class="string">'/usr/lib/python3.7/lib-dynload'</span>]</span><br></pre></td></tr></table></figure><p>Pythonã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ç½®ãå ´ã‚’siteãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ç¢ºèªã—ãŸã¨ã“ã‚ã€site-packagesã¯Debianã®ã‚·ã‚¹ãƒ†ãƒ Pythoné¢¨ã®dist-packagesã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯åˆ¥ã®ã¨ã“ã‚ã§ã™ã­ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> site</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(site.getsitepackages())</span><br><span class="line">[<span class="string">'/usr/local/lib/python3.7/dist-packages'</span>, <span class="string">'/usr/lib/python3/dist-packages'</span>, <span class="string">'/usr/lib/python3.7/dist-packages'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(site.getusersitepackages())</span><br><span class="line"><span class="string">'/root/.local/lib/python3.7/site-packages'</span></span><br></pre></td></tr></table></figure><p>ã¡ãªã¿ã«ã€python:3.7-busterã ã¨ã“ã‚“ãªæ„Ÿã˜ã€‚distrolessã§å‹•ã„ã¦ã„ã‚‹ã®ã¯ã‚·ã‚¹ãƒ†ãƒ Pythonã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ©ãƒ³ãƒ‰ã§å‹•ã‹ã™ç”¨ã®Pythonã§ã¯ãªã•ãã†ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> site</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>site.getsitepackages()</span><br><span class="line">[<span class="string">'/usr/local/lib/python3.7/site-packages'</span>]</span><br></pre></td></tr></table></figure><h2 id="aptã‚³ãƒãƒ³ãƒ‰ã‚‚ãªã„"><a href="#aptã‚³ãƒãƒ³ãƒ‰ã‚‚ãªã„" class="headerlink" title="aptã‚³ãƒãƒ³ãƒ‰ã‚‚ãªã„"></a>aptã‚³ãƒãƒ³ãƒ‰ã‚‚ãªã„</h2><p>ã‚·ã‚§ãƒ«ãŒãªã„ãŸã‚ã€ä½•ã‹è¿½åŠ ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å…¥ã‚Œã‚ˆã†ã¨ã—ã¦ã‚‚ã€Dockerã®æ çµ„ã¿ã®ä¸­ã§ã¯ã„ã‚ã„ã‚ã‚„ã‚‹ã®ãŒå›°é›£ã§ã™ã€‚ã‚‚ã¨ã‚‚ã¨distrolessã¯Dockerã§ä½œã‚‰ã‚ŒãŸã®ã§ã¯ãªãã€Bazelã§ä½œã‚‰ã‚Œã¦ã„ã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã—ã€aptã§ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚„ãƒ„ãƒ¼ãƒ«ã‚’å…¥ã‚Œã‚‹ãªã©ã€å‡ã£ãŸã“ã¨ã‚’ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã¯Bazelã§ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p><a href="https://github.com/GoogleContainerTools/distroless/blob/master/examples/python3/BUILD" target="_blank" rel="noopener">https://github.com/GoogleContainerTools/distroless/blob/master/examples/python3/BUILD</a></p><p>æœ¬ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã§ã¯ã€ã¿ã‚“ãªãŒæ…£ã‚Œã¦ã„ã‚‹Dockerã®ç¯„å›²å†…ã§èª¬æ˜ã™ã‚‹ã®ã§ã²ã¨ã¾ãšã”å®‰å¿ƒãã ã•ã„ã€‚</p><p>ã“ã“ã¾ã§ã‚ã‹ã£ãŸã®ã§ã€é§’ã‚’é€²ã‚ã¾ã™ã€‚</p><h1 id="Pure-Pythonãªã‚¢ãƒ—ãƒªã‚’å‹•ã‹ã™"><a href="#Pure-Pythonãªã‚¢ãƒ—ãƒªã‚’å‹•ã‹ã™" class="headerlink" title="Pure Pythonãªã‚¢ãƒ—ãƒªã‚’å‹•ã‹ã™"></a>Pure Pythonãªã‚¢ãƒ—ãƒªã‚’å‹•ã‹ã™</h1><p>å‰å›ã®Djangoã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã‚’é¡Œæã«ã—ã¦é€²ã‚ã¾ã™ã€‚uwsgiã¯ã†ã¾ãã„ã‹ãªã‹ã£ãŸã®ã§ã€Pure Pythonã§ã“ã¡ã‚‰ã‚‚äººæ°—ã®é«˜ã„gunicornã‚’ä½¿ã„ã¾ã™ã€‚requirements.txtã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><figure class="highlight plain"><figcaption><span>requirements.txt</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">django</span><br><span class="line">gunicorn</span><br></pre></td></tr></table></figure><p><code>pip install -r requirements.txt</code>ã§ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ä¸€ç·’ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸå¾Œã«ã€requirements.lockã‚’ä½œã‚Šã¾ã™ã€‚å‰å›ã¨åŒã˜ã§ã™ã­ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> pip freeze &gt; requirements.lock</span></span><br></pre></td></tr></table></figure><p>Dockerfileã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ã©ã†ã›Cã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŒå¿…è¦ãªCæ‹¡å¼µã¯åˆ©ç”¨ã§ããªã„ãŸã‚ã€ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’slimç‰ˆã«ã—ã¦ã„ã¾ã™ãŒã€ãã‚Œä»¥å¤–ã®ãƒ“ãƒ«ãƒ‰ã‚¹ãƒ†ãƒ¼ã‚¸ã¯å¤‰åŒ–ã‚ã‚Šã¾ã›ã‚“ã€‚</p><figure class="highlight dockerfile"><figcaption><span>Dockerfile</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ã“ã“ã¯ãƒ“ãƒ«ãƒ‰ç”¨ã®ã‚³ãƒ³ãƒ†ãƒŠ</span></span><br><span class="line"><span class="keyword">FROM</span> python:<span class="number">3.7</span>-slim-buster as builder</span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /opt/app</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> requirements.lock /opt/app</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> pip3 install -r requirements.lock</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ã“ã“ã‹ã‚‰ã¯å®Ÿè¡Œç”¨ã®ã‚³ãƒ³ãƒ†ãƒŠ</span></span><br><span class="line"><span class="keyword">FROM</span> gcr.io/distroless/python3-debian10 as runner</span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> --from=builder /usr/<span class="built_in">local</span>/lib/python3.7/site-packages /root/.<span class="built_in">local</span>/lib/python3.7/site-packages</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> --from=builder /usr/<span class="built_in">local</span>/bin/gunicorn /opt/app/mysite/gunicorn</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> mysite /opt/app/mysite</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /opt/app/mysite</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">8000</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">"gunicorn"</span>, <span class="string">"--workers=5"</span>, <span class="string">"--threads=2"</span>, <span class="string">"--capture-output"</span>, <span class="string">"--bind=0.0.0.0:8000"</span>, <span class="string">"mysite.wsgi"</span>]</span></span><br></pre></td></tr></table></figure><p>å®Ÿè¡Œã®ãƒã‚¤ãƒ³ãƒˆã¨ã—ã¦ã¯ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚³ãƒ”ãƒ¼å…ˆã‚’<code>/root/.local/lib/python3.7/site-packages</code>ã«ã—ã¦ã„ã‚‹ç‚¹ã§ã™ã€‚gunicornã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚‚Pythonãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¨ã—ã¦å®Ÿè¡Œã™ã‚‹ã®ã§ãƒ‘ã‚¹ãŒé€šã£ã¦ã„ã‚‹å¿…è¦ãŒãªã„ãŸã‚ã€ã‚¢ãƒ—ãƒªã®ãƒ¯ãƒ¼ã‚¯ãƒ•ã‚©ãƒ«ãƒ€ã«ã‚³ãƒ”ãƒ¼ã—ã¦ã„ã¾ã™ã€‚gunicornã®è¨­å®šã¯å¤§é‡ã«ã‚ã‚‹ã®ã§ã™ãŒã€ã¨ã‚Šã‚ãˆãšãƒ¯ãƒ¼ã‚«ãƒ¼æ•°ï¼ˆã‚³ã‚¢æ•°n * 2 + 1ãŒè‰¯ã„ã‚‰ã—ã„)ã‚’å¢—ã‚„ã—ãŸã‚Šã€ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’å¢—ã‚„ã—ã¦ã„ã¾ã™ã€‚ã¾ãŸã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’Dockerã®ãƒ­ã‚°å‡ºåŠ›ã«å‡ºã™ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚</p><p>ã“ã‚Œã§Pure Pythonã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚‚å‹•ãã¾ã—ãŸã€‚</p><h2 id="manylinux1ãªwheelã¯å‹•ä½œã™ã‚‹ã‹ï¼Ÿ"><a href="#manylinux1ãªwheelã¯å‹•ä½œã™ã‚‹ã‹ï¼Ÿ" class="headerlink" title="manylinux1ãªwheelã¯å‹•ä½œã™ã‚‹ã‹ï¼Ÿ"></a>manylinux1ãªwheelã¯å‹•ä½œã™ã‚‹ã‹ï¼Ÿ</h2><p>ã›ã£ã‹ããªã®ã§ã“ã¡ã‚‰ã‚‚è©¦ã—ã¦ã¿ã¾ã—ãŸã“ã‚Œã®æœ‰ç„¡ã§ã§ãã‚‹ã“ã¨ãŒã‹ãªã‚Šå¤‰ã‚ã£ã¦ãã¾ã™ã®ã§ã€‚ç”»åƒå‡¦ç†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®Pillowã‚’ä½¿ã£ã¦ã¿ã¾ã™ã€‚requirements.txtã«ä¸€è¡Œè¿½åŠ ã—ã¦ã€reuirements.lockã‚’æ›´æ–°ã—ã¾ã™ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">django</span><br><span class="line">gunicorn</span><br><span class="line">Pillow</span><br></pre></td></tr></table></figure><p>Djangoã®ã‚µãƒ³ãƒ—ãƒ«ã®æœ€åˆã¾ã§å®Ÿè£…ã—ãŸã‚‚ã®ã ã£ãŸã®ã§ã€<code>mysite/polls/views.py</code>ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãŒã„ã‚‹ã¨æ€ã†ã®ã§ã€ãã“ã«ç”»åƒã‚’è¿”ã™ãƒãƒ³ãƒ‰ãƒ©ã‚’è¶³ã—ã¾ã™ã€‚</p><figure class="highlight py"><figcaption><span>mysite/polls/views.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> HttpResponse</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image, ImageDraw</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">future</span><span class="params">(request)</span>:</span></span><br><span class="line">    image = Image.new(<span class="string">"RGB"</span>, (<span class="number">500</span>, <span class="number">300</span>), <span class="string">"white"</span>)</span><br><span class="line">    draw = ImageDraw.Draw(image)</span><br><span class="line"></span><br><span class="line">    draw.line((<span class="number">150</span>, <span class="number">170</span>, <span class="number">450</span>, <span class="number">50</span>), fill=(<span class="number">214</span>, <span class="number">0</span>, <span class="number">75</span>), width=<span class="number">10</span>)</span><br><span class="line">    draw.line((<span class="number">50</span>, <span class="number">220</span>, <span class="number">350</span>, <span class="number">120</span>), fill=(<span class="number">214</span>, <span class="number">0</span>, <span class="number">75</span>), width=<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">    response = HttpResponse(content_type=<span class="string">"image/png"</span>)</span><br><span class="line">    image.save(response, <span class="string">"PNG"</span>)</span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"Hello World"</span>)</span><br></pre></td></tr></table></figure><p>ãƒãƒ³ãƒ‰ãƒ©ã‚’å‘¼ã¹ã‚‹ã‚ˆã†ã«urls.pyã«ã‚‚è¿½åŠ ã—ã¾ã™ã€‚</p><figure class="highlight py"><figcaption><span>mysite/polls/urls.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">''</span>, views.index, name=<span class="string">'index'</span>),</span><br><span class="line">    path(<span class="string">'future'</span>, views.future, name=<span class="string">'future logo'</span>),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>å†ã³Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã—ã¦å®Ÿè¡Œã—ã¦ã¿ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker build -t pytest .</span><br><span class="line">$ docker run -it --rm -p <span class="string">"8000:8000"</span> pytest</span><br></pre></td></tr></table></figure><p>ã†ã¾ãã„ãã¾ã—ãŸã€‚manylinux1ã§ã‚ã‚Œã°ã€distrolessã§ã‚‚å‹•ä½œã™ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã—ãŸã€‚æ©Ÿæ¢°å­¦ç¿’ç³»ã‚‚ãã“ãã“ã„ã‘ã‚‹ã‚“ã˜ã‚ƒãªã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ</p><img src="/images/20200514/1.png" class="img-middle-size"><h1 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h1><p>ã¡ã‚‡ã£ã¨ç™–ãŒã‚ã‚‹ã‘ã©ã€muslã®ã‚ˆã†ãªæ€§èƒ½ã®åŠ£åŒ–ã‚‚ãªãã€ãƒ“ãƒ«ãƒ‰æ™‚é–“ã‚‚Debianç³»ã¨å¤‰ã‚ã‚‰ãšï¼ˆä¸€å¿œDebian10ãªã®ã§ï¼‰ã€Alpineã‚ˆã‚Šã‚‚å°ã•ãã€ã‚·ã‚§ãƒ«ãŒãªãã¦ã‚»ã‚­ãƒ¥ã‚¢ãªdistroless/python3ã‚’ä½¿ã†æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚</p><p>ãªãŠã€ã“ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã®èª¿æŸ»éç¨‹ã§distroless/python3ã«ã¯manãªã©ã®ä½¿ã‚ã‚Œãªã„ï¼ˆã‚·ã‚§ãƒ«ã‚‚ãªã„ã®ã§ï¼‰ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãŒ1.6MBã»ã©å…¥ã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã€ãã‚Œã‚’<a href="https://github.com/GoogleContainerTools/distroless/issues/508" target="_blank" rel="noopener">å ±å‘Š</a>ã—ã¤ã¤ã€PRã‚’ç”¨æ„ã—ã¦ã„ãŸã®ã§ã™ãŒã€ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿâ†’<a href="https://github.com/GoogleContainerTools/distroless/issues/509" target="_blank" rel="noopener">Debianã®é…ä¿¡ã‚µãƒ¼ãƒãƒ¼ã®ãƒã‚°ï¼Ÿ</a>ã¨å¤§äº‹ã«ãªã£ã¦ãã¦ã„ã¾ã™ã€‚æœ¬å½“ã¯ã‚µã‚¤ã‚ºã‚’ã•ã‚‰ã«å°ã•ãã—ã¾ã—ãŸã€ã¨ã‹ã£ã“ã‚ˆãå ±å‘Šã§ãã‚Œã°ã‚ˆã‹ã£ãŸã‚“ã§ã™ã‘ã©ã­ã€‚</p><hr><p>é–¢é€£è¨˜äº‹:</p><ul><li><a href="https://future-architect.github.io/articles/20200513/">ä»•äº‹ã§Pythonã‚³ãƒ³ãƒ†ãƒŠã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹äººå‘ã‘ã®Dockerfile (1): ã‚ªãƒ¼ãƒ«ãƒã‚¤ãƒ†ã‚£ç·¨</a></li><li><a href="https://future-architect.github.io/articles/20200422/">PyConJP 2019ã«ç™»å£‡ã—ã¾ã—ãŸ</a></li><li><a href="https://future-architect.github.io/articles/20200131/">Airflowã®Tips 11é¸</a></li><li><a href="https://future-architect.github.io/articles/20200212/">GCPé€£è¼‰#5ã€ã‚‚ã†éµãªãã•ãªã„ã€‘GCPã®Secret Managerã¨Berglasã§å¹¸ã›ã«ãªã‚‹</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;img src=&quot;/images/20200514/top.png&quot;&gt;


&lt;p&gt;&lt;a href=&quot;https://future-architect.github.io/articles/20200513/&quot;&gt;å‰å›ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼&lt;/a&gt;ã§ã¯ã€Debianãƒ™ãƒ¼ã‚¹ã®å …å®Ÿãªä»•äº‹å‘ã‘ã®D
      
    
    </summary>
    
      <category term="Infrastructure" scheme="https://future-architect.github.io/categories/Infrastructure/"/>
    
    
      <category term="Python" scheme="https://future-architect.github.io/tags/Python/"/>
    
      <category term="Docker" scheme="https://future-architect.github.io/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>ä»•äº‹ã§Pythonã‚³ãƒ³ãƒ†ãƒŠã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹äººå‘ã‘ã®Dockerfile (1): ã‚ªãƒ¼ãƒ«ãƒã‚¤ãƒ†ã‚£ç·¨</title>
    <link href="https://future-architect.github.io/articles/20200513/"/>
    <id>https://future-architect.github.io/articles/20200513/</id>
    <published>2020-05-12T23:56:40.000Z</published>
    <updated>2020-05-13T23:54:22.934Z</updated>
    
    <content type="html"><![CDATA[<p>Pythonã§æ›¸ã‹ã‚ŒãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã«ã™ã‚‹å …ã„æ–¹æ³•ã®ç´¹ä»‹ã§ã™ã€‚ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚µã‚¤ã‚ºã‚’å°‘ã—ã§ã‚‚å‰Šã‚ã†ï¼ã¨ã‹ã§ã¯ãªãã¦å®Ÿç”¨æ€§é‡è¦–ã®æ–¹å‘ã§ã™ã€‚ä»Šå›ã¯ç¬¬ä¸€å¼¾ã¨ã„ã†ã“ã¨ã§ã€Debianãƒ™ãƒ¼ã‚¹ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½¿ã†æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚</p><ul><li>ç¶šç·¨ã‚‚å…¬é–‹ã•ã‚Œã¾ã—ãŸã€‚<ul><li><a href="https://future-architect.github.io/articles/20200514/">https://future-architect.github.io/articles/20200514/</a></li></ul></li></ul><h1 id="Pythonã®ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸é¸ã³"><a href="#Pythonã®ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸é¸ã³" class="headerlink" title="Pythonã®ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸é¸ã³"></a>Pythonã®ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸é¸ã³</h1><p>ã‚¤ãƒ¡ãƒ¼ã‚¸ä½œæˆã«ã¯ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸é¸ã³ã‹ã‚‰ã§ã™ãŒã€åŸºæœ¬çš„ã«ã¯æ¬¡ã®2ã¤ã‹ãªã¨æ€ã„ã¾ã™ã€‚Pythonãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯æ©Ÿæ¢°å­¦ç¿’ã ã¨3.7ãŒã‚ˆãä½¿ã‚ã‚Œã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ãŒã€5/8ã«TensorflowãŒ3.8å‘ã‘ã®wheelã¨ã‚»ãƒƒãƒˆã§æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å‡ºã—ãŸã®ã§ã€ãã‚ãã‚3.8ã«ãªã£ã¦ã„ãã¾ã™ã‹ã­ã€‚æœ¬è¨˜äº‹ã‚‚3.8ã«ã—ã¾ã™ãŒã€3.7ã§ã‚‚å‹•ä½œã—ã¾ã™ã€‚</p><ul><li>python:3.x-buster</li><li>python:3.x-slim-buster</li></ul><p>ã‚¤ãƒ¡ãƒ¼ã‚¸ã®OSã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªç¨®é¡ãŒã‚ã‚Šã¾ã™ã€‚</p><table><thead><tr><th align="center">åå‰</th><th align="center">ã©ã‚“ãªã‚‚ã®ï¼Ÿ</th></tr></thead><tbody><tr><td align="center">buster</td><td align="center">Debian 10ã§å‡¦ç†ç³»ã¨ã‹ã„ã£ã±ã„ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿</td></tr><tr><td align="center">buster-slim</td><td align="center">Debian 10ã§å‡¦ç†ç³»ãªã—ã®å®Ÿè¡Œç’°å¢ƒç”¨</td></tr><tr><td align="center">stretch</td><td align="center">Debian 9ã§å‡¦ç†ç³»å…¥ã‚Š</td></tr><tr><td align="center">stretch-slim</td><td align="center">Debian 9ã§å‡¦ç†ç³»ãªã—ã®å®Ÿè¡Œç’°å¢ƒç”¨</td></tr><tr><td align="center">alpine</td><td align="center">å…ƒã¯ãƒ•ãƒ­ãƒƒãƒ”ãƒ¼ã§èµ·å‹•ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºé‡è¦–ã®ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³</td></tr><tr><td align="center">windowsservercore</td><td align="center">Windowsã€‚Linuxã‚„macOSä¸Šã§ã¯å‹•ä½œã—ãªã„</td></tr></tbody></table><p>Busterã¨ã‹Stretchã¨ã„ã†åå‰ãŒè¦‹æ…£ã‚Œãªã„æ–¹ã‚‚ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ã“ã‚Œã¯Linuxãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã—ã¦ã‚·ã‚§ã‚¢ã®å¤§ããª<a href="https://www.debian.org/releases/index.en.html" target="_blank" rel="noopener">Debianã®ã‚³ãƒ¼ãƒ‰ãƒãƒ¼ãƒ </a>ã§ã™ã€‚</p><p>Debianãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå°‘ã—å¤ã„Stretchã®æ–¹ãŒã¡ã‚‡ã³ã£ã¨ã‚µã‚¤ã‚ºãŒå°ã•ã‹ã£ãŸã‚Šã¯ã—ã¾ã™ãŒã€ã¾ã‚å®Ÿç”¨çš„ã«ã¯ã‚µãƒãƒ¼ãƒˆãŒé•·ã„æ–¹ãŒã„ã„ã§ã™ã‚ˆã­ã€‚slimã‚’ä½¿ã£ã¦GCCã¨ã‹ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã‚’è‡ªå‰ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã„ã‚‹è¨˜äº‹ã¨ã‹ã‚‚ãŸã¾ã«è¦‹ã‹ã‘ã‚‹æ°—ãŒã—ã¾ã™ãŒã€ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ã§ã‚ã‚Œã°ã€ãã‚“ãªã«ã‚±ãƒã‚±ãƒã—ãªãã¦ã„ã„ã®ã¨ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã¯é€æ¬¡å‡¦ç†ãªã®ã§é…ãã€å‡¦ç†ç³»ãŒå…¥ã£ãŸã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã®æ–¹ãŒé«˜é€Ÿã§ã™ã€‚ä¸¦åˆ—ã§å‡¦ç†ã•ã‚Œã‚‹ã—ã€ä¸€åº¦ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã—ã¾ãˆã°ã€ãªã‚“ã©ã‚‚ãƒ“ãƒ«ãƒ‰ã—ã¦è©¦ã™ã¨ãã«åŠ¹ç‡ãŒè‰¯ã„ã§ã™ã€‚ã¾ãŸã€å¤šãã®ã‚±ãƒ¼ã‚¹ã§ãƒã‚¤ãƒ†ã‚£ãƒ–ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚‚æœ€åˆã‹ã‚‰å…¥ã£ã¦ãŠã‚Šã€ãƒ“ãƒ«ãƒ‰ã§ãƒˆãƒ©ãƒ–ãƒ«ã«é­é‡ã™ã‚‹ã“ã¨ã¯ã‹ãªã‚Šæ¸›ã‚‹ã§ã—ã‚‡ã†ã€‚</p><p>Pythonãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯åŸºæœ¬çš„ã«Alpineã‚’é¸ã‚“ã§ã¯ã„ã‘ã¾ã›ã‚“ã€‚ã„ã‚ã„ã‚ãƒã‚¬ãŒå¤§ãã„ã‹ã‚‰ã§ã™ã€‚</p><ul><li><a href="https://superuser.com/questions/1219609/why-is-the-alpine-docker-image-over-50-slower-than-the-ubuntu-image" target="_blank" rel="noopener">Alpineã¯Ubuntuã‚ˆã‚Šã‚‚50%ä»¥ä¸Šé…ã„</a></li><li><a href="https://pythonspeed.com/articles/alpine-docker-python/" target="_blank" rel="noopener">Alpineã«ã™ã‚‹ã¨ãƒ“ãƒ«ãƒ‰æ™‚é–“ãŒ50å€ã«ãªã‚‹</a></li></ul><p>æœ€åˆã®é …ç›®ã€‚ãªãœé…ã„ã‹ã¨ã„ã†ã¨ã€Alpineã®ã‚¢ãƒ—ãƒªãŒä½¿ã†libc(musl)ã®ãƒ¡ãƒ¢ãƒªå‘¨ã‚Šã‚¢ãƒ­ã‚±ãƒ¼ãƒˆã®å®Ÿè£…ãŒã€æ€§èƒ½ã‚ˆã‚Šã‚‚ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚µã‚¤ã‚ºé‡è¦–ã®ã‚·ãƒ³ãƒ—ãƒ«ã§Pythonã®ä½¿ã„æ–¹ã¨åˆã‚ãªãã¦é€Ÿåº¦ãŒå‡ºãªã„ã¨ã®ã“ã¨ã€‚ã“ã‚Œã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè£…æ¬¡ç¬¬ãªã®ã§jemallocã‚’ä½¿ã£ã¦ã„ã‚‹Rubyã¨ã‹ã®äººã¯é–¢ä¿‚ãªã„ã§ã—ã‚‡ã†ã—ã€PostgreSQLã¨ã‹Nginxã¯Alpineç‰ˆã§ã‚‚é€Ÿåº¦ã¯å¤‰ã‚ã‚‰ãªã„ã‚ˆã†ã§ã™ã€‚æ€§èƒ½ãŒ2å€é•ã†ã¨ã„ã†ã“ã¨ã¯ã€ã‚¯ãƒ©ã‚¦ãƒ‰ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‹•ã‹ã™ã¨ãã¯ãƒ¡ãƒ¢ãƒªã•ãˆè¨±ã›ã°ä¸€ã¤ä¸‹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã„ã„ã‚ã‘ã§ã€ãŠé‡‘ã«ã‚‚åˆ©ã„ã¦ãã¾ã™ã‚ˆã­ã€‚</p><p>å¾Œè€…ã®é€Ÿåº¦ã®å•é¡Œã§ã™ãŒã€PyPIã¯Linuxå‘ã‘ã«ã¯manylinux1ã¨ã„ã†å½¢å¼ã§ãƒã‚¤ãƒŠãƒªã‚’æä¾›ã—ã¦ãŠã‚Šã€Debianã§ã‚‚RedHatã§ã‚‚é«˜é€Ÿã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚ã—ã‹ã—ã€ã“ã®å½¢å¼ã¯Alpineã«ã¯å¯¾å¿œã—ã¦ã„ãªã„ãŸã‚ã€Cæ‹¡å¼µã‚’ä½¿ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã†ã¨ã€Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰æ™‚é–“ãŒä¼¸ã³ã¾ãã£ã¦ã—ã¾ã™ã‚ã‘ã§ã™ã€‚</p><p>ãã‚Œã§ã‚‚ã€ã©ã†ã—ã¦ã‚‚ã€PurePythonã§å‡¦ç†é€Ÿåº¦ã¯ã©ã†ã§ã‚‚è‰¯ã„/ãŠé‡‘ãŒãŸãã•ã‚“ã‚ã‚‹ã€ã‚ã‚‹ã„ã¯Cæ‹¡å¼µã‚’ä½¿ã†å ´åˆã§ã‚‚äººç”Ÿã‚’çŠ ç‰²ã«ã—ã¦ã§ã‚‚ã€ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚µã‚¤ã‚ºã‚’ã©ã†ã—ã¦ã‚‚æ¸›ã‚‰ã—ãŸã„ã¿ãŸã„ãªé¸ã°ã‚Œã—è€…ã¯Alpineã‚’ä½¿ã†æ„Ÿã˜ã§ã—ã‚‡ã†ã‹ã­ã€‚</p><h1 id="Pythonã®ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰"><a href="#Pythonã®ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰" class="headerlink" title="Pythonã®ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰"></a>Pythonã®ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰</h1><p>ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ã§ç’°å¢ƒã‚’ä½œã£ã¦ã„ãã¾ã™ã€‚</p><p>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯Djangoã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã®æœ€åˆã®1ã‚¹ãƒ†ãƒƒãƒ—ã ã‘ä½œã£ãŸã‚‚ã®ã‚’uwsgiã‚’ä½¿ã£ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã“ã¨ã‚’æƒ³å®šã—ã¾ã™ã€‚ãƒ•ã‚©ãƒ«ãƒ€ï¼†ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã¯ã“ã‚“ãªæ„Ÿã˜ã€‚</p><img src="/images/20200513/1.png" class="img-middle-size"><p>ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ä»Šå›ã¯ã“ã‚Œã ã‘ã§ã™ã€‚ãŸã ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯é–‹ç™ºç’°å¢ƒã‚’è¨­å®šã™ã‚‹ã¨ãã«æ›¸ããã‚‰ã„ã§ã™ã­ã€‚ã‚ã¾ã‚Šé‡è¦ã§ã¯ãªã„ã§ã™ã€‚</p><figure class="highlight plain"><figcaption><span>requirements.txt</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">django</span><br><span class="line">uwsgi</span><br></pre></td></tr></table></figure><p>å®Ÿéš›ã«Dockerã®ä¸­ã§ä½¿ã†ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã“ã¡ã‚‰ã€‚<code>pip install -r requirements.txt</code>ã§ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ä¸€ç·’ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸå¾Œã«<code>pip freeze &gt; requirements.lock</code>ã§ä½œæˆã—ã¾ã™ã€‚ã‚ã‚‰ã‹ã˜ã‚venvã§ç’°å¢ƒã‚’åˆ†ã‘ã¦ç½®ãã¨ã€ãƒã‚¤ã‚ºãŒæ··ã–ã‚‰ãªã„ã®ã§è‰¯ã„ã§ã™ã€‚</p><figure class="highlight plain"><figcaption><span>requirements.lock</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">asgiref==3.2.7</span><br><span class="line">Django==3.0.5</span><br><span class="line">pytz==2020.1</span><br><span class="line">sqlparse==0.3.1</span><br><span class="line">uWSGI==2.0.18</span><br></pre></td></tr></table></figure><p>uwsgiç”¨ã®è¨­å®šã¯ã“ã¡ã‚‰ã€‚ãƒ—ãƒ­ã‚»ã‚¹æ•°ã¨ã‹ã‚¹ãƒ¬ãƒƒãƒ‰æ•°ã¯é©å½“ã«ã€‚</p><figure class="highlight ini"><figcaption><span>deploy/uwsgi.ini</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[uwsgi]</span></span><br><span class="line"><span class="attr">http</span> = <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">8000</span></span><br><span class="line"><span class="attr">chdir</span> = /opt/app/mysite</span><br><span class="line"><span class="attr">wsgi-file</span> = mysite/wsgi.py</span><br><span class="line"><span class="attr">master</span> = <span class="literal">True</span></span><br><span class="line"><span class="attr">processes</span> = <span class="number">2</span></span><br><span class="line"><span class="attr">threads</span> = <span class="number">2</span></span><br><span class="line"><span class="attr">stats</span> = <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">9191</span></span><br><span class="line"><span class="attr">uid</span> = uwsgiusr</span><br><span class="line"><span class="attr">gid</span> = uwsgiusr</span><br></pre></td></tr></table></figure><p>Dockerfileã¯ã“ã†ãªã‚Šã¾ã—ãŸã€‚slimã®æ–¹ã«ã¯libxml2ãªã©ãŒãªã„ã®ã§è¿½åŠ ã—ã¾ã™ã€‚PostgreSQLã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®libpq5ã¯ã¾ã‚ãŠã¾ã‘ã§ã™ã€‚å¤§æŠµã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä½œã‚‹ã¨ãã¯PostgreSQLã‹MySQLã¯ä½¿ã†ã§ã—ã‚‡ã†ã—ã€‚ã‚‚ã—ã€ä½¿ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒpure pythonã€ã‚‚ã—ãã¯Cæ‹¡å¼µã§ã‚‚wheelã«ã‚ˆã‚‹ãƒã‚¤ãƒŠãƒªé…å¸ƒã‚’ã—ã¦ã„ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã¿ã§ã‚ã‚Œã°ã€ãƒ“ãƒ«ãƒ‰ç”¨ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚‚3.8-slim-busterã«ã§ãã¾ã™ã€‚slimã‚’ä½¿ã£ã¦ã„ã¦ã‚‚ã€ã‚‚ã—ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’è¿½åŠ ã—ãŸç¬é–“ã«GCCãŒå¿…è¦ã«ãªã£ã¦ã‚‚ã€ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’3.8-busterã«å¤‰ãˆã‚‹ã ã‘ãªã®ã§ã€ã“ã®ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ã®æ§‹æˆã¯å´©ã•ãªã„æ–¹ãŒè‰¯ã„ã§ã—ã‚‡ã†ã€‚ãŠä»•äº‹ã§ã‚ã‚Œã°å•é¡Œå›é¿ã®é€Ÿåº¦ãŒå¤§äº‹ã§ã™ã‹ã‚‰ã­ã€‚</p><figure class="highlight dockerfile"><figcaption><span>Dockerfile</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ã“ã“ã¯ãƒ“ãƒ«ãƒ‰ç”¨ã®ã‚³ãƒ³ãƒ†ãƒŠ</span></span><br><span class="line"><span class="keyword">FROM</span> python:<span class="number">3.8</span>-buster as builder</span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /opt/app</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> requirements.lock /opt/app</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> pip3 install -r requirements.lock</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ã“ã“ã‹ã‚‰ã¯å®Ÿè¡Œç”¨ã‚³ãƒ³ãƒ†ãƒŠã®æº–å‚™</span></span><br><span class="line"><span class="keyword">FROM</span> python:<span class="number">3.8</span>-slim-buster as runner</span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> --from=builder /usr/<span class="built_in">local</span>/lib/python3.8/site-packages /usr/<span class="built_in">local</span>/lib/python3.8/site-packages</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> --from=builder /usr/<span class="built_in">local</span>/bin/uwsgi /usr/<span class="built_in">local</span>/bin/uwsgi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt update \</span></span><br><span class="line"><span class="bash">  &amp;&amp; apt install -y libpq5 libxml2 \</span></span><br><span class="line"><span class="bash">  &amp;&amp; apt-get clean \</span></span><br><span class="line"><span class="bash">  &amp;&amp; rm -rf /var/lib/apt/lists/*</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> useradd -r -s /bin/<span class="literal">false</span> uwsgiusr</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> mkdir -p /opt/app/src/logs/app_logs</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> touch /opt/app/src/logs/server.log</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> chown -R uwsgiusr /opt/app/src/logs</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> deploy/uwsgi.ini /opt/app</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> mysite /opt/app/mysite</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">USER</span> uwsgiusr</span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">8000</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">"uwsgi"</span>, <span class="string">"--ini"</span>, <span class="string">"/opt/app/uwsgi.ini"</span>]</span></span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker build -t pytest .</span><br><span class="line">$ docker run -it --rm -p <span class="string">"8000:8000"</span> pytest</span><br></pre></td></tr></table></figure><p>ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ã†ã¾ãã„ãã¾ã—ãŸã€‚</p><img src="/images/20200513/2.png" class="img-middle-size"><h2 id="Pythonã§ã©ã†ã‚„ã£ã¦ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ã‚’å®Ÿç¾ã™ã‚‹ã®ã‹"><a href="#Pythonã§ã©ã†ã‚„ã£ã¦ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ã‚’å®Ÿç¾ã™ã‚‹ã®ã‹" class="headerlink" title="Pythonã§ã©ã†ã‚„ã£ã¦ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ã‚’å®Ÿç¾ã™ã‚‹ã®ã‹"></a>Pythonã§ã©ã†ã‚„ã£ã¦ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ã‚’å®Ÿç¾ã™ã‚‹ã®ã‹</h2><p>ãƒã‚¤ãƒ³ãƒˆã¨ã—ã¦ã¯ã€pip installã—ã¦ã§ããŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä¸€å¼ã‚³ãƒ”ãƒ¼ã—ã¦å®Ÿè¡Œç”¨ã®ã‚³ãƒ³ãƒ†ãƒŠã«å†™ã—ã¦ã¾ã™ã€‚uwsgiã¯åˆ¥ã®å ´æ‰€ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ã®ã§ã€ãã‚Œã‚‚å€‹åˆ¥ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚</p><figure class="highlight dockerfile"><figcaption><span>ä»Šå›ä½¿ã£ãŸã®ã¯ã“ã¡ã‚‰ã®æ–¹æ³•</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">COPY</span><span class="bash"> --from=builder /usr/<span class="built_in">local</span>/lib/python3.8/site-packages /usr/<span class="built_in">local</span>/lib/python3.8/site-packages</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> --from=builder /usr/<span class="built_in">local</span>/bin/uwsgi /usr/<span class="built_in">local</span>/bin/uwsgi</span></span><br></pre></td></tr></table></figure><p>å®Ÿã¯ã“ã®æ›¸ãæ–¹ã‚’ç´¹ä»‹ã—ã¦ã„ã‚‹è¨˜äº‹ç­‰ã¯ã»ã¨ã‚“ã©ã‚ã‚Šã¾ã›ã‚“ã€‚ãƒãƒƒãƒˆã§ã‚ˆãè¦‹ã‚‹Pythonã®ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ã®æ–¹æ³•ã¯æ¬¡ã®æ–¹æ³•ã§ã™ã€‚</p><figure class="highlight dockerfile"><figcaption><span>ã“ã£ã¡ã®æ–¹ãŒã‚ˆãè¦‹ã‚‹</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">COPY</span><span class="bash"> --from=builder /root/.cache /root/.cache</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> /build/requirements.txt /opt/app</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> pip3 install -r requirements.txt</span></span><br></pre></td></tr></table></figure><p>ã“ã®æ–¹æ³•ã§ã‚ã‚Œã°ã€uwsgiã®ã‚ˆã†ãªåˆ¥ã®å ´æ‰€ã«å…¥ã‚‹å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã‚‚è‡ªå‹•ã§å‡¦ç†ã•ã‚Œã‚‹ã®ã§ãã‚Œã„ã«ã†ã¾ãã„ãã®ã§ã™ãŒã€æœ€çµ‚çš„ãªã‚¤ãƒ¡ãƒ¼ã‚¸ã«/root/.cacheã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒæ®‹ã£ã¦ã—ã¾ã„ã¾ã™ã€‚RUNã«ã‚ˆã‚‹ãƒ¬ã‚¤ãƒ¤ãƒ¼ãªã‚‰&amp;&amp;ã‚’é§†ä½¿ã—ã¦å‰Šé™¤ã§ãã‚‹ã®ã§ã™ãŒã€ã“ã‚Œã¯COPYã§ä½œã‚‰ã‚Œã‚‹ãƒ¬ã‚¤ãƒ¤ãƒ¼ãªã®ã§ã€ä»Šã®Dockerã ã‘ã ã¨ã“ã®ç„¡é§„ã¯å‰Šé™¤ã§ããªã„ã®ã§ã™ã‚ˆã­ã€‚</p><p>æ©Ÿæ¢°å­¦ç¿’ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚‚ã‚Šã‚‚ã‚Šãªã‚¤ãƒ¡ãƒ¼ã‚¸ã ã¨ã€ã“ã‚Œã ã‘ã§200MBãã‚‰ã„ã®å®¹é‡ã«ãªã£ãŸã‚Šï¼ˆå…¨ä½“ã‚‚1.2GBã¨ã‹ã«ãªã‚Šã¾ã™ãŒï¼‰ã€‚ä»Šã®ã¨ã“ã‚site-packageså…¨éƒ¨ã‚³ãƒ”ãƒ¼ã®æ–¹æ³•ã§å•é¡Œã¯ãªã•ãã†ã§ã™ã€‚</p><h1 id="å®Ÿè¡Œæ™‚ã«å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒãªã„ã¨è¨€ã‚ã‚ŒãŸã‚‰"><a href="#å®Ÿè¡Œæ™‚ã«å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒãªã„ã¨è¨€ã‚ã‚ŒãŸã‚‰" class="headerlink" title="å®Ÿè¡Œæ™‚ã«å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒãªã„ã¨è¨€ã‚ã‚ŒãŸã‚‰"></a>å®Ÿè¡Œæ™‚ã«å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒãªã„ã¨è¨€ã‚ã‚ŒãŸã‚‰</h1><p>ãƒ•ãƒ«ã‚»ãƒƒãƒˆã®busterã«ã¯é–‹ç™ºè€…å‘ã‘ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªé¡ã‚‚å«ã‚ã¦ã„ã‚ã„ã‚å…¥ã£ã¦ã„ã‚‹ã®ã§ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã™ã‚‹ã‚‚ã€slimå´ã«ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒãªãã¦å®Ÿè¡Œæ™‚ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚å®Ÿè¡Œæ™‚ã«ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒãƒ­ãƒ¼ãƒ‰ã§ããªã„ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸã‚‰ã€<a href="https://packages.debian.org/search?lang=ja&arch=amd64&mode=filename&searchon=contents&keywords=libxml2.so.2" target="_blank" rel="noopener">ã“ã¡ã‚‰ã®ã‚µã‚¤ãƒˆ</a>ã«ãƒ©ã‚¤ãƒ–ãƒ©ãƒªåã‚’å…¥ã‚Œã¦ã€ãã‚Œã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã®ã«å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’æ¢ã—ã€apt installã®é …ç›®ã«è¿½åŠ ã—ã¦ãã ã•ã„ã€‚</p><img src="/images/20200513/3.png" class="img-middle-size"><p>Pythonã ã¨é–¢æ•°ã®ä¸­ã§importã§ãã¾ã™ã€‚åå‰ç©ºé–“ã‚’æ±šã•ãªã„ã®ã§ã€ã“ã¡ã‚‰ã®æ–¹ãŒè‰¯ã„ã®ã‹ãªã€ã¨æ€ã£ã¦åƒ•ã‚‚ä»¥å‰ã‚„ã£ã¦ã„ã¾ã—ãŸãŒã€ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªã¨ã“ã‚ã ã‘ã«importãŒã‚ã‚‹ã¨ã€ã¡ã‚‡ã£ã¨ã—ãŸå®Ÿè¡Œã™ã‚‹ã¨å¿…è¦ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å…¨éƒ¨èª­ã¿è¾¼ã‚“ã§ãã‚Œã¦ã€ã“ã®æ‰‹ã®ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼ã¯ã™ãã«ã‚ã‹ã‚Šã¾ã™ã€‚é–¢æ•°å†…importã¯ãªã‚‹ã¹ãé¿ã‘ãŸæ–¹ãŒè‰¯ã„ã§ã—ã‚‡ã†ï¼ˆå…ˆæ—¥ã‚‚ãã‚Œã§å•é¡Œã‚’è¦‹ã¤ã‘ãã‚Œãªã‹ã£ãŸï¼‰ã€‚</p><h1 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h1><p>Pythonã‚’ä»•äº‹ã§ä½¿ã†äººã®ãŸã‚ã®å …ã„ã‚¤ãƒ¡ãƒ¼ã‚¸ä½œæˆã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã—ãŸã€‚Alpineã®ã‚ˆã†ãªæ€§èƒ½ã®ãƒã‚¬ã‚‚ãªãã€ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ä½œæˆã®å®Ÿè¡Œæ™‚é–“ã‚‚å°‘ãªãã€æ®‹æ¥­æ™‚é–“ãŒæ¸›ã‚‰ã›ã‚‹æ–¹æ³•ã‚’é¸ã³ã¾ã—ãŸã€‚æ¬¡å›ã¯æ¡ä»¶ã«ã‚ˆã£ã¦ã¯ä½¿ãˆãªã„ã‹ã‚‚ã—ã‚Œãªã„ã®ã§ã™ãŒã€ä½¿ãˆãŸã‚‰åŠ¹æœæŠœç¾¤ãªdistroless/python3ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ã€‚</p><p><strong>å…¬é–‹ã—ã¾ã—ãŸ(2020/05/14)</strong></p><p><a href="https://future-architect.github.io/articles/20200514/">https://future-architect.github.io/articles/20200514/</a></p><hr><p>é–¢é€£è¨˜äº‹:</p><ul><li><a href="https://future-architect.github.io/articles/20200422/">PyConJP 2019ã«ç™»å£‡ã—ã¾ã—ãŸ</a></li><li><a href="https://future-architect.github.io/articles/20200131/">Airflowã®Tips 11é¸</a></li><li><a href="https://future-architect.github.io/articles/20200212/">GCPé€£è¼‰#5ã€ã‚‚ã†éµãªãã•ãªã„ã€‘GCPã®Secret Managerã¨Berglasã§å¹¸ã›ã«ãªã‚‹</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Pythonã§æ›¸ã‹ã‚ŒãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã«ã™ã‚‹å …ã„æ–¹æ³•ã®ç´¹ä»‹ã§ã™ã€‚ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚µã‚¤ã‚ºã‚’å°‘ã—ã§ã‚‚å‰Šã‚ã†ï¼ã¨ã‹ã§ã¯ãªãã¦å®Ÿç”¨æ€§é‡è¦–ã®æ–¹å‘ã§ã™ã€‚ä»Šå›ã¯ç¬¬ä¸€å¼¾ã¨ã„ã†ã“ã¨ã§ã€Debianãƒ™ãƒ¼ã‚¹ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½¿ã†æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¶šç·¨ã‚‚å…¬é–‹ã•ã‚Œ
      
    
    </summary>
    
      <category term="Infrastructure" scheme="https://future-architect.github.io/categories/Infrastructure/"/>
    
    
      <category term="Python" scheme="https://future-architect.github.io/tags/Python/"/>
    
      <category term="Docker" scheme="https://future-architect.github.io/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>æ—¥æœ¬è£½HeadlessCMSã®microCMSã‚’è§¦ã£ã¦ã¿ãŸ</title>
    <link href="https://future-architect.github.io/articles/20200512/"/>
    <id>https://future-architect.github.io/articles/20200512/</id>
    <published>2020-05-12T00:48:20.000Z</published>
    <updated>2020-05-12T01:01:47.897Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>ã¯ã˜ã‚ã¾ã—ã¦ï¼TIG DXãƒãƒ¼ãƒ ã€€ã‚¢ãƒ«ãƒã‚¤ã‚¿ãƒ¼ã®ä¸‰æ‘ã§ã™ï¼</p><p>æ™®æ®µã¯å¤§å­¦é™¢ç”Ÿã‚’ã—ã¦ãŠã‚Šãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã«ã¯ <a href="https://jobs.atcoder.jp/" target="_blank" rel="noopener">AtCoder Jobs</a> çµŒç”±ã§ã‚¢ãƒ«ãƒã‚¤ãƒˆæ¡ç”¨ã—ã¦ã„ãŸã ãï¼Œ5æœˆã§ã¡ã‚‡ã†ã©1å¹´ã«ãªã‚Šã¾ã™ï¼ã‚ã‚ŠãŒã¨ã†<a href="https://atcoder.jp/" target="_blank" rel="noopener">AtCoder</a>!!ã“ã‚Œã¾ã§</p><ul><li>Vue.jsã§ã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ç”»é¢ä½œæˆ</li><li>Dockerä¸Šã§localstackã‚’ç”¨ã„ãŸAWSç”¨ã®æŠ€è¡“æ¤œè¨¼</li><li>Goã§ãƒ¡ãƒƒã‚·ãƒ¥è¨ˆç®—ãƒ„ãƒ¼ãƒ«ä½œæˆ</li><li>Pythonã§æ€§èƒ½æ¤œè¨¼ç”¨ã®ãƒ€ãƒŸãƒ¼æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã®ç”Ÿæˆ</li></ul><p>ãªã©ãªã©ã‚¢ãƒ«ãƒã‚¤ã‚¿ãƒ¼ã§ã™ãŒå¹…åºƒãæ§˜ã€…ãªã‚¿ã‚¹ã‚¯ã‚’ã‚„ã‚‰ã›ã¦ã‚‚ã‚‰ã„ã¾ã—ãŸï¼<br>ãã—ã¦ä»Šå›ã¯HeadlessCMSã‚’åˆ©ç”¨ã—ãŸã‚¿ã‚¹ã‚¯ã‚’ã‚„ã‚‹ã“ã¨ã«ãªã‚Šã¾ã—ãŸï¼ç§è‡ªèº«HeadlessCMSã©ã“ã‚ã‹CMSã‚’èã„ãŸã“ã¨ã™ã‚‰ç„¡ã‹ã£ãŸã®ã§ï¼Œåˆã‚ã¦CMSä½¿ã£ã¦ã¿ã‚‹ã«ã‚ãŸã£ã¦æ„Ÿã˜ãŸã“ã¨ã‚’å…±æœ‰å‡ºæ¥ãŸã‚‰ã¨æ€ã„æœ¬è¨˜äº‹ã‚’ä½œæˆã•ã›ã¦ã„ãŸã ã„ã¦ãŠã‚Šã¾ã™ï¼</p><h1 id="ãã‚‚ãã‚‚CMSã£ã¦ï¼Ÿ"><a href="#ãã‚‚ãã‚‚CMSã£ã¦ï¼Ÿ" class="headerlink" title="ãã‚‚ãã‚‚CMSã£ã¦ï¼Ÿ"></a>ãã‚‚ãã‚‚CMSã£ã¦ï¼Ÿ</h1><p>CMSã¯<strong>Content Management System</strong>ã®é ­æ–‡å­—ã‚’å–ã£ãŸç•¥ç§°ã§ï¼Œæ–‡å­—é€šã‚Šã€Œã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ç®¡ç†ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã€ã®ã“ã¨ã§ã™ï¼</p><p>ä¾‹ãˆã°ç´ æœ´ã«webã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ä½œæˆã—ã‚ˆã†ã¨ã—ãŸå ´åˆï¼Œç”»é¢ã ã‘ã§ã‚‚HTMLã‚„CSSç­‰ã®æŠ€è¡“çš„ãªã‚¹ã‚­ãƒ«ãŒå¿…è¦ã¨ãªã‚Šã¾ã™ï¼ä¸€æ–¹ã§CMSã‚’åˆ©ç”¨ã—ã¦webã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ä½œæˆã™ã‚Œã°ï¼ŒæŠ€è¡“çš„ãªã‚¹ã‚­ãƒ«ã«ä¾å­˜ã™ã‚‹ã“ã¨ãªãã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ä½œæˆã«æ³¨åŠ›ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼<br>ã™ãªã‚ã¡ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä½œæˆè€…ã¯æŠ€è¡“çš„ãªã“ã¨ã¯æ‡¸å¿µã›ãšã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ä½œæˆï¼Œç®¡ç†ã«ã ã‘ãƒªã‚½ãƒ¼ã‚¹ãŒå‰²ãã“ã¨ãŒã§ãã¦å¬‰ã—ã„ã§ã™ï¼</p><p>å…·ä½“çš„ãªCMSã‚µãƒ¼ãƒ“ã‚¹ã«ã¯<a href="https://ja.wordpress.org/" target="_blank" rel="noopener">WordPress</a>ãŒæŒ™ã’ã‚‰ã‚Œã¾ã™ï¼</p><h1 id="HeadlessCMS"><a href="#HeadlessCMS" class="headerlink" title="HeadlessCMS"></a>HeadlessCMS</h1><p>HeadlessCMSã¨ã¯Wikipediaã«ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚ã‚Šã¾ã™ï¼</p><blockquote><p>Whereas a traditional CMS typically combines the content and presentation layers of a website, a headless CMS is just the content component and focuses entirely on the administrative interface for content creators, the facilitation of content workflows and collaboration, and the organization of content into taxonomies. It doesnâ€™t concern itself with presentation layers, templates, site structure, or design, but rather stores its content in pure format and provides access to other components (e.g. delivery front ends, analytics tools, etc.) through stateless or loosely coupled APIs.</p></blockquote><p><a href="https://en.wikipedia.org/wiki/Headless_content_management_system" target="_blank" rel="noopener">Wikipedia</a> ã‚ˆã‚Šå¼•ç”¨</p><p>è¦ç´„ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªæ„Ÿã˜ã§ã—ã‚‡ã†ã‹ï¼</p><blockquote><p>å¾“æ¥ã®CMSãŒã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¨ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤ã‚’çµ„ã¿åˆã‚ã›ãŸã‚‚ã®ã§ã‚ã‚‹ã®ã«å¯¾ã—ï¼ŒHeadlessCMSã¯ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®æ§‹æˆè¦ç´ ã®ã¿ã«ç„¦ç‚¹ã‚’å½“ã¦ã¦ã„ã‚‹ï¼ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼Œãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼Œã‚µã‚¤ãƒˆæ§‹é€ ï¼Œãƒ‡ã‚¶ã‚¤ãƒ³ã«ã¯é–¢å¿ƒãŒãªãç´”ç²‹ãªå½¢å¼ã§ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ä¿å­˜ã—ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¬ã‚¹ãªAPIã‚’é€šã˜ã¦ä»–ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’æä¾›ã™ã‚‹ï¼</p></blockquote><p>ã™ãªã‚ã¡ï¼ŒHeadlessCMSã¯ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’åˆ‡ã‚Šé›¢ã—ã¦è¨­è¨ˆã—ã¾ã™ï¼ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é–“ã¯APIã‚’é€šã˜ã¦ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ã‚„ã‚Šå–ã‚Šã‚’ã—ã¾ã™ï¼ã“ã‚Œã«ã‚ˆã‚Šãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å´ã¯ãƒ‡ã‚¶ã‚¤ãƒ³ã‚„ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒå›ºå®šã•ã‚Œãšé«˜ã„è‡ªç”±åº¦ã§é–‹ç™ºãŒè¡Œãˆã¾ã™ï¼</p><p>ã“ã‚ŒãŒå‰è¿°ã®WordPressã«ä»£è¡¨ã•ã‚Œã‚‹CMSã¨ã®é•ã„ã§ã™ï¼</p><h2 id="HeadlessCMSã‚µãƒ¼ãƒ“ã‚¹ã®æ¯”è¼ƒ"><a href="#HeadlessCMSã‚µãƒ¼ãƒ“ã‚¹ã®æ¯”è¼ƒ" class="headerlink" title="HeadlessCMSã‚µãƒ¼ãƒ“ã‚¹ã®æ¯”è¼ƒ"></a>HeadlessCMSã‚µãƒ¼ãƒ“ã‚¹ã®æ¯”è¼ƒ</h2><p>HeadlessCMSã¯æ•°å¤šãã®ã‚µãƒ¼ãƒ“ã‚¹ãŒå­˜åœ¨ã—ã¦ã„ã¾ã™ï¼<br>ã“ã“ã§ã¯ä»£è¡¨çš„ãª3ã¤ã®ã‚µãƒ¼ãƒ“ã‚¹ã® <a href="https://buttercms.com/" target="_blank" rel="noopener">butterCMS</a>ï¼Œ <a href="https://www.contentful.com/" target="_blank" rel="noopener">contentful</a>ï¼Œ <a href="https://microcms.io/" target="_blank" rel="noopener">microCMS</a> ã‚’æ¯”è¼ƒã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ï¼</p><p>èª¿æŸ»æ—¥: <strong>2020å¹´5æœˆ8æ—¥æ™‚ç‚¹</strong></p><table><thead><tr><th>æ€§èƒ½/ã‚³ã‚¹ãƒˆ</th><th>butterCMS</th><th>contentful</th><th>microCMS</th></tr></thead><tbody><tr><td>åˆ©ç”¨æ–™é‡‘(æœˆ)</td><td>208$ Small Businessãƒ—ãƒ©ãƒ³</td><td>879$ Businessãƒ—ãƒ©ãƒ³</td><td>29,000å†† Businessãƒ—ãƒ©ãƒ³</td></tr><tr><td>CMSç®¡ç†ç”»é¢ã‹ã‚‰ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ä½œæˆï¼Œæ›´æ–°ï¼Œå‰Šé™¤ï¼Œå‚ç…§</td><td>ã€‡</td><td>ã€‡</td><td>ã€‡</td></tr><tr><td>APIã«ã‚ˆã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å–å¾—</td><td>ã€‡</td><td>ã€‡</td><td>ã€‡</td></tr><tr><td>ç®¡ç†æ¨©é™</td><td>ã€‡</td><td>ã€‡</td><td>ã€‡</td></tr><tr><td>äºˆç´„å…¬é–‹æ©Ÿèƒ½</td><td>ã€‡</td><td>ã€‡</td><td>ã€‡</td></tr><tr><td>ã‚µãƒãƒ¼ãƒˆ</td><td>æµ·å¤–ã‚µãƒãƒ¼ãƒˆ</td><td>æµ·å¤–ã‚µãƒãƒ¼ãƒˆ</td><td>å›½å†…ã‚µãƒãƒ¼ãƒˆ</td></tr><tr><td>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</td><td>è‹±èª</td><td>è‹±èª</td><td>æ—¥æœ¬èª</td></tr></tbody></table><p>ã©ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚‚åŸºæœ¬çš„ãªæ©Ÿèƒ½ã¯æº€ãŸã•ã‚Œã¦ã„ã¾ã™ï¼microCMSã¯æ—¥æœ¬è£½HeadlessCMSã§ã™ã®ã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‹ã‚‰ã‚µãƒãƒ¼ãƒˆã¾ã§ã™ã¹ã¦æ—¥æœ¬èªå¯¾å¿œã§ã™ï¼ã‚µãƒ¼ãƒ“ã‚¹é–‹å§‹ãŒ2019å¹´8æœˆã‹ã‚‰ã¨ã„ã†ã“ã¨ã‚‚ã‚ã‚Šï¼Œç¾åœ¨ã‚‚æ´»ç™ºã«æ©Ÿèƒ½ã®æ”¹å–„ã‚„è¿½åŠ ãŒè¡Œã‚ã‚Œã¦ã„ã¾ã™ï¼<br>å…¬å¼ã§æ§˜ã€…ãª<a href="https://microcms.io/blog/" target="_blank" rel="noopener">å…¥é–€è¨˜äº‹ã‚„ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«</a>ã‚’æ›¸ã„ã¦ãã‚Œã¦ã„ã‚‹ã®ã§åˆã‚ã¦HeadlessCMSã‚’è§¦ã£ã¦ã¿ã‚‹å ´åˆã«å–ã‚Šæ›ã‹ã‚Šã‚„ã™ã„ã¨æ€ã„ã¾ã™ï¼</p><p>ã—ãŸãŒã£ã¦ä»Šå›ã¯<a href="https://microcms.io/" target="_blank" rel="noopener">microCMS</a>ã‚’ä½¿ã£ã¦ã¿ã¾ã™ï¼ç„¡æ–™ãƒ—ãƒ©ãƒ³ã®æ©Ÿèƒ½ã‚‚å……å®Ÿã—ã¦ã„ã¾ã™ï¼</p><h1 id="microCMSã‚’ä½¿ã£ã¦ã¿ã‚‹"><a href="#microCMSã‚’ä½¿ã£ã¦ã¿ã‚‹" class="headerlink" title="microCMSã‚’ä½¿ã£ã¦ã¿ã‚‹"></a>microCMSã‚’ä½¿ã£ã¦ã¿ã‚‹</h1><p>ãã‚Œã§ã¯å®Ÿéš›ã«micoroCMSã‚’ä½¿ã£ã¦ã¿ã¾ã™ï¼<br>ä»¥é™ã®ä¾‹ã§ã¯<strong>ã€Œãƒ–ãƒ­ã‚°è¨˜äº‹ã®ç®¡ç†ã€</strong> ã¨ã„ã†å ´é¢ã‚’æƒ³å®šã—ã¦microCMSã®åˆ©ç”¨ã‚’èª¬æ˜ã—ã¦ã„ãã¾ã™ï¼<br>ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®åˆ©ç”¨ã«ã¯ä¼šå“¡ç™»éŒ²ã‚’æ¸ˆã¾ã›ãŸã®ã¡ï¼Œ</p><ol><li>ã‚µãƒ¼ãƒ“ã‚¹ã®ä½œæˆ</li><li>APIã®ä½œæˆ</li><li>ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å…¥åŠ›</li></ol><p>ä¸Šè¨˜ã®3ã¤ã®ã‚¹ãƒ†ãƒƒãƒ—ãŒå¿…è¦ã§ã™ï¼ä»¥ä¸‹ã§é †ã«è¦‹ã¦ã„ãã¾ã™ï¼</p><h2 id="ä¼šå“¡ç™»éŒ²"><a href="#ä¼šå“¡ç™»éŒ²" class="headerlink" title="ä¼šå“¡ç™»éŒ²"></a>ä¼šå“¡ç™»éŒ²</h2><p>ã¾ãšã¯<a href="https://microcms.io/" target="_blank" rel="noopener">ã“ã“</a>ã‹ã‚‰ä¼šå“¡ç™»éŒ²ã‚’å®Œäº†ã•ã›ã¦ãã ã•ã„ï¼<br>ç”»é¢ã®æ‰‹é †é€šã‚Šã«é€²ã‚ã°ç°¡å˜ã«ä¼šå“¡ç™»éŒ²ã§ãã‚‹ã¨æ€ã„ã¾ã™ã®ã§ï¼Œè©³ç´°ã¯çœç•¥ã•ã›ã¦ã„ãŸã ãã¾ã™ï¼</p><p>æ–™é‡‘ä½“ç³»ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã®ã§ï¼Œã”è‡ªèº«ã§åˆ©ç”¨ã—ãŸã„ãƒ—ãƒ©ãƒ³ã‚’é¸æŠã—ã¦ãã ã•ã„ï¼<br>æœ¬è¨˜äº‹ã§ã¯Freeãƒ—ãƒ©ãƒ³ã‚’é¸æŠã—ã¦ã„ã¾ã™ï¼<br><img src="/images/20200512/photo_20200512_01.png"></p><h2 id="ã‚µãƒ¼ãƒ“ã‚¹ã®ä½œæˆ"><a href="#ã‚µãƒ¼ãƒ“ã‚¹ã®ä½œæˆ" class="headerlink" title="ã‚µãƒ¼ãƒ“ã‚¹ã®ä½œæˆ"></a>ã‚µãƒ¼ãƒ“ã‚¹ã®ä½œæˆ</h2><p>ä¼šå“¡ç™»éŒ²ã‚’æ¸ˆã¾ã›ãŸã‚‰æœ€åˆã«ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œæˆã—ã¾ã™ï¼ã‚µãƒ¼ãƒ“ã‚¹IDã¯ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³ã§ã™ï¼ã™ãªã‚ã¡ï¼Œ<strong>https://[ã‚µãƒ¼ãƒ“ã‚¹ID].microcms.io/</strong>ã¨ãªã‚Šã¾ã™ã®ã§åŠè§’è‹±æ•°å­—ã§ä½œæˆã—ã¾ã™ï¼<br>ã“ã“ã§ã¯ã‚µãƒ¼ãƒ“ã‚¹åã‚’<strong>microCMSå…¥é–€</strong>ï¼Œã‚µãƒ¼ãƒ“ã‚¹IDã‚’<strong>future-blog-sample</strong>ã¨ã—ã¦ã„ã¾ã™ï¼<br><img src="/images/20200512/photo_20200512_02.png" style="border:solid 1px #000000"></p><p>ã¾ãŸï¼Œã‚µãƒ¼ãƒ“ã‚¹ã«ã¯è­˜åˆ¥ã—ã‚„ã™ã„ã‚ˆã†ã«ç”»åƒã‚’è¨­å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã®ã§ï¼Œè¤‡æ•°ã‚µãƒ¼ãƒ“ã‚¹ã‚’é‹ç”¨ã™ã‚‹å ´åˆã«ã¯è¨­å®šã™ã‚‹ã¨ã„ã„ã¨æ€ã„ã¾ã™ï¼<br><img src="/images/20200512/photo_20200512_03.png" style="border:solid 1px #000000"><br>ç§ã¯æ—¢ã«1ã¤ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œæˆã—ã¦ã„ã¾ã—ãŸã®ã§ï¼Œç”»é¢å·¦ä¸Šã«ã†ã£ã™ã‚‰æ—¢å­˜ã‚µãƒ¼ãƒ“ã‚¹ã®ã‚¢ã‚¤ã‚³ãƒ³ãŒè¦‹ãˆã‚‹ã‹ã¨æ€ã„ã¾ã™ï¼</p><h2 id="APIã®ä½œæˆ"><a href="#APIã®ä½œæˆ" class="headerlink" title="APIã®ä½œæˆ"></a>APIã®ä½œæˆ</h2><p>ã‚µãƒ¼ãƒ“ã‚¹ã®ä½œæˆãŒå®Œäº†ã—ãŸã‚‰å…ˆã»ã©ä½œæˆã—ãŸ<strong>https://[ã‚µãƒ¼ãƒ“ã‚¹ID].microcms.io/</strong>ã«é€²ã¿APIã®ä½œæˆã‚’ã—ã¾ã™ï¼<br>ä»Šå›ã¯ã€Œãƒ–ãƒ­ã‚°è¨˜äº‹ã€ã®é…ä¿¡ã¨ç®¡ç†ã‚’æƒ³å®šã—ã¦ã„ã‚‹ã®ã§ä»¥ä¸‹ã®ã‚ˆã†ã«APIåã¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ä½œæˆã—ã¾ã™ï¼<br><img src="/images/20200512/photo_20200512_04.png" style="border:solid 1px #000000"></p><p>APIã§å¾—ã‚‰ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿å½¢å¼ã«ã¯ãƒªã‚¹ãƒˆå½¢å¼ã‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå½¢å¼ã‚’é¸æŠã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼<br>ä»Šå›é…ä¿¡ã™ã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ã€Œãƒ–ãƒ­ã‚°è¨˜äº‹ã€ã¯ãƒªã‚¹ãƒˆå½¢å¼ã§ç®¡ç†ã—ãŸã„ã¨æ€ã„ã¾ã™ï¼<br><img src="/images/20200512/photo_20200512_05.png" style="border:solid 1px #000000"></p><p>æ¬¡ã«APIã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©ã—ã¦ã„ãã¾ã™ï¼<br>ã‚¹ã‚­ãƒ¼ãƒã®ç¨®é¡ã«ã¯ä»¥ä¸‹ã®ç”»åƒã®ã‚ˆã†ã«é¸æŠã§ãã¾ã™ï¼ä¸€é€šã‚Šæƒ³å®šã•ã‚Œã‚‹ã‚¹ã‚­ãƒ¼ãƒã¯å‚™ãˆã‚‰ã‚Œã¦ãŠã‚Šï¼Œç°¡å˜ãªèª¬æ˜ã‚‚ã‚ã‚‹ãŸã‚ï¼Œã©ã‚Œã‚’ä½¿ã†ã¹ãã‹éå¸¸ã«ã‚ã‹ã‚Šã‚„ã™ããªã£ã¦ã„ã¾ã™ï¼<br><img src="/images/20200512/photo_20200512_06.png"></p><p>ä»Šå›ã¯ã€Œãƒ–ãƒ­ã‚°è¨˜äº‹ã€ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„é…ä¿¡ã‚’æƒ³å®šã—ã¦ã„ã‚‹ã®ã§ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¹ã‚­ãƒ¼ãƒã‚’ä½œæˆã—ã¾ã™ï¼ã‚¹ã‚­ãƒ¼ãƒã¯å¾Œã‹ã‚‰ä¿®æ­£ã‚’åŠ ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼<br><img src="/images/20200512/photo_20200512_07.png" style="border:solid 1px #000000"></p><h2 id="ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ä½œæˆ"><a href="#ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ä½œæˆ" class="headerlink" title="ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ä½œæˆ"></a>ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ä½œæˆ</h2><p>æœ€å¾Œã«å…ˆã»ã©ä½œæˆã—ãŸAPIã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ä½œæˆã‚’ã—ã¾ã™ï¼ç”»é¢å³ä¸Šã®ã€Œè¿½åŠ ã€ã‹ã‚‰ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ä½œæˆã‚’è¡Œã„ã¾ã™ï¼<br><img src="/images/20200512/photo_20200512_08.png" style="border:solid 1px #000000"></p><p>ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ä½œæˆãŒã§ããŸã‚‰æ—©é€Ÿã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å…¬é–‹ã‚’ã—ã¾ã—ã‚‡ã†ï¼å³ä¸Šã®å…¬é–‹ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒå…¬é–‹ã•ã‚Œã¾ã™ï¼ãªãŠãƒ—ãƒ«ãƒ€ã‚¦ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ä¸‹æ›¸ãã¨ã—ã¦ä¿å­˜ã—ã¦ãŠãã“ã¨ã‚‚ã§ãã¾ã™ï¼<br><img src="/images/20200512/photo_20200512_09.png" style="border:solid 1px #000000"></p><p>ã“ã‚Œã§ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒé…ä¿¡ã•ã‚Œã¦ã„ã‚‹çŠ¶æ…‹ã¨ãªã‚Šã¾ã—ãŸï¼æ¬¡ã§å®Ÿéš›ã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’å–å¾—ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ï¼</p><h1 id="APIã®åˆ©ç”¨"><a href="#APIã®åˆ©ç”¨" class="headerlink" title="APIã®åˆ©ç”¨"></a>APIã®åˆ©ç”¨</h1><p>ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®é…ä¿¡æº–å‚™ãŒæ•´ã£ãŸã®ã§å®Ÿéš›ã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’å–å¾—ã—ã¦ã¿ã¾ã™ï¼</p><p>microCMSã«ã¯ç°¡å˜ã«APIã‚’è©¦ã™ã“ã¨ãŒã§ãã‚‹ã€ŒAPIãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€ãŒå‚™ã‚ã£ã¦ã„ã¾ã™ï¼ã¾ãšã¯ã“ã“ã‹ã‚‰APIã‚’åˆ©ç”¨ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ï¼<br>å…ˆã»ã©ä½œæˆã—ãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ç”»é¢ã‹ã‚‰å³ä¸Šã®ã€ŒAPIãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€ã‚’é¸æŠã—ã¾ã™ï¼<br><img src="/images/20200512/photo_20200512_10.png" style="border:solid 1px #000000"></p><p>ã€ŒAPIãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€ã§é–‹ã‹ã‚ŒãŸãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€Œå–å¾—ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ï¼ŒAPIãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒå®Ÿè¡Œã•ã‚Œã¦ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼ã¾ãŸï¼Œcurlã‚³ãƒãƒ³ãƒ‰ã‚‚æç¤ºã—ã¦ãã‚Œã¦ã„ã‚‹ãŸã‚ã”è‡ªèº«ã®ç’°å¢ƒã§ã‚‚ã™ãã«è©¦ã›ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹è¦ªåˆ‡è¨­è¨ˆã§ã™ï¼<br><img src="/images/20200512/photo_20200512_11.png" style="border:solid 1px #000000"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl <span class="string">"https://[ã‚µãƒ¼ãƒ“ã‚¹ID].io/api/v1/blog/l5cn1orii"</span> -H <span class="string">"X-API-KEY: YOUR_API_KEY"</span></span><br></pre></td></tr></table></figure><h1 id="ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å‚ç…§"><a href="#ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å‚ç…§" class="headerlink" title="ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å‚ç…§"></a>ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å‚ç…§</h1><p>å…ˆã»ã©ã®ä¾‹ã§ã¯ã€Œãƒ–ãƒ­ã‚°ä½œæˆè€…ã€ã‚’ã¹ãŸæ›¸ãã§ä¸ãˆã¦ã„ã¾ã—ãŸãŒï¼Œå®Ÿéš›ã«ãƒ–ãƒ­ã‚°ã‚’ä½œæˆã™ã‚‹éš›ã«ã¯ä½œæˆè€…ã«å¯¾ã—ã¦</p><ul><li>åå‰</li><li>ã‚¢ã‚¤ã‚³ãƒ³</li><li>ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</li><li>å„ç¨®SNSã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¸ã®ãƒªãƒ³ã‚¯</li></ul><p>ã®ã‚ˆã†ã«ï¼Œã„ãã¤ã‹ã®æƒ…å ±ã‚’ä»˜ä¸ã—ãŸã„ã“ã¨ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ï¼ã“ã®ã‚ˆã†ãªæ©Ÿèƒ½ã¯ã€Œã‚³ãƒ³ãƒ†ãƒ³ãƒ„å‚ç…§ã€ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§å®Ÿç¾ã§ãã¾ã™ï¼</p><h2 id="å‚ç…§å…ˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ä½œæˆ"><a href="#å‚ç…§å…ˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ä½œæˆ" class="headerlink" title="å‚ç…§å…ˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ä½œæˆ"></a>å‚ç…§å…ˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ä½œæˆ</h2><p>ã¾ãšã¯å‚ç…§å…ˆã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ä½œæˆã—ã¾ã™ï¼ä»Šå›ã®ä¾‹ã§ã¯ä»¥ä¸‹ã®ç”»åƒã®ã‚ˆã†ãªãƒªã‚¹ãƒˆå½¢å¼ã®ã€Œãƒ–ãƒ­ã‚°ä½œæˆè€…ã€ã¨ã„ã†APIã‚’ä½œæˆã—ã¾ã—ãŸï¼</p><img src="/images/20200512/photo_20200512_12.png" style="border:solid 1px #000000"><p>ã€Œãƒ–ãƒ­ã‚°ä½œæˆè€…ã€ã«ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ä½œæˆã—ã¾ã™ï¼ã“ã®æœªæ¥å¤ªéƒã•ã‚“ã®å„ç¨®æƒ…å ±ã‚’ã‚’ãƒ–ãƒ­ã‚°è¨˜äº‹ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å´ã‹ã‚‰å–å¾—ã—ãŸã„ã¨æ€ã„ã¾ã™ï¼<br><img src="/images/20200512/photo_20200512_13.png" style="border:solid 1px #000000"><br>å‚ç…§ã•ã‚Œã‚‹å´ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä½œæˆã¯ã“ã‚Œã§å®Œäº†ã§ã™ï¼</p><h2 id="ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å‚ç…§ã®è¨­å®š"><a href="#ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å‚ç…§ã®è¨­å®š" class="headerlink" title="ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å‚ç…§ã®è¨­å®š"></a>ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å‚ç…§ã®è¨­å®š</h2><p>æ¬¡ã«ãƒ–ãƒ­ã‚°è¨˜äº‹ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å´ã‹ã‚‰å…ˆã»ã©ã®ã€Œãƒ–ãƒ­ã‚°ä½œæˆè€…ã€ã‚’å‚ç…§ã§ãã‚‹ã‚ˆã†ã«è¨­å®šã—ã¾ã™ï¼<br>writerã®ç¨®é¡ã‚’<strong>ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰</strong>ã‹ã‚‰<strong>ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å‚ç…§</strong>ã«å¤‰æ›´ã—ã¾ã™ï¼<br><img src="/images/20200512/photo_20200512_14.png" style="border:solid 1px #000000"></p><p>å‚ç…§ã—ãŸã„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«ã¯å…ˆã»ã©ã®ãƒ–ãƒ­ã‚°ä½œæˆè€…ã‚’é¸æŠã—ã¾ã™ï¼<br><img src="/images/20200512/photo_20200512_15.png"></p><p>ã€Œwriterã€ã®ç¨®é¡ã‚’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å‚ç…§ã«å¤‰æ›´ã—ãŸã‚‰ï¼Œã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†ã‹ã‚‰ã€Œä½œæˆè€…ã€ã‚’é¸æŠã—ã¾ã—ã‚‡ã†ï¼<br>å…ˆã»ã©ä½œæˆã—ãŸæœªæ¥å¤ªéƒã•ã‚“ãŒé¸æŠã§ãã‚‹ã¯ãšã§ã™ï¼<br><img src="/images/20200512/photo_20200512_16.png" style="border:solid 1px #000000"></p><p>ã€Œä½œæˆè€…ã€ã®é¸æŠãŒæ¸ˆã‚“ã ã‚‰ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’å…¬é–‹ã—ï¼Œå…ˆã»ã©ã®ã‚ˆã†ã«ã€ŒAPIãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€ã‹ã‚‰APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã—ã¦ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ç¢ºèªã‚’ã—ã¾ã—ã‚‡ã†ï¼ã€Œwriterã€ã«ã¯æŒ‡å®šã—ãŸã€Œãƒ–ãƒ­ã‚°ä½œæˆè€…ã€ãŒå¯¾å¿œã—ã¦ã„ã¾ã™ï¼<br><img src="/images/20200512/photo_20200512_17.png" style="border:solid 1px #000000"></p><h1 id="ãƒªã‚¹ãƒˆå½¢å¼ã®è¦ç´ ã‚’æŒãŸã›ã‚‹"><a href="#ãƒªã‚¹ãƒˆå½¢å¼ã®è¦ç´ ã‚’æŒãŸã›ã‚‹" class="headerlink" title="ãƒªã‚¹ãƒˆå½¢å¼ã®è¦ç´ ã‚’æŒãŸã›ã‚‹"></a>ãƒªã‚¹ãƒˆå½¢å¼ã®è¦ç´ ã‚’æŒãŸã›ã‚‹</h1><p>ãƒªã‚¹ãƒˆå½¢å¼ã§è¦ç´ ã‚’ä¸ãˆã‚ˆã†ã¨ã—ãŸéš›ã«ï¼Œã©ã®APIã‚’åˆ©ç”¨ã—ã¦å®Ÿç¾ã§ãã‚‹ã‹åˆ†ã‹ã‚‰ãšå°‘ã—ãƒãƒã‚Šã¾ã—ãŸï¼<br>ä¾‹ãˆã°AWS lambdaã«ã¤ã„ã¦ã®ãƒ–ãƒ­ã‚°è¨˜äº‹ã‚’ä½œæˆã—ãŸã¨ã—ã¦ï¼Œ</p><ul><li>AWS</li><li>lambda</li><li>golang</li><li>etcâ€¦</li></ul><p>ã®ã‚ˆã†ã«è¤‡æ•°ã®ã‚¿ã‚°ã‚’ä»˜ä¸ã•ã›ãŸã„ã“ã¨ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ï¼</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"tags":["AWS","lambda","golang"]</span><br></pre></td></tr></table></figure><p>ä¸Šè¨˜ã®ã‚ˆã†ã«ã‚¿ã‚°ã‚’ãƒªã‚¹ãƒˆå½¢å¼ã§ä½œæˆã§ãã‚Œã°ã„ã„ã§ã™ãŒï¼Œç¾åœ¨microCMSã§ã¯ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«ç›´æ¥ãƒªã‚¹ãƒˆã‚’ä¸ãˆã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ï¼<br>ãã“ã§ï¼Œ1ã¤ã®keyã«ãƒªã‚¹ãƒˆå½¢å¼ã®è¦ç´ ã‚’ä¸ãˆã‚‹ã«ã¯<strong>è¤‡æ•°ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å‚ç…§</strong>ã‚’ä½¿ç”¨ã—ã¾ã™ï¼<br>ãã‚Œã§ã¯å®Ÿéš›ã«è©¦ã—ã¦ã¿ã¾ã™ï¼</p><h2 id="å‚ç…§å…ˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ä½œæˆ-1"><a href="#å‚ç…§å…ˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ä½œæˆ-1" class="headerlink" title="å‚ç…§å…ˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ä½œæˆ"></a>å‚ç…§å…ˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ä½œæˆ</h2><p>ã¾ãšã¯ã‚¿ã‚°ä¸€è¦§ã‚’ç®¡ç†ã™ã‚‹ãƒªã‚¹ãƒˆå½¢å¼ã®ã€Œã‚¿ã‚°ã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ä½œæˆã—ã¾ã™ï¼ä½œæˆæ–¹æ³•ã¯ä»Šã¾ã§ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¨åŒæ§˜ã§ã™ï¼<br><img src="/images/20200512/photo_20200512_18.png" style="border:solid 1px #000000"></p><h2 id="ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å‚ç…§ã®è¨­å®š-1"><a href="#ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å‚ç…§ã®è¨­å®š-1" class="headerlink" title="ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å‚ç…§ã®è¨­å®š"></a>ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å‚ç…§ã®è¨­å®š</h2><p>ã€Œãƒ–ãƒ­ã‚°è¨˜äº‹ã€ã®APIã‚¹ã‚­ãƒ¼ãƒã«ã€Œtagã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ ã—ã¾ã™ï¼ç¨®é¡ã«ã¯<strong>è¤‡æ•°ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å‚ç…§</strong> -&gt; <strong>ã‚¿ã‚°</strong>ã‚’é¸æŠã—ã¾ã™ï¼<br><img src="/images/20200512/photo_20200512_19.png" style="border:solid 1px #000000"></p><p>æ¬¡ã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†ã§ã€Œã‚¿ã‚°ã€ã‚’ä»˜ä¸ã•ã›ã¾ã—ã‚‡ã†ï¼ä»Šã¾ã§ã¨ç•°ãªã‚Šè¤‡æ•°é¸æŠã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ï¼<br><img src="/images/20200512/photo_20200512_20.png" style="border:solid 1px #000000"></p><p>ã“ã‚Œã§æº–å‚™ã¯ã§ãã¾ã—ãŸï¼<br>å®Ÿéš›ã«APIãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’è©¦ã—ã¦ã¿ã‚‹ã¨ï¼Œãƒªã‚¹ãƒˆå½¢å¼ã§è¤‡æ•°ã‚¿ã‚°ã‚’æŒã£ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ï¼<br><img src="/images/20200512/photo_20200512_21.png" style="border:solid 1px #000000"><br>ã“ã‚Œã§ãƒªã‚¹ãƒˆå½¢å¼ã§è¤‡æ•°ã®è¦ç´ ã‚’ä¸ãˆã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸï¼</p><h1 id="Vue-jsã§ç”»é¢ã«ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã—ã¦ã¿ã‚‹"><a href="#Vue-jsã§ç”»é¢ã«ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã—ã¦ã¿ã‚‹" class="headerlink" title="Vue.jsã§ç”»é¢ã«ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã—ã¦ã¿ã‚‹"></a>Vue.jsã§ç”»é¢ã«ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã—ã¦ã¿ã‚‹</h1><p>æœ€å¾Œã¯ç°¡å˜ã«Vue.jsã§microCMSã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ç”»é¢ã«è¡¨ç¤ºã—ã¦ã¿ã¾ã™ï¼<br>ä»Šå›ã¯axiosã‚’åˆ©ç”¨ã—ã¦APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è¡Œã„ã¾ã™ï¼ä»¥ä¸‹ã®ã‚ˆã†ãªVue.jsã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆã—ã¾ã—ãŸï¼</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;contents.title&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span><br><span class="line">      è¨˜äº‹ä½œæˆè€…: &#123;&#123;contents.writer.name&#125;&#125;</span><br><span class="line">      æ—¥ä»˜: &#123;&#123;contents.date&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-html</span>=<span class="string">"contents.body"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">"axios"</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">  data() &#123;</span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">      contents: <span class="literal">null</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"><span class="javascript">  <span class="keyword">async</span> created() &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> res = <span class="keyword">await</span> axios.get(<span class="string">'https://future-blog-sample.microcms.io/api/v1/blog/l5cn1orii'</span>, &#123;</span></span><br><span class="line">        headers: &#123;</span><br><span class="line"><span class="javascript">          <span class="string">'X-API-KEY'</span>: <span class="string">'YOUR_API_KEY'</span></span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.contents = res.data;</span></span><br><span class="line"><span class="javascript">    &#125; <span class="keyword">catch</span> (err) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(err);</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ãƒ–ãƒ©ã‚¦ã‚¶ã§ç¢ºèªã—ã¦ã¿ã‚‹ã¨ç„¡äº‹è¡¨ç¤ºã•ã‚Œã¾ã—ãŸï¼ãƒªãƒƒãƒã‚¨ãƒ‡ã‚£ã‚¿ã§ä½œæˆã—ãŸhtmlå½¢å¼ã®æœ¬æ–‡ã‚‚ã¡ã‚ƒã‚“ã¨æ©Ÿèƒ½ã—ã¦ã„ã¾ã™ï¼<br>ã“ã‚Œã§ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨microCMSã®ç–é€šãŒã§ããŸã®ã§APIã§å–å¾—ã—ãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’åˆ©ç”¨ã—ã¦æ§˜ã€…ãªãƒšãƒ¼ã‚¸ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸï¼</p><img src="/images/20200512/photo_20200512_22.png" style="border:solid 1px #000000"><h1 id="ãŠã‚ã‚Šã«"><a href="#ãŠã‚ã‚Šã«" class="headerlink" title="ãŠã‚ã‚Šã«"></a>ãŠã‚ã‚Šã«</h1><p>ä»Šå›ã¯åˆã‚ã¦ã®CMSåˆ©ç”¨ã§microCMSã‚’è§¦ã£ã¦ã¿ãŸï¼ã¨ã„ã†ã“ã¨ã§æœ¬è¨˜äº‹ã‚’æ›¸ã‹ã›ã¦ã„ãŸã ãã¾ã—ãŸï¼<br>microCMSã¯ã™ã¹ã¦æ—¥æœ¬èªã§æ›¸ã‹ã‚Œã¦ãŠã‚Šï¼Œãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚„ãƒ–ãƒ­ã‚°è¨˜äº‹ã‚‚è±Šå¯Œã«ã‚ã‚‹ã®ã§ã™ã”ãå§‹ã‚ã‚„ã™ã‹ã£ãŸã§ã™ï¼ç‰¹ã«UIãŒã‚·ãƒ³ãƒ—ãƒ«ã§åˆ†ã‹ã‚Šã‚„ã™ãã¦ç´ æ™´ã‚‰ã—ã„ã¨æ€ã„ã¾ã—ãŸï¼APIãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§å³åº§ã«ä½œæˆã—ãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ç¢ºèªãŒã§ãã‚‹ã“ã¨ãªã©ç‰¹å¾´çš„ã ã£ãŸã‹ã¨æ€ã„ã¾ã™ï¼<br>å®Ÿéš›ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§microCMSã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ç¤¾å“¡ã®æ–¹æ›°ãï¼Œã‚µãƒãƒ¼ãƒˆã¯ã‹ãªã‚Šæ‰‹åšãï¼Œãƒãƒ£ãƒƒãƒˆã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚‚ã™ãå¸°ã£ã¦ãã‚‹ã‚ˆã†ã§ã™ï¼æ—¥æœ¬èªã§ã‚„ã‚Šå–ã‚Šã§ãï¼Œãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚„UIã‚‚æ—¥æœ¬èªãªã®ã§ï¼Œãã‚Œã ã‘ã§ã‚‚ãƒ—ãƒ©ã‚¹ãƒã‚¤ãƒ³ãƒˆã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ï¼</p><p>ã—ã‹ã—ï¼Œæ¯”è¼ƒçš„æ–°ã—ãå‡ºã¦ããŸã‚µãƒ¼ãƒ“ã‚¹ã®ãŸã‚ï¼Œç´°ã‹ãªæ©Ÿèƒ½ä¸è¶³ãŒã‚ã‚‹ã‚ˆã†ã«æ„Ÿã˜ã¾ã—ãŸï¼ä¾‹ãˆã°ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ï¼Œç·¨é›†å±¥æ­´ã®è¡¨ç¤ºãªã©ã¯ç¾åœ¨é–‹ç™ºä¸­ã¨ã®ã“ã¨ã§ã™ï¼<br><img src="/images/20200512/photo_20200512_23.png"></p><p>ã§ã™ãŒï¼Œé–‹ç™ºã‚¹ãƒ”ãƒ¼ãƒ‰ãŒã™ã”ãæ—©ã„ãŸã‚ä»Šå¾Œã©ã‚“ã©ã‚“ä½¿ã„ã‚„ã™ããªã£ã¦ã„ãã¨æ€ã„ã¾ã™ï¼æ©Ÿèƒ½æ›´æ–°ã®æ§˜å­ã¯<a href="https://microcms.io/blog/" target="_blank" rel="noopener">å…¬å¼ã®ãƒ–ãƒ­ã‚°</a>ã§è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼ã§ã™ã®ã§ä»Šå¾Œã‚‚æ³¨ç›®ã—ã¦ã„ããŸã„ã‚µãƒ¼ãƒ“ã‚¹ã®ï¼‘ã¤ã ã¨æ€ã„ã¾ã™ï¼</p><p>ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼</p><h1 id="å‚è€ƒè¨˜äº‹"><a href="#å‚è€ƒè¨˜äº‹" class="headerlink" title="å‚è€ƒè¨˜äº‹"></a>å‚è€ƒè¨˜äº‹</h1><p><a href="https://qiita.com/to4-yanagi/items/4e431b99b78401ef65ca" target="_blank" rel="noopener">https://qiita.com/to4-yanagi/items/4e431b99b78401ef65ca</a><br><a href="https://webkikaku.co.jp/homepage/blog/hpseisaku/htmlcss/headless-cms/" target="_blank" rel="noopener">https://webkikaku.co.jp/homepage/blog/hpseisaku/htmlcss/headless-cms/</a><br><a href="https://microcms.io/blog/lets-relation/" target="_blank" rel="noopener">https://microcms.io/blog/lets-relation/</a></p><hr><p>é–¢é€£è¨˜äº‹: </p><ul><li><a href="/tags/%E3%83%95%E3%83%AD%E3%83%B3%E3%83%88%E3%82%A8%E3%83%B3%E3%83%89%E8%A8%98%E4%BA%8B%E9%9B%86%E4%B8%AD%E6%8A%95%E7%A8%BF/">ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è¨˜äº‹é›†ä¸­æŠ•ç¨¿</a></li><li><a href="/articles/20200318/">ã€Figmaã€‘ã‚’ä½¿ã£ã¦ãƒãƒ¼ãƒ ã§UI/UXè¨­è¨ˆã™ã‚‹ã¨ã„ã„ã“ã¨</a></li><li><a href="/articles/20190612/">TypeScriptæ•™è‚²ç”¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å…¬é–‹ã®ãŠçŸ¥ã‚‰ã›</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h1&gt;&lt;p&gt;ã¯ã˜ã‚ã¾ã—ã¦ï¼TIG DXãƒãƒ¼ãƒ ã€€ã‚¢ãƒ«ãƒã‚¤ã‚¿ãƒ¼ã®ä¸‰æ‘ã§ã™ï¼&lt;/p&gt;
&lt;p&gt;æ™®æ®µã¯å¤§å­¦é™¢ç”Ÿã‚’ã—ã¦ãŠã‚Šãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã«ã¯ &lt;a h
      
    
    </summary>
    
      <category term="Programming" scheme="https://future-architect.github.io/categories/Programming/"/>
    
    
      <category term="Frontend" scheme="https://future-architect.github.io/tags/Frontend/"/>
    
      <category term="Vue.js" scheme="https://future-architect.github.io/tags/Vue-js/"/>
    
      <category term="ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è¨˜äº‹é›†ä¸­æŠ•ç¨¿" scheme="https://future-architect.github.io/tags/%E3%83%95%E3%83%AD%E3%83%B3%E3%83%88%E3%82%A8%E3%83%B3%E3%83%89%E8%A8%98%E4%BA%8B%E9%9B%86%E4%B8%AD%E6%8A%95%E7%A8%BF/"/>
    
      <category term="HeadlessCMS" scheme="https://future-architect.github.io/tags/HeadlessCMS/"/>
    
  </entry>
  
  <entry>
    <title>PJã§UIãƒ‡ã‚¶ã‚¤ãƒ³ã«Atomic Designã‚’å°å…¥ã—ãŸã‚‰ã©ã†ã ã£ãŸã®ã‹</title>
    <link href="https://future-architect.github.io/articles/20200511/"/>
    <id>https://future-architect.github.io/articles/20200511/</id>
    <published>2020-05-10T23:43:07.000Z</published>
    <updated>2020-05-12T00:54:35.428Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä»Šå›ã¯UIã¨å°‘ã—UXã®ãŠè©±ã§ã™"><a href="#ä»Šå›ã¯UIã¨å°‘ã—UXã®ãŠè©±ã§ã™" class="headerlink" title="ä»Šå›ã¯UIã¨å°‘ã—UXã®ãŠè©±ã§ã™"></a>ä»Šå›ã¯UIã¨å°‘ã—UXã®ãŠè©±ã§ã™</h1><p>ã“ã‚“ã«ã¡ã¯ã€‚ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã§UXã®å°‚é–€å®¶ã‚’ã•ã›ã¦ã„ãŸã ã„ã¦ã„ã‚‹å¹³å·ã¨ã„ã„ã¾ã™ã€‚</p><p>ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ€è¡“ãƒ–ãƒ­ã‚°ã§ã¯ã€<a href="/articles/20200318/">ã€Figmaã€‘ã‚’ä½¿ã£ã¦ãƒãƒ¼ãƒ ã§UI/UXè¨­è¨ˆã™ã‚‹ã¨ã„ã„ã“ã¨</a> ã®è¨˜äº‹ã‚’æ›¸ã„ãŸä¹…ä¿ã•ã‚“ã¨åŒã˜ãƒãƒ¼ãƒ ã«æ‰€å±ã—ã¦ã„ã¾ã™ã€‚</p><p>PJã§ã¯<strong>æœ€é«˜ã®é¡§å®¢æ¥­å‹™</strong>ã‚’ç›®æ¨™ã«ã€æ¥­å‹™ã€UXã€UIã®è¨­è¨ˆã¨ã€ã‚¢ãƒ—ãƒªé–‹ç™ºã‚’ã•ã›ã¦ã„ãŸã ã„ã¦ã„ã¾ã™ã€‚<br>ä»Šå›ã¯PJã®ç¾å ´ã§UXã¨UIã®ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’é€šã—ã¦ã€Atomic Designã®å°å…¥ã¯ã©ã®ã‚ˆã†ãªçµæœã‚’ç”Ÿã‚“ã ã®ã‹ã€Atomic Designå°å…¥ã«éš›ã—ã¦ã®èª²é¡Œã‚„å–ã‚Šçµ„ã¿æ–¹ã®ã‚³ãƒ„ãªã‚“ã‹ã‚’ãŠä¼ãˆã§ãã‚Œã°ã¨æ€ã„ã¾ã™ã€‚</p><h2 id="Atomic-Design"><a href="#Atomic-Design" class="headerlink" title="Atomic Design"></a>Atomic Design</h2><p>Atomic Designã¯ã€Webãƒšãƒ¼ã‚¸ã‚„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã™ã‚‹éš›ã«ã€UIã®æœ€å°è¦ç´ ï¼ˆåŸå­ï¼‰ã‹ã‚‰ã®çµ„ã¿åˆã‚ã›ã§æ§‹ç¯‰ã—ã¦ã„ãè€ƒãˆæ–¹ã§ã™ã€‚Atomic Designã®æå”±è€…ã¯HTMLã‚¿ã‚°ã‚’å…ƒç´ å‘¨æœŸè¡¨ã«è¦‹ç«‹ã¦ã¦ãã‚Œã‚’åŸå­ã¨è¡¨ç¾ã—ã¦ãŠã‚Šã€ã¨ã¦ã‚‚ãŠã‚‚ã—ã‚ã„ã§ã™ã€‚</p><p>è©³ã—ãã¯<a href="https://atomicdesign.bradfrost.com/" target="_blank" rel="noopener">Atomic Designæœ¬å®¶</a>ã‚„Googleå…ˆç”ŸãŒå„ªã—ãæ•™ãˆã¦ãã‚Œã¾ã™ã€‚</p><p>ãã‚Œã§ã¯æ—©é€ŸAtomic Designã‚’å°å…¥ã—ãŸPJã®è©±ã«ã†ã¤ã‚ŠãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><h1 id="Atomic-Designã¯ä½•ã‚’æœŸå¾…ã—ã¦å°å…¥ã—ãŸã®ã‹"><a href="#Atomic-Designã¯ä½•ã‚’æœŸå¾…ã—ã¦å°å…¥ã—ãŸã®ã‹" class="headerlink" title="Atomic Designã¯ä½•ã‚’æœŸå¾…ã—ã¦å°å…¥ã—ãŸã®ã‹"></a>Atomic Designã¯ä½•ã‚’æœŸå¾…ã—ã¦å°å…¥ã—ãŸã®ã‹</h1><p>2016å¹´ã«å‚åŠ ã—ãŸãƒãƒ¼ãƒ ã§ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰ã®PJãŒç«‹ã¡ä¸ŠãŒã‚Šã¾ã—ãŸã€‚</p><p>ãã®PJã§Atomic Designã¯å°å…¥ã•ã‚ŒãŸã®ã§ã™ãŒã€PJã§ã¯æœ€åˆã‹ã‚‰Atomic Designã‚’å°å…¥ã—ãŸã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã•ãˆå°å…¥ã›ãšPowerPointã§ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’ã—ã¦ã„ãŸé–‹å§‹å½“åˆã‹ã‚‰ã€PJã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æ´»å‹•ã‚’é€²åŒ–ã•ã›ã¦ã„ãã¾ã—ãŸã€‚</p><ol><li>PJãƒ¡ãƒ³ãƒãƒ¼å…¨å“¡ãŒä½¿ãˆã‚‹PowerPointã§ç”»é¢ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’ã™ã‚‹</li><li>InVisionã‚’å°å…¥ã—ãƒ‡ã‚¶ã‚¤ãƒ³ã‚³ã‚¹ãƒˆä½ä¸‹ã¨åŠ¹ç‡ã‚’å‘ä¸Š</li><li>Figmaã«ä¹—ã‚Šæ›ãˆ</li><li>Figmaã®componentæ©Ÿèƒ½ã®å¼·åŠ›ã•ã«æ°—ã¥ã<strong>Atomic Designã‚’å°å…¥</strong></li><li>UIãƒ‡ã‚¶ã‚¤ãƒ³ãƒãƒªã‚·ãƒ¼ã®ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—</li><li>ç¤¾å†…æ¨™æº–ã«å‘ã‘ã¦Figma componentã®æ±åŒ–ã¨UIãƒ‡ã‚¶ã‚¤ãƒ³ãƒãƒªã‚·ãƒ¼ã®æ±åŒ–</li></ol><p>ç¾åœ¨ã¯ã‚ˆã‚Šåºƒãç¤¾å†…å…¨ä½“ã®UXæ”¹å–„ã®å–ã‚Šçµ„ã¿ã‚’ã™ã¹ãæ—¥ã€…ã‚³ãƒ„ã‚³ãƒ„ã¨ä»•äº‹ã‚„å‹‰å¼·ã‚’ã—ã¦ã„ã¾ã™ã€‚</p><h2 id="çµ±ä¸€ã§ããªã„UXã€UIã¨ã„ã†èª²é¡Œ"><a href="#çµ±ä¸€ã§ããªã„UXã€UIã¨ã„ã†èª²é¡Œ" class="headerlink" title="çµ±ä¸€ã§ããªã„UXã€UIã¨ã„ã†èª²é¡Œ"></a>çµ±ä¸€ã§ããªã„UXã€UIã¨ã„ã†èª²é¡Œ</h2><p>ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰ã§ã¯å¤šãã®ç”»é¢ã‚’å¤šãã®ãƒ¡ãƒ³ãƒãƒ¼ã§è¨­è¨ˆã—ã€å®Ÿè£…ã—ã¦ã„ãã¾ã™ã€‚</p><p>2016å¹´ã‹ã‚‰ç¾åœ¨ã«è‡³ã‚‹ã¾ã§ã€è¤‡æ•°å›ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã¦ãã¾ã—ãŸã€‚2016å¹´ã®è¨­è¨ˆå½“åˆã‹ã‚‰ã€UIã‚„ãƒ‡ã‚¶ã‚¤ãƒ³ã®çµ±ä¸€æ€§ã«å¯¾ã—ã¦ãªã‹ãªã‹æº€è¶³ã®ã„ãçµæœãŒæ®‹ã›ã¦ã„ã¾ã›ã‚“ã§ã—ãŸã€‚</p><ul><li>UIãƒ‡ã‚¶ã‚¤ãƒ³ã«çµ±ä¸€æ€§ãŒãªããƒ¦ãƒ¼ã‚¶ãƒ¼è² è·ãŒå¢—ãˆã‚‹<ul><li>ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®ä»•æ–¹ãŒç”»é¢ã«ã‚ˆã£ã¦ç•°ãªã‚‹</li><li>åˆ©ç”¨ã™ã‚‹ã‚¢ã‚¤ã‚³ãƒ³ãŒç•°ãªã£ãŸã‚Šã‚µã‚¤ã‚ºãŒç”»é¢æ¯ã«é•ã†</li><li>æ–‡å­—è‰²ãŒçµ±ä¸€ã§ãã¦ã„ãªã„</li><li>åŒã˜è¦ç´ ã®é¸æŠãŒã‚ã£ã¡ã§ã¯ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã€ã“ã£ã¡ã§ã¯ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³</li><li>etcâ€¦</li></ul></li><li>ç„¡ç§©åºãªUIãƒ‡ã‚¶ã‚¤ãƒ³ã«èµ·å› ã™ã‚‹ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®è‚¥å¤§åŒ–<ul><li>ä¸è¦ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆ</li><li>Sassã®å¤‰æ•°ã‚’ä½¿ã‚ãšã«è‰²ã‚„ã‚µã‚¤ã‚ºã‚’ç›´æŒ‡å®š</li></ul></li></ul><p>ç‰¹ã«UIãƒ‡ã‚¶ã‚¤ãƒ³ã®çµ±ä¸€æ€§ã®å•é¡Œã¯å¤§å°æŒ™ã’ã¦ã„ã‘ã°æš‡ãŒãªã„ãã‚‰ã„ã§ã™ã€‚</p><p>ãã®æ™‚ã«å‡ºä¼šã£ãŸã®ãŒAtomic Designã¨ã„ã†æ–¹æ³•è«–ã§ã—ãŸã€‚</p><h2 id="Atomic-Designã‚’çŸ¥ã‚Šã€å°å…¥ã™ã‚‹"><a href="#Atomic-Designã‚’çŸ¥ã‚Šã€å°å…¥ã™ã‚‹" class="headerlink" title="Atomic Designã‚’çŸ¥ã‚Šã€å°å…¥ã™ã‚‹"></a>Atomic Designã‚’çŸ¥ã‚Šã€å°å…¥ã™ã‚‹</h2><p>Atomic Designã¨ã„ã†è¨€è‘‰ã‚’çŸ¥ã‚Šã€èª¿ã¹å§‹ã‚ã¾ã—ãŸã€‚</p><p>å®Ÿéš›ã«ä½¿ã£ã¦ã¿ãªã„ã¨ã‚ã‹ã‚“ãªã„ãªãã¨æ€ã„ã€ã¨ã‚Šã‚ãˆãšæ—¢å­˜ã®æ‰‹é ƒãªç”»é¢ã‚’é¡Œæã«æ–¹æ³•è«–ã‚’é©ç”¨ãƒ»æ¤œè¨¼ã—ã¾ã—ãŸã€‚æ¤œè¨¼ã‚’é€²ã‚ã¦ã„ãéç¨‹ã§ã€æ”¹ã‚ã¦UIã®æ§‹é€ ã‚’åˆ†è§£ã—ã€å†æ§‹ç¯‰ã™ã‚‹ã®ãŒç°¡å˜ã ã£ãŸãªãã¨ã„ã†å°è±¡ã‚’è¦šãˆã¦ã„ã¾ã™ã€‚ç”Ÿä½“ã€åˆ†å­ã€åŸå­ã¨åˆ†è§£ã—ã¦ã„ãã€æœ€å°ç²’åº¦ã®UIï¼ˆåŸå­ï¼‰ã«å¯¾ã—ã€ã‚ˆã‚Šç†è§£ã‚’æ·±ã‚ã€ãã®UIãŒåˆ©ç”¨ã•ã‚Œã‚‹ç†ç”±ã‚’è€ƒãˆã‚‹ã€‚ãã—ã¦ã€åŸå­ã‚’é¸æŠã—ãªãŠã—ã€åˆ†å­ã€ç”Ÿä½“ã‚’å†æ§‹ç¯‰ã—ã¦ãã®çµæœã‚’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã„ã†å½¢ã§è¡¨ç¾ã—ãªãŠã™ã€‚ã“ã‚Œã«ã‚ˆã‚ŠåŸå­ã¨ã„ã†å˜ä½ã§UXã¯æ•´ç†ã•ã‚Œã€ãã®çµ„ã¿åˆã‚ã›ã§æ§‹æˆã•ã‚Œã‚‹UIã®UXã‚‚æ•´ç†ã•ã‚Œçµ±ä¸€ã•ã‚Œã‚‹ã®ã§ã¯ãªã„ã‹ã€ã¨ã„ã†æœŸå¾…æ„Ÿã‚’æŠ±ã„ãŸã®ã§ã™ã€‚</p><p>ç§ã¯è‡ªåˆ†è‡ªèº«ãŒãƒ‡ã‚¶ã‚¤ãƒ³ã‚’ã™ã‚‹å ´åˆã¯ã€UIã®åˆ†è§£ã¨å†æ§‹ç¯‰ã¯é ­ã®ä¸­ã®ä½œæ¥­ã¨ã—ã¦ã‚„ã£ã¦ã„ã¾ã—ãŸãŒã€PJã«ã¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ç”»é¢è¨­è¨ˆã‚’PJãƒ¡ãƒ³ãƒãƒ¼ã«è¡Œã£ã¦ã‚‚ã‚‰ã†å‰æã ã¨ã€Atomic Designã®åŸå­ã€åˆ†å­ç­‰ã®æ•´ç†æ–¹æ³•ã¯éå¸¸ã«æœ‰ç”¨ã ã¨è€ƒãˆã¾ã—ãŸã€‚ä»Šã¾ã§è‡ªåˆ†ã®ä¸­ã§ãªã‚“ã¨ãªãã‚„ã£ã¦ã„ãŸUIã®é¸æŠã‚„æ§‹ç¯‰ã‚’ã€PJãƒ¡ãƒ³ãƒãƒ¼ã«ã‚‚çš„ç¢ºã«ã‚„ã£ã¦ã‚‚ã‚‰ãˆã‚‹ã®ã§ã¯ãªã„ã‹ã¨ã€‚ãã—ã¦ã€è‡ªåˆ†ã®ä¸­ã§ç„¡ç§©åºã«è»¢ãŒã£ã¦ã„ãŸUIãŒæ•´ç†æ•´é “ã§ãã‚‹ã®ã§ã¯ãªã„ã‹ã¨ã€‚ã¾ãŸã€Figmaã®Componentã¨ã„ã†æ©Ÿèƒ½ãŒã“ã®Atomic Designã«ã‚ˆã‚‹UIãƒ‡ã‚¶ã‚¤ãƒ³ã¨UIã®çµ±ä¸€ã‚’å¾ŒæŠ¼ã—ã§ãã‚‹ã¨è€ƒãˆã€Atomic Designã‚’å°å…¥ã—ã¾ã—ãŸã€‚</p><h1 id="å°å…¥ã—ã¦ã¿ã¦ã©ã†ã ã£ãŸã‹"><a href="#å°å…¥ã—ã¦ã¿ã¦ã©ã†ã ã£ãŸã‹" class="headerlink" title="å°å…¥ã—ã¦ã¿ã¦ã©ã†ã ã£ãŸã‹"></a>å°å…¥ã—ã¦ã¿ã¦ã©ã†ã ã£ãŸã‹</h1><h2 id="UIãƒ‡ã‚¶ã‚¤ãƒ³ã®å‰Šæ¸›"><a href="#UIãƒ‡ã‚¶ã‚¤ãƒ³ã®å‰Šæ¸›" class="headerlink" title="UIãƒ‡ã‚¶ã‚¤ãƒ³ã®å‰Šæ¸›"></a>UIãƒ‡ã‚¶ã‚¤ãƒ³ã®å‰Šæ¸›</h2><p>ç§ãŒå‚åŠ ã—ã¦ã„ãŸPJã§ã®æ¯”è¼ƒã«ãªã‚Šã¾ã™ãŒã€UIãƒ‡ã‚¶ã‚¤ãƒ³ã®ç„¡é§„ãŒå‰Šæ¸›ã§ãã¾ã—ãŸã€‚å®Ÿéš›ã«ä½œæˆã—ãŸUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ•°ã‚‚å°‘ãªããªã£ã¦ã„ã‚‹ã¨æ„Ÿã˜ã¦ã„ã¾ã™ã€‚ã¾ãŸã€å¾“æ¥ã¯æ©Ÿèƒ½ã¨è¦‹ãŸç›®ã¨ã„ã†å˜ä½ã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã—ã¦ã„ã¾ã—ãŸãŒã€<strong>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸æä¾›ã™ã‚‹UIã®åˆ©ç”¨ç”¨é€”ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæŠ±ããƒ‡ãƒ¼ã‚¿ã¸ã®å°è±¡ã¨ã„ã†å˜ä½</strong>ã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p><p>ä¾‹ãˆã°ã€Œé¸æŠã™ã‚‹ã€ã¨ã„ã†UIã¯è¤‡æ•°å­˜åœ¨ã—ã¾ã™ãŒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå¯¾è±¡ãƒ‡ãƒ¼ã‚¿ã«å¯¾ã—ã©ã®ã‚ˆã†ãªå°è±¡ã‚’æŒã£ã¦ã„ã‚‹ã‹ã€ã©ã†ã„ã†é¸æŠãªã®ã‹ã§ã€é©ç”¨ã™ã‚‹UIãŒç•°ãªã‚Šã¾ã™ã€‚ç§ã¯ã€åŸå­ã¯ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ãªãƒ‡ãƒ¼ã‚¿ã®åˆ©ç”¨æ–¹æ³•ã®æä¾›ã¨ã„ã†å°è±¡ã‚’æŒã£ã¦ã„ã¾ã™ã€‚ãã—ã¦ã€åˆ†å­ã¯åŸå­ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€ã‚ˆã‚Šé«˜åº¦ãªãƒ‡ãƒ¼ã‚¿ã®åˆ©ç”¨æ–¹æ³•ã‚’æä¾›ã§ãã‚‹ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚ãã®ãŸã‚ã€UIã‚’åˆ†è§£ã™ã‚‹ã“ã¨ã§åˆ†å­ã€åŸå­ã¨ã„ã†ç²’åº¦ã«ãªã£ãŸã¨ãã«è‡ªãšã¨é©åˆã™ã‚‹UIãŒé¸æŠã•ã‚Œã€ç„¡é§„ãªUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä½œæˆæŠ‘æ­¢ã«ã¤ãªãŒã£ãŸã¨è€ƒãˆã¦ã„ã¾ã™ã€‚</p><p>UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯æ¸›ã‚Œã°æ¸›ã‚‹ã»ã©è‰¯ã„ã¨ã„ã†ã‚‚ã®ã§ã‚‚ã‚ã‚Šã¾ã›ã‚“ãŒã€å°ã•ã„UXã®ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ¸›ã‚‰ã™ã“ã¨ã«ã‚ˆã£ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å¯¾ã—ã¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®åˆ©ç”¨è² è·ã‚’ä¸‹ã’ã‚‹åŠ¹æœã¯ã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><img src="/images/20200511/photo_20200511_01.png"><h2 id="UIã®ä½“ç³»çš„ãªç®¡ç†"><a href="#UIã®ä½“ç³»çš„ãªç®¡ç†" class="headerlink" title="UIã®ä½“ç³»çš„ãªç®¡ç†"></a>UIã®ä½“ç³»çš„ãªç®¡ç†</h2><p>ä»Šã¾ã§ã¯UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã„ã†åå‰ã§ä¸€æ‹¬ç®¡ç†ã—ã¦ã„ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«å¯¾ã—ã¦ã€åŸå­ã€åˆ†å­ã€ç”Ÿä½“ã¨ã„ã†å˜ä½ã‚’ä¸ãˆã‚‹ã“ã¨ã«ãªã‚Šã¾ã—ãŸã€‚ãã‚Œã«ã‚ˆã‚Šã€åŸå­ã€åˆ†å­ã¯å†åˆ©ç”¨æ€§ãŒéå¸¸ã«é«˜ãã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ç„¡é§„ã‚‚å°‘ãªããªã‚Šã¾ã™ã€‚</p><p>UIã®æ©Ÿèƒ½æ€§ã§ã¯ãªãåˆ©ç”¨æ–¹æ³•ã¨ã„ã†å˜ä½ãŒã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåŒ–ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã€ç…©é›‘ã«ãªã‚ŠãŒã¡ãªCSSã‚‚ã‚¹ãƒƒã‚­ãƒªã—ã¦ã„ãã¨æ€ã„ã¾ã™ã€‚ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒæˆé•·ã™ã‚‹ã«ã¤ã‚Œã€è¨€èªä»•æ§˜çš„ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã§ç®¡ç†ã§ããªã„CSSã¯ã©ã‚“ã©ã‚“ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚³ã‚¹ãƒˆãŒä¸ŠãŒã£ã¦ã„ãã¾ã™ãŒã€BEMã¨Atomic Designã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã‹ãªã‚Šãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚³ã‚¹ãƒˆã‚’ä½æ¸›å¯èƒ½ã«ãªã‚Šã¾ã—ãŸã€‚å€‹äººçš„ã«ã¯CSSã®ãƒ¡ãƒ³ãƒ†ã‚³ã‚¹ãƒˆå‰Šæ¸›ãŒä¸€ç•ªã‚³ã‚¹ãƒˆãƒ¡ãƒªãƒƒãƒˆã‚’æ„Ÿã˜ã¦ã„ã¾ã™ã€‚</p><img src="/images/20200511/photo_20200511_02.png"><h2 id="åŸå­å¤šã™ãå•é¡Œã®ç™ºç”Ÿ"><a href="#åŸå­å¤šã™ãå•é¡Œã®ç™ºç”Ÿ" class="headerlink" title="åŸå­å¤šã™ãå•é¡Œã®ç™ºç”Ÿ"></a>åŸå­å¤šã™ãå•é¡Œã®ç™ºç”Ÿ</h2><p>èƒŒæ™¯è‰²ã®é•ã†ãƒ‘ãƒãƒ«ã‚„ã€è¡¨ç¤ºã™ã‚‹ãƒ©ãƒ™ãƒ«ãƒ†ã‚­ã‚¹ãƒˆã®è‰²ã¨ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã®ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã§Figma componentã‚’ä½œã£ã¦ã„ã¾ã—ãŸã€‚ã“ã‚Œã¯ã‚„ã‚Šã™ããªã®ã§åçœç‚¹ã§ã™ã€‚Figmaã§ã¯ã‚¹ã‚¿ã‚¤ãƒ«ãƒ«ãƒ¼ãƒ«ã‚‚ä½œã‚Œã‚‹ã®ã§ã€éåº¦ãªComponentä½œæˆã¯è¾›ã„ã¨ã„ã†å­¦ã³ã«ãªã‚Šã¾ã—ãŸã€‚ãã‚Œã«ã€Componentã‚’å¢—ã‚„ã™ã¨Figmaã®ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚é–“ã‚‚é•·ããªã‚Šã¾ã™ã—ã€é©åº¦ãªç®¡ç†ãŒä¸€ç•ªã§ã™ã€‚</p><h2 id="ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚·ãƒŠãƒªã‚ªãƒ‡ã‚¶ã‚¤ãƒ³ã«ã¯Atomic-Designã¯åˆ©ç”¨ã—ãªã„"><a href="#ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚·ãƒŠãƒªã‚ªãƒ‡ã‚¶ã‚¤ãƒ³ã«ã¯Atomic-Designã¯åˆ©ç”¨ã—ãªã„" class="headerlink" title="ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚·ãƒŠãƒªã‚ªãƒ‡ã‚¶ã‚¤ãƒ³ã«ã¯Atomic Designã¯åˆ©ç”¨ã—ãªã„"></a>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚·ãƒŠãƒªã‚ªãƒ‡ã‚¶ã‚¤ãƒ³ã«ã¯Atomic Designã¯åˆ©ç”¨ã—ãªã„</h2><p>Atomic Designã¯ã‚ãã¾ã§UXãƒ»UIã®åˆ†è§£ã¨å†æ§‹ç¯‰ã€ãã—ã¦UIã®ä½“ç³»çš„ãªç®¡ç†ã‚’ç›®çš„ã¨ã—ã¦åˆ©ç”¨ã—ã¾ã—ãŸã€‚ãã®ãŸã‚ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åˆ©ç”¨ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚·ãƒŠãƒªã‚ªã«å¯„ä¸ã™ã‚‹ã‚‚ã®ã¨ã—ã¦ã¯åˆ©ç”¨ã—ã¦ã„ã¾ã›ã‚“ã€‚ç§ã¯Atomic Designã¯UIã®é™çš„ãªè¨­è¨ˆæ‰‹æ³•ã§ã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚UMLã§ã¯å‹•çš„ãªè¨­è¨ˆæ–¹æ³•ã¨ã—ã¦ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£å›³ã‚„ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ç­‰ã‚’ç”¨ã„ã€é™çš„ãªè¨­è¨ˆæ–¹æ³•ã¨ã—ã¦ã‚¯ãƒ©ã‚¹å›³ç­‰ã‚’ç”¨ã„ã¾ã™ãŒã€Atomic Designã¯é™çš„ãªè¨­è¨ˆæ–¹æ³•ã«è©²å½“ã™ã‚‹ã‚“ã˜ã‚ƒãªã„ã‹ãªãã¨ã„ã†å°è±¡ã§ã™ã€‚</p><h1 id="PJã§Atomic-Designã‚’å°å…¥ã™ã‚‹ã¨ãã®ã‚³ãƒ„"><a href="#PJã§Atomic-Designã‚’å°å…¥ã™ã‚‹ã¨ãã®ã‚³ãƒ„" class="headerlink" title="PJã§Atomic Designã‚’å°å…¥ã™ã‚‹ã¨ãã®ã‚³ãƒ„"></a>PJã§Atomic Designã‚’å°å…¥ã™ã‚‹ã¨ãã®ã‚³ãƒ„</h1><p>ã‚³ãƒ„ã¨ã„ã†ã‚ˆã‚Šã‚‚èª²é¡Œã«å¯¾ã™ã‚‹ã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ãƒ‡ã‚£ã®ã‚ˆã†ãªã‚‚ã®ã§ã™ãŒã¾ã¨ã‚ã¦ã¿ã¾ã—ãŸã€‚</p><h2 id="ç”Ÿä½“ã€ã‚‚ã—ãã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãã‚‰ã„ã®å¤§ãã•ã‹ã‚‰ä½œã‚Šå§‹ã‚ã‚‹"><a href="#ç”Ÿä½“ã€ã‚‚ã—ãã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãã‚‰ã„ã®å¤§ãã•ã‹ã‚‰ä½œã‚Šå§‹ã‚ã‚‹" class="headerlink" title="ç”Ÿä½“ã€ã‚‚ã—ãã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãã‚‰ã„ã®å¤§ãã•ã‹ã‚‰ä½œã‚Šå§‹ã‚ã‚‹"></a>ç”Ÿä½“ã€ã‚‚ã—ãã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãã‚‰ã„ã®å¤§ãã•ã‹ã‚‰ä½œã‚Šå§‹ã‚ã‚‹</h2><p>ä½œã‚ŠãŸã„UIã‚’ã–ã£ãã‚Šè‡ªç”±ã«è¡¨ç¾ã—ã¦ã¿ã‚‹ã“ã¨ã‹ã‚‰å§‹ã‚ã¾ã™ã€‚ãã“ã‹ã‚‰ã€æ§‹æˆè¦ç´ ã¨ã—ã¦å¿…è¦ãªç”Ÿä½“ã€åˆ†å­ãƒ»åŸå­ã‚’é¸æŠã—ã¾ã™ã€‚ãã†ã™ã‚‹ã¨ã€Figmaç­‰ã®ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ä¸Šã«ã™ã§ã«å­˜åœ¨ã™ã‚‹åŒä¸€ç›®çš„ã®UIã‚’é¸æŠã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚è©²å½“ã™ã‚‹UIãŒå­˜åœ¨ã—ãªã‘ã‚Œã°åŸå­ã€åˆ†å­ã€ç”Ÿä½“ã‚’è¶³ã—ã¦ã„ãã¾ã™ã€‚è‡³ã£ã¦æ™®é€šã®é€²ã‚æ–¹ãªã®ã§ã™ãŒã€Atomic Designã¯æœ€å°ç²’åº¦ãŒåŸå­ã§ã‚ã‚‹ãŸã‚ã€åŸå­ã‚’ä½œã‚‹ã¨ã“ã‚ã‹ã‚‰å§‹ã‚ã‚‹ã‚±ãƒ¼ã‚¹ã‚‚ã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><p>ã—ã‹ã—ã€ã„ããªã‚ŠåŸå­ã‹ã‚‰ä½œã‚Šã ã™ã®ã¯çµŒé¨“ä¸Šã€åŠ¹ç‡ãŒæ‚ªã„ã¨ã„ã†å°è±¡ã§ã™ã€‚</p><h2 id="UIã§å–ã‚Šæ‰±ã†ãƒ‡ãƒ¼ã‚¿ã®å°è±¡ã¨åŸå­ã®ç‰¹å¾´ã‚’æ‰ãˆã‚‹"><a href="#UIã§å–ã‚Šæ‰±ã†ãƒ‡ãƒ¼ã‚¿ã®å°è±¡ã¨åŸå­ã®ç‰¹å¾´ã‚’æ‰ãˆã‚‹" class="headerlink" title="UIã§å–ã‚Šæ‰±ã†ãƒ‡ãƒ¼ã‚¿ã®å°è±¡ã¨åŸå­ã®ç‰¹å¾´ã‚’æ‰ãˆã‚‹"></a>UIã§å–ã‚Šæ‰±ã†ãƒ‡ãƒ¼ã‚¿ã®å°è±¡ã¨åŸå­ã®ç‰¹å¾´ã‚’æ‰ãˆã‚‹</h2><p>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«UXã‚’ä¸ãˆã‚‹æœ€å°ç²’åº¦ã®UIã¯åŸå­ã¨ã—ã¦è¡¨ç¾ã•ã‚Œã¦ã„ã¾ã™ã€‚ä¸€æ–¹ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ‡ãƒ¼ã‚¿ã«æŒã¤å°è±¡ã‚’æ‰ãˆã‚‹ã“ã¨ã§ã©ã®ã‚ˆã†ã«æ“ä½œã—ãŸã„ã®ã‹ãŒã‚ã‹ã‚Šã¾ã™ã€‚<br>ã“ã®2ã¤ã‚’çµã³ã¤ã‘ã‚‹éš›ã«ã€ç”Ÿä½“ã®ç²’åº¦ã§ç”Ÿã¿å‡ºã›ã‚‹ãƒ‡ãƒ¼ã‚¿ã®çµæœãŒä¸€è‡´ã—ã¦ã„ã¦ã‚‚UIãŒé©ã—ã¦ã„ã‚‹ã‹ã¯åˆ¥ã®è©±ã§ã™ã€‚ä¾‹ãˆã°ã€è¡Œåˆ—ãƒ‡ãƒ¼ã‚¿ã«å¯¾ã—ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ä¸€æ‹¬æ“ä½œã—ãŸã„ã®ã‹ã€åå¾©æ“ä½œã—ãŸã„ã®ã‹ã€‚åå¾©æ“ä½œã§ã‚ã‚Œã°ã€åˆ—å˜ä½æ“ä½œãªã®ã‹ã€è¡Œå˜ä½æ“ä½œãªã®ã‹ã€ã„ã£ãŸå…·åˆã§ã™ã€‚</p><p>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è¡Œåˆ—æ“ä½œã‚’å„„åŠ«ã«æ„Ÿã˜ã¦ã„ã‚‹å ´åˆã€ãã‚Œã¯ãªãœãªã®ã‹ã€‚æ“ä½œæ•°ãŒå¤šã„ãŸã‚ãªã®ã‹ã€æ“ä½œã®ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚’å‡ºã›ãªã„ã§ã„ã‚‹ã®ã‹ã€‚ãƒ‡ãƒ¼ã‚¿ã¸ã®å°è±¡ã«é©åˆã™ã‚‹UIã‚’åŸå­ã®å˜ä½ã§ãƒãƒƒãƒã•ã›ã¦ã„ãã“ã¨ãŒé‡è¦ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚</p><h2 id="åŸå­ã‹åˆ†å­ã‹ç”Ÿä½“ãªã®ã‹ã¯å¤§é›‘æŠŠã«æ±ºã‚ã‚‹"><a href="#åŸå­ã‹åˆ†å­ã‹ç”Ÿä½“ãªã®ã‹ã¯å¤§é›‘æŠŠã«æ±ºã‚ã‚‹" class="headerlink" title="åŸå­ã‹åˆ†å­ã‹ç”Ÿä½“ãªã®ã‹ã¯å¤§é›‘æŠŠã«æ±ºã‚ã‚‹"></a>åŸå­ã‹åˆ†å­ã‹ç”Ÿä½“ãªã®ã‹ã¯å¤§é›‘æŠŠã«æ±ºã‚ã‚‹</h2><p>Atomic Designã‚’å°å…¥ã•ã‚ŒãŸæ–¹ã¯ç›´é¢ã—ãŸã“ã¨ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚ç§è‡ªèº«ã‚‚ã€åŸå­ or åˆ†å­ã€åˆ†å­ or ç”Ÿä½“ã‚’æ‚©ã‚€ã“ã¨ã‚‚ã‚ã‚Šã¾ã—ãŸã€‚<br>ã—ã‹ã—ã€ã‚ã¾ã‚Šæ‚©ã¾ãªãã¦å¤§ä¸ˆå¤«ã ã¨ã„ã†å›ç­”ã«è‡³ã‚Šã¾ã—ãŸã€‚<br>ä¾‹ãˆã°åˆ†å­ã¨æ±ºã‚ã¦ã„ãŸUIãŒæ›´ã«åˆ†è§£ã•ã‚Œã€åˆ†è§£ã•ã‚ŒãŸUIãŒ2ã¤ä»¥ä¸Šã®åˆ†å­ã§å…±é€šåˆ©ç”¨ã•ã‚Œã‚‹ã¨ã„ã†ã‚±ãƒ¼ã‚¹ã«ç›´é¢ã—ã€ãã®éƒ½åº¦åŸå­ã«ç§»å‹•ã•ã›ãŸã‚Šã€åˆ†å­ã«ç§»å‹•ã•ã›ã‚Œã°å¤§ä¸ˆå¤«ã ã£ãŸã‹ã‚‰ã§ã™ã€‚</p><h2 id="Componentï¼ˆåŸå­ã€åˆ†å­ï¼‰ã®ç®¡ç†è€…ã‚’ç«‹ã¦ã‚‹"><a href="#Componentï¼ˆåŸå­ã€åˆ†å­ï¼‰ã®ç®¡ç†è€…ã‚’ç«‹ã¦ã‚‹" class="headerlink" title="Componentï¼ˆåŸå­ã€åˆ†å­ï¼‰ã®ç®¡ç†è€…ã‚’ç«‹ã¦ã‚‹"></a>Componentï¼ˆåŸå­ã€åˆ†å­ï¼‰ã®ç®¡ç†è€…ã‚’ç«‹ã¦ã‚‹</h2><p>ã“ã‚Œã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã§ã¯ã¿å‡ºã—UIãƒ»UXã‚’å®šç¾©ã—ãªã„ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã®ãƒ«ãƒ¼ãƒ«ã§ã™ã€‚æ–°ãŸã«åŸå­ãƒ»åˆ†å­ãŒå¿…è¦ã¨åˆ¤æ–­ã™ã‚‹å‰ã«é©åˆ‡ãªåŸå­ãƒ»åˆ†å­ãŒã™ã§ã«å­˜åœ¨ã—ãªã„ã‹ã‚’æ¤œè¨ã™ã‚‹ãŸã‚ã§ã‚‚ã‚ã‚Šã¾ã™ã€‚</p><p>ãã—ã¦ã“ã®åŸå­ãƒ»åˆ†å­ã¯Figmaä¸Šã§Componentã¨ã—ã¦ç®¡ç†ã—ã¦ã„ã‚‹ãŸã‚ã€ç‰©ç†çš„ã«Componentå†…éƒ¨ã¸ã®å¤‰æ›´ã‚’é˜»æ­¢ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚</p><h1 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h1><ul><li>Atomic Designã¯UIã®ä½“ç³»çš„ãªç®¡ç†ã«éå¸¸ã«åŠ¹æœãŒã‚ã‚‹</li><li>Atomic Designã¯Figmaåˆ©ç”¨ã‚’å‰æã¨ã—ãŸã»ã†ãŒè‰¯ã„</li><li>UIã®ãƒ‡ã‚¶ã‚¤ãƒ³ã¯ç”Ÿä½“ã‚„ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å˜ä½ã‹ã‚‰ä½œæˆã—ã¯ã˜ã‚ã‚‹</li><li>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ‡ãƒ¼ã‚¿ã¸ã®å°è±¡ã¨åŸå­ã®ç‰¹å¾´ã‚’æ‰ãˆã‚‹</li><li>å¤§é›‘æŠŠã«åŸå­ã€åˆ†å­ã€ç”Ÿä½“ã‚’ç®¡ç†ã™ã‚‹ã‚ˆã†å¿ƒãŒã‘ã‚‹</li><li>åŸå­ã€åˆ†å­ã®ç®¡ç†è€…ã‚’ç«‹ã¦ã‚ˆã†</li></ul><p>Atomic Designã¯UXã¨UIã®ä½“ç³»çš„ãªç®¡ç†ã§ä¸€å®šã®æˆæœã‚’ä¸Šã’ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚</p><p>Atomic Designã‚’ã“ã‚Œã‹ã‚‰ã‚‚ä½¿ã„ç¶šã‘ã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><p>ã—ã‹ã—ã€Atomic Designã ã‘ã‚’å°å…¥ã—ã¦ãŠã‘ã°ã†ã¾ãã„ãã€ã¨ã„ã†ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p><p>ãã—ã¦ã€è‡ªåˆ†è‡ªèº«ã®ãƒ‡ã‚¶ã‚¤ãƒ³ã‚¹ã‚­ãƒ«ã‚’é«˜ã‚ã¦ã„ããŸã‚ã«ã‚‚ã€ãƒ‡ã‚¶ã‚¤ãƒ³ãŒå¾—æ„ãªäººã¯éšæ™‚å‹Ÿé›†ã•ã›ã¦ã„ãŸã ã„ã¦ã„ã¾ã™ã€‚ä¸€ç·’ã«åˆ‡ç£‹ç¢ç£¨ã§ãã‚‹ä»²é–“ãŒä¸€äººã§ã‚‚å¤šããªã‚‹ã“ã¨ã‚’æœŸå¾…ã—ã¦ã„ã¾ã™ã€‚</p><hr><p>é–¢é€£è¨˜äº‹ï¼š</p><ul><li><a href="https://future-architect.github.io/articles/20200318/">ã€Figmaã€‘ã‚’ä½¿ã£ã¦ãƒãƒ¼ãƒ ã§UI/UXè¨­è¨ˆã™ã‚‹ã¨ã„ã„ã“ã¨</a></li><li><a href="/articles/20190612/">TypeScriptæ•™è‚²ç”¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å…¬é–‹ã®ãŠçŸ¥ã‚‰ã›</a></li><li><a href="https://future-architect.github.io/articles/20191029/">ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã‚’2å¹´åŠç¶šã‘ã¦ãƒãƒã£ãŸã“ã¨ã‹ã‚‰å¾—ãŸæ•™è¨“3ã¤</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ä»Šå›ã¯UIã¨å°‘ã—UXã®ãŠè©±ã§ã™&quot;&gt;&lt;a href=&quot;#ä»Šå›ã¯UIã¨å°‘ã—UXã®ãŠè©±ã§ã™&quot; class=&quot;headerlink&quot; title=&quot;ä»Šå›ã¯UIã¨å°‘ã—UXã®ãŠè©±ã§ã™&quot;&gt;&lt;/a&gt;ä»Šå›ã¯UIã¨å°‘ã—UXã®ãŠè©±ã§ã™&lt;/h1&gt;&lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€‚ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã§UXã®å°‚é–€
      
    
    </summary>
    
      <category term="Design" scheme="https://future-architect.github.io/categories/Design/"/>
    
    
      <category term="UI/UX" scheme="https://future-architect.github.io/tags/UI-UX/"/>
    
      <category term="Frontend" scheme="https://future-architect.github.io/tags/Frontend/"/>
    
      <category term="Figma" scheme="https://future-architect.github.io/tags/Figma/"/>
    
      <category term="ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è¨˜äº‹é›†ä¸­æŠ•ç¨¿" scheme="https://future-architect.github.io/tags/%E3%83%95%E3%83%AD%E3%83%B3%E3%83%88%E3%82%A8%E3%83%B3%E3%83%89%E8%A8%98%E4%BA%8B%E9%9B%86%E4%B8%AD%E6%8A%95%E7%A8%BF/"/>
    
      <category term="AtomicDesign" scheme="https://future-architect.github.io/tags/AtomicDesign/"/>
    
  </entry>
  
</feed>
