<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ€è¡“ãƒ–ãƒ­ã‚°</title>
    <link>https://future-architect.github.io/</link>
    
    <image>
      <url>https://future-architect.github.io/feed_icon.png</url>
      <title>ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ€è¡“ãƒ–ãƒ­ã‚°</title>
      <link>https://future-architect.github.io/</link>
    </image>
    
    <atom:link href="https://future-architect.github.io/rss2.xml" rel="self" type="application/rss+xml"/>
    
    <description>ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®é–‹ç™ºè€…ã«ã‚ˆã‚‹å…¬å¼æŠ€è¡“ãƒ–ãƒ­ã‚°ã§ã™ã€‚æ¥­å‹™ã§åˆ©ç”¨ã—ã¦ã„ã‚‹æŠ€è¡“ã‚’å¹…åºƒãç´¹ä»‹ã—ã¾ã™ã€‚</description>
    <pubDate>Fri, 20 Oct 2023 00:06:35 GMT</pubDate>
    <generator>http://hexo.io/</generator>
    
    <item>
      <title>è¶…è–„ã„Goã®CLIä½œæˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ google/subcommands å…¥é–€</title>
      <link>https://future-architect.github.io/articles/20231020a/</link>
      <guid>https://future-architect.github.io/articles/20231020a/</guid>
      <pubDate>Thu, 19 Oct 2023 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;img src=&quot;/images/20231020a/subcommands.png&quot; alt=&quot;&quot; width=&quot;491&quot; height=&quot;213&quot;&gt;

&lt;h2 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot;</description>
          
        
      
      
      
      <content:encoded><![CDATA[<img src="/images/20231020a/subcommands.png" alt="" width="491" height="213"><h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><p>TIGçœŸé‡ã§ã™ã€‚è‚²ä¼‘æ˜ã‘ã§ã™ã€‚</p><p>Goã§CLIï¼ˆã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ï¼‰ã®é–‹ç™ºã«å½¹ç«‹ã¤ãƒ„ãƒ¼ãƒ«ã¨ã„ãˆã°ã„ãã¤ã‹é¸æŠè‚¢ãŒã‚ã‚Šã¾ã™ã€‚å¤§ããåˆ†ã‘ã‚Œã°ãƒ•ãƒ©ã‚°ã®ãƒ‘ãƒ¼ã‚¹ã‚’æ”¯æ´ã™ã‚‹ã‚‚ã®ï¼ˆ<a href="https://pkg.go.dev/flag">æ¨™æº–ã®flagãƒ‘ãƒƒã‚±ãƒ¼ã‚¸</a>ã€<a href="https://github.com/jessevdk/go-flags">alecthomas&#x2F;kong&#x2F;go-flags</a>ã€<a href="https://github.com/alecthomas/kong">alecthomas&#x2F;kong</a>ãªã©ï¼‰ã¨ã€é–‹ç™ºãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨è¨€ã£ã¦ã‚‚è‰¯ã„åŒ…æ‹¬çš„ã«æ”¯æ´ã™ã‚‹ã‚‚ã®ï¼ˆ<a href="https://github.com/urfave/cli">urfave&#x2F;cli</a>ã€<a href="https://github.com/spf13/cobra">spf13&#x2F;cobra</a>ãªã©ï¼‰ã®2ã¤ã«åˆ†ã‘ã‚‰ã‚Œã‚‹ã‹ãªã¨æ€ã„ã¾ã™ï¼ˆâ€»æ¦‚å¿µçš„ã«åˆ†ã‘ã¦ã¿ãŸã ã‘ã§æ‰ãˆæ–¹ã«ã‚ˆã£ã¦ã¯å…¨ã¦ãƒ‘ãƒ¼ã‚µã ã—ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨ã¿ãªã—ã¦ã‚‚è‰¯ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã‚ãã¾ã§å€‹äººçš„ãªã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ï¼‰ã€‚</p><p>ç§ã¯ <code>urfave/cli</code> ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒå¤šã„ã®ã§ã™ãŒã€<code>spf13/cobra</code> ã‚‚äººæ°—ã§ã™ã‚ˆã­ã€‚ã©ã¡ã‚‰ã‚‚åºƒãåˆ©ç”¨ã•ã‚Œã¦ã„ã¾ã™ãŒã€æ”¯é…çš„ã¨è¨€ã£ãŸæ„Ÿã˜ã§ã¯ãªãã€ä¾‹ãˆã°ç§ãŒã‚ˆãç”¨ã„ã‚‹terraformã‚³ãƒãƒ³ãƒ‰ã¯<a href="https://github.com/mitchellh/cli">mitchellh&#x2F;cli</a>ã¨ã„ã†<a href="https://github.com/hashicorp/terraform/blob/main/main.go#L29C3-L29C27">ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒä½¿ã‚ã‚Œã¦ã„ã¾ã—ãŸ</a>ã—ã€Goè£½ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¨ãƒ³ã‚¸ãƒ³ã§æœ‰åãªHugoã¯ã€Hugoã®è¦ä»¶ã«ãƒ•ã‚£ãƒƒãƒˆã™ã‚‹ã‚ˆã†ã«<a href="https://github.com/bep/simplecobra">bep&#x2F;simplecobra</a>ã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’é–‹ç™ºã—ã¦ã„ã‚‹ã‚ˆã†ã§ã—ãŸã€‚Protocol Bufferã®protocã‚³ãƒãƒ³ãƒ‰ã«è‡³ã£ã¦ã¯<a href="https://github.com/golang/protobuf/blob/master/protoc-gen-go/main.go#L32">æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®flag</a>ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚æ°—ã«å…¥ã£ãŸã®ã‚’å¥½ãã«ä½¿ãˆã°è‰¯ã„ã‚“ã æ„ŸãŒã‚ã‚Šã¾ã™ã€‚</p><h2 id="subcommands"><a href="#subcommands" class="headerlink" title="subcommands"></a>subcommands</h2><p>ãã‚“ãªä¸­ã€ä»Šå›å–ã‚Šä¸Šã’ã‚‹ã®ã¯<a href="https://github.com/google/subcommands">google&#x2F;subcommands</a> ã§ã™ã€‚</p><p>ç§ãŒã“ã®å­˜åœ¨ã‚’èªè­˜ã—ãŸã®ã¯ã€<a href="https://google.github.io/styleguide/go/">Google Go Coding Guide</a> ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ç·¨ã®<a href="https://google.github.io/styleguide/go/best-practices#complex-command-line-interfaces">complex-command-line-interfaces</a>ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ã®ã‚’èª­ã‚“ã ã“ã¨ãŒã‚­ãƒƒã‚«ã‚±ã§ã™ã€‚</p><p>ãã®éƒ¨åˆ†ã‚’å¼•ç”¨ï¼‹æ„è¨³ã—ã¾ã™ã€‚</p><ul><li><code>kubectl create</code>ã€<code>kubectl run</code> ã¨ã„ã£ãŸã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã‚’å«ã‚€CLIé–‹ç™ºã®å ´åˆã¯ã€ã‚·ãƒ³ãƒ—ãƒ«ã§æ­£ã—ãåˆ©ç”¨ã—ã‚„ã™ã„ <code>subcommands</code> ãŒãŠå‹§ã‚</li><li><code>subcommands</code> ãŒæä¾›ã•ã‚Œã¦ã„ãªã„æ©Ÿèƒ½ã‚’æ±‚ã‚ã‚‹å ´åˆã¯<code>cobra</code>ãŒãŠå‹§ã‚</li></ul><p><code>subcommands</code> ã¯é–‹ç™ºå…ƒãŒGoogleã ã‘ã‚ã£ã¦æ¨ã—ã‚’æ„Ÿã˜ã¾ã™ã­ï¼ˆãªãŠã€READMEã«ã¯ â€œThis is not an official Google productï¼ˆã€ŒGoogleå…¬å¼ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã˜ã‚ƒãªã„ã‚ˆã€ï¼‰â€ ã¨ã‚ã‚Šã¾ã™ã€‚ï¼‰ã€‚ã¡ãªã¿ã«ã€<code>kubectl</code> ã¯<code>cobra</code>ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚ã•ã‚‰ã«ä½™è«‡ã§ã™ãŒã€ <code>docker</code> ã‚³ãƒãƒ³ãƒ‰ã‚‚ <code>cobra</code> ã§é–‹ç™ºã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p>Goã®ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã¨ã—ã¦ã€<code>Google Coding Guide</code> ã«ã¯ä»Šå¾Œå°‘ãªã‹ã‚‰ãšå½±éŸ¿ã‚’å—ã‘ã¦ã„ãã¨æ€ã†ã®ã§ã€ <code>subcommands</code> ã«ã¤ã„ã¦ç†è§£ã‚’æ·±ã‚ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚</p><h2 id="subcommands-ã‚’ä½¿ã£ã¦ã„ã‚‹ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆ"><a href="#subcommands-ã‚’ä½¿ã£ã¦ã„ã‚‹ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆ" class="headerlink" title="subcommands ã‚’ä½¿ã£ã¦ã„ã‚‹ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆ"></a>subcommands ã‚’ä½¿ã£ã¦ã„ã‚‹ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆ</h2><p>subcommandsã®GoDocã«ã‚ã‚‹<a href="https://pkg.go.dev/github.com/google/subcommands?tab=importedby">importedby</a>ã‹ã‚‰èª¿ã¹ã‚‹ã¨ã€<a href="https://github.com/google/wire">wire</a>ã€<a href="https://github.com/google/gvisor">gvisitor</a>ã€<a href="https://github.com/future-architect/vuls">vuls</a>ãªã©ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãªã©ãŒsubcommandsã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚Vulsã€ãŠå‰ã‚‚ãã†ã ã£ãŸã®ã‹ã€‚</p><p>importbyã¯Forkã•ã‚ŒãŸãƒªãƒã‚¸ãƒˆãƒªæ•°ã‚‚æ‹¾ã‚ã‚Œã¾ã™ã—ã€ã‚¹ã‚¿ãƒ¼æ•°ã§çµã‚Œã‚‹ã‚ã‘ã§ã¯ãªã„ã®ã§å˜ç´”åŒ–ã§ãã¾ã›ã‚“ãŒã€2023.10.13æ™‚ç‚¹ã§subcommandsã¯628ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã—ãŸã€‚ã¡ãªã¿ã«ã€cobraã¯9.4ä¸‡ã€urfave&#x2F;cliã¯1.4ä¸‡ã§æ¡é•ã„ã§ã—ãŸã€‚æ“è­·ã™ã‚‹ã‚ã‘ã§ã¯ãªã„ã§ã™ãŒsubcommandsã®å…¬é–‹ãŒ2019å¹´2æœˆï¼ˆ1.0.0ã®Releaseæ—¥ï¼‰ã¨æ¯”è¼ƒçš„æ–°ã—ã„ã“ã¨ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ï¼ˆcobra v0.0.1ã®2017å¹´10æœˆã€urfave&#x2F;clin v0.0.1ã®2013å¹´6æœˆã€‚ã©ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨æ¯”è¼ƒã™ã‚‹ã®ãŒé©åˆ‡ã‹é›£ã—ã„ã§ã™ãŒï¼‰ã€‚</p><h2 id="ä½¿ã£ã¦ã¿ãŸ"><a href="#ä½¿ã£ã¦ã¿ãŸ" class="headerlink" title="ä½¿ã£ã¦ã¿ãŸ"></a>ä½¿ã£ã¦ã¿ãŸ</h2><p>subcommandsã§ã™ãŒã€åˆ©ç”¨ã‚¬ã‚¤ãƒ‰çš„ãªã‚‚ã®ã¯è¦‹å½“ãŸã‚‰ãªãã€<a href="https://github.com/google/subcommands">README.md</a>ã‚‚è‰²æ°—ã¯ç„¡ã„ã§ã™ãŒã€å®Ÿè£…ã¯<a href="https://github.com/google/subcommands/blob/master/subcommands.go">subcommands.go</a>ã®ã¿ï¼ˆï¼ï¼‰ã§ã€ã“ã¡ã‚‰ãŒ500è¡Œç¨‹åº¦ã¨ã€ã¨ã¦ã‚‚è–„ã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã ã¨ã„ã†äº‹ãŒã‚ã‹ã‚Šã¾ã™ã€‚ã“ã®è–„ã•ãŒé­…åŠ›ã ã¨æ„Ÿã˜ã‚‹ã‹ã©ã†ã‹ãŒsubcommandsã‚’ä½¿ã†åˆ¤æ–­ãƒã‚¤ãƒ³ãƒˆãªæ°—ãŒã—ã¾ã™ã€‚READMEã«ã¯printã‚³ãƒãƒ³ãƒ‰ã®ã‚µãƒ³ãƒ—ãƒ«ãŒè¼‰ã£ã¦ã„ã¾ã™ãŒã€å°‘ã—ã ã‘ã‚ªãƒªã‚¸ãƒŠãƒªãƒ†ã‚£ã‚’å‡ºã™ãŸã‚ç°¡å˜ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã—ãŸã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã‚’èª­ã¿å–ã‚Š&#x2F;æ›¸ãè¾¼ã¿ã™ã‚‹ç°¡å˜ãªãƒ„ãƒ¼ãƒ«ã‚’ä½œã‚Šã¾ã™ã€‚</p><p>ãªãŠã€ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã‚’æ“ä½œã™ã‚‹ãŸã‚ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯<a href="https://github.com/golang-design/clipboard">golang-design&#x2F;clipboard</a>ã‚’ä½¿ã„ã¾ã—ãŸã€‚</p><p>æœ€åˆã«ã€<code>printCmd</code>ã€<code>writeCmd</code> ã‚’å®Ÿè£…ã—ã¦ã„ãã¾ã™ã€‚å®Ÿè£…ã™ã¹ãã¯ <code>Name()</code>ã€<code>Synopsis()</code>ã€ <code>Usage()</code>ã€<code>SetFlags()</code>ã€<code>Execute()</code> ã§ã™ã€‚<code>Name()</code>ã€<code>Synopsis()</code>ã€ <code>Usage()</code> ã¯ãƒ˜ãƒ«ãƒ—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ç”¨ã„ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã§ã€å®Ÿæ…‹ã¯ <code>SetFlags()</code>ã€<code>Execute()</code> ã®2ç¨®é¡ã§ã™ã€‚ã‚·ãƒ³ãƒ—ãƒ«ã§ã™ã­ã€‚</p><figure class="highlight go"><figcaption><span>commands.go</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;bufio&quot;</span></span><br><span class="line"><span class="string">&quot;bytes&quot;</span></span><br><span class="line"><span class="string">&quot;context&quot;</span></span><br><span class="line"><span class="string">&quot;flag&quot;</span></span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;io&quot;</span></span><br><span class="line"><span class="string">&quot;log&quot;</span></span><br><span class="line"><span class="string">&quot;strings&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;github.com/google/subcommands&quot;</span></span><br><span class="line"><span class="string">&quot;golang.design/x/clipboard&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> printCmd <span class="keyword">struct</span> &#123;</span><br><span class="line">num  <span class="type">int</span></span><br><span class="line">trim <span class="type">bool</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(*printCmd)</span></span> Name() <span class="type">string</span>     &#123; <span class="keyword">return</span> <span class="string">&quot;print&quot;</span> &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(*printCmd)</span></span> Synopsis() <span class="type">string</span> &#123; <span class="keyword">return</span> <span class="string">&quot;Print clipboard to stdout.&quot;</span> &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(*printCmd)</span></span> Usage() <span class="type">string</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">`print [-n number] [-trim]:</span></span><br><span class="line"><span class="string">  Print clipboard content.</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *printCmd)</span></span> SetFlags(f *flag.FlagSet) &#123;</span><br><span class="line">f.IntVar(&amp;p.num, <span class="string">&quot;n&quot;</span>, <span class="number">0</span>, <span class="string">&quot;display within particular line number&quot;</span>)</span><br><span class="line">f.BoolVar(&amp;p.trim, <span class="string">&quot;trim&quot;</span>, <span class="literal">false</span>, <span class="string">&quot;enable trimming space chars&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *printCmd)</span></span> Execute(_ context.Context, f *flag.FlagSet, _ ...any) subcommands.ExitStatus &#123;</span><br><span class="line">err := clipboard.Init()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Printf(<span class="string">&quot;[clip] %v\n&quot;</span>, err)</span><br><span class="line"><span class="keyword">return</span> subcommands.ExitFailure</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">reader := bufio.NewReader(bytes.NewReader(clipboard.Read(clipboard.FmtText)))</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; ; i++ &#123;</span><br><span class="line"><span class="keyword">if</span> p.num != <span class="number">0</span> &amp;&amp; i == p.num &#123;</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line">line, _, err := reader.ReadLine()</span><br><span class="line"><span class="keyword">if</span> err == io.EOF &#123;</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Printf(<span class="string">&quot;[clip] %v\n&quot;</span>, err)</span><br><span class="line"><span class="keyword">return</span> subcommands.ExitFailure</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">out := <span class="type">string</span>(line)</span><br><span class="line"><span class="keyword">if</span> p.trim &#123;</span><br><span class="line">out = strings.TrimSpace(out)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(out)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> subcommands.ExitSuccess</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> writeCmd <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(*writeCmd)</span></span> Name() <span class="type">string</span>     &#123; <span class="keyword">return</span> <span class="string">&quot;write&quot;</span> &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(*writeCmd)</span></span> Synopsis() <span class="type">string</span> &#123; <span class="keyword">return</span> <span class="string">&quot;Write to clipboard&quot;</span> &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(*writeCmd)</span></span> Usage() <span class="type">string</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">`write [text]:</span></span><br><span class="line"><span class="string">  Write to clipboard.</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *writeCmd)</span></span> SetFlags(_ *flag.FlagSet) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *writeCmd)</span></span> Execute(_ context.Context, f *flag.FlagSet, _ ...any) subcommands.ExitStatus &#123;</span><br><span class="line">err := clipboard.Init()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Printf(<span class="string">&quot;[clip] %v\n&quot;</span>, err)</span><br><span class="line"><span class="keyword">return</span> subcommands.ExitFailure</span><br><span class="line">&#125;</span><br><span class="line">clipboard.Write(clipboard.FmtText, []<span class="type">byte</span>(strings.Join(f.Args(), <span class="string">&quot;\n&quot;</span>)))</span><br><span class="line"><span class="keyword">return</span> subcommands.ExitSuccess</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®£è¨€ã—ãŸã€<code>printCmd</code>, <code>writeCmd</code> ã‚’ <code>subcommands</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ç™»éŒ²ã—ã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>main.go</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;context&quot;</span></span><br><span class="line"><span class="string">&quot;flag&quot;</span></span><br><span class="line"><span class="string">&quot;os&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;github.com/google/subcommands&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">subcommands.Register(subcommands.HelpCommand(), <span class="string">&quot;&quot;</span>)</span><br><span class="line">subcommands.Register(subcommands.FlagsCommand(), <span class="string">&quot;&quot;</span>)</span><br><span class="line">subcommands.Register(subcommands.CommandsCommand(), <span class="string">&quot;&quot;</span>)</span><br><span class="line">subcommands.Register(&amp;printCmd&#123;&#125;, <span class="string">&quot;&quot;</span>)</span><br><span class="line">subcommands.Register(&amp;writeCmd&#123;&#125;, <span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line">flag.Parse()</span><br><span class="line">ctx := context.Background()</span><br><span class="line">os.Exit(<span class="type">int</span>(subcommands.Execute(ctx)))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã“ã‚Œã‚’ãƒ“ãƒ«ãƒ‰ã—ã¦ã€ãƒ˜ãƒ«ãƒ—ã‚³ãƒãƒ³ãƒ‰ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚ </p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ go build -o subclip .</span><br><span class="line">$ subclip <span class="built_in">help</span></span><br><span class="line">Usage: subclip &lt;flags&gt; &lt;subcommand&gt; &lt;subcommand args&gt;</span><br><span class="line"></span><br><span class="line">Subcommands:</span><br><span class="line">commands         list all <span class="built_in">command</span> names</span><br><span class="line">flags            describe all known top-level flags</span><br><span class="line"><span class="built_in">help</span>             describe subcommands and their syntax</span><br><span class="line"><span class="built_in">print</span>            Print clipboard to stdout.</span><br><span class="line">write            Write to clipboard</span><br></pre></td></tr></table></figure><p>è¦‹ã‚‹ã¨åˆ†ã‹ã‚‹é€šã‚Šã€<code>Name()</code> ã§å®£è¨€ã—ãŸã‚³ãƒãƒ³ãƒ‰ã®ä¸€è¦§ã¨ <code>Synopsis()</code> ã§æ›¸ã„ãŸèª¬æ˜ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚<code>commands</code>, <code>flags</code>, <code>help</code> ã¯ <code>subcommands</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«äºˆã‚å®£è¨€ã•ã‚ŒãŸã‚³ãƒãƒ³ãƒ‰ãŸã¡ã§ã€mainé–¢æ•°å†…ã§ç™»éŒ²ã—ã¦ã„ã¾ã™ã€‚ç‰¹ã«helpã¯å¿…é ˆã‹ãªã¨æ€ã„ã¾ã™ã€‚</p><p>ã•ã¦ã€printã«ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’2ã¤è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚ã©ã†ã‚„ã£ã¦ç¢ºèªã™ã‚‹ã®ã§ã—ã‚‡ã†ã‹ã€‚ç­”ãˆã¯flagsã‹help ã®å¼•æ•°ã«ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ç¢ºèªã—ãŸã„ã‚³ãƒãƒ³ãƒ‰åã‚’æ¸¡ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><figure class="highlight sh"><figcaption><span>ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ç¢ºèª</span></figcaption><table><tr><td class="code"><pre><span class="line">$ subclip flags <span class="built_in">print</span> </span><br><span class="line">  -n int</span><br><span class="line">        display within particular line number</span><br><span class="line">  -trim</span><br><span class="line">        <span class="built_in">enable</span> trimming space chars</span><br><span class="line"></span><br><span class="line">$ subclip <span class="built_in">help</span> <span class="built_in">print</span></span><br><span class="line"><span class="built_in">print</span> [-n number] [-trim]:</span><br><span class="line">  Print clipboard content.</span><br><span class="line">  -n int</span><br><span class="line">        display within particular line number</span><br><span class="line">  -trim</span><br><span class="line">        <span class="built_in">enable</span> trimming space chars</span><br></pre></td></tr></table></figure><p>ã“ã†ã—ã¦ã¿ã‚‹ã¨ã€ <code>flags</code> ã¯ <code>help</code> ã«åŒ…å«ã•ã‚Œã¦ã„ã‚‹å†…å®¹ã§ã‚ã‚‹ãŸã‚ã€ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã¨ã—ã¦ç”¨æ„ã—ãªãã¦ã‚‚è‰¯ã„æ°—ãŒã—ã¾ã™ã­ï¼ˆwireãªã‚“ã‹ã¯ã™ã¹ã¦ç™»éŒ²ã—ã¦ã„ã‚‹ã®ã§ã€subcommandsã‚’åˆ©ç”¨ã™ã‚‹å ´åˆã¯ã™ã¹ã¦ç™»éŒ²ã™ã‚‹æµã‚Œã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒï¼‰ã€‚</p><p>ç¶šã„ã¦äºˆã‚ç”¨æ„ã•ã‚ŒãŸ<code>commands</code> ã§ã™ãŒã€ã“ã‚Œã¯ã‚³ãƒãƒ³ãƒ‰ã®ä¸€è¦§ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚<code>help</code> ã§è©³ç´°ã‚’ç¢ºèªã™ã‚‹ã¨ãã®é€šã‚Šã®å†…å®¹ã§ã™ï¼ˆã©ã†ã„ã†ã‚±ãƒ¼ã‚¹ã§å¬‰ã—ã„ã®ã‹ã„ã¾ã„ã¡æ´ã¿ãã‚Œã¾ã›ã‚“ãŒï¼‰ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ subclip commands</span><br><span class="line"><span class="built_in">help</span></span><br><span class="line">flags</span><br><span class="line">commands</span><br><span class="line"><span class="built_in">print</span></span><br><span class="line">write</span><br><span class="line"></span><br><span class="line">$ subclip <span class="built_in">help</span> commands </span><br><span class="line">commands:</span><br><span class="line">        Print a list of all commands.</span><br></pre></td></tr></table></figure><p><code>help</code> ã¨ <code>commands</code> ã®ä¸¦ã³é †ã‚‚ç•°ãªã‚‹ã®ãŒæ°—ã«ãªã‚Šã¾ã—ãŸãŒã€ã€ãŠãã‚‰ãä»•æ§˜ãªã®ã§ã—ã‚‡ã†ã€‚</p><h2 id="help-ã§ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹ã€‚"><a href="#help-ã§ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹ã€‚" class="headerlink" title="help ã§ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹ã€‚"></a><code>help</code> ã§ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹ã€‚</h2><p>åˆ©ç”¨é »åº¦ãŒé«˜ãé‡è¦ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã€ <code>help</code> ã‚³ãƒãƒ³ãƒ‰ã§è¡¨ç¤ºã—ã¦ã»ã—ã„ã“ã¨ã‚‚å¤šã„ã¨æ€ã„ã¾ã™ã€‚<code>subcommands.ImportantFlag()</code> ãŒå¯¾å¿œã—ã¦ãã‚Œãã†ã§ã™ãŒã€ã“ã‚Œã¯ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã®ãƒ•ãƒ©ã‚°ã«ã—ã‹å¯¾å¿œã—ã¦ã„ãªã„ã‚ˆã†ã§ã™ï¼ˆawscli ã§è¨€ãˆã°ã€ â€“profile ãªã©ã®å…¨ã‚³ãƒãƒ³ãƒ‰ã«é©ç”¨ã™ã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼‰ã€‚<br>ãã®ãŸã‚ã€å¿…è¦ã§ã‚ã‚Œã°ã€ <code>Synopsis()</code> ã«åˆ©ç”¨ä¾‹ã‚’æ›¸ããªã©ã®å·¥å¤«ãŒå¿…è¦ãã†ã§ã™ã€‚</p><h2 id="ã‚°ãƒ«ãƒ¼ãƒ—åŒ–"><a href="#ã‚°ãƒ«ãƒ¼ãƒ—åŒ–" class="headerlink" title="ã‚°ãƒ«ãƒ¼ãƒ—åŒ–"></a>ã‚°ãƒ«ãƒ¼ãƒ—åŒ–</h2><p>subcommandsã«ç™»éŒ²ã™ã‚‹éš›ã€ç¬¬2å¼•æ•°ã«groupåã‚’ç™»éŒ²ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚ä»¥ä¸‹ã®æ§˜ã«æ›¸ãæ›ãˆã¾ã™ã€‚</p><figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">func main() &#123;</span><br><span class="line"><span class="deletion">-subcommands.Register(subcommands.HelpCommand(), &quot;&quot;)</span></span><br><span class="line"><span class="deletion">-subcommands.Register(subcommands.FlagsCommand(), &quot;&quot;)</span></span><br><span class="line"><span class="deletion">-subcommands.Register(subcommands.CommandsCommand(), &quot;&quot;)</span></span><br><span class="line"><span class="addition">+subcommands.Register(subcommands.HelpCommand(), &quot;help&quot;)</span></span><br><span class="line"><span class="addition">+subcommands.Register(subcommands.FlagsCommand(), &quot;help&quot;)</span></span><br><span class="line"><span class="addition">+subcommands.Register(subcommands.CommandsCommand(), &quot;help&quot;)</span></span><br><span class="line"><span class="deletion">-subcommands.Register(&amp;printCmd&#123;&#125;, &quot;&quot;)</span></span><br><span class="line"><span class="deletion">-subcommands.Register(&amp;writeCmd&#123;&#125;, &quot;&quot;)</span></span><br><span class="line"><span class="addition">+subcommands.Register(&amp;printCmd&#123;&#125;, &quot;main&quot;)</span></span><br><span class="line"><span class="addition">+subcommands.Register(&amp;writeCmd&#123;&#125;, &quot;main&quot;)</span></span><br><span class="line">// çœç•¥</span><br></pre></td></tr></table></figure><p>ãã†ã™ã‚‹ã¨ <code>help</code> ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡ºã™ã¨ãã«ã‚°ãƒ«ãƒ¼ãƒ”ãƒ³ã‚°ãŒè¡Œã‚ã‚Œã¾ã™ã€‚é¡ä¼¼æ€§ã®é«˜ã„ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã”ã¨ã«è¨­å®šã™ã‚‹ã¨ä¾¿åˆ©ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ subclip <span class="built_in">help</span>     </span><br><span class="line">Usage: subclip &lt;flags&gt; &lt;subcommand&gt; &lt;subcommand args&gt;</span><br><span class="line"></span><br><span class="line">Subcommands <span class="keyword">for</span> <span class="built_in">help</span>:</span><br><span class="line">        commands         list all <span class="built_in">command</span> names</span><br><span class="line">        flags            describe all known top-level flags</span><br><span class="line">        <span class="built_in">help</span>             describe subcommands and their syntax</span><br><span class="line"></span><br><span class="line">Subcommands <span class="keyword">for</span> main:</span><br><span class="line">        <span class="built_in">print</span>            Print clipboard to stdout.</span><br><span class="line">        write            Write to clipboard</span><br></pre></td></tr></table></figure><h2 id="ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹"><a href="#ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹" class="headerlink" title="ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹"></a>ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹</h2><p>ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚‚ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ <code>subcommands.Alias()</code> ã‚’åˆ©ç”¨ã™ã‚Œã°ã„ã‘ã¾ã—ãŸã€‚</p><figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">func main() &#123;</span><br><span class="line">    // çœç•¥</span><br><span class="line">subcommands.Register(&amp;printCmd&#123;&#125;, &quot;main&quot;)</span><br><span class="line">subcommands.Register(&amp;writeCmd&#123;&#125;, &quot;main&quot;)</span><br><span class="line"><span class="addition">+subcommands.Register(subcommands.Alias(&quot;p&quot;, &amp;printCmd&#123;&#125;), &quot;main&quot;)</span></span><br><span class="line"><span class="addition">+subcommands.Register(subcommands.Alias(&quot;w&quot;, &amp;writeCmd&#123;&#125;), &quot;main&quot;)</span></span><br></pre></td></tr></table></figure><p>ãƒ˜ãƒ«ãƒ—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã‚‚è¡¨ç¾ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ subclip <span class="built_in">help</span></span><br><span class="line">Usage: subclip &lt;flags&gt; &lt;subcommand&gt; &lt;subcommand args&gt;</span><br><span class="line"></span><br><span class="line">Subcommands <span class="keyword">for</span> <span class="built_in">help</span>:</span><br><span class="line">        commands         list all <span class="built_in">command</span> names</span><br><span class="line">        flags            describe all known top-level flags</span><br><span class="line">        <span class="built_in">help</span>             describe subcommands and their syntax</span><br><span class="line"></span><br><span class="line">Subcommands <span class="keyword">for</span> main:</span><br><span class="line">        <span class="built_in">print</span>, p         Print clipboard to stdout.</span><br><span class="line">        write, w         Write to clipboard</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨é »åº¦ãŒé«˜ãã†ã ã¨æ€ã„ã¾ã—ãŸã€‚</p><h2 id="ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã®ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰"><a href="#ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã®ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰" class="headerlink" title="ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã®ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰"></a>ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã®ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰</h2><p><a href="https://yunomu.hatenablog.jp/entry/2020/06/16/170027">Goã§subcommandsã‚’ä½¿ã† - yunomuã®ãƒ–ãƒ­ã‚°</a> ã«ã‹ã‹ã‚Œã¦ã„ã‚‹é€šã‚Šã€<code>subcommands.Commander</code> ã‚’è‡ªå‰ã§é‡ã­ã‚‹ã“ã¨ã§Néšå±¤ã«ãƒã‚¹ãƒˆã—ãŸã‚³ãƒãƒ³ãƒ‰ã‚’ä½œã‚Œã‚‹ãã†ã§ã™ã€‚READMEã«å®Ÿè£…ä¾‹ãŒç„¡ã‹ã£ãŸã®ã§å®Ÿç¾ã§ããªã„ã¨ç§ã¯æœ€åˆã€å‹˜é•ã„ã—ã¦ã„ã¾ã—ãŸã€‚ãŠãã‚‰ãå‹˜é•ã„ã—ã‚„ã™ã„ãƒã‚¤ãƒ³ãƒˆãªã®ã§ã€è¦šãˆã¦ãŠãã¨è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚</p><h2 id="ãã®ä»–ã®æ©Ÿèƒ½"><a href="#ãã®ä»–ã®æ©Ÿèƒ½" class="headerlink" title="ãã®ä»–ã®æ©Ÿèƒ½"></a>ãã®ä»–ã®æ©Ÿèƒ½</h2><p>ä»¥ä¸‹ã®ã‚ˆã†ãªæ©Ÿèƒ½ã¯ç„¡ã•ãã†ã§ã—ãŸã€‚</p><p>ãƒ•ãƒ©ã‚°ã®ãƒ‘ãƒ¼ã‚¹ã¯æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®flagã‚’ç”¨ã„ã¦ã„ã‚‹ãŸã‚ã€åŒæ§˜ã®å£ãŒã‚ã‚‹ã€‚</p><ul><li><code>--number</code>, <code>-n</code> ã®ã‚ˆã†ãªã€ãƒ­ãƒ³ã‚°ãƒ»ã‚·ãƒ§ãƒ¼ãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³<ul><li>ãƒ•ãƒ©ã‚°ã®ãƒ‘ãƒ¼ã‚¹ã¯ã€æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®flagã‚’ä½¿ã£ã¦ã„ã‚‹ãŸã‚ã€å¿…è¦ã§ã‚ã‚Œã°è‡ªå‰ã§å®Ÿè£…ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™</li></ul></li><li>ç’°å¢ƒå¤‰æ•°ã‹ã‚‰ã‚ªãƒ—ã‚·ãƒ§ãƒ³æŒ‡å®šã€ä¸Šæ›¸ã<ul><li>æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®flagã‚’ç”¨ã„ã¦ã„ã‚‹ãŸã‚ã€å¿…è¦ã§ã‚ã‚Œã°è‡ªå‰ã§å®Ÿè£…ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™</li></ul></li></ul><p>ã‚³ãƒãƒ³ãƒ‰ã®typoã‹ã‚‰ä¸€ç•ªè¿‘ã„ã‚³ãƒãƒ³ãƒ‰ã‚’ææ¡ˆã™ã‚‹ã‚ˆã†ãªæ©Ÿèƒ½ã€‚</p><ul><li><code>subclip wite</code> ã˜ã‚ƒãªãã¦ã€<code>subclip write</code> ã¿ãŸã„ãªææ¡ˆã‚’ã™ã‚‹æ©Ÿèƒ½ã¯ç„¡ã„ã§ã™<ul><li>å­˜åœ¨ã—ãªã„ã‚³ãƒãƒ³ãƒ‰ã‚’æŒ‡å®šã—ãŸå ´åˆã€ <code>help</code> ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</li></ul></li></ul><h2 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h2><p>subcommandsã¯éå¸¸ã«è–„ãã€ã‚·ãƒ³ãƒ—ãƒ«ã§ã‚ã‚‹ãŸã‚æ©Ÿèƒ½ã‚’ç‰¹åŒ–ã—ãŸCLIãƒ„ãƒ¼ãƒ«ã‚’ä½œã‚‹ã®ã«é©ã—ã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚ã¾ãŸã€subcommandsã®<a href="https://github.com/google/subcommands/blob/master/go.mod">go.mod</a> ã‚’è¦‹ã‚‹ã¨3rdãƒ‘ãƒ¼ãƒ†ã‚£ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾å­˜ãŒã‚¼ãƒ­ãªãŸã‚ä¾å­˜å…ˆã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§å£Šã‚Œã‚‹ã¨ã„ã£ãŸã“ã¨ãŒç„¡ã„ãŸã‚å®‰å®šçš„ã§ã€ãŠãã‚‰ããƒã‚¤ãƒŠãƒªã‚µã‚¤ã‚ºã‚‚å°ã•ãã§ãã‚‹ã¨æ€ã„ã¾ã™ï¼ˆã“ã¡ã‚‰ã¯èª¤å·®ãƒ¬ãƒ™ãƒ«ã§ã—ã‚‡ã†ãŒï¼‰ã€‚</p><p>ãã®å‰²ã«ã¯ã‚³ãƒãƒ³ãƒ‰ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚„éšå±¤åŒ–ã§ããŸã‚Šã¨ãƒ‘ãƒ¯ãƒ•ãƒ«ãªã¨ã“ã‚ã‚‚ã‚ã‚Šã€ãƒªãƒƒãƒã«ä½œã‚Šè¾¼ã‚€ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</p><p>ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ã‚·ãƒ§ãƒ¼ãƒˆãƒ»ãƒ­ãƒ³ã‚°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®æº–å‚™ã‚„ã€ç’°å¢ƒå¤‰æ•°ã¨ã®ãƒãƒ¼ã‚¸ãªã©ã€ç´°ã‹ãªä½œã‚Šè¾¼ã¿ã‚’ä¸è¦ã¨ã§ãã‚‹ã®ã§ã‚ã‚Œã°æ¡ç”¨ã—ã¦ã¿ã¦ã‚‚è‰¯ã„ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul><li><a href="https://osinet.fr/go/en/articles/cli-google-subcommands/#13-passing-non-cli-arguments-to-commands">https://osinet.fr/go/en/articles/cli-google-subcommands/#13-passing-non-cli-arguments-to-commands</a></li><li><a href="https://osinet.fr/go/en/articles/cli-google-subcommands/">https://osinet.fr/go/en/articles/cli-google-subcommands/</a></li></ul>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Programming/">Programming</category>
      
      
      <category domain="https://future-architect.github.io/tags/Go/">Go</category>
      
      <category domain="https://future-architect.github.io/tags/CLI/">CLI</category>
      
      <category domain="https://future-architect.github.io/tags/subcommands/">subcommands</category>
      
      
      <comments>https://future-architect.github.io/articles/20231020a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>VPCå¤–ã‹ã‚‰Cloud SQL Auth Proxyã‚’åˆ©ç”¨ã—ãŸPrivate IP Cloud SQLã¸ã®æ¥ç¶š</title>
      <link>https://future-architect.github.io/articles/20231019a/</link>
      <guid>https://future-architect.github.io/articles/20231019a/</guid>
      <pubDate>Wed, 18 Oct 2023 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;h2 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h2&gt;&lt;p&gt;æœ¬è¨˜äº‹ã§ã¯ã€Private IPã—ã‹æŒãŸãªã„Cloud SQLã¸æ¥ç¶šã™ã‚‹æ–¹æ³•ã¨ã—ã¦ã€Cloud SQL Auth</description>
          
        
      
      
      
      <content:encoded><![CDATA[<h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><p>æœ¬è¨˜äº‹ã§ã¯ã€Private IPã—ã‹æŒãŸãªã„Cloud SQLã¸æ¥ç¶šã™ã‚‹æ–¹æ³•ã¨ã—ã¦ã€Cloud SQL Auth Proxyã‚’åˆ©ç”¨ã—ãŸæ¥ç¶šæ–¹æ³•ã«ã¤ã„ã¦ç´¹ä»‹è‡´ã—ã¾ã™ã€‚</p><h2 id="Cloud-SQL"><a href="#Cloud-SQL" class="headerlink" title="Cloud SQL"></a>Cloud SQL</h2><p><a href="https://cloud.google.com/sql/docs/introduction?hl=ja">Cloud SQL</a>ã¯My SQLã€PostgreSQLã€SQL Serverç”¨ã®ãƒ•ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ‰ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚</p><p>Google Cloudã«ã¯ã€AlloyDBã€Spannerã€Firestoreã€Bigtableãªã©æ§˜ã€…ãªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚µãƒ¼ãƒ“ã‚¹ãŒå­˜åœ¨ã—ã¾ã™ãŒã€Cloud SQLã‚‚ãã®å†…ã®1ã¤ã«ãªã‚Šã¾ã™ã€‚ãŸãã•ã‚“ã‚ã£ã¦ã©ã‚Œé¸ã¹ã°ã„ã„ã®ã‹ã‚ã‹ã‚‰ãªã„ï¼ã¨ã„ã†çŠ¶æ³ã«é™¥ã£ãŸå ´åˆã¯ã€<a href="https://cloud.google.com/blog/topics/developers-practitioners/your-google-cloud-database-options-explained?hl=en">Your Google Cloud database options, explained</a>ã‹ã‚‰ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’æ¢ã‚‹ã®ãŒè‰¯ã„ã¨æ€ã„ã¾ã™ã€‚</p><h3 id="Cloud-SQLã¸ã®æ¥ç¶šæ–¹æ³•"><a href="#Cloud-SQLã¸ã®æ¥ç¶šæ–¹æ³•" class="headerlink" title="Cloud SQLã¸ã®æ¥ç¶šæ–¹æ³•"></a>Cloud SQLã¸ã®æ¥ç¶šæ–¹æ³•</h3><p>Cloud SQLã¸ã¯<code>mysql</code>ã‚„<code>psql</code>ã‚³ãƒãƒ³ãƒ‰ãªã©ã§æ¥ç¶šã§ãã€æ¥ç¶šæ–¹æ³•ã¨ã—ã¦ä»¥ä¸‹ã®2ã¤ã®æ–¹æ³•ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><ol><li>ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆIPã‚¢ãƒ‰ãƒ¬ã‚¹<ul><li>åŒä¸€VPCã‹ã‚‰æ¥ç¶šã§ãã‚‹å†…éƒ¨æ¥ç¶š</li></ul></li><li>ãƒ‘ãƒ–ãƒªãƒƒã‚¯IPã‚¢ãƒ‰ãƒ¬ã‚¹<ul><li>ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆçµŒç”±ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹å¤–éƒ¨æ¥ç¶š</li></ul></li></ol><p>SQLã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆä¸Šã«æ™’ã—ãŸããªã„ã¨ã„ã†ã‚»ã‚­ãƒ¥ã‚¢ãªæ¡ä»¶ã‚’æº€ãŸã—ãŸã„å ´åˆã¯ã€1ã®ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆIPã‚¢ãƒ‰ãƒ¬ã‚¹ã®ã¿ã‚’åˆ©ç”¨ã™ã‚‹ã‚±ãƒ¼ã‚¹ãŒå¤šã„ã‹ã¨æ€ã‚ã‚Œã¾ã™ã€‚ä½†ã—ã€ä¸Šè¨˜ã§è¨˜è¼‰ã—ãŸé€šã‚ŠåŒä¸€VPCå†…ã‹ã‚‰ã®æ¥ç¶šã¨ãªã‚‹ãŸã‚ã€</p><ol><li>æ¥ç¶šå…ƒã¨ãªã‚‹PCãƒ»VMã‚’ãã®VPCå†…ã«æ§‹ç¯‰ã™ã‚‹å¿…è¦</li><li>ã‚‚ã—ãã¯ãã®VPCå†…ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹çµŒè·¯ã‚’æŒã¤å¿…è¦</li></ol><p>ãŒã‚ã‚Šã¾ã™ã€‚<br>1ã®å ´åˆã¯ã€Cloud SQLã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆIPã«å¯¾ã—ã¦ç›´æ¥æ¥ç¶šã§ãã‚‹ã®ã§ä¸€ç•ªæ‰‹ã£å–ã‚Šæ—©ã„æ–¹æ³•ã‹ã¨æ€ã„ã¾ã™ã€‚</p><img src="/images/20231019a/image.png" alt="image.png" width="782" height="550" loading="lazy"><p>2ã®å ´åˆã¯ã€Cloud SQLãŒå­˜åœ¨ã™ã‚‹VPCå†…ã¸ã‚¢ã‚¯ã‚»ã‚¹çµŒè·¯ã‚’æŒã¤å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€VPC Peeringã‚„Cloud VPNã€Cloud Interconnectã«ã‚ˆã£ã¦æ¥ç¶šå…ƒãŒåˆ©ç”¨ã™ã‚‹VPCãŒãŠäº’ã„ã«çµŒè·¯ã‚’ç¢ºä¿ã—ã€Cloud SQLã®Private IPãŒåºƒå ±ã•ã‚Œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚<br>â€»æœ¬è¨˜äº‹ã§ã¯<a href="https://cloud.google.com/network-connectivity/docs/vpn/concepts/topologies?hl=ja">HA-VPNæ§‹æˆ</a>ã‚’ä¾‹ã«å–ã‚Šæ‰±ã‚ã›ã¦é ‚ãã¾ã™ã€‚</p><img src="/images/20231019a/image_2.png" alt="image.png" width="1200" height="394" loading="lazy"><p>ä½†ã—ã€Cloud SQLã®ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆIPã‚¢ãƒ‰ãƒ¬ã‚¹ãŒæ—¢ã«å‰²ã‚ŠæŒ¯ã‚‰ã‚Œã¦ã„ã‚‹å ´åˆã€åºƒå ±å…ˆã®VPCå†…ã§ãã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ãŒæ—¢ã«ä½¿ã‚ã‚Œã¦ã„ã‚‹å ´åˆã¯å¤šã€…ã‚ã‚Šã¾ã™ã€‚ãã®ã‚ˆã†ãªçŠ¶æ³ã§åºƒå ±ã‚’ã—ã¦ã—ã¾ã†ã¨ã€IPã‚¢ãƒ‰ãƒ¬ã‚¹ãŒè¢«ã£ã¦ã—ã¾ã„åºƒå ±ã™ã‚‹ã“ã¨ãŒã§ããªã„ã€ã‚‚ã—ãã¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯äº‹æ•…ã«ã¤ãªãŒã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚ã•ã¦ã€ã“ã®å ´åˆã©ã†ã—ã¾ã—ã‚‡ã†ğŸ¤”</p><h3 id="Cloud-SQL-Auth-Proxy"><a href="#Cloud-SQL-Auth-Proxy" class="headerlink" title="Cloud SQL Auth Proxy"></a>Cloud SQL Auth Proxy</h3><p>ã“ã“ã§å‡ºç•ªã¨ãªã‚‹ã®ãŒã€<a href="https://cloud.google.com/sql/docs/postgres/sql-proxy?hl=ja">Cloud SQL Auth Proxy</a>ã§ã™ã€‚å…¬å¼ã§ã¯ã€ŒCloud SQL Auth Proxyã¯æ‰¿èªæ¸ˆã¿ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚„SSLã®æ§‹æˆã‚’å¿…è¦ã¨ã›ãšã€å®‰å…¨ã«ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹Cloud SQLã‚³ãƒã‚¯ã‚¿ã§ã™ã€ã¨ã‚ã‚Šã€Auth ProxyçµŒç”±ã§Cloud SQLã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¸æ¥ç¶šã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã¾ãŸã€èªå¯ã«IAMæ¨©é™ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã«ãªã‚‹ãŸã‚ã€ã‚ˆã‚Šã‚»ã‚­ãƒ¥ã‚¢ãªæ¥ç¶šã¨ãªã‚Šã¾ã™ã€‚</p><p>ã“ã®Cloud SQL Auth Proxyã‚’åˆ©ç”¨ã—ã¦ã€Cloud SQLã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒå­˜åœ¨ã™ã‚‹VPCå†…å¤–ã‹ã‚‰æ¥ç¶šçµŒè·¯ã‚’æ§‹ç¯‰ã—ã¦ã„ãã¾ã™ã€‚</p><h2 id="Cloud-SQL-Auth-Proxyã‚’åˆ©ç”¨ã—ãŸæ¥ç¶š"><a href="#Cloud-SQL-Auth-Proxyã‚’åˆ©ç”¨ã—ãŸæ¥ç¶š" class="headerlink" title="Cloud SQL Auth Proxyã‚’åˆ©ç”¨ã—ãŸæ¥ç¶š"></a>Cloud SQL Auth Proxyã‚’åˆ©ç”¨ã—ãŸæ¥ç¶š</h2><img src="/images/20231019a/image_3.png" alt="image.png" width="1200" height="397" loading="lazy"><p>ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ä¸Šã§å¤‰ã‚ã£ãŸéƒ¨åˆ†ã¨ã—ã¦ã¯é»„è‰²ã®ç®‡æ‰€ã§ã€Cloud SQLã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒå­˜åœ¨ã™ã‚‹VPC-Aã«Cloud SQL Auth Proxyã‚’ç«‹ã¦ã¦ãŠããŸã‚ã®DB Bastion VMã‚’æ§‹ç¯‰ã—ã¦ãŠãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã¾ãŸã€Cloud SQLã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¯è¤‡æ•°ã‚ã‚‹ã“ã¨ã‚’æƒ³å®šã—ã¦ãŠã‚Šã¾ã™ã€‚</p><p>HA VPNã®æ§‹ç¯‰ã¯å…¬å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ãŠä»»ã›ã—ã¾ã™ã€‚å…¬å¼ãŒTerraformã®ä¾‹ã¾ã§ç”¨æ„ã—ã¦ã„ã‚‹ã®ã¯éå¸¸ã«ã‚ã‚ŠãŒãŸã„ã§ã™ã­ã€‚</p><ul><li><a href="https://cloud.google.com/network-connectivity/docs/vpn/how-to/creating-ha-vpn2?hl=ja#create_an_additional_tunnel_on_a_single-tunnel_gateway">HA VPN ã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤ã‚’ä½œæˆã—ã¦ VPC ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«æ¥ç¶šã™ã‚‹</a></li><li><a href="https://cloud.google.com/network-connectivity/docs/vpn/how-to/automate-vpn-setup-with-terraform?hl=ja">HA VPN ã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤å‘ã‘ã® Terraform ã®ä¾‹</a></li></ul><p>HA VPNæ§‹ç¯‰å¾Œã€DB Bastionã§åˆ©ç”¨ã™ã‚‹ã‚µãƒ–ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ç¯„å›²ã‚’VPC-Bå´ã«åºƒå ±ã™ã‚‹ã“ã¨ã‚’å¿˜ã‚Œãªã„ã‚ˆã†ã«æ°—ã‚’ä»˜ã‘ã¾ã—ã‚‡ã†ã€‚</p><p>ã¾ãŸã€VPC-Bå´ã®VMã®æ§‹ç¯‰ã€VPC-Aå´ã®Cloud SQLã®æ§‹ç¯‰ã«ã¤ã„ã¦ã‚‚çœç•¥ã•ã›ã¦é ‚ãã¾ã™ã€‚<br>ä»¥ä¸‹ã®Terraformå…¬å¼ãŒå‚è€ƒã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><ul><li><a href="https://registry.terraform.io/providers/hashicorp/google/latest/docs/data-sources/compute_instance.html">Compute Engine</a></li><li><a href="https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/sql_database_instance#private-ip-instance">Cloud SQL - Private IP Instance</a></li></ul><p>DB Bastion VMã«ã¤ã„ã¦ã§ã™ãŒã€Startup Scriptã«ã¦Cloud SQL Auth Proxyã‚’systemdã¨ã—ã¦èµ·å‹•ã™ã‚‹ã‚ˆã†ã«è¨­å®šã—ã¦ãŠãã¨ã€èµ·å‹•æ™‚ã«ç¢ºå®Ÿã«Auth ProxyãŒèµ·å‹•ã•ã‚Œã€æ›´ã«çŠ¶æ…‹ã‚’ç®¡ç†ã—ã‚„ã™ããªã‚Šã¾ã™ã€‚</p><p>ä»¥ä¸‹ã«ãã®Startup Scriptã‚’è¨˜è¼‰ã—ã¾ã™ã€‚</p><p>â€»<a href="https://cloud.google.com/sql/docs/postgres/sql-proxy?hl=ja#install">æœ€æ–°ver.ã¯å…¬å¼ã‹ã‚‰ãƒã‚§ãƒƒã‚¯</a>ã—ã¦ãã ã•ã„ã€‚</p><figure class="highlight bash"><figcaption><span>cloudsql_auth_proxy_setup.sh</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment"># Define your variables</span></span><br><span class="line">PROJECT_ID=test_pj</span><br><span class="line"><span class="built_in">declare</span> -a INSTANCES=(<span class="string">&quot;test-db1&quot;</span> <span class="string">&quot;test-db2&quot;</span>)</span><br><span class="line"><span class="built_in">declare</span> -a REGIONS=(<span class="string">&quot;asia-northeast1&quot;</span> <span class="string">&quot;asia-northeast2&quot;</span>)</span><br><span class="line"><span class="built_in">declare</span> -a PORTS=(<span class="string">&quot;5432&quot;</span> <span class="string">&quot;5433&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Download Cloud SQL Auth Proxy from the bucket and isntall</span></span><br><span class="line">curl -o cloud-sql-proxy https://storage.googleapis.com/cloud-sql-connectors/cloud-sql-proxy/v2.6.1/cloud-sql-proxy.linux.amd64</span><br><span class="line"><span class="built_in">mv</span> cloud-sql-proxy /usr/local/bin/</span><br><span class="line"><span class="built_in">chmod</span> +x /usr/local/bin/cloud-sql-proxy</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create systemd service for each Cloud SQL instance</span></span><br><span class="line"><span class="keyword">for</span> index <span class="keyword">in</span> <span class="variable">$&#123;!INSTANCES[*]&#125;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  instance=<span class="variable">$&#123;INSTANCES[$index]&#125;</span></span><br><span class="line">  region=<span class="variable">$&#123;REGIONS[$index]&#125;</span></span><br><span class="line">  port=<span class="variable">$&#123;PORTS[$index]&#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Create a systemd service file</span></span><br><span class="line">  sudo bash -c <span class="string">&quot;cat &lt;&lt;EOF &gt; /etc/systemd/system/cloud-sql-proxy-<span class="variable">$&#123;instance&#125;</span>.service</span></span><br><span class="line"><span class="string">[Unit]</span></span><br><span class="line"><span class="string">Description=Google Cloud SQL Auth Proxy <span class="variable">$&#123;instance&#125;</span></span></span><br><span class="line"><span class="string">After=network.target</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[Service]</span></span><br><span class="line"><span class="string">ExecStart=/usr/local/bin/cloud-sql-proxy --address 0.0.0.0 --private-ip <span class="variable">$&#123;PROJECT_ID&#125;</span>:<span class="variable">$&#123;region&#125;</span>:<span class="variable">$&#123;instance&#125;</span> --port <span class="variable">$&#123;port&#125;</span></span></span><br><span class="line"><span class="string">Restart=always</span></span><br><span class="line"><span class="string">User=root</span></span><br><span class="line"><span class="string">Type=simple</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[Install]</span></span><br><span class="line"><span class="string">WantedBy=multi-user.target</span></span><br><span class="line"><span class="string">EOF&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Enable and start the service</span></span><br><span class="line">  sudo systemctl <span class="built_in">enable</span> cloud-sql-proxy-<span class="variable">$&#123;instance&#125;</span>.service</span><br><span class="line">  sudo systemctl start cloud-sql-proxy-<span class="variable">$&#123;instance&#125;</span>.service</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>ã“ã“ã§æ°—ã‚’ä»˜ã‘ãŸã„ã®ãŒCloud SQL Auth Proxyã®å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰ã§<code>--address</code>ã‚’æŒ‡å®šã™ã‚‹éš›ã«ã€<code>127.0.0.1</code>ã¨æŒ‡å®šã—ã¦ã—ã¾ã†ã¨localhostã‹ã‚‰ã®æ¥ç¶šã—ã‹å—ã‘ä»˜ã‘ãªããªã£ã¦ã—ã¾ã„ã¾ã™ã€‚ä»Šå›ã¯DB Bastionå¤–ã‹ã‚‰æ¥ç¶šã‚’è¡Œã†å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€<code>0.0.0.0</code>ã§æŒ‡å®šã—ã¦ãŠã‚Šã¾ã™ã€‚</p><p>ä½œæˆã—ãŸStartup scriptã¯DB Bastion VMæ§‹ç¯‰æ™‚ã«<code>startup-script</code>ã¨ã—ã¦æŒ‡å®šã—ã¾ã—ã‚‡ã†ã€‚<br>ã¾ãŸã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¿ã‚°ï¼š<code>tags</code>ã‚‚è¨­å®šã—ã¦ãŠãã¾ã™</p><figure class="highlight sh"><figcaption><span>compute_instance.tf</span></figcaption><table><tr><td class="code"><pre><span class="line">resource <span class="string">&quot;google_compute_instance&quot;</span> <span class="string">&quot;db_bastion&quot;</span> &#123;</span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"></span><br><span class="line">    tags = [<span class="string">&quot;db-bastion&quot;</span>]</span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"></span><br><span class="line">    metadata = &#123;</span><br><span class="line">        startup-script = <span class="string">&quot;startup-scripts/cloudsql_auth_proxy_setup.sh&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">#...</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>DBä¸Šã®ãƒ‡ãƒ¼ã‚¿å¤–éƒ¨æŒã¡å‡ºã—ã‚’é˜²ããŸã‚ã«DB Bastionã®EGRESSã‚’å…¨ã¦æ‹’å¦ã—ã¦ã„ã‚‹ã‚±ãƒ¼ã‚¹ã‚‚ã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚ãã®å ´åˆã€Cloud SQL Auth Proxyç”¨ã«<strong>Cloud SQLã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆIPã‚¢ãƒ‰ãƒ¬ã‚¹ã«å¯¾ã—ã¦Port:3307ã‚’ä»‹ã—ãŸEGRESSã‚’è¨±å¯</strong>ã™ã‚‹Firewallã‚’è¨­å®šã—ã¦ãŠãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p>å‚è€ƒï¼š<a href="https://cloud.google.com/sql/docs/mysql/connect-auth-proxy?hl=ja#:~:text=%E9%80%81%E4%BF%A1%E3%83%95%E3%82%A1%E3%82%A4%E3%82%A2%E3%82%A6%E3%82%A9%E3%83%BC%E3%83%AB,%E3%83%87%E3%83%95%E3%82%A9%E3%83%AB%E3%83%88%20%E3%83%9D%E3%83%BC%E3%83%88%E3%81%A7%E3%81%99%E3%80%82">Cloud SQL Auth Proxyã®æ¥ç¶šçµŒè·¯</a></p><figure class="highlight sh"><figcaption><span>compute_firewall.tf</span></figcaption><table><tr><td class="code"><pre><span class="line">resource <span class="string">&quot;google_compute_firewall&quot;</span> <span class="string">&quot;db_bastion2cloudsql&quot;</span> &#123;</span><br><span class="line">  name               = <span class="string">&quot;db-bastion2cloudsql&quot;</span></span><br><span class="line">  network            = &lt;YOUR_VPC_NAME&gt;</span><br><span class="line">  direction          = <span class="string">&quot;EGRESS&quot;</span></span><br><span class="line">  target_tags        = [<span class="string">&quot;db-bastion&quot;</span>]</span><br><span class="line">  destination_ranges = [</span><br><span class="line">    google_sql_database_instance.instance1.ip_address.0.ip_address,</span><br><span class="line">    google_sql_database_instance.instance2.ip_address.0.ip_address,</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">  allow &#123;</span><br><span class="line">    protocol = <span class="string">&quot;tcp&quot;</span></span><br><span class="line">    ports    = [<span class="string">&quot;3307&quot;</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€»<code>google_sql_database_instance.instance1</code>, <code>google_sql_database_instance.instance2</code>ã¨ã„ã†ãƒªã‚½ãƒ¼ã‚¹åã§Cloud SQLã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’æ§‹ç¯‰ã—ã¦ã„ã‚‹ã“ã¨ã‚’æƒ³å®šã—ã¦ãŠã‚Šã¾ã™ã€‚</p><p>ã¾ãŸã€Cloud SQL Auth Proxyã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã‚‚è¿°ã¹ã¾ã—ãŸãŒIAMæ¨©é™ã‚’åˆ©ç”¨ã—ãŸèªå¯ã¨ãªã‚‹ãŸã‚ã€ä»¥ä¸‹ã®æ¨©é™ã‚’DB Bastionã®Service Accountã¸è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><ul><li>roles&#x2F;cloudsql.client</li></ul><p>ã“ã‚Œã§æ§‹ç¯‰ãƒ»è¨­å®šã¯å®Œäº†ã¨ãªã‚Šã¾ã™ã€‚è©¦ã—ã«Cloud SQLã«PostgreSQLã‚’è¨­å®šã—ã€VPC Bã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‹ã‚‰psqlã‚³ãƒãƒ³ãƒ‰ã§æ¥ç¶šã—ã¦ã¿ã¾ã™ã€‚</p><figure class="highlight bash"><figcaption><span>terminal</span></figcaption><table><tr><td class="code"><pre><span class="line">psql <span class="string">&quot;host=&lt;DB Bastion&#x27;s IP address&gt; port=5432 dbname=test_db sslmode=disable user=test_user password=****&quot;</span></span><br><span class="line">psql (12.15 (Ubuntu 12.15-0ubuntu0.20.04.1), server 13.10)</span><br><span class="line">WARNING: psql major version 12, server major version 13.</span><br><span class="line">         Some psql features might not work.</span><br><span class="line">Type <span class="string">&quot;help&quot;</span> <span class="keyword">for</span> <span class="built_in">help</span>.</span><br><span class="line">postgres=&gt;</span><br></pre></td></tr></table></figure><p>ç„¡äº‹ã«æ¥ç¶šã§ãã¾ã—ãŸï¼</p><h2 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h2><p>æœ¬è¨˜äº‹ã§ã¯ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆIPã—ã‹æŒãŸãªã„Cloud SQLã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«å¯¾ã—ã¦ã€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒå­˜åœ¨ã™ã‚‹VPCã®å¤–ã‹ã‚‰Cloud SQL Auth Proxyã‚’ä»‹ã—ã¦æ¥ç¶šã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚</p><p>Cloud SQL Auth Proxyè‡ªä½“ã€å…¨ãã‚­ãƒ£ãƒƒãƒã‚¢ãƒƒãƒ—ãªãç°¡å˜ã«ä½¿ãˆã¦éå¸¸ã«ä¾¿åˆ©ãªã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚<a href="https://cloud.google.com/sql/docs/sqlserver/connect-docker?hl=ja">Cloud SQL Auth Proxy Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã—ãŸ SQL ã‚µãƒ¼ãƒãƒ¼ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®æ¥ç¶š</a>ã§èª¬æ˜ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«Dockerã¨ã—ã¦èµ·å‹•ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ãªã®ã§ã€è‡ªèº«ã®è¦ä»¶ã«åˆã‚ã›ã¦æ§‹æˆã—ã¦ã¿ã¦ä¸‹ã•ã„ã€‚</p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Infrastructure/">Infrastructure</category>
      
      
      <category domain="https://future-architect.github.io/tags/GCP/">GCP</category>
      
      <category domain="https://future-architect.github.io/tags/CloudSQL/">CloudSQL</category>
      
      <category domain="https://future-architect.github.io/tags/CloudSQLAuthProxy/">CloudSQLAuthProxy</category>
      
      
      <comments>https://future-architect.github.io/articles/20231019a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>ã‚¿ã‚°ã‚’åˆ©ç”¨ã—ãŸBigQueryã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡</title>
      <link>https://future-architect.github.io/articles/20231018a/</link>
      <guid>https://future-architect.github.io/articles/20231018a/</guid>
      <pubDate>Tue, 17 Oct 2023 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;h2 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot;</description>
          
        
      
      
      
      <content:encoded><![CDATA[<h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><p>BigQueryã¯å®Œå…¨ãƒãƒãƒ¼ã‚¸ãƒ‰ãªã€ãƒšã‚¿ãƒã‚¤ãƒˆã‚¹ã‚±ãƒ¼ãƒ«ã‹ã¤ã‚³ã‚¹ãƒ‘ã®ã‚ˆã„ãƒ‡ãƒ¼ã‚¿ã‚¦ã‚§ã‚¢ãƒã‚¦ã‚¹ã¨ã—ã¦çŸ¥ã‚‰ã‚Œã¦ãŠã‚Šã¾ã™ã€‚ãã®ãŸã‚ã€ã»ã¼ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è†¨å¤§ãªé‡ã®ãƒ‡ãƒ¼ã‚¿ã‚’è§£æã™ã‚‹ã“ã¨ã‚’å¯èƒ½ã¨ã—ã¦ãŠã‚Šã¾ã™ã€‚</p><p>ä¾¿åˆ©ãªãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹ä¸€æ–¹ã€BigQueryã§å–ã‚Šæ‰±ã†ãƒ‡ãƒ¼ã‚¿ã«ã¯å€‹äººæƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã€é©åˆ‡ãªã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ãŒæœ›ã¾ã‚Œã¾ã™ã€‚<br>æœ¬è¨˜äº‹ã§ã¯ã€Resource Managerã®ã‚¿ã‚°æ©Ÿèƒ½ã‚’åˆ©ç”¨ã—ã¦ã€Terraformã«ã‚ˆã‚‹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã®å®Ÿè£…ã‚’ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><h2 id="Resource-Managerã®ã‚¿ã‚°ã¨ã¯"><a href="#Resource-Managerã®ã‚¿ã‚°ã¨ã¯" class="headerlink" title="Resource Managerã®ã‚¿ã‚°ã¨ã¯"></a>Resource Managerã®ã‚¿ã‚°ã¨ã¯</h2><p>Google Cloudã®ãƒªã‚½ãƒ¼ã‚¹ã«å¯¾ã—ã¦ã€Key-Valueãƒšã‚¢ã§ã‚¿ã‚°ã‚’ä»˜ä¸ã—ã¦IAMã®æ¡ä»¶ã«å«ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹æ©Ÿèƒ½ã§ã™ã€‚</p><p>ä¾‹ãˆã°BigQueryã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§ã‚ã‚Œã°ã€Key:<code>environment</code>ã«å¯¾ã—ã¦Value:<code>dev</code>, <code>stg</code>, <code>prd</code>ã‚’ç”¨æ„ã—ãŸã‚Šã€Key:<code>dataset_type</code>ã«å¯¾ã—ã¦Value:<code>non-pii</code>, <code>pii</code>ï¼ˆå€‹äººæƒ…å ±ã‚’å«ã‚€ã‹å¦ã‹ï¼‰ã‚’ç”¨æ„ã—ãŸã‚Šãªã©ã€ãƒ‡ãƒ¼ã‚¿ã®ç¨®é¡ã«å¿œã˜ã¦ã‚¿ã‚°ã‚’ä»˜ä¸ã—ã¦ã€ã‚ˆã‚Šè©³ç´°ãªæ¡ä»¶ã§IAMã‚’ç®¡ç†ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p><a href="https://cloud.google.com/resource-manager/docs/tags/tags-creating-and-managing?hl=ja#before_you_begin">ã‚¿ã‚°ã®ä½œæˆã¨ç®¡ç† - Google Cloud</a></p><h2 id="Keyã¨Valueã‚’ä½œã£ã¦ã¿ã‚‹"><a href="#Keyã¨Valueã‚’ä½œã£ã¦ã¿ã‚‹" class="headerlink" title="Keyã¨Valueã‚’ä½œã£ã¦ã¿ã‚‹"></a>Keyã¨Valueã‚’ä½œã£ã¦ã¿ã‚‹</h2><p>æ—©é€ŸTerraformã‚’æ›¸ã„ã¦ã„ãã¾ã™ã€‚</p><p>ã‚¿ã‚°ã¯Organizationé…ä¸‹ã§ã®ç®¡ç†ã¨ãªã‚Šã¾ã™ã€‚ã¾ãšã¯Keyã‚’ä½œã‚Šã¾ã™ã€‚</p><figure class="highlight sh"><figcaption><span>tags_tag_key.tf</span></figcaption><table><tr><td class="code"><pre><span class="line">resource <span class="string">&quot;google_tags_tag_key&quot;</span> <span class="string">&quot;env_key&quot;</span> &#123;</span><br><span class="line">  parent      = <span class="string">&quot;organizations/<span class="variable">$&#123;local.organization.id&#125;</span>&quot;</span></span><br><span class="line">  short_name  = <span class="string">&quot;environment&quot;</span></span><br><span class="line">  description = <span class="string">&quot;Environment key&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã“ã®Keyã«å¯¾ã—ã¦Valueã‚’ä½œã‚Šã¾ã™ã€‚</p><figure class="highlight sh"><figcaption><span>tags_tag_value.tf</span></figcaption><table><tr><td class="code"><pre><span class="line">resource <span class="string">&quot;google_tags_tag_value&quot;</span> <span class="string">&quot;dev_tag&quot;</span> &#123;</span><br><span class="line">  parent      = <span class="string">&quot;tagKeys/<span class="variable">$&#123;google_tags_tag_key.env_key.name&#125;</span>&quot;</span></span><br><span class="line">  short_name  = <span class="string">&quot;dev&quot;</span></span><br><span class="line">  description = <span class="string">&quot;Development tag&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource <span class="string">&quot;google_tags_tag_value&quot;</span> <span class="string">&quot;stg_tag&quot;</span> &#123;</span><br><span class="line">  parent      = <span class="string">&quot;tagKeys/<span class="variable">$&#123;google_tags_tag_key.env_key.name&#125;</span>&quot;</span></span><br><span class="line">  short_name  = <span class="string">&quot;stg&quot;</span></span><br><span class="line">  description = <span class="string">&quot;Staging tag&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource <span class="string">&quot;google_tags_tag_value&quot;</span> <span class="string">&quot;prd_tag&quot;</span> &#123;</span><br><span class="line">  parent      = <span class="string">&quot;tagKeys/<span class="variable">$&#123;google_tags_tag_key.env_key.name&#125;</span>&quot;</span></span><br><span class="line">  short_name  = <span class="string">&quot;prd&quot;</span></span><br><span class="line">  description = <span class="string">&quot;Production tag&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é©ç”¨å¾Œã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚<br><img src="/images/20231018a/71638260-a888-a69d-56d2-bcb92fb94825.png" alt="" width="1200" height="489" loading="lazy"></p><p><code>environment</code>ã«å¯¾ã—ã¦ã€<code>dev</code>, <code>stg</code>, <code>prd</code>ã¨ã„ã†Key-Valueãƒšã‚¢ãŒç”Ÿæˆã•ã‚Œã¾ã—ãŸã€‚</p><h2 id="BigQueryã®Datasetã«ã‚¿ã‚°ã‚’ä»˜ä¸ã™ã‚‹"><a href="#BigQueryã®Datasetã«ã‚¿ã‚°ã‚’ä»˜ä¸ã™ã‚‹" class="headerlink" title="BigQueryã®Datasetã«ã‚¿ã‚°ã‚’ä»˜ä¸ã™ã‚‹"></a>BigQueryã®Datasetã«ã‚¿ã‚°ã‚’ä»˜ä¸ã™ã‚‹</h2><p>ä»Šå›ç”Ÿæˆã—ãŸã‚¿ã‚°ã‚’BigQueryã®Datasetã«ä»˜ä¸ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚<br>ã¾ãšã¯ä»¥ä¸‹ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ç”¨æ„ã—ã¾ã™ã€‚</p><figure class="highlight sh"><figcaption><span>bigquery.tf</span></figcaption><table><tr><td class="code"><pre><span class="line">resource <span class="string">&quot;google_bigquery_dataset&quot;</span> <span class="string">&quot;dataset_dev&quot;</span> &#123;</span><br><span class="line">  project    = google_project.project.project_id</span><br><span class="line">  dataset_id = <span class="string">&quot;dataset_dev&quot;</span></span><br><span class="line">  location   = <span class="string">&quot;asia-northeast1&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource <span class="string">&quot;google_bigquery_dataset&quot;</span> <span class="string">&quot;dataset_stg&quot;</span> &#123;</span><br><span class="line">  project    = google_project.project.project_id</span><br><span class="line">  dataset_id = <span class="string">&quot;dataset_stg&quot;</span></span><br><span class="line">  location   = <span class="string">&quot;asia-northeast1&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource <span class="string">&quot;google_bigquery_dataset&quot;</span> <span class="string">&quot;dataset_prd&quot;</span> &#123;</span><br><span class="line">  project    = google_project.project.project_id</span><br><span class="line">  dataset_id = <span class="string">&quot;dataset_prd&quot;</span></span><br><span class="line">  location   = <span class="string">&quot;asia-northeast1&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¸ã‚¿ã‚°ã‚’ä»˜ä¸ã™ã‚‹æ–¹æ³•ã§ã™ãŒã€</p><ul><li>Terraform</li><li>gcloudã‚³ãƒãƒ³ãƒ‰</li><li>Google Cloudã‚³ãƒ³ã‚½ãƒ¼ãƒ«</li></ul><p>ã®3ã¤ã®æ–¹æ³•ãŒå­˜åœ¨ã—ã¾ã™ã€‚</p><h3 id="Terraformã§ã‚¿ã‚°ã‚’ä»˜ä¸ã™ã‚‹"><a href="#Terraformã§ã‚¿ã‚°ã‚’ä»˜ä¸ã™ã‚‹" class="headerlink" title="Terraformã§ã‚¿ã‚°ã‚’ä»˜ä¸ã™ã‚‹"></a>Terraformã§ã‚¿ã‚°ã‚’ä»˜ä¸ã™ã‚‹</h3><p>Terraformã§ã¯ã€<code>google_tags_location_tag_binding</code>ã‚’åˆ©ç”¨ã—ã¦ã‚¿ã‚°ã‚’ä»˜ä¸ã—ã¾ã™ã€‚<br>â€»æœ¬ãƒªã‚½ãƒ¼ã‚¹ã¯ã€ç¾æ™‚ç‚¹ï¼ˆ2023&#x2F;10&#x2F;15ï¼‰ã§ã¯Google Betaã¨ãªã£ã¦ãŠã‚Šã¾ã™ã€‚</p><p><a href="https://registry.terraform.io/providers/hashicorp/google-beta/latest/docs/resources/google_tags_location_tag_binding?source=post_page-----6ec09bc31ae--------------------------------">Terraformå…¬å¼ - google_tags_location_tag_binding</a></p><figure class="highlight sh"><figcaption><span>tags_location_tag_binding.tf</span></figcaption><table><tr><td class="code"><pre><span class="line">data <span class="string">&quot;google_tags_tag_key&quot;</span> <span class="string">&quot;env_key&quot;</span> &#123;</span><br><span class="line">  parent     = <span class="string">&quot;organizations/<span class="variable">$&#123;local.organization.id&#125;</span>&quot;</span></span><br><span class="line">  short_name = <span class="string">&quot;environment&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">data <span class="string">&quot;google_tags_tag_value&quot;</span> <span class="string">&quot;dev_tag&quot;</span> &#123;</span><br><span class="line">  parent     = <span class="string">&quot;tagKeys/<span class="variable">$&#123;data.google_tags_tag_key.env_key.name&#125;</span>&quot;</span></span><br><span class="line">  short_name = <span class="string">&quot;dev&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">data <span class="string">&quot;google_tags_tag_value&quot;</span> <span class="string">&quot;stg_tag&quot;</span> &#123;</span><br><span class="line">  parent     = <span class="string">&quot;tagKeys/<span class="variable">$&#123;data.google_tags_tag_key.env_key.name&#125;</span>&quot;</span></span><br><span class="line">  short_name = <span class="string">&quot;stg&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">data <span class="string">&quot;google_tags_tag_value&quot;</span> <span class="string">&quot;prd_tag&quot;</span> &#123;</span><br><span class="line">  parent     = <span class="string">&quot;tagKeys/<span class="variable">$&#123;data.google_tags_tag_key.env_key.name&#125;</span>&quot;</span></span><br><span class="line">  short_name = <span class="string">&quot;prd&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource <span class="string">&quot;google_tags_location_tag_binding&quot;</span> <span class="string">&quot;dev&quot;</span> &#123;</span><br><span class="line">  provider  = google-beta</span><br><span class="line">  parent    = <span class="string">&quot;//bigquery.googleapis.com/projects/<span class="variable">$&#123;google_project.project_one.project_id&#125;</span>/datasets/<span class="variable">$&#123;google_bigquery_dataset.dataset_dev.dataset_id&#125;</span>&quot;</span></span><br><span class="line">  tag_value = data.google_tags_tag_value.dev_tag.id</span><br><span class="line">  location  = <span class="string">&quot;asia-northeast1&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource <span class="string">&quot;google_tags_location_tag_binding&quot;</span> <span class="string">&quot;stg&quot;</span> &#123;</span><br><span class="line">  provider  = google-beta</span><br><span class="line">  parent    = <span class="string">&quot;//bigquery.googleapis.com/projects/<span class="variable">$&#123;google_project.project_one.project_id&#125;</span>/datasets/<span class="variable">$&#123;google_bigquery_dataset.dataset_stg.dataset_id&#125;</span>&quot;</span></span><br><span class="line">  tag_value = data.google_tags_tag_value.stg_tag.id</span><br><span class="line">  location  = <span class="string">&quot;asia-northeast1&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource <span class="string">&quot;google_tags_location_tag_binding&quot;</span> <span class="string">&quot;prd&quot;</span> &#123;</span><br><span class="line">  provider  = google-beta</span><br><span class="line">  parent    = <span class="string">&quot;//bigquery.googleapis.com/projects/<span class="variable">$&#123;google_project.project_one.project_id&#125;</span>/datasets/<span class="variable">$&#123;google_bigquery_dataset.dataset_prd.dataset_id&#125;</span>&quot;</span></span><br><span class="line">  tag_value = data.google_tags_tag_value.prd_tag.id</span><br><span class="line">  location  = <span class="string">&quot;asia-northeast1&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="gcloudã‚³ãƒãƒ³ãƒ‰ã§ã‚¿ã‚°ã‚’ä»˜ä¸ã™ã‚‹"><a href="#gcloudã‚³ãƒãƒ³ãƒ‰ã§ã‚¿ã‚°ã‚’ä»˜ä¸ã™ã‚‹" class="headerlink" title="gcloudã‚³ãƒãƒ³ãƒ‰ã§ã‚¿ã‚°ã‚’ä»˜ä¸ã™ã‚‹"></a>gcloudã‚³ãƒãƒ³ãƒ‰ã§ã‚¿ã‚°ã‚’ä»˜ä¸ã™ã‚‹</h3><p>ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ä»˜ä¸ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><figure class="highlight bash"><figcaption><span>terminal</span></figcaption><table><tr><td class="code"><pre><span class="line">gcloud alpha resource-manager tags bindings create \</span><br><span class="line">    --tag-value=&lt;ORGANIZATION_ID&gt;/environment/dev \</span><br><span class="line">    --parent=//bigquery.googleapis.com/projects/my_project/datasets/dataset_dev \</span><br><span class="line">    --location=asia-northeast1</span><br></pre></td></tr></table></figure><p>æ¨©é™ãŒä¸è¶³ã—ã¦ã„ã‚‹å ´åˆã¯ã€Organizationã«ã¦ä»¥ä¸‹ã®æ¨©é™ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚</p><ul><li>roles&#x2F;resourcemanager.tagUser</li></ul><h3 id="ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã‚¿ã‚°ã‚’ä»˜ä¸ã™ã‚‹"><a href="#ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã‚¿ã‚°ã‚’ä»˜ä¸ã™ã‚‹" class="headerlink" title="ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã‚¿ã‚°ã‚’ä»˜ä¸ã™ã‚‹"></a>ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã‚¿ã‚°ã‚’ä»˜ä¸ã™ã‚‹</h3><p>BigQueryã®ãƒšãƒ¼ã‚¸ã‹ã‚‰ã€ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆæƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚<br>ã“ã®ç”»é¢ã‹ã‚‰è©³ç´°ã‚’ç·¨é›†ã«ç§»å‹•ã—ã¦ä¸‹ã•ã„ã€‚</p><img src="/images/20231018a/fe171bd5-fe90-8ef9-cb20-1eeb945b2560.png" alt="" width="1200" height="499" loading="lazy"><p>ã‚¿ã‚°ã‚’è¿½åŠ ã‚’æŠ¼ã™ã“ã¨ã§ã€æ‰€æœ›ã®ã‚¿ã‚°ã‚’ä»˜ä¸ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><img src="/images/20231018a/4358d88e-757f-d924-3c7f-a6a0a59ae98c.png" alt="" width="852" height="1222" loading="lazy"><p>ä»˜ä¸ã•ã‚ŒãŸã‚¿ã‚°ã¯ã€Œã‚¿ã‚°ã€ã®ç®‡æ‰€ã«è¨˜è¼‰ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><img src="/images/20231018a/a310bef6-a3e4-fa3f-713c-4118f1f30511.png" alt="" width="1200" height="492" loading="lazy"><h2 id="IAMã‚’ä»˜ä¸ã™ã‚‹"><a href="#IAMã‚’ä»˜ä¸ã™ã‚‹" class="headerlink" title="IAMã‚’ä»˜ä¸ã™ã‚‹"></a>IAMã‚’ä»˜ä¸ã™ã‚‹</h2><p>ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«ã‚¿ã‚°ã‚‚ä»˜ä¸ã§ããŸã®ã§ã€æœ€å¾Œã«IAMã‚’ä»˜ä¸ã—ã¾ã—ã‚‡ã†ã€‚<br>IAMæ¡ä»¶ã‚‚è¨˜è¼‰ã—ã€<code>dev</code>ã‚¿ã‚°ãŒä¸€è‡´ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®ã¿ã‚’é–²è¦§è¨±å¯ã—ã¾ã™ã€‚</p><figure class="highlight sh"><figcaption><span>project_iam_member.tf</span></figcaption><table><tr><td class="code"><pre><span class="line">resource <span class="string">&quot;google_project_iam_member&quot;</span> <span class="string">&quot;test_user&quot;</span> &#123;</span><br><span class="line">  project = google_project.project.project_id</span><br><span class="line">  role    = <span class="string">&quot;roles/bigquery.dataViewer&quot;</span></span><br><span class="line">  member  = <span class="string">&quot;user:test@xxx.com&quot;</span></span><br><span class="line">  condition &#123;</span><br><span class="line">    title       = <span class="string">&quot;only-dev&quot;</span></span><br><span class="line">    expression  = <span class="string">&quot;resource.matchTag(\&quot;<span class="variable">$&#123;local.organization.id&#125;</span>/environment\&quot;, \&quot;dev\&quot;)&quot;</span></span><br><span class="line">    description = <span class="string">&quot;Only view the dataset with tag of dev.&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é©ç”¨å¾Œã€BigQueryã‚’è¦‹ã¦ã¿ã‚‹ã¨ã¡ã‚ƒã‚“ã¨devã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®ã¿ãŒè¦‹ãˆã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚</p><img src="/images/20231018a/aab47fe7-e64b-ad96-2772-2434b2a716fd.png" alt="" width="1200" height="616" loading="lazy"><h2 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h2><p>æœ¬è¨˜äº‹ã§ã¯ã‚¿ã‚°ã‚’åˆ©ç”¨ã—ãŸBigQueryãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™åˆ¶å¾¡ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã—ãŸã€‚</p><p>ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ1ã¤1ã¤ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã‚’è¡Œã†ã«ã¯ã€å„ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«å¯¾ã—ã¦IAM(roles&#x2F;bigquery.dataViewerãªã©)ã‚’å‰²ã‚Šå½“ã¦ã‚‹å¿…è¦ãŒã‚ã£ãŸã®ã§ã™ãŒã€ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«ä»˜ä¸ã•ã‚ŒãŸã‚¿ã‚°ã§ã¾ã¨ã‚ã¦IAMã‚’ç®¡ç†ã§ãã‚‹ã¨é©åˆ‡ãªç²’åº¦ã§ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ãŒã§ãã€ã‚¿ã‚°ã§é–²è¦§å¯èƒ½ãªç¯„å›²ãŒã¾ã¨ã‚ã‚‰ã‚Œã‚‹ã®ã§ç®¡ç†ã‚‚æ¥½ã§ãã‚‹ãªãƒ¼ã¨æ€ã„ã¾ã—ãŸã€‚</p><p>ãƒ‡ãƒ¼ã‚¿ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’å¼·å›ºã«ã™ã‚‹ã«ã¯ã€å†…éƒ¨ã®ãƒ¡ãƒ³ãƒãƒ¼ã«å¯¾ã—ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã‚‚éå¸¸ã«é‡è¦ã¨ãªã‚Šã¾ã™ã€‚ãœã²ã‚¿ã‚°ãƒ™ãƒ¼ã‚¹ã®IAMåˆ¶å¾¡ã‚’è©¦ã—ã¦ã¿ã¦ã¯ã„ã‹ãŒã§ã—ã‚‡ã†ã‹ï¼Ÿ</p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Infrastructure/">Infrastructure</category>
      
      
      <category domain="https://future-architect.github.io/tags/GCP/">GCP</category>
      
      <category domain="https://future-architect.github.io/tags/IAM/">IAM</category>
      
      <category domain="https://future-architect.github.io/tags/BigQuery/">BigQuery</category>
      
      <category domain="https://future-architect.github.io/tags/%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E5%88%B6%E5%BE%A1/">ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡</category>
      
      
      <comments>https://future-architect.github.io/articles/20231018a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>å®Ÿå‹™çµŒé¨“ã‚¼ãƒ­ã‹ã‚‰ã®ã‚¢ãƒ«ãƒã‚¤ãƒˆä½“é¨“è¨˜</title>
      <link>https://future-architect.github.io/articles/20231017a/</link>
      <guid>https://future-architect.github.io/articles/20231017a/</guid>
      <pubDate>Mon, 16 Oct 2023 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;img src=&quot;/images/20231017a/Pixel_Working_11.jpg&quot; alt=&quot;&quot; width=&quot;900&quot; height=&quot;370&quot;&gt;

&lt;h2 id=&quot;è‡ªå·±ç´¹ä»‹&quot;&gt;&lt;a href=&quot;#è‡ªå·±ç´¹ä»‹&quot; class=&quot;headerlink&quot;</description>
          
        
      
      
      
      <content:encoded><![CDATA[<img src="/images/20231017a/Pixel_Working_11.jpg" alt="" width="900" height="370"><h2 id="è‡ªå·±ç´¹ä»‹"><a href="#è‡ªå·±ç´¹ä»‹" class="headerlink" title="è‡ªå·±ç´¹ä»‹"></a>è‡ªå·±ç´¹ä»‹</h2><p>SAIG(=Strategic AI Group)ã§ã‚¢ãƒ«ãƒã‚¤ãƒˆã¨ã—ã¦åƒã„ã¦ã„ã‚‹æˆ¸åŒ—ã§ã™ã€‚<a href="https://jobs.atcoder.jp/">AtCoderJobs</a>ã‹ã‚‰ã‚¢ãƒ«ãƒã‚¤ãƒˆã«å¿œå‹Ÿã—ã¦ã€ç¾åœ¨6ãƒ¶æœˆãã‚‰ã„å‹¤å‹™ã—ã¦ã„ã¾ã™ã€‚</p><p>è¨˜äº‹ã‚’åŸ·ç­†ã™ã‚‹æ©Ÿä¼šã‚’ã„ãŸã ã„ãŸã®ã§ã€ã‚¢ãƒ«ãƒã‚¤ãƒˆä½“é¨“è¨˜ã¨é¡Œã—ã¦ã€ã“ã®åŠå¹´ã§è¡Œã£ãŸæ¥­å‹™ã‚„ãã®æ„Ÿæƒ³ã€æˆé•·ã§ããŸã“ã¨ã‚’æŒ¯ã‚Šè¿”ã‚Šã¾ã™ã€‚</p><h2 id="ã‚¢ãƒ«ãƒã‚¤ãƒˆãŒå§‹ã¾ã‚‹ã¾ã§"><a href="#ã‚¢ãƒ«ãƒã‚¤ãƒˆãŒå§‹ã¾ã‚‹ã¾ã§" class="headerlink" title="ã‚¢ãƒ«ãƒã‚¤ãƒˆãŒå§‹ã¾ã‚‹ã¾ã§"></a>ã‚¢ãƒ«ãƒã‚¤ãƒˆãŒå§‹ã¾ã‚‹ã¾ã§</h2><p>ç§ã¯ã€æƒ…å ±å·¥å­¦ã‚’å°‚æ”»ã—ã¦ãŠã‚‰ãšã€ã¾ãŸã€å®Ÿå‹™çµŒé¨“ãŒãªã‹ã£ãŸã®ã§ã€å°±è·ã‚’è€ƒãˆã‚‹ä¸Šã§ã€ã¾ãšã¯ä½•ã‹ITæ¥­ç•Œã§ã®çµŒé¨“ã‚’ç©ã‚“ã§ã¿ã‚ˆã†ã¨è€ƒãˆã¾ã—ãŸã€‚</p><p>ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã«ã¤ã„ã¦ã¯ã€ã»ã¼ç‹¬å­¦ã§ã€ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã«é–¢é€£ã™ã‚‹è©±é¡Œã«çŸ¥è­˜ãŒåã£ã¦ã„ã¦ã€ã¾ãŸã€Gitã‚„VSCodeç­‰ã‚’ã¾ã¨ã‚‚ã«ä½¿ã£ãŸã“ã¨ãŒã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ãã®ãŸã‚ã€ã‚ˆãã‚ã‚‹ITç³»ã®ã‚¢ãƒ«ãƒã‚¤ãƒˆã«å¿œå‹Ÿã—ã¦ã‚‚ã€ãƒŸã‚¹ãƒãƒƒãƒãŒèµ·ã“ã‚Šãã†ã ã¨è€ƒãˆã¦ã„ã¾ã—ãŸã€‚</p><p>ãã“ã§ã€ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã¸ã®ç†è§£ãŒã‚ã‚Šãã†ãªä¼æ¥­ã§åƒãã“ã¨ã‚’æ±ºã‚ã€<a href="https://jobs.atcoder.jp/offers/11">ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®æ©Ÿæ¢°å­¦ç¿’ãƒ»AIç ”ç©¶é–‹ç™ºè€…/ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚¢ãƒ«ãƒã‚¤ãƒˆ</a>ã«å¿œå‹Ÿã—ã€æ¡ç”¨ã•ã‚Œã¾ã—ãŸã€‚</p><p>æ¡ç”¨ã•ã‚Œã‚‹ã¨ã€ã¯ã˜ã‚ã«ã€ãã‚Œãã‚Œã®èˆˆå‘³ãƒ»é–¢å¿ƒã«åˆã‚ã›ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å‰²ã‚Šå½“ã¦ã‚‰ã‚Œã¾ã™ã€‚<br>ç§ã¯ã€ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã®æœ€é©åŒ–ã‚’è¡Œã†ã‚¨ãƒ³ã‚¸ãƒ³ã‚’é–‹ç™ºã™ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«åŠ ã‚ã‚‹ã“ã¨ã«ãªã‚Šã¾ã—ãŸã€‚</p><h2 id="æ¥­å‹™å†…å®¹"><a href="#æ¥­å‹™å†…å®¹" class="headerlink" title="æ¥­å‹™å†…å®¹"></a>æ¥­å‹™å†…å®¹</h2><p>ç§ãŒã“ã‚Œã¾ã§ã«è¡Œã£ã¦ããŸæ¥­å‹™ã‚’ã€å¤§ã¾ã‹ã«3ã¤ã«åˆ†ã‘ã¦ãã‚Œãã‚Œèª¬æ˜ã—ã¾ã™ã€‚</p><ul><li>ãƒ†ã‚¹ãƒˆã®ä½œæˆ<ul><li>ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã®æœ€é©åŒ–ã‚’è¡Œã†ä¸Šã§ã€å…¥åŠ›ã‚’å—ã‘å–ã£ã¦ã€ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’é©ç”¨ã§ãã‚‹çŠ¶æ…‹ã¾ã§ãƒ‡ãƒ¼ã‚¿ã‚’å¤‰å½¢ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</li><li>ãã®éç¨‹ãŒã¨ã¦ã‚‚è¤‡é›‘ãªã®ã§ã€é•åãªå…¥åŠ›ã‚’æ­£ã—ãæ¤œå‡ºã§ãã‚‹ã‹ã€æ„å›³ã—ãŸã‚¨ãƒ©ãƒ¼å‡¦ç†ãŒã§ãã¦ã„ã‚‹ã®ã‹ç­‰ã‚’ç¢ºèªã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚</li><li>ä»–ã«ã¯ã€å°ã•ãªå…¥åŠ›ã‚’ä¸ãˆã¦ã€äºˆæœŸã—ãŸå‡ºåŠ›ã‚’å¾—ã‚‰ã‚Œã‚‹ã‹ã‚’ç¢ºèªã™ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚</li></ul></li><li>æŒ™å‹•ã®èª¿æŸ»<ul><li>ä¾‹ãˆã°ã€æ„å›³ã—ã¦ã„ãŸå‹•ä½œãŒè¡Œã‚ã‚Œã¦ã„ã‚‹ã‹åˆ†ã‹ã‚‰ãªã„ã¨ãã€ã‚ã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ç‰¹å®šã®å€¤ã«è¨­å®šã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã¨ããªã©ã«ã€èª¿æŸ»ã—ã¦åŸå› ã‚’ç‰¹å®šã—ã¾ã™</li></ul></li><li>å°è¦æ¨¡ãªæ©Ÿèƒ½ã®è¿½åŠ <ul><li>ã–ã£ãã‚Šã—ã¦ã„ã‚‹ã®ã§ã€ä¸€ã¤å…·ä½“ä¾‹ã‚’æŒ™ã’ã¾ã™ã€‚ã‚‚ã¨ã‚‚ã¨ã€ãƒ†ã‚¹ãƒˆã§ã¯ãã‚Œãã‚Œã€ãƒ•ã‚©ãƒ«ãƒ€ã«å…¥åŠ›ã«å¿…é ˆãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’10å€‹ç¨‹åº¦å…¥ã‚Œã¦ãŠãå¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚ãã“ã§ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¨­å®šã—ã€ãã‚Œã‚’ä½¿ã„å›ã™ã“ã¨ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šæ¸›ã—ã¾ã—ãŸã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ã£ã¦ã„ãªã„ã¨ã„ã†ã“ã¨ãŒã€ãã®ãƒ•ã‚¡ã‚¤ãƒ«ã§ç‰¹æ®Šãªå…¥åŠ›ã‚’ã—ã¦ã„ã‚‹ã“ã¨ã¨å¯¾å¿œã™ã‚‹ã‚ˆã†ã«ãªã‚‹ã®ã§ã€ãƒ†ã‚¹ãƒˆã®æ„å›³ãŒæ˜ç¤ºçš„ã«ãªã‚Šã¾ã—ãŸã€‚</li><li>ä»–ã«ã¯ã€ã‚¨ãƒ©ãƒ¼ã®å‡¦ç†ã‚’è¿½åŠ ã—ãŸã“ã¨ã‚„ã€ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç­‰ã‚’ä¸€æ‹¬ã§ç®¡ç†ã§ãã‚‹ã‚ˆã†ã«ã—ãŸã“ã¨ãªã©ã‚‚ã‚ã‚Šã¾ã™</li></ul></li></ul><h2 id="ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®SAIGã§ã‚¢ãƒ«ãƒã‚¤ãƒˆã—ã¦è‰¯ã‹ã£ãŸç‚¹"><a href="#ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®SAIGã§ã‚¢ãƒ«ãƒã‚¤ãƒˆã—ã¦è‰¯ã‹ã£ãŸç‚¹" class="headerlink" title="ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®SAIGã§ã‚¢ãƒ«ãƒã‚¤ãƒˆã—ã¦è‰¯ã‹ã£ãŸç‚¹"></a>ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®SAIGã§ã‚¢ãƒ«ãƒã‚¤ãƒˆã—ã¦è‰¯ã‹ã£ãŸç‚¹</h2><p>æ¬¡ã«ã€æ¥­å‹™å†…å®¹ã®è‰¯ã„ç‚¹ã¨ã€æ¥­å‹™ã‚’è¡Œã†ç’°å¢ƒã®è‰¯ã„ç‚¹ã‚’ãã‚Œãã‚ŒæŒ™ã’ã¾ã™ã€‚</p><h3 id="æ¥­å‹™å†…å®¹ã®è‰¯ã„ç‚¹-ï½ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚³ãƒ³ãƒ†ã‚¹ãƒˆã¨å®Ÿå‹™ã®ã‹ã‹ã‚ã‚Šã«ã¤ã„ã¦ï½"><a href="#æ¥­å‹™å†…å®¹ã®è‰¯ã„ç‚¹-ï½ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚³ãƒ³ãƒ†ã‚¹ãƒˆã¨å®Ÿå‹™ã®ã‹ã‹ã‚ã‚Šã«ã¤ã„ã¦ï½" class="headerlink" title="æ¥­å‹™å†…å®¹ã®è‰¯ã„ç‚¹ ï½ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚³ãƒ³ãƒ†ã‚¹ãƒˆã¨å®Ÿå‹™ã®ã‹ã‹ã‚ã‚Šã«ã¤ã„ã¦ï½"></a>æ¥­å‹™å†…å®¹ã®è‰¯ã„ç‚¹ ï½ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚³ãƒ³ãƒ†ã‚¹ãƒˆã¨å®Ÿå‹™ã®ã‹ã‹ã‚ã‚Šã«ã¤ã„ã¦ï½</h3><p>ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼SAIGã‚¢ãƒ«ãƒã‚¤ãƒˆã®ç‰¹ç­†ã™ã¹ãé­…åŠ›ã‚’ä¼ãˆãŸã„ã®ã§ã€æ¥­å‹™å†…å®¹ã®è‰¯ã„ç‚¹ã‚’ã€ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã¨ã®ã‹ã‹ã‚ã‚Šã¨ã„ã†å´é¢ã‹ã‚‰æ›¸ãã¾ã™ã€‚</p><p>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§æ‰±ã†ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã®æœ€é©åŒ–å•é¡Œã¯ã€ç¾å®Ÿçš„ãªæ™‚é–“ã§æœ€é©è§£ã‚’æ±‚ã‚ã‚‹ã“ã¨ãŒã§ããªã„ã‚ˆã†ãªå•é¡Œã®ã†ã¡ã®ä¸€ã¤ã§ã‚ã‚‹ã¨çŸ¥ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚³ãƒ³ãƒ†ã‚¹ãƒˆã¯ã€ã“ã®ã‚ˆã†ãªå•é¡Œã«å¯¾ã—ã¦ã€å‡ºæ¥ã‚‹ã ã‘è‰¯ã„è§£ã‚’æ±‚ã‚ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ãã‚³ãƒ³ãƒ†ã‚¹ãƒˆã§ã™ã€‚</p><p>ãã®ã‚ˆã†ãªå•é¡Œã®ä¾‹ã¨ã—ã¦ã€<a href="https://future-architect.github.io/articles/20211201a/">å·¡å›ã‚»ãƒ¼ãƒ«ã‚¹ãƒãƒ³å•é¡Œ</a>ã‚’è€ƒãˆã¾ã™ã€‚ç°¡å˜ã«èª¬æ˜ã™ã‚‹ã¨ã€ã‚»ãƒ¼ãƒ«ã‚¹ãƒãƒ³ãŒã€ã‚ã‚‹åœ°ç‚¹ã‚’å‡ºç™ºã—ã€ã„ãã¤ã‹å­˜åœ¨ã™ã‚‹éƒ½å¸‚ã™ã¹ã¦ã‚’ä¸€åº¦ãšã¤å·¡ã£ã¦ã‚‚ã¨ã„ãŸåœ°ç‚¹ã«æˆ»ã‚‹ã‚ˆã†ãªæœ€çŸ­çµŒè·¯ã‚’æ±‚ã‚ã‚‹ã¨ã„ã†å•é¡Œã§ã™ã€‚</p><p>ä¾‹ãˆã°ã€éƒ½å¸‚ <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="0.781ex" height="1.52ex" role="img" focusable="false" viewBox="0 -661 345 672"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g></g></g></svg></mjx-container> ã‹ã‚‰ éƒ½å¸‚ <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.462ex;" xmlns="http://www.w3.org/2000/svg" width="0.932ex" height="1.957ex" role="img" focusable="false" viewBox="0 -661 412 865"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D457" d="M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z"></path></g></g></g></svg></mjx-container> ã«è·é›¢ <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.666ex;" xmlns="http://www.w3.org/2000/svg" width="3.717ex" height="2.211ex" role="img" focusable="false" viewBox="0 -683 1642.9 977.2"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"></path></g><g data-mml-node="TeXAtom" transform="translate(861,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(345,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(623,0)"><path data-c="1D457" d="M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z"></path></g></g></g></g></g></svg></mjx-container> ã§ç§»å‹•ã™ã‚‹ã¨ã„ã†è¨­å®šã¯ã€å®Ÿå‹™ã§ã¯ã€åœ°å›³ä¸Šã®åœ°ç‚¹ <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="0.781ex" height="1.52ex" role="img" focusable="false" viewBox="0 -661 345 672"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g></g></g></svg></mjx-container> ã‹ã‚‰ <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.462ex;" xmlns="http://www.w3.org/2000/svg" width="0.932ex" height="1.957ex" role="img" focusable="false" viewBox="0 -661 412 865"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D457" d="M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z"></path></g></g></g></svg></mjx-container> ã« <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.666ex;" xmlns="http://www.w3.org/2000/svg" width="3.717ex" height="2.211ex" role="img" focusable="false" viewBox="0 -683 1642.9 977.2"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"></path></g><g data-mml-node="TeXAtom" transform="translate(861,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(345,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(623,0)"><path data-c="1D457" d="M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z"></path></g></g></g></g></g></svg></mjx-container> æ™‚é–“ã§ç§»å‹•ã™ã‚‹ã“ã¨ã«å¯¾å¿œã—ã¾ã™ã€‚åœ°å›³ä¸Šã®2åœ°ç‚¹ã¨ã€ç§»å‹•ã™ã‚‹é“è·¯ãŒè¨ˆç®—ã§ãã‚‹ã¨ã€ç¾å®Ÿã«å­˜åœ¨ã™ã‚‹ã‚»ãƒ¼ãƒ«ã‚¹ãƒãƒ³ãŒè»Šã«ä¹—ã‚Šã€è¨ˆç®—ã—ãŸçµŒè·¯ã«æ²¿ã£ã¦è»Šã‚’é‹è»¢ã—ã¦ç§»å‹•ã™ã‚‹æ§˜å­ã‚’ã‚ã‚Šã‚ã‚Šã¨æ€ã„æµ®ã‹ã¹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚³ãƒ³ãƒ†ã‚¹ãƒˆã«å‚åŠ ã—ãŸã“ã¨ãŒã‚ã‚‹æ–¹ãªã‚‰ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒå®Œæˆã—ãŸã‚‰ã€æä¾›ã•ã‚ŒãŸãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚¶ã‚’ä½¿ã£ã¦è§£ã‚’å¯è¦–åŒ–ã—ã¦ã€ãã‚Œã‚’ã†ã£ã¨ã‚Šã¨çœºã‚ãŸã“ã¨ãŒã‚ã‚‹æ–¹ã‚‚å¤šã„ã¨æ€ã„ã¾ã™ã€‚ã“ã®æ¥­å‹™ã§ã¯ã€ãã‚Œã«å®Ÿåœ¨ã™ã‚‹äººé–“ãŒå‹•ã„ã¦ã„ã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒä¼´ã„ã¾ã™ã€‚ç¾å®Ÿã®å•é¡Œã‚’è§£æ±ºã—ã¦ã„ã‚‹ã¨ã„ã†å®Ÿæ„ŸãŒå¾—ã‚‰ã‚Œã‚‹ã®ã¯ã€æ¥½ã—ã„ã§ã™ã—ã€ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã«ãªã‚Šã¾ã™ã€‚</p><h3 id="æ¥­å‹™ã‚’è¡Œã†ç’°å¢ƒã®è‰¯ã„ç‚¹"><a href="#æ¥­å‹™ã‚’è¡Œã†ç’°å¢ƒã®è‰¯ã„ç‚¹" class="headerlink" title="æ¥­å‹™ã‚’è¡Œã†ç’°å¢ƒã®è‰¯ã„ç‚¹"></a>æ¥­å‹™ã‚’è¡Œã†ç’°å¢ƒã®è‰¯ã„ç‚¹</h3><p>ä¸€ã¤ãšã¤åˆ—æŒ™ã—ã¦èª¬æ˜ã—ã¾ã™ã€‚</p><ul><li>PCãŒæ”¯çµ¦ã•ã‚Œã€ãã‚Œã‚’ä½¿ã£ã¦ãƒªãƒ¢ãƒ¼ãƒˆã§æ¥­å‹™ã‚’è¡Œã„ã¾ã™ã€‚ç§»å‹•æ™‚é–“ãŒè² æ‹…ã«ãªã‚‰ãšã€åƒãæ™‚é–“å¸¯ã«ã‚‚èé€šãŒåˆ©ãã®ã§ã€ã‚ã‚ŠãŒãŸã„ã§ã™</li><li>å€‹äººã®ç¿’ç†Ÿåº¦ã«ã‚ˆã£ã¦ã€ç²’åº¦ã‚„é›£æ˜“åº¦ã®ç•°ãªã‚‹ã‚¿ã‚¹ã‚¯ã‚’è¡Œãˆã¾ã™<ul><li>ã‚¿ã‚¹ã‚¯ã‚’é †ã«ã“ãªã—ãªãŒã‚‰ã€è‡ªç„¶ã«çŸ¥è­˜ã‚„çµŒé¨“ã‚’å¢—ã‚„ã—ã¦ã€è¡Œãˆã‚‹ä½œæ¥­ã®å¹…ã‚’å¢—ã‚„ã›ã‚‹ã®ã§ã€ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä¿ã¡ã‚„ã™ã„ã§ã™</li></ul></li><li>å®šæœŸçš„ã«ä¸Šé•·ã«æ¬¡ã«è¡Œã„ãŸã„ã‚¿ã‚¹ã‚¯ã®æ–¹å‘æ€§ã‚„ã€æ¥­å‹™ã‚’è¡Œã†ä¸Šã§ã®æ‚©ã¿ç­‰ã‚’ç›¸è«‡ã§ãã¾ã™<ul><li>ã‚¿ã‚¹ã‚¯ã‚’è¡Œã†ä¸Šã§ã®ã‚„ã‚Šã¨ã‚Šã§ã¯ä¼ãˆã«ãã„æ„æ€ã‚„æ„Ÿæƒ…ã‚’ä¼ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™</li></ul></li><li>æ¥­å‹™ä¸Šã®è³ªå•ã‚’ã—ã‚„ã™ã„é›°å›²æ°—ãŒé†¸æˆã•ã‚Œã¦ã„ã¾ã™<ul><li>è¡Œãè©°ã¾ã£ãŸã¨ãã‚„ã€ç–‘å•ãŒæµ®ã‹ã‚“ã ã¨ãã«ã€ãƒãƒ£ãƒƒãƒˆã§æ°—æ¥½ã«è³ªå•ã§ãã¾ã™</li></ul></li></ul><p>ç·ã˜ã¦ã€å€‹ã€…äººã«å¿œã˜ãŸé©å½“ãªã‚¿ã‚¹ã‚¯ã‚’é †ã«ã“ãªã—ã¦ã€éå‰°ãªè² æ‹…ãŒã‹ã‹ã‚‰ãšã«è‡ªç„¶ã«æˆé•·ã§ãã‚‹ã‚ˆã†ãªç’°å¢ƒãŒæ•´ãˆã‚‰ã‚Œã¦ã„ã‚‹ã“ã¨ã¯ã€ã‚¢ãƒ«ãƒã‚¤ãƒˆã«å¿œå‹Ÿã™ã‚‹å´ã‹ã‚‰ã™ã‚‹ã¨ç‰¹ã«è‰¯ã„ç‚¹ã ã¨æ€ã„ã¾ã™ã€‚</p><h2 id="èº«ã«ã¤ã„ãŸã“ã¨"><a href="#èº«ã«ã¤ã„ãŸã“ã¨" class="headerlink" title="èº«ã«ã¤ã„ãŸã“ã¨"></a>èº«ã«ã¤ã„ãŸã“ã¨</h2><p>æ¥­å‹™ã«å–ã‚Šçµ„ã‚€ä¸Šã§ã€æœ€é©åŒ–ã‚¨ãƒ³ã‚¸ãƒ³ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’è¦‹ã‚‹æ©Ÿä¼šãŒå¤šãã€ãã“ã‹ã‚‰ã„ã‚ã„ã‚ãªã“ã¨ã‚’å¸åã§ãã¾ã™ã€‚å…·ä½“çš„ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚</p><ul><li>é©åˆ‡ãªã‚³ãƒ¡ãƒ³ãƒˆã€å¤‰æ•°ã®å‘½åã®ä»•æ–¹</li><li>ã‚¨ãƒ©ãƒ¼ã®å‡¦ç†ã€é©åˆ‡ãªãƒ­ã‚°ã‚„ã‚¨ãƒ©ãƒ¼ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</li><li>ä½•ã‚’ãƒ†ã‚¹ãƒˆã¨ã—ã¦è¨˜è¿°ã™ã¹ãã‹ã€ã©ã®ã‚ˆã†ãªãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã§ãƒ†ã‚¹ãƒˆã‚’è¡Œãˆã°ã‚ˆã„ã‹</li><li>æ§‹é€ ä½“ç­‰ã‚’ä½¿ã£ã¦ã€è¤‡é›‘ãªå•é¡Œã‚’ã†ã¾ãåˆ‡ã‚Šåˆ†ã‘ã‚‹æ–¹æ³•</li></ul><p>æ¬¡ã«ã€ãã‚Œä»¥å¤–ã®ã“ã¨ã‚’æŒ™ã’ã¾ã™ã€‚</p><ul><li>Git ã‚„ VSCode ã®åŸºæœ¬çš„ãªæ“ä½œ<ul><li>å§‹ã‚ãŸé ƒã¯ã„ã‚ã„ã‚ã¨è‹¦æˆ¦ã—ã¦ã„ã¾ã—ãŸãŒã€æ¥­å‹™ã‚’é€²è¡Œã™ã‚‹ä¸Šã§å·®ã—éšœã‚ŠãŒãªã„ç¨‹åº¦ã«ã¯è¦šãˆã¾ã—ãŸ</li></ul></li><li>å ±å‘Šã‚„è³ªå•ç­‰ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³<ul><li>å§‹ã‚ãŸé ƒã¯ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ä¸Šã®å•é¡Œã‚’ã©ã®ãã‚‰ã„è‡ªç„¶è¨€èªã«å¯„ã›ã¦èª¬æ˜ã™ã‚‹ã¹ããªã®ã‹ã€è¦é ˜ãŒã¤ã‹ã‚ãšã«æ‚©ã‚“ã§ã„ãŸè¨˜æ†¶ãŒã‚ã‚Šã¾ã™</li><li>æ€§æ ¼çš„ã«æ‰‹ãŒè©°ã¾ã£ãŸã‚‰ä½•ã¨ã‹ã§ããªã„ã‹é•·æ™‚é–“è€ƒãˆã¦ã—ã¾ã†ã“ã¨ãŒå¤šã‹ã£ãŸã§ã™ãŒã€è‡ªåˆ†ã®çŸ¥è­˜ã€ç†è§£ã§è§£æ±ºã§ãã‚‹å•é¡Œãªã®ã‹ã‚’è€ƒãˆç›´ã—ã¦ã€é©å½“ãªã¨ã“ã‚ã§è¦‹åˆ‡ã‚Šã‚’ã¤ã‘ã¦ã€ç¾çŠ¶ã‚’ãã¡ã‚“ã¨èª¬æ˜ã™ã‚‹ã‚ˆã†ã«å¿ƒãŒã‘ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ</li></ul></li></ul><h2 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h2><p>ã“ã“ã¾ã§ã®å†…å®¹ã‚’ç°¡å˜ã«ã¾ã¨ã‚ã¾ã™ã€‚</p><ul><li>ç§ã¯ã€ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã®æœ€é©åŒ–ã‚’è¡Œã†ã‚¨ãƒ³ã‚¸ãƒ³ã‚’é–‹ç™ºã™ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã€ãƒ†ã‚¹ãƒˆä½œæˆã‚„æŒ™å‹•ã®ç¢ºèªã€å°è¦æ¨¡ãªæ©Ÿèƒ½ã®é–‹ç™ºç­‰ã‚’è¡Œã£ã¦ã„ã¾ã™</li><li>ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚³ãƒ³ãƒ†ã‚¹ãƒˆã¨å®Ÿå‹™ã®ã‹ã‹ã‚ã‚Šã‚’æ„Ÿã˜ã‚‰ã‚Œã‚‹ã®ã¯ã€ã“ã®ã‚¢ãƒ«ãƒã‚¤ãƒˆã®ä»–ã«ã¯ãªã„è‰¯ã„ç‚¹ã ã¨æ€ã„ã¾ã™</li><li>è³ªå•ã‚„ç›¸è«‡ã‚’ã—ã‚„ã™ã„ç’°å¢ƒã§ã€å€‹ã€…äººã«å¿œã˜ãŸã‚¿ã‚¹ã‚¯ã‚’é †ã«ã“ãªã—ã¦ã€è‡ªç„¶ã«æˆé•·ã§ãã‚‹ã‚ˆã†ãªå ´ãŒæ•´ãˆã‚‰ã‚Œã¦ã„ã¾ã™</li><li>æœ€é©åŒ–ã‚¨ãƒ³ã‚¸ãƒ³ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«è§¦ã‚Œã€æ¥­å‹™ã®ã‚„ã‚Šã¨ã‚Šã‚’è¡Œã„ãªãŒã‚‰ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®æŠ€è¡“ã‚„é©åˆ‡ãªã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãªã©ã•ã¾ã–ã¾ãªã‚‚ã®ã‚’å­¦ã¶ã“ã¨ãŒã§ãã¾ã™</li></ul><p>ã‚¢ã‚¤ã‚­ãƒ£ãƒƒãƒç”»åƒã¯<a href="https://www.vecteezy.com/free-vector/person">Person Vectors by Vecteezy</a>ã§ã™ã€‚</p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Programming/">Programming</category>
      
      
      <category domain="https://future-architect.github.io/tags/%E3%82%A2%E3%83%AB%E3%83%90%E3%82%A4%E3%83%88/">ã‚¢ãƒ«ãƒã‚¤ãƒˆ</category>
      
      <category domain="https://future-architect.github.io/tags/%E3%83%86%E3%82%B9%E3%83%88/">ãƒ†ã‚¹ãƒˆ</category>
      
      <category domain="https://future-architect.github.io/tags/AtCoder/">AtCoder</category>
      
      
      <comments>https://future-architect.github.io/articles/20231017a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Cloudflare R2ã§Terraformã®Stateã‚’ç®¡ç†ã™ã‚‹æ–¹æ³•: Cloudflare Meetup Nagano Vol.2 ã«ç™»å£‡ã—ã¾ã—ãŸ</title>
      <link>https://future-architect.github.io/articles/20231016a/</link>
      <guid>https://future-architect.github.io/articles/20231016a/</guid>
      <pubDate>Sun, 15 Oct 2023 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;img src=&quot;/images/20231016a/cloudflare_nagano.png&quot; alt=&quot;&quot; width=&quot;660&quot; height=&quot;371&quot; loading=&quot;lazy&quot;&gt;

&lt;p&gt;ã‚¤ãƒ™ãƒ³ãƒˆãƒªãƒ³ã‚¯ï¼š &lt;a</description>
          
        
      
      
      
      <content:encoded><![CDATA[<img src="/images/20231016a/cloudflare_nagano.png" alt="" width="660" height="371" loading="lazy"><p>ã‚¤ãƒ™ãƒ³ãƒˆãƒªãƒ³ã‚¯ï¼š <a href="https://cfm-cts.connpass.com/event/295067/">https://cfm-cts.connpass.com/event/295067/</a></p><p>ã“ã‚“ã«ã¡ã¯ã€‚TIGã®ä¼Šè—¤ã§ã™ã€‚</p><p>10&#x2F;14ã«é–‹å‚¬ã•ã‚ŒãŸCloudflare Meetup Naganoã«ç™»å£‡ã—ãŸã®ã§ç™ºè¡¨å†…å®¹ã®ã‚µãƒãƒªã¨ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒ¬ãƒãƒ¼ãƒˆã§ã™ã€‚</p><h2 id="å½“æ—¥ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³å†…å®¹"><a href="#å½“æ—¥ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³å†…å®¹" class="headerlink" title="å½“æ—¥ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³å†…å®¹"></a>å½“æ—¥ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³å†…å®¹</h2><p>å½“æ—¥ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³å†…å®¹ã¯ä»¥ä¸‹ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã«ãªã‚Šã¾ã™ã€‚</p><iframe class="speakerdeck-iframe" frameborder="0" src="https://speakerdeck.com/player/25755a81f5c64cebad8f4f8d4e3e4fc1" title="Cloudflare Meetup Nagano Vol.2" allowfullscreen="true" style="border: 0px; background: padding-box padding-box rgba(0, 0, 0, 0.1); margin: 0px; padding: 0px; border-radius: 6px; box-shadow: rgba(0, 0, 0, 0.2) 0px 5px 40px; width: 100%; height: auto; aspect-ratio: 560 / 315;" data-ratio="1.7777777777777777"></iframe><p><a href="https://github.com/kaedemalu/cf-teraform-handson">https://github.com/kaedemalu/cf-teraform-handson</a></p><h3 id="Cloudflare-R2ã§Terraformã®Stateã‚’ç®¡ç†ã™ã‚‹æ–¹æ³•"><a href="#Cloudflare-R2ã§Terraformã®Stateã‚’ç®¡ç†ã™ã‚‹æ–¹æ³•" class="headerlink" title="Cloudflare R2ã§Terraformã®Stateã‚’ç®¡ç†ã™ã‚‹æ–¹æ³•"></a>Cloudflare R2ã§Terraformã®Stateã‚’ç®¡ç†ã™ã‚‹æ–¹æ³•</h3><p>ä»Šå›ã®ç™»å£‡ã§ã¯ã€Cloudflareã®R2ã§Terraformã®Stateã‚’ç®¡ç†ã§ãã‚‹ã®ã‹ã€ã‚’èª¿ã¹ãŸã®ã§ã€ã“ã‚Œã‚’ç™»å£‡ãƒã‚¿ã¨ã—ã¾ã—ãŸã€‚</p><p>Terraformã®Stateã¯ä¸€èˆ¬çš„ã«ã¯ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ãŒæä¾›ã™ã‚‹ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚µãƒ¼ãƒ“ã‚¹ã§ç®¡ç†ã—ã¾ã™ã€‚ä¾‹ãˆã°AWSã§ã‚ã‚Œã°S3ã€Google Cloudã§ã‚ã‚Œã°GCSã®ã‚ˆã†ãªã‚‚ã®ã§ã™ã€‚</p><p>ã“ã®æ™‚ã«ã€S3ã«ãƒ›ã‚¹ãƒˆã•ã›ã‚‹ã®ã§ã‚ã‚Œã°ã„ã‹ã®ã‚ˆã†ãªãƒ–ãƒ­ãƒƒã‚¯ã‚’æ›¸ã„ã¦Backendã®è¨­å®šã‚’è¡Œã„ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">terraform &#123;</span><br><span class="line">  backend <span class="string">&quot;s3&quot;</span> &#123;</span><br><span class="line">    bucket = <span class="string">&quot;sample-tfstate&quot;</span> <span class="comment"># ãƒã‚±ãƒƒãƒˆå</span></span><br><span class="line">    key    = <span class="string">&quot;state&quot;</span> <span class="comment"># ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ‘ã‚¹ã‚’æŒ‡å®š</span></span><br><span class="line">    region = <span class="string">&quot;us-east-1&quot;</span> <span class="comment"># ãƒã‚±ãƒƒãƒˆã®ãƒªãƒ¼ã‚¸ãƒ§ãƒ³</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã‚‚ã—ã€Cloudflareã®ç®¡ç†ã¯Cloudflareã®ã¿ã§è¡Œã„ãŸã„æ€ã„ãŒå‡ºã¦ããŸæ™‚ã¯ã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚µãƒ¼ãƒ“ã‚¹ã§ã‚ã‚‹R2ã‚’Backendã¨ã™ã‚‹å ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ã‘ã‚‹ã¨ãŠã‚ˆãæƒ³åƒã§ãã¾ã™(ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹å‰æã§ã™ãŒ)ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">terraform &#123;</span><br><span class="line">  backend <span class="string">&quot;r2&quot;</span> &#123;</span><br><span class="line">    bucket = <span class="string">&quot;sample-tfstate&quot;</span></span><br><span class="line">    key    = <span class="string">&quot;state&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ãŸã ã€R2ã‚’ç›´æ¥çš„ã«Backendã¨ã—ã¦æŒ‡å®šã™ã‚‹ã“ã¨ã¯ç¾æ™‚ç‚¹ã§ã¯å¯¾å¿œã—ã¦ã„ãªã„çŠ¶æ…‹ã§ã™ã€‚ãŒã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯Terraformå´ã«å‡ºã¦ã„ã¾ã™ã€‚</p><p><a href="https://github.com/hashicorp/terraform/issues/33847">https://github.com/hashicorp/terraform/issues/33847</a></p><p>ãã“ã§ç›®ã‚’ã¤ã‘ãŸã®ãŒã€<a href="https://developers.cloudflare.com/r2/api/s3/api/">S3 API compatibility</a>ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ã€R2ã¨S3ã®äº’æ›æ€§ã§ã™ã€‚R2ã§ã¯S3ã®ä¸€å®šã®APIã‚’æ‹…ä¿ã—ã¦ãŠã‚Šã€<code>aws</code>ã‚³ãƒãƒ³ãƒ‰ã§R2ã‚’æ“ä½œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãã®ãŸã‚åŒæ§˜ã«Terraformã§ã‚‚ã€<code>backend</code>ãƒ–ãƒ­ãƒƒã‚¯ã§S3ã‚’å®£è¨€ã—ã¦ã„ã¦ã‚‚å®Ÿæ…‹ã¯R2ã‚’è¦‹ã›ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ã§ã¯ãªã„ã‹ã¨æ€ã£ã¦ä»Šå›ã®ãƒã‚¿ã«ã—ã¾ã—ãŸã€‚</p><h4 id="R2ã§Stateç®¡ç†ã‚’å®Ÿéš›ã«è¡Œã†"><a href="#R2ã§Stateç®¡ç†ã‚’å®Ÿéš›ã«è¡Œã†" class="headerlink" title="R2ã§Stateç®¡ç†ã‚’å®Ÿéš›ã«è¡Œã†"></a>R2ã§Stateç®¡ç†ã‚’å®Ÿéš›ã«è¡Œã†</h4><p>R2ã®ãƒã‚±ãƒƒãƒˆã‚„ã€ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ã®ä½œæˆã«ã¤ã„ã¦ã¯ç™»å£‡è³‡æ–™ã§ã‚‚ã‚ã‚‹ç¨‹åº¦è§¦ã‚Œã¦ã„ã‚‹ã®ã§ã€è¨˜äº‹ã§ã¯å®Ÿéš›ã«é­é‡ã—ãŸã‚¨ãƒ©ãƒ¼ã®è§£æ¶ˆéç¨‹ã‚’æ›¸ã„ã¦ã„ãã¾ã™ã€‚</p><p>S3ã«äº’æ›æ€§ã®ã‚ã‚‹APIã‚’åˆ©ç”¨ã™ã‚‹ã¨ã„ã†ã“ã¨ã§ã€Terraformã‹ã‚‰ã¯S3ã‚’ä½¿ã£ã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ã›ã‚‹ã“ã¨ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚ãã®ãŸã‚ã€åˆ©ç”¨ã™ã‚‹Backendã‚¿ã‚¤ãƒ—ã¯<code>s3</code>ã‚’ä½¿ã„ã¾ã™ã€‚</p><p>ã¾ãšã¯å˜ç´”ã«R2ãƒã‚±ãƒƒãƒˆåã‚’æŒ‡å®šã—ã¦<code>terraform init</code>ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã—ãŸã€‚</p><figure class="highlight sh"><figcaption><span>backend.tf</span></figcaption><table><tr><td class="code"><pre><span class="line">terraform &#123;</span><br><span class="line">  backend <span class="string">&quot;s3&quot;</span> &#123;</span><br><span class="line">    bucket = <span class="string">&quot;kaedemalu-tfstate&quot;</span></span><br><span class="line">    key    = <span class="string">&quot;default.state&quot;</span></span><br><span class="line">    region = <span class="string">&quot;us-east-1&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ã‚¨ãƒ©ãƒ¼1</span></span><br><span class="line">terraform init</span><br><span class="line"></span><br><span class="line">Initializing the backend...</span><br><span class="line">â•·</span><br><span class="line">â”‚ Error: error configuring S3 Backend: error validating provider credentials: error calling sts:GetCallerIdentity: InvalidClientTokenId: The security token included <span class="keyword">in</span> the request is invalid.</span><br><span class="line">â”‚       status code: 403, request <span class="built_in">id</span>: 98614ab4-7f7d-46c6-a5fb-1a8aae073866</span><br><span class="line">â”‚ </span><br><span class="line">â”‚ </span><br><span class="line">â•µ</span><br></pre></td></tr></table></figure><p><code>error validating provider credentials</code>ã¨ã„ã†ã“ã¨ã§ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã«å¤±æ•—ã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚ã“ã‚Œã¯ã¾ãšå›é¿ã™ã‚‹ãŸã‚ã«ã€<code>skip_credentials_validation = true</code>ã‚’è¿½åŠ ã—ã¦å†åº¦ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã—ã¾ã—ãŸã€‚</p><figure class="highlight sh"><figcaption><span>backend.tf</span></figcaption><table><tr><td class="code"><pre><span class="line">terraform &#123;</span><br><span class="line">  backend <span class="string">&quot;s3&quot;</span> &#123;</span><br><span class="line">    bucket                      = <span class="string">&quot;kaedemalu-tfstate&quot;</span></span><br><span class="line">    key                         = <span class="string">&quot;default.state&quot;</span></span><br><span class="line">    region                      = <span class="string">&quot;us-east-1&quot;</span></span><br><span class="line">    skip_credentials_validation = <span class="literal">true</span> <span class="comment"># è¿½åŠ </span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ã‚¨ãƒ©ãƒ¼2</span></span><br><span class="line">terraform init</span><br><span class="line"></span><br><span class="line">Initializing the backend...</span><br><span class="line"></span><br><span class="line">Successfully configured the backend <span class="string">&quot;s3&quot;</span>! Terraform will automatically</span><br><span class="line">use this backend unless the backend configuration changes.</span><br><span class="line">Error refreshing state: InvalidAccessKeyId: The AWS Access Key Id you provided does not exist <span class="keyword">in</span> our records.</span><br><span class="line">        status code: 403, request <span class="built_in">id</span>: W0GM5Q8918T7P5AT, host <span class="built_in">id</span>: 55kKe3sn45n/RxCHZA5V2fR7lg0TE3OH0CGZlN6gi2bDzQfey8/oQALJWbRo9h1czaK7+f9t4i0=</span><br></pre></td></tr></table></figure><p>S3ã¨ã—ã¦Terraformã«å¯¾ã—ã¦è¦‹ã›ã‚‹ã“ã¨ã¯ã§ãã¦ã„ã‚‹ã‚ˆã†ã§ã™ãŒã€<code>The AWS Access Key Id you provided does not exist in our records.</code>ã¨ã‚¨ãƒ©ãƒ¼ãŒè¿”ã£ã¦ãã¦ã€AWSã§ç™ºè¡Œã™ã‚‹ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼IDã§ã¯ãªã„ã¨æ€’ã‚‰ã‚Œã¾ã—ãŸã€‚Cloudflareã‹ã‚‰ç™ºè¡Œã™ã‚‹ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼IDã¨AWSã®ãã‚Œã¨ã¯ç•°ãªã‚‹ã®ã§ã€ã“ã®ã‚¨ãƒ©ãƒ¼ã«å¯¾ã—ã¦ã‚‚ç´å¾—ã§ãã¾ã™ã€‚</p><p>ã“ã®ã‚¨ãƒ©ãƒ¼ã‚’ã‚ˆãè€ƒãˆã¦ã¿ã‚‹ã¨ã€ä¸Šè¨˜ã®æ›¸ãæ–¹ã§ã¯S3ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®Backendã‚’ä½¿ã†ã®ã§ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯<code>https://s3.us-east-1.amazonaws.com</code>ã‚’è¦‹ã«è¡Œã£ã¦ã„ã‚‹ã“ã¨ãŒè€ƒãˆã‚‰ã‚Œã¾ã—ãŸã€‚R2ã§ã¯<code>https://&lt;CLOUDFLARE_ACCOUNT_ID&gt;.r2.cloudflarestorage.com</code>ã‚’ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¨ã—ã¦ã„ã‚‹ã®ã§ã€<code>endpoint</code>ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ä¸Šæ›¸ãã—ã¾ã—ãŸã€‚ã€‚ã“ã®çŠ¶æ…‹ã§<code>terraform init</code>ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã€ç„¡äº‹ã€R2ã‚’S3ã¨è¦‹ã›ã‹ã‘ãŸçŠ¶æ…‹ã§æˆåŠŸã—ã¾ã—ãŸã€‚</p><figure class="highlight sh"><figcaption><span>backend.tf</span></figcaption><table><tr><td class="code"><pre><span class="line">terraform &#123;</span><br><span class="line">  backend <span class="string">&quot;s3&quot;</span> &#123;</span><br><span class="line">    bucket                      = <span class="string">&quot;kaedemalu-tfstate&quot;</span></span><br><span class="line">    key                         = <span class="string">&quot;default.state&quot;</span></span><br><span class="line">    region                      = <span class="string">&quot;us-east-1&quot;</span></span><br><span class="line">    endpoint                    = <span class="string">&quot;https://&lt;CLOUDFLARE_ACCOUNT_ID&gt;.r2.cloudflarestorage.com&quot;</span> <span class="comment"># è¿½åŠ </span></span><br><span class="line">    skip_credentials_validation = <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã“ã‚Œã§ã€ç„¡äº‹R2ã§Stateç®¡ç†ã‚’ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã€ãƒªã‚½ãƒ¼ã‚¹ä½œæˆã‚’è¡Œã†ã¨ã€å®Ÿéš›ã«Stateãƒ•ã‚¡ã‚¤ãƒ«(<code>default.state</code>)ãŒé…ç½®ã•ã‚ŒãŸã‚Šã€æ›´æ–°ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚ãã®ãŸã‚ã€ç¾åœ¨ã®S3äº’æ›ã®APIã‚µãƒãƒ¼ãƒˆçŠ¶æ³ã§ã‚‚å•é¡Œãªãåˆ©ç”¨ã§ãã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚</p><p>ã€€</p><h2 id="ã»ã‹ã®ç™»å£‡å†…å®¹"><a href="#ã»ã‹ã®ç™»å£‡å†…å®¹" class="headerlink" title="ã»ã‹ã®ç™»å£‡å†…å®¹"></a>ã»ã‹ã®ç™»å£‡å†…å®¹</h2><h3 id="Cloudflare-äº€ç”°ã•ã‚“ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³"><a href="#Cloudflare-äº€ç”°ã•ã‚“ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³" class="headerlink" title="Cloudflare äº€ç”°ã•ã‚“ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³"></a>Cloudflare äº€ç”°ã•ã‚“ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³</h3><p>å½“æ—¥ã®ãƒãƒ³ã‚ºã‚ªãƒ³è³‡æ–™ï¼š<a href="https://zenn.dev/kameoncloud/articles/ee68d54bcadf90">Cloudflare AI Gateway ã‚’è©¦ã—ã¦ã¿ãŸ</a></p><p>ä»Šå›ã¯ã‚¤ãƒ™ãƒ³ãƒˆå½“æ™‚ãƒ™ãƒ¼ã‚¿ç‰ˆã§ã‚ã‚‹AI Gatewayã‚’çµŒç”±ã—ã¦ã€Cloudflare Workersã‹ã‚‰OpenAI(Chat GPT)ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ãƒãƒ³ã‚ºã‚ªãƒ³ã§ã—ãŸã€‚ä»Šå›ã¯OpenAIã§ã—ãŸãŒã€ãƒ—ãƒ­ã‚­ã‚·ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã¯ã“ã‚Œä»¥å¤–ã«ã‚‚è¤‡æ•°é¸æŠã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã€ã“ã‚Œã¯ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰ã§ä½¿ã†ã“ã¨ãŒè€ƒãˆã‚‰ã‚Œã‚‹Cloudflareãªã‚‰ã§ã¯ã¨æ„Ÿã˜ãŸã‚µãƒ¼ãƒ“ã‚¹ã§ã—ãŸã€‚</p><p>ãƒãƒ³ã‚ºã‚ªãƒ³ã‚’é€šã—ã¦ã€Workersã®æ‰‹è»½ã•ã¯ã‚‚ã¡ã‚ã‚“ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã«åˆ©ç”¨ã™ã‚‹Wranglerã‚‚å«ã‚ã¦ã—ã£ã‹ã‚Šæ•´ã£ã¦ã„ã‚‹ã“ã¨ã‚’æ„Ÿã˜ã¾ã—ãŸã€‚ã¾ãŸã€ãƒãƒ³ã‚ºã‚ªãƒ³ã®æ™‚é–“ãŒå°‘ã€…ä½™ã£ãŸã®ã§ã€ã»ã‹ã®ãƒãƒ³ã‚ºã‚ªãƒ³è³‡æ–™ã¨ã—ã¦ã€<a href="https://zenn.dev/kameoncloud/articles/707b3b623bdb87">Cloudflare Workers AI ã®ãƒãƒ³ã‚ºã‚ªãƒ³æ‰‹é †</a>ã‚‚è©¦ã—ã¦ã¿ã¾ã—ãŸã€‚ã“ã‚Œã¯Cloudflareã®ã‚¨ãƒƒã‚¸ãƒã‚¤ãƒ³ãƒˆã«é…ç½®ã•ã‚Œã¦ã„ã‚‹GPUã‚’Workersã§åˆ©ç”¨ã—ã€æ¨è«–ãªã©ã‚’è¡Œã†ãƒãƒ³ã‚ºã‚ªãƒ³ã§ã—ãŸã€‚ãã®ãŸã‚ã€</p><ul><li>ã»ã‹ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’åˆ©ç”¨ã™ã‚‹å ´åˆï¼šAI Gateway</li><li>Cloudflareä¸Šã§å®Œçµã•ã›ã‚‹å ´åˆï¼šWorkers AI</li></ul><p>ã¨æ„Ÿã˜ã¾ã—ãŸã€‚Clouflareå†…ã§æ§‹ç¯‰æ¸ˆã¿ã®ãƒ¢ãƒ‡ãƒ«ã‚’åˆ©ç”¨ã—ã¦ç§è‡ªèº«ã‚‚ã„ãã¤ã‹è³ªå•ã‚’æŠ•ã’ã¦ã¿ã¾ã—ãŸãŒã€ç¾çŠ¶ã¯è‹±èªã§ã®è³ªå•ãŒãã‚Œãªã‚Šã®ç²¾åº¦ã«ãªã‚‹ä¸€æ–¹æ—¥æœ¬èªã«ã¤ã„ã¦ã¯æ–‡ç« ã®çµ„ã¿ç«‹ã¦ãªã©ã«èª²é¡ŒãŒã‚ã‚Šãã†ã§ã—ãŸã€‚</p><h3 id="Cloudflare-Pageså…¥é–€ã—ã¦ã¿ãŸ"><a href="#Cloudflare-Pageså…¥é–€ã—ã¦ã¿ãŸ" class="headerlink" title="Cloudflare Pageså…¥é–€ã—ã¦ã¿ãŸ"></a>Cloudflare Pageså…¥é–€ã—ã¦ã¿ãŸ</h3><iframe class="speakerdeck-iframe" frameborder="0" src="https://speakerdeck.com/player/b7619952be484ddc9be5780247ab0f63" title="Cloudflare Pages ã«å…¥é–€ã—ã¦ã¿ãŸ / 2023-10-14 Cloudflare Meetup Nagano Vol.2" allowfullscreen="true" style="border: 0px; background: padding-box padding-box rgba(0, 0, 0, 0.1); margin: 0px; padding: 0px; border-radius: 6px; box-shadow: rgba(0, 0, 0, 0.2) 0px 5px 40px; width: 100%; height: auto; aspect-ratio: 560 / 315;" data-ratio="1.7777777777777777"></iframe><p>Cloudflare Pagesã®è©±ã§ã¯ã‚ã‚Šã¾ã—ãŸãŒã€ãƒ¢ãƒ€ãƒ³ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã€Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®è©±ã¨ã—ã¦å‚è€ƒã«ãªã‚Šã¾ã—ãŸã€‚ç§è‡ªèº«ã€Next.jsã‚’æœ€è¿‘è§¦ã£ã¦ã„ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã€æ©Ÿèƒ½ã¨ã—ã¦ãƒ•ãƒ«ã«ç”Ÿã‹ã™ãŸã‚ã«ã€ã‚„ã»ã‹ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨ã®æ¯”è¼ƒãŒãªã‚“ã¨ãªãã‚¤ãƒ¡ãƒ¼ã‚¸ã¤ãLTã§ã—ãŸã€‚</p><h3 id="Cloudflare-Workersã§OpenAIã®LINE-Chatbotã‚’ä½œã£ã¦ã¿ãŸ"><a href="#Cloudflare-Workersã§OpenAIã®LINE-Chatbotã‚’ä½œã£ã¦ã¿ãŸ" class="headerlink" title="Cloudflare Workersã§OpenAIã®LINE Chatbotã‚’ä½œã£ã¦ã¿ãŸ"></a>Cloudflare Workersã§OpenAIã®LINE Chatbotã‚’ä½œã£ã¦ã¿ãŸ</h3><iframe class="speakerdeck-iframe" frameborder="0" src="https://speakerdeck.com/player/d263bb47e8cf4438a958135a550fe97e" title="Cloudflare Workers ã§ OpenAI ã® LINE Chatbotã‚’ä½œã£ã¦ã¿ãŸ" allowfullscreen="true" style="border: 0px; background: padding-box padding-box rgba(0, 0, 0, 0.1); margin: 0px; padding: 0px; border-radius: 6px; box-shadow: rgba(0, 0, 0, 0.2) 0px 5px 40px; width: 100%; height: auto; aspect-ratio: 560 / 315;" data-ratio="1.7777777777777777"></iframe><p>LTã®ãƒã‚¿ã¨ã—ã¦æ˜¨ä»Šè©±é¡Œã«ãªã£ã¦ã„ã‚‹OpenAIã«ã¤ã„ã¦å–ã‚Šä¸Šã’ã¦ã„ã¾ã—ãŸãŒã€ä½œæˆã®å‹•æ©ŸãŒãŠå­ã•ã‚“ã«AIã«è§¦ã‚Œã‚‹æ©Ÿä¼šã‚’ä½œã‚ŠãŸã„ã€ã¨ã„ã†è¦ªå¿ƒã«å¿ƒã‚’æ‰“ãŸã‚Œã¾ã—ãŸã€‚è‚å¿ƒã®LINE Chatbotã«ã¤ã„ã¦ã‚‚åŠæ—¥ãã‚‰ã„ã§ä½œã‚ŒãŸã‚ˆã†ã§ã€é–‹ç™ºä½“é¨“ã®è‰¯ã•ãªã©ã®ãƒ¡ãƒªãƒƒãƒˆã€ã„ã¾ã„ã¡ãªãƒã‚¤ãƒ³ãƒˆãªã©ã‚‚çŸ¥ã‚Œã¾ã—ãŸã€‚ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«ã¤ã„ã¦ã‚‚<a href="https://hono.dev/">hono</a>ã‚’åˆ©ç”¨ã•ã‚Œã¦ã„ãŸã®ã§ã€ä»¥ä¸‹ã®ãƒªãƒã‚¸ãƒˆãƒªè©¦ã—ã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚</p><p><a href="https://github.com/koda-masaru/chat-bot">https://github.com/koda-masaru/chat-bot</a></p><h3 id="Cloudflare-Zero-Trustã‚’è¨­å®šã—ã¦ä½¿ã£ã¦ã‚‚ã‚‰ã£ã¦ã¿ãŸ"><a href="#Cloudflare-Zero-Trustã‚’è¨­å®šã—ã¦ä½¿ã£ã¦ã‚‚ã‚‰ã£ã¦ã¿ãŸ" class="headerlink" title="Cloudflare Zero Trustã‚’è¨­å®šã—ã¦ä½¿ã£ã¦ã‚‚ã‚‰ã£ã¦ã¿ãŸ"></a>Cloudflare Zero Trustã‚’è¨­å®šã—ã¦ä½¿ã£ã¦ã‚‚ã‚‰ã£ã¦ã¿ãŸ</h3><p>ã“ã¡ã‚‰ã¯ã€å‰å›ã®Cloudflare Meetup Nagano Vol.1ã«å‚åŠ ã—ã¦ã€Cloudflareã«èˆˆå‘³ã‚’æŒã£ãŸã“ã¨ã‹ã‚‰å®Ÿéš›ã«ä»•äº‹ã§Zero Trustã‚’å°å…¥ã—ãŸè©±ã§ã—ãŸã€‚</p><p>ä»•äº‹ã§é–‹ç™ºã•ã‚Œã¦ã„ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ‡ãƒ¢ç’°å¢ƒã¸ã®æ¥ç¶šã®ã‚¹ãƒ”ãƒ¼ãƒ‰ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®æ‹…ä¿ã‚’ã™ã‚‹ãŸã‚ã«Zero Trustã‚’å°å…¥ã—ã¦ã€å°å…¥å‰ã§ã‚‚ã§ãã¦ã„ãŸãƒã‚¤ãƒ³ãƒˆã¯ã‚‚ã¡ã‚ã‚“ã€èª²é¡Œã¨ã•ã‚Œã¦ã„ãŸæ¥ç¶šã‚¹ãƒ”ãƒ¼ãƒ‰ã«ã¤ã„ã¦ã‚‚è§£æ¶ˆã•ã‚Œã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ã§ã€Cloudflareã®ã‚µãƒ¼ãƒ“ã‚¹ç¾¤ã®å°å…¥ã«å¯¾ã™ã‚‹ãƒ•ãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®è»½ã•ãƒ»å°å…¥ã‚³ã‚¹ãƒˆã®ä½ã•ã‚’æ”¹ã‚ã¦æ„Ÿã˜ã¾ã—ãŸã€‚</p><h2 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h2><p>å‰å›ã«å¼•ãç¶šãVol.2ã‚‚å‚åŠ ã—ã€ã‹ã¤ä»Šå›ã¯ç™»å£‡ã®æ©Ÿä¼šã‚’ã„ãŸã ã‘ãŸã®ã§ã€èª¿ã¹ã¦ã‚‚å‡ºã¦ã“ãªã‹ã£ãŸã“ã¨ã‚’ãƒã‚¿ã«ã—ã¦å½¢ã«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚<br>ã¾ãŸã€ã‚¤ãƒ™ãƒ³ãƒˆã®é–‹å‚¬åœ°ãŒç§ã®åœ°å…ƒã§ã‚ã‚‹é•·é‡ã§ã‚ã‚‹ã¨ã„ã†ã“ã¨ã‚‚ã‚ã‚Šã€åœ°å…ƒã®ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã«é–¢ã‚ã‚ŒãŸã“ã¨ãŒã¨ã¦ã‚‚å¬‰ã—ã‹ã£ãŸã®ã§ã€ä»Šå¾Œã‚‚ãªã‚“ã‚‰ã‹ã®å½¢ã§é–¢ã‚ã‚Œã‚Œã°ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚</p><h2 id="ä½™è«‡ï¼‰åœ°æ–¹å‹‰å¼·ä¼šå‚åŠ ã®ã‚¹ã‚¹ãƒ¡"><a href="#ä½™è«‡ï¼‰åœ°æ–¹å‹‰å¼·ä¼šå‚åŠ ã®ã‚¹ã‚¹ãƒ¡" class="headerlink" title="ä½™è«‡ï¼‰åœ°æ–¹å‹‰å¼·ä¼šå‚åŠ ã®ã‚¹ã‚¹ãƒ¡"></a>ä½™è«‡ï¼‰åœ°æ–¹å‹‰å¼·ä¼šå‚åŠ ã®ã‚¹ã‚¹ãƒ¡</h2><p>ä»Šå›ã€é•·é‡ã®ã‚¤ãƒ™ãƒ³ãƒˆã«å‚åŠ ã™ã‚‹ãã£ã‹ã‘ã¯å¸°çœã—ãªãŒã‚‰å‚åŠ ã§ãã‚‹ã“ã¨ã«ã¤ãã¾ã™ãŒã€ã“ã‚Œã«é™ã‚‰ãšåœ°æ–¹ã§é–‹å‚¬ã•ã‚Œã‚‹å‹‰å¼·ä¼šã‚‚æ”¹ã‚ã¦è¶³ã‚’ã®ã°ã™ã¨è‰¯ã„ãªã¨æ€ã„ã¾ã—ãŸã€‚æ™®æ®µè¶³ã‚’ä¼¸ã°ã™ãã£ã‹ã‘ãŒãªã„åœŸåœ°ã§ã‚‚ã€æŠ€è¡“ã‚„ã‚¤ãƒ™ãƒ³ãƒˆã«èª˜ã‚ã‚Œã¦å‚åŠ ã—ã¤ã¤ã€è¿‘éš£ã®è¦³å…‰ã‚„ãã®åœŸåœ°ã®æ–™ç†ã‚’å‘³ã‚ãˆã‚‹ã®ã‚‚åœ°æ–¹å‹‰å¼·ä¼šãªã‚‰ã§ã¯ã®è‰¯ã•ã ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚ä»Šå›ã¯æ‡‡è¦ªä¼šã§é•·é‡ã®æ—¥æœ¬é…’ã‚’ãŸãã•ã‚“æ¥½ã—ã‚ã¾ã—ãŸã€‚</p><img src="/images/20231016a/IMG_3553.jpg" alt="" width="1200" height="1093" loading="lazy"><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul><li>æŠ€è¡“ãƒ–ãƒ­ã‚°ã®ã»ã‹ã®Clouflareè¨˜äº‹<ul><li><a href="https://future-architect.github.io/articles/20230427a/">CDN å…¥é–€ã¨ã‚¨ãƒƒã‚¸ã§ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ</a></li><li><a href="https://future-architect.github.io/articles/20230502a/">cf-terraformingã§å…¥é–€ã™ã‚‹Cloudflare</a></li></ul></li><li>ã‚¤ãƒ™ãƒ³ãƒˆå½“æ—¥ã®ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚° <a href="https://twitter.com/hashtag/CloudflareUG_mmj">#CloudflareUG_mmj</a></li><li><a href="https://togetter.com/li/2241595">Togetter</a></li></ul>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Infrastructure/">Infrastructure</category>
      
      
      <category domain="https://future-architect.github.io/tags/%E7%99%BB%E5%A3%87%E3%83%AC%E3%83%9D%E3%83%BC%E3%83%88/">ç™»å£‡ãƒ¬ãƒãƒ¼ãƒˆ</category>
      
      <category domain="https://future-architect.github.io/tags/Terraform/">Terraform</category>
      
      <category domain="https://future-architect.github.io/tags/Cloudflare/">Cloudflare</category>
      
      <category domain="https://future-architect.github.io/tags/%E7%99%BB%E5%A3%87%E8%B3%87%E6%96%99/">ç™»å£‡è³‡æ–™</category>
      
      
      <comments>https://future-architect.github.io/articles/20231016a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Meta Quest 3é–‹å°ã®å„€ï¼†ãƒ•ãƒ«ã‚«ãƒ©ãƒ¼ãƒ‘ã‚¹ã‚¹ãƒ«ãƒ¼ã§å®¶ã«ãƒ†ãƒ«ãƒŸãƒ³ã‚’ç½®ã„ãŸ</title>
      <link>https://future-architect.github.io/articles/20231013a/</link>
      <guid>https://future-architect.github.io/articles/20231013a/</guid>
      <pubDate>Thu, 12 Oct 2023 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h1&gt;&lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€‚TIG DX</description>
          
        
      
      
      
      <content:encoded><![CDATA[<h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>ã“ã‚“ã«ã¡ã¯ã€‚TIG DX ãƒ¦ãƒ‹ãƒƒãƒˆæ‰€å±ã€é‡‘æ¬ ã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆã®è—¤äº•ã§ã™ã€‚</p><p>2023å¹´10æœˆ10æ—¥ã€ã¨ã†ã¨ã†ç™ºå£²ã•ã‚Œã¾ã—ãŸã­ã€‚<a href="https://www.meta.com/jp/quest/quest-3/">Meta Quest 3</a>ï¼ˆä»¥ä¸‹ Quest3 ã¨ç•¥è¨˜ï¼‰ãŒã€‚ã—ã£ã‹ã‚Šäºˆç´„ã—ã¦ç™ºå£²æ—¥ã«æ‰‹ã«å…¥ã‚Œã‚ˆã†ã¨ã—ãŸã‚“ã§ã™ãŒã€ä½•æ•…ã‹é…é”æ—¥ãŒã‚ºãƒ¬ã¦ 1 æ—¥é…ã‚Œã§å…¥æ‰‹ã—ã¾ã—ãŸã€‚<br>ã›ã£ã‹ããªã®ã§ã€é–‹å°ã®å„€ã¨ã€Quest3 ã®ç›®ç‰æ©Ÿèƒ½ã®ä¸€ã¤ã§ã‚ã‚‹ã€<a href="https://www.meta.com/ja-jp/help/quest/articles/getting-started/getting-started-with-quest-pro/full-color-passthrough/">ãƒ•ãƒ«ã‚«ãƒ©ãƒ¼ãƒ‘ã‚¹ã‚¹ãƒ«ãƒ¼</a>ã‚’ä½¿ã£ã¦éŠã‚“ã§ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚</p><p>ã¡ãªã¿ã«ã€ã“ã®è¨˜äº‹ã¯<a href="https://immersed.com/">immersed</a>ã‚’ç”¨ã„ã¦ã€VR ç©ºé–“ã®ãƒãƒ¼ãƒãƒ£ãƒ«ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã‚’ä½¿ã£ã¦æ›¸ã„ã¦ã„ã¾ã™ã€‚ãƒãƒ¼ãƒãƒ£ãƒ«ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã«ã¤ã„ã¦ã¯<a href="/articles/20221031b">äº•ä¸Šã•ã‚“ã®è¨˜äº‹ã‚’ã”å‚ç…§</a>ãã ã•ã„ã€‚</p><h2 id="é–‹å°ã®å„€"><a href="#é–‹å°ã®å„€" class="headerlink" title="é–‹å°ã®å„€"></a>é–‹å°ã®å„€</h2><h3 id="å¤–è¦³ç¢ºèªãƒ»Quest2-ã¨ã®æ¯”è¼ƒ"><a href="#å¤–è¦³ç¢ºèªãƒ»Quest2-ã¨ã®æ¯”è¼ƒ" class="headerlink" title="å¤–è¦³ç¢ºèªãƒ»Quest2 ã¨ã®æ¯”è¼ƒ"></a>å¤–è¦³ç¢ºèªãƒ»Quest2 ã¨ã®æ¯”è¼ƒ</h3><p>ãã‚Œã§ã¯æ—©é€Ÿé–‹å°ã—ã¦ã„ãã¾ã™ã€‚<br>ã‚±ãƒ¼ã‚¹ã¨ç®±ã¯ã‚·ãƒ³ãƒ—ãƒ«ã§ã€æ€ã£ãŸã‚ˆã‚Šã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã§ã—ãŸã€‚ï¼ˆãƒ€ãƒ³ãƒœãƒ¼ãƒ«ã«æ¢±åŒ…ã•ã‚Œã¦å±Šã„ãŸæ™‚ç‚¹ã§æƒ³åƒã‚ˆã‚Šå°ã•ã‹ã£ãŸã®ã§ã¡ã‚‡ã£ã¨é©šãã¾ã—ãŸã€‚ï¼‰</p><img src="/images/20231013a/box.jpg" alt="box.jpg" width="1200" height="1091" loading="lazy"><p>ç®±ã‹ã‚‰å–ã‚Šå‡ºã—ã¦ Quest2 ã¨æ¯”è¼ƒã—ã¦ã¿ã¾ã™ã€‚</p><p>ã¾ãšã¯æœ¬ä½“ã‚’ä¸Šã‹ã‚‰è¦‹ãŸå›³ã§ã™ã€‚ï¼ˆå³ãŒ Quest3ï¼‰</p><img src="/images/20231013a/up.jpg" alt="up.jpg" width="1200" height="841" loading="lazy"><p>ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤éƒ¨åˆ†ãŒæ˜ã‚‰ã‹ã«è–„ããªã£ã¦ãŠã‚Šã€å…¨ä½“çš„ã«ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã«æ„Ÿã˜ã¾ã™ã€‚<br>ãƒ¬ãƒ³ã‚ºã‚’ãƒ‘ãƒ³ã‚±ãƒ¼ã‚­ãƒ¬ãƒ³ã‚ºã«å¤‰æ›´ã—ãŸã“ã¨ã§ã‚µã‚¤ã‚ºãƒ€ã‚¦ãƒ³ã™ã‚‹ã¨ã¯èã„ã¦ã„ã¾ã—ãŸãŒã€æ€ã£ãŸã‚ˆã‚Šå¤§å¹…ã«è–„ããªã£ã¦ã„ã¾ã—ãŸã€‚</p><p>è£…ç€ã™ã‚‹éƒ¨åˆ†ã®ãƒãƒ³ãƒ‰ã‚‚æ˜ã‚‰ã‹ã«è¦‹ãŸç›®ãŒé•ã†ã®ã§ã™ãŒã€ã“ã‚Œã¯ç§ãŒ Quest2 ã®ãƒãƒ³ãƒ‰ã‚’ãƒãƒƒãƒ†ãƒªãƒ¼ä»˜ãã® Elite ã‚¹ãƒˆãƒ©ãƒƒãƒ—ã«å¤‰æ›´ã—ã¦ã„ã‚‹ã‹ã‚‰ã¨ã„ã†ã®ã‚‚ã‚ã‚Šã¾ã™ã€‚</p><p>ã“ã® Elite ã‚¹ãƒˆãƒ©ãƒƒãƒ—ã¨ã„ã†ã®ãŒéå¸¸ã«ã¤ã‘å¿ƒåœ°ãŒè‰¯ã„ã®ã‚‚ã‚ã‚Šã€æ­£ç›´ Quest3 ã®ãƒãƒ³ãƒ‰ã¯ã¡ã‚‡ã£ã¨å¾®å¦™ã§ã—ãŸã€‚ã‚ã¾ã‚Šé ­ã«ãƒ•ã‚£ãƒƒãƒˆã›ãšã€èª¿æ•´ã‚‚é›£ã—ã„ã§ã™ã€‚Quest3 ç”¨ã® Elite ã‚¹ãƒˆãƒ©ãƒƒãƒ—ã‚‚è²·ã†ã“ã¨ã«ã—ã¾ã—ãŸã€‚</p><p>ä¸€å¿œ Quest2 ã®é ƒã‹ã‚‰æ”¹ä¿®ã¯åŠ ãˆã‚‰ã‚Œã¦ãŠã‚Šã€é ­é ‚éƒ¨ï½å¾Œé ­éƒ¨éƒ¨åˆ†ãŒ Y å­—ã«ãªã£ã¦ã€ã‚ˆã‚Šãƒ•ã‚£ãƒƒãƒˆã—ã‚„ã™ããªã£ã¦ã¯ã„ã‚‹ã‚ˆã†ã§ã™ã€‚ï¼ˆã“ã® Y å­—ãŒé–‹ãã“ã¨ã§ç· ã‚ä»˜ã‘ãŒèª¿æ•´ã§ãã‚‹ã€ã¨ã„ã†ã®ã«ãªã‹ãªã‹æ°—ã¥ã‘ãšâ€¦Quest3 ã‚’è£…ç€ã—ã¦ã‹ã‚‰è¦‹ã‚‹ã“ã¨ãŒã§ãã‚‹ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§èª¿æ•´ã®ä»•æ–¹ãŒç´¹ä»‹ã•ã‚Œã‚‹ãŸã‚ã€å…ˆã«ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’é€²ã‚ã‚‹ã®ãŒè‰¯ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ï¼‰</p><p>æ¬¡ã«å‰ã‹ã‚‰è¦‹ãŸå›³ãŒã“ã¡ã‚‰ã§ã™ã€‚ï¼ˆä¸‹ãŒ Quest3ï¼‰ã¤ã„ã§ã«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚‚ä¸¦ã¹ã¦ã„ã¾ã™ã€‚</p><img src="/images/20231013a/front.jpg" alt="front.jpg" width="1200" height="1155" loading="lazy"><p>æœ¬ä½“ã«ã¯ç‰¹å¾´çš„ãªä¸‰ã¤ç›®ãŒã¤ã„ã¦ãŠã‚Šã€å·¦å³ã®ãã‚Œãã‚Œã« RGB ã‚«ãƒ¡ãƒ©ã¨ IR ã‚«ãƒ¡ãƒ©ãŒ1ã¤ãšã¤ã€çœŸã‚“ä¸­ã«ã¯æ·±åº¦ã‚»ãƒ³ã‚µãƒ¼ãŒå–ã‚Šä»˜ã‘ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã‚’ç”¨ã„ã¦ãƒ•ãƒ«ã‚«ãƒ©ãƒ¼ãƒ‘ã‚¹ã‚¹ãƒ«ãƒ¼åŠã³ MR ã®ãŸã‚ã®ç©ºé–“èªè­˜æ©Ÿèƒ½ã‚’æä¾›ã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚<br>ã¾ãŸã€ã“ã‚Œã«åŠ ãˆã¦ã€åº•é¢å´ã« 2 ã¤ã‚«ãƒ¡ãƒ©ãŒã¤ã„ã¦ã„ã‚‹ã®ã§ã€ãƒˆãƒ¼ã‚¿ãƒ«ã§ 6 ã¤ã®ã‚«ãƒ¡ãƒ©ã¨ 1 ã¤ã®æ·±åº¦ã‚»ãƒ³ã‚µãƒ¼ãŒæ­è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p>ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚‚å¤§å¹…ã«å¤‰åŒ–ã—ã¦ã„ã¦ã€Quest2 ã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã«ã‚ã£ãŸãƒªãƒ³ã‚°ãŒç„¡ããªã£ã¦ã„ã¾ã™ã€‚å…ƒã€…ã“ã®ãƒªãƒ³ã‚°ã¯èµ¤å¤–ç·šã‚’ç™ºã—ã¦ãŠã‚Šã€ãã‚Œã‚’æœ¬ä½“ã®èµ¤å¤–ç·šã‚«ãƒ¡ãƒ©ã§æ¤œçŸ¥ã™ã‚‹ã“ã¨ã§ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ï¼ˆä½ç½®ãƒ»å§¿å‹¢ã®å–å¾—ï¼‰ã—ã¦ã„ã¾ã—ãŸã€‚</p><p>Quest3 ã§ã¯ãƒªãƒ³ã‚°ãŒç„¡ããªã£ãŸåˆ†ã€ä¸Šé¢ï¼ˆãƒœã‚¿ãƒ³ã‚„ã‚¹ãƒ†ã‚£ãƒƒã‚¯ãŒé…ç½®ã•ã‚Œã¦ã„ã‚‹é¢ï¼‰ã‹ã‚‰èµ¤å¤–ç·šã‚’ç™ºã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚ãŸã ã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’æ¡ã£ã¦ã„ãŸã‚Šã€å›è»¢ã•ã›ã‚‹ã¨æœ¬ä½“ã«èµ¤å¤–ç·šãŒå±Šã‹ãªããªã£ã¦ã—ã¾ã„ã¾ã™ã€‚ãã“ã§èµ¤å¤–ç·šã®æ¤œçŸ¥ã«åŠ ãˆã€ãƒãƒ³ãƒ‰ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã‚‚ä¸¦åˆ—ã§è¡Œã£ãŸã‚Šã€åŠ é€Ÿåº¦ã‚»ãƒ³ã‚µãƒ¼ãƒ»ã‚¸ãƒ£ã‚¤ãƒ­ã‚»ãƒ³ã‚µãƒ¼ã®å…¥åŠ›ã§è£œæ­£ã—ãŸã‚Šã¨ã€å¤šè§’çš„ã«ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã‚’è¡Œã†ã“ã¨ã§å®‰å®šã—ãŸãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã‚’å®Ÿç¾ã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup></p><p>ãƒãƒ³ãƒ‰ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã«é–¢ã—ã¦ã¯<a href="/articles/20220823a/">ç§ã®è¨˜äº‹</a>ã§ã¡ã‚‡ã£ã¨ã ã‘è§£èª¬ã—ã¦ã„ã¾ã™ã€‚ï¼ˆã“ã®è¨˜äº‹ã¯ã‚‚ã†ä¸€å›å‚ç…§ã—ã¾ã™ã€‚ï¼‰å®Ÿéš›ã®ä½¿ç”¨æ„Ÿã¨ã—ã¦ã‚‚ã€ãƒªãƒ³ã‚°ãŒç„¡ããªã£ãŸã“ã¨ã§ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã®ç²¾åº¦ãŒè½ã¡ãŸå®Ÿæ„Ÿã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p><h3 id="ãƒ•ãƒ«ã‚«ãƒ©ãƒ¼ãƒ‘ã‚¹ã‚¹ãƒ«ãƒ¼ã¨-MR-ã‚’ä½“é¨“ã—ã¦ã¿ã‚‹"><a href="#ãƒ•ãƒ«ã‚«ãƒ©ãƒ¼ãƒ‘ã‚¹ã‚¹ãƒ«ãƒ¼ã¨-MR-ã‚’ä½“é¨“ã—ã¦ã¿ã‚‹" class="headerlink" title="ãƒ•ãƒ«ã‚«ãƒ©ãƒ¼ãƒ‘ã‚¹ã‚¹ãƒ«ãƒ¼ã¨ MR ã‚’ä½“é¨“ã—ã¦ã¿ã‚‹"></a>ãƒ•ãƒ«ã‚«ãƒ©ãƒ¼ãƒ‘ã‚¹ã‚¹ãƒ«ãƒ¼ã¨ MR ã‚’ä½“é¨“ã—ã¦ã¿ã‚‹</h3><p>é–‹å°ã‚‚æ¸ˆã‚“ã ã®ã§ã€ä¸‰ã¤ç›®ã‚’æ´»ã‹ã—ãŸãƒ•ãƒ«ã‚«ãƒ©ãƒ¼ãƒ‘ã‚¹ã‚¹ãƒ«ãƒ¼ãƒ»MR ã‚’ä½“é¨“ã—ã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚Meta ãŒ Quest3 ã® MR ä½“é¨“ç”¨ã«æä¾›ã—ã¦ã„ã‚‹ã‚²ãƒ¼ãƒ ã§ã‚ã‚‹<a href="https://www.meta.com/ja-jp/experiences/6236169136472090/">First Encounters</a>ã‚’ãƒ—ãƒ¬ã‚¤ã—ã¦ã¿ã¾ã—ãŸã€‚ä½•æšã‹ã‚­ãƒ£ãƒ—ãƒãƒ£ã‚‚æ’®ã£ãŸã®ã§ã™ãŒã€ã‚ã‚“ã¾ã‚Šã‚­ãƒ£ãƒ—ãƒãƒ£ã ã¨å‡„ã•ãŒä¼ã‚ã‚Šãã†ã«ãªã‹ã£ãŸãŸã‚ã€ã‚ãˆã¦æ–‡å­—ã ã‘ã§ç´¹ä»‹ã—ã¦ã¿ã¾ã™ã€‚ã§ãã‚Œã°ä½“é¨“ä¼šã‚„æŒã£ã¦ã„ã‚‹çŸ¥äººã«é ¼ã‚“ã§å®Ÿéš›ã«ãƒ—ãƒ¬ã‚¤ã—ã¦ã¿ã¦ã„ãŸã ããŸã„ã§ã™ã€‚</p><p>ã¾ãšã‚²ãƒ¼ãƒ ãŒå§‹ã¾ã‚‹å‰ã«ã€ãƒ—ãƒ¬ã‚¤ã‚¨ãƒªã‚¢ã‚’èªè­˜ã™ã‚‹ãŸã‚ã€éƒ¨å±‹ã®ã‚¹ã‚­ãƒ£ãƒ³ã‚’è¡Œã„ã¾ã™ã€‚ã¨è¨€ã£ã¦ã‚‚ã€ã‚„ã‚‹ã“ã¨ã¯éƒ¨å±‹ä¸­ã‚’ãã‚‹ã‚Šã¨çœºã‚ã‚‹ãã‚‰ã„ã§ã™ã€‚ã“ã“ã§ä¸‰ã¤ç›®ãŒæ´»ç”¨ã•ã‚Œã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«å£ã‚„éšœå®³ç‰©ãŒèªè­˜ã•ã‚Œã¦ã„ãã¾ã™ã€‚éƒ¨å±‹ã®ã‚¹ã‚­ãƒ£ãƒ³ãŒå®Œäº†ã™ã‚Œã°ã‚²ãƒ¼ãƒ é–‹å§‹ã§ã™ã€‚ã‚²ãƒ¼ãƒ å†…å®¹ã¯ç°¡å˜ãª FPSï¼ˆã¡ã‚‡ã£ã¨ã ã‘ãƒ‘ã‚ºãƒ«è¦ç´ ã‚ã‚Šï¼‰ã¨ã„ã†æ„Ÿã˜ãªã®ã§ã™ãŒã€ãã“ã¯ MRã€èˆå°ã¯ä»Šè‡ªåˆ†ãŒã„ã‚‹éƒ¨å±‹ãªã®ã§ã€æ…£ã‚Œè¦ªã—ã‚“ã ç©ºé–“ãŒãƒ—ãƒ¬ã‚¤ã‚¨ãƒªã‚¢ã«ãªã‚‹ã®ã§ã¨ã¦ã‚‚æ¥½ã—ã„â€¦ã¨è¨€ã†è©±ã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼ˆå¤šåˆ†ãã‚Œã¯ ARï¼‰ã€‚ãªã‚“ã¨ã‚²ãƒ¼ãƒ ãŒå§‹ã¾ã‚‹ã¨æ—©ã€…ã«å¤©äº•ã®ä¸€éƒ¨ãŒå´©ã‚Œè½ã¡ã¦å®‡å®™èˆ¹ãŒè½ã¡ã¦ããŸã®ã§ã™ã€‚ä¸Šéšã®äººãŒåºŠã‚’ã¶ã¡æŠœã„ãŸã®ã‹ã¨æ€ã„ã¾ã—ãŸã€‚</p><p>ãã®å¾Œã‚‚ã¡ã£ã¡ã‚ƒã„å®‡å®™äººãŒå£ã‚’å£Šã—ã¦éƒ¨å±‹ã«å…¥ã‚Šè¾¼ã‚“ã§ããŸã‚Šã€è‡ªåˆ†ãŒæ’ƒã£ãŸå¼¾ãŒå£ã‚’å£Šã—ãŸã‚Šã¨ã€ã ã‚“ã ã‚“ã¨è‡ªåˆ†ã®éƒ¨å±‹ã ã£ãŸã¯ãšã®ç©ºé–“ãŒåºƒå¤§ãªç©ºé–“ï¼ˆã©ã“ã‹ã®æ˜Ÿï¼‰ã«å¤‰ã‚ã£ã¦ã„ãã¾ã™ã€‚</p><p>ã“ã†ãªã‚‹ã¨ã‚‚ã†è„³ã¯ã—ã£ã‹ã‚Šé¨™ã•ã‚Œã¦ã—ã¾ã„ã€æ®µã€…ã¨ã©ã“ãŒè‡ªåˆ†ã®éƒ¨å±‹ã§ã©ã“ãŒã‚²ãƒ¼ãƒ ç©ºé–“ã‹ã‚ã‹ã‚‰ãªããªã£ã¦ãã¾ã™ã€‚ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ã«ç¾å®Ÿã¨ä»®æƒ³ç©ºé–“ãŒæ··ã–ã‚Šåˆã£ã¦ã„ãã€‚ãªã‚‹ã»ã©ã“ã‚ŒãŒ Mixed Reality ã‹ã€ã¨ã„ã†æ°—æŒã¡ã«ãªã‚Šã¾ã—ãŸã€‚<br>ï¼ˆãªãŠã€äºŒåº¦ã»ã©å£ã«ã¶ã¤ã‹ã‚Šã¾ã—ãŸã€‚ç—›ã„ã€‚ï¼‰</p><p>ç¹°ã‚Šè¿”ã—ã«ãªã‚Šã¾ã™ãŒã€ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚„ãƒ—ãƒ¬ã‚¤å‹•ç”»ã€æ–‡ç« ã ã‘ã§ã¯ã“ã®æ„Ÿè¦šã¯ä¼ã‚ã‚‰ãªã„ã®ã§ã€ãœã²ã¨ã‚‚ä½•ã‚‰ã‹ã®æ–¹æ³•ã§ä¸€åº¦ä½“é¨“ã—ã¦ã„ãŸã ããŸã„ã§ã™ã€‚</p><h2 id="ãƒ•ãƒ«ã‚«ãƒ©ãƒ¼ãƒ‘ã‚¹ã‚¹ãƒ«ãƒ¼ã‚’ä½¿ã£ã¦ã€å®¶ã«ãƒ†ãƒ«ãƒŸãƒ³ã‚’ç½®ã„ã¦ã¿ã‚‹"><a href="#ãƒ•ãƒ«ã‚«ãƒ©ãƒ¼ãƒ‘ã‚¹ã‚¹ãƒ«ãƒ¼ã‚’ä½¿ã£ã¦ã€å®¶ã«ãƒ†ãƒ«ãƒŸãƒ³ã‚’ç½®ã„ã¦ã¿ã‚‹" class="headerlink" title="ãƒ•ãƒ«ã‚«ãƒ©ãƒ¼ãƒ‘ã‚¹ã‚¹ãƒ«ãƒ¼ã‚’ä½¿ã£ã¦ã€å®¶ã«ãƒ†ãƒ«ãƒŸãƒ³ã‚’ç½®ã„ã¦ã¿ã‚‹"></a>ãƒ•ãƒ«ã‚«ãƒ©ãƒ¼ãƒ‘ã‚¹ã‚¹ãƒ«ãƒ¼ã‚’ä½¿ã£ã¦ã€å®¶ã«ãƒ†ãƒ«ãƒŸãƒ³ã‚’ç½®ã„ã¦ã¿ã‚‹</h2><p>ã•ã¦ã€å…¬å¼ã®ã—ã£ã‹ã‚Šã—ãŸ MR ã‚’ä½“é¨“ã—ãŸã¨ã“ã‚ã§ã€è‡ªåˆ†ã§ã‚‚è§¦ã£ã¦ã¿ãŸããªã£ãŸã®ã§ã€ã¾ãšã¯ãƒ•ãƒ«ã‚«ãƒ©ãƒ¼ãƒ‘ã‚¹ã‚¹ãƒ«ãƒ¼ã‚’è©¦ã—ã¦ã¿ã¾ã™ã€‚<br>ã¨ã¯ã„ãˆä¸€ã‹ã‚‰ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ä½œã£ã¦ã„ã‚‹ã¨æ™‚é–“ãŒã‹ã‹ã‚‹ã®ã§ã€<a href="/articles/20220823a/">ä»¥å‰ä½œæˆã—ãŸãƒãƒ³ãƒ‰ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ãƒ†ãƒ«ãƒŸãƒ³ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿</a>ã‚’æµç”¨ã—ã¦ã€æˆ‘ãŒå®¶ã«ãƒ†ãƒ«ãƒŸãƒ³ã‚’å¬å–šã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><p>Oculus Integration ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å°å…¥ã—ã¦ã„ã¾ã—ãŸãŒã€ã‹ãªã‚Šã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãŒå…¥ã£ã¦ã„ãŸãŸã‚ã€åŸ·ç­†æ™‚æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã‚ã‚‹ 57.0 ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ãŸä¸Šã§é–‹ç™ºã—ã¦ã„ãã¾ã™ã€‚ï¼ˆãã®ä»– Unity ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚‚ 2022 ã¾ã§ä¸Šã’ãŸã‚Šã—ã¦ã„ã¾ã™ã€‚ï¼‰</p><p>ã„ã¤ã®é–“ã«ã‹ Oculus Integration ãŒéå¸¸ã«ä¾¿åˆ©ã«ãªã£ã¦ãŠã‚Šã€ç›´æ„Ÿçš„ã«å¿…è¦ãªã‚ã‚Œã“ã‚Œã‚’ã‚·ãƒ¼ãƒ³ã«è¿½åŠ ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã—ãŸã€‚ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒãƒ¼ã‹ã‚‰ Oculus -&gt; Tools -&gt; Building Blocks ã¨è¡Œãã¨ã€å„æ©Ÿèƒ½ã”ã¨ã®ãƒ–ãƒ­ãƒƒã‚¯ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€ã“ã®ä¸­ã‹ã‚‰å¿…è¦ãªã‚‚ã®ã‚’ãƒ’ã‚¨ãƒ©ãƒ«ã‚­ãƒ¼ã« D&amp;D ã™ã‚‹ã ã‘ã§å°å…¥ãŒå®Œäº†ã—ã¾ã™ã€‚</p><p>ä»Šå›ã¯ Camera Rig ã¨ Hand Trackingï¼ˆä»¥å‰ãƒ†ãƒ«ãƒŸãƒ³ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã‚’ä½œã£ãŸã¨ãã®ã‚‚ã¨ã¨ç«¶åˆã™ã‚‹ã®ã§ã€ãã¡ã‚‰ã¯å‰Šé™¤ã—ã¦ã‹ã‚‰ï¼‰ã‚’å°å…¥ã—ã€åŠ ãˆã¦ãƒ‘ã‚¹ã‚¹ãƒ«ãƒ¼ã‚’æä¾›ã—ã¦ãã‚Œã‚‹ã€Background Passthrough ã‚’å°å…¥ã—ã¾ã™ã€‚</p><img src="/images/20231013a/image.png" alt="image.png" width="1200" height="906" loading="lazy"><p>ã‚ã¨ã¯ãƒ†ãƒ«ãƒŸãƒ³å´ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‹ã‚‰ã€ãƒãƒ³ãƒ‰ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã®å‚ç…§ã‚’è¨­å®šã—ç›´ã›ã°æº–å‚™å®Œäº†ã§ã™ã€‚ãƒ“ãƒ«ãƒ‰ã—ã¦å‹•ã‹ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><p>æˆ‘ãŒå®¶ã«ãƒ†ãƒ«ãƒŸãƒ³ãŒæ¥ãŸï¼ï¼ˆæ€ã£ãŸã‚ˆã‚Šå¤§ãã„ï¼‰</p><img src="/images/20231013a/6e962269ed7aea050fd5c2cf96faf4fa.png" alt="6e962269ed7aea050fd5c2cf96faf4fa.png" width="1200" height="1066" loading="lazy"><p>åºŠã«ã‚‚ã¡ã‚ƒã‚“ã¨æ¥ã—ã¦ã¾ã™ã­ã€‚ï¼ˆç”»åƒã ã¨ã‚ã‹ã‚Šã«ãã„ã§ã™ãŒï¼‰</p><p>ãŸã ã€è‡ªåˆ†ã®æ‰‹ã¨ã®å‰å¾Œé–¢ä¿‚ã¯ãƒ‘ã‚¹ã‚¹ãƒ«ãƒ¼ã®ã¿ã§ã¯åˆ¤å®šã—ã‚ˆã†ãŒãªã„ã®ã§ã€ï¼ˆæœ¬å½“ã¯ãƒ†ãƒ«ãƒŸãƒ³ã®ã»ã†ãŒå¥¥ã«ã‚ã‚‹ã®ã«ï¼‰æ‰‹ã®æ‰‹å‰ã«ãƒ†ãƒ«ãƒŸãƒ³ãŒæç”»ã•ã‚Œã¦ã—ã¾ã£ã¦ã„ã¾ã™ã€‚ã“ã®ã‚ãŸã‚Šã¯ãŠãã‚‰ãæ·±åº¦ã‚»ãƒ³ã‚µãƒ¼ã‚’é©åˆ‡ã«ä½¿ã†ã“ã¨ã§è§£æ±ºã™ã‚‹æ°—ã¯ã—ã¾ã™ã€‚</p><p>ã¨ã“ã‚ã§ãƒ†ãƒ«ãƒŸãƒ³ã® 3D ãƒ¢ãƒ‡ãƒ«ã€å…¨ãä½œã‚Šè¾¼ã‚“ã§ã„ãªã„ã®ã§ã‚ã‹ã‚‰ã•ã¾ã« 3D ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€ã¨ã„ã†æ„Ÿã˜ãªã®ã§ã™ãŒã€ãã‚Œã§ã‚‚ãƒ•ãƒ«ã‚«ãƒ©ãƒ¼ãƒ‘ã‚¹ã‚¹ãƒ«ãƒ¼ã§ç¾å®Ÿä¸–ç•Œã«ç™»å ´ã•ã›ã‚‹ã¨ã€ä¸€æ°—ã«ãã“ã«ç‰©ãŒã‚ã‚‹ã‚ˆã†ãªéŒ¯è¦šã«è¥²ã‚ã‚Œã¾ã™ã€‚ï¼ˆã¶ã¤ã‹ã‚Šãã†ã«ãªã£ãŸã‚‰ç„¡æ„è­˜ã«é¿ã‘ã‚ˆã†ã¨ã—ã¦ã—ã¾ã†ãã‚‰ã„ï¼‰</p><p>ã‚‚ã£ã¨ãƒªã‚¢ãƒ«ãªã‚‚ã®ã‚’ç™»å ´ã•ã›ãŸã‚Šã€é€†ã« First Encounters ã®ã‚ˆã†ãªã‚³ãƒŸã‚«ãƒ«ãªã‚‚ã®ã¨ç¾å®Ÿä¸–ç•Œã‚’èåˆã•ã›ãŸã‚Šã¨ã€å¯èƒ½æ€§ã¯éå¸¸ã«åºƒãã†ã ã¨æ”¹ã‚ã¦æ„Ÿã˜ã¾ã—ãŸã€‚</p><h2 id="ãŠã‚ã‚Šã«"><a href="#ãŠã‚ã‚Šã«" class="headerlink" title="ãŠã‚ã‚Šã«"></a>ãŠã‚ã‚Šã«</h2><p>ãƒ†ãƒ«ãƒŸãƒ³ã€ã‚„ã£ã±ã‚Šé›£ã—ã„ã€‚</p><p>ã¨ã„ã†ã®ã¯å†—è«‡ã¨ã—ã¦ã€ã‚„ã¯ã‚Šæ–°ã—ã„ãƒ‡ãƒã‚¤ã‚¹ã¨ã„ã†ã®ã¯èƒ¸ãŒèºã‚Šã¾ã™ã­ã€‚ç§ãŒ XR ç³»ãŒå¥½ãã ã¨ã„ã†ã®ã‚‚ã‚ã‚Šã¾ã™ãŒã€ç‰¹ã« XR ç³»ã®ç™ºå±•ã¯èº«è¿‘ã«æœªæ¥ã‚’æ„Ÿã˜ã‚‰ã‚Œã¦ãƒãƒƒãƒ”ãƒ¼ã§ã™ã€‚</p><p>ä»Šå¾Œã‚‚æ–°ã—ã„æŠ€è¡“ãƒ»ãƒ‡ãƒã‚¤ã‚¹ãŒç¾ã‚Œã‚‹åº¦ã«è‰²ã€…ã¨ãƒˆãƒ©ã‚¤ã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚</p><p>ã¨ã‚Šã‚ãˆãšç›´è¿‘ã¯ã€æ·±åº¦ã‚»ãƒ³ã‚µãƒ¼ã‚‚æ´»ç”¨ã—ã¦ãªã«ã‹ä½œã£ã¦éŠã¹ãªã„ã‹è©¦ã—ãŸã„ã§ã™ã€‚</p><div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none; padding-left: 0;"><li id="fn:1"><span style="vertical-align: top; padding-right: 10px;">1.</span><span style="vertical-align: top;">Meta Reveals How Quest 3 Controller Tracking Works As Beat Saber Founder Gives His Take <a href="https://www.uploadvr.com/meta-explains-quest-3-controller-tracking/">https://www.uploadvr.com/meta-explains-quest-3-controller-tracking/</a></span><a href="#fnref:1" rev="footnote"> â†©</a></li></ol></div></div>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/VR/">VR</category>
      
      
      <category domain="https://future-architect.github.io/tags/VR/">VR</category>
      
      <category domain="https://future-architect.github.io/tags/MetaQuest3/">MetaQuest3</category>
      
      
      <comments>https://future-architect.github.io/articles/20231013a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Makefileè¦šæ›¸: Goã‚¢ãƒ—ãƒªé–‹ç™ºã«å½¹ç«‹ã¡ãã†ãªåŸºç¤çŸ¥è­˜</title>
      <link>https://future-architect.github.io/articles/20231012a/</link>
      <guid>https://future-architect.github.io/articles/20231012a/</guid>
      <pubDate>Wed, 11 Oct 2023 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;img src=&quot;/images/20231012a/gnu-make.png&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;418&quot;&gt;

&lt;h2 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot;</description>
          
        
      
      
      
      <content:encoded><![CDATA[<img src="/images/20231012a/gnu-make.png" alt="" width="800" height="418"><h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><p>TIGçœŸé‡ã§ã™ã€‚è‚²ä¼‘æ˜ã‘ã§ã™ã€‚</p><p>ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ç¤¾å†…ã®ã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼ã¯makeã‚„<a href="https://taskfile.dev/">Task</a>ãªã©è¤‡æ•°ã®æµæ´¾ãŒã‚ã‚Šã€ãƒãƒ¼ãƒ ã«ã‚ˆã£ã¦ä½¿ã„åˆ†ã‘ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚å€‹äººçš„ã«ã¯makeã§è‰¯ã„ã‚“ã˜ã‚ƒãªã„ã‹ã¨æ€ã£ã¦ã„ã¾ã™ãŒã€Taskã‚‚è‰¯ã„ã§ã™ã‚ˆã­ã€‚</p><p>makeã¯ç´°ã‹ã„è¨˜æ³•ã‚’ã„ã¤ã‚‚å¿˜ã‚Œã‚‹ï¼‹èª¿ã¹ã‚‹ã¨Cè¨€èªå‘ã‘ã®æƒ…å ±ãŒå‡ºã¦ãã¦è„³å†…å¤‰æ›ã«æ‰‹é–“ã‚’æ„Ÿã˜ãŸãŸã‚ã€makeã‚’ç”¨ã„ã¦Webãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¢ãƒ—ãƒªã‚’Goã§é–‹ç™ºã™ã‚‹ã¨ã„ã†ã“ã¨ã‚’ãƒ†ãƒ¼ãƒã«ã€å½¹ç«‹ã¡ãã†ãªæƒ…å ±ã‚’ã¾ã¨ã‚ã¾ã™ã€‚</p><p>ãªãŠã€ä»Šè¨˜äº‹ã«ãŠã‘ã‚‹makeã¯ã€GNU Makeã‚’æŒ‡ã—ã¾ã™ã€‚ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ä»¥ä¸‹ã§å‹•ã‹ã—ã¦ã„ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ make -v | <span class="built_in">head</span> -n 1</span><br><span class="line">GNU Make 4.2.1</span><br></pre></td></tr></table></figure><h2 id="Makefileã®ãŸã‚ã®EditorConfig"><a href="#Makefileã®ãŸã‚ã®EditorConfig" class="headerlink" title="Makefileã®ãŸã‚ã®EditorConfig"></a>Makefileã®ãŸã‚ã®EditorConfig</h2><p>Makefileã®ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã¯ãƒãƒ¼ãƒ‰ã‚¿ãƒ–ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚èª¤ã‚Šã‚’é˜²ããŸã‚ã«ã‚‚<a href="https://editorconfig.org/">EditorConfig</a>ã‚’è¨­å®šã—ã¦ãŠãã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚</p><p>makeã¯é€šå¸¸ã€Makefileã¨ã„ã†åç§°ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§èªè­˜ã—ã¾ã™ãŒã€åŒä¸€ãƒ•ã‚©ãƒ«ãƒ€ã«è¤‡æ•°ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨æ„ã—ãŸã„ã¨ãã‚„ã€includeã‚ˆã†ã«å…±é€šã®å¤‰æ•°ãªã©ã‚’å®šç¾©ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚‹å ´åˆã¯ã€<code>.mk</code> ã¨ã„ã†æ‹¡å¼µå­ã‚’ä»˜ã‘ã¾ã™ã®ã§ã€<code>[&#123;Makefile,**.mk&#125;]</code> ã¨ã„ã†ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒè‰¯ã„ã§ã—ã‚‡ã†ï¼ˆ<a href="https://www.gnu.org/software/make/manual/html_node/Makefile-Names.html">å°æ–‡å­—ã®<code>makefile</code> ã‚ˆã‚Š <code>Makefile</code> ã®æ–¹ã‚’æ¨å¥¨ã™ã‚‹</a>ã¨ã®ã“ã¨ãªã®ã§å°æ–‡å­—ã®æ–¹ã¯ã‚ãˆã¦å…¥ã‚Œã¦ã¾ã›ã‚“ï¼‰ã€‚</p><figure class="highlight ini"><figcaption><span>.editorconfig</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="attr">root</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="section">[*]</span></span><br><span class="line"><span class="attr">indent_style</span> = space</span><br><span class="line"><span class="attr">indent_size</span> = <span class="number">2</span></span><br><span class="line"><span class="attr">end_of_line</span> = lf</span><br><span class="line"><span class="attr">charset</span> = utf-<span class="number">8</span></span><br><span class="line"><span class="attr">trim_trailing_whitespace</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">insert_final_newline</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="section">[*.go]</span></span><br><span class="line"><span class="attr">indent_style</span> = tab</span><br><span class="line"></span><br><span class="line"><span class="section">[&#123;Makefile,**.mk&#125;]</span></span><br><span class="line"><span class="attr">indent_style</span> = tab</span><br></pre></td></tr></table></figure><p>è¨˜äº‹ã«ã‚ˆã£ã¦ã¯ä»¥ä¸‹ã®ã‚ˆã†ã« <code>indent_size</code> ã‚’æŒ‡å®šã™ã‚‹è¨­å®šä¾‹ã‚‚ã‚ˆãè¦‹ã‹ã‘ã¾ã™ã€‚ã“ã¡ã‚‰ã‚’æŒ‡å®šã—ã¦ã„ã‚‹ã¨ã€ãƒãƒ¼ãƒ‰ã‚¿ãƒ–ã®å ´åˆã§ã‚‚ã€ã‚¨ãƒ‡ã‚£ã‚¿ã‚„GitHubä¸Šã®è¡¨ç¤ºå¹…ã‚’åˆ¶å¾¡ã—ã¦ãã‚Œã‚‹ãŸã‚ã€ãƒãƒ¼ãƒ é–‹ç™ºã§è¦‹ãŸç›®ã¾ã§çµ±ä¸€ã‚’åŠ¹ã‹ã›ãŸã„å ´åˆã¯è¿½åŠ ã™ã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚å€‹äººçš„ã«ã¯ã“ã“ã¯å€‹ã€…äººã«å§”ã­ã¦ã‚‚è‰¯ã„é ˜åŸŸã ã¨æ„Ÿã˜ãŸã®ã§ä¸Šã®ä¾‹ã‹ã‚‰çœã„ã¦ã„ã¾ã™ã€‚</p><figure class="highlight ini"><figcaption><span>.editorconfig</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="section">[&#123;Makefile,**.mk&#125;]</span></span><br><span class="line"><span class="comment"># è¡¨ç¤ºå¹…ã‚‚Editorconfigã§åˆ¶å¾¡ã—ãŸã„å ´åˆã¯indent_sizeã®è¨­å®šã‚’åŠ ãˆã‚‹</span></span><br><span class="line"><span class="attr">indent_size</span> = <span class="number">4</span></span><br><span class="line"><span class="attr">indent_style</span> = tab</span><br></pre></td></tr></table></figure><h2 id="ãƒªãƒ³ã‚¿ãƒ¼"><a href="#ãƒªãƒ³ã‚¿ãƒ¼" class="headerlink" title="ãƒªãƒ³ã‚¿ãƒ¼"></a>ãƒªãƒ³ã‚¿ãƒ¼</h2><p>Makefileã®ãƒªãƒ³ã‚¿ãƒ¼ã¨ã—ã¦<a href="https://github.com/mrtazz/checkmake">mrtazz&#x2F;checkmake</a> ãŒã‚ã‚Šã¾ã™ã€‚2023.10.6æ™‚ç‚¹ã§v0.2.2ã€<code>experimental tool</code> ã¨READMEã«ã‹ã‹ã‚Œã¦ã„ã‚‹Goè£½ã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ã¾ã å®Ÿé¨“çš„ãªå–ã‚Šçµ„ã¿ã®ã‚ˆã†ã§ã™ãŒã€ã™ã§ã« <a href="https://github.com/oxsecurity/megalinter">MegaLinter</a>ã«ãƒã‚¤ãƒ†ã‚£ãƒ–ã§çµ„ã¿è¾¼ã¾ã‚Œã¦ãŠã‚Šã€åˆ©ç”¨ã—ã¦ã„ã‚‹ãƒãƒ¼ãƒ ã‚‚å¢—ãˆã¦ã„ã‚‹ã‚ˆã†ã«æ„Ÿã˜ã¾ã™ã€‚</p><p>v0.2.2æ™‚ç‚¹ã§ã®<a href="https://github.com/mrtazz/checkmake/tree/main/rules">å®Ÿè£…</a>ã‹ã‚‰ã€æ¬¡ã®4ç¨®é¡ã®ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã£ã¦ãã‚Œã‚‹ã‚ˆã†ã§ã™ã€‚</p><ol><li>ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒœãƒ‡ã‚£ãŒNè¡Œä»¥å†…ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ5ï¼‰</li><li>all, clean, testã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãŒPHONYã«ã‚ã‚‹ã“ã¨</li><li>ãƒœãƒ‡ã‚£ãŒãªã„ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã¯PHONYå®£è¨€ã™ã‚‹ã“ã¨</li><li>ãƒ“ãƒ«ãƒ‰ã®ä¸€è²«æ€§ã®ãŸã‚dateã®åˆ©ç”¨æœ‰ç„¡</li></ol><p>ã¾ãŸã€å…ˆã®EditorConfigã®è¨­å®šå€¤ãŒæ­£ã—ãåæ˜ ã•ã‚ŒãŸã‚¨ãƒ‡ã‚£ã‚¿ã§ç·¨é›†ã•ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ã™ã‚‹ãŸã‚ã€<a href="https://github.com/editorconfig-checker/editorconfig-checker">editorconfig-checker</a>ã‚’ä½¿ã†ã¨ã„ã†è€ƒãˆæ–¹ã‚‚ã‚ã‚Šã¾ã™ã€‚ã“ã¡ã‚‰ã¯Makefileä»¥å¤–ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«å¯¾ã—ã¦ã‚‚åˆ©ç”¨ã§ãã‚‹ã‚‚ã®ãªã®ã§ã€ä¸€å¾‹è¨­å®šã—ã¦ãŠãã¨ãƒ™ã‚¿ãƒ¼ã ã¨æ€ã„ã¾ã™ã€‚</p><p>ãƒªãƒ³ã‚¿ãƒ¼ã¨åˆã‚ã›ã¦ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ã«ã¤ã„ã¦ã‚‚è§¦ã‚ŒãŸã‹ã£ãŸã§ã™ãŒã€æœ‰ç›Šãªã‚‚ã®ã‚’æ¢ã›ã¾ã›ã‚“ã§ã—ãŸã€‚ã‚‚ã—ã€ã”å­˜çŸ¥ã®æ–¹ãŒã„ã‚Œã°æ•™ãˆã¦ãã ã•ã„ã€‚</p><h2 id="ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„"><a href="#ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„" class="headerlink" title="ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„"></a>ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„</h2><p>Makefileãã®ã‚‚ã®ã®ã€ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ï¼ˆã‚¹ã‚¿ã‚¤ãƒ«ã‚¬ã‚¤ãƒ‰ï¼‰ã§åºƒãå‘¨çŸ¥ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã®1ã¤ãŒ<a href="https://www.gnu.org/prep/standards/html_node/Makefile-Conventions.html">GNUã®ãƒãƒ‹ãƒ¥ã‚¢ãƒ«</a> ã§ã—ã‚‡ã†ã€‚å¤šãã®æ…£ç¿’ãŒã“ã“ã‹ã‚‰æ¥ã¦ã„ãã†ãªå¤§æœ¬ã§ã™ã€‚</p><p>é‡è¦ãã†ãªã‚‚ã®ã‚’æŠœç²‹ã—ã¾ã™ã€‚</p><ul><li>Makefile Basicsï¼ˆMakefileåŸºç¤ï¼‰<ul><li>ã™ã¹ã¦ã®Makefileã¯ <code>SHELL = /bin/sh</code> ãŒå«ã¾ã‚Œã‚‹ã¹ãã¨ã‚ã‚‹</li><li>ã“ã¡ã‚‰ã«ã¤ã„ã¦ã¯å¾Œè¿°ã—ã¾ã™ãŒã€ <code>bash</code> ã®æ–¹ãŒãƒ™ã‚¿ãƒ¼ã ã¨æ€ã„ã¾ã™</li></ul></li><li>Standard Targetsï¼ˆæ¨™æº–ã‚¿ãƒ¼ã‚²ãƒƒãƒˆï¼‰<ul><li>ã™ã¹ã¦ã®GNUãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«ã¯æ¬¡ã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãŒå«ã¾ã‚Œã‚‹ã¹ãã¨ã‚ã‚‹<ul><li><code>all</code>ã€<code>install</code>ã€<code>install-html</code>ã€(ä¸­ç•¥)ã€<code>clean</code>ã€(ä¸­ç•¥)ã€<code>TAGS</code>ã€<code>info</code>ã€<code>dvi</code>ã€<code>html</code>ã€<code>pdf</code>ã€<code>ps</code>ã€<code>dist</code>ã€<code>check</code>ã€(çœç•¥)</li></ul></li><li><code>install-html</code> ã®ä¾‹ã«ã‚ã‚‹é€šã‚Šã€ <strong>ã‚¿ãƒ¼ã‚²ãƒƒãƒˆåã¯ãƒã‚¤ãƒ•ãƒ³åŒºåˆ‡ã‚Š</strong> ãŒæ¨å¥¨ã ã¨æ€ã‚ã‚Œã¾ã™</li></ul></li></ul><p>ã‚¿ãƒ¼ã‚²ãƒƒãƒˆåã¯ã“ã‚Œã‚’ãƒ™ãƒ¼ã‚¹ã«ã§ãã‚‹ã®ãŒå¬‰ã—ã„ã§ã™ã­ã€‚Goã§Webãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¢ãƒ—ãƒªé–‹ç™ºã ã¨ã€<code>all</code>, <code>install</code>, <code>uninstall</code>, <code>clean</code>, <code>dist</code>, <code>check</code> ã‚ãŸã‚Šã¯ä½¿ãˆãã†ã§ã™ãŒã€å¤‰ã‚ã£ã¦æ¥ã¦ã„ã‚‹ã‚‚ã®ã‚‚ã‚ã‚Šã¾ã™ã€‚</p><ul><li><code>all</code>: make ã®æ…£ç¿’ã§ãƒ—ãƒ­ã‚°ãƒ©ãƒ å…¨ä½“ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã‚¿ãƒ¼ã‚²ãƒƒãƒˆåã§ã™ã€‚<code>make</code>ã‚³ãƒãƒ³ãƒ‰ã®ã¿ã§ã‚¿ãƒ¼ã‚²ãƒƒãƒˆåã‚’æŒ‡å®šã—ãªã„å ´åˆã«é€šå¸¸å‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚<code>test</code>ã€<code>build</code> ãªã©ã™ã¹ã¦ã‚’å®Ÿæ–½ã—ã¦ãŠãã¨ã‚ˆã„ã§ã—ã‚‡ã†ã€‚ãƒ‡ãƒ—ãƒ­ã‚¤ã¯è¡Œã‚ãªã„ã»ã†ãŒè‰¯ã„ã‹ã¨æ€ã„ã¾ã™</li><li><code>check</code>: <code>test</code> ã«ã™ã‚‹ã“ã¨ãŒWebã‚¢ãƒ—ãƒªé–‹ç™ºã§ã¯å¤šã„ã‚ˆã†ã«æ€ã„ã¾ã™ã€‚å…ˆç¨‹ã®<code>mrtazz/checkmake</code>ã‚‚<code>test</code>æƒ³å®šã§ã™ã€‚</li><li><code>install</code>: æœ¬æ¥ã¯é–‹ç™ºä¸­ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’è¡Œã†ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã§ã€é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã®æ„å‘³ã§ã¯ç„¡ã„ã§ã™ã€‚ãã®ãŸã‚ <code>setup</code> ã¨åˆ¥ã®ç”¨èªã‚’ç”¨ã„ã‚‹ã“ã¨ã‚‚å¤šã„ã¨æ€ã„ã¾ã™ã€‚ã—ã‹ã— Goã ã¨ <code>go install</code> ã§å¿…è¦ãªãƒ„ãƒ¼ãƒ«ã‚’å…¥ã‚Œã‚‹ã“ã¨ã‚‚å¤šã„ã“ã¨ã‚‚ã‚ã‚Šã€ <code>install</code> ã‚’ä½¿ã£ã¦ã„ã‚‹å ´é¢ã‚‚ã‚ˆãè¦‹ã¾ã™ãŒã€æ„å‘³åˆã„ãŒç•°ãªã‚‹ãŸã‚ <code>setup</code> ãŒãƒ™ã‚¿ãƒ¼ã ã¨æ€ã„ã¾ã™</li><li><code>dist</code>: ã‚µãƒ¼ãƒãƒ‡ãƒ—ãƒ­ã‚¤ç”¨ã«zipã§å›ºã‚ã‚‹å ´åˆãªã©ã«ä½¿ã£ã¦ã‚‚è‰¯ã„æ°—ãŒã—ã¾ã™ã—ã€é–‹ç™ºè€…ã«ã¨ã£ã¦ã¯ã•ã—ã¦é‡è¦ã§ãªã‘ã‚Œã° <code>bootstrap.zip</code> ãªã©ã¨ã„ã†ã‚¿ãƒ¼ã‚²ãƒƒãƒˆåã®ã¿ã«ã—ã¦è‰¯ã„æ°—ãŒã—ã¾ã™</li><li><code>clean</code>: ç”Ÿæˆã—ãŸãƒã‚¤ãƒŠãƒªã‚’å‰Šé™¤ã—ãŸã‚Šã€Goã‚¢ãƒ—ãƒªé–‹ç™ºã®å ´åˆã¯<code>go clean</code> ãªã©ã‚‚åˆã‚ã›ã¦å®Ÿæ–½ã™ã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†</li></ul><p>æ¬¡ã«ãƒ¡ã‚¸ãƒ£ãƒ¼ã ã¨æ€ã‚ã‚Œã‚‹è¦ç´„ã«<a href="https://clarkgrubb.com/makefile-style-guide">clarkgrubbã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚¬ã‚¤ãƒ‰</a>ãŒã‚ã‚Šã¾ã™ã€‚ã“ã¡ã‚‰ã«ã¤ã„ã¦ã¯ã¾ãŸåˆ¥ã®æ©Ÿä¼šã§ç´¹ä»‹ã—ã¾ã™ã€‚</p><h2 id="Makefileã‚ªãƒ—ã‚·ãƒ§ãƒ³"><a href="#Makefileã‚ªãƒ—ã‚·ãƒ§ãƒ³" class="headerlink" title="Makefileã‚ªãƒ—ã‚·ãƒ§ãƒ³"></a>Makefileã‚ªãƒ—ã‚·ãƒ§ãƒ³</h2><p>Makefileã®å…ˆé ­ã«ã‚ˆãè¨­å®šã™ã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯æ¬¡ã§ã™ã€‚ãã‚Œãã‚Œèª¬æ˜ã—ã¦ã„ãã¾ã™ã€‚</p><figure class="highlight makefile"><figcaption><span>Makefile</span></figcaption><table><tr><td class="code"><pre><span class="line">SHELL := bash</span><br><span class="line">.SHELLFLAGS := -eu -o pipefail -c</span><br><span class="line">.DEFAULT_GOAL := help</span><br></pre></td></tr></table></figure><ul><li><p><code>SHELL</code>: æ¬¡ã® <code>.SHELLFLAGS</code> ã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã« <code>bash</code> ã‚’å®£è¨€ã—ã¾ã™ã€‚<code>/bin/bash</code> ã§ã‚‚è‰¯ã„ã¨æ€ã„ã¾ã™ãŒã€<code>bash</code> ãã®ã¾ã¾ã®æ–¹ãŒç§»æ¤æ€§ãŒé«˜ã„ã¨è€ƒãˆã¾ã™</p></li><li><p><code>.SHELLFLAGS</code>: ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®Ÿè¡Œæ™‚ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆç–‘ä¼¼ã‚¿ãƒ¼ã‚²ãƒƒãƒˆï¼‰ã§ã™</p><ul><li><code>-eu</code>: <code>-e</code> ã¯bashã§å®Ÿè¡Œã—ãŸã‚³ãƒãƒ³ãƒ‰ãŒå¤±æ•—ã—ãŸå ´åˆã«çµ‚äº†ã•ã›ã‚‹ã‚‚ã®ã§ã™ã€‚<code>;</code> ãªã©ã§è¤‡æ•°ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã§è¨˜è¿°ã—ãŸå ´åˆã§ã‚‚æ­¢ã‚ãŸã„ã®ã§ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«åŠ ãˆã¾ã™ã€‚ <code>-u</code> ã¯bashã§å¤‰æ•°æœªå®šç¾©ã®å ´åˆã«ã‚¨ãƒ©ãƒ¼ã§æ­¢ã‚ã‚‹ãŸã‚ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã™</li><li><code>-o pipefail</code>: ãƒ‘ã‚¤ãƒ—ã‚’ä½¿ã£ãŸå‡¦ç†ã‚’æ›¸ã„ãŸå ´åˆã«ã€ãƒ‘ã‚¤ãƒ—ã®æœ€åˆã‚„é€”ä¸­ã§å‡¦ç†ãŒå¤±æ•—ã—ãŸå ´åˆã€å…¨ä½“ã‚’å¤±æ•—ã—ãŸã¨ã¿ãªã™ãŸã‚ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã™</li><li><code>-c</code>: <code>.SHELLFLAGS</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ç”¨ã„ã‚‹ã¨ãã«ã¯æœ€å¾Œã«ã¤ã‘ã‚‹ã®ãŒå¿…é ˆã§ã™ã€‚ç†ç”±ã¯å†…éƒ¨çš„ã«ã¯å„è¡ŒãŒ <code>$(SHELL) -$(SHELLFLAGS) ä½•ã‹ã—ã‚‰ã®commands</code> ã¨ã„ã£ãŸå½¢ã§å‹•ããŸã‚ã§ã™ï¼ˆ<code>bash -c &quot;echo &#39;Hello&#39;&quot;</code> ã®ã‚ˆã†ã«ã‚³ãƒãƒ³ãƒ‰ã¨ã—ã¦è©•ä¾¡ã•ã›ã‚‹ãŸã‚ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã™ï¼‰ã€‚<code>.SHELLFLAGS</code>ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯ <code>-c</code> ãŒå…¥ã£ã¦ã„ã¾ã™ã€‚</li></ul></li><li><p><code>.DEFAULT_GOAL</code>: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼ˆã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’æœªæŒ‡å®šã«ã—ãŸå ´åˆã«é¸ã°ã‚Œã‚‹å¯¾è±¡ï¼‰ã¯ä¸€ç•ªæœ€åˆã«å®šç¾©ã—ãŸã‚¿ãƒ¼ã‚²ãƒƒãƒˆã§ã™ã€‚æ…£ç¿’çš„ã«ã¯ <code>all</code> ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’æœ€åˆã«å®šç¾©ã™ã‚‹ã“ã¨ãŒå¤šã„ã‚ˆã†ã§ã™ã€‚ã—ã‹ã—ã€å¾Œè¿°ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ©Ÿæ¢°çš„ã«è¿½åŠ ã—ã¦ã€<code>help</code> ã«ã—ã¦ãŠãã¨ä¾¿åˆ©ã ã¨æ€ã„ã¾ã™ï¼ˆallã ã¨å®Ÿè¡Œæ™‚é–“ãŒé•·ã„ã®ã§ï¼‰ã€‚ã“ã‚Œã¯å¥½ã¿ãªã®ã§ãƒãƒ¼ãƒ ã«ã‚ˆã£ã¦ã¯ãªãã—ã¦ã‚‚è‰¯ã„ã¨æ€ã„ã¾ã™</p></li></ul><p>ç‰¹ã« <code>.SHELLFLAGS</code> ã§æ¸¡ã™å€¤ã¯å€‹äººçš„ã«é‡è¦ã§ã€æŒ‡å®šã‚’å¿˜ã‚Œã‚‹ã¨ãã®å¾Œã€é«˜ç¢ºç‡ã§ãƒãƒã‚‹ãƒ¡ãƒ³ãƒãƒ¼ãŒå‡ºç¾ã™ã‚‹ä½“æ„ŸãŒã‚ã‚Šã¾ã™ã®ã§ã€Makefileã«ã¯æ©Ÿæ¢°çš„ã«ã¤ã‘ã‚‹æ…£ç¿’åŒ–ã—ã¦ãŠãã¨è‰¯ã„ã‹ãªã¨æ€ã„ã¾ã™ã€‚</p><p>makeã«ã¯æ§˜ã€…ãªè¨­å®šãŒã§ãã¾ã™ãŒã€ä»¥ä¸‹ã¯1åº¦ã¯ä»˜ã‘ãŸã‚‚ã®ã®é‹ç”¨ã‚’ã¨ã—ã¦å¤–ã—ãŸè¨­å®šå€¤ã§ã™ã€‚å‚™å¿˜ã«æ®‹ã—ã¦ãŠãã¾ã™</p><ul><li><code>MAKEFLAGS += --warn-undefined-variables</code>: makeã®å®Ÿè¡Œã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã€<code>--warn-undefined-variables</code> ã¯makeä¸Šã§æœªå®šç¾©ã®å¤‰æ•°ã‚’ $(undefined_var) ãªã©ã§åˆ©ç”¨ã™ã‚‹ã¨è­¦å‘Šã‚’ä¸Šã’ã‚‹ã‚‚ã®ã§ã™ã€‚ã“ã‚Œè‡ªä½“ã¯è‰¯ã•ãã†ã ã¨æ€ã„ã¾ã—ãŸãŒã€å¾Œè¿°ã™ã‚‹ <code>go test $(option) ./...</code> ã®ã‚ˆã†ã«æ‹¡å¼µç”¨ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒ‡å®šã™ã‚‹ã¨ãã«ãƒã‚¤ã‚ºã ã£ãŸã®ã§å‰Šé™¤ã—ã¾ã—ãŸ</li><li><code>MAKEFLAGS += --no-print-directory</code>: å¾Œè¿°ãŒã‚ã‚Šã¾ã™ãŒã€ã“ã¡ã‚‰ã¯ä¸€å¾‹æŒ‡å®šã—ã¦ã‚‚è‰¯ã„ãƒ¬ãƒ™ãƒ«ã ã¨æ€ã„ã¾ã™ã€‚ã“ã®è¨˜äº‹ã§ã¯å…ˆé ­è¡Œã‚’ã‚ã¾ã‚Šå¢—ã‚„ã™ã®ã‚‚ã€makeã‚’é›£ã—ã„ã‚‚ã®ã¨æ€ã‚ã‚Œãã†ã ã£ãŸã®ã§é™¤å¤–ã—ã¦ã„ã¾ã™</li><li><code>MAKEFLAGS += --no-builtin-rules</code>: <code>make</code> ãŒæš—é»™çš„ã«æ¢ã™ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç„¡åŠ¹åŒ–ã™ã‚‹è¨­å®šã§ã™ã€‚æ€§èƒ½å‘ä¸ŠãŒè¦‹è¾¼ã¾ã‚Œã‚‹ã‚ˆã†ã§ã™ãŒã€Goç’°å¢ƒã ã¨å¤§ããªå·®ã¯ç”Ÿã¾ã‚Œãªã‹ã£ãŸãŸã‚ã€ã‚·ãƒ³ãƒ—ãƒ«åŒ–ã®ãŸã‚ãªãã—ã¾ã™</li><li><code>.SUFFIXES:</code>:  <code>MAKEFLAGS += --no-builtin-rules</code> ã¨åŒæ§˜ã§ã™</li><li><code>.DELETE_ON_ERROR</code>: ãƒ¬ã‚·ãƒ”ãŒå¤±æ•—ã—ãŸå ´åˆã«ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã™ã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆç–‘ä¼¼ã‚¿ãƒ¼ã‚²ãƒƒãƒˆï¼‰ã§ã™ã€‚ä¾¿åˆ©ãã†ã§ã™ãŒmakeã‚’çŸ¥ã‚‰ãªã„é–‹ç™ºè€…ã‹ã‚‰ã™ã‚‹ã¨ã“ã®æŒ™å‹•ãŒç›´æ„Ÿçš„ã§ã¯ãªã„ãŸã‚ã€makeä¸Šç´šè€…ãŒé›†ã†ãƒãƒ¼ãƒ ã§ãªã„é™ã‚Šã¯æœªè¨­å®šã§è‰¯ã„ã¨æ€ã„ã¾ã—ãŸ</li><li><code>.ONESHELL</code>: <code>make</code>ã¯é€šå¸¸1è¡Œã”ã¨åˆ¥ã®ãƒ—ãƒ­ã‚»ã‚¹ã§èµ·å‹•ã—ã¾ã™ãŒã€ã“ã‚Œã‚’1ã¤ã®ã‚·ã‚§ãƒ«ã¨ã—ã¦å‹•ã‹ã™ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã™ï¼ˆ<code>;</code>ã‚„<code>\</code>ã‚’æ¸›ã‚‰ã›ã¦ä¾¿åˆ©ã§ã™ï¼‰ã€‚ è¦æ¨¡æ„Ÿã«ã‚‚ã‚ˆã‚Šã¾ã™ãŒç§ãŒé–¢ã‚ã£ãŸGo Webã‚¢ãƒ—ãƒªé–‹ç™ºã®è¦æ¨¡æ„Ÿã§ã¯ <code>make</code> ã«ãã‚Œã»ã©è¤‡é›‘ãªå‡¦ç†ã‚’è¡Œã†ã“ã¨ã¯ãªã‹ã£ãŸã®ã§ã€ãªã‚‹ã¹ãå…ˆé ­ã®å®£è¨€éƒ¨åˆ†ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«ã—ãŸã‹ã£ãŸãŸã‚å¤–ã™æ–¹é‡ã¨ã—ã¾ã—ãŸ</li></ul><h2 id="Goã‚¢ãƒ—ãƒªã«ç’°å¢ƒå¤‰æ•°ã‚’æ¸¡ã™"><a href="#Goã‚¢ãƒ—ãƒªã«ç’°å¢ƒå¤‰æ•°ã‚’æ¸¡ã™" class="headerlink" title="Goã‚¢ãƒ—ãƒªã«ç’°å¢ƒå¤‰æ•°ã‚’æ¸¡ã™"></a>Goã‚¢ãƒ—ãƒªã«ç’°å¢ƒå¤‰æ•°ã‚’æ¸¡ã™</h2><p>ã‚¯ãƒ©ã‚¦ãƒ‰ãƒã‚¤ãƒ†ã‚£ãƒ–ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã®ãŸã‚ã«The Twelve-Factor Appã‚’å®ˆã£ã¦ã„ã‚‹ãƒãƒ¼ãƒ ã¯å¤šã„ã¨æ€ã„ã¾ã™ã€‚ãã†ã™ã‚‹ã¨ã€DBã‚„å¤–éƒ¨æ¥ç¶šå…ˆãªã©ã€ãã‚Œãªã‚Šã®æ•°ã®ç’°å¢ƒå¤‰æ•°ã‚’Goã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«æ¸¡ã™å¿…è¦ãŒå‡ºã¦ãã‚‹ã§ã—ã‚‡ã†ã€‚</p><p>ã“ã®ã¨ãã€æœ‰åãªã‚ˆãã‚ã‚‹é–“é•ã„ã¯æ¬¡ã®ã‚ˆã†ãªã‚¿ãƒ¼ã‚²ãƒƒãƒˆå†…ã®ã‚³ãƒãƒ³ãƒ‰ã«å¤‰æ•°ã‚’exportã—ã¦è¨˜è¼‰ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ï¼ˆâ€»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯ãƒ©ãƒ•ã«æ‰±ã£ã¦ã¾ã™ã®ãŒã‚¤ãƒ¡ãƒ¼ã‚¸ã¨ã—ã¦æ‰ãˆã¦ãã ã•ã„ï¼‰ã€‚</p><figure class="highlight ini"><figcaption><span>Makefileï¼ˆNGä¾‹ï¼‰</span></figcaption><table><tr><td class="code"><pre><span class="line">SHELL := bash</span><br><span class="line">.SHELLFLAGS := -eu -o pipefail -c</span><br><span class="line"></span><br><span class="line">.PHONY: run</span><br><span class="line"></span><br><span class="line"><span class="comment"># run is launching server</span></span><br><span class="line">run:</span><br><span class="line">@export <span class="attr">DB_HOST</span>=localhost</span><br><span class="line">@export <span class="attr">DB_PORT</span>=<span class="number">5432</span></span><br><span class="line">@export <span class="attr">DB_NAME</span>=pg</span><br><span class="line">@export <span class="attr">DB_USER</span>=pg</span><br><span class="line">@export <span class="attr">DB_PASS</span>=xxxxx</span><br><span class="line">@go run cmd/main/main.go</span><br></pre></td></tr></table></figure><figure class="highlight go"><figcaption><span>cmd/main/main.go</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;log&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;github.com/kelseyhightower/envconfig&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> DBConfig <span class="keyword">struct</span> &#123;</span><br><span class="line">Host <span class="type">string</span></span><br><span class="line">Port <span class="type">int</span></span><br><span class="line">Name <span class="type">string</span></span><br><span class="line">User <span class="type">string</span></span><br><span class="line">Pass <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> dc DBConfig</span><br><span class="line"><span class="keyword">if</span> err := envconfig.Process(<span class="string">&quot;db&quot;</span>, &amp;dc); err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err.Error())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fmt.Printf(<span class="string">&quot;Load env: %+v\n&quot;</span>, dc)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç’°å¢ƒå¤‰æ•°ã¯é©ç”¨ã•ã‚Œã¾ã›ã‚“ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ make run</span><br><span class="line">Load <span class="built_in">env</span>: &#123;Host: Port:0 Name: User: Pass:&#125;</span><br></pre></td></tr></table></figure><p>ã“ã‚Œã¯ make ã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã®ãƒ¬ã‚·ãƒ”1è¡Œ1è¡Œã§ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ãƒ—ãƒ­ã‚»ã‚¹ãŒåˆ¥ã€…ã«ãªã‚‹ãŸã‚ã§ã™ï¼ˆâ€» <code>.ONESHELL:</code> ã®ç–‘ä¼¼ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãŒç„¡ã„å ´åˆï¼‰ã€‚</p><p>å›é¿ã™ã‚‹ã«ã¯ã€ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã§å¤‰æ•°å®£è¨€ã™ã‚‹ã‹ï¼ˆã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã§æ”¹è¡Œã—ã¦ã„ã‚‹ã®ã§ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³æ„Ÿã¯ç„¡ã„ã§ã™ãŒï¼‰ã€<code>&amp;&amp;</code> ã§åŒä¸€ã‚·ã‚§ãƒ«å†…ã§å®£è¨€ã™ã‚‹ã‹ãªã©ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚</p><figure class="highlight ini"><figcaption><span>Makefile(ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰</span></figcaption><table><tr><td class="code"><pre><span class="line">run:</span><br><span class="line">@<span class="attr">DB_HOST</span>=localhost \</span><br><span class="line">    <span class="attr">DB_PORT</span>=<span class="number">5432</span> \</span><br><span class="line">    <span class="attr">DB_NAME</span>=pg \</span><br><span class="line">    <span class="attr">DB_USER</span>=pg \</span><br><span class="line">    <span class="attr">DB_PASS</span>=pgpass \</span><br><span class="line">    go run cmd/main/main.go</span><br></pre></td></tr></table></figure><figure class="highlight ini"><figcaption><span>Makefileï¼ˆåŒä¸€ã‚·ã‚§ãƒ«ã§å‹•ã‹ã™ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰</span></figcaption><table><tr><td class="code"><pre><span class="line">run:</span><br><span class="line">@export <span class="attr">DB_HOST</span>=localhost &amp;&amp; \</span><br><span class="line">export <span class="attr">DB_PORT</span>=<span class="number">5432</span> &amp;&amp; \</span><br><span class="line">export <span class="attr">DB_NAME</span>=pg &amp;&amp; \</span><br><span class="line">export <span class="attr">DB_USER</span>=pg &amp;&amp; \</span><br><span class="line">export <span class="attr">DB_PASS</span>=pgpass &amp;&amp; \</span><br><span class="line">go run cmd/main/main.go</span><br></pre></td></tr></table></figure><p>ã©ã¡ã‚‰ã‚‚gitå·®åˆ†ãŒã‚ã‹ã‚Šã‚„ã™ãã™ã‚‹ãŸã‚æ”¹è¡Œã‚’å…¥ã‚Œã¦ã„ã¾ã™ã€‚ã¾ãŸå…ˆé ­è¡Œã¯makeå®Ÿè¡Œæ™‚ã«ã‚³ãƒãƒ³ãƒ‰ã‚’éè¡¨ç¤ºã«ã™ã‚‹ãŸã‚<code>@</code>ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚</p><p>å€‹äººçš„ã«ã¯é–‹ç™ºä¸Šã‚‚ã£ã¨ã‚‚åˆ©ç”¨é »åº¦ãŒé«˜ã„å€¤ã«é–¢ã—ã¦ã¯ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã§å¤‰æ•°å®£è¨€ + exportï¼ˆã“ã‚Œã ã‘è¨˜è¼‰ã™ã‚‹ã¨å…¨å¤‰æ•°ã‚’exportã™ã‚‹ï¼‰ã™ã‚‹ã®ãŒã¦ã£ã¨ã‚Šæ—©ã„ã¨æ€ã„ã¾ã™ã€‚ãŸã¾ã« <code>.EXPORT_ALL_VARIABLES</code> ã¨ã„ã†ç–‘ä¼¼ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã§èª¬æ˜ã—ãŸä¾‹ãŒã‚ã‚Šã¾ã™ãŒã€<a href="https://www.gnu.org/software/make/manual/html_node/Variables_002fRecursion.html">å¤ã„makeã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ç”¨ã„ã‚‹ã‚‚ã®</a>ã§ã‚ã‚‹ã¨ã®ã“ã¨ã§ã€é€šå¸¸ã¯exportã‚’ä½¿ãˆã°è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚</p><figure class="highlight ini"><figcaption><span>Makefile</span></figcaption><table><tr><td class="code"><pre><span class="line">SHELL := bash</span><br><span class="line">.SHELLFLAGS := -eu -o pipefail -c</span><br><span class="line"></span><br><span class="line">.PHONY: run</span><br><span class="line"></span><br><span class="line">export</span><br><span class="line"><span class="attr">DB_HOST</span>=localhost</span><br><span class="line"><span class="attr">DB_PORT</span>=<span class="number">5432</span></span><br><span class="line"><span class="attr">DB_NAME</span>=pg</span><br><span class="line"><span class="attr">DB_USER</span>=pg</span><br><span class="line"><span class="attr">DB_PASS</span>=pgpass</span><br><span class="line"></span><br><span class="line"><span class="comment"># run is launching server</span></span><br><span class="line">run:</span><br><span class="line">@go run cmd/main/main.go</span><br></pre></td></tr></table></figure><p>ã‚ã‚‹ã„ã¯ã€ <code>make</code> ã«æ…£ã‚Œãªã„ãƒ¡ãƒ³ãƒãƒ¼ãŒå¤šã„å ´åˆã€ <code>export</code> ãŒå°‘ã—ã‚ã‹ã‚Šã«ãã„ã®ã§ã„ã£ãå¤‰æ•°æ¯ã«ä»˜ã‘ãŸã»ã†ãŒç›´æ„Ÿçš„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><figure class="highlight makefile"><figcaption><span>Makefile</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment"># ...çœç•¥...</span></span><br><span class="line"><span class="keyword">export</span> DB_HOST=localhost</span><br><span class="line"><span class="keyword">export</span> DB_PORT=5432</span><br><span class="line"><span class="keyword">export</span> DB_NAME=pg</span><br><span class="line"><span class="keyword">export</span> DB_USER=pg</span><br><span class="line"><span class="keyword">export</span> DB_PASS=pgpass</span><br><span class="line"></span><br><span class="line"><span class="comment"># run is launching server</span></span><br><span class="line"><span class="section">run:</span></span><br><span class="line">@go run cmd/main/main.go</span><br></pre></td></tr></table></figure><p>ã™ã“ã—å†—é•·ã§ã™ãŒã€ã“ã¡ã‚‰ã®æ–¹ãŒã‚µãƒ–ãƒ—ãƒ­ã‚»ã‚¹ã«å¼•ãç¶™ãŒã›ãŸããªã„å¤‰æ•°ãŒå‡ºã¦ããŸå ´åˆã«éƒ½åˆãŒè‰¯ã„ãŸã‚ã€ã™ã¹ã¦ã®å¤‰æ•°ã‚’ç’°å¢ƒå¤‰æ•°ã¨ã—ã¦Goã®ãƒ—ãƒ­ã‚»ã‚¹ã«ä¸ãˆãŸã„å ´åˆã‚‚ã€ã‚ãˆã¦ã“ã¡ã‚‰ã®æ–¹é‡ã‚’æ¡ç”¨ã™ã‚‹ã®ã‚‚ã‚ã‚Šã˜ã‚ƒãªã„ã‹ã¨æ€ã„ã¾ã™ã€‚</p><h2 id="env-ã‚’èª­ã¿è¾¼ã‚€"><a href="#env-ã‚’èª­ã¿è¾¼ã‚€" class="headerlink" title=".env ã‚’èª­ã¿è¾¼ã‚€"></a>.env ã‚’èª­ã¿è¾¼ã‚€</h2><p>ãƒãƒ¼ãƒ ã«ã‚ˆã£ã¦ã¯ <code>.env</code> ã§ç’°å¢ƒå¤‰æ•°ã‚’ç®¡ç†ã—ã¦ã„ã‚‹å ´åˆã‚‚ã‚ã‚‹ã§ã—ã‚‡ã†ã€‚è¨˜è¼‰ã•ã‚ŒãŸå¤‰æ•°ã‚’Goã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«ã™ã¹ã¦æ¸¡ã™ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ã« <code>include</code> ã‚’ç”¨ã„ã¾ã™ã€‚<a href="https://dev.to/serhatteker/get-environment-variables-from-a-file-into-makefile-2m5l">ã“ã¡ã‚‰</a>ã‚’å‚è€ƒã«ã—ã¾ã—ãŸã€‚</p><figure class="highlight makefile"><figcaption><span>Makefile</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">include</span> <span class="variable">$(PWD)</span>/.env</span><br><span class="line"><span class="keyword">export</span></span><br><span class="line"></span><br><span class="line"><span class="section">run:</span></span><br><span class="line">go run cmd/main/main.go</span><br></pre></td></tr></table></figure><p>ã“ã‚Œã¯å°‘ã—ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«ã§ã€ <code>include</code> ã¯æœ¬æ¥ã¯åˆ¥ã®Makefileã‚’èª­ã¿è¾¼ã‚€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã§ã™ã€‚ãŸã¾ãŸã¾ <code>.env</code> ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒMakefileã¨ã—ã¦èª­ã¿è¾¼ã‚ã‚‹å½¢å¼ã§ã‚ã£ãŸãŸã‚ã€ã“ã®ã‚ˆã†ã«æ‰±ãˆã¾ã™ã€‚ ç§ã¯ <code>.env</code> ã®å½¢å¼ã«è©³ã—ããªã„ãŸã‚ã€å³å¯†ã«ã¯æ‰±ãˆãªã„ã‚±ãƒ¼ã‚¹ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€key1&#x3D;value1ã€key2&#x3D;${value1} ã¨ã„ã£ãŸä»£è¡¨çš„ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã§ã‚ã‚Œã°å•é¡Œãªã‹ã£ãŸã®ã§ã€ã‚·ãƒ³ãƒ—ãƒ«ãªä½¿ã„æ–¹ã«ç•™ã‚ã‚‹ã®ã§ã‚ã‚Œã°åˆ©ç”¨ã—ã¦è‰¯ã„ã®ã§ã¯ãªã„ã‹ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚</p><p>ã“ã“ã§ã‚„ã‚„ã“ã—ã„ã®ã¯ã€developãªã©åˆ¥ç’°å¢ƒã«æ¥ç¶šã—ãŸã„å ´åˆã§ã™ã€‚åˆ©ç”¨ã™ã‚‹ç’°å¢ƒå¤‰æ•°ã‚’æ›¸ãæ›ãˆã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã‚‚ã—ã€ <code>.env.develop</code> ãªã©ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹å ´åˆã¯ã€<code>.env</code> ã®èª­ã¿è¾¼ã¿ã‚’å¤‰æ•°åŒ–ã—ã¦åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ã¨è‰¯ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚åŸºæœ¬çš„ã«ã¯ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã€å‹•ä½œç¢ºèªãªã©é™ã‚‰ã‚ŒãŸã‚±ãƒ¼ã‚¹ã§ã®ã¿ã‚¯ãƒ©ã‚¦ãƒ‰ä¸Šã®é–‹ç™ºç’°å¢ƒã«æ¥ç¶šã™ã‚‹ã¨ã„ã£ãŸå ´åˆã‚’æƒ³å®šã—ã¦ã„ã¾ã™ã€‚</p><figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line">DOTENV := <span class="variable">$(PWD)</span>/.env</span><br><span class="line"><span class="keyword">include</span> <span class="variable">$(DOTENV)</span></span><br><span class="line"><span class="keyword">export</span></span><br><span class="line"></span><br><span class="line"><span class="section">run: ## run launches go server</span></span><br><span class="line">go run cmd/main/main.go</span><br></pre></td></tr></table></figure><p>developç’°å¢ƒã«æ¥ç¶šã™ã‚‹å ´åˆã¯ã€æ¬¡ã®ã‚ˆã†ã«<code>DOTENV</code> å¤‰æ•°ã‚’æŒ‡å®šã—ã¦å®Ÿè¡Œã—ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ make DOTENV=.env.develop run</span><br></pre></td></tr></table></figure><p>ã‚‚ã—ã€ <code>run-dev</code> ã®ã‚ˆã†ãªã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’è£œå®Œç›®çš„ãªã©ã§å€‹åˆ¥ã«å®šç¾©ã—ãŸã„å ´åˆã¯å„ä»‹ã§ã™ã€‚ã‚¿ãƒ¼ã‚²ãƒƒãƒˆå†…ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã§å¤‰æ•°ä¸Šæ›¸ãã™ã‚‹ã‹ã€ä»¥ä¸‹ã®ã‚ˆã†ã« <code>$(MAKECMDGOALS)</code> ã§ includeã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‹•çš„ã« <code>.env.develop</code> ã‚’æ›¸ãæ›ãˆã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚å¾Œè€…ã®ä¾‹ã‚’ã‚ã’ã¾ã™ã€‚ <code>lastword</code> ã¯æœ€å¾Œã®æ–‡å­—åˆ—ãŒä¸€è‡´ã™ã‚‹ã‹åˆ¤å®šã™ã‚‹makeã®é–¢æ•°ã§ <code>-dev</code> ã§çµ‚ã‚ã£ã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ç¤ºã—ã¾ã™ã€‚</p><figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line">DOTENV := <span class="variable">$(PWD)</span>/.env</span><br><span class="line"></span><br><span class="line"><span class="comment"># run-dev æ™‚ã«ç’°å¢ƒå¤‰æ•°ã‚’æ›¸ãæ›ãˆãŸã„ãŸã‚ã€includeã‚’makeã®ã‚´ãƒ¼ãƒ«ã®suffixã«ã‚ˆã£ã¦åˆ†å²ã™ã‚‹</span></span><br><span class="line"><span class="keyword">ifeq</span> (<span class="variable">$(<span class="built_in">lastword</span> <span class="variable">$(MAKECMDGOALS)</span>)</span>, -dev)</span><br><span class="line">DOTENV := <span class="variable">$(PWD)</span>/.env.develop</span><br><span class="line"><span class="keyword">endif</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">include</span> <span class="variable">$(DOTENV)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span></span><br><span class="line"></span><br><span class="line"><span class="section">run: ## run launches go server</span></span><br><span class="line">go run cmd/main/main.go</span><br><span class="line"></span><br><span class="line"><span class="section">run-dev: ## run-dev launches go server with development configurations</span></span><br><span class="line">go run cmd/main/main.go</span><br></pre></td></tr></table></figure><p>ã“ã®ã‚ãŸã‚Šã‹ã‚‰ã€åˆè¦‹ã®äººã‹ã‚‰è¦‹ã‚‹ã¨é­”è¡“æ„ŸãŒæ¼‚ã£ã¦ãã‚‹ãŸã‚ã€ãƒ™ã‚¿ã«ç’°å¢ƒå¤‰æ•°ã‚’ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã§ä¸Šæ›¸ãã™ã‚‹ã®æˆ¦ç•¥ã¨ã—ã¦ã‚ã‚Šã ã¨æ€ã„ã¾ã™ã€‚ç”¨æ³•ç”¨é‡ã¯ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã®ã‚¹ã‚­ãƒ«ã‚»ãƒƒãƒˆã‚‚é‘‘ã¿ã€èª¿æ•´ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚</p><h2 id="ã‚µãƒ–ãƒ•ã‚©ãƒ«ãƒ€ã®Makefileã‚’å‘¼ã³å‡ºã™"><a href="#ã‚µãƒ–ãƒ•ã‚©ãƒ«ãƒ€ã®Makefileã‚’å‘¼ã³å‡ºã™" class="headerlink" title="ã‚µãƒ–ãƒ•ã‚©ãƒ«ãƒ€ã®Makefileã‚’å‘¼ã³å‡ºã™"></a>ã‚µãƒ–ãƒ•ã‚©ãƒ«ãƒ€ã®Makefileã‚’å‘¼ã³å‡ºã™</h2><p>ã‚¯ãƒ©ã‚¦ãƒ‰ãƒã‚¤ãƒ†ã‚£ãƒ–æ™‚ä»£ã«ãªã‚Šã€è¤‡æ•°ã®æ©Ÿèƒ½ã‚’1ã¤ã®APã‚µãƒ¼ãƒã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã®ã§ã¯ãªãã€ãƒ¬ãƒãƒ¼ãƒˆã€ç›£è¦–ã€ã‚·ã‚¹ãƒ†ãƒ é–“I&#x2F;Fãªã©ã®éåŒæœŸå‡¦ç†ã¯AWS Lambdaãªã©åˆ¥ã‚µãƒ¼ãƒ“ã‚¹ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã“ã¨ãŒå¤šããªã‚Šã¾ã—ãŸã€‚ãã®ãŸã‚ã€ã‚ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã‚’é–‹ç™ºä¸­ã«ã‚‚è¤‡æ•°ã®mainãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’æŒã¤ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’é–‹ç™ºã—ã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚ãã‚Œã«ç›¸å¿œã—ã¦Makefileè‡ªä½“ã‚‚ãã‚Œãã‚Œå­˜åœ¨ã—ã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚ˆã†ã«Makefileã‚’æŸã­ã‚‹MakefileãŒå­˜åœ¨ã—ã€ä¸€æ‹¬ã§ãƒ†ã‚¹ãƒˆã€ãƒ‡ãƒ—ãƒ­ã‚¤ãªã©ã‚’ã—ãŸã„ã‚±ãƒ¼ã‚¹ãŒå‡ºã¦ãã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ Makefile         <span class="comment"># ãƒ«ãƒ¼ãƒˆã®Makefile</span></span><br><span class="line">â”œâ”€â”€ go.mod</span><br><span class="line">â”œâ”€â”€ go.sum</span><br><span class="line">â”œâ”€â”€ batch</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ Makefile     <span class="comment"># ãƒ©ãƒƒãƒ‘ãƒ¼ï¼ˆä¸€æ‹¬å®Ÿè¡Œç”¨ï¼‰</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ ***batch1</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ Makefile <span class="comment"># å€‹åˆ¥ã®Makefile</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ ***batch2</span><br><span class="line">â”‚Â Â      â””â”€â”€ Makefile <span class="comment"># å€‹åˆ¥ã®Makefile</span></span><br><span class="line">â”œâ”€â”€ send</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ Makefile     <span class="comment"># ãƒ©ãƒƒãƒ‘ãƒ¼ï¼ˆä¸€æ‹¬å®Ÿè¡Œç”¨ï¼‰</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ enterprisesystem1</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ Makefile <span class="comment"># å€‹åˆ¥ã®Makefile</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ enterprisesystem2</span><br><span class="line">â”‚Â Â      â””â”€â”€ Makefile <span class="comment"># å€‹åˆ¥ã®Makefile</span></span><br><span class="line">â”œâ”€â”€ receive</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ Makefile     <span class="comment"># ãƒ©ãƒƒãƒ‘ãƒ¼ï¼ˆä¸€æ‹¬å®Ÿè¡Œç”¨ï¼‰</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ johoukeisystem1</span><br><span class="line">â”‚Â Â   Â Â  â””â”€â”€ Makefile <span class="comment"># å€‹åˆ¥ã®Makefile</span></span><br><span class="line">â”œâ”€â”€ job</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ Makefile     <span class="comment"># ãƒ©ãƒƒãƒ‘ãƒ¼ï¼ˆä¸€æ‹¬å®Ÿè¡Œç”¨ï¼‰</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ ***-db-snapshot</span><br><span class="line">â”‚Â Â      â””â”€â”€ Makefile <span class="comment"># å€‹åˆ¥ã®Makefile</span></span><br><span class="line">â”œâ”€â”€ webapi</span><br></pre></td></tr></table></figure><p>MakefileãŒå¤šæ®µã«ãªã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ãŒã€æ³¨æ„ã¨ã—ã¦ã‚µãƒ–ãƒ•ã‚©ãƒ«ãƒ€å´ã®Makefileã¯è¦ªãƒ•ã‚©ãƒ«ãƒ€å´ã®Makefileã«ä¾å­˜ã—ãªã„ã‚ˆã†ã«ä½œã‚‹ã¹ãã§ã—ã‚‡ã†ã€‚ä¾‹ãˆã°è¦ªå´ã§ç’°å¢ƒå¤‰æ•°ã®ãƒ­ãƒ¼ãƒ‰ã—ãŸã¨ã—ã¦ã€ãã‚ŒãŒç„¡ã„ã¨å­ã©ã‚‚å´ã®MakefileãŒå®Ÿè¡Œã§ããªã„ã¨ã„ã£ãŸçŠ¶æ…‹ã¯é¿ã‘ã‚‹ã¹ãã§ã™ã€‚</p><p>ä¸Šè¨˜ã®ã‚ˆã†ãªã‚ã‚‹Makefileã‹ã‚‰åˆ¥ã®Makefileã‚’å‘¼ã¶æ–¹æ³•ã¯æ¬¡ã®ã‚ˆã†ã«æ›¸ãã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚</p><figure class="highlight makefile"><figcaption><span>Makefile</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="section">build:</span></span><br><span class="line">    <span class="variable">$(MAKE)</span> -C batch   build --no-print-directory</span><br><span class="line">    <span class="variable">$(MAKE)</span> -C send    build --no-print-directory</span><br><span class="line">    <span class="variable">$(MAKE)</span> -C receive build --no-print-directory</span><br><span class="line">    <span class="variable">$(MAKE)</span> -C job     build --no-print-directory</span><br><span class="line">    <span class="variable">$(MAKE)</span> -C webapi  build --no-print-directory</span><br></pre></td></tr></table></figure><ul><li><code>$(MAKE)</code>: <code>make</code> ã§ã¯ãªã <code>$(MAKE)</code> ã®å¤‰æ•°ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€<a href="https://www.gnu.org/software/make/manual/html_node/MAKE-Variable.html">-t (â€“touch), -n (â€“just-print) or â€“q (â€“question) ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒå¼•ãç¶™ãŒã‚ŒãŸã‚Š</a>ã€<code>make ENV=dev build</code> ãªã©ã®å¤‰æ•°ã‚’å¼•ãç¶™ã„ã ã‚Šã—ã¾ã™</li><li><code>-C</code>: <code>--directory</code> ã¨åŒç¾©ã§ã€ <code>cd subdir &amp;&amp; $(MAKE)</code> ã¨ <code>$(MAKE) -C subdir</code> ã¯åŒç¾©ã§ã™</li><li><code>--no-print-directory</code>: ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ã®ç§»å‹•ã—ãŸã“ã¨ã®æ¨™æº–å‡ºåŠ›ã‚’æŠ‘åˆ¶ã—ã¾ã™ã€‚Goã‚¢ãƒ—ãƒªé–‹ç™ºã§makeã‚’ã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼ã®ã‚ˆã†ã«åˆ©ç”¨ã™ã‚‹å ´åˆã«ãŠã„ã¦ã€ãã“ã¾ã§æœ‰ç›Šã§ã¯ãªã„æƒ…å ±ãªã®ã§æ¶ˆã—ã¦è‰¯ã„ã§ã—ã‚‡ã†ã€‚ã“ã‚Œã«ã¤ã„ã¦ã¯ã€<code>MAKEFLAGS += --no-print-directory</code> ã‚’Makefileã®å…ˆé ­è¡Œã«æ¯å›ã¤ã‘ã‚‹ãƒ«ãƒ¼ãƒ«ã«ã™ã‚‹ã®ã‚‚ã‚ã‚Šã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</li></ul><p>ã¡ãªã¿ã«ã§ã™ãŒã€æ¬¡ã®ã‚ˆã†ã« <code>-f</code> ã§Makefileã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã‚‚ãŒã§ãã¾ã™ãŒã“ã®å ´åˆã«ã¯ã€makeã‚’å‹•ã‹ã™ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒ<code>subdir</code>ã§ã¯ãªãã€è¦ªå´ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã‚ã‚‹ãŸã‚ãŠãã‚‰ãã†ã¾ãå‹•ä½œã—ã¾ã›ã‚“ã€‚ãŸã¾ã«ãƒãƒã‚‹äººã‚’è¦‹ã‹ã‘ã¾ã™ã®ã§ã”æ³¨æ„ãã ã•ã„ã€‚</p><figure class="highlight makefile"><figcaption><span>Makefileï¼ˆã†ã¾ãå‹•ã‹ãªã„ä¾‹ï¼‰</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="section">run:</span></span><br><span class="line"><span class="variable">$(MAKE)</span> -f subdir/Makefile build --no-print-directory</span><br></pre></td></tr></table></figure><p>ä½™è«‡ã§ã™ãŒã€ãŠãã‚‰ãä¸Šè¿°ã® <code>go build</code> ã¯batch, sendãªã©ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸é–“ã§ä¾å­˜é–¢ä¿‚ã¯ãªã„ã®ã§ã€ä¸¦åˆ—å®Ÿè¡ŒãŒã§ããã†ã§ã™ï¼ˆå…ƒã®æ›¸ãæ–¹ã§ã¯ã€batchâ†’sendâ†’receiveâ†’jobâ†’webapiã®é †ç•ªã§åŒæœŸçš„ã«å‹•ä½œã—ã¾ã™ï¼‰</p><p>é¢å€’ã§ã™ãŒå€‹åˆ¥ã«ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’å®šç¾©ã™ã‚‹ï¼‹å‰ææ¡ä»¶ï¼ˆPrerequisitesï¼‰ã«è¿½åŠ ã™ã‚‹ã¨ã€ä¸¦åˆ—å®Ÿè¡Œã§ãã¾ã™ï¼ˆå‰ææ¡ä»¶åŒå£«ã¯ä¾å­˜ãŒç„¡ã„ã¨èªè­˜ã§ãã‚‹ã®ã§ã€makeãŒä¸¦åˆ—ã§å‹•ã‹ã—ã¦ãã‚Œã¾ã™ï¼‰ã€‚ä¾‹ãˆã°CIã§ãƒ“ãƒ«ãƒ‰ãŒå¯èƒ½ã‹ä¸€æ‹¬ã§ãƒã‚§ãƒƒã‚¯ã—ã¦ã„ã‚‹ãªã©ã®å ´é¢ã§é«˜é€ŸåŒ–ã—ãŸã„ã‚±ãƒ¼ã‚¹ãŒã‚ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚</p><figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line"><span class="section">build-batch: ## build all batch packages</span></span><br><span class="line">    <span class="variable">$(MAKE)</span> -C batch build --no-print-directory</span><br><span class="line"></span><br><span class="line"><span class="section">build-send: ## build all send packages </span></span><br><span class="line">    <span class="variable">$(MAKE)</span> -C send build --no-print-directory</span><br><span class="line"></span><br><span class="line"><span class="section">build-receive: ## build all receive packages </span></span><br><span class="line">    <span class="variable">$(MAKE)</span> -C receive build --no-print-directory</span><br><span class="line"></span><br><span class="line"><span class="section">build-job: ## build all job packages </span></span><br><span class="line">    <span class="variable">$(MAKE)</span> -C job build --no-print-directory</span><br><span class="line"></span><br><span class="line"><span class="section">build-webapi: ## build all webapi package</span></span><br><span class="line">    <span class="variable">$(MAKE)</span> -C webapi build --no-print-directory</span><br><span class="line"></span><br><span class="line"><span class="section">build: build-batch build-send build-receive build-job build-webapi</span></span><br></pre></td></tr></table></figure><p>å®Ÿè¡Œã™ã‚‹å ´åˆã«ã¯ã€<code>-j</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ä¸¦åˆ—åº¦ã‚’æŒ‡å®šã—ã¾ã™ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">make build -j 4</span><br></pre></td></tr></table></figure><p>ã“ã“ã¾ã§ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ãŒå¿…è¦ãªå ´åˆã€ã“ã®Makefileã‚’æ‰‹å‹•ã§ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã™ã‚‹ã“ã¨ã¯å¤§å¤‰ãªã®ã§ã€Makefileã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æº–å‚™ã™ã‚‹ã¨è‰¯ã•ãã†ã§ã™ã€‚</p><h2 id="CIã‚µãƒ¼ãƒ“ã‚¹ã¨ã®æ£²ã¿åˆ†ã‘"><a href="#CIã‚µãƒ¼ãƒ“ã‚¹ã¨ã®æ£²ã¿åˆ†ã‘" class="headerlink" title="CIã‚µãƒ¼ãƒ“ã‚¹ã¨ã®æ£²ã¿åˆ†ã‘"></a>CIã‚µãƒ¼ãƒ“ã‚¹ã¨ã®æ£²ã¿åˆ†ã‘</h2><p>æ„è­˜ã—ãªã„ã¨ã€ <code>make</code> ã¨ CIï¼ˆCircleCIã‚„GitHub Actionsï¼‰ã§ç”¨ã„ã‚‹YAMLã«é‡è¤‡ã—ãŸå†…å®¹ã‚’è¨˜è¿°ã—ã¦ã—ã¾ã„ãŒã¡ã§ã™ã€‚ãƒãƒªã‚·ãƒ¼ã¨ã—ã¦ã¯ã€ãƒªãƒ³ãƒˆãƒ»ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ»ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ãªã©åŸºæœ¬çš„ãªæ“ä½œã¯Makefileã«è¨˜è¼‰ã—ã€CIã‹ã‚‰ã¯ makeã‚³ãƒãƒ³ãƒ‰çµŒç”±ã§ãã‚Œã‚‰ã‚’å‘¼ã³å‡ºã™å½¢ãŒã‚ˆã„ã§ã—ã‚‡ã†ã€‚</p><p>ä¾‹ãˆã°ã€<a href="https://circleci.com/docs/parallelism-faster-jobs/">CircleCIã«ã¯ãƒ†ã‚¹ãƒˆä¸¦åˆ—</a>ã®ä»•çµ„ã¿ãŒã‚ã‚Šã¾ã™ã€‚Goå´ã®ãƒ†ã‚¹ãƒˆãŒDBã®ãƒ‡ãƒ¼ã‚¿ã«ä¾å­˜ã—ã€ <code>go test -p 4</code> ã§åˆ†å‰²ã™ã‚‹ã¨ã€åŒã˜ãƒ†ãƒ¼ãƒ–ãƒ«ã«å¯¾ã—ã¦ã®è¤‡æ•°ã®ãƒ†ã‚¹ãƒˆã§æ›¸ãè¾¼ã¿ã•ã‚Œã‚‹ã“ã¨ã§ã†ã¾ãå‹•ä½œã—ãªã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ãã®ãŸã‚ã€ã‚¢ãƒ—ãƒªãƒ»DBã®ã‚»ãƒƒãƒˆã§ã¾ã¨ã‚ã¦ä¸¦åˆ—å®Ÿè¡Œã—ã¦ãã‚Œã‚‹ã‚ˆã†ãªCIå´ã®ä»•çµ„ã¿ã‚’ç”¨ã„ã‚‹ã¨ä¾¿åˆ©ã§ã™ã€‚</p><p>ã“ã®å ´åˆã‚‚YAMLã«è¨˜è¼‰ã™ã‚‹ã®ã§ã¯ãªãã€Makefileå´ã« <code>circleci tests split</code> ã¨ã„ã†ãƒ†ã‚¹ãƒˆä¸¦åˆ—ã®ä»•çµ„ã¿ã‚’è¨˜è¼‰ã™ã‚‹ã¨çµ±ä¸€æ„Ÿã‚’ç¶­æŒã§ãã¾ã™ã€‚ã‚ã¾ã‚Š Makefileã«ifæ–‡ã‚’è¨˜è¼‰ã™ã‚‹ã®ã¯ãŠã™ã™ã‚ã—ã¾ã›ã‚“ãŒã€ã“ã®ç¨‹åº¦ã§ã‚ã‚Œã°è¨±å®¹ã—ã¦ã‚‚è‰¯ã„ã§ã—ã‚‡ã†ã€‚</p><figure class="highlight makefile"><figcaption><span>Makefile</span></figcaption><table><tr><td class="code"><pre><span class="line">SHELL := bash</span><br><span class="line">.SHELLFLAGS := -eu -o pipefail -c</span><br><span class="line"></span><br><span class="line"><span class="meta"><span class="keyword">.PHONY</span>: test</span></span><br><span class="line"></span><br><span class="line">PACKAGES ?= <span class="variable">$(<span class="built_in">shell</span> go list ./...)</span></span><br><span class="line"><span class="keyword">ifneq</span> (<span class="variable">$(CIRCLECI)</span>,)</span><br><span class="line">PACKAGES=<span class="variable">$(<span class="built_in">shell</span> go list ./... | circleci tests split --split-by=timings)</span></span><br><span class="line"><span class="keyword">endif</span></span><br><span class="line"></span><br><span class="line"><span class="section">test: ## test calls go test</span></span><br><span class="line">go test -p 1 -race -timeout 30m <span class="variable">$(PACKAGES)</span></span><br></pre></td></tr></table></figure><h2 id="ç’°å¢ƒåˆ¥ã®ãƒ‡ãƒ—ãƒ­ã‚¤"><a href="#ç’°å¢ƒåˆ¥ã®ãƒ‡ãƒ—ãƒ­ã‚¤" class="headerlink" title="ç’°å¢ƒåˆ¥ã®ãƒ‡ãƒ—ãƒ­ã‚¤"></a>ç’°å¢ƒåˆ¥ã®ãƒ‡ãƒ—ãƒ­ã‚¤</h2><p>CI&#x2F;CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãŒæ•´ç†ã•ã‚Œã¦ãŠã‚Šã€é–‹ç™ºè€…ãŒæ‰‹å‹•ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã‚±ãƒ¼ã‚¹ãŒæ¸›ã£ã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ç·Šæ€¥ãƒ‘ãƒƒãƒãªã©é‹ç”¨ã¨ã—ã¦ç’°å¢ƒåˆ¥ã®ãƒ‡ãƒ—ãƒ­ã‚¤ãŒè¡Œãˆã‚‹ã¨ä¸€å®šã®åˆ©ä¾¿æ€§ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚ã‚ˆãã‚ã‚‹æ§‹æˆä¾‹ã¨ã—ã¦ã€developï¼ˆdevï¼‰, stagingï¼ˆstgï¼‰, productionï¼ˆprodï¼‰ ã®3ã¤ã®ç’°å¢ƒã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’è¡Œã†ã¨ã—ã¾ã™ã€‚</p><p>é€šå¸¸ã¯å„ç’°å¢ƒã§ãƒªã‚½ãƒ¼ã‚¹åã«å‘½åä½“ç³»ã‚’æŒãŸã›ã‚‹ã“ã¨ãŒå¤šã„ãŸã‚ã€ç’°å¢ƒè­˜åˆ¥å­ã ã‘ç•°ãªã‚‹ã«ã‚³ãƒãƒ³ãƒ‰ãŒä¸¦ã‚“ã§ã—ã¾ã†ã¨è¦‹é€šã—ãŒæ‚ªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ä¸€æ–¹ã§ã€makeã®å¼•æ•°ã«ç’°å¢ƒè­˜åˆ¥å­ã‚’æ¸¡ã™ã¨ãã®ãƒã‚§ãƒƒã‚¯ã‚‚è¡Œã„ãŸã„ã§ã™ã€‚ãã“ã§<a href="https://dev.classmethod.jp/articles/lambda-deploy-with-make/">make ã¯å¼·ã„ã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼ã ã£ãŸã€‚Lambda Function ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚’ Makefile ã§ã¾ã‚ã™ | DevelopersIO</a> ã«ã‚ã‚‹ã‚ˆã†ã«ã€<code>gurd-%</code>ã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’å‰ææ¡ä»¶ã¨ã™ã‚‹ã“ã¨ã§ã€ç’°å¢ƒè­˜åˆ¥å­ï¼ˆenvï¼‰ã‚’å¿…é ˆå…¥åŠ›ã¨ã•ã›ã‚‹ã“ã¨ãŒãŠã™ã™ã‚ã§ã™ã€‚</p><p>ã¾ãŸã€<code>deploy-dev</code>, <code>deploy-stg</code>, <code>deploy-prod</code> ãªã©ã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆåã‚’å®£è¨€ã™ã‚‹ã¨ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã®è£œå®ŒãŒåŠ¹ããŸã‚åˆ©ä¾¿æ€§ãŒé«˜ããªã‚Šã¾ã™ã€‚åˆã‚ã›ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªè¨­å®šã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚AWS Lambdaã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ä¾‹ã§æ›¸ã„ã¦ã„ã¾ã™ã€‚</p><figure class="highlight makefile"><figcaption><span>Makefile</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment"># ...(çœç•¥)....</span></span><br><span class="line"></span><br><span class="line"><span class="section">deploy-dev: ## deploy development</span></span><br><span class="line"><span class="variable">$(MAKE)</span> deploy env=dev -s</span><br><span class="line"></span><br><span class="line"><span class="section">deploy-stg: ## deploy staging</span></span><br><span class="line"><span class="variable">$(MAKE)</span> deploy env=stg -s</span><br><span class="line"></span><br><span class="line"><span class="section">deploy-prod: ## deploy production</span></span><br><span class="line"><span class="variable">$(MAKE)</span> deploy env=prod -s</span><br><span class="line"></span><br><span class="line"><span class="section">deploy: guard-env build</span></span><br><span class="line">echo <span class="string">&quot;deploy $&#123;env&#125;&quot;</span></span><br><span class="line">aws lambda update-function-code --profile my_$&#123;env&#125; --region ap-northeast-1 --function-name $&#123;env&#125;-fuga-web-api --zip-file fileb://bin/bootstrap.zip</span><br><span class="line"></span><br><span class="line"><span class="section">guard-%:</span></span><br><span class="line">@ if [ <span class="string">&quot;$&#123;$&#123;*&#125;&#125;&quot;</span> = <span class="string">&quot;&quot;</span> ]; then \</span><br><span class="line">echo <span class="string">&quot;[ERROR] Environment variable <span class="variable">$*</span> not set&quot;</span>; \</span><br><span class="line">exit 1; \</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><p>æœ¬æ¥ã§ã‚ã‚Œã°ã€ <code>deploy</code> ã‚„ <code>guard-%</code> ã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã¯ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆé–¢æ•°ã®ã‚ˆã†ãªæ‰±ã„ã§ã€ç›´æ¥é–‹ç™ºè€…ã«ã¯å‘¼ã³å‡ºã—ã‚‚è£œå®Œã‚‚ã•ã‚Œãšéå¯è¦–åŒ–ã—ãŸã‹ã£ãŸã®ã§ã™ãŒã€æ®‹å¿µãªãŒã‚‰makeã«ã¯ãã®ã‚ˆã†ãªä»•çµ„ã¿ã¯ã‚ã‚Šã¾ã›ã‚“ï¼ˆå…±é€šåŒ–ã—ãŸã„ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’åˆ¥Makefileã«ã—ã¦includeã—ã¦ã‚‚ç„¡é§„ã§ã—ãŸï¼‰ã€‚ã©ã“ã¾ã§ã‚³ãƒ¼ãƒ‰ã®å†—é•·ã•ã‚’è¨±å®¹ã™ã‚‹ã‹ã§ã™ãŒã€æ‰±ã†ãƒªã‚½ãƒ¼ã‚¹ã‚„ç’°å¢ƒã¯å¢—ãˆã‚„ã™ã„ã®ã§ã€ã“ã‚Œãã‚‰ã„ã®é›†ç´„ã¯è¡Œã£ãŸã»ã†ãŒã‚ªã‚¹ã‚¹ãƒ¡ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><h2 id="help"><a href="#help" class="headerlink" title="help"></a>help</h2><p><a href="https://postd.cc/auto-documented-makefile/">Makefileã‚’è‡ªå·±æ–‡æ›¸åŒ–ã™ã‚‹ | POSTD</a> ã‹ã‚‰æµç”¨ã—ã¦ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®æœ€å¾Œã«æ¬¡ã®ã‚ˆã†ã«helpã‚³ãƒãƒ³ãƒ‰ã‚’è¿½åŠ ã—ã¾ã™ã€‚ãã†ã™ã‚‹ã¨ã€ ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã®å³å´ã« <code>help: ## display this help screen</code> ã¨ã„ã£ãŸã‚³ãƒ¡ãƒ³ãƒˆã‚’è¨˜è¼‰ã™ã‚‹ã¨ã€helpã‚³ãƒãƒ³ãƒ‰ã§å†…å®¹ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ...(çœç•¥)...</span></span><br><span class="line">.DEFAULT_GOAL := help</span><br><span class="line"><span class="comment"># ...(çœç•¥)...</span></span><br><span class="line"></span><br><span class="line"><span class="section">help: ## display this help screen</span></span><br><span class="line">    @grep -E &#x27;^[a-zA-Z_-]+:.*?<span class="comment">## .*$$&#x27; $(MAKEFILE_LIST) | sort | awk &#x27;BEGIN &#123;FS = &quot;:.*?## &quot;&#125;; &#123;printf &quot;\033[36m%-30s\033[0m %s\n&quot;, $$1, $$2&#125;&#x27;</span></span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ make <span class="built_in">help</span></span><br><span class="line">run                  run launches go server</span><br><span class="line"><span class="built_in">test</span>                 <span class="built_in">test</span> calls go <span class="built_in">test</span></span><br><span class="line">deploy-dev           deploy development</span><br><span class="line">deploy-stg           deploy staging</span><br><span class="line">deploy-prod          deploy production</span><br><span class="line"><span class="built_in">help</span>                 display this <span class="built_in">help</span> screen</span><br></pre></td></tr></table></figure><p>ã•ãã»ã©ã€<code>deploy</code>ã€<code>guard-%</code> ãªã©ã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã¯å†…éƒ¨å‡¦ç†ç”¨ã§ãªã‚‹ã¹ãå¤–ã«å‡ºã—ãŸããªã„ã¨ã„ã†è©±ã‚’ã—ã¾ã—ãŸã€‚å®Œå…¨ã§ã¯ãªã„ã§ã™ãŒã€ã“ã®<code>help</code>ã‚³ãƒãƒ³ãƒ‰ã§ã¯ãã†ã„ã£ãŸå†…éƒ¨å‡¦ç†ç”¨ã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã¯ã‚³ãƒ¡ãƒ³ãƒˆã‚’æ›¸ã‹ãªã„ã“ã¨ã§ã€å…¬é–‹ç”¨ã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã§ã¯ãªã„ã¨ã„ã†æ„å›³ã‚’è¾¼ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼ˆã‚„ã‚„å©‰æ›²çš„ã§ã™ãŒï¼‰ã€‚</p><p>ã‚‚ã—ã€ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã®å³å´ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’æ›¸ãã®ã§ã¯ãªãã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚³ãƒ¡ãƒ³ãƒˆï¼‹æ”¹è¡Œã§è¡¨ç¾ã—ãŸã„å ´åˆã¯ã€Songmuã•ã‚“ã®<a href="https://github.com/Songmu/make2help">Songmu&#x2F;make2help</a>ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚‚ã‚ã‚Šã¾ã™ã€‚ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¨˜è¼‰ã™ã‚‹ãŠä½œæ³•ã¨ã—ã¦ã¯ã“ã¡ã‚‰ã®æ–¹ãŒãŠãã‚‰ãç›´æ„Ÿçš„ã§ã‚ã‚‹ãŸã‚ã€ã‚³ãƒãƒ³ãƒ‰ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¿…è¦ã§ã™ãŒã€ãƒãƒ¼ãƒ ã®æ–¹é‡ã¨ã—ã¦ã“ã¡ã‚‰ã‚’æ¡ç”¨ã™ã‚‹ã“ã¨ã‚‚ãŠå‹§ã‚ã§ã™ã€‚</p><figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line"><span class="comment">## Run tests</span></span><br><span class="line"><span class="section">test:</span></span><br><span class="line">    go test ./...</span><br><span class="line"></span><br><span class="line"><span class="comment">## Show help</span></span><br><span class="line"><span class="section">help:</span></span><br><span class="line">  @make2help <span class="variable">$(MAKEFILE_LIST)</span></span><br></pre></td></tr></table></figure><h2 id="ã‚¿ãƒ¼ã‚²ãƒƒãƒˆåã‚’typoã—ãŸå ´åˆã«helpãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡ºã™"><a href="#ã‚¿ãƒ¼ã‚²ãƒƒãƒˆåã‚’typoã—ãŸå ´åˆã«helpãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡ºã™" class="headerlink" title="ã‚¿ãƒ¼ã‚²ãƒƒãƒˆåã‚’typoã—ãŸå ´åˆã«helpãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡ºã™"></a>ã‚¿ãƒ¼ã‚²ãƒƒãƒˆåã‚’typoã—ãŸå ´åˆã«helpãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡ºã™</h2><p>è¶£å‘³çš„ãªä½œã‚Šè¾¼ã¿ã§ã™ãŒã€<code>make bulid</code> ã‚„ <code>make h</code>ã®ã‚ˆã†ã«ã€ã‚¿ã‚¤ãƒã—ãŸã‚ŠçŸ­ç¸®å½¢ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å…¥åŠ›ã—ã¦ã—ã¾ã£ãŸå ´åˆã«ã€helpãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡ºã—ãŸã„ã¨ã—ã¾ã™ï¼ˆhelpãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹æ°—ãŒä»˜ã‹ãªã„å ´åˆãŒã‚ã‚‹ã®ã§ã€æ°—ã¥ãã‚„ã™ãã™ã‚‹ç›®çš„ã§ã™ï¼‰ã€‚ãã®å ´åˆã€å…¨ã¦ã«ä¸€è‡´ã™ã‚‹ <code>%</code> ã¨ã„ã†ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’åˆ©ç”¨ã™ã‚‹ã®ã‚‚æ‰‹ã§ã™ã€‚</p><p>ä¾‹ã¨ã—ã¦æ¬¡ã®ã‚ˆã†ã«å®šç¾©ã—ã¾ã™ã€‚</p><figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line"><span class="section">%:</span></span><br><span class="line">@echo &#x27;command <span class="string">&quot;<span class="variable">$@</span>&quot;</span> is not found.&#x27;</span><br><span class="line">@<span class="variable">$(MAKE)</span> help</span><br><span class="line">@exit 2</span><br></pre></td></tr></table></figure><p>å®Ÿè¡Œã™ã‚‹ã¨ã€ â€œhâ€ ã¨ã„ã†ã‚¿ãƒ¼ã‚²ãƒƒãƒˆåãŒå­˜åœ¨ã—ãªã„å ´åˆã¯ã€helpã®å†…å®¹ã‚’å‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ make h</span><br><span class="line"><span class="built_in">command</span> <span class="string">&quot;h&quot;</span> is not found.</span><br><span class="line">run                  run launches go server</span><br><span class="line"><span class="built_in">test</span>                 <span class="built_in">test</span> calls go <span class="built_in">test</span></span><br><span class="line">deploy-dev           deploy development</span><br><span class="line">deploy-stg           deploy staging</span><br><span class="line">deploy-prod          deploy production</span><br><span class="line"><span class="built_in">help</span>                 display this <span class="built_in">help</span> screen</span><br><span class="line">make: *** [Makefile:80: 1] ã‚¨ãƒ©ãƒ¼ 2</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> $?</span><br><span class="line">2</span><br></pre></td></tr></table></figure><p>å…ƒã®æŒ™å‹•ã¨åˆã‚ã›ã‚‹ãŸã‚ã«ã€çµ‚äº†ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’2ã«è¨­å®šã—ã¦ã„ã‚‹ãŸã‚ã€ã‚¨ãƒ©ãƒ¼æ–‡ãŒå‡ºã¦ã—ã¾ã†ã®ãŒãƒã‚¤ã‚ºã§ã™ã­ã€‚ãªã‚‹ã¹ã <code>help</code> ã‚’å‡ºã—ã¦å•ã„åˆã‚ã›ã‚’æ¸›ã‚‰ã—ãŸã„å ´åˆãªã©ã€çŠ¶æ³ã‚’è¦‹ã¦è¿½åŠ ã™ã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚</p><h2 id="æ¨™æº–çš„ãªã‚¿ãƒ¼ã‚²ãƒƒãƒˆåã¨æˆæœç‰©ãƒ•ã‚¡ã‚¤ãƒ«å"><a href="#æ¨™æº–çš„ãªã‚¿ãƒ¼ã‚²ãƒƒãƒˆåã¨æˆæœç‰©ãƒ•ã‚¡ã‚¤ãƒ«å" class="headerlink" title="æ¨™æº–çš„ãªã‚¿ãƒ¼ã‚²ãƒƒãƒˆåã¨æˆæœç‰©ãƒ•ã‚¡ã‚¤ãƒ«å"></a>æ¨™æº–çš„ãªã‚¿ãƒ¼ã‚²ãƒƒãƒˆåã¨æˆæœç‰©ãƒ•ã‚¡ã‚¤ãƒ«å</h2><p>é–‹ç™ºè€…ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ã‚’ç›®æŒ‡ã™ã¨ã€<code>make build</code> ã§ã‚³ãƒ¼ãƒ‰ãŒãƒ“ãƒ«ãƒ‰ã§ããŸã»ã†ãŒç›´æ„Ÿçš„ã§ã—ã‚‡ã†ã€‚ä¸€æ–¹ã§makeã®æˆæœç‰©ç®¡ç†ã‚’è€ƒãˆã‚‹ã¨ã€ <code>go build -o bootstrap main.go</code> ãªã©ã§ç”¨ã„ã‚‹ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å¯¾è±¡ã®.goã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ ãƒ“ãƒ«ãƒ‰çµæœã® <code>bootstrap</code> ã‚’makeãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦å®šç¾©ã—ã¦ã„ããŸã„ã§ã™ã€‚ä¸¡è€…ã‚’ãƒãƒ©ãƒ³ã‚¹ã‚’å–ã‚‹ã¨ã€ã©ã¡ã‚‰ã‚‚å®šç¾©ã—ã¦ã„ãã“ã¨ãŒå¤šã„ã¨æ€ã„ã¾ã™ã€‚</p><p>ä¾‹ãˆã°æ¬¡ã®ã‚ˆã†ã«ã€ <code>build</code> ã¯ <code>bootstrap</code> ã¸ã®ä¾å­˜ã®ã¿ã§ã€å®Ÿæ…‹ã¯ <code>bootstrap</code> å´ã«å‡¦ç†ã‚’è¨˜è¼‰ã™ã‚‹ã¨è¡Œã£ãŸå…·åˆã§ã™ã€‚</p><figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ...(çœç•¥)...</span></span><br><span class="line">GO_FILES:=<span class="variable">$(<span class="built_in">shell</span> find . -type f -name &#x27;*.go&#x27; -print)</span></span><br><span class="line"><span class="comment"># ...(çœç•¥)...</span></span><br><span class="line"></span><br><span class="line"><span class="section">build: bootstrap ## build creates go binary</span></span><br><span class="line">@:</span><br><span class="line"></span><br><span class="line"><span class="section">bootstrap: <span class="variable">$(GO_FILES)</span> go.mod go.sum .git/HEAD .git/refs/tags .git/refs/heads</span></span><br><span class="line">@GOOS=linux GOARCH=amd64 go build \</span><br><span class="line">-ldflags=<span class="string">&quot;-s -w -buildid= -X main.version=$(shell git describe --tags --abbrev=0) -X main.revision=$(shell git rev-parse --short HEAD)&quot;</span> \</span><br><span class="line">-trimpath -o bootstrap cmd/main/main.go</span><br></pre></td></tr></table></figure><p>bootstrapã‚¿ãƒ¼ã‚²ãƒƒãƒˆå†…ã§ <code>go build</code> ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚æ¥­å‹™ã§ã‚ˆãä½¿ã„ãã†ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æ¸¡ã—ãŸã‚Šã€Gitã‚¿ã‚°ã‚„Gitãƒªãƒ“ã‚¸ãƒ§ãƒ³ã‚‚åŸ‹ã‚è¾¼ã‚€ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚ä¾å­˜é–¢ä¿‚ã¨ã—ã¦ <code>.go</code> ã®ãƒ•ã‚¡ã‚¤ãƒ«ä»¥å¤–ã«ã‚‚go.mod, go.sum ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚<code>.git</code> ç³»ã®3ãƒ•ã‚©ãƒ«ãƒ€ã¯é€šå¸¸ä¸è¦ã§ã™ãŒã€Gitã®ã‚¿ã‚°åã‚„ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã‚’ãƒ“ãƒ«ãƒ‰æ™‚ã«å«ã‚ã¦ã„ã‚‹ãŸã‚è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚ä»–ã«ã‚‚ <code>go:embed</code> ã§å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åŸ‹ã‚è¾¼ã¿ã—ã¦ã„ã‚‹å ´åˆã¯å€‹åˆ¥ã«ä¾å­˜é–¢ä¿‚ã«è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼ˆã‚„ã‚„ã“ã—ã„ã®ã§ã€goãƒ•ã‚¡ã‚¤ãƒ«ãŒé…å‚™ã•ã‚Œã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸é…ä¸‹ã™ã¹ã¦ã‚’è¿½åŠ ã™ã‚‹ã®ã‚‚ã‚ã‚Šã§ã™ã­ï¼‰ã€‚</p><p><code>build</code> ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã§ <code>@:</code> ã¨ã—ã¦ã„ã‚‹ã®ã¯ã€ã‚‚ã—bootstrapãŒä½œæˆæ¸ˆã¿ã®å ´åˆã«<code>make: &#39;build&#39; ã«å¯¾ã—ã¦è¡Œã†ã¹ãäº‹ã¯ã‚ã‚Šã¾ã›ã‚“.</code> ã¨ã„ã†è­¦å‘Šã‚’ç„¡è¦–ã™ã‚‹ãŸã‚ã®ãƒãƒƒã‚¯ã§ã™ã€‚<code>@</code>ãŒã‚³ãƒãƒ³ãƒ‰ã‚’è¡¨ç¤ºã•ã›ãªã„ã¨ã„ã†æ„å‘³ã§ã€<code>:</code> ã¯ä½•ã‚‚è¡Œã‚ãªã„ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆå´ã®ã‚³ãƒãƒ³ãƒ‰ã§ã™ã€‚<code>@:</code> ã¯ç„¡ãã¦ã‚‚æ§‹ã„ã¾ã›ã‚“ã€‚</p><p>ä»–ã«ã‚‚æœ‰åãªæ¨™æº–ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã¯å®šç¾©ã—ã¦ãŠãã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚è¿½åŠ ã§ç§ãŒã‚ˆãç”¨ã„ã‚‹ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚‚ã¾ã¨ã‚ã¾ã™ã€‚</p><figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line"><span class="section">all: generate fmt lint test build</span></span><br><span class="line"></span><br><span class="line"><span class="section">setup: ## install tools for development</span></span><br><span class="line">    @go install xxxx  </span><br><span class="line"></span><br><span class="line"><span class="section">generate: ## code generate</span></span><br><span class="line">    @<span class="comment"># ã‚³ãƒ¼ãƒ‰ç”Ÿæˆå‡¦ç†ãŒã‚ã‚Œã°</span></span><br><span class="line"></span><br><span class="line"><span class="section">fmt: ## code format</span></span><br><span class="line">    @<span class="comment"># ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå‡¦ç†</span></span><br><span class="line"></span><br><span class="line"><span class="section">lint: ## Lint</span></span><br><span class="line">    @<span class="comment"># ãƒªãƒ³ãƒˆå‡¦ç†ï¼ˆgo vet ./...ãªã©ï¼‰ã€markdownlintã€misspellã€govulncheckã€ãªã©ï¼ˆã„ãã¤ã‹ã¯å‰ææ¡ä»¶ã«ã—ãŸã»ã†ãŒä¸¦åˆ—åŒ–ãŒåŠ¹ãï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="section">test: ## test calls go testï¼ˆe.g. make option=-v testã€ make option=&quot;-v -short&quot; testã€ make option=&quot;-run TestAttach&quot;ï¼‰</span></span><br><span class="line">date</span><br><span class="line">go test -race -timeout 30m <span class="variable">$(option)</span> ./...</span><br><span class="line"></span><br><span class="line"><span class="section">test-coverage: cover.html ## test-coverage displays code coverage per package</span></span><br><span class="line">@go tool cover -func cover.out</span><br><span class="line"></span><br><span class="line"><span class="section">cover.out:</span></span><br><span class="line">@go test -race -timeout 30m -cover ./... -coverprofile=cover.out</span><br><span class="line">@echo <span class="string">&quot;create cover.out&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="section">cover.html: cover.out</span></span><br><span class="line">@go tool cover -html=cover.out -o cover.html</span><br><span class="line">@echo <span class="string">&quot;create cover.html&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="section">clean: ## Remove output files and clean cache</span></span><br><span class="line">    @rm -rf bootstrap</span><br><span class="line">    @go clean</span><br></pre></td></tr></table></figure><p>Goã®ãƒ†ã‚¹ãƒˆã§ã™ãŒã€<code>$(option)</code> ã¨ã„ã†ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚Goã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã®å ´åˆã€ç‰¹å®šã®ãƒ†ã‚¹ãƒˆã ã‘å®Ÿè¡Œã—ãŸã„å ´åˆã¯ <code>-run TestSum</code> ãªã©ã¨æŒ‡å®šã—ãŸã„ã¨ãã‚„ã€ <code>-v</code>ã€<code>-short</code>ã€<code>-vet=all</code> ãªã©æ§˜ã€…ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æ¸¡ã—ãŸã„ã¨ããŒã‚ã‚Šã¾ã™ã€‚ãã®å ´åˆã«makeçµŒç”±ã§å¯¾å¿œã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚æ‹¡å¼µç”¨ã«ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é€šå¸¸</span></span><br><span class="line">$ make <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -v ã‚’æ¸¡ã—ãŸã„</span></span><br><span class="line">$ make option=-v <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -v ã¨-short ã‚’æ¸¡ã—ãŸã„</span></span><br><span class="line">$ make option=<span class="string">&quot;-v -short&quot;</span> <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -run ã‚’æ¸¡ã—ãŸã„</span></span><br><span class="line">$ make option=<span class="string">&quot;-run TestCalcPoint&quot;</span> <span class="built_in">test</span></span><br></pre></td></tr></table></figure><h2 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h2><p>ã“ã“æ•°å¹´é–“ã€æ¥­å‹™ã§ã¯Goã‚’ç”¨ã„ã¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹ç™ºã—ã¦ãã¾ã—ãŸã€‚ãã®ãŠä¾›ã«ã¨ã—ã¦Makefileã‚‚ã‚ˆãç·¨é›†ã—ã¦ããŸã®ã§ã™ãŒã€ä¸€åº¦ä»•æ§˜ãŒå›ºã¾ã‚‹ã¨ã‚ã£ãŸã«æ›¸ãæ›ãˆãªã„ãŸã‚ã€çŸ¥è­˜ãŒå®šç€ã—ãªã„ã®ãŒæ‚©ã¿ã§ã—ãŸã€‚ä»Šå›ã€è¤‡æ•°ãƒãƒ¼ãƒ ã§åˆ©ç”¨é »åº¦ãŒé«˜ãã†ï¼‹å®Ÿè·µçš„ãªå†…å®¹ã‚’æŠ½å‡ºã—ã¦ã€ã¾ã¨ã‚ã¾ã—ãŸã€‚ã‚ˆã„æ©Ÿä¼šã§ã—ãŸã€‚</p><p>ãã‚Œã§ã¯è‰¯ã„makeãƒ©ã‚¤ãƒ•ã‚’ã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚</p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Programming/">Programming</category>
      
      
      <category domain="https://future-architect.github.io/tags/Go/">Go</category>
      
      <category domain="https://future-architect.github.io/tags/%E3%83%81%E3%83%BC%E3%83%A0%E9%96%8B%E7%99%BA/">ãƒãƒ¼ãƒ é–‹ç™º</category>
      
      <category domain="https://future-architect.github.io/tags/Makefile/">Makefile</category>
      
      <category domain="https://future-architect.github.io/tags/EditorConfig/">EditorConfig</category>
      
      <category domain="https://future-architect.github.io/tags/checkmake/">checkmake</category>
      
      <category domain="https://future-architect.github.io/tags/dotenv/">dotenv</category>
      
      
      <comments>https://future-architect.github.io/articles/20231012a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Prompt Flowã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§å‹•ã‹ã™ï¼†ã‚³ãƒ¼ãƒ‰ã§ç®¡ç†ã™ã‚‹</title>
      <link>https://future-architect.github.io/articles/20231011a/</link>
      <guid>https://future-architect.github.io/articles/20231011a/</guid>
      <pubDate>Tue, 10 Oct 2023 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;h2 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h2&gt;&lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€SAIG&amp;#x2F;MLOpsãƒãƒ¼ãƒ ã§ã‚¢ãƒ«ãƒã‚¤ãƒˆã‚’ã—ã¦ã„ã‚‹æ¿é‡ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;Azureã®Prompt</description>
          
        
      
      
      
      <content:encoded><![CDATA[<h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><p>ã“ã‚“ã«ã¡ã¯ã€SAIG&#x2F;MLOpsãƒãƒ¼ãƒ ã§ã‚¢ãƒ«ãƒã‚¤ãƒˆã‚’ã—ã¦ã„ã‚‹æ¿é‡ã§ã™ã€‚</p><p>Azureã®Prompt Flowã‚’ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§å‹•ã‹ã—ã€ä½œæˆã—ãŸãƒ•ãƒ­ãƒ¼ã‚’ã‚³ãƒ¼ãƒ‰ã§ç®¡ç†ã™ã‚‹æ–¹æ³•ã‚’ã”ç´¹ä»‹ã—ã¾ã™ã€‚</p><p>Prompt Flowã¨ã¯ã€Azure Machine Learningä¸Šã®æ©Ÿèƒ½ã§ã€Azure OpenAIã§æä¾›ã•ã‚Œã¦ã„ã‚‹LLMã‚’åˆ©ç”¨ã—ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã‚’å††æ»‘ã«ã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚</p><p>å®Ÿéš›ã«LLMã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹ç™ºã™ã‚‹å ´åˆã€ã€Œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å…¥åŠ›ã—ã¦çµ‚ã‚ã‚Šã€ã§ã¯ãªãã€ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ãªã©è¤‡æ•°ã®è¦ç´ ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚ã“ã®ãŸã‚ã€Prompt Flowã§ã¯å‡¦ç†ã®ãƒ•ãƒ­ãƒ¼ã‚’DAG(æœ‰å‘éå·¡å›ã‚°ãƒ©ãƒ•)ã§å¯è¦–åŒ–ã™ã‚‹ã“ã¨ã§ã€é–‹ç™ºåŠ¹ç‡ãŒå¤§ããå‘ä¸Šã—ã¾ã™ã€‚</p><p>Prompt Flowã¯Python<a href="https://github.com/microsoft/promptflow">ãƒ©ã‚¤ãƒ–ãƒ©ãƒª</a>ï¼ˆ2023&#x2F;09&#x2F;27æ™‚ç‚¹ã§ã¯MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ï¼‰ã¨ã—ã¦æä¾›ã•ã‚Œã¦ãŠã‚Šã€Azureã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç”»é¢ã ã‘ã§ãªãã€ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§ã‚‚å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>ãƒ­ãƒ¼ã‚«ãƒ«ã§å®Ÿè¡Œã§ãã‚‹ã“ã¨ã«ã¯ä»¥ä¸‹ã®åˆ©ç‚¹ãŒã‚ã‚Šã¾ã™ã€‚</p><ul><li>ç‰¹å®šã®ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ™ãƒ³ãƒ€ãƒ¼ã«ä¾å­˜ã—ãªã„ã®ã§é–‹ç™ºã®é¸æŠè‚¢ãŒåºƒãŒã‚‹</li><li>ãƒ•ãƒ­ãƒ¼ã‚’ã‚³ãƒ¼ãƒ‰ã§ç®¡ç†ã§ãã‚‹<ul><li>ã‚ˆãã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚Œã‚‹GUIã®å¤‰åŒ–ã«æˆ¸æƒ‘ã†å¿…è¦ãŒãªã„</li><li>ã‚³ãƒ¼ãƒ‰ç·¨é›†ã®å·®åˆ†ã‚’è¨˜éŒ²ã§ãã‚‹</li></ul></li></ul><p>â€»æœ¬è¨˜äº‹ã§ã¯ã€èª­è€…ã¯ã€ŒAzureã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç”»é¢ã§ã®Prompt Flowã®æ“ä½œã‚’ã—ãŸã“ã¨ãŒã‚ã‚‹ã€ã¨ã„ã†å‰æã§ã”èª¬æ˜ã—ã¾ã™ã€‚</p><h2 id="äº‹å‰æº–å‚™"><a href="#äº‹å‰æº–å‚™" class="headerlink" title="äº‹å‰æº–å‚™"></a>äº‹å‰æº–å‚™</h2><h3 id="1-Pythonã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"><a href="#1-Pythonã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" class="headerlink" title="1. Pythonã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"></a>1. Pythonã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h3><p>Prompt Flowã‚’å‹•ã‹ã™ã«ã¯ã€<code>Python 3.9</code>ã‚ã‚‹ã„ã¯<code>Python 3.10</code>ä»¥ä¸ŠãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><h3 id="2-Prompt-Flowãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"><a href="#2-Prompt-Flowãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" class="headerlink" title="2. Prompt Flowãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"></a>2. Prompt Flowãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h3><p>ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§<code>promptflow</code>,<code>promptflow-tools</code>ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">pip install promptflow promptflow-tools</span><br></pre></td></tr></table></figure><p>ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå®Œäº†ã—ãŸã‚‰ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§promptflowã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå‡ºåŠ›ã•ã‚Œã¾ã™</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># (ä¾‹) &quot;0.1.0b5&quot;</span></span><br><span class="line">pf -v </span><br></pre></td></tr></table></figure><h3 id="3-VSCodeæ‹¡å¼µæ©Ÿèƒ½ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"><a href="#3-VSCodeæ‹¡å¼µæ©Ÿèƒ½ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" class="headerlink" title="3. VSCodeæ‹¡å¼µæ©Ÿèƒ½ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"></a>3. VSCodeæ‹¡å¼µæ©Ÿèƒ½ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h3><p>Prompt Flowã®VSCodeæ‹¡å¼µæ©Ÿèƒ½ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚</p><p>VSCodeã®æ‹¡å¼µæ©Ÿèƒ½ã«ã¦ã€ŒPrompt Flowã€ã§æ¤œç´¢ã™ã‚‹ã¨å‡ºã¦ãã¾ã™ã€‚</p><img src="/images/20231011a/image.png" alt="Prompt Flow for VS Code" width="1200" height="560" loading="lazy"><p>VSCodeæ‹¡å¼µæ©Ÿèƒ½ãŒç„¡ãã¦ã‚‚Prompt Flowè‡ªä½“ã¯å‹•ã‹ã›ã¾ã™ãŒã€ãƒ•ãƒ­ãƒ¼ã®å¯è¦–åŒ–æ©Ÿèƒ½ãŒã‚ã‚‹ã®ã§ã€VSCodeãŒä½¿ç”¨ã§ãã‚‹å ´åˆã¯å…¥ã‚Œã¦ãŠãã¾ã—ã‚‡ã†ã€‚</p><p>æœ¬è¨˜äº‹ã§ã¯VSCodeæ‹¡å¼µæ©Ÿèƒ½ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹å‰æã§èª¬æ˜ã—ã¦ã„ãã¾ã™ã€‚</p><h2 id="ã‚·ãƒ³ãƒ—ãƒ«ãªæ¨™æº–ãƒ•ãƒ­ãƒ¼ã‚’ä½œæˆã™ã‚‹"><a href="#ã‚·ãƒ³ãƒ—ãƒ«ãªæ¨™æº–ãƒ•ãƒ­ãƒ¼ã‚’ä½œæˆã™ã‚‹" class="headerlink" title="ã‚·ãƒ³ãƒ—ãƒ«ãªæ¨™æº–ãƒ•ãƒ­ãƒ¼ã‚’ä½œæˆã™ã‚‹"></a>ã‚·ãƒ³ãƒ—ãƒ«ãªæ¨™æº–ãƒ•ãƒ­ãƒ¼ã‚’ä½œæˆã™ã‚‹</h2><p>ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã€æœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ãªæ¨™æº–ãƒ•ãƒ­ãƒ¼ãŒä½œæˆã§ãã¾ã™ã€‚<br><code>my-simple-flow</code>ã®éƒ¨åˆ†ã¯ãŠå¥½ããªãƒ•ãƒ­ãƒ¼åã«å¤‰æ›´ã—ã¦ãã ã•ã„ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">pf flow init --flow my-simple-flow</span><br></pre></td></tr></table></figure><p>ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ç›´ä¸‹ã«<code>my-simple-flow</code>ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã™ã€‚</p><p>ä¸­èº«ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚</p><img src="/images/20231011a/image_2.png" alt="my-simple-flow, \pycache_, promptflow, flow.tools.json, .gitignore, data.jsonl, flow.dag.yaml, hello.jinja, hello.py, requirements.txt" width="432" height="330" loading="lazy"><ul><li><code>__pycache__</code>: Pythonã‚’å®Ÿè¡Œã™ã‚‹éš›ã«ç”Ÿæˆã•ã‚Œã‚‹ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆå‰Šé™¤ã—ã¦ã‚‚ç‰¹ã«å•é¡Œã¯ãªã„ï¼‰</li><li><code>.promptflow/flow.tools.json</code>: flow.dag.yamlã‹ã‚‰å‚ç…§ã•ã‚Œã‚‹Toolsã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ï¼ˆä¿®æ­£ã™ã‚‹å¿…è¦ã¯ãªã„ï¼‰ </li><li><code>data.jsonl</code>: ãƒ•ãƒ­ãƒ¼ã«å…¥åŠ›ã™ã‚‹ãƒ‡ãƒ¼ã‚¿</li><li><code>flow.dag.yaml</code>: å…¥å‡ºåŠ›ãƒ»ãƒãƒ¼ãƒ‰ãƒ»ãƒãƒªã‚¢ãƒ³ãƒˆç­‰ã‚’å«ã‚€ãƒ•ãƒ­ãƒ¼ã®å…¨ã¦ã‚’å®šç¾©ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«</li><li><code>.py, .jinja2ç­‰ã®ãƒ•ã‚¡ã‚¤ãƒ«</code>: ãƒ•ãƒ­ãƒ¼å†…ã®ãƒ„ãƒ¼ãƒ«ãŒå‚ç…§ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆ</li><li><code>requirements.txt</code>: ãƒ•ãƒ­ãƒ¼ã®å®Ÿè¡Œã«å¿…è¦ãªPythonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒªã‚¹ãƒˆ</li></ul><p><code>flow.dag.yaml</code>ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­èº«ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚ãƒ†ã‚­ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹ãªãƒ•ãƒ­ãƒ¼å®šç¾©ãƒ‡ãƒ¼ã‚¿ãªã®ã§ã€ç›´æ„Ÿã§ã¯ä½•ã‚’ã™ã‚‹ãƒ•ãƒ­ãƒ¼ã‹åˆ†ã‹ã‚Šã«ãã„ã§ã™ã­ã€‚</p><p>ãã“ã§èµ¤æ ã®<code>Visual editor</code>ã‚’æŠ¼ã—ã¦ã¿ã¾ã™ã€‚</p><img src="/images/20231011a/ã‚³ãƒ¡ãƒ³ãƒˆ_2023-09-25_163948.png" alt="Visual editoor(Ctrl + k, v)" width="1156" height="1140" loading="lazy"><p>ã™ã‚‹ã¨ã€Azureã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ãŠé¦´æŸ“ã¿ã®GUIãƒ™ãƒ¼ã‚¹ã®ç·¨é›†ç”»é¢ãŒå‡ºã¦ãã¾ã™ã€‚</p><p>ã€Œå…¥åŠ›ã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«å«ã‚ã¦å‡ºåŠ›ã™ã‚‹ã€ã¨ã„ã†ã€LLMã‚’ä½¿ã‚ãªã„ç°¡å˜ãªãƒ•ãƒ­ãƒ¼ã®ã‚ˆã†ã§ã™ã€‚</p><img src="/images/20231011a/pic.png" alt="" width="1200" height="612" loading="lazy"><p>ã“ã®Visual editorã§ç·¨é›†ã—ãŸå†…å®¹ã¯ã€<code>flow.dag.yaml</code>ã®ãƒ†ã‚­ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã«åæ˜ ã•ã‚Œã‚‹ã®ã§ã€GUIãƒ™ãƒ¼ã‚¹åŠã³ãƒ†ã‚­ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹ã®ã©ã¡ã‚‰ã‹ã‚‰ã§ã‚‚ç·¨é›†å¯èƒ½ã§ã™ã€‚</p><p>ä¸€åº¦ã€ãƒ•ãƒ­ãƒ¼ã‚’å‹•ã‹ã—ã¦ã¿ã¾ã™ã€‚</p><p>ä¸Šå›³èµ¤æ ã®éƒ¨åˆ†ã«å¥½ããªãƒ†ã‚­ã‚¹ãƒˆï¼ˆã“ã“ã§ã¯<code>Hello World!</code>ï¼‰ã‚’å…¥åŠ›ã—ã€<code>my-simple-flow</code>ã®è¦ªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’æ‰“ã¡ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">pf flow <span class="built_in">test</span> --flow my-simple-flow</span><br></pre></td></tr></table></figure><p>ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ãŒè¿”ã£ã¦ãã¾ã™ã€‚</p><img src="/images/20231011a/pic2.png" alt="output_prompt: Prompt: Write a simple Hello World! program that displays the greeting message when executed." width="1200" height="147" loading="lazy"><p>ã€Œå…¥åŠ›ã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«å«ã‚ã¦å‡ºåŠ›ã™ã‚‹ã€ã¨ã„ã†ã‚·ãƒ³ãƒ—ãƒ«ãªæ¨™æº–ãƒ•ãƒ­ãƒ¼ãŒå®Ÿè¡Œã§ãã¾ã—ãŸã€‚</p><h2 id="LLMä»˜ãã®æ¨™æº–ãƒ•ãƒ­ãƒ¼ã‚’ä½œæˆã™ã‚‹"><a href="#LLMä»˜ãã®æ¨™æº–ãƒ•ãƒ­ãƒ¼ã‚’ä½œæˆã™ã‚‹" class="headerlink" title="LLMä»˜ãã®æ¨™æº–ãƒ•ãƒ­ãƒ¼ã‚’ä½œæˆã™ã‚‹"></a>LLMä»˜ãã®æ¨™æº–ãƒ•ãƒ­ãƒ¼ã‚’ä½œæˆã™ã‚‹</h2><p>ã“ã“ã§ã¯ã€å…¥åŠ›ã•ã‚ŒãŸè³ªå•ã«å¯¾ã™ã‚‹å¿œç­”ã‚’ã—ã¦ã‚‚ã‚‰ã†ãƒ•ãƒ­ãƒ¼ã‚’ä½œã£ã¦ã„ãã¾ã™ã€‚</p><p>å‰ç« ã§ä½œæˆã—ãŸãƒ•ãƒ­ãƒ¼ã®ä¸­ã«LLMï¼ˆPrompt Flowã§ã¯LLMãƒ„ãƒ¼ãƒ«&#x2F;LLMãƒãƒ¼ãƒ‰ã¨å‘¼ã¶ï¼‰ã‚’è¿½åŠ ã—ã€å°‘ã—è¤‡é›‘ã«ãªã£ãŸãƒ•ãƒ­ãƒ¼ã§ã™ã€‚</p><h3 id="1-Connectionã®è¨­å®š"><a href="#1-Connectionã®è¨­å®š" class="headerlink" title="1. Connectionã®è¨­å®š"></a>1. Connectionã®è¨­å®š</h3><p>ã¾ãšã¯Connectionï¼ˆæ¥ç¶šï¼‰ã®è¨­å®šã‚’è¡Œã„ã¾ã™ã€‚</p><p>ä»»æ„ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä¸Šã§ã€æ¥ç¶šå…ˆã‚’å®šç¾©ã™ã‚‹YAMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚ï¼ˆã“ã“ã§ã¯<code>connection-azure-openai.yaml</code>ã¨ã„ã†åå‰ã§ä½œæˆï¼‰</p><p>YAMLãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­èº«ã¯<a href="https://microsoft.github.io/promptflow/how-to-guides/manage-connections.html">å…¬å¼Docs</a>ã‚’å‚è€ƒã«ä»¥ä¸‹ã®ã‚ˆã†ã«ä½œã‚Šã¾ã™ã€‚</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">$schema:</span> <span class="string">https://azuremlschemas.azureedge.net/promptflow/latest/AzureOpenAIConnection.schema.json</span></span><br><span class="line"><span class="attr">name:</span> <span class="string">connection-azure-openai</span> <span class="comment"># å¥½ããªã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³åã«è¨­å®šå¯</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">azure_open_ai</span></span><br><span class="line"><span class="attr">api_key:</span> <span class="string">&lt;API_KEY&gt;</span> <span class="comment"># Azure OpenAIãƒªã‚½ãƒ¼ã‚¹ã®APIã‚­ãƒ¼</span></span><br><span class="line"><span class="attr">api_base:</span> <span class="string">&lt;API_BASE&gt;</span> <span class="comment"># Azure OpenAIãƒªã‚½ãƒ¼ã‚¹ã®ãƒ™ãƒ¼ã‚¹ï¼ˆã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆURLï¼‰</span></span><br><span class="line"><span class="attr">api_type:</span> <span class="string">azure</span></span><br><span class="line"><span class="attr">api_version:</span> <span class="number">2023-07-01</span><span class="string">-preview</span> <span class="comment"># ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯å¤‰ã‚ã‚‹å¯èƒ½æ€§ã‚ã‚Š</span></span><br></pre></td></tr></table></figure><p>YAMLãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã§ããŸã‚‰ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§connectionã‚’è¿½åŠ ã—ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">pf connection create -f &lt;YAMLãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹&gt;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹ã®ã‚ˆã†ã«è©³ç´°ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°Connectionï¼ˆæ¥ç¶šï¼‰ã®è¨­å®šã¯å®Œäº†ã§ã™ã€‚</p><img src="/images/20231011a/pic3.png" alt="" width="1200" height="257" loading="lazy"><h3 id="2-LLMãƒ„ãƒ¼ãƒ«ã®è¿½åŠ "><a href="#2-LLMãƒ„ãƒ¼ãƒ«ã®è¿½åŠ " class="headerlink" title="2. LLMãƒ„ãƒ¼ãƒ«ã®è¿½åŠ "></a>2. LLMãƒ„ãƒ¼ãƒ«ã®è¿½åŠ </h3><p>ç¶šã„ã¦ã€LLMãƒ„ãƒ¼ãƒ«ã‚’è¿½åŠ ã—ã¦ã„ãã¾ã™ã€‚<code>flow.dag.yaml</code>ã®Visual editorã®ç”»é¢ã‹ã‚‰ã€Œ+LLMã€ã‚’æŠ¼ã—ã¾ã™ã€‚</p><img src="/images/20231011a/pic4.png" alt="+LLM" width="1200" height="436" loading="lazy"><p>ä¸Šéƒ¨ã«ã€LLMãƒ„ãƒ¼ãƒ«ã®åå‰å…¥åŠ›ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹ã®ã§å¥½ããªåå‰ã‚’è¨­å®šã—ã¾ã™ã€‚ï¼ˆã“ã“ã§ã¯<code>llm_node</code>ã¨è¨­å®šï¼‰</p><img src="/images/20231011a/image_3.png" alt="llm_node" width="889" height="97" loading="lazy"><p>åå‰å…¥åŠ›ãŒå®Œäº†ã™ã‚‹ã¨ã€ã€Œnew fileã€ã‚’é¸æŠã—ã¾ã™ã€‚ï¼ˆ<code>&lt;LLMãƒ„ãƒ¼ãƒ«å&gt;.jinja2</code>ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ–°è¦ç”Ÿæˆã•ã‚Œã¾ã™ï¼‰</p><img src="/images/20231011a/image_4.png" alt="new file" width="885" height="131" loading="lazy"><p>LLMãƒ„ãƒ¼ãƒ«ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚connectionã«ã¯å…ˆç¨‹è¨­å®šã—ãŸæ¥ç¶šå…ˆãŒé¸æŠã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚</p><img src="/images/20231011a/pic5.png" alt="connection:connection-azure-openai api:chat deployment_name:***-gpt35-01 temperature:1 stop: max_tokens:" width="1200" height="266" loading="lazy"><h3 id="3-ãƒ•ãƒ­ãƒ¼ã®ç·¨é›†"><a href="#3-ãƒ•ãƒ­ãƒ¼ã®ç·¨é›†" class="headerlink" title="3. ãƒ•ãƒ­ãƒ¼ã®ç·¨é›†"></a>3. ãƒ•ãƒ­ãƒ¼ã®ç·¨é›†</h3><p>å…¥åŠ›ã•ã‚ŒãŸè³ªå•ã«å¯¾ã™ã‚‹å¿œç­”ã‚’ã—ã¦ã‚‚ã‚‰ã†ãƒ•ãƒ­ãƒ¼ã‚’ä½œã£ã¦ã„ãã¾ã™ã€‚</p><p>Azureã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã¯ã€1ã¤ã®ç”»é¢ã§å…¨ã¦ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚„ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ç›´æ¥ç·¨é›†ã§ãã¾ã™ãŒã€ã“ã“ã§ã¯ã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«æ¯ã«ç·¨é›†ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ãƒ•ãƒ­ãƒ¼ã®æ¦‚ç•¥ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚</p><p><code>Inputs</code>ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®è³ªå•ã‚’å—ã‘å–ã‚Šã€<code>system_prompt</code>ã§ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•ã‚’åŸ‹ã‚è¾¼ã¿ã€<code>llm_node</code>ã§LLMã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æŠ•ã’ã€<code>echo_llm_output</code>ã§LLMã‹ã‚‰ã®å›ç­”ã‚’åŠ å·¥ã—ã¦<code>output</code>ã«å‡ºåŠ›ã—ã¾ã™ã€‚</p><img src="/images/20231011a/image_5.png" alt="inputs -> system_prompt -> llm_node -> echo_llm_output -> outputs" width="1200" height="1266" loading="lazy"><details><summary>flow.dag.yaml</summary><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">environment:</span></span><br><span class="line">  <span class="attr">python_requirements_txt:</span> <span class="string">requirements.txt</span></span><br><span class="line"><span class="attr">inputs:</span></span><br><span class="line">  <span class="attr">question:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">string</span></span><br><span class="line">    <span class="attr">default:</span> <span class="string">æ±äº¬ã¯ã©ã“ã®å›½ã®éƒ½å¸‚ï¼Ÿ</span></span><br><span class="line"><span class="attr">outputs:</span></span><br><span class="line">  <span class="attr">output:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">string</span></span><br><span class="line">    <span class="attr">reference:</span> <span class="string">$&#123;echo_llm_output.output&#125;</span></span><br><span class="line"><span class="attr">nodes:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">system_prompt</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">prompt</span></span><br><span class="line">  <span class="attr">source:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">code</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">system_prompt.jinja2</span></span><br><span class="line">  <span class="attr">inputs:</span></span><br><span class="line">    <span class="attr">question:</span> <span class="string">$&#123;inputs.question&#125;</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">echo_llm_output</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">python</span></span><br><span class="line">  <span class="attr">source:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">code</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">echo_llm_output.py</span></span><br><span class="line">  <span class="attr">inputs:</span></span><br><span class="line">    <span class="attr">input:</span> <span class="string">$&#123;llm_node.output&#125;</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">llm_node</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">llm</span></span><br><span class="line">  <span class="attr">source:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">code</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">llm_node.jinja2</span></span><br><span class="line">  <span class="attr">inputs:</span></span><br><span class="line">    <span class="attr">input_prompt:</span> <span class="string">$&#123;system_prompt.output&#125;</span></span><br><span class="line">    <span class="attr">deployment_name:</span> <span class="string">gpt35-01</span></span><br><span class="line">    <span class="attr">max_tokens:</span> <span class="number">256</span></span><br><span class="line">  <span class="attr">connection:</span> <span class="string">connection-azure-openai</span></span><br><span class="line">  <span class="attr">api:</span> <span class="string">chat</span></span><br></pre></td></tr></table></figure></details><p>å„ãƒãƒ¼ãƒ‰ã®è©³ç´°ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚</p><h4 id="Inputs-amp-Outputs"><a href="#Inputs-amp-Outputs" class="headerlink" title="Inputs&amp;Outputs"></a>Inputs&amp;Outputs</h4><img src="/images/20231011a/image_6.png" alt="question string æ±äº¬ã¯ã©ã“ã®å›½ã®éƒ½å¸‚ï¼Ÿ" width="1200" height="333" loading="lazy"><h4 id="system-prompt"><a href="#system-prompt" class="headerlink" title="system_prompt"></a>system_prompt</h4><img src="/images/20231011a/image_7.png" alt="${inputs.question}" width="1200" height="222" loading="lazy"><details><summary>system_prompt.jinja2</summary><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">system:</span><br><span class="line">ã‚ãªãŸã¯å„ªç§€ãªAIãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆã§ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®è³ªå•ã«ç­”ãˆã¦ä¸‹ã•ã„ã€‚</span><br><span class="line"></span><br><span class="line">user: </span><br><span class="line">&#123;&#123;question&#125;&#125; </span><br><span class="line"></span><br><span class="line">AI:</span><br></pre></td></tr></table></figure></details><h4 id="llm-node"><a href="#llm-node" class="headerlink" title="llm_node"></a>llm_node</h4><img src="/images/20231011a/pic6.png" alt="" width="1200" height="309" loading="lazy"><details><summary>llm_node.jinja2</summary><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;input_prompt&#125;&#125;</span><br></pre></td></tr></table></figure></details><h4 id="echo-llm-output"><a href="#echo-llm-output" class="headerlink" title="echo_llm_output"></a>echo_llm_output</h4><img src="/images/20231011a/image_8.png" alt="" width="1200" height="218" loading="lazy"><details><summary>echo_llm_output.py</summary><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> promptflow <span class="keyword">import</span> tool</span><br><span class="line"></span><br><span class="line"><span class="meta">@tool</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">echo_llm_output</span>(<span class="params"><span class="built_in">input</span>: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;LLMå‡ºåŠ›: &quot;</span> + <span class="built_in">input</span></span><br></pre></td></tr></table></figure></details><h3 id="4-ãƒ•ãƒ­ãƒ¼ã®å®Ÿè¡Œ"><a href="#4-ãƒ•ãƒ­ãƒ¼ã®å®Ÿè¡Œ" class="headerlink" title="4. ãƒ•ãƒ­ãƒ¼ã®å®Ÿè¡Œ"></a>4. ãƒ•ãƒ­ãƒ¼ã®å®Ÿè¡Œ</h3><p>ãƒ•ãƒ­ãƒ¼ã®ç·¨é›†ãŒçµ‚ã‚ã£ãŸã‚‰ã€å…ˆç¨‹ã¨åŒæ§˜ã«ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§å®Ÿè¡Œã—ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">pf flow <span class="built_in">test</span> --flow my-simple-flow</span><br></pre></td></tr></table></figure><p>Outputsã®æ¬„ã«å‡ºåŠ›ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p><img src="/images/20231011a/image_9.png" alt="" width="914" height="440" loading="lazy"><h3 id="5-ãƒ•ãƒ­ãƒ¼ã®ä¸€æ‹¬å®Ÿè¡Œ"><a href="#5-ãƒ•ãƒ­ãƒ¼ã®ä¸€æ‹¬å®Ÿè¡Œ" class="headerlink" title="5. ãƒ•ãƒ­ãƒ¼ã®ä¸€æ‹¬å®Ÿè¡Œ"></a>5. ãƒ•ãƒ­ãƒ¼ã®ä¸€æ‹¬å®Ÿè¡Œ</h3><p>è¤‡æ•°ã®å…¥åŠ›ã‚’ä¸€æ‹¬ã§å®Ÿè¡Œã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</p><p>ã¾ãšã¯<code>flow.dag.yaml</code>ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã€<code>default: æ±äº¬ã¯ã©ã“ã®å›½ã®éƒ½å¸‚ï¼Ÿ</code>ã®è¡Œã‚’ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã—ã¾ã™ã€‚</p><details><summary>flow.dag.yamlï¼ˆã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆå¾Œï¼‰</summary><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">environment:</span></span><br><span class="line">  <span class="attr">python_requirements_txt:</span> <span class="string">requirements.txt</span></span><br><span class="line"><span class="attr">inputs:</span></span><br><span class="line">  <span class="attr">question:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">string</span></span><br><span class="line">    <span class="comment"># default: æ±äº¬ã¯ã©ã“ã®å›½ã®éƒ½å¸‚ï¼Ÿ</span></span><br><span class="line"><span class="attr">outputs:</span></span><br><span class="line">  <span class="attr">output:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">string</span></span><br><span class="line">    <span class="attr">reference:</span> <span class="string">$&#123;echo_llm_output.output&#125;</span></span><br><span class="line"><span class="attr">nodes:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">system_prompt</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">prompt</span></span><br><span class="line">  <span class="attr">source:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">code</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">system_prompt.jinja2</span></span><br><span class="line">  <span class="attr">inputs:</span></span><br><span class="line">    <span class="attr">question:</span> <span class="string">$&#123;inputs.question&#125;</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">echo_llm_output</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">python</span></span><br><span class="line">  <span class="attr">source:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">code</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">echo_llm_output.py</span></span><br><span class="line">  <span class="attr">inputs:</span></span><br><span class="line">    <span class="attr">input:</span> <span class="string">$&#123;llm_node.output&#125;</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">llm_node</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">llm</span></span><br><span class="line">  <span class="attr">source:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">code</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">llm_node.jinja2</span></span><br><span class="line">  <span class="attr">inputs:</span></span><br><span class="line">    <span class="attr">input_prompt:</span> <span class="string">$&#123;system_prompt.output&#125;</span></span><br><span class="line">    <span class="attr">deployment_name:</span> <span class="string">gpt35-01</span></span><br><span class="line">    <span class="attr">max_tokens:</span> <span class="number">256</span></span><br><span class="line">  <span class="attr">connection:</span> <span class="string">connection-azure-openai</span></span><br><span class="line">  <span class="attr">api:</span> <span class="string">chat</span></span><br></pre></td></tr></table></figure></details><p>æ¬¡ã«ã€ãƒ•ãƒ­ãƒ¼ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã«ã‚ã£ãŸ<code>data.jsonl</code>ã‚’ç·¨é›†ã—ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå†…å®¹ã‚’è¨˜è¼‰ã—ã¾ã™ã€‚</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;question&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ã‚ªãƒ¼ã‚¹ãƒˆãƒ©ãƒªã‚¢ã®é¦–éƒ½ã¯ï¼Ÿ&quot;</span><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;question&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ã‚¢ãƒ¡ãƒªã‚«ã®é¦–éƒ½ã¯ï¼Ÿ&quot;</span><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;question&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ã‚¤ã‚®ãƒªã‚¹ã®é¦–éƒ½ã¯ï¼Ÿ&quot;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>1è¡ŒãŒ1ã¤ã®å…¥åŠ›ã«ç›¸å½“ã—ã¾ã™ã€‚è³ªå•æ–‡ã‚’å¤‰ãˆãŸã‚Šè¡Œã‚’è¿½åŠ ã—ãŸã‚Šã—ã¦ã‚‚å¤§ä¸ˆå¤«ã§ã™ã€‚</p><p>æœ€å¾Œã«ã€ãƒ•ãƒ­ãƒ¼ã®è¦ªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚ï¼ˆ<code>my_run_001</code>ã®éƒ¨åˆ†ã¯ä»»æ„ï¼‰</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">pf run create --flow my-simple-flow --data ./my-simple-flow/data.jsonl --name my_run_001</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹ã®ã‚ˆã†ãªå‡ºåŠ›ãŒè¿”ã£ã¦ãã‚Œã°ä¸€æ‹¬å®Ÿè¡Œã¯æˆåŠŸã§ã™ã€‚</p><img src="/images/20231011a/7.png" alt="" width="1200" height="297" loading="lazy"><p>è¤‡æ•°å®Ÿè¡Œã®çµæœã¯ãƒ­ã‚°ã¨ã—ã¦è¨˜éŒ²ã•ã‚Œã¦ãŠã‚Šã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã„ã¤ã§ã‚‚å¯è¦–åŒ–ã§ãã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">pf run show-details --name my_run_001</span><br></pre></td></tr></table></figure><img src="/images/20231011a/8.png" alt="" width="1007" height="312" loading="lazy"><h2 id="ä½œæˆã—ãŸãƒ•ãƒ­ãƒ¼ã‚’ã‚³ãƒ¼ãƒ‰ã§ç®¡ç†ã™ã‚‹"><a href="#ä½œæˆã—ãŸãƒ•ãƒ­ãƒ¼ã‚’ã‚³ãƒ¼ãƒ‰ã§ç®¡ç†ã™ã‚‹" class="headerlink" title="ä½œæˆã—ãŸãƒ•ãƒ­ãƒ¼ã‚’ã‚³ãƒ¼ãƒ‰ã§ç®¡ç†ã™ã‚‹"></a>ä½œæˆã—ãŸãƒ•ãƒ­ãƒ¼ã‚’ã‚³ãƒ¼ãƒ‰ã§ç®¡ç†ã™ã‚‹</h2><p>ä»Šå›ä½œæˆã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ç¾¤ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚</p><img src="/images/20231011a/image_10.png" alt="" width="472" height="368" loading="lazy"><p>ã“ã‚Œã‚‰ã¯gitã§ç®¡ç†ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>äºˆã‚<code>.gitignore</code>ãƒ•ã‚¡ã‚¤ãƒ«ãŒå«ã¾ã‚Œã¦ã„ã‚‹ãŸã‚ã€ä½™è¨ˆãªã‚­ãƒ£ãƒƒã‚·ãƒ¥ç­‰ã‚’å«ã¾ãšãƒ—ãƒƒã‚·ãƒ¥ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ãŒã€connectionæƒ…å ±ãŒå…¥ã£ãŸYAMLãƒ•ã‚¡ã‚¤ãƒ«ã¯å¾Œã§ä½œæˆã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ãªã®ã§ã€ãƒ—ãƒƒã‚·ãƒ¥ã—ã¦ã—ã¾ã†æã‚ŒãŒã‚ã‚Šã¾ã™ã€‚</p><p>è©²å½“ãƒ•ã‚¡ã‚¤ãƒ«ã‚’<code>.gitignore</code>ã«è¿½è¨˜ã™ã‚‹ãªã©ã—ã¦ã€ååˆ†æ³¨æ„ã—ã¦ãã ã•ã„ã€‚</p><h2 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h2><p>æœ¬è¨˜äº‹ã§ã¯Azureã®Prompt Flowã‚’ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§å‹•ã‹ã—ã€ä½œæˆã—ãŸãƒ•ãƒ­ãƒ¼ã‚’ã‚³ãƒ¼ãƒ‰ã§ç®¡ç†ã™ã‚‹æ–¹æ³•ã‚’ã”ç´¹ä»‹ã—ã¾ã—ãŸã€‚</p><p>LLMã®é–‹ç™ºã‚„é‹ç”¨(LLMOps)ã«æºã‚ã£ã¦ã„ã‚‹æ–¹ã€…ã‚„ã€Prompt Flowã‚’è©¦ã—ã¦ã„ã‚‹æ–¹ã€…ã®å‚è€ƒã¨ãªã‚Œã°å¹¸ã„ã§ã™ã€‚</p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/DataScience/">DataScience</category>
      
      
      <category domain="https://future-architect.github.io/tags/Azure/">Azure</category>
      
      <category domain="https://future-architect.github.io/tags/LLM/">LLM</category>
      
      <category domain="https://future-architect.github.io/tags/Prompt-Flow/">Prompt Flow</category>
      
      <category domain="https://future-architect.github.io/tags/AzureOpenAIService/">AzureOpenAIService</category>
      
      
      <comments>https://future-architect.github.io/articles/20231011a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>go vet ã«å«ã¾ã‚Œãªã„ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³ãªé™çš„è§£æãƒ„ãƒ¼ãƒ«ãŸã¡</title>
      <link>https://future-architect.github.io/articles/20231005a/</link>
      <guid>https://future-architect.github.io/articles/20231005a/</guid>
      <pubDate>Wed, 04 Oct 2023 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;img src=&quot;/images/20231005a/etactics-inc-g3PsF4_y7ZY-unsplash.jpg&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;533&quot;&gt;

&lt;h2 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot;</description>
          
        
      
      
      
      <content:encoded><![CDATA[<img src="/images/20231005a/etactics-inc-g3PsF4_y7ZY-unsplash.jpg" alt="" width="800" height="533"><h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><p>TIGçœŸé‡ã§ã™ã€‚è‚²ä¼‘æ˜ã‘ã§ã™ã€‚</p><p>Goè¨€èªã®ç‰¹å¾´ã®ä¸€ã¤ã«ã€é™çš„è§£æãƒ„ãƒ¼ãƒ«ãŒãƒªãƒƒãƒã¨ã„ã†ã“ã¨ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ãŒã€ä»£è¡¨æ ¼ã§ã‚ã‚‹ <code>go vet</code> ã¨ä»˜éšã™ã‚‹ï¼ˆã¨ã„ã†è¡¨ç¾ãŒæ­£ã—ã„ã‹ä¸æ˜ã§ã™ãŒï¼‰ãƒ„ãƒ¼ãƒ«ç¾¤ã«ã¤ã„ã¦ã¾ã¨ã‚ã¾ã™ã€‚çŸ¥ã£ã¦ãŠãã¨ä¼¼ãŸã‚ˆã†ãªãƒ„ãƒ¼ãƒ«ã‚’ä½œã£ã¦ã—ã¾ã†ã“ã¨ã‚’é˜²ã’ã‚‹ã‹ãªã¨ã„ã†ç‚¹ã¨ã€é¡ä¼¼ã®ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã„ãŸã„å ´åˆã«å‚è€ƒã«ã—ãŸã„ã“ã¨ã€ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ãŒåˆãˆã°ã“ã‚Œã‚‰ã‚’åˆ©ç”¨ã—ã¦ãƒãƒƒãƒ”ãƒ¼ã«ãªã‚ŠãŸã„ã¨ã„ã†æ€ã„ãŒã‚ã‚Šã¾ã™ã€‚</p><h2 id="go-vetã¨ã¯"><a href="#go-vetã¨ã¯" class="headerlink" title="go vetã¨ã¯"></a>go vetã¨ã¯</h2><p><a href="https://pkg.go.dev/cmd/vet">go vet</a> ã¯Goè¨€èªã«æ¨™æº–ã§çµ„ã¿è¾¼ã¾ã‚ŒãŸé™çš„è§£æãƒ„ãƒ¼ãƒ«ã§ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã«ã‚ˆã£ã¦ã‚­ãƒ£ãƒƒãƒã•ã‚Œãªã„ã‚¨ãƒ©ãƒ¼ã‚„æ‡¸å¿µã‚’æ¤œå‡ºã—å ±å‘Šã—ã¦ãã‚Œã¾ã™ã€‚Linterï¼ˆãƒªãƒ³ã‚¿ãƒ¼ï¼‰ã®ä¸€ç¨®ã§ã™ã€‚</p><p>ãƒã‚§ãƒƒã‚¯å†…å®¹ã®ä¸€è¦§ã¯ <code>go tool vet help</code> ã‚³ãƒãƒ³ãƒ‰ã§ç¢ºèªã§ãã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯å…¨ã¦æœ‰åŠ¹ã«ãªã£ã¦ãŠã‚Šï¼ˆ<code>-asmdecl=false</code> ãªã©ã§å€‹åˆ¥ã«ç„¡åŠ¹åŒ–ã¯å¯èƒ½ï¼‰ã€Go1.21æ™‚ç‚¹ã§ã¯30ã®ãƒã‚§ãƒƒã‚¯ãŒå­˜åœ¨ã—ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ go version</span><br><span class="line">go version go1.21.1 linux/amd64</span><br><span class="line"></span><br><span class="line">$ go tool vet <span class="built_in">help</span></span><br><span class="line">(ä¸­ç•¥)</span><br><span class="line">Registered analyzers:</span><br><span class="line"></span><br><span class="line">    asmdecl      report mismatches between assembly files and Go declarations</span><br><span class="line">    assign       check <span class="keyword">for</span> useless assignments</span><br><span class="line">    atomic       check <span class="keyword">for</span> common mistakes using the <span class="built_in">sync</span>/atomic package</span><br><span class="line">    bools        check <span class="keyword">for</span> common mistakes involving boolean operators</span><br><span class="line">    buildtag     check //go:build and // +build directives</span><br><span class="line">    cgocall      detect some violations of the cgo pointer passing rules</span><br><span class="line">    composites   check <span class="keyword">for</span> unkeyed composite literals</span><br><span class="line">    copylocks    check <span class="keyword">for</span> locks erroneously passed by value</span><br><span class="line">    directive    check Go toolchain directives such as //go:debug</span><br><span class="line">    errorsas     report passing non-pointer or non-error values to errors.As</span><br><span class="line">    framepointer report assembly that clobbers the frame pointer before saving it</span><br><span class="line">    httpresponse check <span class="keyword">for</span> mistakes using HTTP responses</span><br><span class="line">    ifaceassert  detect impossible interface-to-interface <span class="built_in">type</span> assertions</span><br><span class="line">    loopclosure  check references to loop variables from within nested <span class="built_in">functions</span></span><br><span class="line">    lostcancel   check cancel func returned by context.WithCancel is called</span><br><span class="line">    nilfunc      check <span class="keyword">for</span> useless comparisons between <span class="built_in">functions</span> and nil</span><br><span class="line">    <span class="built_in">printf</span>       check consistency of Printf format strings and arguments</span><br><span class="line">    <span class="built_in">shift</span>        check <span class="keyword">for</span> shifts that equal or exceed the width of the <span class="built_in">integer</span></span><br><span class="line">    sigchanyzer  check <span class="keyword">for</span> unbuffered channel of os.Signal</span><br><span class="line">    slog         check <span class="keyword">for</span> invalid structured logging calls</span><br><span class="line">    stdmethods   check signature of methods of well-known interfaces</span><br><span class="line">    stringintconv check <span class="keyword">for</span> string(int) conversions</span><br><span class="line">    structtag    check that struct field tags conform to reflect.StructTag.Get</span><br><span class="line">    testinggoroutine report calls to (*testing.T).Fatal from goroutines started by a <span class="built_in">test</span>.</span><br><span class="line">    tests        check <span class="keyword">for</span> common mistaken usages of tests and examples</span><br><span class="line">    timeformat   check <span class="keyword">for</span> calls of (time.Time).Format or time.Parse with 2006-02-01</span><br><span class="line">    unmarshal    report passing non-pointer or non-interface values to unmarshal</span><br><span class="line">    unreachable  check <span class="keyword">for</span> unreachable code</span><br><span class="line">    unsafeptr    check <span class="keyword">for</span> invalid conversions of uintptr to unsafe.Pointer</span><br><span class="line">    unusedresult check <span class="keyword">for</span> unused results of calls to some <span class="built_in">functions</span></span><br><span class="line">(çœç•¥)</span><br></pre></td></tr></table></figure><p>vetã¯<a href="https://tip.golang.org/doc/go1.19#vet">Go1.19ã§errorsas</a>ãŒã€<a href="https://tip.golang.org/doc/go1.20#vet">Go1.20ã§loopclosureã¨timeformat</a>ãŒè¿½åŠ ã•ã‚Œã‚‹ãªã©ã€é«˜å“è³ªã«ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã•ã‚Œã¦ã„ã‚‹ãŸã‚å®‰å¿ƒã—ã¦åˆ©ç”¨ã—ã¦ã„ã‚‹ãƒãƒ¼ãƒ ãŒã»ã¨ã‚“ã©ã ã¨æ€ã„ã¾ã™ã€‚ã•ã™ãŒæ¨™æº–ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚</p><p>Go1.20ã®vetã«ã¤ã„ã¦ã¯<a href="https://tip.golang.org/doc/go1.20#vet">Go 1.20 vetã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ</a>ã®è¨˜äº‹ã‚‚ã‚ã‚Šã¾ã™ã€‚</p><p>ã¡ãªã¿ã«ã€<code>go test</code> ã‚’å®Ÿè¡Œã™ã‚‹ã¨<a href="https://budougumi0617.github.io/2018/08/19/go-testing2018/#go110%E3%81%8B%E3%82%89%E4%BA%8B%E5%89%8D%E3%81%ABgo-vet%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%81%8C%E5%AE%9F%E8%A1%8C%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B">Go 1.10ã‹ã‚‰å†…éƒ¨çš„ã«go vetã‚‚å‹•ä½œã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹</a> ãã†ã§ã™ã€‚æ³¨æ„ã¨ã—ã¦ã€go testã§go vetã®ã™ã¹ã¦ã®ãƒã‚§ãƒƒã‚¯ãŒå‹•ãã®ã§ã¯ãªãã€ä¿¡é ¼æ€§ã®é«˜ã„ä»¥ä¸‹9ã¤ã®ã®ã‚µãƒ–ã‚»ãƒƒãƒˆã«é™ã‚‹ç‚¹ã§ã™ã€‚<code>go test</code> ã§ <code>go vet</code> ã®30ç¨®é¡ã™ã¹ã¦ã‚’å‹•ã‹ã—ãŸã„å ´åˆã¯ <code>go test -vet=all</code> ã¨ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¤ã‘ã¾ã—ã‚‡ã†ã€‚</p><ol><li>atomic</li><li>bools</li><li>buildtags</li><li>directive</li><li>errorsas</li><li>ifaceassert</li><li>nilfunc</li><li>printf</li><li>stringintconv</li></ol><h2 id="go-vetã‚’æ§‹æˆã™ã‚‹è¦ç´ "><a href="#go-vetã‚’æ§‹æˆã™ã‚‹è¦ç´ " class="headerlink" title="go vetã‚’æ§‹æˆã™ã‚‹è¦ç´ "></a>go vetã‚’æ§‹æˆã™ã‚‹è¦ç´ </h2><p><code>go vet</code> ã®å®Ÿè£…ã®ã†ã¡ã€ <a href="https://github.com/golang/go/blob/master/src/cmd/vet/main.go#L48">mainãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚³ãƒ¼ãƒ‰</a>ã‹ã‚‰æŠœç²‹ã—ã¾ã™ã€‚ <code>unitchecker.Main()</code> ã®å¼•æ•°ãŒå…ˆç¨‹ã® <code>go tool vet help</code> çµæœã§å‡ºã¦ããŸãƒã‚§ãƒƒã‚¯ä¸€è¦§ã¨ä¸€è‡´ã™ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>cmd/vet/main.goã‹ã‚‰æŠœç²‹</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">objabi.AddVersionFlag()</span><br><span class="line"></span><br><span class="line">unitchecker.Main(</span><br><span class="line">asmdecl.Analyzer,</span><br><span class="line">assign.Analyzer,</span><br><span class="line">atomic.Analyzer,</span><br><span class="line">bools.Analyzer,</span><br><span class="line">buildtag.Analyzer,</span><br><span class="line">cgocall.Analyzer,</span><br><span class="line">composite.Analyzer,</span><br><span class="line">copylock.Analyzer,</span><br><span class="line">directive.Analyzer,</span><br><span class="line">errorsas.Analyzer,</span><br><span class="line">framepointer.Analyzer,</span><br><span class="line">httpresponse.Analyzer,</span><br><span class="line">ifaceassert.Analyzer,</span><br><span class="line">loopclosure.Analyzer,</span><br><span class="line">lostcancel.Analyzer,</span><br><span class="line">nilfunc.Analyzer,</span><br><span class="line">printf.Analyzer,</span><br><span class="line">shift.Analyzer,</span><br><span class="line">sigchanyzer.Analyzer,</span><br><span class="line">slog.Analyzer,</span><br><span class="line">stdmethods.Analyzer,</span><br><span class="line">stringintconv.Analyzer,</span><br><span class="line">structtag.Analyzer,</span><br><span class="line">tests.Analyzer,</span><br><span class="line">testinggoroutine.Analyzer,</span><br><span class="line">timeformat.Analyzer,</span><br><span class="line">unmarshal.Analyzer,</span><br><span class="line">unreachable.Analyzer,</span><br><span class="line">unsafeptr.Analyzer,</span><br><span class="line">unusedresult.Analyzer,</span><br><span class="line">)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã§ã¯ã€å¼•æ•°ã® <code>asmdecl.Analyzer</code> ï½ <code>unusedresult.Analyzer</code> ãŸã¡ãŒä½•ã‹ã¨ã„ã†ã¨ã€importå…ƒã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’è¦‹ã‚‹ã¨ã€ <a href="https://pkg.go.dev/golang.org/x/tools/go/analysis/passes">golang.org&#x2F;x&#x2F;tools&#x2F;go&#x2F;analysis&#x2F;passes</a> ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ <code>passes</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ <code>golang.org/x/tools/go/analysis</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®é™çš„è§£æã®APIã‚’åˆ©ç”¨ã—ã¦ä½œã‚‰ã‚Œã¦ã„ã‚‹é›†åˆã§ã€å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã”ã¨ã«é™çš„è§£æã®ãƒã‚§ãƒƒã‚¯ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã¨ã„ã†ã‚ã‘ã§ã™ã€‚ã‚ã‹ã‚Šã‚„ã™ã„æ§‹æˆã§ã™ã­ã€‚</p><h2 id="ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³ãƒ‰ãƒ©ã‚¤ãƒãƒ¼"><a href="#ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³ãƒ‰ãƒ©ã‚¤ãƒãƒ¼" class="headerlink" title="ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³ãƒ‰ãƒ©ã‚¤ãƒãƒ¼"></a>ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³ãƒ‰ãƒ©ã‚¤ãƒãƒ¼</h2><p>ã•ã¦ã€<a href="https://pkg.go.dev/golang.org/x/tools/go/analysis/passes">golang.org&#x2F;x&#x2F;tools&#x2F;go&#x2F;analysis&#x2F;passes</a> ã®GoDocã‚’è¦‹ã‚‹ã¨ã€ foo&#x2F;cmd&#x2F;foo ã¨ã„ã£ãŸå½¢å¼ã§å­˜åœ¨ã™ã‚‹ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ï¼ˆã‚³ãƒãƒ³ãƒ‰ï¼‰ãŒå­˜åœ¨ã—ã¾ã™ã€‚2023å¹´9æœˆ5æ—¥å…¬é–‹ Version: v0.13.0ã ã¨ã€ä»¥ä¸‹ã®5ç¨®é¡ã§ã™ã€‚æ—¥æœ¬èªè¨³ã¯ChatGPTã•ã‚“ã«ãŠé¡˜ã„ã—ã¾ã—ãŸã€‚ãªãœã‹ifaceassertã€lostcancelã€stringintconvã€unmarshalã€unusedresultã¯cmdãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã‚ã‚‹ã‚‚ã®ã®ã€go vetã«å«ã¾ã‚Œã¦ã„ã‚‹ãŸã‚é™¤å¤–ã—ã¦ã„ã¾ã™ã€‚</p><p>ã“ã‚Œã‚‰ã¯å…ˆç¨‹ç´¹ä»‹ã—ãŸ<code>go tool vet help</code> ã«ã‚‚ <code>cmd/vet/main.go</code> ã«ã‚‚å«ã¾ã‚Œãªã„ãŸã‚ã€<code>golang.org/x/tools/go/analysis/passes</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«å­˜åœ¨ã™ã‚Œã© <code>go vet</code> ã§è¡Œã‚ã‚Œãªã„ãƒã‚§ãƒƒã‚¯ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ã“ã®è¨˜äº‹ã®è¶£æ—¨ã¯ã“ã„ã¤ã‚‰ã£ã¦ã©ã†ã„ã†å­˜åœ¨ã‹æŠ‘ãˆã¦ãŠã“ã†ã¨ã„ã†ã‚‚ã®ã§ã™ã€‚ã“ã‚Œã‚‰ã®ä½¿ã„æ–¹ã¯å¾Œè¿°ã—ã¾ã™ã€‚</p><div class="scroll"><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><a href="https://pkg.go.dev/golang.org/x/tools@v0.13.0/go/analysis/passes/defers">defers</a></td><td>package defersã¯ã€deferæ–‡ã®ä¸€èˆ¬çš„ãªé–“é•ã„ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹Analyzerã‚’å®šç¾©ã—ã¾ã™ã€‚</td></tr><tr><td><a href="https://pkg.go.dev/golang.org/x/tools@v0.13.0/go/analysis/passes/fieldalignment">fieldalignment</a></td><td>package fieldalignmentã¯ã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒã‚½ãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹å ´åˆã«ã€ã‚ˆã‚Šå°‘ãªã„ãƒ¡ãƒ¢ãƒªã‚’ä½¿ç”¨ã™ã‚‹structã‚’æ¤œå‡ºã™ã‚‹Analyzerã‚’å®šç¾©ã—ã¾ã™ã€‚</td></tr><tr><td><a href="https://pkg.go.dev/golang.org/x/tools@v0.13.0/go/analysis/passes/fieldalignment">findcall</a></td><td>package findcallã¯ã€Analysis APIã®å˜ç´”ãªä¾‹ã¨ãƒ†ã‚¹ãƒˆã¨ã—ã¦æ©Ÿèƒ½ã™ã‚‹Analyzerã‚’å®šç¾©ã—ã¾ã™ã€‚</td></tr><tr><td><a href="https://pkg.go.dev/golang.org/x/tools@v0.13.0/go/analysis/passes/nilness">nilness</a></td><td>package nilnessã¯ã€SSAé–¢æ•°ã®åˆ¶å¾¡ãƒ•ãƒ­ãƒ¼ã‚°ãƒ©ãƒ•ã‚’æ¤œæŸ»ã—ã€nilãƒã‚¤ãƒ³ã‚¿ã®å‚ç…§ã‚„é€€åŒ–ã—ãŸnilãƒã‚¤ãƒ³ã‚¿ã®æ¯”è¼ƒãªã©ã®ã‚¨ãƒ©ãƒ¼ã‚’å ±å‘Šã—ã¾ã™ã€‚</td></tr><tr><td><a href="https://pkg.go.dev/golang.org/x/tools@v0.13.0/go/analysis/passes/shadow">shadow</a></td><td>package shadowã¯ã€ã‚·ãƒ£ãƒ‰ã‚¦ã•ã‚ŒãŸå¤‰æ•°ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹Analyzerã‚’å®šç¾©ã—ã¾ã™ã€‚</td></tr></tbody></table></div><p>ä½¿ã„æ–¹ã¯5ç¨®é¡ã™ã¹ã¦åŒæ§˜ã«ä»¥ä¸‹ã®æµã‚Œã§åˆ©ç”¨ã§ãã¾ã™ã€‚</p><ol><li>å„ xxx&#x2F;cmd&#x2F;xxx ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹</li><li><code>go vet</code> ã® <code>-vettool</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‚³ãƒãƒ³ãƒ‰ã®ãƒ‘ã‚¹ã‚’æ¸¡ã™<ul><li><code>-vettool</code> ã§æ¸¡ã™å€¤ã¯ã€çµ¶å¯¾ãƒ‘ã‚¹ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§æ³¨æ„ãã ã•ã„ï¼ˆå¾Œè¿°ã§ <code>command -v</code> ã‚„ã‚‰ã‚’ä½¿ã£ã¦ã„ã‚‹ç†ç”±ãŒãã‚Œã§ã™ï¼‰</li></ul></li></ol><p>ã¾ãšã¯5ã¤ã®ãƒ„ãƒ¼ãƒ«ã‚’ã™ã¹ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">go install golang.org/x/tools/go/analysis/passes/defers/cmd/defers@latest</span><br><span class="line">go install golang.org/x/tools/go/analysis/passes/fieldalignment/cmd/fieldalignment@latest</span><br><span class="line">go install golang.org/x/tools/go/analysis/passes/findcall/cmd/findcall@latest</span><br><span class="line">go install golang.org/x/tools/go/analysis/passes/nilness/cmd/nilness@latest</span><br><span class="line">go install golang.org/x/tools/go/analysis/passes/shadow/cmd/shadow@latest</span><br></pre></td></tr></table></figure><h2 id="defers"><a href="#defers" class="headerlink" title="defers"></a>defers</h2><p>defersã¯deferæ§‹æ–‡ã§ã®ã‚ˆãã‚ã‚‹é–“é•ã„ã‚’æ¤œçŸ¥ã—ã¦ãã‚Œã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚</p><p>æ¤œçŸ¥ã™ã‚‹ãŸã‚ã®ã‚³ãƒ¼ãƒ‰ã‚’æº–å‚™ã—ã¾ã™ã€‚ã“ã®ã‚³ãƒ¼ãƒ‰ã¯defersã®GoDocã«æ²è¼‰ã•ã‚Œã¦ã„ãŸå†…å®¹ãªã®ã§æ–°è¦æ€§ã¯ç„¡ã„ã§ã™ã€‚</p><figure class="highlight go"><figcaption><span>defersã§æ¤œçŸ¥ã™ã‚‹ã‚³ãƒ¼ãƒ‰</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> example</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;time&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Defers</span><span class="params">()</span></span> &#123;</span><br><span class="line">start := time.Now()</span><br><span class="line"><span class="keyword">defer</span> recordLatency(time.Since(start)) <span class="comment">// error: call to time.Since is not deferred</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// any logic</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">recordLatency</span><span class="params">(d time.Duration)</span></span> &#123;</span><br><span class="line"><span class="comment">// any logging</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight sh"><figcaption><span>defersã®å®Ÿè¡Œ</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment"># ï¼ˆWindowsã§ã¯ $()ã®éƒ¨åˆ†ã‚’ %USERPROFILE%\go\bin\defer ãªã©ã«æ›¸ãæ›ãˆã¦ãã ã•ã„ï¼‰</span></span><br><span class="line">$ go vet -vettool=$(<span class="built_in">command</span> -v defers) ./...</span><br><span class="line"><span class="comment"># example</span></span><br><span class="line">.\vetdefers.go:7:22: call to time.Since is not deferred</span><br></pre></td></tr></table></figure><p><code>-vettool</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§<code>defers</code> ã‚’æ¸¡ã™ã“ã¨ã§å®Ÿè¡Œã§ãã¾ã—ãŸã€‚æœ€å¾Œã®è¡Œã«å‡ºã¦ã„ã‚‹ã®ãŒæ¤œçŸ¥ã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã™ã€‚</p><p>æ¤œçŸ¥ã—ãŸå†…å®¹ã¨ã—ã¦ã¯ vetders.go ã®L7è¡Œç›®ã® deferã§å‘¼ã°ã‚Œã‚‹ <code>recordLatency()</code> ã®å¼•æ•°ã€ <code>time.Since(start)</code> ãŒdeferãŒå‘¼ã°ã‚Œã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã¯ãªãã€å³æ™‚è©•ä¾¡ã•ã‚Œã¡ã‚ƒã£ã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚</p><p>ãŠãã‚‰ãä»¥ä¸‹ãŒæ­£ã—ã„ã®ã§ã¯ï¼Ÿã¨ã„ã†æ¤œçŸ¥ã§ã™ã€‚ã†ã£ã‹ã‚Šã‚„ã£ã¡ã‚ƒã„ãã†ã§ã™ã­ã€‚</p><figure class="highlight go"><figcaption><span>ãŠãã‚‰ãæ­£ã—ã„ã¨æ€ã‚ã‚Œã‚‹å®Ÿè£…</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123; recordLatency(time.Since(start)) &#125;()</span><br></pre></td></tr></table></figure><p>ã“ã‚ŒãŒæ¨™æº–ã§å…¥ã£ã¦ã„ãªã„ç†ç”±ã§ã™ãŒã€ãƒãƒƒã‚­ãƒªã¨ã—ãŸIssueã‚„ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ã‚„ã‚Šå–ã‚Šã‚’è¦‹ã¤ã‘ã‚‰ã‚Œãšã§ã—ãŸã€‚æ¨æ¸¬ã§ã™ãŒã€æ¤œçŸ¥ã™ã‚‹ã®ãŒ time.Since ã®ã¿ãªã®ã§ãƒ”ãƒ³ãƒã‚¤ãƒ³ãƒˆã™ãã‚‹å†…å®¹ã§ã‚ã‚‹ã“ã¨ã€å½±éŸ¿åº¦ã‚‚å‡¦ç†æ™‚é–“è¨ˆæ¸¬ã§ç”¨ã„ã‚‰ã‚Œã‚‹ã‚‚ã®ãŒå¤§åŠã ã¨æ€ã‚ã‚Œã‚‹ã®ã§ã€ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ã§ç„¡ã„ã¨ã¿ãªã•ã‚ŒãŸã®ã‹ãªã¨æ€ã„ã¾ã™ã€‚</p><h2 id="fieldalignment"><a href="#fieldalignment" class="headerlink" title="fieldalignment"></a>fieldalignment</h2><p>fieldalignmentã¯ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ä¸¦ã³æ›¿ãˆãŸå ´åˆã«ãƒ¡ãƒ¢ãƒªæ¶ˆè²»é‡ãŒæŠ‘ãˆã‚‰ã‚Œã‚‹structã‚’æ¤œå‡ºã—ã¦ãã‚Œã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚</p><p>ä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ãŒã‚ã£ãŸã¨ã—ã¾ã™ï¼ˆâ€»GoDocã‹ã‚‰å¼•ã£å¼µã£ã¦ãã¦ã„ã‚‹ã®ã§ã‚³ãƒ¼ãƒ‰ä¾‹ã«ã‚‚æ–°è¦æ€§ã¯ç„¡ã„ã§ã™ï¼‰ã€‚</p><figure class="highlight go"><figcaption><span>fieldalignment.go</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> example</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Good <span class="keyword">struct</span> &#123;</span><br><span class="line">y <span class="type">int32</span> <span class="comment">//4byte</span></span><br><span class="line">x <span class="type">byte</span>  <span class="comment">// 1byte</span></span><br><span class="line">z <span class="type">byte</span>  <span class="comment">// 1byte</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Bad <span class="keyword">struct</span> &#123;</span><br><span class="line">x <span class="type">byte</span>  <span class="comment">// 1byte</span></span><br><span class="line">y <span class="type">int32</span> <span class="comment">// 4byte</span></span><br><span class="line">z <span class="type">byte</span>  <span class="comment">// 1byte</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">go vet -vettool=$(<span class="built_in">command</span> -v fieldalignment) ./...</span><br><span class="line"><span class="comment"># example</span></span><br><span class="line">.\fieldalignment.go:9:10: struct of size 12 could be 8</span><br></pre></td></tr></table></figure><p>å®Ÿè¡Œã™ã‚‹ã¨ã€9è¡Œç›®ã® Bad ã¨ã„ã† structãŒæ¤œçŸ¥ã•ã‚Œã¾ã™ã€‚byteå‹ã¯1byteã§ã™ã€‚ãƒ¡ãƒ¢ãƒªã¯4byteã”ã¨ã«ç¢ºä¿ã•ã‚Œï¼ˆ64bit OSã ã¨æœ€å¤§8byteã¾ã§ã¯åŒã˜é ˜åŸŸã«é€£ç¶šã—ã¦æ ¼ç´ã§ãã‚‹ãŸã‚ï¼‰ã€x,zã‚’é€£ç¶šã•ã›ã‚‹ã¨4byteã§æ ¼ç´ã§ãã¾ã™ã€‚int32(4byte) + byteå‹ã®2ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰(4byte) &#x3D; 8byteã«ã§ãã‚‹ã‚ã‘ã§ã™ã€‚ã‚‚ã—ã€int32ã‚’é–“ã«å…¥ã‚Œã‚‹ã¨(Bad structã®å ´åˆï¼‰ã€4byte(xåˆ†) + 4byteï¼ˆyåˆ†ï¼‰ + 4byteï¼ˆzåˆ†ï¼‰ã§12byteã¨ãªã£ã¦ã—ã¾ã„ã€ç„¡é§„ãŒç”Ÿã˜ã¦ã„ã‚‹ã‚ˆã¨ã„ã†ã‚ã‘ã§ã™ã€‚</p><p>ä¸€å¿œã€Playgroundã‚‚ç”¨æ„ã—ã¾ã—ãŸã€‚æ°—ã«ãªã‚‹æ–¹ã¯ç¢ºèªãã ã•ã„ã€‚</p><p><a href="https://go.dev/play/p/BMtHxH9B_cF">https://go.dev/play/p/BMtHxH9B_cF</a></p><p>ã“ã‚Œã‚‚ <code>go vet</code> æ¨™æº–ã«å«ã‚ãªè­°è«–ã‚’è¦‹ã¤ã‘ã‚‰ã‚Œãªã‹ã£ãŸã§ã™ãŒã€æ¨æ¸¬ã™ã‚‹ã¨Structã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ä¸¦ã³æ›¿ãˆã‚‹ã“ã¨ã§å¯èª­æ€§ãªã©ã‚’è½ã¨ã—ãƒ¡ãƒ¢ãƒªçœåŠ›åŒ–ã‚’è¿½æ±‚ã™ã‚‹ã“ã¨ã§åˆ©ç‚¹ãŒå¤šã„ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ãŒãƒ¡ã‚¸ãƒ£ãƒ¼ã§ã¯ãªã„ã“ã¨ï¼ˆçµ„ã¿è¾¼ã¿ãªã©å³ã—ã„ãƒãƒƒãƒã—ãŸã‚±ãƒ¼ã‚¹ã¯å½“ç„¶ã‚ã‚‹ã¨æ€ã„ã¾ã™ï¼‰ãŒã‚ã‚‹ã®ã‹ãªã¨æ€ã„ã¾ã™ã€‚æœ‰ç”¨ã§ã™ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æœ‰åŠ¹ã«ã™ã‚‹ã‚‚ã®ã§ã¯ãªã„ã‚ˆã­ã¨ã„ã†ã“ã¨ã§ã™ã€‚</p><h2 id="findcall"><a href="#findcall" class="headerlink" title="findcall"></a>findcall</h2><p>findcallã¯ç‰¹å®šã®é–¢æ•°ãƒ»ãƒ¡ã‚½ãƒƒãƒ‰ãŒå‘¼ã°ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ <code>-name</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§å¯¾è±¡ã®é–¢æ•°ãƒ»ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æŒ‡å®šã—ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> example</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="built_in">println</span>(<span class="string">&quot;hi&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;hi&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">println</span><span class="params">(s <span class="type">string</span>)</span></span> &#123;&#125;</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">go vet -vettool=$(<span class="built_in">command</span> -v findcall) -name println ./...</span><br><span class="line"><span class="comment"># example</span></span><br><span class="line">.\findcall.go:4:9: call of println(...)</span><br></pre></td></tr></table></figure><p>ã“ã‚Œã«ã¤ã„ã¦ã¯ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ãŒãƒ”ãƒ³ã¨æ¥ãšã€CIã§çµ„ã¿è¾¼ã‚€ã¨ã„ã†ã‚ˆã‚Šã¯é–‹ç™ºä¸­ã«å€‹åˆ¥ã§æ°—ã«ãªã£ãŸé–¢æ•°ãƒ»ãƒ¡ã‚½ãƒƒãƒ‰ã®åˆ©ç”¨å¯å¦ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã¨ã„ã£ãŸä½¿ã‚ã‚Œæ–¹ã§ã—ã‚‡ã†ã‹ã€‚æ¤œæŸ»å¯¾è±¡ã®åç§°ã‚’å¼•æ•°ã§æ¸¡ã™å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€ç¾åœ¨ã®å½¢å¼ã§ã¯ <code>go vet</code> æ¨™æº–ã§çµ„ã¿è¾¼ã¾ã‚Œã‚‹ã“ã¨ã¯ãªã„èªè­˜ã§ã™ã€‚</p><p>é™çš„è§£æã®é¡Œæã¨ã—ã¦tennntenã•ã‚“ãŒå–ã‚Šä¸Šã’ã¦ã„ã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒã‚ã‚‹ã®ã§ã€ã“ã‚Œã‚’åœŸå°ã¨ã—ã¦æœ‰ç”¨ãªãƒ„ãƒ¼ãƒ«ãŒä½œã‚‰ã‚Œã¦ãŠã‚Šã€ãã®è¦³ç‚¹ã§ã¯é‡è¦ãªä½ç½®ã¥ã‘ã«ã‚ã‚‹ãƒ„ãƒ¼ãƒ«ã«è¦‹ãˆã¾ã™ã€‚</p><p><a href="https://engineering.mercari.com/blog/entry/2018-12-16-150000/">https://engineering.mercari.com/blog/entry/2018-12-16-150000/</a></p><h2 id="nilness"><a href="#nilness" class="headerlink" title="nilness"></a>nilness</h2><p>nilness ã¯ nil ãƒã‚¤ãƒ³ã‚¿ãƒ¼ã®é€†å‚ç…§ãªã©ã‚’æ¤œçŸ¥ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ä¾‹ãˆã°ifåˆ†ã§nilæ¤œæŸ»ã‚’ã—ã¦ã„ã‚‹ã«ã‚‚ã‹ã‹ã‚ã‚‰ãšã€ãã®å¤‰æ•°ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨panicãŒç”Ÿã˜ã¾ã™ã€‚ãã†ã„ã£ãŸå®Ÿè£…ã‚’æ¤œçŸ¥ã—ã¦ãã‚Œã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> example</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> X <span class="keyword">struct</span>&#123; f, g <span class="type">int</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fnilness</span><span class="params">(x, y *X)</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> x == <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="built_in">print</span>(x.f) <span class="comment">// L7 â˜…æ¤œçŸ¥</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="built_in">print</span>(x.f)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> x == <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">if</span> <span class="literal">nil</span> != y &#123;</span><br><span class="line"><span class="built_in">print</span>(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">panic</span>(<span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line">x.f = <span class="number">1</span> <span class="comment">// L17 â˜…æ¤œçŸ¥</span></span><br><span class="line">y.f = <span class="number">1</span> <span class="comment">// L18 â˜…æ¤œçŸ¥</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">&gt;go vet -vettool=$(<span class="built_in">command</span> -v nilness) ./...</span><br><span class="line"><span class="comment"># example</span></span><br><span class="line">.\nilness.go:7:11: nil dereference <span class="keyword">in</span> field selection</span><br><span class="line">.\nilness.go:17:5: nil dereference <span class="keyword">in</span> field selection</span><br><span class="line">.\nilness.go:18:5: nil dereference <span class="keyword">in</span> field selection</span><br></pre></td></tr></table></figure><p>ä¾¿åˆ©ãã†ãªæ°—ã‚‚ã—ã¾ã™ã­ã€‚ãªãœã“ã‚ŒãŒ <code>go vet</code> æ¨™æº–ã§ãªã„ã®ã‹ã¯è‰¯ãåˆ†ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸãŒã€ãƒ—ãƒ­ãƒãƒ¼ã‚µãƒ«ã«ç†ç”±ãŒæ›¸ã„ã¦ã‚ã‚Šã¾ã—ãŸã€‚</p><ul><li><a href="https://github.com/golang/go/issues/59714">proposal: cmd&#x2F;vet: enable nilness checker by default #59714</a></li></ul><p>ãã‚Œã«ã‚ˆã‚‹ã¨ã€<code>go vet</code> ã¯ <code>go test</code> ã«æœ€çµ‚çš„ã«ã¯ã™ã¹ã¦å«ã¾ã‚Œã‚‹ã“ã¨ã‚’ç›®æŒ‡ã—ã¦ãŠã‚Šã€ <code>nilness</code> ã¯ãã®ãŸã‚ã®ï¼ˆé€Ÿåº¦ï¼‰åŸºæº–ã‚’ã¾ã æº€ãŸã—ã¦ã„ãªã„ã¨ã„ã£ãŸã“ã¨ãŒå£ã®ã‚ˆã†ã§ã™ã€‚</p><h2 id="shadow"><a href="#shadow" class="headerlink" title="shadow"></a>shadow</h2><p>shadowã¯ã‚·ãƒ£ãƒ‰ã‚¦ã‚¤ãƒ³ã‚°ã‚’æ¤œçŸ¥ã—ã¦ãã‚Œã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ã‚·ãƒ£ãƒ‰ã‚¦ã‚¤ãƒ³ã‚°ã«ã¤ã„ã¦ã¯mattnã•ã‚“ã®<a href="https://mattn.kaoriya.net/software/lang/go/20200227102218.htm">Go è¨€èªã§å¤‰æ•°ã®ã‚·ãƒ£ãƒ‰ã‚¦ã‚¤ãƒ³ã‚°ã‚’é¿ã‘ãŸã„ãªã‚‰ shadow ã‚’ä½¿ãŠã†ã€‚</a>è¨˜äº‹ã‚’å‚è€ƒãã ã•ã„ï¼ˆã¾ã•ã«shadowã®ç´¹ä»‹ã‚‚ã—ã¦ã„ã¾ã™ã­ï¼‰ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> example</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;os&quot;</span></span><br><span class="line"><span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BadRead</span><span class="params">(f *os.File, buf []<span class="type">byte</span>)</span></span> <span class="type">error</span> &#123;</span><br><span class="line"><span class="keyword">var</span> err <span class="type">error</span> <span class="comment">// L10L</span></span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">_, err := f.Read(buf) <span class="comment">// L12</span></span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">break</span> <span class="comment">// L14</span></span><br><span class="line">&#125;</span><br><span class="line">foo(buf)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">foo</span><span class="params">(buf []<span class="type">byte</span>)</span></span> &#123;&#125;</span><br></pre></td></tr></table></figure><p>ã“ã‚Œã«å¯¾ã—ã¦shadowã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">&gt;go vet -vettool=$(<span class="built_in">command</span> -v shadow) ./...</span><br><span class="line"><span class="comment"># example</span></span><br><span class="line">.\shadow.go:12:6: declaration of <span class="string">&quot;err&quot;</span> shadows declaration at line 10</span><br></pre></td></tr></table></figure><p>12è¡Œç›®ã® <code>, err := f.Read(buf)</code> ã§ã€ <code>:=</code> ã§ä»£å…¥ã—ã¦ã„ã‚‹ãŸã‚ã€L10è¡Œç›®ã§å®£è¨€ã—ãŸ <code>err</code> ã¨ã¯åŒä¸€åç§°ã§ç•°ãªã‚‹å¤‰æ•°ãŒå®£è¨€ã•ã‚Œã¦ã„ã¾ã™ã€‚ãã®ãŸã‚L14ã§breakã—ã¦ã‚‚æˆ»ã‚Šå€¤ã®errã¯nilã®ã¾ã¾ã§ã™ã€‚ã„ã„æ„Ÿã˜ã«æ¤œçŸ¥ã—ã¦ãã‚Œã¦ã„ã¾ã™ã­ã€‚</p><p>ã‚·ãƒ£ãƒ‰ã‚¦ã‚¤ãƒ³ã‚°è‡ªä½“ã¯Goã®è¨€èªæ©Ÿèƒ½ã¨ã—ã¦æœ¬æ¥å•é¡Œãªã„ã¯ãšãªã®ã§go vetæ¨™æº–ã«ã¯çµ„ã¿è¾¼ã¾ã‚Œã¦ã„ãªã„ã®ã ã¨æ€ã„ã¾ã™ã€‚</p><h2 id="vettool-ã«è¤‡æ•°ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æŒ‡å®šã§ããªã„"><a href="#vettool-ã«è¤‡æ•°ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æŒ‡å®šã§ããªã„" class="headerlink" title="-vettool ã«è¤‡æ•°ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æŒ‡å®šã§ããªã„"></a>-vettool ã«è¤‡æ•°ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æŒ‡å®šã§ããªã„</h2><p>ãªã‚“ã¨ãªãã€ä»¥ä¸‹ã®ã‚ˆã†ã«ä¸€æ‹¬ã§ãƒã‚§ãƒƒã‚¯ãŒã§ãã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒã‚ã‚Šã¾ã—ãŸãŒã€ä»¥ä¸‹ã®ã‚ˆã†ãªæŒ‡å®šã¯ã§ãã¾ã›ã‚“ã€‚</p><figure class="highlight sh"><figcaption><span>NGã‚±ãƒ¼ã‚¹ï¼ˆè¤‡æ•°ã®-vettoolã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯æ¸¡ã›ãªã„ï¼‰</span></figcaption><table><tr><td class="code"><pre><span class="line">go vet -vettool=$(<span class="built_in">command</span> -v defers) \</span><br><span class="line">  -vettool=$(<span class="built_in">command</span> -v fieldalignment)  \</span><br><span class="line">  -vettool=$(<span class="built_in">command</span> -v nilness) \</span><br><span class="line">  -vettool=$(<span class="built_in">command</span> -v shadow) ./...</span><br></pre></td></tr></table></figure><p>ãã®ãŸã‚ã€go vetã‚’è¤‡æ•°å›èµ·å‹•ã™ã‚‹ã“ã¨ã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚<code>go vet</code> æ¨™æº–ã¨ã€ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³ãƒ‰ãƒ©ã‚¤ãƒãƒ¼4ç¨®é¡ã‚’å®Ÿè¡Œã™ã‚‹å ´åˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚³ãƒãƒ³ãƒ‰ã‚’ä¸¦ã¹ã‚‹ã“ã¨ã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><figure class="highlight sh"><figcaption><span>OKã‚±ãƒ¼ã‚¹</span></figcaption><table><tr><td class="code"><pre><span class="line">go vet ./...</span><br><span class="line">go vet -vettool=$(<span class="built_in">command</span> -v defers) ./...</span><br><span class="line">go vet -vettool=$(<span class="built_in">command</span> -v fieldalignment) ./...</span><br><span class="line">go vet -vettool=$(<span class="built_in">command</span> -v nilness) ./...</span><br><span class="line">go vet -vettool=$(<span class="built_in">command</span> -v shadow) ./...</span><br></pre></td></tr></table></figure><p>ã¾ãŸã€ <code>-vettool</code> ã‚’æŒ‡å®šã™ã‚‹ã¨ã€go vetçµ„ã¿è¾¼ã¿ï¼‹vettoolã®ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã†ã¨ç§ã¯å‹˜é•ã„ã—ã¦ã—ã¾ã„ã¾ã—ãŸãŒã€ã‚ãã¾ã§<code>vettool</code>ã®ãƒã‚§ãƒƒã‚¯ã®ã¿è¡Œã‚ã‚Œã‚‹ã“ã¨ã«æ³¨æ„ãã ã•ã„ã€‚ </p><h2 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h2><p>go vet ã«è¿‘ã„é™çš„è§£æãƒ„ãƒ¼ãƒ«ã‚’5ç¨®é¡ç´¹ä»‹ã—ã¾ã—ãŸã€‚ãã‚Œã‚‰ãŒè§£æ±ºã™ã‚‹èª²é¡ŒãŒãƒãƒ¼ãƒ ã«ãƒãƒƒãƒã™ã‚‹å ´åˆã¯ã€æœ‰åŠ¹ã«ã—ã¦å–ã‚Šå…¥ã‚Œã¦ã‚‹ã¨è‰¯ã„ã‹ãªã¨æ€ã„ã¾ã—ãŸã€‚ã¾ãŸã€é¡ä¼¼ã®èª²é¡Œã®å ´åˆã¯ãã‚Œã‚‰ã®ã‚³ãƒ¼ãƒ‰ã‚’å‚è€ƒã«ã€è‡ªåˆ†ãŸã¡ã§è§£æãƒ„ãƒ¼ãƒ«ã‚’ä½œã‚‹ã¨ã„ã£ãŸã“ã¨ã«ã‚‚å½¹ç«‹ã¤ã¨æ€ã„ã¾ã™ã€‚</p><p>ã‚¢ã‚¤ã‚­ãƒ£ãƒƒãƒã¯<a href="https://unsplash.com/ja/%E5%86%99%E7%9C%9F/g3PsF4_y7ZY?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Unsplash</a>ã®<a href="https://unsplash.com/ja/@etactics?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Etactics Inc</a>ãŒæ’®å½±ã—ãŸå†™çœŸã§ã™ã€‚ </p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Programming/">Programming</category>
      
      
      <category domain="https://future-architect.github.io/tags/Go/">Go</category>
      
      <category domain="https://future-architect.github.io/tags/Linter/">Linter</category>
      
      <category domain="https://future-architect.github.io/tags/%E9%9D%99%E7%9A%84%E8%A7%A3%E6%9E%90/">é™çš„è§£æ</category>
      
      
      <comments>https://future-architect.github.io/articles/20231005a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã«è€ƒæ…®ã—ãŸå‡ºåŠ›å€¤ã®HTMLãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—</title>
      <link>https://future-architect.github.io/articles/20231003a/</link>
      <guid>https://future-architect.github.io/articles/20231003a/</guid>
      <pubDate>Mon, 02 Oct 2023 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;p&gt;&lt;strong&gt;10&amp;#x2F;4è¿½è¨˜:&lt;/strong&gt; æœ¬è¨˜äº‹ã®ä¸­ã§ä¸å…·åˆã®ã‚ˆã†ãªå‹•ä½œãŒã‚ã‚‹ã¨æ›¸ã„ã¦ã„ãŸã®ã§ã™ãŒã€&lt;a</description>
          
        
      
      
      
      <content:encoded><![CDATA[<p><strong>10&#x2F;4è¿½è¨˜:</strong> æœ¬è¨˜äº‹ã®ä¸­ã§ä¸å…·åˆã®ã‚ˆã†ãªå‹•ä½œãŒã‚ã‚‹ã¨æ›¸ã„ã¦ã„ãŸã®ã§ã™ãŒã€<a href="https://github.com/microsoft/playwright/issues/27403">issueã§å ±å‘Šã—ãŸã¨ã“ã‚</a>ã€ã™ãã«ä¿®æ­£ã•ã‚Œã¾ã—ãŸã€‚æ¬¡ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³1.39ã§ä¿®æ­£ç‰ˆãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã‚‹ã‚ˆã†ã§ã™ã€‚</p><p>ä»¥å‰æ›¸ã„ãŸCypressã®è¨˜äº‹ã§ã€ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£æƒ…å ±ã‚’ä½¿ã†ã“ã¨ã§å£Šã‚Œã«ãããªã‚‹ã‚ˆã€ã¨ï¼ˆä»Šã§ã¯å½“ãŸã‚Šå‰ã®ã‚ˆã†ã«ã¿ã‚“ãªè¨€ã£ã¦ã„ã¾ã™ãŒï¼‰ã„ã†è¨˜äº‹ã‚’æ›¸ãã¾ã—ãŸã€‚</p><ul><li><a href="/articles/20210226/">ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£æƒ…å ±ã‚’ä½¿ã£ãŸå£Šã‚Œã«ãã„E2Eãƒ†ã‚¹ãƒˆ</a></li></ul><p>ã“ã®æ™‚ã¯å‡ºåŠ›ã«ä½¿ã†ã¹ããƒ­ãƒ¼ãƒ«ãŒä½•ã‹ï¼Ÿã¨ã„ã†ã®ãŒã‚ã‹ã£ã¦ã„ã¾ã›ã‚“ã§ã—ãŸã€‚</p><blockquote><p>ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã¨ã£ã¦ããŸå‹•çš„ãªå€¤ã‚’è¡¨ç¤ºã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆã£ã¦ã€DOMä¸Šã¯å˜ãªã‚‹ãƒ†ã‚­ã‚¹ãƒˆãªã®ã§ãƒ­ãƒ¼ãƒ«ã‚’æŒã£ã¦ã„ãªã„ã®ã§ã™ã‚ˆã­ã€‚ãƒ†ã‚¹ãƒˆä¸Šã¯ã“ã“ã«ãƒ­ãƒ¼ãƒ«ãŒã‚ã£ã¦è¦ç´ å–å¾—ã§ãã‚‹ã¨ã¨ã¦ã‚‚åŠ©ã‹ã‚‹ã€‚</p><p>æ¬¡ã®ã©ã¡ã‚‰ã‹ãªã€ã¨æ€ã£ã¦ã„ã‚‹ã®ã§ã™ãŒã€ã©ã¡ã‚‰ã®æ–¹ãŒã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¨ã£ã¦è‡ªç„¶ãªãƒ­ãƒ¼ãƒ«æŒ‡å®šã®ã‹ã¯ã¡ã‚‡ã£ã¨ã‚ã‹ã£ã¦ã¾ã›ã‚“ã€‚ã¨ã‚Šã‚ãˆãšå‰è€…ã«ã—ã¦ã„ã¾ã™ã€‚</p></blockquote><p>å…ˆæ—¥ã€ã€Œå®Ÿéš›ä½¿ãˆã‚‹ãƒ­ãƒ¼ãƒ«ã¨ã‹ã€ãã‚Œã«é©ã—ãŸã‚¿ã‚°ã£ã¦å…¨éƒ¨ã§ã©ã®ãã‚‰ã„ã‚ã‚‹ã‚“ã ã‚ã†ã‹ï¼Ÿã€ã¨ã„ã†ã®ãŒæ°—ã«ãªã£ã¦Playwrightã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’çœºã‚ã¦ã„ãŸã¨ã“ã‚ã€ãã‚ŒãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãŒ<a href="https://github.com/microsoft/playwright/blob/ac9d1ec421b572d6ac23f1dd169f292a1108e102/packages/playwright-core/src/server/injected/roleUtils.ts">playwright-core&#x2F;src&#x2F;server&#x2F;injected&#x2F;roleUtils.ts</a>ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã€ãã®ä¸­ã§ <code>&lt;output&gt;</code> ã‚¿ã‚°ãŒã‚ã‚‹ã¨ã„ã†ã®ã‚’çŸ¥ã‚Šã¾ã—ãŸã€‚<code>&lt;output&gt;</code>ã‚¿ã‚°ã«ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§<code>status</code>ã¨ã„ã†aria-roleãŒã¤ã„ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚</p><p>å¤šãã®ãƒ–ãƒ©ã‚¦ã‚¶ãŒ <code>aria-live</code> ã®é ˜åŸŸã¨ã—ã¦ã“ã®ã‚¿ã‚°ã‚’æ‰±ã£ã¦ãã‚Œã‚‹ãŸã‚ã€ä½•ã‹ã—ã‚‰ã®ãƒ­ã‚¸ãƒƒã‚¯ãŒèµ°ã£ã¦çµæœãŒå¤‰ã‚ã£ãŸæ™‚ã®ã¨ã‹ã«ã†ã¾ãå¤‰æ›´ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«çŸ¥ã‚‰ã›ã¦ãã‚Œã‚‹ã‚‰ã—ã„ã§ã™ã€‚Reactã¨ã‹Vueã§è¨ˆç®—ã—ãŸçµæœã‚’å‡ºã™å…ˆã‚’ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã™ã‚‹ã«ã¯è‰¯ã•ãã†ã§ã™ã­ã€‚</p><h1 id="lt-output-gt-ã‚¿ã‚°ã‚’ä½¿ã£ã¦ã¿ã‚‹"><a href="#lt-output-gt-ã‚¿ã‚°ã‚’ä½¿ã£ã¦ã¿ã‚‹" class="headerlink" title="&lt;output&gt;ã‚¿ã‚°ã‚’ä½¿ã£ã¦ã¿ã‚‹"></a><code>&lt;output&gt;</code>ã‚¿ã‚°ã‚’ä½¿ã£ã¦ã¿ã‚‹</h1><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/output">MDNã®èª¬æ˜</a>ã‚’èª­ã‚€ã¨ã€<code>&lt;output&gt;</code>ã‚¿ã‚°ã¯<code>for</code>å±æ€§ã‚’ä½¿ã£ã¦ã€ãƒ•ã‚©ãƒ¼ãƒ è¦ç´ ã£ã½ãã€HTMLã¨ã—ã¦<code>&lt;label&gt;</code>ã¨é–¢é€£ä»˜ã‘ã‚‰ã‚Œã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚ã“ã‚Œã‚’ä½¿ã†ã®ãŒHTMLã®ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹çš„ã«è‰¯ã•ãã†ã§ã™ã­ã€‚</p><p>viteã§Reactã®é››å½¢ã‚’ä½œã£ã¦ã€ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã‚’ä½œã£ã¦ã¿ã¾ã—ãŸã€‚2ã¤ã®æ•°å€¤ã®ãƒ•ã‚©ãƒ¼ãƒ ãŒã‚ã‚Šã€ãã‚Œã«æ•°å€¤ã‚’å…¥ã‚Œã‚‹ã¨åˆè¨ˆå€¤ã€ç©ç®—ã—ãŸçµæœã‚’è¡¨ç¤ºã—ã¾ã™ã€‚</p><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useCallback, useState, <span class="title class_">ChangeEvent</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [value1, setValue1] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> [value2, setValue2] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> updateValue1 = <span class="title function_">useCallback</span>(<span class="function">(<span class="params">e: ChangeEvent&lt;HTMLInputElement&gt;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">setValue1</span>(<span class="title class_">Number</span>(e.<span class="property">target</span>.<span class="property">value</span>));</span><br><span class="line">  &#125;, [setValue1])</span><br><span class="line">  <span class="keyword">const</span> updateValue2 = <span class="title function_">useCallback</span>(<span class="function">(<span class="params">e: ChangeEvent&lt;HTMLInputElement&gt;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">setValue2</span>(<span class="title class_">Number</span>(e.<span class="property">target</span>.<span class="property">value</span>));</span><br><span class="line">  &#125;, [setValue2])</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;grid grid-cols-2 gap-4&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">htmlFor</span>=<span class="string">&quot;value1&quot;</span>&gt;</span>Value1<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">id</span>=<span class="string">&quot;value1&quot;</span> <span class="attr">onChange</span>=<span class="string">&#123;updateValue1&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">htmlFor</span>=<span class="string">&quot;value2&quot;</span>&gt;</span>Value2<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">id</span>=<span class="string">&quot;value2&quot;</span> <span class="attr">onChange</span>=<span class="string">&#123;updateValue2&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">htmlFor</span>=<span class="string">&quot;sum&quot;</span>&gt;</span>Sum<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">output</span> <span class="attr">id</span>=<span class="string">&quot;sum&quot;</span>&gt;</span>&#123;value1 + value2&#125;<span class="tag">&lt;/<span class="name">output</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">htmlFor</span>=<span class="string">&quot;mul&quot;</span>&gt;</span>Mul<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">output</span> <span class="attr">id</span>=<span class="string">&quot;mul&quot;</span>&gt;</span>&#123;value1 * value2&#125;<span class="tag">&lt;/<span class="name">output</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><p>Playwrightã§æ›¸ã„ã¦ã¿ãŸãƒ†ã‚¹ãƒˆã¯æ¬¡ã®é€šã‚Šã§ã™ã€‚<code>&lt;output&gt;</code>ã‚¿ã‚°ã«ã¤ã„ãŸãƒ©ãƒ™ãƒ«ã‚’ä½¿ã£ã¦å–å¾—ã§ãã¦ã„ã¾ã™ã€‚</p><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; test, expect &#125; <span class="keyword">from</span> <span class="string">&#x27;@playwright/test&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;calc&#x27;</span>, <span class="keyword">async</span> (&#123; page &#125;) =&gt; &#123;</span><br><span class="line">  <span class="keyword">await</span> page.<span class="title function_">goto</span>(<span class="string">&#x27;http://localhost:5173&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">await</span> page.<span class="title function_">getByLabel</span>(<span class="string">&quot;Value1&quot;</span>).<span class="title function_">fill</span>(<span class="string">&quot;10&quot;</span>)</span><br><span class="line">  <span class="keyword">await</span> page.<span class="title function_">getByLabel</span>(<span class="string">&quot;Value2&quot;</span>).<span class="title function_">fill</span>(<span class="string">&quot;20&quot;</span>)</span><br><span class="line">  <span class="title function_">expect</span>(<span class="keyword">await</span> page.<span class="title function_">getByLabel</span>(<span class="string">&quot;Sum&quot;</span>)).<span class="title function_">toHaveText</span>(<span class="string">&quot;30&quot;</span>)</span><br><span class="line">  <span class="title function_">expect</span>(<span class="keyword">await</span> page.<span class="title function_">getByLabel</span>(<span class="string">&quot;Mul&quot;</span>)).<span class="title function_">toHaveText</span>(<span class="string">&quot;200&quot;</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><img src="/images/20231003a/ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ_2023-10-01_17.37.45.png" alt="test('calc', async ({ page }) => { ã«ãƒã‚¤ãƒ©ã‚¤ãƒˆãŒã‚ãŸã£ãŸPlaywrightç”»é¢" width="1200" height="535" loading="lazy"><h1 id="getByRole-â€˜statusâ€™-ã¯ç¾çŠ¶ä½¿ãˆãªãã†â†’1-39ã‹ã‚‰ä½¿ãˆã¾ã™ï¼"><a href="#getByRole-â€˜statusâ€™-ã¯ç¾çŠ¶ä½¿ãˆãªãã†â†’1-39ã‹ã‚‰ä½¿ãˆã¾ã™ï¼" class="headerlink" title="# getByRole(â€˜statusâ€™)ã¯ç¾çŠ¶ä½¿ãˆãªãã†â†’1.39ã‹ã‚‰ä½¿ãˆã¾ã™ï¼"></a># getByRole(â€˜statusâ€™)ã¯ç¾çŠ¶ä½¿ãˆãªãã†â†’1.39ã‹ã‚‰ä½¿ãˆã¾ã™ï¼</h1><p><del>ãƒ©ãƒ™ãƒ«ã®é¸æŠãŒã§ããŸã—ã€<code>getByRole()</code>ã§ã¯ã©ã†ã‹ãªã€ã¨è©¦ã—ã¦ã¿ã¾ã—ãŸãŒã†ã¾ãã„ãã¾ã›ã‚“ã€‚ã“ã‚Œã¯è¦‹ã¤ã‘ã‚‰ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚</del></p><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="title function_">expect</span>(<span class="keyword">await</span> page.<span class="title function_">getByRole</span>(<span class="string">&#x27;status&#x27;</span>, &#123; <span class="attr">name</span>: <span class="string">&#x27;Sum&#x27;</span> &#125;)).<span class="title function_">toBeVisible</span>()</span><br></pre></td></tr></table></figure><p><del>åå‰ã¨ãƒ­ãƒ¼ãƒ«ã¯é•ã†ã‚‚ã®ã ã—ã€ä»•æ–¹ãªã„æ°—ã‚‚ã—ãªã„ã§ã‚‚ãªã„ã‘ã©<code>&lt;input&gt;</code>ã‚¿ã‚°ã®ä¸­ã«ã¯ãƒ©ãƒ™ãƒ«ã‚’nameã§æŒ‡å®šã™ã‚‹ã®ãŒæ™®é€šã®è¦ç´ ã‚‚ã‚ã‚Šã¾ã™ã€‚</del></p><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line">&#123;<span class="comment">/* ãƒœã‚¿ãƒ³ã®ãƒ†ã‚­ã‚¹ãƒˆ */</span>&#125;</span><br><span class="line">&lt;button&gt;<span class="title class_">Button</span> <span class="title class_">Sample</span>&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">&#123;<span class="comment">/* labelã§æŒ‡å®š(checkbox) */</span>&#125;</span><br><span class="line">&lt;label&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> /&gt;</span></span> <span class="title class_">Subscribe</span></span><br><span class="line">&lt;/label&gt;</span><br><span class="line"></span><br><span class="line">&#123;<span class="comment">/* åŒæ§˜ã®è¨˜æ³•ã§labelã‚’ä»˜ä¸ã—ãŸoutput */</span>&#125;</span><br><span class="line">&lt;label&gt;</span><br><span class="line">  <span class="title class_">Output</span> &lt;output&gt;test&lt;/output&gt;</span><br><span class="line">&lt;/label&gt;</span><br></pre></td></tr></table></figure><p>Playwrightã§å®Ÿé¨“ã—ã¦ã¿ã‚‹ã¨æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æˆåŠŸ</span></span><br><span class="line"><span class="title function_">expect</span>(<span class="keyword">await</span> page.<span class="title function_">getByRole</span>(<span class="string">&#x27;button&#x27;</span>, &#123;ã€€<span class="attr">name</span>: <span class="string">&quot;Button Sample&quot;</span>ã€€&#125;)).<span class="title function_">toBeVisible</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆåŠŸ</span></span><br><span class="line"><span class="title function_">expect</span>(<span class="keyword">await</span> page.<span class="title function_">getByRole</span>(<span class="string">&#x27;checkbox&#x27;</span>, &#123;ã€€<span class="attr">name</span>: <span class="string">&#x27;Subscribe&#x27;</span> &#125;)).<span class="title function_">toBeVisible</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤±æ•—(1.38)</span></span><br><span class="line"><span class="title function_">expect</span>(<span class="keyword">await</span> page.<span class="title function_">getByRole</span>(<span class="string">&#x27;status&#x27;</span>, &#123; <span class="attr">name</span>: <span class="string">&#x27;Output&#x27;</span> &#125;)).<span class="title function_">toBeVisible</span>()</span><br></pre></td></tr></table></figure><p><del><code>&lt;output&gt;</code>ã¯ãƒ•ã‚©ãƒ¼ãƒ å±æ€§ã§ã¯ãªã„ã›ã„ã‹ã€ãƒ©ãƒ™ãƒ«ã‚’roleã®nameã¨ã—ã¦ã¯èªè­˜ã—ãªã„ã‚ˆã†ã§ã™ã€‚checkboxã¯ã„ã‘ã‚‹ã‚“ã§ã™ã‘ã©ã­ã€‚</del></p><p><del>ARIAå‘¨ã‚Šã®ä»•æ§˜ã¨ã‹ã‚’å®Œå…¨ã«ç†è§£ã—ãŸã‚ã‘ã§ã¯ãªã„ã®ã§ã€ã“ã‚Œã¯issueå ±å‘Šã™ã¹ããªã®ã‹ã©ã†ãªã®ã‹æ‚©ã‚€ã¨ã“ã‚ã§ã¯ã‚ã‚Šã¾ã™ãŒã€ç¾çŠ¶ <code>getByLabel()</code>ã§æƒ…å ±ãŒå–ã‚Œã‚‹ã“ã¨ã¯ã‚ã‹ã£ãŸã®ã§ã€ä¸€æ—¦ã“ã‚Œã§ã‚ˆã—ã¨ã—ã‚ˆã†ã‹ã¨æ€ã„ã¾ã™ã€‚</del></p><p>â†’å ±å‘Šã—ãŸã¨ã“ã‚ä¿®æ­£ã•ã‚Œã¾ã—ãŸã€‚1.39ã§æ²»ã‚‹ã‚ˆã†ã§ã™ã€‚</p><h1 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h1><p>æ•°å¹´å‰ã«ç™ºè¡¨ã—ãŸè³‡æ–™ã§ã‚‚ã‚ã‹ã‚‰ã‚“ã€ã¨æ›¸ã„ã¦ã„ãŸã€å–‰ã«ä½¿ãˆãŸéª¨ã ã£ãŸæ‚©ã¿ãŒè§£æ±ºã—ã¾ã—ãŸã€‚ä¸€æ–¹ã§Playwrightã®æŒ™å‹•ãŒã‚ã‚‹ã¹ãã‚‚ã®ãªã®ã‹æ‚©ã¾ã—ã„ã®ã§ã™ãŒã€ä»Šå¾Œã¯ç©æ¥µçš„ã«ä½¿ã£ã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚</p><p>è‡ªåˆ†ãŒã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼ç­‰ã‚’ä½¿ã£ã¦ã„ãªã‹ã£ãŸã‚Šã‚‚ã‚ã£ã¦ã€ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã«é–¢ã—ã¦ã¯è‡ªä¿¡ã‚’ã‚‚ã£ã¦ã€Œã“ã‚Œã ï¼ã€ã¨ã¾ã§ã¯ã¾ã è¨€ãˆãªã„ã®ã§ã€è­˜è€…ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãŒã‚ã‚‹ã¨ã„ã„ãªã€ã¨æ€ã„ã¤ã¤æŠ€è¡“ãƒ–ãƒ­ã‚°ã«ã—ã¦ã„ã¾ã™ã€‚</p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Programming/">Programming</category>
      
      
      <category domain="https://future-architect.github.io/tags/HTML/">HTML</category>
      
      <category domain="https://future-architect.github.io/tags/accessibility/">accessibility</category>
      
      <category domain="https://future-architect.github.io/tags/Playwright/">Playwright</category>
      
      <category domain="https://future-architect.github.io/tags/E2E/">E2E</category>
      
      
      <comments>https://future-architect.github.io/articles/20231003a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>ãƒ­ãƒ¼ã‚«ãƒ«ã§Goã®HTTP/3ã‚µãƒ¼ãƒãƒ¼ã‚’ç«‹ã¦ã¦æ¥ç¶šãƒ†ã‚¹ãƒˆã‚’è¡Œã†</title>
      <link>https://future-architect.github.io/articles/20230927a/</link>
      <guid>https://future-architect.github.io/articles/20230927a/</guid>
      <pubDate>Tue, 26 Sep 2023 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;p&gt;Go 1.21ã§ã¯crypto&amp;#x2F;tlsãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§QUICé–¢é€£ã®æ›´æ–°ãŒå°‘ã—ã‚ã‚Šã¾ã—ãŸãŒã€QUICãã®ã‚‚ã®ã¯å…¥ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚QUICã¨ã‹HTTP&amp;#x2F;3å‘¨ã‚Šã‚’ã©ã†ã™ã‚‹ã‹ã¯&lt;a</description>
          
        
      
      
      
      <content:encoded><![CDATA[<p>Go 1.21ã§ã¯crypto&#x2F;tlsãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§QUICé–¢é€£ã®æ›´æ–°ãŒå°‘ã—ã‚ã‚Šã¾ã—ãŸãŒã€QUICãã®ã‚‚ã®ã¯å…¥ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚QUICã¨ã‹HTTP&#x2F;3å‘¨ã‚Šã‚’ã©ã†ã™ã‚‹ã‹ã¯<a href="https://github.com/golang/go/issues/58547">ã„ã‚ã„ã‚è­°è«–ãŒã‚ã‚Š</a>ã€æ¬¡ã®ã“ã¨ãŒæ±ºå®šã—ã¦ã„ã¾ã™ã€‚</p><ul><li>æœ€çµ‚çš„ã«ã¯net&#x2F;quicãŒä½œã‚‰ã‚Œã‚‹</li><li>ãŸã ã—ã€APIã®å®‰å®šåŒ–ã®ãŸã‚ã«ã€ã¾ãšã¯æº–æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦ golang.org&#x2F;x&#x2F;net&#x2F;quicã‚’ä½œã£ã¦ã„ã</li><li>github.com&#x2F;quic-go&#x2F;quic-goã¨ã„ã†å®Ÿè£…ã¯ã‚ã‚‹ãŒã€ãã‚Œã‚’ãã®ã¾ã¾å–ã‚Šè¾¼ã‚€ã“ã¨ã¯ã—ãªã„</li></ul><p>ã¨ã„ã†ã“ã¨ã§ã€ã‚‚ã†å°‘ã—ã—ã°ã‚‰ãã‹ã‹ã‚Šãã†ã§ã™ã€‚</p><p>ã¨ã„ã£ã¦ã‚‚ã€HTTP&#x2F;3ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã‚¨ãƒ³ãƒ‰ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒãƒ¼ãŒç›´æ¥å—ã‘ã‚‹ã“ã¨ã¯ãŠãã‚‰ãç¨€ã§ã€CDNã¨ã‹ã€æœ€å‰é¢ã«ãŸã¤ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒHTTP&#x2F;2ã‚„HTTP&#x2F;3ã‚’ã—ã‚ƒã¹ã£ã¦ã€ãã®è£ã¯HTTP&#x2F;1.1(éTLS)ãŒå¤šã„ã¨æ€ã„ã¾ã™ã—ã€ã‚ˆã‚Šå›ºãã—ã‚ˆã†ã¨ã—ã¦ã‚‚mTLSã§HTTP&#x2F;2ã˜ã‚ƒãªã„ã§ã™ã‹ã­ã€‚ã‚‚ã¨ã‚‚ã¨HTTP&#x2F;3ã®å¼·ã¿ã¯ã‚¨ãƒ©ãƒ¼ç‡ã®é«˜ã„å›ç·šã§ã‚‚é€Ÿåº¦ãŒè½ã¡ã«ãã„ã“ã¨ãªã®ã§ã€å›ç·šå“è³ªã®å®‰å®šã—ãŸãƒ‡ãƒ¼ã‚¿ã‚»ãƒ³ã‚¿ãƒ¼ã¨ã‹ã‚¯ãƒ©ã‚¦ãƒ‰å†…éƒ¨ã¯HTTP&#x2F;3ã«ã—ã¦ã‚‚ã†ã¾ã¿ãŒã‚ã¾ã‚Šãªã„ã¨ã„ãˆã‚‹ã®ã§ã€ãã‚“ãªæ‚²è¦³çš„ã«ãªã‚‹ã“ã¨ã‚‚ãªã„ã‹ãªã€ã¨æ€ã„ã¾ã™ã€‚</p><p>ã¨ã¯ã„ãˆã€HTTP&#x2F;3ã«è§¦ã£ã¦ã¿ãŸã„æ–¹ã‚‚ã„ã‚‹ã‹ã¨æ€ã†ã®ã§è©¦ã—ã¦ã¿ã¾ã—ãŸã€‚</p><p>ä¸Šè¨˜ã®è­°è«–ã®ä¸­ã§ã‚‚å‡ºã¦ããŸ github.com&#x2F;quic-go&#x2F;quic-goã€€ã¯ã€ã“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä½œè€…ã®Marten Seemannã¯IETFã®QUICãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ã‚°ãƒ«ãƒ¼ãƒ—ã®åˆæœŸã‹ã‚‰ã®ãƒ¡ãƒ³ãƒãƒ¼ã§ã‚‚ã‚ã‚Šã€ã“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸è‡ªèº«ã‚‚IETFã®ä»–ã®QUICã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ã®ç›¸äº’æ¥ç¶šãƒ†ã‚¹ãƒˆã‚’è¡Œã£ã¦ãŠã‚Šã€å“è³ªã¯ã°ã£ã¡ã‚Šã ã¨æ€ã‚ã‚Œã¾ã™ã€‚ãªã®ã§ã“ã‚Œã‚’è©¦ã—ã¦ã¿ã¾ã™ã€‚</p><h1 id="quic-goã§ã®HTTPã‚µãƒ¼ãƒãƒ¼"><a href="#quic-goã§ã®HTTPã‚µãƒ¼ãƒãƒ¼" class="headerlink" title="quic-goã§ã®HTTPã‚µãƒ¼ãƒãƒ¼"></a>quic-goã§ã®HTTPã‚µãƒ¼ãƒãƒ¼</h1><p>Goã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚µãƒ¼ãƒãƒ¼å®Ÿè£…ã¨ä¼¼ãŸã‚ˆã†ãªAPIã§ã‚µãƒ¼ãƒãƒ¼ã‚’ãŸã¦ã‚‰ã‚Œã¾ã™ã€‚ãƒãƒ³ãƒ‰ãƒ©å‘¨ã‚Šã¯net&#x2F;httpã®<code>http.Handler</code>ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ãã®ã‚‚ã®ãªã®ã§ã€ã„ã‚ã‚“ãªãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ãã®ã¾ã¾ä¸Šã§å‹•ã‹ã›ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">   <span class="string">&quot;fmt&quot;</span></span><br><span class="line">   <span class="string">&quot;log&quot;</span></span><br><span class="line">   <span class="string">&quot;net/http&quot;</span></span><br><span class="line"></span><br><span class="line">   <span class="string">&quot;github.com/quic-go/quic-go/http3&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   mux := http.NewServeMux()</span><br><span class="line">   mux.HandleFunc(<span class="string">&quot;/&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">       fmt.Fprintf(w, <span class="string">&quot;Hello, %s&quot;</span>, r.Proto)</span><br><span class="line">   &#125;)</span><br><span class="line"></span><br><span class="line">   log.Println(<span class="string">&quot;start at https://localhost:8443&quot;</span>)</span><br><span class="line">   log.Println(http3.ListenAndServe(<span class="string">&quot;0.0.0.0:8443&quot;</span>, <span class="string">&quot;localhost.pem&quot;</span>, <span class="string">&quot;localhost-key.pem&quot;</span>, mux))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Goã‚’æ›¸ã„ãŸã“ã¨ãŒã‚ã‚‹äººã«ã¯ãŠãªã˜ã¿ã§ã™ã­ï¼ŸHTTP&#x2F;2ã¨åŒã˜ãã€TLSå¿…é ˆãªã®ã§è¨¼æ˜æ›¸ã‚’ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã¡ã‚‰ã¯å‚è€ƒæƒ…å ±ãŒã„ã‚ã„ã‚ã‚ã‚‹ã®ã§ã€ãŠå¥½ããªæ–‡çŒ®ãªã©ã‚’å‚è€ƒã«ä½œã£ã¦ã¿ã¦ãã ã•ã„ã€‚Real World HTTPã§ã‚‚ç´¹ä»‹ã—ã¦ã„ã¾ã™ã€‚</p><p><code>localhost</code>ã®ãƒ›ã‚¹ãƒˆåã§è¨¼æ˜æ›¸ã‚’ä½œã£ãŸã®ã§ã€<code>localhost:8443</code>ã§ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ãƒãƒƒãƒãƒªè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚Safariã§ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã¿ã‚‹ã¨ã€ã™ãã«è¡¨ç¤ºã•ã‚Œã¦æ¡ˆå¤–ç°¡å˜ï¼Ÿã¨æ€ã„ã¤ã¤ã€ã“ã“ã‹ã‚‰æ·±ããªã£ã¦ãã¾ã™ã€‚</p><img src="/images/20230927a/ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ_2023-09-21_15.03.06.png" alt="ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ_2023-09-21_15.03.06.png" width="806" height="336" loading="lazy"><h1 id="quic-goã®å†…éƒ¨ã§ã¯ã‚µãƒ¼ãƒãƒ¼ãŒ2ã¤èµ·å‹•ã™ã‚‹"><a href="#quic-goã®å†…éƒ¨ã§ã¯ã‚µãƒ¼ãƒãƒ¼ãŒ2ã¤èµ·å‹•ã™ã‚‹" class="headerlink" title="quic-goã®å†…éƒ¨ã§ã¯ã‚µãƒ¼ãƒãƒ¼ãŒ2ã¤èµ·å‹•ã™ã‚‹"></a>quic-goã®å†…éƒ¨ã§ã¯ã‚µãƒ¼ãƒãƒ¼ãŒ2ã¤èµ·å‹•ã™ã‚‹</h1><p>http3ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã¯<code>ListenAndServeQUIC()</code>ã¨ã„ã†é–¢æ•°ã‚‚ã‚ã‚Šã¾ã™ã€‚ã©ã†é•ã†ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿæœ€åˆã¯ã“ã¡ã‚‰ã§å®Ÿè£…ã—ã¦ã¿ãŸã®ã§ã™ãŒå‹•ã‹ãšã€ä¸Šè¨˜ã®<code>ListenAndServe()</code>ã«ã—ãŸã‚‰å‹•ãã¾ã—ãŸã€‚</p><p>ã“ã¡ã‚‰ã®æ–¹ã¯å†…éƒ¨çš„ã«ã¯ã€ã“ã‚“ãªæ„Ÿã˜ã®ã‚³ãƒ¼ãƒ‰ã¨åŒã˜ã‚ˆã†ãªå‹•ãã«ãªã‚Šã¾ã™ã€‚ã‚ˆãã‚ˆãã¿ã‚‹ã¨ã€HTTP&#x2F;2ã®ã‚µãƒ¼ãƒãƒ¼ã‚‚èµ·å‹•ã—ã¦ã„ã¾ã™ã­ã€‚<code>Alt-Svc</code>ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ä»˜ä¸ã—ã¦ã„ã¾ã™ã€‚</p><p>QUICã¯UDPã§ã™ãŒã€ç¾åœ¨ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯ã¾ãšTCPã§ã‚µãƒ¼ãƒãƒ¼ã‚¢ã‚¯ã‚»ã‚¹ã—ã«è¡Œãã¾ã™ã€‚ã—ã‹ã—ã€HTTP&#x2F;3ã®ã¿ã®ã‚µãƒ¼ãƒãƒ¼ãŒãŸã£ã¦ã„ã¦ã‚‚ã€ãã“ã«ã¯TCPã®ã‚µãƒ¼ãƒãƒ¼ã¯ã„ã¾ã›ã‚“ã€‚ãã®ãŸã‚ã€HTTP&#x2F;2ã®ã‚µãƒ¼ãƒãƒ¼ã‚’è£ã§ãŸã¦ã¦ã€ãã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã® <code>Alt-Svc</code>ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿”ã—ã€Œã“ã¡ã‚‰ã§HTTP&#x2F;3ã®ã‚µãƒ¼ãƒãƒ¼ãŒã„ã‚‹ã‚ˆã€ã¨ãƒ–ãƒ©ã‚¦ã‚¶ã‚’HTTP&#x2F;3ã®æ–¹ã«èª˜å°ã—ã¦ã„ã‚‹ã¨ã„ã†ã‚ã‘ã§ã™ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">   <span class="string">&quot;context&quot;</span></span><br><span class="line">   <span class="string">&quot;fmt&quot;</span></span><br><span class="line">   <span class="string">&quot;log&quot;</span></span><br><span class="line">   <span class="string">&quot;net/http&quot;</span></span><br><span class="line">   <span class="string">&quot;os&quot;</span></span><br><span class="line">   <span class="string">&quot;os/signal&quot;</span></span><br><span class="line">   <span class="string">&quot;sync&quot;</span></span><br><span class="line"></span><br><span class="line">   <span class="string">&quot;github.com/quic-go/quic-go/http3&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   mux := http.NewServeMux()</span><br><span class="line">   mux.HandleFunc(<span class="string">&quot;/&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">       w.Header().Add(<span class="string">&quot;Alt-Svc&quot;</span>, <span class="string">`h3=&quot;:8443&quot;; ma=2592000`</span>)</span><br><span class="line">       fmt.Fprintf(w, <span class="string">&quot;Hello via %s&quot;</span>, r.Proto)</span><br><span class="line">   &#125;)</span><br><span class="line"></span><br><span class="line">   ctx, <span class="built_in">close</span> := signal.NotifyContext(context.Background(), os.Interrupt)</span><br><span class="line">   <span class="keyword">defer</span> <span class="built_in">close</span>()</span><br><span class="line"></span><br><span class="line">   h2server := &amp;http.Server&#123;</span><br><span class="line">       Addr:    <span class="string">&quot;0.0.0.0:8443&quot;</span>,</span><br><span class="line">       Handler: mux,</span><br><span class="line">   &#125;</span><br><span class="line">   h3server := &amp;http3.Server&#123;</span><br><span class="line">       Addr:    <span class="string">&quot;0.0.0.0:8443&quot;</span>,</span><br><span class="line">      Handler: mux,</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   wg := &amp;sync.WaitGroup&#123;&#125;</span><br><span class="line">   wg.Add(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">   <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">       log.Println(<span class="string">&quot;start at http/2 server at (TCP)https://localhost:8443&quot;</span>)</span><br><span class="line">       log.Println(h2server.ListenAndServeTLS(<span class="string">&quot;localhost.pem&quot;</span>, <span class="string">&quot;localhost-key.pem&quot;</span>))</span><br><span class="line">       wg.Done()</span><br><span class="line">   &#125;()</span><br><span class="line"></span><br><span class="line">   <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">       log.Println(<span class="string">&quot;start at http/3 server at (UDP)https://localhost:8443&quot;</span>)</span><br><span class="line">       log.Println(h3server.ListenAndServeTLS(<span class="string">&quot;localhost.pem&quot;</span>, <span class="string">&quot;localhost-key.pem&quot;</span>))</span><br><span class="line">       wg.Done()</span><br><span class="line">   &#125;()</span><br><span class="line"></span><br><span class="line">   &lt;-ctx.Done()</span><br><span class="line">   h2server.Shutdown(ctx)</span><br><span class="line">   h3server.Close()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ãƒ—ãƒ­ãƒˆã‚³ãƒ«é¸æŠ"><a href="#ãƒ—ãƒ­ãƒˆã‚³ãƒ«é¸æŠ" class="headerlink" title="ãƒ—ãƒ­ãƒˆã‚³ãƒ«é¸æŠ"></a>ãƒ—ãƒ­ãƒˆã‚³ãƒ«é¸æŠ</h1><p>HTTP&#x2F;3ã§ã¯ã„ãã¤ã‹ã®ç®‡æ‰€ã§ãƒ—ãƒ­ãƒˆã‚³ãƒ«é¸æŠã‚’ã•ã›ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚</p><ul><li>DNSã®HTTPSãƒ¬ã‚³ãƒ¼ãƒ‰</li><li>TLSã®ãƒãƒ³ãƒ‰ã‚·ã‚§ã‚¤ã‚¯ã®ALPN(Application-Layer Protocol Negotiation)</li><li>ä¸Šè¨˜ã§ç´¹ä»‹ã—ãŸAlt-Svcãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰</li></ul><p>ä¸Šã‹ã‚‰é †ç•ªã«å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚DNSã§ã‚ã‚Œã°ã€æœ€åˆã®ã‚µãƒ¼ãƒãƒ¼ã‚¢ã‚¯ã‚»ã‚¹ã®å‰ã«æƒ…å ±ã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚TLSã®ãƒãƒ³ãƒ‰ã‚·ã‚§ã‚¤ã‚¯ã¯TCP&#x2F;UDPã‚’æ±ºã‚ãŸå¾Œã«è¡Œãˆã‚‹ãŸã‚ã€æœ€åˆã®TCPã®ã‚¢ã‚¯ã‚»ã‚¹ã®ç©ºæ’ƒã¡ã¯å¿…è¦ã§ã™ã€‚Alt-Svcãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¯ã•ã‚‰ã«é…ãã€ä¸€åº¦HTTP&#x2F;2ã®ã‚µãƒ¼ãƒãƒ¼ãŒãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡¦ç†ã™ã‚‹ã¾ã§ã€ãƒ–ãƒ©ã‚¦ã‚¶ã¯HTTP&#x2F;3ã®ã‚µãƒ¼ãƒãƒ¼ã®å­˜åœ¨ã‚’çŸ¥ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚</p><p>å€‹äººçš„ã«ã¯103 Early Hintsã§Alt-Svcãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿”ã›ã°åƒ…ã‹ã°ã‹ã‚ŠAlt-Svcã‚’ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã§è¿”ã™ã‚ˆã‚Šã‚‚åŠ¹ç‡çš„ã‹ãªã€ã¨æ€ã„ã¾ã—ãŸãŒã€103 Early Hintsã¯ã‚µãƒ³ãƒ—ãƒ«è¦‹ã¦ã‚‚ãƒ—ãƒªãƒ­ãƒ¼ãƒ‰ã®ç”¨é€”ã—ã‹è¦‹ã¾ã›ã‚“ã­ã€‚</p><h1 id="CoreDNSã‚’ãŸã¦ã¦ã¿ãŸ"><a href="#CoreDNSã‚’ãŸã¦ã¦ã¿ãŸ" class="headerlink" title="CoreDNSã‚’ãŸã¦ã¦ã¿ãŸ"></a>CoreDNSã‚’ãŸã¦ã¦ã¿ãŸ</h1><p>ã•ã¦ã€ä¸Šè¨˜ã®HTTP&#x2F;3ã‚µãƒ¼ãƒãƒ¼ã§ã™ãŒã€Safariã‹ã‚‰ã¯ã°ã£ã¡ã‚Š3ã®æ–¹ã«ã¤ãªãŒã‚‹ã®ã§ã™ãŒã€Chromeã¨Firefoxã¯2ã°ã‹ã‚Šã€‚ãŸã¾ã«é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã‚’é–‹ã„ã¦ãƒªãƒ­ãƒ¼ãƒ‰ã—ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã ã‘3ã§ã¤ãªãŒã£ãŸã‚Šã¨ã„ã¾ã„ã¡å®‰å®šã—ã¾ã›ã‚“ã€‚ãã‚“ãªä¸­ã€Twitter(X)ã§ã€ã¾ãˆã‹ã‚ã•ã‚“ã¨ã„ã†æ–¹ã‹ã‚‰ã€HTTPSãƒ¬ã‚³ãƒ¼ãƒ‰ã§ã°ã£ã¡ã‚Šã„ã‘ã‚‹ã¨ã„ã†ãŠè©±ã‚’ä¼ºã„ã€ã¡ã‚‡ã£ã¨è©¦ã—ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚</p><blockquote class="twitter-tweet"><p lang="ja" dir="ltr">allt-svcã«åŠ ãˆã¦HTTPSãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ã¤ã‘ãŸã‚‰chromeã¯ç¢ºå®Ÿã«3ã§firefoxã¯åŠã€…ãã‚‰ã„ã®ç¢ºç‡ã«ãªã‚Šã¾ã™ã­<br>è‡ªåˆ†ã‚‚å£Šã‚Œã¦ã‚‹ã®ã‹ã¨æ€ã„ã¾ã—ãŸ</p>&mdash; ã¾ãˆã‹ã‚ (@kiwithe2027) <a href="https://twitter.com/kiwithe2027/status/1703264967510954453?ref_src=twsrc%5Etfw">September 17, 2023</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><p>ã¡ãªã¿ã«ã€ç¾åœ¨å‡ºã¦ã„ã‚‹<a href="https://gihyo.jp/magazine/SD/archive/2023/202310">Software Design 2023å¹´10æœˆå·</a>ãŒãŸã¾ãŸã¾HTTP&#x2F;3ç‰¹é›†ã§ã—ãŸãŒã€HTTPSãƒ¬ã‚³ãƒ¼ãƒ‰ã¯CDNä¸Šã®è¨­å®šã§ä»˜ä¸ã—ã¦ã„ã¾ã—ãŸã€‚</p><p>ä»Šå›ã‚ã¤ã‹ã£ãŸ<a href="https://coredns.io/">CoreDNS</a>ã¯ã€CNCFã®å‚˜ä¸‹ã«ã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã€Kubernetesã§ã‚‚ã‚ˆãä½¿ã‚ã‚Œã¦ã„ã¾ã™ã€‚ã‚‚ã£ã¨ã‚‚ã€ãã®ç†ç”±ãŒetcdã§ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã®ç®¡ç†ãŒã§ãã¦ã€ãã¡ã‚‰ã®æƒ…å ±ã‚’å…ƒã«æƒ…å ±ã‚’è¿”ã›ã‚‹ãŸã‚ç®¡ç†ãŒæ¥½ã€ã¨ã„ã†ã¨ã“ã‚ãŒã‚ã‚‹ã®ã ã¨æ€ã„ã¾ã™ãŒã€ä»Šå›ã¯etcdã¯ä½¿ã„ã¾ã›ã‚“ã€‚</p><p><a href="https://brendanthompson.com/posts/2021/12/coredns-on-macos-for-local-development">ã“ã¡ã‚‰</a>ã‚’ã¿ãªãŒã‚‰macOSã§ã‚„ã£ã¦ã¿ãŸä¾‹ã«ãªã‚Šã¾ã™ãŒã€ã‚µãƒ¼ãƒ“ã‚¹ã®èµ·å‹•éƒ¨åˆ†ä»¥å¤–ã¯ãƒãƒ¼ã‚¿ãƒ–ãƒ«ãªã¯ãšã§ã™ã€‚<a href="https://hnakamur.github.io/blog/2019/10/30/coredns-wrapper-for-runnning-as-windows-service/">hnakamurã•ã‚“ãŒWindowsã§ã‚µãƒ¼ãƒ“ã‚¹åŒ–ã™ã‚‹ãƒ©ãƒƒãƒ‘ãƒ¼</a>ã‚’ä½œã‚‰ã‚Œã¦ã„ã‚‹ã®ã§ã“ã¡ã‚‰ã«å¤‰ãˆã‚Œã°Windowsã§ã‚‚å‹•ãã‹ã¨æ€ã„ã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</span></span><br><span class="line">$ brew install coredns</span><br><span class="line"></span><br><span class="line"><span class="comment"># èµ·å‹•</span></span><br><span class="line">$ sudo brew services start coredns</span><br></pre></td></tr></table></figure><p><code>http3.test</code>ã¨ã„ã†ãƒ›ã‚¹ãƒˆåã ã‘ç‰¹åˆ¥æ‰±ã„ã—ã¦HTTPSãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ã¤ã‘ã¦ã‚ã’ãŸã„ã®ã§ã€<code>/opt/homebrew/etc/coredns/Corefile</code>ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¬¡ã®ã‚ˆã†ã«ã—ã¾ã—ãŸ</p><figure class="highlight sh"><figcaption><span>/opt/homebrew/etc/coredns/Corefile</span></figcaption><table><tr><td class="code"><pre><span class="line">. &#123;</span><br><span class="line">    forward . 8.8.8.8</span><br><span class="line">    <span class="built_in">log</span></span><br><span class="line">    errors</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http3.test &#123;</span><br><span class="line">  file /Users/shibu/.config/coredns/test</span><br><span class="line">  <span class="built_in">log</span></span><br><span class="line">  errors</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šè¨˜ã®è¨­å®šã‹ã‚‰ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œã‚‹è‡ªåˆ†ã®ãƒ›ãƒ¼ãƒ ä»¥ä¸‹ã«è¿½åŠ ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«(&#x2F;Users&#x2F;shibu&#x2F;.config&#x2F;coredns&#x2F;test)ã‚’ãŠãã¾ã™ã€‚ã“ã‚“ãªæ„Ÿã˜ã«ã—ã¦ã¿ã¾ã—ãŸã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="variable">$ORIGIN</span> <span class="built_in">test</span>.</span><br><span class="line"><span class="variable">$TTL</span> 1m</span><br><span class="line"></span><br><span class="line">@                 IN  SOA     ns.test. admin.test. (</span><br><span class="line">                                   2020010510     ; Serial</span><br><span class="line">                                   1m             ; Refresh</span><br><span class="line">                                   2m             ; Retry</span><br><span class="line">                                   4m             ; Expire</span><br><span class="line">                                   1m)            ; Minimum TTL</span><br><span class="line">@                 IN  A       127.0.0.1</span><br><span class="line">@                 IN  NS      <span class="built_in">test</span>.</span><br><span class="line">ns                IN  CNAME   @</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http3   IN A     127.0.0.1</span><br><span class="line">        IN AAAA  ::1</span><br><span class="line">        INHTTPS 1 . alpn=h3 port=8443</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å†èµ·å‹•</span></span><br><span class="line">$ sudo brew services restart coredns</span><br></pre></td></tr></table></figure><p>æœ€å¾Œã«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¨­å®šã§DNSã«127.0.0.1ã‚’è¿½åŠ ã—ã¦ã‚ã’ã‚Œã°å®Œäº†ã§ã™ã€‚</p><p>ã“ã‚Œã§Safariã§ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã¿ã‚‹ã¨ã€ç„¡äº‹ã« <code>https://http3.test</code>ã¨ã„ã†URLã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã—ãŸã€‚HTTPSãƒ¬ã‚³ãƒ¼ãƒ‰ã¯ãƒ—ãƒ­ãƒˆã‚³ãƒ«ä»¥å¤–ã«ã‚‚ãƒãƒ¼ãƒˆã‚’è¨­å®šã§ãã‚‹ã®ã§ãƒãƒ¼ãƒˆç•ªå·ã‚’çœç•¥ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã„ã„ã§ã™ã­ã€‚</p><img src="/images/20230927a/ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ_2023-09-21_15.02.30.png" alt="" width="699" height="336" loading="lazy"><p>ã—ã‹ã—ã€å®Ÿã¯Chromeã¨Firefoxã€Edgeã¯ã“ã®DNSã‚µãƒ¼ãƒãƒ¼ã‚’è¦‹ã«è¡Œã£ã¦ãã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚æ˜”ã¯DNSè¨­å®šãŒã‚ã£ãŸã¨æ€ã„ã¾ã™ãŒã€ã„ã¾ã¯DNS over HTTPSã®ã¿ã§ã™ã€‚Chromeã§HTTP&#x2F;3ã«ç¹‹ããŸãã¦CoreDNSã‚’å…¥ã‚Œã¦ã¿ãŸã®ã§ã™ãŒã€ã“ã“ã¯ã†ã¾ãè¡Œã£ã¦ã„ã¾ã›ã‚“ã€‚DNS over HTTPSã‚’CoreDNSã§å»ºã¦ã¦ã¿ã¦ã‚‚ãã“ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãã‚Œãªã‹ã£ãŸã‚Šã€è¨­å®šã‚’æ‹’å¦ã•ã‚ŒãŸã‚Šã€‚ã“ã“ã¯ã¼ã¡ã¼ã¡ã‚„ã£ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚dnsmasqã‚’å…¥ã‚ŒãŸæ™‚ã¯ã‚¢ã‚¯ã‚»ã‚¹ã¯ã—ã¦ãã‚ŒãŸã‚‚ã®ã®ã€HTTPSãƒ¬ã‚³ãƒ¼ãƒ‰ã®è¿½åŠ ãŒåˆ†ã‹ã‚‰ãšCoreDNSã§ã‚„ã‚Šã¾ã—ãŸãŒã€åˆ¥ã®æ–¹æ³•ã‚‚è©¦ãã†ã‹ã¨ã€‚</p><h1 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h1><p>ã¨ã„ã†ã‚ã‘ã§ã€HTTP&#x2F;3ã®ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã—ã¦ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã¿ã¾ã—ãŸã€‚Safariã‹ã‚‰ã¯ã†ã¾ãã¤ãªãŒã‚Šã¾ã—ãŸã€‚ã—ã‹ã—ã€å®Ÿéš›ã«è©¦ã™æ™‚é–“ã®90%ã¯DNSå‘¨ã‚Šã‚’æ“ä½œã™ã‚‹æ™‚é–“ã ã£ãŸã‚Šã—ã¦ã€ã¡ã‚‡ã£ã¨æ•·å±…ãŒé«˜ã„æ°—ãŒã—ã¾ã—ãŸã€‚</p><p>å°†æ¥çš„ã«ã¯ã‚‚ã†é–‹ç™ºä½“é¨“ãŒã¡ã‚‡ã£ã¨æ”¹å–„ã•ã‚ŒãŸã‚‰ã„ã„ãªã€ã¨æ€ã„ã¾ã—ãŸã€‚</p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Infrastructure/">Infrastructure</category>
      
      
      <category domain="https://future-architect.github.io/tags/Go/">Go</category>
      
      <category domain="https://future-architect.github.io/tags/Go1-21/">Go1.21</category>
      
      <category domain="https://future-architect.github.io/tags/HTTP3/">HTTP3</category>
      
      <category domain="https://future-architect.github.io/tags/QUIC/">QUIC</category>
      
      <category domain="https://future-architect.github.io/tags/CoreDNS/">CoreDNS</category>
      
      
      <comments>https://future-architect.github.io/articles/20230927a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>streeï¼šS3ãƒã‚±ãƒƒãƒˆã‚’treeã™ã‚‹CLIã‚³ãƒãƒ³ãƒ‰</title>
      <link>https://future-architect.github.io/articles/20230926a/</link>
      <guid>https://future-architect.github.io/articles/20230926a/</guid>
      <pubDate>Mon, 25 Sep 2023 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;img src=&quot;/images/20230926a/stree-display.png&quot; alt=&quot;&quot; width=&quot;1200&quot; height=&quot;600&quot; loading=&quot;lazy&quot;&gt;

&lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot;</description>
          
        
      
      
      
      <content:encoded><![CDATA[<img src="/images/20230926a/stree-display.png" alt="" width="1200" height="600" loading="lazy"><h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>ã“ã‚“ã«ã¡ã¯ã€‚TIG&#x2F;EXãƒ¦ãƒ‹ãƒƒãƒˆæ‰€å±ã®å®®æ°¸ã§ã™ã€‚</p><p>æœ¬è¨˜äº‹ã§ã¯S3ãƒã‚±ãƒƒãƒˆã‚’treeã™ã‚‹CLIã‚³ãƒãƒ³ãƒ‰ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚</p><p>ã‚¯ãƒ©ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰ã•ã‚“ã®è¨˜äº‹(<a href="https://dev.classmethod.jp/articles/s3-tree-aws-s3-ls/">S3 ãƒã‚±ãƒƒãƒˆã®ä¸­èº«ã‚’ tree å½¢å¼ã§è¡¨ç¤ºã—ã¦ãã‚Œã‚‹ s3-tree ã‚’ Amazon Linux 2 ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ä½¿ã£ã¦ã¿ãŸ</a>)ã‚’æ‹è¦‹ã—ã¦ã€<a href="https://pypi.org/project/s3-tree/">s3-tree</a>ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã®å­˜åœ¨ã‚’çŸ¥ã£ãŸã®ã§ã™ãŒã€profileã‚’æŒ‡å®šã§ããªã‹ã£ãŸã‚Šã€ãƒã‚±ãƒƒãƒˆå˜ä½ã§ã—ã‹æŒ‡å®šã§ããªã‹ã£ãŸã‚Šã¨ç´°ã‹ãªéƒ¨åˆ†ã§ä¸è‡ªç”±ã•ã‚’æ„Ÿã˜ãŸãŸã‚Goã§CLIãƒ„ãƒ¼ãƒ«ã‚’ä½œæˆã—ã¾ã—ãŸã€‚</p><p>ä½œæˆã—ãŸãƒ„ãƒ¼ãƒ«ã¯ä»¥ä¸‹ãƒªãƒ³ã‚¯å…ˆã§å…¬é–‹ã—ã¦ã„ã¾ã™ã€‚</p><p><a href="https://github.com/orangekame3/stree"><img src="https://gh-card.dev/repos/orangekame3/stree.svg" alt="orangekame3/stree - GitHub"></a></p><blockquote><p>streeã¯ã€Œã‚¨ã‚¹ãƒ„ãƒªãƒ¼ã€ã¨èª­ã¿ã¾ã™ã€‚å…ˆã«èªæ„Ÿã®è‰¯ã„åç§°ã‚’æ€ã„ã¤ã„ãŸãŸã‚ã€è¡å‹•ã«èº«ã‚’ä»»ã›ã¦é–‹ç™ºã—ã¾ã—ãŸã€‚</p></blockquote><h1 id="æ©Ÿèƒ½æ¦‚è¦"><a href="#æ©Ÿèƒ½æ¦‚è¦" class="headerlink" title="æ©Ÿèƒ½æ¦‚è¦"></a>æ©Ÿèƒ½æ¦‚è¦</h1><p>ã¾ãšã¯åˆ©ç”¨ç”»é¢ã‚’è¦‹ã¦ã„ãŸã ã„ãŸã»ã†ãŒã‚¤ãƒ¡ãƒ¼ã‚¸ä»˜ãã‚„ã™ã„ã‹ã¨æ€ã„ã¾ã™ã®ã§gifç”»åƒã‚’æ·»ä»˜ã—ã¾ã™ã€‚</p><img src="/images/20230926a/demo.gif" alt="demo" width="1200" height="686" loading="lazy"><p>streeã¯ä»¥ä¸‹ã®æ©Ÿèƒ½ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚</p><ul><li>ãƒã‚±ãƒƒãƒˆåã€ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹åæŒ‡å®šã«ã‚ˆã‚‹treeè¡¨ç¤º</li><li>ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã€ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã®æŒ‡å®š</li><li>LocalStackä¸Šã®S3ãƒã‚±ãƒƒãƒˆã®treeè¡¨ç¤º</li><li>ã‚«ãƒ©ãƒ¼è¡¨ç¤ºï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ç„¡åŠ¹åŒ–ã‚‚å¯èƒ½ã§ã™ï¼‰</li></ul><h1 id="ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•"><a href="#ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•" class="headerlink" title="ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•"></a>ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•</h1><p>Goã¨HomebrewçµŒç”±ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¯èƒ½ã§ã™ã€‚</p><p>å„ç¨®ãƒ“ãƒ«ãƒ‰æ¸ˆã¿ã®ãƒã‚¤ãƒŠãƒªã‚‚å…¬é–‹ã—ã¦ã„ã‚‹ã®ã§<a href="https://github.com/orangekame3/stree/releases">Release</a>ã‹ã‚‰æ‰‹å‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚‚ã§ãã¾ã™ã€‚</p><h2 id="Goã«ã‚ˆã‚‹ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"><a href="#Goã«ã‚ˆã‚‹ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" class="headerlink" title="Goã«ã‚ˆã‚‹ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"></a>Goã«ã‚ˆã‚‹ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">go install github.com/orangekame3/stree@latest</span><br></pre></td></tr></table></figure><h2 id="Homebrewã«ã‚ˆã‚‹ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"><a href="#Homebrewã«ã‚ˆã‚‹ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" class="headerlink" title="Homebrewã«ã‚ˆã‚‹ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"></a>Homebrewã«ã‚ˆã‚‹ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">brew install orangekame3/tap/stree</span><br></pre></td></tr></table></figure><h1 id="ä½¿ã„æ–¹"><a href="#ä½¿ã„æ–¹" class="headerlink" title="ä½¿ã„æ–¹"></a>ä½¿ã„æ–¹</h1><div class="note warn" style="background: #fdf9e2; padding:16px; margin:24px 12px; border-radius:8px;">  <span class="fa fa-fw fa-check-circle"></span><p><strong>å‰æ</strong><br>aws cliã§åˆ©ç”¨ã™ã‚‹configåŠã³credentialsã¯äº‹å‰ã«è¨­å®šã—ã¦ãŠãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p></div><p>ä»¥é™ã€configã¨credentialsãŒä»¥ä¸‹ã®é€šã‚Šè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã¨ã—ã¾ã™ã€‚</p><figure class="highlight ini"><figcaption><span>~/.aws/config</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="section">[my_profile]</span></span><br><span class="line"><span class="attr">region</span> = ap-northeast-<span class="number">1</span></span><br><span class="line"><span class="attr">output</span> = json</span><br></pre></td></tr></table></figure><figure class="highlight ini"><figcaption><span>~/.aws/credentials</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="section">[my_profile]</span></span><br><span class="line"><span class="attr">aws_access_key_id</span>=XXXXXXXXXXXXXXXXXXXXX</span><br><span class="line"><span class="attr">aws_secret_access_key</span>=XXXXXXXXXXXXXXXXX</span><br></pre></td></tr></table></figure><h2 id="åŸºæœ¬çš„ãªã‚³ãƒãƒ³ãƒ‰"><a href="#åŸºæœ¬çš„ãªã‚³ãƒãƒ³ãƒ‰" class="headerlink" title="åŸºæœ¬çš„ãªã‚³ãƒãƒ³ãƒ‰"></a>åŸºæœ¬çš„ãªã‚³ãƒãƒ³ãƒ‰</h2><p>ãƒã‚±ãƒƒãƒˆåã¨profileã‚’æŒ‡å®šã—ã¦ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p><p>ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã¯<code>--profile(-p)</code>ã§æŒ‡å®šã—ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">stree my-bucket -p my_profile</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹ã®ã‚ˆã†ãªå‡ºåŠ›ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">my-bucket</span><br><span class="line">â””â”€â”€ <span class="built_in">test</span></span><br><span class="line">    â”œâ”€â”€ dir1</span><br><span class="line">    â”‚   â”œâ”€â”€ dir1_1</span><br><span class="line">    â”‚   â”‚   â””â”€â”€ dir1_1_1</span><br><span class="line">    â”‚   â”‚       â”œâ”€â”€ file1.csv</span><br><span class="line">    â”‚   â”‚       â””â”€â”€ file2.csv</span><br><span class="line">    â”‚   â””â”€â”€ dir1_2</span><br><span class="line">    â”‚       â”œâ”€â”€ file1.csv</span><br><span class="line">    â”‚       â”œâ”€â”€ file2.csv</span><br><span class="line">    â”‚       â””â”€â”€ file3.csv</span><br><span class="line">    â”œâ”€â”€ dir2</span><br><span class="line">    â”‚   â””â”€â”€ dir2_1</span><br><span class="line">    â”‚       â””â”€â”€ dir2_1_1</span><br><span class="line">    â”‚           â”œâ”€â”€ file1.csv</span><br><span class="line">    â”‚           â”œâ”€â”€ file2.csv</span><br><span class="line">    â”‚           â””â”€â”€ file3.csv</span><br><span class="line">    â””â”€â”€ dir3</span><br><span class="line">        â”œâ”€â”€ file1.csv</span><br><span class="line">        â””â”€â”€ file2.csv</span><br><span class="line"></span><br><span class="line">9 directories, 10 files</span><br></pre></td></tr></table></figure><h2 id="ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’æŒ‡å®š"><a href="#ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’æŒ‡å®š" class="headerlink" title="ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’æŒ‡å®š"></a>ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’æŒ‡å®š</h2><p>é€šå¸¸ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚’è€ƒãˆã‚‹ã¨ã€ãƒã‚±ãƒƒãƒˆã®ä¸­ã«ã¯å¤§é‡ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒå­˜åœ¨ã—ã¦ã„ã‚‹ã“ã¨ãŒäºˆæƒ³ã•ã‚Œã¾ã™ã€‚</p><p>ãã®ãŸã‚ã€ãƒã‚±ãƒƒãƒˆæŒ‡å®šã—ã‹ã§ããªã„çŠ¶æ³ã§ã¯ä½¿ã„ç‰©ã«ãªã‚Šã¾ã›ã‚“ã€‚ãƒã‚±ãƒƒãƒˆåã«ç¶šã‘ã¦prefixã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç¢ºèªã—ãŸã„ãƒ‘ã‚¹ã®æƒ…å ±ã®ã¿ã‚’ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">stree my-bucket/test/dir2 -p my_profile</span><br></pre></td></tr></table></figure><p>ã“ã®ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œçµæœã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">my-bucket</span><br><span class="line">â””â”€â”€ <span class="built_in">test</span></span><br><span class="line">    â””â”€â”€ dir2</span><br><span class="line">        â””â”€â”€ dir2_1</span><br><span class="line">            â””â”€â”€ dir2_1_1</span><br><span class="line">                â”œâ”€â”€ file1.csv</span><br><span class="line">                â”œâ”€â”€ file2.csv</span><br><span class="line">                â””â”€â”€ file3.csv</span><br><span class="line"></span><br><span class="line">4 directories, 3 files</span><br></pre></td></tr></table></figure><h2 id="ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰"><a href="#ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰" class="headerlink" title="ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰"></a>ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰</h2><p><code>--region(-r)</code>ã§ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®šã§ãã¾ã™ã€‚</p><p>profileã«è¨˜è¼‰ã—ã¦ã„ã‚‹ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã¨ã¯åˆ¥ã®ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®šã—ãŸã„ã¨ããªã©ã¯<code>--region</code>ãƒ•ãƒ©ã‚°ã‚’åˆ©ç”¨ã—ã¦ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã—ã¦ãã ã•ã„ã€‚</p><h2 id="Localstackã§ã®åˆ©ç”¨"><a href="#Localstackã§ã®åˆ©ç”¨" class="headerlink" title="Localstackã§ã®åˆ©ç”¨"></a>Localstackã§ã®åˆ©ç”¨</h2><p>Localstackã§ã‚‚åˆ©ç”¨ã§ãã¾ã™ã€‚</p><p>ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ã§åˆ©ç”¨ã™ã‚‹å ´åˆã€endpointã¨regionã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ä»¥ä¸‹ã®é€šã‚Šè¨­å®šã—ã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">endpoint = http://localhost:4566</span><br><span class="line">region = us-east-1</span><br></pre></td></tr></table></figure><p>å¤§å¤šæ•°ã®å ´åˆã¯â†‘ã®è¨­å®šã§åˆ©ç”¨ã—ã¦ã„ã‚‹ã‹ã¨æ€ã„ã¾ã™ã®ã§Localstackç”¨ã®ãƒ•ãƒ©ã‚°ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚<code>--local(-l)</code>ãŒãã‚Œã§ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">stree my-bucket/test/dir2 -l</span><br></pre></td></tr></table></figure><p>ç‰¹åˆ¥ãªäº‹æƒ…ã§ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚„ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å¤‰æ›´ã™ã‚‹å ´åˆã‚‚ã‚ã‚‹ã‹ã¨æ€ã„ã¾ã™ã®ã§ã€<code>--region(-r)</code> ãƒ•ãƒ©ã‚°ã¨<code>--endpoint(-e)</code>ã§ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">stree my-bucket/test/dir2 -r us-east-1 -e http://localhost:4537</span><br></pre></td></tr></table></figure><p>å‡ºåŠ›ã¯åŒã˜ã§ã‚ã‚‹ãŸã‚çœç•¥ã—ã¾ã™ã€‚</p><h2 id="ã‚«ãƒ©ãƒ¼å‡ºåŠ›ã‚’ç„¡åŠ¹åŒ–"><a href="#ã‚«ãƒ©ãƒ¼å‡ºåŠ›ã‚’ç„¡åŠ¹åŒ–" class="headerlink" title="ã‚«ãƒ©ãƒ¼å‡ºåŠ›ã‚’ç„¡åŠ¹åŒ–"></a>ã‚«ãƒ©ãƒ¼å‡ºåŠ›ã‚’ç„¡åŠ¹åŒ–</h2><p><code>--no-color(-n)</code>ã§ã‚«ãƒ©ãƒ¼å‡ºåŠ›ã‚’ç„¡åŠ¹åŒ–ã§ãã¾ã™ã€‚</p><p>â–¼ã‚«ãƒ©ãƒ¼ã¤ã<br><img src="/images/20230926a/color.png" alt="color.png" width="479" height="391" loading="lazy"></p><p>â–¼ã‚«ãƒ©ãƒ¼ãªã—<br><img src="/images/20230926a/no-color.png" alt="no-color.png" width="504" height="391" loading="lazy"></p><h1 id="ã•ã„ã”ã«"><a href="#ã•ã„ã”ã«" class="headerlink" title="ã•ã„ã”ã«"></a>ã•ã„ã”ã«</h1><p>å®Ÿè£…ã«å–ã‚Šæ›ã‹ã‚‹ã†ãˆã§treeã¯éª¨ãŒæŠ˜ã‚Œãã†ã ãªã¨æ€ã£ãŸã®ã§ã™ãŒã€æ—¢ã«gteeã¨ã„ã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒGitHubã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚</p><p><a href="https://github.com/ddddddO/gtree"><img src="https://gh-card.dev/repos/ddddddO/gtree.svg" alt="ddddddO/gtree - GitHub"></a></p><p>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®åˆ©ç”¨æ–¹æ³•ãªã©ã‚‚è¨˜äº‹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¦å®Ÿè£…ã«å›°ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p><p>â–¼å‚è€ƒ</p><ul><li><a href="https://zenn.dev/ddddddo/articles/ad97623a004496">Markdownå½¢å¼ã®å…¥åŠ›ã‹ã‚‰treeã‚’å‡ºåŠ›ã™ã‚‹CLI</a></li><li><a href="https://zenn.dev/ddddddo/articles/8cd85c68763f2e">Goã§treeã‚’è¡¨ç¾ã™ã‚‹</a></li><li><a href="https://zenn.dev/ddddddo/articles/460d12e8c07763">Markdownå½¢å¼ã®å…¥åŠ›ã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«&#x2F;ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ç”Ÿæˆã™ã‚‹CLI&#x2F;Goãƒ‘ãƒƒã‚±ãƒ¼ã‚¸</a></li></ul><p>ã¾ãŸã€gtreeã®ä½œè€…ã§ã‚ã‚‹<a href="https://twitter.com/ddddddOpppppp">@ddddddO</a>ã•ã‚“ã«ã¯streeã«<a href="https://github.com/orangekame3/stree/issues/9">issue</a>ã‚’èµ·ç¥¨ã„ãŸã ã„ã¦ãŠã‚Šã€æœ¬è¨˜äº‹å…¬é–‹å‰ã«è‡´å‘½çš„ãªãƒã‚°ã‚’ä¿®æ­£ã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚</p><p>gtreeã§streeã®æ©Ÿèƒ½ã®æ ¸ã¯é›£ãªãå®Ÿè£…ã™ã‚‹ã“ã¨ãŒã§ããŸãŸã‚ã€ç€æƒ³ã‹ã‚‰å®Ÿè£…å®Œäº†ã¾ã§ï¼‘æ—¥ã‚‚ã‹ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p><p>S3ã‚’treeã—ã¦ã¿ãŸããªã£ãŸã‚‰ãœã²streeã‚’åˆ©ç”¨ã—ã¦ã¿ã¦ãã ã•ã„ã€‚</p><p>æœ¬è¨˜äº‹ã‚’ãŠèª­ã¿ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚</p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Programming/">Programming</category>
      
      
      <category domain="https://future-architect.github.io/tags/AWS/">AWS</category>
      
      <category domain="https://future-architect.github.io/tags/OSS/">OSS</category>
      
      <category domain="https://future-architect.github.io/tags/Go/">Go</category>
      
      <category domain="https://future-architect.github.io/tags/S3/">S3</category>
      
      <category domain="https://future-architect.github.io/tags/CLI/">CLI</category>
      
      
      <comments>https://future-architect.github.io/articles/20230926a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>ChatGPTã§E2Eãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰è‡ªå‹•ä½œæˆ</title>
      <link>https://future-architect.github.io/articles/20230925a/</link>
      <guid>https://future-architect.github.io/articles/20230925a/</guid>
      <pubDate>Sun, 24 Sep 2023 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;img src=&quot;/images/20230925a/mv_logo.png&quot; alt=&quot;&quot; width=&quot;510&quot;</description>
          
        
      
      
      
      <content:encoded><![CDATA[<img src="/images/20230925a/mv_logo.png" alt="" width="510" height="210"><p>9&#x2F;7ã«è¡Œã‚ã‚ŒãŸæŠ€è‚²CAMPã‚¢ã‚«ãƒ‡ãƒŸã‚¢ã¨ã„ã†ã‚¤ãƒ™ãƒ³ãƒˆã§Playwrightã«ã¤ã„ã¦è©±ã‚’ã—ã¦ãã¾ã—ãŸã€‚ãƒ†ã‚¹ãƒˆã¨ã„ã†ã¨ã€è¨­è¨ˆæ‰‹æ³•ã§ã‚ã‚‹ã¨ã“ã‚ã®ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã¯åˆ¥ã¨ã—ã¦ã¡ã‚‡ã£ã¨æ¥­å‹™ã£ã½ã„æ„Ÿã˜ãŒã—ã¦å­¦ç”Ÿã•ã‚“ã«ã¯ã¡ã‚‡ã£ã¨éŸ¿ã‹ãªã„ã‹ãªã€ã¨ã„ã†ã®ã‚‚å¿ƒé…ã§ã—ãŸãŒã€ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã‚’è¦‹ã‚‹é™ã‚Šã€ã‚ã‹ã‚Šã‚„ã™ã‹ã£ãŸã¨ã„ã†å£°ã‚‚å¤šãã¦ã»ã£ã¨ã—ã¾ã—ãŸã€‚</p><p>æ¬¡ã®ã‚¹ãƒ©ã‚¤ãƒ‰ãŒä»Šå›ã®è³‡æ–™ã§ã™ã€‚ã‚¹ãƒ©ã‚¤ãƒ‰ã®å†…å®¹ã®å¤šãã¯<a href="https://future-architect.github.io/articles/20230821a/">Playwrighté€£è¼‰å§‹ã¾ã‚Šã¾ã™</a>ã«æ²è¼‰ã•ã‚Œã¦ã„ã‚‹è¨˜äº‹ã«ã‚‚ã¼ã¤ã¼ã¤ã‚ã‚‹å†…å®¹ã‚‚å¤šã„ï¼ˆAPIãƒ†ã‚¹ãƒˆã¯ãªã„ã§ã™ãŒï¼‰ã®ã§ã™ãŒã€æœ¬ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã§ã¯ç™ºè¡¨ã®æœ€å¾Œã«è§¦ã‚ŒãŸChatGPTãªã©ã®ç”ŸæˆAIã‚’ä½¿ã£ãŸE2Eãƒ†ã‚¹ãƒˆã®ç”Ÿæˆã«ã¤ã„ã¦èª¬æ˜ã—ã¦ã„ãã¾ã™ã€‚</p><iframe src="https://docs.google.com/presentation/d/e/2PACX-1vTHcJ_bPEFpogd1hOy16uhOUOwEupUcKopM9kRYXFBJ4MUbfIbCmBbGsjd-_EyBkw/embed?start=false&loop=false&delayms=3000" frameborder="0" width="100%" height="569" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe><p>ChatGPTãŒè©±é¡Œã‚’å¸­å·»ã—ã¦ã—ã°ã‚‰ãçµŒã¡ã¾ã™ã€‚ã¨ã¯ã„ãˆã€å†…è£½é–‹ç™ºã§ã®åˆ©ç”¨ä»¥å¤–ã¯ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰é–‹ç™ºã«ã°ã‚Šã°ã‚Šä½¿ã†ã€ã¿ãŸã„ãªå®£è¨€ã¯ã‚ã¾ã‚Šèã‹ãªã„æ°—ãŒã—ã¾ã™ã€‚åˆ©ç”¨ã‚’åˆ¶é™ã—ã¦ã„ã‚‹ä¼šç¤¾ã‚‚æ•°å¤šãã‚ã‚Šã¾ã™ã€‚</p><ul><li><a href="https://japan.zdnet.com/article/35207866/">ZDNET: ä¼æ¥­ã®75ï¼…ãŒã€ŒChatGPTã€åˆ©ç”¨ã‚’ç¦æ­¢ã™ã‚‹æ–¹å‘â€“BlackBerryèª¿æŸ»</a></li></ul><p>ç”ŸæˆAIã‚’ä½¿ã†ã‹ã©ã†ã‹åˆ¤æ–­ã®åˆ†ã‹ã‚Œç›®ã«ãªã‚Šãã†ãªå•é¡Œã¨ã—ã¦ã¯å¤§ããï¼“ã¤ã‚ã‚‹ã‚ˆã†ã«æ€ã„ã¾ã™ã€‚ã“ã‚Œä»¥å¤–ã«ã‚‚æ›¸ã‹ã‚ŒãŸå†…å®¹ã®å“è³ªæ‹…ä¿ã‚‚ã‚ã‚Šã¾ã™ãŒã€åˆ©ç”¨å´ã®åŠªåŠ›ã ã‘ã§ã¯å³ã—ã„å†…å®¹ãŒã“ã®3ã¤ã‹ãªã€ã¨ã€‚ã“ã®ã‚ãŸã‚Šã€æ¥­ç•Œå›£ä½“ã‹æ³•å¾‹ã®å°‚é–€å®¶ãŒãƒã‚·ãƒƒã¨ç™½é»’ã¤ã‘ã¦ãã‚Œã‚Œã°åˆ©ç”¨ã¯é€²ã¿ãã†ãªæ°—ãŒã—ã¾ã™ãŒã€ã‚‚ã†ã¡ã‚‡ã£ã¨å¾…ã¡ã§ã™ã‹ã­ã€‚</p><ul><li>ç”Ÿæˆã—ãŸè‘—ä½œç‰©ã®è‘—ä½œæ¨©</li><li>ç”Ÿæˆã®éç¨‹ã§æ©Ÿå¯†æƒ…å ±ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹å•é¡Œ</li><li>ç”Ÿæˆã—ãŸã‚‚ã®ãŒæ—¢å­˜ã®è‘—ä½œç‰©ã«ä¼¼ã¦ã—ã¾ã£ã¦å•é¡Œã«ãªã‚‹å¯èƒ½æ€§</li></ul><p>ç¾åœ¨ã®è‘—ä½œæ¨©æ³•ã§ã¯ã€ç”ŸæˆAIã®æˆæœç‰©ã«ã¯è‘—ä½œæ¨©ãŒåŠã°ãªã„ãŸã‚ã€ç´å“ç‰©ã¨ã—ã¦å‡ºã—ã¦å¯¾ä¾¡ã‚’ã‚‚ã‚‰ã†ã‚‚ã®ã«å¯¾ã—ã¦ä½¿ã†ã®ã¯å³ã—ã„ã§ã™ã­ã€‚è‡ªåˆ†ã®è‘—ä½œç‰©ã˜ã‚ƒãªã„ã‚‚ã®ã§ã™ã‹ã‚‰ã­ã€‚OSSã®é–‹ç™ºã‚‚åŸºæœ¬çš„ã«ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®è‘—ä½œæ¨©ãŒè‡ªåˆ†ã«ã‚ã‚‹å‰æã§ãã®åˆ©ç”¨ã®è‡ªç”±ã‚’æ±ºã‚ã‚‹ã‚‚ã®ãªã®ã§OSSé–‹ç™ºã«ã‚‚ä½¿ãˆãªãã†ã§ã™ã€‚ãã†ãªã‚‹ã¨å†…è£½é–‹ç™ºãã‚‰ã„ã—ã‹æ®‹ã‚‰ãªã„ã®ã‹ãªã€ã¨ã€‚</p><p>2ã¤ã‚ã¯å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã«ä½¿ã†ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ã‚ªãƒ—ãƒˆã‚¢ã‚¦ãƒˆã¨ã‹APIåˆ©ç”¨ã¨ã‹ã§ã ã„ã¶ç·©å’Œã•ã‚ŒãŸæ„Ÿã˜ãŒã‚ã‚Šã¾ã™ãŒã€ç„¡æ–™ç‰ˆã®ChatGPTã¨ã‹Bing Chatã‚’ä½¿ã†ã¨å•é¡ŒãŒã‚ã‚Šãã†ãªã®ã§ä¼æ¥­ã®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³æ•´å‚™ã¿ãŸã„ãªè©±ã§ã¾ã¨ã¾ã‚Šãã†ãªæ°—ã¯ã—ã¾ã™ã€‚</p><p>3ã¤ã‚ã«é–¢ã—ã¦ã¯ã€GitHubã¯æå®³ãŒç™ºç”Ÿã—ãŸã‚‰ä¿è¨¼ã™ã‚‹ã¨ã„ã†ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã«ãªã£ã¦ã„ã¾ã™ãŒã€ã—ã‹ã—å®Ÿéš›ã«è¨´è¨ŸãŒèµ·ãã¦ã©ã‚Œãã‚‰ã„ã§ä¿è¨¼ã•ã‚Œã‚‹ã®ã‹ãªã©ã€å®Ÿéš›ã«è£åˆ¤ãŒèµ·ã“ã£ã¦ã¿ãªã„ã¨ã“ã«ã¯ã€ã©ã‚Œãã‚‰ã„è£åˆ¤ã«æ™‚é–“ãŒã‹ã‹ã‚‹ã®ã‹ãªã©ãƒ“ã‚¸ãƒã‚¹ã®ãƒ€ãƒ¡ãƒ¼ã‚¸ã‚ã‹ã‚‰ãªã„ã“ã¨ãŒå¤šã„ã§ã™ã‚ˆã­ã€‚</p><p>ãƒ—ãƒ­ã‚°ãƒ©ãƒ ä»¥å¤–ã ã¨ç‰¹åŒ–AIã®å­¦ç¿’ç´ æã®æ¨©åˆ©ä¾µå®³ã¨ã‹ã€ä»–è€…è‘—ä½œç‰©ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹å•é¡Œã¨ã‹ã‚ã‚Šã¾ã™ãŒãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«ã¯ã‚ã¾ã‚Šãªã„æ°—ãŒã—ã¾ã™ã€‚ã“ã®ã‚ãŸã‚Šã¯ç´ äººåˆ¤æ–­ã¯å±ãªã„ã®ã§ã€å°‚é–€å®¶ãŒæ›¸ã„ã¦ãã‚ŒãŸãƒ–ãƒ­ã‚°ã¨ã‹ãŒå‚è€ƒã«ãªã‚Šã¾ã™ã€‚</p><ul><li><a href="https://storialaw.jp/blog/category/bigdata">STORIAæ³•å¾‹äº‹å‹™æ‰€: ãƒ–ãƒ­ã‚°&#x2F;äººå·¥çŸ¥èƒ½ï¼ˆï¼¡ï¼©ï¼‰ã€ãƒ“ãƒƒã‚°ãƒ‡ãƒ¼ã‚¿æ³•å‹™</a></li></ul><p>ãã‚“ãªã“ã‚“ãªã§ã€ç”ŸæˆAIã®åˆ©ç”¨ã¨ã—ã¦ã¯ã€ç¾çŠ¶ã¯æˆæœç‰©ã‚’ä½œã‚‹ãŸã‚ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’ã‚‚ã‚‰ã†ç”¨é€”ãŒç„¡é›£ã¨è¨€ãˆã¾ã™ã€‚ãã†ãªã‚‹ã¨ã€ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ãªã‚‰è‰¯ã•ãã†ã§ã™ã€‚ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®å“è³ªã¯ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã«å®¿ã‚‹ã®ã§ã¯ãªãã€ã‚ãã¾ã§ã‚‚ã‚³ãƒ¼ãƒ‰ã«å®¿ã‚‹ã‚‚ã®ã§ã‚ã‚Šã€ãƒ†ã‚¹ãƒˆã¯å“è³ªã®æ‚ªåŒ–ã‚’è¦‹ã¤ã‘ã‚‹ãŸã‚ã®æ‰‹æ®µã§ã™ã€‚å®Ÿéš›ã®æˆæœç‰©ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã«ã¯ç”Ÿæˆçµæœã¯å«ã¾ã‚Œã¾ã›ã‚“ã€‚</p><p>ã¾ã‚ãƒ†ã‚¹ãƒˆã®ã†ã¡ã€è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚‚å…¼ã­ã¦ã„ã‚‹ã‚ˆã†ãªã‚¢ã‚¸ãƒ£ã‚¤ãƒ«é–‹ç™ºã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã¯ä½¿ã‚ãªã„æ–¹ãŒè‰¯ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ç«äº‹ã«ãªã£ãŸã‚‰è£½å“ã‚³ãƒ¼ãƒ‰ã§ã¯ãªããƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æŒã£ã¦é€ƒã’ã‚ã€ã¨ã„ã†ãã‚‰ã„ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ãã®ã‚‚ã®ãŒå¤§äº‹ã¨ã„ã†æ–‡åŒ–ãªã®ã§ã€‚</p><p>ç”Ÿæˆã•ã‚ŒãŸã‚‚ã®ã¯è‡ªåˆ†ã®è‘—ä½œç‰©ã§ã¯ãªã„ã®ã§ã€ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã«ã¯ã€ŒChatGPTã§ç”Ÿæˆã—ã¾ã—ãŸã€ã¿ãŸã„ãªå¼•ç”¨å…ƒã‚’æ›¸ã„ã¦å¼•ç”¨ã¨ã—ã¦æ‰±ã†ã¨ã•ã‚‰ã«å®‰å…¨ãªã®ã§ã¯ãªã„ã‹ã¨æ€ã„ã¾ã™ã€‚ä»–è€…è‘—ä½œç‰©ã®åˆ©ç”¨ã®æ‰‹æ®µã¨ã—ã¦ã€‚</p><h1 id="Playwrightã®E2Eãƒ†ã‚¹ãƒˆã‚’ç”Ÿæˆã—ã¦ã¿ã‚‹"><a href="#Playwrightã®E2Eãƒ†ã‚¹ãƒˆã‚’ç”Ÿæˆã—ã¦ã¿ã‚‹" class="headerlink" title="Playwrightã®E2Eãƒ†ã‚¹ãƒˆã‚’ç”Ÿæˆã—ã¦ã¿ã‚‹"></a>Playwrightã®E2Eãƒ†ã‚¹ãƒˆã‚’ç”Ÿæˆã—ã¦ã¿ã‚‹</h1><p>æœ¬ãƒ–ãƒ­ã‚°ã§ã‚‚ã™ã§ã«Cypressã®è¨˜äº‹ãŒä½•æœ¬ã‹ã‚ã£ãŸã‚Šã€<a href="https://future-architect.github.io/articles/20211218a/">Software Designã§Cypressé€£è¼‰</a>ã‚’ã—ãŸã‚Šã€<a href="https://future-architect.github.io/articles/20230821a/">Playwrighté€£è¼‰</a>ã‚’ãŠã“ãªã£ãŸã‚Šã€E2Eãƒ†ã‚¹ãƒˆã«ã¤ã„ã¦ã¯ã‹ãªã‚Šè§¦ã‚Œã¦ã„ã¾ã™ã€‚</p><p>E2Eãƒ†ã‚¹ãƒˆã¯End to Endã®æ„å‘³ã§ã™ã€‚ã¾ã‚APIã§æä¾›ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã‚ã‚Œã°Eã¯APIã«ãªã‚‹ã¨ã¯æ€ã„ã¾ã™ãŒã€ã“ã“ã§ã¯æœ€çµ‚çš„ã«ã§ãã‚ãŒã£ãŸã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§æ“ä½œã™ã‚‹ãƒ†ã‚¹ãƒˆã®ã“ã¨ã‚’E2Eã¨å‘¼ã‚“ã§ã„ã¾ã™ã€‚æ—©é€Ÿã‚„ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚pageã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã¤ã„ã¦ã®æ–‡ãŒãªã„ã¨ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰å½¢å¼ã§ã¯ãªã„ã‚‚ã®ãŒå‡ºã¦ãã‚‹ã®ã§è¿½åŠ ã—ã¾ã—ãŸã€‚</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">æ¬¡ã®HTMLã«å¯¾ã—ã¦Playwrightã§ãƒ•ã‚©ãƒ¼ãƒ ã‚’åŸ‹ã‚ã¦é€ä¿¡ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ãã ã•ã„ã€‚pageã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯testã®ç¬¬äºŒå¼•æ•°ã‹ã‚‰å–å¾—ã—ã¦ãã ã•ã„ã€‚</span><br><span class="line"></span><br><span class="line">```</span><br><span class="line">&lt;form action=&quot;login.php&quot; method=&quot;post&quot;&gt;</span><br><span class="line">    &lt;label for=&quot;username&quot;&gt;Username:&lt;/label&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; id=&quot;username&quot; name=&quot;username&quot; required&gt;</span><br><span class="line"></span><br><span class="line">    &lt;label for=&quot;password&quot;&gt;Password:&lt;/label&gt;</span><br><span class="line">    &lt;input type=&quot;password&quot; id=&quot;password&quot; name=&quot;password&quot; required&gt;</span><br><span class="line">    &lt;input type=&quot;submit&quot; value=&quot;Login&quot;&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">```</span><br></pre></td></tr></table></figure><p>ã“ã®HTMLã¯å®Ÿéš›ã®æœ¬ç‰©ã®ãƒ•ã‚©ãƒ¼ãƒ ã§ã‚ã‚‹å¿…è¦ã¯ãªãã€ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯è¦ç´ (aã‚¿ã‚°ã€buttonã‚¿ã‚°ã€formã‚¿ã‚°ã€labelã‚¿ã‚°ã€mainã‚¿ã‚°ã€navã‚¿ã‚°ã€articleã‚¿ã‚°)ãã‚‰ã„ã ã‘ã«æ•´ç†ã—ã¦ã€idå±æ€§ã¨ã‹CSSã¨ã‹å…¨éƒ¨ã¨ã£ã±ã‚‰ã£ãŸã‚·ãƒ³ãƒ—ãƒ«ãªHTMLã‚’ä½œã£ã¦å…¥åŠ›ã«ã™ã‚‹æ–¹ãŒè‰¯ã„ã§ã—ã‚‡ã†ã€‚</p><p>ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; test, expect &#125; = <span class="built_in">require</span>(<span class="string">&#x27;@playwright/test&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ãƒ†ã‚¹ãƒˆ&#x27;</span>, <span class="keyword">async</span> (&#123; page &#125;) =&gt; &#123;</span><br><span class="line">  <span class="comment">// ãƒ†ã‚¹ãƒˆå¯¾è±¡ã®URLã«ç§»å‹•</span></span><br><span class="line">  <span class="keyword">await</span> page.<span class="title function_">goto</span>(<span class="string">&#x27;URLã‚’ã“ã“ã«å…¥åŠ›&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ãƒ•ã‚©ãƒ¼ãƒ ã®å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’åŸ‹ã‚ã‚‹</span></span><br><span class="line">  <span class="keyword">await</span> page.<span class="title function_">fill</span>(<span class="string">&#x27;input[name=&quot;username&quot;]&#x27;</span>, <span class="string">&#x27;ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’ã“ã“ã«å…¥åŠ›&#x27;</span>);</span><br><span class="line">  <span class="keyword">await</span> page.<span class="title function_">fill</span>(<span class="string">&#x27;input[name=&quot;password&quot;]&#x27;</span>, <span class="string">&#x27;ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ã“ã“ã«å…¥åŠ›&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é€ä¿¡ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</span></span><br><span class="line">  <span class="keyword">await</span> page.<span class="title function_">click</span>(<span class="string">&#x27;input[type=&quot;submit&quot;]&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é€ä¿¡å¾Œã®ãƒšãƒ¼ã‚¸ã§ç‰¹å®šã®æ¡ä»¶ã‚’ç¢ºèªã™ã‚‹ï¼ˆä¾‹: ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼‰</span></span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">expect</span>(page).<span class="title function_">toHaveText</span>(<span class="string">&#x27;ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã“ã“ã«å…¥åŠ›&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>CSSã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚’ä½¿ã£ã¦ã—ã¾ã£ã¦ã„ã‚‹ã®ãŒã„ã¾ã„ã¡ã§ã™ã­ã€‚</p><p>ã€Œãƒ–ãƒ©ã‚¦ã‚¶ã‚’æ“ä½œã€ã¨ã„ã£ã¦ã‚‚ã€ã‚ã‚‹ç¨‹åº¦HTMLã‚’ç†è§£ã—ãŸä¸Šã§ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚Playwrightã¯æ¨™æº–ã§ã€<code>getByLabel()</code>ã¨ã‹<code>getByRole()</code>ã¨ã„ã†APIã‚’æŒã£ã¦ã„ã¾ã™ã€‚Cypressã¯<a href="https://testing-library.com/docs/cypress-testing-library/intro/">@testing-library&#x2F;cypress</a>ã¨ã„ã†è¿½åŠ ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã‚ã‚Šã¾ã™ã€‚éå»ã®ãƒ–ãƒ­ã‚°ã§æ›¸ã„ãŸã‚ˆã†ã«ã€ã“ã‚Œã‚‰ã‚’ä½¿ã†ã¨HTMLã®ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã§ã¯ãªãã€ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰è¦‹ãŸè¦‹ãŸç›®ã€ã«è¿‘ã„ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ãŒæ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã‚Šã€ã‚ˆã‚ŠæŠ½è±¡åº¦ãŒé«˜ããªã£ã¦å£Šã‚Œã«ãããªã‚Šã¾ã™ã€‚</p><ul><li><a href="https://future-architect.github.io/articles/20210226/">ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£æƒ…å ±ã‚’ä½¿ã£ãŸå£Šã‚Œã«ãã„E2Eãƒ†ã‚¹ãƒˆ</a></li></ul><p>ã¨ã¯ã„ã†ã‚‚ã®ã®ã€ â€œè¦ç´ é¸æŠã¯CSSã‚»ãƒ¬ã‚¯ã‚¿ã‚’ä½¿ã‚ãšã«getByRoleã€getByLabelãªã©ã‚’ãªã‚‹ã¹ãä½¿ã£ã¦æ›¸ãæ›ãˆã¦ãã ã•ã„â€ ã¨ã„ã†ã®ã‚’æ›¸ã„ã¦ã‚‚ã€5å›ã«1å›ãã‚‰ã„ã—ã‹ãªã‹ãªã‹æ›¸ã„ã¦ãã‚Œãªã„ã§ã™ã­ã€‚ã†ã¾ãè¡Œã£ãŸæ™‚ã®ã‚³ãƒ¼ãƒ‰ã¯ã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> usernameInput = <span class="keyword">await</span> page.<span class="title function_">getByLabel</span>(<span class="string">&#x27;Username:&#x27;</span>);</span><br><span class="line"><span class="keyword">await</span> usernameInput.<span class="title function_">fill</span>(<span class="string">&#x27;your_username&#x27;</span>); <span class="comment">// Replace with the actual username</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> passwordInput = <span class="keyword">await</span> page.<span class="title function_">getByLabel</span>(<span class="string">&#x27;Password:&#x27;</span>);</span><br><span class="line"><span class="keyword">await</span> passwordInput.<span class="title function_">fill</span>(<span class="string">&#x27;your_password&#x27;</span>); <span class="comment">// Replace with the actual password</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Submit the form</span></span><br><span class="line"><span class="keyword">const</span> submitButton = <span class="keyword">await</span> page.<span class="title function_">getByRole</span>(<span class="string">&#x27;button&#x27;</span>, &#123; <span class="attr">name</span>: <span class="string">&#x27;Login&#x27;</span> &#125;);</span><br><span class="line"><span class="keyword">await</span> submitButton.<span class="title function_">click</span>()</span><br></pre></td></tr></table></figure><p>ã“ã“ã¯æ‰‹ä¿®æ­£ã™ã‚‹å¿…è¦ãŒã‚ã‚Šãã†ã§ã™ã€‚Bardã¨ã‹Bing Chatã‚’ä½¿ã£ã¦ã‚‚ã ã„ãŸã„åŒã˜ã§ã—ãŸãŒã€Bing Chatã¯ã€ŒgetByRoleã€getByLabelã‚’ä½¿ã£ã¦æ›¸ãæ›ãˆã¦ãã ã•ã„ã€ã¨ã„ã†ã¨ã€ãã“ãã“ã®æ‰“ç‡ã§æ›¸ãæ›ãˆã¦ãã‚Œã¾ã—ãŸãŒã€ãŸã¾ã«å…¬å¼ã®1.27ã‹ã‚‰æä¾›ã•ã‚ŒãŸAPIã§ã¯ãªã<a href="https://github.com/testing-library/playwright-testing-library">@testing-library&#x2F;playwright</a>ãƒ™ãƒ¼ã‚¹ã®ã‚³ãƒ¼ãƒ‰ã‚’å‡ºåŠ›ã™ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã—ãŸã€‚ç‹¬å‰µçš„ã€ãƒãƒ©ãƒ³ã‚¹ã€å®‰å®šå•ã‚ãšã€‚</p><h1 id="Cypresså‘ã‘ã¯ã©ã†ã‹ï¼Ÿ"><a href="#Cypresså‘ã‘ã¯ã©ã†ã‹ï¼Ÿ" class="headerlink" title="Cypresså‘ã‘ã¯ã©ã†ã‹ï¼Ÿ"></a>Cypresså‘ã‘ã¯ã©ã†ã‹ï¼Ÿ</h1><p>å®Ÿã¯Cypresså‘ã‘ã ã¨ã°ã£ã¡ã‚Šæ±ºã¾ã‚Šã¾ã™ã€‚</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">æ¬¡ã®HTMLã«å¯¾ã—ã¦Cypressã§ãƒ•ã‚©ãƒ¼ãƒ ã‚’åŸ‹ã‚ã¦é€ä¿¡ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ãã ã•ã„ã€‚testing-library/cypressã‚’ä½¿ã£ã¦ãã ã•ã„</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@testing-library/cypress/add-commands&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">describe</span>(<span class="string">&#x27;Login Form&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">it</span>(<span class="string">&#x27;should fill out the form and submit&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    cy.<span class="title function_">visit</span>(<span class="string">&#x27;/&#x27;</span>); <span class="comment">// Replace with the actual URL</span></span><br><span class="line"></span><br><span class="line">    cy.<span class="title function_">findByLabelText</span>(<span class="string">&#x27;Username:&#x27;</span>).<span class="title function_">type</span>(<span class="string">&#x27;your-username&#x27;</span>);</span><br><span class="line">    cy.<span class="title function_">findByLabelText</span>(<span class="string">&#x27;Password:&#x27;</span>).<span class="title function_">type</span>(<span class="string">&#x27;your-password&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    cy.<span class="title function_">findByText</span>(<span class="string">&#x27;Login&#x27;</span>).<span class="title function_">click</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// You can add assertions or further testing logic here</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ã„ã„æ„Ÿã˜ã§ã™ã­ã€‚ã“ã®ã¾ã¾ä½¿ãˆãã†ãªå‹¢ã„ã€‚Cypressã¯ãšã£ã¨å®‰å®šã—ãŸAPIã‚’æä¾›ã—ã€Playwrightã¯ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«æ©Ÿèƒ½è¿½åŠ ã—ãŸã‚Šã—ã¦ã„ã‚‹å°è±¡ãŒã‚ã‚Šã¾ã™ãŒã€ã“ã‚ŒãŒç”ŸæˆAIçµŒç”±ã«ä½¿ã„å‹æ‰‹ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹ã¨ã„ã†ã®ã¯ãªã‹ãªã‹èˆˆå‘³æ·±ã„çµæœã§ã™ã€‚</p><h1 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h1><p>Playwrightã®æ–¹ãŒã¡ã‚‡ã£ã¨ã‚¤ãƒã‚¤ãƒã§ã—ãŸãŒã€å°†æ¥æ€§ã¯æ„Ÿã˜ã‚‹çµæœã¯å¾—ã‚‰ã‚Œã¾ã—ãŸã€‚HTMLã‚’æ¸¡ã™ã ã‘ã§ãã‚Œã‚’æ“ä½œã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ãã‚Œã¾ã—ãŸã€‚Cypressã¯ã°ã£ã¡ã‚Šã§ã—ãŸã®ã§ã€ã„ã£ãã®ã“ã¨Playwrightã§ãƒ†ã‚¹ãƒˆã‚’æ›¸ãå ´åˆã«ã€Cypresså‘ã‘ã«ç”Ÿæˆã—ãŸã‚³ãƒ¼ãƒ‰ã‚’ä½•ã‹ã—ã‚‰ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§æ›¸ãæ›ãˆã¦ä½¿ã†æ–¹ãŒè‰¯ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><p>ä»Šå›ã¯ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ã ã‘ã§ã™ãŒã€ã‚ˆã‚Šè¤‡é›‘ãªãƒ•ã‚©ãƒ¼ãƒ ã‚„ãƒ¡ãƒ‹ãƒ¥ãƒ¼é¸æŠãªã©ã‚‚ä½œã£ã¦ãã‚Œã‚‹ã§ã—ã‚‡ã†ã—ã€å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ãƒ†ãƒ¼ãƒ–ãƒ«ã«ã—ã¦ãŠã„ã¦ã€è¤‡æ•°ã®ã‚±ãƒ¼ã‚¹ã‚’ã¾ã¨ã‚ã¦ç”Ÿæˆã¨ã‹ã‚‚ã‚„ã£ã¦ãã‚Œãã†ã§ã™ã€‚ã€Œã“ã†ã—ãŸã„ã€ã¨ã„ã†è‡ªç„¶è¨€èªã§æ›¸ã‹ã‚ŒãŸä»•æ§˜æ›¸ã¨HTMLã‚’æ¸¡ã›ã°ã‚ã‚‹ç¨‹åº¦ä½œã£ã¦ãã‚Œã‚‹è¦‹è¾¼ã¿ã¯ã‚ã‚Šãã†ãªã®ã§ã€ã†ã¾ãä½¿ãˆã°ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’é‡ç”£ã™ã‚‹æ‰‹é–“ã¯å°‘ã—æ¸›ã‚‰ã›ãã†ã§ã™ã€‚</p><p>ã‚‚ã¡ã‚ã‚“ã€çŸ¥è­˜ã‚¼ãƒ­ã§ã„ããªã‚Šã§ãã‚‹ã‹ã¨ã„ã†ã¨ã€ã‚„ã¯ã‚Šã‚ã‚‹ç¨‹åº¦çŸ¥è­˜ãŒã‚ã‚‹äººã˜ã‚ƒãªã„ã¨ä½¿ã„ã“ãªã›ãªã„æ„Ÿã˜ã¯ã‚ã‚Šã¾ã—ãŸã€‚</p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Programming/">Programming</category>
      
      
      <category domain="https://future-architect.github.io/tags/%E7%99%BB%E5%A3%87%E3%83%AC%E3%83%9D%E3%83%BC%E3%83%88/">ç™»å£‡ãƒ¬ãƒãƒ¼ãƒˆ</category>
      
      <category domain="https://future-architect.github.io/tags/Cypress/">Cypress</category>
      
      <category domain="https://future-architect.github.io/tags/ChatGPT/">ChatGPT</category>
      
      <category domain="https://future-architect.github.io/tags/Playwright/">Playwright</category>
      
      <category domain="https://future-architect.github.io/tags/%E3%83%97%E3%83%AD%E3%83%B3%E3%83%97%E3%83%88/">ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ</category>
      
      <category domain="https://future-architect.github.io/tags/E2E/">E2E</category>
      
      <category domain="https://future-architect.github.io/tags/%E6%8A%80%E8%82%B2CAMP%E3%82%A2%E3%82%AB%E3%83%87%E3%83%9F%E3%82%A2/">æŠ€è‚²CAMPã‚¢ã‚«ãƒ‡ãƒŸã‚¢</category>
      
      <category domain="https://future-architect.github.io/tags/%E7%99%BB%E5%A3%87%E8%B3%87%E6%96%99/">ç™»å£‡è³‡æ–™</category>
      
      
      <comments>https://future-architect.github.io/articles/20230925a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>æ–°å…¥ç¤¾å“¡ãŒã€Œãƒªãƒ¼ãƒ€ãƒ–ãƒ«ã‚³ãƒ¼ãƒ‰ã€ã‚’èª­ã‚“ã§ã¿ãŸ</title>
      <link>https://future-architect.github.io/articles/20230922a/</link>
      <guid>https://future-architect.github.io/articles/20230922a/</guid>
      <pubDate>Thu, 21 Sep 2023 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;img src=&quot;/images/20230922a/top.jpeg&quot; alt=&quot;top&quot; width=&quot;400&quot; height=&quot;567&quot; loading=&quot;lazy&quot;&gt;

&lt;p&gt;&lt;a</description>
          
        
      
      
      
      <content:encoded><![CDATA[<img src="/images/20230922a/top.jpeg" alt="top" width="400" height="567" loading="lazy"><p><a href="https://www.oreilly.co.jp/books/9784873115658/">Oâ€™Reilly Japan ãƒªãƒ¼ãƒ€ãƒ–ãƒ«ã‚³ãƒ¼ãƒ‰</a></p><h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>ã¯ã˜ã‚ã¾ã—ã¦ã€‚ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã«2023å¹´4æœˆã«æ–°å’å…¥ç¤¾ã—ãŸé–¢æ ¹ã§ã™ã€‚ä»Šå›ã®æŠ•ç¨¿ãŒåˆã®æŠ•ç¨¿ã¨ãªã‚Šã¾ã™ã€‚</p><p>æœ€åˆã®è¨˜äº‹ã¯ä½•ãŒè‰¯ã„ã‹ï¼Ÿã¨è€ƒãˆãŸã®ã§ã™ãŒã€æ¥­å‹™ã®äº‹ã‚’è€ƒãˆã‚‹ã¨ã¾ãšã¯å¯èª­æ€§ã®é«˜ã„ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã‘ãŸæ–¹ãŒè‰¯ã„ã¨è€ƒãˆã€æ•™æã«ã€Œ<a href="https://www.oreilly.co.jp/books/9784873115658/">ãƒªãƒ¼ãƒ€ãƒ–ãƒ«ã‚³ãƒ¼ãƒ‰</a>ã€ã‚’é¸ã³ã¾ã—ãŸã€‚åè‘—ã§ã™ã­ã€‚è¶…æœ‰åãªæœ¬ãªã®ã«å…¥ç¤¾ã™ã‚‹ã¾ã§èª­ã‚“ã ã“ã¨ãŒã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ã¨ã„ã†äº‹ã§ã“ã‚Œã‚’æ©Ÿã«å­¦ã‚“ã§ã„ãã¾ã™ã€‚</p><p>ã—ã‹ã—ã€ãŸã æœ¬ã®å†…å®¹ã‚’ã¾ã¨ã‚ã¦ã„ã¦ã‚‚é¢ç™½ãç„¡ã„ãªãƒ¼ã¨æ„Ÿã˜ãŸãŸã‚ã€ç§ãŒåˆã‚ã¦ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚’è§¦ã£ãŸå¤§å­¦1å¹´æ€§ã®æ™‚ã®Cè¨€èªã®ã‚³ãƒ¼ãƒ‰ã‚’å–ã‚Šå‡ºã—ã¦ãã¦ã€ãã‚Œã‚’ä¿®æ­£ã—ãªãŒã‚‰å­¦ã¶å½¢å¼ã«ã—ã¾ã™ã€‚å†…å®¹ã¯ã‹ãªã‚Šåˆæ­©çš„ã§ã™ãŒã€ç„¦ã‚‰ãšåŸºæœ¬ã‹ã‚‰ã§ã™ã€‚</p><p>ä»Šå›ã®å†…å®¹ã¯<a href="https://www.oreilly.co.jp/books/9784873115658/">ãƒªãƒ¼ãƒ€ãƒ–ãƒ«ã‚³ãƒ¼ãƒ‰</a>ã®ç¬¬ä¸€éƒ¨ã€Œè¡¨é¢ä¸Šã®æ”¹å–„ã€ã‚’å‚è€ƒã«ã—ã¦ã„ã¾ã™ã€‚æœ¬ã®è©³ã—ã„ç« ç«‹ã¦ãªã©ã¯<a href="https://www.oreilly.co.jp/books/9784873115658/">ã“ã¡ã‚‰</a>ã®ç›®æ¬¡ã‚’ã”ç¢ºèªãã ã•ã„ã€‚</p><h1 id="æœ€å¤§ç…§åº¦ã‚’ç™ºè¦‹ã™ã‚‹ã‚³ãƒ¼ãƒ‰"><a href="#æœ€å¤§ç…§åº¦ã‚’ç™ºè¦‹ã™ã‚‹ã‚³ãƒ¼ãƒ‰" class="headerlink" title="æœ€å¤§ç…§åº¦ã‚’ç™ºè¦‹ã™ã‚‹ã‚³ãƒ¼ãƒ‰"></a>æœ€å¤§ç…§åº¦ã‚’ç™ºè¦‹ã™ã‚‹ã‚³ãƒ¼ãƒ‰</h1><p>ã“ã¡ã‚‰ã®ã‚³ãƒ¼ãƒ‰ã¯ç…§åº¦ã‚»ãƒ³ã‚µãƒ¼ã‹ã‚‰æœ€å¤§ç…§åº¦ã‚’ç™ºè¦‹ã™ã‚‹ãŸã‚ã®ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚<br>6å¹´å‰ã®å½“æ™‚ã®ã‚³ãƒ¼ãƒ‰ã‚’ã»ã¼ãã®ã¾ã¾å–ã‚Šå‡ºã—ã¦ã„ã¾ã™(ä¸€éƒ¨çœç•¥ã¯ã—ã¦ã„ã¾ã™)ã€‚</p><div class="note warn" style="background: #fdf9e2; padding:16px; margin:24px 12px; border-radius:8px;">  <span class="fa fa-fw fa-check-circle"></span><p>å¯èª­æ€§ã®ä½ã„ç®‡æ‰€ã‚’ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">float</span> a[<span class="number">20</span>];</span><br><span class="line">    <span class="type">float</span> max = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; ++i) &#123;</span><br><span class="line">        a[i] = lum.lux();  <span class="comment">//ã‚»ãƒ³ã‚µãƒ¼ã‹ã‚‰ç…§åº¦ã‚’å–å¾—</span></span><br><span class="line">        <span class="keyword">if</span>(max &lt; a[i])&#123;</span><br><span class="line">            max = a[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%7.1f[lux]\r\n&quot;</span>,a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h2 id="å¤‰æ•°åãªã©ã‚’å¯èª­æ€§ã®é«˜ã„ã‚‚ã®ã«å¤‰ãˆã‚ˆã†"><a href="#å¤‰æ•°åãªã©ã‚’å¯èª­æ€§ã®é«˜ã„ã‚‚ã®ã«å¤‰ãˆã‚ˆã†" class="headerlink" title="å¤‰æ•°åãªã©ã‚’å¯èª­æ€§ã®é«˜ã„ã‚‚ã®ã«å¤‰ãˆã‚ˆã†"></a>å¤‰æ•°åãªã©ã‚’å¯èª­æ€§ã®é«˜ã„ã‚‚ã®ã«å¤‰ãˆã‚ˆã†</h2><p>ä¸Šã‹ã‚‰é †ã«è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><p>ã¾ãš<code>a</code>ãŒä½•ã‚’æŒ‡ã—ã¦ã„ã‚‹ã®ã‹ãŒå…¨ãã‚ã‹ã‚Šã¾ã›ã‚“ã­ã€‚ã‚³ãƒ¼ãƒ‰å…¨ä½“ã‚’è¦‹ã‚Œã°ã€<strong>ã‚»ãƒ³ã‚µãƒ¼ã‹ã‚‰å–å¾—ã•ã‚ŒãŸç…§åº¦ã‚’æ ¼ç´ã™ã‚‹é…åˆ—</strong>ã¨ç†è§£ã§ãã¾ã™ãŒã€ã‚³ãƒ¼ãƒ‰å…¨ä½“ã‚’èª­ã¾ãªãã¦ã¯ãªã‚‰ãªã„æ™‚ç‚¹ã§ä¸è¦ªåˆ‡ã§ã™ã€‚</p><p>ã“ã“ã§ã®ç…§åº¦ã®å˜ä½ã¯<code>Lux</code>ã§ã‚ã‚‹ãŸã‚<code>luxValues</code>ã‚„ã€ç…§åº¦ã®è‹±èªãŒilluminanceã§ã‚ã‚‹ã“ã¨ã‹ã‚‰ã€illuminanceã‚’æ ¼ç´ã™ã‚‹arrayã¨ã„ã†äº‹ã§<code>illuminanceArray</code>ã‚‚è‰¯ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã­ã€‚ã“ã†æ›¸ãã“ã¨ã«ã‚ˆã‚Šã€ã“ã®åå‰ã‚’è¦‹ã‚‹ã ã‘ã§ã‚‚ã€ã€Œã“ã‚Œã«ã¯ç…§åº¦ã®å€¤ãŒè¤‡æ•°æ ¼ç´ã•ã‚Œã¦ã„ã‚‹ã®ã ãªã€ã¨ã„ã†ã®ãŒèª°ãŒè¦‹ã¦ã‚‚åˆ†ã‹ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚è¦ªåˆ‡ã§ã™ã­ã€‚</p><p>ãã‚Œã§è¨€ã†ã¨ã€floatå‹ã®å¤‰æ•°ã€maxã¨ã„ã†ã®ã‚‚ä¸è¦ªåˆ‡ã§ã™ã€‚å…ˆã»ã©ã®<code>a</code>ã‚ˆã‚Šã¯ã€ã“ã®å¤‰æ•°ã«ã¯æœ€å¤§å€¤ãŒå«ã¾ã‚Œã‚‹ã®ã ãªã€ã¨åˆ†ã‹ã‚Šã¾ã™ãŒã€ä½•ã®æœ€å¤§å€¤ãªã®ã‹ï¼Ÿã¯å¤‰æ•°åã‹ã‚‰å…¨ãåˆ†ã‹ã‚Šã¾ã›ã‚“ã€‚ã“ã‚Œã‚‚åŒã˜ã‚ˆã†ã«<code>maxIlluminance</code>ã‚„ã€<code>maxLuxValue</code>ãªã©ãŒã‚ã‚‹ã§ã—ã‚‡ã†ã‹ã€‚ã“ã‚Œã§ã‚ã‚Œã°ä¸€ç›®è¦‹ã‚Œã°ä½•ã®æœ€å¤§å€¤ãªã®ã‹ãŒåˆ†ã‹ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><p>ã¾ã 2ã¤ã—ã‹ä¿®æ­£ã—ã¦ã„ã¾ã›ã‚“ãŒã€å…ˆã»ã©ã®ã‚³ãƒ¼ãƒ‰ã«åæ˜ ã•ã›ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">float</span> illuminanceArray[<span class="number">20</span>];</span><br><span class="line">    <span class="type">float</span> maxIlluminance = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; ++i) &#123;</span><br><span class="line">        illuminanceArray[i] = lum.lux();  <span class="comment">//ã‚»ãƒ³ã‚µãƒ¼ã‹ã‚‰ç…§åº¦ã‚’å–å¾—</span></span><br><span class="line">        <span class="keyword">if</span>(maxIlluminance &lt; illuminanceArray[i])&#123;</span><br><span class="line">            maxIlluminance = illuminanceArray[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%7.1f[lux]\r\n&quot;</span>,illuminanceArray[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ–‡å­—æ•°ã¯å¤šããªã‚Šã¾ã—ãŸãŒã€å„è¡Œã§ä½•ã‚’ã—ã¦ã„ã‚‹ã®ã‹ãŒåˆ†ã‹ã‚Šã‚„ã™ããªã‚Šã¾ã—ãŸã€‚</p><p>ä½¿ç”¨ã™ã‚‹è‹±å˜èªç­‰ã¯ã€Œç…§åº¦ã€€è‹±èªã€ã‚„ã€Œç…§åº¦ã€€ç¿»è¨³ã€ã®ã‚ˆã†ã«ã™ã‚Œã°å‡ºã¦ãã¾ã™ã€‚</p><p>ã¾ã¨ã‚ã¾ã™ã¨ã€å¤‰æ•°ã®å‘½åã‚’ã™ã‚‹éš›ã¯ä»¥ä¸‹ã«æ³¨æ„ã™ã‚Œã°ã„ã„ã§ã—ã‚‡ã†ã‹ã€‚</p><div class="note alert" style="background: #feebee; padding:16px; margin:24px 12px; border-radius:8px;">  <span class="fa fa-fw fa-check-circle"></span><ul><li>ãã®å¤‰æ•°ã«å¿…è¦ãªæƒ…å ±ã‚’å…¥ã‚Œã‚‹ã€‚ä½•ã«ä½¿ã†å¤‰æ•°ãªã®ã‹ï¼Ÿ(ä»Šå›ãªã‚‰ç…§åº¦ã ã‹ã‚‰illuminance)</li><li>é¢å€’ã ã‹ã‚‰ã¨ãƒ­ãƒ¼ãƒå­—ã§æ›¸ã‹ãªã„ã€‚(shodoArrayã¨ã‹ã¯è‰¯ããªã„)</li><li>å¤‰æ•°ã‚’æ›¸ãã¨ãã¯ãƒ­ãƒ¼ãƒ¯ãƒ¼ã‚­ãƒ£ãƒ¡ãƒ«ã‚±ãƒ¼ã‚¹ã§ã€‚<br>(å˜èªã‚’ç¹‹ã’ã‚‹éš›ã«ã€2å˜èªç›®ä»¥é™ã®é ­æ–‡å­—ã‚’å¤§æ–‡å­—ã«ã™ã‚‹ã€‚<code>lowerCamelCase</code>, <code>firstName</code>ã€<code>maxLuxValue</code>ãªã©)</li></ul></div><h3 id="è£œè¶³èª¬æ˜-å‘½åã™ã‚‹éš›ã¯å…¨ã¦ãƒ­ãƒ¼ãƒ¯ãƒ¼ã‚­ãƒ£ãƒ¡ãƒ«ã‚±ãƒ¼ã‚¹ã«ã™ã‚‹ã¹ãï¼Ÿ"><a href="#è£œè¶³èª¬æ˜-å‘½åã™ã‚‹éš›ã¯å…¨ã¦ãƒ­ãƒ¼ãƒ¯ãƒ¼ã‚­ãƒ£ãƒ¡ãƒ«ã‚±ãƒ¼ã‚¹ã«ã™ã‚‹ã¹ãï¼Ÿ" class="headerlink" title="è£œè¶³èª¬æ˜ ã€€å‘½åã™ã‚‹éš›ã¯å…¨ã¦ãƒ­ãƒ¼ãƒ¯ãƒ¼ã‚­ãƒ£ãƒ¡ãƒ«ã‚±ãƒ¼ã‚¹ã«ã™ã‚‹ã¹ãï¼Ÿ"></a>è£œè¶³èª¬æ˜ ã€€å‘½åã™ã‚‹éš›ã¯å…¨ã¦ãƒ­ãƒ¼ãƒ¯ãƒ¼ã‚­ãƒ£ãƒ¡ãƒ«ã‚±ãƒ¼ã‚¹ã«ã™ã‚‹ã¹ãï¼Ÿ</h3><p>å¤‰æ•°ã‚’å‘½åã™ã‚‹éš›ã«ã‚ˆãä½¿ã†å½¢å¼ãŒã„ãã¤ã‹ã‚ã‚Šã¾ã™ã€‚</p><ul><li><strong>ã‚¢ãƒƒãƒ‘ãƒ¼ã‚­ãƒ£ãƒ¡ãƒ«ã‚±ãƒ¼ã‚¹</strong><ul><li>å˜èªã‚’ç¹‹ã’ã‚‹éš›ã«ã€å…¨ã¦ã®å˜èªã®é ­æ–‡å­—ã‚’å¤§æ–‡å­—ã«ã™ã‚‹</li><li><code>UpperCamelCase</code>, <code>UpdateEmployee</code>, <code>EditEmployee</code>ãªã©</li></ul></li><li><strong>ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹</strong><ul><li>å˜èªã‚’ç¹‹ã’ã‚‹éš›ã«ã€<code>_</code>(ã‚¢ãƒ³ãƒ€ãƒ¼ãƒãƒ¼)ã§ã¤ãªã’ã‚‹</li><li><code>local_file</code>, <code>employee_id</code>ãªã©</li></ul></li><li><strong>ã‚¢ãƒƒãƒ‘ãƒ¼ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹&#x2F;ã‚³ãƒ³ã‚¹ã‚¿ãƒ³ãƒˆã‚±ãƒ¼ã‚¹</strong><ul><li>å˜èªã‚’ç¹‹ã’ã‚‹éš›ã«ã€<code>_</code>(ã‚¢ãƒ³ãƒ€ãƒ¼ãƒãƒ¼)ã§ã¤ãªã’ã¤ã¤ã€å…¨ã¦ã®æ–‡å­—ã‚’å¤§æ–‡å­—ã«ã™ã‚‹</li><li><code>ARRAY_SIZE</code>, <code>DEFAULT_ID</code>ãªã©</li></ul></li></ul><p>ãƒªãƒ¼ãƒ€ãƒ–ãƒ«ã‚³ãƒ¼ãƒ‰ã®2.6ç¯€ã€Œåå‰ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§æƒ…å ±ã‚’ä¼ãˆã‚‹ã€ã§ã¯ã“ã®åå‰ã®æ›¸ãæ–¹ã§å¤‰æ•°ã‚„é–¢æ•°ã«æƒ…å ±ã‚’æŒãŸã›ã‚‹æ–¹æ³•ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚</p><p>ä¾‹ãˆã°ã€</p><ul><li>ã‚¯ãƒ©ã‚¹åã‚„ãƒ¡ã‚½ãƒƒãƒ‰åã«ã¯ã‚¢ãƒƒãƒ‘ãƒ¼ã‚­ãƒ£ãƒ¡ãƒ«ã‚±ãƒ¼ã‚¹</li><li>ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°ã«ã¯ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹</li><li>å®šæ•°ã«ã¯ã‚¢ãƒƒãƒ‘ãƒ¼ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹</li></ul><p>ãªã©ã§ã™ã€‚</p><p>ã“ã†ã™ã‚‹äº‹ã§ã€ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚“ã§ã„ã‚‹éš›ã«ã€Œã“ã®<code>UpdateEmployee</code>ã¯ã‚¢ãƒƒãƒ‘ãƒ¼ã‚­ãƒ£ãƒ¡ãƒ«ã‚±ãƒ¼ã‚¹ã ãªã€‚ã¤ã¾ã‚Šã‚¯ãƒ©ã‚¹åã‹ãƒ¡ã‚½ãƒƒãƒ‰ã ã€ãªã©ã¨åå‰ã¨ã¯åˆ¥ã«æƒ…å ±ã‚’ç°¡å˜ã«ä»˜åŠ å‡ºæ¥ã¾ã™ã€‚</p><p>ã—ã‹ã—ã“ã®ã‚ãŸã‚Šã®ãƒ«ãƒ¼ãƒ«ã¯é–‹ç™ºãƒãƒ¼ãƒ ãŒæ¡ç”¨ã™ã‚‹ã€è¨€èªã‚„é–‹ç™ºè¦ç´„ã«ä¾å­˜ã™ã‚‹ã¨æ€ã„ã¾ã™ã€‚ã“ã‚Œã«ã¤ã„ã¦ã¯å‹æ‰‹ã«å¤‰æ›´ã™ã‚‹ã®ã§ã¯ãªãã€ãƒãƒ¼ãƒ ã®æ–¹é‡ã«å¾“ã„ã¾ã—ã‚‡ã†ã€‚</p><div class="note info" style="background: #e5f8e2; padding:16px; margin:24px 12px; border-radius:8px;">  <span class="fa fa-fw fa-check-circle"></span><ul><li>å…¨ã¦ã‚­ãƒ£ãƒ¡ãƒ«ã‚±ãƒ¼ã‚¹ã«ã™ã‚‹ã®ãŒè‰¯ã„ã¨ã‚‚é™ã‚‰ãªã„</li><li>å‘½åè¦å‰‡ã¯ä½¿ã„åˆ†ã‘ã‚‹ã¨æƒ…å ±é‡ã‚’ä»˜åŠ ã§ãã‚‹</li></ul></div><h2 id="ãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼"><a href="#ãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼" class="headerlink" title="ãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼"></a>ãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼</h2><p>æ¬¡ã«æ°—ã«ãªã‚‹ã®ã¯ä½•ã§ã—ã‚‡ã†ã‹ã€‚</p><p>å¯èª­æ€§ã€ã¨ã„ã†ã‚ˆã‚Šã¯å†åˆ©ç”¨æ€§ã‚’é«˜ã‚ã‚‹éƒ¨åˆ†ã«ãªã‚Šã¾ã™ãŒã€ã‚³ãƒ¼ãƒ‰ã®ä¸­ã«<code>20</code>ã¨ã„ã†æ•°å€¤ãŒ2å›å‡ºã¦ã„ã‚‹ã®ãŒæ°—ã«ãªã‚Šã¾ã™ã­ã€‚ä»Šå›ã¯å°ã•ã„ã‚³ãƒ¼ãƒ‰ãªã®ã§ã€å•é¡Œã«ã¯ãªã£ã¦ã„ã¾ã›ã‚“ãŒã€ã‚ˆã‚Šå¤§è¦æ¨¡ãªã‚³ãƒ¼ãƒ‰ã«ãªã‚Šã€<code>20</code>ã¨ã„ã†æ•°å€¤ãŒ100å›å‡ºã¦ããŸã¨ã—ãŸã‚‰ã©ã†ã—ã¾ã—ã‚‡ã†ã€‚å…¨ã¦ä¸€ã€…ä¿®æ­£ã—ã¦ã„ãŸã‚‰æ—¥ãŒæš®ã‚Œã¾ã™ã­ã€‚</p><p>ã“ã†ã„ã£ãŸ<strong>ç›´ã«è¨˜è¿°ã•ã‚ŒãŸæ•°å€¤</strong>ã®ã“ã¨ã‚’<strong>ãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼</strong>ã¨å‘¼ã³ã¾ã™ã€‚</p><p>20ã¨ã„ã†æ•°å€¤ã«ã¯ä¸€è¦‹æƒ…å ±ãŒã‚ã‚Šãã†ã§ã€ä½•ã‚‚æƒ…å ±ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p><p>ä¾‹ãˆã°</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; ++i) &#123;</span><br></pre></td></tr></table></figure><p>ã“ã‚Œã ã‘æ€¥ã«è¦‹ã›ã‚‰ã‚Œã¦ã‚‚ä½•ã®ã‚³ãƒ¼ãƒ‰ã‹å…¨ãæƒ³åƒãŒã§ãã¾ã›ã‚“ã­ã€‚</p><p>20å›ä½•ã‹ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ãªã®ã‹ã€é…åˆ—ã®ä¸­èº«ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ãªã®ã‹ã€‚</p><p>ãã“ã§å®šæ•°ã®å‡ºç•ªã§ã™(Cè¨€èªã®å ´åˆã¯é…åˆ—ã®ã‚µã‚¤ã‚ºæŒ‡å®šã‚’ã™ã‚‹éš›ã«constã¯ä½¿ãˆãšã€ãƒã‚¯ãƒ­ã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™)ã€‚ã“ã®<code>20</code>ã¨ã„ã†æ•°å€¤ã¯<strong>ç…§åº¦ãŒæ ¼ç´ã•ã‚ŒãŸé…åˆ—ã®ã‚µã‚¤ã‚º</strong>ã‚’è¡¨ã™ãŸã‚ã€<code>ILLUMINANCE_ARRAY_SIZE</code>ãªã©ãŒè‰¯ã„ã§ã—ã‚‡ã†ã‹ã€‚</p><div class="note info" style="background: #e5f8e2; padding:16px; margin:24px 12px; border-radius:8px;">  <span class="fa fa-fw fa-check-circle"></span><p>Cè¨€èªã®ãƒã‚¯ãƒ­ã§ã¯ã€å…¨ã¦å¤§æ–‡å­—ã§å˜èªé–“ã‚’<code>_</code>ã§ç¹‹ãã®ãŒä¸€èˆ¬çš„ã§ã™(ã‚¢ãƒƒãƒ‘ãƒ¼ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹)ã€‚</p></div><p>ã“ã‚Œã‚’ã‚³ãƒ¼ãƒ‰ã«åæ˜ ã•ã›ã‚‹ã¨ã€</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> ILLUMINANCE_ARRAY_SIZE 20</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">float</span> illuminanceArray[ILLUMINANCE_ARRAY_SIZE];</span><br><span class="line">    <span class="type">float</span> maxIlluminance = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; ILLUMINANCE_ARRAY_SIZE; ++i) &#123;</span><br><span class="line">        illuminanceArray[i] = lum.lux();  <span class="comment">//ã‚»ãƒ³ã‚µãƒ¼ã‹ã‚‰ç…§åº¦ã‚’å–å¾—</span></span><br><span class="line">        <span class="keyword">if</span>(maxIlluminance &lt; illuminanceArray[i])&#123;</span><br><span class="line">            maxIlluminance = illuminanceArray[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%7.1f[lux]\r\n&quot;</span>,illuminanceArray[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã“ã‚Œã§é…åˆ—ã®ã‚µã‚¤ã‚ºã‚’å¤‰æ›´ã—ãŸã„ï¼ã¨ãªã£ãŸå ´åˆã¯1è¡Œç›®ã®å®šæ•°(ãƒã‚¯ãƒ­)ã®æ•°å€¤ã‚’å¤‰æ›´ã™ã‚‹ã ã‘ã§ã€ã¾ã¨ã‚ã¦2ã‹æ‰€å¤‰æ›´ãŒå‡ºæ¥ã¾ã™ã­ã€‚å¯èª­æ€§ã‚’å‘ä¸Šã•ã›ãªãŒã‚‰ã€å†åˆ©ç”¨æ€§ã‚’é«˜ã‚ã‚‹äº‹ãŒå‡ºæ¥ã¾ã—ãŸã€‚</p><h2 id="ãƒ«ãƒ¼ãƒ—ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã€Œ-i-ã€ã‚’ã©ã†ã™ã‚‹ã‹ï¼Ÿ"><a href="#ãƒ«ãƒ¼ãƒ—ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã€Œ-i-ã€ã‚’ã©ã†ã™ã‚‹ã‹ï¼Ÿ" class="headerlink" title="ãƒ«ãƒ¼ãƒ—ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã€Œ i ã€ã‚’ã©ã†ã™ã‚‹ã‹ï¼Ÿ"></a>ãƒ«ãƒ¼ãƒ—ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã€Œ i ã€ã‚’ã©ã†ã™ã‚‹ã‹ï¼Ÿ</h2><p>ä¸Šè¨˜ã®èª¿å­ã§è¡Œãã¨ã€foræ–‡ã®ç¹°ã‚Šè¿”ã—ã§ä½¿ã‚ã‚Œã¦ã„ã‚‹<code>i</code>ã®åå‰ã‚‚å¤‰ãˆãŸæ–¹ãŒè‰¯ã„ã¨æ„Ÿã˜ã¾ã™ã­ã€‚</p><p><code>i</code>ã¯<code>illuminanceArray</code>ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’è¡¨ã—ã¦ã„ã‚‹ãŸã‚ã€<code>illumIdx</code>(illuminance Indexã®ç•¥)ãªã©ãŒè‰¯ã„ã§ã—ã‚‡ã†ã‹ã€‚ã§ã¯åæ˜ ã•ã›ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> ILLUMINANCE_ARRAY_SIZE 20</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">float</span> illuminanceArray[ILLUMINANCE_ARRAY_SIZE];</span><br><span class="line">    <span class="type">float</span> maxIlluminance = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> illumIdx = <span class="number">0</span>; illumIdx &lt; ILLUMINANCE_ARRAY_SIZE; ++illumIdx) &#123;</span><br><span class="line">        illuminanceArray[illumIdx] = lum.lux();  <span class="comment">//ã‚»ãƒ³ã‚µãƒ¼ã‹ã‚‰ç…§åº¦ã‚’å–å¾—</span></span><br><span class="line">        <span class="keyword">if</span>(maxIlluminance &lt; illuminanceArray[illumIdx])&#123;</span><br><span class="line">            maxIlluminance = illuminanceArray[illumIdx];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%7.1f[lux]\r\n&quot;</span>,illuminanceArray[illumIdx]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¢ºã‹ã«ã‚³ãƒ¼ãƒ‰ã®å¯èª­æ€§ã¯ä¸ŠãŒã£ãŸã‚ˆã†ãªæ°—ãŒã—ã¾ã™ã€‚</p><p>ã—ã‹ã—ã‚³ãƒ¼ãƒ‰ãŒ1è¡Œ1è¡Œé•·ããªã£ã¦ã—ã¾ã„ã¾ã—ãŸã­ã€‚ä»Šå›ã¯å°ã•ã„ã‚³ãƒ¼ãƒ‰ã§ã‚ã‚‹ãŸã‚ã€ã“ã‚Œã§ã‚‚èª­ã‚ãªã„ã“ã¨ã¯ãªã„ã§ã™ãŒã€ã‚„ã‚Šéãã«ã¯æ³¨æ„ã§ã™ã€‚ä¸€èˆ¬çš„ã«<code>i</code>ã¯foræ–‡ã®ç¹°ã‚Šè¿”ã—ã§ä½¿ç”¨ã•ã‚Œã‚‹å¤‰æ•°åã¨ã—ã¦æµ¸é€ã—ã¦ã„ã¾ã™ã€‚(iã¯indexã‹ã‚‰æ¥ã¦ã„ã‚‹ã¿ãŸã„ã§ã™)ãã®ãŸã‚ã€ä½•ã§ã‚‚ã‹ã‚“ã§ã‚‚å¤‰æ•°åã‚’é•·ã„ã‚‚ã®ã«ã™ã‚‹ã®ãŒè‰¯ã„ã€ã¨ã„ã†è¨³ã§ã‚‚ç„¡ã„ã¿ãŸã„ã§ã™ã€‚</p><p>èª­ã¿ã‚„ã™ã„ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãæœ€å¤§ã®æ„ç¾©ã¯<strong>æ¬¡ã«èª­ã‚€äººãŒã€èª­ã‚€ã®ã«(ç†è§£ã™ã‚‹ã®ã«)æ™‚é–“ã‚’è¦ã•ãªã„ã‚³ãƒ¼ãƒ‰</strong>ã§ã™ã€‚ä¸å¯§ã«æ›¸ã“ã†ï¼ã¨ã„ã†æ°—æŒã¡ãŒå…ˆèµ°ã‚Šã€ã‚³ãƒ¼ãƒ‰ã®é•·ã•ãŒ10å€ã«ãªã£ã¦ã—ã¾ã£ãŸã‚‰æœ¬æœ«è»¢å€’ã§ã™ã€‚</p><p>åˆ†ã‹ã‚Šã‚„ã™ãæ›¸ãã“ã¨ã‚‚å¤§äº‹ã§ã™ãŒã€åŒæ™‚ã«è¡Œãéãã¦ç„¡ã„ã ã‚ã†ã‹ï¼Ÿã¨è€ƒãˆã‚‹ã®ã‚‚åŒã˜ãã‚‰ã„å¤§äº‹ãã†ã§ã™ã­ã€‚</p><h2 id="å‡¦ç†ã‚’ã¾ã¨ã‚ã‚‹"><a href="#å‡¦ç†ã‚’ã¾ã¨ã‚ã‚‹" class="headerlink" title="å‡¦ç†ã‚’ã¾ã¨ã‚ã‚‹"></a>å‡¦ç†ã‚’ã¾ã¨ã‚ã‚‹</h2><p>ã“ã“ã§ã¯å‰ç¯€ã®<code>i</code>ã‚’<code>illumIdx</code>ã«å¤‰æ›´ã™ã‚‹ã®ã¯å–ã‚Šæ¶ˆã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚</p><p>ä»¥ä¸‹ã®çŠ¶æ…‹ã§ã™ã­ã€‚</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> ILLUMINANCE_ARRAY_SIZE 20</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">float</span> illuminanceArray[ILLUMINANCE_ARRAY_SIZE];</span><br><span class="line">    <span class="type">float</span> maxIlluminance = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; ILLUMINANCE_ARRAY_SIZE; ++i) &#123;</span><br><span class="line">        illuminanceArray[i] = lum.lux();  <span class="comment">//ã‚»ãƒ³ã‚µãƒ¼ã‹ã‚‰ç…§åº¦ã‚’å–å¾—</span></span><br><span class="line">        <span class="keyword">if</span>(maxIlluminance &lt; illuminanceArray[i])&#123;</span><br><span class="line">            maxIlluminance = illuminanceArray[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%7.1f[lux]\r\n&quot;</span>,illuminanceArray[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã‚ã¨ä¿®æ­£ã‚’åŠ ãˆã‚‹ã¨ã—ãŸã‚‰ãªã‚“ã§ã—ã‚‡ã†ã‹ã€‚</p><p>æœ€å¾Œã®<code>printf</code>æ–‡ãŒæ°—ã«ãªã‚Šã¾ã™ã­ã€‚ã“ã®<code>printf</code>ã§ã¯ã‚»ãƒ³ã‚µãƒ¼ã‹ã‚‰å–å¾—ã—ãŸç…§åº¦ã®å€¤ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã«æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚ã§ã‚ã‚Œã°ã€æœ€å¾Œã«æ›¸ãå¿…è¦ã¯ãªã„ã§ã—ã‚‡ã†ã€‚</p><p>ç…§åº¦ã‚’å–å¾—ã—ãŸæ®µéšã§è¡¨ç¤ºã—ã¦ã‚‚å•é¡Œãªã„ã¯ãšã§ã™ã€‚</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> ILLUMINANCE_ARRAY_SIZE 20</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">float</span> illuminanceArray[ILLUMINANCE_ARRAY_SIZE];</span><br><span class="line">    <span class="type">float</span> maxIlluminance = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; ILLUMINANCE_ARRAY_SIZE; ++i) &#123;</span><br><span class="line">        <span class="comment">//ã‚»ãƒ³ã‚µãƒ¼ã‹ã‚‰ç…§åº¦ã‚’å–å¾—</span></span><br><span class="line">        illuminanceArray[i] = lum.lux();</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%7.1f[lux]\r\n&quot;</span>,illuminanceArray[i]);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æœ€å¤§å€¤ã‚’æ¢ã™</span></span><br><span class="line">        <span class="keyword">if</span>(maxIlluminance &lt; illuminanceArray[i])&#123;</span><br><span class="line">            maxIlluminance = illuminanceArray[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹ã¯ãƒªãƒ¼ãƒ€ãƒ–ãƒ«ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ã®å¼•ç”¨ã«ãªã‚Šã¾ã™(4.6ç¯€ã€4.7ç¯€)ã€‚</p><blockquote><p>äººé–“ã®è„³ã¯ã‚°ãƒ«ãƒ¼ãƒ—ã‚„æ”¹è£…ã‚’1ã¤ã®å˜ä½ã¨ã—ã¦è€ƒãˆã‚‹ã€‚<strong>ã‚³ãƒ¼ãƒ‰ã®æ¦‚è¦ã‚’ã™ã°ã‚„ãæŠŠæ¡ã—ã¦ã‚‚ã‚‰ã†ã«ã¯ã€ã“ã®ã‚ˆã†ãªã€Œå˜ä½ã€ã‚’ä½œã‚Œã°ã‚ˆã„ã€‚</strong><br>(ä¸­ç•¥)<br>æ–‡ç« ã¯è¤‡æ•°ã®æ®µè½ã«åˆ†å‰²ã•ã‚Œã¦ã„ã‚‹ã€‚ãã‚Œã¯ã€</p></blockquote><ul><li><strong>ä¼¼ã¦ã„ã‚‹è€ƒãˆã‚’ã‚°ãƒ«ãƒ¼ãƒ—ã«ã¾ã¨ã‚ã¦ã€ä»–ã®è€ƒãˆã¨åˆ†ã‘ã‚‹ãŸã‚ã ã€‚</strong></li><li>è¦–è¦šçš„ãªã€Œè¸ã¿çŸ³ã€ã‚’æä¾›ã§ãã‚‹ã‹ã‚‰ã ã€‚ã“ã‚ŒãŒãªã‘ã‚Œã°ã€ãƒšãƒ¼ã‚¸ã®ãªã‹ã§è‡ªåˆ†ã®å ´æ‰€ã‚’è¦‹å¤±ã£ã¦ã—ã¾ã†ã€‚</li><li>æ®µè½å˜ä½ã§ç§»å‹•ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã‹ã‚‰ã ã€‚</li></ul><p>ã“ã‚Œã¨åŒã˜ç†ç”±ã§ã€<strong>ã‚³ãƒ¼ãƒ‰ã‚‚ã€Œæ®µè½ã€ã«åˆ†ã‘ã‚‹ã¹ãã ã€‚</strong></p><p>ã¤ã¾ã‚Šã€ã‚³ãƒ¼ãƒ‰ã®æµã—èª­ã¿ãŒå‡ºæ¥ã‚‹ã‹ã©ã†ã‹ï¼Ÿã¨ã„ã†ã®ãŒä¸€ã¤ã®è¦³ç‚¹ã«ãªã‚‹ã‹ãªã¨æ€ã„ã¾ã—ãŸã€‚<strong>ãƒ‘ãƒƒã¨ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ãŸæ™‚ã«ã€ã©ã‚Œã ã‘å†…å®¹ã‚’æŠŠæ¡ã§ãã‚‹ã‹ã€‚</strong></p><p>ä»Šå›ãã‚‰ã„ã®ã‚³ãƒ¼ãƒ‰é‡ã§ã‚ã‚Œã°ã‚ã–ã‚ã–åˆ†ã‘ã‚‹å¿…è¦ã‚‚ç„¡ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€åˆ†ã‘ãŸã“ã¨ã«ã‚ˆã‚Šã€<strong>foræ–‡ã®ä¸­ã«ã¯2ã¤ã®å‡¦ç†ãŒã‚ã‚‹ã‚“ã ãª</strong>ã¨ã„ã†ã®ãŒåˆ†ã‹ã‚Šã‚„ã™ããªã‚Šã¾ã™ã€‚2ã¤ã®å¡Šã¨ã—ã¦foræ–‡å†…ã‚’èªè­˜ã§ãã‚‹ã¨ã„ã†äº‹ã€‚</p><p>ä¸Šã®å¡Šã¯ç…§åº¦ã®å€¤ã‚’å–å¾—ã€ä¸‹ã®å¡Šã¯æœ€å¤§å€¤ã‚’æ¢ã™ã€ã¨ç¬æ™‚ã«åˆ†ã‹ã‚Šã¾ã™ã€‚</p><p>ã“ã®æ›¸ãæ–¹ã¯å¤§è¦æ¨¡ãªé–‹ç™ºã«ãªã‚‹ã»ã©æœ‰ç”¨ã«ãªã‚Šãã†ã§ã™ã€‚</p><h2 id="before-after"><a href="#before-after" class="headerlink" title="before after"></a>before after</h2><p>ä»Šå›åŠ ãˆã‚‰ã‚Œã‚‹ä¿®æ­£ã¯ã“ã®ãã‚‰ã„ã§ã—ã‚‡ã†ã‹ã€‚</p><p>æœ€å¾Œã«ä¿®æ­£å‰ã¨ä¿®æ­£å¾Œã‚’æ¯”ã¹ã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚</p><figure class="highlight c"><figcaption><span>before</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">float</span> a[<span class="number">20</span>];</span><br><span class="line">    <span class="type">float</span> max = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; ++i) &#123;</span><br><span class="line">        a[i] = lum.lux();  <span class="comment">//ã‚»ãƒ³ã‚µãƒ¼ã‹ã‚‰ç…§åº¦ã‚’å–å¾—</span></span><br><span class="line">        <span class="keyword">if</span>(max &lt; a[i])&#123;</span><br><span class="line">            max = a[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%7.1f[lux]\r\n&quot;</span>,a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><figcaption><span>after</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> ILLUMINANCE_ARRAY_SIZE 20</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">float</span> illuminanceArray[ILLUMINANCE_ARRAY_SIZE];</span><br><span class="line">    <span class="type">float</span> maxIlluminance = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; ILLUMINANCE_ARRAY_SIZE; ++i) &#123;</span><br><span class="line">        <span class="comment">//ã‚»ãƒ³ã‚µãƒ¼ã‹ã‚‰ç…§åº¦ã‚’å–å¾—</span></span><br><span class="line">        illuminanceArray[i] = lum.lux();</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%7.1f[lux]\r\n&quot;</span>,illuminanceArray[i]);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æœ€å¤§å€¤ã‚’æ¢ã™</span></span><br><span class="line">        <span class="keyword">if</span>(maxIlluminance &lt; illuminanceArray[i])&#123;</span><br><span class="line">            maxIlluminance = illuminanceArray[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¨ä½“çš„ã«ã‚³ãƒ¼ãƒ‰ã®æƒ…å ±é‡ãŒå¢—ãˆã¦èª­ã¿ã‚„ã™ããªã‚Šã¾ã—ãŸã€‚</p><p>beforeã®ã‚³ãƒ¼ãƒ‰ã¯ã‚³ãƒ¼ãƒ‰ã®é€”ä¸­ã‹ã‚‰èª­ã¿å§‹ã‚ã‚‹ã¨ã€ã€Œaã£ã¦ãªã‚“ã ï¼Ÿã€ã¨ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚ã¾ãŸã€ã‚³ãƒ¡ãƒ³ãƒˆã§ã€Œã‚»ãƒ³ã‚µãƒ¼ã‹ã‚‰ç…§åº¦ã‚’å–å¾—ã€ã¨ã„ã†æ–‡å­—ãŒç„¡ã‘ã‚Œã°ã€ã“ã®ã‚³ãƒ¼ãƒ‰ãŒä½•ã«ä½¿ã‚ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰ãªã®ã‹ã‚‚æ®†ã©åˆ†ã‹ã‚‰ãªããªã£ã¦ã—ã¾ã„ã¾ã™ã€‚</p><p>å¯¾ã—ã¦afterã®ã‚³ãƒ¼ãƒ‰ã¯ã©ã“ã‹ã‚‰èª­ã‚“ã§ã‚‚ã€ã“ã®ã‚³ãƒ¼ãƒ‰ãŒã©ã‚“ãªå ´æ‰€ã§ä½¿ã‚ã‚Œã‚‹ã®ã‹ï¼ŸãŒåˆ†ã‹ã‚Šã‚„ã™ããªã£ã¦ã„ã¾ã™ã€‚</p><p>ã¾ãŸã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚€ã ã‘ã§ã€ç…§åº¦ã‚’å–å¾—ã—ã¦ãã®ä¸­ã‹ã‚‰æœ€å¤§å€¤ã‚’å–å¾—ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã ã€ã¨ã„ã†ã®ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚</p><p>å¯èª­æ€§ã‚’ã‹ãªã‚Šå‘ä¸Šã•ã›ã‚‹äº‹ãŒå‡ºæ¥ãŸã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚</p><h1 id="ã¾ã¨ã‚ã¨æ„Ÿæƒ³"><a href="#ã¾ã¨ã‚ã¨æ„Ÿæƒ³" class="headerlink" title="ã¾ã¨ã‚ã¨æ„Ÿæƒ³"></a>ã¾ã¨ã‚ã¨æ„Ÿæƒ³</h1><p>ä»Šå›ã¯ã‹ãªã‚ŠçŸ­ã„ã‚³ãƒ¼ãƒ‰ã§ã—ãŸãŒã€åŸºæœ¬çš„ãªäº‹ã¨ã¯è¨€ãˆçµæ§‹è‰²ã‚“ãªäº‹ã‚’å­¦ã¹ã¾ã—ãŸã€‚</p><p><strong>å‘½åè¦å‰‡</strong>ã€<strong>å‘½åè¦å‰‡ã®ä½¿ã„åˆ†ã‘</strong>ã€<strong>ãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼</strong>ã€<strong>ãƒ«ãƒ¼ãƒ—ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã®å‘½å</strong>ã€<strong>å‡¦ç†ã‚’ã¾ã¨ã‚ã¦æ›¸ã</strong>ã€ãªã©ã€‚<br>åŸºæœ¬çš„ã¨ã¯è¨€ãˆã€ã“ã‚ŒãŒå‡ºæ¥ã¦ã„ãŸã‹ï¼Ÿã¨ã„ã†ã¨ã€ã†ã‚€ãƒ¼ã¨ã„ã†æ„Ÿã˜ã§ã™ã€‚ã“ã‚Œã‚’æ©Ÿã«æ„è­˜ã—ã¦ã„ãã¾ã™ã€‚</p><p>ã¾ã ã¾ã å¯èª­æ€§ã‚’ä¸Šã’ã‚‹ãŸã‚ã®æŠ€è¡“ã¯æ²¢å±±ã‚ã‚Šã¾ã—ãŸã€‚ã‚³ãƒ¡ãƒ³ãƒˆã®æ›¸ãæ–¹ã‚„åˆ¶å¾¡ãƒ•ãƒ­ãƒ¼ã®æ›¸ãæ–¹ãªã©ã€‚ä»Šå¾Œã‚‚è‡ªåˆ†ãŒéå»ã«æ›¸ã„ãŸã‚³ãƒ¼ãƒ‰ã§ã„ã„æ„Ÿã˜ã®æ•™æã«ãªã‚Šãã†ãªã‚‚ã®ãŒã‚ã£ãŸã‚‰ã¨ã‚Šã‚ã’ã¦ã€ä»Šå›ã®ã‚ˆã†ãªè¨˜äº‹ã‚’æ›¸ã„ã¦ã¿ã‚ˆã†ã‹ãªã€ã¨è€ƒãˆã¦ãŠã‚Šã¾ã™ã€‚</p><p>æœ€å¾Œã«ã€æŠ€è¡“è¨˜äº‹ã‚’æ›¸ãã®ãŒæœ¬å½“ã«åˆã‚ã¦ãªã®ã§ã©ã†æ›¸ãã®ãŒè‡ªåˆ†ã«ã¨ã£ã¦æ›¸ãã‚„ã™ã„ã‹ï¼Ÿã¾ãŸã€ä»–ã®äººã«ã‚‚æœ‰ç›Šã«ãªã‚‹ã‹ï¼Ÿã¨ã„ã†ã®ã¯è€ƒãˆã¦ã„ã‹ãªã„ã¨ãªã€ã¨æ€ã„ã¾ã—ãŸã€‚ã¾ãšã¯å ´æ•°ã‚’è¸ã‚€ãŸã‚ã€è‰²ã‚“ãªè¨˜äº‹ãŒã‚ã’ã‚‰ã‚Œã‚‹ã‚ˆã†ã«é ‘å¼µã‚Šã¾ã™ã€‚</p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Programming/">Programming</category>
      
      
      <category domain="https://future-architect.github.io/tags/%E5%8F%AF%E8%AA%AD%E6%80%A7/">å¯èª­æ€§</category>
      
      <category domain="https://future-architect.github.io/tags/%E6%9B%B8%E8%A9%95/">æ›¸è©•</category>
      
      <category domain="https://future-architect.github.io/tags/%E3%83%AA%E3%83%BC%E3%83%80%E3%83%96%E3%83%AB%E3%82%B3%E3%83%BC%E3%83%89/">ãƒªãƒ¼ãƒ€ãƒ–ãƒ«ã‚³ãƒ¼ãƒ‰</category>
      
      <category domain="https://future-architect.github.io/tags/%E6%96%B0%E4%BA%BA%E6%95%99%E8%82%B2/">æ–°äººæ•™è‚²</category>
      
      
      <comments>https://future-architect.github.io/articles/20230922a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>ã€åˆæ ¼è¨˜ã€‘Google Cloud Professional Cloud Security Engineerèªå®šè³‡æ ¼ã‚’æŒ¯ã‚Šè¿”ã‚‹</title>
      <link>https://future-architect.github.io/articles/20230921a/</link>
      <guid>https://future-architect.github.io/articles/20230921a/</guid>
      <pubDate>Wed, 20 Sep 2023 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;img src=&quot;/images/20230921a/image.png&quot; alt=&quot;&quot; width=&quot;611&quot; height=&quot;593&quot; loading=&quot;lazy&quot;&gt;

&lt;h2 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot;</description>
          
        
      
      
      
      <content:encoded><![CDATA[<img src="/images/20230921a/image.png" alt="" width="611" height="593" loading="lazy"><h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><p>TIG å²¸ä¸‹ã§ã™ã€‚</p><p>ã“ã‚Œã¾ã§ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯çµ„ç¹”å…¨ä½“ã®Google Cloudãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’åŒ…æ‹¬çš„ã«è¦‹ã‚‹æ¥­å‹™ã«æºã‚ã£ã¦ãŠã‚Šã€ä¸»ã«IAMã‚„ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’å«ã‚€Google Cloudç’°å¢ƒä¸Šã®æ²»å®‰ç¶­æŒã®ã‚ˆã†ãªä»•äº‹ã‚’æ‹…ã£ã¦ãã¾ã—ãŸã€‚ä»Šå›ã¯ãã®çµŒé¨“å€¤ã‚’æ¸¬ã‚‹ã¹ãProfessional Cloud Security Engineerèªå®šè³‡æ ¼ã‚’å—ã‘ã¦ãã¾ã—ãŸã€‚</p><p>ç„¡äº‹ã«åˆæ ¼ã‚’æœãŸã™ã“ã¨ãŒã§ããŸã®ã§ã€æœ¬è¨˜äº‹ã§ã¯å­¦ç¿’å†…å®¹ãªã©ã®éç¨‹ã‚’æ›¸ã„ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚</p><p>ã¾ãŸæœ¬è©¦é¨“ã¯Google Cloudãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ä¼æ¥­å‘ã‘ã®ãƒã‚¦ãƒãƒ£ãƒ¼ã‚’æ´»ç”¨ã—ã¦å—é¨“ã—ã¾ã—ãŸã€‚å¤§å¤‰æ„Ÿè¬ã—ã¦ãŠã‚Šã¾ã™ï¼</p><p>Google Cloud èªå®šè³‡æ ¼é–¢é€£ã®éå»è¨˜äº‹ï¼š</p><ul><li><a href="/articles/20211013a/">ã€åˆæ ¼è¨˜ã€‘Google Cloud Professional Data Engineerèªå®šè³‡æ ¼ã‚’æŒ¯ã‚Šè¿”ã‚‹</a></li><li><a href="/articles/20220930a/">ã€åˆæ ¼è¨˜ã€‘Google Cloud Professional Machine Learning Engineerèªå®šè³‡æ ¼ã‚’æŒ¯ã‚Šè¿”ã‚‹</a></li><li><a href="/articles/20220411a/">Google Cloud Professional Cloud Architectã®å†èªå®šã«åˆæ ¼ã—ã¾ã—ãŸ</a></li><li><a href="/articles/20200902/">GCP Professional Cloud Network Engineer ã«åˆæ ¼ã—ã¾ã—ãŸ</a></li><li><a href="/articles/20210625a/">GCP Associate Cloud Engineer åˆæ ¼è¨˜</a></li></ul><h2 id="è©¦é¨“ã¨å‡ºé¡Œç¯„å›²"><a href="#è©¦é¨“ã¨å‡ºé¡Œç¯„å›²" class="headerlink" title="è©¦é¨“ã¨å‡ºé¡Œç¯„å›²"></a>è©¦é¨“ã¨å‡ºé¡Œç¯„å›²</h2><p><a href="https://cloud.google.com/learn/certification/cloud-security-engineer?hl=ja">å…¬å¼</a>ã®å‡ºé¡Œç¯„å›²ã¨ã€å®Ÿéš›ã«è‡ªåˆ†ãŒå—ã‘ãŸéš›ã®æ‰€æ„Ÿã¯ä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚</p><h3 id="ã‚¯ãƒ©ã‚¦ãƒ‰-ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ç’°å¢ƒå†…ã®ã‚¢ã‚¯ã‚»ã‚¹ã®æ§‹æˆ"><a href="#ã‚¯ãƒ©ã‚¦ãƒ‰-ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ç’°å¢ƒå†…ã®ã‚¢ã‚¯ã‚»ã‚¹ã®æ§‹æˆ" class="headerlink" title="ã‚¯ãƒ©ã‚¦ãƒ‰ ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ç’°å¢ƒå†…ã®ã‚¢ã‚¯ã‚»ã‚¹ã®æ§‹æˆ"></a>ã‚¯ãƒ©ã‚¦ãƒ‰ ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ç’°å¢ƒå†…ã®ã‚¢ã‚¯ã‚»ã‚¹ã®æ§‹æˆ</h3><ul><li>IAMã«ã‚ˆã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡<ul><li>çµ„ç¹”IAMãƒ»ãƒ•ã‚©ãƒ«ãƒ€IAMãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆIAMãƒ»ãƒªã‚½ãƒ¼ã‚¹IAMã®ã™ã¿ã‚ã‘</li><li>ç¶™æ‰¿ã®ç†è§£<ul><li>ã©ã®éšå±¤ã®IAMãŒé©ç”¨ã•ã‚Œã‚‹ã®ã‹ï¼Ÿ</li></ul></li></ul></li><li>çµ„ç¹”ãƒãƒªã‚·ãƒ¼ã®ç†è§£<ul><li>Service Accountä½œæˆã®åˆ¶é™ã‚„Cloud Storage Bucketã®å…¬é–‹åˆ¶é™ãªã©ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’åˆ¶å¾¡</li></ul></li><li>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚„ãƒ•ã‚©ãƒ«ãƒ€ã®åˆ†ã‘æ–¹ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹<ul><li>ä¾‹ï¼šéƒ¨ç½²ã”ã¨ã«ãƒ•ã‚©ãƒ«ãƒ€åˆ†ã‘ã‚’ã—ã¦ã€ãã®ä¸­ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹ãªã©<ul><li><a href="https://cloud.google.com/docs/enterprise/best-practices-for-enterprise-organizations?hl=ja">ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºä¼æ¥­ã®ãƒ™ã‚¹ãƒˆ ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹</a></li></ul></li></ul></li><li>Cloud Identityã«ã‚ˆã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†<ul><li>ã‚°ãƒ«ãƒ¼ãƒ—ã‚’åˆ©ç”¨ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç®¡ç†</li><li>Google Cloud Directory Syncã‚’åˆ©ç”¨ã—ãŸADã‚µãƒ¼ãƒãƒ¼ã¨Google Cloudã®çµ±åˆ</li></ul></li></ul><h3 id="ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯-ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®æ§‹æˆ"><a href="#ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯-ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®æ§‹æˆ" class="headerlink" title="ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®æ§‹æˆ"></a>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®æ§‹æˆ</h3><ul><li>ä»¥ä¸‹ã®Google Cloudãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®<a href="https://cloud.google.com/firewall/docs/firewalls?hl=ja#default_firewall_rules">æš—é»™ã®Firewallãƒ«ãƒ¼ãƒ«</a>ã¯çµ¶å¯¾ã«è¦šãˆã¦ãŠãã¾ã—ã‚‡ã†<ul><li><strong>INGRESSã¯å…¨ã¦æ‹’å¦</strong></li><li><strong>EGRESSã¯å…¨ã¦è¨±å¯</strong></li></ul></li><li>Firewallå…¨èˆ¬<ul><li><a href="https://cloud.google.com/firewall/docs/firewalls?hl=ja#priority_order_for_firewall_rules">Priorityå€¤ã®é«˜ä½ã¨å„ªå…ˆåº¦ã®é–¢ä¿‚</a></li><li>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¿ã‚°ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’æ´»ç”¨ã—ãŸFirewallãƒ«ãƒ¼ãƒ«</li></ul></li><li>VPC Peering&#x2F;Cloud VPN&#x2F;Cloud Interconnectã®ä½¿ã„åˆ†ã‘<ul><li>Cloud Interconnectã¯ã•ã‚‰ã«Partner&#x2F;Dedicatedã§ç”¨é€”ãŒåˆ†ã‹ã‚Œã‚‹</li></ul></li></ul><h3 id="ãƒ‡ãƒ¼ã‚¿ä¿è­·ã®ç¢ºä¿"><a href="#ãƒ‡ãƒ¼ã‚¿ä¿è­·ã®ç¢ºä¿" class="headerlink" title="ãƒ‡ãƒ¼ã‚¿ä¿è­·ã®ç¢ºä¿"></a>ãƒ‡ãƒ¼ã‚¿ä¿è­·ã®ç¢ºä¿</h3><ul><li><a href="https://cloud.google.com/vpc-service-controls/docs/overview?hl=ja">VPC Service Control</a>ã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿ä¿è­·<ul><li>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¯¾ã—ã¦å„ç¨®ã‚µãƒ¼ãƒ“ã‚¹ã®APIå®Ÿè¡Œã‚’åˆ¶é™ã—ã€ãƒ‡ãƒ¼ã‚¿ã®æŒã¡å‡ºã—ãƒ»æŒã¡è¾¼ã¿ã‚’é˜²ã</li><li>æ‹™è‘—ã‚‚å‚è€ƒã«ã—ã¦ã¿ã¦ä¸‹ã•ã„ï¼š<a href="https://future-architect.github.io/articles/20230119a/">VPC Service Controlã§Google Cloudç’°å¢ƒã‚’ã‚¬ãƒƒãƒãƒªå®ˆã‚‹</a></li></ul></li><li>Cloud DLP(Data Loss Prevention)ã®æ´»ç”¨<ul><li>å€‹äººæƒ…å ±ã«å¯¾ã™ã‚‹é©åˆ‡ãªæš—å·åŒ–</li><li>æš—å·åŒ–ã¯å¾©å…ƒã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã‹å¦ã‹ã«ã‚ˆã£ã¦æ‰‹æ³•ãŒå¤‰ã‚ã‚‹<ul><li>æ±ºå®šçš„æš—å·åŒ– or å®Œå…¨ãªãƒã‚¹ã‚­ãƒ³ã‚°</li></ul></li></ul></li></ul><h3 id="ã‚¯ãƒ©ã‚¦ãƒ‰-ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ç’°å¢ƒå†…ã®ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ç®¡ç†"><a href="#ã‚¯ãƒ©ã‚¦ãƒ‰-ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ç’°å¢ƒå†…ã®ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ç®¡ç†" class="headerlink" title="ã‚¯ãƒ©ã‚¦ãƒ‰ ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ç’°å¢ƒå†…ã®ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ç®¡ç†"></a>ã‚¯ãƒ©ã‚¦ãƒ‰ ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ç’°å¢ƒå†…ã®ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ç®¡ç†</h3><ul><li>Cloud KMSã‚’åˆ©ç”¨ã—ãŸæš—å·éµã®ä¿ç®¡<ul><li><a href="https://cloud.google.com/kms/docs/envelope-encryption?hl=ja">Envelop encryption</a>ã¯å‹¿è«–ã€ãã‚Œã«é–¢ã‚ã‚‹ä»¥ä¸‹ã®ç”¨èªã¯èª¬æ˜ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ãŠãã¾ã—ã‚‡ã†<ul><li>CMEK</li><li>CSEK</li><li>DEK</li><li>KEK</li></ul></li><li>ã©ã†ã‚„ã£ã¦æš—å·éµã‚’ä¿ç®¡ã—ã¦ãŠããŸã„ã®ã‹ï¼Ÿ</li></ul></li><li>Secret Managerã®æ´»ç”¨<ul><li>API keyãªã©ã¯Secret Managerã«ä¿å­˜ã—ã¦ãŠãã¾ã—ã‚‡ã†</li></ul></li></ul><h3 id="ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ã®ç¢ºä¿"><a href="#ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ã®ç¢ºä¿" class="headerlink" title="ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ã®ç¢ºä¿"></a>ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ã®ç¢ºä¿</h3><ul><li>å„ç¨®ãƒ­ã‚°ã§ä½•ã®æƒ…å ±ãŒå¾—ã‚‰ã‚Œã‚‹ã®ã‹ï¼Ÿ<ul><li>Audit log</li><li>Data Access log</li></ul></li><li>Googleã®<code>_Default</code>&#x2F;<code>_Required</code>ã®ãƒ­ã‚°ãƒã‚±ãƒƒãƒˆã¨ã¯ï¼Ÿ<ul><li><a href="https://cloud.google.com/logging/docs/buckets?hl=ja">ãƒ­ã‚°ãƒã‚±ãƒƒãƒˆã®æ§‹æˆ</a></li><li>ä¿å­˜æœŸé–“ã‚„æ–™é‡‘ä½“ç³»ã‚‚ç•°ãªã‚‹</li></ul></li><li>ç›£æŸ»ãƒ­ã‚°ã®ä¿ç®¡æ–¹æ³•<ul><li>é•·æœŸé–“ä¿ç®¡ã—ãŸã„å ´åˆã¯Log Sinkã¨Cloud Storageã‚’æ´»ç”¨ã—ã¦ã‚³ã‚¹ãƒˆã‚«ãƒƒãƒˆ</li></ul></li></ul><h2 id="å—é¨“ã¾ã§ã®éç¨‹"><a href="#å—é¨“ã¾ã§ã®éç¨‹" class="headerlink" title="å—é¨“ã¾ã§ã®éç¨‹"></a>å—é¨“ã¾ã§ã®éç¨‹</h2><p>è©¦é¨“ç¯„å›²ã®å†…å®¹ã¯ã‚ã‚‹ç¨‹åº¦å®Ÿå‹™ã¨ã—ã¦çµŒé¨“æ¸ˆã¿ã ã£ãŸã®ã§ã€å‹‰å¼·æœŸé–“ã¯ç´„2é€±é–“ã»ã©ã§æ¸ˆã¿ã¾ã—ãŸã€‚<br>å®Ÿå‹™ã®çµŒé¨“ã¨ã—ã¦ä¸»ã«å½¹ç«‹ã£ãŸå†…å®¹ã¯ã€</p><ul><li>IAMã®åŸºç¤çŸ¥è­˜ï¼ˆç¶™æ‰¿ãªã©ï¼‰</li><li>IAMã‚’æœ€å°æ¨©é™ã«ç•™ã‚ã‚‹ã€IAMã‚’ã‚°ãƒ«ãƒ¼ãƒ—ã§ç®¡ç†ã™ã‚‹ãªã©ã®IAMã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹</li><li>çµ„ç¹”ãƒãƒªã‚·ãƒ¼ã„ã‚ã„ã‚</li><li>çµ„ç¹”ãƒ»ãƒ•ã‚©ãƒ«ãƒ€ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®åˆ†ã‘æ–¹</li><li>Google Cloudã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é–¢é€£<ul><li>Shared VPC</li><li>Cloud VPN</li><li>VPC Peering</li><li>Dedicated&#x2F;Partner Interconnect</li></ul></li><li>Secret Mangerã«ã‚ˆã‚‹æ©Ÿå¯†æƒ…å ±ç®¡ç†ã‚„Cloud KMSã«ã‚ˆã‚‹æš—å·éµç®¡ç†</li><li>Cloud Identityã®åˆ©ç”¨</li></ul><p>ãªã©ãŒæŒ™ã’ã‚‰ã‚Œã¾ã™ã€‚</p><h3 id="åˆ©ç”¨ã—ãŸæ•™æ"><a href="#åˆ©ç”¨ã—ãŸæ•™æ" class="headerlink" title="åˆ©ç”¨ã—ãŸæ•™æ"></a>åˆ©ç”¨ã—ãŸæ•™æ</h3><p>æœ€åˆã«<a href="https://docs.google.com/forms/d/e/1FAIpQLSf4ADmZr8WnDZjIK6dWvRTel2VmsP0fJtONy6UOFjWZHe-MpQ/viewform?hl=ja">æ¨¡æ“¬è©¦é¨“</a>ã‚’ã‚„ã£ã¦ã¿ãŸã¨ã“ã‚ã‚ã‚‹ç¨‹åº¦ã„ã‘ãã†ãªæ„ŸãŒã‚ã£ãŸã®ã§ã€ä»Šå›ã¯Udemyã®å•é¡Œé›†ã®ã¿åˆ©ç”¨ã—ã¾ã—ãŸã€‚</p><ul><li><a href="https://www.udemy.com/course/google-professional-cloud-security-engineer-jp/learn/quiz/5813440/results?expanded=1040233892#reviews">Google Professional Cloud Security Engineer | æ¨¡æ“¬è©¦é¨“2023å¹´ç‰ˆ</a></li></ul><h2 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h2><p>ä»Šå›å—é¨“ã—ã¦ã¿ã¦ã€ä¸­èº«ã®ä»•çµ„ã¿ã‚’ã‚ã¾ã‚Šç†è§£ã—ã¦ã„ãªã„çŠ¶æ…‹ã§å®Ÿå‹™ã§ä½¿ã£ã¦ã„ãŸã‚“ã ãªãƒ¼ã¨å®Ÿæ„Ÿã—ã¾ã—ãŸã€‚ç‰¹ã«Cloud KMSã¯ã‚ˆãä½¿ã£ã¦ã„ã¾ã—ãŸãŒã€<a href="https://cloud.google.com/kms/docs/envelope-encryption?hl=ja">Envelop encryption</a>ã¨ã„ã†è¨€è‘‰è‡ªä½“ã‚’çŸ¥ã‚‰ãšã«ä½¿ã£ã¦ã„ã¾ã—ãŸã€‚</p><p>æœ¬å—é¨“ã‚’é€šã—ã¦ã€Google Cloudã®Cloud Securityã«é–¢ã™ã‚‹ç¶²ç¾…çš„ãªçŸ¥è¦‹ã‚’å¾—ã‚‹ã“ã¨ãŒã§ããŸã®ã§ã€æ¥­å‹™ã®æŒ¯ã‚Šè¿”ã‚Šã¨ã—ã¦ã¡ã‚‡ã†ã©ã‚ˆã‹ã£ãŸã§ã™ã€‚</p><p>Google Cloudã®Cloud Securityã«å–ã£æ›ã‹ã‚Šã‚’å¾—ãŸã„æ–¹ã€æŒ¯ã‚Šè¿”ã‚Šã‚’ã—ãŸã„æ–¹ã¯ãœã²å—ã‘ã¦ã¿ã¦ãã ã•ã„ï¼</p><p>ã‚¢ã‚¤ã‚­ãƒ£ãƒƒãƒç”»åƒã¯<a href="https://cloud.google.com/learn/certification?hl=ja">Google Cloud Certification</a>ã‹ã‚‰ä»˜ä¸ã•ã‚ŒãŸã‚‚ã®ã«ãªã‚Šã¾ã™ã€‚</p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Infrastructure/">Infrastructure</category>
      
      
      <category domain="https://future-architect.github.io/tags/GCP/">GCP</category>
      
      <category domain="https://future-architect.github.io/tags/%E5%90%88%E6%A0%BC%E8%A8%98/">åˆæ ¼è¨˜</category>
      
      <category domain="https://future-architect.github.io/tags/%E8%B3%87%E6%A0%BC/">è³‡æ ¼</category>
      
      <category domain="https://future-architect.github.io/tags/Udemy/">Udemy</category>
      
      <category domain="https://future-architect.github.io/tags/PCSE/">PCSE</category>
      
      
      <comments>https://future-architect.github.io/articles/20230921a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Summer Enginner Camp 2023 å‚åŠ è¨˜</title>
      <link>https://future-architect.github.io/articles/20230920a/</link>
      <guid>https://future-architect.github.io/articles/20230920a/</guid>
      <pubDate>Tue, 19 Sep 2023 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;img src=&quot;/images/20230920a/computer-8037837_640.jpg&quot; alt=&quot;&quot; width=&quot;640&quot; height=&quot;479&quot;&gt;

&lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®ã‚µãƒãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³2023 Summer Enginner Camp</description>
          
        
      
      
      
      <content:encoded><![CDATA[<img src="/images/20230920a/computer-8037837_640.jpg" alt="" width="640" height="479"><p>ã“ã‚“ã«ã¡ã¯ã€ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®ã‚µãƒãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³2023 Summer Enginner Camp ã«å‚åŠ ã•ã›ã¦é ‚ã„ãŸé«˜æ©‹å¤§ç¿”ã§ã™ï¼</p><p>ç§ã¯ä»Šå›ã€ã€Œ<strong>Goã¨ã‚µãƒ¼ãƒãƒ¬ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã§ä½“é¨“ã€‚100ä¸‡å°è¶…ãˆã®å¤§è¦æ¨¡ã‚¹ãƒãƒ¼ãƒˆã‚»ãƒ³ã‚µãƒ¼loTãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã«é–¢ã‚ã£ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿ</strong>ã€ã¨ã„ã†ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å‚åŠ ã•ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚</p><p>ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ç”Ÿã§ã‚‚æŠ€è¡“ãƒ–ãƒ­ã‚°ã«å…¥ç¨¿å‡ºæ¥ã‚‹ã¨ã„ã†ã“ã¨ã§ã€ä»Šå›ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã«å‚åŠ ã—ãŸçµŒç·¯ã‚„å‚åŠ ã—ãŸä¸Šã§å¾—ã‚‰ã‚ŒãŸã“ã¨ã‚„æ„Ÿæƒ³ç­‰ã‚’æ›¸ã„ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚</p><h2 id="å‚åŠ å‹•æ©Ÿ"><a href="#å‚åŠ å‹•æ©Ÿ" class="headerlink" title="å‚åŠ å‹•æ©Ÿ"></a>å‚åŠ å‹•æ©Ÿ</h2><p>å­¦å¹´ãŒä¸ŠãŒã£ã¦ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚‚å°‘ã—å‡ºæ¥ã‚‹ã‚ˆã†ã«ãªã£ã¦ããŸç‚ºå®Ÿå‹™çµŒé¨“ã‚’ç©ã‚“ã§ã¿ãŸã„ã€ã¨ã„ã†æ€ã„ãŒå¼·ããªã‚Šã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã‚’è€ƒãˆå§‹ã‚ã¾ã—ãŸã€‚ãã®ä¸Šã§ã€</p><ol><li>ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ã‚¹ or ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ ã®é–‹ç™ºã‚’ã—ãŸã„</li><li>å€‹äººçš„ã« Golang ã‚„ Rust ã®é–‹ç™ºã«èˆˆå‘³ã‚ã‚Š</li><li>å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¤ãƒ³ãƒ•ãƒ©å‘¨ã‚Šã‚’è¦‹ã¦ã¿ãŸã„</li><li>ç”°èˆåœ¨ä½ãªã®ã§ã€ãƒ•ãƒ«ã§ã¯ç„¡ãã¦ã‚‚ã‚ã‚‹ç¨‹åº¦ãƒªãƒ¢ãƒ¼ãƒˆã§è¡Œã„ãŸã„</li></ol><p>ã¨ã„ã†é¡˜æœ›ãŒã‚ã‚Šã¾ã—ãŸã€‚ãã“ã§ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã‚’æ¢ã—ã¦ã„ã‚‹æ™‚ã«ã€ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã§æœ‰åãª AtCoder ã•ã‚“ã®ã‚µãƒ¼ãƒ“ã‚¹ã§ã‚ã‚‹ AtCoder Jobs ã«ã¦ä»Šå›ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã‚’çŸ¥ã‚Šã¾ã—ãŸã€‚ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã®è©³ç´°ã‚’è¦‹ã¦ã€è‡ªåˆ†ã®é¡˜æœ›ã«ã´ã£ãŸã‚Šãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã ã¨æ€ã„ã€ä»Šå›ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã«å¿œå‹Ÿã•ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚</p><h2 id="å‚åŠ å‰ã®ã‚¹ã‚­ãƒ«ãƒ»çµŒé¨“"><a href="#å‚åŠ å‰ã®ã‚¹ã‚­ãƒ«ãƒ»çµŒé¨“" class="headerlink" title="å‚åŠ å‰ã®ã‚¹ã‚­ãƒ«ãƒ»çµŒé¨“"></a>å‚åŠ å‰ã®ã‚¹ã‚­ãƒ«ãƒ»çµŒé¨“</h2><ul><li>å­¦éƒ¨3å¹´ å·¥å­¦éƒ¨æƒ…å ±å·¥å­¦ç§‘</li><li>ä¸»è¦è¨€èª : C++, Python, TypeScript</li><li>ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°æ­´ : 2å¹´ (å¤§å­¦å…¥å­¦å¾Œ~)</li><li>å®Ÿå‹™çµŒé¨“ : ç„¡ã—</li></ul><p>C++ ã¯ç§ãŒã¯ã¾ã£ã¦ã„ã‚‹ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã§ä½¿ç”¨ã—ã¦ãŠã‚Šã€Python ã¯ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ã‚¹ç³»ã§ä½¿ç”¨ã—ã¦ãŠã‚Šã€TypeScriptã¯è‡ªåˆ†ã®webã‚µã‚¤ãƒˆã‚’ä½œã‚‹æ™‚ã«ä½¿ç”¨ã—ãŸç¨‹åº¦ã§ã™ã€‚ä»Šå›ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã§ä¸»ã«ç”¨ã„ã‚‹ Golang ã¯è‡ªåˆ†ã®webã‚µã‚¤ãƒˆã®ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ä½¿ç”¨ã—ãŸä»¥å¤–ã¯çµŒé¨“ãŒã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p><p>ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯æ›¸ã‘ã‚‹ã‘ã©ã€å®Ÿå‹™ã§ã®é–‹ç™ºã‚’çµŒé¨“ã—ãŸã“ã¨ãŒç„¡ã„å…¸å‹çš„ãªå¤§å­¦ç”Ÿã®ã‚¹ã‚­ãƒ«ã‚»ãƒƒãƒˆã ã£ãŸã¨æ€ã„ã¾ã™ã€‚</p><p>ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã®é¸è€ƒã¯ã€1. ESæå‡º, 2. ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è©¦é¨“, 3.é¢æ¥ ã®é †ã§è¡Œã‚ã‚Œã€ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã§åŸ¹ã£ã¦ããŸå®Ÿè£…åŠ›ã§ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è©¦é¨“ã‚’çµæ§‹è§£ãã“ã¨ãŒå‡ºæ¥ãŸã®ãŒåŠŸã‚’å¥ã—ãŸæ°—ãŒã—ã¾ã™ã€‚AtCoderã®é›£æ˜“åº¦ã§è¨€ã†ã¨èŒ¶~ç·‘ç¨‹åº¦ (æœ€çµ‚å•é¡Œã¯ã‚‚ã£ã¨é›£ã—ã‹ã£ãŸ) ã ã£ãŸã¨æ€ã„ã¾ã™ã€‚</p><h2 id="ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³æ¦‚è¦"><a href="#ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³æ¦‚è¦" class="headerlink" title="ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³æ¦‚è¦"></a>ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³æ¦‚è¦</h2><p>ä»Šå›å‚åŠ ã•ã›ã¦ã„ãŸã ã„ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯é¡Œã®é€šã‚Šã€100ä¸‡å°ä»¥ä¸Šã®æ™®åŠã•ã‚ŒãŸIoTãƒ‡ãƒã‚¤ã‚¹ã‹ã‚‰ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§é€ã‚‰ã‚Œã¦ãã‚‹æ§˜ã€…ãªæƒ…å ±ã‚’ã•ã°ããƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’æ§‹ç¯‰ã™ã‚‹ã®ãŒä¸»ãªå†…å®¹ã§ã™ã€‚<br><a href="/articles/20230616b/">Enginner Camp è©³ç´°</a></p><p>ä»Šå›ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã§ã¯ã€<strong>ãƒ­ã‚¸ãƒƒã‚¯ã‹ã‚‰ã‚¤ãƒ³ãƒ•ãƒ©ã€CI&#x2F;CDç­‰ã®é–‹ç™ºç’°å¢ƒã¾ã§å¹…åºƒãè§¦ã‚ŠãŸã„</strong>ã¨ã„ã†è¦æœ›ã‚’å–ã‚Šå…¥ã‚Œã¦ãã ã•ã‚Šã€å…¨ä½“çš„ã«è§¦ã‚‰ã›ã¦é ‚ãã“ã¨ãŒå‡ºæ¥ã¾ã—ãŸã€‚</p><h3 id="1é€±ç›®"><a href="#1é€±ç›®" class="headerlink" title="1é€±ç›®"></a>1é€±ç›®</h3><p>1é€±ç›®ã¯ç’°å¢ƒæ§‹ç¯‰ã§åŠåˆ†ä»¥ä¸Šã¤ã¶ã‚Œã¦ã—ã¾ã„ã¾ã—ãŸã€‚ã¨ã„ã†ã®ã‚‚ã€FutureãŒã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–ãŒã—ã£ã‹ã‚Šã•ã‚Œã¦ã„ã‚‹ç‚ºã€å€‹äººé–‹ç™ºã§è¡Œã†æ™‚ã®ç’°å¢ƒæ§‹ç¯‰æ‰‹é †ã«åŠ ãˆã¦ã€ãƒ—ãƒ­ã‚­ã‚·ã®è¨­å®šã ã£ãŸã‚Šæ¨©é™å‘¨ã‚Šã®è¨­å®šã ã£ãŸã‚Šã‚’ã—ãªãã¦ã¯ã„ã‘ãªã„ã®ã§ã€ã¨ã¦ã‚‚å¤§å¤‰ã§ã—ãŸã€‚(ãŸã åˆã‚ã¦ã®çµŒé¨“ã ã£ãŸã®ã§ãã‚Œã¯ãã‚Œã§è‰¯ã„çµŒé¨“ã§ã—ãŸã€‚)</p><p>åˆã®ã‚¿ã‚¹ã‚¯ã¯ã€ãƒ†ã‚¹ãƒˆã®é–¢æ•°ã®ãƒ­ã‚¸ãƒƒã‚¯ãŒè‰¯ããªã„ã®ã§ãã‚Œã‚’ç›´ã™ã€ã¨ã„ã†ã‚·ãƒ³ãƒ—ãƒ«ãªã‚‚ã®ã‚’ã‚„ã‚‰ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚åˆã‚ã‹ã‚‰è‡ªåˆ†ãŒçµŒé¨“ã—ãŸã“ã¨ã®ç„¡ã„ã€Œãƒ†ã‚¹ãƒˆã‚’å›ã™ã€ã¨ã„ã†ç’°å¢ƒã«æ–°é®®å‘³ã‚’æŠ±ããªãŒã‚‰æ¥½ã—ãé–‹ç™ºã‚’ã•ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚</p><h3 id="2ãƒ»3é€±ç›®"><a href="#2ãƒ»3é€±ç›®" class="headerlink" title="2ãƒ»3é€±ç›®"></a>2ãƒ»3é€±ç›®</h3><p>2ãƒ»3é€±ç›®ã¯å®Ÿéš›ã« AWS ã‚µãƒ¼ãƒ“ã‚¹ã‚’è§¦ã‚Šã€æœ¬ç•ªç’°å¢ƒã«ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’å¿…è¦ãªå ´æ‰€ã«ç§»å‹•ã•ã›ã‚‹ã¨ã„ã†ã‚ˆã†ãªã‚¿ã‚¹ã‚¯ã«æºã‚ã‚Šã¾ã—ãŸã€‚å®Ÿéš›ã«AWSã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«å…¥ã‚‹ã¨ã€å‡„ã„é‡ã®ãƒ‡ãƒ¼ã‚¿ã‚„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒç«‹ã¡ä¸ŠãŒã£ã¦ãŠã‚Šã€ã“ã‚ŒãŒæœ¬ç‰©ã®ã‚µãƒ¼ãƒ“ã‚¹ã‹ã¨é©šã‹ã•ã‚Œã¾ã—ãŸã€‚</p><p>å®Ÿéš›ã« lambdaã®å‡¦ç†ã‚’æ›¸ã„ã¦ã€terraformã§ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®è¨­å®šã‚’æ›¸ã„ã¦ãƒ­ã‚¸ãƒƒã‚¯ã‹ã‚‰ã‚¤ãƒ³ãƒ•ãƒ©æ§‹ç¯‰ã¾ã§ä¸€é€šã‚ŠçµŒé¨“ã•ã›ã¦é ‚ãã€ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã®é–‹ç™ºã¨ã—ã¦è²´é‡ãªçµŒé¨“ã«ãªã‚Šã¾ã—ãŸã€‚</p><h3 id="4é€±ç›®"><a href="#4é€±ç›®" class="headerlink" title="4é€±ç›®"></a>4é€±ç›®</h3><p>æœ€çµ‚é€±ã¯ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ç”Ÿã®æˆæœç™ºè¡¨ä¼šãŒã‚ã‚Š2ãƒ»3é€±ç›®ç¨‹ã¯æ™‚é–“ãŒå–ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚ã‚¿ã‚¹ã‚¯ã¨ã—ã¦ã¯ CI&#x2F;CD å‘¨ã‚Šã‚’è§¦ã‚‰ã›ã¦ã„ãŸã ãã€ãƒãƒ¼ãƒ é–‹ç™ºã§è² æ‹…ã«ãªã‚‹ review ã®è£œåŠ©ã‚’ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã®å°å…¥ã‚’è¡Œã£ãŸã‚Šã—ã¾ã—ãŸã€‚CI&#x2F;CDã¯å®Œå…¨ã«è§¦ã£ãŸã“ã¨ãŒç„¡ãã€çŸ¥è­˜ã‚‚ç–ã‹ã£ãŸã®ã§ã‚­ãƒ£ãƒƒãƒã‚¢ãƒƒãƒ—ã™ã‚‹ã ã‘ã§ã‹ãªã‚Šã®æ™‚é–“ã‚’è¦ã—ã¦ã—ã¾ã„ã¾ã—ãŸã€‚ã—ã‹ã—ã€ã“ã“ã‹ã‚‰å¾—ã‚‰ã‚Œã‚‹çŸ¥è­˜ã‚‚å€‹äººé–‹ç™ºã§ã¯åˆ°åº•çµŒé¨“å‡ºæ¥ãªã„æ–°ã—ã„ã‚‚ã®ãŒå¤šãã¦ã¨ã¦ã‚‚å‹‰å¼·ã«ãªã‚Šã¾ã—ãŸã€‚</p><h2 id="ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ä¸­ã®1æ—¥"><a href="#ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ä¸­ã®1æ—¥" class="headerlink" title="ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ä¸­ã®1æ—¥"></a>ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ä¸­ã®1æ—¥</h2><h3 id="10-00-æœä¼š"><a href="#10-00-æœä¼š" class="headerlink" title="10:00 ~ æœä¼š"></a>10:00 ~ æœä¼š</h3><p>ç§ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€æ¥­å‹™é–‹å§‹å‰ã«ã€Œæœä¼šã€ã¨ã„ã†ã‚‚ã®ãŒã‚ã‚Šã€ã“ã“ã§ã¯å‰æ—¥ã®é€²æ—ãƒ»ä»Šæ—¥ã‚„ã‚‹ã“ã¨ãƒ»ãã®ä»–å…±æœ‰ã—ã¦ãŠããŸã„ã“ã¨ç­‰ã‚’ç°¡å˜ã«è¨€ã„åˆã†å ´ãŒã‚ã‚Šã¾ã™ã€‚<br>ã“ã‚Œã«å‚åŠ ã™ã‚‹ã“ã¨ã§ã€ã™ã¹ãã“ã¨ãŒæµ®ãå½«ã‚Šã«ãªã‚‹ &amp; å‘¨ã‚Šã®çŠ¶æ³ã‚’æŠŠæ¡å‡ºæ¥ã‚‹ ã®ã§ã¨ã¦ã‚‚ä»•äº‹åŠ¹ç‡ãŒè‰¯ããªã‚‹ä¼šã ãªã¨æ€ã„ã¾ã—ãŸã€‚</p><h3 id="10-30-æ¥­å‹™é–‹å§‹"><a href="#10-30-æ¥­å‹™é–‹å§‹" class="headerlink" title="10:30 ~ æ¥­å‹™é–‹å§‹"></a>10:30 ~ æ¥­å‹™é–‹å§‹</h3><p>Slack ã«ä½œæ¥­ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’è²¼ã‚Šã€ãã“ã«ä»Šç¾åœ¨è¡Œã£ã¦ã„ã‚‹ã“ã¨ã‚’æ›¸ãã¤ã¤ä½œæ¥­ã‚’é€²ã‚ã¾ã™ã€‚ãŸã¾ã«ä»–ã®äººã®ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’è¦‹ã«è¡Œã£ã¦ã¿ã‚‹ã¨ã€ä»–ã®äººã®çŠ¶æ³ãŒä¼ºãˆã¦å°‘ã—é¢ç™½ã„ã§ã™ã€‚</p><h3 id="æ˜¼ä¼‘æ†©-é©å®œ"><a href="#æ˜¼ä¼‘æ†©-é©å®œ" class="headerlink" title="æ˜¼ä¼‘æ†© (é©å®œ)"></a>æ˜¼ä¼‘æ†© (é©å®œ)</h3><p>ç§ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ç‰¹ã«ã“ã®æ™‚é–“å¸¯ãŒä¼‘æ†©æ™‚é–“ã¨ã„ã†æ±ºã¾ã‚Šã¯ç„¡ãã€å…¨ä½“ã§1æ™‚é–“åˆ†ã®ä¼‘æ†©ãŒã‚ã‚‹æ„Ÿã˜ã§ã—ãŸã€‚è‡ªåˆ†ã¯æ˜¼ä¼‘æ†©ä»¥å¤–ã«ã‚‚ã“ã¾ã‚ã«ä¼‘æ†©ã‚’å–ã‚‹æ–¹ãŒç”Ÿç”£æ€§ãŒé«˜ã‹ã£ãŸã®ã§ãã†ã—ã¦ã„ã¾ã—ãŸã€‚</p><h3 id="ä¼‘æ†©å¾Œ-æ¥­å‹™å†é–‹"><a href="#ä¼‘æ†©å¾Œ-æ¥­å‹™å†é–‹" class="headerlink" title="ä¼‘æ†©å¾Œ æ¥­å‹™å†é–‹"></a>ä¼‘æ†©å¾Œ æ¥­å‹™å†é–‹</h3><p>ã‚¿ã‚¹ã‚¯ã®ç¶šãã‚’é ‘å¼µã‚Šã¾ã™ã€‚</p><h3 id="19-00-æ¥­å‹™çµ‚äº†"><a href="#19-00-æ¥­å‹™çµ‚äº†" class="headerlink" title="~19:00 æ¥­å‹™çµ‚äº†"></a>~19:00 æ¥­å‹™çµ‚äº†</h3><p>æ—¥å ±ã¨å‹¤æ€ é–¢ä¿‚ã‚’ç™»éŒ²ã—ã¦ä¸€æ—¥ã®çµ‚äº†ã§ã™ã€‚<br>(2,3é€±ç›®ã¯å®Œå…¨ã«ãƒªãƒ¢ãƒ¼ãƒˆã§è¡Œã£ã¦ã„ã¾ã—ãŸãŒã€é€€å‹¤ã®å…¥åŠ›ã‚’æ¸ˆã¾ã›ãŸã‚‰ã™ãã«è‡ªåˆ†ã®ã“ã¨ã«å–ã‚Šçµ„ã‚ã‚‹ã®ã§ã¨ã¦ã‚‚å¿«é©ã§æœ€é«˜ã§ã—ãŸã€‚)</p><h2 id="ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã§å­¦ã¹ãŸã“ã¨"><a href="#ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã§å­¦ã¹ãŸã“ã¨" class="headerlink" title="ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã§å­¦ã¹ãŸã“ã¨"></a>ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã§å­¦ã¹ãŸã“ã¨</h2><h3 id="ãƒãƒ¼ãƒ é–‹ç™ºã®ãƒ•ãƒ­ãƒ¼"><a href="#ãƒãƒ¼ãƒ é–‹ç™ºã®ãƒ•ãƒ­ãƒ¼" class="headerlink" title="ãƒãƒ¼ãƒ é–‹ç™ºã®ãƒ•ãƒ­ãƒ¼"></a>ãƒãƒ¼ãƒ é–‹ç™ºã®ãƒ•ãƒ­ãƒ¼</h3><p>ç§ã¯ãƒãƒ¼ãƒ é–‹ç™ºã®çµŒé¨“ãŒã€å¤§å­¦ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚µãƒ¼ã‚¯ãƒ«ã§å°‘ã€…ã‚„ã£ã¦ã„ã‚‹ç¨‹åº¦ã—ã‹ãªãã€å®Ÿå‹™ã§ã®ãƒãƒ¼ãƒ é–‹ç™ºçµŒé¨“ãŒç„¡ã‹ã£ãŸã®ã§è‰²ã€…ãªã“ã¨ãŒåˆã‚ã¦ã§å­¦ã³ã«ãªã‚Šã¾ã—ãŸã€‚</p><p>ä¾‹ãˆã° moduleã‚„wrapperã®ä½œæˆãƒ»é‹ç”¨ã‚’ç©æ¥µçš„ã«è¡Œã£ãŸã‚Šã€å‘½åè¦å‰‡ã«æ³¨æ„ã‚’æ‰•ã£ãŸã‚Šã¨ã€<strong>å¯èª­æ€§ãƒ»å†åˆ©ç”¨æ€§ãƒ»ä¿å®ˆæ€§ã®é«˜ã„ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ä½œæˆ</strong>ã®é‡è¦æ€§ã‚’ç†è§£ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã—ãŸã€‚<br>ã¾ãŸã€Githubã§ã®é–‹ç™ºãƒ•ãƒ­ãƒ¼ (issue,branch,pull request,â€¦) ã«ã‚‚ãªã‚Œã‚‹ã“ã¨ãŒå‡ºæ¥ãŸã‚Šã€CI&#x2F;CD å‘¨ã‚Šã‚’è§¦ã‚‰ã›ã¦ã‚‚ã‚‰ã£ã¦ãã“ã‚‰ã¸ã‚“ã«å¯¾ã™ã‚‹ç†è§£ã‚‚æ·±ã‚ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã—ãŸã€‚</p><h3 id="AWS-ä¸»ã«-lambda-S3-dynamoDB-terraform"><a href="#AWS-ä¸»ã«-lambda-S3-dynamoDB-terraform" class="headerlink" title="AWS (ä¸»ã« lambda,S3,dynamoDB), terraform"></a>AWS (ä¸»ã« lambda,S3,dynamoDB), terraform</h3><p>ã‚¤ãƒ³ãƒ•ãƒ©é–¢é€£ã®å­¦ã³ã‚‚å¤šã€…ã‚ã‚Šã¾ã—ãŸã€‚ã‚¤ãƒ³ãƒ•ãƒ©å‘¨ã‚Šã¯ã¡ã£ã½ã‘ãªå€‹äººé–‹ç™ºã§å°‘ã—è§¦ã‚ŒãŸã“ã¨ã®ã‚ã‚‹ç¨‹åº¦ã§ã€å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã©ã®ã‚ˆã†ã«é‹ç”¨ã•ã‚Œã¦ã„ã‚‹ã‹ã‚’è¦‹ãŸã„ã¨ã„ã†ã®ãŒè‡ªåˆ†ã®é¡˜æœ›ã®1ã¤ã ã£ãŸã®ã§ã¨ã¦ã‚‚è²´é‡ãªçµŒé¨“ã§ã—ãŸã€‚</p><p>å®Ÿéš›ã«lambdaã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’Golangã§æ›¸ã„ã¦terraformã§ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®è¨­å®šã‚’ã—ã¦â€¦ã¨ã„ã†ã‚¤ãƒ³ãƒ•ãƒ©å‘¨ã‚Šã®ä¸€é€£ã®æµã‚Œã‚’è§¦ã‚‰ã›ã¦ã„ãŸã ã„ãŸã®ã§ã€ä»Šã¾ã§ã‚ã¾ã‚Šæµ®ã‹ã°ãªã‹ã£ãŸã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’é®®æ˜ã«ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã—ãŸã€‚</p><h3 id="æ¥­å‹™ã®å…±æœ‰-è¡¨ç¾åŠ›"><a href="#æ¥­å‹™ã®å…±æœ‰-è¡¨ç¾åŠ›" class="headerlink" title="æ¥­å‹™ã®å…±æœ‰ (è¡¨ç¾åŠ›)"></a>æ¥­å‹™ã®å…±æœ‰ (è¡¨ç¾åŠ›)</h3><p>ç§ã¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ä¸­ã«ä½•å›ã‹ç¤¾å“¡ã®æ–¹ã‹ã‚‰é ‚ã„ãŸã‚¿ã‚¹ã‚¯ã®èªè­˜ãŒãšã‚Œã¦ã—ã¾ã†ã“ã¨ãŒã‚ã‚Šã¾ã—ãŸã€‚ãã®ç‚ºã‚¿ã‚¹ã‚¯ã‚’é ‚ã„ãŸæ™‚ã¯ã€ãšã‚ŒãŒèµ·ããªã„ã‚ˆã†ã«ã‚¿ã‚¹ã‚¯ã‚’è²°ã£ãŸç›´å¾Œã«è‡ªåˆ†ã®è¨€ã„æ›ãˆè¡¨ç¾ã§ç¢ºèªã‚’å–ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã—ãŸã€‚</p><p>ã¾ãŸã€ç–‘å•ç‚¹ã‚’ç¤¾å“¡ã®æ–¹ã«èãéš›ã‚‚ã€åˆã‚ã¯æ¥­å‹™ã®å¦¨ã’ã«ãªã£ã¦ã—ã¾ã†ã®ã§ã¯ã¨æ€ã„å°‘ã—èºŠèº‡ã£ã¦ã„ã¾ã—ãŸãŒã€æœ€çµ‚çš„ã«ã¯åˆ†ã‹ã‚‰ãªã‹ã£ãŸã‚‰èãã“ã¨ãŒä¸€ç•ªåŠ¹ç‡çš„ã§ã‚ã‚ŠåŒæ™‚ã«è‡ªåˆ†ã®èªè­˜ã®ãšã‚Œã‚‚æŠ‘ãˆã‚‰ã‚Œã‚‹ç‚ºã€ç©æ¥µçš„ã«èãã‚ˆã†ã«ã—ã¦ã„ã¾ã—ãŸã€‚</p><p>è‡ªåˆ†ã®é ­ã®ä¸­ã®èªè­˜ã‚’ä»–è€…ã«åˆ†ã‹ã‚Šã‚„ã™ãä¼ãˆã‚‹ã“ã¨ã®é‡è¦æ€§ã‚’å­¦ã¶ã“ã¨ãŒå‡ºæ¥ã¾ã—ãŸã€‚</p><h2 id="çµ‚ã‚ã‚Šã«"><a href="#çµ‚ã‚ã‚Šã«" class="headerlink" title="çµ‚ã‚ã‚Šã«"></a>çµ‚ã‚ã‚Šã«</h2><p>ä»Šå›ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã¯ç§ã«ã¨ã£ã¦åˆã‚ã¦ã®å®Ÿå‹™çµŒé¨“ã¨ã„ã†ã“ã¨ã§ã€éå¸¸ã«è²´é‡ãªçµŒé¨“ã«ãªã£ãŸã¨åŒæ™‚ã«ã€ã‚¤ãƒ³ãƒ•ãƒ©å‘¨ã‚Šã‚„é–‹ç™ºã®ãƒ•ãƒ­ãƒ¼ç­‰ã€æ§˜ã€…ãªå­¦ã³ã‚’å¾—ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã—ãŸã€‚ã¾ãŸä»–ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ç”Ÿã‚‚å‘ä¸Šå¿ƒãŒé«˜ãã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã¨ã„ã£ã¦ã‚‚è‰²ã€…ãªåˆ†é‡ã«ç§€ã§ã¦ã„ã‚‹æ–¹ãŒæ²¢å±±ã„ã¦ãã‚Œã‚‚åˆºæ¿€ã«ãªã‚Šã€ä¸€å›ã‚Šæˆé•·ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ãŸæ©Ÿä¼šã¨ãªã‚Šã¾ã—ãŸã€‚</p><p>ä»Šå›ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã¨ã—ã¦å—ã‘å…¥ã‚Œã¦ãã ã•ã£ãŸãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã•ã‚“ã€å—ã‘å…¥ã‚Œå…ˆã§æ”¯ãˆã¦ã„ãŸã ã„ãŸç¤¾å“¡ã®æ–¹ã€…ã€å…±ã«1ã‚«æœˆé–“ã‚’éã”ã—ãŸã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã®åŒæœŸã®æ–¹ã€…ã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼</p><p>ã‚¢ã‚¤ã‚­ãƒ£ãƒƒãƒã¯<a href="https://pixabay.com/ja/users/thedigitalartist-202249/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=8037837">Pete Linforth</a>ã«ã‚ˆã‚‹<a href="https://pixabay.com/ja//?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=8037837">Pixabay</a>ã‹ã‚‰ã®ç”»åƒã§ã™ã€‚</p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Programming/">Programming</category>
      
      
      <category domain="https://future-architect.github.io/tags/%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%B3/">ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³</category>
      
      <category domain="https://future-architect.github.io/tags/%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%B32023/">ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³2023</category>
      
      <category domain="https://future-architect.github.io/tags/%E3%82%A8%E3%83%B3%E3%82%B8%E3%83%8B%E3%82%A2/">ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢</category>
      
      
      <comments>https://future-architect.github.io/articles/20230920a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Prompt Flowã§ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè©•ä¾¡ã®ç®¡ç†ã‚’è¡Œã†</title>
      <link>https://future-architect.github.io/articles/20230919a/</link>
      <guid>https://future-architect.github.io/articles/20230919a/</guid>
      <pubDate>Mon, 18 Sep 2023 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h1&gt;&lt;div class=&quot;note warn&quot; style=&quot;background: #fdf9e2; padding:16px;</description>
          
        
      
      
      
      <content:encoded><![CDATA[<h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><div class="note warn" style="background: #fdf9e2; padding:16px; margin:24px 12px; border-radius:8px;">  <span class="fa fa-fw fa-check-circle"></span><p>æœ¬è¨˜äº‹ã¯ã€ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç‰ˆã®Azure Prompt Flowã‚’æ‰±ã£ã¦ã„ã¾ã™ã€‚</p><p>æ“ä½œç”»é¢ç­‰ã®å†…å®¹ã¯2023å¹´9æœˆ13æ—¥ç¾åœ¨ã®å†…å®¹ã§ã‚ã‚‹ã“ã¨ã«ã”æ³¨æ„ãã ã•ã„ã€‚</p></div><p>ã“ã‚“ã«ã¡ã¯ã€SAIG&#x2F;MLOpsãƒãƒ¼ãƒ ã§ã‚¢ãƒ«ãƒã‚¤ãƒˆã‚’ã—ã¦ã„ã‚‹æ¿é‡ã§ã™ã€‚</p><p>ä»Šå›ã¯ã€Azureã®Prompt Flowã‚’ä½¿ã£ã¦LLMã«å…¥åŠ›ã™ã‚‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè©•ä¾¡ã®ç®¡ç†ã‚’è¡Œã„ã¾ã™ã€‚</p><p>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè©•ä¾¡ã®ç®¡ç†ã‚’è¡Œã„ãŸã„èƒŒæ™¯ã¨ã—ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ãªçŠ¶æ³ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚</p><ul><li>ãƒãƒ¼ãƒ å†…ã§æˆ‘æµã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒã¯ã³ã“ã£ã¦ã„ã‚‹</li><li>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ»å‡ºåŠ›ãƒ»è©•ä¾¡å€¤ã‚’ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«æ‰‹å…¥åŠ›ã™ã‚‹ã®ãŒç…©ã‚ã—ããªã£ã¦ããŸ</li><li>è‰¯ã„ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¨ãã®è©•ä¾¡çµæœãŒçµã³ã¤ã„ã¦ãŠã‚‰ãšã€ã€Œã‚ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè‰¯ã‹ã£ãŸã‘ã©ã©ã“è¡Œã£ãŸï¼Ÿã€ã¨ãªã‚‹</li></ul><p>ã“ã®ã‚ˆã†ãªçŠ¶æ³ã‚’æ”¹å–„ã™ã‚‹ãŸã‚ã€å®¢è¦³çš„ãƒ»å®šé‡çš„ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè©•ä¾¡ã‚’è¡Œã„ã€ç®¡ç†ã—ã¦ã„ããŸã„ã¨ã“ã‚ã§ã™ã€‚</p><p>ã™ãªã‚ã¡ã€ <strong>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å®Ÿé¨“ç®¡ç†</strong> ãŒè¡Œã„ãŸã„ã®ã§ã™ã€‚</p><p>ä¾‹ãˆã°ã€è¤‡æ•°ã®è©•ä¾¡æŒ‡æ¨™ã‚’è‡ªå‹•ã§ç®—å‡ºã—ã€ä»¥ä¸‹ã®ã‚ˆã†ãªè¡¨å½¢å¼ã«ã—ã¦ä»»æ„ã®è©•ä¾¡æŒ‡æ¨™ã«å¯¾ã—ã¦ã‚½ãƒ¼ãƒˆã§ãã‚Œã°ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å®Ÿé¨“ç®¡ç†ã®åŠ¹ç‡ãŒå‘ä¸Šã—ã¾ã™ã€‚</p><div class="scroll"><table><thead><tr><th>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ</th><th>è©•ä¾¡æŒ‡æ¨™A</th><th>è©•ä¾¡æŒ‡æ¨™B</th><th>è©•ä¾¡æŒ‡æ¨™C</th></tr></thead><tbody><tr><td>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ01</td><td>9.6</td><td>8.9</td><td>1</td></tr><tr><td>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ02</td><td>8.5</td><td>7.8</td><td>1</td></tr><tr><td>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ03</td><td>6.3</td><td>7.7</td><td>0</td></tr></tbody></table></div><p>ä»Šå›ã¯ã“ã®ã‚ˆã†ãªè¡¨ã‚’è‡ªå‹•ã§å¾—ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã‚’ç›®æ¨™ã¨ã—ã¾ã™ã€‚</p><p>LLMã«ã¯ã€è¿½åŠ å­¦ç¿’ã«ã‚ˆã‚‹ç²¾åº¦ã®æ”¹å–„ã ã‘ã§ãªãã€å…¥åŠ›ã™ã‚‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®æ”¹å–„ã«ã‚ˆã‚‹ç²¾åº¦å‘ä¸Šã®ä½™åœ°ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ä»Šå›ã¯ã€é€šå¸¸ã®æ©Ÿæ¢°å­¦ç¿’ã®å®Ÿé¨“ç®¡ç†ã¨ã¯ç•°ãªã‚Šã€LLM, ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®2å¤‰æ•°ã®ã†ã¡ã€LLMã‚’å›ºå®šã—ã¾ã™ã€‚ä»®ã«ç²¾åº¦ãŒå‘ä¸Šã—ãŸå ´åˆã€ãã‚ŒãŒã€ŒLLMã‚’æ”¹å–„ã—ãŸã‹ã‚‰ã€ãªã®ã‹ã€Œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ”¹å–„ã—ãŸã‹ã‚‰ã€ãªã®ã‹ãŒåˆ†ã‹ã‚‰ãªããªã£ã¦ã—ã¾ã†ã‹ã‚‰ã§ã™ã€‚</p><div class="note info" style="background: #e5f8e2; padding:16px; margin:24px 12px; border-radius:8px;">  <span class="fa fa-fw fa-check-circle"></span><p>æœ¬è¨˜äº‹ã§ã¯ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¨ã„ã†ç”¨èªã‚’ã€Œã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€ã®æ„å‘³ã§ä½¿ã£ã¦ã„ã¾ã™ã€‚ã™ãªã‚ã¡ã€ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®ï¼‰è³ªå•æ–‡ã¯æœ€çµ‚çš„ã«ã¯ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«å«ã¾ã‚Œã‚‹ã“ã¨ã«ã¯ãªã‚Šã¾ã™ãŒã€ã“ã“ã§ã¯è³ªå•æ–‡ã‚’ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¨ã¯åˆ¥ã®è¦ç´ ã¨ã—ã¦æ‰±ã„ã¾ã™ã€‚</p></div><h1 id="ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®è©•ä¾¡"><a href="#ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®è©•ä¾¡" class="headerlink" title="ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®è©•ä¾¡"></a>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®è©•ä¾¡</h1><h2 id="ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®è©•ä¾¡ã«å¿…è¦ãªã‚‚ã®"><a href="#ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®è©•ä¾¡ã«å¿…è¦ãªã‚‚ã®" class="headerlink" title="ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®è©•ä¾¡ã«å¿…è¦ãªã‚‚ã®"></a>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®è©•ä¾¡ã«å¿…è¦ãªã‚‚ã®</h2><p>ä»¥ä¸‹ã®4ã¤ãŒå…¨ã¦æƒãˆã°å¤§ä½“ã©ã‚“ãªè©•ä¾¡ã‚‚ã§ãã¾ã™ã€‚</p><p>æœ€ä½é™*å°ã®é …ç›®ãŒã‚ã‚Œã°ãã‚Œãªã‚Šã®è©•ä¾¡ãŒã§ãã¾ã™ã€‚</p><ul><li>è³ªå•æ–‡*</li><li>LLMã®å›ç­”*</li><li>ç†æƒ³ã®å›ç­”</li><li>ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ</li></ul><h2 id="ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®è©•ä¾¡æŒ‡æ¨™ä¾‹"><a href="#ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®è©•ä¾¡æŒ‡æ¨™ä¾‹" class="headerlink" title="ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®è©•ä¾¡æŒ‡æ¨™ä¾‹"></a>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®è©•ä¾¡æŒ‡æ¨™ä¾‹</h2><p>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®è©•ä¾¡æŒ‡æ¨™ã¯ã€åŸå‰‡ã€Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ»ã‚¿ã‚¹ã‚¯ã«ã‚ˆã‚Šã‘ã‚Šã€ã§ã™ã€‚</p><p>ã“ã“ã§ã¯è©•ä¾¡æŒ‡æ¨™ã‚’å®šã‚ã‚‹ãŸã‚ã®å‚è€ƒã¨ã—ã¦ã€ã„ãã¤ã‹äº‹ä¾‹ã‚’é›†ã‚ãŸã®ã§ä»¥ä¸‹ã«ã”ç´¹ä»‹ã—ã¾ã™ã€‚</p><h3 id="äº‹ä¾‹â‘ -Prompt-Flowã®çµ„ã¿è¾¼ã¿è©•ä¾¡æŒ‡æ¨™"><a href="#äº‹ä¾‹â‘ -Prompt-Flowã®çµ„ã¿è¾¼ã¿è©•ä¾¡æŒ‡æ¨™" class="headerlink" title="äº‹ä¾‹â‘ : Prompt Flowã®çµ„ã¿è¾¼ã¿è©•ä¾¡æŒ‡æ¨™"></a>äº‹ä¾‹â‘ : Prompt Flowã®çµ„ã¿è¾¼ã¿è©•ä¾¡æŒ‡æ¨™</h3><p>Azureã®Prompt Flowã«ã¯ã„ãã¤ã‹çµ„ã¿è¾¼ã¿ã®è©•ä¾¡æŒ‡æ¨™ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p>ã“ã®ã†ã¡ã®å¤§åŠã¯LLMãŒè©•ä¾¡ã‚’ä¸‹ã™ä»•çµ„ã¿ã¨ãªã£ã¦ã„ã¾ã™ã€‚</p><img src="/images/20230919a/Alt_text.png" alt="Alt_text" width="1200" height="540" loading="lazy"><p><a href="https://speakerdeck.com/nohanaga/azure-machine-learning-prompt-flow-ping-jia-metorikusujie-shuo?slide=8">Source</a></p><p>ä¾‹ãˆã°ã€ã€Œä»¥ä¸‹ã«è³ªå•ã¨å›ç­”ã®å¯¾ã‚’ç¤ºã—ã¾ã™ã€‚å›ç­”ã¯è³ªå•ã®å†…å®¹ã«æ²¿ã£ã¦ã„ã‚‹ã‹10æ®µéšã§è©•ä¾¡ã—ã¦ãã ã•ã„ã€ã¨ã„ã£ãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å…¥åŠ›ã™ã‚‹ã¨LLMãŒè©•ä¾¡å€¤ã‚’è¿”ã—ã¦ãã‚Œã¾ã™ã€‚</p><p>LLMãƒ™ãƒ¼ã‚¹ã®è©•ä¾¡ã¯ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ¬¡ç¬¬ã§ã‚ã‚‰ã‚†ã‚‹è©•ä¾¡çµæœã‚’æ•°å€¤ã¨ã—ã¦å‡ºåŠ›ã—ã¦ãã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚</p><p>ã—ã‹ã—ã€LLMã¯ç¢ºç‡ãƒ¢ãƒ‡ãƒ«ã§ã‚ã‚‹ã¨ã„ã†ç‰¹æ€§ä¸Šã€åŒã˜å…¥åŠ›ã‚’ã™ã‚‹ã¨å¿…ãšåŒã˜è©•ä¾¡å€¤ãŒè¿”ã£ã¦ãã‚‹ä¿è¨¼ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ä½•åº¦ã‹åŒã˜å…¥åŠ›ã‚’ã—ã¦å¾—ã‚‰ã‚ŒãŸè©•ä¾¡å€¤ã®çµ±è¨ˆï¼ˆå¹³å‡å€¤ã‚„ä¸­å¤®å€¤ãªã©ï¼‰ã‚’å–ã‚‹ã“ã¨ã§ã€å¤šå°‘ã¯LLMã®ã°ã‚‰ã¤ãã‚’æŠ‘ãˆã‚‰ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</p><p>[å‚è€ƒ]</p><ul><li><a href="https://speakerdeck.com/nohanaga/azure-machine-learning-prompt-flow-ping-jia-metorikusujie-shuo">Azure Machine Learning Prompt flow è©•ä¾¡ãƒ¡ãƒˆãƒªã‚¯ã‚¹è§£èª¬</a></li><li><a href="https://qiita.com/nohanaga/items/b68bf5a65142c5af7969">Azure Machine Learning ã® Prompt flow ã®è©•ä¾¡ãƒ¡ãƒˆãƒªã‚¯ã‚¹ç´¹ä»‹ â€• ChatGPT ã©ã†è©•ä¾¡ã™ã‚‹ï¼Ÿ</a></li></ul><h3 id="äº‹ä¾‹â‘¡-Pythonã®ã¿ã§å®Ÿè£…ã§ãã‚‹ç‹¬è‡ªå®šç¾©ã®è©•ä¾¡æŒ‡æ¨™"><a href="#äº‹ä¾‹â‘¡-Pythonã®ã¿ã§å®Ÿè£…ã§ãã‚‹ç‹¬è‡ªå®šç¾©ã®è©•ä¾¡æŒ‡æ¨™" class="headerlink" title="äº‹ä¾‹â‘¡: Pythonã®ã¿ã§å®Ÿè£…ã§ãã‚‹ç‹¬è‡ªå®šç¾©ã®è©•ä¾¡æŒ‡æ¨™"></a>äº‹ä¾‹â‘¡: Pythonã®ã¿ã§å®Ÿè£…ã§ãã‚‹ç‹¬è‡ªå®šç¾©ã®è©•ä¾¡æŒ‡æ¨™</h3><p>ã“ã¡ã‚‰ã®äº‹ä¾‹ã§ã¯ã€Prompt Flowã‚’ä½¿ã£ã¦Pythonã®ã¿ã§å®Ÿè£…ã§ãã‚‹è©•ä¾¡æŒ‡æ¨™ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚</p><p>ã€Œæ±ºç®—æ›¸ã®PDFã‹ã‚‰å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã‚’JSONå½¢å¼ã§æŠ½å‡ºã™ã‚‹ã€ã‚¿ã‚¹ã‚¯ã«å¯¾ã—ã€ä»¥ä¸‹ã®2ã¤ã®è©•ä¾¡æŒ‡æ¨™ã‚’å®šã‚ã¦ã„ã¾ã™ã€‚</p><ul><li><code>correct_keys_percentage</code>: æ­£ã—ãæŠ½å‡ºã§ããŸã‚­ãƒ¼ã®å‰²åˆ</li><li><code>correct_values_percentage</code>: æŠ½å‡ºã—ãŸã‚­ãƒ¼ã®ã†ã¡ã€æ­£ã—ãæŠ½å‡ºã§ããŸå€¤ã®å‰²åˆ</li></ul><p>[å‚è€ƒ]</p><ul><li><a href="https://qiita.com/sakue_103/items/41d14e96a253a820bc0f">Prompt Flowã§ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å®šé‡çš„ã«è©•ä¾¡ã™ã‚‹</a></li></ul><h1 id="Prompt-Flowã§ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè©•ä¾¡ã®ç®¡ç†ã‚’è¡Œã†"><a href="#Prompt-Flowã§ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè©•ä¾¡ã®ç®¡ç†ã‚’è¡Œã†" class="headerlink" title="Prompt Flowã§ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè©•ä¾¡ã®ç®¡ç†ã‚’è¡Œã†"></a>Prompt Flowã§ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè©•ä¾¡ã®ç®¡ç†ã‚’è¡Œã†</h1><h2 id="å–ã‚Šæ‰±ã†ã‚¿ã‚¹ã‚¯"><a href="#å–ã‚Šæ‰±ã†ã‚¿ã‚¹ã‚¯" class="headerlink" title="å–ã‚Šæ‰±ã†ã‚¿ã‚¹ã‚¯"></a>å–ã‚Šæ‰±ã†ã‚¿ã‚¹ã‚¯</h2><p>ä»Šå›ã¯æ–‡æ›¸æ¤œç´¢ã‚’ä¼´ã†è³ªç–‘å¿œç­”ã‚¿ã‚¹ã‚¯ã‚’æ‰±ã„ã¾ã™ã€‚</p><p>æ–‡æ›¸æ¤œç´¢ã‚’ä¼´ã†è³ªç–‘å¿œç­”ç”¨ã®ãƒ•ãƒ­ãƒ¼ï¼ˆæ¨™æº–ãƒ•ãƒ­ãƒ¼ï¼‰ã¯å®Ÿè£…æ¸ˆã¿ã§ã‚ã‚‹ã¨ã—ã¾ã™ã€‚æ–‡æ›¸æ¤œç´¢ã‚’ä¼´ã†è³ªç–‘å¿œç­”ç”¨ã®ãƒ•ãƒ­ãƒ¼ã‚’ä½œã‚‹ã«ã¯<a href="https://qiita.com/nohanaga/items/7c8b797f20ab8a3d5c92">ã“ã¡ã‚‰ã®è¨˜äº‹</a>ãŒå‚è€ƒã«ãªã‚Šã¾ã™ã®ã§ã€ã”å‚ç…§ãã ã•ã„ã€‚</p><p>ã©ã‚“ãªå†…å®¹ã§ã‚ã‚Œã€ã€Œè³ªå•æ–‡ã€ã«å¯¾ã™ã‚‹ã€ŒLLMã®å›ç­”ã€ãŒå¾—ã‚‰ã‚Œã‚‹æ¨™æº–ãƒ•ãƒ­ãƒ¼ãŒä½œæˆã§ãã¦ã„ã‚Œã°OKã§ã™ã€‚</p><p>ã“ã®æ¨™æº–ãƒ•ãƒ­ãƒ¼ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’è©•ä¾¡ã™ã‚‹ãŸã‚ã«ã€è©•ä¾¡ãƒ•ãƒ­ãƒ¼ã¨å‘¼ã°ã‚Œã‚‹ãƒ•ãƒ­ãƒ¼ã‚’åˆ¥é€”å®Ÿè£…ã—ã¦ã„ãã¾ã™ã€‚</p><h2 id="è©•ä¾¡æŒ‡æ¨™"><a href="#è©•ä¾¡æŒ‡æ¨™" class="headerlink" title="è©•ä¾¡æŒ‡æ¨™"></a>è©•ä¾¡æŒ‡æ¨™</h2><p>æ–‡æ›¸æ¤œç´¢ã‚’ä¼´ã†è³ªç–‘å¿œç­”ãƒ•ãƒ­ãƒ¼ã®è©•ä¾¡æŒ‡æ¨™ã¨ã—ã¦ä»¥ä¸‹ã®3ç‚¹ã‚’å®šã‚ã¾ã™ã€‚</p><ul><li>(A)<code>consistency</code>: è³ªå•ã®å†…å®¹ã«æ²¿ã£ãŸå›ç­”ãŒã§ãã¦ã„ã‚‹ã‹ï¼ˆ1~10ã®æ•´æ•°å€¤ï¼‰</li><li>(B)<code>easiness</code>: ç°¡å˜ãªè¡¨ç¾ã§åˆ†ã‹ã‚Šã‚„ã™ã„ã‹ï¼ˆ1~10ã®æ•´æ•°å€¤ï¼‰</li><li>(C)<code>has_source</code>: ã‚½ãƒ¼ã‚¹ã®å‚ç…§ã‚’è¡Œã£ã¦ã„ã‚‹ã‹ï¼ˆ2å€¤ï¼‰</li></ul><p>(A)(B)ã¯ã€å…ˆã®äº‹ä¾‹â‘ ã‚’å‚è€ƒã«LLMãƒ™ãƒ¼ã‚¹ã®è©•ä¾¡æŒ‡æ¨™ã‚’ä½œæˆã—ã¾ã™ã€‚</p><p>(C)ã«ã¤ã„ã¦ã¯ã€å…ˆã®äº‹ä¾‹â‘¡ã‚’å‚è€ƒã«Pythonã®ã¿ã§å®Ÿè£…ã§ãã‚‹ã‚‚ã®ã‚’ä½œæˆã—ã¾ã™ã€‚</p><h2 id="Prompt-Flowã§ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè©•ä¾¡ã®ç®¡ç†ã‚’è¡Œã†-1"><a href="#Prompt-Flowã§ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè©•ä¾¡ã®ç®¡ç†ã‚’è¡Œã†-1" class="headerlink" title="Prompt Flowã§ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè©•ä¾¡ã®ç®¡ç†ã‚’è¡Œã†"></a>Prompt Flowã§ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè©•ä¾¡ã®ç®¡ç†ã‚’è¡Œã†</h2><h3 id="â‘ è©•ä¾¡ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿè£…ã™ã‚‹"><a href="#â‘ è©•ä¾¡ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿè£…ã™ã‚‹" class="headerlink" title="â‘ è©•ä¾¡ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿè£…ã™ã‚‹"></a>â‘ è©•ä¾¡ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿè£…ã™ã‚‹</h3><p>ã“ã“ã‹ã‚‰ã¯å®Ÿéš›ã«Prompt Flowã‚’ä½¿ã£ã¦ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè‡ªå‹•è©•ä¾¡ã®ä»•çµ„ã¿ã‚’å®Ÿè£…ã—ã¦ã„ãã¾ã™ã€‚</p><p>Prompt Flowã§ã¯æ¨™æº–ãƒ•ãƒ­ãƒ¼ã§ã¯ãªãã€è©•ä¾¡ãƒ•ãƒ­ãƒ¼ã¨å‘¼ã°ã‚Œã‚‹ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿè£…ã—ã¦ã„ãã¾ã™ã€‚</p><img src="/images/20230919a/01.png" alt="" width="1200" height="346" loading="lazy"><p>ä»Šå›å®Ÿè£…ã—ãŸè©•ä¾¡ãƒ•ãƒ­ãƒ¼ã®æ¦‚ç•¥ã§ã™ã€‚</p><img src="/images/20230919a/image.png" alt="" width="1200" height="725" loading="lazy"><p>ä»¥ä¸‹ã€å…¥å‡ºåŠ›ãŠã‚ˆã³å„è¦ç´ ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚</p><h4 id="å…¥åŠ›-inputs"><a href="#å…¥åŠ›-inputs" class="headerlink" title="å…¥åŠ›(inputs)"></a>å…¥åŠ›(inputs)</h4><p>å…¥åŠ›ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«è¨­å®šã—ã¾ã™ã€‚å€¤ã¯ä»»æ„ã®å€¤ã§OKã§ã™ã€‚</p><p><code>question</code>ã¯è³ªå•æ–‡ã€<code>answer</code>ã¯LLMã®å›ç­”ã‚’è¡¨ã—ã¾ã™ã€‚</p><img src="/images/20230919a/image-2.png" alt="" width="1200" height="311" loading="lazy"><p><code>line_number</code>ã¨<code>variant_id</code>ã«ã¤ã„ã¦ã¯Azureã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ä»¥ä¸‹ã®ã‚ˆã†ãªè¨˜è¼‰ãŒã‚ã‚Šã¾ã—ãŸã€‚</p><p>æ¨™æº–ãƒ•ãƒ­ãƒ¼ã¨é•ã„è©•ä¾¡ãƒ•ãƒ­ãƒ¼ã¯ç‰¹æ®Šãªã®ã§ã€ã“ã‚Œã‚‰ã®å…¥åŠ›ã‚‚ã‚’ç”¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‚ˆã†ã§ã™ã€‚</p><p>é•·ããªã‚‹ã®ã§lineã¨variantã«ã¤ã„ã¦ã®èª¬æ˜ã¯çœç•¥ã—ã¾ã™ãŒã€è©³ç´°ã¯ä»¥ä¸‹ã®ã‚½ãƒ¼ã‚¹ã‚’ã”è¦§ãã ã•ã„ã€‚</p><blockquote><p>æ¨™æº–ãƒ•ãƒ­ãƒ¼ã¨ã¯ç•°ãªã‚Šã€è©•ä¾¡æ–¹æ³•ã¯ãƒ†ã‚¹ãƒˆã•ã‚Œã¦ã„ã‚‹ãƒ•ãƒ­ãƒ¼ã®å¾Œã§å®Ÿè¡Œã•ã‚Œã€è¤‡æ•°ã®ãƒãƒªã‚¢ãƒ³ãƒˆãŒå«ã¾ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚<br> ã—ãŸãŒã£ã¦ã€è©•ä¾¡ã§ã¯ã€å‡ºåŠ›ã®ç”Ÿæˆå…ƒã«ãªã£ãŸãƒ‡ãƒ¼ã‚¿ ã‚µãƒ³ãƒ—ãƒ«ã‚„ãƒãƒªã‚¢ãƒ³ãƒˆãªã©ã€ä¸€æ‹¬ãƒ†ã‚¹ãƒˆã§å—ã‘å–ã£ãŸãƒ•ãƒ­ãƒ¼å‡ºåŠ›ã®ã‚½ãƒ¼ã‚¹ã‚’åŒºåˆ¥ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚<br>ä¸€æ‹¬ãƒ†ã‚¹ãƒˆã§ä½¿ç”¨ã§ãã‚‹è©•ä¾¡æ–¹æ³•ã‚’æ§‹ç¯‰ã™ã‚‹ã«ã¯ã€line_number ã¨ variant_id(s) ã® 2 ã¤ã®è¿½åŠ å…¥åŠ›ãŒå¿…è¦ã§ã™ã€‚</p></blockquote><p><a href="https://learn.microsoft.com/ja-jp/azure/machine-learning/prompt-flow/how-to-develop-an-evaluation-flow?view=azureml-api-2">Source</a></p><h4 id="calc-consistency"><a href="#calc-consistency" class="headerlink" title="calc_consistency"></a>calc_consistency</h4><p>LLMã‚’ä½¿ã£ã¦ã€Œè³ªå•ã«å¯¾ã™ã‚‹å›ç­”ã®ä¸€è²«æ€§ã€ã‚’è©•ä¾¡ã™ã‚‹éƒ¨åˆ†ã§ã™ã€‚<code>è³ªå•æ–‡</code>ã¨<code>LLMã®å›ç­”</code>ã‚’å…¥åŠ›ã¨ã—ã¦å—ã‘å–ã‚Šã€è©•ä¾¡å€¤ã‚’1ã‹ã‚‰10ã®10æ®µéšã§è¿”ã—ã¾ã™ã€‚</p><p>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ä¸­ã§ã¯ã€ã„ãã¤ã‹ä¾‹ç¤º(Few-shot Learning)ã‚’ã—ã¦ã„ã¾ã™ã€‚</p><p>å®Ÿè£…ã¯ä»¥ä¸‹ç”»åƒã®é€šã‚Šã§ã™ã€‚</p><img src="/images/20230919a/image-3.png" alt="image" width="1200" height="822" loading="lazy"><details><summary>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¾‹</summary><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">system:</span><br><span class="line">è³ªå•ã¨å›ç­”ã®å¯¾ã‚’å—ã‘å–ã‚Šã€è³ªå•ã®å†…å®¹ã«æ²¿ã£ãŸå›ç­”ãŒã§ãã¦ã„ã‚‹ã‹ã‚’10æ®µéšã§è©•ä¾¡ã—ã¦ãã ã•ã„ã€‚</span><br><span class="line">è©•ä¾¡ã®å€¤ãŒä½ã„ã»ã©è³ªå•ã®å†…å®¹ã«æ²¿ã£ã¦ã„ãªã„å›ç­”ã§ã‚ã‚Šã€é«˜ã„ã»ã©è³ªå•ã«æ²¿ã£ãŸå›ç­”ã§ã‚ã‚‹ã¨ã™ã‚‹ã€‚</span><br><span class="line">è©•ä¾¡ã¯å¿…ãš1,2,3,4,5,6,7,8,9,10ã®ã„ãšã‚Œã‹ã§ã‚ã‚‹ã“ã¨ã€‚</span><br><span class="line"></span><br><span class="line">è³ªå•ï¼šæ˜æ—¥ã®å¤©æ°—ã¯ï¼Ÿ</span><br><span class="line">å›ç­”ï¼šæ˜æ—¥ã¯æ™´ã‚Œã§ã™ã€‚</span><br><span class="line">è©•ä¾¡ï¼š10</span><br><span class="line"></span><br><span class="line">è³ªå•ï¼šæ—¥æœ¬ã®é¦–éƒ½ã¯ï¼Ÿ</span><br><span class="line">å›ç­”ï¼šæ±äº¬ã«ã¯ãƒ“ãƒ«ãŒãŸãã•ã‚“ã‚ã‚Šã¾ã™ã€‚</span><br><span class="line">è©•ä¾¡ï¼š4</span><br><span class="line"></span><br><span class="line">è³ªå•ï¼šä»Šæ—¥ã®å¤©æ°—ã¯ï¼Ÿ</span><br><span class="line">å›ç­”ï¼šæ˜ ç”»é¤¨ã§ãƒãƒƒãƒ—ã‚³ãƒ¼ãƒ³ãŒé£Ÿã¹ã‚‰ã‚Œã¾ã™ã€‚</span><br><span class="line">è©•ä¾¡ï¼š1</span><br><span class="line"></span><br><span class="line">user:</span><br><span class="line">è³ªå•ï¼š&#123;&#123;question&#125;&#125;</span><br><span class="line">å›ç­”ï¼š&#123;&#123;answer&#125;&#125;</span><br><span class="line">è©•ä¾¡ï¼š</span><br></pre></td></tr></table></figure></details><h4 id="calc-easiness"><a href="#calc-easiness" class="headerlink" title="calc_easiness"></a>calc_easiness</h4><p>LLMã‚’ä½¿ã£ã¦ã€Œå›ç­”ã®åˆ†ã‹ã‚Šã‚„ã™ã•ã€ã‚’è©•ä¾¡ã™ã‚‹éƒ¨åˆ†ã§ã™ã€‚<code>è³ªå•æ–‡</code>ã¨<code>LLMã®å›ç­”</code>ã‚’å…¥åŠ›ã¨ã—ã¦å—ã‘å–ã‚Šã€è©•ä¾¡å€¤ã‚’1ã‹ã‚‰10ã®10æ®µéšã§è¿”ã—ã¾ã™ã€‚</p><p>å®Ÿè£…ã¯<code>calc_consistency</code>ã¨åŒæ§˜ã§ã™ã€‚</p><img src="/images/20230919a/image_(1).png" alt="" width="1200" height="699" loading="lazy"><details><summary>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¾‹</summary><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">system:</span><br><span class="line">è³ªå•ã¨å›ç­”ã®å¯¾ã‚’å—ã‘å–ã‚Šã€å›ç­”ã®åˆ†ã‹ã‚Šã‚„ã™ã•ã‚’10æ®µéšã§è©•ä¾¡ã—ã¦ãã ã•ã„ã€‚</span><br><span class="line">è©•ä¾¡ã®å€¤ãŒä½ã„ã»ã©åˆ†ã‹ã‚Šã«ãã„é›£è§£ãªå›ç­”ã§ã‚ã‚Šã€é«˜ã„ã»ã©åˆ†ã‹ã‚Šã‚„ã™ã„å›ç­”ã§ã‚ã‚‹ã¨ã™ã‚‹ã€‚</span><br><span class="line">è©•ä¾¡ã¯å¿…ãš1,2,3,4,5,6,7,8,9,10ã®ã„ãšã‚Œã‹ã§ã‚ã‚‹ã“ã¨ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">è³ªå•ï¼šæ±äº¬ã¨ã¯ï¼Ÿ</span><br><span class="line">å›ç­”ï¼šæ—¥æœ¬ã®é¦–éƒ½ã§ã™ã€‚æ±äº¬ã«ã¯ãƒã‚ªãƒ³ã«ç…§ã‚‰ã•ã‚ŒãŸè¶…é«˜å±¤ãƒ“ãƒ«ã‹ã‚‰æ­´å²çš„ãªå¯ºé™¢ã¾ã§ã€è¶…ç¾ä»£çš„ãªã‚‚ã®ã¨ä¼çµ±çš„ãªã‚‚ã®ãŒæ··åœ¨ã—ã¦ã„ã¾ã™ã€‚</span><br><span class="line">è©•ä¾¡ï¼š3</span><br><span class="line"></span><br><span class="line">è³ªå•ï¼šæ±äº¬ã¨ã¯ï¼Ÿ</span><br><span class="line">å›ç­”ï¼šæ±äº¬ã¯ã€æ±Ÿæˆ¸å¹•åºœã®æ‰€åœ¨åœ°ã§ã‚ã£ãŸæ±Ÿæˆ¸ï¼ˆãˆã©ï¼‰ã¨ã„ã†éƒ½å¸‚ãŒ1868å¹´9æœˆï¼ˆæ…¶å¿œ4å¹´7æœˆï¼‰ã«åç§°å¤‰æ›´ã•ã‚ŒãŸã‚‚ã®ã§ã‚ã‚‹ã€‚</span><br><span class="line">è©•ä¾¡ï¼š2</span><br><span class="line"></span><br><span class="line">è³ªå•ï¼šæ±äº¬ã¨ã¯ï¼Ÿ</span><br><span class="line">å›ç­”ï¼šæ—¥æœ¬ã®é¦–éƒ½ã§ã™ã€‚ãŸãã•ã‚“ã®ãƒ“ãƒ«ãŒç«‹ã¡ä¸¦ã‚“ã§ã„ã¾ã™ãŒã€æ˜”ã®ãŠå¯ºãªã©ã‚‚ãŸãã•ã‚“ã‚ã£ã¦é¢ç™½ã„å ´æ‰€ã§ã™ã€‚</span><br><span class="line">è©•ä¾¡ï¼š10</span><br><span class="line"></span><br><span class="line">user:</span><br><span class="line">è³ªå•ï¼š&#123;&#123;question&#125;&#125;</span><br><span class="line">å›ç­”ï¼š&#123;&#123;answer&#125;&#125;</span><br><span class="line">è©•ä¾¡ï¼š</span><br></pre></td></tr></table></figure></details><h4 id="has-source"><a href="#has-source" class="headerlink" title="has_source"></a>has_source</h4><p>ã€Œå›ç­”ãŒã‚½ãƒ¼ã‚¹(æ–‡æ›¸)ã‚’å‚ç…§ã§ãã¦ã„ã‚‹ã‹ã€ã‚’è©•ä¾¡ã™ã‚‹éƒ¨åˆ†ã§ã™ã€‚<code>è³ªå•æ–‡</code>ã¨<code>LLMã®å›ç­”</code>ã‚’å…¥åŠ›ã¨ã—ã¦å—ã‘å–ã‚Šã€ã§ãã¦ã„ã‚Œã°<code>1</code>, ã§ãã¦ã„ãªã‘ã‚Œã°<code>0</code>ã‚’è¿”ã—ã¾ã™ã€‚</p><p>ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯éå¸¸ã«ç°¡å˜ã§ã€å›ç­”ã«â€sourceâ€ã¨ã„ã†æ–‡å­—åˆ—ãŒå«ã¾ã‚Œã¦ã„ã‚Œã°ã‚½ãƒ¼ã‚¹å‚ç…§ã§ãã¦ã„ã‚‹ã¨åˆ¤å®šã—ã¾ã™ã€‚</p><p>ä»¥ä¸‹ã®ã‚ˆã†ã«Pythonã‚³ãƒ¼ãƒ‰ã®ã¿ã§å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚</p><p>â€»æ‰‹é †è§£èª¬ã®ãŸã‚ã€ã‚µãƒ³ãƒ—ãƒ«ã¨ã—ã¦ç°¡æ˜“ãªãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…</p><img src="/images/20230919a/image_(2).png" alt="" width="1200" height="466" loading="lazy"><details><summary>ã‚³ãƒ¼ãƒ‰ä¾‹</summary><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> promptflow <span class="keyword">import</span> tool</span><br><span class="line"></span><br><span class="line"><span class="meta">@tool</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">check_source</span>(<span class="params">question: <span class="built_in">str</span>, answer: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line"></span><br><span class="line">  <span class="comment"># &#x27;source&#x27;ã¨ã„ã†æ–‡å­—åˆ—ãŒanswerã«å«ã¾ã‚Œã¦ã„ã‚Œã°1,å«ã¾ã‚Œã¦ã„ãªã‘ã‚Œã°0ã‚’è¿”ã™</span></span><br><span class="line"></span><br><span class="line">  result = <span class="number">0</span></span><br><span class="line">  <span class="keyword">if</span> <span class="string">&#x27;source&#x27;</span> <span class="keyword">in</span> answer.lower():</span><br><span class="line">    result = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure></details><h4 id="line-process"><a href="#line-process" class="headerlink" title="line_process"></a>line_process</h4><p><code>calc_consistency</code>, <code>calc_easiness</code>, <code>has_source</code>ã®å„å‡ºåŠ›ã‚’é›†ç´„ã—ã€1ã¤ã®è¾æ›¸å‹ã¨ã—ã¦å‡ºåŠ›ã™ã‚‹Pythonã‚³ãƒ¼ãƒ‰ã§ã™ã€‚</p><img src="/images/20230919a/image_(3).png" alt="image_(3).png" width="1200" height="509" loading="lazy"><details><summary>ã‚³ãƒ¼ãƒ‰ä¾‹</summary><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> promptflow <span class="keyword">import</span> tool</span><br><span class="line"></span><br><span class="line"><span class="meta">@tool</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">line_process</span>(<span class="params">consistency: <span class="built_in">str</span>, easiness: <span class="built_in">str</span>, has_source: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line"></span><br><span class="line">  result_dic = &#123;&#125;</span><br><span class="line">  result_dic[<span class="string">&#x27;consistency&#x27;</span>] = <span class="built_in">int</span>(consistency)</span><br><span class="line">  result_dic[<span class="string">&#x27;easiness&#x27;</span>] = <span class="built_in">int</span>(easiness)</span><br><span class="line">  result_dic[<span class="string">&#x27;has_source&#x27;</span>] = <span class="built_in">int</span>(has_source)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result_dic</span><br></pre></td></tr></table></figure></details><h4 id="aggregate-variants-results"><a href="#aggregate-variants-results" class="headerlink" title="aggregate_variants_results"></a>aggregate_variants_results</h4><p>Variantæ¯ã«çµæœã‚’é›†ç´„ã™ã‚‹Pythonã‚³ãƒ¼ãƒ‰ã§ã™ã€‚</p><p>ä»Šå›ã¯Variantæ©Ÿèƒ½ã‚’ä½¿ã£ã¦ã„ã¾ã›ã‚“ãŒã€è©•ä¾¡ãƒ•ãƒ­ãƒ¼ã§ã¯ã€é›†ç´„ï¼ˆAggregationï¼‰ã‚’è¡Œã†ãŸã‚ã®ç‰¹åˆ¥ãªPythonã‚³ãƒ¼ãƒ‰ã‚’å®šç¾©ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§<a href="https://learn.microsoft.com/en-us/azure/machine-learning/prompt-flow/how-to-develop-an-evaluation-flow?view=azureml-api-2#metrics-logging-and-aggregation-node">å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ(è‹±èª)</a>ã‚’å‚è€ƒã«ã€ä»¥ä¸‹ã®ã‚ˆã†ã«å®Ÿè£…ã—ã¾ã—ãŸã€‚</p><img src="/images/20230919a/image_(4).png" alt="" width="1200" height="862" loading="lazy"><details><summary>ã‚³ãƒ¼ãƒ‰ä¾‹</summary><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span></span><br><span class="line"><span class="keyword">from</span> promptflow <span class="keyword">import</span> tool, log_metric</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@tool</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">aggregate_variants_results</span>(<span class="params">variant_ids: <span class="type">List</span>[<span class="built_in">int</span>], line_numbers: <span class="type">List</span>[<span class="built_in">int</span>], result_dics: <span class="type">List</span>[<span class="built_in">dict</span>]</span>):</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ãƒãƒªã‚¢ãƒ³ãƒˆæ¯ã«linesã‚’é›†ç´„ã™ã‚‹</span></span><br><span class="line">    results_on_each_variant = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(result_dics)):</span><br><span class="line">        result_dic = result_dics[i]</span><br><span class="line">        variant_id = variant_ids[i]</span><br><span class="line">        <span class="keyword">if</span> variant_id <span class="keyword">not</span> <span class="keyword">in</span> results_on_each_variant.keys():</span><br><span class="line">            results_on_each_variant[variant_id] = []</span><br><span class="line">        results_on_each_variant[variant_id].append(result_dic)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># å„ãƒãƒªã‚¢ãƒ³ãƒˆã«ã¤ã„ã¦linesã‚’é›†ç´„ã™ã‚‹</span></span><br><span class="line">    <span class="keyword">for</span> variant_id, result_dics <span class="keyword">in</span> results_on_each_variant.items():</span><br><span class="line"></span><br><span class="line">        avg_result_dic = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(result_dics)):</span><br><span class="line">            <span class="keyword">for</span> score_name, score <span class="keyword">in</span> result_dics[i].items():</span><br><span class="line">                <span class="keyword">if</span> score_name <span class="keyword">not</span> <span class="keyword">in</span> avg_result_dic:</span><br><span class="line">                    avg_result_dic[score_name] = score</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    avg_result_dic[score_name] += score</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å¹³å‡ã‚’å–ã‚‹</span></span><br><span class="line">        <span class="keyword">for</span> score_name, sum_score <span class="keyword">in</span> avg_result_dic.items():</span><br><span class="line">            avg_score = <span class="built_in">round</span>((sum_score / <span class="built_in">len</span>(result_dics)), <span class="number">2</span>)</span><br><span class="line">            avg_result_dic [score_name] = avg_score</span><br><span class="line"></span><br><span class="line">        <span class="comment"># log_metricã‚’å‘¼ã³å‡ºã™</span></span><br><span class="line">        <span class="keyword">for</span> score_name, avg_score <span class="keyword">in</span> avg_result_dic.items():</span><br><span class="line">            log_metric(score_name, avg_score, variant_id=variant_id)</span><br><span class="line"></span><br><span class="line">        results_on_each_variant[variant_id] = avg_result_dic</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> results_on_each_variant</span><br></pre></td></tr></table></figure></details><h4 id="å‡ºåŠ›-outputs"><a href="#å‡ºåŠ›-outputs" class="headerlink" title="å‡ºåŠ›(outputs)"></a>å‡ºåŠ›(outputs)</h4><p>å‡ºåŠ›ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«è¨­å®šã—ã¾ã™ã€‚</p><img src="/images/20230919a/image-4.png" alt="" width="1200" height="223" loading="lazy"><p>æœ€å¾Œã«å³ä¸Šã®ã€Œä¿å­˜ã€ã‚’æŠ¼ã—ã¦è©•ä¾¡ãƒ•ãƒ­ãƒ¼ã®ä½œæˆã¯å®Œäº†ã§ã™ã€‚</p><p>ã“ã®æ™‚ç‚¹ã§ã€ã€Œè³ªå•æ–‡ã€ã¨ã€ŒLLMã®å›ç­”ã€ã‚’å…¥åŠ›ã—ãŸéš›ã€<code>consistency</code>, <code>easiness</code>, <code>has_source</code>ã®3ã¤ã®è©•ä¾¡æŒ‡æ¨™ã®å€¤ã‚’å‡ºã—ã¦ãã‚Œã‚‹è©•ä¾¡ãƒ•ãƒ­ãƒ¼ãŒå‡ºæ¥ä¸ŠãŒã‚Šã¾ã—ãŸã€‚</p><h3 id="â‘¡è©•ä¾¡ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿè¡Œã™ã‚‹"><a href="#â‘¡è©•ä¾¡ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿè¡Œã™ã‚‹" class="headerlink" title="â‘¡è©•ä¾¡ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿè¡Œã™ã‚‹"></a>â‘¡è©•ä¾¡ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿè¡Œã™ã‚‹</h3><p>ãã‚Œã§ã¯ã€å®Ÿéš›ã«è©•ä¾¡ã‚’è¡Œã£ã¦ã„ãã¾ã™ã€‚</p><p>æ–‡æ›¸æ¤œç´¢ã‚’ä¼´ã†è³ªç–‘å¿œç­”ç”¨ã®ãƒ•ãƒ­ãƒ¼ï¼ˆæ¨™æº–ãƒ•ãƒ­ãƒ¼ï¼‰ã®ç·¨é›†ç”»é¢ã«å…¥ã‚Šã€ã€Œä¸€æ‹¬ãƒ†ã‚¹ãƒˆã€ã‚’æŠ¼ã—ã¾ã™ã€‚</p><p>ä»¥ä¸‹ã®ç”»é¢ã§ã¯ä¸€æ‹¬ãƒ†ã‚¹ãƒˆã®è¨­å®šã‚’ç·¨é›†ã—ã¾ã™ã€‚ä¸€æ‹¬ãƒ†ã‚¹ãƒˆã¨ã¯ã€è¤‡æ•°ã®è³ªå•æ–‡ã‚’ä¸€æ‹¬ã§å—ã‘ã¤ã‘ã¦å›ç­”ã‚’å‡ºåŠ›ã—ã¦ãã‚Œã‚‹æ©Ÿèƒ½ã§ã™ã€‚</p><img src="/images/20230919a/image-6.png" alt="image-6.png" width="1200" height="701" loading="lazy"><p>ãƒ‡ãƒ¼ã‚¿ã¯è‡ªåˆ†ã§ä»¥ä¸‹ã®ã‚ˆã†ãªCSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚<br>ä¸‹ä¾‹ã®ã‚ˆã†ã«ã‚ã‚‰ã‚†ã‚‹ã‚±ãƒ¼ã‚¹ã®è³ªå•æ–‡ã‚’ç”¨æ„ã—ãŸã‚Šã€åŒã˜è³ªå•æ–‡ã‚’è¤‡æ•°è¨˜è¼‰ã—ã¦çµæœï¼ˆè©•ä¾¡å€¤ï¼‰ã®å¹³å‡ã‚’ã¨ã£ã¦LLMã«ã‚ˆã‚‹ã°ã‚‰ã¤ãã«å¯¾å‡¦ã—ãŸã‚Šã‚‚ã§ãã¾ã™ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">question</span><br><span class="line">åŒ—æ¡æ”¿å­ã£ã¦ä½•ã‚’ã—ãŸäººï¼Ÿ</span><br><span class="line">æºé ¼æœã£ã¦ä½•ã‚’ã—ãŸäººï¼Ÿ</span><br><span class="line">æºç¾©çµŒã£ã¦ä½•ã‚’ã—ãŸäººï¼Ÿ</span><br><span class="line">å¾³å·å®¶åº·ã£ã¦ä½•ã‚’ã—ãŸäººï¼Ÿ</span><br><span class="line">å°æ³‰ç´”ä¸€éƒã£ã¦ä½•ã‚’ã—ãŸäººï¼Ÿ</span><br></pre></td></tr></table></figure><p>ç¶šã„ã¦ã€è©•ä¾¡ã®è¨­å®šã‚’ç·¨é›†ã—ã¾ã™ã€‚</p><p>è©•ä¾¡æ–¹æ³•ã®é¸æŠã§ã¯ã€å…ˆç¨‹ä½œæˆã—ãŸè©•ä¾¡ãƒ•ãƒ­ãƒ¼ã‚’é¸æŠã—ã¾ã™ã€‚</p><p>è©•ä¾¡å…¥åŠ›ãƒãƒƒãƒ”ãƒ³ã‚°ã®éƒ¨åˆ†ã«ã¤ã„ã¦ã€<code>question</code>ã®ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã¯<code>data.question</code>ã‚’é¸æŠã—ã¾ã™ã€‚ã“ã‚Œã¯ä¸€æ‹¬ãƒ†ã‚¹ãƒˆã®è¨­å®šã§ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸCSVãƒ•ã‚¡ã‚¤ãƒ«ã®questionåˆ—ã®ãƒ‡ãƒ¼ã‚¿ã«ç›¸å½“ã—ã¾ã™ã€‚<code>answer</code>ã®ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã¯<code>output.answer</code>ã‚’é¸æŠã—ã¾ã™ã€‚ã“ã‚Œã¯LLMã‹ã‚‰ã®å‡ºåŠ›ã«ç›¸å½“ã—ã¾ã™ã€‚</p><img src="/images/20230919a/02.png" alt="" width="1200" height="710" loading="lazy"><p>ã€Œæ¬¡ã¸ã€ã‚’æŠ¼ã™ã¨ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ç”»é¢ãŒå‡ºã¾ã™ãŒã€æœ€çµ‚ç¢ºèªã®ç”»é¢ãªã®ã§å•é¡Œãªã‘ã‚Œã°ã€Œé€ä¿¡ã€ã‚’æŠ¼ã—ã¾ã™ã€‚</p><p>åˆ¥ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§å®Ÿè¡Œã—ãŸã„å ´åˆã¯ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å¤‰ãˆã¦ä»¥ä¸Šã®æ“ä½œã‚’ç¹°ã‚Šè¿”ã—ã¾ã™ã€‚</p><p>ãƒ•ãƒ­ãƒ¼ç·¨é›†ç”»é¢ä¸Šéƒ¨ã®ã€Œä¸€æ‹¬å®Ÿè¡Œã®è¡¨ç¤ºã€ã‚’æŠ¼ã™ã¨éå»ã®å®Ÿè¡ŒãŒè¦‹ã‚‰ã‚Œã¾ã™ã€‚</p><img src="/images/20230919a/image-8.png" alt="" width="473" height="74" loading="lazy"><p>éå»ã®å®Ÿè¡Œã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒªã‚¹ãƒˆåŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p>ã“ã“ã§ã€ã„ãã¤ã‹ã®å®Ÿè¡Œã‚’ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã§é¸æŠã—ã€ã€Œãƒ¡ãƒˆãƒªãƒƒã‚¯ã®æ¯”è¼ƒã€ã‚’æŠ¼ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><img src="/images/20230919a/03.png" alt="" width="1200" height="415" loading="lazy"><p>ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«å„å®Ÿè¡Œã«å¯¾ã™ã‚‹è©•ä¾¡æŒ‡æ¨™ã‚’æ¯”è¼ƒã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>ã‚‚ã¡ã‚ã‚“ã€ä»»æ„ã®è©•ä¾¡æŒ‡æ¨™ã«ã¤ã„ã¦ã‚½ãƒ¼ãƒˆã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</p><img src="/images/20230919a/04.png" alt="" width="1200" height="268" loading="lazy"><p>ä»¥ä¸Šã§ä»Šå›ç›®æ¨™ã¨ã—ã¦ã„ãŸã“ã¨ãŒé”æˆã§ãã¾ã—ãŸã€‚</p><h3 id="è£œè¶³"><a href="#è£œè¶³" class="headerlink" title="è£œè¶³"></a>è£œè¶³</h3><p>æœ¬æ¥ã§ã‚ã‚Œã°Variantæ©Ÿèƒ½ã‚’ä½¿ã£ã¦è¤‡æ•°ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä¸€æ‹¬ã§è©•ä¾¡ã—ãŸã„ã¨ã“ã‚ã§ã™ã€‚</p><p>ã—ã‹ã—ã€Variantæ©Ÿèƒ½ã‚’ä½¿ã£ã¦å®Ÿè¡Œã—ã‚ˆã†ã¨ã—ãŸã¨ã“ã‚ã€è¨˜äº‹åŸ·ç­†å½“æ™‚(2023å¹´9æœˆ13æ—¥)ã§ã¯ä¸‹å›³ã®ã‚ˆã†ã«åˆ—æ–¹å‘ã«å±•é–‹ã•ã‚Œã¦ã—ã¾ã„ã€çµæœã®æ¯”è¼ƒãŒè¡Œã„ã«ãã„ã¨æ„Ÿã˜ã¾ã—ãŸã€‚</p><img src="/images/20230919a/image-10.png" alt="image-10.png" width="1200" height="210" loading="lazy"><p>ã“ã®ãŸã‚ä»Šå›ã¯Variantæ©Ÿèƒ½ã‚’ä½¿ã‚ãšã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å¤‰ãˆã‚‹æ¯ã«é€ä¸€å®Ÿè¡Œã™ã‚‹æ–¹æ³•ã‚’å–ã‚Šã¾ã—ãŸã€‚</p><p>Prompt Flowã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç‰ˆãŒçµ‚ã‚ã‚Šå®Œæˆç‰ˆãŒç™»å ´ã™ã‚‹é ƒã«ã¯æ”¹å–„ã•ã‚Œã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã®ã§ã€ä»Šå¾Œã«æœŸå¾…ã§ã™ã€‚</p><h1 id="ãŠã‚ã‚Šã«"><a href="#ãŠã‚ã‚Šã«" class="headerlink" title="ãŠã‚ã‚Šã«"></a>ãŠã‚ã‚Šã«</h1><p>æœ¬è¨˜äº‹ã§ã¯Prompt Flowã§ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å®Ÿé¨“ç®¡ç†ã‚’è¡Œã†æ–¹æ³•ã‚’ã”ç´¹ä»‹ã—ã¾ã—ãŸã€‚</p><p>LLMã®é–‹ç™ºã‚„é‹ç”¨ã«æºã‚ã£ã¦ã„ã‚‹æ–¹ã€…ã®å‚è€ƒã¨ãªã‚Œã°å¹¸ã„ã§ã™ã€‚</p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/DataScience/">DataScience</category>
      
      
      <category domain="https://future-architect.github.io/tags/Azure/">Azure</category>
      
      <category domain="https://future-architect.github.io/tags/LLM/">LLM</category>
      
      <category domain="https://future-architect.github.io/tags/LLMOps/">LLMOps</category>
      
      <category domain="https://future-architect.github.io/tags/Prompt-Flow/">Prompt Flow</category>
      
      
      <comments>https://future-architect.github.io/articles/20230919a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>ã€åˆæ ¼è¨˜ã€‘Google Cloud Professional Data Engineerèªå®šè³‡æ ¼ã‚’æŒ¯ã‚Šè¿”ã‚‹ã€2023å¹´åº¦ç‰ˆã€‘</title>
      <link>https://future-architect.github.io/articles/20230915a/</link>
      <guid>https://future-architect.github.io/articles/20230915a/</guid>
      <pubDate>Thu, 14 Sep 2023 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;img src=&quot;/images/20230915a/image.png&quot; alt=&quot;&quot; width=&quot;599&quot; height=&quot;586&quot; loading=&quot;lazy&quot;&gt;

&lt;h2 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot;</description>
          
        
      
      
      
      <content:encoded><![CDATA[<img src="/images/20230915a/image.png" alt="" width="599" height="586" loading="lazy"><h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><p>TIG å²¸ä¸‹ã§ã™ã€‚</p><p>æœ€è¿‘Data Engineeringã‚’æ‰±ã†ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ç•°å‹•ã—ãŸã“ã¨ã‚‚ã‚ã‚Šã€Google Cloudã«ãŠã‘ã‚‹Data Engineeringã‚’ç¶²ç¾…çš„ã«å­¦ã³ãŸãã€Professional Data Engineerèªå®šè³‡æ ¼ã‚’å—ã‘ã¦ãã¾ã—ãŸã€‚çµæœã¨ã—ã¦ã€ç„¡äº‹ã«åˆæ ¼ã‚’æœãŸã™ã“ã¨ãŒã§ãã¾ã—ãŸã€‚</p><p>æœ¬è¨˜äº‹ã§ã¯å­¦ç¿’å†…å®¹ãªã©ã®éç¨‹ã‚’æ›¸ã„ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚</p><p>ã¾ãŸæœ¬è©¦é¨“ã¯Google Cloudãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ä¼æ¥­å‘ã‘ã®ãƒã‚¦ãƒãƒ£ãƒ¼ã‚’æ´»ç”¨ã—ã¦å—é¨“ã—ã¾ã—ãŸã€‚å¤§å¤‰æ„Ÿè¬ã—ã¦ãŠã‚Šã¾ã™ï¼</p><p>éå»è¨˜äº‹ï¼š</p><ul><li><a href="https/articles/20211013a/">ã€åˆæ ¼è¨˜ã€‘Google Cloud Professional Data Engineerèªå®šè³‡æ ¼ã‚’æŒ¯ã‚Šè¿”ã‚‹</a></li></ul><p>Google Cloud èªå®šè³‡æ ¼é–¢é€£ã®éå»è¨˜äº‹ï¼š</p><ul><li><a href="/articles/20220930a/">ã€åˆæ ¼è¨˜ã€‘Google Cloud Professional Machine Learning Engineerèªå®šè³‡æ ¼ã‚’æŒ¯ã‚Šè¿”ã‚‹</a></li><li><a href="/articles/20220411a/">Google Cloud Professional Cloud Architectã®å†èªå®šã«åˆæ ¼ã—ã¾ã—ãŸ</a></li><li><a href="/articles/20200902/">GCP Professional Cloud Network Engineer ã«åˆæ ¼ã—ã¾ã—ãŸ</a></li><li><a href="/articles/20210625a/">GCP Associate Cloud Engineer åˆæ ¼è¨˜</a></li></ul><h2 id="è©¦é¨“ã¨å‡ºé¡Œç¯„å›²"><a href="#è©¦é¨“ã¨å‡ºé¡Œç¯„å›²" class="headerlink" title="è©¦é¨“ã¨å‡ºé¡Œç¯„å›²"></a>è©¦é¨“ã¨å‡ºé¡Œç¯„å›²</h2><p><a href="https://cloud.google.com/certification/data-engineer?hl=ja">å…¬å¼</a>ã®å‡ºé¡Œç¯„å›²ã¨ã€å®Ÿéš›ã®è©¦é¨“å†…å®¹ã®æ‰€æ„Ÿã¯ä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚</p><h3 id="ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚·ã‚¹ãƒ†ãƒ ã®è¨­è¨ˆ"><a href="#ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚·ã‚¹ãƒ†ãƒ ã®è¨­è¨ˆ" class="headerlink" title="ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚·ã‚¹ãƒ†ãƒ ã®è¨­è¨ˆ"></a>ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚·ã‚¹ãƒ†ãƒ ã®è¨­è¨ˆ</h3><ul><li>ãƒ‡ãƒ¼ã‚¿ã®å‰å‡¦ç†ã‚’è¡Œã†ã†ãˆã§ã©ã®ã‚ˆã†ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ãŒæ¨å¥¨ã•ã‚Œã‚‹ã‹ï¼Ÿ<ul><li>ãƒ­ãƒ¼ã‚³ãƒ¼ãƒ‰ãƒ»ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã§å‰å‡¦ç†ã—ãŸã„<ul><li>Dataprepã‚„Data Fusion</li></ul></li><li>Kubernetesã‚’åˆ©ç”¨ã—ãŸã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®æ´»ç”¨<ul><li>Cloud Composer</li></ul></li></ul></li><li>ãƒ‡ãƒ¼ã‚¿ã®å—ã‘å£ã«ã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã§ã‚ã‚‹PubSubã‚’æ§‹ãˆã¦ãŠãã®ãŒé‰„æ¿</li><li>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ç”¨é€”ã¯ä½•ãªã®ã‹ï¼Ÿå–ã‚Šæ‰±ã†ãƒ‡ãƒ¼ã‚¿ã¯ï¼Ÿæ™‚ç³»åˆ—ï¼Ÿãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ï¼Ÿ<ul><li>ç”¨é€”ã«ã‚ˆã£ã¦ã€DBã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’é¸ã¶</li><li>Cloud SQL&#x2F;Bigtable&#x2F;Firestore&#x2F;Spannerã©ã‚Œã‚’é¸ã¶ã¹ãã‹</li></ul></li><li>ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã§SQLä½¿ã„ãŸã„ï¼Ÿãƒ‡ãƒ¼ã‚¿ã‚¦ã‚§ã‚¢ãƒã‚¦ã‚¹ã‚’æ§‹ç¯‰ã—ãŸã„ï¼Ÿ<ul><li>BigQueryä½¿ãŠã†</li></ul></li><li>BigQueryã¨PubSubãŒå„ªç§€<ul><li>å›ç­”ã«å›°ã£ãŸã‚‰ã¨ã‚Šã‚ãˆãšBigQueryã‹PubSubãŒå…¥ã£ã¦ã„ã‚‹é¸æŠè‚¢ã‚’é¸ã¶ã¨ã„ã†ãã‚‰ã„ã«BigQueryã¨PubSubãŒå¼·ã™ãã‚‹æ„Ÿï¼ˆä¸»è¦³ï¼‰</li><li>ç‰¹ã«BigQueryã¯åˆ¥æ ¼æ„Ÿã‚ã‚Šã¾ã™ã­ã€‚å®Ÿå‹™ã§ã‚‚ä½¿ã„å€’ã•ã‚Œã¦ã¾ã™ã€‚</li></ul></li></ul><h3 id="æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã®é‹ç”¨åŒ–"><a href="#æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã®é‹ç”¨åŒ–" class="headerlink" title="æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã®é‹ç”¨åŒ–"></a>æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã®é‹ç”¨åŒ–</h3><ul><li>ãƒ¢ãƒ‡ãƒ«ãŒéå­¦ç¿’ã—ã¦ã„ã‚‹å ´åˆã¯ã©ã†ã™ã‚‹ã‹ï¼Ÿ<ul><li>ãƒ‡ãƒ¼ã‚¿ã‚’å¢—ã‚„ã™</li><li>æ­£è¦åŒ–ã™ã‚‹</li><li>å­¦ç¿’ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸›ã‚‰ã™</li></ul></li><li>æ¬ æå€¤ã‚’å«ã‚€å ´åˆã¯ã©ã†ã™ã‚‹ã‹ï¼Ÿ<ul><li>ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã§é™¤å»ã—ãŸã„å ´åˆã¯Dataprep</li><li>Dataflowã§BigQueryã‚’å‰å‡¦ç†ã¨ã—ã¦çµ„ã¿è¾¼ã‚€æ‰‹ã‚‚ã‚ã‚‹</li></ul></li><li>æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã®å­¦ç¿’å‡¦ç†ã‚’æ—©ãçµ‚ã‚ã‚‰ã›ãŸã„å ´åˆã¯ã©ã†ã™ã‚‹ã‹ï¼Ÿ<ul><li>GPUãŒä½¿ãˆã‚‹ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã‚ã‚Œã°ã€GPUæ­è¼‰ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®åˆ©ç”¨</li></ul></li><li>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒè§£æ±ºã—ãŸã„èª²é¡Œã¯ã©ã®ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ã†ã¹ãã‹<ul><li>å›å¸°å•é¡Œ&#x2F;åˆ†é¡å•é¡Œã‚’ç†è§£ã—ã¦ãŠã</li></ul></li><li>æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã®é‹ç”¨æ–¹æ³•<ul><li>å­¦ç¿’ã®è‡ªå‹•åŒ–</li><li>ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®ç›£è¦–ãƒ»ç®¡ç†</li></ul></li></ul><h3 id="ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã®å“è³ªã®ç¢ºä¿"><a href="#ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã®å“è³ªã®ç¢ºä¿" class="headerlink" title="ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã®å“è³ªã®ç¢ºä¿"></a>ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã®å“è³ªã®ç¢ºä¿</h3><ul><li>é©åˆ‡ãªã‚¢ãƒ©ãƒ¼ãƒˆè¨­è¨ˆ<ul><li>ä½•ã‚’æŒ‡æ¨™ã¨ã—ãŸã‚¢ãƒ©ãƒ¼ãƒˆã‚’è¨­è¨ˆã™ã¹ãã‹ï¼Ÿ</li></ul></li><li>ã‚·ã‚¹ãƒ†ãƒ ã®å¯ç”¨æ€§ã¯ã©ã†ã‚ã‚‹ã¹ãã‹<ul><li>ã‚¾ãƒ¼ãƒŠãƒ«&#x2F;ãƒªãƒ¼ã‚¸ãƒ§ãƒŠãƒ«&#x2F;ãƒãƒ«ãƒãƒªãƒ¼ã‚¸ãƒ§ãƒŠãƒ«</li><li>ãƒ¬ãƒ—ãƒªã‚«ã®æ´»ç”¨</li></ul></li><li>Dataflowãªã©ã«ãŠã‘ã‚‹å‡¦ç†é…å»¶ã«å¯¾ã™ã‚‹ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°<ul><li>é©åˆ‡ãªãƒãƒ¼ãƒ‰ã®ã‚¹ã‚±ãƒ¼ãƒ«ã‚¢ãƒƒãƒ—</li></ul></li><li>æ³•è¦åˆ¶ã«å¯¾å¿œã™ã‚‹ãŸã‚ã®ãƒ‡ãƒ¼ã‚¿ã®ç½®ãæ–¹<ul><li>1ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ãƒ‡ãƒ¼ã‚¿ã‚’é›†ç´„ã•ã›ã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¤ã‚¯ã®ã‚ˆã†ãªå½¢ã‚’ã¨ã£ã¦ãŠã</li></ul></li><li>é©åˆ‡ãªãƒ­ã‚°ã®é›†ç´„ãƒ»ä¿ç®¡<ul><li>Log sinkã‚„ãƒ­ã‚°ãƒã‚±ãƒƒãƒˆã®æ´»ç”¨</li><li>æ¤œç´¢æ€§ã‚’é«˜ã‚ãŸã„ã®ã§ã‚ã‚Œã°BigQueryã¸ã‚·ãƒ³ã‚¯</li></ul></li></ul><h3 id="ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰ã¨é‹ç”¨åŒ–"><a href="#ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰ã¨é‹ç”¨åŒ–" class="headerlink" title="ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰ã¨é‹ç”¨åŒ–"></a>ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰ã¨é‹ç”¨åŒ–</h3><ul><li>è¤‡æ•°ã®ãƒªã‚½ãƒ¼ã‚¹ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å‚ç…§ã—ãŸã„å ´åˆã®DBãƒ»ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®é¸æŠ</li><li>IAMã‚’åˆ©ç”¨ã—ãŸãƒ‡ãƒ¼ã‚¿ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™<ul><li>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¬ãƒ™ãƒ«ã®IAM</li><li>ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆãƒ¬ãƒ™ãƒ«ã®IAM</li><li>ãƒ†ãƒ¼ãƒ–ãƒ«ã®åˆ—ãƒ¬ãƒ™ãƒ«ã®IAM</li></ul></li><li>Cloud DLPã‚’åˆ©ç”¨ã—ãŸæ©Ÿå¯†æƒ…å ±ã®ä¿è­·<ul><li>æš—å·åŒ–ã—ãŸæƒ…å ±ã¯å¾©å…ƒã§ãã‚‹ã‚ˆã†ã«ã—ã¦ãŠãå¿…è¦ãŒã‚ã‚‹ or Not?</li></ul></li></ul><h2 id="å—é¨“ã¾ã§ã®éç¨‹"><a href="#å—é¨“ã¾ã§ã®éç¨‹" class="headerlink" title="å—é¨“ã¾ã§ã®éç¨‹"></a>å—é¨“ã¾ã§ã®éç¨‹</h2><p>å‹‰å¼·æœŸé–“ã¯ç´„1ã‹æœˆã»ã©ã§ã€ä¸»ã«ä»¥ä¸‹2ã¤ã®æ•™æã‚’åˆ©ç”¨ã—ã¾ã—ãŸã€‚</p><ul><li>Google Cloud Skills Boost for Partners<ul><li><a href="https://go.cloudplatformonline.com/ODA4LUdKVy0zMTQAAAGLnYP9oegPUvBCNvLo78WmEQiM_CnVxjPXmx9ZG9q4pL9Bk0xJ1_vowa60C6W4Qm_6JFo07i8=">Create and Manage Cloud Resources</a></li><li><a href="https://go.cloudplatformonline.com/ODA4LUdKVy0zMTQAAAGLnYP9oUG5zPOW9QIHqa1spOv9I4AzHhHRS34gabCSyuSdn6Aa3zIPRpEex1uthLSuBtNJiSM=">Perform Foundational Data, ML and AI Tasks in Google Cloud</a></li><li><a href="https://go.cloudplatformonline.com/ODA4LUdKVy0zMTQAAAGLnYP9oZY0kQV0dpn8ANn8j0ArOZiyxYzkn_yNbnbe_Av40gu0nqSxLYUw7WT_K-QYO8_De6I=">Engineer Data in Google Cloud</a></li></ul></li><li>Udemy<ul><li><a href="https://www.udemy.com/share/109eq23@8q8wUTalxAxhRgFfWbEgH1c3mbjL7aXRRw7dpbqd0PHnoLq-HnSq5UGeaHyEwA0e/">GCP : Google Cloud Professional Data Engineer Practice Tests</a></li></ul></li></ul><h3 id="Google-Cloud-Skills-Boost-for-Partners"><a href="#Google-Cloud-Skills-Boost-for-Partners" class="headerlink" title="Google Cloud Skills Boost for Partners"></a>Google Cloud Skills Boost for Partners</h3><p>ã“ã¡ã‚‰ã®æ•™æã¯ã€Google Cloudã«ãŠã‘ã‚‹Data Engineeringã‚’ãƒãƒ³ã‚ºã‚ªãƒ³å½¢å¼ã§æ§‹ç¯‰ã—ãªãŒã‚‰å­¦ã¶ã“ã¨ãŒã§ãã¾ã™ã€‚<br>ä¾‹ãˆã°ã€</p><ul><li>CSVå½¢å¼ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«å¯¾ã—ã¦ã€æ¬ æå€¤ã‚„å¤–ã‚Œå€¤ãªã©ã‚’Dataprepã‚„DataFusionã‚’åˆ©ç”¨ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°ã‚’è¡Œã†</li><li>BigQueryã‚’åˆ©ç”¨ã—ã¦å‰å‡¦ç†ã‚’æ–½ã—ãŸå¾Œã«ã€BigQuery MLã‚’åˆ©ç”¨ã—ã¦æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã‚’æ§‹ç¯‰ã™ã‚‹</li><li>Cloud Dataflowã‚’åˆ©ç”¨ã—ãŸæ©Ÿæ¢°å­¦ç¿’ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æ§‹ç¯‰</li></ul><p>ãªã©ã‚’ã€å®Ÿéš›ã®Google Cloudç’°å¢ƒã‚’åˆ©ç”¨ã—ã¦æ§‹ç¯‰ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚<br>ã‚„ã¯ã‚Šã€æ‰‹ã‚’å‹•ã‹ã—ãªãŒã‚‰å­¦ã¶æ–¹æ³•ãŒä¸€ç•ªé ­ã«å…¥ã£ã¦ãã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><h4 id="Udemy"><a href="#Udemy" class="headerlink" title="Udemy"></a>Udemy</h4><p>èªå®šè³‡æ ¼ã«ã¯å®ŸæŠ€è©¦é¨“ã¯ãªã„ã®ã§ã€ã‚„ã¯ã‚Šä»•ä¸Šã’ã¯Udemyã®æ¨¡æ“¬è©¦é¨“ã§æ…£ã‚‰ã—ã¾ã™ã€‚</p><p>Udemyã®æ¨¡æ“¬è©¦é¨“ã¯è‰²ã€…ã‚ã£ã¦è¿·ã†ã¨æ€ã„ã¾ã™ãŒã€Google Cloudã¯æ—¥ã€…ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚Œã¦ãŠã‚Šã¾ã™ã®ã§ã€ã§ãã‚‹ã ã‘æœ€æ–°ã®æƒ…å ±ãŒåæ˜ ã•ã‚ŒãŸæ¨¡æ“¬è©¦é¨“ï¼ˆæ•™æãŒå…¬é–‹ã•ã‚Œã¦æ—¥ãŒæµ…ã„ã‚‚ã®ï¼‰ã‚’åˆ©ç”¨ã—ãŸã»ã†ãŒã‚ˆã„ã§ã™ã€‚</p><p>ä»Šå›åˆ©ç”¨ã—ãŸæ¨¡æ“¬è©¦é¨“ã¯è‹±èªè©¦é¨“ç”¨ã§ã—ãŸãŒã€DeepLãªã©ã®ç¿»è¨³æ©Ÿã‚’ä½µç”¨ã™ã‚‹ã“ã¨ã§é›£ãªãã“ãªã™ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>æ¨¡æ“¬è©¦é¨“ã‚’2ï½3å‘¨ã‚„ã£ã¦ãŠã‘ã°ã€è‡ªä¿¡ã‚’ã‚‚ã£ã¦è©¦é¨“ã«è‡¨ã‚€ã“ã¨ãŒã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><h2 id="çµ‚ã‚ã‚Šã«"><a href="#çµ‚ã‚ã‚Šã«" class="headerlink" title="çµ‚ã‚ã‚Šã«"></a>çµ‚ã‚ã‚Šã«</h2><p>æœ¬è©¦é¨“ã¯ML Engineerèªå®šè³‡æ ¼ã¨å­¦ç¿’ç¯„å›²ãŒè¢«ã£ã¦ã„ã‚‹éƒ¨åˆ†ã‚‚ã‚ã‚Šã€è‡ªåˆ†ã«ã¨ã£ã¦ã¯ã‚µã‚¯ã‚µã‚¯å­¦ç¿’ã‚’é€²ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚ãŸã ã€ã‚ˆã‚Šè¾¼ã¿å…¥ã£ãŸãƒ‡ãƒ¼ã‚¿å‡¦ç†ã®æŠ€è¡“ã€ç‰¹ã«Cloud Composerã‚„Dataprocå‘¨ã‚Šã®çŸ¥è­˜ãŒæµ…ãã€ãã“ã®å­¦ç¿’ã‚’é‡ç‚¹çš„ã«è¡Œã„ã¾ã—ãŸã€‚ã“ã‚Œã‚‰ã®ç¯„å›²ã¯å®Ÿå‹™ã§ã‚‚å¿…è¦ã ã£ãŸã®ã§ã¡ã‚‡ã†ã©ã‚ˆã‹ã£ãŸã§ã™ã€‚</p><p>è³‡æ ¼è©¦é¨“ã¯ç›®æ¨™ãŒç«‹ã¦ã‚„ã™ãã€ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ‘ã‚¹ã‚‚å¤šãå…¬é–‹ã•ã‚Œã¦ãŠã‚Šã€å­¦ç¿’ã®ã¨ã£ã‹ã‹ã‚Šã«ã¯éå¸¸ã«ã‚ˆã„ã¨æ€ã†ã®ã§çš†ã•ã‚“ã‚‚ãœã²å—ã‘ã¦ã¿ã¦ãã ã•ã„ã€‚</p><p>ã‚¢ã‚¤ã‚­ãƒ£ãƒƒãƒç”»åƒã¯<a href="https://cloud.google.com/learn/certification?hl=ja">Google Cloud Certification</a>ã‹ã‚‰ä»˜ä¸ã•ã‚ŒãŸã‚‚ã®ã«ãªã‚Šã¾ã™ã€‚</p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Infrastructure/">Infrastructure</category>
      
      
      <category domain="https://future-architect.github.io/tags/GCP/">GCP</category>
      
      <category domain="https://future-architect.github.io/tags/%E5%90%88%E6%A0%BC%E8%A8%98/">åˆæ ¼è¨˜</category>
      
      <category domain="https://future-architect.github.io/tags/%E8%B3%87%E6%A0%BC/">è³‡æ ¼</category>
      
      <category domain="https://future-architect.github.io/tags/PDE/">PDE</category>
      
      <category domain="https://future-architect.github.io/tags/DataEngineer/">DataEngineer</category>
      
      <category domain="https://future-architect.github.io/tags/Udemy/">Udemy</category>
      
      
      <comments>https://future-architect.github.io/articles/20230915a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>ã€LLMOpsã€‘LLMã®å®Ÿé¨“ç®¡ç†ã«TruLens-Evalã‚’ä½¿ã£ã¦ã¿ãŸ</title>
      <link>https://future-architect.github.io/articles/20230914a/</link>
      <guid>https://future-architect.github.io/articles/20230914a/</guid>
      <pubDate>Wed, 13 Sep 2023 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;img src=&quot;/images/20230914a/top.png&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;418&quot; loading=&quot;lazy&quot;&gt;

&lt;h2 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot;</description>
          
        
      
      
      
      <content:encoded><![CDATA[<img src="/images/20230914a/top.png" alt="" width="800" height="418" loading="lazy"><h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><p>ã“ã‚“ã«ã¡ã¯ã€SAIG&#x2F;MLOpsãƒãƒ¼ãƒ ã§ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã‚’ã—ã¦ã„ã‚‹å‰ç”°ã§ã™ã€‚</p><p>LLMã®å®Ÿé¨“ç®¡ç†ãƒ„ãƒ¼ãƒ«å€™è£œã¨ã—ã¦ã€TruLens-Evalã‚’æ¤œè¨¼ã—ã¾ã—ãŸã€‚åˆã‚ã›ã¦ã€LLMã®å®Ÿé¨“ç®¡ç†ã«ã¤ã„ã¦ã¾ã¨ã‚ã¦ã¿ã¾ã—ãŸã€‚</p><h2 id="èƒŒæ™¯ã¨ç›®çš„"><a href="#èƒŒæ™¯ã¨ç›®çš„" class="headerlink" title="èƒŒæ™¯ã¨ç›®çš„"></a>èƒŒæ™¯ã¨ç›®çš„</h2><h3 id="LLMOpsã¨ã¯"><a href="#LLMOpsã¨ã¯" class="headerlink" title="LLMOpsã¨ã¯"></a>LLMOpsã¨ã¯</h3><p>è¿‘å¹´ã€å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«(LLM)ã®æ€§èƒ½ãŒé£›èºçš„ã«å‘ä¸Šã—ã€ãã®é«˜åº¦ãªè‡ªç„¶è¨€èªå‡¦ç†èƒ½åŠ›ã«ã‚ˆã£ã¦æ§˜ã€…ãªé ˜åŸŸã§ã®èª²é¡Œè§£æ±ºãŒæœŸå¾…ã•ã‚Œã¦ã„ã¾ã™ã€‚LLMã¯æ–‡ç« ç”Ÿæˆã€ç¿»è¨³ã€è¦ç´„ã€è³ªå•å¿œç­”ãªã©å¤šå²ã«ã‚ãŸã‚‹ã‚¿ã‚¹ã‚¯ã«ãŠã„ã¦é©šç•°çš„ãªæˆæœã‚’ç¤ºã—ã¦ãŠã‚Šã€ãã®å¿œç”¨ç¯„å›²ã¯ã¾ã™ã¾ã™åºƒãŒã£ã¦ã„ã¾ã™ã€‚</p><p>LLMOpsã¯ã€LLMã‚’çµ„ã¿è¾¼ã‚“ã ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºãƒ»é‹ç”¨ã®åŠ¹ç‡åŒ–ã‚’ç›®æŒ‡ã™ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã§ã™ã€‚ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ç¨®é¡ã‚„é–‹ç™ºè¦æ¨¡ãªã©ã«ã‚ˆã£ã¦LLMOpsã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¯å¤§ããå¤‰ã‚ã‚Šã¾ã™ãŒã€ã„ãšã‚Œã®å ´åˆã‚‚LLMã®æ€§èƒ½è©•ä¾¡ã‚„æŒ™å‹•ã®è§£æã®ãŸã‚ã«åº¦é‡ãªã‚‹å®Ÿé¨“ãŒå¿…è¦ã¨ãªã‚Šã¾ã™ã€‚é–‹ç™ºéç¨‹ã§è¡Œã‚ã‚Œã‚‹å®Ÿé¨“ã‚’é©åˆ‡ã«ç®¡ç†ã™ã‚‹ã“ã¨ã¯ã€LLMã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®é–‹ç™ºã‚’åŠ¹ç‡åŒ–ã•ã›ã¾ã™ã€‚</p><img src="/images/20230914a/68747470733a2f2.png" alt="" width="960" height="540" loading="lazy"><p>å¼•ç”¨ï¼š<a href="/articles/20230912a/">LLMé–‹ç™ºã®ãƒ•ãƒ­ãƒ¼</a></p><h3 id="LLMã®å®Ÿé¨“ç®¡ç†"><a href="#LLMã®å®Ÿé¨“ç®¡ç†" class="headerlink" title="LLMã®å®Ÿé¨“ç®¡ç†"></a>LLMã®å®Ÿé¨“ç®¡ç†</h3><p>LLMã«å¯¾ã—ã¦ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã•ã›ã‚‹ãŸã‚ã«ã¯ã€ãã®å‡¦ç†çµæœã‚’é©åˆ‡ã«è©•ä¾¡ã—ã€ãƒ¢ãƒ‡ãƒ«ã®æ€§èƒ½ã‚„æŒ¯ã‚‹èˆã„ã«ã¤ã„ã¦ç†è§£ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãã®ãŸã‚ã€<strong>ä½•åº¦ã‚‚å®Ÿé¨“ã‚’ç¹°ã‚Šè¿”ã™ã“ã¨</strong>ãŒæƒ³å®šã•ã‚Œã¾ã™ã€‚ã—ã‹ã—ã€<strong>LLMã®æ€§èƒ½è©•ä¾¡ã‚„æŒ™å‹•è§£æã¯è¤‡é›‘</strong>ã§ã‚ã‚Šã€å¤šãã®è¦å› ãŒçµ¡ã¿åˆã†ã“ã¨ã‹ã‚‰ã€é©åˆ‡ãªå®Ÿé¨“ç®¡ç†ãŒå¿…è¦ã§ã™ã€‚å®Ÿé¨“ç®¡ç†ã«ã‚ˆã‚Šã€éå»ã®å®Ÿé¨“è¨­è¨ˆã‚„çµæœã‚’ç°¡å˜ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã®åŠ¹ç‡ã‚’ä¸Šã’ã‚‹ã“ã¨ã‚’ç›®æŒ‡ã—ã¾ã™ã€‚</p><p>å®Ÿé¨“ç®¡ç†ã¯ã“ã‚Œã¾ã§ã®MLã§ã‚‚å®Ÿæ–½ã•ã‚Œã¦ãã¾ã—ãŸãŒã€MLã®å®Ÿé¨“ç®¡ç†ã¨LLMã®å®Ÿé¨“ç®¡ç†ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«ç•°ãªã‚‹ãŸã‚ã€ã‚ã‚‰ãŸã‚ã¦ã‚„ã‚‹ã¹ãã“ã¨ã‚’æ•´ç†ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><ul><li>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã‚„ãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ãŒä¸»ãªæ€§èƒ½å‘ä¸Šæ–¹æ³•ã¨ãªã‚‹ã“ã¨ã€‚</li><li>ãƒ¢ãƒ‡ãƒ«æ€§èƒ½ã®å®šé‡çš„è©•ä¾¡ãŒé›£ã—ãã€ç”¨ã„ã‚‹è©•ä¾¡æŒ‡æ¨™ã®æ¤œè¨ã‚„äººé–“ã«ã‚ˆã‚‹è©•ä¾¡ãŒå¿…è¦ã¨ãªã‚‹ã“ã¨ã€‚</li></ul><p>æœ¬è¨˜äº‹ã§ã¯ã€<strong>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°</strong>ã«ãŠã‘ã‚‹å®Ÿé¨“ç®¡ç†ã‚’æƒ³å®šã—ã¾ã™ã€‚</p><p>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¨ã¯LLMã«ä¸ãˆã‚‹æŒ‡ç¤ºã‚„è¦æ±‚ã®ã“ã¨ã‚’æŒ‡ã—ã¾ã™ã€‚ã‚¿ã‚¹ã‚¯ã«åˆã£ãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€LLMã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è³ªã®å‘ä¸ŠãŒæœŸå¾…ã§ãã¾ã™ã€‚ã‚¿ã‚¹ã‚¯ã«ç‰¹åŒ–ã—ãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ä¾‹ã¯<a href="https://www.promptingguide.ai/jp/introduction/examples">ã“ã¡ã‚‰</a>ã«ã¾ã¨ã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚</p><p>ä»¥ä¸‹ã®å›³ã¯ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã«ãŠã‘ã‚‹ä¸»ãªå®Ÿé¨“ã®æµã‚Œã§ã™ã€‚</p><img src="/images/20230914a/image.png" alt="" width="1200" height="548" loading="lazy"><p>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã®ãŸã‚ã®å®Ÿé¨“ç®¡ç†ã¯ä»¥ä¸‹ã®é …ç›®ã‚’ä¸­å¿ƒã«ç®¡ç†ã™ã‚‹ã“ã¨ã«ãªã‚‹ã¨è€ƒãˆã¾ã™ã€‚</p><p>(ã€‡ï¼šTruLens-Evalã§å®Ÿç¾å¯èƒ½ã€â–³ï¼šLangChainã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã«ã‚ˆã‚Šå®Ÿç¾å¯èƒ½ã€Ã—ï¼šç¾çŠ¶å˜ç‹¬ã§ã¯å¯¾å¿œã—ã¦ã„ãªã„ã¨æ€ã‚ã‚Œã‚‹)</p><ul><li>å†ç¾å¯èƒ½æ€§<ul><li>å…¥åŠ›ãƒ†ã‚­ã‚¹ãƒˆ(ã€‡)</li><li>å‡ºåŠ›ãƒ†ã‚­ã‚¹ãƒˆ(ã€‡)</li><li>ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ(â–³)</li><li>ãƒ¢ãƒ‡ãƒ«ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿(ã€‡)</li><li>ã‚³ãƒ¼ãƒ‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†(Ã—)</li></ul></li><li>å®Ÿé¨“è©³ç´°<ul><li>å®Ÿè¡Œãƒ¦ãƒ¼ã‚¶(Ã—)</li><li>ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—(ã€‡)</li><li>å®Ÿè¡Œæ™‚é–“(ã€‡)</li><li>ã‚¨ãƒ©ãƒ¼æ–‡(ã€‡)</li></ul></li><li>ç²¾åº¦ã®è©•ä¾¡<ul><li>ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã®è©•ä¾¡ã‚¹ã‚³ã‚¢(ã€‡)</li><li>LLMã«ã‚ˆã‚‹è©•ä¾¡ã‚¹ã‚³ã‚¢(ã€‡)</li><li>äººé–“ã«ã‚ˆã‚‹è©•ä¾¡ã‚¹ã‚³ã‚¢(ã€‡)</li><li>äººé–“ã«ã‚ˆã‚‹ãƒ†ã‚­ã‚¹ãƒˆãƒ¬ãƒ“ãƒ¥ãƒ¼(Ã—)</li></ul></li></ul><h2 id="æ¤œè¨¼æ¦‚è¦"><a href="#æ¤œè¨¼æ¦‚è¦" class="headerlink" title="æ¤œè¨¼æ¦‚è¦"></a>æ¤œè¨¼æ¦‚è¦</h2><p>Pythonå‘ã‘ã®OSSã§ã‚ã‚‹TruLens-Evalã‚’ä½¿ã£ã¦ã¿ã¾ã—ãŸã€‚TruLens-Evalã‚’å°å…¥ã™ã‚‹ã“ã¨ã§ã€LLMã®å®Ÿé¨“ç®¡ç†ã«å¿…è¦ãªæƒ…å ±ã‚’è‡ªå‹•çš„ã«ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã—ã€ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é€šã—ã¦ç°¡å˜ã«é–²è¦§ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã¾ãŸã€å®Ÿé¨“ã”ã¨ã«è©•ä¾¡æ–¹æ³•ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€å®Ÿè¡Œã¨åŒæ™‚ã«è©•ä¾¡å‡¦ç†ã‚’è¡Œã„çµæœã‚’ä¿å­˜ã—ã¦ãã‚Œã¾ã™ã€‚</p><h2 id="TruLens-Eval"><a href="#TruLens-Eval" class="headerlink" title="TruLens-Eval"></a>TruLens-Eval</h2><p>TruLensã¯å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«ã‚’å«ã‚€ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆã®é–‹ç™ºãŠã‚ˆã³ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã‚’è¡Œã†ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã‚»ãƒƒãƒˆã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚TruLensã¯ã€LLMãƒ™ãƒ¼ã‚¹ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è©•ä¾¡ã™ã‚‹TruLens-Evalã¨ã€ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ¢ãƒ‡ãƒ«ã®èª¬æ˜å¯èƒ½æ€§ã‚’å®Ÿç¾ã™ã‚‹TruLens-Explainã®2ã¤ã®ãƒ„ãƒ¼ãƒ«ã‹ã‚‰æ§‹æˆã•ã‚Œã¾ã™ã€‚ä»Šå›ã¯LLMå®Ÿé¨“ç®¡ç†ã‚’ç›®çš„ã¨ã™ã‚‹ãŸã‚ã€TruLens-Evalã«ã¤ã„ã¦èª¿æŸ»ã—ã¾ã—ãŸã€‚</p><p>å›³ã¯TruLens-Evalã®æ¦‚è¦ã«ã¤ã„ã¦èª¬æ˜ã—ãŸã‚‚ã®ã§ã™ã€‚</p><img src="/images/20230914a/68747470733a2f2_2.png" alt="" width="1200" height="551" loading="lazy"><p>å¼•ç”¨ï¼š<a href="https://medium.com/trulens/evaluate-and-track-your-llm-experiments-introducing-trulens-86028fe9b59a">Evaluate and Track your LLM Experiments: Introducing TruLens</a></p><ol><li>LLMã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã™ã‚‹ã€‚</li><li>LLMã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’TruLensã«æ¥ç¶šã—ã€ãƒ­ã‚®ãƒ³ã‚°ã‚’è¡Œã†ã€‚</li><li>feedbacké–¢æ•°ã‚’ãƒ­ã‚°ã«è¿½åŠ ã—ã€LLMã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ€§èƒ½ã‚’è©•ä¾¡ã™ã‚‹ã€‚</li><li>TruLens dashboardã‚’ä½¿ã£ã¦ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚„è©•ä¾¡çµæœLLM chainã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãªã©ã‚’ç¢ºèªã™ã‚‹ã€‚</li><li>ä¸€ç•ªæ€§èƒ½ã®è‰¯ã„LLM chainã‚’å¾—ã‚‹ã€‚</li></ol><p>æ˜¨ä»ŠLLMé–‹ç™ºãŒæ³¨ç›®ã‚’é›†ã‚ã¦ã„ã‚‹ãŸã‚ã€TruLens-Evalã®GitHubãƒªãƒã‚¸ãƒˆãƒªã®ã‚¹ã‚¿ãƒ¼æ•°ã¯ç¾åœ¨æ€¥å¢—ã—ã¦ã„ã¾ã™ã€‚</p><img src="/images/20230914a/star-history-202391.png" alt="star-history-202391.png" width="1200" height="836" loading="lazy"><h3 id="ãªãœTruLens-Evalã‹"><a href="#ãªãœTruLens-Evalã‹" class="headerlink" title="ãªãœTruLens-Evalã‹"></a>ãªãœTruLens-Evalã‹</h3><p>TruLens-Evalã¯UIã®è¦‹ã‚„ã™ã•ã‚„ã‚·ã‚¹ãƒ†ãƒ ã®è»½é‡ã•ã€GitHubã®ã‚¹ã‚¿ãƒ¼ãŒå¢—åŠ å‚¾å‘ã«ã‚ã‚‹OSSã§ã‚ã‚‹ç‚¹ãªã©ã®ç‰¹å¾´ã‹ã‚‰èª¿æŸ»ã®å¯¾è±¡ã¨ã—ã¾ã—ãŸã€‚</p><p>TruLens-Evalã¯ã€LLMã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ€§èƒ½ã«å¯¾ã™ã‚‹è©•ä¾¡ã‚’ã‚µãƒãƒ¼ãƒˆã—ã€å®Ÿé¨“ç®¡ç†ã®ä¸€éƒ¨ã¨ã—ã¦ä¿å­˜ã—ã¾ã™ã€‚<strong>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã«å¿…è¦ã¨è€ƒãˆã‚‰ã‚Œã‚‹å®Ÿé¨“ç®¡ç†</strong>ã«ä¸»ãªç„¦ç‚¹ã‚’ç½®ã„ãŸãƒ„ãƒ¼ãƒ«ã§ã™ã€‚</p><p>ã‚¿ã‚¹ã‚¯ã«ã‚ˆã£ã¦æœ€é©ãªè©•ä¾¡æŒ‡æ¨™ã¯å¤‰åŒ–ã—ã¾ã™ã€‚ã¾ãŸã€æœ€é©ãªè©•ä¾¡æŒ‡æ¨™ã¯å®šã¾ã£ã¦ãŠã‚‰ãšã€ã©ã®ã‚ˆã†ãªæŒ‡æ¨™ã‚’ç”¨ã„ã‚Œã°ã‚ˆã„ã®ã‹ã¨ã„ã†æ¤œè¨ã‚‚å¿…è¦ã«ãªã‚Šã¾ã™ã€‚TruLens-Evalã¯å®Ÿé¨“è©•ä¾¡ã«ã¤ã„ã¦æ•´ç†ã•ã‚ŒãŸã‚·ã‚¹ãƒ†ãƒ ã‚’æä¾›ã—ã¦ã„ã‚‹ãŸã‚ã€<strong>è©•ä¾¡æŒ‡æ¨™ã®æ¤œè¨ã‚‚å††æ»‘ã«é€²ã‚ãªãŒã‚‰ã‚ˆã‚Šè³ªã®é«˜ã„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã‚’ç›®æŒ‡ã™</strong>ã“ã¨ãŒã§ãã‚‹ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚</p><h3 id="TruLens-Evalã§ã§ãã‚‹ã“ã¨"><a href="#TruLens-Evalã§ã§ãã‚‹ã“ã¨" class="headerlink" title="TruLens-Evalã§ã§ãã‚‹ã“ã¨"></a>TruLens-Evalã§ã§ãã‚‹ã“ã¨</h3><ul><li>feedbacké–¢æ•°ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€å®Ÿé¨“ã®è©•ä¾¡ã‚’å††æ»‘ã«å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚feedbacké–¢æ•°ã¨ã¯ã€LLMã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒç”Ÿæˆã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆã‚’åˆ†æã—ã€LLMã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ€§èƒ½ã‚’ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã—ã¾ã™ã€‚</li><li>LLMã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ã ã‘ã§ã€feedbacké–¢æ•°ã®å®Ÿè¡Œã‚„LLMã®åˆ©ç”¨çŠ¶æ³ã®<strong>ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã‚’è‡ªå‹•ã§è¡Œã„</strong>ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</li><li>ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰å®Ÿé¨“çµæœã‚’é–²è¦§ã™ã‚‹ã“ã¨ãŒã§ãã€å®Ÿé¨“çµæœã®åˆ†æã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚</li><li>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ã¯å¾Œã‹ã‚‰æƒ…å ±ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ãŸã‚ã€äººã«ã‚ˆã‚‹è©•ä¾¡ãªã©ã‚’ç®¡ç†ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</li></ul><p>ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰é–²è¦§ã§ãã‚‹æƒ…å ±ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚</p><ul><li>LLMã‚’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã—ã¦æ‰±ã„ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ¯ã«å®Ÿé¨“ç®¡ç†ã‚’ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä¸€è¦§ã§ãã‚‹æƒ…å ±ã¯æ¬¡ã®é€šã‚Šã§ã™ã€‚<ul><li>å®Ÿé¨“å›æ•°</li><li>å®Ÿè¡Œæ™‚é–“ã®å¹³å‡</li><li>å®Ÿè¡Œã«ã‚ˆã‚‹ã‚³ã‚¹ãƒˆ(OpenAIãƒ¢ãƒ‡ãƒ«ã®ã‚ˆã†ãªå¾“é‡èª²é‡‘ã®å ´åˆ)</li><li>åˆè¨ˆãƒˆãƒ¼ã‚¯ãƒ³æ•°</li><li>è©•ä¾¡ã‚¹ã‚³ã‚¢</li></ul></li></ul><img src="/images/20230914a/ã‚³ãƒ¡ãƒ³ãƒˆ_2023-09-01_144334.png" alt="" width="1200" height="578" loading="lazy"><ul><li>å®Ÿé¨“ã®è©³ç´°ã‚’ãƒ†ãƒ¼ãƒ–ãƒ«ã¨ã—ã¦è¡¨ç¤ºã§ãã¾ã™ã€‚ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åã«ã‚ˆã‚‹ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚„è©•ä¾¡ã‚¹ã‚³ã‚¢ã«ã‚ˆã‚‹ä¸¦ã³æ›¿ãˆæ©Ÿèƒ½ãªã©ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚æ¯”è¼ƒã§ãã‚‹æƒ…å ±ã¯æ¬¡ã®é€šã‚Šã§ã™ã€‚<ul><li>å…¥åŠ›ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼ˆç¾åœ¨æ—¥æœ¬èª(Unicode)ã«æœªå¯¾å¿œï¼‰</li><li>å‡ºåŠ›çµæœï¼ˆç¾åœ¨æ—¥æœ¬èª(Unicode)ã«æœªå¯¾å¿œï¼‰</li><li>å®Ÿè¡Œæ™‚é–“</li><li>ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—</li><li>åˆè¨ˆãƒˆãƒ¼ã‚¯ãƒ³æ•°</li><li>ã‚¿ã‚°</li><li>è©•ä¾¡ã‚¹ã‚³ã‚¢ï¼ˆè‰²ä»˜ãï¼‰ã€€ãªã©</li></ul></li></ul><img src="/images/20230914a/ã‚³ãƒ¡ãƒ³ãƒˆ_2023-09-01_144410.png" alt="" width="1200" height="579" loading="lazy"><ul><li>å®Ÿé¨“æ¯ã«è©³ç´°ã‚’ç¢ºèªã§ãã¾ã™ã€‚<ul><li>å…¥åŠ›ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ</li><li>å‡ºåŠ›çµæœ</li><li>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ¯ã®å®Ÿè¡Œæ™‚é–“</li><li>è©•ä¾¡ã‚¹ã‚³ã‚¢ã€€ãªã©</li></ul></li></ul><img src="/images/20230914a/ã‚³ãƒ¡ãƒ³ãƒˆ_2023-09-01_144443.png" alt="" width="1200" height="580" loading="lazy"><p>ã¾ãŸã€LangChainã‚’ç”¨ã„ãŸå ´åˆã¯ã€ãƒ¢ãƒ‡ãƒ«æ¯ã®å…¥å‡ºåŠ›ã¨ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ç¢ºèªã§ãã¾ã™ã€‚ï¼ˆæœªæ¤œè¨¼ï¼‰</p><img src="/images/20230914a/Leaderboard.png" alt="Leaderboard.png" width="1200" height="568" loading="lazy"><img src="/images/20230914a/Chain_Explore.png" alt="Chain_Explore.png" width="1200" height="605" loading="lazy"><h3 id="TruLens-Eval-amp-LangChainï¼ˆæœªæ¤œè¨¼ï¼‰"><a href="#TruLens-Eval-amp-LangChainï¼ˆæœªæ¤œè¨¼ï¼‰" class="headerlink" title="TruLens-Eval &amp; LangChainï¼ˆæœªæ¤œè¨¼ï¼‰"></a>TruLens-Eval &amp; LangChainï¼ˆæœªæ¤œè¨¼ï¼‰</h3><p>TruLens-Evalã¯LangChainã®åˆ©ç”¨ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ãŸã‚ã€è¤‡æ•°ã®ãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã‚Šæ§‹æˆã•ã‚Œã‚‹LLMã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦ã‚‚ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ãŒå¯èƒ½ã¨ãªã‚Šã¾ã™ã€‚</p><p>LangChainã‚’å°å…¥ã™ã‚‹ã“ã¨ã§ã€<strong>ãƒ¢ãƒ‡ãƒ«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚„ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ä¿å­˜</strong>ã ã‘ã§ãªãã€<strong>å„LLMã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®è©•ä¾¡ã«ã¤ã„ã¦ã‚‚åŒæ™‚ã«å‡¦ç†ã‚’è¡Œã†</strong>ã“ã¨ãŒã§ãã¾ã™ã€‚å˜ä¸€ã®LLMã®ã¿ã‚’ç”¨ã„ã‚‹å ´åˆã«ãŠã„ã¦ã‚‚ã€ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ç®¡ç†ã§ãã‚‹ã“ã¨ã‹ã‚‰LangChainã®åˆ©ç”¨ãŒæ¨å¥¨ã•ã‚Œã‚‹ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚</p><h2 id="TruLens-Evalã®åˆ©ç”¨æ‰‹é †"><a href="#TruLens-Evalã®åˆ©ç”¨æ‰‹é †" class="headerlink" title="TruLens-Evalã®åˆ©ç”¨æ‰‹é †"></a>TruLens-Evalã®åˆ©ç”¨æ‰‹é †</h2><p>TruLens-Evalã®åˆ©ç”¨æ‰‹é †ã®èª¬æ˜ã—ã¾ã™ã€‚ã“ã“ã§ã¯ã€ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å«ã‚ãŸLLMã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è©•ä¾¡ã®ãŸã‚ã€å®Ÿé¨“ã‚’è¡Œã†çŠ¶æ³ã‚’æƒ³å®šã—ã¾ã™ã€‚</p><p>LLMã‚¢ãƒ—ãƒª(fix) â†’ ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ(fix) â†’ å…¥åŠ›ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ â†’ å®Ÿè¡Œ&amp;è©•ä¾¡ â†’ å…¥åŠ›ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ â†’ â€¦</p><h3 id="LLMã‚¢ãƒ—ãƒªã®é–¢æ•°åŒ–"><a href="#LLMã‚¢ãƒ—ãƒªã®é–¢æ•°åŒ–" class="headerlink" title="LLMã‚¢ãƒ—ãƒªã®é–¢æ•°åŒ–"></a>LLMã‚¢ãƒ—ãƒªã®é–¢æ•°åŒ–</h3><p>ã¯ã˜ã‚ã«LLMã‚¢ãƒ—ãƒªã®å®šç¾©ã‚’è¡Œã„ã¾ã™ã€‚æ–‡å­—åˆ—ã‚’å¼•æ•°ã¨ã™ã‚‹ã€æ–‡å­—åˆ—ã‚’è¿”ã™é–¢æ•°ã‚’å®šç¾©ã—ã¾ã™ã€‚</p><p>ä¾‹) OpenAIã®ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ã£ãŸç°¡å˜ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">llm_standalone</span>(<span class="params">prompt</span>):</span><br><span class="line">    <span class="keyword">return</span> openai.ChatCompletion.create(</span><br><span class="line">    engine=<span class="string">&quot;ãƒ¢ãƒ‡ãƒ«å&quot;</span>,</span><br><span class="line">    messages=[</span><br><span class="line">            &#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;system&quot;</span>, <span class="string">&quot;content&quot;</span>: <span class="string">&quot;system promptã®å…¥åŠ›&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>, <span class="string">&quot;content&quot;</span>: prompt&#125;</span><br><span class="line">        ]</span><br><span class="line">    )[<span class="string">&quot;choices&quot;</span>][<span class="number">0</span>][<span class="string">&quot;message&quot;</span>][<span class="string">&quot;content&quot;</span>]</span><br></pre></td></tr></table></figure><h3 id="LLMã‚¢ãƒ—ãƒªã®ãƒ©ãƒƒãƒ”ãƒ³ã‚°åŒ–ã¨å®Ÿè¡Œ"><a href="#LLMã‚¢ãƒ—ãƒªã®ãƒ©ãƒƒãƒ”ãƒ³ã‚°åŒ–ã¨å®Ÿè¡Œ" class="headerlink" title="LLMã‚¢ãƒ—ãƒªã®ãƒ©ãƒƒãƒ”ãƒ³ã‚°åŒ–ã¨å®Ÿè¡Œ"></a>LLMã‚¢ãƒ—ãƒªã®ãƒ©ãƒƒãƒ”ãƒ³ã‚°åŒ–ã¨å®Ÿè¡Œ</h3><p>å®šç¾©ã—ãŸLLMã‚¢ãƒ—ãƒªã«ã‚¢ãƒ—ãƒªåã‚„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯é–¢æ•°ã®æƒ…å ±ã‚’ä»˜ä¸ã™ã‚‹å½¢ã§ãƒ©ãƒƒãƒ”ãƒ³ã‚°åŒ–ã—ã¾ã™ã€‚ãã®å¾Œä½œæˆã—ãŸã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§LLMã‚¢ãƒ—ãƒªã®å®Ÿè¡Œã‚’è¡Œã„ã€çµæœã‚’å–å¾—ã—ã¾ã™ã€‚ã“ã®ã¨ãã€å®Ÿé¨“ç®¡ç†ã«å¿…è¦ãªæƒ…å ±ã¯ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã•ã‚Œã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚</p><p>ä¾‹) å®šç¾©ã—ãŸllm_standaloneã®ãƒ©ãƒƒãƒ”ãƒ³ã‚°åŒ–ã¨å®Ÿè¡Œ</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">prompt_input=<span class="string">&quot;ãƒ†ã‚¹ãƒˆã™ã‚‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å…¥åŠ›&quot;</span></span><br><span class="line">basic_app = TruBasicApp(llm_standalone, app_id=<span class="string">&quot;ã‚¢ãƒ—ãƒªå&quot;</span>, feedbacks=[ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯é–¢æ•°ã‚’é¸æŠ])</span><br><span class="line">response, record = basic_app.call_with_record(prompt_input) <span class="comment"># response: å‡ºåŠ›çµæœã€record: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ID</span></span><br></pre></td></tr></table></figure><h3 id="ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰é–²è¦§"><a href="#ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰é–²è¦§" class="headerlink" title="ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰é–²è¦§"></a>ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰é–²è¦§</h3><p>ã‚·ã‚§ãƒ«ã§ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€Webã‚µãƒ¼ãƒãŒç«‹ã¡ä¸ŠãŒã‚Šãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰å®Ÿé¨“çµæœã‚’é–²è¦§ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">trulens-eval</span><br></pre></td></tr></table></figure><h3 id="äººã«ã‚ˆã‚‹è©•ä¾¡ã«ã¤ã„ã¦"><a href="#äººã«ã‚ˆã‚‹è©•ä¾¡ã«ã¤ã„ã¦" class="headerlink" title="äººã«ã‚ˆã‚‹è©•ä¾¡ã«ã¤ã„ã¦"></a>äººã«ã‚ˆã‚‹è©•ä¾¡ã«ã¤ã„ã¦</h3><p>Truã‚¯ãƒ©ã‚¹ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä»»æ„ã®æƒ…å ±ã‚’è¿½åŠ ãƒ»å‰Šé™¤ã—ãŸã‚Šã€Webã‚µãƒ¼ãƒã®èµ·å‹•ãªã©ãŒã§ãã¾ã™ã€‚ãã®ãŸã‚ã€å¾Œã‹ã‚‰è©•ä¾¡ã®è¿½åŠ ãŒå¯èƒ½ã§ã™ã€‚ã“ã‚Œã‚’å¿œç”¨ã™ã‚‹ã“ã¨ã§ã€äººã«ã‚ˆã‚‹è©•ä¾¡ã«ã¤ã„ã¦æ¤œè¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä»¥ä¸‹ã¯è€ƒãˆã‚‰ã‚Œã‚‹é‹ç”¨ä¾‹ã§ã™ã€‚</p><ul><li>é–‹ç™ºè€…æ¯ã«å®Ÿé¨“çµæœã«å¯¾ã™ã‚‹è©•ä¾¡ã‚’è¡Œã„ã€ãƒãƒ¼ãƒ ã«ã‚ˆã‚‹ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨ã—ã¦ç®¡ç†ã™ã‚‹ã€‚</li><li>è©•ä¾¡æŒ‡æ¨™ï¼ˆæ ¹æ‹ æ€§ã€é–¢é€£æ€§ã€æ¯’æ€§ãªã©ï¼‰æ¯ã«é–‹ç™ºè€…ãŒè©•ä¾¡ã‚’è¡Œã„ã€çµ±è¨ˆã™ã‚‹ã€‚</li></ul><h2 id="feedbacké–¢æ•°"><a href="#feedbacké–¢æ•°" class="headerlink" title="feedbacké–¢æ•°"></a>feedbacké–¢æ•°</h2><p>å…¥åŠ›ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚„å‡ºåŠ›çµæœã«å¯¾ã—ã¦è©•ä¾¡ã‚’è¡Œã†feedbacké–¢æ•°ã‚’å®šç¾©ã™ã‚‹ã“ã¨ã§ã€å®Ÿé¨“ã®è©•ä¾¡ã‚’è‡ªå‹•çš„ã«è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚TruLensã¯OpenAIã‚„HuggingFaceã®ãƒ¢ãƒ‡ãƒ«ã‚’ç”¨ã„ãŸfeedbacké–¢æ•°ã‚’æ—¢ã«ç”¨æ„ã—ã¦ã„ã‚‹ãŸã‚ã€åŸºç¤çš„ãªè©•ä¾¡ã«ã¤ã„ã¦ã¯ç°¡å˜ã«å°å…¥ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><h3 id="feedbacké–¢æ•°ã®å®Ÿè£…"><a href="#feedbacké–¢æ•°ã®å®Ÿè£…" class="headerlink" title="feedbacké–¢æ•°ã®å®Ÿè£…"></a>feedbacké–¢æ•°ã®å®Ÿè£…</h3><p>ã¾ãšã€Providerã‚¯ãƒ©ã‚¹ã‚’ç¶™æ‰¿ã™ã‚‹å½¢ã§ã€feedbacké–¢æ•°ã®å®šç¾©ã‚’ä¿æŒã™ã‚‹ã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã—ã¾ã™ã€‚Providerã‚¯ãƒ©ã‚¹ã®ãƒ¡ãƒ³ãƒãƒ¡ã‚½ãƒƒãƒ‰ã¨ã—ã¦feedbacké–¢æ•°ã‚’å®šç¾©ã—ã¾ã™ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> trulens_eval <span class="keyword">import</span> Provider, Feedback</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyFeedbacks</span>(<span class="title class_ inherited__">Provider</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">input_length</span>(<span class="params">self, <span class="built_in">input</span>: <span class="built_in">str</span></span>) -&gt; <span class="built_in">float</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1.0</span> / (<span class="number">1.0</span> + <span class="built_in">len</span>(<span class="built_in">input</span>))</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">output_length</span>(<span class="params">self, output: <span class="built_in">str</span></span>) -&gt; <span class="built_in">float</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1.0</span> / (<span class="number">1.0</span> + <span class="built_in">len</span>(output))</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inout_length</span>(<span class="params">self, <span class="built_in">input</span>: <span class="built_in">str</span>, output: <span class="built_in">str</span></span>) -&gt; <span class="built_in">float</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1.0</span> / (<span class="number">1.0</span> + <span class="built_in">len</span>(<span class="built_in">input</span>) + <span class="built_in">len</span>(output))</span><br></pre></td></tr></table></figure><p>feedbacké–¢æ•°ã¯ä»¥ä¸‹ã®å½¢å¼ã§å®Ÿè£…ã—ã¾ã™ã€‚strå‹ã®å¼•æ•°ã‚’1ã¤ã¾ãŸã¯2ã¤ã¨ã‚Šã€æˆ»ã‚Šå€¤ã¨ã—ã¦0.0ï½1.0ã®floatå‹ã§è¿”ã—ã¾ã™ã€‚ã“ã“ã§é–¢æ•°å®šç¾©ã«ä½¿ã‚ã‚Œã‚‹é–¢æ•°åãŠã‚ˆã³å¼•æ•°åã¯å†…éƒ¨çš„ã«ä¿å­˜ã•ã‚Œã¦ã„ã¾ã™ã€‚ç‰¹ã«ã€é–¢æ•°åãŒè©•ä¾¡ã‚«ãƒ†ã‚´ãƒªã®è­˜åˆ¥åã¨ã—ã¦ç”¨ã„ã‚‰ã‚Œã¾ã™ã€‚ã¾ãŸã€å¤šå‡ºåŠ›ã«é–¢ã—ã¦ã‚‚ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™(<a href="https://www.trulens.org/trulens_eval/custom_feedback_functions/#multi-output-feedback-functions">å‚è€ƒ</a>)ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">my_feedback</span>(<span class="params">self, text1: <span class="built_in">str</span>, ...</span>) -&gt; <span class="built_in">float</span>:</span><br><span class="line">    <span class="comment">## è©•ä¾¡ã®ãŸã‚ã®å‡¦ç†ã‚’æ›¸ã ##</span></span><br><span class="line">    <span class="keyword">return</span> <span class="comment"># 0.0ï½1.0ã®å€¤ã‚’è¿”ã™</span></span><br></pre></td></tr></table></figure><p>feedbacké–¢æ•°ãŒå®Ÿè£…ã•ã‚ŒãŸProviderã‚¯ãƒ©ã‚¹ã‚’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã—ã¾ã™ã€‚ãã®å¾Œã€å¼•æ•°ã«é–¢ã™ã‚‹æƒ…å ±ã‚’ä»˜ä¸ã™ã‚‹å½¢ã§ã€feedbacké–¢æ•°ã‚’ãƒ©ãƒƒãƒ”ãƒ³ã‚°ã—ã¾ã™ã€‚ã¾ãŸã€å¤šå‡ºåŠ›ã®å ´åˆã¯ã“ã“ã§çµ±è¨ˆå‡¦ç†æ–¹æ³•ã‚’è¨­å®šã§ãã¾ã™(<a href="https://www.trulens.org/trulens_eval/api/feedback/">è©³ç´°</a>)ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_feedbacks = MyFeedbacks()</span><br><span class="line"></span><br><span class="line">output_function = Feedback(my_feedbacks.input_length).on_output()</span><br><span class="line">input_function = Feedback(my_feedbacks.output_length).on_input()</span><br><span class="line">inout_function = Feedback(my_feedbacks.inout_length).on_input_output()</span><br></pre></td></tr></table></figure><p>å‰è¿°ã®ã€ŒLLMã‚¢ãƒ—ãƒªã®ãƒ©ãƒƒãƒ”ãƒ³ã‚°åŒ–ã¨å®Ÿè¡Œã€ã«åŠ ãˆã‚‹å½¢ã§ã€feedbacké–¢æ•°ã‚’è¤‡æ•°è¨­å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å®Ÿè¡Œæ™‚ã«è‡ªå‹•çš„ã«feedbacké–¢æ•°ã‚‚å®Ÿè¡Œã•ã‚Œã€çµæœãŒè¨˜éŒ²ã•ã‚Œã¾ã™ã€‚ã¾ãŸã€å¾Œã‹ã‚‰å®Ÿé¨“çµæœã«å¯¾ã—ã¦feedbacké–¢æ•°ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ï¼ˆ<a href="https://www.trulens.org/trulens_eval/custom_feedback_functions/">è©³ç´°</a>ï¼‰ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">basic_app = TruBasicApp(llm_standalone, app_id=<span class="string">&quot;my_function&quot;</span>, feedbacks=[input_function, output_function, inout_function])</span><br><span class="line">response, record = basic_app.call_with_record(prompt_input) <span class="comment"># response: å‡ºåŠ›çµæœã€record: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ID</span></span><br></pre></td></tr></table></figure><h3 id="ç”¨æ„ã•ã‚Œã¦ã„ã‚‹feedbacké–¢æ•°"><a href="#ç”¨æ„ã•ã‚Œã¦ã„ã‚‹feedbacké–¢æ•°" class="headerlink" title="ç”¨æ„ã•ã‚Œã¦ã„ã‚‹feedbacké–¢æ•°"></a>ç”¨æ„ã•ã‚Œã¦ã„ã‚‹feedbacké–¢æ•°</h3><p>TruLens-Evalã¯ã„ãã¤ã‹ã®OpenAIã‚„HuggingFaceãŒæä¾›ã—ã¦ã„ã‚‹ãƒ¢ãƒ‡ãƒ«ã‚„ã‚µãƒ¼ãƒ“ã‚¹ã‚’åˆ©ç”¨ã—ãŸfeedbacké–¢æ•°ã‚’ã„ãã¤ã‹ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚ï¼ˆ<a href="https://www.trulens.org/trulens_eval/function_definitions/#model-agreement">è©³ç´°</a>ï¼‰</p><p>ã“ã“ã§ã¯feedbacké–¢æ•°ã®ä¾‹ã¨ã—ã¦ã„ãã¤ã‹ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><ul><li>Relevanceï¼ˆé–¢é€£æ€§ï¼‰</li></ul><p>OpenAIã®ChatCompletionã‚’ç”¨ã„ã¦ã€2ã¤ã®ãƒ†ã‚­ã‚¹ãƒˆï¼ˆå…¥åŠ›ã¨å‡ºåŠ›ï¼‰ã®é–¢é€£æ€§ã‚’æ•°å€¤è©•ä¾¡ã—ã¾ã™ï¼ˆã‚¹ãƒ¢ãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆã¯<a href="https://www.trulens.org/trulens_eval/pr_relevance_smoke_tests/">ã“ã¡ã‚‰</a>ï¼‰ã€‚ã¾ãŸã€ä¸ãˆã‚‰ã‚ŒãŸã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¨ãƒ¦ãƒ¼ã‚¶ã®è³ªå•æ–‡ãŒã©ã®ç¨‹åº¦é–¢é€£ã—ã¦ã„ã‚‹ã‹åˆ¤å®šã™ã‚‹feedbacké–¢æ•°ã‚‚ç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ï¼ˆ<a href="https://www.trulens.org/trulens_eval/qs_relevance_smoke_tests/">qs_relevance</a>ï¼‰ã€‚</p><p>ä»¥ä¸‹ã¯RelevanceãŒChatCompletionã«ä¸ãˆã‚‹ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ã™ã€‚</p><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">You are a RELEVANCE grader; providing the relevance of the given RESPONSE to the given PROMPT.</span><br><span class="line">Respond only as a number from 1 to 10 where 1 is the least relevant and 10 is the most relevant.</span><br><span class="line"></span><br><span class="line">A few additional scoring guidelines:</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> Long RESPONSES should score equally well as short RESPONSES.</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> Answers that intentionally do not answer the question, such as &#x27;I don&#x27;t know&#x27; and model refusals, should also be counted as the most RELEVANT.</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> RESPONSE must be relevant to the entire PROMPT to get a score of 10.</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> RELEVANCE score should increase as the RESPONSE provides RELEVANT context to more parts of the PROMPT.</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> RESPONSE that is RELEVANT to none of the PROMPT should get a score of 1.</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> RESPONSE that is RELEVANT to some of the PROMPT should get as score of 2, 3, or 4. Higher score indicates more RELEVANCE.</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> RESPONSE that is RELEVANT to most of the PROMPT should get a score between a 5, 6, 7 or 8. Higher score indicates more RELEVANCE.</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> RESPONSE that is RELEVANT to the entire PROMPT should get a score of 9 or 10.</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> RESPONSE that is RELEVANT and answers the entire PROMPT completely should get a score of 10.</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> RESPONSE that confidently FALSE should get a score of 1.</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> RESPONSE that is only seemingly RELEVANT should get a score of 1.</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> Never elaborate.</span><br><span class="line"></span><br><span class="line">PROMPT: &#123;prompt&#125;</span><br><span class="line"></span><br><span class="line">RESPONSE: &#123;response&#125;</span><br><span class="line"></span><br><span class="line">RELEVANCE:</span><br></pre></td></tr></table></figure><ul><li>Moderationï¼ˆç¯€åº¦ï¼‰</li></ul><p>Moderationã¯OpenAIãŒæä¾›ã—ã¦ã„ã‚‹APIã§ã‚ã‚‹<a href="https://platform.openai.com/docs/guides/moderation/overview">openai.Moderation</a>ã‚’ãƒ©ãƒƒãƒ”ãƒ³ã‚°ã—ãŸã‚‚ã®ã«ãªã‚Šã¾ã™ã€‚ã“ã‚Œã‚’ç”¨ã„ã‚‹ã“ã¨ã§ã€å·®åˆ¥çš„ã€æš´åŠ›çš„ã€æ€§çš„ãªã©ã®è©•ä¾¡è»¸ã§ã€ãƒ†ã‚­ã‚¹ãƒˆã‚’æ•°å€¤è©•ä¾¡ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><h2 id="ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹"><a href="#ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹" class="headerlink" title="ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹"></a>ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹</h2><p>ä»¥ä¸Šã®æ©Ÿèƒ½ã‚’è¸ã¾ãˆã¦ã€å®Ÿé¨“ç®¡ç†ã®ä½¿ç”¨ä¾‹ã«ã¤ã„ã¦æ¤œè¨ã—ã¾ã—ãŸã€‚</p><h3 id="è‰¯ã„ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®æ¤œè¨"><a href="#è‰¯ã„ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®æ¤œè¨" class="headerlink" title="è‰¯ã„ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®æ¤œè¨"></a>è‰¯ã„ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®æ¤œè¨</h3><p>å„è©•ä¾¡æŒ‡æ¨™ã«ãŠã‘ã‚‹è‰¯ã„ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¯ä½•ã‹ã€æ•´ç†ã—ã¦æ¤œè¨ã™ã‚‹ã“ã¨ã«å½¹ç«‹ã¡ã¾ã™ã€‚è©•ä¾¡æŒ‡æ¨™ã«ã¤ã„ã¦ã¯ã€ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ãªã‚‚ã®ã‹ã‚‰LLMã‚’ç”¨ã„ãŸè©•ä¾¡ã€äººã«ã‚ˆã‚‹è©•ä¾¡ã«ã¤ã„ã¦ã‚‚å¯¾å¿œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã¾ãŸã€ã‚ã‚‰ã‹ã˜ã‚è©•ä¾¡æŒ‡æ¨™ã‚’æ±ºå®šã™ã‚‹å¿…è¦ã¯ãªãã€å¾Œã‹ã‚‰é¡ã£ã¦å®Ÿé¨“çµæœã‚’è©•ä¾¡ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</p><p>å®Ÿé¨“çµæœã‚’å„è©•ä¾¡æŒ‡æ¨™ã«ã‚ˆã£ã¦ä¸¦ã¹æ›¿ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚<br><img src="/images/20230914a/ã‚³ãƒ¡ãƒ³ãƒˆ_2023-09-06_163018.png" alt="ã‚³ãƒ¡ãƒ³ãƒˆ_2023-09-06_163018.png" width="1200" height="586" loading="lazy"></p><p>å„è©•ä¾¡æŒ‡æ¨™ã®ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åã«ã‚ˆã‚‹ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãŒã§ãã¾ã™ã€‚<br><img src="/images/20230914a/ã‚³ãƒ¡ãƒ³ãƒˆ_2023-09-06_163113.png" alt="ã‚³ãƒ¡ãƒ³ãƒˆ_2023-09-06_163113.png" width="1200" height="441" loading="lazy"></p><p>å„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è©•ä¾¡ã‚¹ã‚³ã‚¢ã®å¹³å‡å€¤ã‚’ä¸€è¦§ã§ãã¾ã™ã€‚<br><img src="/images/20230914a/ã‚³ãƒ¡ãƒ³ãƒˆ_2023-09-06_163146.png" alt="ã‚³ãƒ¡ãƒ³ãƒˆ_2023-09-06_163146.png" width="1200" height="568" loading="lazy"></p><h3 id="æ–°ã—ã„è©•ä¾¡æŒ‡æ¨™ã®æ¤œè¨"><a href="#æ–°ã—ã„è©•ä¾¡æŒ‡æ¨™ã®æ¤œè¨" class="headerlink" title="æ–°ã—ã„è©•ä¾¡æŒ‡æ¨™ã®æ¤œè¨"></a>æ–°ã—ã„è©•ä¾¡æŒ‡æ¨™ã®æ¤œè¨</h3><ul><li>feedbacké–¢æ•°ã®å®Ÿè£…ã«é–¢ã™ã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒã‚ã‚‹ãŸã‚ã€æ¤œè¨ã—ãŸfeedbacké–¢æ•°ã®ç¢ºèªã‚„æ–°ãŸãªfeedbacké–¢æ•°ã®è¿½åŠ ãªã©ãŒç°¡æ½”ã«ãªã‚‹ã¨æ€ã‚ã‚Œã¾ã™ã€‚</li></ul><h2 id="ä»Šå¾Œã«å‘ã‘ã¦"><a href="#ä»Šå¾Œã«å‘ã‘ã¦" class="headerlink" title="ä»Šå¾Œã«å‘ã‘ã¦"></a>ä»Šå¾Œã«å‘ã‘ã¦</h2><h3 id="TruLens-Evalã®æ‡¸å¿µç‚¹"><a href="#TruLens-Evalã®æ‡¸å¿µç‚¹" class="headerlink" title="TruLens-Evalã®æ‡¸å¿µç‚¹"></a>TruLens-Evalã®æ‡¸å¿µç‚¹</h3><p>TruLens-Evalã‚’æœ¬æ ¼å°å…¥ã™ã‚‹éš›ã¯ã€ä¸‹è¨˜æ‡¸å¿µãŒã‚ã‚‹ãŸã‚ã€å¯¾å¿œãŒå¿…è¦ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><ul><li>å®Ÿé¨“çµæœã®ãƒ†ãƒ¼ãƒ–ãƒ«è¡¨ç¤ºã«é–¢ã—ã¦ã€æ—¥æœ¬èª(Unicode)å¯¾å¿œã—ã¦ã„ãªã„éƒ¨åˆ†ãŒã‚ã‚‹ã€‚(ãŸã ã—ã€issueãŒç«‹ã£ã¦ã„ã‚‹)</li><li>éšå±¤çš„ãªç®¡ç†ãŒã§ããªã„ã€‚<ul><li>Appã®åå‰ã«å·¥å¤«</li><li>ãƒ¢ãƒ‡ãƒ«æ¯ã«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’å¤‰ãˆã‚‹</li></ul></li><li>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå°‘ãªã„ã€‚å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æƒ…å ±ã‚‚ååˆ†ã¨ã¯è¨€ãˆãªã„ã€‚(Slackã®ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãŒã‚ã‚‹ãŸã‚ã€ãã“ã«æƒ…å ±ãŒã‚ã‚‹ã‹ã‚‚)</li><li><strong>ãƒ–ãƒ©ã‚¦ã‚¶UIã«ã‚ˆã‚‹æƒ…å ±è¿½åŠ ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„ã€‚</strong>ï¼ˆäººã«ã‚ˆã‚‹è©•ä¾¡ãŒã‚„ã‚Šã¥ã‚‰ã„ï¼‰</li><li>ãƒ¦ãƒ¼ã‚¶ã‚«ã‚¹ã‚¿ãƒ ãªå®Ÿé¨“æƒ…å ±ã‚’å«ã‚ã‚‹æŸ”è»Ÿæ€§ãŒãªã„ã€‚<ul><li>ã‚¿ã‚°ã‚„feedbacké–¢æ•°ã‚’ä½¿ã£ãŸå·¥å¤«ãŒå¿…è¦</li></ul></li><li>åŒä¸€å…¥åŠ›ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ã‚‚æºã‚‰ããŒã‚ã‚‹ãŸã‚ã€è¤‡æ•°å›å®Ÿè¡Œã—ã¦çµ±è¨ˆã‚’å–ã‚ŠãŸã„ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„ã€‚<ul><li>è©•ä¾¡æ–¹æ³•ã«LLMã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹å ´åˆã€feedbacké–¢æ•°ã«ã¤ã„ã¦ã‚‚æºã‚‰ããŒç”Ÿã˜ã‚‹ã¨è€ƒãˆã‚‰ã‚Œã‚‹ã€‚</li></ul></li></ul><h3 id="ä»–ã®å€™è£œã«ã¤ã„ã¦"><a href="#ä»–ã®å€™è£œã«ã¤ã„ã¦" class="headerlink" title="ä»–ã®å€™è£œã«ã¤ã„ã¦"></a>ä»–ã®å€™è£œã«ã¤ã„ã¦</h3><p>ä»–ã«ã‚‚LLMã®å®Ÿé¨“ç®¡ç†ã¨ã—ã¦æœ‰åŠ›ãªå€™è£œãŒã‚ã‚‹ã®ã§ã€æ¤œè¨¼ã—ã¦ã„ããŸã„ã§ã™ã€‚</p><ul><li>MLflow<ul><li><a href="https://www.databricks.com/jp/blog/announcing-mlflow-24-llmops-tools-robust-model-evaluation">MLflow.evaluate()</a>ã‚’æ‹¡å¼µã™ã‚‹ã“ã¨ã§ã€LLMOpsã«å¯¾å¿œï¼ˆæœªèª¿æŸ»ï¼‰</li></ul></li><li>Weights &amp; Biases<ul><li>LLMOpsç”¨ã«<a href="https://docs.wandb.ai/ja/guides/prompts">W&amp;B prompt</a>ã‚’å…¬é–‹ã€‚</li><li>TruLensã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ãªãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã‚’åˆ©ç”¨ã§ãã‚‹ã€‚</li><li>MLOpsã®ã‚·ã‚¹ãƒ†ãƒ ã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§LLMã®ãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã®ç®¡ç†ã‚‚å¯èƒ½ã€‚</li></ul></li></ul><p>é–¢é€£ã—ã¦ <a href="/articles/20230919a/">Prompt Flowã§ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè©•ä¾¡ã®ç®¡ç†ã‚’è¡Œã†</a> ã¨ã„ã†è¨˜äº‹ã‚‚å…¬é–‹ã—ã¾ã—ãŸã€‚</p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/DataScience/">DataScience</category>
      
      
      <category domain="https://future-architect.github.io/tags/MLOps/">MLOps</category>
      
      <category domain="https://future-architect.github.io/tags/LLM/">LLM</category>
      
      <category domain="https://future-architect.github.io/tags/LLMOps/">LLMOps</category>
      
      <category domain="https://future-architect.github.io/tags/TruLens-Eval/">TruLens-Eval</category>
      
      
      <comments>https://future-architect.github.io/articles/20230914a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>LLMé–‹ç™ºã®ãŸã‚ã«MLOpsãƒãƒ¼ãƒ ãŒã‚„ã‚‹ã¹ãã“ã¨</title>
      <link>https://future-architect.github.io/articles/20230913a/</link>
      <guid>https://future-architect.github.io/articles/20230913a/</guid>
      <pubDate>Tue, 12 Sep 2023 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;h2 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot;</description>
          
        
      
      
      
      <content:encoded><![CDATA[<h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><p>ã“ã‚“ã«ã¡ã¯ã€SAIG&#x2F;MLOpsãƒãƒ¼ãƒ ã§ã‚¢ãƒ«ãƒã‚¤ãƒˆã‚’ã—ã¦ã„ã‚‹æ¿é‡ãƒ»å¹³é‡ã§ã™ã€‚</p><p>ä»Šå›ã¯ã€ŒLLMé–‹ç™ºã®ãŸã‚ã«MLOpsãƒãƒ¼ãƒ ãŒã‚„ã‚‹ã¹ãã“ã¨ã€ã¨ã„ã†ãƒ†ãƒ¼ãƒã§ã€å¾“æ¥ã®MLOpsã¨ã®é•ã„ãƒ»ãƒ„ãƒ¼ãƒ«ãƒ»æ§‹æˆä¾‹ç­‰ã«ã¤ã„ã¦èª¿æŸ»ãƒ»æ•´ç†ã—ã¾ã—ãŸã€‚</p><p>LLMã¨ã¯Large Launguage Modelï¼ˆå¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«ï¼‰ã®ç•¥ã§ã‚ã‚Šã€ã“ã“ã§ã®LLMé–‹ç™ºã¨ã¯ã€ã€ŒLLMè‡ªä½“ã®é–‹ç™ºã€ãŠã‚ˆã³ã€ŒLLMã‚’æ´»ç”¨ã—ãŸã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã€ã®ä¸¡æ–¹ã‚’å«ã‚€ã‚‚ã®ã¨ã—ã¾ã™ã€‚LLMé–‹ç™ºã®ãƒ•ãƒ­ãƒ¼ã«ã¤ã„ã¦ã¯ä»¥å‰ã«<a href="/articles/20230912a/">LLMé–‹ç™ºã®ãƒ•ãƒ­ãƒ¼</a>ã§è©³ç´°ã‚’èª¬æ˜ã—ã¦ã„ã‚‹ã®ã§ã€ãœã²ä½µã›ã¦ã”è¦§ãã ã•ã„ã€‚</p><p>ã¾ãšã€MLOpsã¨ã¯ã€Œæ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã®å®Ÿè£…ã‹ã‚‰é‹ç”¨ã¾ã§ã‚’å††æ»‘ã«æ¨é€²ã™ã‚‹ãŸã‚ã®æ‰‹æ³•ã‚„è€ƒãˆæ–¹ã€ã®ã“ã¨ã§ã™ã€‚AIã®ç¤¾ä¼šå®Ÿè£…ãŒå¢—ãˆã‚‹ã«ä¼´ã„ã€MLOpsãƒãƒ¼ãƒ ã‚’è¨­ã‘ã‚‹ä¼æ¥­ã‚‚å¢—ãˆã¦ãã¾ã—ãŸã€‚ã¾ãŸã€æœ€è¿‘ã§ã¯LLMã‚„ãã®é–¢é€£æŠ€è¡“ãŒæ€¥é€Ÿã«ç™ºé”ã—ã¦ãã¦ãŠã‚Šã€ä»Šå¾ŒLLMã‚’ç”¨ã„ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒé–‹ç™ºã•ã‚Œã¦ã„ãã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚</p><p>LLMè‡ªä½“ã‚„LLMã‚’æ´»ç”¨ã—ãŸã‚·ã‚¹ãƒ†ãƒ ã‚’é–‹ç™ºã—ã¦ã„ãå ´åˆã€MLOpsãƒãƒ¼ãƒ ã‹ã‚‰ã¯ã€ŒMLOpsãƒãƒ¼ãƒ ã¯ä½•ã‚’ã™ã‚‹ã¹ãã‹ï¼Ÿã€ã€Œæ—¢å­˜ã®MLOpsã®æ çµ„ã¿ã¨ã®é•ã„ã¯ï¼Ÿã€ã¨ã„ã£ãŸç–‘å•ãŒç”Ÿã˜ã¾ã™ã€‚</p><p>æœ¬è¨˜äº‹ã§ã¯ã“ã‚Œã‚‰ã®ç–‘å•ã«ç­”ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã€LLMè‡ªä½“ã‚„LLMã‚’æ´»ç”¨ã—ãŸã‚·ã‚¹ãƒ†ãƒ ã®é–‹ç™ºã®åŸºæœ¬çš„ãªéƒ¨åˆ†ã‚’è¸ã¾ãˆã¦ã”èª¬æ˜ã—ã¾ã™ã€‚</p><h2 id="å¾“æ¥ã®MLOpsã¨ã®é•ã„"><a href="#å¾“æ¥ã®MLOpsã¨ã®é•ã„" class="headerlink" title="å¾“æ¥ã®MLOpsã¨ã®é•ã„"></a>å¾“æ¥ã®MLOpsã¨ã®é•ã„</h2><p>ã¾ãšã€LLMé–‹ç™ºã®ç‰¹å¾´ã‚’ä»¥ä¸‹ã«æ•´ç†ã—ã¾ã™ã€‚</p><ul><li>ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ•°ãŒå¤§ããã¦å¤§è¦æ¨¡ï¼ˆå¤§é‡ã®è¨ˆç®—ãƒªã‚½ãƒ¼ã‚¹ãŒå¿…è¦ï¼‰</li><li>æ±ç”¨çš„ãªãƒ¢ãƒ‡ãƒ«</li><li>è‡ªç„¶è¨€èªã‚’æ‰±ã†</li><li>ç”ŸæˆAIã§ã‚ã‚‹ï¼ˆå‡ºåŠ›ãŒè‡ªç„¶è¨€èªã§ã‚ã‚‹ï¼‰</li><li>äººé–“ã«ã‚ˆã‚‹è©•ä¾¡ãŒå¿…è¦</li><li>ãƒ¢ãƒ‡ãƒ«ã®èƒ½åŠ›ã‚’å¼•ãå‡ºã™ãŸã‚ã®å·¥å¤«ãŒå¿…è¦</li></ul><p>â€»å¾“æ¥ã®NLPé–‹ç™ºã®ç‰¹å¾´ã‚‚ä¸€éƒ¨å«ã‚€</p><p>ç‰¹å®šã®ã‚¿ã‚¹ã‚¯ã«å¯¾å¿œã™ã‚‹å°è¦æ¨¡ãªãƒ¢ãƒ‡ãƒ«ã‚’å­¦ç¿’ï¼†ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã®ã¿ã§ã‚ã‚Œã°æ—¢å­˜ã®MLOpsã§å¯¾å¿œã§ãã¾ã—ãŸãŒã€ä¸Šè¨˜ã®ç‰¹å¾´ã«å¯¾å¿œã™ã‚‹ãŸã‚ã€MLOpsãƒãƒ¼ãƒ ã¯æ–°ãŸã«ã€ŒLLMã®ãŸã‚ã®MLOpsï¼ˆLLMOpsï¼‰ã€ã‚’è€ƒãˆã¦ã„ãå¿…è¦ãŒå‡ºã¦ãã¾ã—ãŸã€‚</p><h2 id="LLMé–‹ç™ºã®å…¨ä½“åƒ"><a href="#LLMé–‹ç™ºã®å…¨ä½“åƒ" class="headerlink" title="LLMé–‹ç™ºã®å…¨ä½“åƒ"></a>LLMé–‹ç™ºã®å…¨ä½“åƒ</h2><img src="/images/20230913a/LLM_system_dev_flow.png" alt="LLM_system_dev_flow" width="960" height="344" loading="lazy"><p>å‚è€ƒ: <a href="https://note.com/wandb_jp/n/n1aa6d77f33cf">https://note.com/wandb_jp&#x2F;n&#x2F;n1aa6d77f33cf</a></p><p>ã“ã“ã§ã¯ã€LLMé–‹ç™ºã®å…¨ä½“åƒã‚’è¦‹ã¦ã„ãã¨ã¨ã‚‚ã«ã€å„æ®µéšã«ãŠã„ã¦å¾“æ¥ã®MLOpsã¨ç•°ãªã‚‹ç‚¹ã‚’ã”èª¬æ˜ã—ã¦ã„ãã¾ã™ã€‚</p><p>ä¸€èˆ¬ã«ã€MLé–‹ç™ºã§ã¯ã€Œãƒ¢ãƒ‡ãƒ«é–‹ç™ºã€â†’ã€Œãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã€â†’ã€Œã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€â†’ã€Œãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã€ã¨é€²ã‚ã¦ã„ãã¾ã™ã€‚LLMé–‹ç™ºã‚‚åŒæ§˜ã®æµã‚Œã§é–‹ç™ºã—ã¦ã„ãã“ã¨ã«ãªã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚</p><h3 id="1-ãƒ¢ãƒ‡ãƒ«é–‹ç™º"><a href="#1-ãƒ¢ãƒ‡ãƒ«é–‹ç™º" class="headerlink" title="1. ãƒ¢ãƒ‡ãƒ«é–‹ç™º"></a>1. ãƒ¢ãƒ‡ãƒ«é–‹ç™º</h3><p>ä»¥å‰ã«<a href="">LLMé–‹ç™ºã®ãƒ•ãƒ­ãƒ¼</a>ã§ç´¹ä»‹ã—ãŸé€šã‚Šã€LLMé–‹ç™ºã¯å¤§ããã€Œãƒ¢ãƒ‡ãƒ«ã‚’ç”¨æ„ã™ã‚‹ï¼ˆå­¦ç¿’ï¼‰ãƒ•ã‚§ãƒ¼ã‚ºã€ã¨ã€Œãƒ¢ãƒ‡ãƒ«ã®èƒ½åŠ›ã‚’å¼•ãå‡ºã™ï¼ˆæ¨è«–ï¼‰ãƒ•ã‚§ãƒ¼ã‚ºã€ã«åˆ†ã‘ã‚‰ã‚Œã¾ã™ã€‚ãƒ¢ãƒ‡ãƒ«é–‹ç™ºã®æ®µéšã¯ã€Œãƒ¢ãƒ‡ãƒ«ã‚’ç”¨æ„ã™ã‚‹ï¼ˆå­¦ç¿’ï¼‰ãƒ•ã‚§ãƒ¼ã‚ºã€ã«ç›¸å½“ã—ã¾ã™ã€‚</p><p>ã€Œãƒ¢ãƒ‡ãƒ«ã‚’ç”¨æ„ã™ã‚‹ï¼ˆå­¦ç¿’ï¼‰ãƒ•ã‚§ãƒ¼ã‚ºã€ã§ã¯ã€å¾“æ¥ã®MLé–‹ç™ºã¨åŒæ§˜ã€ãƒ‡ãƒ¼ã‚¿åé›†ã‹ã‚‰ãƒ¢ãƒ‡ãƒ«é¸å®šã€æ§˜ã€…ãªãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§å®Ÿé¨“ãƒ»è©•ä¾¡ã‚’è¡Œã„ã€ãƒ¢ãƒ‡ãƒ«ã‚’é–‹ç™ºã—ã¦ã„ãã¾ã™ã€‚</p><p>ãƒ¢ãƒ‡ãƒ«ã‚’ç”¨æ„ã™ã‚‹æ–¹æ³•ã¯å¤§ããåˆ†ã‘ã¦</p><ul><li>ã‚¼ãƒ­ã‹ã‚‰ãƒ¢ãƒ‡ãƒ«ã‚’å­¦ç¿’ã™ã‚‹</li><li>å…¬é–‹æ¸ˆã¿ã®åŸºç›¤ãƒ¢ãƒ‡ãƒ«ã‹ã‚‰å­¦ç¿’ã™ã‚‹</li><li>ãƒ—ãƒ­ãƒ—ãƒ©ã‚¤ã‚¨ã‚¿ãƒªãƒ¢ãƒ‡ãƒ«ã‚’åˆ©ç”¨ã™ã‚‹</li></ul><p>ã®3ç¨®é¡ãŒã‚ã‚Šã¾ã™ã€‚è©³ç´°ã¯<a href="/articles/20230912a/">LLMé–‹ç™ºã®ãƒ•ãƒ­ãƒ¼</a>ã‚’ã”å‚ç…§ãã ã•ã„ã€‚</p><p>ãƒ¢ãƒ‡ãƒ«é–‹ç™ºã®æ®µéšã§ã¯ã€lossã®ç›£è¦–ã‚„ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã€å„å®Ÿé¨“ã®ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ç®¡ç†ãªã©ã®å¾“æ¥ã®MLOpsã¨åŒæ§˜ã®å®Ÿé¨“ç®¡ç†ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ãŒã€ãã‚Œã«åŠ ãˆLLMé–‹ç™ºç‰¹æœ‰ã®ç®¡ç†ã‚‚å¿…è¦ã¨ãªã£ã¦ãã¾ã™ã€‚</p><p>ãƒ¢ãƒ‡ãƒ«é–‹ç™ºã®æ®µéšã«ãŠã‘ã‚‹å¾“æ¥ã®MLã¨LLMã®é•ã„ã¨ã—ã¦ã€ã¾ãšãƒ¢ãƒ‡ãƒ«ãŒå·¨å¤§ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ãã®ãŸã‚ã€æ§˜ã€…ãªåˆ†æ•£å­¦ç¿’ã®æ‰‹æ³•ã‚’åˆ©ç”¨ã—ã¦åŠ¹ç‡çš„ã«å­¦ç¿’ã‚’é€²ã‚ã¦ã„ãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ã¾ãŸã€ãƒ¢ãƒ‡ãƒ«ã®å‡ºåŠ›ã«å¯¾ã—ç¢ºç«‹ã•ã‚ŒãŸè©•ä¾¡æ‰‹æ³•ãŒå­˜åœ¨ã—ãªã„ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚ãã®ãŸã‚ç¾æ™‚ç‚¹ã§ã¯ã€ãƒ¢ãƒ‡ãƒ«ã®å‡ºåŠ›ã‚’äººé–“ãŒè©•ä¾¡ã™ã‚‹å¿…è¦ã‚‚ã‚ã‚Šã¾ã™ã€‚ã—ãŸãŒã£ã¦è¤‡æ•°ãƒ¢ãƒ‡ãƒ«ã®å‡ºåŠ›ã‚’åŠ¹ç‡çš„ã«è©•ä¾¡ãƒ»æ¯”è¼ƒã§ãã‚‹ã‚ˆã†ãªä»•çµ„ã¿ã‚’ä½œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><h3 id="2-ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ"><a href="#2-ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ" class="headerlink" title="2. ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ"></a>2. ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ</h3><p>ã“ã®ãƒ•ã‚§ãƒ¼ã‚ºã§ã¯ã€é–‹ç™ºã—ãŸLLMã‚’ã‚µãƒ¼ãƒ“ã‚¹å´ã§ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã«APIã‚’å®Ÿè£…ã—ã€ãƒ¢ãƒ‡ãƒ«ã‚’å…¬é–‹ã—ã¾ã™ã€‚</p><p>ã“ã®æ®µéšã§ã‚‚ã€LLMã®ã€Œãƒ¢ãƒ‡ãƒ«ãŒå·¨å¤§ã§ã‚ã‚‹ã€ã¨ã„ã†ç‰¹æ€§ã‹ã‚‰ã€å¾“æ¥ã®MLOpsä»¥ä¸Šã«ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†ã«æ³¨æ„ã‚’æ‰•ã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ã¾ãŸã€OpenAIç­‰ã®APIçµŒç”±ã§LLMã‚’åˆ©ç”¨ã™ã‚‹å ´åˆã«ã¯ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã‚„ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã«ã‚‚æ³¨æ„ã‚’æ‰•ã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><h3 id="3-ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³"><a href="#3-ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³" class="headerlink" title="3. ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³"></a>3. ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</h3><p>ã“ã®ãƒ•ã‚§ãƒ¼ã‚ºã¯ã€<a href="/articles/20230912a/">LLMé–‹ç™ºã®ãƒ•ãƒ­ãƒ¼</a>ã«ãŠã‘ã‚‹ã€Œãƒ¢ãƒ‡ãƒ«ã®èƒ½åŠ›ã‚’å¼•ãå‡ºã™ï¼ˆæ¨è«–ï¼‰ãƒ•ã‚§ãƒ¼ã‚ºã€ã«ç›¸å½“ã—ã¾ã™ã€‚</p><p>ã€Œãƒ¢ãƒ‡ãƒ«ã®èƒ½åŠ›ã‚’å¼•ãå‡ºã™ï¼ˆæ¨è«–ï¼‰ãƒ•ã‚§ãƒ¼ã‚ºã€ã§ã¯ã€ãƒ¢ãƒ‡ãƒ«é–‹ç™ºã®æ®µéšã§é–‹ç™ºã—ãŸãƒ¢ãƒ‡ãƒ«ã‚’ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã«ã‚ˆã‚Šå¯¾è±¡ã‚¿ã‚¹ã‚¯ã«ç‰¹åŒ–ã•ã›ãŸã‚Šã€å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã¨çµ±åˆã™ã‚‹ã“ã¨ã§å­¦ç¿’æ®µéšã§ã¯ãƒ¢ãƒ‡ãƒ«ãŒå¾—ã¦ã„ãªã‹ã£ãŸçŸ¥è­˜ã‚’æ´»ç”¨ã—ã¦å›ç­”ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã“ã¡ã‚‰ã‚‚è©³ç´°ã¯<a href="">LLMé–‹ç™ºã®ãƒ•ãƒ­ãƒ¼</a>ã‚’ã”å‚ç…§ãã ã•ã„ã€‚</p><p>ã¾ãŸã€ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã™ã‚‹ãŸã‚ã®å‘¨è¾ºæ©Ÿèƒ½ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®UIã‚„å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç­‰ï¼‰ã‚’å®Ÿè£…ãƒ»ãƒ†ã‚¹ãƒˆã—ã€ã‚µãƒ¼ãƒ“ã‚¹ã®æä¾›ã‚’é–‹å§‹ã—ã¾ã™ã€‚</p><p>ã“ã®æ®µéšã§ã¯ã€ãƒ™ã‚¯ãƒˆãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç­‰ã®æ§‹ç¯‰ã«åŠ ãˆã€ã‚µãƒ¼ãƒ“ã‚¹é–‹å§‹å¾Œã®ç¶™ç¶šçš„ãªæ”¹å–„ã®ãŸã‚ã€å…¥åŠ›ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€ãƒã‚§ãƒ¼ãƒ³ã®éç¨‹ã€ãƒ¢ãƒ‡ãƒ«ã®å‡ºåŠ›ç­‰ã‚’ç›£è¦–ã§ãã‚‹ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><h3 id="4-ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°"><a href="#4-ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°" class="headerlink" title="4. ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°"></a>4. ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°</h3><p>ã“ã®ãƒ•ã‚§ãƒ¼ã‚ºã§ã¯ã€æä¾›ã‚’é–‹å§‹ã—ãŸã‚µãƒ¼ãƒ“ã‚¹ãŒæƒ³å®šé€šã‚Šç¨¼åƒã—ã¦ã„ã‚‹ã‹ã‚’ç›£è¦–ã—ã€å•é¡ŒãŒã‚ã‚Œã°ã‚µãƒ¼ãƒ“ã‚¹ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ç›£è¦–ã™ã‚‹é …ç›®ã¯ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨ç‡ã‚„ãƒ‡ãƒ¼ã‚¿é‡ã€ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã€ãƒ¢ãƒ‡ãƒ«ã®å…¥å‡ºåŠ›ã€å…¥åŠ›ãƒˆãƒ¼ã‚¯ãƒ³æ•°ãªã©å¤šå²ã«ã‚ãŸã‚Šã¾ã™ã€‚</p><h2 id="LLMé–‹ç™ºã®èª²é¡Œãƒ»æ¤œè¨äº‹é …"><a href="#LLMé–‹ç™ºã®èª²é¡Œãƒ»æ¤œè¨äº‹é …" class="headerlink" title="LLMé–‹ç™ºã®èª²é¡Œãƒ»æ¤œè¨äº‹é …"></a>LLMé–‹ç™ºã®èª²é¡Œãƒ»æ¤œè¨äº‹é …</h2><p>ã§ã¯ã€LLMé–‹ç™ºã«å¯¾ã—ã¦MLOpsãƒãƒ¼ãƒ ã¯ã©ã®ã‚ˆã†ãªã“ã¨ã‚’ã™ã‚Œã°è‰¯ã„ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ</p><p>MLOpsãƒãƒ¼ãƒ ãŒã‚„ã‚‹ã¹ãã“ã¨ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªèª²é¡Œã‚„æ¤œè¨äº‹é …ã‚’è§£æ±ºã—ã€LLMé–‹ç™ºã‚’å††æ»‘ã«é€²ã‚ã‚‹ã“ã¨ã§ã™ã€‚</p><p>â€»èª²é¡Œã®ä¸€éƒ¨ã‚’ç¾…åˆ—</p><h3 id="1-ãƒ¢ãƒ‡ãƒ«é–‹ç™ºã«ãŠã‘ã‚‹èª²é¡Œãƒ»æ¤œè¨äº‹é …"><a href="#1-ãƒ¢ãƒ‡ãƒ«é–‹ç™ºã«ãŠã‘ã‚‹èª²é¡Œãƒ»æ¤œè¨äº‹é …" class="headerlink" title="1. ãƒ¢ãƒ‡ãƒ«é–‹ç™ºã«ãŠã‘ã‚‹èª²é¡Œãƒ»æ¤œè¨äº‹é …"></a>1. ãƒ¢ãƒ‡ãƒ«é–‹ç™ºã«ãŠã‘ã‚‹èª²é¡Œãƒ»æ¤œè¨äº‹é …</h3><div class="scroll"><table><thead><tr><th>èª²é¡Œ</th><th>ã‚„ã‚‹ã¹ãã“ã¨</th><th>ã‚µãƒ¼ãƒ“ã‚¹ãƒ»ãƒ„ãƒ¼ãƒ«å€™è£œ</th></tr></thead><tbody><tr><td>LLMã®å­¦ç¿’ã§ã¯å¤§è¦æ¨¡ãªãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’æ‰±ã†å¿…è¦ãŒã‚ã‚‹</td><td>ã€Œå¤§é‡ãªãƒ‡ãƒ¼ã‚¿ã®ä¿ç®¡ã€ã‚„ã€ŒåŠ¹ç‡è‰¯ã„ãƒ‡ãƒ¼ã‚¿ã®å–ã‚Šå‡ºã—ã€ãŒã§ãã‚‹ãƒ‡ãƒ¼ã‚¿åŸºç›¤ã‚’ç”¨æ„ã™ã‚‹</td><td><a href="#1-%E3%82%AF%E3%83%A9%E3%82%A6%E3%83%89%E7%B3%BB%E3%83%87%E3%83%BC%E3%82%BF%E3%83%AC%E3%82%A4%E3%82%AF">[1] ã‚¯ãƒ©ã‚¦ãƒ‰ç³»ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¤ã‚¯</a></td></tr><tr><td>LLMã®å­¦ç¿’ã§ã¯å¤§é‡ã®ãƒ‡ãƒ¼ã‚¿ã‚’é›†ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹</td><td>ã€ŒæŒ‡ç¤ºæ–‡ãƒ»å‚è€ƒæƒ…å ±ãƒ»ç†æƒ³ã®å›ç­”ã‚’äººåŠ›ã§é›†ã‚ãŸãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã€ã‚’åŠ¹ç‡è‰¯ãåé›†ã™ã‚‹</td><td><a href="#2-argilla">[2] Argilla</a></td></tr><tr><td>LLMã®å­¦ç¿’ã«ã¯å¤§é‡ã®è¨ˆç®—ãƒªã‚½ãƒ¼ã‚¹ãŒå¿…è¦</td><td>å­¦ç¿’æ™‚ã®è†¨å¤§ãªè¨ˆç®—ã‚³ã‚¹ãƒˆã«æ³¨æ„ã‚’æ‰•ã†ï¼ˆåˆ†æ•£å­¦ç¿’ã®åŸºç›¤ãªã©ã‚’ç”¨æ„ã™ã‚‹ï¼‰</td><td><a href="#3-%E3%82%AF%E3%83%A9%E3%82%A6%E3%83%89%E5%AD%A6%E7%BF%92%E5%9F%BA%E7%9B%A4">[3] ã‚¯ãƒ©ã‚¦ãƒ‰å­¦ç¿’åŸºç›¤</a></td></tr><tr><td>LLMã®å­¦ç¿’ã¯å¤§é‡ã®è¨ˆç®—ãƒªã‚½ãƒ¼ã‚¹ã‚’æ¶ˆè²»ã™ã‚‹ãŸã‚ã€å¿…è¦ä»¥ä¸Šã®å­¦ç¿’ã¯ã‚³ã‚¹ãƒˆã‚’å¢—åŠ ã•ã›ã‚‹</td><td>å­¦ç¿’ä¸­ã«ã€Œã©ã“ã§å­¦ç¿’ã‚’çµ‚ãˆã‚‹ã‹ã€ã‚’åˆ¤æ–­ã™ã‚‹ãŸã‚ã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«å¯¾ã™ã‚‹å‡ºåŠ›ã‚’é©å®œç¢ºèªã™ã‚‹</td><td><a href="#4-mlflow">[4] MLflow</a> <br><a href="#5-weight--biases">[5] Weights &amp; Biases</a> <br><a href="#6-aim">[6] aim</a></td></tr><tr><td>LLMã®å®šé‡çš„è©•ä¾¡ã¯é›£ã—ãã€äººé–“ã«ã‚ˆã‚‹è©•ä¾¡ãŒå¿…è¦</td><td>è¤‡æ•°ã®åŸºç›¤ãƒ¢ãƒ‡ãƒ«ã‚’ãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã™ã‚‹éš›ã€å„ãƒ¢ãƒ‡ãƒ«ã®å‡ºåŠ›ã‚’åŠ¹ç‡ã‚ˆãæ¯”è¼ƒã™ã‚‹</td><td><a href="#4-mlflow">[4] MLflow</a> <br><a href="#5-weight--biases">[5] Weights &amp; Biases</a> <br><a href="#6-aim">[6] aim</a></td></tr><tr><td>LLMã¯æ±ç”¨çš„ãªãƒ¢ãƒ‡ãƒ«ã§ã‚ã‚‹ãŒæ•…ã€å­¦ç¿’æ™‚ã®ã‚¿ã‚¹ã‚¯ã¨ãƒ€ã‚¦ãƒ³ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®ã‚¿ã‚¹ã‚¯ãŒä¸€è‡´ã—ãªã„</td><td>ã€Œå­¦ç¿’ã®è©•ä¾¡æ™‚ã«è¡Œã†ã‚¿ã‚¹ã‚¯ã€ã¨ã€Œæ¨è«–æ™‚ã«è¡Œã†ã‚¿ã‚¹ã‚¯ã€ãŒç•°ãªã‚Šã€æ¨è«–ãƒ•ã‚§ãƒ¼ã‚ºã§æƒ³å®šé€šã‚Šã«å‹•ã‹ãªã„ã¨ã„ã†äº‹æ…‹ã‚’é¿ã‘ã‚‹</td><td><a href="#2-argilla">[2] Argilla</a> <br><a href="#4-mlflow">[4] MLflow</a> <br><a href="#5-weight--biases">[5] Weights &amp; Biases</a> <br><a href="#6-aim">[6] aim</a></td></tr><tr><td>LLMã®å‡ºåŠ›ã¯è‡ªç„¶è¨€èªã§ã‚ã‚Šã€è©•ä¾¡ãŒé›£ã—ã„</td><td>è©•ä¾¡æŒ‡æ¨™ã‚’ç”¨æ„ã™ã‚‹ï¼ˆäººé–“ã«ã‚ˆã‚‹è©•ä¾¡åŸºç›¤ã®æ§‹ç¯‰ç­‰ï¼‰</td><td><a href="#7-deepspeed-chat">[7] DeepSpeed Chat</a> <br><a href="#8-jglue">[8] JGLUE</a> <br><a href="#9-toxic-bert">[9] toxic-bert</a> <br><a href="#10-moderation">[10] Moderation</a> <br><a href="#11-prompt-flow">[11] Prompt Flow</a></td></tr><tr><td>å½¢å¼çš„ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼ˆã‚¿ã‚¹ã‚¯ã®èª¬æ˜ã‚„å‡ºåŠ›ã®å½¢å¼ãªã©ï¼‰ã‚’æ¯å›å…¥åŠ›ã™ã‚‹ã®ã¯é¢å€’</td><td>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œæˆãƒ»ç®¡ç†ã™ã‚‹</td><td><a href="#20-langchain">[20] LangChain</a> <br><a href="#21-llamaindex">[21] LlamaIndex</a> <br><a href="#24-semantic-kernel">[24] Semantic Kernel</a></td></tr><tr><td>LLMã¯ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ¬¡ç¬¬ã§æŒ¯ã‚‹èˆã„ãŒå¤§ããå¤‰ã‚ã£ã¦ã—ã¾ã†</td><td>ã‚¿ã‚¹ã‚¯ã«åˆã‚ã›ã¦ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ”¹è‰¯ã™ã‚‹ã€‚ã‚¿ã‚¹ã‚¯ãŒè¤‡æ•°ã‚ã‚‹å ´åˆã¯ãã‚Œãã‚Œç‹¬ç«‹ã§æ”¹è‰¯ã—ã¦ã„ã</td><td><a href="#20-langchain">[20] LangChain</a> <br><a href="#21-llamaindex">[21] LlamaIndex</a></td></tr></tbody></table></div><h3 id="2-ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã«ãŠã‘ã‚‹èª²é¡Œãƒ»æ¤œè¨äº‹é …"><a href="#2-ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã«ãŠã‘ã‚‹èª²é¡Œãƒ»æ¤œè¨äº‹é …" class="headerlink" title="2. ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã«ãŠã‘ã‚‹èª²é¡Œãƒ»æ¤œè¨äº‹é …"></a>2. ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã«ãŠã‘ã‚‹èª²é¡Œãƒ»æ¤œè¨äº‹é …</h3><div class="scroll"><table><thead><tr><th>èª²é¡Œ</th><th>ã‚„ã‚‹ã¹ãã“ã¨</th><th>ã‚µãƒ¼ãƒ“ã‚¹ãƒ»ãƒ„ãƒ¼ãƒ«å€™è£œ</th></tr></thead><tbody><tr><td>ãƒ—ãƒ­ãƒ—ãƒ©ã‚¤ã‚¨ã‚¿ãƒªãƒ¢ãƒ‡ãƒ«ä½¿ç”¨æ™‚ç‰¹æœ‰ã®ã‚³ã‚¹ãƒˆç®¡ç†ãŒå¿…è¦</td><td>ãƒ—ãƒ­ãƒ—ãƒ©ã‚¤ã‚¨ã‚¿ãƒªãƒ¢ãƒ‡ãƒ«ä½¿ç”¨ã®éš›ã€ã‚³ã‚¹ãƒˆãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã®ãŸã‚ã€å…¥åŠ›ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã‚’ç›£è¦–ã™ã‚‹</td><td><a href="#12-datadog">[12] Datadog</a></td></tr><tr><td>ãƒ—ãƒ­ãƒ—ãƒ©ã‚¤ã‚¨ã‚¿ãƒªãƒ¢ãƒ‡ãƒ«ã®å ´åˆã€ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ãŒç™ºç”Ÿã—ã¦ã—ã¾ã†</td><td>ãƒ—ãƒ­ãƒ—ãƒ©ã‚¤ã‚¨ã‚¿ãƒªãƒ¢ãƒ‡ãƒ«ä½¿ç”¨ã®éš›ã€ã‚µãƒ¼ãƒ“ã‚¹å“è³ªä¿è¨¼ã®ãŸã‚ã€ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã‚’ç›£è¦–ã™ã‚‹</td><td><a href="#12-datadog">[12] Datadog</a></td></tr></tbody></table></div><h3 id="3-ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã«ãŠã‘ã‚‹èª²é¡Œãƒ»æ¤œè¨äº‹é …"><a href="#3-ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã«ãŠã‘ã‚‹èª²é¡Œãƒ»æ¤œè¨äº‹é …" class="headerlink" title="3. ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã«ãŠã‘ã‚‹èª²é¡Œãƒ»æ¤œè¨äº‹é …"></a>3. ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã«ãŠã‘ã‚‹èª²é¡Œãƒ»æ¤œè¨äº‹é …</h3><div class="scroll"><table><thead><tr><th>èª²é¡Œ</th><th>ã‚„ã‚‹ã¹ãã“ã¨</th><th>ã‚µãƒ¼ãƒ“ã‚¹ãƒ»ãƒ„ãƒ¼ãƒ«å€™è£œ</th></tr></thead><tbody><tr><td>ã‚µãƒ¼ãƒ“ã‚¹é–‹å§‹å‰ã«ãƒ†ã‚¹ãƒˆã‚’è¡Œã†å¿…è¦ãŒã‚ã‚‹</td><td>ãƒãƒ£ãƒƒãƒˆå½¢å¼ã®UIã‚’ç”¨æ„ã—ã¦LLMã‚’è©¦é¨“çš„ã«è©¦ã—ã¦ã¿ã‚‹</td><td><a href="#13-dify">[13] Dify</a> <br><a href="#14-fixie">[14] Fixie</a> <br><a href="#15-playground">[15] Playground</a></td></tr><tr><td>LLMã®èƒ½åŠ›ã‚’æœ€å¤§é™å¼•ãå‡ºã™ãŸã‚ã«ã€å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã‚’æ´»ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹</td><td>æ–‡æ›¸æ¤œç´¢ã®ãŸã‚ã®ãƒ™ã‚¯ãƒˆãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’æ§‹ç¯‰ãƒ»é‹ç”¨ã™ã‚‹</td><td><a href="#16-chroma">[16] Chroma</a> <br><a href="#17-elasticsearch">[17] Elasticsearch</a> <br><a href="#18-faiss">[18] Faiss</a> <br><a href="#19-pinecone">[19] Pinecone</a></td></tr><tr><td>LLMã®èƒ½åŠ›ã‚’æœ€å¤§é™å¼•ãå‡ºã™ãŸã‚ã«ã€å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã‚’æ´»ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹</td><td>æ–‡æ›¸ç­‰ã‚’ãƒ™ã‚¯ãƒˆãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿ç®¡ã™ã‚‹</td><td><a href="#20-langchain">[20] LangChain</a> <br><a href="#21-llamaindex">[21] LlamaIndex</a> <br><a href="#22-cosmos-db">[22] Cosmos DB</a> <br><a href="#23-azure-cache-for-redis">[23] Azure Cache for Redis</a></td></tr><tr><td>LLMã«ä¼šè©±ã®æµã‚Œã‚’ç†è§£ã•ã›ã‚‹å¿…è¦ãŒã‚ã‚‹</td><td>ãƒãƒ£ãƒƒãƒˆã®å±¥æ­´ã‚’ç®¡ç†ã™ã‚‹</td><td><a href="#20-langchain">[20] LangChain</a> <br><a href="#21-llamaindex">[21] LlamaIndex</a></td></tr></tbody></table></div><h3 id="4-ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã«ãŠã‘ã‚‹èª²é¡Œãƒ»æ¤œè¨äº‹é …"><a href="#4-ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã«ãŠã‘ã‚‹èª²é¡Œãƒ»æ¤œè¨äº‹é …" class="headerlink" title="4. ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã«ãŠã‘ã‚‹èª²é¡Œãƒ»æ¤œè¨äº‹é …"></a>4. ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã«ãŠã‘ã‚‹èª²é¡Œãƒ»æ¤œè¨äº‹é …</h3><div class="scroll"><table><thead><tr><th>èª²é¡Œ</th><th>ã‚„ã‚‹ã¹ãã“ã¨</th><th>ã‚µãƒ¼ãƒ“ã‚¹ãƒ»ãƒ„ãƒ¼ãƒ«å€™è£œ</th></tr></thead><tbody><tr><td>ã‚µãƒ¼ãƒ“ã‚¹ã®ç¶™ç¶šçš„ãªæ”¹å–„</td><td>éå»ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä¿æŒã—ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ”¹è‰¯ã«ç¹‹ã’ã‚‹ã€‚è‹¦æ‰‹ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’è¦‹ã¤ã‘ãŸã‚‰ãƒãƒ¼ã‚¯ã—ã¦ä¿æŒ</td><td><a href="#20-langchain">[20] LangChain</a> <br><a href="#21-llamaindex">[21] LlamaIndex</a></td></tr><tr><td>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã¸ã®å¯¾ç­–</td><td>ä¸æ­£ãªå…¥åŠ›ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ç›£è¦–ã™ã‚‹</td><td>-</td></tr><tr><td>LLMãŒä¸é©åˆ‡ãªç™ºè¨€ã‚’ã—ã¦ã—ã¾ã†å¯èƒ½æ€§ãŒã‚ã‚‹</td><td>LLMã®å‡ºåŠ›ã‚’å®šæ€§çš„ã«è©•ä¾¡ãƒ»ç›£è¦–ã™ã‚‹ï¼ˆæ­£ç¢ºæ€§ã€å€«ç†æ€§ã€ãƒã‚¤ã‚¢ã‚¹ã€ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ç­‰ï¼‰</td><td><a href="#9-toxic-bert">[9] toxic-bert</a> <br><a href="#10-moderation">[10] Moderation</a> <br><a href="#25-guardrails-ai">[25] Guardrails AI</a></td></tr></tbody></table></div><h2 id="èª²é¡Œãƒ»æ¤œè¨äº‹é …ã‚’ã©ã†è§£æ±ºã™ã‚‹ã‹ï¼ˆãƒ„ãƒ¼ãƒ«ç´¹ä»‹ï¼‰"><a href="#èª²é¡Œãƒ»æ¤œè¨äº‹é …ã‚’ã©ã†è§£æ±ºã™ã‚‹ã‹ï¼ˆãƒ„ãƒ¼ãƒ«ç´¹ä»‹ï¼‰" class="headerlink" title="èª²é¡Œãƒ»æ¤œè¨äº‹é …ã‚’ã©ã†è§£æ±ºã™ã‚‹ã‹ï¼ˆãƒ„ãƒ¼ãƒ«ç´¹ä»‹ï¼‰"></a>èª²é¡Œãƒ»æ¤œè¨äº‹é …ã‚’ã©ã†è§£æ±ºã™ã‚‹ã‹ï¼ˆãƒ„ãƒ¼ãƒ«ç´¹ä»‹ï¼‰</h2><p>LLMã®æ€¥é€Ÿãªç™ºé”ã«ä¼´ã„ã€ä¸Šè¨˜ã®èª²é¡Œã‚„æ¤œè¨äº‹é …ã‚’è§£æ±ºã™ã‚‹ã®ã«å½¹ç«‹ã¤ã‚µãƒ¼ãƒ“ã‚¹ã‚„ãƒ„ãƒ¼ãƒ«ãŒæ²¢å±±å‡ºã¦ãã¦ã„ã¾ã™ã€‚ä¸€æ–¹ã§ã€LLMã¯ã¾ã æ–°ã—ã„æŠ€è¡“ã®ãŸã‚ã€ã‚µãƒ¼ãƒ“ã‚¹ã‚„ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ã‚‚è§£æ±ºã—ãªã„å ´åˆã‚„ãã‚‚ãã‚‚ãƒ„ãƒ¼ãƒ«ãŒç„¡ã„å ´åˆã‚‚ã‚ã‚Šã¾ã™ã€‚</p><p>ã“ã®ã‚ˆã†ãªèª²é¡Œã¯MLOpsãƒãƒ¼ãƒ ãŒç‹¬è‡ªã«å·¥å¤«ã—ã¦è§£æ±ºã—ã¦ã„ãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚MLOpsãƒãƒ¼ãƒ ã¯ã€æ´»ç”¨ã§ãã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã‚„ãƒ„ãƒ¼ãƒ«ã¯æ´»ç”¨ã—ã€ã‚µãƒ¼ãƒ“ã‚¹ãƒ»ãƒ„ãƒ¼ãƒ«ãŒç„¡ã„ or ä½¿ãˆãªã„å ´åˆã®è§£æ±ºç­–ã‚’è€ƒãˆã‚‹ã“ã¨ã«æ³¨åŠ›ã—ãŸã„ã¨ã“ã‚ã§ã™ã€‚</p><p>ã“ã“ã‹ã‚‰ã¯ã€MLOpsã®åŠ¹ç‡çš„ãªæ¨é€²ã«æ´»ç”¨ã§ããã†ãªLLMã®ãŸã‚ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚„ãƒ„ãƒ¼ãƒ«ã‚’ç´¹ä»‹ã—ã€èª­è€…ã®çš†æ§˜ã«å½¹ç«‹ã¤ã“ã¨ã‚’æœŸå¾…ã—ã¾ã™ã€‚LLMã®ãŸã‚ã®ã‚µãƒ¼ãƒ“ã‚¹ãƒ»ãƒ„ãƒ¼ãƒ«ã¯æ•°å¤šãã‚ã‚Šã¾ã™ãŒã€ä»¥ä¸‹ã«èª²é¡Œãƒ»æ¤œè¨äº‹é …ã«å¯¾å¿œã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ãƒ»ãƒ„ãƒ¼ãƒ«ã®å€™è£œã‚’ä¸€éƒ¨æŠœç²‹ã—ã¦ã¾ã¨ã‚ã¾ã—ãŸã€‚</p><p>ãã®ä»–ã«ã‚‚å¤šãã®ãƒ„ãƒ¼ãƒ«ãŒã‚ã‚Šã€<a href="https://github.com/tensorchord/Awesome-LLMOps">ã“ã¡ã‚‰</a>ãŒå‚è€ƒã«ãªã‚Šã¾ã™ã€‚ä»¥ä¸‹ã¯è¡¨ã«ã¾ã¨ã‚ãŸå„ã‚µãƒ¼ãƒ“ã‚¹ãƒ»ãƒ„ãƒ¼ãƒ«ã®è©³ç´°ã§ã™ã€‚ã‚„ã‚„ç„¡ç§©åºãªç¾…åˆ—ã¨ãªã£ã¦ã„ã¾ã™ãŒã”ç´¹ä»‹ã—ã¾ã™ã€‚</p><h3 id="1-ã‚¯ãƒ©ã‚¦ãƒ‰ç³»ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¤ã‚¯"><a href="#1-ã‚¯ãƒ©ã‚¦ãƒ‰ç³»ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¤ã‚¯" class="headerlink" title="[1] ã‚¯ãƒ©ã‚¦ãƒ‰ç³»ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¤ã‚¯"></a>[1] ã‚¯ãƒ©ã‚¦ãƒ‰ç³»ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¤ã‚¯</h3><p>AWSã‚„Azureã€GCPãªã©ã®ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã§ã¯ã€ã€Œå¤§é‡ãªãƒ‡ãƒ¼ã‚¿ã®ä¿ç®¡ã€ã¨ã€ŒåŠ¹ç‡è‰¯ã„ãƒ‡ãƒ¼ã‚¿ã®å–ã‚Šå‡ºã—ã€ãŒå¯èƒ½ãªã‚µãƒ¼ãƒ“ã‚¹ãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><ul><li>AWS<ul><li>ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¤ã‚¯ï¼š<a href="https://aws.amazon.com/jp/s3/">Amazon S3</a></li><li>æ¤œç´¢ã‚µãƒ¼ãƒ“ã‚¹ï¼š<a href="https://aws.amazon.com/jp/kendra/">Amazon Kendra</a></li></ul></li><li>Azure<ul><li>ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¤ã‚¯ï¼š<a href="https://learn.microsoft.com/ja-jp/azure/storage/blobs/storage-blobs-introduction">Azure Blob Storage</a></li><li>æ¤œç´¢ã‚µãƒ¼ãƒ“ã‚¹ï¼š<a href="https://learn.microsoft.com/ja-jp/azure/search/search-what-is-azure-search">Azure Cognitive Search</a></li></ul></li><li>GCP<ul><li>ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¤ã‚¯ï¼š<a href="https://cloud.google.com/storage?hl=ja">Google Cloud Storage</a></li><li>æ¤œç´¢ã‚µãƒ¼ãƒ“ã‚¹ï¼š<a href="https://cloud.google.com/vertex-ai/docs/matching-engine/overview?hl=ja">Vertex AI Matching Engine</a></li></ul></li></ul><h3 id="2-Argilla"><a href="#2-Argilla" class="headerlink" title="[2] Argilla"></a>[2] Argilla</h3><p><a href="https://docs.argilla.io/en/latest/">Argilla</a>ã¯ã€RLHFç”¨ã«ã€ŒäººåŠ›ã§é›†ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ã®å…¥åŠ›ãƒ»å‡ºåŠ›ã®è©•ä¾¡ã€ã‚’å††æ»‘ã«ã™ã‚‹ãŸã‚ã®ç®¡ç†ã‚’è¡Œã£ã¦ãã‚Œã‚‹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚\</p><p>ä¾‹ãˆã°ã€äººåŠ›ã§é›†ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ã¨ã¯ã€<a href="https://huggingface.co/datasets/kunishou/databricks-dolly-15k-ja">ã“ã¡ã‚‰</a>ã«ã‚ã‚‹ã‚ˆã†ãªæŒ‡ç¤ºæ–‡(instruction)ã€å‚è€ƒæƒ…å ±(input)ã€ç†æƒ³ã®å›ç­”(output)ãŒã‚»ãƒƒãƒˆã«ãªã£ãŸã‚‚ã®ã‚„ã€è¤‡æ•°ã®LLMã‹ã‚‰ã®å‡ºåŠ›ã«ãƒ©ãƒ³ã‚¯ä»˜ã‘ã‚’ã—ãŸçµæœç­‰ã§ã™ã€‚</p><p>ã“ã®ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿ã‚’åé›†ã™ã‚‹éš›ã€åˆ†ã‹ã‚Šã‚„ã™ã„UIã‚’æä¾›ã—ã€é›†ã‚ãŸãƒ‡ãƒ¼ã‚¿ã‚’ç®¡ç†ã—ã¦ãã‚Œã¾ã™ã€‚</p><details><summary>è©³ç´°</summary><img src="/images/20230913a/image.png" alt="image" width="1200" height="672" loading="lazy"></details><h3 id="3-ã‚¯ãƒ©ã‚¦ãƒ‰å­¦ç¿’åŸºç›¤"><a href="#3-ã‚¯ãƒ©ã‚¦ãƒ‰å­¦ç¿’åŸºç›¤" class="headerlink" title="[3] ã‚¯ãƒ©ã‚¦ãƒ‰å­¦ç¿’åŸºç›¤"></a>[3] ã‚¯ãƒ©ã‚¦ãƒ‰å­¦ç¿’åŸºç›¤</h3><p>AWSã‚„GCPãªã©ã®ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã§ã¯ã€LLMé–‹ç™ºã®ãŸã‚ã®å­¦ç¿’åŸºç›¤ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><ul><li>AWS<ul><li>Amazon SageMakerä¸Šã§LLMã®åˆ†æ•£å­¦ç¿’ãŒå¯èƒ½ã§ã™ï¼ˆ<a href="https://aws.amazon.com/jp/blogs/news/training-large-language-models-on-amazon-sagemaker-best-practices/">å‚è€ƒ</a>ï¼‰</li></ul></li><li>GCP<ul><li><a href="https://t5x.readthedocs.io/en/latest/">T5X</a>ã¨Vertex AIã‚’ç”¨ã„ã¦LLMã‚’å­¦ç¿’ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼ˆ<a href="https://github.com/GoogleCloudPlatform/t5x-on-vertex-ai">å‚è€ƒ</a>ï¼‰</li></ul></li><li>Azure<ul><li>Azure Machine Learningã§LLMã®å­¦ç¿’ãŒå¯èƒ½ã§ã™ï¼ˆ<a href="https://learn.microsoft.com/ja-jp/azure/machine-learning/overview-what-is-azure-machine-learning">å‚è€ƒ</a>ï¼‰ã€‚<a href="https://learn.microsoft.com/ja-jp/azure/machine-learning/prompt-flow/get-started-prompt-flow">Prompt Flow</a>ï¼ˆå¾Œè¿°ï¼‰ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€LLMè‡ªä½“ã®é–‹ç™ºã‚’å«ã‚ãŸLLMã‚’ç”¨ã„ãŸã‚µãƒ¼ãƒ“ã‚¹ã®é–‹ç™ºã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™</li></ul></li></ul><h3 id="4-MLflow"><a href="#4-MLflow" class="headerlink" title="[4] MLflow"></a>[4] MLflow</h3><p><a href="https://mlflow.org/docs/latest/index.html">MLflow</a>ã¯ã€å¾“æ¥ã®MLOpsã«ãŠã„ã¦ã‚‚åºƒãä½¿ã‚ã‚Œã¦ããŸãƒ„ãƒ¼ãƒ«ã§ã™ãŒã€MLflowã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³2.3ã‹ã‚‰LLMã«å¯¾å¿œã—ã€<br>Huggingfaceã®ãƒˆãƒ©ãƒ³ã‚¹ãƒ•ã‚©ãƒ¼ãƒãƒ¼ã‚„LangChainã®ãƒ­ã‚®ãƒ³ã‚°æ©Ÿèƒ½ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚</p><p>ã¾ãŸã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³2.4ã‹ã‚‰ã¯LLMã®è©•ä¾¡ã®ãŸã‚ã®æ©Ÿèƒ½ã‚‚è¿½åŠ ã•ã‚Œã€è¤‡æ•°ã®ãƒ¢ãƒ‡ãƒ«ã®å…¥åŠ›ã€å‡ºåŠ›ã€ä¸­é–“çµæœã‚’ç°¡å˜ã«æ¯”è¼ƒã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><details><summary>å‚è€ƒ</summary><img src="/images/20230913a/mlflow_3.png" alt="mlflow_3" width="1200" height="621" loading="lazy"></details><h3 id="5-Weight-amp-Biases"><a href="#5-Weight-amp-Biases" class="headerlink" title="[5] Weight &amp; Biases"></a>[5] Weight &amp; Biases</h3><p><a href="https://wandb.ai/site/jp-home">Weight &amp; Biases</a>ã‚‚æœ‰åãªMLOpsãƒ„ãƒ¼ãƒ«ã§ã™ã€‚Weight &amp; Biasesã§ã¯<a href="https://docs.wandb.ai/guides/prompts">W&amp;B Prompts</a>ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p>LangChainã®å‡¦ç†ã®å¯è¦–åŒ–ã€å„å®Ÿè¡Œã«ãŠã‘ã‚‹å…¥å‡ºåŠ›ã€ä¸­é–“çµæœã®æ¯”è¼ƒã€ãƒã‚§ãƒ¼ãƒ³æ§‹é€ ã‚„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ç¢ºèªãŒç°¡å˜ã«è¡Œãˆã¾ã™ã€‚</p><p><a href="https://www.youtube.com/watch?v=gU6Ew-Rscw8">YouTubeå‹•ç”»</a>ã«ã¦ã€W&amp;B Promptsã§ã©ã®ã‚ˆã†ãªã“ã¨ãŒã§ãã‚‹ã®ã‹ãŒåˆ†ã‹ã‚Šã‚„ã™ãç´¹ä»‹ã•ã‚Œã¦ã„ã‚‹ã®ã§ãœã²ã”è¦§ãã ã•ã„ã€‚</p><h3 id="6-aim"><a href="#6-aim" class="headerlink" title="[6] aim"></a>[6] aim</h3><p><a href="https://aimstack.readthedocs.io/en/latest/">aim</a>ã§ã¯ã€LLMã®å­¦ç¿’ã«ãŠã‘ã‚‹å„ç¨®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚„ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®ãƒ­ã‚®ãƒ³ã‚°ã€å‡ºåŠ›ã®ç¢ºèªã€æ¯”è¼ƒã‚’ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>LangChainã®å…¬å¼Docsã«ã€<a href="https://python.langchain.com/docs/ecosystem/integrations/aim_tracking">Aimã‚’ç”¨ã„ãŸLangChainã®ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã®ä¾‹</a>ãŒè¨˜è¼‰ã•ã‚Œã¦ãŠã‚Šã€å…·ä½“çš„ãªå°å…¥æ–¹æ³•ã‚‚åˆ†ã‹ã‚Šãç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã™ã€‚åŠ ãˆã¦<a href="https://github.com/aimhubio/aimlflow">MLflowã¨çµ„ã¿åˆã‚ã›ã¦ä½¿ã†ã“ã¨ã‚‚å¯èƒ½</a>ãªãŸã‚ã€MLflowã‚’ç¾åœ¨ä½¿ã‚ã‚Œã¦ã„ã‚‹å ´åˆã«ã‚‚ã€å°å…¥ã‚’è€ƒãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><details><summary>å‚è€ƒ</summary><img src="/images/20230913a/aim.gif" alt="aim" width="1200" height="675" loading="lazy"><p>å¼•ç”¨å…ƒ: <a href="https://twitter.com/aimstackio/status/1653836833586024449">AimStack on Twitter</a></p></details><h3 id="7-DeepSpeed-Chat"><a href="#7-DeepSpeed-Chat" class="headerlink" title="[7] DeepSpeed Chat"></a>[7] DeepSpeed Chat</h3><p><a href="https://github.com/microsoft/DeepSpeed/blob/master/blogs/deepspeed-chat/japanese/README.md">DeepSpeed Chat</a>ã¯ã€äººé–“ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã«ã‚ˆã‚‹å¼·åŒ–å­¦ç¿’ï¼ˆRLHFï¼‰ã«å¿…è¦ãªãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚</p><p>é€šå¸¸ã€RLHFã«ã¯è¤‡é›‘ãªãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãŒå¿…è¦ã§ã€å¤šå¤§ãªã‚³ã‚¹ãƒˆã¨æ™‚é–“ãŒæ›ã‹ã‚Šã¾ã™ãŒã€DeepSpeed Chatã‚’åˆ©ç”¨ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªæ©æµãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚</p><ul><li>ç°¡å˜ãªã‚³ãƒ¼ãƒ‰ã§è¤‡é›‘ãªRLHFã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’å®Ÿè¡Œã§ãã‚‹</li><li>ZeROã‚„LoRAãƒ™ãƒ¼ã‚¹ã®å¤šæ•°ã®ãƒ¡ãƒ¢ãƒªæœ€é©åŒ–æŠ€è¡“ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§è¨ˆç®—ãƒªã‚½ãƒ¼ã‚¹ã‚’å¤§å¹…ã«å‰Šæ¸›ã§ãã‚‹</li></ul><details><summary>è©³ç´°</summary><img src="/images/20230913a/image_2.png" alt="image" width="1200" height="675" loading="lazy"></details><h3 id="8-JGLUE"><a href="#8-JGLUE" class="headerlink" title="[8] JGLUE"></a>[8] JGLUE</h3><p><a href="https://github.com/yahoojapan/JGLUE">JGLUE</a>ã¯æ—©ç¨²ç”°å¤§å­¦ã¨Yahoo! JAPANç ”ç©¶æ‰€ã«ã‚ˆã£ã¦ä½œæˆã•ã‚ŒãŸæ—¥æœ¬èªç†è§£èƒ½åŠ›ã‚’æ¸¬ã‚‹ãŸã‚ã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã§ã™ã€‚æ–‡ç« åˆ†é¡ã€æ–‡ãƒšã‚¢åˆ†é¡ã€è³ªç–‘å¿œç­”ã®ã‚¿ã‚¹ã‚¯ã®èƒ½åŠ›ã‚’æ¸¬ã‚‹ã“ã¨ãŒã§ãã€ãã®ãŸã‚ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚‚ç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p>æ³¨æ„ç‚¹ã¨ã—ã¦ã€JGLUEã¯ä¸€èˆ¬çš„ãªæ—¥æœ¬èªç†è§£èƒ½åŠ›ã‚’æ¸¬ã‚‹ãŸã‚ã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã§ã‚ã‚‹ãŸã‚ã€JGLUEã®ã‚¹ã‚³ã‚¢ãŒè‰¯ã„ã‹ã‚‰ã¨è¨€ã£ã¦ç›®çš„ã‚¿ã‚¹ã‚¯ã®ç²¾åº¦ã‚‚è‰¯ã„ã¨ã¯è¨€ãˆã¾ã›ã‚“ã€‚JGLUEã®ã‚¹ã‚³ã‚¢ã¯ã‚ãã¾ã§å‚è€ƒç¨‹åº¦ã¨ã™ã‚‹ã¹ãã§ã—ã‚‡ã†ã€‚çµå±€ã€ç¾çŠ¶ã§ã¯ç›®çš„ã‚¿ã‚¹ã‚¯ã®ç²¾åº¦ã‚’æ¸¬ã‚‹ã«ã¯ç‹¬è‡ªã§ãƒ†ã‚¹ãƒˆç”¨ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚</p><h3 id="9-toxic-bert"><a href="#9-toxic-bert" class="headerlink" title="[9] toxic-bert"></a>[9] toxic-bert</h3><p><a href="https://huggingface.co/unitary/toxic-bert">toxic-bert</a>ã¯ã‚³ãƒ¡ãƒ³ãƒˆã®æœ‰å®³ãƒ¬ãƒ™ãƒ«ã®åˆ†é¡ã‚„æœ‰å®³ãªã‚³ãƒ¡ãƒ³ãƒˆã®åˆ†é¡ï¼ˆã©ã®ã‚ˆã†ãªæœ‰å®³ã•ã‚’æŒã£ã¦ã„ã‚‹ã‹ï¼‰ãŒå¯èƒ½ãªãƒ¢ãƒ‡ãƒ«ã§ã™ã€‚LLMã®å‡ºåŠ›ã®ç›£è¦–ã«åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>è¤‡æ•°è¨€èªã§å­¦ç¿’æ¸ˆã¿ã®ãƒ¢ãƒ‡ãƒ«ãŒå…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ãŒã€æ—¥æœ¬èªã§ã®å­¦ç¿’æ¸ˆã¿ãƒ¢ãƒ‡ãƒ«ã¯ãªã„ã‚ˆã†ã§ã™ã€‚ã—ã‹ã—ã€å­¦ç¿’ç”¨ã®ã‚³ãƒ¼ãƒ‰ã¯å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ç”¨æ„ã™ã‚Œã°æ—¥æœ¬èªã«å¯¾å¿œã—ãŸãƒ¢ãƒ‡ãƒ«ã‚‚ä½œæˆã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã§ã—ã‚‡ã†ã€‚</p><h3 id="10-Moderation"><a href="#10-Moderation" class="headerlink" title="[10] Moderation"></a>[10] Moderation</h3><p><a href="https://platform.openai.com/docs/guides/moderation">Moderation</a>ã¯OpenAIã®APIã‚’åˆ©ç”¨ã™ã‚‹éš›ã«ã€å…¥å‡ºåŠ›ãŒ<a href="https://openai.com/policies/usage-policies">OpenAIã®åˆ©ç”¨ãƒãƒªã‚·ãƒ¼</a>ã«åã—ã¦ã„ãªã„ã‹ã‚’ç›£è¦–ã™ã‚‹ãŸã‚ã«åˆ©ç”¨ã§ãã‚‹ãƒ¢ãƒ‡ãƒ«ã§ã™ï¼ˆãã‚Œä»¥å¤–ã®ç›®çš„ã§ã®åˆ©ç”¨ã¯ç¦æ­¢ã•ã‚Œã¦ã„ã¾ã™ï¼‰ã€‚</p><p>Moderationã§ã¯ã€ãƒãƒªã‚·ãƒ¼ã«åã—ã¦ã„ã‚‹ã‹ã®ãƒ•ãƒ©ã‚°(True&#x2F;False)ã«åŠ ãˆã¦ã€ã©ã®ã‚«ãƒ†ã‚´ãƒªãƒ¼(sexualã€hateã€harassmentãªã©)ã§åã—ã¦ã„ã‚‹ã‹ã€å„ã‚«ãƒ†ã‚´ãƒªãƒ¼ã®ã‚¹ã‚³ã‚¢ã‚’è¿”ã—ã¦ãã‚Œã¾ã™ã€‚</p><h3 id="11-Prompt-Flow"><a href="#11-Prompt-Flow" class="headerlink" title="[11] Prompt Flow"></a>[11] Prompt Flow</h3><p><a href="https://learn.microsoft.com/ja-jp/azure/machine-learning/prompt-flow/get-started-prompt-flow">Prompt Flow</a>ã¯LLMã‚’ç”¨ã„ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ä½œæˆãƒ»ãƒ‡ãƒãƒƒã‚°ãƒ»è©•ä¾¡ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’è¡Œã†ã“ã¨ãŒã§ãã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ä½œæˆã—ãŸãƒ•ãƒ­ãƒ¼ãŒã‚°ãƒ©ãƒ•ã§å¯è¦–åŒ–ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€é–‹ç™ºæ™‚ã«ã¯ã©ã®ã‚ˆã†ãªãƒ•ãƒ­ãƒ¼ã«ãªã‚‹ã®ã‹ã‚’ç°¡å˜ã«ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã¾ãŸã€ä½œæˆã—ãŸãƒ•ãƒ­ãƒ¼ã¯ç°¡å˜ã«è©•ä¾¡ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãã®å¾Œã€ãƒ‡ãƒ—ãƒ­ã‚¤ã¾ã§ã‚’Prompt Flowã§å®Œçµã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><details><summary>è©³ç´°</summary><img src="/images/20230913a/image_3.png" alt="image" width="1200" height="607" loading="lazy"><p>å¼•ç”¨å…ƒ: <a href="https://learn.microsoft.com/ja-jp/azure/machine-learning/prompt-flow/get-started-prompt-flow">ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ ãƒ•ãƒ­ãƒ¼ã®æ¦‚è¦ (ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼)</a></p></details><h3 id="12-Datadog"><a href="#12-Datadog" class="headerlink" title="[12] Datadog"></a>[12] Datadog</h3><p><a href="https://docs.datadoghq.com/ja/">Datadog</a>ã¯ã€SaaSå½¢å¼ã§åˆ©ç”¨ã§ãã‚‹ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚</p><p>Datadogã§ã¯ã€OpenAI APIåˆ©ç”¨æ™‚ã®ãƒˆãƒ¼ã‚¯ãƒ³ã®ç·æ¶ˆè²»é‡ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã”ã¨ã®ãƒˆãƒ¼ã‚¯ãƒ³ã®å¹³å‡ç·æ•°ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ ã€APIã®ã‚¨ãƒ©ãƒ¼ç‡ã‚’ç›£è¦–ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><details><summary>è©³ç´°</summary><img src="/images/20230913a/datadog_dashboard.png" alt="datadog_dashboard" width="1200" height="675" loading="lazy"><p>å¼•ç”¨å…ƒ: <a href="https://www.datadoghq.com/ja/solutions/openai/">Datadog</a></p></details><h3 id="13-Dify"><a href="#13-Dify" class="headerlink" title="[13] Dify"></a>[13] Dify</h3><p><a href="https://docs.dify.ai/getting-started/intro-to-dify">Dify</a>ã¯LLMã‚’ç”¨ã„ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç°¡å˜ã«ä½œæˆã§ãã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚Difyã§ã¯ãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆå‹ã¨ä¼šè©±å‹ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¿ã‚¤ãƒ—ã‚’æ±ºã‚ãŸå¾Œã¯ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œæˆã€ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®èª­ã¿è¾¼ã¿ã€ãƒ‡ãƒãƒƒã‚°ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¿æ•´ç­‰ãŒã§ãã¾ã™ã€‚</p><p>ã¾ãŸã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å…¬é–‹ã‚‚è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚</p><details><summary>å‚è€ƒ</summary><img src="/images/20230913a/Dify_table.png" alt="Dify_table" width="946" height="548" loading="lazy"><p>å¼•ç”¨å…ƒ: <a href="https://docs.dify.ai/application/creating-an-application">Dify Docs -Creating An Application</a></p><img src="/images/20230913a/dify.gif" alt="dify.gif" width="800" height="495" loading="lazy"><p>å¼•ç”¨å…ƒ: <a href="https://twitter.com/dify_ai/status/1691296036420243456">Dify.AI on Twitter</a></p></details><h3 id="14-Fixie"><a href="#14-Fixie" class="headerlink" title="[14] Fixie"></a>[14] Fixie</h3><p><a href="https://www.fixie.ai/">Fixie</a>ã¯ã€LLMã‚’ç”¨ã„ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹ç™ºã™ã‚‹ã“ã¨ãŒã§ãã‚‹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚</p><p>Fixieã§ã¯ã€agent registryã«ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹LLMã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã€ä½¿ç”¨ã™ã‚‹LLMã«ã¯OpenAIãªã©ã®ãƒ—ãƒ­ãƒ—ãƒ©ã‚¤ã‚¨ã‚¿ãƒªãƒ¢ãƒ‡ãƒ«ã‚„ç‹¬è‡ªã«ãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã—ãŸãƒ¢ãƒ‡ãƒ«ãªã©ã‚’é¸ã¶ã“ã¨ãŒã§ãã¾ã™ã€‚ã¾ãŸã€å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦GitHubã€Google Calendarã€databaseãªã©ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>é–‹ç™ºã—ãŸLLMã‚’ç”¨ã„ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã—ãŸã„å ´åˆã‚„ã€é–‹ç™ºã—ãŸLLMãŒæœŸå¾…é€šã‚Šã®æŒ™å‹•ã‚’ç¤ºã™ã‹ã©ã†ã‹ã®ãƒ†ã‚¹ãƒˆãªã©ã«åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚</p><h3 id="15-Playground"><a href="#15-Playground" class="headerlink" title="[15] Playground"></a>[15] Playground</h3><p><a href="https://learn.microsoft.com/ja-jp/azure/ai-services/openai/chatgpt-quickstart?tabs=command-line&pivots=programming-language-studio">Playground</a>ã¯ã€Azure OpenAI Serviceã§åˆ©ç”¨ã§ãã‚‹ã€ãƒ¢ãƒ‡ãƒ«ã‚’ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã«è©¦ã™ã“ã¨ãŒå¯èƒ½ãªã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚</p><p>ãƒãƒ£ãƒƒãƒˆå½¢å¼ã¨completionå½¢å¼ã§ãƒ¢ãƒ‡ãƒ«ã‚’è©¦ã™ã“ã¨ãŒã§ãã€å„ç¨®è¨­å®šï¼ˆã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆãƒ¢ãƒ‡ãƒ«ãŒã©ã®ã‚ˆã†ã«æŒ¯èˆã†ã¹ãã‹ã‚’å®šç¾©ã—ãŸæ–‡ï¼‰ã‚„æ¸©åº¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãªã©ï¼‰ã‚‚ãã®å ´ã§å¤‰æ›´ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><details><summary>å‚è€ƒ</summary><img src="/images/20230913a/Chat_playground.png" alt="Chat_playground" width="1200" height="644" loading="lazy"><p>å¼•ç”¨å…ƒ: <a href="https://learn.microsoft.com/ja-jp/azure/ai-services/openai/chatgpt-quickstart?tabs=command-line&pivots=programming-language-studio#playground">ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ: Azure OpenAI Service ã§ GPT-35-Turbo ã¨ GPT-4 ã‚’ä½¿ã„å§‹ã‚ã‚‹</a></p></details><h3 id="16-Chroma"><a href="#16-Chroma" class="headerlink" title="[16] Chroma"></a>[16] Chroma</h3><p>LlamaIndexç­‰ã§ä½œæˆã—ãŸIndexã¯ã©ã“ã‹ã«ä¿å­˜ã—ã¦ãŠã„ã¦ã€æ¯å›ä½œæˆã™ã‚‹ã¨ã„ã†æ‰‹é–“ã¯çœããŸã„ã¨ã“ã‚ã§ã™ã€‚</p><p><a href="https://docs.trychroma.com/">Chroma</a>ã¯LlamaIndexç­‰ã§ä½œæˆã—ãŸIndexã®ä¿å­˜ã€æ´»ç”¨ã‚’å®¹æ˜“ã«ã™ã‚‹ãŸã‚ã®OSSã®ãƒ™ã‚¯ãƒˆãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã™ã€‚</p><p>LangChainã‚„LlamaIndexã¨ã®é€£æºã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ãŠã‚Šï¼ˆ<a href="https://docs.trychroma.com/integrations">å‚è€ƒ</a>ï¼‰ã€ã¾ãŸãƒ‡ãƒ—ãƒ­ã‚¤å…ˆã¨ã—ã¦AWSãŒåˆ©ç”¨ã§ãã¾ã™ï¼ˆ<a href="https://docs.trychroma.com/deployment">å‚è€ƒ</a>ï¼‰ã€‚</p><h3 id="17-Elasticsearch"><a href="#17-Elasticsearch" class="headerlink" title="[17] Elasticsearch"></a>[17] Elasticsearch</h3><p><a href="https://www.elastic.co/jp/elasticsearch/">Elasticsearch</a>ã¯Elasticç¤¾ãŒæä¾›ã™ã‚‹å…¨æ–‡æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã§ã™ã€‚</p><p>å¤§é‡ã®ãƒ‡ãƒ¼ã‚¿é‡ã‚„ãƒªã‚¯ã‚¨ã‚¹ãƒˆé‡ã§ã‚ã£ã¦ã‚‚ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ã«åˆ†æ•£å‡¦ç†ãŒå¯èƒ½ã¨ãªã£ã¦ã„ã¾ã™ã€‚ ãƒãƒ¼ã‚¸ãƒ§ãƒ³8.0ã‹ã‚‰ã¯NLPã‚’ç”¨ã„ãŸã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢ã®æ©Ÿèƒ½ã‚‚è¿½åŠ ã•ã‚Œã¾ã—ãŸï¼ˆ<a href="https://www.elastic.co/jp/virtual-events/introduction-to-nlp-models-and-vector-search">å‚è€ƒ</a>ï¼‰ã€‚</p><p>ã“ã‚Œã«ã‚ˆã‚Šã€LLMã‚’æ´»ç”¨ã—ãŸã‚·ã‚¹ãƒ†ãƒ ã«ãŠã‘ã‚‹å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜å…ˆã¨ã—ã¦åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><h3 id="18-Faiss"><a href="#18-Faiss" class="headerlink" title="[18] Faiss"></a>[18] Faiss</h3><p><a href="https://github.com/facebookresearch/faiss">Faiss</a>ã¯MetaãŒä½œæˆã—ãŸOSSã®ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚</p><p>ãƒ†ã‚­ã‚¹ãƒˆã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ä½œæˆã€æ¤œç´¢ãŒå¯èƒ½ã¨ãªã£ã¦ã„ã¾ã™ã€‚</p><p>ãƒãƒ«ãƒGPUã§ã®æ¤œç´¢ã‚‚ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ãŠã‚Šã€é«˜é€Ÿã«é¡ä¼¼ã—ãŸæ–‡ç« ã‚’æ¤œç´¢ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><h3 id="19-Pinecone"><a href="#19-Pinecone" class="headerlink" title="[19] Pinecone"></a>[19] Pinecone</h3><p><a href="https://www.pinecone.io/">Pinecone</a>ã¯ãƒ•ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ‰ãªãƒ™ã‚¯ãƒˆãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã™ã€‚</p><p>å•†ç”¨ã®ã‚µãƒ¼ãƒ“ã‚¹ã¨ã¯ãªã‚Šã¾ã™ãŒã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ä½œæˆã€æ¤œç´¢ã€ä¿å­˜ãƒ»ç®¡ç†ã‚’ã“ã®ã‚µãƒ¼ãƒ“ã‚¹1ã¤ã§å®Œäº†ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã¾ãŸã€ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã«ã‚‚å¯¾å¿œã—ã¦ã„ã‚‹ãŸã‚ã€å¤§é‡ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ã‚‚é«˜é€Ÿã«å¯¾å¿œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><h3 id="20-LangChain"><a href="#20-LangChain" class="headerlink" title="[20] LangChain"></a>[20] LangChain</h3><p>LLMã‚’æ‹¡å¼µã—æ§˜ã€…ãªã‚¿ã‚¹ã‚¯ã«ç‰¹åŒ–ã•ã›ã‚‹ãŸã‚ã®ä»£è¡¨çš„ãªOSSãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ã€<a href="https://docs.langchain.com/docs/">LangChain</a>ãŒã‚ã‚Šã¾ã™ã€‚</p><p>LangChainã§ã¯ã€LLMã®å‘¼ã³å‡ºã—ã‹ã‚‰ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ç®¡ç†ã€å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã®æ´»ç”¨ã€é€£ç¶šçš„ãªã‚¿ã‚¹ã‚¯ã®å®Ÿè¡Œãªã©ãŒç°¡å˜ã«å®Ÿè£…ã§ãã¾ã™ã€‚</p><details><summary>è©³ç´°</summary>ä»¥ä¸‹ã«LangChainã§æä¾›ã•ã‚Œã¦ã„ã‚‹ä¸»è¦ãªæ©Ÿèƒ½ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚<div class="scroll"><table><thead><tr><th>æ©Ÿèƒ½</th><th>èª¬æ˜</th></tr></thead><tbody><tr><td>Models</td><td>LangChainãŒã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹å¤šãã®ãƒ¢ãƒ‡ãƒ«ã‚’åŒä¸€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§æ‰±ãˆã‚‹</td></tr><tr><td>Prompts</td><td>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ç®¡ç†ã€æœ€é©åŒ–ã€ã‚·ãƒªã‚¢ãƒ«åŒ–ãŒã§ãã‚‹</td></tr><tr><td>Memory</td><td>LLMã¨ã®ã‚„ã‚Šå–ã‚Šã‚’ä¿å­˜ã§ãã€ã¾ãŸãã‚Œã‚’ç”¨ã„ã¦LLMã«éå»ã®ã‚„ã‚Šå–ã‚Šã‚’è¸ã¾ãˆãŸå›ç­”ã‚’ä¿ƒã™ã“ã¨ãŒã§ãã‚‹</td></tr><tr><td>Indexes</td><td>LLMã«å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã‚’è¸ã¾ãˆãŸå›ç­”ã‚’ã•ã›ã‚‹ãŸã‚ã€å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã®ãƒ­ãƒ¼ãƒ‰ã‚„ã‚¯ã‚¨ãƒªã€æ›´æ–°ã®ãŸã‚ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹</td></tr><tr><td>Chains</td><td>LLMã«å¯¾ã—ã¦é€£ç¶šçš„ã«æŒ‡ç¤ºã‚’å‡ºã™ã“ã¨ãŒã§ãã‚‹</td></tr><tr><td>Agents</td><td>LLMã«æ¬¡ã«ã™ã¹ãã“ã¨ã®æ±ºå®šã€å®Ÿè¡Œã€çµæœã®è¦³æ¸¬ã‚’ç¹°ã‚Šè¿”ã•ã›ã€é«˜ãƒ¬ãƒ™ãƒ«ã®æŒ‡ç¤ºã«å¿œãˆã•ã›ã‚‹ã“ã¨ãŒã§ãã‚‹</td></tr><tr><td>Callbacks</td><td>Chainã®éç¨‹ã‚’è¨˜éŒ²ã™ã‚‹ã“ã¨ãŒã§ãã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ‡ãƒãƒƒã‚°ãƒ»è©•ä¾¡ã‚’ã—ã‚„ã™ãã™ã‚‹</td></tr></tbody></table></div></details><h3 id="21-LlamaIndex"><a href="#21-LlamaIndex" class="headerlink" title="[21] LlamaIndex"></a>[21] LlamaIndex</h3><p><a href="https://gpt-index.readthedocs.io/en/latest/index.html">LlamaIndex</a>ã¯ã€å¤§é‡ã®æ–‡æ›¸ç­‰ã‹ã‚‰è³ªå•ã«é–¢é€£ã™ã‚‹å†…å®¹ã‚’æŠ½å‡ºã—ã€ãã®å†…å®¹ã«åŸºã¥ã„ã¦LLMã«å›ç­”ã•ã›ã‚‹ã¨ã„ã£ãŸã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>ã“ã®å ´åˆã€ã¾ãšå¤§é‡ã®æ–‡æ›¸ã‚’ãƒ™ã‚¯ãƒˆãƒ«åŒ–ã—ã¦ä¿æŒã—ã¦ãŠãã¾ã™ã€‚è³ªå•æ–‡ãŒæ¥ãŸã‚‰ã€ãƒ™ã‚¯ãƒˆãƒ«ã¨ã®é¡ä¼¼åº¦ã‚’ã‚‚ã¨ã«é–¢é€£ã™ã‚‹æ–‡ç« ã‚’æŠ½å‡ºã—ã€</p><p>ãã®å†…å®¹ã‚’ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«å«ã‚ã¦LLMã«å›ç­”ã•ã›ã‚‹ã¨ã„ã†æµã‚Œã«ãªã‚Šã¾ã™ã€‚</p><p>LlamaIndexã‚’ç”¨ã„ã‚‹ã“ã¨ã§ã€</p><ul><li>å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿</li><li>Indexã®ä½œæˆ</li><li>ã‚¯ã‚¨ãƒªã§é–¢é€£ãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡º</li></ul><p>ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><h3 id="22-Cosmos-DB"><a href="#22-Cosmos-DB" class="headerlink" title="[22] Cosmos DB"></a>[22] Cosmos DB</h3><p><a href="https://learn.microsoft.com/ja-jp/azure/cosmos-db/introduction">Cosmos DB</a>ã¯ã€ãƒãƒ£ãƒƒãƒˆå½¢å¼ã®LLMã‚’ç”¨ã„ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãŠã„ã¦ã€ä¼šè©±å±¥æ­´ã‚’ä¿å­˜ã™ã‚‹å ´åˆã«ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚ Cosmos DBã¯Azureã®ãƒ•ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ‰ãªNoSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã™ã€‚</p><p><a href="https://qiita.com/nohanaga/items/18baccb843b4148e6a77#3-%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E5%B1%A5%E6%AD%B4%E3%81%AE%E6%A4%9C%E7%B4%A2azure-cache-for-redis">ã“ã¡ã‚‰ã®è¨˜äº‹</a>ã§ã¯ã€å®Ÿéš›ã«Cosmos DBã‚’ç”¨ã„ã¦ãƒãƒ£ãƒƒãƒˆã®å±¥æ­´ã‚’ä¿å­˜ã™ã‚‹ä¾‹ãŒç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã™ã®ã§ã”å‚ç…§ãã ã•ã„ã€‚</p><h3 id="23-Azure-Cache-for-Redis"><a href="#23-Azure-Cache-for-Redis" class="headerlink" title="[23] Azure Cache for Redis"></a>[23] Azure Cache for Redis</h3><p><a href="https://azure.microsoft.com/products/cache">Azure Cache for Redis</a>ã‚‚ä¼šè©±å±¥æ­´ã‚’ä¿å­˜ã™ã‚‹éš›ã«åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚é€šå¸¸ã¯ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒæƒ³å®šã•ã‚Œã¾ã™ãŒã€ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ã®æ©Ÿèƒ½ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§NoSQLã®DBã¨ã—ã¦ã‚‚åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™</p><p>ï¼ˆ<a href="https://qiita.com/nohanaga/items/18baccb843b4148e6a77#3-%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E5%B1%A5%E6%AD%B4%E3%81%AE%E6%A4%9C%E7%B4%A2azure-cache-for-redis">å‚è€ƒ</a>ï¼‰ã€‚</p><h3 id="24-Semantic-Kernel"><a href="#24-Semantic-Kernel" class="headerlink" title="[24] Semantic Kernel"></a>[24] Semantic Kernel</h3><p><a href="https://github.com/microsoft/semantic-kernel">Semantic Kernel(SK)</a>ã¯ã€MicrosoftãŒé–‹ç™ºã—ã¦ã„ã‚‹OSSã®ã‚µãƒ¼ãƒ“ã‚¹ã§ã€LLMã¨å¾“æ¥ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã‚’ç°¡å˜ã«çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã€LLMã‚’ã‚¢ãƒ—ãƒªã«çµ±åˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>SKã§ã¯ã€LLMã‚’ç‰¹å®šã®ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã™ã‚‹é–¢æ•°(Semantic Function)ã¨ã—ã¦æ‰±ã„ã€å¾“æ¥ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã®é–¢æ•°(Native Function)ã¨åˆã‚ã›ã¦ã€ã€Œã‚¹ã‚­ãƒ«ã€ã¨ã„ã†æ çµ„ã¿ã§æ‰±ã„ã¾ã™ã€‚ãã—ã¦ã€ã“ã‚Œã‚‰ã®ã‚¹ã‚­ãƒ«ã‚’ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³åŒ–ã—ã¦ã¾ã¨ã‚ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚</p><p>ã•ã‚‰ã«ãƒ—ãƒ©ãƒ³ãƒŠãƒ¼ã¨ã„ã†æ©Ÿèƒ½ã§ã¯ã€ç™»éŒ²ã•ã‚ŒãŸã‚¹ã‚­ãƒ«ã‚’ä½¿ã£ã¦è‡ªå‹•ã§ã‚¿ã‚¹ã‚¯å®Ÿè¡Œã®ãŸã‚ã®ã‚¹ã‚­ãƒ«ã®é¸æŠãƒ»å®Ÿè¡Œé †ã‚’è€ƒãˆã¦ãã‚Œã¾ã™ã€‚</p><h3 id="25-Guardrails-AI"><a href="#25-Guardrails-AI" class="headerlink" title="[25] Guardrails AI"></a>[25] Guardrails AI</h3><p><a href="https://shreyar.github.io/guardrails/">Guardrails AI</a>ã¯LLMã®å‡ºåŠ›ã«å¯¾ã—ã¦ã€æ§‹é€ æ¤œè¨¼ã€å‹æ¤œè¨¼ã€å“è³ªæ¤œè¨¼ã‚’è¡Œã†ã“ã¨ãŒã§ãã‚‹Pythonãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚</p><p>Guardrails AIã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªå‡ºåŠ›æ¤œè¨¼æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚</p><ul><li>ç”Ÿæˆã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆã«åã‚ŠãŒãªã„ã‹ã€ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã«ãƒã‚°ãŒãªã„ã‹ãªã©ã®æ„å‘³çš„ãªæ¤œè¨¼ã‚’è¡Œã†</li><li>ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¤±æ•—ã—ãŸå ´åˆã€ä¿®æ­£ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆLLMã«å†ã³ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å…¥åŠ›ã™ã‚‹ç­‰ï¼‰ã‚’å®Ÿè¡Œã™ã‚‹</li><li>æ§‹é€ ã‚„å‹ï¼ˆJSONãªã©ï¼‰ã®æ¤œè¨¼ã‚’è¡Œã†</li></ul><h2 id="LLMã‚·ã‚¹ãƒ†ãƒ æ§‹æˆä¾‹"><a href="#LLMã‚·ã‚¹ãƒ†ãƒ æ§‹æˆä¾‹" class="headerlink" title="LLMã‚·ã‚¹ãƒ†ãƒ æ§‹æˆä¾‹"></a>LLMã‚·ã‚¹ãƒ†ãƒ æ§‹æˆä¾‹</h2><p>ã“ã‚Œã¾ã§ã€LLMã«å¯¾ã™ã‚‹MLOpsãƒãƒ¼ãƒ ã®èª²é¡Œã‚„ã‚„ã‚‹ã¹ãã“ã¨ã‚’ä¸­å¿ƒã«èª¬æ˜ã—ã¾ã—ãŸã€‚ã“ã“ã‹ã‚‰ã¯ã€LLMã®å…·ä½“çš„ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‹ã‚‰ç†è§£ã‚’æ·±ã‚ã¦ã„ãŸã ãã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã€LLMã‚·ã‚¹ãƒ†ãƒ ã®æ§‹æˆä¾‹ã‚’ç´¹ä»‹ã—ã¦ã„ãã¾ã™ã€‚</p><p>æœ¬ç« ã§ã¯ã€LLMã‚·ã‚¹ãƒ†ãƒ ã®æ§‹æˆä¾‹ã‚’ã€Œã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã«ä¾å­˜ã—ãªã„æ§‹æˆä¾‹ã€ã¨ã€Œã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç”¨ã„ãŸæ§‹æˆä¾‹ã€ã«åˆ†ã‘ã¦ã”ç´¹ä»‹ã—ã¾ã™ã€‚</p><p>ã„ãšã‚Œã®ä¾‹ã‚‚ã€ç¤¾å†…æ–‡æ›¸ã‚„Webä¸Šã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç­‰ã‚’ãƒãƒ£ãƒƒãƒˆå½¢å¼ã§æ¤œç´¢ã§ãã‚‹ã‚ˆã†ãªã‚·ã‚¹ãƒ†ãƒ ã®æ§‹æˆä¾‹ã§ã™ã€‚</p><h3 id="ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã«ä¾å­˜ã—ãªã„æ§‹æˆä¾‹"><a href="#ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã«ä¾å­˜ã—ãªã„æ§‹æˆä¾‹" class="headerlink" title="ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã«ä¾å­˜ã—ãªã„æ§‹æˆä¾‹"></a>ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã«ä¾å­˜ã—ãªã„æ§‹æˆä¾‹</h3><p>ä»¥ä¸‹ã¯LLMã‚’ç”¨ã„ãŸãƒãƒ£ãƒƒãƒˆã«ã‚ˆã‚‹æ–‡æ›¸æ¤œç´¢ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹æˆä¾‹ã§ã™ã€‚</p><p>ç‰¹å®šã®ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã«ä¾å­˜ã›ãšã€å¯èƒ½ãªé™ã‚ŠOSSã§æ§‹æˆã™ã‚‹éš›ã®æ§‹æˆæ¡ˆã‚’è€ƒãˆã¦ã¿ã¾ã—ãŸã€‚</p><img src="/images/20230913a/LLMæ§‹æˆä¾‹5.png" alt="LLMæ§‹æˆä¾‹5" width="921" height="416" loading="lazy"><ul><li>â‘ UI<ul><li>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®å…¥åŠ›ã‚’ãƒãƒ£ãƒƒãƒˆå½¢å¼ã§å—ã‘ä»˜ã‘ã‚‹</li><li>ãƒãƒ£ãƒƒãƒˆå½¢å¼ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«<a href="https://github.com/oobabooga/text-generation-webui">Text generation web UI</a>ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’åˆ©ç”¨</li><li>ã‚ã‚‰ã‚†ã‚‹LLMã«å¯¾å¿œã—ã¦ã„ã‚‹ãŸã‚ã€ãƒ¢ãƒ‡ãƒ«ã®äº¤æ›ç­‰ãŒã‚¹ãƒ ãƒ¼ã‚ºã«è¡Œãˆã‚‹</li></ul></li><li>â‘¡å‰å‡¦ç†<ul><li>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã¨ã„ã†æ”»æ’ƒã‚’é˜²ãå½¹å‰²ã‚’æŒã¤</li><li>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã¨ã¯ã€ã€ŒLLMã«å¯¾ã—ã¦ç‰¹æ®Šãªè³ªå•ã‚’ã™ã‚‹ã“ã¨ã§ã€LLMãŒæŒã¤æ©Ÿå¯†æƒ…å ±ã‚„éå…¬é–‹ãƒ‡ãƒ¼ã‚¿ã‚’ä¸æ­£ã«å¼•ãå‡ºã™æ”»æ’ƒã€ã‚’æŒ‡ã™</li><li>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®å…¥åŠ›ã‚’ä½•ã‚‰ã‹ã®å½¢ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ãŒã€ç¢ºå›ºãŸã‚‹æ‰‹æ³•ã¯æœªã ç„¡ã„</li><li>ç¾çŠ¶ã€å‰å‡¦ç†éƒ¨ã¯æ¦‚å¿µã¨ã—ã¦å›³ç¤ºã—ã¦ã„ã‚‹ãŒã€ä»Šå¾Œå¿…è¦ã«ãªã£ã¦ãã‚‹ã¨è€ƒãˆã‚‰ã‚Œã‚‹</li><li>ã“ã®å‰å‡¦ç†éƒ¨åˆ†ã¯ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆéƒ¨ã«ã¾ã¨ã‚ã¦ã‚‚è‰¯ã„</li></ul></li><li>â‘¢ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ<ul><li>ã“ã“ã§ã¯å…¥åŠ›ã•ã‚ŒãŸè³ªå•ã‹ã‚‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ç”Ÿæˆã™ã‚‹</li><li>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆã®ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦ã€<a href="https://github.com/hwchase17/langchain">LangChain</a>ã‚„<a href="https://github.com/jerryjliu/llama_index">LlamaIndex</a>ãŒä»£è¡¨çš„</li><li>ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã†ã“ã¨ã§ã€ã€Œé•·ã„æ–‡ç« ã‚’ãƒ™ã‚¯ãƒˆãƒ«åŒ–ã—ã¦ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«å«ã‚ã‚‹ã€ã‚„ã€Œãƒ™ã‚¯ãƒˆãƒ«DBã‹ã‚‰æ¤œç´¢ã—ãŸã„æ–‡ç« ã‚’æŠ½å‡ºã—ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«å«ã‚ã‚‹ã€ç­‰ã®å‡¦ç†ãŒå®Ÿè£…ã§ãã‚‹</li></ul></li><li>â‘£ãƒ™ã‚¯ãƒˆãƒ«DB<ul><li>ãƒ™ã‚¯ãƒˆãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’æ‰±ãˆã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹</li><li>ç¤¾å†…æ–‡æ›¸ãªã©ã€æ§˜ã€…ãªãƒ†ã‚­ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ãƒ™ã‚¯ãƒˆãƒ«åŒ–ã—ã€å¾—ã‚‰ã‚ŒãŸãƒ™ã‚¯ãƒˆãƒ«ã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«æ ¼ç´ã™ã‚‹</li><li>æ¤œç´¢ã™ã‚‹æ™‚ã¯ã€æ¤œç´¢ã—ãŸã„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®ãƒ™ã‚¯ãƒˆãƒ«ã¨é¡ä¼¼ã®ãƒ™ã‚¯ãƒˆãƒ«ã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰æ¤œç´¢ã™ã‚‹</li><li>ãƒ™ã‚¯ãƒˆãƒ«DBãƒ»å…¨æ–‡æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã¨ã—ã¦ã€<a href="https://github.com/chroma-core/chroma">Chroma</a>ã‚„<a href="https://www.elastic.co/jp/elasticsearch/">Elasticsearch</a>ç­‰ãŒæŒ™ã’ã‚‰ã‚Œã‚‹</li></ul></li><li>â‘¤LLM<ul><li>è‡ªåŠ›ã§ãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã—ãŸãƒ¢ãƒ‡ãƒ«ã‚„ãƒ—ãƒ­ãƒ—ãƒ©ã‚¤ã‚¨ã‚¿ãƒªãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹</li></ul></li><li>â‘¥å¾Œå‡¦ç†<ul><li>LLMã®å‡ºåŠ›ã®å“è³ªã‚’ä¿ã¤ãŸã‚ã«ã€å‡ºåŠ›ã«å¾Œå‡¦ç†ã‚’æ–½ã™</li><li><a href="https://shreyar.github.io/guardrails/">Guardrails AI</a>ã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã†ã¨ã€ç”Ÿæˆã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆã«åã‚ŠãŒãªã„ã‹ã€ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã«ãƒã‚°ãŒãªã„ã‹ãªã©ã‚’æ¤œè¨¼ã™ã‚‹ã“ã¨ãŒã§ãã‚‹</li><li>ã“ã®å¾Œå‡¦ç†éƒ¨åˆ†ã¯ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆéƒ¨ã«ã¾ã¨ã‚ã¦ã‚‚è‰¯ã„</li></ul></li></ul><h3 id="ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç”¨ã„ãŸæ§‹æˆä¾‹"><a href="#ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç”¨ã„ãŸæ§‹æˆä¾‹" class="headerlink" title="ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç”¨ã„ãŸæ§‹æˆä¾‹"></a>ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç”¨ã„ãŸæ§‹æˆä¾‹</h3><p>ä¸Šè¨˜ã®ã€ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã«ä¾å­˜ã—ãªã„ãƒãƒ£ãƒƒãƒˆã«ã‚ˆã‚‹æ–‡æ›¸æ¤œç´¢ã‚·ã‚¹ãƒ†ãƒ ã«ä¼¼ãŸã‚‚ã®ã‚’ä¸‰å¤§ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆAzure, AWS, GCPï¼‰ã§æ§‹æˆã™ã‚‹å ´åˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><h4 id="Azure"><a href="#Azure" class="headerlink" title="Azure"></a>Azure</h4><p>Azureã«ãŠã‘ã‚‹LLMã‚’æ´»ç”¨ã—ãŸã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã®ç‰¹å¾´ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚</p><ul><li><a href="https://azure.microsoft.com/ja-jp/products/cognitive-services/openai-service">Azure OpenAI Service</a>ã«ã‚ˆã‚Šã€OpenAIãŒæä¾›ã—ã¦ã„ã‚‹GPT-4ã‚„GPt-3.5ã€Codexç­‰ãŒåˆ©ç”¨å¯èƒ½</li><li>æ–‡æ›¸æ¤œç´¢ã«ã¯<a href="https://azure.microsoft.com/ja-jp/products/search">Azure Cognitive Search</a>ã¨ã„ã†ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½¿ã†ã“ã¨ã§ã€PDFã‚„HTML,Microsoft Officeå½¢å¼ãªã©æ§˜ã€…ãªãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‹ã‚‰æ¤œç´¢å¯èƒ½</li><li>OpenAIã®APIã¨æ¯”ã¹ã¦ã€ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã€ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã®å¯ç”¨æ€§ã€è²¬ä»»ã‚ã‚‹AIã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼å‡¦ç†ãªã©ã®æ©Ÿèƒ½ãŒåˆ©ç”¨å¯èƒ½</li></ul><p>â€»ãŸã ã—ã€6&#x2F;27ç¾åœ¨ã€æ–°è¦ã®åˆ©ç”¨è€…ã¯ãƒ¢ãƒ‡ãƒ«ã®ãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’è¡Œã†ã“ã¨ãŒã§ããªã„ç‚¹ã«æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚</p><details><summary>æ§‹æˆå›³</summary><img src="/images/20230913a/azure_arch.png" alt="azure_arch" width="999" height="475" loading="lazy"></details><h4 id="AWS"><a href="#AWS" class="headerlink" title="AWS"></a>AWS</h4><p>AWSã«ãŠã‘ã‚‹LLMã‚’æ´»ç”¨ã—ãŸã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã®ç‰¹å¾´ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚</p><ul><li>AWSç‹¬è‡ªã®LLMã§ã‚ã‚‹<a href="https://aws.amazon.com/jp/bedrock/titan/">Amazon Titan</a>ã‚„ãã‚Œã‚‰ã‚’APIçµŒç”±ã§åˆ©ç”¨ã§ãã‚‹<a href="https://aws.amazon.com/jp/bedrock/">Amazon Bedrock</a>ã‚’ç”¨ã„ã¦é–‹ç™ºãŒå¯èƒ½</li><li>LangChainã‚’å®Ÿè¡Œã™ã‚‹ã‚µãƒ¼ãƒãƒ¼ã¨ã—ã¦Lambdaã‚’æ´»ç”¨ã—ã€ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ãªã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰å¯èƒ½</li><li>æ–‡æ›¸æ¤œç´¢ã«ã¯<a href="https://aws.amazon.com/jp/kendra/">Amazon Kendra</a>ã¨ã„ã†ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½¿ã†ã“ã¨ã§ã€S3ä¸Šã®PDFã‚„HTML,Microsoft Officeå½¢å¼ãªã©æ§˜ã€…ãªãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‹ã‚‰æ¤œç´¢å¯èƒ½</li><li>Amazon SageMakerã¨çµ±åˆã•ã‚Œã¦ãŠã‚Šã€è¤‡æ•°ãƒ¢ãƒ‡ãƒ«ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ã®å®Ÿé¨“ã‚„åŸºç›¤ãƒ¢ãƒ‡ãƒ«ã‚’å¤§è¦æ¨¡ã«ç®¡ç†ã™ã‚‹ãŸã‚ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ç­‰ã®æ©Ÿèƒ½ãŒåˆ©ç”¨å¯èƒ½</li></ul><details><summary>æ§‹æˆå›³</summary><img src="/images/20230913a/AWS_arch.png" alt="AWS_arch" width="1200" height="835" loading="lazy"></details><h4 id="GCP"><a href="#GCP" class="headerlink" title="GCP"></a>GCP</h4><p>GCPã«ãŠã‘ã‚‹LLMã‚’æ´»ç”¨ã—ãŸã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã®ç‰¹å¾´ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚</p><ul><li>LLMã®ãƒ¢ãƒ‡ãƒ«ã«ã¯ã€<a href="https://cloud.google.com/vertex-ai/docs/start/explore-models">Model Garden</a>ã«ã¦Googleè£½ã®LLMã§ã‚ã‚‹PaLMã€Imagenã€Codeyã€Chirpç­‰ãŒåˆ©ç”¨å¯èƒ½</li><li>æ–‡æ›¸æ¤œç´¢ï¼ˆã‚°ãƒ©ã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ï¼‰ã«ã¯<a href="https://cloud.google.com/vertex-ai/docs/generative-ai/embeddings/get-text-embeddings">Vertex AI Embeddings for Text</a>ã¨<a href="https://cloud.google.com/vertex-ai/docs/matching-engine/overview?hl=ja">Vertex AI Matching Engine</a>ã‚’ä½¿ã†ã“ã¨ã§ã€å¤–éƒ¨ã®ãƒ“ã‚¸ãƒã‚¹ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰æ‰€æœ›ã®æ–‡æ›¸ã‚’æ¤œç´¢å¯èƒ½</li><li><a href="https://cloud.google.com/vertex-ai/docs/generative-ai/learn/generative-ai-studio">Generative AI Studio</a>ã¨ã„ã†é–‹ç™ºç’°å¢ƒãŒç”¨æ„ã•ã‚Œã¦ãŠã‚Šã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®è¨­è¨ˆ&#x2F;ãƒ†ã‚¹ãƒˆã€åŸºç›¤ãƒ¢ãƒ‡ãƒ«ã®ãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ãŒã§ãã‚‹</li></ul><details><summary>æ§‹æˆå›³</summary><p>è¨˜äº‹åŸ·ç­†ç¾åœ¨ï¼ˆ2023å¹´6æœˆ14æ—¥ï¼‰GCPã«ãŠã‘ã‚‹ã€LLMã‚’å«ã‚€æ§‹æˆä¾‹ã¯è¦‹å½“ãŸã‚Šã¾ã›ã‚“ã§ã—ãŸãŒã€<br>ä»¥ä¸‹ã«ã‚°ãƒ©ã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆ&#x3D;LLMãƒ¢ãƒ‡ãƒ«ãŒLLMå¤–éƒ¨ã®ãƒ‡ãƒ¼ã‚¿ã«æ¥ç¶šã™ã‚‹ã“ã¨ï¼‰ã®æ§‹æˆã®æ¦‚ç•¥ã‚’ç¤ºã—ã¾ã™ã€‚</p><img src="/images/20230913a/GCP_arch.png" alt="GCP_arch" width="1200" height="676" loading="lazy"><p>å¼•ç”¨å…ƒ: <a href="https://cloud.google.com/blog/ja/products/ai-machine-learning/how-to-use-grounding-for-your-llms-with-text-embeddings">Google Cloud Japan ãƒ–ãƒ­ã‚°</a></p></details><h2 id="ãŠã‚ã‚Šã«"><a href="#ãŠã‚ã‚Šã«" class="headerlink" title="ãŠã‚ã‚Šã«"></a>ãŠã‚ã‚Šã«</h2><p>æœ¬è¨˜äº‹ã§ã¯ã€ã€ŒLLMé–‹ç™ºã®ãŸã‚ã«MLOpsãƒãƒ¼ãƒ ãŒã‚„ã‚‹ã¹ãã“ã¨ã€ã¨ã„ã†ãƒ†ãƒ¼ãƒã§LLMã®MLOpsã«é–¢é€£ã™ã‚‹éƒ¨åˆ†ã‚’å¹…åºƒãã”ç´¹ä»‹ã—ã¾ã—ãŸã€‚</p><p>ã“ã‚Œã‹ã‚‰LLMé–‹ç™ºã‚’æ¤œè¨ã—ã¦ã„ã‚‹æ–¹ã€…ã‚„MLOpsã«æºã‚ã£ã¦ã„ã‚‹æ–¹ã€…ã®å‚è€ƒã¨ãªã‚Œã°å¹¸ã„ã§ã™ã€‚</p><p><a href="/articles/20230914a/">ã€LLMOpsã€‘LLMã®å®Ÿé¨“ç®¡ç†ã«TruLens-Evalã‚’ä½¿ã£ã¦ã¿ãŸ</a>ã®è¨˜äº‹ã‚‚å…¬é–‹ã•ã‚Œã¾ã—ãŸã€‚åˆã‚ã›ã¦ã”è¦§ãã ã•ã„ã€‚</p><p>ï¼ˆ2023å¹´9æœˆ19æ—¥è¿½è¨˜ï¼‰é–¢é€£ã—ã¦ <a href="/articles/20230919a/">Prompt Flowã§ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè©•ä¾¡ã®ç®¡ç†ã‚’è¡Œã†</a> ã¨ã„ã†è¨˜äº‹ã‚‚å…¬é–‹ã—ã¾ã—ãŸã€‚</p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/DataScience/">DataScience</category>
      
      
      <category domain="https://future-architect.github.io/tags/%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%B3/">ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³</category>
      
      <category domain="https://future-architect.github.io/tags/MLOps/">MLOps</category>
      
      <category domain="https://future-architect.github.io/tags/LLM/">LLM</category>
      
      <category domain="https://future-architect.github.io/tags/%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%B32023/">ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³2023</category>
      
      
      <comments>https://future-architect.github.io/articles/20230913a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>LLMé–‹ç™ºã®ãƒ•ãƒ­ãƒ¼</title>
      <link>https://future-architect.github.io/articles/20230912a/</link>
      <guid>https://future-architect.github.io/articles/20230912a/</guid>
      <pubDate>Mon, 11 Sep 2023 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot;</description>
          
        
      
      
      
      <content:encoded><![CDATA[<h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>ã“ã‚“ã«ã¡ã¯ã€SAIG&#x2F;MLOpsãƒãƒ¼ãƒ ã§ã‚¢ãƒ«ãƒã‚¤ãƒˆã‚’ã—ã¦ã„ã‚‹æ¿é‡ãƒ»å¹³é‡ã§ã™ã€‚</p><p>ä»Šå›ã¯ã€æ˜¨ä»Šæ³¨ç›®ã•ã‚Œã¦ã„ã‚‹å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«(LLM)ã®é–‹ç™ºã«ãŠã„ã¦MLOpsãƒãƒ¼ãƒ ãŒã‚„ã‚‹ã¹ãã“ã¨ã‚’è€ƒãˆã‚‹ãŸã‚ã€ã¾ãšã¯LLMé–‹ç™ºã®æµã‚Œã‚’èª¿æŸ»ãƒ»æ•´ç†ã—ã¾ã—ãŸã€‚</p><p>æœ¬è¨˜äº‹ã¯ãã®å†…å®¹ã‚’ã€ŒLLMé–‹ç™ºã®ãƒ•ãƒ­ãƒ¼ã€ã¨ã„ã†é¡Œç›®ã§ã¾ã¨ã‚ãŸã‚‚ã®ã§ã™ã€‚LLMã‚’æœ¬ç•ªé‹ç”¨ã™ã‚‹ã¨ãã«è€ƒæ…®ã™ã¹ãã“ã¨ã€LLMé–‹ç™ºãƒ»é‹ç”¨ã‚’æ”¯æ´ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã‚„ãƒ„ãƒ¼ãƒ«ãƒ»LLMã‚·ã‚¹ãƒ†ãƒ ã®æ§‹æˆä¾‹ãªã©ã«ã¤ã„ã¦ã¯ã€ã€Œ<a href="/articles/20230913a/">LLMé–‹ç™ºã§MLOpsãƒãƒ¼ãƒ ãŒã‚„ã‚‹ã¹ãã“ã¨</a>ã€ã¨é¡Œã—ã¦åˆ¥è¨˜äº‹ã§ã”ç´¹ä»‹ã—ã¦ã„ã¾ã™ã®ã§ã€ãœã²ä½µã›ã¦ã”è¦§ãã ã•ã„ã€‚</p><p>ã“ã“ã§ã®LLMé–‹ç™ºã¨ã¯ã€ã€ŒLLMè‡ªä½“ã®é–‹ç™ºã€ãŠã‚ˆã³ã€ŒLLMã‚’æ´»ç”¨ã—ãŸã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã€ã®ä¸¡æ–¹ã‚’å«ã¿ã¾ã™ã€‚ã¾ãŸã€ã€ŒLLMè‡ªä½“ã®é–‹ç™ºã€ã¯å­¦ç¿’ãƒ•ã‚§ãƒ¼ã‚ºã€ã€ŒLLMã‚’æ´»ç”¨ã—ãŸã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã€ã¯æ¨è«–ãƒ•ã‚§ãƒ¼ã‚ºã€ã¨ã—ã¦è¨˜è¼‰ã—ã¦ã„ã¾ã™ã€‚</p><p>æœ¬è¨˜äº‹ã§ã¯LLMé–‹ç™ºã«ãŠã‘ã‚‹å„ãƒ•ã‚§ãƒ¼ã‚ºã®ãƒ•ãƒ­ãƒ¼ã‚’è§£èª¬ã—ã¾ã™ã€‚</p><h1 id="LLMé–‹ç™ºã®ãƒ•ãƒ­ãƒ¼"><a href="#LLMé–‹ç™ºã®ãƒ•ãƒ­ãƒ¼" class="headerlink" title="LLMé–‹ç™ºã®ãƒ•ãƒ­ãƒ¼"></a>LLMé–‹ç™ºã®ãƒ•ãƒ­ãƒ¼</h1><p>LLMé–‹ç™ºã¯ä¸‹å›³ã®ã‚ˆã†ã«ã€LLMè‡ªä½“ã®é–‹ç™ºï¼ˆ<a href="#1-%E3%83%A2%E3%83%87%E3%83%AB%E3%82%92%E7%94%A8%E6%84%8F%E3%81%99%E3%82%8B%E5%AD%A6%E7%BF%92">1.ãƒ¢ãƒ‡ãƒ«ã‚’ç”¨æ„ã™ã‚‹ï¼ˆå­¦ç¿’ï¼‰</a>ï¼‰ã¨LLMã‚’æ´»ç”¨ã—ãŸã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºï¼ˆ<a href="#2-%E3%83%A2%E3%83%87%E3%83%AB%E3%81%AE%E8%83%BD%E5%8A%9B%E3%82%92%E5%BC%95%E3%81%8D%E5%87%BA%E3%81%99%E6%8E%A8%E8%AB%96">2.ãƒ¢ãƒ‡ãƒ«ã®èƒ½åŠ›ã‚’å¼•ãå‡ºã™ï¼ˆæ¨è«–ï¼‰</a>ï¼‰ã®å¤§ãã2ã¤ã®ãƒ•ã‚§ãƒ¼ã‚ºã«åˆ†ã‘ã‚‰ã‚Œã¾ã™ã€‚</p><img src="/images/20230912a/LLM_dev.png" alt="LLM_dev.png" width="960" height="540" loading="lazy"><p>ä»¥ä¸‹ã€å„ãƒ•ã‚§ãƒ¼ã‚ºã«ã¤ã„ã¦è©³ã—ãè§£èª¬ã—ã¾ã™ã€‚</p><h2 id="1-ãƒ¢ãƒ‡ãƒ«ã‚’ç”¨æ„ã™ã‚‹ï¼ˆå­¦ç¿’ï¼‰"><a href="#1-ãƒ¢ãƒ‡ãƒ«ã‚’ç”¨æ„ã™ã‚‹ï¼ˆå­¦ç¿’ï¼‰" class="headerlink" title="1. ãƒ¢ãƒ‡ãƒ«ã‚’ç”¨æ„ã™ã‚‹ï¼ˆå­¦ç¿’ï¼‰"></a>1. ãƒ¢ãƒ‡ãƒ«ã‚’ç”¨æ„ã™ã‚‹ï¼ˆå­¦ç¿’ï¼‰</h2><p>ãƒ¢ãƒ‡ãƒ«ã‚’ç”¨æ„ã™ã‚‹ã«ã¯ã€å¤§ããåˆ†ã‘ã¦ä»¥ä¸‹ã®3ã¤ã®æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚</p><ul><li>(A) ã‚¼ãƒ­ã‹ã‚‰ãƒ¢ãƒ‡ãƒ«ã‚’å­¦ç¿’ã™ã‚‹</li><li>(B) å…¬é–‹æ¸ˆã¿ã®åŸºç›¤ãƒ¢ãƒ‡ãƒ«ã‹ã‚‰å­¦ç¿’ã™ã‚‹</li><li>(C) ãƒ—ãƒ­ãƒ—ãƒ©ã‚¤ã‚¨ã‚¿ãƒªãƒ¢ãƒ‡ãƒ«ã‚’åˆ©ç”¨ã™ã‚‹</li></ul><p>â€»ãƒ—ãƒ­ãƒ—ãƒ©ã‚¤ã‚¨ã‚¿ãƒªãƒ¢ãƒ‡ãƒ«ï¼šã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚„æ§‹é€ ç­‰ãŒéå…¬é–‹ãªãƒ¢ãƒ‡ãƒ«ã®ã“ã¨ã€‚<br>ï¼ˆä¾‹ï¼‰ChatGPT(GPT-3.5)ã‚„GPT-4ç­‰</p><p>ã©ã®æ–¹æ³•ã‚’ç”¨ã„ã¦LLMé–‹ç™ºã‚’è¡Œã†ã¹ãã‹ã«ã¤ã„ã¦ã¯ã€è¦ä»¶ã«å¿œã˜ã¦æ±ºå®šã—ã¾ã™ã€‚<br>å„æ–¹æ³•ã®ãƒ¡ãƒªãƒƒãƒˆãƒ»ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã«ã¤ã„ã¦ã¯ä¸‹è¡¨ã‚’ã”å‚è€ƒãã ã•ã„ã€‚</p><div class="scroll"><table><thead><tr><th></th><th>(A) ã‚¼ãƒ­ã‹ã‚‰ãƒ¢ãƒ‡ãƒ«ã‚’å­¦ç¿’ã™ã‚‹</th><th>(B) å…¬é–‹æ¸ˆã¿ã®åŸºç›¤ãƒ¢ãƒ‡ãƒ«ã‹ã‚‰å­¦ç¿’ã™ã‚‹</th><th>(C) ãƒ—ãƒ­ãƒ—ãƒ©ã‚¤ã‚¨ã‚¿ãƒªãƒ¢ãƒ‡ãƒ«ã‚’åˆ©ç”¨ã™ã‚‹</th></tr></thead><tbody><tr><td>ãƒ¡ãƒªãƒƒãƒˆ</td><td>ãƒ»ãƒ¢ãƒ‡ãƒ«æ§‹é€ ã‚’è‡ªç”±ã«é¸æŠå¯èƒ½<br>ãƒ»ä½¿ç”¨ã—ãŸå…¨ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’æŠŠæ¡å¯èƒ½</td><td>ãƒ»åŸºç›¤ãƒ¢ãƒ‡ãƒ«ä½œæˆã®ã‚³ã‚¹ãƒˆä¸è¦<br>ãƒ»æ§˜ã€…ãªå…¬é–‹åŸºç›¤ãƒ¢ãƒ‡ãƒ«ã‚’è©¦ã›ã‚‹</td><td>ãƒ»æ¨è«–ãƒªã‚½ãƒ¼ã‚¹ã®ç”¨æ„ãŒä¸è¦<br>ãƒ»æ±ç”¨çš„ãªã‚¿ã‚¹ã‚¯ã«ãŠã„ã¦é«˜å“è³ª</td></tr><tr><td>ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ</td><td>ãƒ»å­¦ç¿’ã«å¤§é‡ã®è¨ˆç®—ãƒªã‚½ãƒ¼ã‚¹ã®ç”¨æ„ãŒå¿…è¦<br>ãƒ»æ¨è«–ãƒªã‚½ãƒ¼ã‚¹ã®ç”¨æ„ãŒå¿…è¦</td><td>ãƒ»åŸºç›¤ãƒ¢ãƒ‡ãƒ«ã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã«ä¾å­˜<br>ãƒ»æ¨è«–ãƒªã‚½ãƒ¼ã‚¹ã®ç”¨æ„ãŒå¿…è¦</td><td>ãƒ»ã‚ªãƒ³ãƒ—ãƒ¬é‹ç”¨ãŒã§ããªã„<br>ãƒ»ãƒ¢ãƒ‡ãƒ«ãŒæ„å›³ã—ãªã„ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§æ›´æ–°ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹</td></tr></tbody></table></div><p>ä»¥ä¸‹ã€ãƒ¢ãƒ‡ãƒ«ã‚’ç”¨æ„ã™ã‚‹ãŸã‚ã®å„æ–¹æ³•ã®è©³ç´°ã‚’è§£èª¬ã—ã¦ã„ãã¾ã™ã€‚</p><h3 id="A-ã‚¼ãƒ­ã‹ã‚‰ãƒ¢ãƒ‡ãƒ«ã‚’å­¦ç¿’ã™ã‚‹"><a href="#A-ã‚¼ãƒ­ã‹ã‚‰ãƒ¢ãƒ‡ãƒ«ã‚’å­¦ç¿’ã™ã‚‹" class="headerlink" title="(A) ã‚¼ãƒ­ã‹ã‚‰ãƒ¢ãƒ‡ãƒ«ã‚’å­¦ç¿’ã™ã‚‹"></a>(A) ã‚¼ãƒ­ã‹ã‚‰ãƒ¢ãƒ‡ãƒ«ã‚’å­¦ç¿’ã™ã‚‹</h3><p>ChatGPT(GPT-3.5)ã¨å­¦ç¿’æ–¹æ³•ãŒåŒã˜InstructGPTã¨å‘¼ã°ã‚Œã‚‹ãƒ¢ãƒ‡ãƒ«ã®å­¦ç¿’æ–¹æ³•ã¯ã€è«–æ–‡ã¨ã—ã¦å…¬é–‹ã•ã‚Œã¦ãŠã‚Šã€ä¸‹å›³ã®ã‚ˆã†ãªãƒ•ãƒ­ãƒ¼ã§å­¦ç¿’ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p>â€»è«–æ–‡ãƒªãƒ³ã‚¯ã¯ã“ã¡ã‚‰ã§ã™ã€‚<br><a href="https://arxiv.org/abs/2203.02155">Training language models to follow instructions with human feedback</a></p><img src="/images/20230912a/flow_from_scratch.png" alt="flow_from_scratch" width="902" height="283" loading="lazy"><ul><li>â‘ å¤§é‡ã®ã‚³ãƒ¼ãƒ‘ã‚¹ã§å­¦ç¿’<ul><li>æœªå­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã«å¯¾ã—ã¦å¤§é‡ã®ã‚³ãƒ¼ãƒ‘ã‚¹ï¼ˆè‡ªç„¶è¨€èªã®æ–‡ï¼‰ã§å­¦ç¿’ã‚’è¡Œã„ã€åŸºç›¤ãƒ¢ãƒ‡ãƒ«ã‚’æ§‹ç¯‰</li><li>æ¬¡ã«æ¥ã‚‹å˜èªï¼ˆnext-tokenï¼‰ã‚’äºˆæ¸¬ã™ã‚‹ãƒ¢ãƒ‡ãƒ«ã¨ãªã‚‹ãŸã‚ã€ãã‚Œã£ã½ã„æ–‡ç« ã‚’ä½œæˆã§ãã‚‹</li><li>åŸºç›¤ãƒ¢ãƒ‡ãƒ«ã¯ã€è³ªå•ã«ç­”ãˆãŸã‚Šå¯¾è©±ã—ãŸã‚Šã™ã‚‹èƒ½åŠ›ãŒä¹ã—ã„</li></ul></li><li>â‘¡æ•™å¸«ã‚ã‚Šãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ï¼ˆSFTï¼‰<ul><li>åŸºç›¤ãƒ¢ãƒ‡ãƒ«ã«å¯¾ã—ã¦ã€ŒæŒ‡ç¤ºæ–‡ãƒ»ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ»ç†æƒ³ã®å›ç­”ã‚’äººåŠ›ã§é›†ã‚ãŸãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã€ã§ãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã™ã‚‹</li><li>äººåŠ›ã§é›†ã‚ãŸãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¨ã¯ã€<a href="https://huggingface.co/datasets/kunishou/databricks-dolly-15k-ja">ã“ã¡ã‚‰</a>ã«ã‚ã‚‹ã‚ˆã†ãªæŒ‡ç¤ºæ–‡(instruction)ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ(input)ã€ç†æƒ³ã®å›ç­”(output)ãŒã‚»ãƒƒãƒˆã«ãªã£ãŸã‚‚ã®</li><li>ãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã—ã¦å¾—ã‚‰ã‚Œã‚‹ãƒ¢ãƒ‡ãƒ«ã¯SFT(Supervised Fine-Tuning)ãƒ¢ãƒ‡ãƒ«ã¨ã„ã†</li><li>SFTãƒ¢ãƒ‡ãƒ«ã«ã¯ã€è³ªå•ã«ç­”ãˆãŸã‚Šå¯¾è©±ã—ãŸã‚Šã™ã‚‹ç­‰ã®ã‚¿ã‚¹ã‚¯å‡¦ç†èƒ½åŠ›ãŒã‚ã‚‹</li></ul></li><li>â‘¢äººé–“ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã«ã‚ˆã‚‹å¼·åŒ–å­¦ç¿’ï¼ˆRLHFï¼‰<ul><li>äººé–“ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã«ã‚ˆã‚‹å¼·åŒ–å­¦ç¿’ã®ã“ã¨ã‚’Reinforcement Learning from Human Feedback(RLHF)ã¨å‘¼ã¶</li><li>SFTãƒ¢ãƒ‡ãƒ«ã«å¯¾ã—ã¦ã€æ–‡ã®å“è³ªã‚’ã‚ˆã‚Šå‘ä¸Šã•ã›ã‚‹ãŸã‚ã«Rewardãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ç”¨ã—ã¦å¼·åŒ–å­¦ç¿’ã‚’è¡Œã†</li><li>Rewardãƒ¢ãƒ‡ãƒ«ã¨ã¯ã€æ–‡ç« ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€ãã®æ–‡ç« ã®è©•ä¾¡ã‚’æ•°å€¤ã¨ã—ã¦å‡ºåŠ›ã—ã¦ãã‚Œã‚‹ãƒ¢ãƒ‡ãƒ«ã®ã“ã¨</li><li>Rewardãƒ¢ãƒ‡ãƒ«ã¯äººé–“ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ç­‰ã‚’åˆ©ç”¨ã—ã¦åˆ¥é€”ä½œæˆã—ãªã‘ã‚Œã°ãªã‚‰ãªã„</li><li>SFTãƒ¢ãƒ‡ãƒ«ã¨æ¯”ã¹ã€äººé–“ã«ã¨ã£ã¦ã‚ˆã‚Šå¥½ã¾ã—ãæµæš¢ãªå‡ºåŠ›ãŒå¾—ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹</li></ul></li></ul><p>â‘ ã¾ã§å®Œäº†ã™ã‚‹ã¨ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«ç¶šãæ–‡ã‚’æ¬¡ã€…ã¨å‡ºåŠ›ã™ã‚‹ã ã‘ã®ãƒ¢ãƒ‡ãƒ«ãŒå®Œæˆã—ã¾ã™ã€‚</p><p>LLMé–‹ç™ºã«ã€ã¾ãšã“ã®ãƒ—ãƒ­ã‚»ã‚¹ã¯å¿…é ˆã§ã™ã€‚ã“ã®æ™‚ç‚¹ã§ã¯ã¾ã è¦ç´„ã‚„è³ªç–‘å¿œç­”ãªã©ã®ã‚¿ã‚¹ã‚¯ã«å¯¾ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ãŒè¡Œã‚ã‚Œã¦ã„ãªã„ãŸã‚ã€è¦ç´„ã‚„è³ªç–‘å¿œç­”ç­‰ã®ã‚¿ã‚¹ã‚¯ã‚’ã•ã›ã‚ˆã†ã¨ã—ã¦ã‚‚è¿”ç­”ãŒä¸å®‰å®šã§ã™ã€‚åŸºç›¤ãƒ¢ãƒ‡ãƒ«ã®å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã§<code>ã€Œæ—¥æœ¬ã®é¦–éƒ½ã¯ï¼Ÿæ±äº¬ã§ã™ã€‚ã€</code>ã‚„<code>ã€Œè¦ç´„ã—ã¦ãã ã•ã„ã€‚&quot;&quot;&quot;&lt;è¦ç´„ã—ãŸã„æ–‡æ›¸&gt;&quot;&quot;&quot;ã€‚ã€</code> ã®ã‚ˆã†ãªinstructionã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãŒä»˜ã„ã¦ã„ã‚‹ã‚‚ã®ã¯æ¥µã‚ã¦ç¨€ã§ã€ãªã«ã‹ç‰¹å®šã®ã‚¿ã‚¹ã‚¯ã‚’è§£ã‹ã›ã‚‹ãŸã‚ã®å­¦ç¿’ãŒã•ã‚Œã¦ã„ãªã„ã‹ã‚‰ã§ã™ã€‚</p><p>â‘¡ã¾ã§å®Œäº†ã™ã‚‹ã¨ã€è³ªå•ã«ç­”ãˆãŸã‚Šã€å¯¾è©±ã—ãŸã‚Šã™ã‚‹èƒ½åŠ›ãŒã¤ã„ãŸãƒ¢ãƒ‡ãƒ«ãŒå®Œæˆã—ã¾ã™ã€‚ã“ã®æ™‚ç‚¹ã§ã€åŸºæœ¬çš„ãªã‚¿ã‚¹ã‚¯ã‚’è¡Œã†ã®ã«æœ€ä½é™ã®ã“ã¨ã¯èº«ã«ã¤ã„ã¦ã„ã‚‹ãŸã‚ã€ã‚ˆã‚Šå®Ÿç”¨ã«è¿‘ã¥ãã¾ã™ã€‚ã“ã®ãƒ—ãƒ­ã‚»ã‚¹ã¯å¤§åŠã®ã‚±ãƒ¼ã‚¹ã§å¿…è¦ã ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚</p><p>â‘¢ã¾ã§å®Œäº†ã™ã‚‹ã¨ã€äººé–“ã«ã¨ã£ã¦ã‚ˆã‚Šå¥½ã¾ã—ã„å‡ºåŠ›ãŒã§ãã‚‹ãƒ¢ãƒ‡ãƒ«ãŒå®Œæˆã—ã¾ã™ã€‚ã“ã“ã¾ã§ã™ã‚‹ã‹å¦ã‹ã¯ã€è¦ä»¶ã‚„ãƒ¢ãƒ‡ãƒ«ã«è¡Œã‚ã›ãŸã„ã‚¿ã‚¹ã‚¯ã«ã‚ˆã£ã¦åˆ¤æ–­ã—ã¾ã™ã€‚</p><div class="note info" style="background: #e5f8e2; padding:16px; margin:24px 12px; border-radius:8px;">  <span class="fa fa-fw fa-check-circle"></span><p>ã‚¼ãƒ­ã‹ã‚‰ãƒ¢ãƒ‡ãƒ«ã‚’å­¦ç¿’ã™ã‚‹å ´åˆã«å¿…è¦ãªè¨ˆç®—ãƒªã‚½ãƒ¼ã‚¹ã®å‚è€ƒå€¤ã‚’ã”ç´¹ä»‹ã—ã¾ã™ã€‚</p><p>GPT-3ã«ä¼¼ãŸBLOOMã¨ã„ã†ãƒ¢ãƒ‡ãƒ«ã¯1760å„„ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒã£ã¦ãŠã‚Šã€<a href="https://bigscience.huggingface.co/blog/bloom">BLOOMã®ç™ºè¡¨è¨˜äº‹</a>ã§ã¯ã€å­¦ç¿’ã«<code>117æ—¥</code>æ›ã‹ã‚Šã€<code>300ä¸‡ãƒ¦ãƒ¼ãƒ­ï¼ˆç´„4.5å„„å††ï¼‰</code>ã‚‚ã®é‡‘éŠ­çš„ã‚³ã‚¹ãƒˆãŒæ›ã‹ã£ãŸã¨è¿°ã¹ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚</p><p>ãŸã ã—ã€LLMé–¢é€£ã®æŠ€è¡“ã®é€²æ­©ã¯æ—©ãã€å­¦ç¿’æ–¹æ³•ã‚’å·¥å¤«ã™ã‚‹ã“ã¨ã§å¤§å¹…ã«è¨ˆç®—ã‚³ã‚¹ãƒˆã‚’æ¸›ã‚‰ã—ãŸã‚Šã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ•°ãŒå°ã•ã„ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ã£ã¦ã‚‚é«˜ã„ç²¾åº¦ãŒå‡ºã›ãŸã‚Šç­‰ã€ã‚ˆã‚Šæ™‚é–“ã‚„ã‚³ã‚¹ãƒˆã‚’æŠ‘ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ãã¦ã„ã¾ã™ã€‚</p></div><h3 id="B-å…¬é–‹æ¸ˆã¿ã®åŸºç›¤ãƒ¢ãƒ‡ãƒ«ã‹ã‚‰å­¦ç¿’ã™ã‚‹"><a href="#B-å…¬é–‹æ¸ˆã¿ã®åŸºç›¤ãƒ¢ãƒ‡ãƒ«ã‹ã‚‰å­¦ç¿’ã™ã‚‹" class="headerlink" title="(B) å…¬é–‹æ¸ˆã¿ã®åŸºç›¤ãƒ¢ãƒ‡ãƒ«ã‹ã‚‰å­¦ç¿’ã™ã‚‹"></a>(B) å…¬é–‹æ¸ˆã¿ã®åŸºç›¤ãƒ¢ãƒ‡ãƒ«ã‹ã‚‰å­¦ç¿’ã™ã‚‹</h3><p>æœ€è¿‘ã§ã¯åŸºç›¤ãƒ¢ãƒ‡ãƒ«ãŒã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã§å…¬é–‹ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ãã¦ã„ã¾ã™ã€‚</p><p>å…¬é–‹ã•ã‚Œã¦ã„ã‚‹åŸºç›¤ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ç”¨ã™ã‚Œã°ã€ã€Œã‚¼ãƒ­ã‹ã‚‰LLMã‚’å­¦ç¿’ã™ã‚‹ã€ã®å­¦ç¿’ãƒ•ãƒ­ãƒ¼ã«ãŠã„ã¦å¤§ããªã‚³ã‚¹ãƒˆã‚’è¦ã™ã‚‹ã€Œâ‘ å¤§é‡ã®ã‚³ãƒ¼ãƒ‘ã‚¹ã§å­¦ç¿’ã€ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’ã‚¹ã‚­ãƒƒãƒ—ã§ãã¾ã™ã€‚</p><p>å…¬é–‹ã•ã‚Œã¦ã„ã‚‹åŸºç›¤ãƒ¢ãƒ‡ãƒ«ã‹ã‚‰ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ•ãƒ­ãƒ¼ã§è¿½åŠ å­¦ç¿’ã‚’è¡Œã„ã¾ã™ã€‚</p><img src="/images/20230912a/from_base_model.png" alt="from_base_model" width="899" height="280" loading="lazy"><ul><li>â‘ å…¬é–‹ã•ã‚Œã¦ã„ã‚‹åŸºç›¤ãƒ¢ãƒ‡ãƒ«ã®é¸å®š<ul><li>å•†ç”¨åˆ©ç”¨å¯èƒ½ãªã‚‚ã®ã¯ã€<a href="https://ai.meta.com/llama/">Llama 2 (ãƒ©ãƒãƒ„ãƒ¼)</a>ã‚„<a href="https://huggingface.co/rinna">rinna</a>, <a href="https://huggingface.co/cyberagent">OpenCALM</a>ãªã©ãŒã‚ã‚Šæ§˜ã€…ãªé¸æŠè‚¢ã‹ã‚‰é¸æŠã§ãã‚‹<ul><li>â€»å…¬é–‹æ¸ˆã¿ãƒ¢ãƒ‡ãƒ«ã®ä¸­ã§ã‚‚ã€<a href="https://rinna.co.jp/news/2023/05/20220531.html">rinna (japanese-gpt-neox-3.6b-instruction-ppo)</a>ã®ã‚ˆã†ã«ãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã‚„å¼·åŒ–å­¦ç¿’ãŒè¡Œã‚ã‚Œã¦ã„ã‚‹ã‚‚ã®ã‚‚ã‚ã‚Šã¾ã™</li></ul></li><li>ãƒ¢ãƒ‡ãƒ«é¸å®šã«ã¯ã€Œå…¬é–‹æ¸ˆã¿ã®åŸºç›¤ãƒ¢ãƒ‡ãƒ«ãŒå­¦ç¿’ã«ç”¨ã„ãŸãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã€ã‚„ã€Œãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ•°ã€ç­‰ã‚’å‚è€ƒã«ã™ã‚‹</li></ul></li><li>â‘¡æ•™å¸«ã‚ã‚Šãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ï¼ˆSFTï¼‰<ul><li>â€» <strong>(A)ã‚¼ãƒ­ã‹ã‚‰ãƒ¢ãƒ‡ãƒ«ã‚’å­¦ç¿’ã™ã‚‹</strong>ã¨åŒã˜</li></ul></li><li>â‘¢äººé–“ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã«ã‚ˆã‚‹å¼·åŒ–å­¦ç¿’ï¼ˆRLHFï¼‰<ul><li>â€» <strong>(A)ã‚¼ãƒ­ã‹ã‚‰ãƒ¢ãƒ‡ãƒ«ã‚’å­¦ç¿’ã™ã‚‹</strong>ã¨åŒã˜</li></ul></li></ul><div class="note info" style="background: #e5f8e2; padding:16px; margin:24px 12px; border-radius:8px;">  <span class="fa fa-fw fa-check-circle"></span><p>å…¬é–‹æ¸ˆã¿ã®åŸºç›¤ãƒ¢ãƒ‡ãƒ«ã‹ã‚‰å­¦ç¿’ã™ã‚‹å ´åˆã«å¿…è¦ãªè¨ˆç®—ãƒªã‚½ãƒ¼ã‚¹ã®å‚è€ƒå€¤ã‚’ã”ç´¹ä»‹ã—ã¾ã™ã€‚</p><p>ã‚¼ãƒ­ã‹ã‚‰å­¦ç¿’ã™ã‚‹å ´åˆã¨æ¯”ã¹ã€ãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã‹ã‚‰å§‹ã‚ã‚‹å ´åˆã¯åŠ¹ç‡çš„ãªãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°æ‰‹æ³•(Parameter-Efficient Fine-Tuning: PEFT)ãŒè¤‡æ•°ã‚ã‚Šã¾ã™ã€‚</p><p><a href="https://note.com/npaka/n/na5b8e6f749ce">ã“ã¡ã‚‰ã®äº‹ä¾‹</a>ã§ã¯LoRAã¨ã„ã†PEFTæ‰‹æ³•ã‚„8ãƒ“ãƒƒãƒˆé‡å­åŒ–ç­‰ã®ãƒ¡ãƒ¢ãƒªå‰Šæ¸›æ‰‹æ³•ã‚’é©ç”¨ã—ã€<code>VRAMä½¿ç”¨é‡:23.5GB</code>ã§1å°ã®GPUã§ãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ãŒã§ãã¦ã„ã¾ã™ã€‚</p></div><h3 id="C-ãƒ—ãƒ­ãƒ—ãƒ©ã‚¤ã‚¨ã‚¿ãƒªãƒ¢ãƒ‡ãƒ«ã‚’åˆ©ç”¨ã™ã‚‹"><a href="#C-ãƒ—ãƒ­ãƒ—ãƒ©ã‚¤ã‚¨ã‚¿ãƒªãƒ¢ãƒ‡ãƒ«ã‚’åˆ©ç”¨ã™ã‚‹" class="headerlink" title="(C) ãƒ—ãƒ­ãƒ—ãƒ©ã‚¤ã‚¨ã‚¿ãƒªãƒ¢ãƒ‡ãƒ«ã‚’åˆ©ç”¨ã™ã‚‹"></a>(C) ãƒ—ãƒ­ãƒ—ãƒ©ã‚¤ã‚¨ã‚¿ãƒªãƒ¢ãƒ‡ãƒ«ã‚’åˆ©ç”¨ã™ã‚‹</h3><p>OpenAIç­‰ã®APIçµŒç”±ã§å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ãƒ¢ãƒ‡ãƒ«ã‚’åˆ©ç”¨ã™ã‚‹æ–¹æ³•ã§ã™ã€‚<br>ç¾çŠ¶ã€LLMã‚’æ‰‹è»½ã«ç”¨æ„ã™ã‚‹ã«ã¯ã“ã®æ–¹æ³•ãŒä¸€ç•ªã§ã™ã€‚</p><img src="/images/20230912a/proprietary.png" alt="proprietary" width="757" height="257" loading="lazy"><p>ãã®ã¾ã¾ä½¿ã†ã“ã¨ã‚‚ã§ãã¾ã™ãŒã€APIçµŒç”±ã§ãƒ—ãƒ­ãƒ—ãƒ©ã‚¤ã‚¨ã‚¿ãƒªãƒ¢ãƒ‡ãƒ«ã‚’ãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚<br><a href="https://platform.openai.com/docs/guides/fine-tuning">OpenAIã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>ã«ã‚ˆã‚‹ã¨ã€ãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã§ä»¥ä¸‹ã®ã‚ˆã†ãªåŠ¹æœãŒæœŸå¾…ã§ãã‚‹ã‚ˆã†ã§ã™ã€‚</p><ul><li>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§èª¿æ•´ã™ã‚‹ã‚ˆã‚Šã‚‚é«˜å“è³ªãªçµæœ</li><li>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«åã¾ã‚‰ãªã„ç¨‹ã®å¤šãã®ä¾‹ã§ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°å¯èƒ½</li><li>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’çŸ­ãã§ãã‚‹ã“ã¨ã«ã‚ˆã‚‹ãƒˆãƒ¼ã‚¯ãƒ³ã®ç¯€ç´„ãƒ»ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã®æ¸›å°‘</li></ul><h2 id="2-ãƒ¢ãƒ‡ãƒ«ã®èƒ½åŠ›ã‚’å¼•ãå‡ºã™ï¼ˆæ¨è«–ï¼‰"><a href="#2-ãƒ¢ãƒ‡ãƒ«ã®èƒ½åŠ›ã‚’å¼•ãå‡ºã™ï¼ˆæ¨è«–ï¼‰" class="headerlink" title="2. ãƒ¢ãƒ‡ãƒ«ã®èƒ½åŠ›ã‚’å¼•ãå‡ºã™ï¼ˆæ¨è«–ï¼‰"></a>2. ãƒ¢ãƒ‡ãƒ«ã®èƒ½åŠ›ã‚’å¼•ãå‡ºã™ï¼ˆæ¨è«–ï¼‰</h2><p>ç¶šã„ã¦ã€LLMã‚’æ´»ç”¨ã—ãŸã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºï¼ˆæ¨è«–ãƒ•ã‚§ãƒ¼ã‚ºï¼‰ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã™ã€‚</p><p>å¾“æ¥ã®MLãƒ¢ãƒ‡ãƒ«ã¯å…¥å‡ºåŠ›ã®å½¢å¼ãŒä¸€å®šã§ã€åˆ†é¡ã‚„äºˆæ¸¬ãªã©ã®ç‰¹å®šã®ã‚¿ã‚¹ã‚¯ã«æ´»ç”¨ã™ã‚‹ä½¿ã„æ–¹ãŒä¸»æµã§ã—ãŸã€‚<br>ä¸€æ–¹ã€LLMã¯æ±ç”¨çš„ãªãƒ¢ãƒ‡ãƒ«ã§ã‚ã‚‹ãŸã‚ã€1ã¤ã®LLMãƒ¢ãƒ‡ãƒ«ã§ã‚ã‚‰ã‚†ã‚‹ã‚¿ã‚¹ã‚¯ï¼ˆè³ªå•å¿œç­”ã€è¦ç´„ãªã©ï¼‰ã‚’ã“ãªã™ã“ã¨ãŒã§ãã¾ã™ã€‚<br>ã“ã®ãŸã‚ã€LLMãƒ¢ãƒ‡ãƒ«ã‚’å…¥æ‰‹ã—ãŸã‚‰ã€ã‚¿ã‚¹ã‚¯ã‚’æ­£ã—ãã“ãªã›ã‚‹ã‚ˆã†ã«å…¥åŠ›ï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼‰ã‚’èª¿ç¯€ã—ã¦ãƒ¢ãƒ‡ãƒ«ã®èƒ½åŠ›ã‚’æœ€å¤§é™å¼•ãå‡ºã™å·¥å¤«ãŒæ–°ãŸã«å¿…è¦ã¨ãªã‚Šã¾ã—ãŸã€‚</p><img src="/images/20230912a/prompt_eng_grnd.png" alt="prompt_eng_grnd" width="861" height="383" loading="lazy"><p>å›³å†…ã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¨ã—ã¦æŒ™ã’ã‚‰ã‚Œã¦ã„ã‚‹<a href="https://langchain.com/">LangChain</a>ã¨ã¯ã€ãƒ¢ãƒ‡ãƒ«ã®èƒ½åŠ›ã‚’å¼•ãå‡ºã™ã‚ã‚‰ã‚†ã‚‹éƒ¨åˆ†ã‚’åŠ¹ç‡åŒ–ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã€çŸ¥è­˜ãƒ‡ãƒ¼ã‚¿ã¸ã®å††æ»‘ãªã‚¢ã‚¯ã‚»ã‚¹ç­‰ã‚‚å®Ÿè£…ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>ãƒ¢ãƒ‡ãƒ«ã®èƒ½åŠ›ã‚’æœ€å¤§é™å¼•ãå‡ºã™å·¥å¤«ã¨ã—ã¦ã€å¤§ããä»¥ä¸‹ã®2ã¤ã®è¦ç´ ãŒã‚ã‚Šã¾ã™ã€‚</p><ul><li>â‘ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°<ul><li>LLMã¸ã®ã€Œèãæ–¹ã€ã‚’å·¥å¤«ã™ã‚‹ã“ã¨ã§è³ªå•å¿œç­”ã‚„ç®—è¡“æ¨è«–ãªã©ã®ã‚¿ã‚¹ã‚¯å‡¦ç†èƒ½åŠ›ã‚’å‘ä¸Šã•ã›ã‚‹</li><li>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ä¸­ã«æœ›ã¾ã—ã„ç­”ãˆæ–¹ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆç­‰ã‚’åŸ‹ã‚è¾¼ã‚“ã ã‚Šã€ä¾‹ç¤ºã—ãŸã‚Šã™ã‚‹</li><li>æœ›ã‚“ã å›ç­”ãŒè¿”ã£ã¦ã“ãªã„ç¢ºç‡ã‚’æ¸›ã‚‰ã™</li></ul></li><li>â‘¡ã‚°ãƒ©ã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆä»»æ„ï¼‰<ul><li><a href="https://book.st-hakky.com/docs/llm-grounding/">ã‚°ãƒ©ã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°</a>ã¨ã¯ã€ä»®æƒ³ä¸–ç•Œã§å­˜åœ¨ã™ã‚‹LLMç­‰ã®ã‚·ã‚¹ãƒ†ãƒ ã‚’ç¾å®Ÿä¸–ç•Œã¨ç¹‹ã’ã‚‹ã“ã¨<ul><li>ç¾å®Ÿä¸–ç•Œã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦æƒ…å ±æ¤œç´¢ã‚’ã—ãŸã‚Šã€ã‚³ãƒãƒ³ãƒ‰ã‚’ç™ºç”Ÿã—ãŸã‚Šã™ã‚‹ç­‰</li></ul></li><li>LLMå˜ä½“ãŒçŸ¥ã‚‰ãªã„ã“ã¨ã§ã‚‚ç­”ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã®çŸ¥è­˜ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨æ„ã™ã‚‹<ul><li>æ–‡ã®è¦ç´„ãªã©ã€å¤–éƒ¨çŸ¥è­˜ã‚’è¦ã—ãªã„è³ªå•ã®å ´åˆã¯ä¸è¦</li></ul></li><li>çŸ¥è­˜ãƒ‡ãƒ¼ã‚¿ã®æƒ…å ±ã‚’ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«ä»˜åŠ ã™ã‚‹ã“ã¨ã§LLMãŒçŸ¥ã‚‰ãªã„äº‹ã‚‚ç­”ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹</li><li>LLMã®ç‰¹å¾´ã§ã‚ã‚‹ã€å˜˜ã‚’ã¤ãã“ã¨ï¼ˆ&#x3D;å¹»è¦šï¼šHallucinationï¼‰ã‚’æŠ‘ãˆã‚‰ã‚Œã‚‹</li><li>å‡ºåŠ›ã®æ ¹æ‹ ãŒæŠŠæ¡ã§ãã‚‹</li></ul></li></ul><h3 id="â‘ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°"><a href="#â‘ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°" class="headerlink" title="â‘ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°"></a>â‘ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°</h3><p>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã®ä¸€ä¾‹ã‚’ä»¥ä¸‹ã«ã”ç´¹ä»‹ã—ã¾ã™ã€‚</p><ul><li>Zero-shotãƒ—ãƒ­ãƒ³ãƒ—ãƒ†ã‚£ãƒ³ã‚°<ul><li>ãƒ¢ãƒ‡ãƒ«ã«å¯¾ã—ã¦äº‹å‰ã«æƒ…å ±ã‚„ä¾‹ã‚’ä¸ãˆãšã«ç›´æ¥è³ªå•ã‚’ã™ã‚‹ã“ã¨</li><li>è³ªå•ä¾‹ï¼‰ã€Œæ¬¡ã®æ–‡ã‚’ãƒã‚¸ãƒ†ã‚£ãƒ–ã‹ãƒã‚¬ãƒ†ã‚£ãƒ–ã«åˆ†é¡ã—ã¦ãã ã•ã„ã€ã€Œæ¬¡ã®æ–‡ç« ã‚’è¦ç´„ã—ã¦ãã ã•ã„ã€ã€Œ1+1&#x3D; ã€ç­‰</li></ul></li><li>Few-shotãƒ—ãƒ­ãƒ³ãƒ—ãƒ†ã‚£ãƒ³ã‚°<ul><li>ãƒ¢ãƒ‡ãƒ«ã«å¯¾ã—ã¦äº‹å‰ã«ã„ãã¤ã‹ã®ä¾‹ã‚’æç¤ºã—ã¦ã‹ã‚‰è³ªå•ã™ã‚‹ã“ã¨</li><li>è³ªå•ä¾‹ï¼‰ã€Œ1+1&#x3D;2, 3+3&#x3D;6, 4+4&#x3D; ã€ã€Œã¿ã‹ã‚“â†’ãƒ•ãƒ«ãƒ¼ãƒ„, ã‚µãƒƒã‚«ãƒ¼â†’ã‚¹ãƒãƒ¼ãƒ„, çŒ«â†’ ã€ç­‰</li></ul></li><li>Chain-of-Thoughtï¼ˆCoTï¼‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒ†ã‚£ãƒ³ã‚°<ul><li>ãƒ¢ãƒ‡ãƒ«ã«ä¸­é–“çš„ãªæ¨è«–ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆæ€è€ƒéç¨‹ï¼‰ã‚’ä»‹ã™ã‚‹ã‚ˆã†ã«ä¿ƒã™ã“ã¨</li><li>ã€Œã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—ã§è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã€ã®æ–‡è¨€ã‚’å…¥ã‚Œã‚‹ã ã‘ã§è‰¯ã„çµæœãŒå¾—ã‚‰ã‚Œã‚‹ã“ã¨ãŒã‚ã‚‹</li><li>è³ªå•ä¾‹ï¼‰ã€Œ6å€‹ã®ãƒãƒŠãƒŠã‚’è²·ã„ã¾ã—ãŸã€‚ãã‚Œã‚’å‹é”ã«2ã¤æ¸¡ã—ã¾ã—ãŸã€‚ãã‚Œã‹ã‚‰3ã¤ã®ãƒãƒŠãƒŠã‚’è²·ã£ã¦1ã¤é£Ÿã¹ã¾ã—ãŸã€‚æ®‹ã‚Šã¯ä½•å€‹ã§ã™ã‹ï¼Ÿ ã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—ã§è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã€<br>ä»–ã«ã‚‚ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã‚„ãã®ä»–ã®æŠ€è¡“ã¯å¤šã€…ã‚ã‚Šã¾ã™ã€‚èˆˆå‘³ã®ã‚ã‚‹æ–¹ã¯ã€<a href="https://www.promptingguide.ai/jp">ã“ã¡ã‚‰</a>ã®ã‚µã‚¤ãƒˆãŒå‚è€ƒã«ãªã‚Šã¾ã™ã€‚</li></ul></li></ul><h3 id="â‘¡ã‚°ãƒ©ã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆä»»æ„ï¼‰"><a href="#â‘¡ã‚°ãƒ©ã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆä»»æ„ï¼‰" class="headerlink" title="â‘¡ã‚°ãƒ©ã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆä»»æ„ï¼‰"></a>â‘¡ã‚°ãƒ©ã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆä»»æ„ï¼‰</h3><p>ã‚°ãƒ©ã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã®ä¸€ä¾‹ã¨ã—ã¦ã€ã€Œãƒ™ã‚¯ãƒˆãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«çŸ¥è­˜ãƒ‡ãƒ¼ã‚¿ã‚’æ ¼ç´ã—ã¦ãŠãã€æ¤œç´¢ã‚¯ã‚¨ãƒªã‹ã‚‰é¡ä¼¼ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’ä¸Šä½æ•°ä»¶åˆ†æŒã£ã¦ãã‚‹ã€ç­‰ãŒæŒ™ã’ã‚‰ã‚Œã¾ã™ã€‚<br>ã“ã‚Œã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã®å¤§ã¾ã‹ãªæ‰‹é †ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚</p><p>ã¾ãšã€ä»¥ä¸‹ã®æµã‚Œã§ãƒ™ã‚¯ãƒˆãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’æº–å‚™ã—ã¾ã™ã€‚</p><img src="/images/20230912a/embedding.png" alt="embedding" width="713" height="354" loading="lazy"><ul><li>æ–‡æ›¸ã‚’ç”¨æ„ã™ã‚‹ï¼ˆç¤¾å†…QAãƒãƒ£ãƒƒãƒˆã‚’ä½œã‚ŠãŸã„å ´åˆã¯ç¤¾å†…æ–‡æ›¸ãªã©ï¼‰</li><li>æ–‡æ›¸ãŒé•·ã„å ´åˆã€ãƒãƒ£ãƒ³ã‚¯åˆ†ã‘ã‚’ã™ã‚‹ï¼ˆçŸ­ã„æ–‡æ›¸&#x3D;ãƒãƒ£ãƒ³ã‚¯ã«åˆ‡ã‚Šåˆ†ã‘ã‚‹ï¼‰</li><li>ãƒ†ã‚­ã‚¹ãƒˆã‚’ãƒãƒ£ãƒ³ã‚¯æ¯ã«ä½æ¬¡å…ƒç©ºé–“ã«åŸ‹ã‚è¾¼ã‚€ (Embeddingã‚’ä½œæˆã™ã‚‹ &#x2F; ãƒ™ã‚¯ãƒˆãƒ«åŒ–ã™ã‚‹)<ul><li>ãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›ã¨ã—ã¦å—ã‘å–ã‚Šã€ãƒ™ã‚¯ãƒˆãƒ«ã‚’å‡ºåŠ›ã—ã¦ãã‚Œã‚‹ã€ã‚¨ãƒ³ãƒ™ãƒ‡ã‚£ãƒ³ã‚°ãƒ¢ãƒ‡ãƒ«ã¨ã„ã†ãƒ¢ãƒ‡ãƒ«ãŒã‚ã‚‹</li><li>ãã®ã‚ˆã†ãªãƒ¢ãƒ‡ãƒ«ã¯æ§˜ã€…ã‚ã‚Šã€OpenAIã®<a href="https://platform.openai.com/docs/guides/embeddings/what-are-embeddings">text-embedding-ada-002</a>ãŒé«˜æ€§èƒ½ãªãƒ¢ãƒ‡ãƒ«ã¨ã—ã¦æŒ™ã’ã‚‰ã‚Œã‚‹</li></ul></li><li>ãƒãƒ£ãƒ³ã‚¯æ¯ã«ã€ã€Œãƒ†ã‚­ã‚¹ãƒˆã€ã¨ã€Œãƒ™ã‚¯ãƒˆãƒ«ã€ã®å¯¾ã‚’ãƒ™ã‚¯ãƒˆãƒ«DBã¨ã—ã¦æ ¼ç´ã™ã‚‹</li></ul><p>ãƒ™ã‚¯ãƒˆãƒ«DBãŒä½œæˆã§ããŸã‚‰ã€ä»¥ä¸‹ã®ã‚ˆã†ã«åˆ©ç”¨ã—ã¾ã™ã€‚</p><img src="/images/20230912a/grounding.png" alt="grounding" width="960" height="504" loading="lazy"><ul><li>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•æ–‡ã‚’å…ƒã«ã€LLMãŒæ¤œç´¢ã‚¯ã‚¨ãƒªã‚’ç”Ÿæˆã™ã‚‹<ul><li>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•ãŒå˜ç´”ã§ã‚ã‚Œã°ã€ãã®è³ªå•ã‚’ãã®ã¾ã¾ã‚¯ã‚¨ãƒªã¨ã—ã¦ã‚‚ã‚ˆã„</li></ul></li><li>æ¤œç´¢ã‚¯ã‚¨ãƒªã®ãƒ†ã‚­ã‚¹ãƒˆã‚’ãƒ™ã‚¯ãƒˆãƒ«åŒ–ã™ã‚‹<ul><li>ãƒ™ã‚¯ãƒˆãƒ«DBã‚’ä½œæˆã™ã‚‹ã¨ãã«ä½¿ç”¨ã—ãŸã‚¨ãƒ³ãƒ™ãƒ‡ã‚£ãƒ³ã‚°ãƒ¢ãƒ‡ãƒ«ã¨åŒã˜ã‚‚ã®ã‚’åˆ©ç”¨ã™ã‚‹</li></ul></li><li>ãƒ™ã‚¯ãƒˆãƒ«DBã«æ ¼ç´ã•ã‚Œã¦ã„ã‚‹å„ãƒ™ã‚¯ãƒˆãƒ«ã¨ã€ã‚¯ã‚¨ãƒªã®ãƒ™ã‚¯ãƒˆãƒ«ã¨ã®é¡ä¼¼åº¦ã‚’è¨ˆç®—ã™ã‚‹</li><li>é¡ä¼¼åº¦ãŒé«˜ã„ä¸Šä½ã®ãƒ†ã‚­ã‚¹ãƒˆï¼ˆãƒãƒ£ãƒ³ã‚¯ï¼‰ã‚’å–ã‚Šå‡ºã—ã€LLMã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«å«ã‚ã‚‹</li></ul><p>åŸºæœ¬ã¨ãªã‚‹è€ƒãˆæ–¹ã¯ä»¥ä¸Šã§ã™ãŒã€ã“ã‚Œã‚’ç°¡å˜ã«å®Ÿç¾ã§ãã‚‹ã‚ˆã†ã«ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã‚„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦æä¾›ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã‚‚ã‚ã‚Šã¾ã™ã€‚</p><p>ãƒ„ãƒ¼ãƒ«ç­‰ã®è©³ç´°ã¯å¾Œæ—¥ã€åˆ¥è¨˜äº‹ã«ã¦è§£èª¬äºˆå®šã§ã™ã€‚</p><h1 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h1><p>æœ¬è¨˜äº‹ã§ã¯ã€ŒLLMé–‹ç™ºã®ãƒ•ãƒ­ãƒ¼ã€ã¨é¡Œã—ã€LLMè‡ªä½“ã®é–‹ç™ºãŠã‚ˆã³LLMã‚’æ´»ç”¨ã—ãŸã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã®ãƒ•ãƒ­ãƒ¼ã‚’ã”ç´¹ä»‹ã—ã¾ã—ãŸã€‚</p><p>ã“ã‚Œã‹ã‚‰LLMé–‹ç™ºã‚’æ¤œè¨ã—ã¦ã„ã‚‹æ–¹ã€…ã‚„MLOpsã«æºã‚ã£ã¦ã„ã‚‹æ–¹ã€…ã®å‚è€ƒã¨ãªã‚Œã°å¹¸ã„ã§ã™ã€‚</p><p>ä»Šå›ã”ç´¹ä»‹ã—ãŸã€ŒLLMé–‹ç™ºã®ãƒ•ãƒ­ãƒ¼ã€ã‚’å‰æã¨ã—ãŸã€<a href="/articles/20230913a/">LLMé–‹ç™ºã§MLOpsãƒãƒ¼ãƒ ãŒã‚„ã‚‹ã¹ãã“ã¨</a>ã«ã¤ã„ã¦ã‚‚ãœã²ä½µã›ã¦ã”è¦§ãã ã•ã„ã€‚</p><p>ï¼ˆ2023å¹´9æœˆ19æ—¥è¿½è¨˜ï¼‰é–¢é€£ã—ã¦ <a href="/articles/20230919a/">Prompt Flowã§ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè©•ä¾¡ã®ç®¡ç†ã‚’è¡Œã†</a> ã¨ã„ã†è¨˜äº‹ã‚‚å…¬é–‹ã—ã¾ã—ãŸã€‚</p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/DataScience/">DataScience</category>
      
      
      <category domain="https://future-architect.github.io/tags/%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%B3/">ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³</category>
      
      <category domain="https://future-architect.github.io/tags/LLM/">LLM</category>
      
      <category domain="https://future-architect.github.io/tags/%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%B32023/">ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³2023</category>
      
      <category domain="https://future-architect.github.io/tags/%E3%83%97%E3%83%AD%E3%83%B3%E3%83%97%E3%83%88%E3%82%A8%E3%83%B3%E3%82%B8%E3%83%8B%E3%82%A2%E3%83%AA%E3%83%B3%E3%82%B0/">ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°</category>
      
      
      <comments>https://future-architect.github.io/articles/20230912a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>SwiftUIã®ã‚«ã‚¹ã‚¿ãƒ ã‚¢ãƒ©ãƒ¼ãƒˆãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã«ã¤ã„ã¦è€ƒãˆã‚‹</title>
      <link>https://future-architect.github.io/articles/20230908a/</link>
      <guid>https://future-architect.github.io/articles/20230908a/</guid>
      <pubDate>Thu, 07 Sep 2023 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h1&gt;&lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€‚HealthCare Innovation Group(HIG)&lt;sup id=&quot;fnref:1&quot;&gt;&lt;a</description>
          
        
      
      
      
      <content:encoded><![CDATA[<h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>ã“ã‚“ã«ã¡ã¯ã€‚HealthCare Innovation Group(HIG)<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>æ‰€å±ã®æ¸…æ°´ã§ã™ã€‚</p><p>æœ¬è¨˜äº‹ã¯ã€<a href="/articles/20230830a/" title="å¤ã®è‡ªç”±ç ”ç©¶é€£è¼‰2023 ã‚’å§‹ã‚ã¾ã™">å¤ã®è‡ªç”±ç ”ç©¶ãƒ–ãƒ­ã‚°é€£è¼‰2023</a>ã®5æœ¬ç›®ã§ã™ã€‚</p><p>SwiftUIã«ãŠã‘ã‚‹ã‚¢ãƒ©ãƒ¼ãƒˆãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è‡ªä½œã§å®Ÿè£…ã™ã‚‹å ´åˆã€ã©ã‚“ãªæ–¹æ³•ãŒã‚ã‚‹ã‹è€ƒãˆã¦ã¿ã¾ã—ãŸã€‚</p><p>Swiftã‚’ç”¨ã„ãŸiOSã‚¢ãƒ—ãƒªé–‹ç™ºã§ã€ã‚¢ãƒ©ãƒ¼ãƒˆã‚’è‡ªä½œã—ãŸã„ã¨è€ƒãˆãŸã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã‹ï¼ŸWebã‚¢ãƒ—ãƒªã§ã‚‚ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã§ã‚‚ã€ãƒ¦ãƒ¼ã‚¶ã«å•é¡Œã‚’å ±å‘Šã—ãŸã‚Šå‹•ä½œã«ã‚ˆã‚‹å½±éŸ¿ã‚’è­¦å‘Šã—ãŸã‚Šã™ã‚‹ä¸Šã§ã€ã‚¢ãƒ©ãƒ¼ãƒˆã¯é‡è¦ã§ã™ã€‚</p><p>SwiftUIã§ã‚‚<a href="https://developer.apple.com/documentation/SwiftUI/View/alert(_:isPresented:actions:)-1bkka"><code>alert</code></a>ãŒæ¨™æº–ã§ç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚ãŸã ã—ã€ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚„ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã®ã‚µã‚¤ã‚ºãŒå¤‰æ›´ã§ããªã„ãŸã‚ã€iPadã§åˆ©ç”¨ã™ã‚‹å ´åˆç”»é¢ã«å¯¾ã—ã¦ã‹ãªã‚Šå°ã•ãæ‰±ã„ã¥ã‚‰ã„ã§ã™ã€‚</p><p>SwiftUIæ¨™æº–ã®<code>alert</code>ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ iPad Pro (12.9-inch) ã§è¡¨ç¤ºã—ãŸéš›ã®å›³</p><img src="/images/20230908a/68747470733a2f2.png" alt="" width="1200" height="1643" loading="lazy"><p>ç”»é¢ã«å¯¾ã—ã¦ã‹ãªã‚Šå°ã•ã„ãƒ»ãƒ»ãƒ»ã€‚</p><p>ãã“ã§ã€ã€Œè‡ªç”±ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã‚‹ã‚¢ãƒ©ãƒ¼ãƒˆãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è‡ªä½œã™ã‚‹å ´åˆã€ã©ã®ã‚ˆã†ãªå®Ÿè£…æ–¹æ³•ãŒã‚ã‚‹ã‹ã€ã‚’è‡ªç”±ç ”ç©¶ã®é¡Œæã¨ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚</p><p>ä»Šå›è©¦ã—ã¦ã¿ãŸ3ç¨®é¡ã®ã‚«ã‚¹ã‚¿ãƒ ã‚¢ãƒ©ãƒ¼ãƒˆã‚’ã€å®Ÿè£…æ–¹æ³•ã¨å…±ã«ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚<br>â€»ã‚‚ã£ã¨è‰¯ã„å®Ÿè£…æ–¹æ³•ã‚’ã”å­˜çŸ¥ã§ã—ãŸã‚‰ã€æ•™ãˆã¦ã„ãŸã ããŸã„ã§ã™ï¼</p><div class="note info" style="background: #e5f8e2; padding:16px; margin:24px 12px; border-radius:8px;">  <span class="fa fa-fw fa-check-circle"></span><p>æœ¬è¨˜äº‹ã§ã¯è§¦ã‚Œã¦ã„ã¾ã›ã‚“ãŒã€ã‚«ã‚¹ã‚¿ãƒ ã‚¢ãƒ©ãƒ¼ãƒˆãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã«é–¢ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚‚å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚åˆã‚ã›ã¦ç¢ºèªé ‚ã‘ã‚‹ã¨è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚ï¼ˆä¾‹: <a href="https://github.com/divadretlaw/CustomAlert">CustomAlert</a>ï¼‰</p></div><h1 id="æ¤œè¨¼å†…å®¹"><a href="#æ¤œè¨¼å†…å®¹" class="headerlink" title="æ¤œè¨¼å†…å®¹"></a>æ¤œè¨¼å†…å®¹</h1><p>ã‚¢ãƒ©ãƒ¼ãƒˆã¯ã€é€šå¸¸ã®ç”»é¢ã‚ˆã‚Šæ‰‹å‰ï¼ˆé€šå¸¸ç”»é¢ã«é‡ãªã‚‹å½¢ï¼‰ã«è¡¨ç¤ºã—ã¾ã™ã€‚<br>ä»Šå›ã¯ã€é‡ã­ã¦è¡¨ç¤ºã™ã‚‹ãŸã‚ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä¸­ã‹ã‚‰ã€ä»¥ä¸‹ã®3ç¨®é¡ã®å®Ÿè£…æ–¹æ³•ã§æ¯”è¼ƒã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚</p><ol><li><code>fullScreenCover</code>ã‚’åˆ©ç”¨ã—ãŸæ–¹æ³•</li><li><code>overlay</code>ã‚’åˆ©ç”¨ã—ãŸæ–¹æ³•</li><li><code>ZStack</code>ã‚’åˆ©ç”¨ã—ãŸæ–¹æ³•</li></ol><h2 id="äº‹å‰æº–å‚™"><a href="#äº‹å‰æº–å‚™" class="headerlink" title="äº‹å‰æº–å‚™"></a>äº‹å‰æº–å‚™</h2><p>ç”»é¢ã«é‡ã­ã¦è¡¨ç¤ºã™ã‚‹ãŸã‚ã®ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’Viewã¨ã—ã¦ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚SwiftUIæ¨™æº–ã®<code>alert</code>ã«è¦‹ãŸç›®ã‚’å¯„ã›ãŸã‚¢ãƒ©ãƒ¼ãƒˆViewã‚’ã€iPad Pro (12.9-inch) å‘ã‘ã«ã‚µã‚¤ã‚ºèª¿æ•´ã—ãŸViewãŒã“ã¡ã‚‰ã§ã™ã€‚ã“ã®Viewã‚’ã„ãã¤ã‹ã®æ–¹æ³•ã§é‡ã­ã¦ã„ãã¾ã™ã€‚</p><p>â€»å®Ÿè£…ã¯ã€è¨˜äº‹å¾ŒåŠã«è¨˜è¼‰ã—ã¦ã„ã¾ã™ã€‚</p><img src="/images/20230908a/68747470733a2f2_2.png" alt="" width="1140" height="1420" loading="lazy"><h2 id="1-fullScreenCoverã‚’åˆ©ç”¨ã—ãŸæ–¹æ³•"><a href="#1-fullScreenCoverã‚’åˆ©ç”¨ã—ãŸæ–¹æ³•" class="headerlink" title="1. fullScreenCoverã‚’åˆ©ç”¨ã—ãŸæ–¹æ³•"></a>1. <code>fullScreenCover</code>ã‚’åˆ©ç”¨ã—ãŸæ–¹æ³•</h2><p>ä¸€ã¤ç›®ã¯ã€<a href="https://developer.apple.com/documentation/swiftui/view/fullscreencover(ispresented:ondismiss:content:)"><code>fullScreenCover</code></a>ã‚’åˆ©ç”¨ã—ãŸæ–¹æ³•ã§ã™ã€‚</p><p>å¼•æ•°ã«æ¸¡ã—ãŸãƒ•ãƒ©ã‚°ãŒtrueã®æ™‚ã€å…¨ç”»é¢ã‚’è¦†ã†Viewã‚’ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤ºã—ã¾ã™ã€‚</p><p>ä»–ã®æ–¹æ³•ã¨æ¯”è¼ƒ</p><ul><li>ãƒ¡ãƒªãƒƒãƒˆ<ul><li>ç”»é¢å…¨ä½“ã«ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤ºã™ã‚‹ãŸã‚ã€ã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤ºä¸­ã«ä»–ã®å‹•ä½œãŒã§ããªã„ã‚ˆã†ã«åˆ¶é™ã—ã‚„ã™ã„ã€‚</li></ul></li><li>ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ<ul><li><code>fullScreenCover</code> ã¯è¡¨ç¤ºæ™‚ã«ç”»é¢ä¸‹ã‹ã‚‰ä¸Šã¾ã§è¦†ã†ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä¼´ã£ã¦è¡¨ç¤ºã™ã‚‹ãŸã‚ã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŒé›£ã—ã„ã€‚ï¼ˆèª¿ã¹ãŸé™ã‚Šã»ã¼ã§ããªã„ã€‚ï¼‰<br>ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’éæ´»æ€§ã«ã™ã‚‹ã“ã¨ã¯ã§ãã‚‹ã€‚<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup></li></ul></li></ul><img src="/images/20230908a/68747470733a2f2.gif" alt="" width="75%" loading="lazy"><h2 id="2-overlayã‚’åˆ©ç”¨ã—ãŸæ–¹æ³•"><a href="#2-overlayã‚’åˆ©ç”¨ã—ãŸæ–¹æ³•" class="headerlink" title="2. overlayã‚’åˆ©ç”¨ã—ãŸæ–¹æ³•"></a>2. <code>overlay</code>ã‚’åˆ©ç”¨ã—ãŸæ–¹æ³•</h2><p>äºŒã¤ç›®ã¯ã€<a href="https://developer.apple.com/documentation/swiftui/view/overlay(alignment:content:)"><code>overlay</code></a>ã‚’åˆ©ç”¨ã—ãŸæ–¹æ³•ã§ã™ã€‚<br>åå‰ã®é€šã‚Šã€è¦ªViewã‚ˆã‚Šæ‰‹å‰ã«æŒ‡å®šã—ãŸViewã‚’é‡ã­ã¦è¡¨ç¤ºã—ã¾ã™ã€‚ã‚¢ãƒ©ãƒ¼ãƒˆã®ä½¿ç”¨ç”¨é€”ã‚’è€ƒãˆã‚‹ã¨ã¡ã‚‡ã†ã©è‰¯ã•ãã†ã§ã™ã€‚</p><p>ä»–ã®æ–¹æ³•ã¨æ¯”è¼ƒ</p><ul><li>ãƒ¡ãƒªãƒƒãƒˆ<ul><li><code>overlay</code>è‡ªä½“ã¯é‡ã­ã¦è¡¨ç¤ºã™ã‚‹ã ã‘ãªã®ã§ã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãªã©ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã‚„ã™ã„ã€‚</li></ul></li><li>ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ<ul><li>ã‚ãã¾ã§ã‚‚å…ƒã¨ãªã‚‹Viewã«é‡ã­ã‚‹ãŸã‚ã€é‡ã­ã¦è¡¨ç¤ºã™ã‚‹ç¯„å›²ã¯å‘¼ã³å‡ºã™Viewã«ä¾å­˜ã™ã‚‹ã€‚<br>ä¾‹ãˆã°ã€<code>VStack</code>ã«ç´ã¥ã‘ã‚‹ã¨<code>VStack</code>ã®ç¯„å›²ãŒé‡ã­ã‚‹Viewã®è¡¨ç¤ºç¯„å›²ã¨ãªã‚Šã€è¡¨ç¤ºç¯„å›²å¤–ã¯æ“ä½œã§ãã¦ã—ã¾ã†ã€‚ï¼ˆä¸‹ã®gifå‚ç…§ï¼‰</li></ul></li></ul><img src="/images/20230908a/68747470733a2f2_2.gif" alt="" width="75%" loading="lazy"><h2 id="3-ZStackã‚’åˆ©ç”¨ã—ãŸæ–¹æ³•"><a href="#3-ZStackã‚’åˆ©ç”¨ã—ãŸæ–¹æ³•" class="headerlink" title="3. ZStackã‚’åˆ©ç”¨ã—ãŸæ–¹æ³•"></a>3. <code>ZStack</code>ã‚’åˆ©ç”¨ã—ãŸæ–¹æ³•</h2><p>ä¸‰ã¤ç›®ã¯ã€<a href="https://developer.apple.com/documentation/swiftui/zstack"><code>ZStack</code></a>ã‚’åˆ©ç”¨ã—ãŸæ–¹æ³•ã§ã™ã€‚<br><code>fullScreenCover</code>ã‚„<code>overlay</code>ã¯Viewã®Instance Methodã‚’åˆ©ç”¨ã—ã¦ã„ãŸã®ã§ã™ãŒã€ã“ã¡ã‚‰ã¯å†…åŒ…ã™ã‚‹Viewã®è¡¨ç¤ºé †ã‚’åˆ¶å¾¡ã™ã‚‹ã‚‚ã®ãªã®ã§ã€æ¯›è‰²ãŒç•°ãªã‚Šã¾ã™ã€‚</p><p>ä»–ã®æ–¹æ³•ã¨æ¯”è¼ƒ</p><ul><li>ãƒ¡ãƒªãƒƒãƒˆ<ul><li>ã‚¢ãƒ—ãƒªå¤§å…ƒã®Viewã«é‡ã­ã‚‹ã“ã¨ã§ã€ç”»é¢å…¨ä½“ã‚’è¦†ã£ã¦è¡¨ç¤ºåˆ¶å¾¡ã§ãã‚‹ã€‚</li></ul></li><li>ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ<ul><li>ãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤ºã‚’åˆ¶å¾¡ã™ã‚‹ãƒ•ãƒ©ã‚°ã‚„ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã«è¡¨ç¤ºã™ã‚‹å†…å®¹ã‚’<code>App</code>éšå±¤ã¾ã§ä¼ãˆã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€å˜ä¸€ã®Viewå†…ã§çŠ¶æ…‹ç®¡ç†ãŒå®Œçµã—ãªã„ã€‚</li></ul></li></ul><img src="/images/20230908a/68747470733a2f2_3.gif" alt="" width="75%" loading="lazy"><h2 id="ã‚³ãƒ¼ãƒ‰å®Ÿè£…ä¾‹"><a href="#ã‚³ãƒ¼ãƒ‰å®Ÿè£…ä¾‹" class="headerlink" title="ã‚³ãƒ¼ãƒ‰å®Ÿè£…ä¾‹"></a>ã‚³ãƒ¼ãƒ‰å®Ÿè£…ä¾‹</h2><p>ä»Šå›åˆ©ç”¨ã—ãŸã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯ã€ã“ã¡ã‚‰ã§ã™ã€‚</p><h3 id="App"><a href="#App" class="headerlink" title="App"></a>App</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">IsShowAlert</span>: <span class="title class_">EnvironmentKey</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">let</span> defaultValue: <span class="type">Binding</span>&lt;<span class="type">Bool</span>&gt; <span class="operator">=</span> .constant(<span class="literal">false</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">extension</span> <span class="title class_">EnvironmentValues</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> isShowAlert: <span class="type">Binding</span>&lt;<span class="type">Bool</span>&gt; &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="keyword">self</span>[<span class="type">IsShowAlert</span>.<span class="keyword">self</span>] &#125;</span><br><span class="line">        <span class="keyword">set</span> &#123; <span class="keyword">self</span>[<span class="type">IsShowAlert</span>.<span class="keyword">self</span>] <span class="operator">=</span> newValue &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@main</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">SampleApp</span>: <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> isShowAlert: <span class="type">Bool</span> <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">Scene</span> &#123;</span><br><span class="line">        <span class="type">WindowGroup</span> &#123;</span><br><span class="line">            <span class="type">ZStack</span> &#123;</span><br><span class="line">                <span class="type">ContentView</span>()</span><br><span class="line">                    .environment(\.isShowAlert, <span class="variable">$isShowAlert</span>)</span><br><span class="line">                <span class="comment">/// 3. `ZStack`ã‚’åˆ©ç”¨ã—ãŸå®Ÿè£…æ–¹æ³•</span></span><br><span class="line">                <span class="keyword">if</span> isShowAlert &#123;</span><br><span class="line">                    <span class="type">CustomAlertView</span>(alertTitle: <span class="type">Text</span>(<span class="string">&quot;ã‚¿ã‚¤ãƒˆãƒ«&quot;</span>)) &#123;</span><br><span class="line">                        <span class="type">Button</span>(<span class="string">&quot;OK&quot;</span>) &#123;</span><br><span class="line">                            <span class="variable">$isShowAlert</span>.wrappedValue.toggle()</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; message: &#123;</span><br><span class="line">                        <span class="type">Text</span>(<span class="string">&quot;ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸&quot;</span>)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ContentView"><a href="#ContentView" class="headerlink" title="ContentView"></a>ContentView</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="comment">/// æ¨™æº–ã‚¢ãƒ©ãƒ¼ãƒˆã®è¡¨ç¤ºã‚’ç®¡ç†ã™ã‚‹ãƒ•ãƒ©ã‚°</span></span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">var</span> isShowDefaultAlert: <span class="type">Bool</span> <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment">/// `fullScreenCover`ã‚’åˆ©ç”¨ã—ãŸã‚«ã‚¹ã‚¿ãƒ ã‚¢ãƒ©ãƒ¼ãƒˆã®è¡¨ç¤ºã‚’ç®¡ç†ã™ã‚‹ãƒ•ãƒ©ã‚°</span></span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">var</span> isShowFullScreenCoverAlert: <span class="type">Bool</span> <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment">/// `overlay`ã‚’åˆ©ç”¨ã—ãŸã‚«ã‚¹ã‚¿ãƒ ã‚¢ãƒ©ãƒ¼ãƒˆã®è¡¨ç¤ºã‚’ç®¡ç†ã™ã‚‹ãƒ•ãƒ©ã‚°</span></span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">var</span> isShowOverlayAlert: <span class="type">Bool</span> <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment">/// `ZStack`ã‚’åˆ©ç”¨ã—ãŸã‚«ã‚¹ã‚¿ãƒ ã‚¢ãƒ©ãƒ¼ãƒˆã®è¡¨ç¤ºã‚’ç®¡ç†ã™ã‚‹ãƒ•ãƒ©ã‚°</span></span><br><span class="line">    <span class="meta">@Environment</span>(\.isShowAlert) <span class="keyword">var</span> isShowAlert</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span> &#123;</span><br><span class="line">            <span class="type">VStack</span>(spacing: <span class="number">50</span>) &#123;</span><br><span class="line">                <span class="type">Button</span>(</span><br><span class="line">                    action: &#123;</span><br><span class="line">                        isShowDefaultAlert <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    label: &#123;</span><br><span class="line">                        <span class="type">Text</span>(<span class="string">&quot;æ¨™æº–ã‚¢ãƒ©ãƒ¼ãƒˆã‚’è¡¨ç¤ºã™ã‚‹&quot;</span>)</span><br><span class="line">                    &#125;</span><br><span class="line">                )</span><br><span class="line">                <span class="type">Button</span>(</span><br><span class="line">                    action: &#123;</span><br><span class="line">                        isShowFullScreenCoverAlert <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    label: &#123;</span><br><span class="line">                        <span class="type">Text</span>(<span class="string">&quot;`fullScreenCover`ã®ã‚¢ãƒ©ãƒ¼ãƒˆã‚’è¡¨ç¤ºã™ã‚‹&quot;</span>)</span><br><span class="line">                    &#125;</span><br><span class="line">                )</span><br><span class="line">                <span class="type">Button</span>(</span><br><span class="line">                    action: &#123;</span><br><span class="line">                        isShowOverlayAlert <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    label: &#123;</span><br><span class="line">                        <span class="type">Text</span>(<span class="string">&quot;`overlay`ã®ã‚¢ãƒ©ãƒ¼ãƒˆã‚’è¡¨ç¤ºã™ã‚‹&quot;</span>)</span><br><span class="line">                    &#125;</span><br><span class="line">                )</span><br><span class="line">                <span class="type">Button</span>(</span><br><span class="line">                    action: &#123;</span><br><span class="line">                        isShowAlert.wrappedValue <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    label: &#123;</span><br><span class="line">                        <span class="type">Text</span>(<span class="string">&quot;`ZStack`ã®ã‚¢ãƒ©ãƒ¼ãƒˆã‚’è¡¨ç¤ºã™ã‚‹&quot;</span>)</span><br><span class="line">                    &#125;</span><br><span class="line">                )</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .alert(<span class="type">Text</span>(<span class="string">&quot;ã‚¿ã‚¤ãƒˆãƒ«&quot;</span>), isPresented: <span class="variable">$isShowDefaultAlert</span>) &#123;</span><br><span class="line">            <span class="type">Button</span>(<span class="string">&quot;OK&quot;</span>) &#123;</span><br><span class="line">                isShowDefaultAlert.toggle()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; message: &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .alertFullScreenCover(<span class="type">Text</span>(<span class="string">&quot;ã‚¿ã‚¤ãƒˆãƒ«&quot;</span>), isPresented: <span class="variable">$isShowFullScreenCoverAlert</span>) &#123;</span><br><span class="line">            <span class="type">Button</span>(<span class="string">&quot;OK&quot;</span>) &#123;</span><br><span class="line">                isShowFullScreenCoverAlert.toggle()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; message: &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .alertOverlay(<span class="type">Text</span>(<span class="string">&quot;ã‚¿ã‚¤ãƒˆãƒ«&quot;</span>), isPresented: <span class="variable">$isShowOverlayAlert</span>) &#123;</span><br><span class="line">            <span class="type">Button</span>(<span class="string">&quot;OK&quot;</span>) &#123;</span><br><span class="line">                isShowOverlayAlert.toggle()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; message: &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Extensions"><a href="#Extensions" class="headerlink" title="Extensions"></a>Extensions</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">extension</span> <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="comment">/// 1. `fullScreenCover`ã‚’åˆ©ç”¨ã—ãŸå®Ÿè£…æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">alertFullScreenCover</span>&lt;<span class="type">A</span>, <span class="type">M</span>&gt;(</span><br><span class="line">        <span class="keyword">_</span> <span class="params">title</span>: <span class="type">Text</span>,</span><br><span class="line">        <span class="params">isPresented</span>: <span class="type">Binding</span>&lt;<span class="type">Bool</span>&gt;,</span><br><span class="line">        <span class="meta">@ViewBuilder</span> <span class="params">actions</span>: <span class="keyword">@escaping</span> () -&gt; <span class="type">A</span>,</span><br><span class="line">        <span class="meta">@ViewBuilder</span> <span class="params">message</span>: <span class="keyword">@escaping</span> () -&gt; <span class="type">M</span></span><br><span class="line">    ) -&gt; <span class="keyword">some</span> <span class="type">View</span> <span class="keyword">where</span> <span class="type">A</span> : <span class="type">View</span>, <span class="type">M</span> : <span class="type">View</span> &#123;</span><br><span class="line">        fullScreenCover(isPresented: isPresented) &#123;</span><br><span class="line">            <span class="type">CustomAlertView</span>(alertTitle: title, actions: actions, message: message)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// 2. `overlay`ã‚’åˆ©ç”¨ã—ãŸå®Ÿè£…æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">alertOverlay</span>&lt;<span class="type">A</span>, <span class="type">M</span>&gt;(</span><br><span class="line">        <span class="keyword">_</span> <span class="params">title</span>: <span class="type">Text</span>,</span><br><span class="line">        <span class="params">isPresented</span>: <span class="type">Binding</span>&lt;<span class="type">Bool</span>&gt;,</span><br><span class="line">        <span class="meta">@ViewBuilder</span> <span class="params">actions</span>: <span class="keyword">@escaping</span> () -&gt; <span class="type">A</span>,</span><br><span class="line">        <span class="meta">@ViewBuilder</span> <span class="params">message</span>: <span class="keyword">@escaping</span> () -&gt; <span class="type">M</span></span><br><span class="line">    ) -&gt; <span class="keyword">some</span> <span class="type">View</span> <span class="keyword">where</span> <span class="type">A</span> : <span class="type">View</span>, <span class="type">M</span> : <span class="type">View</span> &#123;</span><br><span class="line">        overlay &#123;</span><br><span class="line">            <span class="keyword">if</span> isPresented.wrappedValue &#123;</span><br><span class="line">                <span class="type">CustomAlertView</span>(alertTitle: title, actions: actions, message: message)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="CustomAlertView"><a href="#CustomAlertView" class="headerlink" title="CustomAlertView"></a>CustomAlertView</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">CustomAlertView</span>&lt;<span class="title class_">A</span>, <span class="title class_">M</span>&gt;: <span class="title class_">View</span> <span class="title class_">where</span> <span class="title class_">A</span> : <span class="title class_">View</span>, <span class="title class_">M</span> : <span class="title class_">View</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> alertTitle: <span class="type">Text</span></span><br><span class="line">    <span class="meta">@ViewBuilder</span> <span class="keyword">var</span> actions: () -&gt; <span class="type">A</span></span><br><span class="line">    <span class="meta">@ViewBuilder</span> <span class="keyword">var</span> message: () -&gt; <span class="type">M</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span> &#123;</span><br><span class="line">            <span class="comment">// èƒŒæ™¯éƒ¨åˆ†</span></span><br><span class="line">            <span class="type">Color</span>.black</span><br><span class="line">                .opacity(<span class="number">0.2</span>)</span><br><span class="line">                .edgesIgnoringSafeArea(.all)</span><br><span class="line">            <span class="comment">// ãƒ€ã‚¤ã‚¢ãƒ­ã‚°éƒ¨åˆ†</span></span><br><span class="line">            <span class="type">VStack</span> &#123;</span><br><span class="line">                alertTitle</span><br><span class="line">                    .font(.largeTitle)</span><br><span class="line">                    .bold()</span><br><span class="line">                    .padding(.top, <span class="number">20</span>)</span><br><span class="line">                    .padding(.bottom, <span class="number">10</span>)</span><br><span class="line">                message()</span><br><span class="line">                    .font(.title)</span><br><span class="line">                <span class="type">Divider</span>()</span><br><span class="line">                    .padding(.top, <span class="number">20</span>)</span><br><span class="line">                actions()</span><br><span class="line">                    .font(.title)</span><br><span class="line">                    .padding(.vertical, <span class="number">20</span>)</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            .frame(width: <span class="type">UIScreen</span>.main.bounds.width <span class="operator">/</span> <span class="number">2</span>)</span><br><span class="line">            .background(.white)</span><br><span class="line">            .cornerRadius(<span class="number">15</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">CustomAlert_Previews</span>: <span class="title class_">PreviewProvider</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> previews: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">CustomAlertView</span>(alertTitle: <span class="type">Text</span>(<span class="string">&quot;ã‚¿ã‚¤ãƒˆãƒ«&quot;</span>), actions: &#123;</span><br><span class="line">            <span class="type">Button</span>(<span class="string">&quot;OK&quot;</span>) &#123;&#125;</span><br><span class="line">        &#125;, message: &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸&quot;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ã•ã„ã”ã«"><a href="#ã•ã„ã”ã«" class="headerlink" title="ã•ã„ã”ã«"></a>ã•ã„ã”ã«</h1><p>æœ¬è¨˜äº‹ã§ã¯ã€è‡ªç”±ç ”ç©¶ã¨ã—ã¦ã‚¢ãƒ©ãƒ¼ãƒˆãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è‡ªä½œã™ã‚‹éš›ã®å®Ÿè£…æ–¹æ³•ã«é–¢ã—ã¦ã€3ç¨®é¡ã‚’æ¯”è¼ƒã—ã¦ã¿ã¾ã—ãŸã€‚</p><p>ã‚¢ãƒ©ãƒ¼ãƒˆãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã¯æ€§è³ªä¸Šã€è¡¨ç¤ºä¸­ä»–ã®æ“ä½œãŒã§ããªã„ã“ã¨ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹ã¨æ€ã„ã¾ã™ã€‚ä»Šå›è©¦ã—ãŸä¸­ã§ã¯ã€ä¸‰ã¤ç›®ã®<code>ZStack</code>ã‚’åˆ©ç”¨ã—ãŸæ–¹æ³•ãŒã‚¢ãƒ—ãƒªå¤§å…ƒã®Viewã«é‡ã­ã‚‹ã“ã¨ã§ã‚¢ãƒ©ãƒ¼ãƒˆã‚’ä¸€ç•ªæ‰‹å‰ã«è¡¨ç¤ºã™ã‚‹è¦ä»¶ã‚’æº€ãŸã—ã‚„ã™ã„ã¨æ„Ÿã˜ã¾ã—ãŸã€‚</p><p>ã¾ãŸã€ä»Šå›è©¦ã—ã¦åˆ†ã‹ã£ãŸãƒ¡ãƒªãƒƒãƒˆãƒ»ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã‚’ä»¥ä¸‹ã®è¡¨ã«ã¾ã¨ã‚ã¾ã—ãŸã€‚</p><div class="scroll"><table><thead><tr><th align="left">è©¦ã—ãŸå®Ÿè£…æ–¹æ³•</th><th align="left">ãƒ¡ãƒªãƒƒãƒˆ</th><th align="left">ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ</th></tr></thead><tbody><tr><td align="left">1. <code>fullScreenCover</code>ã‚’åˆ©ç”¨ã—ãŸæ–¹æ³•</td><td align="left">ç”»é¢å…¨ä½“ã«ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤ºã™ã‚‹ãŸã‚ã€ã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤ºä¸­ã«ä»–ã®å‹•ä½œãŒã§ããªã„ã‚ˆã†ã«åˆ¶é™ã—ã‚„ã™ã„ã€‚</td><td align="left"><code>fullScreenCover</code> ã¯è¡¨ç¤ºæ™‚ã«ç”»é¢ä¸‹ã‹ã‚‰ä¸Šã¾ã§è¦†ã†ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä¼´ã£ã¦è¡¨ç¤ºã™ã‚‹ãŸã‚ã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŒé›£ã—ã„ã€‚ï¼ˆèª¿ã¹ãŸé™ã‚Šã»ã¼ã§ããªã„ã€‚ï¼‰</td></tr><tr><td align="left">2. <code>overlay</code>ã‚’åˆ©ç”¨ã—ãŸæ–¹æ³•</td><td align="left"><code>overlay</code>è‡ªä½“ã¯é‡ã­ã¦è¡¨ç¤ºã™ã‚‹ã ã‘ãªã®ã§ã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãªã©ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã‚„ã™ã„ã€‚</td><td align="left">ã‚ãã¾ã§ã‚‚å…ƒã¨ãªã‚‹Viewã«é‡ã­ã‚‹ãŸã‚ã€é‡ã­ã¦è¡¨ç¤ºã™ã‚‹ç¯„å›²ã¯å‘¼ã³å‡ºã™Viewã«ä¾å­˜ã™ã‚‹ã€‚</td></tr><tr><td align="left">3. <code>ZStack</code>ã‚’åˆ©ç”¨ã—ãŸæ–¹æ³•</td><td align="left">ã‚¢ãƒ—ãƒªå¤§å…ƒã®Viewã«é‡ã­ã‚‹ã“ã¨ã§ã€ç”»é¢å…¨ä½“ã‚’è¦†ã£ã¦è¡¨ç¤ºåˆ¶å¾¡ã§ãã‚‹ã€‚</td><td align="left">ãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤ºã‚’åˆ¶å¾¡ã™ã‚‹ãƒ•ãƒ©ã‚°ã‚„ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã«è¡¨ç¤ºã™ã‚‹å†…å®¹ã‚’<code>App</code>éšå±¤ã¾ã§ä¼ãˆã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€å˜ä¸€ã®Viewå†…ã§çŠ¶æ…‹ç®¡ç†ãŒå®Œçµã—ãªã„ã€‚</td></tr></tbody></table></div><p>ä½•ã‹ã—ã‚‰ã®å‚è€ƒã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚</p><h1 id="å‚è€ƒãƒªãƒ³ã‚¯"><a href="#å‚è€ƒãƒªãƒ³ã‚¯" class="headerlink" title="å‚è€ƒãƒªãƒ³ã‚¯"></a>å‚è€ƒãƒªãƒ³ã‚¯</h1><p><a href="https://developer.apple.com/documentation/SwiftUI/View/alert(_:isPresented:actions:)-1bkka">https://developer.apple.com/documentation/SwiftUI/View/alert(_:isPresented:actions:)-1bkka</a></p><p><a href="https://developer.apple.com/documentation/swiftui/view/fullscreencover(ispresented:ondismiss:content:)">https://developer.apple.com/documentation/swiftui/view/fullscreencover(ispresented:ondismiss:content:)</a></p><p><a href="https://developer.apple.com/documentation/swiftui/view/overlay(alignment:content:)">https://developer.apple.com/documentation/swiftui/view/overlay(alignment:content:)</a></p><div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none; padding-left: 0;"><li id="fn:1"><span style="vertical-align: top; padding-right: 10px;">1.</span><span style="vertical-align: top;">åŒ»ç™‚ãƒ»ãƒ˜ãƒ«ã‚¹ã‚±ã‚¢åˆ†é‡ã§ã®æ¡ˆä»¶ã‚„æ–°è¦ãƒ“ã‚¸ãƒã‚¹å‰µå‡ºã‚’æ‹…ã†ã€2020å¹´ã«èª•ç”Ÿã—ãŸäº‹æ¥­éƒ¨ã§ã™ã€‚è¨­ç«‹ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã¯<a href="https://note.future.co.jp/n/n8b57d4bf4604" title="æ–°è¦äº‹æ¥­ã®ç«‹ã¡ä¸Šã’ã€€ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®çŸ¥ã‚‰ã‚Œã–ã‚‹åŒ»ç™‚ãƒ»ãƒ˜ãƒ«ã‚¹ã‚±ã‚¢ã¸ã®æŒ‘æˆ¦">æœªæ¥å ±</a>ã®è¨˜äº‹ã‚’ã”è¦§ãã ã•ã„ã€‚</span><a href="#fnref:1" rev="footnote"> â†©</a></li><li id="fn:2"><span style="vertical-align: top; padding-right: 10px;">2.</span><span style="vertical-align: top;"><a href="https://stackoverflow.com/questions/69712759/swiftui-fullscreencover-with-no-animation">SwiftUI: fullScreenCover with no animation?</a></span><a href="#fnref:2" rev="footnote"> â†©</a></li></ol></div></div>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Programming/">Programming</category>
      
      
      <category domain="https://future-architect.github.io/tags/iOS/">iOS</category>
      
      <category domain="https://future-architect.github.io/tags/Swift/">Swift</category>
      
      <category domain="https://future-architect.github.io/tags/SwiftUI/">SwiftUI</category>
      
      <category domain="https://future-architect.github.io/tags/iPad/">iPad</category>
      
      <category domain="https://future-architect.github.io/tags/iPhone/">iPhone</category>
      
      
      <comments>https://future-architect.github.io/articles/20230908a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Sentence-Transformersã‚’ä½¿ã£ã¦ã¿ãŸï¼YouTubeå‹•ç”»ã®ã‚»ãƒªãƒ•ã‚’æ‰‹è»½ã«ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢</title>
      <link>https://future-architect.github.io/articles/20230906a/</link>
      <guid>https://future-architect.github.io/articles/20230906a/</guid>
      <pubDate>Tue, 05 Sep 2023 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;h2 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h2&gt;&lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€‚ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼TIG DXãƒ¦ãƒ‹ãƒƒãƒˆæ‰€å±ã®ç‹ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬è¨˜äº‹ã¯ã€&lt;a</description>
          
        
      
      
      
      <content:encoded><![CDATA[<h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><p>ã“ã‚“ã«ã¡ã¯ã€‚ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼TIG DXãƒ¦ãƒ‹ãƒƒãƒˆæ‰€å±ã®ç‹ã§ã™ã€‚</p><p>æœ¬è¨˜äº‹ã¯ã€<a href="/articles/20230830a/">å¤ã®è‡ªç”±ç ”ç©¶ãƒ–ãƒ­ã‚°é€£è¼‰2023</a>ã®4æœ¬ç›®ã§ã™ã€‚</p><p>ä»Šå›ã¯ãƒ†ã‚­ã‚¹ãƒˆã®åŸ‹ã‚è¾¼ã¿ã‚¨ãƒ³ã‚³ãƒ¼ãƒ€ãƒ¼ã‚’ä½¿ã£ã¦ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢ã‚’ãŠã‚‚ã¡ã‚ƒãƒ¬ãƒ™ãƒ«ã§ç°¡å˜ã«å®Ÿè£…ã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚åˆ†ã‹ã‚Šã‚„ã™ã„ã‚ˆã†ã«ã€YouTubeã®å‹•ç”»ã®ã‚»ãƒªãƒ•ã‚’ã‚³ãƒ¼ãƒ‘ã‚¹ã¨ã—ã¦ä½¿ç”¨ã—ã¾ã™ã€‚å°†æ¥çš„ã«æ™‚é–“è»¸ã®ãƒ¡ã‚¿æƒ…å ±ã‚‚åˆ©ç”¨ã—ãŸã‚‰ã€æ¤œç´¢çµæœã«ã¯å‹•ç”»ã®ä½•åˆ†ä½•ç§’ã«ç‰¹å®šã€é·ç§»ãƒªãƒ³ã‚¯ã®ç”Ÿæˆãªã©ã‚‚ã„ã‚ã„ã‚é¢ç™½ã„ã“ã¨ãŒã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><h2 id="ç›®æ¬¡"><a href="#ç›®æ¬¡" class="headerlink" title="ç›®æ¬¡"></a>ç›®æ¬¡</h2><ul><li>ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢ã‚’æ³¨ç›®ã™ã‚‹ãã£ã‹ã‘</li><li>ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢ã¨ã¯</li><li>åŸç†<ul><li>åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«(Embedding Vector)</li><li>åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ã‚’ä½¿ã£ãŸã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢</li></ul></li><li>å®Ÿè£…<ul><li>ä½¿ã£ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒª</li><li>Semantic Searchã®å®Ÿè£…</li></ul></li><li>ã¾ã¨ã‚</li></ul><h2 id="ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢ã‚’æ³¨ç›®ã™ã‚‹ãã£ã‹ã‘"><a href="#ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢ã‚’æ³¨ç›®ã™ã‚‹ãã£ã‹ã‘" class="headerlink" title="ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢ã‚’æ³¨ç›®ã™ã‚‹ãã£ã‹ã‘"></a>ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢ã‚’æ³¨ç›®ã™ã‚‹ãã£ã‹ã‘</h2><p>ChatGPTãªã©ã®ç”ŸæˆAIãŒå¤§ãƒ’ãƒƒãƒˆã—ã¦ã„ã‚‹ç¾åœ¨ã€ãã®å¿œç”¨å ´é¢ã¯å¢—åŠ ã—ã¦ãŠã‚Šã€è‡ªç„¶è¨€èªã§æ©Ÿæ¢°ã¨ä¼šè©±ã—æŒ‡ç¤ºã‚’ä¸ãˆãŸã‚Šæƒ…å ±ã‚’å¼•ã„ãŸã‚Šã™ã‚‹ã“ã¨ã¯ä»Šã©ãã®ãƒˆãƒ¬ãƒ³ãƒ‰ã«ãªã£ã¦ã„ã¾ã™ã€‚ã—ã‹ã—ã€ç”ŸæˆAIã‚’ä½¿ç”¨ã™ã‚‹éš›ã«ã¯ã€æƒ…å ±ã®æœ€æ–°æ€§ã‚„ãƒ•ã‚¡ã‚¯ãƒˆãƒã‚§ãƒƒã‚¯ã®ä¸è¶³ãªã©ã®æ‡¸å¿µç‚¹ãŒå­˜åœ¨ã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã®å•é¡Œã‚’ä½æ¸›ã™ã‚‹ãŸã‚ã«ã¯ã€ãªã‚‹ã¹ãã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚„èƒŒæ™¯æƒ…å ±ãªã©ã€æ¯”è¼ƒçš„ãªé«˜å“è³ªã®ã‚¤ãƒ³ãƒ—ãƒƒãƒˆã‚’æä¾›ã—ã€ç”Ÿæˆå¼AIãŒå¾—æ„ãªæƒ…å ±ã®æŠ½å‡ºã€å¤‰æ›ã€æ•´å½¢ãªã©ã®ã¿ä»»ã›ã‚‹ã®ãŒã†ã¾ã„ä½¿ã„æ–¹ã§ã—ã‚‡ã†ã€‚</p><p>ç”ŸæˆAIã«ï¼‘å›ã®ã‚¯ã‚¨ãƒªã§ã‚¤ãƒ³ãƒ—ãƒƒãƒˆã§ãã‚‹æƒ…å ±ã¯é™ã‚‰ã‚Œã¦ã„ã¾ã™ã®ã§ã€äº‹å‰ã«é–¢ä¿‚ã—ãã†ãªæƒ…å ±ã‚’ç²—ãæŠ½å‡ºã™ã‚‹ãŸã‚ã«ã€å…¬é–‹ã—ã¦ã„ãªã„ãƒ‡ãƒ¼ã‚¿ã‚„ç‰¹å®šã®ã‚³ãƒ¼ãƒ‘ã‚¹ã‚’ä½¿ã£ã¦ã€è‡ªç„¶è¨€èªã§ã‚¯ã‚¨ãƒªã™ã‚‹éš›ã«ã€ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢ãŒå¿…è¦ã¨ãªã‚Šã¾ã™ã€‚</p><h2 id="ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢-Semantic-Search-ã¨ã¯"><a href="#ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢-Semantic-Search-ã¨ã¯" class="headerlink" title="ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢(Semantic Search)ã¨ã¯"></a>ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢(Semantic Search)ã¨ã¯</h2><p>æœ€åˆã«ã€ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢ã¨å…¸å‹çš„ãªãƒ¬ã‚­ã‚·ã‚«ãƒ«æ¤œç´¢ï¼ˆèªå½™æ¤œç´¢ã€å­—å¥æ¤œç´¢ã€Lexical Searchï¼‰ã‚’æ¯”è¼ƒã—ã¾ã™ã€‚ãƒ¬ã‚­ã‚·ã‚«ãƒ«æ¤œç´¢ã¯ã€ãƒ†ã‚­ã‚¹ãƒˆå†…ã®æ–‡å­—åˆ—ã‚„å˜èªã®è¡¨é¢çš„ãªä¸€è‡´ã«ç„¦ç‚¹ã‚’å½“ã¦ã¾ã™ã€‚ç‰¹å®šã®æ–‡å­—åˆ—ã‚„å˜èªãŒãƒ†ã‚­ã‚¹ãƒˆå†…ã«å­˜åœ¨ã™ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã€ãã®ä¸€è‡´åº¦ã«åŸºã¥ã„ã¦æƒ…å ±ã‚’é¸åˆ¥ã—ã¾ã™ã€‚ãã®ãŸã‚ã€åŒç¾©èªã‚„é–¢é€£èªã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«å¯¾å¿œã™ã‚‹ã“ã¨ãŒé›£ã—ãã€æ„å‘³çš„ãªé–¢é€£æ€§ã‚’æ¬ ã„ãŸæ¤œç´¢çµæœã«ãªã‚Šã€è‡ªç„¶è¨€èªã®ã‚¯ã‚¨ãƒªã«å¯¾ã™ã‚‹å¼±ç‚¹ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ä¸€æ–¹ã€ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢ã¯ã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã ã‘ã§ãªãã€æ–‡è„ˆã‚„æ„å‘³ã«åŸºã¥ã„ã¦æƒ…å ±ã‚’æ¤œç´¢ã™ã‚‹ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ã™ã€‚é–¢é€£æ€§ã‚„ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’è€ƒæ…®ã—ã€ã‚ˆã‚Šé«˜åº¦ãªæƒ…å ±æ¤œç´¢ã‚’å®Ÿç¾ã§ãã€åŒç¾©èªã‚„é–¢é€£èªã€ã•ã‚‰ã«éƒ¨åˆ†çš„ãªèª¤å­—ãªã©ã«ã‚‚å¯¾å¿œã§ãã‚‹ãŸã‚ã€è‡ªç„¶è¨€èªã®ã‚¯ã‚¨ãƒªã«é©ã—ã¦ã„ã¾ã™ã€‚</p><h2 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h2><p>ãƒ†ã‚­ã‚¹ãƒˆã®åŸ‹ã‚è¾¼ã¿ã«ã‚ˆã£ã¦ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢ã®åŸç†ã‚’ç°¡å˜ã«èª¬æ˜ã—ã¾ã™ã€‚</p><h3 id="åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«-Embedding-Vector"><a href="#åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«-Embedding-Vector" class="headerlink" title="åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«(Embedding Vector)"></a>åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«(Embedding Vector)</h3><p>ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã®ä¸–ç•Œã«ã¯ã€æ–‡å­—ã ã‘ã§ã¯ãªãã€ç”»åƒã€éŸ³å£°ã€å‹•ç”»ãªã©ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã¯ç¬¦å·åŒ–(Encoding)ã§ã®è¡¨ç¾ãŒã§ãã¾ã™ã€‚ãã‚Œã¨ä¼¼ãŸæ€æƒ³ã§ã€å˜èªã€æ–‡ã€æ®µè½ãªã©ã‚’è¡¨ã™ã€Œæ„å‘³ã€ã‚„ã€Œé–¢é€£æ€§ã€ã‚’æ•°å€¤ã®ãƒ™ã‚¯ãƒˆãƒ«ã®è¡¨ç¾ã§ç¬¦å·åŒ–ã«å¤‰æ›ã™ã‚‹ã“ã¨ã¯ã€ŒåŸ‹ã‚è¾¼ã¿ã€ã¨è¨€ã„ã¾ã™ã€‚ãã®å¤‰æ›ã®æ¡ä»¶ã¯ã€æ„å‘³ãŒè¿‘ã„åŸæ–‡ã®å¤‰æ›å¾Œã®åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ã‚‚è·é›¢ãŒè¿‘ã„ã“ã¨ã§ã™ã€‚</p><p>ãã†ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€çµ±ä¸€åŒ–ã•ã‚ŒãŸè¡¨ç¾å½¢å¼ã€ŒåŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ã€ã§ã€Œæ„å‘³ã€ã®è¿‘ã•ãŒå®šé‡çš„ã«è¡¨ç¾ã§åˆ‡ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã‚‚ã¡ã‚ã‚“ã€æ–‡ã«å¯¾ã—ã¦ãƒ™ã‚¯ãƒˆãƒ«ã®åŸ‹ã‚è¾¼ã¿ã¯ã€æ·±å±¤å­¦ç¿’ãªã©ã®æŠ€è¡“ã‚’ä½¿ã£ã¦å¤§é‡ãªäº‹å‰è¨ˆç®—ãŒå¿…è¦ã§ã™ãŒã€è‡ªã‚‰è¨“ç·´ã—ã¦ã‚‚è‰¯ã„ã§ã™ã—ã€å¾Œè¿°ã®Sentence-Transformerã‚’åˆ©ç”¨ã—ã¦ã€å…¬é–‹ã®äº‹å‰è¨“ç·´ã•ã‚ŒãŸå…¬é–‹ã®ãƒ¢ãƒ‡ãƒ«ã‚’ç°¡å˜ã«ä½¿ç”¨ã§ãã¾ã™ã€‚</p><p>ã¨ã“ã‚ã§ã€ã“ã“ã®ã€Œè·é›¢ã€ã®å®šç¾©ã¯ã€ãƒ™ã‚¯ãƒˆãƒ«ã®ãƒ‰ãƒƒãƒˆç©ã€ã‚³ã‚µã‚¤ãƒ³é¡ä¼¼åº¦ã€ãƒ¦ãƒ¼ã‚¯ãƒªãƒƒãƒ‰è·é›¢ãªã©å¤šæ•°ã®å½¢å¼ã¯ã§ãã¾ã™ãŒã€äºˆã‚é¸å®šã—ãŸã‚‰è‰¯ã„ã§ã™ã€‚è¨ˆç®—ã®ç°¡å˜ã•ã‚’è€ƒæ…®ã—ãŸã‚‰ã€ãƒ¦ãƒ¼ã‚¯ãƒªãƒƒãƒ‰è·é›¢ã‚ˆã‚Šãƒ‰ãƒƒãƒˆç©ã€ã‚³ã‚µã‚¤ãƒ³é¡ä¼¼åº¦ã®ã»ã†ãŒã‚ˆãæ¡ç”¨ã•ã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚ãã—ã¦ãƒ™ã‚¯ãƒˆãƒ«ã‚’æ­£è¦åŒ–ï¼ˆé•·ã•1ã«çµ±ä¸€ã™ã‚‹ï¼‰ã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’ä½¿ã£ãŸã‚‰ã€ã¿ã‚“ãªç­‰ä¾¡ã«ãªã‚Šã¾ã™ã€‚</p><p>ã•ã‚‰ã«ã€ã‚‚ã¨ã®æƒ…å ±ã¯æ–‡å­—ã«é™ã‚‰ãšã€ç”»åƒã‚„éŸ³å£°ã€ãƒãƒ«ãƒãƒ¡ãƒ‡ã‚£ã‚¢ã®æƒ…å ±ã‚‚åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ã«å¤‰æ›ã—ã¦æ•°å€¤åŒ–ã«ã—ãŸã‚‰ã€æ–‡å­—ã¨ç”»åƒã®è·é›¢ã‚„ç”»åƒã¨éŸ³å£°ã®è·é›¢ãªã©ã‚‚æ¸¬ã‚‹ã“ã¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚ç”»åƒã‚„éŸ³å£°ã®é¡ä¼¼æ¤œç´¢ã€ã‚¿ã‚°ã‚„èª¬æ˜æ–‡ã¨ã®ç´ä»˜ã‘ãªã©ã„ã‚ã„ã‚å¿œç”¨å ´é¢ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚</p><h3 id="åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ã‚’ä½¿ã£ãŸã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢"><a href="#åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ã‚’ä½¿ã£ãŸã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢" class="headerlink" title="åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ã‚’ä½¿ã£ãŸã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢"></a>åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ã‚’ä½¿ã£ãŸã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢</h3><p>ä½™è«‡ã§ã™ãŒã€RDF (Resource Description Framework) ã‚’ä½¿ç”¨ã—ãŸã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢ã‚‚ã‚ã‚Šã¾ã—ãŸãŒã€é«˜åº¦ãªäº‹å‰å®šç¾©ã¨è¤‡é›‘ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãŒå¿…è¦ã§å®Ÿè£…ã¯é›£ã—ã„ã§ã™ã€‚ä»Šå›ã”ç´¹ä»‹ã—ã¦ã„ã‚‹åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ã®æ‰‹æ³•ã¯ã€äº‹å‰ã®ãƒ¢ãƒ‡ãƒ«ã®è¨“ç·´ã§ã®å¤§é‡ãªè¨ˆç®—ã§ã‚«ãƒãƒ¼ã—ã¦ã„ã¾ã™ã€‚ãŸã ã—ã€ãã®ãƒ¢ãƒ‡ãƒ«ã®è¨ˆç®—ã¯ã€è»Šè¼ªã®ç™ºæ˜ã®ã‚ˆã†ã«ã€å¤§æ‰‹ãŒ1åº¦ä½œã£ãŸã‚‰ã€èª°ã§ã‚‚ç¹°ã‚Šè¿”ã—ã¦åˆ©ç”¨ã§ãã¦ã€æ©æµã‚’å—ã‘ã‚‰ã‚Œã¾ã™ã€‚ã“ã‚Œã¾ã§ä»¥ä¸Šã«AIã®æ°‘ä¸»åŒ–ã‚’é€²ã‚ã¦ã„ã¾ã™ã­ã€‚</p><p>ã•ã¦ã€åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ã‚’ä½¿ã£ãŸã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢ã®æ‰‹é †ã‚’ç°¡å˜ã«ã¾ã¨ã‚ã¾ã™ã€‚</p><ol><li>äº‹å‰ã«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚„ã‚³ãƒ¼ãƒ‘ã‚¹ã®æƒ…å ±ã‚’æ–‡ã‚„æ®µè½ç²’åº¦ã‚’åˆ†å‰²ã—ã€ãã‚Œãã‚Œé«˜æ¬¡å…ƒ(æ•°ç™¾ã‹ã‚‰æ•°åƒæ¬¡å…ƒ)ã®ãƒ™ã‚¯ãƒˆãƒ«ã«åŸ‹ã‚è¾¼ã¿ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°å¤‰æ›ã—ã¦ãŠãã¾ã™ã€‚</li><li>ã‚¯ã‚¨ãƒªæ–‡ã‚‚åŒæ§˜ã«åŸ‹ã‚è¾¼ã¿ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã—ã¦ã€ãƒ™ã‚¯ãƒˆãƒ«åŒ–ã—ã¦ã€ãã‚Œã¨è·é›¢ãŒè¿‘ã„ã‚‚ã®ãŒæ¤œç´¢ã®å€™è£œçµæœã«ãªã‚Šã¾ã™ã€‚</li><li>è¨ˆç®—ã—ãŸè·é›¢ï¼ˆè¿‘ä¼¼åº¦ï¼‰ãŒã®æ¤œç´¢ã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã«ãªã‚Šã¾ã™ã€‚</li><li>ï¼ˆOptionalï¼‰ãã—ã¦ã€æ¤œç´¢ã®å‹•ä½œã‚’é«˜é€ŸåŒ–ã™ã‚‹ãŸã‚ã«ã€äº‹å‰ã®ã‚³ãƒ¼ãƒ‘ã‚¹ã«ãƒ™ã‚¯ãƒˆãƒ«ã«ã‚ˆã£ã¦ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚å¾Œè¿°ã®Simple Neighborsã¯ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®æ§‹é€ ã¨é«˜é€ŸåŒ–æ¤œç´¢ã‚’ã‚„ã£ã¦ãã‚Œã¾ã™ã€‚</li></ol><h2 id="å®Ÿè£…"><a href="#å®Ÿè£…" class="headerlink" title="å®Ÿè£…"></a>å®Ÿè£…</h2><h3 id="ä½¿ã£ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒª"><a href="#ä½¿ã£ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒª" class="headerlink" title="ä½¿ã£ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒª"></a>ä½¿ã£ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒª</h3><p>ä»¥ä¸‹ã®2ã¤ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã£ã¦å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚ã©ã‚Œã‚‚ã‚·ãƒ³ãƒ—ãƒ«ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æŒã£ã¦ä½¿ã„ã‚„ã™ã„ã¨æ€ã„ã¾ã™ã€‚</p><h4 id="Sentence-Transformers"><a href="#Sentence-Transformers" class="headerlink" title="Sentence-Transformers"></a>Sentence-Transformers</h4><p><a href="https://sbert.net/">https://sbert.net/</a></p><p>pipã‚’ä½¿ç”¨ã—ã¦ç°¡å˜ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">pip install sentence-transformers</span><br></pre></td></tr></table></figure><p>Sentence-Transformersã¯ã€ãƒ†ã‚­ã‚¹ãƒˆã ã‘ã§ã¯ãªãã€ç”»åƒã®embeddingã‚‚å¯¾å¿œã§ãã¾ã™ãŒã€ä»Šå›ã¯ãƒ†ã‚­ã‚¹ãƒˆã®æ¤œç´¢ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã—ãŸã„ã®ã§å‰²æ„›ã—ã¾ã™ã€‚ç”»åƒã®æ¤œç´¢ã®è©³ç´°ã¯<a href="https://sbert.net/examples/applications/image-search/README.html">ã“ã®ãƒšãƒ¼ã‚¸</a>ã‚’ã”å‚è€ƒãã ã•ã„ã€‚</p><p>Sentence-Transformersã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒ<a href="https://huggingface.co/sentence-transformers">huggingface</a>ã§å¤šæ•°ã®ãƒ¢ãƒ‡ãƒ«ãŒå…¬é–‹ã—ã¦ã„ã¾ã™ï¼ˆåŸ·ç­†æ™‚ç‚¹124å€‹ï¼‰ã€‚</p><p>ãƒ¢ãƒ‡ãƒ«ã®å‘½åã«ã¤ã„ã¦ã€<code>qa</code>ãŒã¤ã„ã¦ã„ã‚‹ãƒ¢ãƒ‡ãƒ«ã¯ã€(è³ªå•ã€å›ç­”) ãƒšã‚¢ã®ã‚»ãƒƒãƒˆã§ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã•ã‚Œã¦ã€ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢ç”¨ã§ã™ã€‚ã¤ã¾ã‚Šã€ã‚¯ã‚¨ãƒª&#x2F;è³ªå•ãŒä¸ãˆã‚‰ã‚ŒãŸå ´åˆã€é–¢é€£ã™ã‚‹æ–‡ç« ã‚’è¦‹ã¤ã‘ã‚‹ç”¨é€”ã§ã™ã€‚ãã—ã¦ã€<code>multi</code>ãŒã¤ã„ã¦ã„ã‚‹ãƒ¢ãƒ‡ãƒ«ã¯ã€å¤šè¨€èªå¯¾å¿œã®ãƒ¢ãƒ‡ãƒ«ã§ã™ã€‚é•ã†è¨€èªã®ã‚¤ãƒ³ãƒ—ãƒƒãƒˆã§ã‚ã£ã¦ã‚‚ã€æ„å‘³ãŒä¼¼ãŸã‚‚ã®ãªã‚‰åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ã®è·é›¢ãŒè¿‘ã„ã‚ˆã†ã«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã—ã¦ãã‚Œã¾ã™ã€‚ã¡ãªã¿ã«ã€æœ€åˆã‹ã‚‰å¤šè¨€èªã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã‚ãšã€ä¾‹ãˆã°ã¾ãšã¯è‹±èªã§è¨“ç·´ã—ã¦ã€ãã®ãƒ¢ãƒ‡ãƒ«ã‚’æ•™å¸«ãƒ¢ãƒ‡ãƒ«ã¨ã—ã¦åˆ©ç”¨ã—ã€æ›´ã«å¤šè¨€èªã«æ‹¡å¼µã™ã‚‹æ‰‹æ³•ã‚‚ã‚ã‚‹ã‚‰ã—ãã€èˆˆå‘³æ·±ã„ã§ã™ã€‚</p><h4 id="Simple-Neighbors"><a href="#Simple-Neighbors" class="headerlink" title="Simple Neighbors"></a>Simple Neighbors</h4><p><a href="https://simpleneighbors.readthedocs.io/en/latest/">https://simpleneighbors.readthedocs.io/en/latest/</a></p><p>ã‚³ãƒ¼ãƒ‘ã‚¹ã®é …ç›®ã«å¯¾ã—ã¦æœ€è¿‘å‚æ¤œç´¢ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®ç°¡å˜ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã§ã™ã€‚<br><code>Annoy</code>ã€<code>Sklearn</code>ã€<code>BruteForcePurePython</code>ã®3ã¤ã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ãŒã€<code>Annoy</code>ãŒæ¨å¥¨ã—ã¦ã„ã¾ã™ã®ã§ã€ãã‚Œã‚‚ä¸€ç·’ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">pip install simpleneighbors annoy</span><br></pre></td></tr></table></figure><p>é«˜é€Ÿã«æ¤œç´¢ã™ã‚‹ãŸã‚ã€äº‹å‰ã«indexã®ãƒ„ãƒªãƒ¼ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã¤ã¾ã‚Šã€æ¤œç´¢å¯¾è±¡ã®ãƒ‡ãƒ¼ã‚¿ã‚’å¢—åŠ ã—ãŸã‚‰ã€æ”¹ã‚ã¦ãƒ„ã‚¤ãƒªãƒ¼ã®ãƒ“ãƒ«ãƒ‰ãŒå¿…è¦ã¨ã„ã†ç‚¹ã«è¦æ³¨æ„ã§ã™ã€‚</p><p>ã¾ãŸã€N-Neighborã‚’æ¢ã™çµæœã¯è¿‘ä¼¼çš„ãªçµæœã«ãªã‚‹ã“ã¨ã«ã‚‚ã”æ³¨æ„ãã ã•ã„ã€‚ã¨ã¯ã„ãˆã€è¨“ç·´ã®ãƒ¢ãƒ‡ãƒ«ã‹ã‚‰æ¤œç´¢çµæœã®ç²¾åº¦ã¯ã™ã¹ã¦æœ‰é™ã§ã‚ã‚‹ã®ã§ã€è¿‘ä¼¼ã¨è¨€ã£ã¦ã‚‚ååˆ†ãªç²¾åº¦ãŒä¿è¨¼ã§ãã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚ï¼ˆå‚è€ƒ: <a href="https://en.wikipedia.org/wiki/Nearest_neighbor_search#Approximate_nearest_neighbor">Approximate Nearest Neighbors</a>ï¼‰</p><h3 id="Semantic-Searchã®å®Ÿè£…"><a href="#Semantic-Searchã®å®Ÿè£…" class="headerlink" title="Semantic Searchã®å®Ÿè£…"></a>Semantic Searchã®å®Ÿè£…</h3><p>ä»Šå›ã¯ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚è€ƒã—ã¦ã€å®Ÿè£…ã—ã¦ã¿ã¾ã—ãŸã€‚</p><p><a href="https://www.sbert.net/examples/applications/semantic-search/README.html">https://www.sbert.net/examples/applications/semantic-search/README.html</a></p><p>ã¾ãšã¯ã€<a href="https://www.youtube.com/watch?v=9tSEByUy47o&ab_channel=FUTURERecruiting/%E3%83%95%E3%83%A5%E3%83%BC%E3%83%81%E3%83%A3%E3%83%BC%E6%A0%AA%E5%BC%8F%E4%BC%9A%E7%A4%BE">ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®ä¼šç¤¾ç´¹ä»‹ãƒšãƒ¼ã‚¸</a>ã®YouTubeå‹•ç”»ã®ã‚»ãƒªãƒ•ã‚’<code>corpus/future.txt</code>ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã—ã¾ã™ã€‚ä»Šå›ã¯æ‰‹å‹•ã§å‰å‡¦ç†ã¨ã—ã¦æ–‡ã¨æ–‡ã®é–“ã«æ”¹è¡Œã§åŒºåˆ‡ã‚Šã¾ã—ãŸã€‚<br>ï¼ˆ<em>â€»YouTubeã‹ã‚‰è‡ªå‹•ç”Ÿæˆã®ã‚»ãƒªãƒ•ã§èª¤å­—ãªã©ãŒå…¥ã£ã¦ã„ã¾ã™ã€‚ä¸€æ—¦ç„¡è¦–ã—ã¾ã™ã€‚<br>ãŸã ã—ã€ã€Œãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã€ãŒã€ŒQã¡ã‚ƒã‚“ã€ã«ãªã£ã¦ã„ã‚‹ã®ã¯ã¿ã£ã¨ã‚‚ãªã„ã®ã§æ‰‹ä¿®æ­£ã‚’åŠ ãˆã¾ã—ãŸã€‚</em>ï¼‰</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">çš†ã•ã‚“ã€ã“ã‚“ã«ã¡ã¯ã€‚</span><br><span class="line">ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®Webã‚»ãƒŸãƒŠãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹ã„ãŸã ãã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚</span><br><span class="line">ã“ã®å‹•ç”»ã§ã¯ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®ä¼šç¤¾æ¦‚è¦ã¨ãƒ“ã‚¸ãƒã‚¹ã«ã¤ã„ã¦ã”ç´¹ä»‹ã—ã¾ã™ã€‚</span><br><span class="line">æ—©é€Ÿã€ä¼šç¤¾æ¦‚è¦ã‹ã‚‰ã”ç´¹ä»‹ã—ã¾ã™ã€‚</span><br><span class="line">ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã¯1989å¹´ã«ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒç«‹ã¡ä¸Šã’ãŸITã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°ä¼æ¥­ã§ã™ã€‚</span><br><span class="line">å‰µæ¥­æ™‚ã‹ã‚‰ã€ITã§ãƒ“ã‚¸ãƒã‚¹ã‚’ç‰½å¼•ã™ã‚‹ã“ã¨ã‚’ã‚³ãƒ³ã‚»ãƒ—ãƒˆã«æ²ã’ã€ã„ã‚ã‚†ã‚‹DXã«ã‚ãŸã‚‹ã“ã¨ã‚’æ¨é€²ã—ã¦ãã¾ã—ãŸã€‚</span><br><span class="line">ã¾ãŸã€åº—é ­å…¬é–‹æ™‚ã«ã¯æ—¥æœ¬ã§åˆã‚ã¦ITã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°æ¥­ã¨ã—ã¦äº‹æ¥­ç™»éŒ²ã‚’ã•ã‚ŒãŸã®ã‚‚ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã§ã™ã€‚</span><br><span class="line">æ—¥æœ¬åˆã®ITã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°ä¼æ¥­ã§ã‚ã‚Šã€DXã‚’30å¹´ä»¥ä¸Šæ¨é€²ã—ã¦ããŸä¼šç¤¾ã¨è¦šãˆã¦ã„ãŸã ã‘ã‚Œã°ã¨æ€ã„ã¾ã™ã€‚</span><br><span class="line">æ¥­ç¸¾ã‚‚æ˜¨å¹´ã¯éå»æœ€é«˜ã‚’æ›´æ–°ã™ã‚‹ãªã©éå¸¸ã«é †èª¿ã§ã™ã€‚</span><br><span class="line">æ¬¡ã«ã€ç§ãŸã¡ãŒå¤§åˆ‡ã«ã—ã¦ã„ã‚‹è€ƒãˆæ–¹ã€Our Philosophyã‚’ã”ç´¹ä»‹ã—ã¾ã™ã€‚</span><br><span class="line">ã€Œæœ¬è³ªã‚’è¦‹æ¥µã‚ã‚‹ã€ã€ã€Œå¤§ç¾©ã‚’å•ã†ã€ã€ã€Œåˆã‚ã¦ã«æŒ‘æˆ¦ã™ã‚‹ã€ã€ã€Œé›£é¡Œã‚’æ¥½ã—ã‚€ã€ã€ã€Œãªã„ã‚‚ã®ã¯ã¤ãã‚‹ã€ã€‚</span><br><span class="line">ä¾‹ãˆã°ã€å‰µæ¥­å½“ç¤¾ã‹ã‚‰ä»–ã®ä¼šç¤¾ãŒãªã‹ãªã‹æ‰‹ãŒã‘ãªã„ã‚ˆã†ãªæ¡ˆä»¶ã§ã‚ã£ãŸã‚Šã€é›£ã—ã„æ¡ˆä»¶ã«ç©æ¥µçš„ã«ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã¦ãã¾ã—ãŸã®ã§ã€åˆã‚ã¦ã«æŒ‘æˆ¦ã™ã‚‹é›£é¡Œã‚’æ¥½ã—ã‚€ã§ã‚ã£ãŸã‚Šã€ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒ‹ãƒ¡ãŒä½œã‚Šä¸Šã’ãŸä¼šç¤¾ã¨ã„ã†ã¨ã“ã‚ã‚‚ã‚ã‚Šã€ãªã„ã‚‚ã®ã¯ä½•ã§ã‚‚è‡ªåˆ†ãŸã¡ã§ä½œã£ã¦ã—ã¾ãŠã†ã€ãã†ã„ã£ãŸã‚«ãƒ«ãƒãƒ£ãƒ¼ã‚‚æ·±ãæµ¸é€ã—ã¦ã„ã¾ã™ã€‚</span><br><span class="line">ç¶šã„ã¦ã€ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚</span><br><span class="line">ãŠå®¢æ§˜ã®æœªæ¥æ´»ç”¨ã‚’æœ€å¤§åŒ–ã—ã€è‡ªã‚‰ã‚‚æ–°ãŸãªä¾¡å€¤ã‚’å‰µé€ ã™ã‚‹ã€‚</span><br><span class="line">ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã‚°ãƒ«ãƒ¼ãƒ—ã«ã¯å¤§ãã2ã¤ã®äº‹æ¥­ä½“ãŒã‚ã‚Šã¾ã™ã€‚</span><br><span class="line">1ã¤ã¯ã€ITã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°&amp;ã‚µãƒ¼ãƒ“ã‚¹äº‹æ¥­ã§ã™ã€‚</span><br><span class="line">ã“ã¡ã‚‰ã¯ãŠå®¢æ§˜å‘ã‘ã®èª²é¡Œè§£æ±ºã‚’ã—ã¦ã„ãäº‹æ¥­ç¾¤ã§ã€ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆãŒã‚³ã‚¢ã‚«ãƒ³ãƒ‘ãƒ‹ãƒ¼ã¨ã—ã¦ã€ITã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°ã‚’ç‰½å¼•ã—ã¦ã„ã¾ã™ã€‚</span><br><span class="line">ã‚‚ã†ä¸€ã¤ã¯ãƒ“ã‚¸ãƒã‚¹ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³äº‹æ¥­ã§ã™ã€‚</span><br><span class="line">ã“ã¡ã‚‰ã¯ã“ã‚Œã¾ã§ã®ãƒã‚¦ãƒã‚¦ã‚’ç”Ÿã‹ã—ã¦ã€è‡ªç¤¾ã§ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç«‹ã¡ä¸Šã’ã‚ˆã†ã¨ã„ã†ã‚‚ã®ã§ã€ã¾ã•ã«ãŠå®¢æ§˜ã®æœªæ¥æ´»ç”¨ã‚’æœ€å¤§åŒ–ã™ã‚‹ITã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°ã¨ã€è‡ªåˆ†ãŸã¡ã§ã‚‚æ–°ãŸãªä¾¡å€¤ã‚’å‰µé€ ã—ã¦ã„ãä¸¡è»¸ã§äº‹æ¥­ã‚’å±•é–‹ã—ã¦ã„ã¾ã™ã€‚</span><br><span class="line">ã“ã“ã‹ã‚‰ã¯ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®ãƒ“ã‚¸ãƒã‚¹ã«ã¤ã„ã¦ã”ç´¹ä»‹ã—ã¾ã™ã€‚</span><br><span class="line">ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®ãŠå®¢æ§˜ã¯ã€æ§˜ã€…ãªæ¥­ç•Œãã—ã¦ãã‚Œãã‚Œã®æ¥­ç•Œã‚’ä»£è¡¨ã™ã‚‹ã‚ˆã†ãªä¼æ¥­æ§˜ã§ã™ã€‚</span><br><span class="line">ç§ãŸã¡ã¯ã€ç§ãŸã¡ã®å¼·ã¿ã§ã‚ã‚‹ITã‚’ç”¨ã„ã¦ã€ãã‚Œãã‚Œã®ãŠå®¢æ§˜ã®çµŒå–¶èª²é¡Œã‚’è§£æ±ºã—ãŸã‚Šã€ã‚ã‚‹ã„ã¯ãŠå®¢æ§˜ã¨ä¸€ç·’ã«æ¥­ç•Œæ”¹é©ã‚’IPæˆ¦ç•¥ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã¨ã—ã¦ã«ãªã£ã¦ã„ã¾ã™ã€‚</span><br><span class="line">ç§ãŸã¡ã®ãƒ“ã‚¸ãƒã‚¹ã®ç‰¹å¾´ã‚’ã”ç´¹ä»‹ã—ã¾ã™ã€‚</span><br><span class="line">å‰µæ¥­å½“åˆã‹ã‚‰ã€ãŠå®¢æ§˜ã®çµŒå–¶æˆ¦ç•¥ã€ãã‚Œã‚’é”æˆã™ã‚‹ãŸã‚ã®æ¥­å‹™æ”¹é©ã€ãã—ã¦ãã‚Œã‚’æ”¯ãˆã¦ã„ã‚‹ã‚·ã‚¹ãƒ†ãƒ æ”¹é©ã€‚</span><br><span class="line">ã“ã‚Œã‚‰ã‚’ä¸‰ä½ä¸€ä½“ã§æ‰ãˆã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¨é€²ã—ã¦ãã¾ã—ãŸã€‚</span><br><span class="line">æ˜¨ä»Šã€DXã¨ç››ã‚“ã«å«ã°ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸãŒã€ç§ãŸã¡ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã¯çµŒå–¶ã¨æ¥­å‹™ã€ãã—ã¦ãã®è£ã«ã‚ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã¯åˆ‡ã£ã¦ã‚‚åˆ‡ã‚Šé›¢ã›ãªã„ã‚‚ã®ã ã¨å‰µæ¥­å½“åˆã‹ã‚‰è€ƒãˆã¦ã€ãã‚Œã‚‰ã‚’ä¸‰ä½ä¸€ä½“ã§æ‰ãˆã¦æ¨é€²ã™ã‚‹ã¨ã„ã†ã“ã¨ã‚’30å¹´ä»¥ä¸Šç¶šã‘ã¦ãã¾ã—ãŸã€‚</span><br><span class="line">ã•ã‚‰ã«è©³ç´°ã«ãƒ“ã‚¸ãƒã‚¹ã®æµã‚Œã‚„ä»–ç¤¾ã¨ã®é•ã„ã«ã¤ã„ã¦ã”ç´¹ä»‹ã—ã¾ã™ã€‚</span><br><span class="line">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã©ã‚“ãªæœªæ¥ã‚’æãã®ã‹ã€æˆ¦ç•¥ã‚’ç«‹ã¦ã€è¨ˆç”»ã«è½ã¨ã—ã¦ã€ãã®è¨ˆç”»ã«å‰‡ã£ã¦ã‚·ã‚¹ãƒ†ãƒ çš„ã«å…·ç¾åŒ–ã—ã€å‡ºæ¥ä¸ŠãŒã£ãŸã‚·ã‚¹ãƒ†ãƒ ãŒä¾¡å€¤ã‚’å‰µé€ ã™ã‚‹ã¨ã„ã†æµã‚ŒãŒä¸€èˆ¬çš„ã§ã™ã€‚</span><br><span class="line">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ¨é€²ä½“åˆ¶ã§è¦‹ã¦ã¿ã‚‹ã¨ã€ä¸€èˆ¬çš„ã«ã¯å¾—æ„ãªé ˜åŸŸã”ã¨ã«ä¼šç¤¾ãŒè¤‡æ•°ç¤¾ã«ã¾ãŸãŒã£ã¦è¡Œã£ã¦ã„ã‚‹ã‚±ãƒ¼ã‚¹ãŒå¤šã„ã§ã™ã€‚</span><br><span class="line">ä¾‹ãˆã°ã€æœªæ¥ã‚’æãã¨ã“ã‚ã¯ã‚³ãƒ³ã‚µãƒ«ç³»ã®ä¼æ¥­æ§˜ãŒè¡Œã£ã¦ã€å…·ç¾åŒ–ã—ã¦ã„ãã¨ã“ã‚ã¯SIerç³»ã®ä¼æ¥­æ§˜ãŒè¡Œã£ã¦ã¨ã„ã£ãŸå½¢ã§ã™ã€‚</span><br><span class="line">ã‚ã‚‹ã„ã¯ã€ä¸€ã¤ã®ä¼šç¤¾ã§ã‚ã‚‹ã‘ã‚Œã©ã€ã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆã¨ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ã‚ˆã†ã«è·ç¨®ãŒåˆ†ã‹ã‚Œã¦ã„ã‚‹ã‚±ãƒ¼ã‚¹ã‚‚å¤šã„ã‹ãªã¨æ€ã„ã¾ã™ã€‚</span><br><span class="line">ã§ã¯ã€ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã¯ã©ã†ã‹ã¨è¨€ã„ã¾ã™ã¨ã€ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ã¯å›³ã®é€šã‚Šã€æˆ¦ç•¥ã‹ã‚‰ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰é‹ç”¨ã¾ã§ä¸€æ°—é€šè²«ã§ã«ãªã£ã¦ã„ã¾ã™ã€‚</span><br><span class="line">ã¾ãŸã€è·ç¨®ã‚‚ITã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆè·ä¸€è§¦è€…ã§ã™ã€‚</span><br><span class="line">æˆ¦ç•¥ã‚’ç«‹ã¦ã‚‹ã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆã¨ã—ã¦ã®éƒ¨åˆ†ã¨ã€ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã—ã¦ã„ãã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦ã®éƒ¨åˆ†ã€ã©ã¡ã‚‰ã‚‚ä¸€äººä¸€äººã®ITã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆãŒæ‹…ã£ã¦ã„ã¾ã™ã€‚</span><br><span class="line">ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ™ãƒ«ã§ç›¸æ‰‹ã‚’ç†è§£ã—ã¦ã„ã‚‹ITã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆãŒæ‹…ã†ã‹ã‚‰ã“ãã€çµµã«æã„ãŸé¤…ã§çµ‚ã‚ã‚‹ã¨ã„ã†ã®ã§ã¯ãªãã¦ã€ã—ã£ã‹ã‚Šã¨ä¾¡å€¤ã‚’æƒ³åƒã™ã‚‹ã¨ã“ã‚ã¾ã§ä¼´èµ°ã§ãã‚‹ã€‚</span><br><span class="line">ãã—ã¦ãã‚Œã‚’30å¹´ä»¥ä¸Šç¶šã‘ã¦ããŸã¨ã„ã†ã®ã¯ãªã‹ãªã‹ä»–ã®ä¼šç¤¾ã«ã¯ç°¡å˜ã«çœŸä¼¼ã§ããªã„ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ãªã‚‰ã§ã¯ã®å¼·ã¿ã«ãªã£ã¦ã„ã¾ã™ã€‚</span><br><span class="line">ã¾ãŸã€çš†ã•ã‚“ã®ã‚­ãƒ£ãƒªã‚¢ã¨ã„ã†ã®ã‚’è€ƒãˆã¦ã¿ã¦ã„ãŸã ã„ã¦ã‚‚ã€ã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆã¨ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã€ã©ã¡ã‚‰ã‚‚ä¸€ã¤ã®ä¼šç¤¾ã§çµŒé¨“ã§ãã‚‹ã¨ã„ã†ã®ã¯ã‚­ãƒ£ãƒªã‚¢ã®å¹…ãŒåºƒãŒã‚Šã€å¸‚å ´ä¾¡å€¤ã®é«˜ã„äººæã«æˆé•·ã§ãã‚‹ã¨æ€ã£ã¦ã„ãŸã ã‘ã‚‹ã¨æ€ã„ã¾ã™ã€‚</span><br><span class="line">æœ€å¾Œã«ã€ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®ã“ã¨ã‚’ã‚‚ã£ã¨çŸ¥ã‚ŠãŸã„æ–¹ã«å„ç¨®ãƒ¡ãƒ‡ã‚£ã‚¢ã‚’ã”ç´¹ä»‹ã—ã¾ã™ã€‚</span><br><span class="line">ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®ã‚ªã‚¦ãƒ³ãƒ‰ãƒ¡ãƒ‡ã‚£ã‚¢æœªæ¥å ±ã§ã¯ã€ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®äººã«ç„¦ç‚¹ã‚’å½“ã¦ã¦ã‚­ãƒ£ãƒªã‚¢ã‚„ã‚«ãƒ«ãƒãƒ£ãƒ¼ã‚’ã”ç´¹ä»‹ã—ã¦ã„ã¾ã™ã€‚</span><br><span class="line">ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ãŒå¤§åˆ‡ã«ã—ã¦ã„ã‚‹æŠ€è¡“ã«ã¤ã„ã¦ã‚‚ã£ã¨æ·±ãçŸ¥ã‚ŠãŸã„æ–¹ã¯ã€ãƒ†ãƒƒã‚¯ãƒ–ãƒ­ã‚°ã‚„ãƒ†ãƒƒã‚¯ã‚­ãƒ£ã‚¹ãƒˆãŒãŠã™ã™ã‚ã§ã™ã€‚</span><br><span class="line">æœ€å¾Œã¾ã§ã”è¦§ã„ãŸã ãã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚</span><br><span class="line">çš†ã•ã‚“ã¨é¸è€ƒã§ãŠä¼šã„ã§ãã‚‹ã“ã¨ã‚’æ¥½ã—ã¿ã«ã—ã¦ãŠã‚Šã¾ã™ã€‚</span><br></pre></td></tr></table></figure><p>ä»Šå›ã¯<a href="https://www.sbert.net/docs/pretrained_models.html">ã“ã®ãƒšãƒ¼ã‚¸</a>ã«ç´¹ä»‹ã—ãŸãƒ¢ãƒ‡ãƒ«ã®ä¸­ã«ã€multiè¨€èªå¯¾å¿œã®ãƒ¢ãƒ‡ãƒ«ã‚’ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã€äºˆã‚ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ç”¨æ„ã—ã¾ã™ã€‚ãƒ¢ãƒ‡ãƒ«å<code>name</code>ã€ãƒ™ã‚¯ãƒˆãƒ«ã®æ¬¡å…ƒ<code>dims</code>ã€è·é›¢é–¢æ•°<code>metric</code>ã®å±æ€§ã‚’å®šç¾©ã—ã¾ã™ã€‚æ–¹ä¾¿ä¸Šã€åå‰ã§ãƒ¢ãƒ‡ãƒ«ã‚’å¼•ãé–¢æ•°<code>find_model_with_name</code>ã‚‚å®šç¾©ã—ã¾ã™ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">models = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment"># Multi-lingual model of Universal Sentence Encoder for 15 languages:</span></span><br><span class="line">        <span class="comment"># Arabic, Chinese, Dutch, English, French, German, Italian, Korean, Polish, Portuguese, Russian, Spanish, Turkish.</span></span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;distiluse-base-multilingual-cased-v1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;dims&quot;</span>: <span class="number">512</span>,</span><br><span class="line">        <span class="string">&quot;metric&quot;</span>: <span class="string">&quot;angular&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment"># Multi-lingual model of Universal Sentence Encoder for 50 languages.</span></span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;distiluse-base-multilingual-cased-v2&quot;</span>,</span><br><span class="line">        <span class="string">&quot;dims&quot;</span>: <span class="number">512</span>,</span><br><span class="line">        <span class="string">&quot;metric&quot;</span>: <span class="string">&quot;angular&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment"># Multi-lingual model of paraphrase-multilingual-MiniLM-L12-v2, extended to 50+ languages.</span></span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;paraphrase-multilingual-MiniLM-L12-v2&quot;</span>,</span><br><span class="line">        <span class="string">&quot;dims&quot;</span>: <span class="number">384</span>,</span><br><span class="line">        <span class="string">&quot;metric&quot;</span>: <span class="string">&quot;angular&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment"># Multi-lingual model of paraphrase-mpnet-base-v2, extended to 50+ languages.</span></span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;paraphrase-multilingual-mpnet-base-v2&quot;</span>,</span><br><span class="line">        <span class="string">&quot;dims&quot;</span>: <span class="number">768</span>,</span><br><span class="line">        <span class="string">&quot;metric&quot;</span>: <span class="string">&quot;angular&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment"># This model was tuned for semantic search:</span></span><br><span class="line">        <span class="comment"># Given a query/question, if can find relevant passages.</span></span><br><span class="line">        <span class="comment"># It was trained on a large and diverse set of (question, answer) pairs.</span></span><br><span class="line">        <span class="comment"># 215M (question, answer) pairs from diverse sources.</span></span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;multi-qa-mpnet-base-dot-v1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;dims&quot;</span>: <span class="number">768</span>,</span><br><span class="line">        <span class="string">&quot;metric&quot;</span>: <span class="string">&quot;dot&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment"># This model was tuned for semantic search:</span></span><br><span class="line">        <span class="comment"># Given a query/question, if can find relevant passages.</span></span><br><span class="line">        <span class="comment"># It was trained on a large and diverse set of (question, answer) pairs.</span></span><br><span class="line">        <span class="comment"># 215M (question, answer) pairs from diverse sources.</span></span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;multi-qa-mpnet-base-cos-v1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;dims&quot;</span>: <span class="number">768</span>,</span><br><span class="line">        <span class="string">&quot;metric&quot;</span>: <span class="string">&quot;angular&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find_model_with_name</span>(<span class="params">models, name</span>):</span><br><span class="line">    <span class="keyword">for</span> model <span class="keyword">in</span> models:</span><br><span class="line">        <span class="keyword">if</span> model[<span class="string">&quot;name&quot;</span>] == name:</span><br><span class="line">            <span class="keyword">return</span> model</span><br><span class="line">    <span class="keyword">raise</span> NameError(<span class="string">f&quot;Could not find model <span class="subst">&#123;name&#125;</span>.&quot;</span>)</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹ã¯SemanticSearchã‚¯ãƒ©ã‚¹ã§ã‚·ãƒ³ãƒ—ãƒ«ã«ãƒ™ãƒ¼ã‚·ãƒƒã‚¯ãªæ©Ÿèƒ½ï¼ˆãƒ¢ãƒ‡ãƒ«ã‚’èª­ã¿è¾¼ã¿ã€corpusã®èª­ã¿è¾¼ã¿ã€ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ã¦æ–‡ã‚’ãƒ™ã‚¯ãƒˆãƒ«åŒ–ã™ã—ã€vector tree indexã®ãƒ“ãƒ«ãƒ‰ã€ãã—ã¦ã€Nå€‹ã®æœ€è¿‘å‚æ¢ç´¢ï¼‰ã‚’å®Ÿè£…ã—ã¾ã™ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sentence_transformers <span class="keyword">import</span> SentenceTransformer, util</span><br><span class="line"><span class="keyword">from</span> simpleneighbors <span class="keyword">import</span> SimpleNeighbors</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SemanticSearch</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, model</span>):</span><br><span class="line">        self.encoder = SentenceTransformer(model[<span class="string">&quot;name&quot;</span>])</span><br><span class="line">        self.index = SimpleNeighbors(model[<span class="string">&quot;dims&quot;</span>], model[<span class="string">&quot;metric&quot;</span>])</span><br><span class="line">        <span class="keyword">if</span> model[<span class="string">&quot;metric&quot;</span>] == <span class="string">&quot;angular&quot;</span>:</span><br><span class="line">            self.metric_func = util.cos_sim</span><br><span class="line">        <span class="keyword">elif</span> model[<span class="string">&quot;metric&quot;</span>] == <span class="string">&quot;dot&quot;</span>:</span><br><span class="line">            self.metric_func = util.dot_score</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">load_corpus</span>(<span class="params">self, filename</span>):</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">f&quot;corpus/<span class="subst">&#123;filename&#125;</span>&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            self.feed(f.read().split(<span class="string">&quot;\n&quot;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">feed</span>(<span class="params">self, sentences</span>):</span><br><span class="line">        <span class="keyword">for</span> sentence <span class="keyword">in</span> sentences:</span><br><span class="line">            vector = self.encoder.encode(sentence)</span><br><span class="line">            self.index.add_one(sentence, vector)</span><br><span class="line">        self.index.build()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">find_nearest</span>(<span class="params">self, query, n=<span class="number">5</span></span>):</span><br><span class="line">        vector = self.encoder.encode(query)</span><br><span class="line">        nearests = self.index.nearest(vector, n)</span><br><span class="line">        res = []</span><br><span class="line">        <span class="keyword">for</span> neighbor <span class="keyword">in</span> nearests:</span><br><span class="line">            dist = self.metric_func(vector, self.index.vec(neighbor))</span><br><span class="line">            res.append((neighbor, <span class="built_in">float</span>(dist)))</span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure><p>æ—©é€Ÿã€ã‚¯ã‚¨ãƒªã‚’æŠ•ã’ã¦ã¿ã¾ã™ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    model = find_model_with_name(</span><br><span class="line">        models, <span class="string">&quot;distiluse-base-multilingual-cased-v2&quot;</span>)</span><br><span class="line">    ss = SemanticSearch(model)</span><br><span class="line">    ss.load_corpus(<span class="string">&quot;future.txt&quot;</span>)</span><br><span class="line"></span><br><span class="line">    res = ss.find_nearest(<span class="string">&quot;ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã¯ã„ã¤å‰µç«‹ã•ã‚Œã¾ã—ãŸã‹ã€‚&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> r <span class="keyword">in</span> res:</span><br><span class="line">        <span class="built_in">print</span>(r)</span><br></pre></td></tr></table></figure><p><strong>å‡ºåŠ›çµæœ1</strong></p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">(&#x27;ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã¯1989å¹´ã«ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒç«‹ã¡ä¸Šã’ãŸITã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°ä¼æ¥­ã§ã™ã€‚&#x27;, 0.2547425627708435)</span><br><span class="line">(&#x27;ã§ã¯ã€ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã¯ã©ã†ã‹ã¨è¨€ã„ã¾ã™ã¨ã€ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ã¯å›³ã®é€šã‚Šã€æˆ¦ç•¥ã‹ã‚‰ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰é‹ç”¨ã¾ã§ä¸€æ°—é€šè²«ã§ã«ãªã£ã¦ã„ã¾ã™ã€‚&#x27;, 0.19687587022781372)</span><br><span class="line">(&#x27;å‰µæ¥­æ™‚ã‹ã‚‰ã€ITã§ãƒ“ã‚¸ãƒã‚¹ã‚’ç‰½å¼•ã™ã‚‹ã“ã¨ã‚’ã‚³ãƒ³ã‚»ãƒ—ãƒˆã«æ²ã’ã€ã„ã‚ã‚†ã‚‹DXã«ã‚ãŸã‚‹ã“ã¨ã‚’æ¨é€²ã—ã¦ãã¾ã—ãŸã€‚&#x27;, 0.1668681502342224)</span><br><span class="line">(&#x27;ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã‚°ãƒ«ãƒ¼ãƒ—ã«ã¯å¤§ãã2ã¤ã®äº‹æ¥­ä½“ãŒã‚ã‚Šã¾ã™ã€‚&#x27;, 0.164341002702713)</span><br><span class="line">(&#x27;æ˜¨ä»Šã€DXã¨ç››ã‚“ã«å«ã°ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸãŒã€ç§ãŸã¡ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã¯çµŒå–¶ã¨æ¥­å‹™ã€ãã—ã¦ãã®è£ã«ã‚ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã¯åˆ‡ã£ã¦ã‚‚åˆ‡ã‚Šé›¢ã›ãªã„ã‚‚ã®ã ã¨å‰µæ¥­å½“åˆã‹ã‚‰è€ƒãˆã¦ã€ãã‚Œã‚‰ã‚’ä¸‰ä½ä¸€ä½“ã§æ‰ãˆã¦æ¨é€²ã™ã‚‹ã¨ã„ã†ã“ã¨ã‚’30å¹´ä»¥ä¸Šç¶šã‘ã¦ãã¾ã—ãŸã€‚&#x27;, 0.16331210732460022)</span><br></pre></td></tr></table></figure><p>æ–‡ç« ã«ã€Œå‰µç«‹ã€ãªã©ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒç™»å ´ã—ã¦ã„ãªã„ã§ã™ã‘ã©ã€1å€‹ç›®è¿‘ä¼¼åº¦é«˜ã„æ–‡ï¼ˆæ™‚é–“ã«é–¢ã—ã¦è¿°ã¹ã¦ã„ã‚‹ã‹ã‚‰ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ï¼‰ãŒã†ã¾ããƒ’ãƒƒãƒˆã—ã¦ã„ã¾ã™ã€‚</p><p>ä»Šåº¦ã¯ä»–ã®ãƒ¢ãƒ‡ãƒ«ã§ã‚„ã£ã¦ã¿ã¾ã™ã€‚<br>ãƒ¢ãƒ‡ãƒ«ï¼š<code>paraphrase-multilingual-MiniLM-L12-v2</code><br>ã‚¯ã‚¨ãƒªï¼š<code>ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã¯ã„ã¤å‰µç«‹ã•ã‚Œã¾ã—ãŸã‹ã€‚</code><br><strong>å‡ºåŠ›çµæœ2</strong></p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">(&#x27;æ˜¨ä»Šã€DXã¨ç››ã‚“ã«å«ã°ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸãŒã€ç§ãŸã¡ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã¯çµŒå–¶ã¨æ¥­å‹™ã€ãã—ã¦ãã®è£ã«ã‚ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã¯åˆ‡ã£ã¦ã‚‚åˆ‡ã‚Šé›¢ã›ãªã„ã‚‚ã®ã ã¨å‰µæ¥­å½“åˆã‹ã‚‰è€ƒãˆã¦ã€ãã‚Œã‚‰ã‚’ä¸‰ä½ä¸€ä½“ã§æ‰ãˆã¦æ¨é€²ã™ã‚‹ã¨ã„ã†ã“ã¨ã‚’30å¹´ä»¥ä¸Šç¶šã‘ã¦ãã¾ã—ãŸã€‚&#x27;, 0.45087340474128723)</span><br><span class="line">(&#x27;æ—¥æœ¬åˆã®ITã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°ä¼æ¥­ã§ã‚ã‚Šã€DXã‚’30å¹´ä»¥ä¸Šæ¨é€²ã—ã¦ããŸä¼šç¤¾ã¨è¦šãˆã¦ã„ãŸã ã‘ã‚Œã°ã¨æ€ã„ã¾ã™ã€‚&#x27;, 0.3921096622943878)</span><br><span class="line">(&#x27;ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã¯1989å¹´ã«ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒç«‹ã¡ä¸Šã’ãŸITã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°ä¼æ¥­ã§ã™ã€‚&#x27;, 0.36329418420791626)</span><br><span class="line">(&#x27;å‰µæ¥­å½“åˆã‹ã‚‰ã€ãŠå®¢æ§˜ã®çµŒå–¶æˆ¦ç•¥ã€ãã‚Œã‚’é”æˆã™ã‚‹ãŸã‚ã®æ¥­å‹™æ”¹é©ã€ãã—ã¦ãã‚Œã‚’æ”¯ãˆã¦ã„ã‚‹ã‚·ã‚¹ãƒ†ãƒ æ”¹é©ã€‚&#x27;, 0.3592120409011841)</span><br><span class="line">(&#x27;å‰µæ¥­æ™‚ã‹ã‚‰ã€ITã§ãƒ“ã‚¸ãƒã‚¹ã‚’ç‰½å¼•ã™ã‚‹ã“ã¨ã‚’ã‚³ãƒ³ã‚»ãƒ—ãƒˆã«æ²ã’ã€ã„ã‚ã‚†ã‚‹DXã«ã‚ãŸã‚‹ã“ã¨ã‚’æ¨é€²ã—ã¦ãã¾ã—ãŸã€‚&#x27;, 0.35177189111709595)</span><br></pre></td></tr></table></figure><p>çµæœãŒå¤‰ã‚ã‚Šã¾ã—ãŸãŒã€ã€Œæ˜¨ä»Šã€ã‚„ã€Œå‰µæ¥­ã€ã‚„ã€Œ30å¹´ã€ãŒå«ã¾ã‚ŒãŸæ–‡ã¯ãƒˆãƒƒãƒ—ã«ãªã£ã¦ã„ã¾ã™ã€‚ã¾ã‚ã¾ã‚è¨±å®¹ã§ãã‚‹çµæœã§ã—ã‚‡ã†ã€‚</p><p>ä»–ã®è³ªå•ã¨ãƒ¢ãƒ‡ãƒ«ã§ã‚‚ã‚„ã£ã¦ã¿ã¾ã™ã€‚</p><p>ãƒ¢ãƒ‡ãƒ«ï¼š<code>paraphrase-multilingual-MiniLM-L12-v2</code><br>ã‚¯ã‚¨ãƒªï¼š<code>æœªæ¥å ±ã¯ãªã‚“ã§ã™ã‹ã€‚</code></p><p><strong>å‡ºåŠ›çµæœ3</strong></p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">(&#x27;ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®ã‚ªã‚¦ãƒ³ãƒ‰ãƒ¡ãƒ‡ã‚£ã‚¢æœªæ¥å ±ã§ã¯ã€ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®äººã«ç„¦ç‚¹ã‚’å½“ã¦ã¦ã‚­ãƒ£ãƒªã‚¢ã‚„ã‚«ãƒ«ãƒãƒ£ãƒ¼ã‚’ã”ç´¹ä»‹ã—ã¦ã„ã¾ã™ã€‚&#x27;, 0.5177506804466248)</span><br><span class="line">(&#x27;æœ€å¾Œã«ã€ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®ã“ã¨ã‚’ã‚‚ã£ã¨çŸ¥ã‚ŠãŸã„æ–¹ã«å„ç¨®ãƒ¡ãƒ‡ã‚£ã‚¢ã‚’ã”ç´¹ä»‹ã—ã¾ã™ã€‚&#x27;, 0.44624844193458557)</span><br><span class="line">(&#x27;ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã©ã‚“ãªæœªæ¥ã‚’æãã®ã‹ã€æˆ¦ç•¥ã‚’ç«‹ã¦ã€è¨ˆç”»ã«è½ã¨ã—ã¦ã€ãã®è¨ˆç”»ã«å‰‡ã£ã¦ã‚·ã‚¹ãƒ†ãƒ çš„ã«å…·ç¾åŒ–ã—ã€å‡ºæ¥ä¸ŠãŒã£ãŸã‚·ã‚¹ãƒ†ãƒ ãŒä¾¡å€¤ã‚’å‰µé€ ã™ã‚‹ã¨ã„ã†æµã‚ŒãŒä¸€èˆ¬çš„ã§ã™ã€‚&#x27;, 0.4249690771102905)</span><br><span class="line">(&#x27;ä¾‹ãˆã°ã€æœªæ¥ã‚’æãã¨ã“ã‚ã¯ã‚³ãƒ³ã‚µãƒ«ç³»ã®ä¼æ¥­æ§˜ãŒè¡Œã£ã¦ã€å…·ç¾åŒ–ã—ã¦ã„ãã¨ã“ã‚ã¯SIerç³»ã®ä¼æ¥­æ§˜ãŒè¡Œã£ã¦ã¨ã„ã£ãŸå½¢ã§ã™ã€‚&#x27;, 0.40904152393341064)</span><br><span class="line">(&#x27;æ¬¡ã«ã€ç§ãŸã¡ãŒå¤§åˆ‡ã«ã—ã¦ã„ã‚‹è€ƒãˆæ–¹ã€Our&#x27;, 0.40697067975997925)</span><br></pre></td></tr></table></figure><p>ãƒ¢ãƒ‡ãƒ«ï¼š<code>multi-qa-mpnet-base-dot-v1</code><br>ã‚¯ã‚¨ãƒªï¼š<code>é•·æ‰€ã¯ãªã«</code></p><p><strong>å‡ºåŠ›çµæœ4</strong></p><p>ï¼ˆ<em>â€»ã“ã®ãƒ¢ãƒ‡ãƒ«ã¯ã€ä»–ã®ã‚³ã‚µã‚¤ãƒ³é¡ä¼¼åº¦ã¨ã¯é•ã£ã¦ãƒ‰ãƒƒãƒˆç©ã§è·é›¢ã‚’è©•ä¾¡ã—ã¦ã„ã‚‹ã®ã§ã€1ä»¥ä¸Šã®è·é›¢çµæœãŒã‚ã‚Šã†ã‚‹</em>ï¼‰</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">(&#x27;ãã—ã¦ãã‚Œã‚’30å¹´ä»¥ä¸Šç¶šã‘ã¦ããŸã¨ã„ã†ã®ã¯ãªã‹ãªã‹ä»–ã®ä¼šç¤¾ã«ã¯ç°¡å˜ã«çœŸä¼¼ã§ããªã„ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ãªã‚‰ã§ã¯ã®å¼·ã¿ã«ãªã£ã¦ã„ã¾ã™ã€‚&#x27;, 18.705921173095703)</span><br><span class="line">(&#x27;ã•ã‚‰ã«è©³ç´°ã«ãƒ“ã‚¸ãƒã‚¹ã®æµã‚Œã‚„ä»–ç¤¾ã¨ã®é•ã„ã«ã¤ã„ã¦ã”ç´¹ä»‹ã—ã¾ã™ã€‚&#x27;, 18.43102264404297)</span><br><span class="line">(&#x27;çš†ã•ã‚“ã€ã“ã‚“ã«ã¡ã¯ã€‚&#x27;, 16.867801666259766)</span><br><span class="line">(&#x27;æ¥­ç¸¾ã‚‚æ˜¨å¹´ã¯éå»æœ€é«˜ã‚’æ›´æ–°ã™ã‚‹ãªã©éå¸¸ã«é †èª¿ã§ã™ã€‚&#x27;, 16.38519287109375)</span><br><span class="line">(&#x27;ãŠå®¢æ§˜ã®æœªæ¥æ´»ç”¨ã‚’æœ€å¤§åŒ–ã—ã€è‡ªã‚‰ã‚‚æ–°ãŸãªä¾¡å€¤ã‚’å‰µé€ ã™ã‚‹ã€‚&#x27;, 15.685336112976074)</span><br></pre></td></tr></table></figure><p>ä»Šåº¦ã¯ã€è‹±èªã®ã‚³ãƒ¼ãƒ‘ã‚¹ã‚’åˆ©ç”¨ã—ã¦ã€æ—¥æœ¬èªã§è³ªå•ã—ã¦ã¿ã¾ã™ã€‚<br>HuggingFaceå‡ºå“ã®ã€ŒText embeddings &amp; semantic searchã€ã‚’ç´¹ä»‹ã™ã‚‹<a href="https://www.youtube.com/watch?v=OATCgQtNX2o&ab_channel=HuggingFace">ã“ã®ãƒ“ãƒ‡ã‚ª</a>ã®ã‚»ãƒªãƒ•ã‚’å¼•ã£å¼µã£ã¦ãã¾ã™ã€‚<code>corpus/semantic_search.txt</code>ã«ä¿å­˜ã—ã¾ã™ã€‚</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">Text embeddings and semantic search.</span><br><span class="line">In this video weâ€™ll explore how Transformer models represent text as embedding vectors and how these vectors can be used to find similar documents in a corpus.</span><br><span class="line">Text embeddings are just a fancy way of saying that we can represent text as an array of numbers called a vector.</span><br><span class="line">To create these embeddings we usually use an encoder-based model like BERT.</span><br><span class="line">In this example, you can see how we feed three sentences to the encoder and get three vectors as the output.</span><br><span class="line">Reading the text, we can see that walking the dog seems to be most similar to walking the cat, but let&#x27;s see if we can quantify this.</span><br><span class="line">The trick to do the comparison is to compute a similarity metric between each pair of embedding vectors.</span><br><span class="line">These vectors usually live in a high-dimensional space, so a similarity metric can be anything that measures some sort of distance between vectors.</span><br><span class="line">One popular metric is cosine similarity, which uses the angle between two vectors to measure how close they are.</span><br><span class="line">In this example, our embedding vectors live in 3D and we can see that the orange and grey vectors are close to each other and have a smaller angle.</span><br><span class="line">Now one problem we have to deal with is that Transformer models like BERT will actually return one embedding vector per token.</span><br><span class="line">For example in the sentence &quot;I took my dog for a walk&quot;, we can expect several embedding vectors, one for each word.</span><br><span class="line">For example, here we can see the output of our model has produced 9 embedding vectors per sentence, and each vector has 384 dimensions.</span><br><span class="line">But what we really want is a single embedding vector for the whole sentence.</span><br><span class="line">To deal with this, we can use a technique called pooling.</span><br><span class="line">The simplest pooling method is to just take the token embedding of the CLS token.</span><br><span class="line">Alternatively, we can average the token embeddings which is called mean pooling.</span><br><span class="line">With mean pooling only thing we need to make sure is that we don&#x27;t include the padding tokens in the average, which is why you can see the attention mask being used here.</span><br><span class="line">This now gives us one 384 dimensional vector per sentence which is exactly what we want.</span><br><span class="line">And once we have our sentence embeddings, we can compute the cosine similarity for each pair of vectors.</span><br><span class="line">In this example we use the function from scikit-learn and you can see that the sentence &quot;I took my dog for a walk&quot; has an overlap of 0.83 with &quot;I took my cat for a walk&quot;. Hooray.</span><br><span class="line">We can take this idea one step further by comparing the similarity between a question and a corpus of documents.</span><br><span class="line">For example, suppose we embed every post in the Hugging Face forums.</span><br><span class="line">We can then ask a question, embed it, and check which forum posts are most similar.</span><br><span class="line">This process is often called semantic search, because it allows us to compare queries with context.</span><br><span class="line">To create a semantic search engine is quite simple in Datasets.</span><br><span class="line">First we need to embed all the documents.</span><br><span class="line">In this example, we take a small sample from the SQUAD dataset and apply the same embedding logic as before.</span><br><span class="line">This gives us a new column called &quot;embeddings&quot; that stores the embedding of every passage.</span><br><span class="line">Once we have our embeddings, we need a way to find nearest neighbours to a query.</span><br><span class="line">Datasets provides a special object called a FAISS index that allows you to quickly compare embedding vectors.</span><br><span class="line">So we add the FAISS index, embed a question and voila. we&#x27;ve now found the 3 most similar articles which might store the answer.</span><br></pre></td></tr></table></figure><p>åŒã˜ã‚ˆã†ã«ã€ãã‚Œã‚’ãƒ­ãƒ¼ãƒ‰ã—ã¦ã€æ—¥æœ¬èªã®ã‚¯ã‚¨ãƒªã§æŠ•ã’ã¦ã¿ã¾ã™ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    model = find_model_with_name(</span><br><span class="line">        models, <span class="string">&quot;paraphrase-multilingual-MiniLM-L12-v2&quot;</span>)</span><br><span class="line">    ss = SemanticSearch(model)</span><br><span class="line">    ss.load_corpus(<span class="string">&quot;semantic_search.txt&quot;</span>)</span><br><span class="line"></span><br><span class="line">    res = ss.find_nearest(<span class="string">&quot;åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ã§ã®ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã«ã¤ã„ã¦ã€ã©ã‚“ãªãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ãˆã¾ã™ã‹&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> r <span class="keyword">in</span> res:</span><br><span class="line">        <span class="built_in">print</span>(r)</span><br></pre></td></tr></table></figure><p><strong>å‡ºåŠ›çµæœ5</strong></p><p>ãã‚Œãªã‚Šã«ã„ã„æ„Ÿã˜ã«ãƒ’ãƒƒãƒˆã§ãã¦ã„ã¾ã™ã­ã€‚</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">(&#x27;To create these embeddings we usually use an encoder-based model like BERT.&#x27;, 0.6005619764328003)</span><br><span class="line">(&#x27;In this video weâ€™ll explore how Transformer models represent text as embedding vectors and how these vectors can be used to find similar documents in a corpus.&#x27;, 0.5864262580871582)</span><br><span class="line">(&#x27;For example, here we can see the output of our model has produced 9 embedding vectors per sentence, and each vector has 384 dimensions.&#x27;, 0.5198760032653809)</span><br><span class="line">(&#x27;In this example, we take a small sample from the SQUAD dataset and apply the same embedding logic as before.&#x27;, 0.4749892055988312)</span><br><span class="line">(&#x27;In this example, our embedding vectors live in 3D and we can see that the orange and grey vectors are close to each other and have a smaller angle.&#x27;, 0.46906405687332153)</span><br></pre></td></tr></table></figure><p>ãƒ¢ãƒ‡ãƒ«ï¼š<code>distiluse-base-multilingual-cased-v1</code><br>ã‚¯ã‚¨ãƒªï¼š<code>ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢ã«ã¯ã€ã©ã‚“ãªãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ãŒä½¿ãˆã‚‹ã‹</code></p><p><strong>å‡ºåŠ›çµæœ6</strong></p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">(&#x27;Text embeddings and semantic search.&#x27;, 0.3169878125190735)</span><br><span class="line">(&#x27;To create a semantic search engine is quite simple in Datasets.&#x27;, 0.22516131401062012)</span><br><span class="line">(&#x27;To deal with this, we can use a technique called pooling.&#x27;, 0.19742435216903687)</span><br><span class="line">(&#x27;This process is often called semantic search, because it allows us to compare queries with context.&#x27;, 0.1717163324356079)</span><br><span class="line">(&#x27;Once we have our embeddings, we need a way to find nearest neighbours to a query.&#x27;, 0.1544724851846695)</span><br></pre></td></tr></table></figure><h2 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h2><p>æœ¬è¨˜äº‹ã§ã¯ã€ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢ã®æ¦‚å¿µã‚„åŸç†ã‚’ç°¡å˜ã«èª¬æ˜ã—ã¾ã—ãŸã€‚ãã—ã¦åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ã®å®Ÿè£…ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«å®Ÿç¾ã—ã¦ãƒ‡ãƒ¢ã—ã¾ã—ãŸã€‚è¨€èªå•ã‚ãšã«ã‚¯ã‚¨ãƒªã‚’æŠ•ã’ã¦ã€ãã“ãã“ã®ç²¾åº¦ã®æ¤œç´¢ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã®çµæœãŒå¾—ã¾ã—ãŸã€‚</p><p>AIã®æ°‘ä¸»åŒ–ãŒç™ºå±•ã—ã¦ã„ã‚‹ç¾åœ¨ã€ã„ã‚ã„ã‚ã®æŠ€è¡“ã®ãƒãƒ¼ãƒ‰ãƒ«ãŒä¸‹ãŒã£ã¦ãã¦ã€ä¸­å°ä¼æ¥­ã‚„ä¸€èˆ¬ã®äººã€…ã«ã‚‚ç°¡å˜ã«åˆ©ç”¨ãƒ»å°å…¥å¯èƒ½ã«ãªã‚Šã€ãã®ã‚ªãƒãƒ†ãƒ¥ãƒ‹ãƒ†ã‚£ãƒ¼ã‚’ã†ã¾ãæ´ã‚ã‚‹çµ„ç¹”ã¨äººé–“ã“ãæœªæ¥ã®å‹è€…ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚</p><p>ã§ã¯ã€ã‚ˆã†ã“ãã€œã€€Futureã¸ï¼</p><img src="/images/20230906a/Future_Search_Semantic_HighTech.jpg" alt="Future_Search_Semantic_HighTech.jpg" width="768" height="768" loading="lazy">*Image Generated by leonardo.ai*]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/DataScience/">DataScience</category>
      
      
      <category domain="https://future-architect.github.io/tags/ChatGPT/">ChatGPT</category>
      
      <category domain="https://future-architect.github.io/tags/AI/">AI</category>
      
      <category domain="https://future-architect.github.io/tags/SemanticSearch/">SemanticSearch</category>
      
      <category domain="https://future-architect.github.io/tags/embedding/">embedding</category>
      
      <category domain="https://future-architect.github.io/tags/SentenceTransformers/">SentenceTransformers</category>
      
      
      <comments>https://future-architect.github.io/articles/20230906a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Raspberry Piã‹ã‚‰Arduinoã«æ¥ç¶šã—ãŸLCDã«æ–‡å­—ã‚’è¡¨ç¤ºã™ã‚‹</title>
      <link>https://future-architect.github.io/articles/20230905a/</link>
      <guid>https://future-architect.github.io/articles/20230905a/</guid>
      <pubDate>Mon, 04 Sep 2023 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;h2 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot;</description>
          
        
      
      
      
      <content:encoded><![CDATA[<h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><p>åˆã‚ã¾ã—ã¦ã€‚è£½é€ ï¼ˆPLMã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰æ‰€å±&#x2F;ä¹å·åœ¨ä½ã€€ã®æ°´ç”°ã§ã™ã€‚</p><p>å¤ã®è‡ªç”±ç ”ç©¶é€£è¼‰2023ã®ç¬¬3å¼¾ã®æ–¹ã‚’åŸ·ç­†ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚</p><p>ä»Šå›ãŒæŠ€è¡“ãƒ–ãƒ­ã‚°åˆæŠ•ç¨¿ã«ãªã‚Šã¾ã™ã€‚ä¸æ…£ã‚Œãªéƒ¨åˆ†ã‚‚ã‚ã‚Šã¾ã™ãŒã€ãªã‚‹ã¹ãåˆ†ã‹ã‚Šã‚„ã™ãæ›¸ãã‚ˆã†ã«å¿ƒãŒã‘ã¦ã„ã¾ã™ã®ã§ã€æœ€å¾Œã¾ã§ãŠä»˜ãåˆã„ãã ã•ã„ã€‚</p><h2 id="ç ”ç©¶ãƒ†ãƒ¼ãƒã«ã¤ã„ã¦"><a href="#ç ”ç©¶ãƒ†ãƒ¼ãƒã«ã¤ã„ã¦" class="headerlink" title="ç ”ç©¶ãƒ†ãƒ¼ãƒã«ã¤ã„ã¦"></a>ç ”ç©¶ãƒ†ãƒ¼ãƒã«ã¤ã„ã¦</h2><p>æ¼ ç„¶ã¨</p><ul><li>Arduinoã‚„Raspberry Piã‚’è§¦ã£ã¦ã¿ãŸã„</li><li>Arduinoã«Webã‚µãƒ¼ãƒã‚’æ§‹ç¯‰ã—ã¦ã¿ãŸã„</li></ul><p>â€¦ã¨æ€ã£ãŸã®ã§<strong>Raspberry Piã«ç«‹ã¦ãŸWebã‚µãƒ¼ãƒã®ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰å¥½ããªæ–‡å­—åˆ—ã‚’å…¥åŠ›ã—ã¦Arduinoã«æ¥ç¶šã—ãŸLCDã«è¡¨ç¤ºã™ã‚‹</strong> ã¾ã§ã‚’ã‚„ã£ã¦ã„ãã¾ã™ã€‚</p><p>æœ€çµ‚çš„ã«ã¯ã€åœ¨å®…å‹¤å‹™ã—ã¦ã„ã‚‹éƒ¨å±‹ã®ãƒ‰ã‚¢ã«è¨­ç½®ã—ã¦ã€ã‚¹ãƒãƒ›çµŒç”±ã§ãƒ–ãƒ©ã‚¦ã‚¶ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ä¼šè­°ä¸­ã§ã‚ã‚‹ã“ã¨ã‚’è¡¨ç¤ºã§ãã‚Œã°ã„ã„ãªã¨ã‹è€ƒãˆã¦ã„ã¾ã™ã€‚</p><p>ã‚ã¨ã€è‰²ã€…ã¨ãƒãƒã£ãŸã®ã§ãã®è¾ºã‚Šã‚‚æ›¸ã„ã¦ãŠã“ã†ã‹ã¨æ€ã„ã¾ã™ã€‚</p><p>â€»é•·ããªã‚‹ã®ã§Raspberry Piã‚„Arduinoã®åŸºæœ¬çš„ãªéƒ¨åˆ†ã®è©±ã¯ã€å‰²æ„›ã—ã¦ã„ã¾ã™ã€‚</p><h2 id="æ§‹æˆ-äºˆå®š"><a href="#æ§‹æˆ-äºˆå®š" class="headerlink" title="æ§‹æˆ(äºˆå®š)"></a>æ§‹æˆ(äºˆå®š)</h2><p>æœ€çµ‚çš„ã«ä»¥ä¸‹ã®å›³ã®ã‚ˆã†ãªæ§‹æˆã‚’äºˆå®šã—ã¦ã„ã¾ã™ã€‚</p><img src="/images/20230905a/image.png" alt="" width="987" height="197" loading="lazy"><h2 id="Arduinoâ†’LCDã¸ã®è¡¨ç¤º"><a href="#Arduinoâ†’LCDã¸ã®è¡¨ç¤º" class="headerlink" title="Arduinoâ†’LCDã¸ã®è¡¨ç¤º"></a>Arduinoâ†’LCDã¸ã®è¡¨ç¤º</h2><p>ã¾ãšã¯ã€LCDã«ä»»æ„ã®æ–‡å­—åˆ—ã‚’è¡¨ç¤ºã—ã¦ã¿ã¾ã™ã€‚</p><h3 id="ä½¿ç”¨ã™ã‚‹Arduinoã«ã¤ã„ã¦"><a href="#ä½¿ç”¨ã™ã‚‹Arduinoã«ã¤ã„ã¦" class="headerlink" title="ä½¿ç”¨ã™ã‚‹Arduinoã«ã¤ã„ã¦"></a>ä½¿ç”¨ã™ã‚‹Arduinoã«ã¤ã„ã¦</h3><p>å®¶ã«ã‚ã‚‹Arduinoã‚’ä½¿ãŠã†ã¨ã—ãŸã®ã§ã™ãŒã€ã©ã®LCDã‚’è²·ãˆã°ã‚ˆã„ã®ã‹ãŒã‚ˆãåˆ†ã‹ã‚‰ãªã‹ã£ãŸã®ã§ã€æ–°ã—ãã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ã‚­ãƒƒãƒˆã‚’è³¼å…¥ã—ã¾ã—ãŸã€‚å€¤æ®µã®å‰²ã«åŸºæœ¬çš„ãªã‚»ãƒ³ã‚µãƒ¼é¡ã‹ã‚‰LCDã‚„ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã¾ã§ã¤ã„ã¦ã„ã‚‹ä¸Šã«ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¾ã§ã¤ã„ã¦ã„ã¦åˆ†ã‹ã‚Šã‚„ã™ã„ã§ã™ã€‚</p><p><a href="https://www.amazon.co.jp/dp/B06XF2HZGT/ref=as_sl_pc_qf_sp_asin_til?tag=amazon0b2-22&linkCode=w00&linkId=e5061d4d72ecf8efbd042e6417de9ad3&creativeASIN=B06XF2HZGT">ELEGOO Arduinoç”¨UNO R3ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ã‚­ãƒƒãƒˆ ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ— ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ä»˜ mega2560 r3 nanoã¨äº’æ› [ä¸¦è¡Œè¼¸å…¥å“] </a></p><p>ä»¥ä¸‹ã€å®Ÿéš›ã«ã¤ãªã„ã§å‹•ã‹ã—ã¦ã¿ãŸç”»åƒã¨ä½¿ç”¨ã—ãŸã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚</p><img src="/images/20230905a/lcd.jpg" alt="" width="1200" height="900" loading="lazy"><figure class="highlight cpp"><figcaption><span>Arduino</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">// LCDã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¯ãƒ«ãƒ¼ãƒ‰</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;LiquidCrystal.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Arduinoã‹ã‚‰å‡ºåŠ›ã™ã‚‹Pinç•ªå·ã¨LCDã®Pinç•ªå·ã¨ã®å¯¾å¿œã‚’å®šç¾©</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> rs = <span class="number">7</span>, en = <span class="number">8</span>, d4 = <span class="number">9</span>, d5 = <span class="number">10</span>, d6 = <span class="number">11</span>, d7 = <span class="number">12</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// LCDã®åˆæœŸåŒ–ï¼ˆä½¿ç”¨ã™ã‚‹Pinç•ªå·ã®æŒ‡å®šï¼‰</span></span><br><span class="line"><span class="function">LiquidCrystal <span class="title">lcd</span><span class="params">(rs, en, d4, d5, d6, d7)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  lcd.<span class="built_in">begin</span>(<span class="number">16</span>, <span class="number">2</span>);             <span class="comment">// æ¡æ•°ã¨è¡Œæ•°ã®æŒ‡å®š</span></span><br><span class="line">  lcd.<span class="built_in">clear</span>();                  <span class="comment">// ç”»é¢ã®ã‚¯ãƒªã‚¢</span></span><br><span class="line">  lcd.<span class="built_in">setCursor</span>(<span class="number">0</span>, <span class="number">0</span>);          <span class="comment">// ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã®æŒ‡å®šï¼ˆ1è¡Œç›®ã®1æ–‡å­—ç›®ã«è¨­å®šï¼‰</span></span><br><span class="line">  lcd.<span class="built_in">print</span>(<span class="string">&quot;Hello, World!&quot;</span>);   <span class="comment">// æ–‡å­—å‡ºåŠ›</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  lcd.<span class="built_in">setCursor</span>(<span class="number">0</span>, <span class="number">1</span>);          <span class="comment">// ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã®æŒ‡å®šï¼ˆ2è¡Œç›®ã®1æ–‡å­—ç›®ã«è¨­å®šï¼‰</span></span><br><span class="line">  lcd.<span class="built_in">print</span>(<span class="built_in">millis</span>() / <span class="number">1000</span>);   <span class="comment">// æ–‡å­—å‡ºåŠ›</span></span><br><span class="line">  lcd.<span class="built_in">print</span>(<span class="string">&quot; [sec]&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="note info" style="background: #e5f8e2; padding:16px; margin:24px 12px; border-radius:8px;">  <span class="fa fa-fw fa-check-circle"></span><p>ä»¥ä¸‹ã®ç†ç”±ã§å°‘ã—ãƒãƒã‚Šã¾ã—ãŸã€‚ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã¯åŸå› ã®ç‰¹å®šãŒé›£ã—ã„ã€ã€ã€<br></p><ul><li>å¯å¤‰æŠµæŠ—ã®åˆæœŸä¸è‰¯ãªã®ã‹ãƒ–ãƒ¬ãƒƒãƒ‰ãƒœãƒ¼ãƒ‰ã«ã†ã¾ãåˆºã•ã‚‰ãªã„ç‚ºã€LCDã®ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆãŒã†ã¾ãèª¿æ•´ã§ããšæ–‡å­—ãŒè¡¨ç¤ºã§ããªã‹ã£ãŸã€‚â†’å¯å¤‰ã«ã™ã‚‹å¿…è¦ã‚‚ãªã„ã®ã§å›ºå®šæŠµæŠ—ã§å¯¾å¿œ<br></li><li>LCDã‚‚ãƒ–ãƒ¬ãƒƒãƒ‰ãƒœãƒ¼ãƒ‰ã«ã¡ã‚ƒã‚“ã¨åˆºã•ã‚‰ãªã„ã®ã§ã€å‡ºåŠ›ã•ã‚Œãªã‹ã£ãŸã‚Šæ–‡å­—åŒ–ã‘ãŒç™ºç”Ÿã—ãŸã‚Šã—ãŸ</li></ul></div><h2 id="Raspberry-Pi-ã®æº–å‚™"><a href="#Raspberry-Pi-ã®æº–å‚™" class="headerlink" title="Raspberry Pi ã®æº–å‚™"></a>Raspberry Pi ã®æº–å‚™</h2><p>Raspberry Piã«ã¤ã„ã¦ã¯ã€æ˜”è³¼å…¥ã—ãŸModel Bã‚’ä½¿ç”¨ã€‚OSã®çŠ¶æ…‹ã¨ã‹è¦šãˆã¦ã„ãªã„ã®ã§ã€ã¾ãšã¯ä»˜å±ã®SDã‚«ãƒ¼ãƒ‰ã‚ˆã‚ŠRaspianï¼ˆwheezyï¼‰ã‚’å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼†ä»¥ä¸‹ã®ä½œæ¥­ã‚’å®Ÿæ–½</p><ul><li>packageã®æ›´æ–°</li><li>python3ã¨pipã®æ›´æ–°</li><li>pyserialï¼ˆï¼ã‚·ãƒªã‚¢ãƒ«é€šä¿¡ã§ä½¿ç”¨ã™ã‚‹pythonãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼‰ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</li></ul><div class="note info" style="background: #e5f8e2; padding:16px; margin:24px 12px; border-radius:8px;">  <span class="fa fa-fw fa-check-circle"></span><p>wheezyã¯ã‚µãƒãƒ¼ãƒˆãŒåˆ‡ã‚Œã¦ã„ã‚‹ã®ã§ã€æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆBusterã¨ã‹Bullseeyeï¼‰ã«ã—ãŸã‹ã£ãŸã®ã§ã™ãŒRaspberry Pi Imagerã‚’ä½¿ç”¨ã—ã¦æ›¸ãè¾¼ã‚€ã¨OSãŒå…¨ç„¶ç«‹ã¡ä¸ŠãŒã£ã¦ãã‚Œãªã„ç‚ºã€è«¦ã‚ã¦wheezyã§ã‚„ã£ã¦ã„ã¾ã™ã€‚</p></div><h3 id="packageã®æ›´æ–°"><a href="#packageã®æ›´æ–°" class="headerlink" title="packageã®æ›´æ–°"></a>packageã®æ›´æ–°</h3><p>apt-getãŒã†ã¾ãå‹•ã‹ãªã‹ã£ãŸã®ã§è‹¦åŠ´ã—ã¾ã—ãŸã€‚</p><p>è‰²ã€…ã¨èª¿ã¹ã¦ã¿ã‚‹ã¨apt-getã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’æ›´æ–°ã™ã‚‹éš›ã«ä½¿ç”¨ã™ã‚‹ãƒŸãƒ©ãƒ¼ã‚µã‚¤ãƒˆã®URLãŒå¤ã„ã®ãŒåŸå› ã ã£ãŸã¿ãŸã„ã§ã™ã€‚ä»¥ä¸‹ã«è¨˜è¼‰ãŒã‚ã‚‹URLã‚’æœ€æ–°ã®URLã«æ›¸ãæ›ãˆã¦å¯¾å¿œã—ã¾ã—ãŸã€‚</p><ul><li>&#x2F;etc&#x2F;apt&#x2F;sources.list</li><li>&#x2F;etc&#x2F;apt&#x2F;sources.list.d&#x2F;collabora.list</li></ul><h3 id="python3ã¨pipã®æ›´æ–°"><a href="#python3ã¨pipã®æ›´æ–°" class="headerlink" title="python3ã¨pipã®æ›´æ–°"></a>python3ã¨pipã®æ›´æ–°</h3><p>apt-getã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã®ã§ã“ã£ã¡ã‚‚è‹¦åŠ´ã—ã¾ã—ãŸã€‚è‰²ã€…ã¨èª¿ã¹ãŸçµæœã€pyenvã‚’ä½¿ç”¨ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨ã†ã¾ãã„ãã¾ã—ãŸã€‚</p><h3 id="pyserialï¼ˆï¼ã‚·ãƒªã‚¢ãƒ«é€šä¿¡ã§ä½¿ç”¨ã™ã‚‹pythonãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼‰ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"><a href="#pyserialï¼ˆï¼ã‚·ãƒªã‚¢ãƒ«é€šä¿¡ã§ä½¿ç”¨ã™ã‚‹pythonãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼‰ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" class="headerlink" title="pyserialï¼ˆï¼ã‚·ãƒªã‚¢ãƒ«é€šä¿¡ã§ä½¿ç”¨ã™ã‚‹pythonãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼‰ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"></a>pyserialï¼ˆï¼ã‚·ãƒªã‚¢ãƒ«é€šä¿¡ã§ä½¿ç”¨ã™ã‚‹pythonãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼‰ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h3><p>pipã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‚‰ã™ãã«çµ‚ã‚ã‚Šã¾ã—ãŸã€‚</p><h2 id="Raspberry-Pi-â†’Arduinoã¸ã‚·ãƒªã‚¢ãƒ«é€šä¿¡"><a href="#Raspberry-Pi-â†’Arduinoã¸ã‚·ãƒªã‚¢ãƒ«é€šä¿¡" class="headerlink" title="Raspberry Pi â†’Arduinoã¸ã‚·ãƒªã‚¢ãƒ«é€šä¿¡"></a>Raspberry Pi â†’Arduinoã¸ã‚·ãƒªã‚¢ãƒ«é€šä¿¡</h2><p>Raspberry Piã¨Arduinoã®æº–å‚™ãŒå¤§ä½“æ•´ã£ãŸã®ã§è©¦ã—ã«ã‚·ãƒªã‚¢ãƒ«é€šä¿¡ã‚’è¡Œã£ã¦ã¿ã¾ã™ã€‚<br>ä»¥ä¸‹ã®ã‚ˆã†ãªæ–‡å­—åˆ—é€ä¿¡ç”¨ã®Pythonã‚’ç”¨æ„ã—ã¾ã™ã€‚</p><div class="note info" style="background: #e5f8e2; padding:16px; margin:24px 12px; border-radius:8px;">  <span class="fa fa-fw fa-check-circle"></span><p>ser.open()æ™‚ã«Permissionã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸå ´åˆã¯ã€portã«æŒ‡å®šã—ã¦ã„ã‚‹ãƒãƒ¼ãƒˆã«å¯¾ã—ã¦æ¨©é™ã‚’ä»˜ä¸ã™ã‚Œã°å¤§ä¸ˆå¤«ã§ã™ã€‚<br>ä¾‹ï¼‰sudo chmod 666 &#x2F;dev&#x2F;ttyACM0</p></div><figure class="highlight python"><figcaption><span>Raspberry Piï¼ˆé€ä¿¡å´ï¼‰</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> serial</span><br><span class="line"></span><br><span class="line">ser = serial.Serial()</span><br><span class="line">ser.port = <span class="string">&#x27;/dev/ttyACM0&#x27;</span></span><br><span class="line">ser.baundrate = <span class="number">9600</span></span><br><span class="line">ser.<span class="built_in">open</span>()</span><br><span class="line"></span><br><span class="line">data = <span class="string">&#x27;NOW MEETING...  16:30 - 17:30&#x27;</span></span><br><span class="line">ser.write(data.encode())</span><br><span class="line">ser.close()</span><br></pre></td></tr></table></figure><p>Arduinoå´ã¯ã€ä¸Šè¨˜ã‚³ãƒ¼ãƒ‰ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãæ›ãˆã¾ã™ã€‚ãªãŠã€é€ã‚‰ã‚Œã¦ãã‚‹æ–‡å­—åˆ—ã¯1æ–‡å­—ç›®ï½16æ–‡å­—ç›®ã¾ã§ã‚’1è¡Œç›®ã«ã€17æ–‡å­—ç›®ï½32æ–‡å­—ç›®ã¾ã§ã‚’2è¡Œç›®ã«å‡ºã™æƒ³å®šã«ã—ã¦ã„ã¾ã™</p><figure class="highlight cpp"><figcaption><span>Arduinoï¼ˆå—ä¿¡å´ï¼‰</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">// LCDã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¯ãƒ«ãƒ¼ãƒ‰</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;LiquidCrystal.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Arduinoã‹ã‚‰å‡ºåŠ›ã™ã‚‹Pinç•ªå·ã¨LCDã®Pinç•ªå·ã¨ã®å¯¾å¿œã‚’å®šç¾©</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> rs = <span class="number">7</span>, en = <span class="number">8</span>, d4 = <span class="number">9</span>, d5 = <span class="number">10</span>, d6 = <span class="number">11</span>, d7 = <span class="number">12</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// LCDã®åˆæœŸåŒ–ï¼ˆä½¿ç”¨ã™ã‚‹Pinç•ªå·ã®æŒ‡å®šï¼‰</span></span><br><span class="line"><span class="function">LiquidCrystal <span class="title">lcd</span><span class="params">(rs, en, d4, d5, d6, d7)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  lcd.<span class="built_in">begin</span>(<span class="number">16</span>, <span class="number">2</span>);             <span class="comment">// æ¡æ•°ã¨è¡Œæ•°ã®æŒ‡å®š</span></span><br><span class="line">  lcd.<span class="built_in">clear</span>();                  <span class="comment">// ç”»é¢ã®ã‚¯ãƒªã‚¢</span></span><br><span class="line">  lcd.<span class="built_in">setCursor</span>(<span class="number">0</span>, <span class="number">0</span>);          <span class="comment">// ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã®æŒ‡å®šï¼ˆ1è¡Œç›®ã®1æ–‡å­—ç›®ã«è¨­å®šï¼‰</span></span><br><span class="line">  lcd.<span class="built_in">print</span>(<span class="string">&quot;INPUT...OK&quot;</span>);      <span class="comment">// æ–‡å­—å‡ºåŠ›</span></span><br><span class="line">  Serial.<span class="built_in">begin</span>(<span class="number">9600</span>);           <span class="comment">// ãƒœãƒ¼ãƒ¬ãƒ¼ãƒˆã®è¨­å®š</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (Serial.<span class="built_in">available</span>())                         <span class="comment">// ã‚·ãƒªã‚¢ãƒ«é€šä¿¡ãŒæœ‰åŠ¹ã‹ã©ã†ã‹ã®ç¢ºèª</span></span><br><span class="line">  &#123;</span><br><span class="line">    String input = Serial.<span class="built_in">readString</span>();           <span class="comment">// æ–‡å­—åˆ—å–å¾—</span></span><br><span class="line">    lcd.<span class="built_in">clear</span>();                                  <span class="comment">// ç”»é¢ã®ã‚¯ãƒªã‚¢</span></span><br><span class="line">    lcd.<span class="built_in">setCursor</span>(<span class="number">0</span>, <span class="number">0</span>);                          <span class="comment">// ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã®æŒ‡å®šï¼ˆ1è¡Œç›®ã®1æ–‡å­—ç›®ã«è¨­å®šï¼‰</span></span><br><span class="line">    lcd.<span class="built_in">print</span>(input);                             <span class="comment">// æ–‡å­—å‡ºåŠ›</span></span><br><span class="line"></span><br><span class="line">    String input2 = <span class="built_in">String</span>(input.<span class="built_in">substring</span>(<span class="number">16</span>));  <span class="comment">// æ–‡å­—åˆ—ã®å¾ŒåŠéƒ¨åˆ†ã‚’æŠœãå‡ºã—</span></span><br><span class="line">    lcd.<span class="built_in">setCursor</span>(<span class="number">0</span>, <span class="number">1</span>);                          <span class="comment">// ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã®æŒ‡å®šï¼ˆ2è¡Œç›®ã®1æ–‡å­—ç›®ã«è¨­å®šï¼‰</span></span><br><span class="line">    lcd.<span class="built_in">print</span>(input2);                            <span class="comment">// æ–‡å­—å‡ºåŠ›</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹ã€çµæœã§ã™ã€‚<br><img src="/images/20230905a/2.jpg" alt="" width="1200" height="1600" loading="lazy"></p><h3 id="ã†ã¾ãã„ã£ã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã¾ã™ãŒ"><a href="#ã†ã¾ãã„ã£ã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã¾ã™ãŒ" class="headerlink" title="ã†ã¾ãã„ã£ã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã¾ã™ãŒ"></a>ã†ã¾ãã„ã£ã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã¾ã™ãŒ</h3><p>å®Ÿã¯ã€ã†ã¾ãã„ã£ã¦ã„ãªã„ã‚“ã§ã™ã€‚ã€‚ã€‚ç¬‘</p><p>å…·ä½“çš„ã«æ›¸ãã¨</p><ul><li>ä¸Šè¨˜Pythonãƒ•ã‚¡ã‚¤ãƒ«ã‚’å©ã„ã¦ã‚‚ã€LCDãŒç‚¹æ»…ã™ã‚‹ã ã‘</li><li>Pythonãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’Python3ã®ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã«å¼µã‚Šä»˜ã‘ã¦å®Ÿè¡Œ<br>â†’LCDã«è¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆä¸Šè¨˜ã¯ã€ã“ã®æ™‚ã®å†™çœŸã¨ãªã‚Šã¾ã™ï¼‰</li></ul><p>èª¿ã¹ã¦ã¿ã‚‹ã¨ã€Arduino Unoã«ã¯ã€ŒUSBçµŒç”±ã§ã‚·ãƒªã‚¢ãƒ«é€šä¿¡ã—ãŸå ´åˆã«DTRç«¯å­ã®çŠ¶æ…‹ãŒLOWã§ã‚ã‚Œã°ãƒªã‚»ãƒƒãƒˆãŒã‹ã‹ã‚‹ã€ä»•æ§˜ãŒã‚ã‚‹ã‚‰ã—ãã“ã‚ŒãŒåŸå› ã§LCDãŒãƒªã‚»ãƒƒãƒˆã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚DTRç«¯å­ã‚’HIGHã«ã™ã‚Œã°ã‚ˆã„ã®ã§ã¯ï¼Ÿã¨ã¯æ€ã†ã®ã§è¨­å®šã—ã¦ã¿ã¦ã¯ã„ã‚‹ã®ã§ã™ãŒãªãœã‹ã†ã¾ãã„ã‹ãªã„ã€‚</p><h3 id="ä»®èª¬"><a href="#ä»®èª¬" class="headerlink" title="ä»®èª¬"></a>ä»®èª¬</h3><p>open()å¾Œã«sleepã‚’å…¥ã‚Œã‚‹ã¨ã†ã¾ãã„ãã®ã§ã¯ï¼Ÿã¨ã„ã†ä»®èª¬ãŒå‡ºã¦ãã¾ã—ãŸã€‚<br>ãƒ•ã‚¡ã‚¤ãƒ«å®Ÿè¡Œã§ã¯ã€openâ†’writeã¾ã§ã®å‡¦ç†ã«é–“ãŒç„¡ã„ã®ã§ã€openå‡¦ç†å®Œäº†â†’DTRãƒªã‚»ãƒƒãƒˆå‡¦ç†ã€€ã®ãƒªã‚»ãƒƒãƒˆä¸­ã«æ›¸ãè¾¼ã¿ã‚’è¡Œã£ã¦ã„ã¦ã†ã¾ãã„ã£ã¦ã„ãªã„ã‚ˆã†ãªæ°—ãŒã—ã¦ãã¾ã—ãŸã€‚</p><p>ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å®Ÿè¡Œã§ã¯ã€ser.open()â†’æ•°ç§’å¾Œã«ser.writeã‚’å®Ÿè¡Œã¨ã„ã†æµã‚Œãªã®ã§ã€æ•°ç§’ã®é–“ã«ãƒªã‚»ãƒƒãƒˆå‡¦ç†ãŒå®Œäº†â†’LCDã¸ã®æ›¸ãè¾¼ã¿ãŒã†ã¾ãã„ãã¨ã„ã†æµã‚Œã®ã‚ˆã†ãªæ°—ãŒã—ã¦ã„ã¾ã™ã€‚</p><p>ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å®Ÿè¡Œæ™‚ã®openå‡¦ç†ç›´å¾Œã®LCDã‚’è¦‹ã¦ã„ã‚‹ã¨ã€openç›´å¾Œã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§LCDã«ãƒªã‚»ãƒƒãƒˆãŒã‹ã‹ã£ã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã¾ã™ã€‚è©¦ã™ä¾¡å€¤ãŒã‚ã‚Šãã†ã§ã™ã€‚</p><p>ï¼ˆopenï¼ã‚·ãƒªã‚¢ãƒ«é€šä¿¡é–‹å§‹ãªã®ã§å½“ãŸã‚Šå‰ã¨è¨€ã£ãŸã‚‰å½“ãŸã‚Šå‰ã§ã™ãŒã€ã€ã€ï¼‰</p><p>ä»¥ä¸‹ã®ã‚ˆã†ã«sleepã‚’2ç§’å…¥ã‚Œã¦å®Ÿè¡Œã—ã¦ã¿ã¾ã—ãŸã€‚</p><figure class="highlight python"><figcaption><span>Raspberry Piï¼ˆé€ä¿¡å´ï¼‰</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> serial</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">ser = serial.Serial()</span><br><span class="line">ser.port = <span class="string">&#x27;/dev/ttyACM0&#x27;</span></span><br><span class="line">ser.baundrate = <span class="number">9600</span></span><br><span class="line">ser.<span class="built_in">open</span>()</span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">data = <span class="string">&#x27;NOW MEETING...  16:30 - 17:30&#x27;</span></span><br><span class="line">ser.write(data.encode())</span><br><span class="line">ser.close()</span><br></pre></td></tr></table></figure><p>çµæœã¨ã—ã¦ã¯ã†ã¾ãã„ãã¾ã—ãŸã€‚ä»®èª¬ãŒå½“ãŸã£ã¦ã„ãŸã¿ãŸã„ã§ã™ã€‚</p><p>å€‹äººçš„ã«ã¯ã€ä»¥ä¸‹ã®ç†ç”±ã§ä¸Šè¨˜æ–¹æ³•ã¯æ°—ã«å…¥ã‚‰ãªã„ã®ã§ã™ãŒã²ã¨ã¾ãšã€ã“ã‚Œã§é€²ã‚ã¾ã™ã€‚</p><ul><li>æœ¬æ¥ã§ã‚ã‚Œã°DTRç«¯å­ã‚’ä½•ã¨ã‹ã™ã‚‹ï¼ˆï¼è¨­å®šã‚„ã‚‰ãªã‚“ã‚„ã‚‰ã§ä½•ã¨ã‹ã™ã‚‹ï¼‰ã®ãŒç­‹</li><li>sleepã§è§£æ±ºã™ã‚‹ã®ãŒåŠ›æŠ€ã£ã½ãã¦ã€ã‚ã¾ã‚Šå¥½ã¿ã§ã¯ãªã„</li></ul><h3 id="ã‚ˆãã‚ˆãè€ƒãˆã‚‹ã¨ã€ã€ã€"><a href="#ã‚ˆãã‚ˆãè€ƒãˆã‚‹ã¨ã€ã€ã€" class="headerlink" title="ã‚ˆãã‚ˆãè€ƒãˆã‚‹ã¨ã€ã€ã€"></a>ã‚ˆãã‚ˆãè€ƒãˆã‚‹ã¨ã€ã€ã€</h3><p>sleepã‚’å…¥ã‚Œãªã„æ–¹å‘ã§ã‚‚ã„ã„ã®ã§ã¯ï¼Ÿã¨è€ƒãˆã¦ã„ã¾ã™ã€‚</p><p>ã¾ãšã€Webã‚µãƒ¼ãƒã®æ–¹ã«å¿…è¦ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã«è¡¨ç¤ºã™ã‚‹å†…å®¹ã‹ã‚‰è€ƒãˆã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚</p><p><strong>ãƒ–ãƒ©ã‚¦ã‚¶è¡¨ç¤ºï¼ˆä»®ï¼‰</strong><br><img src="/images/20230905a/image_2.png" alt="" width="597" height="301" loading="lazy"></p><ul><li>ã‚·ãƒªã‚¢ãƒ«é€šä¿¡é–‹å§‹ï¼ˆæ¥ç¶šãƒœã‚¿ãƒ³æŠ¼ä¸‹ï¼‰</li><li>ã‚·ãƒªã‚¢ãƒ«é€šä¿¡çµ‚äº†ï¼ˆåˆ‡æ–­ãƒœã‚¿ãƒ³æŠ¼ä¸‹ï¼‰</li><li>æ–‡å­—åˆ—é€ä¿¡ï¼ˆé€ä¿¡ãƒœã‚¿ãƒ³æŠ¼ä¸‹ï¼‰</li></ul><p>ä¸Šè¨˜ã®ã‚ˆã†ãªUIã§è€ƒãˆã‚‹ã¨ã€ã‚·ãƒªã‚¢ãƒ«é€šä¿¡é–‹å§‹ï½é€ä¿¡ãƒœã‚¿ãƒ³æŠ¼ä¸‹ã¾ã§ã«ã¯ã€ã‚¿ã‚¤ãƒ ãƒ©ã‚°ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><p>ä»®ã«æ¥ç¶šãƒœã‚¿ãƒ³ã‚’ç„¡ãã—ãŸã‚ˆã†ãªUIã§ã‚ã£ã¦ã‚‚ã€æ–‡å­—åˆ—é€ä¿¡éƒ¨åˆ†ã«å…¥åŠ›ã™ã‚‹ã®ã«æ•°ç§’ã¯ã‹ã‹ã‚‹ã¯ãšãªã®ã§ã€sleepã¯ç„¡ãã¦è‰¯ã„ã¨æƒ³åƒã—ã¦ã„ã¾ã™ã€‚<br><span style="font-size: 70%;">ï¼ˆæ¥ç¶šãƒœã‚¿ãƒ³æŠ¼ä¸‹ã‹ã‚‰ã‚³ãƒ³ãƒæ•°ç§’ã§å…¥åŠ›ã™ã‚‹è¶…äººã¾ãŸã¯ã€RTAæŒ‘æˆ¦è€…ã¯è€ƒãˆã¦ã„ãªã„ã§ã™ï¼‰</span></p><p>ãã®ãŸã‚ã€ã“ã®å¾Œã®æ–¹å‘ã¨ã—ã¦ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚</p><ul><li>æ–‡å­—åˆ—é€ä¿¡ã«ã¤ã„ã¦ã¯ã€sleepã‚’å…¥ã‚Œãªã„å½¢ã§ã²ã¨ã¾ãšå®Ÿè£…ã‚’é€²ã‚ã‚‹</li><li>ä¸Šè¨˜å®Ÿè£…ã§å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆã€æ”¹ã‚ã¦sleepã‚’å…¥ã‚Œã‚‹ã“ã¨ã‚’æ¤œè¨ã™ã‚‹</li></ul><h2 id="ãŠã‚ã‚Šã«"><a href="#ãŠã‚ã‚Šã«" class="headerlink" title="ãŠã‚ã‚Šã«"></a>ãŠã‚ã‚Šã«</h2><h3 id="Webã‚µãƒ¼ãƒã¯ï¼Ÿ"><a href="#Webã‚µãƒ¼ãƒã¯ï¼Ÿ" class="headerlink" title="Webã‚µãƒ¼ãƒã¯ï¼Ÿ"></a>Webã‚µãƒ¼ãƒã¯ï¼Ÿ</h3><p>ã¨ã„ã†å£°ãŒèã“ãˆã¦ããã†ã§ã™ãŒã€ã“ã‚Œä»¥ä¸Šè‡ªç”±ç ”ç©¶ã«ä½œæ¥­æ™‚é–“ãŒå–ã‚Œãã†ã«ãªã„ã®ã§ä»Šå›ã¯ã“ã“ã¾ã§ã¨ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚ä»Šå¾ŒåŸ·ç­†ã™ã‚‹æ©Ÿä¼šãŒã‚ã‚Œã°ã€ç¶šãã‚’æ›¸ãã¾ã™ã€‚</p><p>ãƒ¡ãƒ¢ï¼šæ®‹ä½œæ¥­</p><ul><li>Webã‚µãƒ¼ãƒæ§‹ç¯‰ï¼ˆApache?nginx?ãƒã‚·ãƒ³ã‚¹ãƒšãƒƒã‚¯ãŒå¼±ã„ã®ã§è»½ã„ã®ãŒã„ã„ï¼‰</li><li>ãƒã‚¤ã‚³ãƒ³ã¸ã®æ›¸ãè¾¼ã¿åŠã³ã€åŸºç›¤ã¸ã®ã¯ã‚“ã ä»˜ã‘ä½œæ¥­</li><li>ãƒã‚¤ã‚³ãƒ³ã¨Raspberry Piã‚’è¨­ç½®ã™ã‚‹ã‚ˆã†ã®ç®±ã‚’ç”¨æ„ï¼ˆæœ¨ï¼Ÿè¿‘æ‰€ã«3Dãƒ—ãƒªãƒ³ã‚¿ãƒ¼ãŒä½¿ãˆã‚‹åº—ãŒã‚ã‚‹ã®ã§ãƒ—ãƒ©ã‚¹ãƒãƒƒã‚¯ï¼Ÿ)</li><li>ãƒ‰ã‚¢ã¸ã®è¨­ç½®</li></ul><h3 id="ã‚ã¨ãŒã"><a href="#ã‚ã¨ãŒã" class="headerlink" title="ã‚ã¨ãŒã"></a>ã‚ã¨ãŒã</h3><p>åˆã‚ã¦Arduinoã‚„Raspberry Piã«è§¦ã£ã¦ã¿ã¾ã—ãŸãŒè‰²ã€…ã¨ãƒˆãƒ©ãƒ–ãƒ«ãŒç¶šã„ã¦æ€ã†ã‚ˆã†ã«é€²ã¾ãªã‹ã£ãŸã§ã™ã€‚ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢å‘¨ã‚Šã¯ã€æœªçµŒé¨“ã ã£ãŸã®ã§ã€è‰¯ã„çµŒé¨“ã«ã¯ãªã£ãŸã‹ãªã¨è€ƒãˆã¦ã„ã¾ã™ã€‚</p><p>ã‚ã¨ã€ä»Šå›ã®ã‚ˆã†ãªèª°ã‹ã«è¦‹ã›ã‚‹ã‚ˆã†ãªã‚‚ã®ã‚’æ›¸ã„ãŸã‚Šã™ã‚‹ã¨ã€ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã®ä»•æ–¹ã‚’è€ƒãˆãŸã‚Šã™ã‚‹ç·´ç¿’ã«ã‚‚ãªã‚‹ã¨æ€ã†ã®ã§ã€æ›¸ã„ãŸã“ã¨ãŒç„¡ãã¦äºŒã®è¶³ã‚’è¸ã‚“ã§ã„ã‚‹ã‚ˆã†ãªæ–¹ãŒã„ã‚Œã°ã€æŒ‘æˆ¦ã—ã¦ã¿ã‚‹ã¨è‰¯ã„çµŒé¨“ã«ãªã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚</p><p>ã§ã¯ã€ã¾ãŸåŸ·ç­†ã™ã‚‹æ©Ÿä¼šãŒã‚ã‚Œã°ãŠä¼šã„ã—ã¾ã—ã‚‡ã†</p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/IoT/">IoT</category>
      
      
      <category domain="https://future-architect.github.io/tags/%E9%9B%BB%E5%AD%90%E5%B7%A5%E4%BD%9C/">é›»å­å·¥ä½œ</category>
      
      <category domain="https://future-architect.github.io/tags/RaspberryPi/">RaspberryPi</category>
      
      <category domain="https://future-architect.github.io/tags/Arduino/">Arduino</category>
      
      <category domain="https://future-architect.github.io/tags/%E5%88%9D%E5%BF%83%E8%80%85/">åˆå¿ƒè€…</category>
      
      
      <comments>https://future-architect.github.io/articles/20230905a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Unityã®Shaderã§VRãƒ—ãƒ©ãƒã‚¿ãƒªã‚¦ãƒ ã‚’ä½œã£ãŸã‘ã©ã†ã¾ãã„ã‹ãšæ‚”ã—ã‹ã£ãŸã®ã§è‡ªä½œã®æ˜Ÿã‚’ä½œã£ãŸã‚‰å®‡å®™ãŒçµ‚ã‚ã£ãŸ</title>
      <link>https://future-architect.github.io/articles/20230901a/</link>
      <guid>https://future-architect.github.io/articles/20230901a/</guid>
      <pubDate>Thu, 31 Aug 2023 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;h2 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h2&gt;&lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€‚TIG DX ãƒ¦ãƒ‹ãƒƒãƒˆæ‰€å±ã€é‡‘æ¬ ã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆã®è—¤äº•ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a</description>
          
        
      
      
      
      <content:encoded><![CDATA[<h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><p>ã“ã‚“ã«ã¡ã¯ã€‚TIG DX ãƒ¦ãƒ‹ãƒƒãƒˆæ‰€å±ã€é‡‘æ¬ ã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆã®è—¤äº•ã§ã™ã€‚</p><p><a href="/articles/20230821a/">å¤ã®è‡ªç”±ç ”ç©¶é€£è¼‰</a>ã®ç¬¬2å¼¾ã§ã™ã€‚å¤ä¼‘ã¿ã®å®¿é¡Œã£ã½ã„ã‚‚ã®ã‚’é¡Œæã«ã—ã¦ã¿ã¾ã—ãŸã€‚</p><p>å®Ÿã¯ç§ã€æ˜Ÿã‚’è¦‹ã‚‹ã®ãŒå¥½ããªã®ã§ã€å¤©ä½“æœ›é é¡ã‚’è²·ã£ãŸã‚Šã€æ˜Ÿã‚’æ’®ã‚‹ãŸã‚ã«ã‚«ãƒ¡ãƒ©ã‚’è²·ã£ãŸã‚Šã—ã¦ã„ã¾ã™ã€‚ã›ã£ã‹ããªã‚‰ã„ã„ç’°å¢ƒã§è¦‹ãŸã„ã®ã§ã€å—ã¯æ²–ç¸„ã‹ã‚‰åŒ—ã¯åŒ—æµ·é“ã¾ã§æ˜Ÿã‚’è¦‹ã«è¡Œã£ã¦ã„ã¾ã™ã€‚ï¼ˆæµ·å¤–ã‚‚è¡ŒããŸã„ï¼‰ã€‚ãŸã ã€æ˜Ÿã‚’è¦‹ã«è¡Œãã¨ãªã‚‹ã¨ã©ã†ã—ã¦ã‚‚é•·è·é›¢ç§»å‹•ã«ãªã‚‹ã®ã§ã€ãŠé‡‘ã‚‚ã‹ã‹ã‚‹ã—å¤§å¤‰ã§ã™ã€‚å¤©æ°—ã«å·¦å³ã•ã‚Œã‚‹ã®ã‚‚ã¤ã‚‰ã„ã¨ã“ã‚ã§ã™ã€‚</p><p>ã¨ã„ã†ã“ã¨ã§ä»Šå›ã¯ã€é å‡ºã—ãªãã¦ã‚‚ã„ã‚ã‚“ãªæ˜Ÿã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ã€VR ã§ãƒ—ãƒ©ãƒã‚¿ãƒªã‚¦ãƒ ã‚’ä½œã‚ã†ã¨æ€ã„ã¾ã™ã€‚</p><p>ãªãŠã€æœ¬è¨˜äº‹ã§ã¯ Unity ãã®ã‚‚ã®ã®æ©Ÿèƒ½ã‚„ã€Shader ã®åŸºæœ¬çš„ãªéƒ¨åˆ†ã«ã¯è§¦ã‚Œãšã€ä½œæˆã—ãŸã‚½ãƒ¼ã‚¹ã‚’å‚ç…§ã—ãªãŒã‚‰ã€é‡è¦ãªéƒ¨åˆ†ã®ã¿ã‚’è©³ç´°ã«è¨˜è¼‰ã—ã¦ã„ã¾ã™ã€‚</p><h2 id="äº‹å‰æº–å‚™ç­‰"><a href="#äº‹å‰æº–å‚™ç­‰" class="headerlink" title="äº‹å‰æº–å‚™ç­‰"></a>äº‹å‰æº–å‚™ç­‰</h2><h3 id="å¤§æ–¹é‡"><a href="#å¤§æ–¹é‡" class="headerlink" title="å¤§æ–¹é‡"></a>å¤§æ–¹é‡</h3><p>VR ãƒ—ãƒ©ãƒã‚¿ãƒªã‚¦ãƒ ã‚’ä½œã‚‹ãŸã‚ã«ã¯ã€VR ç©ºé–“ä¸Šã§æ˜Ÿã®é…ç½®ã‚’å†ç¾ã—ã¦ã„ãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚å®Ÿç¾æ–¹é‡ã¨ã—ã¦ã¯æ¦‚ã­ä»¥ä¸‹ã® 2 ã¤ã«åˆ†ã‹ã‚Œã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚</p><ol><li>å®Ÿéš›ã«å®‡å®™ç©ºé–“ã‚’ä½œæˆã—ã€æ˜Ÿã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦é…ç½®ã—ã¦ã„ã<ul><li>ãƒ¡ãƒªãƒƒãƒˆï¼šéå¸¸ã«ã‚ã‹ã‚Šã‚„ã™ãã€å®Ÿè£…ã‚³ã‚¹ãƒˆãŒä½ã„ã€‚</li><li>ãƒ‡ãƒ¡ãƒªãƒƒãƒˆï¼šå¤§é‡ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹ã“ã¨ã«ãªã‚‹ãŸã‚ã€è² è·ãŒé«˜ã„ã€‚</li></ul></li><li>å¤©çƒã‚’ä½œæˆã—ã€å¤©çƒä¸Šã«æ˜Ÿã®çµµï¼ˆãƒ†ã‚¯ã‚¹ãƒãƒ£ï¼‰ã‚’æã<ul><li>ãƒ¡ãƒªãƒƒãƒˆï¼šã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯å¤©çƒã®ã¿ã®ãŸã‚ã€è² è·ãŒä½ã„ã€‚</li><li>ãƒ‡ãƒ¡ãƒªãƒƒãƒˆï¼šãƒ†ã‚¯ã‚¹ãƒãƒ£ã®è§£åƒåº¦ã«ä¾å­˜ã—ã¦å³å¯†æ€§ãŒä½ä¸‹ã™ã‚‹ã€‚</li></ul></li></ol><p>ã¨ã“ã‚ã§çš†ã•ã‚“ã¯å®‡å®™ã«ã©ã‚Œãã‚‰ã„ã®æ˜Ÿï¼ˆæ’æ˜Ÿï¼‰ãŒã‚ã‚‹ã‹ã”å­˜çŸ¥ã§ã—ã‚‡ã†ã‹ã€‚æ˜Ÿã®æ•°ã»ã©ã€ã¨ã„ã†ãã‚‰ã„ãªã®ã§é€”æ–¹ã‚‚ãªã„æ•°ã§ã‚ã‚‹ã¨ã„ã†ã“ã¨ã¯ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚çµè«–ã¨ã—ã¦ã¯ã€å®‡å®™ã®å¤§ãã•ãŒç„¡é™å¤§ãªã®ã§ã€æ˜Ÿã®æ•°ã‚‚ç„¡é™å¤§ã§ã™ã€‚ã¨ã¯ã„ãˆã€æˆ‘ã€…ãŒåœ°çƒã‹ã‚‰è¦³æ¸¬ã§ãã‚‹æ˜Ÿã®æ•°ã¯æœ‰é™ã§ã‚ã‚‹ãŸã‚ã€ååˆ†ãªè¦³æ¸¬æŠ€è¡“ãŒã‚ã‚Œã°æ˜Ÿã®æ•°ã‚’æ•°ãˆã‚‹ã“ã¨ã¯åŸç†ä¸Šã¯å¯èƒ½ãªã¯ãšã§ã™ã€‚ï¼ˆç¾åœ¨ç¢ºèªå¯èƒ½ãªç¯„å›²ã§ã‚‚æ•°åå„„å€‹ã¯ã‚ã‚‹ã¨è¨€ã‚ã‚Œã¦ã„ã¾ã™ã€‚ï¼‰</p><p>ã“ã®è¦³æ¸¬ã§ãã‚‹æ˜Ÿã‚’ã™ã¹ã¦ç¶²ç¾…ã—ãŸã€æ˜Ÿè¡¨ã¨å‘¼ã°ã‚Œã‚‹ã‚‚ã®ã‚’ä½œã‚ŠãŸã„ã€ã¨ã„ã†é‡æœ›ã‚’å¤©æ–‡å­¦è€…ã¯å¤ã‚ˆã‚ŠæŠ±ã„ã¦ãŠã‚Šã€ç´€å…ƒå‰ã‹ã‚‰ç¾ä»£ã«è‡³ã‚‹ã¾ã§æ§˜ã€…ãªæ˜Ÿè¡¨ãŒä½œã‚‰ã‚Œã¦ãã¾ã—ãŸã€‚ãŸã ã€ã“ã‚Œã‚‰ã®æ˜Ÿè¡¨ã¯ã‚‚ã¡ã‚ã‚“å®Œç’§ãªã‚‚ã®ã§ã¯ãªãã€å®Ÿéš›ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ã®ã¯æ•°åä¸‡ç¨‹åº¦ã§ã™ã€‚</p><p>æ¯æ•°ãŒå¤šã„ã®ã§ã€æ•°åä¸‡ã¨èãã¨å°‘ãªãè¦‹ãˆã¾ã™ãŒã€æ±ºã—ã¦å°ã•ã„å€¤ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ç‰¹ã«ä»Šå›ã¯ Meta Quest 2 ã‚’ç”¨ã„ã¦ãƒ—ãƒ©ãƒã‚¿ãƒªã‚¦ãƒ ã‚’ä½œã‚ã†ã¨æ€ã£ã¦ã„ã‚‹ã®ã§ã€ãƒã‚·ãƒ³ã‚¹ãƒšãƒƒã‚¯ã‚‚ãã“ã¾ã§é«˜ãã‚ã‚Šã¾ã›ã‚“ã€‚ãã®ãŸã‚ä»Šå›ã¯ã€è² è·ã‚’ä½æ¸›ã§ãã‚‹æ–¹é‡ 2 ã‚’æ¡ç”¨ã—ã¾ã™ã€‚</p><h2 id="Shader-ã§-Skybox-ã«å‹•çš„ã«æ˜Ÿã‚’æã„ã¦ã¿ã‚‹"><a href="#Shader-ã§-Skybox-ã«å‹•çš„ã«æ˜Ÿã‚’æã„ã¦ã¿ã‚‹" class="headerlink" title="Shader ã§ Skybox ã«å‹•çš„ã«æ˜Ÿã‚’æã„ã¦ã¿ã‚‹"></a>Shader ã§ Skybox ã«å‹•çš„ã«æ˜Ÿã‚’æã„ã¦ã¿ã‚‹</h2><p>ã§ã¯ã€å¤©çƒä¸Šã«æ˜Ÿã‚’æã„ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ãŸã ã—ä»Šå›ã¯å¤©çƒç”¨ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ä½œæˆã›ãšã€Skybox ã¨å‘¼ã°ã‚Œã‚‹ã‚‚ã®ã‚’ä½¿ã„ã¾ã™ã€‚Unity ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒå­˜åœ¨ã—ãªã‘ã‚Œã°æç”»ã•ã‚Œã‚‹èƒŒæ™¯ã®ã‚ˆã†ãªã‚‚ã®ã§ã€ã‚²ãƒ¼ãƒ ç©ºé–“ã‚’å–ã‚Šå›²ã‚€ã‚ˆã†ã«é…ç½®ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p>Skybox ã«æ˜Ÿã®çµµã‚’æãã«å½“ãŸã‚Šã€å®Ÿéš›ã«æ˜Ÿç©ºã®ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’æã„ã¦è²¼ã‚Šä»˜ã‘ã¦ã‚‚è‰¯ã„ã®ã§ã™ãŒã€ä»Šå›ã¯ Shader ã§å‹•çš„ã«æ˜Ÿæ™¯ã‚’ä½œæˆã™ã‚‹ã“ã¨ã«ã—ã¦ã¿ã¾ã—ãŸã€‚ç†ç”±ã¯ Shader ã‚’æ›¸ã„ã¦ã¿ãŸã‹ã£ãŸã‹ã‚‰ã§ã™ã€‚</p><p>Unity ã§ã¯ã€ã€Œã‚²ãƒ¼ãƒ ç©ºé–“å†…ã®<code>(x,y,z)</code>ã¨ã„ã†åº§æ¨™ã« hoge ã¨ã„ã†ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒæœ‰ã‚‹ã‹ã‚‰ã€ç”»é¢ä¸Šã®<code>(X,Y)</code>åº§æ¨™ã®ãƒ”ã‚¯ã‚»ãƒ«ã«ã¯<code>(r,g,b)</code>ã¨ã„ã†è‰²ã‚’å‡ºåŠ›ã—ã‚ˆã†ã€ã¨ã„ã†å‡¦ç†ã‚’ Shader ã¨å‘¼ã°ã‚Œã‚‹ã‚‚ã®ãŒè¡Œã£ã¦ã„ã¾ã™ã€‚<br>ã¤ã¾ã‚Š Shader ã«é©åˆ‡ãªæŒ‡ç¤ºã‚’å‡ºã—ã¦ã‚‚ã‚‰ãˆã°ã€å®Ÿæ…‹ã¨ã—ã¦ã¯ã‚²ãƒ¼ãƒ ç©ºé–“å†…ã«ä½•ã‚‚å­˜åœ¨ã—ã¦ã„ãªã„ã«ã‚‚é–¢ã‚ã‚‰ãšã€ç”»é¢ä¸Šã«ã¯ä½•ã‹ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã€ã¨ã„ã†ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>ã“ã‚Œã«ã‚ˆã‚Šã€å˜ç´”ã«ã‚²ãƒ¼ãƒ ç©ºé–“å†…ã«å¬å–šã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒæ¸›ã‚‹ã¨ã„ã†åŠ¹æœã¯ã‚‚ã¡ã‚ã‚“ã‚ã‚‹ã®ã§ã™ãŒã€ãã‚Œã«åŠ ãˆã¦ Unity ã§ã¯ã€C#ã§æ›¸ã‹ã‚ŒãŸãƒ­ã‚¸ãƒƒã‚¯ã¯ CPU ã§ï¼ˆã»ã¼ï¼‰ç›´åˆ—ã«å‡¦ç†ãŒã•ã‚Œã€Shader ã¯ GPU ã§ä¸¦åˆ—ã«å‡¦ç†ãŒã•ã‚Œã¾ã™ã€‚åŸºæœ¬çš„ã«æå†™ã™ã‚‹å¯¾è±¡ã®æ•°ãŒå¤šã„ã»ã©ã€å‡¦ç†ã®ä¸¦åˆ—åº¦ãŒé‡è¦ã«ãªã£ã¦ãã‚‹ãŸã‚ã€æ˜Ÿã®è¡¨ç¤ºã¯ã™ã¹ã¦ Shader ã«ã¾ã‹ã›ã¦ã—ã¾ãˆã°ã€éå¸¸ã«è»½å¿«ã«å®‡å®™ã‚’å†ç¾ã§ãã‚‹ã®ã§ã¯ãªã„ã‹ã€ã¨ã„ã†æ°—ãŒã—ã¦ãã¾ã—ãŸã€‚<br>ãªãŠã€çµè«–ã‹ã‚‰è¨˜è¼‰ã™ã‚‹ã¨ã€ã“ã‚Œã¯ãƒ€ãƒ¡ã§ã—ãŸã€‚</p><h3 id="Shader-ã‚’æ›¸ã„ã¦ã¿ã‚‹"><a href="#Shader-ã‚’æ›¸ã„ã¦ã¿ã‚‹" class="headerlink" title="Shader ã‚’æ›¸ã„ã¦ã¿ã‚‹"></a>Shader ã‚’æ›¸ã„ã¦ã¿ã‚‹</h3><p>Unity ã® Shader ã§ã¯ã€HLSL ã¨å‘¼ã°ã‚Œã‚‹è¨€èªã‚’ç”¨ã„ã¦å‡¦ç†ã‚’è¨˜è¿°ã—ã¦ã„ãã¾ã™ã€‚</p><p>ã¨ã‚Šã‚ãˆãšè©¦ã—ã« 2 ã¤ã€ç™½ã¨èµ¤ã®æ˜ŸãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ãªã‚‚ã®ã‚’ä½œã£ã¦ã¿ãŸã‚‚ã®ãŒ<a href="https://github.com/shomuMatch/VRPlanetarium/blob/master/Assets/Shader/sample1.shader">ã“ã¡ã‚‰ã® sample1.shader</a>ã§ã™ã€‚</p><p>é‡è¦ãªã®ã¯ä»¥ä¸‹ã®ã‚ãŸã‚Šã§ã™ã€‚</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ˜Ÿã®å­˜åœ¨ã™ã‚‹æ–¹å‘ã‚„è‰²ã€æ˜ã‚‹ã•ã‚’å®šç¾©</span></span><br><span class="line"><span class="type">static</span> <span class="type">const</span> Star stars[<span class="number">2</span>] = &#123;</span><br><span class="line">      createStar(float3(<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>), fixed3(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>), <span class="number">0.5</span>),</span><br><span class="line">      createStar(float3(<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>), fixed3(<span class="number">1</span>, <span class="number">0.5</span>, <span class="number">0.5</span>), <span class="number">1</span>),</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// èƒŒæ™¯è‰²ã‚’å®šç¾©</span></span><br><span class="line">fixed4 <span class="title function_">drawBackground</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">      <span class="keyword">return</span> fixed4(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ˜Ÿã‚’æç”»</span></span><br><span class="line">fixed4 <span class="title function_">drawStars</span><span class="params">(float3 dir)</span></span><br><span class="line">&#123;</span><br><span class="line">      float3 o = float3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++)</span><br><span class="line">      &#123;</span><br><span class="line">            float3 direction = normalize(stars[i].direction);</span><br><span class="line">            fixed3 color = normalize(stars[i].color);</span><br><span class="line">            <span class="type">float</span> angle = dot(dir, direction);</span><br><span class="line">            o += color * <span class="built_in">pow</span>(max(<span class="number">0.0</span>, angle), _radiusCoefficient * (stars[i].magnitude + <span class="number">2</span>)) * <span class="built_in">pow</span>(<span class="number">2.5</span>, <span class="number">-1</span> * stars[i].magnitude) * _brightnessCoefficient;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> float4(o, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å„ãƒ”ã‚¯ã‚»ãƒ«ã”ã¨ã®è‰²ã‚’æ±ºå®š</span></span><br><span class="line">fixed4 <span class="title function_">frag</span><span class="params">(v2f i)</span> : SV_Target</span><br><span class="line">&#123;</span><br><span class="line">      <span class="keyword">return</span> drawBackground() + drawStars(i.texcoord);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã‚³ãƒ¡ãƒ³ãƒˆã§æ›¸ã„ã¦ã„ã‚‹é€šã‚Šãªã®ã§ã™ãŒã€<code>frag()</code>ã¨ã„ã†é–¢æ•°ã®è¿”ã‚Šå€¤ã«å¿œã˜ã¦ã€ç”»é¢ä¸Šã®å„ãƒ”ã‚¯ã‚»ãƒ«ã”ã¨ã®è‰²ãŒæ±ºå®šã•ã‚Œã¾ã™ã€‚ï¼ˆ<code>#pragma fragment frag</code>ã¨ã„ã†è¨˜è¿°ã§å®šç¾©ã—ã¦ã„ã¾ã™ï¼‰</p><p>ã“ã®<code>frag()</code>ã®å¼•æ•°ã§ã‚ã‚‹<code>i</code>ã®ãƒ¡ãƒ³ãƒå¤‰æ•°<code>texcoord</code>ã«ã¯ã€ç”»é¢å†…ã®å„ãƒ”ã‚¯ã‚»ãƒ«ã«ãŠã‘ã‚‹è¦–ç·šæ–¹å‘ã®ãƒ™ã‚¯ãƒˆãƒ«ãŒæ ¼ç´ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã®è¦–ç·šæ–¹å‘ã®ãƒ™ã‚¯ãƒˆãƒ«ã¨ã€åˆ¥é€”å®šç¾©ã—ã¦ã„ã‚‹æ˜Ÿã®å­˜åœ¨ã™ã‚‹æ–¹å‘ã‚’ç¤ºã—ã¦ã„ã‚‹ãƒ™ã‚¯ãƒˆãƒ«ã¨ã®å†…ç©ã‚’å–ã‚‹ã“ã¨ã§ã€ã©ã®ãƒ”ã‚¯ã‚»ãƒ«ã«æ˜Ÿã‚’æç”»ã™ã‚‹ã¹ãã‹ã‚’æ±ºå®šã—ã¦ã„ã‚‹ã®ãŒ<code>drawStars()</code>ã§ã™ã€‚ã–ã£ãã‚Šæ›¸ãã¨ã€è¦–ç·šæ–¹å‘ã¨æ˜Ÿã®å­˜åœ¨ã™ã‚‹æ–¹å‘ãŒåŒã˜ã§ã‚ã‚Œã°æ˜Ÿã‚’æç”»ã—ã€è‹¥å¹²ãšã‚Œã¦ã„ãŸã¨ã—ã¦ã‚‚ã€æ˜Ÿã®æ˜ã‚‹ã•ã«å¿œã˜ã¦ã»ã‚“ã®å°‘ã—ã¯æç”»ã™ã‚‹ã€‚ã¿ãŸã„ãªã“ã¨ã‚’è¡¨ç¾ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚’æ˜Ÿã®æ•°ã ã‘ç¹°ã‚Šè¿”ã™ã‚ˆã†ãƒ«ãƒ¼ãƒ—ã—ã¦ã„ã¾ã™ã€‚ãªãŠã€shader ã§ã¯å˜ç´”ãªãƒ«ãƒ¼ãƒ—ã¯é©åˆ‡ã«æœ€é©åŒ–ã•ã‚Œã€ä¸¦åˆ—å‡¦ç†ãŒè¡Œã‚ã‚Œã¾ã™ã€‚é…åˆ—ã®è¦ç´ é–“ã®ã‚„ã‚Šå–ã‚Šãªã©ã€ç›´åˆ—å®Ÿè¡ŒãŒä¸å¯é¿ãªã‚‚ã®ã«é–¢ã—ã¦ã¯ä¸¦åˆ—åŒ–ã•ã‚Œã¾ã›ã‚“ãŒã€ãã‚‚ãã‚‚ãã†ã„ã†å‡¦ç†ã¯ GPU ã§å®Ÿæ–½ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã•ã‚Œã¾ã›ã‚“ã€‚</p><p>ã•ã¦ã€ã“ã® Shader ã‚’ Skybox ã«é©ç”¨ã™ã‚‹ã¨ã©ã®ã‚ˆã†ã«æ˜ŸãŒè¦‹ãˆã‚‹ã‹ã¨ã„ã†ã¨ã€ã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚</p><img src="/images/20230901a/image.png" alt="image.png" width="1200" height="602" loading="lazy"><p>çµæ§‹ãã‚Œã£ã½ã„æ°—ãŒã—ã¾ã™ã­ã€‚</p><p>ã§ã¯ã“ã“ã‹ã‚‰ã©ã‚“ã©ã‚“æ˜Ÿã‚’å¢—ã‚„ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚ã¨æ€ã£ãŸã®ã§ã™ãŒã€ä»¥ä¸‹ã®ã‚ˆã†ãªåˆ¶ç´„ã®å£ã«ã¶ã¤ã‹ã‚Šç¶šã‘ã€çµå±€ã¯æ–­å¿µã—ã¾ã—ãŸã€‚</p><ul><li>Shader ã§ã¯å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚“ã§æç”»ã™ã‚‹ã“ã¨ãŒã§ããªã„ã€‚<ul><li>ãã®ãŸã‚ã€æ˜Ÿã®æƒ…å ±ã‚’ã™ã¹ã¦ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã—ãŸã€‚</li><li>ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ã‚’ C#ã§è¡Œã„ã€Shader ã«çµæœã‚’æ¸¡ã™ã€ã¿ãŸã„ãªã“ã¨ã‚‚ã§ãã‚‹æ°—ãŒã—ãŸã®ã§ã™ãŒã€ã†ã¾ãè¡Œã‹ãšâ€¦</li></ul></li><li>Shader ã§åˆ©ç”¨ã§ãã‚‹é…åˆ—ã®è¦ç´ æ•°ã«ä¸Šé™ãŒã‚ã£ãŸã€‚<ul><li>1 é…åˆ—ã®è¦ç´ æ•°ã€ã§ã¯ãªãã€å…¨é…åˆ—ã®è¦ç´ æ•°ã®åˆè¨ˆãŒ 4096 ä»¥ä¸‹ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹ã‚ˆã†ã§ã—ãŸã€‚</li><li>ãã®ãŸã‚ã€é…åˆ—ã§ã¯ãªãå€‹åˆ¥ã«å¤‰æ•°ã‚’å¤§é‡ã«å®£è¨€ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã—ãŸã€‚</li></ul></li><li>10 ä¸‡å€‹ã®æ˜Ÿã‚’æã“ã†ã¨ã—ãŸã¨ã“ã‚ã€Shader ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ãŸã€‚<ul><li>å€‹åˆ¥å¤‰æ•°ã®æ•°ã«å¿œã˜ã¦ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚é–“ãŒä¼¸ã³ã¦ã„ãã€ã‚„ãŒã¦ã¯ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¦ã—ã¾ã„ã¾ã—ãŸã€‚</li><li>ç’°å¢ƒå¤‰æ•°ã§ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ™‚é–“ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ãªã®ã§ã€ä¼¸ã°ã™ã“ã¨ã¯å¯èƒ½ãã†ãªã®ã§ã™ãŒã€ã¨ã‚Šã‚ãˆãšã¯æ˜Ÿã®æ•°ã‚’æ¸›ã‚‰ã—ã¦è©¦ã—ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚</li></ul></li><li>1 ä¸‡å€‹ãã‚‰ã„ã®æ˜Ÿã‚’æã„ãŸã‚ãŸã‚Šã§ã€PC ãŒå”¸ã‚Šã‚’ä¸Šã’å§‹ã‚ãŸã€‚<ul><li>GPU ãŒãƒ•ãƒ«å›è»¢ã‚’å§‹ã‚ã¾ã—ãŸã€‚</li><li>ã‚ã¨æ™®é€šã«ã‚ã¡ã‚ƒãã¡ã‚ƒé‡ãŸããªã£ã¦ã„ãŸãŸã‚ã€ã“ã“ã§å¿ƒãŒæŠ˜ã‚Œã¾ã—ãŸã€‚</li></ul></li></ul><p>ä¸€å¿œã‚ã‚‹ç¨‹åº¦ã¯æã‘ã¦ã„ãŸã®ã§ä¾›é¤Šã®ãŸã‚ã‚­ãƒ£ãƒ—ãƒãƒ£ã‚’æ²è¼‰ã—ã¦ãŠãã¾ã™ã€‚</p><img src="/images/20230901a/image_2.png" alt="" width="1200" height="728" loading="lazy"><p>ãªã‚“ã‹ã€æ˜Ÿç©ºã£ã¦æ„Ÿã˜ã§ã¯ãªã„ã§ã™ã­ï¼Ÿ</p><p>ã‚‚ã—ã‹ã—ãŸã‚‰è‰²ã‚„æ˜ã‚‹ã•ã‚’è¨ˆç®—ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã«ãƒã‚°ãŒã‚ã‚‹ã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€å¿ƒãŒæŠ˜ã‚ŒãŸã®ã§ã“ã‚Œä»¥ä¸Šã¯æ·±è¿½ã„ã—ã¾ã›ã‚“ã€‚</p><h2 id="ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’æã„ã¦è²¼ã‚Šä»˜ã‘ã‚‹æ–¹é‡ã«åˆ‡ã‚Šæ›¿ãˆã‚‹"><a href="#ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’æã„ã¦è²¼ã‚Šä»˜ã‘ã‚‹æ–¹é‡ã«åˆ‡ã‚Šæ›¿ãˆã‚‹" class="headerlink" title="ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’æã„ã¦è²¼ã‚Šä»˜ã‘ã‚‹æ–¹é‡ã«åˆ‡ã‚Šæ›¿ãˆã‚‹"></a>ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’æã„ã¦è²¼ã‚Šä»˜ã‘ã‚‹æ–¹é‡ã«åˆ‡ã‚Šæ›¿ãˆã‚‹</h2><p>Skybox ã«å‹•çš„ã«æ˜Ÿã‚’æãæ–¹é‡ã¯é “æŒ«ã—ãŸã—ã€ã¨ã‚Šã‚ãˆãš Shader ã‚’æ›¸ã„ã¦ã¿ã‚‹ã¨ã„ã†ç›®çš„ã¯é”æˆã—ãŸãŸã‚ã€ç´ ç›´ã«ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’æã„ã¦ã€ãã‚Œã‚’è²¼ã‚Šä»˜ã‘ã‚‹æ–¹é‡ã«åˆ‡ã‚Šæ›¿ãˆã¾ã™ã€‚åˆ‡ã‚Šæ›¿ãˆã¯å¤§äº‹ã€‚</p><h3 id="ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’æã"><a href="#ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’æã" class="headerlink" title="ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’æã"></a>ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’æã</h3><p>ã¾ãšã¯ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’ä½œæˆã™ã‚‹ãŸã‚ã®æ˜Ÿã®ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨æ„ã—ã¾ã™ã€‚</p><p>ä»Šå› VR ãƒ—ãƒ©ãƒã‚¿ãƒªã‚¦ãƒ ã‚’ä½œã‚‹ã«ã‚ãŸã£ã¦ã€ã¨ã‚Šã‚ãˆãšã¯å®Ÿéš›ã®æ˜Ÿç©ºã‚’å†ç¾ã—ãŸã„ã®ã§ã€è¦³æ¸¬ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨ã„ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚å†’é ­ã§æ˜Ÿè¡¨ã¨ã„ã†ã‚‚ã®ã‚’ç´¹ä»‹ã—ã¾ã—ãŸãŒã€ä»Šå›ã¯ãã®ä¸­ã§ã‚‚ã€ãƒ’ãƒƒãƒ‘ãƒ«ã‚³ã‚¹æ˜Ÿè¡¨ã¨ã„ã†ã‚‚ã®ã‚’ä½¿ã£ã¦ã„ãã¾ã™ã€‚ãƒ’ãƒƒãƒ‘ãƒ«ã‚³ã‚¹è¡›æ˜Ÿã«ã‚ˆã‚Šå–å¾—ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’ç·¨çº‚ã—ãŸã‚‚ã®ã§ã€12 ä¸‡å¼±ã®æ˜Ÿã®ãƒ‡ãƒ¼ã‚¿ãŒè¨˜éŒ²ã•ã‚Œã¦ã„ã¾ã™ã€‚<a href="https://heasarc.gsfc.nasa.gov/db-perl/W3Browse/w3table.pl?tablehead=name=hipparcos&Action=More+Options">NASA ãŒãƒ‡ãƒ¼ã‚¿ã‚’å…¬é–‹ã—ã¦ãã‚Œã¦ã„ã‚‹</a>ã®ã§ã€ã“ã¡ã‚‰ã‹ã‚‰å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ã„ãã¾ã™ã€‚</p><p>HIP ç•ªå·ï¼ˆnameï¼‰ã€èµ¤çµŒï¼ˆraï¼‰ã€èµ¤ç·¯ï¼ˆdecï¼‰ã€ç­‰ç´šï¼ˆvmagï¼‰ã€B-V è‰²æŒ‡æ•°ï¼ˆbv_colorï¼‰ã‚’é¸æŠã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸã€‚ãã®ã¾ã¾ã ã¨ä½¿ã„ã¥ã‚‰ã„ã®ã§ã€ä»¥ä¸‹ã‚³ãƒãƒ³ãƒ‰ãªã©ã§ csv ã«å¤‰æ›ã—ã¦ãŠãã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> hip.txt | sed <span class="string">&#x27;1,5d&#x27;</span> | sed <span class="string">&#x27;s/ \+|/|/g&#x27;</span> | sed <span class="string">&#x27;s/| \+/|/g&#x27;</span> | awk -F <span class="string">&#x27;|&#x27;</span> -v <span class="string">&#x27;OFS=,&#x27;</span> <span class="string">&#x27;&#123;print $2,$3,$4,$5,$6&#125;&#x27;</span> &gt; hip.csv</span><br></pre></td></tr></table></figure><p>ã“ã® csv ã‚’ã‚‚ã¨ã«ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’æç”»ã™ã‚‹<a href="https://github.com/shomuMatch/VRPlanetarium/blob/master/hip/drawTexture.py">python ã‚¹ã‚¯ãƒªãƒ—ãƒˆ</a>ã‚’ä½œæˆã—ã¾ã—ãŸã€‚</p><p>ã–ã£ãã‚Šã“ã‚“ãªæ„Ÿã˜ã®ã“ã¨ã‚’ã—ã¦ã„ã¾ã™ã€‚</p><ul><li>èµ¤çµŒãƒ»èµ¤ç·¯ã‚’åº¦ï¼ˆdegreeï¼‰ã«å¤‰æ›ã—ã¦æç”»ã™ã‚‹ä½ç½®ã‚’æ±ºå®šã™ã‚‹ã€‚</li><li>ç­‰ç´šã¨èµ¤ç·¯ã‹ã‚‰ç”»åƒä¸Šã§ã®æ˜Ÿã®å¤§ãã•ã‚’æ±ºå®šã™ã‚‹ã€‚<ul><li>æœ¬æ¥æ˜Ÿã¯ã‚‚ã®ã™ã”ãé ã„ãŸã‚ã€æ˜ã‚‹ã•ã«ã‚ˆã‚‰ãšç‚¹ã¨ã—ã¦è¦‹ãˆã‚‹ã¯ãšã§ã™ãŒã€äººã®ç›®ã®éŒ¯è¦šã¨ã—ã¦æ˜ã‚‹ã„ã‚‚ã®ã¯å¤§ããè¦‹ãˆãŸã‚Šã€å¤§æ°—ã«ã‚ˆã‚‹æ•£ä¹±åŠ¹æœãŒæ˜ã‚‹ã„ã»ã©å¼·ã„ã“ã¨ãªã©ã‚’è¸ã¾ãˆã€æ˜ã‚‹ã„æ˜Ÿã»ã©å¤§ããæç”»ã—ã¦ã„ã¾ã™ã€‚</li><li>å¤©çƒã‚’å¹³é¢ã®ãƒ†ã‚¯ã‚¹ãƒãƒ£ã§è¡¨ç¾ã™ã‚‹ãŸã‚ã€èµ¤é“éƒ¨åˆ†ã¯ãã®ã¾ã¾ã«ã€æ¥µåœ°ã«è¿‘ã¥ãã»ã©æ¨ªã«å¼•ãä¼¸ã°ã—ãŸæç”»ã¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</li></ul></li><li>ç­‰ç´šãƒ»B-V è‰²æŒ‡æ•°ã‹ã‚‰å„æ˜Ÿã®è‰²ãƒ»æ˜ã‚‹ã•ã‚’æ±ºå®šã™ã‚‹ã€‚<ul><li>è¦³æ¸¬å€¤ã§ã‚ã‚‹ B-V è‰²æŒ‡æ•°ã‹ã‚‰æ˜Ÿã®è¡¨é¢æ¸©åº¦ã‚’æ¨å®šã€é»’ä½“ã‚’ä»®å®šã—ã¦è¡¨é¢æ¸©åº¦ã‹ã‚‰ RGB å€¤ã‚’ç®—å‡ºã—ã¦ã„ã¾ã™ã€‚</li><li>ç­‰ç´šãŒ 1 å¤‰ã‚ã‚‹ã¨ã€2.5 å€æ˜ã‚‹ã•ãŒå¤‰ã‚ã‚‹ã®ã§ã€HSV è‰²ç©ºé–“ã«ãŠã‘ã‚‹ V å€¤ãŒç­‰ç´šã«å¿œã˜ã¦å¢—æ¸›ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚<ul><li>ãŸã ã—ã€äººã®ç›®ãŒæ˜ã‚‹ã•ï¼ˆæš—ã•ï¼‰ã«æ…£ã‚ŒãŸã‚Šã€ã‚«ãƒ¡ãƒ©ã®éœ²å…‰æ™‚é–“ã‚’é•·ãã—ãŸã‚Šã™ã‚‹ã“ã¨ã§ã€çµ¶å¯¾çš„ãªæ˜ã‚‹ã•ã¨è¦‹ã‹ã‘ã®æ˜ã‚‹ã•ã¯å¿…ãšã—ã‚‚ä¸€è‡´ã—ãªã„ã“ã¨ã‚’è€ƒæ…®ã—ã€å¯å¤‰ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦ã„ã¾ã™ã€‚</li></ul></li><li>è¨ˆç®—ã®æ ¹æ‹ ã¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆä¸Šã«å‚è€ƒ URL ã‚’è¨˜è¼‰ã—ã¦ã„ã¾ã™ã€‚</li></ul></li><li>ã‚¬ãƒ³ãƒè£œæ­£ã‚’è¡Œã†ã€‚<ul><li>äººé–“ã®ç›®ã‚„ã‚«ãƒ¡ãƒ©ã«ã‚ˆã‚‹è£œæ­£ã¨ã—ã¦ã€ã‚¬ãƒ³ãƒè£œæ­£ãŒã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚ã“ã¡ã‚‰ã‚‚ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯å¯å¤‰ã§ã™ã€‚</li></ul></li></ul><p>ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«ã‚ˆã‚Šæç”»ã—ãŸãƒ†ã‚¯ã‚¹ãƒãƒ£ãŒã“ã¡ã‚‰ã§ã™ã€‚</p><img src="/images/20230901a/texture3.9_2.5.png" alt="" width="1200" height="600" loading="lazy"><p>é«˜è§£åƒåº¦ç”»åƒã«ã€å°ã•ãªæ˜Ÿã®ç‚¹ã‚’è¡¨ç¤ºã—ã¦ã„ã‚‹ã®ã§ã€ã‚ã¾ã‚Šãã‚‰ã³ã‚„ã‹ã§ã¯ãªã„ã§ã™ã€‚</p><h3 id="ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’-Skybox-ã«é©ç”¨ã™ã‚‹"><a href="#ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’-Skybox-ã«é©ç”¨ã™ã‚‹" class="headerlink" title="ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’ Skybox ã«é©ç”¨ã™ã‚‹"></a>ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’ Skybox ã«é©ç”¨ã™ã‚‹</h3><p>ãƒ†ã‚¯ã‚¹ãƒãƒ£ãŒç”Ÿæˆã§ãã‚Œã°ã‚ã¨ã¯ Unity ã«å–ã‚Šè¾¼ã‚“ã§ã€é©åˆ‡ã«è¨­å®šã™ã‚‹ã ã‘ã§ã™ã€‚</p><p>ã¾ãšã¯ Import ã—ã¦ã€è§£åƒåº¦ã‚’é«˜ã‚ã«è¨­å®šã—ã¦ãŠãã¾ã™ã€‚</p><img src="/images/20230901a/image_3.png" alt="image.png" width="898" height="790" loading="lazy"><p>ãã—ãŸã‚‰ Skybox ç”¨ã®ãƒãƒ†ãƒªã‚¢ãƒ«ã‚’ä½œæˆã—ã€Shader ã‚’<code>Skybox/Panoramic</code>ã«ã€Mapping ã‚’<code>Latitude Longitude Layout</code>ã«è¨­å®šã—ã€ãƒ†ã‚¯ã‚¹ãƒãƒ£ã®ã¨ã“ã‚ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ãŸãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’é©ç”¨ã—ã¾ã™ã€‚</p><img src="/images/20230901a/image_4.png" alt="image.png" width="896" height="666" loading="lazy"><p>æœ€å¾Œã«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã® Window -&gt; Rendering &gt; Lighting ã‹ã‚‰ Lighting è¨­å®šã‚’é–‹ãã€Environment ã‚¿ãƒ–ã«ã‚ã‚‹ Skybox Material ã«ä½œæˆã—ãŸ Material ã‚’ã‚»ãƒƒãƒˆã—ã¾ã™ã€‚</p><p>ã“ã‚Œã§æº–å‚™ã¯å®Œäº†ã§ã™ã€‚VR ç’°å¢ƒã§è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><img src="/images/20230901a/output.gif" alt="output.gif" width="1024" height="1024" loading="lazy"><p>ã†ãƒ¼ã‚“â€¦ã¨ã‚Šã‚ãˆãšã€æ˜Ÿç©ºã£ã½ãã¯ã‚ã‚‹â€¦ï¼Ÿï¼ˆãªã‚“ã‹ã€ã‚ªãƒªã‚ªãƒ³åº§ã®å½¢ãŠã‹ã—ã„æ°—ãŒã™ã‚‹ã€‚ï¼‰</p><h2 id="ãŠã‚ã‚Šã«"><a href="#ãŠã‚ã‚Šã«" class="headerlink" title="ãŠã‚ã‚Šã«"></a>ãŠã‚ã‚Šã«</h2><p>ã“ã“ã¾ã§ã‚„ã£ã¦ãŠã„ã¦ãªã‚“ãªã‚“ã§ã™ãŒã€æ€ã£ãŸã‚ˆã‚Šå¾®å¦™ã§ã—ãŸã€‚<br>è€ƒãˆã‚‰ã‚Œã‚‹è¦å› ã¯ã„ãã¤ã‹æœ‰ã‚Šã¾ã™ã€‚</p><ul><li>è§£åƒåº¦ãŒè¶³ã‚Šã¦ã„ãªã„ã€‚<ul><li>ãƒ†ã‚¯ã‚¹ãƒãƒ£ã®è§£åƒåº¦ãƒ»VR ãƒ˜ãƒƒãƒ‰ã‚»ãƒƒãƒˆã®è§£åƒåº¦ã¨ã‚‚ã«ã€ç¾å®Ÿä¸–ç•Œã«ã¯é ãåŠã³ã¾ã›ã‚“ã€‚ãã®ãŸã‚ã©ã†ã—ã¦ã‚‚æ˜Ÿã¨ã„ã†ã‚ˆã‚Šã¯ã€ãªã‚“ã‹å…‰ã£ã¦ã„ã‚‹ç‚¹ã€ã¿ãŸã„ã«è¦‹ãˆã¦ã—ã¾ã„ã¾ã™ã€‚</li></ul></li><li>æ˜Ÿã®æ•°ãŒå°‘ãªã„ã€‚<ul><li>10 ä¸‡å¼·ã®æ˜Ÿã‚’å†ç¾ã—ã¦ã„ã‚‹ã¨ã¯ã„ãˆã€å½“ç„¶å®‡å®™ã«å­˜åœ¨ã™ã‚‹ã™ã¹ã¦ã®æ˜Ÿã‚’å†ç¾ã§ãã¦ã„ã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</li><li>ç‰¹ã«ã€å¤©ã®å·éŠ€æ²³ã®å¤–ã«ã‚ã‚‹éŠ€æ²³ã®æ˜Ÿã‚„ã€æ˜Ÿé›²ãªã©ã®ãƒ‡ãƒ¼ã‚¿ã¯ãƒ’ãƒƒãƒ‘ãƒ«ã‚³ã‚¹æ˜Ÿè¡¨ã«ã¯å«ã¾ã‚Œã¦ã„ãªã„ãŸã‚ã€ã©ã†ã—ã¦ã‚‚å®Ÿéš›ã®æ˜Ÿç©ºã¨ã¯ç•°ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚</li><li>ã“ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ã«ã¯ã€å®Ÿéš›ã«ä¸–ç•Œå„åœ°ã§æ’®ã£ãŸæ˜Ÿæ™¯å†™çœŸã‚’ã¤ãªãåˆã‚ã›ã¦ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’ä½œã‚‹ã—ã‹ãªã„ã‹ãªã‚ã¨æ€ã„ã¾ã™ã€‚</li></ul></li><li>è‡¨å ´æ„ŸãŒãªã„ã€‚<ul><li>ã“ã‚Œã¯ç¾å®Ÿã®ãƒ—ãƒ©ãƒã‚¿ãƒªã‚¦ãƒ ã«ã‚‚è¨€ãˆã‚‹ã“ã¨ã§ã™ãŒã€ã‚„ã¯ã‚Šç¾åœ°ã§è‡ªç„¶ã«å›²ã¾ã‚ŒãªãŒã‚‰è¦‹ã‚‹æ˜Ÿç©ºã€ã¨ã„ã†ã‚‚ã®ã«ã€è¨€èªåŒ–ã§ããªã„é­…åŠ›ãŒã‚ã‚Šã¾ã™ã€‚æ°—æ¸©ã‚„é¢¨ã€éŸ³ãªã©ã€å˜ã«è¦–è¦šæƒ…å ±ã«é™ã‚‰ãªã„æ§˜ã€…ãªæƒ…å ±ãŒå¤šè§’çš„ã«ç§é”ã‚’é­…äº†ã—ã¦ã„ã‚‹ã®ã ã¨å®Ÿæ„Ÿã—ã¾ã—ãŸã€‚</li><li>ç¾å®Ÿã®ãƒ—ãƒ©ãƒã‚¿ãƒªã‚¦ãƒ ã§ã¯ã€ã“ã®å•é¡Œã‚’ã€é­…åŠ›çš„ãªãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ä¸Šæ˜ å†…å®¹ã«ã‚ˆã£ã¦è£œã£ã¦ã„ã‚‹ã®ã ã¨æ€ã„ã¾ã™ã€‚</li><li>ã‚²ãƒ¼ãƒ ã®èƒŒæ™¯ãªã©ã€è„‡å½¹ã«æ®ãˆã‚‹ã®ã§ã‚ã‚Œã°ã€ã“ã®ãã‚‰ã„ã§ã‚‚è‰¯ã„ã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</li></ul></li></ul><p>é ‘å¼µã£ãŸå‰²ã«ã¯ã“ã‚“ãªã‚‚ã®ã‹ã€ã¨ã„ã†ã‚ªãƒã«ãªã£ã¦ã—ã¾ã„æ‚”ã—ã„ã§ã™ãŒã€ã¨ã‚‚ã‚ã‚Œã‚ã‚‹ç¨‹åº¦ã®ãƒ—ãƒ©ãƒã‚¿ãƒªã‚¦ãƒ ã‚’å†ç¾ã§ããŸã®ã§ã€å¤ã®è‡ªç”±ç ”ç©¶ã¨ã—ã¦ã¯è‰¯ã—ã¨ã—ã¾ã™ã€‚<br>ã¡ãªã¿ã«ã€ä»Šå›ã¯ãƒ’ãƒƒãƒ‘ãƒ«ã‚³ã‚¹æ˜Ÿè¡¨ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¾ã—ãŸãŒã€åŒã˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§ã€è‡ªç”±ã«æ˜Ÿã‚’è¿½åŠ ã§ãã¾ã™ã€‚</p><p>ãƒ»ãƒ»ãƒ»ãƒ»ãƒ»ãƒ»ãƒ»ãƒ»</p><img src="/images/20230901a/image_5.png" alt="image.png" width="1200" height="193" loading="lazy"><p>ã›ã£ã‹ããªã®ã§-75 ç­‰æ˜Ÿã§ã‚ã‚‹ã€ã€Œã‚¹ãƒ¼ãƒ‘ãƒ¼æ˜ã‚‹ã„è—¤äº•æ˜Ÿã€ã‚’è¿½åŠ ã—ã¦ã¿ã¾ã—ãŸã€‚è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><img src="/images/20230901a/output2.gif" alt="output2.gif" width="1024" height="1024" loading="lazy"><p>å®‡å®™ã¯ã€ãªã‚“ã‹äº€è£‚å…¥ã£ãŸã—å…‰ã«åŒ…ã¾ã‚Œã¦çµ‚ã‚ã‚Šã¾ã—ãŸã€‚</p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Programming/">Programming</category>
      
      
      <category domain="https://future-architect.github.io/tags/Unity/">Unity</category>
      
      <category domain="https://future-architect.github.io/tags/VR/">VR</category>
      
      <category domain="https://future-architect.github.io/tags/Shader/">Shader</category>
      
      <category domain="https://future-architect.github.io/tags/%E3%83%97%E3%83%A9%E3%83%8D%E3%82%BF%E3%83%AA%E3%82%A6%E3%83%A0/">ãƒ—ãƒ©ãƒã‚¿ãƒªã‚¦ãƒ </category>
      
      
      <comments>https://future-architect.github.io/articles/20230901a/#disqus_thread</comments>
      
    </item>
    
  </channel>
</rss>
