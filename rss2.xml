<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ€è¡“ãƒ–ãƒ­ã‚°</title>
    <link>https://future-architect.github.io/</link>
    
    <image>
      <url>https://future-architect.github.io/feed_icon.png</url>
      <title>ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ€è¡“ãƒ–ãƒ­ã‚°</title>
      <link>https://future-architect.github.io/</link>
    </image>
    
    <atom:link href="https://future-architect.github.io/rss2.xml" rel="self" type="application/rss+xml"/>
    
    <description>ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®é–‹ç™ºè€…ã«ã‚ˆã‚‹å…¬å¼æŠ€è¡“ãƒ–ãƒ­ã‚°ã§ã™ã€‚æ¥­å‹™ã§åˆ©ç”¨ã—ã¦ã„ã‚‹æŠ€è¡“ã‚’å¹…åºƒãç´¹ä»‹ã—ã¾ã™ã€‚</description>
    <pubDate>Fri, 19 Apr 2024 00:31:39 GMT</pubDate>
    <generator>http://hexo.io/</generator>
    
    <item>
      <title>WSLã§å§‹ã‚ã‚‹ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰Swift å…¥é–€ ï½Hummingbirdï½</title>
      <link>https://future-architect.github.io/articles/20240418a/</link>
      <guid>https://future-architect.github.io/articles/20240418a/</guid>
      <pubDate>Wed, 17 Apr 2024 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;img src=&quot;/images/20240418a/image.png&quot; alt=&quot;image.png&quot; width=&quot;851&quot; height=&quot;200&quot; loading=&quot;lazy&quot;&gt;

&lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot;</description>
          
        
      
      
      
      <content:encoded><![CDATA[<img src="/images/20240418a/image.png" alt="image.png" width="851" height="200" loading="lazy"><h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>ã“ã‚“ã«ã¡ã¯ã€‚HealthCare Innovation Group(HIG)<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>æ‰€å±ã®æ¸…æ°´ã§ã™ã€‚<br><a href="/articles/20240408a/">æ˜¥ã®å…¥é–€é€£è¼‰2024</a>ã€6æœ¬ç›®ã®è¨˜äº‹ã§ã™ã€‚</p><p>Swiftã«ãŠã‘ã‚‹Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’å–ã‚Šä¸Šã’ã¾ã™ã€‚Swift<sup id="fnref:7"><a href="#fn:7" rel="footnote">7</a></sup>ã¯iOSã‚¢ãƒ—ãƒªé–‹ç™ºã®ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒå¼·ã„ã¨æ€ã„ã¾ã™ãŒã€iOSã‚¢ãƒ—ãƒªé–‹ç™ºä»¥å¤–ã§ã‚‚åˆ©ç”¨ã§ãã‚‹ã“ã¨ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚<br>ï¼ˆmacOSä»¥å¤–ã§ã‚‚SwiftãŒå‹•ã‹ã›ãŸã‚‰æ¥½ã—ã„ãªã¨ã„ã†ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã§è¨˜äº‹ã‚’åŸ·ç­†ã—ã¦ãŠã‚Šã¾ã™ã€‚ï¼‰</p><h2 id="Swift-ã«ãŠã‘ã‚‹-Web-ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯"><a href="#Swift-ã«ãŠã‘ã‚‹-Web-ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯" class="headerlink" title="Swift ã«ãŠã‘ã‚‹ Web ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯"></a>Swift ã«ãŠã‘ã‚‹ Web ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯</h2><p>ãã‚‚ãã‚‚Swiftã«ãŠã‘ã‚‹Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯ã€ä½•ãŒã‚ã‚‹ã§ã—ã‚‡ã†ã‹ï¼Ÿ</p><p>Swift.org<sup id="fnref:8"><a href="#fn:8" rel="footnote">8</a></sup>ã®<a href="https://www.swift.org/documentation/server/">Swift on Server</a>å†…ã§ç´¹ä»‹ã•ã‚Œã¦ã„ã‚‹Web ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯ä»¥ä¸‹2ã¤ã§ã™ã€‚</p><ul><li><a href="https://swiftpackageindex.com/hummingbird-project/hummingbird">Hummingbird</a></li><li><a href="https://vapor.codes/">Vapor</a></li></ul><p>GitHub Star æ•°ã‚’æ¯”è¼ƒã—ãŸå›³ã‚’ä»¥ä¸‹ã«ç¤ºã—ã¾ã™ã€‚</p><p>å…ˆç™ºã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã‚ã‚‹Vaporã®æ–¹ãŒäººæ°—ã§ã€æ¤œç´¢ã™ã‚‹ã¨æ—¥æœ¬èªè¨˜äº‹ã‚‚ã„ãã¤ã‹ãƒ’ãƒƒãƒˆã—ã¾ã™ã€‚Swift.orgå†…ã®Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>ã¨ã—ã¦å–ã‚Šä¸Šã’ã‚‰ã‚Œã¦ã„ã‚‹ã“ã¨ã‹ã‚‰ã‚‚ã€VaporãŒä¸»æµã¨ãªã£ã¦ã„ã‚‹ã“ã¨ãŒä¼ºãˆã¾ã™ã€‚Vaporã«ã¤ã„ã¦ã¯è¨˜äº‹ã«ãªã£ã¦ã„ã‚‹ã‚‚ã®ã‚‚å¤šã„ãŸã‚ã€å¾Œç™ºã®Hummingbirdã‚’è©¦ã—ã¾ã™ã€‚</p><img src="/images/20240418a/star-history-2024416.png" alt="" width="1200" height="866" loading="lazy">ï¼ˆå‚è€ƒï¼šhttps://star-history.com/#hummingbird-project/hummingbird&vapor/vapor&Dateï¼‰<h2 id="Hummingbird-ã¨ã¯"><a href="#Hummingbird-ã¨ã¯" class="headerlink" title="Hummingbird ã¨ã¯"></a>Hummingbird ã¨ã¯</h2><p>è»½é‡ã§ä¾å­˜é–¢ä¿‚ãŒå°‘ãªã„ã“ã¨ã‚’å£²ã‚Šã¨ã—ã¦ã„ã‚‹ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ä¸€ã¤ã§ã™ã€‚</p><p>Hummingbird ã® README ã«ã‚‚ä»¥ä¸‹ã®è¨˜è¼‰ãŒã‚ã‚Šã¾ã™ã€‚</p><blockquote><p>Lightweight, flexible, modern server framework written in Swift.</p></blockquote><p>Hummingbird ã¯ã€æœ€å°é™ã®ã‚³ã‚¢ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ã¿ã‚’æä¾›ã—ã¦ã€å€‹åˆ¥ã§æ‹¡å¼µã—ã¦ã„ãã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚å‰è¿°ã® Vapor ã®æ–¹ãŒæ©Ÿèƒ½è‡ªä½“ã¯è±Šå¯Œã ã¨æ€ã„ã¾ã™ãŒã€ã‚µã‚¯ãƒƒã¨ä½¿ã„ãŸã„å ´åˆã¯ Hummingbird ãªã®ã‹ãªã¨èªè­˜ã—ã¦ã„ã¾ã™ã€‚</p><p>ã¾ãŸã€å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒAppleã®Developerå‘ã‘ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ<sup id="fnref:10"><a href="#fn:10" rel="footnote">10</a></sup>ãã£ãã‚Šãªã®ã§ã€ãœã²è¦—ã„ã¦ã¿ã¦ã»ã—ã„ã§ã™ã€‚</p><p><a href="https://docs.hummingbird.codes/2.0/documentation/hummingbird/">https://docs.hummingbird.codes/2.0/documentation/hummingbird/</a></p><h2 id="ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—"><a href="#ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—" class="headerlink" title="ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—"></a>ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—</h2><h3 id="ç’°å¢ƒæƒ…å ±"><a href="#ç’°å¢ƒæƒ…å ±" class="headerlink" title="ç’°å¢ƒæƒ…å ±"></a>ç’°å¢ƒæƒ…å ±</h3><p>æœ¬è¨˜äº‹ã¯ã€ä»¥ä¸‹ã®ç’°å¢ƒã§å®Ÿæ–½ã‚’ç¢ºèªã—ã¦ã„ã¾ã™ã€‚</p><ul><li>Windows Subsystem for Linux ï¼ˆä»¥ä¸‹ã€WSLï¼‰ã«é–¢ã™ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±  <figure class="highlight sh"><figcaption><span>cmd.exe</span></figcaption><table><tr><td class="code"><pre><span class="line">&gt;wsl -v</span><br><span class="line">WSL ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 2.1.5.0</span><br><span class="line">ã‚«ãƒ¼ãƒãƒ« ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 5.15.146.1-2</span><br><span class="line">WSLg ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 1.0.60</span><br><span class="line">MSRDC ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 1.2.5105</span><br><span class="line">Direct3D ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 1.611.1-81528511</span><br><span class="line">DXCore ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 10.0.25131.1002-220531-1700.rs-onecore-base2-hyp</span><br><span class="line">Windows ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 10.0.19045.4170</span><br></pre></td></tr></table></figure></li><li>Ubuntu ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 22.04.4 LTS</li><li>Swift ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 5.10</li></ul><h3 id="Swift-ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"><a href="#Swift-ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" class="headerlink" title="Swift ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"></a>Swift ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h3><p>ã¾ãšã¯ã€Swiftã‚’Ubuntuä¸Šã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚<br><a href="https://docs.hummingbird.codes/2.0/documentation/hummingbird/">Hummingbirdã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>ã«ã¯Swiftè‡ªä½“ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã«é–¢ã™ã‚‹è¨˜è¼‰ã¯ãªã‹ã£ãŸãŸã‚ã€<a href="https://docs.vapor.codes/ja/install/linux/">Vaporã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>ã‚’å‚è€ƒã«Swiftly<sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup>ã‚’ç”¨ã„ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã—ãŸã€‚<br>Swiftly ã¯ã€Swift Server Workgroup<sup id="fnref:9"><a href="#fn:9" rel="footnote">9</a></sup> ãŒæä¾›ã™ã‚‹CLIãƒ„ãƒ¼ãƒ«ã§ç•°ãªã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®Swiftã‚’ä½¿ã„åˆ†ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚<br>è¨˜è¼‰ã®æ‰‹é †é€šã‚Šã€å®Ÿè¡Œã—ã¦ã„ãã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># swiftly ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</span></span><br><span class="line">&gt; curl -L https://swift-server.github.io/swiftly/swiftly-install.sh | bash</span><br><span class="line">~~~</span><br><span class="line">Select one of the following:</span><br><span class="line">1) Proceed with the installation (default)</span><br><span class="line">2) Customize the installation</span><br><span class="line">3) Cancel</span><br><span class="line">&gt; 1</span><br><span class="line">~~~</span><br><span class="line"><span class="comment"># `swiftly` ã‚’æœ‰åŠ¹åŒ–ã™ã‚‹ãŸã‚ã€PATH ã¸è¿½åŠ </span></span><br><span class="line">&gt; . <span class="variable">$HOME</span>/.local/share/swiftly/env.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã® Swift ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</span></span><br><span class="line">&gt; swiftly install latest</span><br><span class="line">~~~</span><br><span class="line">Set the active toolchain to Swift 5.10.0</span><br><span class="line">Swift 5.10.0 installed successfully!</span><br><span class="line"></span><br><span class="line"><span class="comment"># Swift ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹</span></span><br><span class="line">&gt; swift --version</span><br><span class="line">Swift version 5.10 (swift-5.10-RELEASE)</span><br><span class="line">Target: x86_64-unknown-linux-gnu</span><br></pre></td></tr></table></figure><h2 id="Hummingbird-ã‚’ç”¨ã„ãŸToDoã‚¢ãƒ—ãƒªã®æ§‹ç¯‰ï¼ˆå…¬å¼ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ï¼‰"><a href="#Hummingbird-ã‚’ç”¨ã„ãŸToDoã‚¢ãƒ—ãƒªã®æ§‹ç¯‰ï¼ˆå…¬å¼ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ï¼‰" class="headerlink" title="Hummingbird ã‚’ç”¨ã„ãŸToDoã‚¢ãƒ—ãƒªã®æ§‹ç¯‰ï¼ˆå…¬å¼ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ï¼‰"></a>Hummingbird ã‚’ç”¨ã„ãŸToDoã‚¢ãƒ—ãƒªã®æ§‹ç¯‰ï¼ˆå…¬å¼ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ï¼‰</h2><p>ã“ã“ã‹ã‚‰å…ˆã¯ã€Hummingbird å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè¨˜è¼‰ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’å…ƒã« Hummingbird ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‹ã‚‰ToDoã‚¢ãƒ—ãƒªã®æ§‹ç¯‰ã¾ã§ã®ãƒãƒ³ã‚ºã‚ªãƒ³ã‚’è©¦ã—ã¦ã¿ã¾ã™ã€‚</p><p><a href="https://docs.hummingbird.codes/2.0/tutorials/todos/">https://docs.hummingbird.codes/2.0/tutorials/todos/</a></p><h3 id="Hummingbird-ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—"><a href="#Hummingbird-ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—" class="headerlink" title="Hummingbird ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—"></a>Hummingbird ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆDirectoryã®ä½œæˆ</span></span><br><span class="line">&gt; <span class="built_in">mkdir</span> Todos</span><br><span class="line">&gt; <span class="built_in">cd</span> Todos</span><br><span class="line"><span class="comment"># ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«å¿…è¦ãªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§åˆæœŸåŒ–</span></span><br><span class="line">&gt; swift package init --<span class="built_in">type</span> tool</span><br><span class="line"><span class="comment"># ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã®ç¢ºèª</span></span><br><span class="line">&gt;  tree</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ Package.resolved <span class="comment"># ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾å­˜é–¢ä¿‚è§£æ±ºã‚’è¨˜éŒ²</span></span><br><span class="line">â”œâ”€â”€ Package.swift <span class="comment"># ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’è¨˜è¼‰</span></span><br><span class="line">â””â”€â”€ Sources</span><br><span class="line">    â””â”€â”€ Todos.swift <span class="comment"># æœ¬ä½“</span></span><br></pre></td></tr></table></figure><details><summary>--type tool ã«ã¤ã„ã¦</summary><p><code>--type tool</code> ã¯ã€ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§åˆ©ç”¨ã§ãã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¿ãŸã„ã§ã™ã€‚<br><code>Package.swift</code> ã«ã€ <a href="https://github.com/apple/swift-argument-parser.git">https://github.com/apple/swift-argument-parser.git</a> ãŒå«ã¾ã‚Œã‚‹ã‹å¦ã‹ã¨ç½®ãæ›ãˆã¦ã‚‚å•é¡Œãªã„ã¨æ€ã„ã¾ã™ã€‚</p><figure class="highlight bash"><figcaption><span>--type executable ã®å ´åˆ</span></figcaption><table><tr><td class="code"><pre><span class="line">&gt; swift package init --<span class="built_in">type</span> executable</span><br><span class="line">Creating executable package: Sample</span><br><span class="line">Creating Package.swift</span><br><span class="line">Creating .gitignore</span><br><span class="line">Creating Sources/</span><br><span class="line">Creating Sources/main.swift</span><br></pre></td></tr></table></figure><figure class="highlight swift"><figcaption><span>Package.swift</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">// swift-tools-version: 5.10</span></span><br><span class="line"><span class="comment">// The swift-tools-version declares the minimum version of Swift required to build this package.</span></span><br><span class="line"><span class="keyword">import</span> PackageDescription</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> package <span class="operator">=</span> <span class="type">Package</span>(</span><br><span class="line">    name: <span class="string">&quot;Sample&quot;</span>,</span><br><span class="line">    targets: [</span><br><span class="line">        <span class="comment">// Targets are the basic building blocks of a package, defining a module or a test suite.</span></span><br><span class="line">        <span class="comment">// Targets can depend on other targets in this package and products from dependencies.</span></span><br><span class="line">        .executableTarget(</span><br><span class="line">            name: <span class="string">&quot;Sample&quot;</span>),</span><br><span class="line">    ]</span><br><span class="line">)</span><br></pre></td></tr></table></figure></details><p>Hummingbird ã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã€<code>Package.swift</code> ã«å¿…è¦ãªæƒ…å ±ã‚’è¿½åŠ ã—ã¾ã™ã€‚</p><figure class="highlight diff"><figcaption><span>Package.swift</span></figcaption><table><tr><td class="code"><pre><span class="line">// swift-tools-version: 5.10</span><br><span class="line">// The swift-tools-version declares the minimum version of Swift required to build this package.</span><br><span class="line">import PackageDescription</span><br><span class="line"></span><br><span class="line">let package = Package(</span><br><span class="line">    name: &quot;Todos&quot;,</span><br><span class="line"><span class="addition">++  // macOS ä¸Šã§å‹•ã‹ã•ãªã„ãŸã‚ã€ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã—ã¦ã„ã‚‹ãŒå•é¡Œãªãå‹•ä½œã—ãŸã€‚</span></span><br><span class="line"><span class="addition">++  // platforms: [.macOS(.v14)],</span></span><br><span class="line">    dependencies: [</span><br><span class="line">        .package(url: &quot;https://github.com/apple/swift-argument-parser.git&quot;, from: &quot;1.2.0&quot;),</span><br><span class="line"><span class="addition">++      .package(url: &quot;https://github.com/hummingbird-project/hummingbird.git&quot;, from: &quot;2.0.0-alpha.1&quot;),</span></span><br><span class="line">    ],</span><br><span class="line">    targets: [</span><br><span class="line">        .executableTarget(</span><br><span class="line">            name: &quot;Todos&quot;,</span><br><span class="line">            dependencies: [</span><br><span class="line">                .product(name: &quot;ArgumentParser&quot;, package: &quot;swift-argument-parser&quot;),</span><br><span class="line"><span class="addition">++              .product(name: &quot;Hummingbird&quot;, package: &quot;hummingbird&quot;),</span></span><br><span class="line">            ]</span><br><span class="line">        ),</span><br><span class="line">    ]</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>GET ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å©ã„ãŸéš›ã«â€Helloâ€ã‚’è¿”ã™ã‚ˆã†ã«ä»¥ä¸‹ã®ã‚ˆã†ã« <code>Todos.swift</code> ã‚’æ›¸ãæ›ãˆã¾ã™ã€‚</p><figure class="highlight swift"><figcaption><span>Todos.swift</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> ArgumentParser</span><br><span class="line"><span class="keyword">import</span> Hummingbird</span><br><span class="line"></span><br><span class="line"><span class="keyword">@main</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Todos</span>: <span class="title class_">AsyncParsableCommand</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">run</span>() <span class="keyword">async</span> <span class="keyword">throws</span> &#123;</span><br><span class="line">        <span class="comment">// create router</span></span><br><span class="line">        <span class="keyword">let</span> router <span class="operator">=</span> <span class="type">Router</span>()</span><br><span class="line">        <span class="comment">// add hello route</span></span><br><span class="line">        router.get(<span class="string">&quot;/&quot;</span>) &#123; request, context <span class="keyword">in</span></span><br><span class="line">            <span class="string">&quot;Hello<span class="subst">\n</span>&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// create application</span></span><br><span class="line">        <span class="keyword">let</span> app <span class="operator">=</span> <span class="type">Application</span>(router: router)</span><br><span class="line">        <span class="comment">// run application</span></span><br><span class="line">        <span class="keyword">try</span> <span class="keyword">await</span> app.runService()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸€é€£ã®ä¿®æ­£ãŒå®Œäº†ã™ã‚‹ã¨ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒæ­£å¸¸ã«å‹•ãã“ã¨ã‚’ç¢ºèªã§ãã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; swift run</span><br><span class="line">Building <span class="keyword">for</span> debugging...</span><br><span class="line">[8/8] Linking Todos</span><br><span class="line">Build complete! (6.58s)</span><br><span class="line">2024-04-16T15:18:49+0900 info Hummingbird : [HummingbirdCore] Server started and listening on 127.0.0.1:8080</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ¥ã‚¿ãƒ–ã§å‹•ä½œç¢ºèª</span></span><br><span class="line">&gt; curl localhost:8080</span><br><span class="line">Hello</span><br></pre></td></tr></table></figure><p>ç°¡å˜ã§ã™ã­ğŸ‰</p><h3 id="ToDoã‚¢ãƒ—ãƒªã®æ§‹ç¯‰"><a href="#ToDoã‚¢ãƒ—ãƒªã®æ§‹ç¯‰" class="headerlink" title="ToDoã‚¢ãƒ—ãƒªã®æ§‹ç¯‰"></a>ToDoã‚¢ãƒ—ãƒªã®æ§‹ç¯‰</h3><p>ã“ã“ã§ã¯ã€Hummingbird ã‚’åˆ©ç”¨ã—ã¦ToDoã‚’DBã«ç™»éŒ²ã™ã‚‹ã¨ã“ã‚ã¾ã§è©¦ã—ã¦ã¿ã¾ã™ã€‚<br>PostgresNIO<sup id="fnref:4"><a href="#fn:4" rel="footnote">4</a></sup> ã¨ã„ã†PostgreSQLç”¨ã®Swiftã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€ToDoã‚’PostgreSQLã«ç™»éŒ²ã—ã¾ã™ã€‚</p><p>Hummingbird åŒæ§˜ã«ã€PostgresNIO ã‚’ <code>Package.swift</code> ã«è¿½åŠ ã—ã¾ã™ã€‚</p><figure class="highlight diff"><figcaption><span>Package.swift</span></figcaption><table><tr><td class="code"><pre><span class="line">// swift-tools-version: 5.10</span><br><span class="line">// The swift-tools-version declares the minimum version of Swift required to build this package.</span><br><span class="line">import PackageDescription</span><br><span class="line"></span><br><span class="line">let package = Package(</span><br><span class="line">    name: &quot;Todos&quot;,</span><br><span class="line">    // macOS ä¸Šã§å‹•ã‹ã•ãªã„ãŸã‚ã€ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã—ã¦ã„ã‚‹ãŒå•é¡Œãªãå‹•ä½œã—ãŸã€‚</span><br><span class="line">    // platforms: [.macOS(.v14)],</span><br><span class="line">    dependencies: [</span><br><span class="line">        .package(url: &quot;https://github.com/apple/swift-argument-parser.git&quot;, from: &quot;1.2.0&quot;),</span><br><span class="line">        .package(url: &quot;https://github.com/hummingbird-project/hummingbird.git&quot;, from: &quot;2.0.0-alpha.1&quot;),</span><br><span class="line"><span class="addition">++      .package(url: &quot;https://github.com/vapor/postgres-nio.git&quot;, from: &quot;1.21.0&quot;),</span></span><br><span class="line">    ],</span><br><span class="line">    targets: [</span><br><span class="line">        .executableTarget(</span><br><span class="line">            name: &quot;Todos&quot;,</span><br><span class="line">            dependencies: [</span><br><span class="line">                .product(name: &quot;ArgumentParser&quot;, package: &quot;swift-argument-parser&quot;),</span><br><span class="line">                .product(name: &quot;Hummingbird&quot;, package: &quot;hummingbird&quot;),</span><br><span class="line"><span class="addition">++              .product(name: &quot;PostgresNIO&quot;, package: &quot;postgres-nio&quot;),</span></span><br><span class="line">            ]</span><br><span class="line">        ),</span><br><span class="line">    ]</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>PostgreSQL ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚<br>ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã¯ï¼ˆãŠãã‚‰ãmacOSå‰æã§ï¼‰ <code>brew</code> çµŒç”±ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ãŸã®ã§ã™ãŒã€ä»Šå›ã¯ <code>apt</code> çµŒç”±ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚</p><div class="note info" style="background: #e5f8e2; padding:16px; margin:24px 12px; border-radius:8px;">  <span class="fa fa-fw fa-check-circle"></span><p>Linux ä¸Šã§ã‚‚ Homebrew ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã¿ãŸã„ãªã®ã§ã€Homebrew çµŒç”±ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ã‚‚è‰¯ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚<br><a href="https://docs.brew.sh/Homebrew-on-Linux">https://docs.brew.sh/Homebrew-on-Linux</a></p></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; sudo apt update</span><br><span class="line">&gt; sudo apt install postgresql postgresql-contrib</span><br><span class="line">&gt; psql --version</span><br><span class="line">psql (PostgreSQL) 14.11 (Ubuntu 14.11-0ubuntu0.22.04.1)</span><br></pre></td></tr></table></figure><p>ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå®Œäº†ã—ãŸã®ã§ã€ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã®ç¶šãã‚’å®Ÿæ–½ã—ã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; psql postgres</span><br><span class="line">psql: error: connection to server on socket <span class="string">&quot;/var/run/postgresql/.s.PGSQL.5432&quot;</span> failed: No such file or directory</span><br><span class="line">        Is the server running locally and accepting connections on that socket?</span><br></pre></td></tr></table></figure><p>ã‚¨ãƒ©ãƒ¼ã§é€²ã‚ã¾ã›ã‚“ã€‚<br>ã‚¨ãƒ©ãƒ¼ã«ã¤ã„ã¦èª¿ã¹ã‚‹ã¨ <code>.conf</code> ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªã—ã‚ˆã†<sup id="fnref:5"><a href="#fn:5" rel="footnote">5</a></sup>ã€ãªã©ã¨ã‚ã‚Šã¾ã™ãŒã€ãã‚‚ãã‚‚<code>.conf</code>ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å«ã‚“ã ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆ<code>/etc/postgresql/14/main/</code>ï¼‰ãŒãªã„ã“ã¨ã«æ°—ãŒä»˜ãã¾ã—ãŸã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; <span class="built_in">ls</span> -la /etc/postgresql/</span><br><span class="line">total 8</span><br><span class="line">drwxr-xr-x  2 postgres postgres 4096 Feb 10  2022 .</span><br><span class="line">drwxr-xr-x 84 root     root     4096 Apr 17 06:54 ..</span><br></pre></td></tr></table></figure><p>åˆ¥ã®è¨˜äº‹<sup id="fnref:6"><a href="#fn:6" rel="footnote">6</a></sup>ã‚’å‚è€ƒã«ã€PostgreSQL ã®ã‚¯ãƒ©ã‚¹ã‚¿ã‚’è¿½åŠ ã—ã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; sudo pg_createcluster --start 14 main</span><br><span class="line">&gt; <span class="built_in">ls</span> -la /etc/postgresql/14/main/</span><br><span class="line">conf.d/          pg_ctl.conf      pg_ident.conf    start.conf</span><br><span class="line">environment      pg_hba.conf      postgresql.conf</span><br></pre></td></tr></table></figure><p>å‹•ãã‚ˆã†ã«ãªã£ãŸã®ã§ã€ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã®ç¶šãã«æˆ»ã‚Šã¾ã™ã€‚<br>ã¾ãšã¯ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’æº–å‚™ã—ã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; postgres psql</span><br><span class="line">psql (14.11 (Ubuntu 14.11-0ubuntu0.22.04.1))</span><br><span class="line">Type <span class="string">&quot;help&quot;</span> <span class="keyword">for</span> <span class="built_in">help</span>.</span><br><span class="line"></span><br><span class="line">postgres=<span class="comment"># create database hummingbird;</span></span><br><span class="line">CREATE DATABASE</span><br><span class="line">postgres=<span class="comment"># \c hummingbird</span></span><br><span class="line">You are now connected to database <span class="string">&quot;hummingbird&quot;</span> as user <span class="string">&quot;postgres&quot;</span>.</span><br><span class="line">hummingbird=<span class="comment"># create role todos createrole login password &#x27;todos&#x27;;</span></span><br><span class="line">CREATE ROLE</span><br><span class="line">hummingbird=<span class="comment"># \q</span></span><br></pre></td></tr></table></figure><p>æ¬¡ã«ã€ToDoã‚¢ãƒ—ãƒªã®å®Ÿè£…ã§ã™ã€‚<br>ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã®é€šã‚Šã«å®Ÿè£…ã—ã¦ã„ãã¾ã™ã€‚å®Œæˆå½¢ã¯ã€å…¬å¼ã®ã‚µãƒ³ãƒ—ãƒ«ãŒã‚ã‚‹ãŸã‚ã€ãã¡ã‚‰ã‚’ã”ç¢ºèªãã ã•ã„ã€‚</p><p><a href="https://github.com/hummingbird-project/hummingbird-examples/tree/main/todos-postgres-tutorial">https://github.com/hummingbird-project/hummingbird-examples/tree/main/todos-postgres-tutorial</a></p><h3 id="å‹•ä½œç¢ºèª"><a href="#å‹•ä½œç¢ºèª" class="headerlink" title="å‹•ä½œç¢ºèª"></a>å‹•ä½œç¢ºèª</h3><p>ã“ã‚Œã¾ã§æ§‹ç¯‰ã—ãŸã‚‚ã®ã®å‹•ä½œç¢ºèªã‚’è¡Œã„ã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; swift run</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ¥ã‚¿ãƒ–ã§å‹•ä½œç¢ºèª</span></span><br><span class="line"><span class="comment"># TODO ã‚’ç™»éŒ²</span></span><br><span class="line">&gt; curl -i -X POST localhost:8080/todos -d<span class="string">&#x27;&#123;&quot;title&quot;: &quot;Wash my hair&quot;&#125;&#x27;</span></span><br><span class="line">HTTP/1.1 201 Created</span><br><span class="line">Content-Type: application/json; charset=utf-8</span><br><span class="line">Content-Length: 145</span><br><span class="line">Date: Tue, 16 Apr 2024 23:54:54 GMT</span><br><span class="line"></span><br><span class="line">&#123;<span class="string">&quot;id&quot;</span>:<span class="string">&quot;A4672369-753C-49AD-A41C-849AE5A7CF1E&quot;</span>,<span class="string">&quot;url&quot;</span>:<span class="string">&quot;http:\/\/localhost:8080\/todos\/A4672369-753C-49AD-A41C-849AE5A7CF1E&quot;</span>,<span class="string">&quot;title&quot;</span>:<span class="string">&quot;Wash my hair&quot;</span>&#125;</span><br><span class="line">&gt; curl -i -X POST localhost:8080/todos -d<span class="string">&#x27;&#123;&quot;title&quot;: &quot;Brush my teeth&quot;&#125;&#x27;</span></span><br><span class="line">HTTP/1.1 201 Created</span><br><span class="line">Content-Type: application/json; charset=utf-8</span><br><span class="line">Content-Length: 147</span><br><span class="line">Date: Tue, 16 Apr 2024 23:55:03 GMT</span><br><span class="line"></span><br><span class="line">&#123;<span class="string">&quot;url&quot;</span>:<span class="string">&quot;http:\/\/localhost:8080\/todos\/435A9B4F-BD4A-42E2-8EA9-5A5560378BBA&quot;</span>,<span class="string">&quot;id&quot;</span>:<span class="string">&quot;435A9B4F-BD4A-42E2-8EA9-5A5560378BBA&quot;</span>,<span class="string">&quot;title&quot;</span>:<span class="string">&quot;Brush my teeth&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># DB ã®ç™»éŒ²çŠ¶æ…‹ã‚’ç¢ºèª</span></span><br><span class="line">&gt; psql hummingbird</span><br><span class="line">psql (14.11 (Ubuntu 14.11-0ubuntu0.22.04.1))</span><br><span class="line">Type <span class="string">&quot;help&quot;</span> <span class="keyword">for</span> <span class="built_in">help</span>.</span><br><span class="line"></span><br><span class="line">hummingbird=<span class="comment"># select * from todos;</span></span><br><span class="line">                  <span class="built_in">id</span>                  |     title      | order | completed |                               url</span><br><span class="line">--------------------------------------+----------------+-------+-----------+------------------------------------------------------------------</span><br><span class="line"> a4672369-753c-49ad-a41c-849ae5a7cf1e | Wash my hair   |       |           | http://localhost:8080/todos/A4672369-753C-49AD-A41C-849AE5A7CF1E</span><br><span class="line"> 435a9b4f-bd4a-42e2-8ea9-5a5560378bba | Brush my teeth |       |           | http://localhost:8080/todos/435A9B4F-BD4A-42E2-8EA9-5A5560378BBA</span><br><span class="line">(2 rows)</span><br></pre></td></tr></table></figure><p>POSTã—ãŸToDoãŒã€DBå´ã«ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã§ãã¾ã—ãŸğŸ‰</p><h1 id="ã•ã„ã”ã«"><a href="#ã•ã„ã”ã«" class="headerlink" title="ã•ã„ã”ã«"></a>ã•ã„ã”ã«</h1><p>Swift ã® Web ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ä¸€ã¤ã§ã‚ã‚‹ã€Hummingbird ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‹ã‚‰ç´¹ä»‹ã—ã¾ã—ãŸã€‚</p><p>å€‹äººçš„ã«ã¯ã€macOSä»¥å¤–ã§ã‚‚SwiftãŒæ›¸ã‘ã¦ã€ã‹ã¤ã€ã‚µãƒ¼ãƒãƒ¼ã‚¢ãƒ—ãƒªé–‹ç™ºã«åˆ©ç”¨ã§ãã‚‹ã“ã¨ãŒçŸ¥ã‚Œã¦æ¥½ã—ã‹ã£ãŸã§ã™ã€‚WSL ä¸Šã§ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ãŸã®ã§æ‰‹é †ãŒå¤šã‚ã ã£ãŸã®ã§ã™ãŒã€æ™®æ®µSwiftã§iOSã‚¢ãƒ—ãƒªé–‹ç™ºã—ã¦ã„ã‚‹æ–¹ãŒã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã®é–‹ç™ºã‚’è©¦ã—ãŸã„ã¨ãã«ä¾¿åˆ©ã ã¨æ€ã„ã¾ã—ãŸã€‚</p><p>ä»Šå›ã¯è©¦ã›ã¾ã›ã‚“ã§ã—ãŸãŒã€Xcode ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®æ¥ç¶šã¾ã§ã‚’ã©ã“ã‹ã§è©¦ã—ã¦ã¿ãŸã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚</p><div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none; padding-left: 0;"><li id="fn:1"><span style="vertical-align: top; padding-right: 10px;">1.</span><span style="vertical-align: top;">åŒ»ç™‚ãƒ»ãƒ˜ãƒ«ã‚¹ã‚±ã‚¢åˆ†é‡ã§ã®æ¡ˆä»¶ã‚„æ–°è¦ãƒ“ã‚¸ãƒã‚¹å‰µå‡ºã‚’æ‹…ã†ã€2020å¹´ã«èª•ç”Ÿã—ãŸäº‹æ¥­éƒ¨ã§ã™ã€‚è¨­ç«‹ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã¯ã€ä»¥ä¸‹è¨˜äº‹ã‚’ã”è¦§ãã ã•ã„ã€‚<a href="https://note.future.co.jp/n/n8b57d4bf4604">&quot;æ–°è¦äº‹æ¥­ã®ç«‹ã¡ä¸Šã’ã€€ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®çŸ¥ã‚‰ã‚Œã–ã‚‹åŒ»ç™‚ãƒ»ãƒ˜ãƒ«ã‚¹ã‚±ã‚¢ã¸ã®æŒ‘æˆ¦&quot;</a></span><a href="#fnref:1" rev="footnote"> â†©</a></li><li id="fn:2"><span style="vertical-align: top; padding-right: 10px;">2.</span><span style="vertical-align: top;">Swift.orgå†…ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«è¨˜äº‹<a href="https://www.swift.org/getting-started/vapor-web-server/">https://www.swift.org/getting-started/vapor-web-server/</a></span><a href="#fnref:2" rev="footnote"> â†©</a></li><li id="fn:3"><span style="vertical-align: top; padding-right: 10px;">3.</span><span style="vertical-align: top;">swiftly<a href="https://github.com/swift-server/swiftly">https://github.com/swift-server/swiftly</a></span><a href="#fnref:3" rev="footnote"> â†©</a></li><li id="fn:4"><span style="vertical-align: top; padding-right: 10px;">4.</span><span style="vertical-align: top;">Postgres-NIO<a href="https://github.com/vapor/postgres-nio">https://github.com/vapor/postgres-nio</a></span><a href="#fnref:4" rev="footnote"> â†©</a></li><li id="fn:5"><span style="vertical-align: top; padding-right: 10px;">5.</span><span style="vertical-align: top;">psql: error: connection to server on socket &quot;/var/run/postgresql/.s.PGSQL.5432&quot; failed: FATAL: Peer authentication failed for user &quot;postgres&quot; (Ubuntu)<a href="https://stackoverflow.com/questions/69676009/psql-error-connection-to-server-on-socket-var-run-postgresql-s-pgsql-5432">https://stackoverflow.com/questions/69676009/psql-error-connection-to-server-on-socket-var-run-postgresql-s-pgsql-5432</a></span><a href="#fnref:5" rev="footnote"> â†©</a></li><li id="fn:6"><span style="vertical-align: top; padding-right: 10px;">6.</span><span style="vertical-align: top;">ã€Ubuntu+PostgreSQLã€‘postgresä»¥å¤–ã®ãƒ¦ãƒ¼ã‚¶ã§ã‚¯ãƒ©ã‚¹ã‚¿ã‚’ä½œæˆã—ã¦èµ·å‹•ã™ã‚‹<a href="https://qiita.com/shin4488/items/175151e59a043c724b38">https://qiita.com/shin4488/items/175151e59a043c724b38</a></span><a href="#fnref:6" rev="footnote"> â†©</a></li><li id="fn:7"><span style="vertical-align: top; padding-right: 10px;">7.</span><span style="vertical-align: top;"><a href="https://www.apple.com/jp/swift/">https://www.apple.com/jp/swift/</a></span><a href="#fnref:7" rev="footnote"> â†©</a></li><li id="fn:8"><span style="vertical-align: top; padding-right: 10px;">8.</span><span style="vertical-align: top;"><a href="https://www.swift.org/">https://www.swift.org/</a></span><a href="#fnref:8" rev="footnote"> â†©</a></li><li id="fn:9"><span style="vertical-align: top; padding-right: 10px;">9.</span><span style="vertical-align: top;">Swift ã«ã‚ˆã‚‹ã‚µãƒ¼ãƒãƒ¼ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã‚’ä¿ƒé€²ã™ã‚‹ãƒ¯ãƒ¼ã‚¯ã‚°ãƒ«ãƒ¼ãƒ—<a href="https://www.swift.org/sswg/">https://www.swift.org/sswg/</a></span><a href="#fnref:9" rev="footnote"> â†©</a></li><li id="fn:10"><span style="vertical-align: top; padding-right: 10px;">10.</span><span style="vertical-align: top;">Appleã®Developerå‘ã‘ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ<a href="https://developer.apple.com/documentation/Swift">https://developer.apple.com/documentation/Swift</a></span><a href="#fnref:10" rev="footnote"> â†©</a></li></ol></div></div>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Infrastructure/">Infrastructure</category>
      
      
      <category domain="https://future-architect.github.io/tags/Ubuntu/">Ubuntu</category>
      
      <category domain="https://future-architect.github.io/tags/Swift/">Swift</category>
      
      <category domain="https://future-architect.github.io/tags/WSL/">WSL</category>
      
      <category domain="https://future-architect.github.io/tags/Hummingbird/">Hummingbird</category>
      
      <category domain="https://future-architect.github.io/tags/%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%82%B5%E3%82%A4%E3%83%89Swift/">ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰Swift</category>
      
      
      <comments>https://future-architect.github.io/articles/20240418a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Prometheus/Grafanaã‚’ä½¿ã£ã¦ã¿ã‚‹</title>
      <link>https://future-architect.github.io/articles/20240417b/</link>
      <guid>https://future-architect.github.io/articles/20240417b/</guid>
      <pubDate>Tue, 16 Apr 2024 15:00:01 GMT</pubDate>
      
        
        
          
          
      <description>&lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€‚TIGã®ä¼Šè—¤ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/articles/20240408a/&quot;&gt;æ˜¥ã®å…¥é–€é€£è¼‰&lt;/a&gt;7æ—¥ç›®ã§ã™ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ–°ã—ã„ã“ã¨ã€å§‹ã‚ãŸã„ã€çŸ¥ã‚ŠãŸã„&quot;&gt;&lt;a href=&quot;#æ–°ã—ã„ã“ã¨ã€å§‹ã‚ãŸã„ã€çŸ¥ã‚ŠãŸã„&quot;</description>
          
        
      
      
      
      <content:encoded><![CDATA[<p>ã“ã‚“ã«ã¡ã¯ã€‚TIGã®ä¼Šè—¤ã§ã™ã€‚</p><p><a href="/articles/20240408a/">æ˜¥ã®å…¥é–€é€£è¼‰</a>7æ—¥ç›®ã§ã™ã€‚</p><h2 id="æ–°ã—ã„ã“ã¨ã€å§‹ã‚ãŸã„ã€çŸ¥ã‚ŠãŸã„"><a href="#æ–°ã—ã„ã“ã¨ã€å§‹ã‚ãŸã„ã€çŸ¥ã‚ŠãŸã„" class="headerlink" title="æ–°ã—ã„ã“ã¨ã€å§‹ã‚ãŸã„ã€çŸ¥ã‚ŠãŸã„"></a>æ–°ã—ã„ã“ã¨ã€å§‹ã‚ãŸã„ã€çŸ¥ã‚ŠãŸã„</h2><p>æ™®æ®µã€ç§ã®ä»•äº‹ã¯Terraformã‚’ä¸»ã¨ã—ãŸIaCã‚’æ›¸ã„ã¦ã‚¤ãƒ³ãƒ•ãƒ©ã‚’ä½œã£ãŸã‚Šç®¡ç†ã™ã‚‹ã“ã¨ãªã®ã§ã™ãŒã€ãµã¨è€ƒãˆã‚‹ã¨ã€IaCä»¥å¤–ã®éƒ¨åˆ†ã«å¯¾ã—ã¦å–ã‚Šçµ„ã‚€ãã£ã‹ã‘ãŒãªãä»Šã¾ã§ã‚„ã£ã¦ãã¦ã„ãŸã‚ˆã†ãªæ°—ã‚‚ã—ã¦ãã¾ã—ãŸã€‚ã¨ã¯ã„ãˆã€ã„ããªã‚Šå…¨ç„¶é•ã†ã“ã¨ã‚’ã™ã‚‹ã®ã§ã‚‚ãªãã€è‡ªåˆ†ã®è£¾é‡ã‚’å°‘ã—åºƒã’ã‚‹æ–¹å‘ã§è€ƒãˆã¦ã„ãŸã¨ã“ã‚ã€ã“ã¡ã‚‰ã®å‹‰å¼·ä¼šã‚’è¦‹ã¤ã‘ã¾ã—ãŸã€‚</p><p><a href="https://grafana-meetup-japan.connpass.com/event/314500/">https://grafana-meetup-japan.connpass.com/event/314500/</a></p><p><a href="https://grafana-meetup-japan.connpass.com/event/314500/"><img src="/images/20240417b/2024-04-17_Grafana_Meetup_Japan_1___connpass.jpg" alt="From connpass: Grafana Meetup Japan #1 - connpass | ## Grafana Meetup Japanã¸ã‚ˆã†ã“ãï¼  ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã¯ã€ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ç›£è¦–ãƒ»å¯è¦–åŒ–ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹Grafanaã«ã¤ã„ã¦ã€äº’ã„ã«å­¦ã³ã€ç™ºä¿¡ã—ã€äº¤æµã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚  Grafanaã¯ã€ITã‚¤ãƒ³ãƒ•ãƒ©ã‚„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ç›£è¦–ã‹ã‚‰ã€IoTãƒ‡ãƒã‚¤ã‚¹ã€ãƒ“ã‚¸ãƒã‚¹æŒ‡æ¨™ã€å·¥å ´ã€ç‰©æµã€è‡ªç„¶ç½å®³ã€å®‡å®™ã«è‡³ã‚‹ã¾ã§ã€ã‚ã‚‰ã‚†ã‚‹åˆ†é‡ã§ã®ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–ã¨ç›£è¦–ã‚’æ”¯æ´ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚  æ—¥æœ¬ã§ã‚‚åºƒãåˆ©ç”¨ã•ã‚Œã¤ã¤ã‚ã‚Šã¾ã™ãŒã€Grafanaã®æœ€æ–°æƒ…å ±ã‚„å°å…¥äº‹ä¾‹ã€ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’å­¦ã‚“ã ã‚Šç™ºä¿¡ã—ãŸã‚Šã™ã‚‹å ´ã¯å¤šãã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ãã“ã§ã€Grafana Labsã¨å…±ã«Grafana Meetup Jap..."></a></p><p>çŸ¥ã‚Šåˆã„ãŒå‘ŠçŸ¥ã—ã¦ã„ãŸã“ã¨ã‚„ã€ç™»å£‡ã•ã‚Œã‚‹æ–¹ã€…ã«èˆˆå‘³ã‚’æŒã£ã¦å‚åŠ ã—ã¾ã—ãŸã€‚ã—ã‹ã—ã€ã€ŒGrafanaã»ã¼è§¦ã£ãŸã“ã¨ãªã„ã€ã®ä¸¸è…°ã§è¡Œã£ã¦ã‚‚å¾—ã‚‹ã‚‚ã®ãŒå°‘ãªããªã‚Šãã†ãªã®ã§ã€ã›ã£ã‹ããªã‚‰ã¨è¨˜äº‹ã‚’æ›¸ã„ã¦ã„ã¾ã™ã€‚</p><p>å‹•æ©Ÿã¨ã—ã¦ã¯ä¸Šã«æ›¸ã„ãŸé€šã‚Šã§ã™ãŒã€ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã¨ã—ã¦åŒæ™‚ã«æŒã¡ä¸ŠãŒã£ã¦ãã‚‹Prometheusã‚‚ã¡ã‚‡ã£ã¨ã ã‘å…¥é–€ã—ã¦ã€å–ã‚Šçµ„ã‚“ã§ã„ãã¾ã™ã€‚</p><h2 id="ä»Šå›ã®ã‚µãƒ³ãƒ—ãƒ«"><a href="#ä»Šå›ã®ã‚µãƒ³ãƒ—ãƒ«" class="headerlink" title="ä»Šå›ã®ã‚µãƒ³ãƒ—ãƒ«"></a>ä»Šå›ã®ã‚µãƒ³ãƒ—ãƒ«</h2><p>ä»Šå›ã®ã‚µãƒ³ãƒ—ãƒ«ã¯ä»¥ä¸‹ã«ç½®ã„ã¦ã‚ã‚‹ã®ã§ã€ã“ã®ãƒ–ãƒ­ã‚°ã‚’èª­ã‚“ã§è©¦ã—ã¦ã¿ãŸã„æ–¹ã¯ãœã²ä½¿ã£ã¦ã¿ã¦ãã ã•ã„ã€‚</p><p><a href="https://github.com/kaedemalu/prometheus-grafana-blog">https://github.com/kaedemalu/prometheus-grafana-blog</a></p><h2 id="Prometheus"><a href="#Prometheus" class="headerlink" title="Prometheus"></a>Prometheus</h2><p>Prometheusã¯SoundCloudç¤¾ã«ã‚ˆã£ã¦é–‹ç™ºã•ã‚ŒãŸã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ç›£è¦–ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã§ã™ã€‚Googleã§Kubernetesã®å‰èº«ã¨ãªã£ãŸBorgã¨ã„ã†åˆ†æ•£ã‚·ã‚¹ãƒ†ãƒ ãŒã‚ã‚Šã€ã“ã‚Œã‚‰ã‚’ç›£è¦–ã—ã¦ã„ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã§ã‚ã‚‹Borgmonã‹ã‚‰ã‚‚å¤§ã„ã«ã‚¤ãƒ³ã‚¹ãƒ‘ã‚¤ã‚¢ã‚’å—ã‘ã¦ãŠã‚Šã€ã„ãšã‚Œã‚‚åˆ†æ•£ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã«æœ€é©åŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p>ç¾åœ¨ã§ã¯CloudNative Computing Foundationï¼ˆCNCFï¼‰ã®Graduatedãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦ãŠã‚Šã€å¤šãã®ãƒ¦ãƒ¼ã‚¶ã‚’æŒã¤OSSã¨ãªã‚Šã¾ã—ãŸã€‚</p><p>ä»•çµ„ã¿ã¨ã—ã¦ã¯ã€å¾“æ¥ã®ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã§ã‚ˆãä½¿ã‚ã‚Œã‚‹Zabbixã‚’ã¯ã˜ã‚ã¨ã—ã¦ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’åˆ©ç”¨ã—ã¦ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å–å¾—ã€ç›£è¦–ã™ã‚‹ã‚‚ã®ã§ã¯ãªãã€ç®¡ç†ã‚µãƒ¼ãƒå´ãŒæŒ‡å®šã•ã‚ŒãŸã‚µãƒ¼ãƒã«å¯¾ã—ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å–å¾—ã™ã‚‹Pullå‹ã¨ãªã£ã¦ã„ã‚‹ã®ãŒå¤§ããªé•ã„ã§ã—ã‚‡ã†ã€‚<br>(ä»Šå›ã®è©±ã§ã¯ã€ã ã„ãŸã„ä¸‹åŠåˆ†ãã‚‰ã„ãŒå¯¾è±¡ã®è¨˜äº‹ã¨ãªã£ã¦ã„ã¾ã™ã€‚ï¼‰</p><img src="/images/20240417b/prom_architecture.png" alt="prom_architecture.png" width="1200" height="721" loading="lazy"><blockquote><p><a href="https://prometheus.io/docs/introduction/overview/">Prometheus Overview</a>ã‚ˆã‚Šå¼•ç”¨</p></blockquote><p>EC2ãªã©ã®IaaSãƒ¬ãƒ™ãƒ«ã§ã¯ã€EC2æœ¬ä½“ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å–å¾—ã—ã¦ã€ã‚µãƒ¼ãƒè‡ªä½“ã®ãƒªã‚½ãƒ¼ã‚¹ç›£è¦–ã‚’è¡Œãˆã¾ã™ãŒã€ã‚³ãƒ³ãƒ†ãƒŠã‚¢ãƒ—ãƒªã§ã‚ã‚Œã°ã‚³ãƒ³ãƒ†ãƒŠã‚¢ãƒ—ãƒªã‹ã‚‰å–å¾—ã•ã‚Œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®æ™‚ã«Prometheusã§ã‚ã‚Œã°ã‚³ãƒ³ãƒ†ãƒŠè‡ªä½“ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ¬ã‚¹ã§ã‚ã‚‹ã“ã¨ã§å¾“æ¥EC2ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ãŸã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆåˆ†ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’æ¸›ã‚‰ã™ã“ã¨ãŒã§ãã¾ã™ã€‚</p><h3 id="ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‹•ã‹ã—ã¦ã¿ã‚‹"><a href="#ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‹•ã‹ã—ã¦ã¿ã‚‹" class="headerlink" title="ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‹•ã‹ã—ã¦ã¿ã‚‹"></a>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‹•ã‹ã—ã¦ã¿ã‚‹</h3><p>å®Ÿéš›ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰å–ã‚Œã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’Prometheusã§è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><p>ä»Šå›ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è¨€èªã¯Pythonã‚’ä½¿ç”¨ã—ã€ç°¡æ˜“ãªAPIã‚µãƒ¼ãƒã‚’ç«‹ã¦ã‚‹ãŸã‚ã«FastAPIã‚’ç”¨ã„ã¾ã—ãŸã€‚</p><p>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ãƒ‘ã‚¹ã¨Prometheusã§<code>/metrics</code>ã®ãƒ‘ã‚¹ã‹ã‚‰æƒ…å ±ã‚’å–å¾—ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚</p><figure class="highlight py"><figcaption><span>app.py</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI</span><br><span class="line"><span class="keyword">from</span> prometheus_fastapi_instrumentator <span class="keyword">import</span> Instrumentator</span><br><span class="line"></span><br><span class="line">app = FastAPI()</span><br><span class="line"></span><br><span class="line">Instrumentator(</span><br><span class="line">    excluded_handlers=[<span class="string">&quot;/metrics&quot;</span>],</span><br><span class="line">).instrument(app).expose(app=app, endpoint=<span class="string">&quot;/metrics&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/health&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">health</span>():</span><br><span class="line">    response = &#123;</span><br><span class="line">        <span class="string">&#x27;status&#x27;</span>: <span class="string">&#x27;up&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> response</span><br></pre></td></tr></table></figure><p>FastAPIã§Prometheusã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å–å¾—å¯èƒ½ã«ã™ã‚‹ãŸã‚ã€ä»¥ä¸‹ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚ä»Šå›ã¯ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚’ã‹ã‘ã¦ã„ãªã„ã§ã™ãŒã€ãŒã£ã¤ã‚Šä½¿ã„è¾¼ã‚€ã“ã¨ã‚’è€ƒãˆã‚‹ã¨ã•ã‚‰ã«ä½œã‚Šè¾¼ã‚ã‚‹ä½™åœ°ã¯ã‚ã‚Šãã†ã§ã™ã€‚</p><p><a href="https://github.com/trallnag/prometheus-fastapi-instrumentator">https://github.com/trallnag/prometheus-fastapi-instrumentator</a></p><p>ã“ã‚Œã§ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã•ã›ã€<code>/metrics</code>ã«cURLã‚’å®Ÿè¡Œã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãŸãã•ã‚“æƒ…å ±ãŒå‡ºã¦ãã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl http://localhost:8080/metrics</span><br><span class="line"></span><br><span class="line"><span class="comment"># HELP python_gc_objects_collected_total Objects collected during gc</span></span><br><span class="line"><span class="comment"># TYPE python_gc_objects_collected_total counter</span></span><br><span class="line">python_gc_objects_collected_total&#123;generation=<span class="string">&quot;0&quot;</span>&#125; 2396.0</span><br><span class="line">python_gc_objects_collected_total&#123;generation=<span class="string">&quot;1&quot;</span>&#125; 8411.0</span><br><span class="line">python_gc_objects_collected_total&#123;generation=<span class="string">&quot;2&quot;</span>&#125; 2168.0</span><br><span class="line"><span class="comment"># HELP python_gc_objects_uncollectable_total Uncollectable objects found during GC</span></span><br><span class="line"><span class="comment"># TYPE python_gc_objects_uncollectable_total counter</span></span><br><span class="line">python_gc_objects_uncollectable_total&#123;generation=<span class="string">&quot;0&quot;</span>&#125; 0.0</span><br><span class="line">python_gc_objects_uncollectable_total&#123;generation=<span class="string">&quot;1&quot;</span>&#125; 0.0</span><br><span class="line">python_gc_objects_uncollectable_total&#123;generation=<span class="string">&quot;2&quot;</span>&#125; 0.0</span><br><span class="line"><span class="comment"># HELP python_gc_collections_total Number of times this generation was collected</span></span><br><span class="line"><span class="comment"># TYPE python_gc_collections_total counter</span></span><br><span class="line">python_gc_collections_total&#123;generation=<span class="string">&quot;0&quot;</span>&#125; 141.0</span><br><span class="line">python_gc_collections_total&#123;generation=<span class="string">&quot;1&quot;</span>&#125; 12.0</span><br><span class="line">python_gc_collections_total&#123;generation=<span class="string">&quot;2&quot;</span>&#125; 1.0</span><br><span class="line"></span><br><span class="line">...(ä¸­ç•¥)...</span><br><span class="line"></span><br><span class="line">http_request_duration_highr_seconds_bucket&#123;le=<span class="string">&quot;10.0&quot;</span>&#125; 1.0</span><br><span class="line">http_request_duration_highr_seconds_bucket&#123;le=<span class="string">&quot;30.0&quot;</span>&#125; 1.0</span><br><span class="line">http_request_duration_highr_seconds_bucket&#123;le=<span class="string">&quot;60.0&quot;</span>&#125; 1.0</span><br><span class="line">http_request_duration_highr_seconds_bucket&#123;le=<span class="string">&quot;+Inf&quot;</span>&#125; 1.0</span><br><span class="line">http_request_duration_highr_seconds_count 1.0</span><br><span class="line">http_request_duration_highr_seconds_sum 0.0015817060047993436</span><br><span class="line"><span class="comment"># HELP http_request_duration_highr_seconds_created Latency with many buckets but no API specific labels. Made for more accurate percentile calculations.</span></span><br><span class="line"><span class="comment"># TYPE http_request_duration_highr_seconds_created gauge</span></span><br><span class="line">http_request_duration_highr_seconds_created 1.7132794545039835e+09</span><br><span class="line"><span class="comment"># HELP http_request_duration_seconds Latency with only few buckets by handler. Made to be only used if aggregation by handler is important.</span></span><br><span class="line"><span class="comment"># TYPE http_request_duration_seconds histogram</span></span><br><span class="line">http_request_duration_seconds_bucket&#123;handler=<span class="string">&quot;/health&quot;</span>,le=<span class="string">&quot;0.1&quot;</span>,method=<span class="string">&quot;GET&quot;</span>&#125; 1.0</span><br><span class="line">http_request_duration_seconds_bucket&#123;handler=<span class="string">&quot;/health&quot;</span>,le=<span class="string">&quot;0.5&quot;</span>,method=<span class="string">&quot;GET&quot;</span>&#125; 1.0</span><br><span class="line">http_request_duration_seconds_bucket&#123;handler=<span class="string">&quot;/health&quot;</span>,le=<span class="string">&quot;1.0&quot;</span>,method=<span class="string">&quot;GET&quot;</span>&#125; 1.0</span><br><span class="line">http_request_duration_seconds_bucket&#123;handler=<span class="string">&quot;/health&quot;</span>,le=<span class="string">&quot;+Inf&quot;</span>,method=<span class="string">&quot;GET&quot;</span>&#125; 1.0</span><br><span class="line">http_request_duration_seconds_count&#123;handler=<span class="string">&quot;/health&quot;</span>,method=<span class="string">&quot;GET&quot;</span>&#125; 1.0</span><br><span class="line">http_request_duration_seconds_sum&#123;handler=<span class="string">&quot;/health&quot;</span>,method=<span class="string">&quot;GET&quot;</span>&#125; 0.0015817060047993436</span><br><span class="line"><span class="comment"># HELP http_request_duration_seconds_created Latency with only few buckets by handler. Made to be only used if aggregation by handler is important.</span></span><br><span class="line"><span class="comment"># TYPE http_request_duration_seconds_created gauge</span></span><br><span class="line">http_request_duration_seconds_created&#123;handler=<span class="string">&quot;/health&quot;</span>,method=<span class="string">&quot;GET&quot;</span>&#125; 1.7132806219318378e+09</span><br></pre></td></tr></table></figure><p>ãã‚Œãã‚Œãƒ¡ãƒˆãƒªã‚¯ã‚¹ãŒã•ã—ç¤ºã—ã¦ã„ã‚‹æƒ…å ±ãŒä½•ãªã®ã‹ã‚’ç¤ºã—ã¦ãã‚Œã¦ã„ã¦ã€ã‚ã‹ã‚Šã‚„ã™ã•ã‚’æ„Ÿã˜ã¾ã—ãŸã€‚</p><p>æ¬¡ã«Prometheusè‡ªä½“ã®è¨­å®šã§ã™ã€‚Prometheusã®è¨­å®šã«ã¯<code>prometheus.yml</code>ã‚’ç”¨ã„ã¦èª­ã¿è¾¼ã¾ã›ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ä»Šå›ä½¿ç”¨ã—ãŸYAMLãƒ•ã‚¡ã‚¤ãƒ«ã¯ä»¥ä¸‹ã§ã™ã€‚</p><figure class="highlight yml"><figcaption><span>prometheus.yml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="attr">global:</span></span><br><span class="line">  <span class="attr">scrape_interval:</span> <span class="string">15s</span></span><br><span class="line"></span><br><span class="line"><span class="attr">scrape_configs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">job_name:</span> <span class="string">&#x27;prometheus&#x27;</span></span><br><span class="line">    <span class="attr">scrape_interval:</span> <span class="string">5s</span></span><br><span class="line">    <span class="attr">static_configs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">targets:</span> [<span class="string">&#x27;localhost:9090&#x27;</span>]</span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">job_name:</span> <span class="string">&#x27;fastapi-app&#x27;</span></span><br><span class="line">    <span class="attr">scrape_interval:</span> <span class="string">5s</span></span><br><span class="line">    <span class="attr">metrics_path:</span> <span class="string">&#x27;/metrics&#x27;</span></span><br><span class="line">    <span class="attr">static_configs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">targets:</span> [<span class="string">&#x27;app:8080&#x27;</span>]</span><br></pre></td></tr></table></figure><p><code>job_name</code>ä»¥ä¸‹ã§ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å–å¾—ã™ã‚‹å¯¾è±¡ã‚„å–å¾—ã™ã‚‹ãŸã‚ã®ãƒ‘ã‚¹ã‚’æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚</p><p>ã‚½ãƒ¼ã‚¹ãƒ¬ãƒ™ãƒ«ã®è¨­å®šã€ç¢ºèªã¯ã“ã“ã¾ã§ã§ã€å…·ä½“çš„ã«Prometheusã®è¨­å®šã‚’ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚<br>ã‚³ãƒ³ãƒ†ãƒŠã‚’ç«‹ã¡ä¸Šã’ãŸçŠ¶æ…‹ã§ <code>http://localhost:9090/graph</code>ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªç”»é¢ã«ãªã‚Šã¾ã™ã€‚</p><img src="/images/20240417b/ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ_2024-04-17_1.01.38.png" alt="" width="1192" height="797" loading="lazy"><p>ãã—ã¦ã€æ¤œç´¢ãƒãƒ¼ã«FastAPIã®ã‚³ãƒ³ãƒ†ãƒŠã®<code>/health</code>ã«å¯¾ã—ã¦å—ã‘ãŸãƒ‘ã‚¹ã®åˆè¨ˆãŒå‡ºåŠ›ã•ã‚Œã‚‹ <code>http_requests_total</code>ã‚’å…¥ã‚Œã¦ã¿ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><img src="/images/20240417b/ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ_2024-04-17_1.10.32.png" alt="" width="1200" height="950" loading="lazy"><p>æ‰‹æ‰“ã¡ã§cURLã‚’å®Ÿè¡Œã—ã¦ã¯ã„ã¾ã™ãŒã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã—ãŸæ•°ã ã‘ã‚°ãƒ©ãƒ•ãŒä¸ŠãŒã£ã¦ãã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚</p><p>ã“ã®ã‚ˆã†ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰å‡ºåŠ›ã•ã‚ŒãŸãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚</p><h2 id="Grafana"><a href="#Grafana" class="headerlink" title="Grafana"></a>Grafana</h2><p>Grafanaã¯Grafana Labsã«ã‚ˆã£ã¦é–‹ç™ºã•ã‚Œã¦ã„ã‚‹å¯è¦–åŒ–ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚Šã€ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ä½œæˆã¯ã‚‚ã¡ã‚ã‚“ã®ã“ã¨ãªãŒã‚‰å‰è¿°ã—ãŸPrometheusã§å®Ÿè¡Œã—ãŸã‚¯ã‚¨ãƒªã‚’Grafanaã§ã‚‚åŒç­‰ã«ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚</p><p>Prometheusã§ã§ãã‚‹ã“ã¨ã¯ã‚ã–ã‚ã–Grafanaã§ã¾ãŸã‚„ã‚‰ãªãã¦ã„ã„ã®ã§ã¯ï¼Ÿã¨æ€ã„ã¾ã—ãŸãŒã€ãã“ã¯ä¸€æ—¦é£²ã¿è¾¼ã‚“ã§è©¦ã—ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚</p><h3 id="ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®å–å¾—ã‚’è¡Œã†"><a href="#ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®å–å¾—ã‚’è¡Œã†" class="headerlink" title="ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®å–å¾—ã‚’è¡Œã†"></a>ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®å–å¾—ã‚’è¡Œã†</h3><p>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãªã©ã¯å…ˆã»ã©ä½¿ã£ã¦ã„ãŸã‚‚ã®ã‚’ãã®ã¾ã¾åˆ©ç”¨ã—ã¾ã™ã€‚</p><p>ã‚³ãƒ³ãƒ†ãƒŠã‚’ç«‹ã¡ä¸Šã’ãŸã‚ã¨ã€€<code>http://localhost:3000/login</code>ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ã€ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã«ãªã‚‹ã®ã§ã€åˆæœŸãƒ¦ãƒ¼ã‚¶&#x2F;ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ã‚ã‚‹ admin &#x2F; adminã‚’æ‰“ã¡è¾¼ã‚“ã§ã€ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã—ã‚‡ã†ã€‚(ãã®ã‚ã¨ã€åˆæœŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®å¤‰æ›´ã‚’æ±‚ã‚ã‚‰ã‚Œã¾ã™ãŒã€ä»Šå›ã®æ¤œè¨¼ã®æœ¬é¡Œã‹ã‚‰ã¯å¤–ã‚Œã‚‹ã®ã§å‰²æ„›ã—ã¾ã™ï¼‰</p><img src="/images/20240417b/ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ_2024-04-17_1.19.48.png" alt="" width="1200" height="950" loading="lazy"><p>ã•ã¦ã€ãƒ­ã‚°ã‚¤ãƒ³ã¾ã§ã§ããŸã®ã§ã€æ¬¡ã¯Grafanaã‹ã‚‰Prometheusã‚’å‚ç…§ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚ã‚µã‚¤ãƒ‰ãƒãƒ¼ã«ã‚ã‚‹ Connections &gt; Add new connection ã‚’æŠ¼ä¸‹ã—ã¾ã—ã‚‡ã†ã€‚ãŸãã•ã‚“ã®ãƒ„ãƒ¼ãƒ«ã‚’ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã«ã§ãã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ä»Šå›ã¯æ¤œç´¢ãƒãƒ¼ã«Prometheusã¨å…¥åŠ›ã—ã€å¿…è¦ãªã‚‚ã®ã‚’é¸æŠã—ã¾ã—ã‚‡ã†ã€‚</p><img src="/images/20240417b/ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ_2024-04-17_11.52.25.png" alt="" width="1200" height="459" loading="lazy"><p>Promehteusã‚’é¸æŠã—ã€Add new data sourceã‚’æŠ¼ä¸‹ã—ã¦ãƒ›ã‚¹ãƒˆã®è¨­å®šã‚’ã—ã¾ã—ã‚‡ã†ã€‚Prometheus Server URLã« <code>http://prometheus:9090</code>ã‚’å…¥åŠ›ã—ã¦ç”»é¢ä¸‹éƒ¨ã«ã‚ã‚‹ã€€Save &amp; testã‚’æŠ¼ä¸‹ã—ã¦ä¿å­˜ã—ã¾ã—ã‚‡ã†ã€‚</p><p>ä¿å­˜ãŒã§ããŸã‚‰ã€ä»Šåº¦ã¯ã‚µã‚¤ãƒ‰ãƒãƒ¼ã«ã‚ã‚‹ã€Dashboardsã‚’æŠ¼ä¸‹ã—ã€Create Dashboard &gt; Add visualization ã‹ã‚‰ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’ä½œã‚Šã¾ã—ã‚‡ã†ã€‚ã“ã“ã§ã€å…ˆã»ã©ç™»éŒ²ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®è¿½åŠ ã§ã™ãŒã€ä¸‹ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã®ã‚ˆã†ã«å…¥åŠ›ã§ãã‚‹æ¬„ãŒã‚ã‚‹ã®ã§ã€Metricã«å…ˆã»ã©Prometheusã§ã‚‚åˆ©ç”¨ã—ãŸ <code>http_requests_total</code>ã‚’å…¥åŠ›ã—ã¦ã€€Run queriesã‚’æŠ¼ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><img src="/images/20240417b/ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ_2024-04-17_12.00.23.png" alt="" width="793" height="280" loading="lazy"><p>ãã†ã™ã‚‹ã¨ã€ã“ã¡ã‚‰ã§ã‚‚ã‚°ãƒ©ãƒ•ã‚’è¡¨ç¤ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚ï¼ˆå…ˆã»ã©ã¨æ¦‚å½¢ãŒç•°ãªã‚‹ã®ã¯å–å¾—æ™‚é–“ãŒç•°ãªã‚‹ãŸã‚ã§ã™ã€‚ï¼‰</p><img src="/images/20240417b/ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ_2024-04-17_12.03.30.png" alt="" width="793" height="351" loading="lazy"><p>Metricã®æ¬„ã§ã¯ã€PrometheusãŒå–å¾—å¯èƒ½ãªã™ã¹ã¦ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãŒä½¿ãˆã‚‹ã®ã§ã€ã‚‚ã®ã«ã‚ˆã£ã¦ã¯2ã¤ä»¥ä¸Šå–å¾—ã§ãã‚‹ã‚‚ã®ãŒã‚ã‚Šã¾ã™ãŒã€ã“ã‚Œã¯ Label filtersã§çµã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚</p><p>ãã—ã¦ã€å³ä¸Šã® Apply ã‚’æŠ¼ä¸‹ã—ã¦ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰åŒ–ã—ã¾ã—ã‚‡ã†ã€‚</p><img src="/images/20240417b/ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ_2024-04-17_12.06.32.png" alt="" width="1200" height="588" loading="lazy"><h3 id="ã©ã‚“ãªã“ã¨ã«ä½¿ãˆãã†ã‹"><a href="#ã©ã‚“ãªã“ã¨ã«ä½¿ãˆãã†ã‹" class="headerlink" title="ã©ã‚“ãªã“ã¨ã«ä½¿ãˆãã†ã‹"></a>ã©ã‚“ãªã“ã¨ã«ä½¿ãˆãã†ã‹</h3><p>Grafanaã¯ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®ä¸€è¦§ã‹ã‚‰ã‚ã‹ã‚‹ã‚ˆã†ã«å¤šæ§˜ãªã‚½ãƒ¼ã‚¹ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚ä»Šå›è©¦ã—ãŸPrometheusä»¥å¤–ã«ã‚‚PostgreSQLãªã©ã®RDBã€å„ã‚¯ãƒ©ã‚¦ãƒ‰ã®ç›£è¦–ãƒ„ãƒ¼ãƒ«ã¨ã®é€£æºã€Google Analyticsãªã©ã®å¯è¦–åŒ–ã‚‚è¡Œãˆã¾ã™ã€‚ãã‚Œãã‚Œã§å¯è¦–åŒ–ã®éƒ¨åˆ†ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ã¨ã¯æ€ã„ã¾ã™ãŒã€å¯è¦–åŒ–ãƒ„ãƒ¼ãƒ«ã®ä¸€å…ƒç®¡ç†ã€ã¨ã„ã†æ„å‘³ã§ã¯Grafanaã«å¤šæ§˜ãªãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚’æŸã­ã‚‹ã¨ã„ã†ã®ã¯è‰¯ã„ã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚<br>å‚è€ƒï¼‰<a href="https://grafana.com/docs/grafana/latest/datasources/#built-in-core-data-sources">Grafana data sources &gt; Built-in core data sources</a></p><h2 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h2><p>ç›£è¦–ãƒ»å¯è¦–åŒ–ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹Prometheusã€Grafanaã‚’è§¦ã£ã¦å‹•ã‹ã—ã€çŸ¥ã‚‹ãã£ã‹ã‘ã«ååˆ†ãªã‚Šã¾ã—ãŸã€‚</p><p>ä»Šã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯Grafanaã®ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã¨ã—ã¦ä½¿ãˆã‚‹OpenSearchã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ã®ã§ã€ç¶™ç¶šã—ã¦å°å…¥ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’ä¼ºã„ãªãŒã‚‰çŸ¥è¦‹ã‚’è²¯ã‚ã¦ã„ãã¾ã™ï¼</p><h2 id="å‚è€ƒæ›¸ç±"><a href="#å‚è€ƒæ›¸ç±" class="headerlink" title="å‚è€ƒæ›¸ç±"></a>å‚è€ƒæ›¸ç±</h2><ul><li><a href="https://booth.pm/ja/items/3907516">Prometheuså®Ÿè·µã‚¬ã‚¤ãƒ‰: ã‚¯ãƒ©ã‚¦ãƒ‰ãƒã‚¤ãƒ†ã‚£ãƒ–ãªç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰</a></li></ul>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Infrastructure/">Infrastructure</category>
      
      
      <category domain="https://future-architect.github.io/tags/prometheus/">prometheus</category>
      
      <category domain="https://future-architect.github.io/tags/grafana/">grafana</category>
      
      
      <comments>https://future-architect.github.io/articles/20240417b/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>è¬ã®AIãƒãƒƒãƒ—ãƒ™ãƒ³ãƒ€ãƒ¼Tenstorrentè£½ã®AIãƒœãƒ¼ãƒ‰ã‚’ä½¿ã£ã¦ã¿ã‚‹ï¼ˆé–‹å°ç·¨ï¼‰</title>
      <link>https://future-architect.github.io/articles/20240417a/</link>
      <guid>https://future-architect.github.io/articles/20240417a/</guid>
      <pubDate>Tue, 16 Apr 2024 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;p&gt;SAIGã®å±±æœ¬ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;å…ˆæ—¥ãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸTenstorrentè£½ã®AIæ¨è«–ã‚¢ã‚¯ã‚»ãƒ©ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒœãƒ¼ãƒ‰&lt;a href=&quot;https://tenstorrent.com/cards/#grayskull-e150&quot;&gt;Grayskull</description>
          
        
      
      
      
      <content:encoded><![CDATA[<p>SAIGã®å±±æœ¬ã§ã™ã€‚</p><p>å…ˆæ—¥ãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸTenstorrentè£½ã®AIæ¨è«–ã‚¢ã‚¯ã‚»ãƒ©ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒœãƒ¼ãƒ‰<a href="https://tenstorrent.com/cards/#grayskull-e150">Grayskull e150</a>ã‚’æ—©é€Ÿå…¥æ‰‹ã—ã¾ã—ãŸã®ã§ã€é–‹å°ã—ã¾ã™ã€‚</p><h1 id="Tenstorrentã¨ã¯"><a href="#Tenstorrentã¨ã¯" class="headerlink" title="Tenstorrentã¨ã¯"></a><a href="https://tenstorrent.com/">Tenstorrent</a>ã¨ã¯</h1><p>ã‚«ãƒŠãƒ€ã®ãƒˆãƒ­ãƒ³ãƒˆã«æœ¬ç¤¾ãŒã‚ã‚‹ã€çŸ¥ã‚‹äººãçŸ¥ã‚‹ã€<a href="https://ja.wikipedia.org/wiki/%E3%82%B8%E3%83%A0%E3%83%BB%E3%82%B1%E3%83%A9%E3%83%BC">ã‚¸ãƒ ãƒ»ã‚±ãƒ©ãƒ¼</a>ç‡ã„ã‚‹<a href="https://ja.wikipedia.org/wiki/RISC-V">RISC-V</a>&#x2F;AIãƒãƒƒãƒ—ãƒ™ãƒ³ãƒ€ãƒ¼ã§ã™ã€‚æ—¥æœ¬æ³•äººã‚‚æ˜¨å¹´ã«è¨­ç«‹ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><h1 id="Grayskullã¨ã¯"><a href="#Grayskullã¨ã¯" class="headerlink" title="Grayskullã¨ã¯"></a>Grayskullã¨ã¯</h1><p>Tenstorrentç¤¾ãŒé–‹ç™ºã—ãŸã€AIæ¨è«–ã‚¢ã‚¯ã‚»ãƒ©ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒƒãƒ—ã§ã™ã€‚</p><p>ç°¡å˜ã«èª¬æ˜ã™ã‚‹ã¨CPUã®ä¸€ç¨®ã§ã‚ã‚‹RISC-VãŒãƒ¡ãƒãƒ£ãƒ¡ãƒãƒ£æ²¢å±±å†…è”µã•ã‚Œã¦ã„ã‚‹ãƒãƒƒãƒ—ã§ã€AIæ¨è«–ãªã©ãŒåŠ¹ç‡çš„ã«è¡Œãˆã‚‹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ¼ã«ãªã£ã¦ã„ã¾ã™ã€‚è©³ã—ãã¯ã€<a href="https://www.youtube.com/watch?v=lPX1H3jW8ZQ&t=17m45s">Tenstorrentç¤¾ã®å‹•ç”»</a>ãªã©ã‚’ã”è¦§ãã ã•ã„ã€‚ã¾ãŸã€æ©Ÿä¼šãŒã‚ã‚Šã¾ã—ãŸã‚‰ã€åˆ¥é€”ã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãªã©ã«ã¤ã„ã¦èª¬æ˜ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><h1 id="é–‹å°"><a href="#é–‹å°" class="headerlink" title="é–‹å°"></a>é–‹å°</h1><p>æ‰‹å‰ãŒãƒ–ãƒ­ã‚¢ãƒ¼ï¼ˆå†·å´ãƒ•ã‚¡ãƒ³ï¼‰ã®ã€å¥¥ãŒãƒœãƒ¼ãƒ‰æœ¬ä½“ãŒå…¥ã£ã¦ã„ã‚‹ç®±ã«ãªã‚Šã¾ã™ã€‚<br><img src="/images/20240417a/IMG_3148.jpg" alt="" width="1200" height="900" loading="lazy"></p><p>ãƒ–ãƒ­ã‚¢ãƒ¼ã¯ã€ãƒœãƒ¼ãƒ‰ã¨æ¥åˆéƒ¨åˆ†ã®ãƒ‘ãƒ¼ãƒ„ã¯ï¼“Dãƒ—ãƒªãƒ³ã‚¿ã§å‡ºåŠ›ã—ãŸã‚‚ã®ã‚’ä½¿ã£ã¦ã¾ã™ã€‚<br><img src="/images/20240417a/IMG_3150.jpg" alt="" width="1200" height="900" loading="lazy"></p><p>ãƒœãƒ¼ãƒ‰ã®è¡¨å´ã€‚<br><img src="/images/20240417a/IMG_3151.jpg" alt="" width="1200" height="537" loading="lazy"></p><p>ãƒœãƒ¼ãƒ‰ã®è£å´ã€‚<br><img src="/images/20240417a/IMG_3153.jpg" alt="" width="1200" height="587" loading="lazy"></p><p>ãƒœãƒ¼ãƒ‰ã‚’è¦†ã£ã¦ã„ã‚‹å›²ã„ã‚’å–ã‚Šé™¤ãã¨å¤§ããªãƒ’ãƒ¼ãƒˆã‚·ãƒ³ã‚¯ãŒè¦‹ãˆã‚‹ã€‚<br><img src="/images/20240417a/Image_20240412_190127_987.jpeg" alt="" width="1200" height="540" loading="lazy"></p><p>ãƒ’ãƒ¼ãƒˆã‚·ãƒ³ã‚¯ã‚’å–ã‚Šå¤–ã™ã¨AIãƒãƒƒãƒ—ã‚„RAMãŒç¢ºèªã§ãã‚‹ã€‚<br><img src="/images/20240417a/Image_20240412_190127_922.jpeg" alt="jpeg" width="1200" height="502" loading="lazy"></p><p>ãã®ä»–ã€åŒæ¢±ã•ã‚Œã¦ã„ãŸã‚·ãƒ¼ãƒ«ãªã©ã€‚é»’ã„ç´™ç‰‡ã¯ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã®ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã®URLã®ã¿æ›¸ã‹ã‚Œã¦ã„ã¾ã—ãŸã€‚<br><img src="/images/20240417a/IMG_3152.jpg" alt="" width="1200" height="862" loading="lazy"></p><h1 id="ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—"><a href="#ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—" class="headerlink" title="ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—"></a>ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—</h1><p><a href="https://docs.tenstorrent.com/tenstorrent/add-in-boards-and-cooling-kits/grayskull-tm-e75-e150">Tenstorrentç¤¾ã®ã‚µã‚¤ãƒˆã«ã‚ã‚‹ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †</a>ã‚’å…ƒã«è¨­å®šã‚’è¡Œã„ã¾ã™ã€‚</p><p>ä»Šå›ã¯ã€æ‰‹å…ƒã«ã‚ã£ãŸä¸‹è¨˜ç’°å¢ƒã§è©¦ã—ã¦ã¿ã¾ã—ãŸã€‚</p><ul><li>CPU: Intel Core i7-7700K 4.20GHz</li><li>RAM: 64GB</li><li>PCIe: Gen3.0 x16</li><li>OS: Linux(Ubuntu 22.04.4 LTS)</li></ul><p>PCIeã®ã¿ã€æœ€ä½å‹•ä½œç’°å¢ƒã‚ˆã‚Šã‚‚ä½ã„ã§ã™ãŒã€ä¸€æ—¦ã€ã“ã¡ã‚‰ã®ç’°å¢ƒã§è©¦ã—ã¦ã¿ã¾ã™ã€‚</p><h1 id="TT-SMI"><a href="#TT-SMI" class="headerlink" title="TT-SMI"></a>TT-SMI</h1><p>NVIDIAå‘ã‘ã«ã¯nvidia-smiã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ãŒã‚ã‚Šã¾ã™ãŒã€Tenstorrentå‘ã‘ã«ã¯tt-smiã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ãŒã‚·ã‚¹ãƒ†ãƒ ç®¡ç†ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã¨ã—ã¦ç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚<br>ã“ã®ã‚³ãƒãƒ³ãƒ‰ã§ã€Tenstorrentã®ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚„ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®çŠ¶æ…‹ã‚„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãªã©ã‚’ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä»Šå›ã¯æœ€ä½é™ã®å‹•ä½œç¢ºèªã¾ã§ã¨ã„ã†ã“ã¨ã§ã€ã“ã®ãƒ„ãƒ¼ãƒ«ã«ã‚ˆã‚‹ç¢ºèªã¾ã§ã«ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚<br>å…·ä½“çš„ã«ã¯ã€æ¬¡ã®ã‚ˆã†ãªç”»é¢ã«ãªã‚Šã¾ã™ã€‚</p><p>TT-SMI: ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±ç”»é¢<br><img src="/images/20240417a/SCR-20240412-pthf.png" alt="" width="1200" height="522" loading="lazy"></p><p>TT-SMI: ãƒ‡ãƒã‚¤ã‚¹è¨ˆæ¸¬ç”»é¢<br><img src="/images/20240417a/SCR-20240412-pucp.png" alt="" width="1200" height="529" loading="lazy"></p><p>TT-SMI: ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ç”»é¢<br><img src="/images/20240417a/SCR-20240412-pulb.png" alt="" width="1200" height="531" loading="lazy"></p><h1 id="çµ‚ã‚ã‚Šã«"><a href="#çµ‚ã‚ã‚Šã«" class="headerlink" title="çµ‚ã‚ã‚Šã«"></a>çµ‚ã‚ã‚Šã«</h1><p>é–‹å°ç·¨ã¨ã„ã†ã“ã¨ã§ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å†…å®¹ã®ç¢ºèªã¨ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã€ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†ãƒ„ãƒ¼ãƒ«ã«ã‚ˆã‚‹ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã¨ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®çŠ¶æ…‹ã®ç¢ºèªã‚’è¡Œã„ã¾ã—ãŸã€‚</p><p>æ¬¡å›ä»¥é™ã§ã¯ã€ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ç´¹ä»‹ã‚„ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ¼ã®è§£èª¬ãªã©ã‚’è¡Œã£ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚</p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Infrastructure/">Infrastructure</category>
      
      
      <category domain="https://future-architect.github.io/tags/RISC-V/">RISC-V</category>
      
      <category domain="https://future-architect.github.io/tags/AI/">AI</category>
      
      <category domain="https://future-architect.github.io/tags/tenstorrent/">tenstorrent</category>
      
      <category domain="https://future-architect.github.io/tags/Grayskull-e150/">Grayskull e150</category>
      
      
      <comments>https://future-architect.github.io/articles/20240417a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>MLflowä¸Šã§Optunaã«ã‚ˆã£ã¦ç”Ÿæˆã•ã‚Œã‚‹å¤§é‡ã®runã‚’æ•´ç†ã™ã‚‹</title>
      <link>https://future-architect.github.io/articles/20240416a/</link>
      <guid>https://future-architect.github.io/articles/20240416a/</guid>
      <pubDate>Mon, 15 Apr 2024 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;h2 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h2&gt;&lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€SAIG&amp;#x2F;MLOpsãƒãƒ¼ãƒ ã§ã‚¢ãƒ«ãƒã‚¤ãƒˆã‚’ã—ã¦ã„ã‚‹é½‹è—¤ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a</description>
          
        
      
      
      
      <content:encoded><![CDATA[<h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><p>ã“ã‚“ã«ã¡ã¯ã€SAIG&#x2F;MLOpsãƒãƒ¼ãƒ ã§ã‚¢ãƒ«ãƒã‚¤ãƒˆã‚’ã—ã¦ã„ã‚‹é½‹è—¤ã§ã™ã€‚</p><p><a href="https://mlflow.org/">MLflow</a>ã¯æ©Ÿæ¢°å­¦ç¿’ã®ç®¡ç†ã‚’æ‰±ã†ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ã€<a href="https://www.preferred.jp/ja/projects/optuna/">Optuna</a>ã¯ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è‡ªå‹•èª¿æ•´ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ã¨ã‚‚ã«åºƒãä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚MLflowã¨Optunaã‚’åŒæ™‚ã«åˆ©ç”¨ã—ãŸéš›ã«ã€OptunaãŒè¤‡æ•°å›è©¦è¡Œã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦MLflowä¸Šã«runãŒå¤§é‡ã«ç”Ÿæˆã•ã‚Œã€MLflowä¸Šã§è©¦è¡ŒçµæœãŒè¦‹ã¥ã‚‰ããªã‚Šã¾ã™ã€‚</p><p>æœ¬è¨˜äº‹ã§ã¯ã€å¤§é‡ã«ç”Ÿæˆã•ã‚Œã‚‹runã«è¦ªã®runã‚’ä»˜ä¸ã™ã‚‹ã“ã¨ã§ã€MLflowã®WebUIã‹ã‚‰è¦‹ã‚„ã™ãã™ã‚‹æ–¹æ³•ã‚’æç¤ºã—ã¾ã™ã€‚</p><h2 id="èª²é¡Œ"><a href="#èª²é¡Œ" class="headerlink" title="èª²é¡Œ"></a>èª²é¡Œ</h2><p>Optunaã¯äº‹å‰ã«æŒ‡å®šã—ãŸç¯„å›²ã®ä¸­ã‹ã‚‰ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®çµ„ã¿åˆã‚ã›ã‚’è‡ªå‹•çš„ã«é¸æŠã—ã¦ãƒ¢ãƒ‡ãƒ«ã‚’å­¦ç¿’ã—ã¦è©•ä¾¡ã™ã‚‹ã¨ã„ã†è©¦è¡Œã‚’ç¹°ã‚Šè¿”ã™ã“ã¨ã§ã€è‰¯ã„ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¢ç´¢ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚Šã€ã“ã‚Œã«ã‚ˆã‚Šæ‰‹ä½œæ¥­ã§ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’èª¿æ•´ã™ã‚‹ã®ã‚’çœã‘ã¾ã™ã€‚</p><p>MLflowã¯æ©Ÿæ¢°å­¦ç¿’ã®ç®¡ç†ã«ã¤ã„ã¦å¹…åºƒãæ‰±ã†ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚Šã€ä¾‹ãˆã°å„å®Ÿé¨“ã«ä½¿ç”¨ã•ã‚ŒãŸãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚„æ€§èƒ½ã®è¨˜éŒ²ãªã©ãŒå‡ºæ¥ã‚‹ãŸã‚ã€å®Ÿé¨“ã®å†ç¾ãªã©ã«å½¹ç«‹ã¡ã¾ã™ã€‚</p><p>ã“ã‚Œã‚‰ã¯å¤§å¤‰ä¾¿åˆ©ãªãƒ„ãƒ¼ãƒ«ãªã®ã§ã™ãŒã€ã“ã‚Œã‚‰ã‚’çµ„ã¿åˆã‚ã›ã¦ä½¿ç”¨ã—ãŸéš›ã€ç”»åƒã®ã‚ˆã†ã«MLflowä¸Šã§çµæœã‚’è¦‹ãŸéš›ã«å¤§é‡ã®runãŒç”Ÿæˆã•ã‚Œã¦ã€çµæœä¸€è¦§ãŒè¦‹ã¥ã‚‰ããªã‚Šã¾ã™ã€‚ç‰¹ã«ã€æ¡ä»¶ã‚’å¤‰åŒ–ã•ã›ã¦Optunaã«ã‚ˆã‚‹æœ€é©åŒ–ã‚’å®Ÿè¡Œã•ã›ãŸå ´åˆã«ã€å‰å›ã¾ã§ã®Optunaã«ã‚ˆã£ã¦ç”Ÿæˆã•ã‚ŒãŸrunã¨ä»Šå›åˆ†ã®runã®è¦‹åˆ†ã‘ãŒä»˜ã‘ã«ãããªã‚‹ã¨ã„ã†å•é¡ŒãŒç™ºç”Ÿã—ã¾ã™ã€‚</p><img src="/images/20240416a/image.png" alt="image.png" width="1200" height="421" loading="lazy"><h2 id="èª²é¡Œã®è§£æ±º"><a href="#èª²é¡Œã®è§£æ±º" class="headerlink" title="èª²é¡Œã®è§£æ±º"></a>èª²é¡Œã®è§£æ±º</h2><h3 id="æ–¹é‡"><a href="#æ–¹é‡" class="headerlink" title="æ–¹é‡"></a>æ–¹é‡</h3><p>MLflowã§ã¯runæ¯ã«ã‚¿ã‚°ã‚’è¨­å®šã§ãã¾ã™ãŒã€ãã®ä¸­ã§ã‚‚<a href="https://mlflow.org/docs/latest/tracking/tracking-api.html#system-tags">ã‚·ã‚¹ãƒ†ãƒ ã‚¿ã‚°</a>ã¨å‘¼ã°ã‚Œã‚‹ã‚¿ã‚°ãŒã‚ã‚Šã€MLflowã®ä¸­ã§ç‰¹æ®Šãªæ„å‘³ã‚’æŒã¡ã¾ã™ã€‚<br><code>mlflow.parentRunId</code>ã¨ã„ã†ã‚¿ã‚°ã¯ã‚·ã‚¹ãƒ†ãƒ ã‚¿ã‚°ã®ä¸€ã¤ã§ã€ã“ã®ã‚¿ã‚°ã«è¦ªã®runã®IDã‚’è¨­å®šã™ã‚‹ã¨ã€WebUIä¸Šã§è¦ªå­ã®runãŒãƒã‚¹ãƒˆã—ãŸå½¢ã§è¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><p>ãã®ãŸã‚â€¦</p><ol><li>MLflowã§ç©ºã®runã‚’å®Ÿè¡Œã™ã‚‹ã€‚</li><li>1ã§å®Ÿè¡Œã—ãŸrunã‚’ç›®çš„é–¢æ•°ã®ä¸­ã§è¦ªã®runã¨ã—ã¦è¨­å®šã™ã‚‹ã€‚</li></ol><p>â€¦ã¨ã„ã†2ã¤ã®æ‰‹é †ã‚’è¸ã‚ã°ã€Optunaã«ã‚ˆã£ã¦ç”Ÿæˆã•ã‚Œã‚‹å¤§é‡ã®runã‚’ä¸€ã¤ã®è¦ªrunã«çµã³ä»˜ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><h3 id="å®Ÿè£…"><a href="#å®Ÿè£…" class="headerlink" title="å®Ÿè£…"></a>å®Ÿè£…</h3><h4 id="1-MLflowã§ç©ºã®runã‚’å®Ÿè¡Œã™ã‚‹"><a href="#1-MLflowã§ç©ºã®runã‚’å®Ÿè¡Œã™ã‚‹" class="headerlink" title="1. MLflowã§ç©ºã®runã‚’å®Ÿè¡Œã™ã‚‹"></a>1. MLflowã§ç©ºã®runã‚’å®Ÿè¡Œã™ã‚‹</h4><p>ã¾ãšMLflowã§è¦ªã®runã¨ãªã‚‹ç©ºã®runã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p><p>ã“ã®æ™‚ã®run_idã¯æ¬¡ã«å¿…è¦ã«ãªã‚‹ãŸã‚ä¿å­˜ã—ã¦ãŠãã¾ã™ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> mlflow.start_run(experiment_id=<span class="number">0</span>) <span class="keyword">as</span> run:</span><br><span class="line">    parent_run_id = run.info.run_id</span><br></pre></td></tr></table></figure><h4 id="2-1ã§å®Ÿè¡Œã—ãŸrunã‚’ç›®çš„é–¢æ•°ã®ä¸­ã§è¦ªã®runã¨ã—ã¦è¨­å®šã™ã‚‹"><a href="#2-1ã§å®Ÿè¡Œã—ãŸrunã‚’ç›®çš„é–¢æ•°ã®ä¸­ã§è¦ªã®runã¨ã—ã¦è¨­å®šã™ã‚‹" class="headerlink" title="2. 1ã§å®Ÿè¡Œã—ãŸrunã‚’ç›®çš„é–¢æ•°ã®ä¸­ã§è¦ªã®runã¨ã—ã¦è¨­å®šã™ã‚‹"></a>2. 1ã§å®Ÿè¡Œã—ãŸrunã‚’ç›®çš„é–¢æ•°ã®ä¸­ã§è¦ªã®runã¨ã—ã¦è¨­å®šã™ã‚‹</h4><p>runã«ã‚¿ã‚°ã‚’è¨­å®šã™ã‚‹ã«ã¯<code>mlflow.set_tag</code>é–¢æ•°ã‚’ä½¿ç”¨ã™ã‚Œã°å‡ºæ¥ã¾ã™ã€‚</p><p>sklearnã®SGDClassifierã®æœ€é©åŒ–ã‚’ä¾‹ã«ã™ã‚‹ã¨ã€ç›®çš„é–¢æ•°ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">objective</span>(<span class="params">trial</span>) -&gt; <span class="built_in">float</span>:</span><br><span class="line">    <span class="keyword">with</span> mlflow.start_run(experiment_id=<span class="number">0</span>) <span class="keyword">as</span> run:</span><br><span class="line">        mlflow.set_tag(<span class="string">&quot;mlflow.parentRunId&quot;</span>, parent_run_id) <span class="comment"># start_runã®ç›´å¾Œã«å®Ÿè¡Œã™ã‚‹</span></span><br><span class="line"></span><br><span class="line">        alpha = trial.suggest_float(<span class="string">&quot;alpha&quot;</span>, <span class="number">1e-5</span>, <span class="number">1e-1</span>, log=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        wine = sklearn.datasets.load_wine()</span><br><span class="line">        classes = <span class="built_in">list</span>(<span class="built_in">set</span>(wine.target))</span><br><span class="line"></span><br><span class="line">        train_x, valid_x, train_y, valid_y = sklearn.model_selection.train_test_split(</span><br><span class="line">            wine.data, wine.target, test_size=<span class="number">0.25</span>, random_state=<span class="number">0</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        clf = sklearn.linear_model.SGDClassifier(alpha=alpha)</span><br><span class="line">        clf.fit(train_x, train_y)</span><br><span class="line"></span><br><span class="line">        score = clf.score(valid_x, valid_y)</span><br><span class="line"></span><br><span class="line">        mlflow.log_param(<span class="string">&quot;alpha&quot;</span>, alpha)</span><br><span class="line">        mlflow.log_metric(<span class="string">&quot;accuracy&quot;</span>, score)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> score</span><br></pre></td></tr></table></figure><p>å®Ÿè£…å…¨ä½“ã¨ã—ã¦æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> mlflow</span><br><span class="line"><span class="keyword">import</span> optuna</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sklearn</span><br><span class="line"><span class="keyword">import</span> sklearn.datasets</span><br><span class="line"><span class="keyword">import</span> sklearn.linear_model</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">objective</span>(<span class="params">trial</span>) -&gt; <span class="built_in">float</span>:</span><br><span class="line">    <span class="keyword">with</span> mlflow.start_run(experiment_id=<span class="number">0</span>) <span class="keyword">as</span> run:</span><br><span class="line">        mlflow.set_tag(<span class="string">&quot;mlflow.parentRunId&quot;</span>, parent_run_id) <span class="comment"># start_runã®ç›´å¾Œã«å®Ÿè¡Œã™ã‚‹</span></span><br><span class="line"></span><br><span class="line">        alpha = trial.suggest_float(<span class="string">&quot;alpha&quot;</span>, <span class="number">1e-5</span>, <span class="number">1e-1</span>, log=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        wine = sklearn.datasets.load_wine()</span><br><span class="line">        classes = <span class="built_in">list</span>(<span class="built_in">set</span>(wine.target))</span><br><span class="line"></span><br><span class="line">        train_x, valid_x, train_y, valid_y = sklearn.model_selection.train_test_split(</span><br><span class="line">            wine.data, wine.target, test_size=<span class="number">0.25</span>, random_state=<span class="number">0</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        clf = sklearn.linear_model.SGDClassifier(alpha=alpha)</span><br><span class="line">        clf.fit(train_x, train_y)</span><br><span class="line"></span><br><span class="line">        score = clf.score(valid_x, valid_y)</span><br><span class="line"></span><br><span class="line">        mlflow.log_param(<span class="string">&quot;alpha&quot;</span>, alpha)</span><br><span class="line">        mlflow.log_metric(<span class="string">&quot;accuracy&quot;</span>, score)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> score</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="keyword">with</span> mlflow.start_run(experiment_id=<span class="number">0</span>) <span class="keyword">as</span> run:</span><br><span class="line">        parent_run_id = run.info.run_id</span><br><span class="line"></span><br><span class="line">    study = optuna.create_study()</span><br><span class="line">    study.optimize(objective, n_trials=<span class="number">30</span>)</span><br></pre></td></tr></table></figure><h2 id="çµæœ"><a href="#çµæœ" class="headerlink" title="çµæœ"></a>çµæœ</h2><p>ä¸Šã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€Optunaã«ã‚ˆã£ã¦å®Ÿè¡Œã•ã‚ŒãŸå…¨ã¦ã®è©¦è¡ŒãŒMLflowã«é€ä¿¡ã•ã‚Œã¾ã™ã€‚</p><p>WebUIä¸Šã§ã¯ç”»åƒã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚Œã€Optunaã®å®Ÿè¡Œå˜ä½ã”ã¨ã«runãŒãƒã‚¹ãƒˆã—ã¦è¡¨ç¤ºã•ã‚Œã‚‹ã®ã§è¦‹ã‚„ã™ããªã‚Šã¾ã—ãŸã€‚</p><img src="/images/20240416a/image_2.png" alt="image.png" width="1200" height="391" loading="lazy"><h2 id="ãŠã‚ã‚Šã«"><a href="#ãŠã‚ã‚Šã«" class="headerlink" title="ãŠã‚ã‚Šã«"></a>ãŠã‚ã‚Šã«</h2><p>ä»¥ä¸Šã€<code>mlflow.parentRunId</code>ã¨ã„ã†ã‚·ã‚¹ãƒ†ãƒ ã‚¿ã‚°ã«runIDã‚’è¨­å®šã™ã‚‹ã¨WebUIä¸Šã§runãŒãƒã‚¹ãƒˆã—ã¦è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’åˆ©ç”¨ã—ã¦ã€è‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹runã‚’UIä¸Šã§æ•´ç†ã—ã¦è¡¨ç¤ºã•ã›ã‚‹ã¨ã„ã†è©±ã§ã—ãŸã€‚</p><p>MLflowã®ã‚·ã‚¹ãƒ†ãƒ ã‚¿ã‚°ã¯mlflow.parentRunIdä»¥å¤–ã«ã‚‚å­˜åœ¨ã™ã‚‹ã®ã§ã€ãã‚Œã‚‰ã‚’åˆ©ç”¨ã™ã‚‹ã¨UIä¸Šã§æ›´ãªã‚‹æ©æµãŒå¾—ã‚‰ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul><li><a href="https://mlflow.org/docs/latest/tracking/tracking-api.html#system-tags">https://mlflow.org/docs/latest/tracking/tracking-api.html#system-tags</a></li><li><a href="https://mlflow.org/">https://mlflow.org/</a></li><li><a href="https://www.preferred.jp/ja/projects/optuna/">https://www.preferred.jp/ja/projects/optuna/</a></li></ul>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/DataScience/">DataScience</category>
      
      
      <category domain="https://future-architect.github.io/tags/Python/">Python</category>
      
      <category domain="https://future-architect.github.io/tags/MLOps/">MLOps</category>
      
      <category domain="https://future-architect.github.io/tags/MLflow/">MLflow</category>
      
      <category domain="https://future-architect.github.io/tags/Optuna/">Optuna</category>
      
      
      <comments>https://future-architect.github.io/articles/20240416a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>VSCodeã§GitLensã‚’ä½¿ã†</title>
      <link>https://future-architect.github.io/articles/20240415a/</link>
      <guid>https://future-architect.github.io/articles/20240415a/</guid>
      <pubDate>Sun, 14 Apr 2024 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;img src=&quot;/images/20240415a/gitlens-logo-anybg.png&quot; alt=&quot;&quot; width=&quot;952&quot; height=&quot;300&quot; loading=&quot;lazy&quot;&gt;

&lt;p&gt;&lt;a</description>
          
        
      
      
      
      <content:encoded><![CDATA[<img src="/images/20240415a/gitlens-logo-anybg.png" alt="" width="952" height="300" loading="lazy"><p><a href="/articles/20240408a/">æ˜¥ã®å…¥é–€é€£è¼‰2024</a>ã€5æœ¬ç›®ã®è¨˜äº‹ã§ã™ã€‚</p><h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>ã“ã‚“ã«ã¡ã¯ã€‚CSIGï¼ˆCyber Security Innovation Groupï¼‰ã®<a href="/authors/%E6%A3%9A%E4%BA%95%E9%BE%8D%E4%B9%8B%E4%BB%8B/">æ£šäº•</a>ã§ã™ã€‚</p><p><a href="/articles/20240408a/">æ˜¥ã®å…¥é–€é€£è¼‰2024</a>ã¨ã„ã†ã“ã¨ã§ã€VSCodeã®æ‹¡å¼µæ©Ÿèƒ½ã§ã‚ã‚‹ã€Œ<a href="https://github.com/gitkraken/vscode-gitlens">GitLens â€” Supercharge Git in VS Code</a>ã€ã‚’å–ã‚Šä¸Šã’ã¾ã™ã€‚</p><h1 id="ã‚¨ãƒ‡ã‚£ã‚¿é¸ã³"><a href="#ã‚¨ãƒ‡ã‚£ã‚¿é¸ã³" class="headerlink" title="ã‚¨ãƒ‡ã‚£ã‚¿é¸ã³"></a>ã‚¨ãƒ‡ã‚£ã‚¿é¸ã³</h1><p>ã¿ãªã•ã‚“ã¯ã€æ™®æ®µã®é–‹ç™ºã‚¨ãƒ‡ã‚£ã‚¿ã«ã¯ä½•ã‚’åˆ©ç”¨ã•ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ</p><p>ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã§ã‚ã‚Œã°ã€ã‚¨ãƒ‡ã‚£ã‚¿ã¨ã®ä»˜ãåˆã„ã¯çµ¶å¯¾ã«å¤–ã›ãªã„ãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚ç§ã®å ´åˆã¯ã€ã€Œç”Ÿæˆç³»AIã¨ã®é€£æºãŒã‚ã‚‹ã‹ï¼Ÿã€ã¨ã€Œé–‹ç™ºæ”¯æ´ãƒ„ãƒ¼ãƒ«ãŒæ•´å‚™ã•ã‚Œã¦ã„ã‚‹ã‹ã€ã‚’åˆ¤æ–­è»¸ã¨ã—ã¦ã„ã¾ã™ã€‚</p><p>ã€ŒGitHub Copilotã€ã¨ã®é€£æºãŒã‚ã‚Šã€ç§ãŒã“ã‚Œã¾ã§åˆ©ç”¨ã—ã¦ããŸã‚¨ãƒ‡ã‚£ã‚¿ã¯</p><ul><li><a href="https://www.jetbrains.com/">JetBrains</a></li><li><a href="https://code.visualstudio.com/">VSCodeï¼ˆVisual Studio Codeï¼‰</a></li></ul><p>ã®2ã¤ã§ã™ã€‚</p><p>JetBrainsã®è£½å“ã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ç‚¹ã§è±Šå¯Œãªé–‹ç™ºæ”¯æ´æ©Ÿèƒ½ãŒæƒã£ã¦ãŠã‚Šã€GoLandã«ã¯é•·å¹´èª²é‡‘ã‚’ã—ã¦ãŠã‚Šã¾ã—ãŸã€‚ãŸã ã—ã€GitHub CopilotãŒç™»å ´ã—ã¦ã‹ã‚‰ã¯å¾ã€…ã«VSCodeã¸ã¨å‚¾ãå§‹ã‚ã¦ã€æ‹¡å¼µæ©Ÿèƒ½ã®ã€ŒGitLensã€ã‚’è¦‹ã¤ã‘ã¦ã‹ã‚‰ã¯ã€VSCodeä¸€æœ¬ã®é–‹ç™ºç’°å¢ƒã¸ã¨ç§»è¡Œã—ã¾ã—ãŸã€‚</p><p>æœ¬ãƒ–ãƒ­ã‚°ã§ã¯ã€ã“ã®ã€Œé–‹ç™ºæ”¯æ´ãƒ„ãƒ¼ãƒ«ã€ã§ã‚ã‚‹ã€ŒGitLensã€ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ã€‚</p><h1 id="GitLensã¨ã¯"><a href="#GitLensã¨ã¯" class="headerlink" title="GitLensã¨ã¯"></a>GitLensã¨ã¯</h1><p>GitLensã¯ã€VSCodeå†…ã§ã®ã€ŒGitã‚’ç”¨ã„ãŸé–‹ç™ºã€ã‚’ä¾¿åˆ©ã«ã™ã‚‹æ‹¡å¼µæ©Ÿèƒ½ã§ã™ã€‚</p><p>ä»¥ä¸‹ã€<a href="https://github.com/gitkraken/vscode-gitlens?tab=readme-ov-file#gitlens--supercharge-git-in-vs-code">README</a> è¨˜è¼‰ã®æ–‡ç« ã‚’å¼•ç”¨ã—ã€åˆã‚ã›ã¦ç¿»è¨³æ–‡ã‚’è¨˜è¼‰ã—ã¾ã—ãŸã€‚</p><blockquote><p>GitLens supercharges your Git experience in VS Code. Maintaining focus is critical, extra time spent context switching or missing context disrupts your flow. GitLens is the ultimate tool for making Git work for you, designed to improve focus, productivity, and collaboration with a powerful set of tools to help you and your team better understand, write, and review code.</p><p>GitLensã¯ã€VSCodeã§ã®Gitä½œæ¥­ã‚’ã‚ˆã‚Šå¿«é©ãªã‚‚ã®ã«ã—ã¾ã™ã€‚é›†ä¸­åŠ›ã‚’ç¶­æŒã™ã‚‹ã“ã¨ã¯éå¸¸ã«é‡è¦ã§ã™ã€‚ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®åˆ‡ã‚Šæ›¿ãˆã«ä½™åˆ†ãªæ™‚é–“ã‚’è²»ã‚„ã—ãŸã‚Šã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’è¦‹å¤±ã£ãŸã‚Šã™ã‚‹ã¨ã€ä½œæ¥­ã®æµã‚ŒãŒä¹±ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚GitLensã¯ã€é›†ä¸­åŠ›ã€ç”Ÿç”£æ€§ã€ã‚³ãƒ©ãƒœãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‘ä¸Šã•ã›ã‚‹ãŸã‚ã«è¨­è¨ˆã•ã‚ŒãŸç©¶æ¥µã®ãƒ„ãƒ¼ãƒ«ã§ã€ã‚ãªãŸã‚„ã‚ãªãŸã®ãƒãƒ¼ãƒ ãŒã‚³ãƒ¼ãƒ‰ã‚’ã‚ˆã‚Šã‚ˆãç†è§£ã—ã€æ›¸ãã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹ãŸã‚ã®å¼·åŠ›ãªãƒ„ãƒ¼ãƒ«ã‚»ãƒƒãƒˆã§ã™ã€‚</p></blockquote><p>GitLensãŒæä¾›ã™ã‚‹æ©Ÿèƒ½ã¯ã€ä¸€è¨€ã§è¡¨ç¾ã™ã‚‹ã¨ã€Œã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ç·¨é›†å±¥æ­´ã‚’ã‚¨ãƒ‡ã‚£ã‚¿å†…ã§ç¢ºèªã™ã‚‹ã€ãŸã‚ã®ã‚‚ã®ã§ã™ã€‚</p><p>ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã¯ã¾ã£ã•ã‚‰ãªçŠ¶æ…‹ã‹ã‚‰æ–°ã—ã„æ©Ÿèƒ½ã‚’ä½œã‚‹ã“ã¨ã‚ˆã‚Šã‚‚ã€æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã‚’å‚ç…§ã—ãªãŒã‚‰æ”¹ä¿®ã€ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚’ã™ã‚‹æ©Ÿä¼šã®æ–¹ãŒéå¸¸ã«å¤šããªã‚Šã¾ã™ã€‚æ—¢ã«å­˜åœ¨ã™ã‚‹ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿è§£ãã€Œã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã€ã‚’åŠ¹ç‡çš„ã«é€²ã‚ã‚‹ãŸã‚ã«ã¯ã€ã‚¨ãƒ‡ã‚£ã‚¿ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹æœ€æ–°ã®å®Ÿè£…ã‚³ãƒ¼ãƒ‰ã¯ã‚‚ã¡ã‚ã‚“ã®ã“ã¨ã€åŠ ãˆã¦ã€ãã®ã‚³ãƒ¼ãƒ‰ã«è‡³ã‚‹ã¾ã§ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚„å®Ÿè£…çµŒç·¯ã‚’å«ã‚ãŸå‘¨è¾ºæƒ…å ±ã®åé›†ã‚‚å¿…è¦ã¨ãªã‚Šã¾ã™ã€‚</p><ul><li>æ”¹ä¿®å¯¾è±¡ã®ã‚³ãƒ¼ãƒ‰ã¯ã„ã¤å®Ÿè£…ã•ã‚ŒãŸã‚‚ã®ãªã®ã‹</li><li>ã©ã®ã‚ˆã†ãªæ„å›³ã§ä½œæˆã•ã‚ŒãŸã®ã‹</li><li>ã©ã®ã‚ˆã†ãªæ›´æ–°çµŒç·¯ã‚’è¾¿ã£ã¦ã„ã‚‹ã®ã‹</li></ul><p>ã«ã¤ã„ã¦ã€ã€Œæœ€æ–°ç‰ˆã€ã¨ã—ã¦ç›®ã®å‰ã«ã‚ã‚‹ã‚³ãƒ¼ãƒ‰ã ã‘ã§ãªãã€ãã®çµŒç·¯ã‚’æŠŠæ¡ã—ãªãŒã‚‰ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚’é‡ã­ã‚‹ã“ã¨ãŒã€ç¾å ´ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«ã¯æ±‚ã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚</p><p>ã“ã®ã€Œç·¨é›†å±¥æ­´ã€ã¯Gitã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€Gitã‚³ãƒãƒ³ãƒ‰ã‚„GitHubã€GitLabã®ç”»é¢ã§ç¢ºèªå¯èƒ½ã§ã™ã€‚ãã®ã€Œç·¨é›†å±¥æ­´ã®ç¢ºèªä½œæ¥­ã€ã‚’ã€ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã—ãªãŒã‚‰ã€Œã‚¨ãƒ‡ã‚£ã‚¿å†…ã§å®Œçµã€ã§ããŸã‚‰ã€ã‚¨ãƒ‡ã‚£ã‚¿ã¨ãƒ–ãƒ©ã‚¦ã‚¶ã®åˆ‡ã‚Šæ›¿ãˆãŒä¸è¦ã¨ãªã‚Šã€é–‹ç™ºä½œæ¥­ã«é›†ä¸­ã§ãã¾ã›ã‚“ã‹ï¼Ÿã‚’ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦å®Ÿç¾ã—ãŸã®ãŒã€ä»Šå›ç´¹ä»‹ã™ã‚‹GitLensã§ã™ã€‚</p><h1 id="GitLensã®ç’°å¢ƒè¨­å®š"><a href="#GitLensã®ç’°å¢ƒè¨­å®š" class="headerlink" title="GitLensã®ç’°å¢ƒè¨­å®š"></a>GitLensã®ç’°å¢ƒè¨­å®š</h1><p>å°å…¥åˆæœŸã«å¿…è¦ãªä»¥ä¸‹ã®æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚</p><ul><li>ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•</li><li>ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã®ç¢ºèª</li><li>GitLensè¨­å®šå€¤ã®ç¢ºèªã€å¤‰æ›´</li></ul><h2 id="ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•"><a href="#ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•" class="headerlink" title="ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•"></a>ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•</h2><p>Visual Studioã®Marketplaceã§ã€Œ<a href="https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens">GitLens â€” Git supercharged</a>ã€ã¨ã—ã¦é…ä¿¡ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€VSCodeã®æ‹¡å¼µæ©Ÿèƒ½ã‹ã‚‰è¿½åŠ å¯èƒ½ã§ã™ã€‚</p><p>â–  æ‹¡å¼µæ©Ÿèƒ½ &gt; <code>@id:eamodio.gitlens</code></p><img src="/images/20240415a/ã‚³ãƒ¡ãƒ³ãƒˆ_2024-04-15_080229.png" alt="" width="1200" height="385" loading="lazy"><p>GitLensãŒæä¾›ã™ã‚‹ã»ã¨ã‚“ã©ã®æ©Ÿèƒ½ã¯ã€ç„¡æ–™ã§åˆ©ç”¨å¯èƒ½ã§ã™ã€‚<br>ä¸€éƒ¨ã€ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã§ã®åˆ©ç”¨ãŒåˆ¶é™ã•ã‚Œã¦ã„ã‚‹æ©Ÿèƒ½ã‚„ã€ä½¿ç”¨ã«ã¯ <code>GitKraken account</code> ãŒå¿…è¦ãªæ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚</p><p>â–  Pricing &gt; Features &gt; GitLens &gt; Free, Pro, Teams, Enterprise<br><a href="https://www.gitkraken.com/pricing">https://www.gitkraken.com/pricing</a></p><p>æœ¬ãƒ–ãƒ­ã‚°ã§ã¯ã€ç„¡æ–™ã§åˆ©ç”¨å¯èƒ½ãªç¯„å›²ã®æ©Ÿèƒ½ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚</p><p>VSCodeå†…ã§ã®GitLensæ“ä½œæ–¹æ³•ã€è¨­å®šçŠ¶æ³ãŒåˆ†ã‹ã‚‰ãªããªã£ãŸå ´åˆã«ã¯ã€ä»¥ä¸‹ã®ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚’åˆ©ç”¨ã—ã¦ãã ã•ã„ã€‚</p><ul><li><code>Ctrl + p</code><ul><li><code>&gt;GitLens: Welcome</code></li><li><code>&gt;GitLens: Open Settings</code></li></ul></li></ul><p>ä»¥ä¸‹ã€ãã‚Œãã‚Œã®å†…å®¹ã‚’èª¬æ˜ã—ã¾ã™ã€‚</p><h2 id="Welcome-to-GitLens"><a href="#Welcome-to-GitLens" class="headerlink" title="Welcome to GitLens"></a>Welcome to GitLens</h2><p>â–  <code>Ctrl + p</code> -&gt; <code>&gt;GitLens: Welcome</code></p><p>GitLesnã®åŸºæœ¬æ“ä½œå†…å®¹ã‚„ã€å„ç¨®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã¸ã®ãƒªãƒ³ã‚¯ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><img src="/images/20240415a/ã‚³ãƒ¡ãƒ³ãƒˆ_2024-04-15_081358.png" alt="ã‚³ãƒ¡ãƒ³ãƒˆ_2024-04-15_081358.png" width="1200" height="610" loading="lazy"><p>ã€Œ<a href="https://www.youtube.com/watch?v=UQPb73Zz9qk">Tutorial Video</a>ã€ã¸ã®ãƒªãƒ³ã‚¯ã‚‚ä»˜ä¸ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p>ã“ã®ãƒšãƒ¼ã‚¸ã®å†…å®¹ã‚’ã€å®Ÿéš›ã®ã‚³ãƒ¼ãƒ‰ã¨çªãåˆã‚ã›ãªãŒã‚‰ç¢ºèªã™ã‚Œã°ã€GitLensã®æ©Ÿèƒ½ã¯ä¸€é€šã‚Šç¢ºèªå¯èƒ½ã§ã™ã€‚æœ¬ãƒ–ãƒ­ã‚°ã®å†…å®¹ã¯ã€Welcome to GitLensã‚’å…ƒã«ä½œæˆã—ã¦ãŠã‚Šã¾ã™ã€‚</p><h2 id="GitLens-Settings"><a href="#GitLens-Settings" class="headerlink" title="GitLens Settings"></a>GitLens Settings</h2><p>â–  <code>Ctrl + p</code> -&gt; <code>&gt;Open Settings</code></p><p>GitLenså°‚ç”¨ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºç”»é¢ã§ã™ã€‚ã€Œ<a href="https://help.gitkraken.com/gitlens/gitlens-settings/">GitLens Documentation</a>ã€ã«è¨˜è¼‰ã•ã‚ŒãŸè¨­å®šå€¤ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚„ã€<code>Ctrl + ,</code>ã§é–‹ã‘ã‚‹ãƒ¦ãƒ¼ã‚¶è¨­å®šå€¤ã®å¤‰æ›´ãŒå¯èƒ½ã§ã™ã€‚</p><img src="/images/20240415a/ã‚³ãƒ¡ãƒ³ãƒˆ_2024-04-15_082147.png" alt="ã‚³ãƒ¡ãƒ³ãƒˆ_2024-04-15_082147.png" width="1200" height="989" loading="lazy"><p>æ¬¡ã®ç« ã§èª¬æ˜ã™ã‚‹ã€Œã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®è¡¨ç¤ºã€ã«ã¤ã„ã¦ã€ãã®è¡¨ç¤ºãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚‚å¯èƒ½ã§ã™ã€‚</p><h1 id="GitLensã®æ©Ÿèƒ½ç´¹ä»‹"><a href="#GitLensã®æ©Ÿèƒ½ç´¹ä»‹" class="headerlink" title="GitLensã®æ©Ÿèƒ½ç´¹ä»‹"></a>GitLensã®æ©Ÿèƒ½ç´¹ä»‹</h1><p>GitLensã«ã‚ˆã‚Šã€Œã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ç·¨é›†å±¥æ­´ã‚’ã‚¨ãƒ‡ã‚£ã‚¿å†…ã§ç¢ºèªã™ã‚‹ã€æ–¹æ³•ã«ã¤ã„ã¦ã€åŸºæœ¬çš„ãªæ©Ÿèƒ½ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚</p><p>èª¬æ˜ç”¨ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¨ã—ã¦ã€ä»¥å‰ã«å…¬é–‹ã—ã¾ã—ãŸæŠ€è¡“ãƒ–ãƒ­ã‚°ã€Œ<a href="/articles/20240326a/">Terraformã®å®Ÿè£…ã‚³ãƒ¼ãƒ‰ã‚’ã€å‹•ã‹ã—ãªãŒã‚‰èª­ã‚€</a>ã€ã§cloneã—ãŸã€Œ<a href="https://github.com/hashicorp/terraform">hashicorp&#x2F;terraform</a>ã€ãŒãƒ­ãƒ¼ã‚«ãƒ«ã«æ®‹ã£ã¦ã„ã¾ã—ãŸã®ã§ã€ã“ã¡ã‚‰ã®ã‚³ãƒ¼ãƒ‰ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚</p><p>ä»¥ä¸‹ã€èª¬æ˜å¯¾è±¡ã®æ©Ÿèƒ½ã§ã™ã€‚</p><ul><li>ã€1ã€‘Inline and Status Bar Blame</li><li>ã€2ã€‘Rich Hovers</li><li>ã€3ã€‘File Annotations</li><li>ã€4ã€‘Revision Navigation</li><li>ã€5ã€‘Open File on Remote</li></ul><h2 id="ã€1ã€‘Inline-and-Status-Bar-Blame"><a href="#ã€1ã€‘Inline-and-Status-Bar-Blame" class="headerlink" title="ã€1ã€‘Inline and Status Bar Blame"></a>ã€1ã€‘Inline and Status Bar Blame</h2><p>ã‚³ãƒ¼ãƒ‰ãƒ©ã‚¤ãƒ³ã«ã‚«ãƒ¼ã‚½ãƒ«ã‚’åˆã‚ã›ã‚‹ã¨ã€å³å´ã«ä»¥ä¸‹ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³æƒ…å ±ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚</p><ul><li>å®Ÿè£…è€…ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå</li><li>æ”¹ä¿®æ™‚æœŸ</li><li>ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</li></ul><img src="/images/20240415a/ã‚³ãƒ¡ãƒ³ãƒˆ_2024-04-15_090706.png" alt="" width="1175" height="135" loading="lazy"><p>å®Ÿè£…å¯¾å¿œç®‡æ‰€: <a href="https://github.com/hashicorp/terraform/blob/main/main.go#L64">https://github.com/hashicorp/terraform/blob/main/main.go#L64</a></p><p>ã‚¨ãƒ‡ã‚£ã‚¿ä¸‹éƒ¨ã«ã‚‚åŒæ§˜ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã€ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã•ã‚‰ã«è¿½åŠ æƒ…å ±ã‚’ç¢ºèªã§ãã¾ã™ã€‚</p><img src="/images/20240415a/ã‚³ãƒ¡ãƒ³ãƒˆ_2024-04-15_095554.png" alt="" width="307" height="36" loading="lazy"><p>â†“</p><img src="/images/20240415a/ã‚³ãƒ¡ãƒ³ãƒˆ_2024-04-15_091340.png" alt="" width="861" height="917" loading="lazy"><p>ã‚¨ãƒ‡ã‚£ã‚¿å†…ã®æ“ä½œã¨ã—ã¦ã€è¤‡æ•°ã®æ–¹æ³•ãŒæä¾›ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚</p><h2 id="ã€2ã€‘Rich-Hovers"><a href="#ã€2ã€‘Rich-Hovers" class="headerlink" title="ã€2ã€‘Rich Hovers"></a>ã€2ã€‘Rich Hovers</h2><p>ã€1ã€‘ã§è¡¨ç¤ºã•ã‚ŒãŸã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã«ãƒã‚¦ã‚¹ã‚’ãƒ›ãƒãƒ¼ã™ã‚‹ã¨ã€ã‚³ãƒŸãƒƒãƒˆå†…å®¹ã®è©³ç´°ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p><img src="/images/20240415a/ã‚³ãƒ¡ãƒ³ãƒˆ_2024-04-15_091623.png" alt="" width="1132" height="475" loading="lazy"><p>Changes -&gt; Opens Changesã‚’é¸æŠã™ã‚‹ã¨ã€è©²å½“è¡Œæ•°ã§ã®before &#x2F; afterã‚’è¦–è¦šçš„ã«ç¢ºèªã§ãã¾ã™ã€‚</p><img src="/images/20240415a/ã‚³ãƒ¡ãƒ³ãƒˆ_2024-04-15_091703.png" alt="" width="1200" height="165" loading="lazy"><p>ã‚‚ã¡ã‚ã‚“ã€å·®åˆ†ã®ä½œæˆå…ƒã¨ãªã£ãŸPull Requestï¼ˆ<a href="https://github.com/hashicorp/terraform/pull/29825">PR #29825</a>ï¼‰ã«ã‚‚ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã§é£›ã¹ã¾ã™ã€‚</p><img src="/images/20240415a/ã‚³ãƒ¡ãƒ³ãƒˆ_2024-04-15_092104.png" alt="" width="1200" height="1371" loading="lazy"><p>Pull Requestã§ã®èª¬æ˜å†…å®¹ã‚’ç¢ºèªã™ã‚‹ã¨ã€Œå®Ÿè£…ã‚³ãƒ¼ãƒ‰ã ã‘ã€ã‚’è¦‹ã¦ã„ãŸå ´åˆã¨æ¯”è¼ƒã—ã¦ã€è†¨å¤§ãªæƒ…å ±ãŒå¾—ã‚‰ã‚Œã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚</p><p>PRã«ã¯issueãŒç´ã¥ã‘ã‚‰ã‚Œã¦ã„ã‚‹ã“ã¨ãŒå¤šã„ã®ã§ã€ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¸­ã«ã€Œå®Ÿè£…æ„å›³ãŒåˆ†ã‹ã‚‰ãªã„ã€ã¨å£ã«ã¶ã¤ã‹ã£ãŸã‚‰ã€ã“ã®æ©Ÿèƒ½ã«ã‚ˆã‚Šå¤§æœ¬ã®PRã¸ã‚¸ãƒ£ãƒ³ãƒ—å¯èƒ½ã§ã™ã€‚</p><h2 id="ã€3ã€‘File-Annotations"><a href="#ã€3ã€‘File-Annotations" class="headerlink" title="ã€3ã€‘File Annotations"></a>ã€3ã€‘File Annotations</h2><p>Inline Bar Blameã‚’ãƒ•ã‚¡ã‚¤ãƒ«å†…ã®ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯å˜ä½ã§è¡¨ç¤ºã—ã¾ã™ã€‚</p><p>ã‚¨ãƒ‡ã‚£ã‚¿å³ä¸Šã®ã€ŒFile Annotationsã€ãƒœã‚¿ãƒ³ã‚’é¸æŠã—ã¦ã€ã‚ªãƒ³ã‚ªãƒ•ã®åˆ‡ã‚Šæ›¿ãˆãŒã§ãã¾ã™ã€‚</p><p>â–  ã‚ªãƒ•<br><img src="/images/20240415a/ã‚³ãƒ¡ãƒ³ãƒˆ_2024-04-15_093234.png" alt="" width="240" height="40" loading="lazy"></p><p>â–  ã‚ªãƒ³<br><img src="/images/20240415a/ã‚³ãƒ¡ãƒ³ãƒˆ_2024-04-15_093252.png" alt="" width="235" height="46" loading="lazy"></p><p>ãƒ–ãƒ­ãƒƒã‚¯å˜ä½ã§èª°ãŒã©ã®è¡Œã‚’ç·¨é›†ã—ãŸã®ã‹ã€ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®å†…å®¹ã¨ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’å¯¾å¿œã•ã›ãªãŒã‚‰ç¢ºèªã§ãã¾ã™ã€‚</p><img src="/images/20240415a/ã‚³ãƒ¡ãƒ³ãƒˆ_2024-04-15_093327.png" alt="" width="1200" height="278" loading="lazy"><img src="/images/20240415a/ã‚³ãƒ¡ãƒ³ãƒˆ_2024-04-15_093416.png" alt="" width="1200" height="287" loading="lazy"><h2 id="ã€4ã€‘Revision-Navigation"><a href="#ã€4ã€‘Revision-Navigation" class="headerlink" title="ã€4ã€‘Revision Navigation"></a>ã€4ã€‘Revision Navigation</h2><p><code>Revision</code>æ©Ÿèƒ½ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€ä»¥ä¸‹ã®2ã¤ã‚’ç¢ºèªã§ãã¾ã™ã€‚</p><p>å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«å†…ã§ã€Œå³ã‚¯ãƒªãƒƒã‚¯ã€å¾Œã«Open Changesã‚’é¸æŠã—ã€ä»¥ä¸‹ãã‚Œãã‚Œã‚’é¸æŠã—ã¦ä¸‹ã•ã„ã€‚</p><ul><li>Open Line Changes with Previous Revison<ul><li>ã€ŒæŒ‡å®šã—ãŸè¡Œã€ã®å·®åˆ†ã‚’è¡¨ç¤º</li></ul></li><li>Open Changes with Previous Revision<ul><li>ã€ŒæŒ‡å®šã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã€ã®å·®åˆ†ã‚’è¡¨ç¤º</li></ul></li></ul><img src="/images/20240415a/ã‚³ãƒ¡ãƒ³ãƒˆ_2024-04-15_100132.png" alt="" width="1200" height="396" loading="lazy"><p><code>func main() &#123;</code> ï¼ˆæŒ‡å®šã—ãŸè¡Œï¼‰ã®å·®åˆ†ã‚’è¡¨ç¤ºã™ã‚‹ã¨</p><img src="/images/20240415a/ã‚³ãƒ¡ãƒ³ãƒˆ_2024-04-15_095101.png" alt="" width="1200" height="825" loading="lazy"><p><code>main.go</code>ï¼ˆæŒ‡å®šã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ï¼‰ã®å·®åˆ†ã‚’è¡¨ç¤ºã™ã‚‹ã¨</p><img src="/images/20240415a/ã‚³ãƒ¡ãƒ³ãƒˆ_2024-04-15_095031.png" alt="" width="1200" height="819" loading="lazy"><p>å·®åˆ†ã¯è¤‡æ•°å›é¡ã‚Œã‚‹ãŸã‚ã€å¯¾è±¡ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚„è¡Œæ•°ãŒã€Œã©ã®ã‚ˆã†ãªçµŒç·¯ã§æ›´æ–°ã•ã‚Œç¶šã‘ã€ç¾åœ¨ã«è‡³ã‚‹ã®ã‹ã€ã‚’è¦–è¦šçš„ã«ç¢ºèªã§ãã¾ã™ã€‚</p><h2 id="ã€5ã€‘Open-File-on-Remote"><a href="#ã€5ã€‘Open-File-on-Remote" class="headerlink" title="ã€5ã€‘Open File on Remote"></a>ã€5ã€‘Open File on Remote</h2><p>VSCodeã§é–‹ã„ã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã«å¯¾ã—ã¦ã€å¯¾å¿œã™ã‚‹ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹æ©Ÿèƒ½ã§ã™ã€‚</p><ul><li>è©²å½“è¡Œæ•°ã‚’ã€Œå³ã‚¯ãƒªãƒƒã‚¯ã€<ul><li>Open on Remote (Web)<ul><li>Open File on Remote</li></ul></li></ul></li></ul><img src="/images/20240415a/ã‚³ãƒ¡ãƒ³ãƒˆ_2024-04-15_100953.png" alt="" width="915" height="287" loading="lazy"><p>ä¸Šè¨˜æ“ä½œã«ã‚ˆã‚Šã€ã‚¨ãƒ‡ã‚£ã‚¿ã«å¯¾å¿œã™ã‚‹ãƒšãƒ¼ã‚¸ï¼ˆ<a href="https://github.com/hashicorp/terraform/blob/main/main.go#L63">https://github.com/hashicorp/terraform/blob/main/main.go#L63</a>ï¼‰ãŒãƒ–ãƒ©ã‚¦ã‚¶ã§è¡¨ç¤ºã•ã‚Œã€ãƒªãƒ³ã‚¯ãŒå–å¾—ã§ãã¾ã™ã€‚</p><img src="/images/20240415a/ã‚³ãƒ¡ãƒ³ãƒˆ_2024-04-15_101215.png" alt="" width="938" height="92" loading="lazy"><p>ã‚¨ãƒ‡ã‚£ã‚¿ã§ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèªã—ãªãŒã‚‰ã€ã‹ã¤ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒªãƒ³ã‚¯ã‚’å…±æœ‰ã—ãŸã„å ´åˆã«ã€ã“ã®æ©Ÿèƒ½ã¯éå¸¸ã«ä¾¿åˆ©ã§ç§ã¯å¤šç”¨ã—ã¦ã„ã¾ã™ã€‚</p><h1 id="ãŠã‚ã‚Šã«"><a href="#ãŠã‚ã‚Šã«" class="headerlink" title="ãŠã‚ã‚Šã«"></a>ãŠã‚ã‚Šã«</h1><p>æœ¬ãƒ–ãƒ­ã‚°ã§ã¯ã€VSCodeã®æ‹¡å¼µæ©Ÿèƒ½ã§ã‚ã‚‹GitLensã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã—ãŸã€‚</p><p>ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã®ç™ºå±•ã«åˆã‚ã›ã¦ã€Œã‚¨ãƒ‡ã‚£ã‚¿ãŒæä¾›ã™ã‚‹æ©Ÿèƒ½ã€ã‚‚é€²åŒ–ã—ã¦ã„ã¾ã™ã®ã§ã€ä¸€åº¦ã€Œä¾¿åˆ©ãªé–‹ç™ºç’°å¢ƒã€ã‚’æ§‹ç¯‰æ¸ˆã¿ã ã¨ã—ã¦ã‚‚ã€å®šæœŸçš„ãªè¦‹ç›´ã—ã€ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãŒå¿…è¦ã ã¨å®Ÿæ„Ÿã—ã¾ã—ãŸã€‚</p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Programming/">Programming</category>
      
      
      <category domain="https://future-architect.github.io/tags/CodeReading/">CodeReading</category>
      
      <category domain="https://future-architect.github.io/tags/Git/">Git</category>
      
      <category domain="https://future-architect.github.io/tags/VSCode/">VSCode</category>
      
      <category domain="https://future-architect.github.io/tags/GitLens/">GitLens</category>
      
      
      <comments>https://future-architect.github.io/articles/20240415a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Systemdã«ãŠã‘ã‚‹service unitã®èµ·å‹•ãƒ•ãƒ­ãƒ¼å…¥é–€</title>
      <link>https://future-architect.github.io/articles/20240412a/</link>
      <guid>https://future-architect.github.io/articles/20240412a/</guid>
      <pubDate>Thu, 11 Apr 2024 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;img src=&quot;/images/20240412a/IMG_8598.jpg&quot; alt=&quot;&quot; width=&quot;1200&quot; height=&quot;831&quot; loading=&quot;lazy&quot;&gt;

&lt;p&gt;&lt;a</description>
          
        
      
      
      
      <content:encoded><![CDATA[<img src="/images/20240412a/IMG_8598.jpg" alt="" width="1200" height="831" loading="lazy"><p><a href="/articles/20240408a/">æ˜¥ã®å…¥é–€é€£è¼‰2024</a> ã®4æœ¬ç›®ã§ã™ã€‚</p><h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>ã“ã‚“ã«ã¡ã¯ã€æœ€è¿‘å¯’æš–å·®ãŒæ¿€ã—ãã¦ä½“èª¿å´©ã—ãŒã¡ãªTIGã®æ£®ã§ã™ã€‚</p><p>å…¥é–€å‘ã‘è¨˜äº‹ã¨ã—ã¦Linuxã® <code>systemd</code> ã«ãŠã‘ã‚‹ <code>service unit</code> ã®èµ·å‹•ã¨åœæ­¢ã®ãƒ•ãƒ­ãƒ¼ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚</p><h2 id="service-unit-ã¨ã¯"><a href="#service-unit-ã¨ã¯" class="headerlink" title="service unit ã¨ã¯"></a>service unit ã¨ã¯</h2><p><code>service unit</code> ã¨ã¯ <code>systemd</code> ã®è¨­å®šå˜ä½ã®ä¸€ã¤ã§ã€Linuxã«ãŠã‘ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã®æŒ¯ã‚‹èˆã„ã‚’å®šç¾©ã™ã‚‹è¨­å®šã‚’ã¾ã¨ã‚ãŸã‚‚ã®ã§ã™ã€‚ä¸»ã«ãƒ‡ãƒ¼ãƒ¢ãƒ³ã‚„ãã®ä»–ã®ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ã‚»ã‚¹ã¨ã„ã£ãŸã€èµ·å‹•ã‚„åœæ­¢ã‚’å«ã‚€ç®¡ç†ã‚’è¡Œã„ã¾ã™ã€‚</p><h2 id="ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•ã®å¤§ã¾ã‹ãªæµã‚Œ"><a href="#ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•ã®å¤§ã¾ã‹ãªæµã‚Œ" class="headerlink" title="ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•ã®å¤§ã¾ã‹ãªæµã‚Œ"></a>ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•ã®å¤§ã¾ã‹ãªæµã‚Œ</h2><p>ã‚µãƒ¼ãƒ“ã‚¹ã®èµ·å‹•ã®ãŠãŠã¾ã‹ãªæµã‚Œã‚’èª¬æ˜ã—ã¾ã™ã€‚</p><p>ã“ã“ã§ã¯è©±ã‚’ç°¡å˜ã«ã™ã‚‹ãŸã‚ã€<code>Type</code>ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–(å¾Œè¿°)ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® <code>simple</code> ã«æŒ‡å®šã•ã‚Œã¦ã„ã‚‹ã¨ã—ã¾ã™ã€‚</p><h3 id="ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•ã®æµã‚Œ"><a href="#ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•ã®æµã‚Œ" class="headerlink" title="ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•ã®æµã‚Œ"></a>ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•ã®æµã‚Œ</h3><ol><li><code>systemctl start [ã‚µãƒ¼ãƒ“ã‚¹å].service</code>ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€<code>systemd</code>ã¯æŒ‡å®šã•ã‚ŒãŸ<code>service unit</code>ã‚’èµ·å‹•ã™ã‚‹</li><li><code>systemd</code>ã¯<code>service unit</code>ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«(<code>.service</code>)ã‚’ç¢ºèªã—ã€ã‚µãƒ¼ãƒ“ã‚¹ãŒæœ‰åŠ¹ã‹ã©ã†ã‹ãªã©ã‚’èª¿ã¹ã‚‹</li><li><code>systemd</code>ãŒ<code>fork()</code>ã‚’å®Ÿè¡Œã—ã€æˆåŠŸã—ãŸæ™‚ç‚¹ã§<code>service unit</code>ãŒ<code>active</code>ã«ãªã‚‹ã€‚ã“ã®æ–°ã—ãç”Ÿæˆã•ã‚ŒãŸãƒ—ãƒ­ã‚»ã‚¹ã¯ã‚µãƒ¼ãƒ“ã‚¹ã‚’èµ·å‹•ã™ã‚‹ãŸã‚ã®ãƒ—ãƒ­ã‚»ã‚¹ã¨ãªã‚‹</li><li>ã“ã®æ–°ã—ã„ãƒ—ãƒ­ã‚»ã‚¹ãŒå¿…è¦ãªç’°å¢ƒè¨­å®šï¼ˆç’°å¢ƒå¤‰æ•°ã®è¨­å®šãªã©ï¼‰ã‚’è¡Œã£ãŸå¾Œã€<code>ExecStart</code>ã§æŒ‡å®šã•ã‚ŒãŸãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’<code>execve()</code>ã§å®Ÿè¡Œã™ã‚‹</li><li>ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒå®Ÿè¡Œã•ã‚Œã€ã‚µãƒ¼ãƒ“ã‚¹ãŒé–‹å§‹ã™ã‚‹</li></ol><p>ä»¥ä¸ŠãŒã–ã£ã¨ã—ãŸæµã‚Œã§ã™ã€‚ã‚‚ã¡ã‚ã‚“Linuxã«ãŠã‘ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ç®¡ç†å…¨ã¦ã‚’ç¶²ç¾…ã—ã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚åˆæœŸåŒ–ã ã‘ã‚’å®Ÿæ–½ã™ã‚‹<code>iptables</code>ãªã©ã®ä¾‹å¤–ã‚‚ã‚ã‚Šã¾ã™ã€‚</p><h2 id="ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•ãƒ»çµ‚äº†æ™‚ã®å‰å¾Œã®å‡¦ç†ã«é–¢ã—ã¦"><a href="#ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•ãƒ»çµ‚äº†æ™‚ã®å‰å¾Œã®å‡¦ç†ã«é–¢ã—ã¦" class="headerlink" title="ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•ãƒ»çµ‚äº†æ™‚ã®å‰å¾Œã®å‡¦ç†ã«é–¢ã—ã¦"></a>ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•ãƒ»çµ‚äº†æ™‚ã®å‰å¾Œã®å‡¦ç†ã«é–¢ã—ã¦</h2><p>ã‚µãƒ¼ãƒ“ã‚¹å®Ÿè¡Œã®ä¸»è¦ãªã‚³ãƒãƒ³ãƒ‰ã®å‰ã«ç’°å¢ƒå¤‰æ•°ã®è¨­å®šã‚„é€šä¿¡è·¯ã®æº–å‚™ã‚„åˆæœŸåŒ–ãªã©ã‚’å®Ÿæ–½ã™ã‚‹å ´åˆã€<code>ExecStart</code>ã®å‰å‡¦ç†ã¨ã—ã¦å®Ÿè¡Œã•ã‚Œã‚‹<code>ExecStartPre</code>ã‚„ã€<code>active</code>ã¨ãªã£ãŸæ™‚ç‚¹ã§å®Ÿè¡Œã•ã‚Œã‚‹<code>ExecStartPost</code>ã€ã¾ãŸçµ‚äº†æ™‚ã«å®Ÿè¡Œã•ã‚Œã‚‹<code>ExecStopPost</code>ãªã©ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p>ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•ãƒ»çµ‚äº†ã«é–¢é€£ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã¯ä¸‹è¨˜ã§ã™ã€‚</p><div class="scroll"><table><thead><tr><th>åç§°</th><th>æ¦‚è¦</th></tr></thead><tbody><tr><td><code>ExecStartPre</code></td><td>ä¾å­˜é–¢ä¿‚ã‚’æº€ãŸã™ãŸã‚ã®ãƒªã‚½ãƒ¼ã‚¹ã®ç¢ºä¿ã€å‰æ®µå‡¦ç†ã‚’å®Ÿæ–½ã™ã‚‹</td></tr><tr><td><code>ExecStart</code></td><td>ç’°å¢ƒå¤‰æ•°ã‚’èª­ã¿è¾¼ã¿ã€ã‚µãƒ¼ãƒ“ã‚¹å‡¦ç†ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã™ã‚‹</td></tr><tr><td><code>ExecStartPost</code></td><td><code>active</code>ã«ãªã‚‹å‰ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å®Ÿæ–½ã™ã‚‹å¾Œå‡¦ç†ã‚’å®Ÿæ–½ã™ã‚‹</td></tr><tr><td><code>ExecStop</code></td><td>ã‚µãƒ¼ãƒ“ã‚¹åœæ­¢ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿæ–½ã™ã‚‹</td></tr><tr><td><code>ExecStopPost</code></td><td>ã‚µãƒ¼ãƒ“ã‚¹çµ‚äº†å¾Œã®å¾Œå‡¦ç†ã‚’å®Ÿæ–½ã™ã‚‹ã€‚<code>inactive</code>ã«ãªã‚‹å‰ã®å®Ÿæ–½ã™ã‚‹</td></tr><tr><td><code>ExecReload</code></td><td>ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒªãƒ­ãƒ¼ãƒ‰ã‚’å®Ÿæ–½ã™ã‚‹</td></tr></tbody></table></div><h2 id="ã‚µãƒ³ãƒ—ãƒ«"><a href="#ã‚µãƒ³ãƒ—ãƒ«" class="headerlink" title="ã‚µãƒ³ãƒ—ãƒ«"></a>ã‚µãƒ³ãƒ—ãƒ«</h2><p>ä¾‹ã¨ã—ã¦ã€<code>ExecStartPre</code>ã§å®Ÿéš›ã«ã©ã®ã‚ˆã†ãªå‰å‡¦ç†ãŒå®Ÿæ–½ã§ãã‚‹ã‹è©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><p>EC2ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰è‡ªèº«ã®ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å–å¾—ã—ã€ãã‚Œã‚’ã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰å‘¼ã³å‡ºã—ã¦å‡ºåŠ›ã•ã›ã¾ã™ã€‚</p><h3 id="æ‰‹é †"><a href="#æ‰‹é †" class="headerlink" title="æ‰‹é †"></a>æ‰‹é †</h3><ol><li>ç’°å¢ƒå¤‰æ•°ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«<code>/etc/environment</code>ã«ä¸‹è¨˜ã®è¡Œã‚’è¿½åŠ ã—ã¦ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®š <figure class="highlight bash"><figcaption><span>/etc/environment</span></figcaption><table><tr><td class="code"><pre><span class="line">Region=default</span><br></pre></td></tr></table></figure></li><li><code>ExecStartPre</code>ã§å©ã‹ã‚Œã‚‹äº‹ã«ã‚ˆã£ã¦è‡ªåˆ†ã®ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å–å¾—ã™ã‚‹ã‚·ã‚§ãƒ«<code>/etc/setEnvConf.sh</code>ã‚’ä½œæˆ <figure class="highlight bash"><figcaption><span>/etc/setEnvConf.sh</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">REGION=$(curl -s http://169.254.169.254/latest/meta-data/placement/availability-zone | sed -e <span class="string">&#x27;s/.$//&#x27;</span>)</span><br><span class="line">sudo sed -i <span class="string">&quot;/^Region=/c\Region=<span class="variable">$REGION</span>&quot;</span> /etc/environment</span><br></pre></td></tr></table></figure></li><li><code>/etc/systemd/system</code>é…ä¸‹ã«<code>test.service</code>ã‚’ä½œæˆ <figure class="highlight ini"><figcaption><span>test.service</span></figcaption><table><tr><td class="code"><pre><span class="line"> <span class="section">[Unit]</span></span><br><span class="line"><span class="attr">Description</span>=Test Service</span><br><span class="line"><span class="attr">After</span>=network.target</span><br><span class="line"></span><br><span class="line"><span class="section">[Service]</span></span><br><span class="line"><span class="attr">EnvironmentFile</span>=/etc/environment</span><br><span class="line"><span class="attr">ExecStartPre</span>=/bin/bash /etc/setEnvConf.sh</span><br><span class="line"><span class="attr">ExecStart</span>=/bin/bash -c <span class="string">&#x27;echo &quot;The region of this instance is $&#123;Region&#125;&quot; &gt; /tmp/output.txt&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="section">[Install]</span></span><br><span class="line"><span class="attr">WantedBy</span>=multi-user.target</span><br></pre></td></tr></table></figure></li><li>ã‚µãƒ¼ãƒ“ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§èµ·å‹•ã€€ <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl start <span class="built_in">test</span></span><br></pre></td></tr></table></figure></li></ol><p>ä»¥ä¸ŠãŒæ‰‹é †ã«ãªã‚Šã¾ã™ã€‚<br>ã‚µãƒ¼ãƒ“ã‚¹ãŒç„¡äº‹èµ·å‹•ã—ãŸã‚‰<code>/tmp/output.txt</code>ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><figure class="highlight txt"><figcaption><span>/tmp/output.txt</span></figcaption><table><tr><td class="code"><pre><span class="line">The region of this instance is ap-northeast-1</span><br></pre></td></tr></table></figure><p>ã¡ã‚ƒã‚“ã¨è‡ªèº«ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ãŒå–å¾—ã§ãã¦ã„ã¾ã™ã€‚</p><p>ç½å¯¾ç’°å¢ƒãªã©ã§AMIã‹ã‚‰ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’èµ·å‹•ã™ã‚‹æ™‚ã«è‡ªèº«ã®ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å–å¾—ã—ã¦ã€å‡¦ç†ã«ç¹‹ã’ã‚‹éš›ãªã©ã«å¿œç”¨ã§ãã‚‹ã§ã—ã‚‡ã†ã€‚</p><h2 id="æ³¨æ„ç‚¹"><a href="#æ³¨æ„ç‚¹" class="headerlink" title="æ³¨æ„ç‚¹"></a>æ³¨æ„ç‚¹</h2><p>ä»Šå›ã¯è§¦ã‚Œã¾ã›ã‚“ã§ã—ãŸãŒ<code>unit</code> ãŒ<code>active</code>ã‚„<code>inactive</code>ã«ãªã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¯ <code>Type</code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã®æŒ‡å®šã«ã‚ˆã£ã¦å¾®å¦™ã«å¤‰åŒ–ã—ã¾ã™ã€‚</p><p>ã“ã®è¨˜äº‹ã§ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®<code>simple</code>ã‚’ç”¨ã„ã¦ã„ã¾ã™ãŒã€ã“ã‚Œã¯ä»£è¡¨ãƒ—ãƒ­ã‚»ã‚¹ãŒ<code>fork()</code>ã®å®Ÿè¡Œã«æˆåŠŸã—ãŸã¨ãã«<code>active</code>ã«ãªã‚Šã¾ã™ã€‚ã¤ã¾ã‚Šã€<code>ExecStart</code>ãŒå¤±æ•—ã—ã‚ˆã†ãŒãã®å‰æ®µéšã®ç’°å¢ƒå¤‰æ•°ã®è¨­å®šã‚„<code>ExecStartPre</code>ãŒã§ãã¦ã„ã‚Œã°<code>active</code>ã«ã¯ãªã£ã¦ãã‚Œã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚</p><p>ä¸€æ–¹ã§æ˜ç¤ºçš„ã«<code>Type</code>ã‚’<code>exec</code>ã«æŒ‡å®šã—ãŸå ´åˆã€<code>ExecStart</code>ã§æŒ‡å®šã—ãŸãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‹ã‚‰<code>execve()</code>ã®å®Ÿè¡ŒãŒæˆåŠŸã—ãŸã¨ãã«<code>active</code>ã«ãªã‚Šã¾ã™ã€‚ä»–ã«ã‚‚æ§˜ã€…ãª Type ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ãŒã‚ã‚Šã¾ã™ãŒã€<code>active</code> ã«ãªã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒã„ã¤ãªã®ã‹ã¯ã—ã£ã‹ã‚Šæ„è­˜ã—ã¦å‰å‡¦ç½®ã‚„å¾Œå‡¦ç†ã‚’é‹ç”¨ã—ã¦ã„ãã“ã¨ãŒé‹ç”¨ä¸Šæ±‚ã‚ã‚‰ã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚</p><h2 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h2><p>ã‚·ã‚¹ãƒ†ãƒ ã‚’å®‰å®šã•ã›ã‚‹ä¸Šã§é‡è¦ãªã®ã¯ã€ã‚µãƒ¼ãƒ“ã‚¹ãŒ<code>active</code>ã«ãªã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚„ãã®å‰å¾Œã®å‡¦ç†ã®æµã‚Œã‚’æ­£ç¢ºã«ç†è§£ã™ã‚‹ã“ã¨ã§ã™ã€‚</p><p>ã¾ãŸã€<code>[Unit]</code>ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«<code>After</code>ã‚’è¨˜è¿°ã—ã€ç•°ãªã‚‹ã‚µãƒ¼ãƒ“ã‚¹é–“ã§èµ·å‹•é †åºã‚’åˆ¶å¾¡ã™ã‚‹ã“ã¨ã‚‚ä¸€èˆ¬çš„ã§ã™ã€‚ã—ãŸãŒã£ã¦ã€ã“ã‚Œã‚‰ã®é †åºã‚’ã‚ˆã‚Šä¸€å±¤æ„è­˜ã—ãŸé‹ç”¨ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚</p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Infrastructure/">Infrastructure</category>
      
      
      <category domain="https://future-architect.github.io/tags/RHEL/">RHEL</category>
      
      <category domain="https://future-architect.github.io/tags/Linux/">Linux</category>
      
      <category domain="https://future-architect.github.io/tags/Systemd/">Systemd</category>
      
      
      <comments>https://future-architect.github.io/articles/20240412a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>å…¨æ–‡æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³Meilisearchã‚’è©¦ã™</title>
      <link>https://future-architect.github.io/articles/20240411a/</link>
      <guid>https://future-architect.github.io/articles/20240411a/</guid>
      <pubDate>Wed, 10 Apr 2024 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;img src=&quot;/images/20240411a/meilisearch-logo-light.png&quot; alt=&quot;&quot; width=&quot;495&quot; height=&quot;74&quot; loading=&quot;lazy&quot;&gt;

&lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot;</description>
          
        
      
      
      
      <content:encoded><![CDATA[<img src="/images/20240411a/meilisearch-logo-light.png" alt="" width="495" height="74" loading="lazy"><h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>ã“ã‚“ã«ã¡ã¯ã€TIGã®å²¸æœ¬å“ä¹Ÿã§ã™ã€‚ <a href="/articles/20240408a/">æ˜¥ã®å…¥é–€é€£è¼‰2024</a> ã®3ç•ªç›®ã§ã™ã€‚</p><p>ã‚ã‚‹é™çš„ã‚µã‚¤ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ã§ç”Ÿæˆã•ã‚ŒãŸè†¨å¤§ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ¤œç´¢ã«ãŠã„ã¦ã€å…¨æ–‡æ¤œç´¢æ©Ÿèƒ½ã¯ã‚ã‚‹ã‚‚ã®ã®ä»¥ä¸‹ã®èª²é¡Œã‚’æ„Ÿã˜ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã—ãŸã€‚</p><ul><li>æ¢ã—ãŸã„ã‚‚ã®ãŒãƒ’ãƒƒãƒˆã—ãªã„ã“ã¨ãŒã‚ã‚‹</li><li>ã©ã“ãŒãƒ’ãƒƒãƒˆã—ã¦ã„ã‚‹ã®ã‹è¬ãªã‚‚ã®ãŒæ¤œç´¢çµæœã«å«ã¾ã‚Œã‚‹ã“ã¨ãŒã‚ã‚‹</li><li>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã§å‹•ããŸã‚ã€ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«æ•°åMBã¨å¤§ãã„ã“ã¨ã‚‚å¤šã„ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ãŸã‚ã€ãƒšãƒ¼ã‚¸ã®èª­ã¿è¾¼ã¿å®Œäº†ãŒé…ã„åŸå› ã«ãªã£ã¦ã„ã‚‹</li></ul><p>æ¤œç´¢ã«ãƒ’ãƒƒãƒˆã—ãªã„å ´åˆã¯ã€æ¬²ã—ã„æƒ…å ±ãŒã‚ã‚Šãã†ãªãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ³ã‚¯ã‹ã‚‰è¾¿ã£ã¦å€‹åˆ¥ã«æ¢ã™ã—ã‹ãªã„ã®ã§ã™ã€‚ã—ã‹ã—ã“ã‚Œã¯æ‰‹é–“ã§ã™ã€‚</p><p>ã“ã®ã‚ˆã†ãªèª²é¡Œã‚’è§£æ±ºã™ã¹ãæ–°ãŸãªå…¨æ–‡æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã‚’æ¢ã™ä¸­ã§Meilisearchã¨ã„ã†è£½å“ã‚’è¦‹ã¤ã‘ã¾ã—ãŸã€‚Meilisearchã¯æ—¥æœ¬èªã®æ¤œç´¢ã«ãŠã„ã¦ã‚‚è‰¯ã•ãã†ã§ã‹ã¤æ‰‹è»½ã«è©¦ã›ãŸã®ã§ã€è©¦ã—ãŸå†…å®¹ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚</p><h1 id="Meilisearchã¨ã¯"><a href="#Meilisearchã¨ã¯" class="headerlink" title="Meilisearchã¨ã¯"></a>Meilisearchã¨ã¯</h1><p>å…¬å¼ã‚µã‚¤ãƒˆã® <a href="https://www.meilisearch.com/">ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸</a> ã‚„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã® <a href="https://www.meilisearch.com/docs/learn/what_is_meilisearch/overview">æ¦‚èª¬ãƒšãƒ¼ã‚¸</a> ã«ã‚ˆã‚‹ã¨ã€æ¤œç´¢ã®å¿œç­”ãŒæ—©ãã€ã™ãã«ä½¿ã„å§‹ã‚ã‚‰ã‚Œã‚‹ã€ã¨ã„ã†ã®ãŒå¤§ããªç‰¹å¾´ã®ã‚ˆã†ã§ã™ã€‚æ©Ÿèƒ½ã¯RESTful APIã§æä¾›ã•ã‚Œã€Blogã‚„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚µã‚¤ãƒˆã®æ¤œç´¢ã®ã»ã‹ã€ECã‚µã‚¤ãƒˆã«ãŠã‘ã‚‹æ¤œç´¢ã¸ã®çµ„ã¿è¾¼ã¿ã¨ã„ã£ãŸãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ãŒã‚ã‚‹ãã†ã§ã™ã€‚</p><p><a href="https://www.meilisearch.com/docs/learn/what_is_meilisearch/overview#features">å¤šãã®ç‰¹å¾´ãŒæŒ™ã’ã‚‰ã‚Œã¦ã„ã¾ã™</a> ãŒã€ä¸­ã§ã‚‚ä»¥ä¸‹ã®ã‚ˆã†ã«æ—¥æœ¬èªã®ã‚µãƒãƒ¼ãƒˆãŒæ˜ç¤ºã•ã‚Œã¦ã„ã‚‹ã®ã¯å®‰å¿ƒæ„ŸãŒã‚ã‚Šã¾ã™ã€‚</p><blockquote><p>Comprehensive language support: Optimized support for Chinese, Japanese, Hebrew, and languages using the Latin alphabet<br>åŒ…æ‹¬çš„ãªè¨€èªã‚µãƒãƒ¼ãƒˆ: ä¸­å›½èªã€æ—¥æœ¬èªã€ãƒ˜ãƒ–ãƒ©ã‚¤èªã€ãŠã‚ˆã³ãƒ©ãƒ†ãƒ³æ–‡å­—ã‚’ä½¿ç”¨ã™ã‚‹è¨€èªã®æœ€é©åŒ–ã•ã‚ŒãŸã‚µãƒãƒ¼ãƒˆ(by Googleç¿»è¨³)</p></blockquote><p>æ—¥æœ¬ã§æ´»å‹•ã•ã‚Œã¦ã„ã‚‹ <a href="https://qiita.com/mosuka/items/fbda479b25a7ccd7c350">@mosuka (Minoru OSUKA) ã•ã‚“ã‚’ã¯ã˜ã‚ã¨ã—ãŸOSSã‚³ãƒŸãƒƒã‚¿ãƒ¼ã®çš†ã•ã¾</a> ã«ã‚ˆã‚Šæ—¥æœ¬èªå‡¦ç†ãŒæ”¹å–„ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚</p><h1 id="è©¦ç”¨ç’°å¢ƒ"><a href="#è©¦ç”¨ç’°å¢ƒ" class="headerlink" title="è©¦ç”¨ç’°å¢ƒ"></a>è©¦ç”¨ç’°å¢ƒ</h1><p>å½“è¨˜äº‹ã¯ä»¥ä¸‹ã®ç’°å¢ƒã§å®Ÿæ–½ã—ã¾ã—ãŸã€‚</p><ul><li>EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹: t3.small</li><li>Meilisearchãƒãƒ¼ã‚¸ãƒ§ãƒ³: v1.7.1 (prototype-japanese-10)</li></ul><h1 id="ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—"><a href="#ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—" class="headerlink" title="ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—"></a>ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—</h1><p>å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã® <a href="https://www.meilisearch.com/docs/learn/getting_started/installation">Installationãƒšãƒ¼ã‚¸</a> ã§ã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ãŒè¤‡æ•°æç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã“ã§ã¯ã€æ—¥æœ¬èªå‘ã‘ã®å…¬å¼ãƒ“ãƒ«ãƒ‰ãƒã‚¤ãƒŠãƒªãŒç°¡å˜ã«ä½¿ãˆã‚‹Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã®æ–¹æ³•ã§æ§‹ç¯‰ã—ã¾ã™ã€‚</p><p>æ—¥æœ¬èªå‘ã‘ã®ãƒ“ãƒ«ãƒ‰ãƒã‚¤ãƒŠãƒªã‚’å«ã‚€Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã¯Docker Hubã® <a href="https://hub.docker.com/r/getmeili/meilisearch/tags?page=1&name=japanese">ã“ã¡ã‚‰</a> ã§é…å¸ƒã•ã‚Œã¦ã„ã¾ã™ã€‚Meilisearchã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚¿ã‚°ã®å¯¾å¿œé–¢ä¿‚ã¯ <a href="https://github.com/meilisearch/meilisearch/pull/3882">ã“ã¡ã‚‰ã®Pull request</a> ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p>ä»Šå›ã¯ã€ç¾æ™‚ç‚¹ã®æœ€æ–°ç‰ˆã§ã‚ã‚‹v1.7.1ã«å¯¾å¿œã—ãŸDockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½¿ã£ã¦ã¿ã¾ã™ã€‚å…¬å¼ã®æ‰‹é †é€šã‚Šã€pullã—ã¦</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker pull getmeili/meilisearch:prototype-japanese-10</span><br></pre></td></tr></table></figure><p><code>development</code> ãƒ¢ãƒ¼ãƒ‰ã§ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã—ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker run -it --<span class="built_in">rm</span> \</span><br><span class="line">    -p 7700:7700 \</span><br><span class="line">    -e MEILI_ENV=<span class="string">&#x27;development&#x27;</span> \</span><br><span class="line">    -e MEILI_MASTER_KEY=<span class="string">&#x27;aSampleMasterKey&#x27;</span> \</span><br><span class="line">    -v $(<span class="built_in">pwd</span>)/meili_data:/meili_data \</span><br><span class="line">    getmeili/meilisearch:prototype-japanese-10</span><br></pre></td></tr></table></figure><p>ä¸Šè¨˜ã§æŒ‡å®šã—ã¦ã„ã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®å†…ã€Meilisearchç‰¹æœ‰ã®ã‚‚ã®ã¯æ¬¡ã®ç›®çš„ã§æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚</p><ul><li><code>-e MEILI_ENV=&#39;development&#39;</code>: <code>development</code> ãƒ¢ãƒ¼ãƒ‰ã«ã—ã¾ã™ã€‚Meilisearchã«ã¯ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ç¢ºèªãªã©ã®ãŸã‚ã« <a href="https://www.meilisearch.com/docs/learn/getting_started/search_preview">search preview</a> ã¨ã„ã†ç°¡æ˜“çš„ãªGUIãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãŒå‚™ã‚ã£ã¦ã„ã¾ã™ã€‚ä»¥é™ã®æ‰‹é †ã§ã‚‚ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ç¢ºèªã«search previewã‚’ä½¿ã„ã¾ã™ãŒã€ <a href="https://www.meilisearch.com/docs/learn/getting_started/search_preview#:~:text=For%20security%20reasons%2C%20the%20search%20preview%20is%20only%20available%20in%20development%20mode.">ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®ç†ç”±ã§</a> <code>development</code> ãƒ¢ãƒ¼ãƒ‰ã§ã—ã‹ä½¿ãˆã¾ã›ã‚“ã€‚</li><li><code>-e MEILI_MASTER_KEY=&#39;aSampleMasterKey&#39;</code>: <a href="https://www.meilisearch.com/docs/learn/configuration/instance_options#master-key">Master key</a> ã‚’æŒ‡å®šã—ã¾ã™ã€‚master keyã‚’æŒ‡å®šã—ãªã„å ´åˆã§ã‚‚ <code>development</code> ãƒ¢ãƒ¼ãƒ‰ã§ã¯è‡ªå‹•çš„ã«ã‚­ãƒ¼ãŒç”Ÿæˆã•ã‚Œã¦èµ·å‹•ã§ãã¾ã™ãŒã€ã‚­ãƒ¼ã‚’å›ºå®šã™ã‚‹ãŸã‚ã«æŒ‡å®šã—ã¾ã™ã€‚master keyã¯ <a href="https://www.meilisearch.com/docs/learn/configuration/instance_options#master-key:~:text=Expected%20value%3A%20a%20UTF%2D8%20string%20of%20at%20least%2016%20bytes">16ãƒã‚¤ãƒˆä»¥ä¸Šã®é•·ã•ãŒå¿…è¦</a> ã§ã™ã€‚</li><li><code>-v $(pwd)/meili_data:/meili_data</code>: <a href="https://www.meilisearch.com/docs/learn/cookbooks/docker#managing-data">Dockerã‚³ãƒ³ãƒ†ãƒŠã®ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä½œã‚‰ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿</a> ã‚’æ°¸ç¶šåŒ–ã™ã‚‹ãŸã‚ã«æŒ‡å®šã—ã¾ã™ã€‚</li></ul><p>ã“ã‚Œã§MeilisearchãŒèµ·å‹•ã—search previewã‚‚ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ãŸã‚ã€ãƒ–ãƒ©ã‚¦ã‚¶ã§ <code>http://&lt;Dockerã®ãƒ›ã‚¹ãƒˆ&gt;:7700</code> ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦search previewã‚’è¡¨ç¤ºã—ã¦ã¿ã¾ã™ã€‚APIã‚­ãƒ¼ã®å…¥åŠ›ã‚’æ±‚ã‚ã‚‰ã‚Œã‚‹ã®ã§ã€ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•æ™‚ã«æŒ‡å®šã—ãŸ <code>aSampleMasterKey</code> ã‚’å…¥åŠ›ã—ã¦ [Go] ã—ã¾ã™ã€‚</p><img src="/images/20240411a/Meilisearch-search-preview-enter-api-key.png" alt="Meilisearch-search-preview-enter-api-key.png" width="766" height="480" loading="lazy"><p>ã¾ã ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä½œæˆã—ã¦ã„ãªã„ã®ã§ä½•ã‚‚æ¤œç´¢ã§ãã¾ã›ã‚“ãŒã€ã“ã‚Œã§Meilisearchã‚’ä½¿ã†æº–å‚™ã¯æ•´ã„ã¾ã—ãŸã€‚</p><h1 id="ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆ"><a href="#ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆ" class="headerlink" title="ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆ"></a>ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆ</h1><p>è©¦ã—ã«å½“ãƒ–ãƒ­ã‚°ã‚µã‚¤ãƒˆã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä½œæˆã—ã¦ã¿ã¾ã™ã€‚</p><p>åŸºæœ¬çš„ã«ã¯APIã‚’å©ã„ã¦ <a href="https://www.meilisearch.com/docs/learn/core_concepts/indexes">ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹</a> ã« <a href="https://www.meilisearch.com/docs/learn/core_concepts/documents">ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a> ã‚’ç™»éŒ²ã—ã¾ã™ (cf. <a href="https://www.meilisearch.com/docs/reference/api/documents#add-or-replace-documents">ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç™»éŒ²ã™ã‚‹APIã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹</a>) ãŒã€webã‚µã‚¤ãƒˆã®ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹ <a href="https://github.com/meilisearch/docs-scraper">docs-scraper</a> ãŒå…¬å¼ã«æä¾›ã•ã‚Œã¦ã„ã‚‹ã®ã§ã“ã‚Œã‚’ä½¿ã£ã¦ã¿ã¾ã™ã€‚ã“ã®ãƒ„ãƒ¼ãƒ«ã¯webã‚µã‚¤ãƒˆã‚’ã‚¯ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã—ã¦ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä½œæˆã—ã¦ãã‚Œã‚‹ã®ã§ã€è¨­å®šã•ãˆç”¨æ„ã™ã‚Œã°æ±ç”¨çš„ã«ä½¿ãˆãã†ã§ã™ã€‚ãªãŠã€docs-scraperã®READMEã«ã¯</p><blockquote><p>ğŸš¨ IMPORTANT NOTICE: Reduced Maintenance &amp; Support ğŸš¨</p></blockquote><p>ã¨ã‚ã‚‹ã®ã§ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã¯é™å®šçš„ãªã‚ˆã†ã§ã™ãŒã€ã²ã¨ã¾ãšä½¿ãˆã¾ã—ãŸã€‚</p><h2 id="docs-scraperã«ã‚ˆã‚‹ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°"><a href="#docs-scraperã«ã‚ˆã‚‹ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°" class="headerlink" title="docs-scraperã«ã‚ˆã‚‹ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°"></a>docs-scraperã«ã‚ˆã‚‹ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°</h2><p>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã¯ <a href="https://github.com/meilisearch/docs-scraper?tab=readme-ov-file#-more-configurations">READMEã®ã“ã¡ã‚‰</a> ã«è¨˜è¼‰ãŒã‚ã‚Šã€è¨­å®šã®å…·ä½“ä¾‹ã¯ <a href="https://github.com/meilisearch/docs-scraper?tab=readme-ov-file#set-your-config-file">READMEè¨˜è¼‰ã®ä¾‹</a> ã‚„ <a href="https://github.com/meilisearch/documentation/blob/main/docs-scraper.config.json">å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå‘ã‘ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«</a> ãŒå‚è€ƒã«ãªã‚Šã¾ã™ã€‚ã¾ãŸã€<br>meilisearch&#x2F;docs-scraperã¯ <a href="https://github.com/algolia/docsearch-scraper">algolia&#x2F;docsearch-scraper</a> ã®ãƒ•ã‚©ãƒ¼ã‚¯ãªã®ã§ã€<a href="https://docsearch.algolia.com/docs/legacy/config-file/">Algoliaã®Config Filesãƒšãƒ¼ã‚¸</a> ã®èª¬æ˜ã‚‚ã‚ã‚‹ç¨‹åº¦å‚è€ƒã«ãªã‚Šã¾ã™ã€‚</p><p><strong>ä»¥é™ã®æ‰‹é †ã®å…·ä½“ä¾‹ã¯ãã®ã¾ã¾å®Ÿè¡Œã¯ã—ãªã„ã‚ˆã†ãŠé¡˜ã„ã—ã¾ã™ã€‚</strong> webã‚µã‚¤ãƒˆã®ã‚¯ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã«ä¼´ã†ã‚¢ã‚¯ã‚»ã‚¹ã¯æ”»æ’ƒã¨ã¿ãªã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ (cf. <a href="https://ja.wikipedia.org/wiki/%E5%B2%A1%E5%B4%8E%E5%B8%82%E7%AB%8B%E4%B8%AD%E5%A4%AE%E5%9B%B3%E6%9B%B8%E9%A4%A8%E4%BA%8B%E4%BB%B6">å²¡å´å¸‚ç«‹ä¸­å¤®å›³æ›¸é¤¨äº‹ä»¶</a>)ã€‚</p><p>å½“ãƒ–ãƒ­ã‚°ã‚µã‚¤ãƒˆã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã™ã‚‹ã®ã«æ¬¡ã®ã‚ˆã†ã«è¨­å®šã—ã¦ã¿ã¾ã—ãŸã€‚è¨­å®šã®ã‚­ãƒ¢ã¯å¾Œè¿°ã—ã¾ã™ãŒã€docs-scraperã®å¤§ã¾ã‹å‹•ä½œã¨ã—ã¦ã¯ <code>start_urls</code> ã‚’èµ·ç‚¹ã«ã“ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ç¯„å›²å†…ã§ <code>&lt;a&gt;</code> ã‚¿ã‚°ã‚’è¾¿ã£ã¦ã‚¯ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã—ã¾ã™ã€‚</p><p><details><summary><code>docs-scraper.config.json</code></summary><figure class="highlight json"><figcaption><span>docs-scraper.config.json</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;index_uid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;future-tech-blog&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;start_urls&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;https://future-architect.github.io/&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;sitemap_urls&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;https://future-architect.github.io/post-sitemap.xml&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;stop_urls&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;https://future-architect.github.io/categories/&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;https://future-architect.github.io/tags/&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;https://future-architect.github.io/authors/&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;selectors&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;lvl0&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;selector&quot;</span><span class="punctuation">:</span> <span class="string">&quot;.article-category&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;global&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lvl1&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;selector&quot;</span><span class="punctuation">:</span> <span class="string">&quot;.article-title&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;global&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lvl2&quot;</span><span class="punctuation">:</span> <span class="string">&quot;main h1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lvl3&quot;</span><span class="punctuation">:</span> <span class="string">&quot;main h2&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lvl4&quot;</span><span class="punctuation">:</span> <span class="string">&quot;main h3&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lvl5&quot;</span><span class="punctuation">:</span> <span class="string">&quot;main h4&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lvl6&quot;</span><span class="punctuation">:</span> <span class="string">&quot;main h5&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;main p, main li, main tr, main pre&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;strip_chars&quot;</span><span class="punctuation">:</span> <span class="string">&quot; .,;:#&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scrap_start_urls&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;custom_settings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;rankingRules&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;words&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;typo&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;attribute&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;exactness&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;proximity&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;page_rank:desc&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;level:desc&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;position:asc&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;searchableAttributes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;hierarchy_lvl1&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;hierarchy_lvl2&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;hierarchy_lvl3&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;hierarchy_lvl4&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;hierarchy_lvl5&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;hierarchy_lvl6&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;content&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;hierarchy_lvl0&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;only_content_level&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></details></p><p>docs-scraperã‚‚å…¬å¼ã‹ã‚‰Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ãŒæä¾›ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ä¸Šè¨˜ã®è¨­å®šã‚’ä½¿ã£ã¦ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã™ã‚‹ã«ã¯ <a href="https://github.com/meilisearch/docs-scraper?tab=readme-ov-file#with-docker-">READMEã®æ‰‹é †é€šã‚Š</a> ä»¥ä¸‹ã§å®Ÿè¡Œã§ãã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker run -t --<span class="built_in">rm</span> \</span><br><span class="line">    -e MEILISEARCH_HOST_URL=http://&lt;Dockerã®ãƒ›ã‚¹ãƒˆ&gt;:7700 \</span><br><span class="line">    -e MEILISEARCH_API_KEY=<span class="string">&#x27;aSampleMasterKey&#x27;</span> \</span><br><span class="line">    -v <span class="string">&quot;<span class="subst">$(pwd)</span>/docs-scraper.config.json&quot;</span>:/docs-scraper/docs-scraper.config.json \</span><br><span class="line">    getmeili/docs-scraper:latest pipenv run ./docs_scraper docs-scraper.config.json</span><br></pre></td></tr></table></figure><p>ãªãŠã€ãƒ—ãƒ­ã‚­ã‚·ãŒå¿…è¦ãªå ´åˆã¯é©å®œ <code>-e HTTP_PROXY=http://example.jp</code> ã¨ã„ã£ãŸå½¢ã§ç’°å¢ƒå¤‰æ•°ã‚’è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ãŒå®Œäº†ã—ãŸã‚‰search previewã§ç¢ºèªã—ã¦ã¿ã¾ã™ã€‚Meilisearchã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ™‚ã«è¡¨ç¤ºã—ãŸsearch previewç”»é¢ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã¨ã€ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã§ä½œæˆã—ãŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’é¸æŠã—ã¦æ¤œç´¢ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p><img src="/images/20240411a/Meilisearch-search-preview-search-demo.gif" alt="Meilisearch-search-preview-search-demo.gif" width="960" height="480" loading="lazy"><p>docs-scraperã«ã‚ˆã£ã¦ã“ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«ã¯97,668å€‹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒä½œã‚‰ã‚Œã¾ã—ãŸ (ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ€è¡“ãƒ–ãƒ­ã‚°ã®è¨˜äº‹æ•°ã¯ç¾åœ¨1,062ä»¶ã§ã™)ã€‚search previewã§ã¯æ–‡å­—å…¥åŠ›ã®åº¦ã«æ¤œç´¢ãŒèµ°ã‚‹ã®ã§ã™ãŒã€ä»Šå›ã®ç’°å¢ƒã§ã¯å„æ¤œç´¢ã¯æ•°ãƒŸãƒªç§’ï½æ•°åãƒŸãƒªç§’ã§å¿œç­”ã•ã‚Œã‚‹ã‚ˆã†ã§ã€lightning fastã¨ã„ã†è¬³ã„æ–‡å¥ã«å½ã‚Šã®ãªã„è»½å¿«ã•ã‚’ä½“æ„Ÿã§ãã¾ã—ãŸã€‚</p><p>ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°è¨­å®šã®å¤‰æ›´ã‚„webã‚µã‚¤ãƒˆã®æ›´æ–°ã«è¿½å¾“ã™ã‚‹ãŸã‚ãªã©ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æ›´æ–°ã—ãŸã„å ´åˆã€ä¸Šè¨˜ã®docs-scraperå®Ÿè¡Œã‚’å†åº¦è¡Œãˆã°ã‚ˆã„ã§ã™ã€‚docs-scraperã¯æœ€åˆã«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’å‰Šé™¤&amp;æ–°è¦ä½œæˆã—ã¦ã‹ã‚‰ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç™»éŒ²ã—ã¦ã„ãã¾ã™ã€‚ãŸã ã€ã“ã®ã‚ˆã†ã«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æ›´æ–°ã™ã‚‹ã¨ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å½±éŸ¿ãŒã‚ã‚Šã¾ã™ã€‚ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒå­˜åœ¨ã—ãªã„ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒã‚ã£ãŸã‚Šã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°é€”ä¸­ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒä½¿ã‚ã‚Œã¦ã—ã¾ã†ãŸã‚ã§ã™ã€‚ã“ã‚ŒãŒå•é¡Œã«ãªã‚‹å ´åˆã€swap indexes APIã‚’ä½¿ã£ã¦å¯¾ç­–ã§ãã‚‹ã‚ˆã†ã§ã™ã€‚Swap indexesã¯ <a href="https://www.meilisearch.com/docs/reference/api/indexes#:~:text=Swapping%20indexes%20is%20an%20atomic%20transaction">ã‚¢ãƒˆãƒŸãƒƒã‚¯ã«å‡¦ç†ã•ã‚Œã‚‹</a> ãã†ã§ã™ã€‚</p><p>cf. <a href="https://www.meilisearch.com/docs/learn/core_concepts/indexes#swapping-indexes">Swapping indexes</a><br>cf. <a href="https://blog.meilisearch.com/zero-downtime-index-deployment/">Zero downtime index deployment</a></p><p>docs-scraperã«ã‚ˆã£ã¦ä½œæˆã•ã‚Œã‚‹ <a href="https://www.meilisearch.com/docs/learn/core_concepts/documents">ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a> ã®è©³ç´°ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã€APIã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ã¿ã¾ã™ (cf. <a href="https://www.meilisearch.com/docs/reference/api/documents#get-one-document">å˜ä¸€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å–å¾—ã™ã‚‹APIã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹</a>)ã€‚docs-scraperã«ã‚ˆã£ã¦ä½œæˆã•ã‚Œã‚‹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã§ã¯primary keyã¨ã—ã¦ <code>objectID</code> ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã™ (cf. <a href="https://www.meilisearch.com/docs/reference/api/indexes#get-one-index">å˜ä¸€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®æƒ…å ±ã‚’å–å¾—ã™ã‚‹APIã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹</a>)ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ curl -s \</span><br><span class="line">  -X GET <span class="string">&quot;http://127.0.0.1:7700/indexes/future-tech-blog&quot;</span> \</span><br><span class="line">  -H <span class="string">&quot;Authorization: Bearer aSampleMasterKey&quot;</span> | jq</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;uid&quot;</span>: <span class="string">&quot;future-tech-blog&quot;</span>,</span><br><span class="line">  <span class="string">&quot;createdAt&quot;</span>: <span class="string">&quot;2024-04-10T11:07:14.284264598Z&quot;</span>,</span><br><span class="line">  <span class="string">&quot;updatedAt&quot;</span>: <span class="string">&quot;2024-04-10T11:13:42.28654364Z&quot;</span>,</span><br><span class="line">  <span class="string">&quot;primaryKey&quot;</span>: <span class="string">&quot;objectID&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$ curl -s \</span><br><span class="line">  -X GET <span class="string">&quot;http://127.0.0.1:7700/indexes/future-tech-blog/documents/daf5dff8c3dcdce27e0d55e32c8f6d76d99a0eb1&quot;</span> \</span><br><span class="line">  -H <span class="string">&quot;Authorization: Bearer aSampleMasterKey&quot;</span> | jq</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;hierarchy_lvl1&quot;</span>: <span class="string">&quot;Bashã®ã‚·ã‚§ãƒ«å±•é–‹&quot;</span>,</span><br><span class="line">  <span class="string">&quot;hierarchy_lvl2&quot;</span>: <span class="string">&quot;ãƒ—ãƒ­ã‚»ã‚¹ç½®æ› (Process Substitution)&quot;</span>,</span><br><span class="line">  <span class="string">&quot;hierarchy_lvl3&quot;</span>: null,</span><br><span class="line">  <span class="string">&quot;hierarchy_lvl4&quot;</span>: null,</span><br><span class="line">  <span class="string">&quot;hierarchy_lvl5&quot;</span>: null,</span><br><span class="line">  <span class="string">&quot;hierarchy_lvl6&quot;</span>: null,</span><br><span class="line">  <span class="string">&quot;content&quot;</span>: <span class="string">&quot;ãƒ—ãƒ­ã‚»ã‚¹ç½®æ›ã¯ãƒ—ãƒ­ã‚»ã‚¹ã¸ã®å…¥å‡ºåŠ›ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã§å‚ç…§ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚&quot;</span>,</span><br><span class="line">  <span class="string">&quot;hierarchy_lvl0&quot;</span>: <span class="string">&quot;Infrastructureã‚«ãƒ†ã‚´ãƒª&quot;</span>,</span><br><span class="line">  <span class="string">&quot;anchor&quot;</span>: <span class="string">&quot;ãƒ—ãƒ­ã‚»ã‚¹ç½®æ›-Process-Substitution&quot;</span>,</span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="string">&quot;content&quot;</span>,</span><br><span class="line">  <span class="string">&quot;tags&quot;</span>: [],</span><br><span class="line">  <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://future-architect.github.io/articles/20210406/#ãƒ—ãƒ­ã‚»ã‚¹ç½®æ›-Process-Substitution&quot;</span>,</span><br><span class="line">  <span class="string">&quot;url_without_variables&quot;</span>: <span class="string">&quot;https://future-architect.github.io/articles/20210406/#ãƒ—ãƒ­ã‚»ã‚¹ç½®æ›-Process-Substitution&quot;</span>,</span><br><span class="line">  <span class="string">&quot;url_without_anchor&quot;</span>: <span class="string">&quot;https://future-architect.github.io/articles/20210406/&quot;</span>,</span><br><span class="line">  <span class="string">&quot;no_variables&quot;</span>: <span class="string">&quot;True&quot;</span>,</span><br><span class="line">  <span class="string">&quot;objectID&quot;</span>: <span class="string">&quot;daf5dff8c3dcdce27e0d55e32c8f6d76d99a0eb1&quot;</span>,</span><br><span class="line">  <span class="string">&quot;page_rank&quot;</span>: 0,</span><br><span class="line">  <span class="string">&quot;level&quot;</span>: 0,</span><br><span class="line">  <span class="string">&quot;position&quot;</span>: 81,</span><br><span class="line">  <span class="string">&quot;hierarchy_radio_lvl0&quot;</span>: null,</span><br><span class="line">  <span class="string">&quot;hierarchy_radio_lvl1&quot;</span>: null,</span><br><span class="line">  <span class="string">&quot;hierarchy_radio_lvl2&quot;</span>: null,</span><br><span class="line">  <span class="string">&quot;hierarchy_radio_lvl3&quot;</span>: null,</span><br><span class="line">  <span class="string">&quot;hierarchy_radio_lvl4&quot;</span>: null,</span><br><span class="line">  <span class="string">&quot;hierarchy_radio_lvl5&quot;</span>: null,</span><br><span class="line">  <span class="string">&quot;hierarchy_radio_lvl6&quot;</span>: null</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šè¨˜ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã™ã¹ã¦ã®å±æ€§ (attribute) ã¯docs-scraperãŒç‹¬è‡ªã«å®šç¾©ã—ãŸå±æ€§ (&#x3D;Meilisearchã®ã‚·ã‚¹ãƒ†ãƒ çš„ãªå±æ€§ã¯ãªã„) ã§ã™ã€‚ Meilisearchã§äºˆç´„ã•ã‚ŒãŸå±æ€§ãŒå­˜åœ¨ã™ã‚‹å ´åˆã€ãã®åå‰ã¯ <a href="https://www.meilisearch.com/docs/learn/core_concepts/documents#:~:text=displayed%20or%20searchable.-,Reserved%20attributes,-Some%20features%20require">ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ <code>_</code> å§‹ã¾ã‚Šã«ãªã£ã¦ã„ã¾ã™</a>ã€‚</p><p>webãƒšãƒ¼ã‚¸æœ¬æ–‡ã®æƒ…å ±ã¯ <code>hierarchy_lvl0</code> ï½ <code>hierarchy_lvl6</code> åŠã³ <code>content</code> å±æ€§ã«å…¥ã‚Šã¾ã™ã€‚ã“ã‚Œã‚‰ã®å±æ€§ã®åˆ©ç”¨ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ <a href="https://github.com/meilisearch/docs-scraper?tab=readme-ov-file#the-levels-">ã“ã¡ã‚‰</a> ã§ã™ã€‚ã“ã‚Œã‚‰ã®å±æ€§å€¤ã§æ¤œç´¢ã™ã‚‹ãŸã‚ã€å€¤ãŒã†ã¾ãå…¥ã‚‹ã‚ˆã†ã«è¨­å®šã™ã‚‹ã®ãŒã‚­ãƒ¢ã§ã™ã€‚ã“ã‚Œã‚‰ã®å±æ€§ã¨è¨­å®šã¯ä»¥ä¸‹ã®é€šã‚Šå¯¾å¿œã—ã¾ã™ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hierarchy_lvl0 â† selectors.lvl0</span><br><span class="line">hierarchy_lvl1 â† selectors.lvl1</span><br><span class="line">hierarchy_lvl2 â† selectors.lvl2</span><br><span class="line">hierarchy_lvl3 â† selectors.lvl3</span><br><span class="line">hierarchy_lvl4 â† selectors.lvl4</span><br><span class="line">hierarchy_lvl5 â† selectors.lvl5</span><br><span class="line">hierarchy_lvl6 â† selectors.lvl6</span><br><span class="line">content â† selectors.text</span><br></pre></td></tr></table></figure><p><code>selectors</code> ã®è¨­å®šã§ã¯ã©ã®HTMLã‚¿ã‚°ã®å†…å®¹ã‚’å–å¾—ã™ã‚‹ã‹ã‚’CSSã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã§æŒ‡å®šã—ã¾ã™ã€‚ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—æ–¹æ³•ã¯webã‚µã‚¤ãƒˆã”ã¨ã«ç•°ãªã‚‹ã®ã§ã€å„webã‚µã‚¤ãƒˆã«åˆã£ãŸã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã«èª¿æ•´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚CSSã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã§ã¯å–å¾—ã§ããªã„å ´åˆã€XPathã§ã‚‚æŒ‡å®šã§ãã¾ã™ã€‚ä¾‹ãˆã°ã€ä»¥ä¸‹ã¯ <code>class</code> å±æ€§ã« <code>active</code> ã¨ <code>sidebar-link</code> ãŒå«ã¾ã‚Œã‚‹ã‚¿ã‚°ã‚’XPathã§æŒ‡å®šã™ã‚‹ä¾‹ã§ã™ã€‚</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;selectors&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;lvl0&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;selector&quot;</span><span class="punctuation">:</span> <span class="string">&quot;.//*[(@class and contains(concat(&#x27; &#x27;, normalize-space(@class), &#x27; &#x27;), &#x27; sidebar-link &#x27;)) and (@class and contains(concat(&#x27; &#x27;, normalize-space(@class), &#x27; &#x27;), &#x27; active &#x27;))]&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xpath&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;global&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h1 id="ã•ã„ã”ã«"><a href="#ã•ã„ã”ã«" class="headerlink" title="ã•ã„ã”ã«"></a>ã•ã„ã”ã«</h1><p>å½“è¨˜äº‹ã§ã¯Meilisearchã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¨å®Ÿéš›ã®webã‚µã‚¤ãƒˆã®ã‚¯ãƒ­ãƒ¼ãƒªãƒ³ã‚°ä¾‹ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚Meilisearchã‚’å‹•ã‹ã™ã®ã‚‚æ¤œç´¢ã®å¿œç­”é€Ÿåº¦ã‚‚è¬³ã„æ–‡å¥é€šã‚Šã«æ—©ãã¦å¥½å°è±¡ã§ã—ãŸã€‚ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä½œæˆã™ã‚‹ã®ã‚‚ã€ã¨ã‚Šã‚ãˆãšå‹•ã‹ã™ã ã‘ãªã‚‰ <code>selectors</code> ã‚’å¤§ã¾ã‹ã«è¨­å®šã—ã¦ã¿ã‚Œã°è‰¯ã„ã®ã§HTML, CSSã®çŸ¥è­˜ãŒã‚ã‚Œã°é›£æ˜“åº¦ã¯ä½ã„ã¨æ€ã„ã¾ã™ã€‚</p><p>ä»Šå›ã¯è©¦ã™ã«è‡³ã‚Šã¾ã›ã‚“ã§ã—ãŸãŒã€ã‚ˆã‚Šè‰¯ã„æ¤œç´¢çµæœã‚’å¾—ã‚‹ã«ã¯ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ä½œã‚Šæ–¹ã‚„ <a href="https://www.meilisearch.com/docs/learn/what_is_meilisearch/overview#features:~:text=Filtering%20and%20faceted%20search%3A%20Enhance%20user%20search%20experience%20with%20custom%20filters%20and%20build%20a%20faceted%20search%20interface%20in%20a%20few%20lines%20of%20code">ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼</a> ãªã©ä½¿ãˆã‚‹ç¨®ã€…ã®æ©Ÿèƒ½ãŒã‚ã‚‹ã‚ˆã†ãªã®ã§ã€æŠ˜ã‚’è¦‹ã¦è©¦ã—ã¦ã„ã“ã†ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚</p><h1 id="å‚è€ƒãƒªãƒ³ã‚¯"><a href="#å‚è€ƒãƒªãƒ³ã‚¯" class="headerlink" title="å‚è€ƒãƒªãƒ³ã‚¯"></a>å‚è€ƒãƒªãƒ³ã‚¯</h1><ul><li><a href="https://www.meilisearch.com/docs">Meilisearch Documentation</a></li></ul>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Programming/">Programming</category>
      
      
      <category domain="https://future-architect.github.io/tags/%E5%85%A8%E6%96%87%E6%A4%9C%E7%B4%A2/">å…¨æ–‡æ¤œç´¢</category>
      
      <category domain="https://future-architect.github.io/tags/Meilisearch/">Meilisearch</category>
      
      
      <comments>https://future-architect.github.io/articles/20240411a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>2024å¹´Gitãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å†è€ƒ</title>
      <link>https://future-architect.github.io/articles/20240410a/</link>
      <guid>https://future-architect.github.io/articles/20240410a/</guid>
      <pubDate>Tue, 09 Apr 2024 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;p&gt;&lt;a</description>
          
        
      
      
      
      <content:encoded><![CDATA[<p><a href="/articles/20240408a/">æ˜¥ã®å…¥é–€ç¥­ã‚Š2024</a>ã®2è¨˜äº‹ç›®ã§ã™ã€‚</p><p>Gitã¯ã€å‡ºè‡ªã¨ã—ã¦ã¯1é€±é–“ã§ä½œã‚‰ã‚ŒãŸLinuxã‚«ãƒ¼ãƒãƒ«ã®ãŸã‚ã®åˆ†æ•£ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã§ã—ãŸã€‚å½“æ™‚ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã«åˆã‚ã›ã¦ãƒ‘ãƒƒãƒã‚’ãƒ†ã‚­ã‚¹ãƒˆåŒ–ã—ã¦ãƒ¡ãƒ¼ãƒ«ã«æ·»ä»˜ã§ãã‚‹ã‚ˆã†ãªæ©Ÿèƒ½ã ã£ãŸã‚ŠãŒå‚™ã‚ã£ã¦ã„ã¾ã™ã€‚</p><p>ä¸€æ–¹ã§ã€ç¾ä»£ã®Gitã¯ã€ãƒ‡ãƒ•ã‚¡ã‚¯ãƒˆã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã«ãªã‚ŠLinuxã‚«ãƒ¼ãƒãƒ«ä»¥å¤–ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã§åˆ©ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚åˆ†æ•£ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã§ã¯ã‚ã‚‹ã‚‚ã®ã®ã€ã‚µãƒ¼ãƒãƒ¼ãƒ»ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå‹ã®ä½¿ã‚ã‚Œæ–¹ã‚’ã—ã¦ã„ã¦ã€GitHubã‚„GitLabã‚’æ ¸ã«ã—ã¦ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§ä½œã£ãŸãƒ–ãƒ©ãƒ³ãƒã‚’pushã—ã¦ã€Pull Requestã®å½¢ã«ã—ã¦ç®¡ç†ã—ã¦ã„ã¾ã™ã€‚å°‘ãªãã¨ã‚‚å‘¨ã‚Šã§è¦‹ã‚‹é™ã‚Šã§ã¯ã€ãã‚Œä»¥å¤–ã®ä½¿ã‚ã‚Œæ–¹ã®æ–¹ãŒå°‘ãªããªã£ã¦ãã¦ã¾ã™ã€‚ãã‚“ãªã“ã‚“ãªã§æ±‚ã‚ã‚‰ã‚Œã¦ã„ã‚‹ä½¿ã‚ã‚Œæ–¹ãŒå¤‰ã‚ã£ã¦ãã¦ã„ã¦ã€ãã‚Œã«åˆã‚ã›ãŸæ©Ÿèƒ½ãŒã¼ã¡ã¼ã¡å¢—ãˆã¦ã„ã¾ã™ã€‚ãã‚Œã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã§ã€ã‚¦ã‚§ãƒ–ç”»é¢ä¸Šã§ã®å·®åˆ†ãŒã¿ã‚„ã™ãã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚‚ã—ã‚„ã™ããªã‚Šã¾ã™ã€‚</p><p>æœ¬æ¥ã¯ãã‚Œã«åˆã‚ã›ã¦ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚„è¨­å®šã‚’è¦‹ç›´ã—ã¦ã„ãã¹ããªã‚“ã ã¨ã¯æ€ã„ã¾ã™ãŒã€ãªã‚“ã¨ãªãæ˜”è¦šãˆãŸãƒ¡ãƒ³ã‚¿ãƒ«ãƒ¢ãƒ‡ãƒ«ã®ã¾ã¾ä½¿ã£ã¦ã„ã‚‹ãªã€ã¨æ€ã£ãŸã®ã§ã€ç›´è¿‘å¢—ãˆãŸæ©Ÿèƒ½ã‚’è©¦ã—ã¤ã¤ã€ã©ã‚“ãªãŠä½œæ³•ã§ä½¿ã£ã¦ã„ãã¹ãã‹æ€è€ƒå®Ÿé¨“ã—ã¦ã¿ãŸã®ãŒã“ã®è¨˜äº‹ã§ã™ã€‚åŸºæœ¬è·¯ç·šã¨ã—ã¦ã¯ã€Gitã®ä½¿ã„æ–¹ã®è­°è«–ãƒã‚¤ãƒ³ãƒˆã€å±¥æ­´ã‚’ãã‚Œã„ã«ã™ã‚‹ä½¿ã„æ–¹ã‚’åºƒã‚ãŸã„ãŒã€ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ãŒã¤ã„ã¦ã“ã‚Œãªã„ã€ã¨ã„ã†ã®ã¯ã‚ˆãèãè©±ã ã¨æ€ã„ã¾ã™ãŒã€ãã‚Œã«å¯¾ã—ã€ä»Šæ™‚ã®è¨­å®šã‚’ä½¿ã£ã¦mergeã¨rebaseã®ä¸¡æ–¹ãŒã‚ã£ã¦ä½¿ã„æ‰‹ãŒé¸ã¹ã‚‹ä¸–ç•Œã§ã¯ãªãã€rebaseã®ã¿ãŒã‚ã‚‹ä¸–ç•Œã‚’ä½œã£ã¦ã„ã“ã†ã¨ã„ã†ã‚‚ã®ã§ã™ã€‚</p><p>å®Ÿéš›ã«è¤‡æ•°äººã§ä½¿ã£ã¦ã¿ã‚‹ã¨ã¾ãŸã„ã‚ã„ã‚æ°—ã¥ãã¯ã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã‚ã¨ã€åƒ•ã¯gitæ“ä½œã¯CLIã§ã‚„ã£ã¦ã„ã‚‹ã®ã§ã™ãŒã€ã“ã‚Œã‚’ãã¡ã‚“ã¨ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³åŒ–ã™ã‚‹ãªã‚‰ã€åˆ©ç”¨è€…ã®å¤šã„Gitã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ„ãƒ¼ãƒ«ã®æ“ä½œã‚‚ä½µè¨˜ã™ã‚‹ã¨ã„ã„ã§ã™ã­ã€‚</p><h1 id="æœ¬ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãŒæƒ³å®šã™ã‚‹ç¾ä»£ã®Gitä½¿ã„ã«æ±‚ã‚ã‚‰ã‚Œã‚‹ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ¢ãƒ‡ãƒ«"><a href="#æœ¬ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãŒæƒ³å®šã™ã‚‹ç¾ä»£ã®Gitä½¿ã„ã«æ±‚ã‚ã‚‰ã‚Œã‚‹ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ¢ãƒ‡ãƒ«" class="headerlink" title="æœ¬ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãŒæƒ³å®šã™ã‚‹ç¾ä»£ã®Gitä½¿ã„ã«æ±‚ã‚ã‚‰ã‚Œã‚‹ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ¢ãƒ‡ãƒ«"></a>æœ¬ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãŒæƒ³å®šã™ã‚‹ç¾ä»£ã®Gitä½¿ã„ã«æ±‚ã‚ã‚‰ã‚Œã‚‹ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ¢ãƒ‡ãƒ«</h1><ul><li>ãƒ¡ã‚¤ãƒ³ã®ãƒ–ãƒ©ãƒ³ãƒã¸ã®ãƒãƒ¼ã‚¸ã¯PRå˜ä½ã€‚å¤§ãããªã‚‹ã»ã©ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆã—ã‚„ã™ãã€ãã‚Œã®è§£æ±ºãŒå¤§å¤‰ã«ãªã‚‹ã®ã§ã€Pull Requestä¸Šã§ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’è¡Œã†ã—ã€ã€€CIã®ãƒ†ã‚¹ãƒˆãŒèµ°ã£ã¦ã„ã¦ã€ãƒ¡ã‚¤ãƒ³ã¨ãªã‚‹ãƒ–ãƒ©ãƒ³ãƒãŒä¸å®‰å®šãªçŠ¶æ…‹ã«ãªã‚‰ãªã„ã‚ˆã†ã«ã™ã‚‹</li><li>Pull Requestä¸Šã§ã¯ãƒ¬ãƒ“ãƒ¥ãƒ¼æŒ‡æ‘˜ã«å¯¾ã™ã‚‹ä¿®æ­£ã‚³ãƒŸãƒƒãƒˆãŒã‚ã‹ã‚Šã‚„ã™ã„(å‰ã®ã‚³ãƒŸãƒƒãƒˆã«å¯¾ã™ã‚‹å·®åˆ†ãŒè¦‹ãˆã‚‹)ãŒã€ãƒãƒ¼ã‚¸å¾Œã¯1ã¤ã®Pull Request&#x3D;&#x3D;1ã‚³ãƒŸãƒƒãƒˆã§ã€ã©ã®PRç”±æ¥ã®å¤‰æ›´ã‹è¿½ã„ã‹ã‘ã‚„ã™ãã™ã‚‹(squash merge)</li><li>è¤‡æ•°ã®ä¿®æ­£ã¯Pull Requestã«ã¯æ··ãœãªã„ã€‚Pull Requestã”ã¨ã«ã€GitHubã®æ©Ÿèƒ½ã‚’ä½¿ã£ã¦revertã™ã‚‹</li></ul><p>é–‹ç™ºã¯Pull Requestãƒ™ãƒ¼ã‚¹ã§è¡Œã„ã¾ã™ãŒã€1ã¤ã®Pull Requestã‚’ãƒãƒ¼ã‚¸ã—ã¦ãƒãƒ¼ã‚¸ã‚³ãƒŸãƒƒãƒˆãŒç”Ÿæˆã•ã‚Œã¦ã€ä»–ã®Pull RequestãŒã¶ã£å£Šã‚ŒãŸã‚‰å›°ã‚‹ã‚ã‘ã§ã€ã‚ˆã†ã¯Rebaseã‚’ãã¡ã‚“ã¨ã‚„ã‚‹ã€ã¨ã„ã†æ–¹å‘ã§ã™ã­ã€‚</p><p>ãƒãƒ¼ã‚¸ã‚³ãƒŸãƒƒãƒˆã‚’ç”Ÿæˆã™ã‚‹ã¨ã©ã®ã‚ˆã†ã«ãƒãƒ¼ã‚¸ã—ãŸã®ã‹ã®è¨˜éŒ²ã‚’æ®‹ã™ã€ã¨ã„ã†è¨€èª¬ã¯ã‚ã£ãŸã‘ã©ã€ãƒãƒ¼ã‚¸ã‚³ãƒŸãƒƒãƒˆã®æƒ…å ±ãŒå½¹ã«ç«‹ã£ãŸã“ã¨ãŒãªã„ã—ã€ä¸¦åˆ—æ•°ãŒå¢—ãˆã¦ãã‚‹ã¨å›°ã‚‹ã“ã¨ãŒå¢—ãˆã¦ãã‚‹ã¨æ€ã†ã®ã§ãƒãƒ¼ã‚¸ã‚³ãƒŸãƒƒãƒˆã¯ä½œã‚‰ãªã„ã‚ˆã†ã«ã—ãŸã„ã¨ã„ã†æ„Ÿã˜ã‹ãªã¨ã€‚</p><h1 id="è¨­å®š"><a href="#è¨­å®š" class="headerlink" title="è¨­å®š"></a>è¨­å®š</h1><h2 id="GitHub"><a href="#GitHub" class="headerlink" title="GitHub"></a>GitHub</h2><p>è¨­å®šã®Generalã®Pull Requestsã®é …ç›®ã«ã‚ã‚‹ã€Allow merge commitsã¨Allow rebase mergingã®ãƒã‚§ãƒƒã‚¯ã‚’å¤–ã—ã€Allow squash mergingã ã‘ã«ã—ã¦ãŠãã¾ã™ã€‚</p><img src="/images/20240410a/ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ_2024-03-26_12.21.11.png" alt="ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ_2024-03-26_12.21.11.png" width="821" height="451" loading="lazy"><p>ã¤ã„ã§ã«ã€Automatically delete head branchesã‚‚ãƒã‚§ãƒƒã‚¯ã—ã¦ãŠã„ã¦è‰¯ã„ã§ã—ã‚‡ã†ã€‚</p><p>Pull Requestã®ãƒãƒ¼ã‚¸å…ˆã®<code>develop</code>ãªã©ã¯ãƒ—ãƒ­ãƒ†ã‚¯ãƒˆãƒ–ãƒ©ãƒ³ãƒè¨­å®šã—ã¦ãŠãã¾ã™ã€‚æ‰¿èªã¾ã‚ã‚Šã¨ã‹CIã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®è©±ãŒå‡ºã¦ãã¾ã™ã®ã§ãã“ã¯ã‚¹ã‚­ãƒƒãƒ—ã—ã¦å…±é€šçš„ãªè©±ã ã‘ã‚’ç”¨æ„ã™ã‚‹ã¨ãªã‚‹ã¨ã€æ¬¡ã®2ã‚’è¨­å®šã™ã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚</p><ul><li>Require a pull request before merging</li><li>Require linear history</li></ul><p>å¾Œè€…ã‚’è¨­å®šã™ã‚‹ã¨ã€Pull Requestã®ãƒœã‚¿ãƒ³ã¯ã€ŒSquash and mergeã€ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«ãªã‚‹ã£ã½ã„ã§ã™ã€‚</p><p>ãªãŠã€rebaseä¸»ä½“ã ã¨ä¸€éƒ¨force pushã¯å¿…è¦ã¨ãªã‚Šã¾ã™ã€‚åå‰é€šã‚Šã®<code>--force</code>è‡ªä½“ã¯ä¸è¦ã§ã™ãŒ(å¾Œè¿°)ã€<code>develop</code>ä»¥å¤–ã®<code>feature</code>ãƒ–ãƒ©ãƒ³ãƒã«å¯¾ã—ã¦ã¯è¨±å¯ã—ã¦ãŠãã¾ã™ã€‚</p><h2 id="ãƒ­ãƒ¼ã‚«ãƒ«"><a href="#ãƒ­ãƒ¼ã‚«ãƒ«" class="headerlink" title="ãƒ­ãƒ¼ã‚«ãƒ«"></a>ãƒ­ãƒ¼ã‚«ãƒ«</h2><p>æ¬¡ã®2ã¤ã‚’è¨­å®šã—ã¾ã™ã€‚</p><ul><li><code>git config pull.rebase true</code></li><li><code>git config rerere.enabled true</code></li></ul><h1 id="é–‹ç™ºæ™‚ã®ãƒ¢ãƒ‡ãƒ«æ“ä½œ"><a href="#é–‹ç™ºæ™‚ã®ãƒ¢ãƒ‡ãƒ«æ“ä½œ" class="headerlink" title="é–‹ç™ºæ™‚ã®ãƒ¢ãƒ‡ãƒ«æ“ä½œ"></a>é–‹ç™ºæ™‚ã®ãƒ¢ãƒ‡ãƒ«æ“ä½œ</h1><p>é–‹ç™ºæ™‚ã«ã©ã®ã‚ˆã†ãªæ“ä½œã‚’ã—ã¦ã„ãã®ã‹ã‚’ã¾ã¨ã‚ã¾ã™ã€‚</p><h2 id="1-featureãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆã—ã¦å®Ÿè£…"><a href="#1-featureãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆã—ã¦å®Ÿè£…" class="headerlink" title="1. featureãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆã—ã¦å®Ÿè£…"></a>1. featureãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆã—ã¦å®Ÿè£…</h2><p>ãƒãƒ¼ã‚¸å…ˆã¨ãªã‚‹ãƒ–ãƒ©ãƒ³ãƒï¼ˆä¸€èˆ¬çš„ã«ã¯<code>develop</code>)ã‹ã‚‰æ–°ã—ã„ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆã—ã¾ã™ã€‚ <code>feature/åå‰</code>ã¿ãŸã„ãªã€‚ãƒ­ãƒ¼ã‚«ãƒ«ã§ä¸€é€šã‚Šå®Ÿè£…ã—ã¾ã™ã€‚</p><p>ã‚‚ã—ã€ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè£…ä¸­ã«<code>develop</code>ã®æœ€æ–°ã‚’å–ã‚Šè¾¼ã‚€å¿…è¦ãŒã‚ã‚Œã°<code>git pull origin develop</code>ã—ã¾ã™ã€‚ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆãŒã‚ã‚Œã°rebaseã‚’ãã¡ã‚“ã¨è¡Œã„ã¾ã™ã€‚</p><p>ä¸€é€šã‚Šå‹•ãã¾ã§å®Ÿè£…ã—ã¾ã™ã€‚</p><h2 id="2-ãƒªãƒ¢ãƒ¼ãƒˆã«pushå‰ã«æ•´ç†"><a href="#2-ãƒªãƒ¢ãƒ¼ãƒˆã«pushå‰ã«æ•´ç†" class="headerlink" title="2. ãƒªãƒ¢ãƒ¼ãƒˆã«pushå‰ã«æ•´ç†"></a>2. ãƒªãƒ¢ãƒ¼ãƒˆã«pushå‰ã«æ•´ç†</h2><p>ãƒªãƒ¢ãƒ¼ãƒˆã«pushã—ã¾ã™ãŒã€2ã¤ã®æ“ä½œã‚’å¿˜ã‚Œãšã«è¡Œã„ã¾ã™ã€‚</p><ul><li><code>git pull origin develop</code>ã§æœ€æ–°ã®<code>develop</code>ã‚’å–ã‚Šè¾¼ã‚€</li><li><code>git rebase -i develop</code>ã§æœ€æ–°ã®<code>develop</code>ã®ä¸Šã«å¤‰æ›´ãŒæ¥ã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚æœ€å¾Œã®ã‚³ãƒŸãƒƒãƒˆ(ä¸€ç•ªä¸Šã®è¡Œ)ä»¥å¤–ã¯fixupã—ã¦ã€1ã‚³ãƒŸãƒƒãƒˆã«ã¾ã¨ã‚ã‚‹</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pick   950b967ã€€ã“ã®ã‚³ãƒ¡ãƒ³ãƒˆã ã‘æ®‹ã‚‹</span><br><span class="line">fixup  6b66e35ã€€ã“ã®ã‚³ãƒ¡ãƒ³ãƒˆã¯ç„¡è¦–ã•ã‚Œã‚‹</span><br><span class="line">fixup  806489cã€€ã“ã®ã‚³ãƒ¡ãƒ³ãƒˆã¯ç„¡è¦–ã•ã‚Œã‚‹</span><br><span class="line">fixup  aaf0eda ã“ã®ã‚³ãƒ¡ãƒ³ãƒˆã¯ç„¡è¦–ã•ã‚Œã‚‹</span><br></pre></td></tr></table></figure><p>ã“ã‚Œã§1ã‚³ãƒŸãƒƒãƒˆã«ã¾ã¨ã¾ã‚‹ã®ã§ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã‚„ã™ããªã‚Šã¾ã™ã€‚</p><p>ãªãŠã€ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã‚‚è‰¯ã„ã‹ãªã¨æ€ã„ã¾ã™ã€‚ã¡ã‚‡ã£ã¨ä¸å®‰ãªã‚‰ã€bisectã§å•é¡Œã‚’æ¢ã™ã¨ã‹ã™ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã¾ãŸ<code>develop</code>ã¸ã®rebaseã¯GitHubä¸Šã§ã‚‚ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆã—ãªã„é™ã‚Šã¯ã‚„ã£ã¦ãã‚Œã¯ã—ã¾ã™ã€‚ãŸã ã—ã€ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆã—ãŸå ´åˆã¯ã“ã“ã§å®Ÿæ–½ã—ã¦è§£æ±ºã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚</p><h2 id="3-ãƒªãƒ¢ãƒ¼ãƒˆã«pushã—ã¦Pull-Rquestä½œæˆ"><a href="#3-ãƒªãƒ¢ãƒ¼ãƒˆã«pushã—ã¦Pull-Rquestä½œæˆ" class="headerlink" title="3. ãƒªãƒ¢ãƒ¼ãƒˆã«pushã—ã¦Pull Rquestä½œæˆ"></a>3. ãƒªãƒ¢ãƒ¼ãƒˆã«pushã—ã¦Pull Rquestä½œæˆ</h2><p>ã“ã“ã¯ã„ã¤ã‚‚ã®æ“ä½œãªã®ã§çœç•¥ã—ã¾ã™</p><h2 id="4-1-ãƒ¬ãƒ“ãƒ¥ãƒ¼æŒ‡æ‘˜ã«å¯¾å¿œã™ã‚‹ä¿®æ­£"><a href="#4-1-ãƒ¬ãƒ“ãƒ¥ãƒ¼æŒ‡æ‘˜ã«å¯¾å¿œã™ã‚‹ä¿®æ­£" class="headerlink" title="4.1. ãƒ¬ãƒ“ãƒ¥ãƒ¼æŒ‡æ‘˜ã«å¯¾å¿œã™ã‚‹ä¿®æ­£"></a>4.1. ãƒ¬ãƒ“ãƒ¥ãƒ¼æŒ‡æ‘˜ã«å¯¾å¿œã™ã‚‹ä¿®æ­£</h2><p>ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§æŒ‡æ‘˜ã•ã‚ŒãŸä¿®æ­£ã‚’è¡Œã„ã¾ã™ã€‚ä¿®æ­£ã—ãŸã‚‰commit&amp;pushã—ã¾ã™ã€‚ä¸€åº¦Pull Requestã‚’ä½œæˆã—ãŸã‚‰ã€rebaseã§å‰ã®ã‚³ãƒŸãƒƒãƒˆã«ã¾ã¨ã‚ãŸã‚Šã¯ã›ãšã€ã‚³ãƒŸãƒƒãƒˆã‚’ãƒãƒ©ãƒãƒ©ã®çŠ¶æ…‹ã§pushã—ã¾ã™ã€‚ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¢ãŒä¿®æ­£ã‚³ãƒŸãƒƒãƒˆã®ã¿ã‚’è¦‹ãŸã„ã¨æ€ã†ã‚±ãƒ¼ã‚¹ãŒã‚ã‚‹ã‹ã‚‰ã§ã™ã€‚pushã™ã‚‹å‰ã«ã€Œã‚ã€ã¡ã‚‡ã£ã¨ã‚¿ã‚¤ãƒã€ã¨<code>commit --amend</code>ã™ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€‚ãã†ã™ã‚Œã°ã¿ã‚“ãªãŒå«Œã„ãª<code>--force</code>ã¯ä¸è¦ã¨ãªã‚Šã¾ã™ã€‚</p><p>æ¬¡ã®ãƒ–ãƒ­ã‚°ã§ã¯<code>--fixup</code>ã‚’æ¨å¥¨ã—ã¦ã„ã¾ã™ãŒã€ã“ã®å½¢å¼ã®ã‚³ãƒ¡ãƒ³ãƒˆã¯GitHubã¯ç¾æ™‚ç‚¹ï¼ˆè¨˜äº‹å…¬é–‹æ—¥:2024&#x2F;4&#x2F;10ï¼‰ã§ã¯è€ƒæ…®ã—ã¦ãã‚Œãªã„ã®ã§æ°—ã«ã—ãªãã¦ã‚‚è‰¯ã„ã§ã™ã€‚</p><p><a href="https://blog-dry.com/entry/2024/02/26/090146">https://blog-dry.com/entry/2024/02/26/090146</a></p><h2 id="4-2-developã®rebase"><a href="#4-2-developã®rebase" class="headerlink" title="4.2. developã®rebase"></a>4.2. developã®rebase</h2><p>PRä½œæˆæ™‚ã¯è‰¯ã‹ã£ãŸã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ãã®å¾Œã®ä»–ã®äººã®PRãŒå…ˆã«ãƒãƒ¼ã‚¸ã•ã‚Œã‚‹ã¨ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆãŒç™ºç”Ÿã—ã¦å†åº¦rebaseãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚ãã®å ´åˆã¯ã€<code>git pull origin develop</code>ã§æœ€æ–°ã®<code>develop</code>ã‚’å–ã‚Šè¾¼ã¿ã¾ã™ã€‚</p><p>ä½•åº¦ã‚‚<code>develop</code>ã‚’ãƒãƒ¼ã‚¸ã—ãªãŠã™ã‚±ãƒ¼ã‚¹ã§ã‚ã‚Œã°<code>rerere.enabled true</code>ã®ãŠã‹ã’ã§ã€å¤‰æ›´ã‚’è¨˜éŒ²ã—ã¦ãŠãæ“ä½œãŒè‡ªå‹•åŒ–ã•ã‚Œã¾ã™ã€‚æœ€åˆã®ä¸€å›ã®ä¿®æ­£ã¯å¿…è¦ã§ã™ã—ã€ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆæ™‚ã®<code>git add</code> &#x2F; <code>git rebase --continue</code>æ“ä½œã ã‘ã¯å¿…è¦ã§ã™ãŒã€ä½•åº¦ã‚‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã„ã¦ä¿®æ­£ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p><p>rebaseå¾Œã¯é€šå¸¸ã®pushã¯å¤±æ•—ã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã—ã¾ã„ã¾ã™ãŒã€<code>--force-with-lease</code>ã¨ã„ã†<code>--force</code>ã®ã‚ˆã†ã§<code>--force</code>ã§ã¯ãªã„ã€ã¡ã‚‡ã£ã¨<code>--force</code>ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã„ã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git push origin [ãƒ–ãƒ©ãƒ³ãƒ] --force-with-lease</span><br></pre></td></tr></table></figure><h2 id="5-GitHubä¸Šã§ãƒãƒ¼ã‚¸"><a href="#5-GitHubä¸Šã§ãƒãƒ¼ã‚¸" class="headerlink" title="5. GitHubä¸Šã§ãƒãƒ¼ã‚¸"></a>5. GitHubä¸Šã§ãƒãƒ¼ã‚¸</h2><p>Squash and Mergeã§ãƒãƒ¼ã‚¸ã—ã¾ã™ã€‚Squash and Mergeã™ã‚‹ã¨ã“ã®ãƒ–ãƒ©ãƒ³ãƒã¯ã‚‚ã†å†åˆ©ç”¨ã§ããªã„ã¨ã„ã†ã‹ã€ã“ã“ã‹ã‚‰æ–°ã—ã„ã‚³ãƒŸãƒƒãƒˆã‚’ä¼¸ã°ã—ã¦ãƒãƒ¼ã‚¸ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆã™ã‚‹ã®ã§ãƒ–ãƒ©ãƒ³ãƒã¯å‰Šé™¤ã—ã¾ã—ã‚‡ã†ã€‚ãƒ­ãƒ¼ã‚«ãƒ«ã‚‚ã§ã™ã€‚</p><p>æ°—è»½ã«Pull Requestã«å«ã¾ã‚Œã‚‹1ã‚³ãƒŸãƒƒãƒˆã ã‘ã‚’å–ã‚Šæ¶ˆã™ã¨ã„ã£ãŸã“ã¨ã‚‚ã§ããªããªã‚Šã¾ã™ã€‚</p><h1 id="Gitæ“ä½œã®è€ƒãˆæ–¹"><a href="#Gitæ“ä½œã®è€ƒãˆæ–¹" class="headerlink" title="Gitæ“ä½œã®è€ƒãˆæ–¹"></a>Gitæ“ä½œã®è€ƒãˆæ–¹</h1><p>ä¸Šè¨˜ã®ãƒ¢ãƒ‡ãƒ«æ“ä½œã«ãŠã‘ã‚‹åŸºæœ¬çš„ãªGitæ“ä½œã®è€ƒãˆæ–¹ã«ã¤ã„ã¦ã‚‚è§¦ã‚Œã¦ãŠãã¾ã™ã€‚</p><p><code>develop</code>ä¸Šã§ã¯1ã‚³ãƒŸãƒƒãƒˆ&#x3D; &#x3D; 1 Pull Requestã¨ãªã‚‹ã‚ˆã†ã«ã—ã¾ã™ãŒã€ä¸€æ–¹ã§ã€Pull Requestä¸Šã§ã¯ç„¡ç†ã«ãƒãƒ¼ã‚¸ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚Pull Requestå‰ã«ã‚³ãƒŸãƒƒãƒˆã¯å¯èƒ½ãªã‚‰1ã¤ã«ã—ã¦ã‚‚è‰¯ã„ã¨ã¯æ€ã„ã¾ã™ãŒã€ç´ ç›´ã«ã‚³ãƒŸãƒƒãƒˆå±¥æ­´ã‚’é‡ã­ã¦ã„ãæ–¹é‡ã§ã™ã€‚</p><p>ã‚³ãƒŸãƒƒãƒˆã‚’ã¾ã¨ã‚ã‚‹squashæ“ä½œã¯GitHubä¸Šã§ã®ã¿è¡Œã„ã¾ã™ã€‚ãƒ­ãƒ¼ã‚«ãƒ«ã§squash mergeã‚’è‡ªåˆ†ã®æ‰‹ã§ã‚„ã‚‹ã¨ã„ã†ã“ã¨ã¯ã—ã¾ã›ã‚“ã€‚ã¾ãŸã€squash mergeã—ã¦ã—ã¾ã†ã¨ã€éƒ¨åˆ†çš„ãªä¿®æ­£ã¯é›£ã—ããªã‚‹ã®ã§Pull Requestä¸Šã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚„CIã®ãƒã‚§ãƒƒã‚¯ã¯ãã¡ã‚“ã¨è¡Œã†æƒ³å®šã§ã™ã€‚</p><p>rebaseã¯ã€Œéå»ã‚’æ›¸ãæ›ãˆã‚‹æ©Ÿèƒ½ã€ã§ã™ãŒã€æ™®æ®µä½¿ã†ã®ã¯ã€ãƒãƒ¼ã‚¸ã—ã‚„ã™ã„ã‚ˆã†ã«è‡ªåˆ†ã®ã‚³ãƒŸãƒƒãƒˆã‚’æœ€æ–°ã®ã‚³ãƒŸãƒƒãƒˆã‚ˆã‚Šã‚‚å¾Œã«æŒã£ã¦ã„ãã€ã¨ã„ã†æ–¹å‘ã®ä¿®æ­£ã®ã¿ã§ã™ã€‚</p><p>ã‚³ãƒŸãƒƒãƒˆã—ãŸã‚ã¨ã«ä½•ã‹ä¸å…·åˆã‚’è¦‹ã¤ã‘ã¦æˆ»ã™å ´åˆã¯ã€ãã®ä¿®æ­£ã®Pull Requestã‚’ä¸Šã’ã¦ä¿®æ­£ã™ã‚Œã°ã„ã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚rebaseã§éå»ã®ã‚³ãƒŸãƒƒãƒˆã‚’ä¿®æ­£ã—ã¦ç„¡ã‹ã£ãŸã“ã¨ã«ã™ã‚‹ã€ã¾ã§ã¯ä¸è¦ã‹ãªã¨ã€‚</p><p><code>push --force</code>(<code>--force-with-lease</code>)ã¯ã€rebaseã‚’åæ˜ ã™ã‚‹ãŸã‚ã ã‘ã«åˆ©ç”¨ã—ã¾ã™ã€‚</p><h1 id="ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•"><a href="#ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•" class="headerlink" title="ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•"></a>ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•</h1><p>ã“ã®è¨­å®šã¨ã‹ä½œæ³•ã§ã‚‚ã¾ã 100ç‚¹ã§ã¯ãªã„ã¨ã„ã†ã‹ã€ä¸€éƒ¨ã¡ã‚‡ã£ã¨ã—ãŸå›°ã‚Šäº‹ã¯ã‚ã‚Šã¾ã™ã€‚</p><h2 id="rebaseã‚’ã—ã£ã‹ã‚Šè¦šãˆã‚‹å¿…è¦ãŒã‚ã‚‹"><a href="#rebaseã‚’ã—ã£ã‹ã‚Šè¦šãˆã‚‹å¿…è¦ãŒã‚ã‚‹" class="headerlink" title="rebaseã‚’ã—ã£ã‹ã‚Šè¦šãˆã‚‹å¿…è¦ãŒã‚ã‚‹"></a>rebaseã‚’ã—ã£ã‹ã‚Šè¦šãˆã‚‹å¿…è¦ãŒã‚ã‚‹</h2><p>ä»Šã¾ã§ã¯rebaseæ€–ã„ã¨æ€ã£ã¦ã„ãŸäººã‚‚ãã¡ã‚“ã¨ã‚„ã£ã¦ã„ãå¿…è¦æ€§ãŒã‚ã‚‹ã‹ãªã¨æ€ã„ã¾ã™ã€‚ã—ã‹ã—ã€ã‚„ã‚‹ã“ã¨ã¨ã„ãˆã°ä¿®æ­£å¾Œã«<code>git commit</code>ã®ä»£ã‚ã‚Šã«<code>git rebase --continue</code>ã‚’ã™ã‚‹ãã‚‰ã„ã¨ã€ã‚³ãƒŸãƒƒãƒˆæ•°åˆ†ç¹°ã‚Šè¿”ã™å¿…è¦ãŒã‚ã‚‹ç‚¹ã§ã™ã­ã€‚</p><p>ã„ã¾ã¾ã§mergeã®æ–¹ãŒã„ã„ã‚ˆã€ã¨ã„ã†æ„è¦‹ãŒã‚ã£ãŸã®ã¯ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆç™ºç”Ÿæ™‚ã®å‡¦ç†ãŒrebaseã®æ–¹ãŒã¡ã‚‡ã£ã¨é¢å€’ã ã£ãŸã€ã¨ã„ã†ã“ã¨ã«å°½ãã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚<code>rerere.enabled true</code>ã§ã ã„ã¶æ¥½ã«ãªã£ãŸã¨ã¯ã„ãˆã€rebaseå…ƒã¨ã®å·®ã®ã‚³ãƒŸãƒƒãƒˆæ•°ãŒå¢—ãˆã¦ãã‚‹ã¨ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆç™ºç”Ÿæ™‚ãŒå¤§å¤‰ã«ãªã‚Šã¾ã™ã€‚</p><p>ã‚ã¨ã¯rebaseæ™‚ã¯ã€ä»–ã®äººã®ä¿®æ­£ãŒãƒ¡ã‚¤ãƒ³ã§è‡ªåˆ†ã®ã‚³ãƒŸãƒƒãƒˆãŒã‚µãƒ–å´ã«ãªã‚‹ã¨ã„ã†ã®ãŒã¡ã‚‡ã£ã¨ã‚ã‹ã‚Šã«ãã„ã¨ã‹ã¯ã‚ã‚Šã¾ã™ãŒã€ã“ã“ã¯ã™ãã«æ…£ã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚</p><h2 id="branch-dã§ãƒ–ãƒ©ãƒ³ãƒãŒæ¶ˆã›ãªã„"><a href="#branch-dã§ãƒ–ãƒ©ãƒ³ãƒãŒæ¶ˆã›ãªã„" class="headerlink" title="branch -dã§ãƒ–ãƒ©ãƒ³ãƒãŒæ¶ˆã›ãªã„"></a><code>branch -d</code>ã§ãƒ–ãƒ©ãƒ³ãƒãŒæ¶ˆã›ãªã„</h2><p>GitHubç­‰ã§squash and mergeã‚’é¸ã¶ã¨ã€è¤‡æ•°ã®ã‚³ãƒŸãƒƒãƒˆãŒãƒãƒ¼ã‚¸ã•ã‚ŒãŸ1ã¤ã®ã‚³ãƒŸãƒƒãƒˆã«ãªã‚Šã¾ã™ã€‚ã‚³ãƒŸãƒƒãƒˆãŒä½œã‚Šæ›¿ãˆã‚‰ã‚Œã¾ã™ã€‚ãƒãƒ¼ã‚¸æ¸ˆã¿ã®<code>develop</code>ã‚’fetchã—ã¦ã‚‚ã€åŒä¸€ã‚³ãƒŸãƒƒãƒˆã¯å­˜åœ¨ã—ãªã„ã‚ã‘ã§ã€<code>branch -d</code>ã§ã¯featureãƒ–ãƒ©ãƒ³ãƒãŒæ¶ˆã›ã¾ã›ã‚“ã€‚å¼·åˆ¶çš„ãªå‰Šé™¤ã®<code>branch -D</code>ã‚’ä½¿ã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p>åŸºæœ¬çš„ã«ã‚„ã‚‹ã“ã¨ã¯ãªã„ã¨æ€ã„ã¾ã™ãŒã€ãƒãƒ¼ã‚¸æ¸ˆã¿ã®ä½œæ¥­ãƒ–ãƒ©ãƒ³ãƒã§ãã®ã¾ã¾ä¿®æ­£ä½œæ¥­ã‚’ç¶™ç¶šã™ã‚‹ã¨ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆãŒå¿…ãšç™ºç”Ÿã™ã‚‹ã¨ã„ã†ã®ã¯ã‚ã‚Šã¾ã™ãŒã€ã“ã‚Œã¯ã¾ã‚å•é¡Œã«ã¯ãªã‚‰ãªã„ã¨æ€ã„ã¾ã™ã€‚ä½œæ¥­ãƒ•ãƒ­ãƒ¼ãŒæ‚ªã„ã€‚</p><h2 id="squashã—ã¦ã—ã¾ã†ã¨éƒ¨åˆ†çš„ãªã‚³ãƒŸãƒƒãƒˆã®å–ã‚Šæ¶ˆã—ãŒä¸èƒ½ã«ãªã‚‹"><a href="#squashã—ã¦ã—ã¾ã†ã¨éƒ¨åˆ†çš„ãªã‚³ãƒŸãƒƒãƒˆã®å–ã‚Šæ¶ˆã—ãŒä¸èƒ½ã«ãªã‚‹" class="headerlink" title="squashã—ã¦ã—ã¾ã†ã¨éƒ¨åˆ†çš„ãªã‚³ãƒŸãƒƒãƒˆã®å–ã‚Šæ¶ˆã—ãŒä¸èƒ½ã«ãªã‚‹"></a>squashã—ã¦ã—ã¾ã†ã¨éƒ¨åˆ†çš„ãªã‚³ãƒŸãƒƒãƒˆã®å–ã‚Šæ¶ˆã—ãŒä¸èƒ½ã«ãªã‚‹</h2><p>ãƒãƒ¼ã‚¸å¾Œã«Pull Requestã«å•é¡ŒãŒã‚ã£ãŸã¨åˆ¤æ˜ã—ãŸã¨ã—ã¦å–ã‚Šæ¶ˆãã†ã¨ã—ãŸå ´åˆã€Squashã—ã¦ã„ãªã‘ã‚Œã°å†…éƒ¨ã«å«ã¾ã‚Œã‚‹ã‚³ãƒŸãƒƒãƒˆãŒã°ã‚‰ã°ã‚‰ã«ã‚ã‚‹ã®ã§ä¸€éƒ¨ã ã‘ã‚’æ¶ˆã™ãªã©ã‚‚å¯èƒ½ã§ã™ã€‚ã—ã‹ã—ã€Squashã—ã¦ã—ã¾ã†ã¨ã€å±¥æ­´ä¸Šã¯1ã¤ã®ã‚³ãƒŸãƒƒãƒˆã«ãªã£ã¦ã—ã¾ã†ã®ã§ã€ä¸€éƒ¨ã ã‘ã‚’ãªã‹ã£ãŸã“ã¨ã«ã¯ã§ãã¾ã›ã‚“ã€‚</p><p>å–ã‚Šæ¶ˆã—ã¯GitHubä¸Šã®revertæ“ä½œã§è‰¯ã„ã¨æ€ã„ã¾ã™ãŒã€ã“ã‚Œã ã¨ã€€Pull Requestã®å˜ä½ã§ã®å–ã‚Šæ¶ˆã—ã«ãªã‚Šã¾ã™ã€‚ã§ã‹ã™ãã‚‹Pull Requestã«ãªã‚‰ãªã„ã‚ˆã†ã«ã€å°ã•ã„æ©Ÿèƒ½ã«åˆ†ã‘ã¦ã‚³ãƒŸãƒƒãƒˆã—ã¦ã„ãã‚ˆã†ãªé…æ…®ã¯å¿…è¦ã¨ãªã‚‹ã§ã—ã‚‡ã†ã€‚</p><h1 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h1><p>Gitã®ãŠã‚‚ã—ã‚ã•ï¼ˆé›£ã—ã•ï¼‰ã¯ã€è¤‡æ•°ã®æ©Ÿèƒ½ã®æ›ã‘ç®—ã§ã€ä¾¿åˆ©ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒå¤‰ã‚ã£ã¦ãã‚‹ã¨ã“ã‚ã§ã™ã€‚</p><p><code>git config rerere.enabled true</code>ãŒå…¥ã£ãŸãŠã‹ã’ã§ã€é•·æœŸé–“ç”Ÿå­˜ã—ã€<code>develop</code>ã‹ã‚‰ãªã‚“ã©ã‚‚å¤‰æ›´ã‚’å–ã‚Šè¾¼ã‚€ã‚ˆã†ãªã‚±ãƒ¼ã‚¹ãŒæ¥½ã«ãªã‚Šã¾ã—ãŸã€‚<code>--force-with-lease</code>ã¨ã„ã†ã¡ã‚‡ã£ã¨å®‰å…¨ãª<code>push --force</code>ã‚‚å…¥ã‚Šã¾ã—ãŸã€‚</p><p>æœ€åˆã«ãƒ¡ãƒ¼ãƒ«ã§ãƒ‘ãƒƒãƒã‚’é€ã‚‹ã‚±ãƒ¼ã‚¹ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã—ãŸãŒã€å®Ÿéš›ã«ã¯ã¾ã ç¾å½¹ã§ã€æœ€è¿‘ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã§ã‚‚ç€å®Ÿã«æ©Ÿèƒ½å¼·åŒ–ã¯ã•ã‚Œã¦ã„ã¾ã™ã€‚ã§ã™ãŒã€GitHubã‚„GitLabä¸»ä½“ã®é–‹ç™ºã¨ã„ã†ãƒ•ãƒ­ãƒ¼ã‚’è€ƒãˆã‚‹ã¨ã€ç€å®Ÿã«rebaseã‚’ä¾¿åˆ©ã«ã™ã‚‹æ©Ÿèƒ½ãŒå¼·åŒ–ã•ã‚Œã¦ãŠã‚Šã€ä»Šå¾Œã‚‚ã“ã®æ–¹å‘æ€§ã§ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’è€ƒãˆã¦ã„ã‘ã°ã©ã‚“ã©ã‚“ä¾¿åˆ©ã«ãªã£ã¦ã„ããã†ã§ã™ã€‚ã‚ã¨ã¯ã€rebaseã®ç¹°ã‚Šè¿”ã—ã®continueãŒè»½æ¸›ã•ã‚Œã‚‹æ©Ÿèƒ½ãŒå…¥ã£ãŸã‚‰å®Œç’§ã§ã™ã­ã€‚ãã‚Œã«æœŸå¾…ã€‚</p><h1 id="ãŠã¾ã‘-pull-rebase-trueã‹ã€pull-ff-onlyã‹"><a href="#ãŠã¾ã‘-pull-rebase-trueã‹ã€pull-ff-onlyã‹" class="headerlink" title="ãŠã¾ã‘: pull.rebase trueã‹ã€pull.ff onlyã‹"></a>ãŠã¾ã‘: <code>pull.rebase true</code>ã‹ã€<code>pull.ff only</code>ã‹</h1><p>ãƒ­ãƒ¼ã‚«ãƒ«ã§ã¯ä½•ã‚‚è¨­å®šã—ãªã„(<code>git config pull.rebase false</code>ç›¸å½“)ã¨ã€git pullã—ã¦ããŸã¨ãã«ãƒãƒ¼ã‚¸ã‚’è¡ŒãŠã†ã¨ã—ã¾ã™ã€‚ãã†ã™ã‚‹ã¨ãƒãƒ¼ã‚¸ã‚³ãƒŸãƒƒãƒˆãŒå‡ºã¦ã—ã¾ã†ã‚ã‘ã§ä»Šå›ã®èª¬æ˜ã®ã€Œãªã‚‹ã¹ãå±¥æ­´ã¯ç¶ºéº—ã«ã€ã¨é•ã†çµæœã«ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚ãã‚Œä»¥å¤–ã®çµæœã‚’å¾—ã‚‹è¨­å®šã¨ã—ã¦ã¯ã€æ¬¡ã®2ç¨®é¡ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã™ã€‚</p><ul><li><code>git config pull.ff only</code></li><li><code>pull.rebase true</code></li></ul><p>åŸºæœ¬çš„ã«ä»–ã®ä¿®æ­£ãŒå…¥ã‚‹<code>develop</code>ãƒ–ãƒ©ãƒ³ãƒä¸Šã§ç›´æ¥ä½œæ¥­ã—ãªã„é™ã‚Šã¯ã€<code>pull</code>ã—ã¦ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆã™ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã¾ãŸã€1ã¤ã®Pull Requestã‚’è¤‡æ•°äººã§ä¿®æ­£ã™ã‚‹ã“ã¨ã¯ãªã„ã€ã¨ã„ã†å‰æã«ç«‹ã¦ã°<code>pull.ff only</code>ã§è‰¯ã„ã‹ã¨æ€ã„ã¾ã™ã€‚</p><p>ãã‚Œãã‚Œã®çŠ¶æ³ã‚„è¨­å®šã”ã¨ã®git pullã§ã©ã†ãªã‚‹ã‹ã‚’è¡¨ã§ã¾ã¨ã‚ã¾ã—ãŸã€‚</p><div class="scroll"><table><thead><tr><th align="left">è¨­å®š</th><th align="left">git pullå®Ÿè¡Œæ™‚</th><th align="left">æ“ä½œçµæœ</th><th align="left">ã©ã†ã™ã‚Œã°ã‚ˆã„ï¼Ÿ</th></tr></thead><tbody><tr><td align="left">pull.ff only</td><td align="left">ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«æœªã‚³ãƒŸãƒƒãƒˆã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹(ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆã—ã¦ãªã„)</td><td align="left">æˆåŠŸ</td><td align="left"></td></tr><tr><td align="left">pull.ff only</td><td align="left">ffå¯èƒ½ãªã‚³ãƒŸãƒƒãƒˆãŒã‚ã‚‹</td><td align="left">ã‚¨ãƒ©ãƒ¼</td><td align="left">(1)</td></tr><tr><td align="left">pull.ff only</td><td align="left">ffä¸å¯ãªã‚³ãƒŸãƒƒãƒˆãŒã‚ã‚‹</td><td align="left">ã‚¨ãƒ©ãƒ¼</td><td align="left">(1)</td></tr><tr><td align="left">pull.rebase true</td><td align="left">ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«æœªã‚³ãƒŸãƒƒãƒˆã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹(ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆã—ã¦ãªã„)</td><td align="left">ã‚¨ãƒ©ãƒ¼</td><td align="left">(2)</td></tr><tr><td align="left">pull.rebase true</td><td align="left">ffå¯èƒ½ãªã‚³ãƒŸãƒƒãƒˆãŒã‚ã‚‹</td><td align="left">æˆåŠŸ</td><td align="left"></td></tr><tr><td align="left">pull.rebase true</td><td align="left">ffä¸å¯ãªã‚³ãƒŸãƒƒãƒˆãŒã‚ã‚‹</td><td align="left">git rebaseãŒã‚¹ã‚¿ãƒ¼ãƒˆ</td><td align="left"></td></tr></tbody></table></div><p>è¡¨ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã®ã¯3ç®‡æ‰€(2ç¨®é¡)ã‚ã‚Šã¾ã™ã€‚</p><p>(1)ã®pull.ff onlyã®æ–¹ã¯ã€<code>git pull origin develop --rebase</code>ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦rebaseãƒ—ãƒ­ã‚»ã‚¹ã‚’å§‹ã‚ã‚Œã°å•é¡Œãªãã„ã‘ã¾ã™ã€‚</p><p>(2)ã¯ã‚³ãƒŸãƒƒãƒˆã™ã‚‹ã‚‚ã—ãã¯<code>git restore --staged &lt;ãƒ•ã‚¡ã‚¤ãƒ«&gt;...</code>ã§ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‹ã‚‰é™¤å¤–ã—ã¦å†å®Ÿè¡Œã™ã‚Œã°OKã§ã™ã€‚</p><p>åƒ•å€‹äººã¯æœ€å¾Œã¾ã§ã‚³ãƒŸãƒƒãƒˆã›ãšã«ä½œæ¥­ã—ã¦ã€pull requestå¯¸å‰ã«git addã™ã‚‹ã“ã¨ãŒå¤šã„ã®ã§ff onlyã®æ–¹ãŒä¾¿åˆ©ã ã£ãŸã‚Šã™ã‚‹ã®ã§ã™ãŒã€å‘¨ã‚Šã‚’è¦‹ã¦ã„ã‚‹ã¨ã“ã¾ã‚ã«ã‚³ãƒŸãƒƒãƒˆã™ã‚‹äººãŒå¤šã„ã®ã§ã€ãŠãã‚‰ã<code>pull.rebase true</code>ã®æ–¹ãŒè‰¯ã„äººãŒå¤šã„ã¨æ€ã„ã¾ã™ã€‚ãªã®ã§ã€ä»Šå›ã®ã“ã®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã§ã¯<code>pull.rebase true</code>ã®æ–¹ã‚’æ¨ã—ã¦ã„ã¾ã™ã€‚</p><h1 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h1><p><a href="https://qiita.com/tearoom6/items/0237080aaf2ad46b1963">https://qiita.com/tearoom6/items/0237080aaf2ad46b1963</a></p><ul><li><code>git config pull.rebase true</code></li><li><code>git config rerere.enabled true</code></li></ul><p><a href="https://blog-dry.com/entry/2024/02/26/090146">https://blog-dry.com/entry/2024/02/26/090146</a></p><ul><li><p><code>git commit --fixup</code></p></li><li><p><code>git push --force-with-lease</code></p></li></ul><p><a href="https://blog.colopl.dev/entry/2022/10/07/105919">https://blog.colopl.dev/entry/2022/10/07/105919</a></p><ul><li><code>scaler clone</code></li></ul><p><a href="https://zenn.dev/mary_pp/articles/eaac544eaf600a">https://zenn.dev/mary_pp/articles/eaac544eaf600a</a></p><ul><li>git push â€“force-with-lease â€“force-if-includes</li></ul>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Programming/">Programming</category>
      
      
      <category domain="https://future-architect.github.io/tags/Git/">Git</category>
      
      <category domain="https://future-architect.github.io/tags/%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E7%AE%A1%E7%90%86/">ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†</category>
      
      <category domain="https://future-architect.github.io/tags/%E3%83%96%E3%83%A9%E3%83%B3%E3%83%81%E9%81%8B%E7%94%A8/">ãƒ–ãƒ©ãƒ³ãƒé‹ç”¨</category>
      
      
      <comments>https://future-architect.github.io/articles/20240410a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Testcontainersã‚’ç”¨ã„ã¦ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå‰ã® docker compose up ã‚’ç„¡ãã—ã€Goã§ä¸¦åˆ—ãƒ†ã‚¹ãƒˆã™ã‚‹</title>
      <link>https://future-architect.github.io/articles/20240409a/</link>
      <guid>https://future-architect.github.io/articles/20240409a/</guid>
      <pubDate>Mon, 08 Apr 2024 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;p&gt;&lt;a href=&quot;/articles/20240408a/&quot;&gt;æ˜¥ã®å…¥é–€ç¥­ã‚Š2024&lt;/a&gt;ã®1è¨˜äº‹ç›®ã§ã™ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot;</description>
          
        
      
      
      
      <content:encoded><![CDATA[<p><a href="/articles/20240408a/">æ˜¥ã®å…¥é–€ç¥­ã‚Š2024</a>ã®1è¨˜äº‹ç›®ã§ã™ã€‚</p><h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><p>TIGçœŸé‡ã§ã™ã€‚</p><p>Testcontainers ã‚’ç”¨ã„ã¦ã€å˜ä½“ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå‰ã« <code>docker compose up -d</code> ç„¡ã—ã§ã€PostgreSQLã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹å˜ä½“ãƒ†ã‚¹ãƒˆã‚’è¡Œã†ã€å…¥é–€è¨˜äº‹ã§ã™ã€‚</p><p>æ©æµã¯æ¬¡ã®ã‚ˆã†ãªé–‹ç™ºè€…ä½“æ„Ÿã®å‘ä¸ŠãŒå€‹äººçš„ã«ã‚ã‚Šã¾ã™ã€‚</p><ul><li>ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã†ãˆã§ã€åˆ¥ãƒ—ãƒ­ã‚»ã‚¹ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’èµ·å‹•ã—ã¦ãŠãå¿…è¦ãŒã‚ã‚‹ã¨ã„ã£ãŸå‰ææ¡ä»¶ã‚’è€ƒãˆãªãã¦ã‚‚æ¸ˆã‚€ãŸã‚ã€ãƒ†ã‚¹ãƒˆã‚’è¡Œã†ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã«é›†ä¸­ã§ãã‚‹<ul><li><code>docker compose up -d</code> æ‰“ãŸãªã„ã ã‘ã ãŒã€ãƒ†ã‚¹ãƒˆã«å¿…è¦ãªã‚³ãƒ³ãƒ†ãƒŠã‚’è€ƒæ…®ã—ãªãã¦ã‚‚æ¸ˆã‚€</li><li>åœæ­¢ã—å¿˜ã‚Œã¦ã€åˆ¥ã®ãƒªãƒã‚¸ãƒˆãƒªã®é–‹ç™ºã™ã‚‹ã¨ãã«æ··ä¹±ã—ãªãã¦ã‚‚æ¸ˆã‚€</li></ul></li><li>ä¸¦åˆ—ãƒ†ã‚¹ãƒˆã—ã‚„ã™ããªã‚‹ã®ã§ã€ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œé€Ÿåº¦ãŒå‘ä¸Šã™ã‚‹<ul><li>Goã«ãŠã„ã¦ã€è¤‡æ•°ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’åŒæ™‚ã«ãƒ†ã‚¹ãƒˆã™ã‚‹ã¨ãã€ <code>-p 1</code> ã§çµã‚‰ãšã«æ¸ˆã‚€</li></ul></li></ul><h2 id="Testcontainers-ã¨ã¯"><a href="#Testcontainers-ã¨ã¯" class="headerlink" title="Testcontainers ã¨ã¯"></a>Testcontainers ã¨ã¯</h2><ul><li><a href="https://testcontainers.com/">https://testcontainers.com/</a></li></ul><p>ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ä¸Šã§ä»»æ„ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ãƒ»åœæ­¢ã§ãã‚‹ãƒ‰ãƒ©ã‚¤ãƒã®ã‚ˆã†ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚Java, Go, Python, Rustãªã©æ§˜ã€…ãªè¨€èªã§ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚æ¬¡ã¯Goã§redisã‚’èµ·å‹•ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚Dockerfileã§è¨˜è¼‰ã•ã‚Œã¦ã„ãŸå†…å®¹ã‚’ã€Goã®æ§‹é€ ä½“ã«æ¸¡ã™ã‚‹ã¨ã‚³ãƒ³ãƒ†ãƒŠãŒèµ·å‹•ã—ãã†ã ã¨ã„ã†ã“ã¨ãŒåˆ†ã‹ã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">container, err := testcontainers.GenericContainer(ctx, testcontainers.GenericContainerRequest&#123;</span><br><span class="line">    ContainerRequest: testcontainers.ContainerRequest&#123;</span><br><span class="line">        Image:        <span class="string">&quot;redis:5.0.3-alpine&quot;</span>,</span><br><span class="line">        ExposedPorts: []<span class="type">string</span>&#123;<span class="string">&quot;6379/tcp&quot;</span>&#125;,</span><br><span class="line">        WaitingFor:   wait.ForLog(<span class="string">&quot;Ready to accept connections&quot;</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">    Started:          <span class="literal">true</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>Testcontainersã®APIã¨ã—ã¦ã¯Dockerfileã‚’èª­ã¿è¾¼ã‚“ã§èµ·å‹•ã•ã›ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</p><p>ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã¨ã®çµ„ã¿åˆã‚ã›ã¯ã€<a href="https://testcontainers.com/getting-started/">getting-started</a>ã«ã‹ã‹ã‚Œã¦ã„ãŸå›³ãŒåˆ†ã‹ã‚Šã‚„ã™ã„ã§ã™ã€‚</p><p>ã€ŒSet Upã€ã«ã¦TestcontainersçµŒç”±ã§ã‚³ãƒ³ãƒ†ãƒŠã‚’å–ã‚Šä¸Šã’ã€ãƒ†ã‚¹ãƒˆã§ãã‚Œã‚‰ç«‹ã¡ä¸Šã’ãŸã‚µãƒ¼ãƒ“ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã€ãƒ†ã‚¹ãƒˆçµ‚äº†å¾Œã«ã‚³ãƒ³ãƒ†ãƒŠã‚’å‰Šé™¤ã™ã‚‹ã€ã¨ã„ã†æµã‚Œã§ã™ã€‚</p><img src="/images/20240409a/test-workflow.png" alt="test-workflow.png" width="820" height="326" loading="lazy"><p>ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ä¸Šã§ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã™ã‚‹ã¨ã„ã†ç™ºæƒ³ãŒãªã„å ´åˆã¯ã€æ‰‹å‹•ã§ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã—ãŸã‚Šã€ãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆä¸Šï¼ˆMakefileã‚„Taskfileï¼‰ã«è¨˜è¼‰ã—ã¦ã„ãŸã‹ã¨æ€ã„ã¾ã™ãŒã€å˜ãªã‚‹èµ·å‹•ã¯ã¨ã‚‚ã‹ãã€ã‚³ãƒ³ãƒ†ãƒŠã®ç ´æ£„ã‚’å«ã‚ãŸãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†ã¯å°‘ã—æ‰‹é–“ã§ã—ãŸã€‚ã¾ãŸã€ã‚ˆãã‚ã‚ŠãŒã¡ãªãƒŸã‚¹ã¯ã€ã‚³ãƒ³ãƒ†ãƒŠã¯èµ·å‹•ã—ãŸã‘ã©ã€å¿…è¦ãªãƒªã‚½ãƒ¼ã‚¹ãƒªã‚½ãƒ¼ã‚¹ï¼ˆä¾‹ãˆã°RDBã ã¨ãƒ†ãƒ¼ãƒ–ãƒ«ã€S3ã ã¨ãƒã‚±ãƒƒãƒˆãªã©ï¼‰ã®ä½œæˆãŒçµ‚ã‚ã£ã¦ã„ãªã„ã®ã«ã€ãƒ†ã‚¹ãƒˆãŒå®Ÿè¡Œã•ã‚Œã¦Failã«ãªã£ã¦ã—ã¾ã†ã¨ã„ã†ãƒŸã‚¹ã‚‚ç§ã¯ã‚„ã‚ŠãŒã¡ã§ã™ã€‚</p><p>Testcontainersã¯ãã‚Œã‚‰ã®è² è·ã‚’ä½æ¸›ã—ã¦ãã‚Œã¾ã™ã€‚</p><h2 id="PostgreSQLã‚’åˆ©ç”¨ã™ã‚‹"><a href="#PostgreSQLã‚’åˆ©ç”¨ã™ã‚‹" class="headerlink" title="PostgreSQLã‚’åˆ©ç”¨ã™ã‚‹"></a>PostgreSQLã‚’åˆ©ç”¨ã™ã‚‹</h2><p>RDBï¼ˆPostgreSQLï¼‰ã‚’ãƒ†ã‚¹ãƒˆã§ç”¨ã„ã‚‹ã¨ãã«ã€å¿…è¦ã¨ãªã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ã¯ä½œæˆã•ã‚Œã¦ã„ã‚‹å‰æãŒå¤šã„ã§ã—ã‚‡ã†ã€‚ä¾‹ãˆã°æ¬¡ã®ã‚ˆã†ã« schema ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã«CREATEæ–‡ã®SQLãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ã¦ã„ã‚‹ã¨ã—ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ schema  <span class="comment"># DDL</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ create_m_xxx_xxx_1.sql</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ create_m_xxx_xxx_2.sql</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ ...</span><br><span class="line">â”‚Â Â  â””â”€â”€ create_m_xxx_xxx_9.sql</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€ app    <span class="comment"># å„ã‚¢ãƒ—ãƒªï¼ˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã‚’IDç®¡ç†ã™ã‚‹å¤§äººãªç®¡ç†ã‚’ã—ã¦ã„ã‚‹ã¨ã—ã¾ã™ï¼‰</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ bl01</span><br><span class="line">â”‚Â Â  |     â”œâ”€â”€ ...</span><br><span class="line">|   |  Â Â  â””â”€â”€ handler_test.go <span class="comment"># ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ bl02</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ bl03</span><br><span class="line">â”‚Â Â  â””â”€â”€ ...</span><br><span class="line">â””â”€â”€ ...</span><br></pre></td></tr></table></figure><p>PostgreSQLã®ã‚ªãƒ•ã‚£ã‚·ãƒ£ãƒ«ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã¯ã€<a href="https://hub.docker.com/_/postgres#:~:text=and%20POSTGRES_DB.-,Initialization%20scripts,-If%20you%20would"><code>/docker-entrypoint-initdb.d/</code> é…ä¸‹ã«SQLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹ã¨ã€èµ·å‹•æ™‚ã«SQLã‚’å®Ÿè¡Œã—ã¦ãã‚Œã¾ã™</a>ã€‚ã“ã‚Œã‚’Testcontainersã‚’ç”¨ã„ã¦DDLå®Ÿè¡Œæ¸ˆã¿ã®PostgreSQLã‚’èµ·å‹•ã—ã¾ã™ã€‚</p><h2 id="moduleã®åˆ©ç”¨"><a href="#moduleã®åˆ©ç”¨" class="headerlink" title="moduleã®åˆ©ç”¨"></a>moduleã®åˆ©ç”¨</h2><p>Testcontainers ã«ã¯Dockerfileã§æŒ‡å®šã§ãã‚‹å†…å®¹ã‚’å®Ÿç¾ã™ã‚‹APIãŒæƒã£ã¦ã„ã‚‹ãŸã‚ã€è‡ªåˆ†ãªã‚Šã«ç´°ã‹ããƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã—ã¦ã‚‚è‰¯ã„ã‹ã¨æ€ã„ã¾ã™ãŒã€ä¸€èˆ¬çš„ã«ã¯ã€Œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€ã¨å‘¼ã°ã‚Œã‚‹ã€è‰¯ã„æ„Ÿã˜ã«å®Ÿè£…ã•ã‚ŒãŸãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã®ã‚ˆã†ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’çµŒç”±ã—ã¦åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒå¤šã„ã‚ˆã†ã§ã™ã€‚ã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ä¸­ã«ã¯ã€å„ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®ãƒ™ãƒ³ãƒ€ãƒ¼ã¨ææºã—ã¦ä½œã‚‰ã‚ŒãŸå…¬å¼ã¨å‘¼ã°ã‚Œã‚‹ã‚‚ã®ã‚‚ã‚ã‚Šã€ã‚¯ã‚ªãƒªãƒ†ã‚£ãŒé«˜ãä¿ãŸã‚Œã¦ã„ã‚‹ãŸã‚ã€åŸºæœ¬çš„ã«ã“ã“ã«ã‚ã‚‹ï¼‹åˆ©ç”¨ã—ãŸã„è¨€èªã§å­˜åœ¨ã™ã‚‹ã®ã§ã‚ã‚Œã°ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«çµŒç”±ã§Testcontainersã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã‚’ç§ã‚‚æ¨å¥¨ã—ã¾ã™ã€‚ä½ãƒ¬ãƒ™ãƒ«ã®APIã®åˆ©ç”¨ã‚’æœ€åˆã¯è©¦ã—ã¦ã„ã¾ã—ãŸãŒã€ã‚¤ãƒã‚¤ãƒä¸Šæ‰‹ãå‹•ã‹ã›ãªã‹ã£ãŸã¨ã“ã‚ã‚’ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’åˆ©ç”¨ã™ã‚‹ã¨ã™ãã«è§£æ¶ˆã•ã‚ŒãŸã“ã¨ãŒä½•åº¦ã‹ã‚ã‚Šã¾ã—ãŸã€‚</p><ul><li><a href="https://testcontainers.com/modules/">https://testcontainers.com/modules/</a></li></ul><p><a href="https://testcontainers.com/modules/postgresql/">PostgreSQLãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«</a>ã¯Goå¯¾å¿œã‚‚ã—ã¦ã„ã¾ã™ã®ã§ãã®ã¾ã¾åˆ©ç”¨ã§ãã¾ã™ã€‚</p><p>ä»Šå›ã¯è¤‡æ•°ã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã§ã‚³ãƒ³ãƒ†ãƒŠã‚’å‘¼ã³å‡ºã—ãŸã„ã®ã§ã€ãƒ˜ãƒ«ãƒ‘ãƒ¼ã¨ã—ã¦ <code>testonly/testcontainers.go</code> ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚Šã¾ã™ã€‚</p><p><code>/docker-entrypoint-initdb.d/</code> ã®èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã™ãŒã€PostgreSQLã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã¯ã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã”ã¨ã‚³ãƒ”ãƒ¼ã¯ã§ããªã„ãŸã‚ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€è¦§ã‚’å–å¾—ã—ã¦ã€ <code>postgres.WithInitScripts(scripts...)</code> ã§æ¸¡ã—ã¦ã„ã¾ã™ã€‚</p><p>æ¬¡ã®ãƒã‚¤ãƒ³ãƒˆã¨ã—ã¦ã€<code>testcontainers.WithWaitStrategy()</code> ã®éƒ¨åˆ†ã§ã™ãŒã€ã“ã‚Œã¯èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ä½œæˆã—ãŸãƒ†ãƒ¼ãƒ–ãƒ«ãŒå­˜åœ¨ã™ã‚‹ã¾ã§Waitã•ã›ã‚‹ã¨ã„ã†æŒ‡ç¤ºã§ã™ã€‚ä»–ã«ã‚‚ã‚³ãƒ³ãƒ†ãƒŠãŒèµ·å‹•ã™ã‚‹ã¾ã§Waitã™ã‚‹ãªã©æ§˜ã€…ãªæŒ‡å®šãŒã§ãã¾ã™ãŒã€ã“ã®ä¾‹ã§ã¯ <code>m_xxx_xxx_1 </code> ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå­˜åœ¨ã™ã‚‹ã¾ã§ç¢ºèªã•ã›ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã§ã€å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«ãŒä½œæˆã•ã‚Œãªã„ã¾ã¾ã€ãƒ†ã‚¹ãƒˆã§æ¤œè¨¼ã™ã‚‹ã‚¢ãƒ—ãƒªã‚³ãƒ¼ãƒ‰ãŒå‹•ã„ã¦ã—ã¾ã†ã“ã¨ã‚’é˜²ãã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>testcontainers.go</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> testonly</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;context&quot;</span></span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;log&quot;</span></span><br><span class="line"><span class="string">&quot;net&quot;</span></span><br><span class="line"><span class="string">&quot;os&quot;</span></span><br><span class="line"><span class="string">&quot;testing&quot;</span></span><br><span class="line"><span class="string">&quot;time&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;github.com/docker/go-connections/nat&quot;</span></span><br><span class="line"><span class="string">&quot;github.com/testcontainers/testcontainers-go&quot;</span></span><br><span class="line"><span class="string">&quot;github.com/testcontainers/testcontainers-go/modules/postgres&quot;</span></span><br><span class="line"><span class="string">&quot;github.com/testcontainers/testcontainers-go/wait&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> PostgresContainer <span class="keyword">struct</span> &#123;</span><br><span class="line">postgres.PostgresContainer</span><br><span class="line">ConnectionString <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c PostgresContainer)</span></span> Down() &#123;</span><br><span class="line"><span class="keyword">if</span> err := c.Terminate(context.Background()); err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Printf(<span class="string">&quot;Could not stop postgres: %s\n&quot;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">SetupDB</span><span class="params">(t *testing.T)</span></span> *PostgresContainer &#123;</span><br><span class="line">t.Helper()</span><br><span class="line">ctx := context.Background()</span><br><span class="line"></span><br><span class="line">entries, err := os.ReadDir(<span class="string">&quot;../../schema&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">t.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">scripts := <span class="built_in">make</span>([]<span class="type">string</span>, <span class="number">0</span>, <span class="built_in">len</span>(entries))</span><br><span class="line"><span class="keyword">for</span> _, e := <span class="keyword">range</span> entries &#123;</span><br><span class="line">scripts = <span class="built_in">append</span>(scripts, <span class="string">&quot;../../schema&quot;</span>+e.Name())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pgContainer, err := postgres.RunContainer(ctx,</span><br><span class="line">testcontainers.WithImage(<span class="string">&quot;postgres:15.5&quot;</span>),</span><br><span class="line">postgres.WithInitScripts(scripts...),</span><br><span class="line">postgres.WithDatabase(<span class="string">&quot;postgres&quot;</span>),</span><br><span class="line">postgres.WithUsername(<span class="string">&quot;local&quot;</span>),</span><br><span class="line">postgres.WithPassword(<span class="string">&quot;pass&quot;</span>),</span><br><span class="line">testcontainers.WithWaitStrategy(</span><br><span class="line">wait.ForSQL(<span class="string">&quot;5432&quot;</span>, <span class="string">&quot;postgres&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(host <span class="type">string</span>, port nat.Port)</span></span> <span class="type">string</span> &#123;</span><br><span class="line"><span class="keyword">return</span> fmt.Sprintf(<span class="string">&quot;postgres://local:pass@%s/postgres?sslmode=disable&quot;</span>, net.JoinHostPort(host, port.Port()))</span><br><span class="line">&#125;).WithQuery(<span class="string">&quot;select 1 from m_xxx_xxx_9 limit 1&quot;</span>).WithPollInterval(<span class="number">1</span>*time.Second).WithStartupTimeout(<span class="number">10</span>*time.Second)),</span><br><span class="line">)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">&quot;postgres run container: %s&quot;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">connStr, err := pgContainer.ConnectionString(ctx, <span class="string">&quot;sslmode=disable&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">t.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> &amp;PostgresContainer&#123;</span><br><span class="line">PostgresContainer: pgContainer,</span><br><span class="line">ConnectionString:  connStr,</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šè¨˜ã®ã‚ˆã†ãªãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚’ã€ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‹ã‚‰å‘¼ã³å‡ºã—ã¾ã™ã€‚</p><p>ãƒã‚¤ãƒ³ãƒˆã¯ã€æ¥ç¶šæ–‡å­—åˆ—ã‚’<code>pgContainer.ConnectionString</code> ã‹ã‚‰å–å¾—ã—ã¦ã„ã‚‹ã¨ã“ã‚ã§ã™ã€‚ç†ç”±ã§ã™ãŒTestcontainersã‚’ç”¨ã„ã‚‹ã¨ã€ãƒ›ã‚¹ãƒˆå´ã§åˆ©ç”¨ã™ã‚‹ãƒãƒ¼ãƒˆã¯ãƒ©ãƒ³ãƒ€ãƒ ã«æ±ºå®šã—ã¾ã™ã€‚ãã®ãŸã‚5432ã§æ±ºã‚æ‰“ã¡ã§ã¯ãªãã€Testcontainersã®PostgreSQLãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒå‰²ã‚Šå½“ã¦ãŸå€¤ã‚’åˆ©ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>handler_test.go</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestHandler_GetXxxXxx</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">pgContainer := testonly.SetupDB(t) <span class="comment">// PostgreSQLèµ·å‹•</span></span><br><span class="line">t.Cleanup(pgContainer.Down)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ã“ã®ä¾‹ã§ã¯jackc/pgx/v4 ã‚’åˆ©ç”¨ã—ã¦ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³æ¥ç¶š</span></span><br><span class="line">pool, err := pgxpool.Connect(context.Background(), pgContainer.ConnectionString)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">t.Fatalf(<span class="string">&quot;connect db for test ,dsn = %s: %v&quot;</span>, dsn, err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å€‹åˆ¥ã®ãƒ†ã‚¹ãƒˆ</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h2 id="Testcontainers-ã‚’ç”¨ã„ã‚‹ã¨-Goã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆã¯-package-by-feature-ãŒãƒãƒƒãƒã™ã‚‹ï¼Ÿ"><a href="#Testcontainers-ã‚’ç”¨ã„ã‚‹ã¨-Goã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆã¯-package-by-feature-ãŒãƒãƒƒãƒã™ã‚‹ï¼Ÿ" class="headerlink" title="Testcontainers ã‚’ç”¨ã„ã‚‹ã¨ Goã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆã¯ package by feature ãŒãƒãƒƒãƒã™ã‚‹ï¼Ÿ"></a>Testcontainers ã‚’ç”¨ã„ã‚‹ã¨ Goã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆã¯ package by feature ãŒãƒãƒƒãƒã™ã‚‹ï¼Ÿ</h2><p>Testcontainersã‚’ç”¨ã„ã‚‹ã¨ã€ä¾‹ãˆã° bl01, bl02é–“ã§å…±é€šã™ã‚‹DBãƒ†ãƒ¼ãƒ–ãƒ«ãŒå­˜åœ¨ã—ãŸã¨ã—ã¦ã‚‚ã€åˆ©ç”¨ã™ã‚‹ã‚³ãƒ³ãƒ†ãƒŠãŒåˆ¥ã«ãªã‚‹ãŸã‚ã€å½“ãŸã‚Šå‰ã§ã™ãŒã€ç‰¹æ®µã®å·¥å¤«ç„¡ã—ã§ä¸¦åˆ—ã«ãƒ†ã‚¹ãƒˆã‚’å‹•ã‹ã›ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ãƒ¢ãƒƒã‚¯ã®åˆ©ç”¨ã‚’ç„¡ã—ã«ãã‚Œã‚’ç°¡å˜ã«è¡Œãˆã‚‹ã®ã¯ç´ æ•µã ã¨æ„Ÿã˜ã¾ã™ã€‚</p><p>ã“ã®æ©æµã‚’å¾—ã‚„ã™ãã™ã‚‹ãŸã‚ã«ã¯ã€ <code>package by feature</code>ã€ã¤ã¾ã‚Šæ©Ÿèƒ½ã”ã¨ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ä½œã£ã¦ãŠãã¨ã‚ˆã„ã§ã—ã‚‡ã†ã€‚æ©Ÿèƒ½å˜ä½ã«ä¸¦åˆ—ã§ãƒ†ã‚¹ãƒˆãŒã§ãã€æ©Ÿèƒ½å˜ä½ã‚†ãˆãã‚Œãªã‚Šã«ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚é–“ãŒãªã‚‰ã•ã‚Œã¦ã„ã‚‹ã¨æ€ã†ã®ã§ã€ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚é–“ã®çŸ­ç¸®ãŒè¦‹è¾¼ã¿ã‚„ã™ã„ã¨è€ƒãˆã‚‰ã‚Œã‚‹ãŸã‚ã§ã™ã€‚</p><p>é€†ã«ã€<code>package by layer</code>ã€ã¤ã¾ã‚ŠDBã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©å±¤ï¼ˆcontroller, usecase, handlerãªã©ï¼‰ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’åˆ‡ã£ã¦ã€ãã®é…ä¸‹ã« <code>xxx_handler.go</code>, <code>yyy_handler.go</code> ãªã©ã‚’ãƒ•ãƒ©ãƒƒãƒˆã«ä¸¦ã¹ã¦é…ç½®ã‚’ã—ãªã„æ–¹ãŒè‰¯ã„ã¨æ€ã„ã¾ã—ãŸï¼ˆ<code>handler</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®é…ä¸‹ã«ã€ã‚µãƒ–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½œã‚Œã°åˆ¥ã§ã™ãŒã€ãã‚Œã¯ã—ãªã„ã¨ã—ã¾ã™ï¼‰ã€‚ã“ã®å ´åˆã¯RDBãªã©ã®ãƒªã‚½ãƒ¼ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã€ãŠãã‚‰ãæœ€ã‚‚æ™‚é–“ãŒã‹ã‹ã‚‹controllerã®ã‚ˆã†ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ†ã‚¹ãƒˆã‚’åˆ†å‰²å®Ÿè¡Œã—ã«ãã„ãŸã‚ã§ã™ã€‚ã“ã‚Œã¯ãƒ†ã‚¹ãƒˆãƒãƒªã‚·ãƒ¼ã¨ã—ã¦ã€ãƒªãƒã‚¸ãƒˆãƒªã®ã‚ˆã†ãªDBå±¤å˜ä½“ã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚‚æ›¸ãã¨ã„ã£ãŸã€ãƒ¬ã‚¤ãƒ¤ãƒ¼ã”ã¨ã«ãƒ†ã‚¹ãƒˆã‚µã‚¤ã‚ºMediumã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã‚±ãƒ¼ã‚¹ï¼ˆå€‹äººçš„ã«å‡ºä¼šã£ãŸã“ã¨ãŒãªã„ã§ã™ãŒã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãªã©ã¯ã‚ã‚Šãˆã‚‹ï¼Ÿï¼‰ã«ã¯å½“ã¦ã¯ã¾ã‚‰ãªã„ã¨æ€ã„ã¾ã™ã®ã§ã€ã“ã“ã«æ›¸ã„ã¦ã„ãªã„å‰æãŒè‰²ã€…å…¥ã£ãŸä¸Šã§ã®æ„è¦‹ã«ãªã£ã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><h2 id="ä½¿ã£ã¦ã¿ã¦ã®æ‰€æ„Ÿ"><a href="#ä½¿ã£ã¦ã¿ã¦ã®æ‰€æ„Ÿ" class="headerlink" title="ä½¿ã£ã¦ã¿ã¦ã®æ‰€æ„Ÿ"></a>ä½¿ã£ã¦ã¿ã¦ã®æ‰€æ„Ÿ</h2><p>TestcontainersçµŒç”±ã§ã®èµ·å‹•ã§ã™ãŒã€DDLãŒ20ãƒ•ã‚¡ã‚¤ãƒ«ã»ã©ã§ã ã„ãŸã„3~5ç§’ç¨‹åº¦ã®èµ·å‹•æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ã€‚ã“ã‚Œã‚’ã©ã†è¦‹ã‚‹ã‹ã§ã™ãŒã€å€‹äººçš„ã«ã¯è¤‡æ•°ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä¸¦åˆ—ã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã§ãã‚‹ã¨ã„ã†ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šã€å—ã‘å…¥ã‚Œã‚‰ã‚Œã‚‹ã¨æ„Ÿã˜ã¦ã„ã¾ã™ã€‚</p><p>DBã®ã‚ˆã†ãªå¤–éƒ¨ãƒ—ãƒ­ã‚»ã‚¹ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’ã€å…¨ãƒ†ã‚¹ãƒˆã§å…±æœ‰ã—ã¦ã„ãŸå ´åˆã¯ã€åŒã˜ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’è¤‡æ•°ã®ãƒ†ã‚¹ãƒˆã§æ›¸ãæ›ãˆç«¶åˆã—ã¦ãƒ†ã‚¹ãƒˆãŒè½ã¡ã‚‹ã“ã¨ã‚’å›é¿ã™ã‚‹ãŸã‚ã«ã€åŒæ™‚å®Ÿè¡Œæ•°ã‚’1ã«æŠ‘ãˆã‚‹ãŸã‚ã€<code>go test</code> ã« <code>-p 1</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’åŠ ãˆã¦ã„ã¾ã—ãŸãŒã€ã“ã‚Œã‚’ç„¡ãã›ã‚‹ã®ã¯å¬‰ã—ã„ã§ã™ã€‚</p><p>Testcontainersã‚’åˆ©ç”¨ã™ã‚‹å‰ã¯ã€ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œç”¨ã®ã€Dockerfile, compose.yaml ã¨Testcontainersã®ã‚³ãƒ¼ãƒ‰ã¨ã®ãƒ€ãƒ–ãƒ«ãƒ¡ãƒ³ãƒ†ãŒå«Œã ãªã¨æ„Ÿã˜ã¦ã„ã¾ã—ãŸãŒã€ä¸Šè¨˜ã®åˆ©ä¾¿æ€§ãŒå¤§ãã„ã®ã§ã„ã¤ã®é–“ã«ã‹ç´ ç›´ã«å—ã‘å…¥ã‚Œã‚‰ã‚Œã¦ã„ã¾ã™ã€‚Testcontainersã«ã‚‚<a href="https://golang.testcontainers.org/features/build_from_dockerfile/">Dockerfileã‚„compose.yaml ã‚’åˆ©ç”¨ã™ã‚‹API</a>ãŒã‚ã‚‹ã®ã§ã€å·¥å¤«ã™ã‚Œã°ãƒ€ãƒ–ãƒ«ãƒ¡ãƒ³ãƒ†ç„¡ã—ã§ãƒ¡ãƒªãƒƒãƒˆã‚’äº«å—ã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ç§ã¯æœªæ¤œè¨¼ã§ã™ã€‚</p><p>ã¾ãŸã€ãƒ†ã‚¹ãƒˆæ¯ã«ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã™ã‚‹ãƒ¡ãƒªãƒƒãƒˆã¯ã€ä»–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ†ã‚¹ãƒˆãŒå‰¯ä½œç”¨ã‚’èµ·ã“ã—ã€ã¾ã‚Œã«ãƒ†ã‚¹ãƒˆãŒè½ã¡ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ•ãƒ¬ãƒ¼ã‚­ãƒ¼ãƒ†ã‚¹ãƒˆï¼ˆFlaky Testï¼šå®Ÿè¡ŒçµæœãŒä¸å®‰å®šãªãƒ†ã‚¹ãƒˆã®ã“ã¨ï¼‰ã‚’ç™ºç”Ÿã•ã›ã«ããã™ã‚‹ãƒ¡ãƒªãƒƒãƒˆã‚‚ã‚ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚ä¾‹ãˆã°ã€ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå‰ã«ã€å‰æã¨ã™ã‚‹ãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿ãŒåˆ¥ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ†ã‚¹ãƒˆï¼ˆç‰¹ã«è‡ªåˆ†ä»¥å¤–ã®é–‹ç™ºè€…ã®ä½œæ¥­ã§è¡Œã‚ã‚ŒãŸå ´åˆï¼‰ã§æ›¸ãæ›ãˆã‚‰ã‚Œã¦ã„ãŸã‚Šã—ã¦ã€åœ°å‘³ã«ãƒãƒã‚‹ã‚±ãƒ¼ã‚¹ã¯å›é¿ã§ãã‚‹ã§ã—ã‚‡ã†ã€‚</p><h2 id="ã•ã„ã”ã«"><a href="#ã•ã„ã”ã«" class="headerlink" title="ã•ã„ã”ã«"></a>ã•ã„ã”ã«</h2><p>Testcontainersã‚’ç”¨ã„ã¦PostgreSQLã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹Goã®ãƒ†ã‚¹ãƒˆã®æ›¸ãæ–¹ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚</p><p>ä»Šå›ã¯å‰²æ„›ã—ã¾ã—ãŸãŒã€ç§ã¯ <code>docker compose up</code> ã«ã¦æ‰‹å‹•ã§èµ·å‹•æ¸ˆã¿ã®å ´åˆã¯ã€TestcontainersçµŒç”±ã§èµ·å‹•ã›ãšã€èµ·å‹•ä¸­ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’ãã®ã¾ã¾ãƒ†ã‚¹ãƒˆã§åˆ©ç”¨ã™ã‚‹ã¨ã„ã£ãŸå®Ÿè£…ã‚’å…¥ã‚Œã¦ã„ã¾ã™ã€‚ãã†ã™ã‚‹ã¨ã€ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå¾Œã®DBã®çŠ¶æ…‹ã‚’è¦‹ãŸã„ã¨ãã¨ã€å˜ã«ãƒ†ã‚¹ãƒˆã‚’å‹•ã‹ã—ãŸã„ã ã‘ã®ã‚±ãƒ¼ã‚¹ã‚’æ£²ã¿åˆ†ã‘ãŒã§ãã€é–‹ç™ºæ™‚ã®åˆ‡ã‚Šåˆ†ã‘ãŒã¨ã¦ã‚‚ä¾¿åˆ©ã«ãªã‚Šã¾ã—ãŸã€‚</p><p>ä¸Šè¨˜ã®ã‚ˆã†ãªã‚„ã‚„ãƒˆãƒªãƒƒã‚­ãƒ¼ãªåˆ¶å¾¡ã‚‚ã€Testcontainersã ã¨æ¯”è¼ƒçš„å®¹æ˜“ã«å®Ÿç¾ã§ãã€åå‰ã®é€šã‚Šãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã¨ã®çµ±åˆæ€§ã¯é«˜ã„ã¨æ„Ÿã˜ã¾ã™ã€‚ä»Šå¾Œã¯ä»–ã®æ¡ˆä»¶ã«ã‚‚æ¨ªå±•é–‹ã—ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚ã‚ªã‚¹ã‚¹ãƒ¡ã§ã™ã€‚</p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Programming/">Programming</category>
      
      
      <category domain="https://future-architect.github.io/tags/Go/">Go</category>
      
      <category domain="https://future-architect.github.io/tags/%E3%83%86%E3%82%B9%E3%83%88/">ãƒ†ã‚¹ãƒˆ</category>
      
      <category domain="https://future-architect.github.io/tags/Testcontainers/">Testcontainers</category>
      
      
      <comments>https://future-architect.github.io/articles/20240409a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Go1.22ãƒªãƒªãƒ¼ã‚¹ãƒ‘ãƒ¼ãƒ†ã‚£ã«ã€ŒServeMuxã®ç«¶åˆæ¤œçŸ¥ã¨æ€§èƒ½ã€ã¨ã„ã†ã‚¿ã‚¤ãƒˆãƒ«ã§ç™»å£‡ã—ã¾ã—ãŸ</title>
      <link>https://future-architect.github.io/articles/20240408b/</link>
      <guid>https://future-architect.github.io/articles/20240408b/</guid>
      <pubDate>Sun, 07 Apr 2024 15:00:01 GMT</pubDate>
      
        
        
          
          
      <description>&lt;h2 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot;</description>
          
        
      
      
      
      <content:encoded><![CDATA[<h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><p>ã“ã‚“ã«ã¡ã¯ã€‚TIGã®æ­¦ç”°ã§ã™ã€‚</p><p>2024&#x2F;3&#x2F;18ã«é–‹å‚¬ã•ã‚ŒãŸGo1.22ã®ãƒªãƒªãƒ¼ã‚¹ãƒ‘ãƒ¼ãƒ†ã‚£ã«ç™»å£‡ã—ã¾ã—ãŸã€‚å°‘ã—æ™‚é–“ãŒç©ºã„ã¦ã—ã¾ã„ã¾ã—ãŸãŒã€ç™»å£‡ãƒ¬ãƒãƒ¼ãƒˆã§ã™ã€‚</p><h3 id="ã‚¤ãƒ™ãƒ³ãƒˆæ¦‚è¦"><a href="#ã‚¤ãƒ™ãƒ³ãƒˆæ¦‚è¦" class="headerlink" title="ã‚¤ãƒ™ãƒ³ãƒˆæ¦‚è¦"></a>ã‚¤ãƒ™ãƒ³ãƒˆæ¦‚è¦</h3><p>ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã¯Go1.22ã®ãƒªãƒªãƒ¼ã‚¹ã‚’ãŠç¥ã„ã™ã‚‹ã¨å…±ã«ã€<a href="https://tip.golang.org/doc/go1.22">Go1.22ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆå†…å®¹</a>ã‚’ä¸­å¿ƒã«ãƒ¯ã‚¤ãƒ¯ã‚¤ã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã§ã™ã€‚ä»Šå›ã¯å®Œå…¨ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å½¢å¼ã§é–‹å‚¬ã•ã‚Œã¾ã—ãŸã€‚</p><p><a href="https://gocon.connpass.com/event/310606/">https://gocon.connpass.com/event/310606/</a></p><p>Goã®ãƒªãƒªãƒ¼ã‚¹ã‚µã‚¤ã‚¯ãƒ«ã¯åŠå¹´ã”ã¨ã«è¨­å®šï¼ˆ2æœˆã¨8æœˆï¼‰ã•ã‚Œã¦ãŠã‚Šã€ãƒªãƒªãƒ¼ã‚¹ãƒ‘ãƒ¼ãƒ†ã‚£ã®é–‹å‚¬ã¯Go1.6ã®ãƒªãƒªãƒ¼ã‚¹ã‚’åˆå›ã¨ã—ã¦ã€ä»Šå›ã§16å›ç›®ã¨ãªã‚‹ãã†ã§ã™ã€‚</p><h3 id="ç™»å£‡ã®ãã£ã‹ã‘"><a href="#ç™»å£‡ã®ãã£ã‹ã‘" class="headerlink" title="ç™»å£‡ã®ãã£ã‹ã‘"></a>ç™»å£‡ã®ãã£ã‹ã‘</h3><p>tenntennã•ã‚“ã‹ã‚‰ã€Œãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã•ã‚“ã‹ã‚‰ã©ãªãŸã‹ç™»å£‡ã—ã¾ã›ã‚“ã‹ï¼Ÿã€ã¨ã„ã†ãŠèª˜ã„ã‚’æ¾å·ã•ã‚“çµŒç”±ã§é ‚æˆ´ã—ã¾ã—ãŸã€‚<a href="https://future-architect.github.io/articles/20240129a/">Go1.22ã®ãƒªãƒªãƒ¼ã‚¹é€£è¼‰è¨˜äº‹</a>ã‚’æ›¸ã„ã¦ã„ãŸã“ã¨ã‚‚ã‚ã‚Šã€æ‰‹ã‚’ä¸Šã’ã•ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚ãƒªãƒªãƒ¼ã‚¹ãƒ‘ãƒ¼ãƒ†ã‚£ã«ã¯ã“ã‚Œã¾ã§ä½•åº¦ã‚‚å‚åŠ ã—ã¦ã„ãŸã®ã§ã€ç™»å£‡ã®æ©Ÿä¼šã‚’ã„ãŸã ã‘ãŸã“ã¨ã‚’å¤§å¤‰å¬‰ã—ãæ€ã„ã¾ã™ã€‚ã“ã®å ´ã‚’å€Ÿã‚Šã¦ã€æ”¹ã‚ã¦ãŠç¤¼ç”³ã—ä¸Šã’ã¾ã™ã€‚</p><h2 id="ç™»å£‡è³‡æ–™ã¨å‹•ç”»"><a href="#ç™»å£‡è³‡æ–™ã¨å‹•ç”»" class="headerlink" title="ç™»å£‡è³‡æ–™ã¨å‹•ç”»"></a>ç™»å£‡è³‡æ–™ã¨å‹•ç”»</h2><p>ç™»å£‡è³‡æ–™ã¨å‹•ç”»ã¯ä¸‹è¨˜ã«ã¦å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><ul><li><p>ç™»å£‡è³‡æ–™<br><a href="https://rhumie.github.io/go122party/">https://rhumie.github.io/go122party/</a></p></li><li><p>å‹•ç”»ï¼ˆ30:40 ã‚ˆã‚Šï¼‰<br><a href="https://www.youtube.com/watch?v=0nsryM4X-0I&t=1840s">https://www.youtube.com/watch?v=0nsryM4X-0I&amp;t=1840s</a></p></li></ul><h2 id="ç™»å£‡å†…å®¹"><a href="#ç™»å£‡å†…å®¹" class="headerlink" title="ç™»å£‡å†…å®¹"></a>ç™»å£‡å†…å®¹</h2><p>ä»Šå›ã®ãƒªãƒªãƒ¼ã‚¹ã§æ¯”è¼ƒçš„å¤§ããªã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãŒè¡Œã‚ã‚ŒãŸServeMuxã«ã¤ã„ã¦å–ã‚Šä¸Šã’ã¾ã—ãŸã€‚</p><p>ServeMuxã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã®èƒŒå¾Œã«ã¯ã€Œãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒãƒƒãƒãƒ³ã‚°ã€ã¨ã€Œç«¶åˆæ¤œçŸ¥ã€ã¨ã„ã†2ã¤ã®æ€§èƒ½è«–ç‚¹ãŒã‚ã‚Šã¾ã™ã€‚å‰è€…ã«ã¤ã„ã¦ã¯ã€<a href="https://future-architect.github.io/articles/20240202a/">ãƒªãƒªãƒ¼ã‚¹é€£è¼‰ãƒ–ãƒ­ã‚°</a>ã«ã¦ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’è¡Œã†å½¢ã§è§¦ã‚Œã¦ã„ãŸã®ã§ã€ä»Šå›ã¯å¾Œè€…ã®ã€Œç«¶åˆæ¤œçŸ¥ã€ã‚’ãƒ†ãƒ¼ãƒã«ã—ã¾ã—ãŸã€‚</p><img src="/images/20240408b/ServeMux-Conflict-Detection-Go-1-22-Release-Party.png" alt="ServeMux-Conflict-Detection-Go-1-22-Release-Party.png" width="1200" height="649" loading="lazy"><p>è³‡æ–™ã®æ§‹æˆã¨ã—ã¦ã€å‰åŠéƒ¨ã§ã¯ã€Œãã‚‚ãã‚‚ç«¶åˆã¨ã¯ä½•ã‹ï¼Ÿã€ã¨ã„ã†åŸºæœ¬çš„ãªå•ã„ã‹ã‚‰å§‹ã‚ã€ãªãœç«¶åˆæ¤œçŸ¥ãŒæ€§èƒ½é¢ã§é‡è¦ãªè«–ç‚¹ã¨ãªã‚‹ã®ã‹ã‚’èª¬æ˜ã—ã¦ã„ã¾ã™ã€‚</p><img src="/images/20240408b/ServeMux-Conflict-Detection-Go-1-22-Release-Party_2.png" alt="ServeMux-Conflict-Detection-Go-1-22-Release-Party.png" width="1200" height="649" loading="lazy"><p>ãã—ã¦å¾ŒåŠéƒ¨ã§ã¯ServeMuxãŒæ€§èƒ½æ‡¸å¿µã«å¯¾ã—ã¦ã©ã®ã‚ˆã†ã«å¯¾å¿œã—ã¦ã„ã‚‹ã®ã‹ã‚’å®Ÿè£…ãƒ¬ãƒ™ãƒ«ã§è©³ç´°ã«è§£èª¬ã—ã¦ã„ã¾ã™ã€‚</p><img src="/images/20240408b/ServeMux-Conflict-Detection-Go-1-22-Release-Party_3.png" alt="ServeMux-Conflict-Detection-Go-1-22-Release-Party.png" width="1200" height="649" loading="lazy"><h2 id="ç™»å£‡è³‡æ–™ã‚’ä½œã‚‹æµã‚Œ"><a href="#ç™»å£‡è³‡æ–™ã‚’ä½œã‚‹æµã‚Œ" class="headerlink" title="ç™»å£‡è³‡æ–™ã‚’ä½œã‚‹æµã‚Œ"></a>ç™»å£‡è³‡æ–™ã‚’ä½œã‚‹æµã‚Œ</h2><p>ã‚ãˆã¦ç« ç«‹ã¦ã—ã¦æ›¸ãã»ã©ã®å†…å®¹ã§ã‚‚ãªã„ã§ã™ãŒã€æœ€è¿‘çœŸé‡ã•ã‚“ãŒ<a href="https://future-architect.github.io/articles/20240307a/">Goãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã‹ã‚‰æŠ€è¡“ãƒ–ãƒ­ã‚°ã‚’æ›¸ãæµã‚ŒåŸºç¤</a>ã¨ã„ã†è¨˜äº‹ã‚’å…¬é–‹ã—ã¦ã„ãŸã®ã§ã€æµã‚Œã«ã®ã£ã¦ãƒ­ã‚°ã¨ã—ã¦æ®‹ã—ã¦ãŠãã¾ã™ã€‚</p><p>è³‡æ–™ã‚’ä½œæˆã™ã‚‹ã«ã‚ãŸã£ã¦ã€ã¾ãšã¯é–¢é€£ã™ã‚‹ãƒ—ãƒ­ãƒãƒ¼ã‚µãƒ«ã‚„ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³ã‚’èª­ã¿ã€æ¬¡ã«ServeMuxã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰è‡ªä½“ã‚’èª­ã‚€å½¢ã§è‰²ã€…ã¨ãƒã‚¿ã‚„æ°—ä»˜ãã‚’é›†ã‚ã¾ã—ãŸã€‚</p><ul><li><p>Proposal<br><a href="https://github.com/golang/go/issues/61410">https://github.com/golang/go/issues/61410</a></p></li><li><p>Discussion<br><a href="https://github.com/golang/go/discussions/60227">https://github.com/golang/go/discussions/60227</a></p></li></ul><p>ãƒã‚¿ã‚’é›†ã‚ãŸã‚‰ãã®å¾Œã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚’ä½œã‚Šã€ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãŒã§ããŸã‚‰å€‹ã€…ã®ãƒãƒ†ãƒªã‚¢ãƒ«ã‚’ä½œã£ã¦ã„ãæµã‚Œã«ãªã‚Šã¾ã™ã€‚<br>ä»Šå›ã¯ã€Œç«¶åˆã‚’ã‚ã‹ã‚Šã‚„ã™ãä¼ãˆã‚‹ãŸã‚ã®ãƒ‘ã‚¿ãƒ¼ãƒ³æ–‡å­—åˆ—ã®ä¾‹ã‚’ã©ã†ã™ã‚‹ã‹ã€ã€ã€Œã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®æ§‹é€ ã‚’ã©ã†è¦–è¦šçš„ã«è¡¨ç¾ã™ã‚‹ã‹ã€ãªã©ã¯ç°¡æ½”æ˜ç­ã«ãªã‚‹ã‚ˆã†æ°—ã‚’é£ã£ã¦ä½œæˆã‚’è¡Œã„ã¾ã—ãŸã€‚</p><p>è³‡æ–™è‡ªä½“ã¯<a href="Slidev">https://ja.sli.dev/</a>ã‚’ä½¿ç”¨ã—ã¦ä½œæˆã—ã¦ã„ã¾ã™ã€‚<br>ç§ã¯æ™®æ®µPowerPointã§ã‚´ãƒªã‚´ãƒªã«è³‡æ–™ã‚’ä½œã‚Šã“ã‚€ã‚¿ã‚¤ãƒ—ã§ã™ãŒã€ãƒ†ã‚­ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹ã®ã‚·ãƒ³ãƒ—ãƒ«ãªè³‡æ–™ã‚„ã‚³ãƒ¼ãƒ‰ã‚’å¼•ç”¨ã™ã‚‹ã“ã¨ãŒå¤šã„è³‡æ–™ã®ä½œæˆã«ã¯ç›¸æ€§ãŒè‰¯ã„ã¨æ„Ÿã˜ã¾ã—ãŸã€‚</p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Programming/">Programming</category>
      
      
      <category domain="https://future-architect.github.io/tags/%E7%99%BB%E5%A3%87%E3%83%AC%E3%83%9D%E3%83%BC%E3%83%88/">ç™»å£‡ãƒ¬ãƒãƒ¼ãƒˆ</category>
      
      <category domain="https://future-architect.github.io/tags/Go/">Go</category>
      
      <category domain="https://future-architect.github.io/tags/Go%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%91%E3%83%BC%E3%83%86%E3%82%A3/">Goãƒªãƒªãƒ¼ã‚¹ãƒ‘ãƒ¼ãƒ†ã‚£</category>
      
      
      <comments>https://future-architect.github.io/articles/20240408b/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>æ˜¥ã®å…¥é–€é€£è¼‰2024ã‚’å§‹ã‚ã¾ã™</title>
      <link>https://future-architect.github.io/articles/20240408a/</link>
      <guid>https://future-architect.github.io/articles/20240408a/</guid>
      <pubDate>Sun, 07 Apr 2024 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;img src=&quot;/images/20240408a/DSC05372.JPG&quot; alt=&quot;&quot; width=&quot;1200&quot; height=&quot;802&quot;</description>
          
        
      
      
      
      <content:encoded><![CDATA[<img src="/images/20240408a/DSC05372.JPG" alt="" width="1200" height="802" loading="lazy"><p>ã“ã‚“ã«ã¡ã¯ã€‚æŠ€è¡“ãƒ–ãƒ­ã‚°é‹å–¶ã®ä¼Šè—¤ã§ã™ã€‚</p><p>æ˜¥ã®å…¥é–€é€£è¼‰2024ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨˜äº‹ã§ã™ã€‚</p><h2 id="æ˜¥ã®å…¥é–€é€£è¼‰ã¨ã¯"><a href="#æ˜¥ã®å…¥é–€é€£è¼‰ã¨ã¯" class="headerlink" title="æ˜¥ã®å…¥é–€é€£è¼‰ã¨ã¯"></a>æ˜¥ã®å…¥é–€é€£è¼‰ã¨ã¯</h2><p>æ˜¥ã®å…¥é–€é€£è¼‰ã¯2020å¹´ã‹ã‚‰å§‹ã‚ãŸé€£è¼‰ã§ã€ã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’é™¤ã„ã¦æŠ€è¡“ãƒ–ãƒ­ã‚°ã®ä¸­ã§ã¯ã”é•·å¯¿ãªé€£è¼‰ã¨ãªã£ã¦ã„ã¦ã€2024å¹´ã§5å¹´ç›®ã§ã™ã€‚</p><p>ã“ã®é€£è¼‰ã¯ä»¥ä¸‹ã®ãƒ†ãƒ¼ãƒã§ç¤¾å“¡å‘ã‘ã«ã¯å‹Ÿé›†ã‚’ã‹ã‘ã¦ã„ã¾ã™ã€‚</p><ul><li>ä»Šã¾ã§è§¦ã£ã¦ç„¡ã‹ã£ãŸæŠ€è¡“ã®ã‚„ã£ã¦ã¿ãŸè¨˜äº‹</li><li>å…ˆè¼©ãƒ»åŒæœŸãƒ»å¾Œè¼©å®›ã«ã€çŸ¥ã£ã¦ãŠã„ã¦æ¬²ã—ã„æŠ€è¡“è¨˜äº‹</li><li>å¥½ããªæŠ€è¡“ã®å¸ƒæ•™æ´»å‹•ã‚’ã™ã‚‹è¨˜äº‹</li></ul><p>ä»–ã®é€£è¼‰ã«æ¯”ã¹ã¦ã€ã‚¸ãƒ£ãƒ³ãƒ«ã‚’å•ã‚ãšã«å¿œå‹Ÿã—ã¦ã„ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã€æ¯å¹´åˆã®å¯„ç¨¿ã¨ãªã‚‹ç¤¾å“¡ã‚‚å¤šãå‚åŠ ã—ã¦ã„ã¾ã™ã€‚å‚åŠ è€…ã®ä¸­ã«ã¯ãƒ–ãƒ­ã‚°ã‚’æ›¸ã„ã¦ã¿ãŸã„ã€ã¨ãƒ–ãƒ­ã‚°é‹å–¶ã«ç›´æ¥é€£çµ¡ã‚’ãã‚ŒãŸã‚„ã‚‹æ°—ã«æº¢ã‚ŒãŸç¤¾å“¡ã‚‚ã„ã‚‹ã»ã©ã§ã™ã€‚</p><p>ã•ã¦ã€ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã«ã¯100åã‚’è¶…ãˆã‚‹æ–°å’ãŒ4æœˆã«å…¥ç¤¾ã—ã¾ã—ãŸã€‚ç¤¾å†…å¤–å•ã‚ãšã€æ–°äººã¯ã‚‚ã¡ã‚ã‚“ã€æ–°ã—ã„ã“ã¨ã«å–ã‚Šçµ„ã‚€ãã£ã‹ã‘ã¨ã—ã¦ã‚‚æ˜¯éã“ã®é€£è¼‰ã‚’èª­ã‚“ã§ã„ãŸã ã‘ã‚Œã°ã¨æ€ã„ã¾ã™ã€‚</p><h2 id="å‚åŠ è€…ä¸€è¦§-æŠ•ç¨¿ã‚¿ã‚¤ãƒˆãƒ«"><a href="#å‚åŠ è€…ä¸€è¦§-æŠ•ç¨¿ã‚¿ã‚¤ãƒˆãƒ«" class="headerlink" title="å‚åŠ è€…ä¸€è¦§&amp;æŠ•ç¨¿ã‚¿ã‚¤ãƒˆãƒ«"></a>å‚åŠ è€…ä¸€è¦§&amp;æŠ•ç¨¿ã‚¿ã‚¤ãƒˆãƒ«</h2><p>ä»Šå¹´ã®å‚åŠ ã¯ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨˜äº‹ã‚’å«ã‚ã¦15è¨˜äº‹14åãŒå‚åŠ ã—ã¾ã™ã€‚<br>æŠ€è¡“ãƒ–ãƒ­ã‚°ã«ã¯ãŠé¦´æŸ“ã¿ã®é¡”ã‹ã‚‰ã€ä»Šå›ã®é€£è¼‰ã§åˆå¯„ç¨¿ã®ç¤¾å“¡ã¾ã§å¹…åºƒã„ãƒ¡ãƒ³ãƒãƒ¼ã§4æœˆã„ã£ã±ã„æŠ•ç¨¿ã—ã¦ã„ãã¾ã™ã€‚ãƒ†ãƒ¼ãƒãŒã¾ã æ±ºã¾ã£ã¦ã„ãªã„ã¨ã“ã‚ã‚„å¤‰ã‚ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ãŒã€æ˜¯éè‰²ã€…ãªè¨˜äº‹ã‚’ãŠæ¥½ã—ã¿ã«ã—ã¦ã„ãŸã ã‘ã‚Œã°ã¨æ€ã„ã¾ã™ã€‚</p><div class="scroll"><table><thead><tr><th>æ—¥ä»˜</th><th>æŠ•ç¨¿è€…</th><th>ãƒ†ãƒ¼ãƒ</th></tr></thead><tbody><tr><td>4&#x2F;8(æœˆ)</td><td>ä¼Šè—¤å¤ªæ–‰</td><td>æœ¬ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨˜äº‹</td></tr><tr><td>4&#x2F;9(ç«)</td><td>çœŸé‡éš¼è¨˜</td><td><a href="/articles/20240409a/">Testcontainersã‚’ç”¨ã„ã¦ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå‰ã® docker compose up ã‚’ç„¡ãã—ã€Goã§ä¸¦åˆ—ãƒ†ã‚¹ãƒˆã™ã‚‹</a></td></tr><tr><td>4&#x2F;10(æ°´)</td><td>æ¾å·å–œè¦</td><td><a href="/articles/20240410a/">2024å¹´Gitãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å†è€ƒ</a></td></tr><tr><td>4&#x2F;11(æœ¨)</td><td>å²¸æœ¬å“ä¹Ÿ</td><td><a href="/articles/20240411a/">å…¨æ–‡æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³Meilisearchã‚’è©¦ã™</a></td></tr><tr><td>4&#x2F;12(é‡‘)</td><td>æ£®å¤§ä½œ</td><td><a href="/articles/20240412a/">Systemdã«ãŠã‘ã‚‹service unitã®èµ·å‹•ãƒ•ãƒ­ãƒ¼å…¥é–€</a></td></tr><tr><td>4&#x2F;15(æœˆ)</td><td>æ£šäº•é¾ä¹‹ä»‹</td><td><a href="/articles/20240415a/">VSCodeã§GitLensã‚’ä½¿ã†</a></td></tr><tr><td>4&#x2F;17(æ°´)</td><td>ä¼Šè—¤å¤ªæ–‰</td><td><a href="/articles/20240417b/">Prometheus&#x2F;Grafanaã‚’ä½¿ã£ã¦ã¿ã‚‹</a></td></tr><tr><td>4&#x2F;18(æœ¨)</td><td>æ¸…æ°´é›„ä¸€éƒ</td><td><a href="/articles/20240418a/">WSLã§å§‹ã‚ã‚‹ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰Swift å…¥é–€ ï½Hummingbirdï½</a></td></tr><tr><td>4&#x2F;x</td><td>å‰åŸæ¶¼å­</td><td>Vue.jsã®å­¦ç¿’ã§ã‚ªã‚»ãƒ­ã‚’ä½œã£ãŸè©±</td></tr><tr><td>4&#x2F;19(é‡‘)</td><td>ä¸­é‚¨è‹±é‡Œä½³</td><td>Jenkins</td></tr><tr><td>4&#x2F;22(æœˆ)</td><td>å¤§å²©æ½¤çŸ¢</td><td>unjs&#x2F;nitroã§å§‹ã‚ã‚‹ã‚µãƒ¼ãƒãƒ¬ã‚¹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¥é–€</td></tr><tr><td>4&#x2F;23(ç«)</td><td>å°æ©‹æ˜Œæ˜</td><td>TBD</td></tr><tr><td>4&#x2F;24(æ°´)</td><td>é«˜ä¸–é§¿</td><td>ESP32ã¨Google SpleadSheetã§å§‹ã‚ã‚‹IoTå…¥é–€</td></tr><tr><td>4&#x2F;25(æœ¨)</td><td>å±±æœ¬ç«œç„</td><td>è‡ªä½œã‚­ãƒ¼ãƒœãƒ¼ãƒ‰</td></tr><tr><td>4&#x2F;26(é‡‘)</td><td>å±±ä¸‹é›„å¤§</td><td>ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®è¨˜æ³•né¸</td></tr><tr><td>4&#x2F;30(ç«)</td><td>å¾Œè—¤å–œæ–—</td><td>GASãƒã‚¿</td></tr><tr><td>5&#x2F;1(æ°´)</td><td>æ©‹æœ¬ç«œæˆ‘</td><td>TBD</td></tr></tbody></table></div><h2 id="ã•ã„ã”ã«"><a href="#ã•ã„ã”ã«" class="headerlink" title="ã•ã„ã”ã«"></a>ã•ã„ã”ã«</h2><p>æ˜¯éã€è‰¯ã„ã¨æ€ã£ãŸè¨˜äº‹ãªã©ã¯ã‚·ã‚§ã‚¢ãªã©ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ã„ãŸã ã‘ã‚Œã°ã¨æ€ã„ã¾ã™ï¼</p><ul><li><a href="/articles/20230417a/">2023å¹´ã®é€£è¼‰è¨˜äº‹</a></li><li><a href="/articles/20220418a/">2022å¹´ã®é€£è¼‰è¨˜äº‹</a></li><li><a href="/articles/20210414a/">2021å¹´ã®é€£è¼‰è¨˜äº‹</a></li><li><a href="/articles/20200529/">2020å¹´ã®é€£è¼‰è¨˜äº‹</a></li></ul>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Culture/">Culture</category>
      
      
      <category domain="https://future-architect.github.io/tags/%E5%85%A5%E9%96%80/">å…¥é–€</category>
      
      <category domain="https://future-architect.github.io/tags/%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9/">ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹</category>
      
      <category domain="https://future-architect.github.io/tags/%E6%98%A5%E3%81%AE%E5%85%A5%E9%96%80%E7%A5%AD%E3%82%8A/">æ˜¥ã®å…¥é–€ç¥­ã‚Š</category>
      
      
      <comments>https://future-architect.github.io/articles/20240408a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Vue.jsã‚’2ã‹ã‚‰3ã¸ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã—ãŸè©±</title>
      <link>https://future-architect.github.io/articles/20240405a/</link>
      <guid>https://future-architect.github.io/articles/20240405a/</guid>
      <pubDate>Thu, 04 Apr 2024 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;img src=&quot;/images/20240405a/top.png&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;487&quot;&gt;

&lt;h1 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot;</description>
          
        
      
      
      
      <content:encoded><![CDATA[<img src="/images/20240405a/top.png" alt="" width="800" height="487"><h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>ã“ã‚“ã«ã¡ã¯ã€‚Technology Innovation Groupæ‰€å±ã®å¤ªç”°å¯›æ˜ã§ã™ã€‚</p><p>æ–°äººç ”ä¿®ã§è§¦ã‚ŒãŸç¨‹åº¦ã®Vue.jsçµŒé¨“è€…ã®ç§ãŒã€Vueã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã‚’è¡Œã£ã¦å¾—ãŸã€æ‰€æ„Ÿã‚„èº“ã„ãŸãƒã‚¤ãƒ³ãƒˆã‚’å…±æœ‰ã—ã¾ã™ã€‚</p><h1 id="çµŒç·¯"><a href="#çµŒç·¯" class="headerlink" title="çµŒç·¯"></a>çµŒç·¯</h1><p>Vue2ã¯2023å¹´12æœˆ31æ—¥ã«End of Lifeï¼ˆEOLï¼‰ã‚’è¿ãˆã‚‹ã“ã¨ã«ãªã‚Šã¾ã—ãŸã€‚</p><p>EOLæœŸæ—¥ã¾ã§ã«Vue2ã‚’Vue3ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ä»Šå›ã®å¯¾å¿œã§ã¯ã€<a href="#%E5%AF%BE%E5%BF%9C%E5%86%85%E5%AE%B9">å¯¾å¿œå†…å®¹</a>ã§ç´¹ä»‹ã™ã‚‹ã€Œ1. Vue3ã§ã®å‹•ä½œã«å¿…è¦ãªå¤‰æ›´ã€ã‚’ã¾ãšæœ€å„ªå…ˆã§å¯¾å¿œã—ã€ãã®å¾Œã«ã‚ˆã‚Šè‰¯ã„ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã¨ã™ã‚‹ãŸã‚ã®å–ã‚Šçµ„ã¿ã¨ã—ã¦ã€Œ2. Vue3ã‹ã‚‰ã®æ–°è¦æ¨å¥¨äº‹é …ã®é©ç”¨ã€ã®å¯¾å¿œã‚’è¡Œã„ã¾ã—ãŸã€‚</p><h1 id="å¯¾å¿œå†…å®¹"><a href="#å¯¾å¿œå†…å®¹" class="headerlink" title="å¯¾å¿œå†…å®¹"></a>å¯¾å¿œå†…å®¹</h1><p>ã¾ãšæœ€åˆã«ä»Šå›ã®Vue2ã‹ã‚‰3ã¸ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã§è¡Œã£ãŸå¤‰æ›´ã®å…¨è²Œã‚’ç´¹ä»‹ã—ã¾ã™ã€‚</p><ol><li>Vue3ã§ã®å‹•ä½œã«å¿…è¦ãªå¤‰æ›´<ul><li><strong>Vueæœ¬ä½“ã®æ›´æ–°</strong></li><li><strong>å‘¨è¾ºãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æ›´æ–°</strong></li></ul></li><li>Vue3ã‹ã‚‰ã®æ–°è¦æ¨å¥¨äº‹é …ã®é©ç”¨<ul><li><strong>ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«å¤‰æ›´</strong>ï¼šVue CLI â‡’ Vite<ul><li>èµ·å‹•æ™‚é–“ã®çˆ†é€ŸåŒ–<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>ã®ãŸã‚å®Ÿæ–½</li></ul></li><li><strong>IDEã‚µãƒãƒ¼ãƒˆå¤‰æ›´</strong>ï¼šVetur â‡’ Vue - Official<ul><li>Veturã®ç„¡åŠ¹åŒ–<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>ã®ãŸã‚å®Ÿæ–½</li><li><code>.vscode/extensions.json</code>ã«ã€æ¨å¥¨&#x2F;éæ¨å¥¨ã®æ‹¡å¼µæ©Ÿèƒ½ã‚’è¨˜è¼‰ã—ã¦å®Ÿè£…<sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup></li></ul></li><li><strong>çŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå¤‰æ›´</strong>ï¼šVuex â‡’ Pinia<ul><li>TypeScriptåŒ–ã®å®¹æ˜“æ€§ã®ãŸã‚å®Ÿæ–½</li></ul></li><li><strong>ãƒ†ã‚¹ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªå¤‰æ›´</strong>ï¼šJest â‡’ Vitest<ul><li>Viteä½¿ç”¨æ™‚ã€å¤§å¹…ç°¡æ½”åŒ–ã§ãã‚‹ãŸã‚å®Ÿæ–½</li></ul></li><li><strong>APIå¤‰æ›´</strong><sup id="fnref:4"><a href="#fn:4" rel="footnote">4</a></sup>ï¼šOptions API â‡’ Composition APIï¼ˆ<code>script setup</code>ï¼‰<ul><li>TypeScriptåŒ–ã®å®¹æ˜“æ€§ã®ãŸã‚å®Ÿæ–½</li></ul></li><li><strong>TypeScriptåŒ–ï¼ˆç’°å¢ƒè¨­å®šã®ã¿ï¼‰</strong><sup id="fnref:5"><a href="#fn:5" rel="footnote">5</a></sup><ul><li>ã‚³ãƒ¼ãƒ‰ã®å‹å®‰å…¨æ€§å‘ä¸Šã®ãŸã‚å®Ÿæ–½</li></ul></li></ul></li></ol><h2 id="èº“ã„ãŸãƒã‚¤ãƒ³ãƒˆ"><a href="#èº“ã„ãŸãƒã‚¤ãƒ³ãƒˆ" class="headerlink" title="èº“ã„ãŸãƒã‚¤ãƒ³ãƒˆ"></a>èº“ã„ãŸãƒã‚¤ãƒ³ãƒˆ</h2><h3 id="Auth0ã®ç§»è¡Œ"><a href="#Auth0ã®ç§»è¡Œ" class="headerlink" title="Auth0ã®ç§»è¡Œ"></a>Auth0ã®ç§»è¡Œ</h3><p>ï¼ˆ<strong>å‘¨è¾ºãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æ›´æ–°</strong>ã«å¯¾å¿œï¼‰</p><p>Vue2ã§ã¯<code>@auth0/auth0-spa-js</code>ã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã—ã¦ã€ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’è‡ªä½œã™ã‚‹å½¢ã§ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚<br>ä¸€æ–¹ã§Vue3ã‹ã‚‰ã¯<code>auth0-vue</code>ã¨ã„ã†ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’å†…åŒ…ã—ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p><p>ç‰¹ã«ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã›ãšä½¿ç”¨ã—ã¦ã„ãŸå ´åˆã¯ãã®ã¾ã¾ç§»è¡Œã™ã‚Œã°å•é¡Œãªã„ã§ã™ãŒã€ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã•ã‚Œã¦ã„ã‚‹å ´åˆã¯å¤§å¤‰ãªä½œæ¥­ã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><p>ç§ã®å ´åˆã¯ã€ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã•ã‚ŒãŸãƒ©ãƒƒãƒ‘ãƒ¼ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã—ãŸãŒã€ãã®å¾Œã™ãã«èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ãŒAuth0ã‹ã‚‰å¤‰æ›´ã«ãªã‚‹äºˆå®šã§ã‚ã£ãŸãŸã‚ã€æš«å®šçš„ã«ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æ”¹é€ ã—ã¦å¯¾å¿œã—ã¾ã—ãŸã€‚</p><h3 id="Vuetifyã®ç§»è¡Œ"><a href="#Vuetifyã®ç§»è¡Œ" class="headerlink" title="Vuetifyã®ç§»è¡Œ"></a>Vuetifyã®ç§»è¡Œ</h3><p>ï¼ˆ<strong>å‘¨è¾ºãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æ›´æ–°</strong>ã«å¯¾å¿œï¼‰</p><p><a href="#%E6%8C%AF%E3%82%8A%E8%BF%94%E3%82%8A">æŒ¯ã‚Šè¿”ã‚Š</a>ã§Vuetifyã®ç§»è¡Œã®å¤§å¤‰ã•ã«ã¯è§¦ã‚Œã¦ã„ã¾ã™ãŒã€ã“ã“ã§ã¯ã¨ã‚Šã‚ã‘èº“ã„ãŸãƒã‚¤ãƒ³ãƒˆã«çµã£ã¦ç´¹ä»‹ã—ã¾ã™ã€‚</p><h4 id="v-date-pickerãŒå–ã‚‹å€¤ã®å‹ãŒStringå‹ã‹ã‚‰Dateå‹ã«å¤‰æ›´"><a href="#v-date-pickerãŒå–ã‚‹å€¤ã®å‹ãŒStringå‹ã‹ã‚‰Dateå‹ã«å¤‰æ›´" class="headerlink" title="v-date-pickerãŒå–ã‚‹å€¤ã®å‹ãŒStringå‹ã‹ã‚‰Dateå‹ã«å¤‰æ›´"></a><code>v-date-picker</code>ãŒå–ã‚‹å€¤ã®å‹ãŒ<code>String</code>å‹ã‹ã‚‰<code>Date</code>å‹ã«å¤‰æ›´</h4><p>ãƒ‡ãƒ¼ã‚¿ã®å—ã‘æ¸¡ã—ãŒå½“ç„¶ã†ã¾ãã„ã‹ãªããªã‚Šã¾ã—ãŸã€‚<br>ç§ã®å ´åˆã€ä»¥ä¸‹çŠ¶æ³ã‚’è¸ã¾ãˆã€<code>Date</code>å‹ç”¨ã®å¤‰æ•°ã‚’æ–°ãŸã«ç”¨æ„ã—ã€<code>watch</code>ã¨<code>@update:model-value</code>ã‚’ç”¨ã„ã¦åŒæœŸã•ã›ã‚‹å½¢ã§ä¿®æ­£ã—ã¾ã—ãŸã€‚</p><ul><li>å¸¸ã«<code>v-text-field</code>ã¨çµ„ã¿åˆã‚ã›ã¦ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹</li><li>ãƒ‡ãƒ¼ã‚¿ã®å—ã‘æ¸¡ã—ã¯åºƒã„ç¯„å›²ã§è¡Œã‚ã‚Œã¦ã„ã‚‹</li></ul><p>å®Ÿè£…ä¾‹ï¼š<br>â€»æ¯”è¼ƒãŒå®¹æ˜“ã®ãŸã‚ã€Options APIã§è¨˜è¼‰ã—ã¦ã„ã¾ã™ã€‚<br>â€»<code>v-menu</code>ã‚„<code>v-slot</code>ã®å¤‰æ›´ã‚‚å«ã¾ã‚Œã¦ã„ã¾ã™ã€‚</p><figure class="highlight diff"><figcaption><span>DatePicker.vue</span></figcaption><table><tr><td class="code"><pre><span class="line"> &lt;script&gt;</span><br><span class="line"><span class="addition">+import dayjs from &#x27;dayjs&#x27;</span></span><br><span class="line"> export default &#123;</span><br><span class="line">   data() &#123;</span><br><span class="line">     return &#123;</span><br><span class="line">       dateText: &#x27;&#x27;,</span><br><span class="line"><span class="addition">+      dateTime: undefined,</span></span><br><span class="line"><span class="addition">+      menuFlg: false,</span></span><br><span class="line">     &#125;</span><br><span class="line">   &#125;,</span><br><span class="line"><span class="addition">+  watch: &#123;</span></span><br><span class="line"><span class="addition">+    dateText() &#123;</span></span><br><span class="line"><span class="addition">+      if (this.dateText) &#123;</span></span><br><span class="line"><span class="addition">+        this.dateTime = dayjs(this.dateText).toDate()</span></span><br><span class="line"><span class="addition">+      &#125; else &#123;</span></span><br><span class="line"><span class="addition">+        this.dataTime = undefined</span></span><br><span class="line"><span class="addition">+      &#125;</span></span><br><span class="line"><span class="addition">+    &#125;,</span></span><br><span class="line"><span class="addition">+  &#125;,</span></span><br><span class="line"><span class="addition">+  methods: &#123;</span></span><br><span class="line"><span class="addition">+    setDateText() &#123;</span></span><br><span class="line"><span class="addition">+      this.dateText = dayjs(this.dateTime).format(&#x27;YYYY-MM-DD&#x27;)</span></span><br><span class="line"><span class="addition">+      this.menuFlg = false</span></span><br><span class="line"><span class="addition">+    &#125;,</span></span><br><span class="line"><span class="addition">+  &#125;,</span></span><br><span class="line"> &#125;</span><br><span class="line"> &lt;/script&gt;</span><br><span class="line"></span><br><span class="line"> &lt;template&gt;</span><br><span class="line">   &lt;div&gt;</span><br><span class="line">     &lt;!-- dateTextã®å€¤ãŒç›´æ¥å¤‰æ›´ã•ã‚Œã‚‹å ´åˆã‚’å†ç¾ã™ã‚‹ãƒœã‚¿ãƒ³ --&gt;</span><br><span class="line">     &lt;v-btn @click=&quot;dateText = &#x27;2024-04-01&#x27;&quot;&gt; dateText = &#x27;2024-04-01&#x27; &lt;/v-btn&gt;</span><br><span class="line"></span><br><span class="line"><span class="deletion">-    &lt;v-menu&gt;</span></span><br><span class="line"><span class="deletion">-      &lt;template #activator=&quot;&#123; on, attrs &#125;&quot;&gt;</span></span><br><span class="line"><span class="addition">+    &lt;v-menu v-model=&quot;menuFlg&quot; :close-on-content-click=&quot;false&quot;&gt;</span></span><br><span class="line"><span class="addition">+      &lt;template #activator=&quot;&#123; props &#125;&quot;&gt;</span></span><br><span class="line">         &lt;v-text-field</span><br><span class="line">           v-model=&quot;dateText&quot;</span><br><span class="line"><span class="deletion">-          v-bind=&quot;attrs&quot;</span></span><br><span class="line"><span class="deletion">-          v-on=&quot;on&quot;</span></span><br><span class="line"><span class="addition">+          v-bind=&quot;props&quot;</span></span><br><span class="line">           readonly</span><br><span class="line">           clearable</span><br><span class="line">         &gt;&lt;/v-text-field&gt;</span><br><span class="line">       &lt;/template&gt;</span><br><span class="line">       &lt;v-date-picker</span><br><span class="line"><span class="deletion">-        v-model=&quot;dateText&quot;</span></span><br><span class="line"><span class="deletion">-        :day-format=&quot;(date) =&gt; new Date(date).getDate()&quot;</span></span><br><span class="line"><span class="addition">+        v-model=&quot;dateTime&quot;</span></span><br><span class="line"><span class="addition">+        @update:model-value=&quot;setDateText&quot;</span></span><br><span class="line">       &gt;&lt;/v-date-picker&gt;</span><br><span class="line">     &lt;/v-menu&gt;</span><br><span class="line">   &lt;/div&gt;</span><br><span class="line"> &lt;/template&gt;</span><br></pre></td></tr></table></figure><p>ã‚‚ã£ã¨ã‚‚ã€ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã®å•é¡ŒãŒã‚ã‚‹ãŸã‚ã€åŸºæœ¬çš„ã«æ—¥ä»˜ãƒ‡ãƒ¼ã‚¿ã®å—ã‘æ¸¡ã—ã¯å˜ãªã‚‹æ–‡å­—åˆ—ã§ã¯ãªãã€ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³æƒ…å ±ã‚’å«ã‚ã¦è¡Œã†ã®ãŒãƒ™ã‚¿ãƒ¼ã§ã™ã€‚</p><h4 id="ä¸€éƒ¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒæœªå®Ÿè£…"><a href="#ä¸€éƒ¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒæœªå®Ÿè£…" class="headerlink" title="ä¸€éƒ¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒæœªå®Ÿè£…"></a>ä¸€éƒ¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒæœªå®Ÿè£…</h4><p>Vuetifyã¯ã¾ã ä¸€éƒ¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒæœªå®Ÿè£…ã§ã‚ã‚Šã€è©²å½“ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå®Ÿè£…ã«å«ã¾ã‚Œã‚‹å ´åˆã¯å€‹åˆ¥ã§å¯¾å¿œãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚</p><p>ç§ã®å ´åˆã¯<code>v-treeview</code>ãŒæœªå®Ÿè£…ã§ã—ãŸï¼ˆ<code>v3.5.9</code>ã§å®Ÿè£…æ¸ˆï¼‰ã€‚<br>è‡ªä½œé›£åº¦ãŒãã“ã¾ã§é«˜ããªã„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã‚ã£ãŸãŸã‚åŠ©ã‹ã‚Šã¾ã—ãŸã€‚</p><h3 id="Vue3ã«å¯¾å¿œã—ã¦ã„ãªã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ç§»è¡Œ"><a href="#Vue3ã«å¯¾å¿œã—ã¦ã„ãªã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ç§»è¡Œ" class="headerlink" title="Vue3ã«å¯¾å¿œã—ã¦ã„ãªã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ç§»è¡Œ"></a>Vue3ã«å¯¾å¿œã—ã¦ã„ãªã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ç§»è¡Œ</h3><p>ï¼ˆ<strong>å‘¨è¾ºãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æ›´æ–°</strong>ã«å¯¾å¿œï¼‰</p><h4 id="smartweb-vue-flash-messageã®å»ƒæ­¢"><a href="#smartweb-vue-flash-messageã®å»ƒæ­¢" class="headerlink" title="@smartweb/vue-flash-messageã®å»ƒæ­¢"></a><code>@smartweb/vue-flash-message</code>ã®å»ƒæ­¢</h4><p>ä½¿ç”¨ã—ã¦ã„ãŸãƒ•ãƒ©ãƒƒã‚·ãƒ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ©Ÿèƒ½ã‚’æä¾›ã—ã¦ãã‚Œã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒVue3ã§ã¯ä½¿ç”¨ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚</p><p>ã“ã¡ã‚‰ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è‡ªä½œã—ã¦ã‚‚å¯¾å¿œã§ããã†ã§ã—ãŸãŒã€ã¡ã‚‡ã†ã©è‰¯ã•ãã†ãªä»£æ›¿ãƒ©ã‚¤ãƒ–ãƒ©ãƒª<code>@alamtheinnov/flashtoast</code>ã‚’ç™ºè¦‹ã—ãŸãŸã‚ã€ã“ã¡ã‚‰ã‚’ä»£ã‚ã‚Šã«ä½¿ç”¨ã™ã‚‹å½¢ã§å¯¾å¿œã—ã¾ã—ãŸã€‚</p><h4 id="vue-clipboard2ã®å»ƒæ­¢"><a href="#vue-clipboard2ã®å»ƒæ­¢" class="headerlink" title="vue-clipboard2ã®å»ƒæ­¢"></a><code>vue-clipboard2</code>ã®å»ƒæ­¢</h4><p>ä½¿ç”¨ã—ã¦ã„ãŸã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰æ©Ÿèƒ½ã‚’æä¾›ã—ã¦ãã‚Œã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒVue3ã§ã¯ä½¿ç”¨ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚</p><p>Vue3ã«å¯¾å¿œã—ãŸé¡ä¼¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ã„ãã¤ã‹å­˜åœ¨ã—ãŸã‚‚ã®ã®ã€Web APIã®<a href="https://developer.mozilla.org/ja/docs/Web/API/Clipboard/writeText">Clipboard.writeText()</a>ãŒä¸»è¦ãƒ–ãƒ©ã‚¦ã‚¶ã®ã„ãšã‚Œã«ã‚‚å¯¾å¿œã—ã¦ãŠã‚Šã€æ©Ÿèƒ½é¢ã®å·®ç•°ã‚‚ã»ã¨ã‚“ã©ãªã„ã“ã¨ã‹ã‚‰ã€ã“ã®APIã‚’ä½¿ç”¨ã—ã¦å¯¾å¿œã™ã‚‹æ–¹é‡ã«æ±ºã‚ã¾ã—ãŸã€‚<br>ï¼ˆãŸã ã—ã€å®Ÿéš›ã«è“‹ã‚’é–‹ã‘ã¦ã¿ã‚‹ã¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã§ä½¿ç”¨ã•ã‚Œã¦ã„ãªã‹ã£ãŸãŸã‚ã€ã“ã®å¯¾å¿œã¯ä¸è¦ã«ãªã‚Šã¾ã—ãŸã€‚ï¼‰</p><h3 id="YarnãŒãŠã‹ã—ã„"><a href="#YarnãŒãŠã‹ã—ã„" class="headerlink" title="YarnãŒãŠã‹ã—ã„"></a>YarnãŒãŠã‹ã—ã„</h3><p>ï¼ˆ<strong>ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«å¤‰æ›´</strong>ã«å¯¾å¿œï¼‰</p><p>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦Yarn v1ãŒä½¿ç”¨ã•ã‚Œã¦ã„ãŸã®ã§ã™ãŒã€Viteã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ES Modulesã¨ã—ã¦æ‰±ã£ã¦å®Ÿè¡Œã—ãŸéš›ã«ã€æ¬¡ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ã«é­é‡ã—ã¾ã—ãŸã€‚</p><p>æ¨æ¸¬ã§ã™ãŒã€CommonJSã¨ES ModulesãŒä½µå­˜ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹éš›ã«ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾å­˜é–¢ä¿‚æ¬¡ç¬¬ã§ã†ã¾ãã„ã‹ãªããªã‚‹ã‚ˆã†ã§ã™ã€‚</p><p>çµè«–ã¨ã—ã¦ã¯Yarn v1ã¯ãã‚‚ãã‚‚éæ¨å¥¨ã§ã‚ã‚‹ãŸã‚ã€npmã«ç§»è¡Œã—ã¦å¯¾å¿œã—ã¾ã—ãŸã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">Error [ERR_REQUIRE_ESM]: require() of ES Module &lt;path&gt;/node_modules/string-width/index.js</span><br></pre></td></tr></table></figure><p>é¡ä¼¼ã®issueã¯æ§˜ã€…ã«æŒ™ã’ã‚‰ã‚Œã¦ãŠã‚Šï¼ˆ<a href="https://github.com/storybookjs/storybook/issues/22431">https://github.com/storybookjs/storybook/issues/22431</a> ç­‰ï¼‰ã€Yarn v1ã®ãƒã‚°ã§ã‚ã‚‹ã¨è€ƒãˆã‚‰ã‚Œã¦ã„ã¾ã™ã€‚</p><h1 id="æŒ¯ã‚Šè¿”ã‚Š"><a href="#æŒ¯ã‚Šè¿”ã‚Š" class="headerlink" title="æŒ¯ã‚Šè¿”ã‚Š"></a>æŒ¯ã‚Šè¿”ã‚Š</h1><p>ç§ã«ã¨ã£ã¦ä¸€ç•ªå¤§å¤‰ã ã£ãŸã®ã¯ã€ã“ã®ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã‚’è¡Œã†ã«ã‚ãŸã‚Šã€Vueã®ä½•ã‚’ã©ã®ã‚ˆã†ã«æ›´æ–°ã™ã‚Œã°è‰¯ã„ã®ã‹æŠŠæ¡ã™ã‚‹æ‰€ã ã£ãŸã‹ã¨æ€ã„ã¾ã™ã€‚è‡ªåˆ†çš„ã«ã‚‚ã“ã“ãŒæœ€ã‚‚é‡è¦ãªæ‰€ã§ã‚ã‚‹ã¨è€ƒãˆã¦ã„ãŸãŸã‚ã€Vueã®å…¨ä½“åƒæŠŠæ¡ã«æ³¨åŠ›ã—ãªãŒã‚‰å¯¾å¿œå†…å®¹ã®æ´—ã„å‡ºã—ã‚’è¡Œã£ãŸè¨˜æ†¶ãŒã‚ã‚Šã¾ã™ã€‚</p><p>å¯¾å¿œå†…å®¹ãŒæ´—ã„å‡ºã•ã‚ŒãŸå¾Œã¯ã€åŸºæœ¬çš„ã«ãã‚Œãã‚Œã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«å¯¾å¿œã™ã‚‹å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«å¾“ã£ã¦ç§»è¡Œã™ã‚Œã°å•é¡ŒãªãVue3åŒ–ã§ãã¾ã—ãŸã€‚</p><p>ã¨ã¯ã„ãˆã€ä»¥ä¸‹ã®ç‚¹ã§å¤§å¤‰ã§ã‚ã‚‹ã“ã¨ã¯é–“é•ã„ãªã„ã¨æ€ã„ã¾ã™ã€‚</p><ul><li>å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’é€ä¸€ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚‹</li><li>ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä¸Šã’ã‚Œã°å®Œäº†ã™ã‚‹ã‚‚ã®ã‹ã‚‰ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’å¤§ããä¿®æ­£ã™ã‚‹å¿…è¦ã®ã‚ã‚‹ã‚‚ã®ã¾ã§å¹…åºƒãå­˜åœ¨ã™ã‚‹</li><li>Vue3ã«å¯¾å¿œã—ã¦ã„ãªã„ã‚‚ã®ã‚‚å­˜åœ¨ã™ã‚‹</li></ul><p>ä»–ã¨æ¯”è¼ƒã—ã¦ã‚‚ç¾¤ã‚’æŠœã„ã¦å¤§å¤‰ã ã£ãŸã®ãŒã€Vuetifyã®æ›´æ–°ã§ã—ãŸã€‚</p><p>UIã‚’æ‹…ã£ã¦ãã‚Œã‚‹ã“ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å¤‰æ›´ç‚¹ã¯ã€å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã™ã‚‰ç¶²ç¾…ã§ããªã„ã»ã©ã‚ã‚‹ã ã‘ã§ãªãã€è¦‹ãŸç›®ã‚‚å¤‰åŒ–ã—ã¦ã—ã¾ã†ç®‡æ‰€ãŒã‚ã‚‹ãŸã‚ã€å®Ÿè£…ç®‡æ‰€ã‚’é€ä¸€ç¢ºèªã—ã¦ä¿®æ­£ã™ã‚‹ä»–ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ï¼ˆã‚‚ã¡ã‚ã‚“<code>eslint-plugin-vuetify</code>ã‚’ä½¿ç”¨ã™ã‚Œã°å¹¾åˆ†ã‹æ¥½ã§ãã¾ã™ãŒã€ã“ã‚Œã‚‚å¤‰æ›´ç‚¹ã‚’å…¨ã¦ç¶²ç¾…ã—ã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªã„ãŸã‚æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚ï¼‰</p><p>ä¸€æ–¹ã§ã€APIå¤‰æ›´ã«ä¼´ã†ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®ä¿®æ­£ã¯äºˆæƒ³ã«åã—ã¦ã»ã¨ã‚“ã©ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p><h1 id="ã•ã„ã”ã«"><a href="#ã•ã„ã”ã«" class="headerlink" title="ã•ã„ã”ã«"></a>ã•ã„ã”ã«</h1><p>æ¯”è¼ƒçš„ã–ã£ãã‚Šã¨Vueãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã«ã¤ã„ã¦çµŒé¨“ã‚’è¸ã¾ãˆãŸãŠè©±ã—ã—ã¾ã—ãŸã€‚</p><p>è©³ç´°ãªéƒ¨åˆ†ã«ã¤ã„ã¦ã¯ã€å„ã€…ã®Vueãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¯¾ã—ã€ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’è¸ã¾ãˆã€æ¯”è¼ƒçš„æ•´å‚™ã•ã‚Œã¦ã„ã‚‹å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆé¡ã¨ã«ã‚‰ã‚ã£ã“ã—ãªãŒã‚‰ã€æŸ”è»Ÿã«å¯¾å¿œã—ã¦ã„ãã—ã‹ãªã„ã¨æ€ã„ã¾ã—ãŸã€‚</p><p>æœ¬è¨˜äº‹ã®å†…å®¹ã¯ã€ã“ã‚Œã‹ã‚‰Vueãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã™ã‚‹éš›ã«ç›´æ¥çš„ãªæ‰‹åŠ©ã‘ã¯ã—ã¦ãã‚Œãªã„ã¨æ€ã„ã¾ã™ãŒã€å¿ƒæ§‹ãˆã®åŠ©ã‘ãªã‚“ã‹ã«ãªã‚Œã°ã¨æ€ã£ã¦ã„ã¾ã™ã€‚</p><p>ä»Šå›ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã«ã‚ãŸã‚Šã€Vue.jså‘¨ã‚Šã®æ§˜ã€…ãªè³ªå•ã«ç­”ãˆã¦ä¸‹ã•ã£ãŸå¤ªç”°æ´‹ä»‹ã•ã‚“ã€ãã—ã¦æœ¬æ¡ˆä»¶ã‚’é€šã˜ã¦æ§˜ã€…ãªã‚µãƒãƒ¼ãƒˆã‚’ã—ã¦ä¸‹ã•ã£ãŸæ¾å·å–œè¦ã•ã‚“ã«ã¯æ·±ãæ„Ÿè¬ç”³ã—ä¸Šã’ã¾ã™ã€‚</p><p>æœ€å¾Œã¾ã§ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚</p><div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none; padding-left: 0;"><li id="fn:1"><span style="vertical-align: top; padding-right: 10px;">1.</span><span style="vertical-align: top;">å†—è«‡æŠœãã§100å€ãã‚‰ã„æ—©ããªã‚Šã¾ã—ãŸã€‚</span><a href="#fnref:1" rev="footnote"> â†©</a></li><li id="fn:2"><span style="vertical-align: top; padding-right: 10px;">2.</span><span style="vertical-align: top;"><a href="https://ja.vuejs.org/guide/scaling-up/tooling.html#ide-support">https://ja.vuejs.org/guide/scaling-up/tooling.html#ide-support</a> ã‚ˆã‚Šã€ç„¡åŠ¹åŒ–ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚</span><a href="#fnref:2" rev="footnote"> â†©</a></li><li id="fn:3"><span style="vertical-align: top; padding-right: 10px;">3.</span><span style="vertical-align: top;">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯éæ¨å¥¨ã®æ‹¡å¼µæ©Ÿèƒ½ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã¦ã‚‚é€šçŸ¥ã—ã¦ãã‚Œãªã„ã®ã§<code>Unwanted Recommendations</code>ã¨ã„ã†æ‹¡å¼µæ©Ÿèƒ½ã‚‚è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚</span><a href="#fnref:3" rev="footnote"> â†©</a></li><li id="fn:4"><span style="vertical-align: top; padding-right: 10px;">4.</span><span style="vertical-align: top;">ä¾¿å®œä¸Š&quot;Vue3ã‹ã‚‰ã®æ–°è¦æ¨å¥¨äº‹é …ã®é©ç”¨&quot;ã«è¨˜è¼‰ã—ã¦ã„ã¾ã™ãŒã€å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§åè¨€ã•ã‚Œã¦ã„ã‚‹ç®‡æ‰€ã¯ç‰¹ã«å­˜åœ¨ã—ã¦ã„ãªã‹ã£ãŸã¨è¨˜æ†¶ã—ã¦ã„ã¾ã™ï¼ˆæ³¨ç›®ã®æ–°æ©Ÿèƒ½ã¨ã¯è¨€ã‚ã‚Œã¦ã„ã¾ã™ï¼‰ã€‚</span><a href="#fnref:4" rev="footnote"> â†©</a></li><li id="fn:5"><span style="vertical-align: top; padding-right: 10px;">5.</span><span style="vertical-align: top;">Vue3ã‹ã‚‰TypeScriptã¸ã®ã‚µãƒãƒ¼ãƒˆãŒå¼·åŒ–ã•ã‚ŒãŸãŸã‚å®Ÿæ–½ã—ã¦ã„ã¾ã™ã€‚å·¥æ•°ã®é–¢ä¿‚ã§JavaScriptã‹ã‚‰TypeScriptã¸æ›¸ãæ›ãˆã‚‹ã“ã¨ã¯ã§ããšã€ç’°å¢ƒè¨­å®šã®ã¿ã®å¯¾å¿œã¨ãªã£ãŸãŸã‚ã€&quot;<strong>ï¼ˆç’°å¢ƒè¨­å®šã®ã¿ï¼‰</strong>&quot;ã¨ã—ã¦ã„ã¾ã™ã€‚</span><a href="#fnref:5" rev="footnote"> â†©</a></li></ol></div></div>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Programming/">Programming</category>
      
      
      <category domain="https://future-architect.github.io/tags/Vue-js/">Vue.js</category>
      
      <category domain="https://future-architect.github.io/tags/Vue3/">Vue3</category>
      
      <category domain="https://future-architect.github.io/tags/Vuetify/">Vuetify</category>
      
      <category domain="https://future-architect.github.io/tags/%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E7%AE%A1%E7%90%86/">ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†</category>
      
      <category domain="https://future-architect.github.io/tags/vue2/">vue2</category>
      
      
      <comments>https://future-architect.github.io/articles/20240405a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Difyã§ç”ŸæˆAIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¥é–€ã€€å¾Œç·¨ï¼šè‡ªä½œãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§æ©Ÿèƒ½è¿½åŠ ã—ã¦ç”ŸæˆAIã®æŒ‡å‘æ€§ã¨ç²¾åº¦ã‚’é«˜ã‚ã‚‹</title>
      <link>https://future-architect.github.io/articles/20240404a/</link>
      <guid>https://future-architect.github.io/articles/20240404a/</guid>
      <pubDate>Wed, 03 Apr 2024 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;h2 id=&quot;æ¦‚è¦&quot;&gt;&lt;a href=&quot;#æ¦‚è¦&quot; class=&quot;headerlink&quot; title=&quot;æ¦‚è¦&quot;&gt;&lt;/a&gt;æ¦‚è¦&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;/articles/20240402a/&quot;&gt;å‰å›&lt;/a&gt;ã«å¼•ãç¶šã &lt;a</description>
          
        
      
      
      
      <content:encoded><![CDATA[<h2 id="æ¦‚è¦"><a href="#æ¦‚è¦" class="headerlink" title="æ¦‚è¦"></a>æ¦‚è¦</h2><p><a href="/articles/20240402a/">å‰å›</a>ã«å¼•ãç¶šã <a href="https://dify.ai/">Dify</a> ã¨ <a href="https://console.anthropic.com/dashboard">Anthropic Claude</a> ï¼ˆOpenAI ã§ã‚‚ OpenRouter çµŒç”±ã®ä½•ã‹ã§ã‚‚OKï¼‰ã‚’ä½¿ã£ã¦ç°¡å˜ã«ç”ŸæˆAIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã™ã‚‹æ–¹æ³•ã‚’ã”ç´¹ä»‹ã—ã¾ã™ã€‚</p><h2 id="ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«3ï¼šã‚»ãƒ«ãƒ•ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ä»˜ãã®SQLç”ŸæˆAIãƒãƒ£ãƒƒãƒˆbot"><a href="#ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«3ï¼šã‚»ãƒ«ãƒ•ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ä»˜ãã®SQLç”ŸæˆAIãƒãƒ£ãƒƒãƒˆbot" class="headerlink" title="ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«3ï¼šã‚»ãƒ«ãƒ•ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ä»˜ãã®SQLç”ŸæˆAIãƒãƒ£ãƒƒãƒˆbot"></a>ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«3ï¼šã‚»ãƒ«ãƒ•ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ä»˜ãã®SQLç”ŸæˆAIãƒãƒ£ãƒƒãƒˆbot</h2><p><a href="/articles/20240402a/">å‰ç·¨ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«1</a>ã§ä½œã£ãŸSQLç”Ÿæˆãƒãƒ£ãƒƒãƒˆbotã‚’ãƒ™ãƒ¼ã‚¹ã«ã€ã‚»ãƒ«ãƒ•ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã€é–“é•ã£ãŸSQLæ–‡ã‚„å­˜åœ¨ã—ãªã„ãƒ†ãƒ¼ãƒ–ãƒ«ã‚„ã‚«ãƒ©ãƒ ã‚’ä½¿ç”¨ã—ã‚ˆã†ã¨ã—ãŸæ™‚ã«è‡ªå‹•ã§ã‚„ã‚Šç›´ã™ã‚ˆã†ã«æ”¹ä¿®ã—ã¾ã™ã€‚</p><h3 id="DBç”¨æ„"><a href="#DBç”¨æ„" class="headerlink" title="DBç”¨æ„"></a>DBç”¨æ„</h3><p>SQLã®å®Ÿè¡Œç’°å¢ƒãŒå¿…è¦ã«ãªã‚Šã¾ã™ãŒã€ã¡ã‚‡ã†ã© Dify ãŒä½¿ç”¨ã—ã¦ã„ã‚‹ DBï¼ˆPostgresqlï¼‰ ã‚µãƒ¼ãƒ“ã‚¹ãŒã‚ã‚‹ã®ã§ã€ã“ã‚Œã«ãƒ›ã‚¹ãƒˆOSã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚åˆ¥ã§DBã‚’ç”¨æ„ã§ãã‚‹å ´åˆã¯ãã¡ã‚‰ã§ã‚‚OKã§ã™ã€‚</p><p><code>docker-compose.yml</code> ã§ä»¥ä¸‹ã®è¡Œã‚’ã‚¢ãƒ³ã‚³ãƒ¡ãƒ³ãƒˆã—ã¦ãã ã•ã„ã€‚</p><figure class="highlight yml"><figcaption><span>docker-compoese.yml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment"># uncomment to expose db(postgresql) port to host</span></span><br><span class="line"><span class="comment"># ports:</span></span><br><span class="line"><span class="comment">#   - &quot;5432:5432&quot;</span></span><br></pre></td></tr></table></figure><p>ã“ã‚Œã§ãƒ›ã‚¹ãƒˆOSã‹ã‚‰ä¸‹è¨˜ã§æ¥ç¶šã§ãã¾ã™ã€‚</p><ul><li>ãƒ›ã‚¹ãƒˆãƒ»ãƒãƒ¼ãƒˆ <code>localhost:5432</code> </li><li>DBå <code>dify</code></li><li>ãƒ¦ãƒ¼ã‚¶å <code>postgres</code></li><li>ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ <code>difyai123456</code></li></ul><p>é©å½“ã«æ–°ã—ã„ã‚¹ã‚­ãƒ¼ãƒã‚’ä½œã‚Šã€DDLã‚’æµã—ã¾ã™ã€‚ã“ã“ã§ã¯ä¾‹ã¨ã—ã¦ã‚¹ã‚­ãƒ¼ãƒå <code>test1</code> ã«<a href="/articles/20240402a/">å‰ç·¨ã§ä¾‹ç¤ºã—ãŸDDL</a>ã‚’å®Ÿè¡Œã—ãŸäº‹ã«ã—ã¦è©±ã‚’é€²ã‚ã¾ã™ã€‚</p><h3 id="ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè£…"><a href="#ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè£…" class="headerlink" title="ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè£…"></a>ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè£…</h3><p>ã€ŒSQLæ–‡ã‚’å—ã‘å–ã‚Šã€ã€Œå®Ÿè¡Œçµæœã®æ­£å¦ã¨ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿”ã™ã€ã ã‘ã®ç°¡å˜ãª Web API ã‚’å‚™ãˆãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹ç™ºã—ã¾ã™ã€‚ã“ã®IN&#x2F;OUTã•ãˆå®ˆã£ã¦ã„ã‚Œã°è¨€èªã‚„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯å•ã„ã¾ã›ã‚“ãŒã€ã“ã®ä¾‹ã§ã¯ Java ã® Spring Boot ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã—ã¾ã™ã€‚</p><details><summary>pom.xml & Applicationã‚¯ãƒ©ã‚¹</summary><figure class="highlight xml"><figcaption><span>pom.xml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>rdb-repository<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>rdb-repository<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">java.version</span>&gt;</span>17<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springdoc<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springdoc-openapi-starter-webmvc-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jp.co.future<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>uroborosql<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>0.26.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.postgresql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>postgresql<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>42.7.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.32<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><figcaption><span>RdbRepositoryApplication.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.rdbrepository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RdbRepositoryApplication</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">SpringApplication.run(RdbRepositoryApplication.class, args);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><figure class="highlight java"><figcaption><span>RdbRepositoryController.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/api/rdb&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RdbRepositoryController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(RdbRepositoryController.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/sql_review&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> SqlReviewResponse <span class="title function_">sqlReview</span><span class="params">(<span class="meta">@RequestParam</span> String query)</span> &#123;</span><br><span class="line">        <span class="type">SqlConfig</span> <span class="variable">config</span> <span class="operator">=</span> UroboroSQL.builder(<span class="string">&quot;jdbc:postgresql://localhost:5432/dify?currentSchema=test1&quot;</span>, <span class="string">&quot;postgres&quot;</span>, <span class="string">&quot;difyai123456&quot;</span>)</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> (<span class="type">SqlAgent</span> <span class="variable">agent</span> <span class="operator">=</span> config.agent()) &#123;</span><br><span class="line">            agent.queryWith(query).collect(); <span class="comment">// â›”å—ã‘å–ã£ãŸSQLä½•ã§ã‚‚å®Ÿè¡Œã™ã‚‹ã®ã§å®Ÿé¨“ç’°å¢ƒä»¥å¤–ã§çœŸä¼¼ã—ãªã„äº‹ğŸ˜±</span></span><br><span class="line">            logger.info(query);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SqlReviewResponse</span>().setSuccess(<span class="literal">true</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            logger.error(e.getMessage(), e);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SqlReviewResponse</span>().setErrorMessage(e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Data</span></span><br><span class="line">    <span class="meta">@Accessors(chain = true)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">SqlReviewResponse</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">String</span> <span class="variable">errorMessage</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">isSuccess</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>OpenAPI (Swagger) æº–æ‹ ã®ã‚¹ã‚­ãƒ¼ãƒãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚ä¸Šã®ä¾‹ã§ã¯ <code>dependency</code> ã« <code>springdoc-openapi-starter-webmvc-ui</code> ã‚’åŠ ãˆã¦ã„ã‚‹ã®ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•å¾Œã« <a href="http://localhost:8080/v3/api-docs">http://localhost:8080/v3/api-docs</a> ã«å‹æ‰‹ã«ç”Ÿæˆã•ã‚Œã¦ã„ã¾ã™ã€‚</p><h3 id="ä½œã£ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’Difyã«ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ç™»éŒ²"><a href="#ä½œã£ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’Difyã«ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ç™»éŒ²" class="headerlink" title="ä½œã£ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’Difyã«ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ç™»éŒ²"></a>ä½œã£ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’Difyã«ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ç™»éŒ²</h3><p>ï¼ˆå…ˆã»ã©ä½œã£ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯èµ·å‹•ã—ã¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘ä»˜ã‘ã‚‹çŠ¶æ…‹ã«ã—ã¦ãŠã„ã¦ãã ã•ã„ã€‚ï¼‰</p><p>ç”»é¢ä¸Šéƒ¨ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼å³ç«¯ã®<a href="http://localhost/tools?category=api">ãƒ„ãƒ¼ãƒ«</a>ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã€å·¦ä¸Šã®ã€Œã‚«ã‚¹ã‚¿ãƒ ãƒ„ãƒ¼ãƒ«ã‚’ä½œæˆã™ã‚‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚</p><img src="/images/20240404a/image.png" alt="" width="573" height="143" loading="lazy"><p>åå‰ã¯é©å½“ã«ã¤ã‘ã¦ã€APIã®ã‚¹ã‚­ãƒ¼ãƒã¯æ‰‹å‹•ã§ã‚³ãƒ”ãƒšã™ã‚‹ã‹ã€ï¼ˆDockerã®è¨­å®šã§ãƒ›ã‚¹ãƒˆå <code>host.docker.internal</code> ã‚’æœ‰åŠ¹ã«ã—ã¦ã„ã‚‹ãªã‚‰ï¼‰ <a href="http://host.docker.internal:8080/v3/api-docs">http://host.docker.internal:8080/v3/api-docs</a> ç­‰ã‚’ä½¿ã£ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚ã“ã“ã§å¿µã®ãŸã‚ãƒ†ã‚¹ãƒˆã—ã¦é€šã‚Œã°æº–å‚™OKã§ã™ã€‚ä¿å­˜ã—ã¦ãã ã•ã„ã€‚</p><img src="/images/20240404a/image_2.png" alt="" width="581" height="694" loading="lazy"><img src="/images/20240404a/image_3.png" alt="" width="450" height="362" loading="lazy"><h3 id="AIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹ç™º"><a href="#AIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹ç™º" class="headerlink" title="AIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹ç™º"></a>AIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹ç™º</h3><p>ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«2ã¨åŒæ§˜ã€ã‚¹ã‚¿ã‚¸ã‚ªâ†’æ–°ã—ã„ã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹â†’ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ ã§æ–°ã—ã„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã—ã€ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã‚¿ã‚¤ãƒ—ã‚’ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã«ã—ã¾ã™ã€‚</p><p>ç”»é¢ä¸­å¤®ã®ãƒ„ãƒ¼ãƒ«ã®ã€Œ+è¿½åŠ ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã€Œã‚«ã‚¹ã‚¿ãƒ ã€ã‚’é¸æŠã™ã‚‹ã¨ã€å…ˆã»ã©ç™»éŒ²ã—ãŸè‡ªä½œãƒ„ãƒ¼ãƒ«ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã®ã§é¸æŠã—ã¦ã€Œè¿½åŠ ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚</p><img src="/images/20240404a/image_4.png" alt="" width="588" height="228" loading="lazy"><p>ã€Œæ‰‹é †ã€ã¯ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«2ã®å†…å®¹ã«1è¡Œè¿½åŠ ã—ã€ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã†ã‚ˆã†ã«æŒ‡ç¤ºã—ã¾ã™ã€‚å¤‰æ•° <code>&#123;&#123;DDL&#125;&#125;</code> <code>&#123;&#123;DataModelDescriptions&#125;&#125;</code> ã¯å‰å›åŒæ§˜ã€Œæ®µè½ã€ã«å¤‰æ›´ã™ã‚‹ã®ã‚’ãŠå¿˜ã‚Œãªãã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">You can behave as an expert of database expert. Provide a clear answer to the main purpose of the order. Omit preamble, phase, and repeating the order.</span><br><span class="line"></span><br><span class="line">DDL:</span><br><span class="line">```</span><br><span class="line">&#123;&#123;DDL&#125;&#125;</span><br><span class="line">```</span><br><span class="line">Data model descriptions:</span><br><span class="line">```</span><br><span class="line">&#123;&#123;DataModelDescriptions&#125;&#125;</span><br><span class="line"></span><br><span class="line">Generated SQL must be validated using the tool `sqlReview`, then respond only with the SQL that passed the inspection.</span><br></pre></td></tr></table></figure><h3 id="å‹•ä½œç¢ºèª"><a href="#å‹•ä½œç¢ºèª" class="headerlink" title="å‹•ä½œç¢ºèª"></a>å‹•ä½œç¢ºèª</h3><p>ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«2ã§ä½¿ç”¨ã—ãŸDDLã¨ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«æ¦‚è¦ã‚’è¨­å®šã—ã¤ã¤ã€ã€Œå…¨å£²ä¸Šé‡‘é¡ã‚’åˆè¨ˆã™ã‚‹SQLã€ã®ã‚ˆã†ã«ã”ãå˜ç´”ãªè¦ä»¶ã§ãƒ†ã‚¹ãƒˆã™ã‚‹ã¨ã€ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¦ã‹ã‚‰å›ç­”ã™ã‚‹æ§˜å­ãŒç¢ºèªã§ãã¾ã™ã€‚</p><img src="/images/20240404a/image_5.png" alt="" width="436" height="451" loading="lazy"><p>ã¨ã“ã‚ãŒã€å°‘ã—è¤‡é›‘ãªè¦æ±‚ã«å¤‰æ›´ã™ã‚‹ã¨é€”ç«¯ã«å›ç­”ãŒç ´ç¶»ã—ã¾ã™ã€‚</p><img src="/images/20240404a/image_6.png" alt="" width="820" height="645" loading="lazy"><p>å‡ºåŠ›ã‚’ã‚ˆãè¦‹ã‚‹ã¨ã€ã€€<code>&quot;action_input&quot;: &quot; ~ &quot;&#125;</code> ã®ä¸­èº«ãŒæ”¹è¡Œä»˜ãã®SQLæ–‡ã®ãŸã‚ã€JSONã¨ã—ã¦ç ´ç¶»ã—ã¦ã„ã¾ã™ã€‚ <code>&#123;&quot;action&quot;: $TOOL_NAME, &quot;action_input&quot;: $ACTION_INPUT&#125;</code> ã®éƒ¨åˆ†ãŒï¼ˆReActæ–¹å¼ã§ã®ï¼‰ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—ã®ã‚­ãƒ¢ãªã®ã§ã€ã“ã®éƒ¨åˆ†ã«ç•°å¸¸ãŒã‚ã‚‹ã¨ä¸Šæ‰‹ããƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã§ããªã„ã‚ˆã†ã§ã™ã€‚</p><p>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«ã€ŒSQLã¯1è¡Œã«çºã‚ã‚ˆã€ã¨ä»˜ã‘åŠ ãˆã‚Œã°å‹•ä½œã¯ã™ã‚‹ã®ã§ã™ãŒâ€¦â€¦ã€‚Function Calling æ–¹å¼ã‚’æŒ‡å®šã§ããªã„ãƒ¢ãƒ‡ãƒ«ã§ã¯ç¾çŠ¶ã‚¹ãƒãƒ¼ãƒˆãªè§£æ±ºç­–ã¯ç„¡ã•ãã†ã§ã™ã€‚ <sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup></p><img src="/images/20240404a/image_7.png" alt="" width="827" height="259" loading="lazy"><p>ã•ã¦ã€SQLã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«å¤±æ•—ã—ãŸå ´åˆã¯ã©ã†ãªã‚‹ã®ã‹ï¼Ÿå°‘ã—æ„åœ°æ‚ªã‚’ã—ã¦ã€å¤‰æ•° <code>DDL</code> ã‚’ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ‰±ã„ã«ã—ã¦ã€ç©ºæ¬„ã«ã—ã¦å®Ÿè¡Œã—ã¦ã¿ã¾ã™ã€‚</p><img src="/images/20240404a/image_8.png" alt="" width="608" height="147" loading="lazy"><img src="/images/20240404a/image_9.png" alt="" width="821" height="872" loading="lazy"><p>æœ¬æ¥ãªã‚‰ã€Œã‚«ãƒ©ãƒ åãŒåˆ†ã‹ã‚‰ãªã„ã‹ã‚‰ç­”ãˆã‚‰ã‚Œãªã„ã€ã¨å›ç­”ã•ã›ã‚‹ã‚ˆã†ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§èª˜å°ã™ã‚‹ã®ãŒãƒ™ã‚¹ãƒˆãªå ´é¢ã§ã¯ã‚ã‚Šã¾ã™ãŒã€ã¨ã‚‚ã‚ã‚Œã“ã‚Œã§ã‚»ãƒ«ãƒ•ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«ã‚ˆã‚ŠAIãŒè©¦è¡ŒéŒ¯èª¤ã™ã‚‹æ§˜å­ã‚’ç¢ºèªã§ãã¾ã—ãŸã€‚</p><h3 id="ã“ã®ãƒ„ãƒ¼ãƒ«ã®æ”¹å–„ã‚¢ã‚¤ãƒ‡ã‚¢"><a href="#ã“ã®ãƒ„ãƒ¼ãƒ«ã®æ”¹å–„ã‚¢ã‚¤ãƒ‡ã‚¢" class="headerlink" title="ã“ã®ãƒ„ãƒ¼ãƒ«ã®æ”¹å–„ã‚¢ã‚¤ãƒ‡ã‚¢"></a>ã“ã®ãƒ„ãƒ¼ãƒ«ã®æ”¹å–„ã‚¢ã‚¤ãƒ‡ã‚¢</h3><p>ã“ã“ã¾ã§ã®è©¦è¡Œã®å»¶é•·ã¨ã—ã¦ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®è³ªã‚’é«˜ã‚ã‚‹ãŸã‚ã«ä¾‹ãˆã°æ¬¡ã®ã‚ˆã†ãªã‚¢ã‚¤ãƒ‡ã‚¢ãŒæŒ™ã’ã‚‰ã‚Œã¾ã™ã€‚ã‚ˆã‘ã‚Œã°ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã¦ã¿ã¦ãã ã•ã„ã€‚</p><ul><li>ç”Ÿæˆã•ã‚ŒãŸSQLã®SELECTçµæœã‚’è¿”ã—ã¦ã€Œè¦ä»¶é€šã‚Šã®æ¤œç´¢çµæœãŒå…¨ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ»å…¨ã‚«ãƒ©ãƒ æŠ½å‡ºã§ããŸã‹ã€ã€Œç®—å‡ºé …ç›®ã®æ•°å€¤ãŒæœŸå¾…å€¤é€šã‚Šã‹ã€ã‚’æ¤œè¨¼ã•ã›ã‚‹</li><li>å®Ÿè¡Œè¨ˆç”»ã‚’è¿”ã—ã¦ã€Œæœ€å¤§ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒå‡ºã‚‹çµåˆé †åºãƒ»æ¡ä»¶ã‚’æŒ‡å®šã§ããŸã‹ã€ã‚’è€ƒãˆã•ã›ã‚‹</li></ul><p>ã¾ãŸã€æŠ˜è§’ç”ŸæˆAIã®é ˜åŸŸã¨ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ–ãƒ«ãªé ˜åŸŸã«æ¥ç‚¹ãŒå‡ºæ¥ãŸã®ã ã‹ã‚‰ã€ç”ŸæˆAIã‹ã‚‰è‡ªä½œãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒå‘¼ã°ã‚ŒãŸæ™‚ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ãã‚Œã¸ã®è¿”ã‚Šå€¤ã‚’DBã«ç™»éŒ²ã—ã¦ã€ã€Œã©ã‚“ãªè¦æ±‚ã‚’å—ã‘ãŸæ™‚ã«ã©ã‚“ãªSQLãŒç”Ÿæˆã•ã‚Œã¦ã€ãã‚ŒãŒã©ã†æˆåŠŸ(orå¤±æ•—)ã—ãŸã‹ã€ã‚’è¨˜éŒ²ã™ã‚‹äº‹ã§å¾Œã€…åˆ†æã—ãŸã‚ŠAIã®æ•™è‚²ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ä½¿ã†ã¨ã„ã£ãŸäº‹ã‚‚è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚</p><h2 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h2><p>Dify ã‚’ä½¿ã£ã¦ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã§ç”ŸæˆAIã‚’ä½¿ã£ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹ç™ºã™ã‚‹æ–¹æ³•ã¨ã€å¾“æ¥å‹ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã®é€£æºæ–¹æ³•ã«ã¤ã„ã¦å…¥é–€ã™ã‚‹æ‰€ã¾ã§ã”ç´¹ä»‹ã—ã¦ãã¾ã—ãŸã€‚å…¥é–€ã¨ã¯è¨€ãˆã‚ã‚‹ç¨‹åº¦ã¾ã§ã®è¦æ¨¡ã®å•é¡Œè§£æ±ºã®æ‰‹æ®µã¨ã—ã¦ã¯å……åˆ†å®Ÿç”¨ãƒ¬ãƒ™ãƒ«ã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚</p><p>ãŒã€ã“ã‚Œã‚’ä¾‹ãˆã°ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºãªã©å¤§è¦æ¨¡ãªé ˜åŸŸã§æ´»ç”¨ã—ã‚ˆã†ã¨æ€ã†ã¨ã™ãã•ã¾ã€Œè†¨å¤§ãªãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ã‚„æ¥­å‹™è¦ä»¶ã‚’å…¨ã¦è©°ã‚è¾¼ã‚€ã¨ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒé£½å’Œã™ã‚‹ãƒ»ãƒˆãƒ¼ã‚¯ãƒ³æ•°ãŒçˆ†ç™ºã™ã‚‹ã€ã¨ã„ã£ãŸå•é¡Œã«çªãå½“ãŸã‚Šã¾ã™ã€‚</p><p>RAGï¼ˆãƒ¦ãƒ¼ã‚¶ãŒå…¥åŠ›ã—ãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’AIã«æŠ•ã’ã‚‹å‰ã«ã€é–¢é€£ã™ã‚‹æƒ…å ±ã‚’æŠœç²‹ã—è¿½è¨˜ã—ã¦ã‹ã‚‰ç”ŸæˆAIã«ä¸­ç¶™ã™ã‚‹ä»•çµ„ã¿ï¼‰ã‚„ãƒ¢ãƒ‡ãƒ«è‡ªä½“ã®è¿½åŠ å­¦ç¿’ã«ã‚ˆã£ã¦è§£æ±ºã™ã‚‹ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚‚ã‚ã‚Šã¾ã™ãŒãã‚Œã¯ã¾ãŸåˆ¥ã®ãŠè©±ã§ã€‚</p><p>ã¡ãªã¿ã«ãŸã â€RAGã¨ã‚„ã‚‰ã‚’ä½œã£ã¦ä½¿ã£ã¦ã¿ãŸã„â€ã ã‘ã§ã‚ã‚Œã° Dify ã§ã¯ç”»é¢ä¸Šéƒ¨ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ã€ŒãƒŠãƒ¬ãƒƒã‚¸ã€ã§ä½œæˆã—ã¦ã‚¢ãƒ—ãƒªå´ã§ã€Œã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã€ã«è¿½åŠ ã—ã¦ã‚„ã‚‹ã ã‘ãªã®ã§ã™ãã«ã§ã‚‚ã§ãã¾ã™ã€‚RAGã®å“è³ªã‚’å•ã‚ãªã‘ã‚Œã°ã®è©±ã§ã™ãŒâ€¦ä»Šå›ã¯ã“ã“ã¾ã§ã§ã™ã€‚</p><div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none; padding-left: 0;"><li id="fn:1"><span style="vertical-align: top; padding-right: 10px;">1.</span><span style="vertical-align: top;">4æœˆ5æ—¥ã«ã€GPT ã® Function Calling ã«ç›¸å½“ã™ã‚‹æ©Ÿèƒ½ &quot;Tool&quot; ãŒ Claude ã«è¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚ Dify ã‚‚å½“æ—¥ä¸­(!)ã«å¯¾å¿œã—ã¾ã—ãŸã€‚4æœˆ6æ—¥ç¾åœ¨ã€ã¾ã ãƒãƒ¼ã‚¸ãƒ§ãƒ³ä»˜ã‘ã•ã‚ŒãŸ Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯æœ‰ã‚Šã¾ã›ã‚“ãŒã€ <code>docker-compose.yaml</code> ã§ <code>api</code>,<code>worker</code>,<code>web</code> ã® <code>image</code> ã®ã‚¿ã‚°ã®éƒ¨åˆ†ã‚’ <code>main</code> ã«ã™ã‚Œã°ä¸€å¿œå‹•ä½œç¢ºèªã¯ã§ãã¾ã™ã®ã§è‡ªå·±è²¬ä»»ã§ã©ã†ãã€‚è¤‡æ•°è¡Œã«è·¨ã‚‹SQLã‚‚ã¡ã‚ƒã‚“ã¨ãƒ„ãƒ¼ãƒ«ã«æ¸¡ã•ã‚Œã¦ã¾ã™ã­ï¼ <img src="/images/20240404a/image_10.png" alt="" width="759" height="446" loading="lazy"></span><a href="#fnref:1" rev="footnote"> â†©</a></li></ol></div></div>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Programming/">Programming</category>
      
      
      <category domain="https://future-architect.github.io/tags/Java/">Java</category>
      
      <category domain="https://future-architect.github.io/tags/%E3%83%8E%E3%83%BC%E3%82%B3%E3%83%BC%E3%83%89/">ãƒãƒ¼ã‚³ãƒ¼ãƒ‰</category>
      
      <category domain="https://future-architect.github.io/tags/%E7%94%9F%E6%88%90AI/">ç”ŸæˆAI</category>
      
      <category domain="https://future-architect.github.io/tags/Dify/">Dify</category>
      
      <category domain="https://future-architect.github.io/tags/Anthropic-Claude/">Anthropic Claude</category>
      
      
      <comments>https://future-architect.github.io/articles/20240404a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>æŠ€è‚²ç¥­2024æ˜¥ã§ã€Œ2064å¹´ã‚‚ITã§ä»•äº‹ã—ç¶šã‘ã‚‹ãŸã‚ã®ã‚­ãƒ£ãƒªã‚¢ãƒ—ãƒ©ãƒ³ã€ã¨ã„ã†ã‚¿ã‚¤ãƒˆãƒ«ã§ç™ºè¡¨ã—ã¦ãã¾ã—ãŸã€‚</title>
      <link>https://future-architect.github.io/articles/20240403a/</link>
      <guid>https://future-architect.github.io/articles/20240403a/</guid>
      <pubDate>Tue, 02 Apr 2024 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;img src=&quot;/images/20240403a/top.png&quot; alt=&quot;&quot; width=&quot;800&quot;</description>
          
        
      
      
      
      <content:encoded><![CDATA[<img src="/images/20240403a/top.png" alt="" width="800" height="441"><p>æŠ€è‚²ç¥­ã¯ã‚µãƒãƒ¼ã‚¿ãƒ¼ã‚ºãŒå®Ÿæ–½ã—ã¦ã„ã‚‹æœªæ¥ã®ã€ŒæŠ€ã€è¡“è€…ã‚’ã€Œè‚²ã€ã¦ã‚‹æ´»å‹•ã¨ã—ã¦ã„ã‚‹å­¦ç”Ÿå‘ã‘ã®ã€ŒæŠ€è‚²ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€ã®ä¸€å¤§ã‚¤ãƒ™ãƒ³ãƒˆã§ã™ã€‚åƒ•è‡ªèº«ã‚‚ä½•åº¦ã‹ã‹ã‹ã‚ã£ã¦ã„ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã§ã€å…ˆæ—¥é–‹å‚¬ã•ã‚ŒãŸ2024å¹´3æœˆ17æ—¥ã«é–‹å‚¬ã•ã‚ŒãŸã€ŒæŠ€è‚²ç¥­2024æ˜¥ã€ã§ç™»å£‡ã—ã¦ãã¾ã—ãŸã€‚ç™ºè¡¨è³‡æ–™ã¯ã“ã¡ã‚‰ã«ãªã‚Šã¾ã™ã€‚</p><iframe src="https://www.slideshare.net/slideshow/embed_code/key/1vsRjQlfzzpNfo?hostedIn=slideshare&page=upload" width="476" height="400" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"></iframe><p>ã‚¿ã‚¤ãƒˆãƒ«ã®2064å¹´ã¨ã„ã†ã®ã¯ã€æŠ€è‚²ç¥­ã§ä¸€ç•ªãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚¾ãƒ¼ãƒ³ã ã¨æ€ã‚ã‚Œã‚‹20æ­³ãã‚‰ã„ã®å­¦éƒ¨2å¹´ã€3å¹´ã®è‹¥è€…ãŒ60æ­³å®šå¹´ã¾ã§åƒãã¨ã—ãŸã‚‰ã€ã¨ã„ã†å¹´ã§ã™ã­ã€‚AIã§ITæŠ€è¡“è€…ãŒã„ã‚‰ãªããªã‚‹ã€ã¿ãŸã„ãªè©±ãŒã‚ˆãã•ã‚Œã¦ã„ã¾ã™ãŒã€AIä»¥å‰ã«å„ªç§€ã™ãã‚‹è‹¥è€…ãŒå‘¨ã‚Šã«ã„ã£ã±ã„å¢—ãˆã¦ãã¦ã€ãšã£ã¨å‰ã‹ã‚‰å±æ©Ÿæ„Ÿã‚’æ„Ÿã˜ã¦ã„ãŸ40ä»£ã®ãŠã£ã•ã‚“ã®ã‚­ãƒ£ãƒªã‚¢ãƒ—ãƒ©ãƒ³ã‚’ãƒ†ãƒ¼ãƒã«ä»Šå›ã¯è¬›æ¼”ã‚’è¡Œã„ã¾ã—ãŸã€‚</p><p>ç§ã¯ä»Šå¾ŒAIã®é©æ–°çš„ç™ºå±•ã«ã‚ˆã£ã¦ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã®äººæ•°ãŒåŠåˆ†ã«ãªã‚‹ã¨ã—ã¦ã‚‚ã€ä¸Šã‹ã‚‰åŠåˆ†ã«å…¥ã£ã¦ã„ã‚Œã°ç”Ÿãæ®‹ã‚Œã‚‹ã ã‚ã†ã¨ã„ã†æ‰“ç®—ã®ã‚‚ã¨ã€æŠ€è¡“åŠ›ã®å‘ä¸Šã‚„ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã¨ã—ã¦ã®å¸‚å ´ä¾¡å€¤ã‚’å‘ä¸Šã•ã›ã¦ã„ãã€ãã—ã¦ãã‚Œã‚’è¦‹ãˆã‚‹åŒ–ã™ã‚‹ã€ã¨ã„ã†ã®ãŒåŸºæœ¬æˆ¦ç•¥ã¨ã—ã¦ã‚„ã£ã¦ã„ã¾ã™ã€‚ä»Šå›ã®ç™ºè¡¨ã§ã¯æ™‚é–“ã‚‚ãªã‹ã£ãŸã®ã§å‰²æ„›ã—ã¾ã—ãŸãŒæ›¸ç±åŸ·ç­†ã‚‚ãã®ãŸã‚ã®ä¸€æ‰‹ã§ã™ã€‚æœ¬ã‚’æ›¸ãã€ã¨ã„ã†ã®ã‚’ã“ã“ã—ã°ã‚‰ãã¯å¹´ã«2å†Šãã‚‰ã„ç¶™ç¶šã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«é–¢ã™ã‚‹èª¬æ˜ã‚’ä¸€æ ã—ã‚ƒã¹ã£ãŸã¨ãã®ã€2021å¹´ã®æŠ€è‚²ç¥­ã®è³‡æ–™ã‚‚å¼µã£ã¦ãŠãã¾ã™ã­ã€‚</p><iframe src="https://www.slideshare.net/slideshow/embed_code/key/EjKVxpJUE56bPZ?hostedIn=slideshare&page=upload" width="476" height="400" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"></iframe><p>ä»Šå›ã®ã‚¤ãƒ™ãƒ³ãƒˆã§ã¯è‡ªåˆ†ã¨è´è¬›è€…å±¤ã®å¤§å­¦ç”Ÿã®å¹´é½¢å·®ãŒå¤§ãããªã£ã¦ããŸã¨ã„ã†ã“ã¨ã§ã€ã¾ã•ã«æŠ€è‚²ç¥­ã§ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã‚’çŸ¥ã£ã¦å…¥ã£ã¦ãã‚ŒãŸè‹¥æ‰‹ã®å¤§å²©ã•ã‚“ã«ã‚‚ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã¨ã—ã¦å‚åŠ ã—ã¦ã‚‚ã‚‰ã„ã¾ã—ãŸã€‚è¦ªå­ã¨ã„ã£ã¦ã‚‚å˜˜ã˜ã‚ƒãªã„ãã‚‰ã„å¹´é½¢å·®ãŒã‚ã£ã¦ã‚‚ä»²è‰¯ãä»•äº‹ã—ã¦ã„ã‚‹ã¨ã„ã†ã®ã‚‚ä¼ã‚ã‚Œã°ã„ã„ãªã€ã¨ã„ã†ã®ã‚‚ã¡ã‚‡ã£ã´ã‚Šæ€ã£ã¦ã„ã¾ã—ãŸãŒã„ã‹ãŒã§ã—ãŸã§ã—ã‚‡ã†ã‹ï¼Ÿå¤§å²©ã•ã‚“ã¨ã¯ã€æŠ€è¡“åºƒå ±ã¨ã—ã¦ã€ä¼šç¤¾ã®é­…åŠ›ã‚’å¤–ã«ä¼ãˆã¦ã„ãã«ã¯ã©ã†ã™ã‚Œã°ã‚ˆã„ã®ã‹ï¼Ÿã¨ã„ã†èª²å¤–æ´»å‹•ã‚’ä¸€ç·’ã«ã‚„ã£ã¦ã„ã¾ã™ã€‚</p><h1 id="è³ªç–‘å¿œç­”"><a href="#è³ªç–‘å¿œç­”" class="headerlink" title="è³ªç–‘å¿œç­”"></a>è³ªç–‘å¿œç­”</h1><h2 id="Q-ITè·ã¯äººæ°—ãªã®ã«äººæ‰‹ä¸è¶³ãªã®ã¯ã©ã†ã—ã¦ã§ã—ã‚‡ã†ã‹ï¼Ÿ"><a href="#Q-ITè·ã¯äººæ°—ãªã®ã«äººæ‰‹ä¸è¶³ãªã®ã¯ã©ã†ã—ã¦ã§ã—ã‚‡ã†ã‹ï¼Ÿ" class="headerlink" title="Q: ITè·ã¯äººæ°—ãªã®ã«äººæ‰‹ä¸è¶³ãªã®ã¯ã©ã†ã—ã¦ã§ã—ã‚‡ã†ã‹ï¼Ÿ"></a>Q: ITè·ã¯äººæ°—ãªã®ã«äººæ‰‹ä¸è¶³ãªã®ã¯ã©ã†ã—ã¦ã§ã—ã‚‡ã†ã‹ï¼Ÿ</h2><p>ã¿ã‚“ãªITåŠ›ã‚’é«˜ã‚ã¦ãƒ“ã‚¸ãƒã‚¹ã‚’å¼·ãã—ãŸã„ã¨æ€ã£ã¦ã€ãŸãã•ã‚“äººãŒæ¬²ã—ã„ã®ã§ã€éœ€è¦ãŒã™ã”ãå¢—ãˆã¦ã„ã¾ã™ã€‚</p><h2 id="Q-æ—©ãä¸€äººå‰ã«ãªã‚‰ãªã‘ã‚Œã°ã¨ã„ã†å±æ©Ÿæ„ŸãŒã‚ã‚‹ãŒä¸€äººå‰ã«ãªã‚‹ã¨ã„ã†ã®ã¯ã©ã†ã„ã†ã“ã¨ã‹ï¼Ÿ"><a href="#Q-æ—©ãä¸€äººå‰ã«ãªã‚‰ãªã‘ã‚Œã°ã¨ã„ã†å±æ©Ÿæ„ŸãŒã‚ã‚‹ãŒä¸€äººå‰ã«ãªã‚‹ã¨ã„ã†ã®ã¯ã©ã†ã„ã†ã“ã¨ã‹ï¼Ÿ" class="headerlink" title="Q: æ—©ãä¸€äººå‰ã«ãªã‚‰ãªã‘ã‚Œã°ã¨ã„ã†å±æ©Ÿæ„ŸãŒã‚ã‚‹ãŒä¸€äººå‰ã«ãªã‚‹ã¨ã„ã†ã®ã¯ã©ã†ã„ã†ã“ã¨ã‹ï¼Ÿ"></a>Q: æ—©ãä¸€äººå‰ã«ãªã‚‰ãªã‘ã‚Œã°ã¨ã„ã†å±æ©Ÿæ„ŸãŒã‚ã‚‹ãŒä¸€äººå‰ã«ãªã‚‹ã¨ã„ã†ã®ã¯ã©ã†ã„ã†ã“ã¨ã‹ï¼Ÿ</h2><p>è¨€ã‚ã‚ŒãŸã“ã¨ãŒã§ãã‚‹â†’è‡ªç™ºçš„ã«ã§ãã‚‹â†’è‡ªåˆ†ã‚ˆã‚Šè‹¥æ‰‹ã‚’ãƒªãƒ¼ãƒ‰ã—ã¤ã¤ã§ãã‚‹â†’è‡ªåˆ†ã‹ã‚‰é“ã‚’åˆ‡ã‚Šé–‹ã‘ã‚‹</p><p>ã¨ã„ã†ã®ãŒæ€ã£ã¦ã„ã‚‹ã“ã¨ã§ã€å®Ÿéš›ã«ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®ãƒ©ãƒ³ã‚¯ã‚¢ãƒƒãƒ—è¦ä»¶ã‚‚ã“ã‚“ãªæ„Ÿã˜ã€‚ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã¯å¹´åŠŸåºåˆ—ã§ã¯ãªã„ã®ã§ã€ã“ã‚ŒãŒã§ãã¦ã„ã‚‹è‹¥è€…ã¯å¹´é½¢é–¢ä¿‚ãªãã˜ã‚ƒã‚“ã˜ã‚ƒã‚“ãƒ©ãƒ³ã‚¯ã‚¢ãƒƒãƒ—ã—ã¦ã„ã¾ã™ã­ã€‚</p><h2 id="Q-ITã‚³ãƒ³ã‚µãƒ«ã¯-è¦ä»¶å®šç¾©ãªã©äººã¨é–¢ã‚ã‚‹éƒ¨åˆ†ãŒãƒ¡ã‚¤ãƒ³ã§é–‹ç™ºã«æºã‚ã‚‹ã“ã¨ãŒå°‘ãªã„ã¨è€ƒãˆã¦ã„ã‚‹ã®ã§ã™ãŒ-ã„ã‹ãŒã§ã™ã‹"><a href="#Q-ITã‚³ãƒ³ã‚µãƒ«ã¯-è¦ä»¶å®šç¾©ãªã©äººã¨é–¢ã‚ã‚‹éƒ¨åˆ†ãŒãƒ¡ã‚¤ãƒ³ã§é–‹ç™ºã«æºã‚ã‚‹ã“ã¨ãŒå°‘ãªã„ã¨è€ƒãˆã¦ã„ã‚‹ã®ã§ã™ãŒ-ã„ã‹ãŒã§ã™ã‹" class="headerlink" title="Q: ITã‚³ãƒ³ã‚µãƒ«ã¯, è¦ä»¶å®šç¾©ãªã©äººã¨é–¢ã‚ã‚‹éƒ¨åˆ†ãŒãƒ¡ã‚¤ãƒ³ã§é–‹ç™ºã«æºã‚ã‚‹ã“ã¨ãŒå°‘ãªã„ã¨è€ƒãˆã¦ã„ã‚‹ã®ã§ã™ãŒ, ã„ã‹ãŒã§ã™ã‹?"></a>Q: ITã‚³ãƒ³ã‚µãƒ«ã¯, è¦ä»¶å®šç¾©ãªã©äººã¨é–¢ã‚ã‚‹éƒ¨åˆ†ãŒãƒ¡ã‚¤ãƒ³ã§é–‹ç™ºã«æºã‚ã‚‹ã“ã¨ãŒå°‘ãªã„ã¨è€ƒãˆã¦ã„ã‚‹ã®ã§ã™ãŒ, ã„ã‹ãŒã§ã™ã‹?</h2><p>ä¼šç¤¾ã«ã‚‚ã‚ˆã‚‹ã¨æ€ã„ã¾ã™ãŒã€ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã¯ä¸€æ¬¡å—ã‘ã§ã€ãŠå®¢ã•ã‚“ã¨ã‚°ãƒ©ãƒ³ãƒ‰ãƒ‡ã‚¶ã‚¤ãƒ³ç­–å®šã‹ã‚‰è¦ä»¶å®šç¾©ã€å®Ÿè£…ã€é‹ç”¨ã¾ã§ä¸€æ°—é€šè²«ã§ã‚„ã‚‹ä¼šç¤¾ãªã®ã§ã€å®Ÿè£…ã¨ã‹ã‚‚ã‚ˆãã‚„ã£ã¦ã„ã¾ã™ã€‚</p><h2 id="Q-ç¾çŠ¶æœªçµŒé¨“ã®äººãŒã“ã‚Œã‹ã‚‰å‹‰å¼·ã‚’å§‹ã‚ã‚‹å ´åˆã¾ãšä½•ã‹ã‚‰å§‹ã‚ã‚‹ã¹ãã§ã—ã‚‡ã†ã‹ï¼Ÿ"><a href="#Q-ç¾çŠ¶æœªçµŒé¨“ã®äººãŒã“ã‚Œã‹ã‚‰å‹‰å¼·ã‚’å§‹ã‚ã‚‹å ´åˆã¾ãšä½•ã‹ã‚‰å§‹ã‚ã‚‹ã¹ãã§ã—ã‚‡ã†ã‹ï¼Ÿ" class="headerlink" title="Q: ç¾çŠ¶æœªçµŒé¨“ã®äººãŒã“ã‚Œã‹ã‚‰å‹‰å¼·ã‚’å§‹ã‚ã‚‹å ´åˆã¾ãšä½•ã‹ã‚‰å§‹ã‚ã‚‹ã¹ãã§ã—ã‚‡ã†ã‹ï¼Ÿ"></a>Q: ç¾çŠ¶æœªçµŒé¨“ã®äººãŒã“ã‚Œã‹ã‚‰å‹‰å¼·ã‚’å§‹ã‚ã‚‹å ´åˆã¾ãšä½•ã‹ã‚‰å§‹ã‚ã‚‹ã¹ãã§ã—ã‚‡ã†ã‹ï¼Ÿ</h2><p>ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã¯å¤§å­¦æ™‚ä»£ã«ITã‚’ã‚„ã£ã¦ã„ãªã‹ã£ãŸå­¦ç”Ÿã‚‚æ–°å’ã§å…¥ã£ã¦ã„ã¾ã™ã€‚æ–°å…¥ç¤¾å“¡ç ”ä¿®ã‚’ãã¡ã‚“ã¨è¡Œã£ã¦ãã®å¾Œã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦æ´»èºã—ã¦ã„ã‚‹ç¤¾å“¡ã‚‚å¤šã„ã§ã™ã€‚ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹ã¯è‡ªåˆ†ã§é¸ã¹ã‚‹ã®ã§ã€å­¦ã‚“ã ä¸Šã§ãŠå®¢ã•ã‚“ã¨è©±ã‚’ã™ã‚‹ã®ã‚’ãƒ¡ã‚¤ãƒ³ã¨ã—ã¦é¸ã¶äººã‚‚ã„ã¾ã™ãŒã€‚</p><p>ãã†ã„ã†ãã¡ã‚“ã¨é›ãˆã¦ãã‚Œã‚‹ä¼šç¤¾ã«å…¥ã‚‹ã®ãŒè‰¯ã„ã¨æ€ã„ã¾ã™ã€‚ã§ã‚‚ã€ã©ã†ã™ã‚Œã°å…¥ã‚Œã‚‹ã‹ã€å„ç¤¾ãŒã©ã†ã„ã†äººæã‚’æ±‚ã‚ã¦ã„ã‚‹ã‹ã¯å„ç¤¾ã°ã‚‰ã°ã‚‰ãªã®ã§ã€Œã“ã†ã™ã‚Œã°å¤§ä¸ˆå¤«ï¼ã€ã¨ã„ã†æ­£è§£ã¯ã¡ã‚‡ã£ã¨ã‚ã‹ã‚‰ãªã„ã§ã™ã­ã€‚</p><h2 id="Q-ä»–ã®æ–¹ãŒã€Œæ³¥è‡­ãã¦ã‚‚ã€ã‚³ãƒ„ã‚³ãƒ„ã€è²ªæ¬²ã«ã‚„ã‚‹ã€ãŒè‰¯ã„ã¨ã„ã†æ—¨ã®è©±ã‚’ã‚ˆãã—ã¦ã„ã‚‹ã®ã§ã™ãŒã€æ¸‹å·ã•ã‚“ã‚‚ãã†æ€ã„ã¾ã™ã‹ï¼Ÿ"><a href="#Q-ä»–ã®æ–¹ãŒã€Œæ³¥è‡­ãã¦ã‚‚ã€ã‚³ãƒ„ã‚³ãƒ„ã€è²ªæ¬²ã«ã‚„ã‚‹ã€ãŒè‰¯ã„ã¨ã„ã†æ—¨ã®è©±ã‚’ã‚ˆãã—ã¦ã„ã‚‹ã®ã§ã™ãŒã€æ¸‹å·ã•ã‚“ã‚‚ãã†æ€ã„ã¾ã™ã‹ï¼Ÿ" class="headerlink" title="Q: ä»–ã®æ–¹ãŒã€Œæ³¥è‡­ãã¦ã‚‚ã€ã‚³ãƒ„ã‚³ãƒ„ã€è²ªæ¬²ã«ã‚„ã‚‹ã€ãŒè‰¯ã„ã¨ã„ã†æ—¨ã®è©±ã‚’ã‚ˆãã—ã¦ã„ã‚‹ã®ã§ã™ãŒã€æ¸‹å·ã•ã‚“ã‚‚ãã†æ€ã„ã¾ã™ã‹ï¼Ÿ"></a>Q: ä»–ã®æ–¹ãŒã€Œæ³¥è‡­ãã¦ã‚‚ã€ã‚³ãƒ„ã‚³ãƒ„ã€è²ªæ¬²ã«ã‚„ã‚‹ã€ãŒè‰¯ã„ã¨ã„ã†æ—¨ã®è©±ã‚’ã‚ˆãã—ã¦ã„ã‚‹ã®ã§ã™ãŒã€æ¸‹å·ã•ã‚“ã‚‚ãã†æ€ã„ã¾ã™ã‹ï¼Ÿ</h2><p>ãã†æ€ã„ã¾ã™ã€‚ã¨ã„ã£ã¦ã‚‚ã€åŒã˜ä»•äº‹ã‚’10å¹´ã‚„ã‚Šç¶šã‘ã‚‹ã¨ã‹ãã†ã„ã†ã®ã¯ã„ã‚‰ãªã„ã¨æ€ã„ã¾ã™ã€‚å­¦ç”Ÿã®ã†ã¡ã¯ã€Œã“ã‚“ãªã“ã¨ã—ãŸã„ã€ã¨ã‚­ãƒ©ã‚­ãƒ©ã—ãŸä»•äº‹ã‚’ã‚„ã‚ŠãŸã„ã¨æ€ã†ã‹ã‚‚ã—ã‚Œãªã„ã§ã™ãŒã€è‡ªåˆ†ãŒæƒ³åƒã‚‚ã—ã¦ã„ãªã„ä»•äº‹ãŒä¸Šã‹ã‚‰é™ã£ã¦ããŸã‚Šã—ã¾ã™ã€‚ã§ã‚‚ãã†ã„ã†æœªçŸ¥ã ã£ãŸã‚‚ã®ã“ãã€è‡ªåˆ†ãŒçŸ¥ã‚‰ãªã„ã‚‚ã®ãŒãŸãã•ã‚“ã‚ã£ã¦å®ŸåŠ›ã‚’ä¼¸ã°ã™ãƒãƒ£ãƒ³ã‚¹ã«ã¤ãªãŒã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã€‚ã‚ã‚‰ã‹ã˜ã‚è¦‹ãˆã¦ã„ãŸç›®ç·šã¨ã„ã†ã®ã¯å®Ÿã¯ãã“ã¾ã§åºƒããªã‹ã£ãŸã€ã¨ã„ã†ã“ã¨ã¯ååˆ†ã«ã‚ã‚‹ã€‚ç›®ã®å‰ã«æ¥ãŸä»•äº‹ã«ã¾ãšã¯å…¨åŠ›ã§å–ã‚Šçµ„ã‚“ã§ã¿ã‚‹ã¨ã„ã†ã®ã¯å¤§åˆ‡ã€‚</p><h1 id="è³ªç–‘å¿œç­”ã®æ®‹ã‚Šã‚„æ‹¾ã£ãŸã‚³ãƒ¡ãƒ³ãƒˆ"><a href="#è³ªç–‘å¿œç­”ã®æ®‹ã‚Šã‚„æ‹¾ã£ãŸã‚³ãƒ¡ãƒ³ãƒˆ" class="headerlink" title="è³ªç–‘å¿œç­”ã®æ®‹ã‚Šã‚„æ‹¾ã£ãŸã‚³ãƒ¡ãƒ³ãƒˆ"></a>è³ªç–‘å¿œç­”ã®æ®‹ã‚Šã‚„æ‹¾ã£ãŸã‚³ãƒ¡ãƒ³ãƒˆ</h1><h2 id="ãƒ‰ãƒ¡ã‚¤ãƒ³çŸ¥è­˜ã‚‚è‹¥ã„äººã¯ã™ãè¿½ã„ã¤ãã¨æ€ã†"><a href="#ãƒ‰ãƒ¡ã‚¤ãƒ³çŸ¥è­˜ã‚‚è‹¥ã„äººã¯ã™ãè¿½ã„ã¤ãã¨æ€ã†" class="headerlink" title="ãƒ‰ãƒ¡ã‚¤ãƒ³çŸ¥è­˜ã‚‚è‹¥ã„äººã¯ã™ãè¿½ã„ã¤ãã¨æ€ã†"></a>ãƒ‰ãƒ¡ã‚¤ãƒ³çŸ¥è­˜ã‚‚è‹¥ã„äººã¯ã™ãè¿½ã„ã¤ãã¨æ€ã†</h2><p>ãƒ‰ãƒ¡ã‚¤ãƒ³çŸ¥è­˜ã£ã¦æ•™ç§‘æ›¸çš„ã«è³‡æ–™ã¨ã—ã¦ã¾ã¨ã¾ã£ã¦ã„ãŸã‚Šã¯ã—ãªã„ã‚“ã§ã™ã‚ˆã­ã€‚ãŠå®¢ã•ã‚“ã‚‚ãŸãã•ã‚“ã®éƒ¨ç½²ã«åˆ†ã‹ã‚Œã¦ã„ã¦ã€ãã‚Œãã‚Œã®é ˜åŸŸã§ä»•äº‹ã‚’ã—ã¦ã„ã‚‹ã€‚ãã‚Œãã‚Œã®é ˜åŸŸã®ä¸­ã®ã€Œå¸¸è­˜ã€ã‚’ã¤ãªã’ã¦ã„ãã¨çŸ¥è­˜ä½“ç³»ãŒç¾ã‚Œã‚‹ã€‚ã‚ã¨ã¯æ—¢å­˜ã®ã‚·ã‚¹ãƒ†ãƒ ã®ä¸­ã«ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¨ã—ã¦æ›¸ã‹ã‚ŒãŸçŸ¥è­˜ã‚‚ã‚ã‚‹ã€‚åˆ©ç”¨è€…ã¯ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™æ–¹æ³•ã ã‘çŸ¥ã£ã¦ã„ã‚‹ãŒã‚³ã‚¢ã®çŸ¥è­˜ã¯ã‚³ãƒ¼ãƒ‰è§£æã—ãªã„ã¨ã‚ã‹ã‚‰ãªã‹ã£ãŸã‚Šã€‚ä»Šå¾Œã¯ã“ã†ã„ã†ã‚·ã‚¹ãƒ†ãƒ è€ƒå¤å­¦ãŒã¾ã™ã¾ã™é‡è¦ã«ãªã£ã¦ãã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚</p><p>ã“ã†ã„ã†ãŸãã•ã‚“ã®æƒ…å ±ã‚’å¼•ã£å¼µã£ã¦é›†ã‚ã‚‹ç¤¾ä¼šå­¦çš„ãªæ´»å‹•ã‚’æ¯å›ã‚„ã£ã¦åˆã‚ã¦çŸ¥è­˜ã¨ã—ã¦å–ã‚Šå‡ºã›ã‚‹ã®ã§ã™ãŒã€ãã®çŸ¥è­˜ã®å–ã‚Šå‡ºã—æ–¹ã€å®Ÿéš›ã«å–ã‚Šå‡ºã—ãŸçŸ¥è­˜ï¼ˆæ¥­ç•Œã”ã¨ã§ã¯ãªãä¼šç¤¾ã”ã¨ã€éƒ¨ç½²ã”ã¨ã«é•ã£ãŸã‚Šã™ã‚‹ï¼‰ã‚‚ã‚ã‚‹ã®ã§ã€å­¦ã¶ã®ã¯ã ã‚ŒãŒã‚„ã£ã¦ã‚‚å¤§å¤‰ã‹ã¨æ€ã„ã¾ã™ã€‚</p><h2 id="è‡ªåˆ†ã®å¾—ãŸçŸ¥è­˜ã¯è‡ªåˆ†ã®ã‚‚ã®ï¼èª°ã«ã‚‚å…¬é–‹ã—ãªã„ï¼ã§ã‚‚ä»–ã®äººã‹ã‚‰ã¯æƒ…å ±ã¯ã‚‚ã‚‰ã†ï¼ã£ã¦æ„Ÿã˜ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚’å­¦ç”Ÿã®ä¸­ã«æ™‚ã€…ã¿ã‚‹ã®ã§ã™ãŒã€è‡ªåˆ†ãŒé•·ã„æ™‚é–“ã‚’æ›ã‘ã¦å¾—ãŸçŸ¥è­˜ã‚’æœ¬ã§å…±æœ‰ã™ã‚‹ã«ã‚ãŸã£ã¦ãã®ã‚ˆã†ãªè€ƒãˆã«ã¯ãªã‚‰ãªã„ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ"><a href="#è‡ªåˆ†ã®å¾—ãŸçŸ¥è­˜ã¯è‡ªåˆ†ã®ã‚‚ã®ï¼èª°ã«ã‚‚å…¬é–‹ã—ãªã„ï¼ã§ã‚‚ä»–ã®äººã‹ã‚‰ã¯æƒ…å ±ã¯ã‚‚ã‚‰ã†ï¼ã£ã¦æ„Ÿã˜ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚’å­¦ç”Ÿã®ä¸­ã«æ™‚ã€…ã¿ã‚‹ã®ã§ã™ãŒã€è‡ªåˆ†ãŒé•·ã„æ™‚é–“ã‚’æ›ã‘ã¦å¾—ãŸçŸ¥è­˜ã‚’æœ¬ã§å…±æœ‰ã™ã‚‹ã«ã‚ãŸã£ã¦ãã®ã‚ˆã†ãªè€ƒãˆã«ã¯ãªã‚‰ãªã„ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ" class="headerlink" title="è‡ªåˆ†ã®å¾—ãŸçŸ¥è­˜ã¯è‡ªåˆ†ã®ã‚‚ã®ï¼èª°ã«ã‚‚å…¬é–‹ã—ãªã„ï¼ã§ã‚‚ä»–ã®äººã‹ã‚‰ã¯æƒ…å ±ã¯ã‚‚ã‚‰ã†ï¼ã£ã¦æ„Ÿã˜ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚’å­¦ç”Ÿã®ä¸­ã«æ™‚ã€…ã¿ã‚‹ã®ã§ã™ãŒã€è‡ªåˆ†ãŒé•·ã„æ™‚é–“ã‚’æ›ã‘ã¦å¾—ãŸçŸ¥è­˜ã‚’æœ¬ã§å…±æœ‰ã™ã‚‹ã«ã‚ãŸã£ã¦ãã®ã‚ˆã†ãªè€ƒãˆã«ã¯ãªã‚‰ãªã„ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ"></a>è‡ªåˆ†ã®å¾—ãŸçŸ¥è­˜ã¯è‡ªåˆ†ã®ã‚‚ã®ï¼èª°ã«ã‚‚å…¬é–‹ã—ãªã„ï¼ã§ã‚‚ä»–ã®äººã‹ã‚‰ã¯æƒ…å ±ã¯ã‚‚ã‚‰ã†ï¼ã£ã¦æ„Ÿã˜ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚’å­¦ç”Ÿã®ä¸­ã«æ™‚ã€…ã¿ã‚‹ã®ã§ã™ãŒã€è‡ªåˆ†ãŒé•·ã„æ™‚é–“ã‚’æ›ã‘ã¦å¾—ãŸçŸ¥è­˜ã‚’æœ¬ã§å…±æœ‰ã™ã‚‹ã«ã‚ãŸã£ã¦ãã®ã‚ˆã†ãªè€ƒãˆã«ã¯ãªã‚‰ãªã„ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ</h2><p>ãã‚Œã§çŸ¥è­˜ã‚’æŒã£ã¦ã„ã¦ã‚‚ã€å¤–ã‹ã‚‰ã¯ã©ã‚Œã ã‘ã®æƒ…å ±ã‚’æŒã£ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚‰ãªã„ã®ã§ã€çµæœã¨ã—ã¦æœ¬äººã®é­…åŠ›ã‚¢ãƒƒãƒ—ã«ã¯ãªã£ã¦ã„ãªã„ã¨æ€ã„ã¾ã™ã€‚ã‚ã¨ã€è‡ªåˆ†ãŒæ‰‹ã‚’å‹•ã‹ã—ã¦ä½œæ¥­è€…ã¨ã—ã¦ä»•äº‹ã™ã‚‹ã®ã‚ˆã‚Šã‚‚ã€å›ã‚Šã‚’å°ã„ã¦çµ„ç¹”ã¨ã—ã¦æˆåŠŸã§ãã‚‹æ–¹ãŒç¤¾ä¼šã¨ã—ã¦ã¯å¿…è¦ã¨ã•ã‚Œã¾ã™ã€‚ICã‚ˆã‚Šã‚‚ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼æ¡ç”¨ã—ã«ãã„å•é¡Œã€‚</p><h2 id="åŸºå¹¹ã‚·ã‚¹ãƒ†ãƒ ã£ã¦å…·ä½“çš„ã«ã¯ã©ã†ã„ã†ã‚‚ã®ã§ã™ã‹ï¼Ÿã‚¤ãƒ¡ãƒ¼ã‚¸æ¹§ã‹ãªãã¦ãƒ»ãƒ»ãƒ»"><a href="#åŸºå¹¹ã‚·ã‚¹ãƒ†ãƒ ã£ã¦å…·ä½“çš„ã«ã¯ã©ã†ã„ã†ã‚‚ã®ã§ã™ã‹ï¼Ÿã‚¤ãƒ¡ãƒ¼ã‚¸æ¹§ã‹ãªãã¦ãƒ»ãƒ»ãƒ»" class="headerlink" title="åŸºå¹¹ã‚·ã‚¹ãƒ†ãƒ ã£ã¦å…·ä½“çš„ã«ã¯ã©ã†ã„ã†ã‚‚ã®ã§ã™ã‹ï¼Ÿã‚¤ãƒ¡ãƒ¼ã‚¸æ¹§ã‹ãªãã¦ãƒ»ãƒ»ãƒ»"></a>åŸºå¹¹ã‚·ã‚¹ãƒ†ãƒ ã£ã¦å…·ä½“çš„ã«ã¯ã©ã†ã„ã†ã‚‚ã®ã§ã™ã‹ï¼Ÿã‚¤ãƒ¡ãƒ¼ã‚¸æ¹§ã‹ãªãã¦ãƒ»ãƒ»ãƒ»</h2><p>ãã®ä¼šç¤¾ã®ãƒ“ã‚¸ãƒã‚¹ã®æ ¹å¹¹ã‚’ã•ã•ãˆã‚‹ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã­ã€‚å°å£²ã‚Šãªã‚‰å•†å“ã‚’ç®¡ç†ã—ã¦å£²ã‚Šä¸Šã’ã‚’é›†è¨ˆã™ã‚‹ãªã©ã€‚</p><h2 id="æ—©ã„ã†ã¡ã«ä¸€äººå‰ã«ãªã‚‹ã‚ˆã†ãªäººã¯å¤–å‘æ€§ã®é«˜ã•ã‚„ãƒ•ãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®è»½ã•ãªã©ã©ã®ã‚ˆã†ãªç‰¹æ€§ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ"><a href="#æ—©ã„ã†ã¡ã«ä¸€äººå‰ã«ãªã‚‹ã‚ˆã†ãªäººã¯å¤–å‘æ€§ã®é«˜ã•ã‚„ãƒ•ãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®è»½ã•ãªã©ã©ã®ã‚ˆã†ãªç‰¹æ€§ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ" class="headerlink" title="æ—©ã„ã†ã¡ã«ä¸€äººå‰ã«ãªã‚‹ã‚ˆã†ãªäººã¯å¤–å‘æ€§ã®é«˜ã•ã‚„ãƒ•ãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®è»½ã•ãªã©ã©ã®ã‚ˆã†ãªç‰¹æ€§ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ"></a>æ—©ã„ã†ã¡ã«ä¸€äººå‰ã«ãªã‚‹ã‚ˆã†ãªäººã¯å¤–å‘æ€§ã®é«˜ã•ã‚„ãƒ•ãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®è»½ã•ãªã©ã©ã®ã‚ˆã†ãªç‰¹æ€§ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ</h2><p>ã©ã¡ã‚‰ã‹ã¨ã„ã†ã¨ã€æ±‚ã‚ã‚‰ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ãã¡ã‚“ã¨æŠŠæ¡ã—ã¦ã‚„ã‚Šãã‚‹ãŸã‚ã®æ®µå–ã‚ŠåŠ›ã§ã™ã‹ã­ã‡ã€‚ã‚‚ã¡ã‚ã‚“ã€ã‚¹ãƒ†ãƒ¼ã‚¸ã‚„ãã®æ™‚ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®çŠ¶æ³ã«ã‚ˆã£ã¦å¿…è¦ãªèƒ½åŠ›ã¨ã‹ã‚ã‚‹ã¨ã†ã‚Œã—ã„èƒ½åŠ›ã¯å¤‰ã‚ã£ã¦ãã‚‹ã¨æ€ã„ã¾ã™ãŒã€‚</p><h2 id="æ”¯æ´å£«ã®ã‚ˆã†ãªè³‡æ ¼ãŒã‚ã‚‹äººã¨CTFçµŒé¨“ãŒè±Šå¯Œãªäººã¨ã§ã¯ã©ã¡ã‚‰ã®æ–¹ãŒéœ€è¦ã‚ã‚Šã¾ã™ã‹"><a href="#æ”¯æ´å£«ã®ã‚ˆã†ãªè³‡æ ¼ãŒã‚ã‚‹äººã¨CTFçµŒé¨“ãŒè±Šå¯Œãªäººã¨ã§ã¯ã©ã¡ã‚‰ã®æ–¹ãŒéœ€è¦ã‚ã‚Šã¾ã™ã‹" class="headerlink" title="æ”¯æ´å£«ã®ã‚ˆã†ãªè³‡æ ¼ãŒã‚ã‚‹äººã¨CTFçµŒé¨“ãŒè±Šå¯Œãªäººã¨ã§ã¯ã©ã¡ã‚‰ã®æ–¹ãŒéœ€è¦ã‚ã‚Šã¾ã™ã‹"></a>æ”¯æ´å£«ã®ã‚ˆã†ãªè³‡æ ¼ãŒã‚ã‚‹äººã¨CTFçµŒé¨“ãŒè±Šå¯Œãªäººã¨ã§ã¯ã©ã¡ã‚‰ã®æ–¹ãŒéœ€è¦ã‚ã‚Šã¾ã™ã‹</h2><p>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç³»ã§ã™ã‹ã­ï¼Ÿã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç³»ã¯ã‹ãªã‚Šã‚¿ãƒ¬ãƒ³ãƒˆæ€§ãŒå¼·ã„ä»•äº‹ã‚‚ã‚ã£ãŸã‚Šã™ã‚‹ã®ã§ä¸€èˆ¬åŒ–ã¯ã—ã«ãã„ã§ã™ã­ã€‚å…ƒãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã§æµ·å¤–ã‹ã‚‰ã‚ªãƒ•ã‚¡ãƒ¼ãŒæ¥ã¦è»¢è·ã—ã¦ã„ã£ãŸè‹¥è€…ã‚‚ã„ã¾ã—ãŸã—ã€‚ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã«ã‚‚ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç‰¹åŒ–ã®ã‚°ãƒ«ãƒ¼ãƒ—ä¼šç¤¾DITã¨ã‹ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ç¤¾å†…ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£éƒ¨é–€ã®CSIGãŒã‚ã‚‹ã®ã§ã€èˆˆå‘³ãŒã‚ã‚‹æ–¹ã¯ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«é¢è«‡ã‚’ç”³ã—è¾¼ã‚“ã§ã„ãŸã ã‘ã‚‹ã¨ã€ä¸­ã®äººãŒäº‹ä¾‹ã¨ã‹ã©ã†ã„ã†ã‚¹ã‚­ãƒ«ãŒå¿…è¦ã¨ã•ã‚Œã¦ã„ã‚‹ã‹ã¨ã‹ãŠè©±ã§ãã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚</p><h2 id="å¤±ç¤¼ãªã“ã¨ã‚’èãã‚ˆã†ã§ç”³ã—è¨³ãªã„ã®ã§ã™ãŒã€ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æ ªå¼ä¼šç¤¾ã¯å¹´åã©ã“ã¾ã§ä¼¸ã°ã›ã¾ã™ã‹ï¼Ÿ"><a href="#å¤±ç¤¼ãªã“ã¨ã‚’èãã‚ˆã†ã§ç”³ã—è¨³ãªã„ã®ã§ã™ãŒã€ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æ ªå¼ä¼šç¤¾ã¯å¹´åã©ã“ã¾ã§ä¼¸ã°ã›ã¾ã™ã‹ï¼Ÿ" class="headerlink" title="å¤±ç¤¼ãªã“ã¨ã‚’èãã‚ˆã†ã§ç”³ã—è¨³ãªã„ã®ã§ã™ãŒã€ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æ ªå¼ä¼šç¤¾ã¯å¹´åã©ã“ã¾ã§ä¼¸ã°ã›ã¾ã™ã‹ï¼Ÿ"></a>å¤±ç¤¼ãªã“ã¨ã‚’èãã‚ˆã†ã§ç”³ã—è¨³ãªã„ã®ã§ã™ãŒã€ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æ ªå¼ä¼šç¤¾ã¯å¹´åã©ã“ã¾ã§ä¼¸ã°ã›ã¾ã™ã‹ï¼Ÿ</h2><p>ãŠã£ã¨ã€ãã‚Œèã„ã¡ã‚ƒã„ã¾ã™ï¼Ÿè»¢è·ã®ã¨ãã«ã‚‚ãŒã£ã¨ä¸ŠãŒã£ãŸã‘ã©ã€å…¥ã£ãŸã‚ã¨ã‚‚ãŒã£ãŒã£ã¨ä¸ŠãŒã£ã¦ã„ã¾ã™ã€‚æŠ€è‚²ã‚¤ãƒ™ãƒ³ãƒˆã¯å…¬é–‹ã‚¤ãƒ™ãƒ³ãƒˆã§ã™ã®ã§ã€ãã®ã‚ãŸã‚Šã¯ã‚‚ã†ã¡ã‚‡ã£ã¨ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãªãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®ã‚¤ãƒ™ãƒ³ãƒˆã§ç¤¾å“¡ã®äººã«ã¶ã¤ã‘ã¦ã‚‚ã‚‰ãˆã‚Œã°ã¨æ€ã„ã¾ã™ã€‚</p><p>å¹´åã¯èƒ½åŠ›ã¨ã„ã†ã‹å…¥ã£ãŸä¼šç¤¾æ¬¡ç¬¬ãªã¨ã“ã‚ãŒã‚ã‚Šã¾ã™ãŒã€ä¸€èˆ¬çš„ãªå‚¾å‘ã¨ã—ã¦ã¯ãã¡ã‚“ã¨åˆ©ç›Šã‚’ä¸Šã’ã¦ã„ãã€æ¥­ç¸¾ã‚’ä¼¸ã°ã—ç¶šã‘ã¦ã„ãŸã‚Šå®‰å®šã—ã¦ã„ã‚‹ä¼šç¤¾ãŒå»¶ã°ã—ã‚„ã™ã„ã¨æ€ã„ã¾ã™ã€‚</p><p>å°±æ´»å¯¾ç­–ã§ä¼šç¤¾ãŒå…¬é–‹ã—ã¦ã„ã‚‹ãƒ—ãƒ¬ã‚¹ãƒªãƒªãƒ¼ã‚¹ã¯ãã¡ã‚“ã¨ç›®ã‚’é€šã—ãŸæ–¹ãŒè‰¯ã„ã§ã™ã‚ˆã€ã¨ã„ã†ãŠè©±ã¯ã—ã¾ã—ãŸãŒã€æ±ºç®—è³‡æ–™ã®æ•°å€¤ã‚‚è¦‹ã¦ãŠãã¨è‰¯ã„ã‹ã¨æ€ã„ã¾ã™ã€‚</p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Culture/">Culture</category>
      
      
      <category domain="https://future-architect.github.io/tags/%E7%99%BB%E5%A3%87%E3%83%AC%E3%83%9D%E3%83%BC%E3%83%88/">ç™»å£‡ãƒ¬ãƒãƒ¼ãƒˆ</category>
      
      <category domain="https://future-architect.github.io/tags/%E6%8A%80%E8%82%B2%E7%A5%AD/">æŠ€è‚²ç¥­</category>
      
      <category domain="https://future-architect.github.io/tags/%E3%82%AD%E3%83%A3%E3%83%AA%E3%82%A2/">ã‚­ãƒ£ãƒªã‚¢</category>
      
      
      <comments>https://future-architect.github.io/articles/20240403a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Difyã§ç”ŸæˆAIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¥é–€ã€€å‰ç·¨ï¼šç”ŸæˆAIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã§é–‹ç™º</title>
      <link>https://future-architect.github.io/articles/20240402a/</link>
      <guid>https://future-architect.github.io/articles/20240402a/</guid>
      <pubDate>Mon, 01 Apr 2024 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;h2 id=&quot;æ¦‚è¦&quot;&gt;&lt;a href=&quot;#æ¦‚è¦&quot; class=&quot;headerlink&quot; title=&quot;æ¦‚è¦&quot;&gt;&lt;/a&gt;æ¦‚è¦&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://dify.ai/&quot;&gt;Dify&lt;/a&gt; ï¼ˆDeFiã§ã¯ãªã„ï¼‰ã¨ &lt;a</description>
          
        
      
      
      
      <content:encoded><![CDATA[<h2 id="æ¦‚è¦"><a href="#æ¦‚è¦" class="headerlink" title="æ¦‚è¦"></a>æ¦‚è¦</h2><p><a href="https://dify.ai/">Dify</a> ï¼ˆDeFiã§ã¯ãªã„ï¼‰ã¨ <a href="https://console.anthropic.com/dashboard">Anthropic Claude</a> ï¼ˆOpenAI ã§ã‚‚ OpenRouter çµŒç”±ã®ä½•ã‹ã§ã‚‚OKï¼‰ã‚’ä½¿ã£ã¦ç°¡å˜ã«ç”ŸæˆAIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã™ã‚‹æ–¹æ³•ã‚’ã”ç´¹ä»‹ã—ã¾ã™ã€‚</p><ul><li>å‰ç·¨ï¼šãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã§ç”ŸæˆAIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã™ã‚‹ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«</li><li><a href="/articles/20240404a/">å¾Œç·¨</a>ï¼šè‡ªä½œãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§æ©Ÿèƒ½è¿½åŠ ã—ã¦ç”ŸæˆAIã®æŒ‡å‘æ€§ã¨ç²¾åº¦ã‚’é«˜ã‚ã‚‹ã‚µãƒ³ãƒ—ãƒ«</li></ul><p>ã®2æœ¬ç«‹ã¦ã®äºˆå®šã§ã™ã€‚</p><h3 id="å¯¾è±¡èª­è€…"><a href="#å¯¾è±¡èª­è€…" class="headerlink" title="å¯¾è±¡èª­è€…"></a>å¯¾è±¡èª­è€…</h3><ul><li>ç”ŸæˆAIã«èˆˆå‘³ãŒã‚ã‚‹ãŒã¾ã ãƒãƒ£ãƒƒãƒˆä»¥ä¸Šã®åˆ©ç”¨æ³•ã‚’è¦‹å‡ºã›ãšæ‰‹ã‚’å‡ºã›ã¦ã„ãªã„æ–¹</li><li>ãŠè©¦ã—ã«æ‰‹è»½ã«ç”ŸæˆAIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã—ã¦ã¿ãŸã„æ–¹</li><li>ç‰¹ã«OpenAIã«æœˆé¡è²»ç”¨ã«èºŠèº‡ã£ã¦ã„ã‚‹æ–¹</li></ul><h3 id="å‰æçŸ¥è­˜ãƒ»ç’°å¢ƒ"><a href="#å‰æçŸ¥è­˜ãƒ»ç’°å¢ƒ" class="headerlink" title="å‰æçŸ¥è­˜ãƒ»ç’°å¢ƒ"></a>å‰æçŸ¥è­˜ãƒ»ç’°å¢ƒ</h3><ul><li>Docker (Docker Compose)ã€‚Windows ãªã‚‰ Docker Desktopã€‚å¾Œç·¨ã§ã¯ãƒ›ã‚¹ãƒˆå <code>host.docker.internal</code> ã‚’ä½¿ç”¨ã—ã¾ã™</li><li>â€œæ™‚ã€…ç”ŸæˆAIã‚’ãƒãƒ£ãƒƒãƒˆã§æ´»ç”¨ã—ã¦ã„ã‚‹â€ç¨‹åº¦ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ“ä½œã®çŸ¥è­˜</li></ul><h3 id="å–ã‚Šä¸Šã’ãªã„è©±é¡Œ"><a href="#å–ã‚Šä¸Šã’ãªã„è©±é¡Œ" class="headerlink" title="å–ã‚Šä¸Šã’ãªã„è©±é¡Œ"></a>å–ã‚Šä¸Šã’ãªã„è©±é¡Œ</h3><p>ä½•ãŒå®Ÿç¾å¯èƒ½ã«ãªã‚‹ã‹ã‚’ç¤ºå”†ã™ã‚‹äº‹ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã™ã‚‹ã®ã§ã€æ‰‹æ®µã¯æ·±å €ã—ã¾ã›ã‚“ã€‚ä¾‹ãˆã°RAGã«ã¯è§¦ã‚Œã¾ã›ã‚“ã€‚</p><h2 id="æº–å‚™"><a href="#æº–å‚™" class="headerlink" title="æº–å‚™"></a>æº–å‚™</h2><p>Anthropic API ã®APIã‚­ãƒ¼ã‚’å–å¾—ã—ã€Difyã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§èµ·å‹•ã—ã¾ã™ã€‚</p><p>ã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦æä¾›ã•ã‚Œã¦ã„ã‚‹ <a href="https://dify.ai/">https://dify.ai/</a> ã‚’ä½¿ã£ã¦ã‚‚ã„ã„ã§ã™ãŒã€APIã‚­ãƒ¼ã‚’é ã‘ã‚‹ã®ã¯ä½•ã¨ãªãä¸å®‰ãªã®ã§ï¼†å¾Œç·¨ã§ä¾¿åˆ©ãªã®ã§ãƒ­ãƒ¼ã‚«ãƒ«ã§è©±ã‚’é€²ã‚ã¾ã™ã€‚</p><h3 id="Anthropic-API-ã§APIã‚­ãƒ¼å–å¾—"><a href="#Anthropic-API-ã§APIã‚­ãƒ¼å–å¾—" class="headerlink" title="Anthropic API ã§APIã‚­ãƒ¼å–å¾—"></a>Anthropic API ã§APIã‚­ãƒ¼å–å¾—</h3><p><a href="https://console.anthropic.com/settings/plans">https://console.anthropic.com/settings/plans</a> ã§é›»è©±ç•ªå·èªè¨¼å¾Œã®åˆå›ã ã‘5ãƒ‰ãƒ«åˆ†ã®ç„¡æ–™ãŠè©¦ã—æ ãŒè²°ãˆã¾ã™ã€‚æ—¢ã« OpenAI ã‚„ OpenRouter ã«èª²é‡‘ã•ã‚Œã¦ã„ã‚‹æ–¹ã¯ãã¡ã‚‰ã§ã‚‚è‰¯ã„ã§ã™ãŒä»¥ä¸‹ã§ãƒ¢ãƒ‡ãƒ«ã‚’æŒ‡å®šã™ã‚‹ç®‡æ‰€ã§ã¯é©å®œèª­ã¿æ›¿ãˆã¦ãã ã•ã„ã€‚</p><p>ãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã‚Šãƒˆãƒ¼ã‚¯ãƒ³å½“ãŸã‚Šã®ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã®æ¶ˆè²»é‡ãŒç•°ãªã‚Šã¾ã™ãŒã€ã‚³ã‚¹ãƒˆè»¸ã§ã®é¸æŠã®ç›®å®‰ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚</p><ul><li>Haikuï¼šã‚¬ãƒ³ã‚¬ãƒ³ä½¿ã£ã¦ã‚‚æ®†ã©æ¸›ã‚‰ãªã„ã®ã§æ„Ÿè§¦ã‚’æ¢ã‚‹é–“ã¯å½“é¢ã“ã‚Œã§</li><li>Sonnetï¼šè©¦è¡ŒéŒ¯èª¤ã—ã¦ã„ã‚‹ã¨ç›®ã«è¦‹ãˆã¦æ¸›ã£ã¦ã„ãã®ã§æ®‹é«˜æ³¨æ„</li><li>Opusï¼šã”ã£ãã‚Šæ¸›ã‚‹ã®ã§ãŠè©¦ã—ä¸­ã®å¸¸ç”¨ã¯éæ¨å¥¨ã€‚æ¯”è¼ƒæ¤œè¨¼ã—ãŸã„æ™‚ã®ãƒ¯ãƒ³ãƒã‚¤ãƒ³ãƒˆã§</li></ul><p>ã‚‚ã†Anthropicã®ç„¡æ–™æ ã‚’æ¶ˆåŒ–ã—ã¦ã—ã¾ã£ãŸäººã¯ <a href="https://openrouter.ai/">https://openrouter.ai/</a> ãŒä½¿ãˆã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚å…¥é‡‘ã—ãªãã¦ã‚‚è¬ã«0.2ãƒ‰ãƒ«ç¨‹åº¦ã‚’ã‚¿ãƒ€ã§ä½¿ã‚ã›ã¦ãã‚ŒãŸã‚Šã€ä»®æƒ³é€šè²¨ï¼ˆPolygonãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®USDCï¼‰æ±ºæ¸ˆãŒå‡ºæ¥ãŸã‚Šã—ã¾ã™ã€‚</p><h3 id="Difyã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—"><a href="#Difyã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—" class="headerlink" title="Difyã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—"></a>Difyã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—</h3><h4 id="ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"><a href="#ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" class="headerlink" title="ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"></a>ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h4><p><code>git clone https://github.com/langgenius/dify</code> ã™ã‚‹ã‹ã€<a href="https://github.com/langgenius/dify/tree/main/docker">https://github.com/langgenius/dify/tree/main/docker</a> ã® <code>docker-compose.yaml</code> ã¨ <code>nginx</code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã€ <code>docker-compose.yaml</code> ã®ã‚ã‚‹å ´æ‰€ã§ <code>docker compose up -d</code> ã—ã¾ã™ã€‚</p><p>å®Ÿè¡Œæ™‚ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç›´ä¸‹ã«ãƒœãƒªãƒ¥ãƒ¼ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª <code>volumes</code> ãŒä½œæˆã•ã‚Œã¾ã™ã€‚</p><p>nginx ãŒãƒãƒ¼ãƒˆ <code>80</code> ã§èµ·å‹•ã™ã‚‹ã®ã§ç©ºã‘ã¦ãŠãã‹ <code>services.nginx.ports</code> ã‚’é©å½“ãªå€¤ã«å¤‰ãˆã¦ãã ã•ã„ã€‚</p><h4 id="åˆæœŸè¨­å®š"><a href="#åˆæœŸè¨­å®š" class="headerlink" title="åˆæœŸè¨­å®š"></a>åˆæœŸè¨­å®š</h4><p><a href="http://localhost/">http://localhost/</a> ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨åˆå›ã¯ã€Œç®¡ç†è€…ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®è¨­å®šã€ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯é©å½“ãªå€¤ã§å¤§ä¸ˆå¤«ã§ã™ãŒæ¬¡ã®ã‚µã‚¤ãƒ³ã‚¤ãƒ³ç”»é¢ã§ä½¿ã†ã®ã§ä½•ã‚’å…¥ã‚ŒãŸã‹ã¯å¿˜ã‚Œãªã„ã§ãã ã•ã„ã€‚<br>è¨€èªè¨­å®šã¯æ—¥æœ¬èªã®ã¾ã¾ã§ã‚‚ã‚ã¾ã‚Šä¸è‡ªç”±ã—ã¾ã›ã‚“ãŒã€ã¨ã“ã‚ã©ã“ã‚æœªç¿»è¨³ã®ãƒ†ã‚­ã‚¹ãƒˆãŒç©ºæ¬„ã§è¡¨ç¤ºã•ã‚ŒãŸã‚Š <code>undefined</code> ã«ãªã£ãŸã‚Šã—ã¦ã—ã¾ã†ã®ã§å‡ºæ¥ã‚Œã°è‹±èªã®æ–¹ãŒãŠå‹§ã‚ã§ã™ã€‚</p><p>ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã—ãŸã‚‰ã€å³ä¸Šã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦è¨­å®šâ†’ãƒ¢ãƒ‡ãƒ«ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼â†’Anthropicã«ãƒã‚¦ã‚¹ã‚ªãƒ¼ãƒãƒ¼ã—ã¦ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã€ã¨é€²ã‚“ã§APIã‚­ãƒ¼ã‚’å…¥åŠ›ã—ã¾ã™ã€‚ãã®ã¾ã¾ã ã¨ã‚·ã‚¹ãƒ†ãƒ ãƒ¢ãƒ‡ãƒ«ã« Claude 3 Opus ãŒä½¿ã‚ã‚Œã¦ã—ã¾ã†ã®ã§ Haiku ã‚’é¸æŠã—ã¾ã™ã€‚å¯„ç¨¿æ™‚ç‚¹ã§ã¯ <code>claude-3-haiku-20240307</code> ã¨ã„ã†ãƒ¢ãƒ‡ãƒ«åã§ã—ãŸã€‚ã“ã“ã§Claudeã‚·ãƒªãƒ¼ã‚ºãŒé¸æŠã§ããªã„å ´åˆã¯ä½•ã‹ã—ã‚‰ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã„ã¾ã™ã€‚åŸå› ãŒåˆ†ã‹ã‚‰ãªã‘ã‚Œã°APIã‚­ãƒ¼ã‚’å†ç™ºè¡Œï¼†å†å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</p><img src="/images/20240402a/image.png" alt="" width="891" height="530" loading="lazy"><p>ã¡ãªã¿ã« OpenRouter ã‚’ä½¿ç”¨ã™ã‚‹ãªã©ã—ã¦ OpenAI äº’æ›ã®ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯ä¸€ç•ªä¸‹ã® <code>Model providers compatible with OpenAI&#39;s API standard, such as LM Studio.</code> ã§ä½¿ç”¨ã§ãã¾ã™ã€‚ãŒã€æã‚‰ãDifyã®ä¸å…·åˆã§ãã‚Œã ã‘ã§ã¯ãƒ¢ãƒ‡ãƒ«ã¨ã—ã¦ä½¿ç”¨å¯èƒ½ã«ãªã‚Šã¾ã›ã‚“ã€‚ä¸€åº¦ä¿å­˜ã—ãŸãƒ¢ãƒ‡ãƒ«æƒ…å ±ã‚’é–‹ã„ã¦ä¿å­˜ã—ãªãŠã™ã¨ä½¿ç”¨å¯èƒ½ã«ãªã‚Šã¾ã™ã€‚</p><h2 id="ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«1ï¼šã‚·ãƒ³ãƒ—ãƒ«ãªç”ŸæˆAIãƒãƒ£ãƒƒãƒˆbot"><a href="#ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«1ï¼šã‚·ãƒ³ãƒ—ãƒ«ãªç”ŸæˆAIãƒãƒ£ãƒƒãƒˆbot" class="headerlink" title="ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«1ï¼šã‚·ãƒ³ãƒ—ãƒ«ãªç”ŸæˆAIãƒãƒ£ãƒƒãƒˆbot"></a>ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«1ï¼šã‚·ãƒ³ãƒ—ãƒ«ãªç”ŸæˆAIãƒãƒ£ãƒƒãƒˆbot</h2><p>ç‰¹å®šã®ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©ã«å¯¾ã—ã¦ç‰¹åŒ–ã—ãŸSQLã‚’ç”Ÿæˆã™ã‚‹ãƒãƒ£ãƒƒãƒˆbotã‚’ä½œã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><h3 id="é–‹ç™º"><a href="#é–‹ç™º" class="headerlink" title="é–‹ç™º"></a>é–‹ç™º</h3><ol><li>ç”»é¢ä¸Šéƒ¨ã®<a href="">ã‚¹ã‚¿ã‚¸ã‚ª</a>â†’æ–°ã—ã„ã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã€‚ã‚¿ã‚¤ãƒ—ã«ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã‚’é¸æŠã—ã€é©å½“ãªåå‰ã‚’ä»˜ã‘ã¾ã™ã€‚å¾Œã‹ã‚‰å¤‰æ›´å¯èƒ½ã§ã™ã€‚ï¼ˆå®Ÿã¯ãŠãªã˜ã¿ã®AIãƒãƒ£ãƒƒãƒˆã¨ã—ã¦ä½¿ã†ã ã‘ãªã‚‰ã“ã“ã¾ã§ã§å®Œæˆã—ã¦ã—ã¾ã£ã¦ã„ã¾ã™ï¼‰</li><li>ç”»é¢å·¦ã®ã€Œæ‰‹é †ã€ã«ä»¥ä¸‹ã‚’å…¥åŠ›ã—ã¾ã™ã€‚ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚’å¤–ã™ã¨å¤‰æ•°è¿½åŠ ã‚’ãƒªã‚³ãƒ¡ãƒ³ãƒ‰ã—ã¦ãã‚Œã¾ã™ã€‚è¿½åŠ å¾Œã“ã®ã¾ã¾ã ã¨çŸ­æ–‡ã—ã‹å…¥åŠ›ã§ããªã„ã®ã§ä¸¡æ–¹ âš™ ã§ã€Œæ®µè½ã€ã«å¤‰æ›´ã—ã¾ã™ã€‚</li></ol><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">You can behave as an expert of database expert. Provide a clear answer to the main purpose of the order. Omit preamble, phase, and repeating the order.</span><br><span class="line"></span><br><span class="line">DDL:</span><br><span class="line">```</span><br><span class="line">&#123;&#123;DDL&#125;&#125;</span><br><span class="line">```</span><br><span class="line">Data model descriptions:</span><br><span class="line">```</span><br><span class="line">&#123;&#123;DataModelDescriptions&#125;&#125;</span><br><span class="line">```</span><br></pre></td></tr></table></figure><img src="/images/20240402a/image_2.png" alt="" width="873" height="321" loading="lazy"><img src="/images/20240402a/image_3.png" alt="" width="768" height="465" loading="lazy"><h3 id="å‹•ä½œç¢ºèª"><a href="#å‹•ä½œç¢ºèª" class="headerlink" title="å‹•ä½œç¢ºèª"></a>å‹•ä½œç¢ºèª</h3><ol><li>ã“ã“ã§ç”»é¢å³ä¸Šã®ã€Œå…¬é–‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚ã—ãªãã¦ã‚‚å‹•ä½œç¢ºèªã¯å‡ºæ¥ã¾ã™ãŒã€å¤‰æ›´ãŒä¿å­˜ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚å®Ÿã¯ã“ã®æ™‚ç‚¹ã§å®Œæˆã—ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã—ã¦å…¬é–‹ã•ã‚Œã¦ã—ã¾ã„ã¾ã™ãŒã€ã“ã‚Œä»¥å¤–ã«é–‹ç™ºä¸­ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä¿å­˜ã™ã‚‹æ–¹æ³•ãŒè¦‹å½“ãŸã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</li><li><code>DDL</code> ã« <code>CREATE TABLE ~</code> ãªã©ã®DDLã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚<br><code>DataModelDescriptions</code> ã«å„ãƒ†ãƒ¼ãƒ–ãƒ«ã®å†…å®¹ã‚„çµåˆæ–¹å¼ãªã©ã«ã¤ã„ã¦ã®èª¬æ˜æ–‡ã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚å¿…é ˆã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã“ã‚ŒãŒç„¡ã„ã¨AIã¯ã™ãå­˜åœ¨ã—ãªã„ã‚«ãƒ©ãƒ ã®å¹»è¦šã‚’è¦‹å§‹ã‚ã‚‹ã®ã§å¼·ãæ¨å¥¨ã—ã¾ã™ã€‚<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup><br>ï¼ˆã“ã“ã§å…¥åŠ›ã—ãŸå€¤ã¯æ°¸ç¶šåŒ–ã•ã‚Œãªã„ã®ã§ã€ä½•åº¦ã‚‚ä½¿ã„å›ã™ç”¨ã«è‡ªåˆ†ã§ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã«ã§ã‚‚è²¼ã‚Šä»˜ã‘ã¦ä¿å­˜ã—ã¦ãŠãã¾ã—ã‚‡ã†ï¼‰</li><li>ç”»é¢å³ä¸‹ã«è–„ã£ã™ã‚‰ã¨å…¥åŠ›æ¬„ãŒæœ‰ã‚‹ã®ã§ãã“ã«SQLç”Ÿæˆã‚’ä¾é ¼ã™ã‚‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</li><li>é€Ÿã„å®‰ã„æ—¨ã„ã® Haiku ã§ã‚‚3ï¼Œ4ãƒ†ãƒ¼ãƒ–ãƒ«ç¨‹åº¦ã®çµåˆãƒ»é›†ç´„ãªã©ã‚‚çµæ§‹ãªé«˜ç²¾åº¦ã§ç”Ÿæˆã—ã¦ãã‚Œã¾ã™ã€‚</li></ol><img src="/images/20240402a/image_4.png" alt="" width="914" height="862" loading="lazy"><p>å‚è€ƒã¾ã§ã«ç§ãŒä½¿ç”¨ã—ãŸå¤‰æ•°ã®å€¤ã‚’ä¸‹è¨˜ã«è²¼ã‚Šä»˜ã‘ã¦ãŠãã¾ã™ã€‚å°‘ã—å®Ÿå‹™ã¿ã®ã‚ã‚‹åŒºåˆ†å€¤ã‚„ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¨­å®šã—ã¦ã‚ã‚Šã¾ã™ã€‚</p><details><summary>DDL</summary><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- Project Name : retail</span></span><br><span class="line"><span class="comment">-- Date/Time    : 2024/03/22 é‡‘ 22:25:09</span></span><br><span class="line"><span class="comment">-- Author       : </span></span><br><span class="line"><span class="comment">-- RDBMS Type   : PostgreSQL</span></span><br><span class="line"><span class="comment">-- Application  : A5:SQL Mk-2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  &lt;&lt; æ³¨æ„ï¼ï¼ &gt;&gt;</span></span><br><span class="line"><span class="comment">  BackupToTempTable, RestoreFromTempTableç–‘ä¼¼å‘½ä»¤ãŒä»˜åŠ ã•ã‚Œã¦ã„ã¾ã™ã€‚</span></span><br><span class="line"><span class="comment">  ã“ã‚Œã«ã‚ˆã‚Šã€drop table, create table å¾Œã‚‚ãƒ‡ãƒ¼ã‚¿ãŒæ®‹ã‚Šã¾ã™ã€‚</span></span><br><span class="line"><span class="comment">  ã“ã®æ©Ÿèƒ½ã¯ä¸€æ™‚çš„ã« $$TableName ã®ã‚ˆã†ãªä¸€æ™‚ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚</span></span><br><span class="line"><span class="comment">  ã“ã®æ©Ÿèƒ½ã¯ A5:SQL Mk-2ã§ã®ã¿æœ‰åŠ¹ã§ã‚ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- å£²ä¸Š</span></span><br><span class="line"><span class="comment">-- * BackupToTempTable</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> sale cascade;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- * RestoreFromTempTable</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> sale (</span><br><span class="line">  id <span class="type">integer</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">  , palce_id <span class="type">integer</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">  , product_id <span class="type">integer</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">  , selling_price_ID <span class="type">integer</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">  , business_date <span class="type">date</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">  , sales_at <span class="type">timestamp</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">  , transfer_id <span class="type">integer</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">  , discount_amount <span class="type">integer</span></span><br><span class="line">  , sales_amount <span class="type">integer</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">  , <span class="keyword">constraint</span> sale_PKC <span class="keyword">primary</span> key (id)</span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ç§»å‹•</span></span><br><span class="line"><span class="comment">-- * BackupToTempTable</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> transfer cascade;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- * RestoreFromTempTable</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> transfer (</span><br><span class="line">  id <span class="type">integer</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">  , place_id <span class="type">integer</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">  , product_id <span class="type">integer</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">  , business_date <span class="type">date</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">  , transfer_at <span class="type">timestamp</span></span><br><span class="line">  , transfer_classification <span class="type">character</span> <span class="type">varying</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">  , transfer_quantity <span class="type">integer</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">  , transfer_destination_classification <span class="type">character</span> <span class="type">varying</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">  , transfer_destination_place_id <span class="type">integer</span></span><br><span class="line">  , <span class="keyword">constraint</span> transfer_PKC <span class="keyword">primary</span> key (id)</span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- åœ¨åº«</span></span><br><span class="line"><span class="comment">-- * BackupToTempTable</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> stock cascade;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- * RestoreFromTempTable</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> stock (</span><br><span class="line">  place_id <span class="type">integer</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">  , product_id <span class="type">integer</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">  , business_date <span class="type">date</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">  , stock_quantity <span class="type">integer</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">  , <span class="keyword">constraint</span> stock_PKC <span class="keyword">primary</span> key (place_id,product_id,business_date)</span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> index stock_IX1</span><br><span class="line">  <span class="keyword">on</span> stock(product_id,business_date);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å£²ä¾¡</span></span><br><span class="line"><span class="comment">-- * BackupToTempTable</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> selling_price cascade;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- * RestoreFromTempTable</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> selling_price (</span><br><span class="line">  id <span class="type">integer</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">  , product_id <span class="type">integer</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">  , selling_price_classification <span class="type">character</span> <span class="type">varying</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">  , start_date <span class="type">date</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">  , end_date <span class="type">date</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">  , selling_price <span class="type">integer</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">  , <span class="keyword">constraint</span> selling_price_PKC <span class="keyword">primary</span> key (id)</span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> index selling_price_IX1</span><br><span class="line">  <span class="keyword">on</span> selling_price(product_id,selling_price_classification);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å ´æ‰€</span></span><br><span class="line"><span class="comment">-- * BackupToTempTable</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> place cascade;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- * RestoreFromTempTable</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> place (</span><br><span class="line">  id <span class="type">integer</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">  , place_name <span class="type">character</span> <span class="type">varying</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">  , selling_price_classification <span class="type">character</span> <span class="type">varying</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">  , <span class="keyword">constraint</span> place_PKC <span class="keyword">primary</span> key (id)</span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å•†å“</span></span><br><span class="line"><span class="comment">-- * BackupToTempTable</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> product cascade;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- * RestoreFromTempTable</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> product (</span><br><span class="line">  id <span class="type">integer</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">  , product_name <span class="type">character</span> <span class="type">varying</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">  , <span class="keyword">constraint</span> product_PKC <span class="keyword">primary</span> key (id)</span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">table</span> sale <span class="keyword">is</span> <span class="string">&#x27;å£²ä¸Š&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> sale.id <span class="keyword">is</span> <span class="string">&#x27;ID&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> sale.palce_id <span class="keyword">is</span> <span class="string">&#x27;å ´æ‰€ID&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> sale.product_id <span class="keyword">is</span> <span class="string">&#x27;å•†å“ID&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> sale.selling_price_ID <span class="keyword">is</span> <span class="string">&#x27;å£²ä¾¡ID&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> sale.business_date <span class="keyword">is</span> <span class="string">&#x27;æ¥­å‹™æ—¥ä»˜&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> sale.sales_at <span class="keyword">is</span> <span class="string">&#x27;å£²ä¸Šæ—¥æ™‚&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> sale.transfer_id <span class="keyword">is</span> <span class="string">&#x27;å…¥å‡ºè·ID&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> sale.discount_amount <span class="keyword">is</span> <span class="string">&#x27;å€¤å¼•é¡&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> sale.sales_amount <span class="keyword">is</span> <span class="string">&#x27;å£²ä¸Šé‡‘é¡&#x27;</span>;</span><br><span class="line"></span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">table</span> transfer <span class="keyword">is</span> <span class="string">&#x27;ç§»å‹•&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> transfer.id <span class="keyword">is</span> <span class="string">&#x27;ID&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> transfer.place_id <span class="keyword">is</span> <span class="string">&#x27;å ´æ‰€ID&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> transfer.product_id <span class="keyword">is</span> <span class="string">&#x27;å•†å“ID&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> transfer.business_date <span class="keyword">is</span> <span class="string">&#x27;æ¥­å‹™æ—¥ä»˜&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> transfer.transfer_at <span class="keyword">is</span> <span class="string">&#x27;ç§»å‹•æ—¥æ™‚&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> transfer.transfer_classification <span class="keyword">is</span> <span class="string">&#x27;å…¥å‡ºè·åŒºåˆ†:1:å…¥è·ã€2:å‡ºè·&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> transfer.transfer_quantity <span class="keyword">is</span> <span class="string">&#x27;ç§»å‹•æ•°&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> transfer.transfer_destination_classification <span class="keyword">is</span> <span class="string">&#x27;ç§»å‹•å…ˆåŒºåˆ†:1:å ´æ‰€é–“ç§»å‹•ã€2:å£²ä¸Šã€3:ä»•å…¥&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> transfer.transfer_destination_place_id <span class="keyword">is</span> <span class="string">&#x27;ç§»å‹•å…ˆå ´æ‰€ID&#x27;</span>;</span><br><span class="line"></span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">table</span> stock <span class="keyword">is</span> <span class="string">&#x27;åœ¨åº«&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> stock.place_id <span class="keyword">is</span> <span class="string">&#x27;å ´æ‰€ID&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> stock.product_id <span class="keyword">is</span> <span class="string">&#x27;å•†å“ID&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> stock.business_date <span class="keyword">is</span> <span class="string">&#x27;æ¥­å‹™æ—¥ä»˜&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> stock.stock_quantity <span class="keyword">is</span> <span class="string">&#x27;åœ¨åº«æ•°&#x27;</span>;</span><br><span class="line"></span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">table</span> selling_price <span class="keyword">is</span> <span class="string">&#x27;å£²ä¾¡&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> selling_price.id <span class="keyword">is</span> <span class="string">&#x27;ID&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> selling_price.product_id <span class="keyword">is</span> <span class="string">&#x27;å•†å“ID&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> selling_price.selling_price_classification <span class="keyword">is</span> <span class="string">&#x27;å£²ä¾¡åŒºåˆ†:åŒºåˆ†å€¤ï¼š 1:ãƒ—ãƒ­ãƒ‘ãƒ¼, 2:Bå“, 3:ã‚¢ã‚¦ãƒˆãƒ¬ãƒƒãƒˆ, 4:å‚¬äº‹&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> selling_price.start_date <span class="keyword">is</span> <span class="string">&#x27;é©ç”¨é–‹å§‹æ—¥&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> selling_price.end_date <span class="keyword">is</span> <span class="string">&#x27;é©ç”¨çµ‚äº†æ—¥&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> selling_price.selling_price <span class="keyword">is</span> <span class="string">&#x27;å£²ä¾¡&#x27;</span>;</span><br><span class="line"></span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">table</span> place <span class="keyword">is</span> <span class="string">&#x27;å ´æ‰€&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> place.id <span class="keyword">is</span> <span class="string">&#x27;ID&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> place.place_name <span class="keyword">is</span> <span class="string">&#x27;å ´æ‰€å&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> place.selling_price_classification <span class="keyword">is</span> <span class="string">&#x27;å£²ä¾¡åŒºåˆ†:åŒºåˆ†å€¤ï¼š 1:ãƒ—ãƒ­ãƒ‘ãƒ¼, 2:Bå“, 3:ã‚¢ã‚¦ãƒˆãƒ¬ãƒƒãƒˆ, 4:å‚¬äº‹&#x27;</span>;</span><br><span class="line"></span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">table</span> product <span class="keyword">is</span> <span class="string">&#x27;å•†å“&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> product.id <span class="keyword">is</span> <span class="string">&#x27;ID&#x27;</span>;</span><br><span class="line">comment <span class="keyword">on</span> <span class="keyword">column</span> product.product_name <span class="keyword">is</span> <span class="string">&#x27;å•†å“å&#x27;</span>;</span><br></pre></td></tr></table></figure></details><details><summary>Data Model Descriptions</summary><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«æ¦‚è¦</span></span><br><span class="line"></span><br><span class="line"><span class="section">## å£²ä¾¡ãƒ†ãƒ¼ãƒ–ãƒ« ( `selling<span class="emphasis">_price` )</span></span></span><br><span class="line"><span class="emphasis"><span class="section"></span></span></span><br><span class="line"><span class="emphasis"><span class="section">* å£²ä¾¡ã¯å•†å“åˆ¥ãƒ»å£²ä¾¡åŒºåˆ†åˆ¥ãƒ»æ¥­å‹™æ—¥ä»˜åˆ¥ã«ç™»éŒ²ã•ã‚Œã‚‹ã€‚ä½†ã—æ¥­å‹™æ—¥ä»˜ã¯æ—¥ã€…ã§ã¯ãªãé–‹å§‹æ—¥ï½çµ‚äº†æ—¥ã®ç¯„å›²æŒ‡å®šã§ç™»éŒ²ã•ã‚Œã‚‹ã€‚</span></span></span><br><span class="line"><span class="emphasis"><span class="section">* å£²ä¾¡åŒºåˆ†ã«ã¯ãƒ—ãƒ­ãƒ‘ãƒ¼ãƒ»Bå“ãƒ»ã‚¢ã‚¦ãƒˆãƒ¬ãƒƒãƒˆãƒ»å‚¬äº‹ã®4ç¨®é¡ãŒã‚ã‚‹ã€‚ã¤ã¾ã‚Šå•†å“ã”ã¨ã«æœ€å¤§ã§4ã¤ã®å£²ä¾¡ãŒè¨­å®šã•ã‚Œã†ã‚‹ã€‚</span></span></span><br><span class="line"><span class="emphasis"><span class="section">* å£²ä¾¡åŒºåˆ†ã®å®šç¾©ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚</span></span></span><br><span class="line"><span class="emphasis"><span class="section">  </span></span></span><br><span class="line"><span class="emphasis"><span class="section">| å£²ä¾¡åŒºåˆ† | æ„å‘³ |</span></span></span><br><span class="line"><span class="emphasis"><span class="section">| - | - |</span></span></span><br><span class="line"><span class="emphasis"><span class="section">| ãƒ—ãƒ­ãƒ‘ãƒ¼ | ç™ºå£²å½“åˆã®å®šä¾¡ |</span></span></span><br><span class="line"><span class="emphasis"><span class="section">| Bå“ | å‚·ç‰©ãªã©ã€å•†å“å€‹ä½“ã®ä¸å…·åˆã«ã‚ˆã‚Šè²©å£²å ´æ‰€ï¼ˆä»¥ä¸‹ã€Œå£²å ´ã€ã¨å‘¼ã¶ï¼‰ã®åˆ¤æ–­ã§å€¤ä¸‹ã’ã‚’è¦ã™ã‚‹å ´åˆã®å£²ä¾¡ |</span></span></span><br><span class="line"><span class="emphasis"><span class="section">| ã‚¢ã‚¦ãƒˆãƒ¬ãƒƒãƒˆ | å•†å“ã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚·ãƒ¼ã‚ºãƒ³ã‚’éãã¦å€¤ä¸‹ã’ã—ãŸå¾Œã®å£²ä¾¡ |</span></span></span><br><span class="line"><span class="emphasis"><span class="section">| å‚¬äº‹ | å‚¬äº‹å ´ã§ä½¿ç”¨ã•ã‚Œã‚‹ç‰¹åˆ¥å£²ä¾¡ |</span></span></span><br><span class="line"><span class="emphasis"><span class="section"></span></span></span><br><span class="line"><span class="emphasis"><span class="section">## å ´æ‰€ãƒ†ãƒ¼ãƒ–ãƒ«( `place` )</span></span></span><br><span class="line"><span class="emphasis"><span class="section"></span></span></span><br><span class="line"><span class="emphasis"><span class="section">* å ´æ‰€ãƒ†ãƒ¼ãƒ–ãƒ«ã«ã¯å ´æ‰€ã®åå‰ã¨æ¨™æº–ã®å£²ä¾¡åŒºåˆ†ãŒç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã€‚</span></span></span><br><span class="line"><span class="emphasis"><span class="section">* å ´æ‰€ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹å£²ä¾¡åŒºåˆ†ã«ã‚ˆã£ã¦ã€ãã®å ´æ‰€ã§ç™ºç”Ÿã—ã†ã‚‹å£²ä¸Šã®å£²ä¾¡åŒºåˆ†ãŒåˆ¶é™ã•ã‚Œã‚‹ã€‚çµ„ã¿åˆã‚ã›ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚</span></span></span><br><span class="line"><span class="emphasis"><span class="section"> </span></span></span><br><span class="line"><span class="emphasis"><span class="section">| å ´æ‰€ã®å£²ä¾¡åŒºåˆ† | å£²ä¸Šã¨ã—ã¦ç™ºç”Ÿã—ã†ã‚‹å£²ä¾¡åŒºåˆ† |</span></span></span><br><span class="line"><span class="emphasis"><span class="section">| - | - |</span></span></span><br><span class="line"><span class="emphasis"><span class="section">| ãƒ—ãƒ­ãƒ‘ãƒ¼ | ãƒ—ãƒ­ãƒ‘ãƒ¼ãƒ»Bå“ãƒ»ã‚¢ã‚¦ãƒˆãƒ¬ãƒƒãƒˆ |</span></span></span><br><span class="line"><span class="emphasis"><span class="section">| ã‚¢ã‚¦ãƒˆãƒ¬ãƒƒãƒˆ | ãƒ—ãƒ­ãƒ‘ãƒ¼ãƒ»Bå“ãƒ»ã‚¢ã‚¦ãƒˆãƒ¬ãƒƒãƒˆ |</span></span></span><br><span class="line"><span class="emphasis"><span class="section">| å‚¬äº‹ | ãƒ—ãƒ­ãƒ‘ãƒ¼ãƒ»å‚¬äº‹ |</span></span></span><br><span class="line"><span class="emphasis"><span class="section"></span></span></span><br><span class="line"><span class="emphasis"><span class="section">* å ´æ‰€ã®å£²ä¾¡åŒºåˆ†ã¨ã—ã¦Bå“ã¯é¸æŠã§ããªã„ã€‚</span></span></span><br><span class="line"><span class="emphasis"><span class="section"></span></span></span><br><span class="line"><span class="emphasis"><span class="section">## ç§»å‹•ãƒ†ãƒ¼ãƒ–ãƒ«( `transfer` )</span></span></span><br><span class="line"><span class="emphasis"><span class="section"></span></span></span><br><span class="line"><span class="emphasis"><span class="section">* ç§»å‹•ãƒ†ãƒ¼ãƒ–ãƒ«ã«ã¯ã‚ã‚‹å ´æ‰€ã§ç™ºç”Ÿã—ãŸå•†å“ã®å…¥å‡ºè·æƒ…å ±ãŒå…¨ã¦ç™»éŒ²ã•ã‚Œã‚‹ã€‚ä»•å…¥ã«ã‚ˆã‚‹å…¥è·ã€è²©å£²ã«ã‚ˆã‚‹å‡ºè·ã€å ´æ‰€é–“ã§ã®ç§»å‹•ã«ã‚ˆã‚‹å…¥è·/å‡ºè·ãªã©ã€‚</span></span></span><br><span class="line"><span class="emphasis"><span class="section">* å ´æ‰€é–“ã§ç™ºç”Ÿã—ãŸç§»å‹•ã®å ´åˆã€</span></span></span><br><span class="line"><span class="emphasis"><span class="section">  * ç§»å‹•å…ƒã®å ´æ‰€ã«ãŠã„ã¦å‡ºè·ã€ç§»å‹•å…ˆã®å ´æ‰€ã«ãŠã„ã¦å…¥è·ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒç™»éŒ²ã•ã‚Œã‚‹ã€‚äº’ã„ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã®ç§»å‹•æ•°ã¯ä¸€è‡´ã™ã‚‹ã€‚</span></span></span><br><span class="line"><span class="emphasis"><span class="section">  * ç§»å‹•å…ˆå ´æ‰€IDã‚«ãƒ©ãƒ ã«ç§»å‹•å…ˆã®å ´æ‰€IDãŒç™»éŒ²ã•ã‚Œã‚‹ã€‚</span></span></span><br><span class="line"><span class="emphasis"><span class="section"></span></span></span><br><span class="line"><span class="emphasis"><span class="section">## åœ¨åº«ãƒ†ãƒ¼ãƒ–ãƒ«( `stock` )</span></span></span><br><span class="line"><span class="emphasis"><span class="section"></span></span></span><br><span class="line"><span class="emphasis"><span class="section">* åœ¨åº«ãƒ†ãƒ¼ãƒ–ãƒ«ã«ã¯æ—¥ã€…ã®å½“åˆã®å ´æ‰€åˆ¥ãƒ»å•†å“åˆ¥ã®åœ¨åº«æ•°ãŒè¨˜éŒ²ã•ã‚Œã‚‹ã€‚</span></span></span><br><span class="line"><span class="emphasis"><span class="section">* ç§»å‹•ãƒ†ãƒ¼ãƒ–ãƒ«ã«å…¨ã¦ã®å…¥å‡ºè·æƒ…å ±ãŒç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ã‚ã‚‹æ—¥ã®åœ¨åº«ãƒ¬ã‚³ãƒ¼ãƒ‰ã®åœ¨åº«æ•°ã¯ `å‰æ—¥ã®åœ¨åº«ãƒ¬ã‚³ãƒ¼ãƒ‰ã®åœ¨åº«æ•° + å‰æ—¥ã®ç§»å‹•ãƒ†ãƒ¼ãƒ–ãƒ«ã®å…¥è·åˆ†ã®ç§»å‹•æ•°ã®åˆè¨ˆ - å‰æ—¥ã®ç§»å‹•ãƒ†ãƒ¼ãƒ–ãƒ«ã®å‡ºè·åˆ†ã®ç§»å‹•æ•°ã®åˆè¨ˆ` ã¨ä¸€è‡´ã™ã‚‹ã€‚</span></span></span><br><span class="line"><span class="emphasis"><span class="section"></span></span></span><br><span class="line"><span class="emphasis"><span class="section">## å£²ä¸Šãƒ†ãƒ¼ãƒ–ãƒ«( `sale` )</span></span></span><br><span class="line"><span class="emphasis"><span class="section"></span></span></span><br><span class="line"><span class="emphasis"><span class="section">* å£²ä¸Šãƒ†ãƒ¼ãƒ–ãƒ«ã«ã¯å ´æ‰€åˆ¥ãƒ»å•†å“åˆ¥ãƒ»å£²ä¾¡åˆ¥ã®å£²ä¸Šæƒ…å ±ãŒç™»éŒ²ã•ã‚Œã‚‹ã€‚</span></span></span><br><span class="line"><span class="emphasis"><span class="section">* å£²ä¸Šã®ç™»éŒ²ã«éš›ã—ã¦å¿…è¦ãªå…¥åŠ›å€¤ã¯å ´æ‰€IDãƒ»å•†å“IDãƒ»å£²ä¾¡åŒºåˆ†ãƒ»å£²ä¸Šæ•°ãƒ»å€¤å¼•é¡ã®4å€‹ã€‚</span></span></span><br><span class="line"><span class="emphasis"><span class="section">* å£²ä¸Šæ•°ã¯å£²ä¸Šãƒ†ãƒ¼ãƒ–ãƒ«ä¸Šã§ã¯ç®¡ç†ã—ãªã„ã€‚å£²ä¸Šã®ç™ºç”Ÿã«ä¼´ã„ç§»å‹•ãƒ†ãƒ¼ãƒ–ãƒ«ã«å…¥å‡ºè·åŒºåˆ†ï¼šå‡ºè·ã€ç§»å‹•å…ˆåŒºåˆ†ï¼šå£²ä¸Šã€ç§»å‹•æ•°ï¼šå£²ä¸Šæ•°ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒç™»éŒ²ã•ã‚Œã‚‹ã€‚ãã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã®IDãŒå£²ä¸Šãƒ¬ã‚³ãƒ¼ãƒ‰ã®ç§»å‹•IDã‚«ãƒ©ãƒ ã«ä¿æŒã•ã‚Œã‚‹ã€‚</span></span></span><br><span class="line"><span class="emphasis"><span class="section">* å£²ä¾¡åŒºåˆ†ã¯å£²ä¸Šã‚’ç™»éŒ²ã™ã‚‹æ™‚ç‚¹ã§ä»»æ„ã«é¸æŠã•ã‚Œã‚‹ã€‚</span></span></span><br><span class="line"><span class="emphasis"><span class="section">  * ä½†ã—ã€ãã®å£²å ´ã«è©²å½“ã™ã‚‹å ´æ‰€ãƒ†ãƒ¼ãƒ–ãƒ«ä¸Šã®å£²ä¾¡åŒºåˆ†ã®è¨­å®šå€¤ã«ã‚ˆã‚Šã€å–ã‚Šå¾—ã‚‹å£²ä¾¡åŒºåˆ†ã¯åˆ¶é™ã•ã‚Œã‚‹ã€‚è©³ç´°ã¯å ´æ‰€ãƒ†ãƒ¼ãƒ–ãƒ«ã®é …ã‚’å‚ç…§ã€‚</span></span></span><br><span class="line"><span class="emphasis"><span class="section">* è²©å£²ã—ãŸå•†å“ã®å£²ä¸Šé‡‘é¡ã¯ã€ç™»éŒ²æ™‚ã®å…¥åŠ›å€¤ã«å¾“ã£ã¦æ¬¡ã®ã‚ˆã†ã«è¨ˆç®—ã•ã‚Œã¦ç™»éŒ²ã•ã‚Œã‚‹: `å£²ä¾¡ * ç§»å‹•æ•° - å€¤å¼•é¡`</span></span></span><br><span class="line"><span class="emphasis"><span class="section">* å£²ä¾¡ã¯å£²ä¾¡ãƒ†ãƒ¼ãƒ–ãƒ«ã‚ˆã‚Š `é©ç”¨é–‹å§‹æ—¥ &lt;= æ¥­å‹™æ—¥ä»˜ &lt;= é©ç”¨çµ‚äº†æ—¥` ã®æ¡ä»¶ã§å–å¾—ã™ã‚‹ã€‚</span></span></span><br></pre></td></tr></table></figure></details><p>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼šã€Œå£²ä¸Šé‡‘é¡ã¨å£²ä¸Šæ•°ã‚’å ´æ‰€åˆ¥ãƒ»å•†å“åˆ¥ãƒ»æœˆåˆ¥ã«é›†è¨ˆã™ã‚‹SQLã€</p><h3 id="ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¬é–‹"><a href="#ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¬é–‹" class="headerlink" title="ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¬é–‹"></a>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¬é–‹</h3><p>ã“ã“ã¾ã§ã®æ“ä½œã§ï¼ˆå…¬é–‹ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸæ™‚ç‚¹ã§ï¼‰æ—¢ã«Difyä¸Šã§å‹•ä½œã™ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒå®Œæˆã—å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚<br>ç”»é¢å·¦ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã§ã€Œæ¦‚è¦ã€ã§ä¸‹è¨˜ã®ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚UIã‚‚APIã‚‚ä½¿ç”¨å¯èƒ½ãªä¸Šã«APIã‚­ãƒ¼ç®¡ç†æ©Ÿèƒ½ã¾ã§è‡ªå‹•ã§æä¾›ã•ã‚Œã¦ã„ã¦ã¾ã•ã«è‡³ã‚Œã‚Šå°½ãã›ã‚Šã€‚ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ç”»é¢ãŒé–‹ãã¾ã™ã€‚</p><img src="/images/20240402a/image_5.png" alt="" width="632" height="519" loading="lazy"><img src="/images/20240402a/image_6.png" alt="" width="795" height="562" loading="lazy"><h2 id="ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«2ï¼šå¤–éƒ¨ãƒ„ãƒ¼ãƒ«ã®ä½¿ç”¨"><a href="#ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«2ï¼šå¤–éƒ¨ãƒ„ãƒ¼ãƒ«ã®ä½¿ç”¨" class="headerlink" title="ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«2ï¼šå¤–éƒ¨ãƒ„ãƒ¼ãƒ«ã®ä½¿ç”¨"></a>ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«2ï¼šå¤–éƒ¨ãƒ„ãƒ¼ãƒ«ã®ä½¿ç”¨</h2><p>æ–‡ç« ã‚’ç”Ÿæˆã™ã‚‹ã ã‘ã®LLMã«ã€å¤–éƒ¨ã‚µã‚¤ãƒˆã®æƒ…å ±ã‚’åé›†ã™ã‚‹æ©Ÿèƒ½ã¨ã€ã‚°ãƒ©ãƒ•ã‚’æç”»ã™ã‚‹æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¾ã™ã€‚</p><h3 id="é–‹ç™º-1"><a href="#é–‹ç™º-1" class="headerlink" title="é–‹ç™º"></a>é–‹ç™º</h3><ol><li>ã¾ãŸç”»é¢ä¸Šéƒ¨ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã‚¹ã‚¿ã‚¸ã‚ªâ†’æ–°ã—ã„ã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹â†’ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã‚’é¸æŠã—ã¦é©å½“ãªåå‰ã§ä½œæˆã—ã¦ãã ã•ã„ã€‚</li><li>ã€ŒåŸºæœ¬ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€Œã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã€ã‚’é¸æŠã—ã¾ã™ã€‚<img src="/images/20240402a/image_7.png" alt="" width="465" height="337" loading="lazy"></li><li>ç”»é¢å·¦å´ã«ã€Œãƒ„ãƒ¼ãƒ«ã€ã‚¨ãƒªã‚¢ãŒå‡ºç¾ã™ã‚‹ã®ã§ã€ã€Œï¼‹è¿½åŠ ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€ Wikipedia ã¨ ChartGenerator ã® Pie Chart ã‚’è¿½åŠ ã—ã¾ã™ã€‚<img src="/images/20240402a/image_8.png" alt="" width="1157" height="644" loading="lazy"></li><li>ã€Œæ‰‹é †ã€ã« <code>ãƒ¦ãƒ¼ã‚¶ã®å…¥åŠ›ã—ãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«ã¤ã„ã¦Wikipediaã§æ¤œç´¢ã—ã€æ•°å€¤ã®æƒ…å ±ã‚’ã‚‚ã¨ã«ãƒ‘ã‚¤ãƒãƒ£ãƒ¼ãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚</code> ã¨å…¥åŠ›ã—ã¾ã™ã€‚ç„¡ãã¦ã‚‚å‹•ä½œã¯ã—ã¾ã™ãŒãã®ã¾ã¾ã ã¨ LLM ãŒ Wikipedia ã‚’å‚ç…§ã›ãšæ‰‹æŒã¡ã®æƒ…å ±ã§å›ç­”ã—ã¦ã—ã¾ã„ãŒã¡ãªã®ã§å¿µã‚’æŠ¼ã—ã¦ãŠãã¾ã™ã€‚</li></ol><h3 id="å‹•ä½œç¢ºèª-1"><a href="#å‹•ä½œç¢ºèª-1" class="headerlink" title="å‹•ä½œç¢ºèª"></a>å‹•ä½œç¢ºèª</h3><p>ã€Œå…¬é–‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«ã€Œã‚¢ãƒ¡ãƒªã‚«ã®å…¨äººå£ã«ãŠã‘ã‚‹å·ã”ã¨ã®äººå£ã®ãƒ‘ã‚¤ãƒãƒ£ãƒ¼ãƒˆã€ã¨å…¥åŠ›ã™ã‚‹ã¨è‹¥å¹²æ€ªã—ã„å‹•ãã‚’è¦‹ã›ã¤ã¤ä½œå›³ã•ã‚Œã¾ã™ã€‚<br><img src="/images/20240402a/image_9.png" alt="" width="510" height="692" loading="lazy"></p><p>å®Ÿã¯æ®‹å¿µãªãŒã‚‰ç¾æ™‚ç‚¹ã§ã¯ Anthropic ã® Functions &amp; external tools ã«ã¯ç›´æ¥å¯¾å¿œã—ã¦ã„ãªã„ã‚‰ã—ãã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¨­å®šã‚’è¦‹ã‚‹ã¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ¢ãƒ¼ãƒ‰ãŒ ReAct ã«ãªã£ã¦ã„ã¾ã™ï¼ˆGPTã‚„GPTäº’æ›ã ã¨ Function Calling ã®ã¯ãšï¼‰ã€‚ã©ã†ã‚‚ã“ã®å ´åˆDifyã¯ã€ã€ŒLLMãŒç”Ÿæˆã—ãŸæ–‡å­—åˆ—ã‹ã‚‰ãƒ„ãƒ¼ãƒ«ç”¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã£ã½ã„éƒ¨åˆ†ã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¦ãƒ„ãƒ¼ãƒ«ã«ä¸­ç¶™ã™ã‚‹ã€ã¨ã„ã†å½¢ã§ Function Calling ã‚’æ¨¡ã—ãŸæ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹ã‚ˆã†ã§ã€ç”Ÿæˆã•ã‚ŒãŸæ–‡å­—åˆ—ãŒä¸€éƒ¨ã§ã‚‚JSONã¨ã—ã¦ç ´ç¶»ï¼ˆå€¤ã®ä¸­ã§æ”¹è¡Œãªã©ï¼‰ã—ã¦ã„ã‚‹ã¨å¤±æ•—ã—ã¾ã™ã€‚ãƒ„ãƒ¼ãƒ«ã®å‘¼ã³å‡ºã—ã«å¤±æ•—ã™ã‚‹ã¨ãƒ„ãƒ¼ãƒ«ã‚’å‘¼ã³å‡ºãã†ã¨ã—ãŸæ–‡å­—åˆ—ãŒãã®ã¾ã¾æœ€çµ‚å›ç­”æ–‡ã¨ã—ã¦å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚</p><img src="/images/20240402a/image_10.png" alt="" width="437" height="358" loading="lazy"><img src="/images/20240402a/image_11.png" alt="" width="603" height="603" loading="lazy"><h2 id="å¾Œç·¨ã«ç¶šã"><a href="#å¾Œç·¨ã«ç¶šã" class="headerlink" title="å¾Œç·¨ã«ç¶šã"></a>å¾Œç·¨ã«ç¶šã</h2><p>å‰ç·¨ã§ã¯ä¸‹è¨˜ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’è¾¿ã‚Šã¾ã—ãŸã€‚</p><ul><li>ãƒãƒ£ãƒƒãƒˆbotã«æ‰‹é †(Instruction)ã‚’ä¸ãˆã¦ç‰¹å®šã®å•é¡Œé ˜åŸŸã«ç‰¹åŒ–ã—ãŸãƒãƒ£ãƒƒãƒˆbotã‚’ä½œã‚‹</li><li>æ—¢è£½ã®Toolã‚’ä½¿ç”¨ã—ã¦è‡ªç„¶è¨€èªå‡¦ç†ä»¥å¤–ã®æ©Ÿèƒ½ã‚’ç²å¾—ã™ã‚‹</li></ul><p><a href="/articles/20240404a/">å¾Œç·¨</a>ã¯ã“ã‚Œã‚‰ã‚’é€²ã‚ã¦ä»¥ä¸‹ã®å†…å®¹ã‚’æ›¸ãã¾ã™ã€‚</p><ul><li>Toolã‚’è‡ªä½œã—ã¦æ©Ÿèƒ½ã‚’æ‹¡å¼µã™ã‚‹</li><li>ç”ŸæˆAIã«è‡ªåˆ†ã®ç”Ÿæˆã—ãŸå›ç­”ã‚’è‡ªå·±ãƒ¬ãƒ“ãƒ¥ãƒ¼ã•ã›ã‚‹</li></ul><div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none; padding-left: 0;"><li id="fn:1"><span style="vertical-align: top; padding-right: 10px;">1.</span><span style="vertical-align: top;">RAGç”¨ãƒ†ã‚­ã‚¹ãƒˆã‚„ãƒ™ã‚¯ãƒˆãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œã‚‹å ´åˆã«ã‚‚è¨€ãˆã¾ã™ãŒã€ç”ŸæˆAIã«å‰æçŸ¥è­˜ã‚’ä¸ãˆã‚‹æ™‚ã«ã¯è©³ç´°ãªæƒ…å ±ã«åŠ ãˆã¦ãã®æ¦‚è¦ã¨è£œè¶³æƒ…å ±ãªã©ã§å¤šé¢çš„ã«ä¸ãˆã‚‹ã¨ç²¾åº¦ãŒä¸ŠãŒã‚Šã¾ã™ã€‚å˜ç´”ã«æ‰‹è»½ã•ã ã‘ã§è¨€ãˆã°ã€ãƒ‡ãƒ¼ã‚¿ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®å·¥å¤«ã«è…å¿ƒã™ã‚‹ã‚ˆã‚Šè¡¨ç¾ã®ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å¢—ã‚„ã™æ–¹ãŒæ¥½ã§ã™ã€‚ãƒ‘ã‚±æ­»ãªã‚‰ã¬ãƒˆãƒ¼ã‚¯ãƒ³æ­»ã—ã¾ã™ãŒâ€¦</span><a href="#fnref:1" rev="footnote"> â†©</a></li></ol></div></div>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Programming/">Programming</category>
      
      
      <category domain="https://future-architect.github.io/tags/%E3%83%8E%E3%83%BC%E3%82%B3%E3%83%BC%E3%83%89/">ãƒãƒ¼ã‚³ãƒ¼ãƒ‰</category>
      
      <category domain="https://future-architect.github.io/tags/%E7%94%9F%E6%88%90AI/">ç”ŸæˆAI</category>
      
      <category domain="https://future-architect.github.io/tags/Dify/">Dify</category>
      
      <category domain="https://future-architect.github.io/tags/Anthropic-Claude/">Anthropic Claude</category>
      
      
      <comments>https://future-architect.github.io/articles/20240402a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Microsoft 365 Developer Programã§EntraID(æ—§åAzureAD)ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹</title>
      <link>https://future-architect.github.io/articles/20240401a/</link>
      <guid>https://future-architect.github.io/articles/20240401a/</guid>
      <pubDate>Sun, 31 Mar 2024 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;p&gt;éå»ã«ã„ãã¤ã‹EntraID(æ—§åAzureAD)ã®è¨˜äº‹ã‚’&lt;a href=&quot;/tags/AzureAD/&quot;&gt;ä½•æœ¬ã‚‚æ›¸ã„ã¦ã„ã¾ã™&lt;/a&gt;ãŒã€ä¹…ã€…ã«Microsoft 365 Developer</description>
          
        
      
      
      
      <content:encoded><![CDATA[<p>éå»ã«ã„ãã¤ã‹EntraID(æ—§åAzureAD)ã®è¨˜äº‹ã‚’<a href="/tags/AzureAD/">ä½•æœ¬ã‚‚æ›¸ã„ã¦ã„ã¾ã™</a>ãŒã€ä¹…ã€…ã«Microsoft 365 Developer Programã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã‚‰ã€ã©ã“ã«EntraIDãŒã‚ã‚‹ã®ã‹å ´æ‰€ãŒåˆ†ã‹ã‚‰ãªã‹ã£ãŸã®ã§ãƒ¡ãƒ¢ã§ã™ã€‚Microsoft 365å…¨èˆ¬ã§åŒã˜ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€åƒ•è‡ªèº«ã¯Developer Programã—ã‹è§¦ã£ã¦ã„ãªã„ã®ã§ã‚ã‹ã‚Šã¾ã›ã‚“ã€‚</p><p><a href="https://developer.microsoft.com/en-us/microsoft-365/dev-program">Microsoft 365 Developer Programã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆ</a>ã§ä¸Šã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®Developer Programã®ã€ŒMy Dashboardã€ã‚’é¸ã³ã¾ã™ã€‚ã“ã®é·ç§»ãŒã‚ã‹ã‚‰ãªãã¦ã„ã¤ã‚‚Join Nowã‚’ã—ã¦ã„ã¾ã—ãŸã€‚</p><img src="/images/20240401a/image.png" alt="image.png" width="610" height="287" loading="lazy"><p>ã“ã¡ã‚‰ãŒãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã™ã€‚</p><img src="/images/20240401a/image_2.png" alt="image.png" width="911" height="633" loading="lazy"><p>ã“ã“ã§Go to subscritpionã‚’é¸æŠã™ã‚‹ã¨ã€æ¬¡ã®ã‚ªãƒ•ã‚£ã‚¹ã®ãƒãƒ¼ã‚¿ãƒ«ã£ã½ã„ãƒšãƒ¼ã‚¸ã«ç§»å‹•ã—ã¾ã™ã€‚</p><img src="/images/20240401a/image_3.png" alt="image.png" width="1200" height="646" loading="lazy"><p>å·¦ã®ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã®Adminã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ»ãƒ»ãƒ»ä¸Šã®ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã«entraidã‚’å…¥ã‚Œã¦æ¤œç´¢ã—ã¦å‡ºã¦ãã‚‹IdentityãŒEntraIDã§ã™ã€‚</p><img src="/images/20240401a/image_4.png" alt="image.png" width="859" height="517" loading="lazy">]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Programming/">Programming</category>
      
      
      <category domain="https://future-architect.github.io/tags/Azure/">Azure</category>
      
      <category domain="https://future-architect.github.io/tags/EntraID/">EntraID</category>
      
      <category domain="https://future-architect.github.io/tags/Microsoft365/">Microsoft365</category>
      
      
      <comments>https://future-architect.github.io/articles/20240401a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Goã§AWS Lambdaã®ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã‚’ç”¨ã„ã¦å®Ÿè£…ã™ã‚‹</title>
      <link>https://future-architect.github.io/articles/20240329a/</link>
      <guid>https://future-architect.github.io/articles/20240329a/</guid>
      <pubDate>Thu, 28 Mar 2024 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;h2 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h2&gt;&lt;p&gt;TIGçœŸé‡ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;AWS SDK for Goã‚’ç”¨ã„ã¦AWS</description>
          
        
      
      
      
      <content:encoded><![CDATA[<h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><p>TIGçœŸé‡ã§ã™ã€‚</p><p>AWS SDK for Goã‚’ç”¨ã„ã¦AWS Lambdaã‚’å®Ÿè£…ã™ã‚‹éš›ã«ã€å…±é€šçš„ã«è¡Œã„ãŸã„ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢çš„ãªå‡¦ç†ã‚’ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã§å®Ÿè£…ã™ã‚‹æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚å†…å®¹çš„ã«ã¯ <code>http.HandlerFunc</code> ã«å¯¾ã—ã¦ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’ä½œã‚‹ã®ã¨ã»ã¼åŒç¾©ã§ã™ã€‚</p><h2 id="å‰æçŸ¥è­˜"><a href="#å‰æçŸ¥è­˜" class="headerlink" title="å‰æçŸ¥è­˜"></a>å‰æçŸ¥è­˜</h2><p>AWS SDK for Goã§Lambdaã‚’å®Ÿè£…ã™ã‚‹ã«ã‚ãŸã‚Šã€<a href="https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/golang-handler.html">é–¢æ•°ãƒãƒ³ãƒ‰ãƒ©ã¯è¤‡æ•°ã®ã‚·ã‚°ãƒãƒãƒ£ã‚’è¨±å®¹</a>ã—ã¦ã€ãã®ã†ã¡å¼•æ•°ã« <code>context.Context</code> ã‚’å–ã‚‹ã®ã¯ä»¥ä¸‹ã®4ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚ã“ã®è¨˜äº‹ã§ã¯ä¾¿å®œçš„ã«1~4ã§æ¡ç•ªã—ã¦ãƒ‘ã‚¿ãƒ¼ãƒ³åã‚’å…¥ã‚Œã¦ã„ã¾ã™</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// No.1 ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(context.Context)</span></span> <span class="type">error</span></span><br><span class="line"><span class="comment">// No2 TInãƒ‘ã‚¿ãƒ¼ãƒ³</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(context.Context, TIn)</span></span> <span class="type">error</span></span><br><span class="line"><span class="comment">// No3 TOutãƒ‘ã‚¿ãƒ¼ãƒ³</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(context.Context)</span></span> (TOut, <span class="type">error</span>)</span><br><span class="line"><span class="comment">// No4 TInToutãƒ‘ã‚¿ãƒ¼ãƒ³</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(context.Context, TIn)</span></span> (TOut, <span class="type">error</span>)</span><br></pre></td></tr></table></figure><p>ä¾‹ãˆã°ã€ã€ŒNo.1 ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã€ã¯<code>main.go</code> ã‹ã‚‰ã€ <code>plain</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã® <code>Handle()</code> é–¢æ•°ã‚’å‘¼ã³å‡ºã™ã‚ˆã†ã«å®Ÿè£…ã—ã¾ã™ã€‚ãã†ã™ã‚‹ã¨ã€SDKå´ã§ä»»æ„ã®ãƒˆãƒªã‚¬ãƒ¼ã§Lambdaã‚’èµ·å‹•ã™ã‚‹ã‚ˆã†ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã—ã¦ãã‚Œã¾ã™ã€‚ã“ã®ä¾‹ã§ã¯2ãƒ•ã‚¡ã‚¤ãƒ«ã«åˆ†å‰²ã—ã¦ã„ã¾ã™ãŒã€ã“ã®ã‚ˆã†ãªæŠ€è¡“çš„ãªåˆ¶ç´„ã¯ç„¡ã„ã§ã™ã€‚å¾Œã®èª¬æ˜ã®éƒ½åˆã§æœ€åˆã‹ã‚‰åˆ†é›¢ã—ã¦ã„ã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>cmd/lambda/main.go</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;context&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;github.com/aws/aws-lambda-go/lambda&quot;</span></span><br><span class="line">    <span class="string">&quot;github.com/myproject/myapp/plain&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">lambda.Start(plain.Handle)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><figcaption><span>plain/handler.go</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> plain</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Handle</span><span class="params">(ctx context.Context)</span></span> <span class="type">error</span> &#123;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="comment">// ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ­ã‚¸ãƒƒã‚¯ãªã©</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã•ãã»ã©æç¤ºã—ãŸLambdaé–¢æ•°ãƒãƒ³ãƒ‰ãƒ©ã«ç™»å ´ã™ã‚‹ <code>TIn</code>, <code>TOut</code> ã¯ anyå‹ã§ã©ã®ã‚ˆã†ãªå‹ã‚’ã¨ã£ã¦ã‚‚è‰¯ã„ãŸã‚ã€ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ä»¥å‰ã¯ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿çš„ãªå…±é€šçš„ãªå‡¦ç†ã‚’æ›¸ããŸã‚ã«ã¯ã€ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«é ¼ã‚‹ã‹ã€ã‚¤ãƒ™ãƒ³ãƒˆç¨®åˆ¥ã”ã¨ã«å€‹åˆ¥ã«ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚å¾Œè€…ã‚‚TOutã®å ´åˆã¯ã†ã¾ãæ‰±ã†ã“ã¨ãŒã§ããšæœ€çµ‚çš„ã«ã¯ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«é ¼ã£ã¦ã„ãŸã¨æ€ã„ã¾ã™ã€‚</p><p><a href="/articles/20220209a/">Go 1.18ã‹ã‚‰å…¥ã£ãŸã‚¸ã‚§ãƒãƒªã‚¯ã‚¹</a>ã‚’ç”¨ã„ã¦ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ç„¡ã—ã§ã€ä¸Šè¨˜ã®é–¢æ•°ãƒãƒ³ãƒ‰ãƒ©ã‚’ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã®è¨­è¨ˆã§ãƒ©ãƒƒãƒ—ã—ãŸå®Ÿè£…ã‚’è€ƒãˆã¾ã™ã€‚</p><p>å‰æçŸ¥è­˜ã‚’ã‚‚ã†å°‘ã—ç´°ã‹ãçŸ¥ã‚ŠãŸã„äººã¯æ¬¡ã®è¨˜äº‹ã‚‚ãŠå‹§ã‚ã§ã™ã€‚</p><ul><li>TIn, TOutã®æŒ™å‹•ã«ã¤ã„ã¦ã¯<a href="/articles/20200326/">AWS LambdaÃ—Goã®é–‹ç™ºTips</a> ã«è¨€åŠãŒã‚ã‚Šã¾ã™</li><li>AWS SDK for GoãŒå®ˆã‚‹ã¹ãã‚·ã‚°ãƒãƒãƒ£ã‚’é•åã—ã¦ã„ãªã„ã‹ã®ãƒã‚§ãƒƒã‚¯ã¯ã€è¾»ã•ã‚“ã®<a href="/articles/20210603a/">é™çš„è§£æã«ã‚ˆã‚‹InvalidãªAWS Lambdaé–¢æ•°ã‚·ã‚°ãƒãƒãƒ£ã®æ¤œçŸ¥</a>ã§ç´¹ä»‹ã™ã‚‹é™çš„è§£æãƒ„ãƒ¼ãƒ«ã§è¡Œãˆã¾ã™</li><li>ãƒ‡ãƒ¬ã‚³ãƒ¼ã‚¿ã«ã¤ã„ã¦ã¯<a href="/articles/20221021a/">CSVå‡¦ç†ã«ãŠã‘ã‚‹å…±é€šå‡¦ç†ã‚’Decoratorãƒ‘ã‚¿ãƒ¼ãƒ³ã§å®Ÿç¾ã™ã‚‹</a>ã‚‚è¨€åŠãŒã‚ã‚Šã¾ã™</li></ul><h2 id="å…±é€šã§è¡Œã„ãŸã„å‡¦ç†ã‚’ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã§æ‰±ã†ã®æ„"><a href="#å…±é€šã§è¡Œã„ãŸã„å‡¦ç†ã‚’ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã§æ‰±ã†ã®æ„" class="headerlink" title="å…±é€šã§è¡Œã„ãŸã„å‡¦ç†ã‚’ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã§æ‰±ã†ã®æ„"></a>å…±é€šã§è¡Œã„ãŸã„å‡¦ç†ã‚’ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã§æ‰±ã†ã®æ„</h2><p>ä¾‹ãˆã°ã€æ¬¡ã®ã‚ˆã†ãªå‡¦ç†ã¯æ©Ÿèƒ½æ¨ªæ–­çš„ï¼ˆã‚ã‚‹æ©Ÿèƒ½ã®é–‰ã˜ãšã€ã‚µãƒ¼ãƒ“ã‚¹å…¨ä½“ã«çµ±åˆ¶ã‚’å›³ã£ã¦é©ç”¨ã—ãŸã„ï¼‰ã«å®Ÿç¾ã—ãŸã„ã“ã¨ãŒå¤šã„ã§ã™ã€‚</p><ul><li>panicã®ã‚­ãƒ£ãƒ—ãƒãƒ£</li><li>errorãŒnilã§ãªã„å ´åˆã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</li><li>å®Ÿè¡Œæ™‚é–“ã®é…å»¶ç›£è¦–</li><li>ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†</li></ul><p>æ‰±ã†Lambdaã®æ•°ãŒå°‘ãªã‘ã‚Œã°ã‚ã¾ã‚Šæ°—ã«ã—ãªãã¦ã‚‚è‰¯ã„ã§ã™ãŒã€ãƒãƒ¼ãƒ è¦æ¨¡ãŒå¢—ãˆã€é–‹ç™ºè¦æ¨¡ã‚‚Lambdaé–¢æ•°ãŒæ•°åç¨‹åº¦ã«ãªã£ã¦ãã‚‹ã¨ä½•ã‹ã—ã‚‰çµ±åˆ¶ã‚’å›³ã‚ŠãŸããªã£ã¦ãã‚‹ã‚‚ã®ã§ã™ã€‚</p><p>ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã®å‡¦ç†ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ãŒã€æ¬¡ã®ã‚ˆã†ãªã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚å…ˆã»ã©ã® <code>plain/handler.go</code> ã§å®Ÿè£…ã—ãŸ <code>Handle()</code> é–¢æ•°ãŒçœŸã‚“ä¸­ã®ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®éƒ¨åˆ†ã§ã€å¤–å´ã‚’1ã¤ä»¥ä¸Šã®å…±é€šå‡¦ç†ã§ãƒ©ãƒƒãƒ—ã™ã‚‹ã‚ˆã†ãªã“ã¨ã‚’è¡Œã„ã¾ã™ã€‚</p><img src="/images/20240329a/godecorator.drawio.png" alt="godecorator.drawio.png" width="1030" height="459" loading="lazy"><p>æ¬¡ã®ç« ã‹ã‚‰ã¯å…·ä½“çš„ã«å®Ÿè£…ä¾‹ã‚’ç´¹ä»‹ã—ã¦ã„ãã¾ã™ã€‚</p><h2 id="No1-ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿å®Ÿè£…"><a href="#No1-ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿å®Ÿè£…" class="headerlink" title="No1. ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿å®Ÿè£…"></a>No1. ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿å®Ÿè£…</h2><p>ã¾ãš <code>func (context.Context) error</code> ã®å…±é€šå‡¦ç†ã‚’æ›¸ãã¾ã™ã€‚ã“ã®ã‚±ãƒ¼ã‚¹ã¯ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã®åˆ©ç”¨ç„¡ã—ã§å¯¾å¿œã§ãã¾ã™ã€‚</p><p>æ¬¡ã®ã‚ˆã†ã« <code>LambdaFunc</code> ã‚’å‹å®šç¾©ã—ã¾ã™ã€‚<code>LambdaFunc</code>ã‚’å¼•æ•°ã¨æˆ»ã‚Šå€¤ã«ã—ãŸ<code>Do()</code> é–¢æ•°ã‚’ä½œã‚Šã¾ã™ã€‚ã“ã‚ŒãŒãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ãƒ¼ã®æœ¬ä½“ï¼ˆã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆï¼‰ã§ã™ã€‚</p><figure class="highlight go"><figcaption><span>lambdamiddleware/lambda_middleware.go</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> lambdamiddleware</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;context&quot;</span></span><br><span class="line"><span class="string">&quot;runtime/debug&quot;</span></span><br><span class="line"><span class="string">&quot;time&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;github.com/rs/zerolog/log&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã®Lambdaé–¢æ•°ã‚’ãƒ‡ã‚³ãƒ¬ãƒ¼ãƒˆã™ã‚‹ãŸã‚ã®å‹å®šç¾©</span></span><br><span class="line"><span class="keyword">type</span> LambdaFunc <span class="function"><span class="keyword">func</span><span class="params">(ctx context.Context)</span></span> <span class="type">error</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ãƒ‡ã‚³ãƒ¬ãƒ¼ãƒˆå‡¦ç†ã®æœ¬ä½“</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Do</span><span class="params">(fn LambdaFunc)</span></span> LambdaFunc &#123;</span><br><span class="line"><span class="keyword">return</span> errCheck(fn)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…±é€šå‡¦ç†ã®ä¸€ä¾‹ï¼ˆã“ã“ã§ã¯ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼‰ã€‚ã“ã‚Œã‚‚ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">errCheck</span><span class="params">(fn LambdaFunc)</span></span> LambdaFunc &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(ctx context.Context)</span></span> <span class="type">error</span> &#123;</span><br><span class="line"><span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123; <span class="comment">// ãƒ‘ãƒ‹ãƒƒã‚¯ã®ã‚­ãƒ£ãƒ—ãƒãƒ£</span></span><br><span class="line"><span class="keyword">if</span> err := <span class="built_in">recover</span>(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Error().Msgf(<span class="string">&quot;panic catch: %v\n%v&quot;</span>, err, <span class="type">string</span>(debug.Stack()))</span><br><span class="line">&#125;</span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line">err := fn(ctx)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Error().Msgf(<span class="string">&quot;%v&quot;</span>, err) <span class="comment">// å…±é€šçš„ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆã“ã“ã§ã¯ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’å‡ºã—ãŸã„ï¼‰</span></span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>errCheck</code> ã§ã¯æ‹¡å¼µã—ãŸã„å…±é€šå‡¦ç†ã‚’å®Ÿè£…ã—ã¦ã€å…ˆã»ã©ã® <code>Do()</code> å†…ã§ <code>fn</code> ã«è¢«ã›ã¾ã™ã€‚ãƒ‡ã‚³ãƒ¬ãƒ¼ãƒˆã½ã„ã§ã™ã­ã€‚</p><p>ã•ã¦ã€ã“ã‚Œã‚’main.goã«é©ç”¨ã™ã‚‹ã¨ã€æ¬¡ã®ã‚ˆã†ã«ä¸‹ã® <code>plain.Handle</code> ã‚’ <code>lambdamiddleware.Do()</code> ã§ãƒ©ãƒƒãƒ—ã—ãŸã‚ˆã†ãªå¤‰æ›´ã¨ãªã‚Šã¾ã™ã€‚</p><figure class="highlight diff"><figcaption><span>cmd/lambda/main.go</span></figcaption><table><tr><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;context&quot;</span><br><span class="line"></span><br><span class="line">&quot;github.com/aws/aws-lambda-go/lambda&quot;</span><br><span class="line">    &quot;github.com/myproject/myapp/plain&quot;</span><br><span class="line"><span class="addition">+   &quot;github.com/myproject/myapp/lambdamiddleware&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line"><span class="deletion">-lambda.Start(plain.Handle)</span></span><br><span class="line"><span class="addition">+lambda.Start(lambdamiddleware.Do(plain.Handle))</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŒ™å‹•ã¨ã—ã¦ã¯ <code>plain.Handle</code> ãŒ <code>lambdamiddleware.Do()</code> ã«æ¸¡ã•ã‚Œã€ <code>errCheck()</code> ã§å‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚ <code>errCheck()</code> ã¯ <code>func(ctx context.Context) error</code> ã¨ã„ã†é–¢æ•°ã‚’è¿”ã™ã€ã¨ã„ã†ã¨ã“ã‚ãŒãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚</p><p>ã“ã®æ‰‹ã®å®Ÿè£…ã¯æ…£ã‚Œãªã„ã¨å›°æƒ‘ã™ã‚‹äººã‚‚ã„ãã†ã§ã™ãŒã€Goã ã¨ HTTP Middlewareã‚’ä½œã‚‹ãŸã‚ã«ã€<code>http.HandlerFunc</code> ã§åŒæ§˜ã®è¨­è¨ˆã‚’ã‚ˆãè¦‹ã‹ã‘ã¾ã™ã€‚</p><p>è¾»ã•ã‚“ã®<a href="https://tutuz-tech.hatenablog.com/entry/2020/03/23/220326">HTTP Middleware ã®ä½œã‚Šæ–¹ã¨ä½¿ã„æ–¹</a> ã‚’å§‹ã‚ã€å‚è€ƒã«ãªã‚‹æƒ…å ±ãŒæ²¢å±±ã‚ã‚Šã¾ã™ã€‚</p><h2 id="No2-TInãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿å®Ÿè£…"><a href="#No2-TInãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿å®Ÿè£…" class="headerlink" title="No2. TInãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿å®Ÿè£…"></a>No2. TInãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿å®Ÿè£…</h2><p>No1ã¨ç•°ãªã‚Šã€<code>TIn</code> ã¯ä»»æ„ã®å‹ãªã®ã§ã€ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ãŒç™»å ´ã—ã¾ã™ã€‚å‹å®šç¾©ã§ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã‚’ç”¨ã„ã‚‹å ´åˆã¯ã€ <code>type LambdaTInFunc[TI any] func(ctx context.Context, e TI) error</code> ã¨ã„ã£ãŸé †åºã§å®£è¨€ã—ã¾ã™ã€‚æ§‹é€ ã¯åŒã˜ã§ã™ã€‚</p><figure class="highlight go"><figcaption><span>lambdamiddleware/lambda_tin_middleware.go</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> lambdamiddleware</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;context&quot;</span></span><br><span class="line"><span class="string">&quot;runtime/debug&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;github.com/rs/zerolog/log&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> LambdaTInFunc[TI any] <span class="function"><span class="keyword">func</span><span class="params">(ctx context.Context, e TI)</span></span> <span class="type">error</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">DoTin</span>[<span class="title">TI</span> <span class="title">any</span>]<span class="params">(fn LambdaTInFunc[TI])</span></span> LambdaTInFunc[TI] &#123;</span><br><span class="line"><span class="keyword">return</span> errLogTIn(fn)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">errLogTIn</span>[<span class="title">TI</span> <span class="title">any</span>]<span class="params">(fn LambdaTInFunc[TI])</span></span> LambdaTInFunc[TI] &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(ctx context.Context, e TI)</span></span> <span class="type">error</span> &#123;</span><br><span class="line"><span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> err := <span class="built_in">recover</span>(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Error().Msgf(<span class="string">&quot;panic catch: %v\n%v&quot;</span>, err, <span class="type">string</span>(debug.Stack()))</span><br><span class="line">&#125;</span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line">err := fn(ctx, e)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Error().Msgf(<span class="string">&quot;%v&quot;</span>, err)</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‘¼ã³å‡ºã—æ–¹ã‚‚ã€æ¬¡ã®ã‚ˆã†ã«åŒæ§˜ã§ã™ã€‚å…ˆã»ã©ã¨ç•°ãªã‚Šã€Handle()é–¢æ•°ã«ã¯ã€ <code>events.DynamoDBEvent</code> ã¨ã„ã†å¼•æ•°ãŒã‚ã‚Šã¾ã™ãŒã€ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã‚’ç”¨ã„ã¦ã„ã‚‹ãŸã‚ã©ã®ã‚ˆã†ãªå‹ã§ã‚‚å—ã‘æ­¢ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><figure class="highlight go"><figcaption><span>cmd/tinlambda/main.go</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;context&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;github.com/aws/aws-lambda-go/lambda&quot;</span></span><br><span class="line">    <span class="string">&quot;github.com/myproject/myapp/tin&quot;</span></span><br><span class="line">    <span class="string">&quot;github.com/myproject/myapp/lambdamiddleware&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">lambda.Start(lambdamiddleware.DoTin(tin.Handle))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><figcaption><span>tin/handler.go</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Handle</span><span class="params">(ctx context.Context, e events.DynamoDBEvent)</span></span> <span class="type">error</span> &#123;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="comment">// ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ­ã‚¸ãƒƒã‚¯ãªã©</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="No3-TOutãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿å®Ÿè£…"><a href="#No3-TOutãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿å®Ÿè£…" class="headerlink" title="No3. TOutãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿å®Ÿè£…"></a>No3. TOutãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿å®Ÿè£…</h2><p>TOutãƒ‘ã‚¿ãƒ¼ãƒ³ã‚‚ã»ã¼åŒã˜ã§ã™ã€‚1ç‚¹è£œè¶³ã™ã‚‹ã¨ <code>var zero TO</code> ã§åˆæœŸå€¤ã‚’ç”Ÿæˆã—ã¦ã„ã‚‹éƒ¨åˆ†ã§ã—ã‚‡ã†ã‹ã€‚ã“ã‚Œã‚‚err ãŒ not nil ã§ã‚ã‚‹çŠ¶æ…‹ã§ã™ã®ã§ã€ <code>return tout, err</code> ã¨ã—ã¦ã‚‚æŒ™å‹•ã¨ã—ã¦å•é¡Œãªã„ãŸã‚ã€å¥½ã¿ã«è¿‘ã„ã¨ã“ã‚ã§ã™ã€‚</p><figure class="highlight go"><figcaption><span>lambdamiddleware/lambda_tout_middleware.go</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> lambdamiddleware</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;context&quot;</span></span><br><span class="line"><span class="string">&quot;runtime/debug&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;github.com/rs/zerolog/log&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> LambdaTOutFunc[TO any] <span class="function"><span class="keyword">func</span><span class="params">(ctx context.Context)</span></span> (TO, <span class="type">error</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">DoTout</span>[<span class="title">TO</span> <span class="title">any</span>]<span class="params">(fn LambdaTOutFunc[TO])</span></span> LambdaTOutFunc[TO] &#123;</span><br><span class="line"><span class="keyword">return</span> errLogTOut(fn)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">errLogTOut</span>[<span class="title">TO</span> <span class="title">any</span>]<span class="params">(fn LambdaTOutFunc[TO])</span></span> LambdaTOutFunc[TO] &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(ctx context.Context)</span></span> (TO, <span class="type">error</span>) &#123;</span><br><span class="line"><span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> err := <span class="built_in">recover</span>(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Error().Msgf(<span class="string">&quot;panic catch: %v\n%v&quot;</span>, err, <span class="type">string</span>(debug.Stack()))</span><br><span class="line">&#125;</span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line">tout, err := fn(ctx)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Error().Msgf(<span class="string">&quot;%v&quot;</span>, err)</span><br><span class="line"><span class="keyword">var</span> zero TO <span class="comment">// ã‚¼ãƒ­å€¤</span></span><br><span class="line"><span class="keyword">return</span> zero, err</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> tout, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‘¼ã³å‡ºã•ã‚Œå‹ã¯No2, No4ã¨é¡ä¼¼ã«ãªã‚‹ãŸã‚ã€å‰²æ„›ã—ã¾ã™ã€‚</p><h2 id="No4-TInTOutãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿å®Ÿè£…"><a href="#No4-TInTOutãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿å®Ÿè£…" class="headerlink" title="No4. TInTOutãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿å®Ÿè£…"></a>No4. TInTOutãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿å®Ÿè£…</h2><p>Tin, TOutãƒ‘ã‚¿ãƒ¼ãƒ³ã®çµ„ã¿åˆã‚ã›ã§ã™ã€‚æ§‹é€ ã¯åŒã˜ã§ã™ã€‚</p><figure class="highlight go"><figcaption><span>lambdamiddleware/lambda_tintout_middleware.go</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> lambdamiddleware</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;context&quot;</span></span><br><span class="line"><span class="string">&quot;runtime/debug&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;github.com/rs/zerolog/log&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> LambdaTInTOutFunc[TI, TO any] <span class="function"><span class="keyword">func</span><span class="params">(ctx context.Context, e TI)</span></span> (TO, <span class="type">error</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">DoTinTout</span>[<span class="title">TI</span>, <span class="title">TO</span> <span class="title">any</span>]<span class="params">(fn LambdaTInTOutFunc[TI, TO])</span></span> LambdaTInTOutFunc[TI, TO] &#123;</span><br><span class="line"><span class="keyword">return</span> errLogTInTOut(fn)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">errLogTInTOut</span>[<span class="title">TI</span>, <span class="title">TO</span> <span class="title">any</span>]<span class="params">(fn LambdaTInTOutFunc[TI, TO])</span></span> LambdaTInTOutFunc[TI, TO] &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(ctx context.Context, e TI)</span></span> (TO, <span class="type">error</span>) &#123;</span><br><span class="line"><span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> err := <span class="built_in">recover</span>(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Error().Msgf(<span class="string">&quot;panic catch: %v\n%v&quot;</span>, err, <span class="type">string</span>(debug.Stack()))</span><br><span class="line">&#125;</span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line">tout, err := fn(ctx, e)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Error().Msgf(<span class="string">&quot;%v&quot;</span>, err)</span><br><span class="line"><span class="keyword">var</span> zero TO</span><br><span class="line"><span class="keyword">return</span> zero, err</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> tout, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‘¼ã³å‡ºã—æ–¹ã‚‚ç‰¹ç­†ã™ã¹ãã“ã¨ã¯ç„¡ã„ã§ã™ã€‚å¼•æ•°ã€æˆ»ã‚Šå€¤ã¨ã‚‚ã«ä»»æ„ã®å‹ï¼ˆã“ã®ä¾‹ã§ã¯CloudWatchEventçµŒç”±ã§èµ·å‹•ã—ã€ç‹¬è‡ªå®šç¾©ã®æ§‹é€ ä½“ã‚’è¿”ã™ï¼‰ã‚’æ‰±ãˆã¦ã„ã‚‹ã“ã¨ã«ç€ç›®ãã ã•ã„ã€‚</p><figure class="highlight go"><figcaption><span>cmd/tintoutlambda/main.go</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;context&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;github.com/aws/aws-lambda-go/lambda&quot;</span></span><br><span class="line">    <span class="string">&quot;github.com/myproject/myapp/tin&quot;</span></span><br><span class="line">    <span class="string">&quot;github.com/myproject/myapp/lambdamiddleware&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">lambda.Start(lambdatintoutmiddleware.DoTinTOut(tintout.Handle))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><figcaption><span>tintout/handler.go</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Handle</span><span class="params">(ctx context.Context, e events.CloudWatchEvent)</span></span>(MyStruct, <span class="type">error</span>) &#123;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="comment">// ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ­ã‚¸ãƒƒã‚¯ãªã©</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ¥ã®å…±é€šå‡¦ç†ã‚’è¿½åŠ ã—ãŸã„"><a href="#åˆ¥ã®å…±é€šå‡¦ç†ã‚’è¿½åŠ ã—ãŸã„" class="headerlink" title="åˆ¥ã®å…±é€šå‡¦ç†ã‚’è¿½åŠ ã—ãŸã„"></a>åˆ¥ã®å…±é€šå‡¦ç†ã‚’è¿½åŠ ã—ãŸã„</h2><p>ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’æ‹¡å¼µã—ãŸã„å ´åˆã‚‚ç´¹ä»‹ã—ã¾ã™ã€‚</p><p>ä¾‹ãˆã°ã€Lambdaã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ100mså‰ã«ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’å‡ºã—ãŸã„ã¨ã—ã¾ã™ã€‚æœ€å¾Œã®TinTouã«è¿½åŠ ã™ã‚‹ã¨æ¬¡ã®ã‚ˆã†ã« <code>delayCheckTInTOut()</code> ã‚’è¿½åŠ ã—ã€<code>DoTinTout()</code> ã«ãã‚Œã‚’è¿½åŠ ã—ã¦å‘¼ã³å‡ºã™ã“ã¨ã§å¯¾å¿œã§ãã¾ã™ã€‚</p><figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">func DoTinTOut[TI, TO any](fn LambdaTInTOutFunc[TI, TO]) LambdaTInTOutFunc[TI, TO] &#123;</span><br><span class="line"><span class="deletion">-return errLogTInTOut(fn)</span></span><br><span class="line"><span class="addition">+return delayCheckTInTOut(errLogTInTOut(fn))</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="addition">+func delayCheckTInTOut[TI, TO any](fn LambdaTInTOutFunc[TI, TO]) LambdaTInTOutFunc[TI, TO] &#123;</span></span><br><span class="line"><span class="addition">+return func(ctx context.Context, e TI) (TO, error) &#123;</span></span><br><span class="line"><span class="addition">+deadline, _ := ctx.Deadline()</span></span><br><span class="line"><span class="addition">+deadlineTerm := time.Until(deadline.Add(-100 * time.Millisecond))</span></span><br><span class="line"><span class="addition">+</span></span><br><span class="line"><span class="addition">+errTime := time.AfterFunc(deadlineTerm, func() &#123;</span></span><br><span class="line"><span class="addition">+log.Error().Msgf(&quot;job process time error: %s sec has passed&quot;, deadlineTerm.String())</span></span><br><span class="line"><span class="addition">+&#125;)</span></span><br><span class="line"><span class="addition">+defer errTime.Stop()</span></span><br><span class="line"><span class="addition">+</span></span><br><span class="line"><span class="addition">+return fn(ctx, e)</span></span><br><span class="line"><span class="addition">+&#125;</span></span><br><span class="line"><span class="addition">+&#125;</span></span><br></pre></td></tr></table></figure><p>åŒæ§˜ã®å‡¦ç†ã‚’ã€<code>lambda_middleware.go</code>ã€<code>lambda_tin_middleware.go</code>ã€<code>lambda_tout_middleware.go</code> ã«è¿½åŠ ã™ã‚Œã°å®Œæˆã§ã™ã€‚</p><p>å‘¼ã³å‡ºã—å´ã® <code>cmd/tintoutlambda/main.go</code> ãªã©ã«ã¯å½±éŸ¿ã›ãšã«æ¨ªæ–­çš„ãªé…å»¶ãƒã‚§ãƒƒã‚¯ã‚’è¡Œãˆã¾ã™ã€‚</p><h2 id="ã‚·ã‚°ãƒãƒãƒ£ãŒç•°ãªã‚‹ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’å‘¼ã³å‡ºã—ã¦ã—ã¾ã£ãŸå ´åˆ"><a href="#ã‚·ã‚°ãƒãƒãƒ£ãŒç•°ãªã‚‹ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’å‘¼ã³å‡ºã—ã¦ã—ã¾ã£ãŸå ´åˆ" class="headerlink" title="ã‚·ã‚°ãƒãƒãƒ£ãŒç•°ãªã‚‹ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’å‘¼ã³å‡ºã—ã¦ã—ã¾ã£ãŸå ´åˆ"></a>ã‚·ã‚°ãƒãƒãƒ£ãŒç•°ãªã‚‹ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’å‘¼ã³å‡ºã—ã¦ã—ã¾ã£ãŸå ´åˆ</h2><p>ä¾‹ãˆã°ã€æœ¬æ¥lambdatintoutmiddleware.DoTinTOut()ã‚’å‘¼ã³å‡ºã™ã¹ãã¯ãšãŒã€èª¤ã£ã¦ <code>lambdatintoutmiddleware.DoOut()</code> ã‚’å‘¼ã³å‡ºã—ã¦ã—ã¾ã£ãŸã¨ã—ã¾ã™ã€‚</p><p>ã“ã®å ´åˆã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><figure class="highlight diff"><figcaption><span>cmd/tintoutlambda/main.go</span></figcaption><table><tr><td class="code"><pre><span class="line">func main() &#123;</span><br><span class="line"><span class="deletion">-lambda.Start(lambdatintoutmiddleware.DoTinTOut(tintout.Handle))</span></span><br><span class="line"><span class="addition">+lambda.Start(lambdatintoutmiddleware.DoOut(tintout.Handle)) // ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼(Cannot infer TI)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã§ã‚†ã‚‹ãµã‚å¯¾å¿œã—ã¦ã„ãŸã¨ãã¯ã€å®Ÿè¡Œæ™‚ã§æ¤œçŸ¥ï¼ˆã‚ã‚‹ã„ã¯é™çš„è§£æã§ãŒã‚“ã°ã‚‹ã‹ï¼‰ã ã£ãŸã®ã§ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼æ™‚ãªã©ã‚‚å®‰å¿ƒæ„ŸãŒã‚ã‚Šã¾ã™ã€‚</p><h2 id="é‹ç”¨ã—ã¦ã¿ã¦"><a href="#é‹ç”¨ã—ã¦ã¿ã¦" class="headerlink" title="é‹ç”¨ã—ã¦ã¿ã¦"></a>é‹ç”¨ã—ã¦ã¿ã¦</h2><p>ä»Šã®ç§ã®ãƒãƒ¼ãƒ ã¯æ•°åã®LambdaãŒã‚ã‚Šã€Lambdaã‚’è¿½åŠ ã™ã‚‹ãŸã³ã«å…±é€šçš„ãªå‡¦ç†ãŒè¡Œãˆã¦ã„ã‚‹ã‹ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹ã®ã¯å¤§å¤‰ã§ã—ãŸã€‚ã¾ãŸã€å…±é€šçš„ãªå‡¦ç†ãŒLambdaã«ã‚ˆã£ã¦å¾®å¦™ã«é€²åŒ–ã—å§‹ã‚ã‚‹ãªã©å±é™ºãªçŠ¶æ…‹ã§ã—ãŸã€‚ãã‚Œã‚‰ã¯å®Œå…¨ã«è§£æ¶ˆã—ã€ã‚³ãƒ¼ãƒ‰æ•°ã‚‚æ¸›ã£ã¦ãƒãƒƒãƒ”ãƒ¼ãªçŠ¶æ…‹ã§ã™ã€‚</p><p>ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®å‘¼ã³å‡ºã—ã®ä½¿ã„åˆ†ã‘ã¯ã•ã»ã©é›£ã—ãã‚‚ãªãã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã§èª¤ã‚Šã«ã¯ã™ãæ°—ãŒã¤ãã“ã¨ãŒã§ãã‚‹ãŸã‚ã‹ã€ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã‹ã‚‰ã‚‚ç‰¹ã«å•ã„åˆã‚ã›ãŒç„¡ãã€ä»Šã®ã¨ã“ã‚ä½•ã‹å›°ã£ãŸã“ã¨ã«ã¯ãªã£ã¦ã„ã¾ã›ã‚“ã€‚</p><h2 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h2><p>AWS Lambdaã®é–¢æ•°ãƒãƒ³ãƒ‰ãƒ©ã®ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’ã€http.HandlerFuncã®ã‚ˆã†ã«ã—ã¦ä½œã£ã¦ã¿ã¾ã—ãŸã€‚Lambdaé–¢æ•°ãƒãƒ³ãƒ‰ãƒ©ã®ã‚·ã‚°ãƒãƒãƒ£ã¯ã€http.HandlerFuncã‚ˆã‚Šçª“å£ãŒåºƒã„ã®ã§ã€ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã‚’ç”¨ã„ã‚‹ã¨ã‚¹ãƒƒã‚­ãƒªã™ã‚‹ã‚ˆã¨ã„ã†è©±ã§ã—ãŸã€‚</p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Programming/">Programming</category>
      
      
      <category domain="https://future-architect.github.io/tags/Go/">Go</category>
      
      <category domain="https://future-architect.github.io/tags/Lambda/">Lambda</category>
      
      <category domain="https://future-architect.github.io/tags/Decorator/">Decorator</category>
      
      <category domain="https://future-architect.github.io/tags/%E5%85%B1%E9%80%9A%E5%87%A6%E7%90%86/">å…±é€šå‡¦ç†</category>
      
      
      <comments>https://future-architect.github.io/articles/20240329a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Terraformã§ã®ãƒ«ãƒ¼ãƒ—å‡¦ç†ã¨æ¡ä»¶åˆ†å²</title>
      <link>https://future-architect.github.io/articles/20240328b/</link>
      <guid>https://future-architect.github.io/articles/20240328b/</guid>
      <pubDate>Wed, 27 Mar 2024 15:00:01 GMT</pubDate>
      
        
        
          
          
      <description>&lt;img src=&quot;/images/20240328b/top.png&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;527&quot;&gt;

&lt;h2 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot;</description>
          
        
      
      
      
      <content:encoded><![CDATA[<img src="/images/20240328b/top.png" alt="" width="800" height="527"><h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><p>ã¯ã˜ã‚ã¾ã—ã¦ï¼TIG DXãƒãƒ¼ãƒ ã®å°æ—ã¨ç”³ã—ã¾ã™ã€‚</p><p>Terraformã§ã¯ä¼¼ãŸãƒªã‚½ãƒ¼ã‚¹ã‚’è¤‡æ•°æ§‹ç¯‰ã™ã‚‹éš›ã«ã€ãƒ«ãƒ¼ãƒ—å‡¦ç†ã‚„æ¡ä»¶åˆ†å²ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒ¼ãƒ‰ã®å†—é•·åŒ–ã‚’é˜²ãã€å¯èª­æ€§ã‚„ä¿å®ˆæ€§ã‚’ä¸Šã’ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>ç§è‡ªèº«ã¾ã Terraformæ­´åŠå¹´ã§ã™ãŒã€åˆå¿ƒè€…ç›®ç·šã§ã€ŒTerraformã®ã‚³ãƒ¼ãƒ‰ã‚’ã‚¹ãƒãƒ¼ãƒˆã«æ›¸ããŸã„ï¼ã€ã¨ã„ã†ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚‚ã¨æœ¬è¨˜äº‹ã‚’æ›¸ãã¾ã—ãŸã€‚</p><h2 id="ã‚µãƒãƒª"><a href="#ã‚µãƒãƒª" class="headerlink" title="ã‚µãƒãƒª"></a>ã‚µãƒãƒª</h2><h3 id="ãƒ«ãƒ¼ãƒ—å‡¦ç†"><a href="#ãƒ«ãƒ¼ãƒ—å‡¦ç†" class="headerlink" title="ãƒ«ãƒ¼ãƒ—å‡¦ç†"></a>ãƒ«ãƒ¼ãƒ—å‡¦ç†</h3><div class="scroll"><table><thead><tr><th>æ–¹æ³•</th><th>åˆ†é¡</th><th>ä¸»ãªç”¨é€”ï¼ˆå€‹äººçš„ãªã‚¤ãƒ¡ãƒ¼ã‚¸ï¼‰</th></tr></thead><tbody><tr><td><a href="https://developer.hashicorp.com/terraform/language/meta-arguments/count">count</a></td><td>ãƒ¡ã‚¿å¼•æ•°</td><td>ãƒ»é–‹ç™ºã‚„æ¤œè¨¼ç”¨ãªã©ã§ç°¡å˜ãªãƒªã‚½ãƒ¼ã‚¹ã‚’è¤‡æ•°å€‹ä½œã‚ŠãŸã„å ´åˆ <br> ãƒ»å°†æ¥çš„ã«æ•°ãŒå¢—æ¸›ã—ãªã„ã‚ˆã†ãªãƒªã‚½ãƒ¼ã‚¹ã‚’ä½œã‚‹å ´åˆ</td></tr><tr><td><a href="https://developer.hashicorp.com/terraform/language/meta-arguments/for_each">for_each</a></td><td>ãƒ¡ã‚¿å¼•æ•°</td><td>ãƒ»ãƒ«ãƒ¼ãƒ—å‡¦ç†ã§è¤‡æ•°ãƒªã‚½ãƒ¼ã‚¹ã‚’ä½œã‚ŠãŸã„å ´åˆã¯åŸºæœ¬ã“ã¡ã‚‰</td></tr><tr><td><a href="https://developer.hashicorp.com/terraform/language/expressions/for">for</a></td><td>å¼</td><td>ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½ã‚’åˆ©ç”¨ã—ã¦æ¡ä»¶ã«ã‚ˆã£ã¦ãƒªã‚½ãƒ¼ã‚¹æ§‹ç¯‰ã‚’åˆ¶å¾¡ã—ãŸã„å ´åˆ <br> ãƒ»æ—¢å­˜ã®è¨­å®šå€¤ã‚„æ§‹ç¯‰æ¸ˆãƒªã‚½ãƒ¼ã‚¹ã‹ã‚‰ä»»æ„ã®ãƒªã‚¹ãƒˆã‚„ãƒãƒƒãƒ—ã‚’å–å¾—ã—ãŸã„å ´åˆ <br> ãƒ»ãã®ä»–ä½¿ã£ãŸã‚‰å¹¸ã›ã«ãªã‚Œã‚‹å ´åˆ</td></tr><tr><td><a href="https://developer.hashicorp.com/terraform/language/expressions/dynamic-blocks">dynamic block</a></td><td>å¼</td><td>ãƒ»resource blockå†…ã§åŒä¸€ã®ãƒ–ãƒ­ãƒƒã‚¯ã‚’è¤‡æ•°å®šç¾©ã™ã‚‹å ´åˆ <br> ãƒ»å¯èª­æ€§ã‚„ä¿å®ˆæ€§ãŒè½ã¡ãªã„ã“ã¨ãŒæ˜ç¢ºãªå ´åˆ</td></tr></tbody></table></div><h3 id="æ¡ä»¶åˆ†å²"><a href="#æ¡ä»¶åˆ†å²" class="headerlink" title="æ¡ä»¶åˆ†å²"></a>æ¡ä»¶åˆ†å²</h3><div class="scroll"><table><thead><tr><th>æ–¹æ³•</th><th>åˆ†é¡</th><th>ä¸»ãªç”¨é€”ï¼ˆå€‹äººçš„ãªã‚¤ãƒ¡ãƒ¼ã‚¸ï¼‰</th></tr></thead><tbody><tr><td><a href="https://developer.hashicorp.com/terraform/language/expressions/conditionals">ä¸‰é …æ¼”ç®—å­</a></td><td>å¼</td><td>ãƒ»æ¡ä»¶åˆ†å²ã‚’è¡Œã„ãŸã„å ´åˆã¯åŸºæœ¬ã“ã¡ã‚‰</td></tr><tr><td><a href="https://developer.hashicorp.com/terraform/language/meta-arguments/for_each">for_each</a> ã¨ <a href="https://developer.hashicorp.com/terraform/language/expressions/for">for</a> ã‚’ä½µç”¨</td><td>-</td><td>ãƒ»forãƒ«ãƒ¼ãƒ—å†…ã®è¦ç´ ã®ç‰¹å®šæ¡ä»¶ã§ãƒªã‚½ãƒ¼ã‚¹ã‚’ä½œã‚Šåˆ†ã‘ã‚‹å ´åˆ</td></tr></tbody></table></div><h2 id="æ§‹ç¯‰ã™ã‚‹ãƒªã‚½ãƒ¼ã‚¹ï¼ˆãƒ™ãƒ¼ã‚¹ï¼‰"><a href="#æ§‹ç¯‰ã™ã‚‹ãƒªã‚½ãƒ¼ã‚¹ï¼ˆãƒ™ãƒ¼ã‚¹ï¼‰" class="headerlink" title="æ§‹ç¯‰ã™ã‚‹ãƒªã‚½ãƒ¼ã‚¹ï¼ˆãƒ™ãƒ¼ã‚¹ï¼‰"></a>æ§‹ç¯‰ã™ã‚‹ãƒªã‚½ãƒ¼ã‚¹ï¼ˆãƒ™ãƒ¼ã‚¹ï¼‰</h2><p>æœ¬è¨˜äº‹ã§æ§‹ç¯‰ã™ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã¯ã“ã¡ã‚‰ã§ã™ã€‚</p><p>AWSä¸Šã«10.10.0.0&#x2F;16 ã®VPC1ã¤ã¨ã€10.10.0.0&#x2F;24 ï½ 10.10.3.0&#x2F;24 ã§ã‚µãƒ–ãƒãƒƒãƒˆã‚’è¨ˆ4ã¤ï¼ˆpublic2ã¤ã€private2å€‹æƒ³å®šï¼‰ã‚’å„ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ä½œæˆã—ã¦ã„ãã¾ã™ã€‚</p><p>ã¾ãšã¯ãƒ™ãƒ¼ã‚¹ã¨ã—ã¦ã€ã‚·ãƒ³ãƒ—ãƒ«ã«resource blockã‚’ç¾…åˆ—ã—ãŸã‚‚ã®ã‚’è¨˜è¼‰ã—ã¦ã„ã¾ã™ã€‚<br>ï¼ˆä»¥é™ã€ã‚µãƒ–ãƒãƒƒãƒˆéƒ¨åˆ†ã®å‡¦ç†ãŒãƒ¡ã‚¤ãƒ³ã®ãŸã‚ã€VPCéƒ¨åˆ†ã®è¨˜è¿°ã¯çœç•¥ã—ã¾ã™ã€‚ï¼‰</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">resource <span class="string">&quot;aws_vpc&quot;</span> <span class="string">&quot;test-vpc&quot;</span> &#123;</span><br><span class="line">  cidr_block        = <span class="string">&quot;10.10.0.0/16&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource <span class="string">&quot;aws_subnet&quot;</span> <span class="string">&quot;public-1&quot;</span> &#123;</span><br><span class="line">  vpc_id            = aws_vpc.test-vpc.id</span><br><span class="line">  availability_zone = <span class="string">&quot;ap-northeast-1a&quot;</span></span><br><span class="line">  cidr_block        = cidrsubnet(aws_vpc.test-vpc.cidr_block, 8, 0)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource <span class="string">&quot;aws_subnet&quot;</span> <span class="string">&quot;public-2&quot;</span> &#123;</span><br><span class="line">  vpc_id            = aws_vpc.test-vpc.id</span><br><span class="line">  availability_zone = <span class="string">&quot;ap-northeast-1a&quot;</span></span><br><span class="line">  cidr_block        = cidrsubnet(aws_vpc.test-vpc.cidr_block, 8, 1)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource <span class="string">&quot;aws_subnet&quot;</span> <span class="string">&quot;private-1&quot;</span> &#123;</span><br><span class="line">  vpc_id            = aws_vpc.test-vpc.id</span><br><span class="line">  availability_zone = <span class="string">&quot;ap-northeast-1a&quot;</span></span><br><span class="line">  cidr_block        = cidrsubnet(aws_vpc.test-vpc.cidr_block, 8, 2)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource <span class="string">&quot;aws_subnet&quot;</span> <span class="string">&quot;private-2&quot;</span> &#123;</span><br><span class="line">  vpc_id            = aws_vpc.test-vpc.id</span><br><span class="line">  availability_zone = <span class="string">&quot;ap-northeast-1a&quot;</span></span><br><span class="line">  cidr_block        = cidrsubnet(aws_vpc.test-vpc.cidr_block, 8, 3)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‚è€ƒï¼š<a href="https://developer.hashicorp.com/terraform/language/functions/cidrsubnet">cidrsubnet</a></p><h2 id="ãƒ«ãƒ¼ãƒ—å‡¦ç†-count"><a href="#ãƒ«ãƒ¼ãƒ—å‡¦ç†-count" class="headerlink" title="ãƒ«ãƒ¼ãƒ—å‡¦ç†(count)"></a>ãƒ«ãƒ¼ãƒ—å‡¦ç†(count)</h2><p><code>count</code>ã‚’åˆ©ç”¨ã™ã‚‹ã¨ã€ã“ã®ã‚ˆã†ã«æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚</p><p><code>count = x</code>ã¨ã‚«ã‚¦ãƒ³ãƒˆå›æ•°ã‚’å®šç¾©ã—ã€<code>count.index</code> ã§0ã‹ã‚‰xå›ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹å¼•æ•°ã‚’æŒ‡å®šã§ãã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">resource <span class="string">&quot;aws_subnet&quot;</span> <span class="string">&quot;public&quot;</span> &#123;</span><br><span class="line">  count             = 2</span><br><span class="line">  vpc_id            = aws_vpc.test-vpc.id</span><br><span class="line">  availability_zone = <span class="string">&quot;ap-northeast-1a&quot;</span></span><br><span class="line">  cidr_block        = cidrsubnet(aws_vpc.test-vpc.cidr_block, 8, count.index)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource <span class="string">&quot;aws_subnet&quot;</span> <span class="string">&quot;private&quot;</span> &#123;</span><br><span class="line">  count             = 2</span><br><span class="line">  vpc_id            = aws_vpc.test-vpc.id</span><br><span class="line">  availability_zone = <span class="string">&quot;ap-northeast-1a&quot;</span></span><br><span class="line">  cidr_block        = cidrsubnet(aws_vpc.test-vpc.cidr_block, 8, count.index + 2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>publicã¨privateã®åŒºåˆ¥ãŒç„¡ã‘ã‚Œã°ã€<code>count = 4</code>ã¨ã—ã¦resource blockã‚’1ã¤ã§å…¨ã‚µãƒ–ãƒãƒƒãƒˆã‚’æ§‹ç¯‰å¯èƒ½ã§ã™ãŒã€å¯èª­æ€§ã‚„ä¿å®ˆæ€§ãŒè½ã¡ã‚‹ãŸã‚åˆ†ã‘ã¦ã„ã¾ã™ã€‚</p><p>ã•ã¦ã€ã“ã“ã§publicã®ã‚µãƒ–ãƒãƒƒãƒˆã‚’1ã¤å¢—ã‚„ã—ãŸããªã£ãŸå ´åˆã¯ã©ã†ã™ã‚Œã°è‰¯ã„ã§ã—ã‚‡ã†ã‹ã€‚</p><p>ç°¡å˜ãªè©±ã§ã¯ã‚ã‚Šã¾ã™ãŒã€ä»¥ä¸‹ã®ã‚ˆã†ã«<code>count</code>ã®å€¤ã‚’3ã«ä¿®æ­£ã™ã‚‹ã“ã¨ã§ã€å¢—ã‚„ã™ã“ã¨ãŒã§ãã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">resource <span class="string">&quot;aws_subnet&quot;</span> <span class="string">&quot;public&quot;</span> &#123;</span><br><span class="line">  count             = 3</span><br><span class="line">  vpc_id            = aws_vpc.test-vpc.id</span><br><span class="line">  availability_zone = <span class="string">&quot;ap-northeast-1a&quot;</span></span><br><span class="line">  cidr_block        = cidrsubnet(aws_vpc.test-vpc.cidr_block, 8, count.index)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource <span class="string">&quot;aws_subnet&quot;</span> <span class="string">&quot;private&quot;</span> &#123;</span><br><span class="line">  count             = 2</span><br><span class="line">  vpc_id            = aws_vpc.test-vpc.id</span><br><span class="line">  availability_zone = <span class="string">&quot;ap-northeast-1a&quot;</span></span><br><span class="line">  cidr_block        = cidrsubnet(aws_vpc.test-vpc.cidr_block, 8, count.index + 3)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã—ã‚Œã£ã¨ä¿®æ­£ã—ã¾ã—ãŸãŒã€privateã®æ–¹ã® <code>count.index + 2</code>ã‚‚<code>count.index + 3</code>ã¨ã—ã¦ã„ã¾ã™ã€‚</p><p>ã“ã‚Œã‚’å¿˜ã‚Œã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªCIDRãƒ–ãƒ­ãƒƒã‚¯ã®ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆã‚¨ãƒ©ãƒ¼ãŒèµ·ãã¾ã™ã€‚</p><blockquote><p>Error: creating EC2 Subnet: InvalidSubnet.Conflict: The CIDR â€˜10.10.2.0&#x2F;24â€™ conflicts with another subnet </p></blockquote><p>countã®ä½¿ã„ã¥ã‚‰ã„ã¨ã“ã‚ã¯ä¸»ã«ã“ã“ã ã¨æ€ã£ã¦ã„ã¾ã™ã€‚æ•°ã‚’å¢—æ¸›ã•ã›ãŸã„ã¨ãã«<code>count.index</code>ã®å€¤ã®å¤‰å‹•ãŒã©ã“ã¾ã§å½±éŸ¿ã™ã‚‹ã‹ã€å¤§è¦æ¨¡ã‚„è¤‡é›‘ãªãƒªã‚½ãƒ¼ã‚¹ã§ã¯æŠŠæ¡ãŒé›£ã—ãã€ä¿å®ˆæ€§ãŒä½ä¸‹ã—ã¾ã™ã€‚</p><p>ã¾ãŸã€<code>index</code>ã¨ã‚ã‚‹ã‚ˆã†ã«ã€<code>count</code>ã‚’åˆ©ç”¨ã—ã¦æ§‹ç¯‰ã—ãŸãƒªã‚½ãƒ¼ã‚¹ã¯é…åˆ—ã¨ã—ã¦ç®¡ç†ã•ã‚Œã¾ã™ã€‚</p><p>tfstateã‚’è¦—ã„ã¦ã¿ã‚‹ã¨ã€<code>index_key</code>ã¨ã„ã†ã‚­ãƒ¼ã®å€¤ãŒ0ã‚„1ãªã©ã®æ•°å€¤ã§å­˜åœ¨ã—ã¾ã™ã€‚</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;mode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;managed&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;aws_subnet&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;public&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;provider&quot;</span><span class="punctuation">:</span> <span class="string">&quot;provider[\&quot;registry.terraform.io/hashicorp/aws\&quot;]&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;instances&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;index_key&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">ï¼ˆå¾Œç•¥ï¼‰</span><br></pre></td></tr></table></figure><p>ã“ã‚Œã¯ã€<code>index</code>ã®é€”ä¸­ï¼ˆâ†‘ã®publicã‚µãƒ–ãƒãƒƒãƒˆã§è¨€ã†ã¨<code>count.index</code>ãŒ1ã®ã‚µãƒ–ãƒãƒƒãƒˆï¼‰ãŒå‰Šé™¤ã•ã‚ŒãŸå ´åˆã«ã€ãã®å¾Œã®ãƒªã‚½ãƒ¼ã‚¹ãŒå…¨ã¦ä½œã‚Šç›´ã—ã«ãªã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚</p><p>ã“ã“ã‚‚<code>count</code>ã®ä¸ä¾¿ãªã¨ã“ã‚ã§ã€å°†æ¥çš„ã«æ•°ãŒå¢—æ¸›ã™ã‚‹ã‚ˆã†ãªãƒªã‚½ãƒ¼ã‚¹ã‚’æ§‹ç¯‰ã™ã‚‹éš›ã¯å‘ã„ã¦ã„ã¾ã›ã‚“ã€‚</p><h2 id="ãƒ«ãƒ¼ãƒ—å‡¦ç†-for-each"><a href="#ãƒ«ãƒ¼ãƒ—å‡¦ç†-for-each" class="headerlink" title="ãƒ«ãƒ¼ãƒ—å‡¦ç†(for_each)"></a>ãƒ«ãƒ¼ãƒ—å‡¦ç†(for_each)</h2><p><code>count</code>ã®ä¸ä¾¿ãªã¨ã“ã‚ã‚’è§£æ±ºã—ãŸã®ãŒ<code>for_each</code>ã ã¨æ€ã„ã¾ã™ã€‚</p><p><code>for_each</code>ã‚’ä½¿ã†ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚</p><p><a href="https://developer.hashicorp.com/terraform/language/expressions/type-constraints#set">set</a>ã‚„<a href="https://developer.hashicorp.com/terraform/language/expressions/type-constraints#map">map</a>ã‚’å®šç¾©ã—ã¦ã€ãã®è¦ç´ ã®æ•°ã ã‘ãƒªã‚½ãƒ¼ã‚¹ã‚’æ§‹ç¯‰ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>setã‚„mapã®å€¤ã¯<code>each.key</code>ï¼ˆsetã®å€¤ã‚„mapã®keyï¼‰ã‚„<code>each.value</code>ï¼ˆsetã®å€¤ã‚„mapã®valueï¼‰ã‚’ä½¿ã£ã¦å„å¤‰æ•°ã«å®šç¾©ã§ãã¾ã™ã€‚ï¼ˆï¼setã‚’ä½¿ã†å ´åˆã¯<code>each.key</code>ã¨<code>each.value</code>ã¯åŒã˜ã«ãªã‚Šã¾ã™ã€‚ï¼‰</p><p>mapãŒå¤šé‡æ§‹é€ ã«ãªã£ã¦ã„ã‚‹å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«<code>each.value.xxx</code>ã¨æ›¸ãã“ã¨ã§å¤‰æ•°ã«å®šç¾©ã§ãã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">resource <span class="string">&quot;aws_subnet&quot;</span> <span class="string">&quot;subnet&quot;</span> &#123;</span><br><span class="line">  for_each = tomap(&#123;</span><br><span class="line">    public-1a = &#123;</span><br><span class="line">      az     = <span class="string">&quot;ap-northeast-1a&quot;</span></span><br><span class="line">      netnum = 0</span><br><span class="line">    &#125;,</span><br><span class="line">    public-1c = &#123;</span><br><span class="line">      az     = <span class="string">&quot;ap-northeast-1c&quot;</span></span><br><span class="line">      netnum = 1</span><br><span class="line">    &#125;,</span><br><span class="line">    private-1a = &#123;</span><br><span class="line">      az     = <span class="string">&quot;ap-northeast-1a&quot;</span></span><br><span class="line">      netnum = 2</span><br><span class="line">    &#125;,</span><br><span class="line">    private-1c = &#123;</span><br><span class="line">      az     = <span class="string">&quot;ap-northeast-1c&quot;</span></span><br><span class="line">      netnum = 3</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">  vpc_id            = aws_vpc.test-vpc.id</span><br><span class="line">  availability_zone = each.value.az</span><br><span class="line">  cidr_block        = cidrsubnet(aws_vpc.test-vpc.cidr_block, 8, each.value.netnum)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯èª­æ€§ã‚‚æ¯”è¼ƒçš„ä¿ãŸã‚ŒãŸã¾ã¾ã€resource blockã‚’1ã¤ã§æ›¸ãã“ã¨ãŒã§ãã¾ã—ãŸï¼</p><p>ã‚‚ã¡ã‚ã‚“ã€publicã¨privateã§resource blockã‚’åˆ†ã‘ã¦ã‚‚è‰¯ã„ã§ã™ã€‚<code>count</code>ã¨é•ã„ã€ãƒªã‚½ãƒ¼ã‚¹ã‚’å¢—æ¸›ã•ã›ãŸã„å ´åˆã¯mapã«è¦ç´ ã‚’è¿½åŠ ã™ã‚‹ã ã‘ã§è‰¯ãã€ã‹ã¤keyã§ç®¡ç†ã•ã‚Œã¦ã„ã‚‹ã®ã§æ—¢å­˜ã®ãƒªã‚½ãƒ¼ã‚¹ã«å½±éŸ¿ãŒåŠã³ã¾ã›ã‚“ã€‚</p><p>ã¾ãŸ<code>for_each</code>ã¯è¤‡æ•°ã®å±æ€§ã‚’ãƒ«ãƒ¼ãƒ—ã§å›ã›ã¦ä¾¿åˆ©ãªã®ã§ã€<code>az</code>ã‚‚ãƒ«ãƒ¼ãƒ—ã«å«ã‚ã¦ãƒãƒ«ãƒAZæ§‹æˆã‚‚å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚</p><h2 id="ãƒ«ãƒ¼ãƒ—å‡¦ç†-for"><a href="#ãƒ«ãƒ¼ãƒ—å‡¦ç†-for" class="headerlink" title="ãƒ«ãƒ¼ãƒ—å‡¦ç†(for)"></a>ãƒ«ãƒ¼ãƒ—å‡¦ç†(for)</h2><p>å¾Œè¿°ã™ã‚‹<code>dynamic block</code>ã‚‚åŒæ§˜ã§ã™ãŒã€<code>count</code>ã‚„<code>for_each</code>ã¨é•ã£ã¦<code>for</code>ã¯ã€Œå¼ã€ã§ã™ã€‚èª¤è§£ã‚’æã‚Œãšç°¡å˜ã«è¨€ã†ã¨ã€ãã‚‚ãã‚‚ãƒªã‚½ãƒ¼ã‚¹ã‚’è¤‡æ•°ä½œã‚‹ãŸã‚ã®ã‚‚ã®ã§ã¯ãªã„ã¨ã„ã†ã“ã¨ã§ã™ã€‚</p><p>å…·ä½“çš„ã«ã¯ã€<code>for</code>ã¯<a href="https://developer.hashicorp.com/terraform/language/expressions/type-constraints#list">list</a>, <a href="https://developer.hashicorp.com/terraform/language/expressions/type-constraints#set">set</a>, <a href="https://developer.hashicorp.com/terraform/language/expressions/type-constraints#tuple">tuple</a>, <a href="https://developer.hashicorp.com/terraform/language/expressions/type-constraints#map">map</a>, <a href="https://developer.hashicorp.com/terraform/language/expressions/type-constraints#object">object</a>ã‚’å…¥åŠ›ã¨ã—ã¦ã€<a href="https://developer.hashicorp.com/terraform/language/expressions/type-constraints#tuple">tuple</a>ã‚‚ã—ãã¯<a href="https://developer.hashicorp.com/terraform/language/expressions/type-constraints#object">object</a>ã‚’å‡ºåŠ›ã™ã‚‹ã‚‚ã®ã§ã™ã€‚ãã®ãŸã‚ä½¿ã„æ–¹ã¯å¤šæ§˜ã§ã™ãŒã€å€‹äººçš„ã«å¬‰ã—ã„ä½¿ã„æ–¹ã‚’2ã¤è¨˜è¼‰ã—ã¾ã™ã€‚</p><h3 id="ä½¿ã„æ–¹â‘ -ç‰¹å®šæ¡ä»¶ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã—ã¦ãƒªã‚½ãƒ¼ã‚¹ã‚’æ§‹ç¯‰ã™ã‚‹"><a href="#ä½¿ã„æ–¹â‘ -ç‰¹å®šæ¡ä»¶ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã—ã¦ãƒªã‚½ãƒ¼ã‚¹ã‚’æ§‹ç¯‰ã™ã‚‹" class="headerlink" title="ä½¿ã„æ–¹â‘  ç‰¹å®šæ¡ä»¶ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã—ã¦ãƒªã‚½ãƒ¼ã‚¹ã‚’æ§‹ç¯‰ã™ã‚‹"></a>ä½¿ã„æ–¹â‘  ç‰¹å®šæ¡ä»¶ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã—ã¦ãƒªã‚½ãƒ¼ã‚¹ã‚’æ§‹ç¯‰ã™ã‚‹</h3><p>æ§‹ç¯‰ã™ã‚‹ãƒªã‚½ãƒ¼ã‚¹ãŒå¢—ãˆã¦ãã‚‹ã¨ã€tfãƒ•ã‚¡ã‚¤ãƒ«ã®æ•°ã‚„ã‚³ãƒ¼ãƒ‰ã®è¡Œæ•°ãŒå¤šããªã£ã¦ç®¡ç†ãŒå¤§å¤‰ã§ã—ã‚‡ã†ã€‚</p><p>ãã‚“ãªæ™‚ã¯<code>local values</code>ã«å„è¨­å®šå€¤ã‚’ä¸€å…ƒçš„ã«è¨˜è¼‰ã—ã¦ãŠãã¨ç®¡ç†ã—ã‚„ã™ããªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><p>ä»¥ä¸‹ã®ä¾‹ã¯ç„¡ç†ã‚„ã‚Š<code>for</code>ã‚’ä½¿ã„ã«è¡Œã£ã¦ã‚‹ã®ã§è‰¯ã„ä¾‹ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€<code>local values</code>ã«æ¡ä»¶ã¨ãªã‚‹å€¤ã‚’è¨­å®šã—ã¦ãŠãã€resource blockã§ã¯ãã®æ¡ä»¶ã«ã‚ˆã£ã¦æ§‹ç¯‰ã‚„è¨­å®šã‚’ã™ã‚‹ã‹ã‚’æŒ¯ã‚Šåˆ†ã‘ã‚‹ã€ã¨ã„ã†ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">locals &#123;</span><br><span class="line">  subnet = &#123;</span><br><span class="line">    public-1a = &#123;</span><br><span class="line">      public = <span class="literal">true</span></span><br><span class="line">      az     = <span class="string">&quot;ap-northeast-1a&quot;</span></span><br><span class="line">      netnum = 0</span><br><span class="line">    &#125;,</span><br><span class="line">    public-1c = &#123;</span><br><span class="line">      public = <span class="literal">true</span></span><br><span class="line">      az     = <span class="string">&quot;ap-northeast-1c&quot;</span></span><br><span class="line">      netnum = 1</span><br><span class="line">    &#125;,</span><br><span class="line">    private-1a = &#123;</span><br><span class="line">      public = <span class="literal">false</span></span><br><span class="line">      az     = <span class="string">&quot;ap-northeast-1a&quot;</span></span><br><span class="line">      netnum = 3</span><br><span class="line">    &#125;,</span><br><span class="line">    private-1c = &#123;</span><br><span class="line">      public = <span class="literal">false</span></span><br><span class="line">      az     = <span class="string">&quot;ap-northeast-1c&quot;</span></span><br><span class="line">      netnum = 4</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource <span class="string">&quot;aws_subnet&quot;</span> <span class="string">&quot;public&quot;</span> &#123;</span><br><span class="line">  for_each          = &#123; <span class="keyword">for</span> key, value <span class="keyword">in</span> local.subnet : key =&gt; value <span class="keyword">if</span> value.public == <span class="literal">true</span> &#125;</span><br><span class="line">  vpc_id            = aws_vpc.test-vpc.id</span><br><span class="line">  availability_zone = each.value.az</span><br><span class="line">  cidr_block        = cidrsubnet(aws_vpc.test-vpc.cidr_block, 8, each.value.netnum)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource <span class="string">&quot;aws_subnet&quot;</span> <span class="string">&quot;private&quot;</span> &#123;</span><br><span class="line">  for_each          = &#123; <span class="keyword">for</span> key, value <span class="keyword">in</span> local.subnet : key =&gt; value <span class="keyword">if</span> value.public == <span class="literal">false</span> &#125;</span><br><span class="line">  vpc_id            = aws_vpc.test-vpc.id</span><br><span class="line">  availability_zone = each.value.az</span><br><span class="line">  cidr_block        = cidrsubnet(aws_vpc.test-vpc.cidr_block, 8, each.value.netnum)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‚è€ƒï¼š<a href="https://developer.hashicorp.com/terraform/language/values/locals">Local Values</a></p><h3 id="ä½¿ã„æ–¹â‘¡-ã‚ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã®ç‰¹å®šã®è¨­å®šå€¤ä¸€è¦§ã‚’å–å¾—ã™ã‚‹"><a href="#ä½¿ã„æ–¹â‘¡-ã‚ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã®ç‰¹å®šã®è¨­å®šå€¤ä¸€è¦§ã‚’å–å¾—ã™ã‚‹" class="headerlink" title="ä½¿ã„æ–¹â‘¡ ã‚ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã®ç‰¹å®šã®è¨­å®šå€¤ä¸€è¦§ã‚’å–å¾—ã™ã‚‹"></a>ä½¿ã„æ–¹â‘¡ ã‚ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã®ç‰¹å®šã®è¨­å®šå€¤ä¸€è¦§ã‚’å–å¾—ã™ã‚‹</h3><p>ä¾‹ãˆã°privateã‚µãƒ–ãƒãƒƒãƒˆã‹ã‚‰ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã¨ã—ãŸã„ãƒªã‚½ãƒ¼ã‚¹ï¼ˆEC2ãªã©ï¼‰ã‚’æ§‹ç¯‰ã—ã€ãã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ã‚’æ§‹ç¯‰ã™ã‚‹ã‚ˆã†ãªå ´åˆã‚’è€ƒãˆã¾ã™ã€‚</p><p>ã‚µãƒ–ãƒãƒƒãƒˆã¯å°†æ¥çš„ã«å¢—æ¸›ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã€ãã‚Œã‚‰ã®CIDRãƒ–ãƒ­ãƒƒã‚¯ã‚’åæ˜ ã•ã›ã¦é©åˆ‡ãªã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰ãƒ«ãƒ¼ãƒ«ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ä»¥ä¸‹ã®<code>local.allow_cidr_block</code>ã®ã‚ˆã†ã«è¨˜è¼‰ã™ã‚‹ã“ã¨ã§ã€publicã‚µãƒ–ãƒãƒƒãƒˆã¨privateã‚µãƒ–ãƒãƒƒãƒˆã®CIDRãƒ–ãƒ­ãƒƒã‚¯ä¸€è¦§ãŒç°¡å˜ã«å–å¾—ã§ãã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">locals &#123;</span><br><span class="line">  subnet = &#123;</span><br><span class="line">    public = &#123;</span><br><span class="line">      public-1a = &#123;</span><br><span class="line">        az     = <span class="string">&quot;ap-northeast-1a&quot;</span></span><br><span class="line">        netnum = 0</span><br><span class="line">      &#125;,</span><br><span class="line">      public-1c = &#123;</span><br><span class="line">        az     = <span class="string">&quot;ap-northeast-1c&quot;</span></span><br><span class="line">        netnum = 1</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    private = &#123;</span><br><span class="line">      private-1a = &#123;</span><br><span class="line">        az     = <span class="string">&quot;ap-northeast-1a&quot;</span></span><br><span class="line">        netnum = 2</span><br><span class="line">      &#125;,</span><br><span class="line">      private-1c = &#123;</span><br><span class="line">        az     = <span class="string">&quot;ap-northeast-1c&quot;</span></span><br><span class="line">        netnum = 3</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">  allow_cidr_block = &#123;</span><br><span class="line">    public = [</span><br><span class="line">      <span class="keyword">for</span> k, v <span class="keyword">in</span> local.subnet.public :</span><br><span class="line">      aws_subnet.public[k].cidr_block</span><br><span class="line">    ]</span><br><span class="line">    private = [</span><br><span class="line">      <span class="keyword">for</span> k, v <span class="keyword">in</span> local.subnet.private :</span><br><span class="line">      aws_subnet.private[k].cidr_block</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource <span class="string">&quot;aws_subnet&quot;</span> <span class="string">&quot;public&quot;</span> &#123;</span><br><span class="line">  for_each          = local.subnet.public</span><br><span class="line">  vpc_id            = aws_vpc.test-vpc.id</span><br><span class="line">  availability_zone = each.value.az</span><br><span class="line">  cidr_block        = cidrsubnet(aws_vpc.test-vpc.cidr_block, 8, each.value.netnum)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource <span class="string">&quot;aws_subnet&quot;</span> <span class="string">&quot;private&quot;</span> &#123;</span><br><span class="line">  for_each          = local.subnet.private</span><br><span class="line">  vpc_id            = aws_vpc.test-vpc.id</span><br><span class="line">  availability_zone = each.value.az</span><br><span class="line">  cidr_block        = cidrsubnet(aws_vpc.test-vpc.cidr_block, 8, each.value.netnum)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource <span class="string">&quot;aws_security_group&quot;</span> <span class="string">&quot;private_resource&quot;</span> &#123;</span><br><span class="line">  vpc_id = aws_vpc.test-vpc.id</span><br><span class="line">  ingress &#123;</span><br><span class="line">    from_port   = 443</span><br><span class="line">    to_port     = 443</span><br><span class="line">    protocol    = <span class="string">&quot;tcp&quot;</span></span><br><span class="line">    cidr_blocks = local.allow_cidr_block.private</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ãƒ«ãƒ¼ãƒ—å‡¦ç†-dynamic-block"><a href="#ãƒ«ãƒ¼ãƒ—å‡¦ç†-dynamic-block" class="headerlink" title="ãƒ«ãƒ¼ãƒ—å‡¦ç†(dynamic block)"></a>ãƒ«ãƒ¼ãƒ—å‡¦ç†(dynamic block)</h2><p><code>count</code>ã‚„<code>for_each</code>ãŒresource blockã‚’è¤‡æ•°ä½œæˆã™ã‚‹ã¨ãã«åˆ©ç”¨ã—ãŸã®ã«å¯¾ã—ã€<code>dynamic block</code>ã¯resource blockå†…ã®ãƒ–ãƒ­ãƒƒã‚¯ã‚’è¤‡è£½ã™ã‚‹ã¨ãã«åˆ©ç”¨ã§ãã¾ã™ã€‚</p><p>ä¾‹ãˆã°ã€<code>for</code>ã®ä½¿ã„æ–¹â‘¡ã§è¿°ã¹ãŸã‚ˆã†ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ã‚’æ§‹ç¯‰ã™ã‚‹å ´åˆã§ã€publicã¨privateä¸¡æ–¹ã®ã‚µãƒ–ãƒãƒƒãƒˆã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ä½œã‚ŠãŸã„ã¨ã—ã¾ã™ã€‚</p><p>ã“ã®å ´åˆã¯ã€<code>ingress</code>ã®ãƒ–ãƒ­ãƒƒã‚¯ã‚’è¤‡è£½ã™ã‚‹ã¨ç°¡å˜ã«æ§‹ç¯‰ã§ãã‚‹ãŸã‚ã€ä»¥ä¸‹ã®ã‚ˆã†ã«<code>dynamic block</code>ãŒåˆ©ç”¨ã—ã¦æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">locals &#123;</span><br><span class="line">  subnet = &#123;</span><br><span class="line">    public = &#123;</span><br><span class="line">      public-1a = &#123;</span><br><span class="line">        az     = <span class="string">&quot;ap-northeast-1a&quot;</span></span><br><span class="line">        netnum = 0</span><br><span class="line">      &#125;,</span><br><span class="line">      public-1c = &#123;</span><br><span class="line">        az     = <span class="string">&quot;ap-northeast-1c&quot;</span></span><br><span class="line">        netnum = 1</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    private = &#123;</span><br><span class="line">      private-1a = &#123;</span><br><span class="line">        az     = <span class="string">&quot;ap-northeast-1a&quot;</span></span><br><span class="line">        netnum = 2</span><br><span class="line">      &#125;,</span><br><span class="line">      private-1c = &#123;</span><br><span class="line">        az     = <span class="string">&quot;ap-northeast-1c&quot;</span></span><br><span class="line">        netnum = 3</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">  allow_cidr_block = &#123;</span><br><span class="line">    public = [</span><br><span class="line">      <span class="keyword">for</span> k, v <span class="keyword">in</span> local.subnet.public :</span><br><span class="line">      aws_subnet.public[k].cidr_block</span><br><span class="line">    ]</span><br><span class="line">    private = [</span><br><span class="line">      <span class="keyword">for</span> k, v <span class="keyword">in</span> local.subnet.private :</span><br><span class="line">      aws_subnet.private[k].cidr_block</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource <span class="string">&quot;aws_subnet&quot;</span> <span class="string">&quot;public&quot;</span> &#123;</span><br><span class="line">  for_each          = local.subnet.public</span><br><span class="line">  vpc_id            = aws_vpc.test-vpc.id</span><br><span class="line">  availability_zone = each.value.az</span><br><span class="line">  cidr_block        = cidrsubnet(aws_vpc.test-vpc.cidr_block, 8, each.value.netnum)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource <span class="string">&quot;aws_subnet&quot;</span> <span class="string">&quot;private&quot;</span> &#123;</span><br><span class="line">  for_each          = local.subnet.private</span><br><span class="line">  vpc_id            = aws_vpc.test-vpc.id</span><br><span class="line">  availability_zone = each.value.az</span><br><span class="line">  cidr_block        = cidrsubnet(aws_vpc.test-vpc.cidr_block, 8, each.value.netnum)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource <span class="string">&quot;aws_security_group&quot;</span> <span class="string">&quot;public_resource&quot;</span> &#123;</span><br><span class="line">  vpc_id = aws_vpc.test-vpc.id</span><br><span class="line">  dynamic <span class="string">&quot;ingress&quot;</span> &#123;</span><br><span class="line">    for_each = local.allow_cidr_block</span><br><span class="line">    content &#123;</span><br><span class="line">      from_port   = 443</span><br><span class="line">      to_port     = 443</span><br><span class="line">      protocol    = <span class="string">&quot;tcp&quot;</span></span><br><span class="line">      cidr_blocks = ingress.value</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ãŸã ã—ã€<code>dynamic block</code>ã¯å†’é ­ã®èª¬æ˜ã§ã‚‚è¿°ã¹ãŸé€šã‚Šã€Œresource blockå†…ã®ãƒ–ãƒ­ãƒƒã‚¯ã€ã‚’è¤‡è£½ã™ã‚‹ã‚‚ã®ã§ã€å˜ç´”ãªkey : value ã®å½¢ã§å®šç¾©ã™ã‚‹å¤‰æ•°ã§ã¯åˆ©ç”¨ã§ããªã‹ã£ãŸã‚Šã¨ã€ä½¿ã„æ–¹ãŒé™å®šçš„ã§ã™ã€‚ï¼ˆæœ¬è¨˜äº‹ã§ã¯ä¸»ã«ã‚µãƒ–ãƒãƒƒãƒˆã‚’è¤‡è£½ã—ã¦ãã¾ã—ãŸãŒã€ã‚µãƒ–ãƒãƒƒãƒˆã®è¤‡è£½ã«dynamic blockã¯ä½¿ãˆã¾ã›ã‚“ã€‚ï¼‰</p><p>ã‚‚ã†å°‘ã—ã ã‘<code>dynamic block</code>ã®ä½¿ã„é“ã‚’è€ƒãˆã¾ã™ã€‚</p><p>å®Ÿè·µã§ã¯ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ã¯1å€‹ã¨ã„ã†ã“ã¨ã¯åŸºæœ¬ã‚ã‚Šãˆãšã€æ§˜ã€…ãªãƒªã‚½ãƒ¼ã‚¹ç”¨ã«è‰²ã€…ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ã‚’æ§‹ç¯‰ã™ã‚‹ã“ã¨ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚</p><p>ã¾ãŸã€ãã‚Œãã‚Œã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ã«ã¯ãƒ«ãƒ¼ãƒ«ã¯ã„ãã¤ã‹å­˜åœ¨ã—ã€CIDRãƒ–ãƒ­ãƒƒã‚¯ã§ãªãã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ãŒã‚½ãƒ¼ã‚¹ã«ãªã£ãŸã‚Šã€ãƒãƒ¼ãƒˆã‚„ãƒ—ãƒ­ãƒˆã‚³ãƒ«ãŒç•°ãªã£ã¦ã„ãŸã‚Šã‚‚ã™ã‚‹ã§ã—ã‚‡ã†ã€‚ãã†ãªã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«å…¨ã¦ã®è¨­å®šå€¤ã‚’<code>local values</code>ã«mapã¨ã—ã¦ã¾ã¨ã‚ã¦ãŠãã®ãŒè‰¯ã„ã§ã—ã‚‡ã†ã€‚ï¼ˆé•·ããªã‚‹ã®ã§ã‚µãƒ–ãƒãƒƒãƒˆéƒ¨åˆ†ã®è¨˜è¿°ã‚‚çœç•¥ã—ã¾ã—ãŸã€‚ï¼‰</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">locals &#123;</span><br><span class="line">  subnet = &#123;</span><br><span class="line">    public = &#123;</span><br><span class="line">      public-1a = &#123;</span><br><span class="line">        az     = <span class="string">&quot;ap-northeast-1a&quot;</span></span><br><span class="line">        netnum = 0</span><br><span class="line">      &#125;,</span><br><span class="line">      public-1c = &#123;</span><br><span class="line">        az     = <span class="string">&quot;ap-northeast-1c&quot;</span></span><br><span class="line">        netnum = 1</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    private = &#123;</span><br><span class="line">      private-1a = &#123;</span><br><span class="line">        az     = <span class="string">&quot;ap-northeast-1a&quot;</span></span><br><span class="line">        netnum = 2</span><br><span class="line">      &#125;,</span><br><span class="line">      private-1c = &#123;</span><br><span class="line">        az     = <span class="string">&quot;ap-northeast-1c&quot;</span></span><br><span class="line">        netnum = 3</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">  allow_cidr_block = &#123;</span><br><span class="line">    public = [</span><br><span class="line">      <span class="keyword">for</span> k, v <span class="keyword">in</span> local.subnet.public :</span><br><span class="line">      aws_subnet.public[k].cidr_block</span><br><span class="line">    ]</span><br><span class="line">    private = [</span><br><span class="line">      <span class="keyword">for</span> k, v <span class="keyword">in</span> local.subnet.private :</span><br><span class="line">      aws_subnet.private[k].cidr_block</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">  security_group = &#123;</span><br><span class="line">    ec2_a = &#123;</span><br><span class="line">      ingress_1 = &#123;</span><br><span class="line">        from_port       = 22</span><br><span class="line">        to_port         = 22</span><br><span class="line">        protocol        = <span class="string">&quot;tcp&quot;</span></span><br><span class="line">        cidr_blocks     = local.allow_cidr_block.private</span><br><span class="line">        security_groups = null</span><br><span class="line">      &#125;,</span><br><span class="line">      ingress_2 = &#123;</span><br><span class="line">        from_port       = 80</span><br><span class="line">        to_port         = 80</span><br><span class="line">        protocol        = <span class="string">&quot;tcp&quot;</span></span><br><span class="line">        cidr_blocks     = null</span><br><span class="line">        security_groups = [aws_security_group.alb.id]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ec2_b = &#123;</span><br><span class="line">      ingress_1 = &#123;</span><br><span class="line">        from_port       = 22</span><br><span class="line">        to_port         = 22</span><br><span class="line">        protocol        = <span class="string">&quot;tcp&quot;</span></span><br><span class="line">        cidr_blocks     = local.allow_cidr_block.private</span><br><span class="line">        security_groups = null</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource <span class="string">&quot;aws_security_group&quot;</span> <span class="string">&quot;ec2_a&quot;</span> &#123;</span><br><span class="line">  vpc_id = aws_vpc.test-vpc.id</span><br><span class="line">  dynamic <span class="string">&quot;ingress&quot;</span> &#123;</span><br><span class="line">    for_each = local.security_group.ec2_a</span><br><span class="line">    content &#123;</span><br><span class="line">      from_port       = ingress.value.from_port</span><br><span class="line">      to_port         = ingress.value.to_port</span><br><span class="line">      protocol        = ingress.value.protocol</span><br><span class="line">      cidr_blocks     = ingress.value.cidr_blocks != null ? ingress.value.cidr_blocks : null</span><br><span class="line">      security_groups = ingress.value.security_groups != null ? ingress.value.security_groups : null</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource <span class="string">&quot;aws_security_group&quot;</span> <span class="string">&quot;ec2_b&quot;</span> &#123;</span><br><span class="line">  vpc_id = aws_vpc.test-vpc.id</span><br><span class="line">  dynamic <span class="string">&quot;ingress&quot;</span> &#123;</span><br><span class="line">    for_each = local.security_group.ec2_b</span><br><span class="line">    content &#123;</span><br><span class="line">      from_port   = ingress.value.from_port</span><br><span class="line">      to_port     = ingress.value.to_port</span><br><span class="line">      protocol    = ingress.value.protocol</span><br><span class="line">      cidr_blocks     = ingress.value.cidr_blocks != null ? ingress.value.cidr_blocks : null</span><br><span class="line">      security_groups = ingress.value.security_groups != null ? ingress.value.security_groups : null</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€¦ãªã‚“ã¨ã‹æ›¸ã‘ã¾ã—ãŸã€‚</p><p>ã”è¦§ã®é€šã‚Š<code>cidr_blocks</code>ã¨<code>security_groups</code>ã¯ã©ã¡ã‚‰ã‹ã®ã¿è¨­å®šã™ã‚‹ãŸã‚ã€ãã‚Œã‚’å®Ÿç¾ã•ã›ã‚‹ãŸã‚ã«å¾Œè¿°ã™ã‚‹<code>ä¸‰é …æ¼”ç®—å­</code>ã‚’ç”¨ã„ãŸã‚Šã€<code>local values</code>ã«ã‚‚ã‚ã–ã‚ã–nullã¨ã—ã¦å®šç¾©ã—ã¦ã„ã¾ã™ã€‚</p><p>ã•ã¦ã€ãƒ«ãƒ¼ãƒ—å‡¦ç†ã®ç›®çš„ã§ã‚ã‚‹<code>ã‚³ãƒ¼ãƒ‰ã®å†—é•·åŒ–ã‚’é˜²ãã€å¯èª­æ€§ã‚„ä¿å®ˆæ€§ã‚’ä¸Šã’ã‚‹</code>ã“ã¨ã¯ã§ããŸã§ã—ã‚‡ã†ã‹ã€‚<code>dynamic block</code>ã‚’ä½¿ã‚ãšã«ã‚·ãƒ³ãƒ—ãƒ«ã«<code>ingress</code>ã®ãƒ–ãƒ­ãƒƒã‚¯ã‚’ç¾…åˆ—ã—ã¦ã‚‚è¡Œæ•°ã¯ã‚€ã—ã‚æ¸›ã‚Šã¾ã™ã—ã€ãƒ«ãƒ¼ãƒ—ã‚„æ¡ä»¶åˆ†å²ãŒãªããªã‚‹åˆ†ã€å¯èª­æ€§ã‚„ä¿å®ˆæ€§ã‚‚ä¸ŠãŒã‚Šãã†ã§ã™ã€‚</p><p>ã¡ãªã¿ã«<a href="https://developer.hashicorp.com/terraform/language/expressions/dynamic-blocks#best-practices-for-dynamic-blocks">å…¬å¼ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹</a>ã§ã‚‚<code>dynamic block</code>ã®ä½¿ã„éãã¯æ¨å¥¨ã•ã‚Œã¦ãŠã‚‰ãšã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å†åˆ©ç”¨ã‚’ç›®çš„ã¨ã—ã¦ã‚·ãƒ³ãƒ—ãƒ«ãªæ§‹æˆã«ã—ãŸã„ã‚ˆã†ãªå ´åˆã«ã€åˆ©ç”¨ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¦ã„ã¾ã™ã€‚</p><p>ã“ã®ãŸã‚ã€<code>dynamic block</code>ã¯å¯èª­æ€§ã‚„ä¿å®ˆæ€§ã‚’è€ƒãˆã¦æ…é‡ã«åˆ©ç”¨ã™ã‚‹ã®ãŒè‰¯ã„ã¨æ€ã‚ã‚Œã¾ã™ã€‚</p><h2 id="æ¡ä»¶åˆ†å²-ä¸‰é …æ¼”ç®—å­"><a href="#æ¡ä»¶åˆ†å²-ä¸‰é …æ¼”ç®—å­" class="headerlink" title="æ¡ä»¶åˆ†å²(ä¸‰é …æ¼”ç®—å­)"></a>æ¡ä»¶åˆ†å²(ä¸‰é …æ¼”ç®—å­)</h2><p>Terraformã§ã¯æ¡ä»¶åˆ†å²ã‚’è¡Œã„ãŸã„å ´åˆã¯åŸºæœ¬1é€šã‚Šã§ã€ã“ã®ä¸‰é …æ¼”ç®—å­ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚</p><p>æ§‹æ–‡ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã€<code>condition</code>ã«è¨˜è¼‰ã—ãŸæ¡ä»¶ãŒtrueãªã‚‰<code>true_val</code>ãŒã€falseãªã‚‰<code>false_val</code>ãŒæ¡ç”¨ã•ã‚Œã¾ã™ã€‚</p><blockquote><p>condition ? true_val : false_val</p></blockquote><p>å‚è€ƒï¼š<a href="https://developer.hashicorp.com/terraform/language/expressions/conditionals#syntax">Conditional Expressions</a></p><p>ç°¡å˜ãªä¾‹ã§ã¯ã€ç’°å¢ƒã”ã¨ã«ãƒªã‚½ãƒ¼ã‚¹ã®æ•°ã‚’å¤‰ãˆã‚‹ã‚ˆã†ãªå ´åˆãŒã‚ã‚Šã¾ã™ã€‚</p><p>ä¾‹ãˆã°æœ¬ç•ªç’°å¢ƒã¯å†—é•·åŒ–ã—ãŸã„ã®ã§ãƒãƒ«ãƒAZã§æ§‹ç¯‰ã™ã‚‹ãŒã€é–‹ç™º&#x2F;æ¤œè¨¼ç’°å¢ƒã¯ã‚·ãƒ³ã‚°ãƒ«AZã§è‰¯ã„å ´åˆãªã©ã«ã€ç’°å¢ƒåã”ã¨ã«countã®å€¤ã‚’å¤‰ãˆã‚‹ã‚ˆã†ãªæ“ä½œãŒå¯èƒ½ã§ã™ã€‚<br>ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãã“ã¨ã§ã€ç’°å¢ƒåï¼ˆ<code>local.env</code>ï¼‰ã®å€¤ã‚’å¤‰ãˆã‚‹ã ã‘ã§æœ¬ç•ªç’°å¢ƒã¨é–‹ç™º&#x2F;æ¤œè¨¼ç’°å¢ƒã§ã€ãƒªã‚½ãƒ¼ã‚¹æ•°ã®åˆ‡ã‚Šæ›¿ãˆãŒã§ãã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">locals &#123;</span><br><span class="line">  <span class="built_in">env</span> = <span class="string">&quot;prod&quot;</span></span><br><span class="line">  az = [</span><br><span class="line">    <span class="string">&quot;ap-northeast-1a&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ap-northeast-1c&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ap-northeast-1d&quot;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource <span class="string">&quot;aws_subnet&quot;</span> <span class="string">&quot;public&quot;</span> &#123;</span><br><span class="line">  count             = local.env == <span class="string">&quot;prod&quot;</span> ? 2 : 1</span><br><span class="line">  vpc_id            = aws_vpc.test-vpc.id</span><br><span class="line">  availability_zone = local.az[count.index]</span><br><span class="line">  cidr_block        = cidrsubnet(aws_vpc.test-vpc.cidr_block, 8, count.index)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource <span class="string">&quot;aws_subnet&quot;</span> <span class="string">&quot;private&quot;</span> &#123;</span><br><span class="line">  count             = local.env == <span class="string">&quot;prod&quot;</span> ? 2 : 1</span><br><span class="line">  vpc_id            = aws_vpc.test-vpc.id</span><br><span class="line">  availability_zone = local.az[count.index]</span><br><span class="line">  cidr_block        = cidrsubnet(aws_vpc.test-vpc.cidr_block, 8, count.index + 2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ¡ä»¶åˆ†å²-for-each-ã¨-for-ã‚’ä½µç”¨"><a href="#æ¡ä»¶åˆ†å²-for-each-ã¨-for-ã‚’ä½µç”¨" class="headerlink" title="æ¡ä»¶åˆ†å²(for_each ã¨ for ã‚’ä½µç”¨)"></a>æ¡ä»¶åˆ†å²(for_each ã¨ for ã‚’ä½µç”¨)</h2><p>ã“ã¡ã‚‰ã¯ã€<code>for</code>ã®éƒ¨åˆ†ã§è¨˜è¼‰ã—ãŸã‚‚ã®ã®å†æ²ã¨ãªã‚Šã¾ã™ã€‚</p><p>Terraformã«ä¸€èˆ¬çš„ãªãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã§ã„ã†ifæ–‡ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€<code>for</code>æ–‡ã®ä¸­ã®ifã«ã‚ˆã£ã¦ãƒ«ãƒ¼ãƒ—å‡¦ç†ã®ä¸­ã§æ¡ä»¶åˆ†å²ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>ä½¿ã„æ–¹ã¯<a href="#%E4%BD%BF%E3%81%84%E6%96%B9%E2%91%A0-%E7%89%B9%E5%AE%9A%E6%9D%A1%E4%BB%B6%E3%81%A7%E3%83%95%E3%82%A3%E3%83%AB%E3%82%BF%E3%83%AA%E3%83%B3%E3%82%B0%E3%81%97%E3%81%A6%E3%83%AA%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%92%E6%A7%8B%E7%AF%89%E3%81%99%E3%82%8B">forï¼ˆä½¿ã„æ–¹â‘  ç‰¹å®šæ¡ä»¶ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã—ã¦ãƒªã‚½ãƒ¼ã‚¹ã‚’æ§‹ç¯‰ã™ã‚‹ï¼‰</a>ã‚’ã”å‚ç…§ãã ã•ã„ã€‚</p><h1 id="æœ€å¾Œã«"><a href="#æœ€å¾Œã«" class="headerlink" title="æœ€å¾Œã«"></a>æœ€å¾Œã«</h1><p>Terraformã«ãŠã‘ã‚‹ãƒ«ãƒ¼ãƒ—å‡¦ç†ã¨æ¡ä»¶åˆ†å²ã‚’ã¾ã¨ã‚ã¾ã—ãŸã€‚</p><p>è‡ªåˆ†ã‚‚ä¾‹å¤–ã§ã¯ãªãã€åˆå¿ƒè€…ã¯ã¾ãšTerraformã®æ§‹æ–‡ã«æ…£ã‚Œã‚‹ã¨ã“ã‚ãŒé›£ã—ã„ã‹ã¨æ€ã„ã¾ã™ã€‚</p><p>æœ¬è¨˜äº‹ãŒåŒã˜ã‚ˆã†ãªTerraformåˆå¿ƒè€…ã®ä¸€åŠ©ã¨ãªã‚Œã°å¹¸ã„ã§ã™ã€‚</p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Programming/">Programming</category>
      
      
      <category domain="https://future-architect.github.io/tags/%E5%88%9D%E5%BF%83%E8%80%85%E5%90%91%E3%81%91/">åˆå¿ƒè€…å‘ã‘</category>
      
      <category domain="https://future-architect.github.io/tags/Terraform/">Terraform</category>
      
      
      <comments>https://future-architect.github.io/articles/20240328b/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>è¨€èªå‡¦ç†å­¦ä¼š (NLP2024) å‚åŠ å ±å‘Š</title>
      <link>https://future-architect.github.io/articles/20240328a/</link>
      <guid>https://future-architect.github.io/articles/20240328a/</guid>
      <pubDate>Wed, 27 Mar 2024 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;h2 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h2&gt;&lt;p&gt;ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ€è¡“ãƒ–ãƒ­ã‚°ã§ã¯é•·ã‚‰ãã”ç„¡æ²™æ±°ã—ã¦ãŠã‚Šã¾ã™ã€‚ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æ ªå¼ä¼šç¤¾ã®ä½è—¤ã¨ç”³ã—ã¾ã™ã€‚Strategic AI</description>
          
        
      
      
      
      <content:encoded><![CDATA[<h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><p>ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ€è¡“ãƒ–ãƒ­ã‚°ã§ã¯é•·ã‚‰ãã”ç„¡æ²™æ±°ã—ã¦ãŠã‚Šã¾ã™ã€‚ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æ ªå¼ä¼šç¤¾ã®ä½è—¤ã¨ç”³ã—ã¾ã™ã€‚Strategic AI Group (SAIG) ã®ä¸€å“¡ã¨ã—ã¦æ§˜ã€…ãªå…ˆç«¯æŠ€è¡“ã®ç ”ç©¶ã‚„ç¤¾ä¼šå®Ÿè£…ã«å–ã‚Šçµ„ã‚“ã§ãŠã‚Šã¾ã™ãŒã€ã“ã®ã¨ã“ã‚ã¯ã‚‚ã£ã±ã‚‰è‡ªç„¶è¨€èªå‡¦ç† (NLP) ç•‘å‡ºèº«ã®äººãŸã¡ã«æ‰ã¾ã‚ŒãªãŒã‚‰éã”ã—ã¦ã„ã¾ã™ã€‚</p><p>2024å¹´3æœˆ11æ—¥(æœˆ)ã€œ3æœˆ15æ—¥(é‡‘)ã«ãŠã„ã¦ç¥æˆ¸å›½éš›ä¼šè­°å ´ã«ã¦é–‹å‚¬ã•ã‚Œã¾ã—ãŸ<a href="https://www.anlp.jp/nlp2024/">è¨€èªå‡¦ç†å­¦ä¼šç¬¬30å›å¹´æ¬¡å¤§ä¼š (NLP2024)</a> ã«å‚åŠ ã—ã¾ã—ãŸã€‚</p><p>å½“ç¤¾ã¯ãƒ—ãƒ©ãƒãƒŠã‚¹ãƒãƒ³ã‚µãƒ¼ã¨ã—ã¦ SAIG ã® 4 åãŒã‚ªãƒ³ã‚µã‚¤ãƒˆã§å‚åŠ ã—ã€ã‚¹ãƒãƒ³ã‚µãƒ¼ãƒ–ãƒ¼ã‚¹ã§ã®ä¼šç¤¾ç´¹ä»‹åŠã³ãƒã‚¹ã‚¿ãƒ¼ç™ºè¡¨ã‚’è¡Œã„ã¾ã—ãŸã€‚ã€Œ<a href="https://www.anlp.jp/proceedings/annual_meeting/2024/pdf_dir/P10-13.pdf">æ©Ÿå¯†æƒ…å ±æ¤œçŸ¥ã«ãŠã‘ã‚‹ç”ŸæˆAIã‚’ç”¨ã„ãŸãƒ‡ãƒ¼ã‚¿æ‹¡å¼µ</a>ã€ã¨é¡Œã—ãŸæˆ‘ã€…ã®ãƒã‚¹ã‚¿ãƒ¼ç™ºè¡¨ã«ã¤ã„ã¦ã€è©³ã—ãã¯å…ˆæ—¥ SAIG å²¸æ³¢ã•ã‚“ãŒå…¬é–‹ã—ãŸæŠ€è¡“ãƒ–ãƒ­ã‚°è¨˜äº‹ã€Œ<a href="/articles/20240326b/">è¨€èªå‡¦ç†å­¦ä¼š (NLP2024) ã§ãƒã‚¹ã‚¿ãƒ¼ç™ºè¡¨ã‚’è¡Œã„ã¾ã—ãŸ</a>ã€ã‚’ã”è¦§ãã ã•ã„ã€‚<br><img src="/images/20240328a/20240314_172101.JPG" alt="20240314_172101.JPG" width="1200" height="900" loading="lazy"></p><h2 id="è¨€èªå‡¦ç†å­¦ä¼šã¨ã¯"><a href="#è¨€èªå‡¦ç†å­¦ä¼šã¨ã¯" class="headerlink" title="è¨€èªå‡¦ç†å­¦ä¼šã¨ã¯"></a>è¨€èªå‡¦ç†å­¦ä¼šã¨ã¯</h2><p>è¨€èªå‡¦ç†å­¦ä¼šã¯ NLP åˆ†é‡ã«ãŠã‘ã‚‹å›½å†…æœ€å¤§ã®å­¦ä¼šã§ã€æ¯å¹´ 3 æœˆã«é–‹å‚¬ã•ã‚Œã¦ã„ã¾ã™ã€‚å¹´æ¬¡å¤§ä¼šã¯ä»Šå¹´ã§ã¡ã‚‡ã†ã© 30 å›ç›®ã¨ãªã‚Šã€è¨˜å¿µè¬›æ¼”ã‚‚è¡Œã‚ã‚Œã¦ã„ã¾ã—ãŸã€‚å£é ­ç™ºè¡¨ã¯ 4 ä¼šå ´ã«åˆ†ã‹ã‚Œã€ãã‚Œã¨ä¸¦è¡Œã—ã¦ 3 ä¼šå ´Ã—æ—¥ã« 3-4 äº¤ä»£ã™ã‚‹ãƒã‚¹ã‚¿ãƒ¼ç™ºè¡¨ã€æœ€çµ‚æ—¥ã«ã¯ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã¨ç››ã‚Šã ãã•ã‚“ã®å†…å®¹ã§ã™ã€‚</p><p>ä»Šå›ã®å¤§ä¼šã‚¹ãƒ­ãƒ¼ã‚¬ãƒ³ã¯ã€Œ30å¹´ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‹ã‚‰æœªæ¥ã‚’å‰µé€ ã™ã‚‹ã€ã§ã—ãŸã€‚ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¨ã‚ã‚‹é€šã‚Šã€ChatGPT ã¯ã˜ã‚ LLM ã®éš†ç››ã«ã‚ˆã£ã¦è‡ªç„¶è¨€èªå‡¦ç†ã¯ã„ã¾æœ€ã‚‚ãƒ›ãƒƒãƒˆãªåˆ†é‡ã¨ã„ã£ã¦ã‚‚éè¨€ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚å‚åŠ è€…æ•°ã¯å½“æ—¥ç™»éŒ²å«ã¾ãªã„ä¸€æ—¥ç›®æ™‚ç‚¹ã§ 2045 åã¨ã€æ˜¨å¹´ä»¥ä¸Šã®ä¼¸ã³å¹…ã‚’è¦‹ã› 2000 ã®å¤§å°ã«ä¹—ã‚Šã¾ã—ãŸã€‚åŠ ãˆã¦ç™ºè¡¨ä»¶æ•°ã€ã‚¹ãƒãƒ³ã‚µãƒ¼æ•°ã‚‚å²ä¸Šæœ€å¤šã§ã‚ã‚Šã€å‚åŠ ã—ã¦ã„ã¦éå¸¸ã«æ´»æ°—ã‚’æ„Ÿã˜ã‚‹å­¦ä¼šã§ã—ãŸã€‚</p><h2 id="ã‚¹ãƒãƒ³ã‚µãƒ¼ãƒ–ãƒ¼ã‚¹"><a href="#ã‚¹ãƒãƒ³ã‚µãƒ¼ãƒ–ãƒ¼ã‚¹" class="headerlink" title="ã‚¹ãƒãƒ³ã‚µãƒ¼ãƒ–ãƒ¼ã‚¹"></a>ã‚¹ãƒãƒ³ã‚µãƒ¼ãƒ–ãƒ¼ã‚¹</h2><p>ä¼æ¥­ãƒ–ãƒ¼ã‚¹ã‚’å‡ºå±•ã— AI æ¡ˆä»¶å®Ÿç¸¾ã®ç´¹ä»‹ã¨äººæå‹Ÿé›†ã‚’è¡Œã„ã¾ã—ãŸã€‚å½“ç¤¾ã‚’ã”å­˜ã˜ãªã‹ã£ãŸæ–¹ã€…ã«ã‚‚æ•°å¤šããƒªãƒ¼ãƒã§ãã€ç ”ç©¶ã«ã¤ã„ã¦ã®ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³ã‚‚ç››ã‚Šä¸ŠãŒã‚Šã¾ã—ãŸã€‚</p><p>ä¸»ã«å­¦ç”Ÿã®æ–¹ã¸å‘ã‘ã¦ã¯ã€ä¼šç¤¾ç´¹ä»‹ã®ãƒ‘ãƒ³ãƒ•ãƒ¬ãƒƒãƒˆã¨å…±ã«ãƒãƒ™ãƒ«ãƒ†ã‚£ã¨ã—ã¦ãƒˆãƒ¼ãƒˆãƒãƒƒã‚°ã‚’é…å¸ƒã—ã¾ã—ãŸã€‚ã‹ãªã‚Šå¤šã‚ã«æŒã£ã¦ã„ã£ãŸã¤ã‚‚ã‚Šã§ã—ãŸãŒã€ä¼šæœŸä¸­ãƒ–ãƒ¼ã‚¹ã¸æ¬¡ã€…ã«è¶³ã‚’é‹ã‚“ã§ã„ãŸã ã„ãŸãŠã‹ã’ã§ã»ã¼ã»ã¼å£²ã‚Šåˆ‡ã‚Œã¾ã—ãŸã€‚</p><img src="/images/20240328a/20240311_122953.JPG" alt="20240311_122953.JPG" width="1200" height="900" loading="lazy"><h2 id="ç™ºè¡¨ãƒ»ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ç´¹ä»‹"><a href="#ç™ºè¡¨ãƒ»ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ç´¹ä»‹" class="headerlink" title="ç™ºè¡¨ãƒ»ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ç´¹ä»‹"></a>ç™ºè¡¨ãƒ»ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ç´¹ä»‹</h2><p>ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€å‚åŠ ã—ãŸå„ãƒ¡ãƒ³ãƒãƒ¼ã”ã¨ã«å£é ­ç™ºè¡¨ãƒ»ãƒã‚¹ã‚¿ãƒ¼ç™ºè¡¨ã®ä¸­ã‹ã‚‰ã„ãã¤ã‹ç´¹ä»‹ã—ã¾ã™ã€‚</p><ul><li><strong><a href="https://www.anlp.jp/proceedings/annual_meeting/2024/pdf_dir/A1-2.pdf">[A1-2] ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã¨kNN-LMã‚’çµ„ã¿åˆã‚ã›ãŸãƒªã‚¹ãƒ†ã‚£ãƒ³ã‚°åºƒå‘Šã®ã‚¿ã‚¤ãƒˆãƒ«è‡ªå‹•ç”Ÿæˆ</a></strong><br>ãƒªã‚¹ãƒ†ã‚£ãƒ³ã‚°åºƒå‘Š (:&#x3D;ã‚°ã‚°ã£ãŸã¨ãã«ç”»é¢ã®ä¸Šã«å‡ºã¦ãã‚‹ãƒ†ã‚­ã‚¹ãƒˆåºƒå‘Š) ã®ã‚¿ã‚¤ãƒˆãƒ«ç”Ÿæˆã‚’é¡Œæã«ã€è¨€èªãƒ¢ãƒ‡ãƒ« (LM)ã‚’ãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚° (FT) ã™ã‚‹ã“ã¨ãªãçµŒæ™‚çš„ãªç¤¾ä¼šãƒˆãƒ¬ãƒ³ãƒ‰å¤‰åŒ–ã«è¿½å¾“ã•ã›ã‚‹æ–¹æ³•ã‚’æ¤œè¨ã—ã¦ã„ã¾ã™ã€‚ç­†è€…ã‚‰ã¯ã€LM ã®ä¸­é–“è¡¨ç¾ã‚’äº‹å‰ã«æ ¼ç´ã—ã¦ãŠãã“ã¨ã§ FT ãªã—ã«ãƒ‰ãƒ¡ã‚¤ãƒ³é©å¿œå¯èƒ½ãª kNN-LM ã¨ã€prompting ã‚’è¡Œã„ã‚ˆã‚ŠæŸ”è»Ÿã«ãƒˆãƒ¬ãƒ³ãƒ‰ã«è¿½å¾“ã§ãã‚‹ Instruction-Tuning æ¸ˆã® LM ã‚’çµ„ã¿åˆã‚ã›ã‚‹æ–¹æ³•ã‚’ææ¡ˆã—ã¾ã—ãŸã€‚ã•ã‚‰ã«ã€ã“ã‚Œã‚‰ã®ãƒ¢ãƒ‡ãƒ«ã‚’åˆ†å‰²ãƒ»å¤‰æ›´ã—ã¦ã‚‚æ€§èƒ½ã®åŠ£åŒ–ãŒå°ã•ã„ã“ã¨ã‚’ç¤ºã—ã€ä¾‹ãˆã°ã‚ã‚‹ LM ã§ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã—ãŸå¾Œã«ã‚ˆã‚Šé«˜æ€§èƒ½ãª LM ãŒå…¬é–‹ã•ã‚ŒãŸå ´åˆã«ã€å‰è€…ã®ä¸­é–“è¡¨ç¾ã‚’ãã®ã¾ã¾ã«å¾Œè€…ã ã‘æ›´æ–°ã—ã¦ã‚‚ã‚ˆã„ã®ã§ã¯ãªã„ã‹ã¨ç¤ºå”†ã—ã¦ã„ã¾ã™ã€‚<br>å®Ÿéš›ã®é‹ç”¨ä¸Šå®šæœŸçš„ã« FT ã‚’è¡Œã†ã“ã¨ã¯åŠ´åŠ›çš„ã«å›°é›£ãªã“ã¨ãŒå¤šãã€åˆ†å‰²ã—ã¦ä¸€éƒ¨ã ã‘ prompting ã‚’è¡Œãˆã°æ€§èƒ½ãŒä¿æŒã§ããã†ã¨ã„ã†è€ƒå¯Ÿã«æƒ¹ã‹ã‚Œã¾ã—ãŸã€‚ç™ºè¡¨ã«ãŠã‘ã‚‹é¡Œæã¯ãƒªã‚¹ãƒ†ã‚£ãƒ³ã‚°åºƒå‘Šã¨ã„ã†30å­—ç¨‹åº¦ã®ç”Ÿæˆã§ã—ãŸãŒã€ã‚ˆã‚Šé•·æ–‡ã®ç”Ÿæˆã«å¯¾ã—ã¦ã‚‚åˆ©ç”¨ã§ãã‚Œã°æ¥½ã—ãã†ã§ã™ã€‚(ä½è—¤)</li><li><strong><a href="https://www.anlp.jp/proceedings/annual_meeting/2024/pdf_dir/P8-6.pdf">[P8-6] å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«é–‹ç™ºã«ãŠã‘ã‚‹æ—¥æœ¬èª Web æ–‡æ›¸ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ‰‹æ³•ã®æ¤œè¨¼</a></strong><br>æ—¥æœ¬èªã«é©å¿œã—ãŸå¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«(LLM) ã®ãŸã‚ã«æ—¥æœ¬èªã‚³ãƒ¼ãƒ‘ã‚¹ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹ä¸€æ–¹ã§ã€ã‚³ãƒ¼ãƒ‘ã‚¹ã®å¤§éƒ¨åˆ†ã‚’å ã‚ã‚‹ Web ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ‰‹æ³•ãŒç¢ºç«‹ã•ã‚Œã¦ã„ãªã„ã“ã¨ã‹ã‚‰ã€é«˜é€Ÿã«å‡¦ç†ã§ãã‚‹ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å‡¦ç†æ–¹æ³•ã‚’è¤‡æ•°æ¤œè¨ã—ã¦ã„ã¾ã™ã€‚ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã®çµæœ N-gram LM ã® perplexity ã‚’å…ƒã«ã—ãŸåˆ†é¡å™¨ã®ç²¾åº¦ãŒæœ€ã‚‚è‰¯ã‹ã£ãŸã¨è©•ä¾¡ã§ãã‚‹ã‚‚ã®ã®ã€ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚’ã‹ã‘ã¦ã‚‚ä¸‹æµã‚¿ã‚¹ã‚¯ã®ç²¾åº¦å‘ä¸ŠãŒæœ‰æ„ã«ã¯ã¿ã‚‰ã‚Œãšã€ã¾ãŸå¼·ã™ãã‚‹ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã«ã‚ˆã£ã¦ä¸‹æµã‚¿ã‚¹ã‚¯ç²¾åº¦ã¯å¤§å¹…ã«æ‚ªåŒ–ã—ã¾ã—ãŸã€‚ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã«ã‚ˆã£ã¦ç‰¹å®šãƒˆãƒ”ãƒƒã‚¯ã‚„ç‰¹å®šãƒ‰ãƒ¡ã‚¤ãƒ³ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„â€•â€•ç«¯çš„ã«è¨€ã†ã¨æ¥½å¤©å¸‚å ´ã®å•†å“åâ€•â€•ãŒå¤§ããæ¸›å°‘ã—ã¦ã„ã‚‹ã“ã¨ã‚„ã€perplexity ãŒä½ããƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚’é€šéã—ã¦ã‚‚æ—¥æœ¬èªã¨ã—ã¦æ”¯é›¢æ»…è£‚ãªæ–‡ç« ãŒå­˜åœ¨ã™ã‚‹ã“ã¨ã‚’è¦³å¯Ÿã—ã¦ã„ã¾ã™ã€‚<br>ç›´æ„Ÿçš„ã«ä½å“è³ªã¨ã‚ã‹ã‚‹å•†å“åç­‰ã‚’é™¤å¤–ã§ãã¦ã‚‚ç²¾åº¦å‘ä¸Šã«ä¸è¶³ã¨ã„ã†ã®ã¯é›£ã—ã„ãªã¨æ„Ÿã˜ã¾ã—ãŸã€‚é€†èª¬çš„ã«ã€ä¸–ã® LLM ãŒå˜ç´”ãª N-gram å˜ä½ã® perplexity ã«ã‚ˆã‚‰ãªã„ã€Œæ–‡è„ˆã€ã‚’ç²å¾—ã—ã¦ã„ã‚‹ã“ã¨ã®å‚è¨¼ã¨ã‚‚è¨€ãˆãã†ã§ã™ã€‚(ä½è—¤)</li><li><strong><a href="https://www.anlp.jp/proceedings/annual_meeting/2024/pdf_dir/B2-4.pdf">[B2-4] å¯¾è¨³ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨ã„ãŸç¶™ç¶šäº‹å‰è¨“ç·´ã«ã‚ˆã‚‹å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«ã®ç¿»è¨³ç²¾åº¦è©•ä¾¡</a></strong><br>ã“ã®ç ”ç©¶ã§ã¯ã€å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ« (LLM) ã®ç¿»è¨³æ€§èƒ½ã‚’é«˜ã‚ã‚‹ãŸã‚ã®æ‰‹æ³•ã¨ã—ã¦ã€å¯¾è¨³ãƒ‡ãƒ¼ã‚¿ã‚’çµåˆã—ãŸæ–‡ã‚’ç”¨ã„ã‚‹ç¶™ç¶šäº‹å‰å­¦ç¿’ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚æœ¬ç ”ç©¶ã®èˆˆå‘³æ·±ã„ç‚¹ã¯ã€ã¯ã˜ã‚ã‹ã‚‰å¤§è¦æ¨¡ãªç¿»è¨³ãƒ‡ãƒ¼ã‚¿ã‚’æŒ‡ç¤ºå­¦ç¿’ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«å½“ã¦ã¯ã‚ã¦å­¦ç¿’ã™ã‚‹å ´åˆã«æ¯”ã¹ã¦ã€ç¶™ç¶šäº‹å‰å­¦ç¿’ã®æ–¹å¼ã‚’å–ã‚‹ã“ã¨ãŒæ¥µã‚ã¦æœ‰åŠ¹ã§ã‚ã£ãŸã¨ã„ã†ç‚¹ã§ã™ã€‚æŒ‡ç¤ºå­¦ç¿’å½¢å¼ã®fine-tuning (SFT) ã¯æŒ‡ç¤ºæ–‡ã¨ã„ã†ç¾…é‡ç›¤ã®å­˜åœ¨ã«ã‚ˆã‚Šã€ç©ºç™½ã‹ã‚‰æ¬¡ã®ãƒˆãƒ¼ã‚¯ãƒ³ã‚’äºˆæ¸¬ã™ã‚‹ (ç¶™ç¶š) äº‹å‰å­¦ç¿’ã‚ˆã‚Šã‚‚ã¯ã‚‹ã‹ã«å°ã•ãªå­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ç²¾åº¦ã®å‘ä¸Šã‚’è¦‹è¾¼ã‚€ã“ã¨ãŒã§ãã‚‹æ‰‹æ³•ã§ã™ã€‚<br>ä»Šå›ã€å¤§è¦æ¨¡ãªå­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨æ„ã§ãã‚‹è¨­å®šã§æŒ‡ç¤ºå­¦ç¿’ &lt; ç¶™ç¶šäº‹å‰å­¦ç¿’ (+æŒ‡ç¤ºå­¦ç¿’) ã¨ã„ã†æ§‹å›³ãŒç¤ºã•ã‚ŒãŸã“ã¨ã¯éå¸¸ã«é¢ç™½ã„ã¨æ„Ÿã˜ã¾ã™ã€‚ã“ã®ç ”ç©¶ã§ã¯ç¿»è¨³ã‚’é¡Œæã¨ã—ã¦ã„ã¾ã™ãŒã€input-outputãƒšã‚¢ã®çµåˆã«ã‚ˆã‚‹ç¶™ç¶šäº‹å‰å­¦ç¿’ã®ä»–ã®ã‚¿ã‚¹ã‚¯ã«ãŠã‘ã‚‹æœ‰åŠ¹æ€§ã‚„ã€æŒ‡ç¤ºå­¦ç¿’ã®ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ãƒ¼ã«é–¢ã™ã‚‹ç¤ºå”†ãŒå¾—ã‚‰ã‚Œã‚Œã°ã€LLMã«é–¢ã™ã‚‹ç†è§£ã‚’ä¸€æ­©æ·±ã‚ã‚‹è‰¯ã„ç ”ç©¶ã«ãªã‚‹ã¨æ€ã„ã¾ã—ãŸã€‚ (è—¤äº•)</li><li><strong><a href="https://www.anlp.jp/proceedings/annual_meeting/2024/pdf_dir/B9-4.pdf">[B9-4] ã‚¿ã‚¹ã‚¯æŒ‡å‘å‹å¯¾è©±ã‚·ã‚¹ãƒ†ãƒ ã¸ã®é …ç›®åå¿œç†è«–ã®é©ç”¨ã«ã‚ˆã‚‹ãƒ¦ãƒ¼ã‚¶ã®ã‚¿ã‚¹ã‚¯é”æˆèƒ½åŠ›ã®æ¨å®š</a></strong><br>ã“ã®ç ”ç©¶ã§ã¯ã€ã‚¿ã‚¹ã‚¯æŒ‡å‘å¯¾è©±ã‚·ã‚¹ãƒ†ãƒ ã«ãŠã‘ã‚‹ãƒ¦ãƒ¼ã‚¶ã®ã‚¿ã‚¹ã‚¯é‚è¡Œèƒ½åŠ›ã‚’é …ç›®åå¿œç†è«– (IRT) ã«åŸºã¥ã„ã¦æ¨å®šã—ã¦ã„ã¾ã™ã€‚é …ç›®åå¿œç†è«– (IRT) ã¯æ•™è‚²åˆ†é‡ã§ç”¨ã„ã‚‰ã‚Œã‚‹è€ƒãˆæ–¹ã§ã€ãƒ†ã‚¹ãƒˆã®ã‚ã‚‹è¨­å•ã«å¯¾ã™ã‚‹å¤šæ•°ã®å—é¨“è€…ã®æ­£èª¤ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰è¨­å•ã®ç‰¹æ€§ (é›£ã—ã•ã‚„å—é¨“è€…ã®èƒ½åŠ›ã‚’åˆ¤åˆ¥ã™ã‚‹è­˜åˆ¥åŠ›) ã‚’åˆ†æã—ã€å„è¨­å•ã«å¯¾ã™ã‚‹è§£ç­”ãƒ‘ã‚¿ãƒ¼ãƒ³ã‹ã‚‰å°¤ã‚‚ã‚‰ã—ã„å—é¨“è€…ã®èƒ½åŠ›ã‚’æ¨å®šã™ã‚‹ã€ã¨ã„ã†ã‚‚ã®ã§ã™ã€‚æœ¬ç ”ç©¶ã§ã¯æ—…è¡Œæ¡ˆå†…ã‚¿ã‚¹ã‚¯ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ç”¨ã„ã¦ã€ä¾‹ãˆã°ã€Œãƒ›ãƒ†ãƒ«ã®äºˆç´„ã«é–¢ã™ã‚‹äºˆç®—ã®å¸Œæœ›ã‚’èãè³ªå•ã«æ­£ã—ãäºˆç®—ã‚’å›ç­”ã§ãã‚‹ã‹ï¼Ÿã€ã¨ã„ã£ãŸè³ªå•ã‚’ãƒ†ã‚¹ãƒˆã«ãŠã‘ã‚‹1ã¤ã®è¨­å•ã«ãªãã‚‰ãˆã‚‹ã“ã¨ã§IRTã‚’é©ç”¨ã—ã¦ã„ã¾ã™ã€‚å®Ÿé¨“ã®çµæœã€ææ¡ˆæ‰‹æ³•ã§ãƒ¦ãƒ¼ã‚¶ã®èƒ½åŠ›ã‚’æ¨å®šã—ãŸå ´åˆã€å¾Œç¶šã®å¯¾è©±ã«ãŠã‘ã‚‹ã‚¿ã‚¹ã‚¯é‚è¡Œèƒ½åŠ›ã‚’æ¯”è¼ƒçš„é«˜ç²¾åº¦ã§äºˆæ¸¬ã§ãã‚‹ã“ã¨ãŒç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚<br>ãªãŠã€å®Ÿå¿œç”¨ã«éš›ã—ã¦ã¯ã€äº‹å‰ã«è­˜åˆ¥åŠ›ã®é«˜ã„è³ªå• (â‰’ ãƒ¦ãƒ¼ã‚¶ã®èƒ½åŠ›ã«å¿œã˜ã¦è§£ç­”ã«å¤§ãããƒ–ãƒ¬ãŒç”Ÿã˜ã‚‹ã‚ˆã†ãªè³ªå•) ã‚’ä¸€åº¦ã¯èã‹ãªã‚Œã‘ã°ãªã‚‰ãªã„ã€æ¨å®šã—ãŸãƒ¦ãƒ¼ã‚¶èƒ½åŠ›ã«åŸºã¥ã„ã¦æœ€çŸ­ã®ã‚¿ãƒ¼ãƒ³æ•°ã§ç›®çš„ã‚’é”æˆã™ã‚‹å¯¾è©±ã«æœ€é©åŒ–ã™ã‚‹æ–¹æ³•ã¯è‡ªæ˜ã§ãªã„ç­‰ã€æ®‹ã‚Šè¶Šãˆã‚‹ã¹ãèª²é¡Œã‚‚æ®‹ã•ã‚Œã¦ã„ã¾ã™ã€‚ã—ã‹ã—ãªãŒã‚‰ã€ã‚·ã‚¹ãƒ†ãƒ ãŒå¯¾è©±ã‚’é€šã˜ã¦ãƒ¦ãƒ¼ã‚¶ã«é©å¿œã—ã¦ã„ãã¨ã„ã†è€ƒãˆæ–¹ã¯éå¸¸ã«èˆˆå‘³æ·±ãã€ä»Šå¾Œã®é€²å±•ã«æœŸå¾…ã§ãã‚‹ã¨è€ƒãˆã¾ã™ã€‚ (è—¤äº•)</li><li><strong><a href="https://www.anlp.jp/proceedings/annual_meeting/2024/pdf_dir/P8-8.pdf">[P8-8] æ—¥æœ¬èªã‚¿ã‚¹ã‚¯ã«ãŠã‘ã‚‹LLMã‚’ç”¨ã„ãŸç–‘ä¼¼å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆã®æ¤œè¨</a></strong><br>è¿‘å¹´ã€å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ« (LLM) ã«ã‚¿ã‚¹ã‚¯ã®èª¬æ˜æ–‡ã¨å°‘æ•°ã®äº‹ä¾‹ã‚’å…¥åŠ›ã™ã‚‹Few-Shotç­‰ã®æ‰‹æ³•ãŒæ§˜ã€…ãªã‚¿ã‚¹ã‚¯ã§é«˜ã„æ€§èƒ½ã‚’ç™ºæ®ã™ã‚‹ã“ã¨ãŒçŸ¥ã‚‰ã‚Œã¦ã„ã¾ã™ãŒã€GPUãƒªã‚½ãƒ¼ã‚¹ã®åˆ¶ç´„ç­‰ã€LLMã®é‹ç”¨ã‚³ã‚¹ãƒˆã¯é«˜ã„ã§ã™ã€‚ã“ã®ç ”ç©¶ã§ã¯ã€6ã¤ã®æ—¥æœ¬èªã®è‡ªç„¶è¨€èªå‡¦ç†ã‚¿ã‚¹ã‚¯ã«é–¢ã—ã¦ã€LLMã‚’ç”¨ã„ã¦ç–‘ä¼¼ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆã—ã€ãã®ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨ã„ã¦BERTã®ã‚ˆã†ãªå°è¦æ¨¡ãƒ¢ãƒ‡ãƒ«ã‚’å­¦ç¿’ã™ã‚‹ã“ã¨ã§ã€LLMã®Few-Shotç­‰ã®æ€§èƒ½ã«ã©ã®ç¨‹åº¦è¿«ã‚Œã‚‹ã‹ã‚’æ¤œè¨¼ã—ã¦ã„ã¾ã™ã€‚å„ã‚¿ã‚¹ã‚¯ã®ç–‘ä¼¼ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆã™ã‚‹ãŸã‚ã«ã€ã‚¿ã‚¹ã‚¯ã®çŸ¥è­˜ã‚’åˆ©ç”¨ã—ãŸKADGã¨ã„ã†ç–‘ä¼¼ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆæ‰‹æ³•ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚ææ¡ˆæ‰‹æ³•ã¯ã‚·ãƒ³ãƒ—ãƒ«ã§ã€ç–‘ä¼¼ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹éš›ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«ã‚¿ã‚¹ã‚¯ã«é–¢ã™ã‚‹å†…å®¹èªã‚’å«ã‚ã‚‹ã¨ã„ã†ã‚‚ã®ã§ã™ã€‚ææ¡ˆæ‰‹æ³•ã«ã‚ˆã£ã¦ç–‘ä¼¼ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆã—ã€å°è¦æ¨¡ãƒ¢ãƒ‡ãƒ«ã‚’å­¦ç¿’ã•ã›ãŸçµæœã€ãƒ•ã‚©ãƒ¼ãƒãƒ«ãªãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›ã¨ã™ã‚‹ã‚¿ã‚¹ã‚¯ã§LLMã®æ€§èƒ½ã‚’ä¸Šå›ã‚‹ã“ã¨ã‚’æ˜ã‚‰ã‹ã«ã—ã¾ã—ãŸã€‚<br>ç”ŸæˆAIãƒ–ãƒ¼ãƒ ã®ä¸­ã§ã€æ§˜ã€…ãªå ´é¢ã§LLMãŒä½¿ç”¨ã•ã‚ŒãŒã¡ã§ã™ãŒã€ã‚¿ã‚¹ã‚¯ã«ã‚ˆã£ã¦ã¯å°è¦æ¨¡ãƒ¢ãƒ‡ãƒ«ã§ååˆ†ã¨æ„Ÿã˜ã‚‹ã‚±ãƒ¼ã‚¹ã‚‚ã‚ã‚Šã¾ã™ã€‚ãã‚“ãªãªã‹ã§ã€å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã®ä½œæˆã«LLMã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã§ã€å°è¦æ¨¡ãƒ¢ãƒ‡ãƒ«ã§ã‚‚LLMã‚’è¶…ãˆã‚‰ã‚Œã‚‹å¯èƒ½æ€§ã‚’ç¤ºã—ã¦ã„ã‚‹ã®ã¯èˆˆå‘³æ·±ã„ã¨æ„Ÿã˜ã¾ã—ãŸã€‚ã¾ãŸã€ä»Šå›ã®è¨€èªå‡¦ç†å­¦ä¼šã§æˆ‘ã€…ã‚‚LLMã‚’ç”¨ã„ãŸãƒ‡ãƒ¼ã‚¿æ‹¡å¼µã®ç ”ç©¶ã‚’ç™ºè¡¨ã—ã¦ãŠã‚Šã€ã“ã®ã‚ˆã†ãªæ–¹å‘æ€§ã®ç ”ç©¶ãŒç™ºå±•ã—ã¦ã„ã£ã¦ã»ã—ã„ã¨ã„ã†æœŸå¾…ã‚‚è¾¼ã‚ã¦æŒ™ã’ã•ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚ (å²¸æ³¢)</li></ul><h2 id="ãŠã‚ã‚Šã«"><a href="#ãŠã‚ã‚Šã«" class="headerlink" title="ãŠã‚ã‚Šã«"></a>ãŠã‚ã‚Šã«</h2><p>å¤§å­¦é™¢æ™‚ä»£ã‹ã‚‰å®Ÿã« 5 å¹´ã¶ã‚Šã®ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å­¦ä¼šå‚åŠ ã§ã—ãŸã€‚å¥‡è·¡çš„ã«ã€ãã® 5 å¹´å‰ã«ã‚‚ç¥æˆ¸ã®ãƒãƒ¼ãƒˆã‚¢ã‚¤ãƒ©ãƒ³ãƒ‰ã§ç™ºè¡¨ã‚’ã—ãŸè¦šãˆãŒã‚ã‚Šã¾ã™ã€‚</p><p>NLP2024 ã¯å½“æ™‚ã®ç ”ç©¶åˆ†é‡ã‹ã‚‰å£æ ¹ã‚’ 2 ã¤ã»ã©è¶…ãˆãŸå…ˆã®åˆ†é‡ã§ã¯ã‚ã‚Šã¾ã—ãŸãŒã€æ•°å¤šãã®ç ”ç©¶ã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã¨ã¦ã‚‚è‰¯ã„åˆºæ¿€ã«ãªã‚Šã¾ã—ãŸã€‚</p><p>ç¾åœ¨ SAIG ã§ã¯ã¨ã‚‚ã«åƒããƒ¡ãƒ³ãƒãƒ¼ã‚’å‹Ÿé›†ã—ã¦ã„ã¾ã™ã€‚ç‰¹ã« NLPåˆ†é‡ã«ãŠã‘ã‚‹ç¤¾ä¼šå®Ÿè£…ã®ãƒ‹ãƒ¼ã‚ºã¯æ ¹å¼·ãã€å¤šãã®ä»²é–“ã‚’å¿…è¦ã¨ã—ã¦ã„ã‚‹ã¨ã“ã‚ã§ã™ã€‚ã‚­ãƒ£ãƒªã‚¢æ¡ç”¨ãƒšãƒ¼ã‚¸ã§ã¯ <a href="https://open.talentio.com/r/1/c/future/pages/76795">ã‚·ãƒ‹ã‚¢NLPã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®å‹Ÿé›†</a> ãŒãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã•ã‚Œã¦ãŠã‚Šã¾ã™ã€‚æ¡ç”¨ãƒšãƒ¼ã‚¸ãŒã§ãã¦ãŠã‚‰ãšæç¸®ã§ã™ãŒã€NLPãƒªã‚µãƒ¼ãƒã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢åŠã³NLPã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚‚åŒã˜ãçµ¶è³›å‹Ÿé›†ä¸­ã§ã™ã€‚æ¡ä»¶ç­‰å¿œç›¸è«‡ã§ã™ã®ã§ã€æˆ‘ã“ãã¯ã¨ã„ã†èª­è€…ã®æ–¹ã€æ˜¯éå…ˆã®ãƒªãƒ³ã‚¯ã‚ˆã‚Šã”å¿œå‹Ÿã‚’ãŠå¾…ã¡ã—ã¦ãŠã‚Šã¾ã™ã€‚</p><p>ã»ã‹ã«ã‚‚å¹…åºƒã <a href="https://www.future.co.jp/recruit/recruit/rec-fresh/">æ–°å’æ¡ç”¨</a> ãŠã‚ˆã³ <a href="https://www.future.co.jp/recruit/recruit/rec-career/">ã‚­ãƒ£ãƒªã‚¢æ¡ç”¨</a> ã‚’å‹Ÿé›†ä¸­ã§ã™ã€‚èˆˆå‘³ã®ã‚ã‚‹æ–¹ã¯æ˜¯éä¸€ç·’ã«åƒãã¾ã—ã‚‡ã†ã€‚ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ï¼</p><img src="/images/20240328a/20240313_112622.JPG" alt="20240313_112622.JPG" width="1200" height="900" loading="lazy">â–² ä¼šå ´è¿‘ãã®å—å…¬åœ’ã®å™´æ°´ã€‚]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Infrastructure/">Infrastructure</category>
      
      
      <category domain="https://future-architect.github.io/tags/%E5%8F%82%E5%8A%A0%E3%83%AC%E3%83%9D%E3%83%BC%E3%83%88/">å‚åŠ ãƒ¬ãƒãƒ¼ãƒˆ</category>
      
      <category domain="https://future-architect.github.io/tags/%E6%A9%9F%E6%A2%B0%E5%AD%A6%E7%BF%92/">æ©Ÿæ¢°å­¦ç¿’</category>
      
      <category domain="https://future-architect.github.io/tags/NLP/">NLP</category>
      
      <category domain="https://future-architect.github.io/tags/%E5%AD%A6%E4%BC%9A/">å­¦ä¼š</category>
      
      <category domain="https://future-architect.github.io/tags/NLP2024/">NLP2024</category>
      
      
      <comments>https://future-architect.github.io/articles/20240328a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>æ‰‹å‹•é‹ç”¨ã—ã¦ã„ã‚‹Cloudflareã‚’Terraformã§Infrastructure as Codeã™ã‚‹</title>
      <link>https://future-architect.github.io/articles/20240327a/</link>
      <guid>https://future-architect.github.io/articles/20240327a/</guid>
      <pubDate>Tue, 26 Mar 2024 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;h2 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot; title=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;/a&gt;ã¯ã˜ã‚ã«&lt;/h2&gt;&lt;p&gt;ã“ã®è¨˜äº‹ã¯ã€&lt;a</description>
          
        
      
      
      
      <content:encoded><![CDATA[<h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><p>ã“ã®è¨˜äº‹ã¯ã€<a href="/articles/20240311a/">Terraformé€£è¼‰2024</a>ã®10è¨˜äº‹ç›®ã§ã™ã€‚</p><p>ã¿ãªã•ã‚“ã“ã‚“ã«ã¡ã¯ã€‚TIGæ‰€å±ã®å¤§å²©æ½¤çŸ¢( <a href="https://x.com/920OJ">@920OJ</a> ) ã§ã™ã€‚</p><p>æœ¬è¨˜äº‹ã§ã¯Cloudflareã§ç®¡ç†ã—ã¦ã„ã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³ã®DNSè¨­å®šã‚„Cloudflare Pagesç­‰ã®ã‚µãƒ¼ãƒ“ã‚¹ã®è¨­å®šã‚’ã€Terraformç®¡ç†ã«ç§»è¡Œã—ãŸéš›ã®æ‰‹é †ãªã©ã‚’è¨˜è¼‰ã—ã¾ã™ã€‚</p><h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>ç§ã¯å€‹äººé–‹ç™ºã‚„è‡ªèº«ã®ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªWebã‚µã‚¤ãƒˆã®å…¬é–‹ã®ãŸã‚ã«ã€ <code>920oj.net</code> ã¨ã„ã†ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’æ‰€æŒã—ã¦ã„ã¾ã™ã€‚ã“ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã¯Google Domainsã§å–å¾—ã—ã€ãƒãƒ¼ãƒ ã‚µãƒ¼ãƒã‚’å¤‰æ›´ã—ã¦Cloudflareä¸Šã§DNSãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ç®¡ç†ã—ã¦ã„ã¾ã™ã€‚</p><p>ã¾ãŸã€è‡ªèº«ã® <a href="https://920oj.net/">ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚µã‚¤ãƒˆWebã‚µã‚¤ãƒˆ</a> ã¯Cloudflare Pagesã§ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã—ã¦ã„ã¾ã™ã€‚è»¢é€é‡ç„¡åˆ¶é™ã§æœˆ500ãƒ“ãƒ«ãƒ‰ã¾ã§ç„¡æ–™ã¨ã„ã†ã®ã¯ãŠè²¡å¸ƒã«å„ªã—ãã‚ã‚ŠãŒãŸã„ã§ã™ã€‚</p><p>ä¸€æ–¹ã§ã€Webã®ç®¡ç†ç”»é¢ã‹ã‚‰Cloudflareã§ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ç®¡ç†ã‚„å„ç¨®è¨­å®šã‚’å¤‰æ›´ã™ã‚‹éš›ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³å±¥æ­´ã‚’è¡¨ç¤ºã™ã‚‹æ©Ÿèƒ½ãŒãªã„ãŸã‚ã€ä¸€åº¦å¤‰æ›´ã—ã¦ã—ã¾ã£ãŸã‚‚ã®ã¯å…ƒã«æˆ»ã™ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚ä¾‹ãˆã°DNSè¨­å®šã‚’æ›´æ–°ã™ã‚‹éš›ã€é–“é•ãˆãŸå€¤ã«æ›´æ–°ã—ã¦ã—ã¾ã£ãŸå ´åˆã€å…ƒã®å€¤ã‚’è¨˜æ†¶ã—ã¦ã„ãªã„é™ã‚Šã¯æˆ»ã›ãªããªã£ã¦ã—ã¾ã„ã¾ã™ã€‚<a href="https://developers.cloudflare.com/version-management/">ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°æ©Ÿèƒ½</a>ã¯ã‚ã‚‹ã‚‚ã®ã®ã€Enterpriseãƒ—ãƒ©ãƒ³ã®ã¿ã§ã—ã‹ä½¿ãˆãªã„ã‚ˆã†ã§ã™ã€‚</p><p>ãã“ã§åˆ©ç”¨ã—ãŸã„ã¨æ€ã„ç«‹ã£ãŸã®ãŒTerraformã§ã™ã€‚Cloudflareã‚’Terrafromã§æ§‹ç¯‰ã—ã€ãã®ã‚³ãƒ¼ãƒ‰ã‚’Gitç­‰ã§ç®¡ç†ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€å¤‰æ›´ã‚’ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã§ãã¾ã™ã€‚è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«ã«ã‚ã‚‹é€šã‚Šã€ã€ŒInfrastructure as Codeã™ã‚‹ã€ã¨ã„ã†ã“ã¨ã§ã™ã€‚</p><p>ä¸€æ–¹ã§Cloudflareã¯ã™ã§ã«åˆ©ç”¨ä¸­ã§ã‚ã‚‹ãŸã‚ã€ã“ã‚Œã¾ã§æ‰‹ä½œæ¥­ã§å®Ÿæ–½ã—ã¦ããŸè¨­å®šã‚’Terraformã¸importã—ã¦ç®¡ç†ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚</p><p>ä»Šå›ç§»è¡Œã™ã‚‹ã‚‚ã®ã¯ã€å„ãƒ‰ãƒ¡ã‚¤ãƒ³ã®DNSãƒ¬ã‚³ãƒ¼ãƒ‰ã¨ã€Cloudflare Pagesã§ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã—ã¦ã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®2ã¤ã¨ã—ã¾ã™ã€‚</p><h2 id="Cloudflareã‚’Terraformã§ç®¡ç†ã™ã‚‹ãŸã‚ã®å‰æº–å‚™"><a href="#Cloudflareã‚’Terraformã§ç®¡ç†ã™ã‚‹ãŸã‚ã®å‰æº–å‚™" class="headerlink" title="Cloudflareã‚’Terraformã§ç®¡ç†ã™ã‚‹ãŸã‚ã®å‰æº–å‚™"></a>Cloudflareã‚’Terraformã§ç®¡ç†ã™ã‚‹ãŸã‚ã®å‰æº–å‚™</h2><p>æ—©é€Ÿã€æ—¢å­˜ãƒªã‚½ãƒ¼ã‚¹ã‚’Terraformã§ç®¡ç†ã™ã‚‹ãŸã‚ã®æ‰‹é †ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚ã¾ãšã¯ä¸‹æº–å‚™ã¨ã—ã¦ã€ä»¥ä¸‹ã‚’å®Ÿæ–½ã—ã¾ã™ã€‚</p><ul><li>tfstateç®¡ç†ç”¨ã®R2ãƒã‚±ãƒƒãƒˆã‚’ä½œæˆ</li><li>APIãƒˆãƒ¼ã‚¯ãƒ³ã®ç™ºè¡Œ</li><li>ç’°å¢ƒå¤‰æ•°ã®è¨­å®š</li></ul><h3 id="Cloudflare-R2ã¸tfstateç®¡ç†ç”¨ã®ãƒã‚±ãƒƒãƒˆã‚’ä½œæˆã™ã‚‹"><a href="#Cloudflare-R2ã¸tfstateç®¡ç†ç”¨ã®ãƒã‚±ãƒƒãƒˆã‚’ä½œæˆã™ã‚‹" class="headerlink" title="Cloudflare R2ã¸tfstateç®¡ç†ç”¨ã®ãƒã‚±ãƒƒãƒˆã‚’ä½œæˆã™ã‚‹"></a>Cloudflare R2ã¸tfstateç®¡ç†ç”¨ã®ãƒã‚±ãƒƒãƒˆã‚’ä½œæˆã™ã‚‹</h3><p>Cloudflareã«ã¯R2ã¨ã„ã†S3äº’æ›ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚µãƒ¼ãƒ“ã‚¹ãŒã‚ã‚Šã€tfstateã¯ã“ã®R2ã®ä¸­ã§ç®¡ç†ã™ã‚‹æ–¹é‡ã¨ã—ã¾ã™ã€‚R2ã§tfstateã‚’ç®¡ç†ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ã¯ã€ã™ã§ã«ã“ã®ãƒ†ãƒƒã‚¯ãƒ–ãƒ­ã‚°ã§è¨˜äº‹ãŒã‚ã‚‹ã®ã§ã€ã“ã‚Œã‚’å‚è€ƒã«ã—ã¾ã™ã€‚</p><p><a href="https://future-architect.github.io/articles/20231016a/">https://future-architect.github.io/articles/20231016a/</a></p><p>ã¾ãšã¯Cloudflareã®ç®¡ç†ç”»é¢ã«ãƒ­ã‚°ã‚¤ãƒ³ã—ã€R2ã‚’é¸æŠâ†’ã€ŒAdd R2 subscription to my accountã€ã‚’æŠ¼ä¸‹ã—ã¾ã™ã€‚</p><img src="/images/20240327a/image.png" alt="Add R2 subscription to my accountã‚’ã‚¯ãƒªãƒƒã‚¯" width="1200" height="615" loading="lazy"><p>ã€ŒCreate bucketã€ ã‚’æŠ¼ä¸‹ã—ã¾ã™ã€‚</p><img src="/images/20240327a/image_2.png" alt="Create bucketã‚’ã‚¯ãƒªãƒƒã‚¯" width="965" height="405" loading="lazy"><p>ãƒã‚±ãƒƒãƒˆåã‚’å…¥åŠ›ã—ã€Locationã¯ã€ŒAutomaticã€ã‚’é¸æŠã—ã¾ã™ã€‚æœ€å¾Œã«ã€ŒCreate bucketã€ã‚’æŠ¼ä¸‹ã™ã‚Œã°ã€ãƒã‚±ãƒƒãƒˆãŒå‡ºæ¥ä¸ŠãŒã‚Šã¾ã™ã€‚</p><img src="/images/20240327a/image_3.png" alt="oj-cf-tfstateã¨ã„ã†ãƒã‚±ãƒƒãƒˆåã‚’å…¥åŠ›" width="952" height="832" loading="lazy"><img src="/images/20240327a/image_4.png" alt="Automaticã®ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚’é¸æŠ" width="1200" height="612" loading="lazy"><h3 id="APIãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç™ºè¡Œã™ã‚‹"><a href="#APIãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç™ºè¡Œã™ã‚‹" class="headerlink" title="APIãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç™ºè¡Œã™ã‚‹"></a>APIãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç™ºè¡Œã™ã‚‹</h3><p>Cloudflareã‚’Terraformç®¡ç†ã€ã™ãªã‚ã¡APIã§æ“ä½œã™ã‚‹å ´åˆã€APIãƒˆãƒ¼ã‚¯ãƒ³ã®ç™ºè¡ŒãŒå¿…é ˆã§ã™ã€‚</p><p>å³ä¸Šãƒ¦ãƒ¼ã‚¶ã‚¢ã‚¤ã‚³ãƒ³ã‚ˆã‚Šã€ŒMy Profileã€ã‚’æŠ¼ä¸‹â†’å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰API Tokensã‚’é¸ã³ã€ã€ŒCreate Tokenã€ã‚’æŠ¼ä¸‹ã—ã¾ã™ã€‚</p><img src="/images/20240327a/image_5.png" alt="Cretate Tokenã‚’ã‚¯ãƒªãƒƒã‚¯" width="1200" height="615" loading="lazy"><p>Create Custom Tokenã®ã€ŒGet startedã€ã‚’æŠ¼ä¸‹ã—ã¾ã™ã€‚</p><img src="/images/20240327a/image_6.png" alt="Get startedãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯" width="866" height="217" loading="lazy"><p>å„ç¨®è¨­å®šå€¤ã‚’å…¥åŠ›ã—ã¾ã™ã€‚</p><ul><li>Token name: ä»»æ„ã®åå‰ã‚’å…¥åŠ›</li><li>Permissions: TerraformçµŒç”±ã§æ“ä½œã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã‚’é¸ã³ã€ãã‚Œãã‚ŒEditã®æ¨©é™ã‚’æŒ‡å®šã™ã‚‹<ul><li>ã©ã®ã‚µãƒ¼ãƒ“ã‚¹ã§ä½•ã®æ¨©é™ãŒå¿…è¦ã‹ã¯<a href="https://developers.cloudflare.com/fundamentals/api/reference/permissions/">ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>ã«ã¾ã¨ã¾ã£ã¦ã„ã‚‹ã®ã§å‚ç…§ã®ã“ã¨</li></ul></li><li>Account Resources: è‡ªåˆ†ãŒæ¨©é™ã‚’æŒã£ã¦ã„ã‚‹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼‰ã‚’é¸æŠå¯èƒ½ã€‚ã“ã“ã§ã¯All accountsã¨ã—ãŸãŒã€è¤‡æ•°ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒã‚ã‚‹å ´åˆã¯ã“ã“ã§çµã£ã¦ãŠãã“ã¨ãŒå¥½ã¾ã—ã„</li><li>Zone Resources: ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ä¸­ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’é¸æŠã§ãã‚‹ã€‚ã“ã“ã§ã¯All zonesã¨ã—ãŸãŒã€æ“ä½œã§ãã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’çµã‚ŠãŸã„ã¨ãã¯ã“ã“ã§æŒ‡å®šã™ã‚‹</li><li>Client IP Address Filtering: ä»®ã«æ“ä½œã•ã‚Œã‚‹IPã‚¢ãƒ‰ãƒ¬ã‚¹ãŒæ±ºã¾ã£ã¦ã„ã‚‹å ´åˆã¯ã“ã“ã§æŒ‡å®šã™ã‚‹ã€‚ä½•ã‚‚å…¥åŠ›ã—ãªã‘ã‚Œã°ã€ã™ã¹ã¦ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å®¹ã™ã‚‹</li><li>ã™ã¹ã¦å…¥åŠ›ã§ããŸã‚‰ã€ŒContinue to summaryã€ã‚’æŠ¼ä¸‹</li></ul><img src="/images/20240327a/image_7.png" alt="" width="1200" height="764" loading="lazy"><img src="/images/20240327a/image_8.png" alt="" width="1136" height="784" loading="lazy"><p>è¨­å®šå†…å®¹ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€å•é¡Œãªã‘ã‚Œã°ã€ŒCreate Tokenã€ã‚’æŠ¼ä¸‹ã—ã¾ã™ã€‚</p><img src="/images/20240327a/image_9.png" alt="Create Tokneã‚’ã‚¯ãƒªãƒƒã‚¯" width="1155" height="561" loading="lazy"><p>APIãƒˆãƒ¼ã‚¯ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ãŒã€ã“ã®ã¾ã¾ã§ã¯R2ã®Access KeyãŠã‚ˆã³SecretãŒè¡¨ç¤ºã•ã‚Œãªã„ãŸã‚ã€å†åº¦ä½œã‚Šç›´ã—ã¾ã™ã€‚ã“ã®ãƒšãƒ¼ã‚¸ã§ã®ã‚³ãƒ”ãƒ¼ã¯ä¸è¦ã§ã™ã€‚</p><img src="/images/20240327a/image_10.png" alt="ima" width="1200" height="550" loading="lazy"><p>R2ã®ç®¡ç†ãƒšãƒ¼ã‚¸ã‚’é–‹ãã€å³å´ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚ˆã‚Šã€ŒManage R2 API Tokensã€ã‚’é¸ã³ã¾ã™ã€‚</p><img src="/images/20240327a/image_11.png" alt="" width="1200" height="615" loading="lazy"><p>å…ˆã»ã©ä½œæˆã—ãŸãƒˆãƒ¼ã‚¯ãƒ³ã®ã€Œãƒ»ãƒ»ãƒ»ã€ã‚’æŠ¼ä¸‹ã—ã€ã€ŒRollã€ã‚’é¸æŠã€‚æ³¨æ„æ›¸ãã‚’èª­ã¿ã€ã€ŒRollã€ã‚’æŠ¼ä¸‹ã—ã¾ã™ã€‚</p><img src="/images/20240327a/image_12.png" alt="" width="1200" height="404" loading="lazy"><img src="/images/20240327a/image_13.png" alt="" width="775" height="540" loading="lazy"><p>ã€ŒAPI Tokenã€ã€ŒAccess Key IDã€ã€ŒSecret Access Keyã€ã€ŒR2ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã€ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€ã“ã‚Œã‚‰ã‚’ã™ã¹ã¦ã‚³ãƒ”ãƒ¼ã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚</p><img src="/images/20240327a/image_14.png" alt="" width="1200" height="680" loading="lazy"><h3 id="ç’°å¢ƒå¤‰æ•°ã®è¨­å®š"><a href="#ç’°å¢ƒå¤‰æ•°ã®è¨­å®š" class="headerlink" title="ç’°å¢ƒå¤‰æ•°ã®è¨­å®š"></a>ç’°å¢ƒå¤‰æ•°ã®è¨­å®š</h3><p>ã“ã“ã‹ã‚‰ã¯æ“ä½œã™ã‚‹PCã§ã®ä½œæ¥­ã¨ãªã‚Šã¾ã™ã€‚ã¾ãšã¯ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ãã€ç’°å¢ƒå¤‰æ•°ã‚’ã‚»ãƒƒãƒˆã—ã¾ã™ã€‚</p><p>å…ˆã»ã©ã‚³ãƒ”ãƒ¼ã—ãŸAPIãƒˆãƒ¼ã‚¯ãƒ³ç­‰èªè¨¼æƒ…å ±ã‚’ã€ç’°å¢ƒå¤‰æ•°ã¨ã—ã¦ã‚»ãƒƒãƒˆã—ã¾ã™ã€‚ã‚»ãƒƒãƒˆã™ã‚‹ã‚­ãƒ¼ã¨å€¤ã¯ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚</p><div class="scroll"><table><thead><tr><th>No.</th><th>ç’°å¢ƒå¤‰æ•°å</th><th>å€¤</th></tr></thead><tbody><tr><td>1</td><td>AWS_ACCOUNT_ID</td><td>Cloudflareã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆID</td></tr><tr><td>2</td><td>AWS_ACCESS_KEY_ID</td><td>APIãƒˆãƒ¼ã‚¯ãƒ³ã§æ‰•ã„å‡ºã—ãŸã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ID</td></tr><tr><td>3</td><td>AWS_SECRET_ACCESS_KEY</td><td>APIãƒˆãƒ¼ã‚¯ãƒ³ã§æ‰•ã„å‡ºã—ãŸã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼</td></tr><tr><td>4</td><td>CLOUDFLARE_ACCOUNT_ID</td><td>Cloudflareã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆID</td></tr><tr><td>5</td><td>CLOUDFLARE_API_TOKEN</td><td>ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã€ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã¨å…±ã«æ‰•ã„å‡ºã—ãŸãƒˆãƒ¼ã‚¯ãƒ³</td></tr></tbody></table></div><p>1ã€4ã«ã¤ã„ã¦ã¯ç®¡ç†ç”»é¢ã‚ˆã‚Šç¢ºèªã§ãã¾ã™ã€‚2ã€3ã€5ã«ã¤ã„ã¦ã¯å‰é …ã§ã‚³ãƒ”ãƒ¼ã—ãŸã‚‚ã®ã‚’ã‚»ãƒƒãƒˆã—ã¾ã—ã‚‡ã†ã€‚</p><p>ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«ã¾ã¨ã‚ã¦ã€ <code>source set-env.sh</code> ã®ã‚³ãƒãƒ³ãƒ‰ã§è¨­å®šã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã¨æ¥½ã§ã™ã€‚</p><figure class="highlight bash"><figcaption><span>set-env.sh</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> AWS_ACCOUNT_ID=xxxxxxxxxxxxxxx</span><br><span class="line"><span class="built_in">export</span> AWS_ACCESS_KEY_ID=xxxxxxxxxxxxxxx</span><br><span class="line"><span class="built_in">export</span> AWS_SECRET_ACCESS_KEY=xxxxxxxxxxxxxxx</span><br><span class="line"><span class="built_in">export</span> CLOUDFLARE_ACCOUNT_ID=xxxxxxxxxxxxxxx</span><br><span class="line"><span class="built_in">export</span> CLOUDFLARE_API_TOKEN=xxxxxxxxxxxxxxx</span><br></pre></td></tr></table></figure><h2 id="Cloudflareã‚’Terraformç®¡ç†ã™ã‚‹"><a href="#Cloudflareã‚’Terraformç®¡ç†ã™ã‚‹" class="headerlink" title="Cloudflareã‚’Terraformç®¡ç†ã™ã‚‹"></a>Cloudflareã‚’Terraformç®¡ç†ã™ã‚‹</h2><p>ã“ã“ã‹ã‚‰ãŒæœ¬é¡Œã§ã€ã„ã‚ˆã„ã‚ˆCloudflareä¸Šã«ã‚ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã‚’Terraformç®¡ç†ã«ã™ã‚‹ãŸã‚ã€ã‚¤ãƒ³ãƒãƒ¼ãƒˆç­‰ã®ä½œæ¥­ã‚’å®Ÿæ–½ã—ã¦ã„ãã¾ã™ã€‚</p><h3 id="ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ"><a href="#ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ" class="headerlink" title="ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ"></a>ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ</h3><p>ä»»æ„ã®å ´æ‰€ã«Cloudflareã®Terraformç®¡ç†ç”¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã¾ã™ã€‚ã“ã‚Œã‚’gitç®¡ç†ã¨ã—ã€ãã®é…ä¸‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ãƒ»ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã¯ä»¥ä¸‹ã®å½¢ã¨ã—ã¾ã™ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ domains</span><br><span class="line">â”‚   â””â”€â”€ 920oj-net</span><br><span class="line">â”‚       â”œâ”€â”€ local.tf</span><br><span class="line">â”‚       â”œâ”€â”€ record.tf</span><br><span class="line">â”‚       â””â”€â”€ setup.tf</span><br><span class="line">â””â”€â”€ global</span><br><span class="line">    â””â”€â”€ pages</span><br><span class="line">        â””â”€â”€ 920oj-net</span><br><span class="line">            â”œâ”€â”€ local.tf</span><br><span class="line">            â”œâ”€â”€ pages_domain.tf</span><br><span class="line">            â”œâ”€â”€ pages_project.tf</span><br><span class="line">            â””â”€â”€ setup.tf</span><br><span class="line"></span><br><span class="line">5 directories, 7 files</span><br></pre></td></tr></table></figure><p>ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼ˆã‚¾ãƒ¼ãƒ³ï¼‰ç®¡ç†ã¯ <code>domains/</code> é…ä¸‹ã§å®Ÿæ–½ã—ã€åˆ©ç”¨ã™ã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³ã”ã¨ã«ãƒ•ã‚©ãƒ«ãƒ€ã‚’åˆ‡ã‚Šã€ãã‚Œãã‚Œã§tfstateã‚’åˆ†ã‘ã‚‹å½¢ã¨ã—ã¾ã™ã€‚</p><p>Cloudflare Pagesã¯ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ç®¡ç†ã™ã‚‹ãŸã‚ã€ <code>global/</code> é…ä¸‹ã§ç®¡ç†ã—ã€ <code>pages</code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’åˆ‡ã‚Šã€ã•ã‚‰ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’åˆ†ã‘ã‚‹å½¢å¼ã¨ã—ã¾ã™ã€‚</p><h3 id="å„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—"><a href="#å„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—" class="headerlink" title="å„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—"></a>å„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—</h3><p>Terraformã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ã‚„ãƒ—ãƒ­ãƒ‘ã‚¤ãƒ€ã®è¨­å®šã€tfstateã®é…ç½®å ´æ‰€ç­‰ã®åˆæœŸè¨­å®šã«å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€ <code>setup.tf</code> ã«ã¾ã¨ã‚ã¦ã€å„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é…ç½®ã—ã¾ã™ã€‚</p><p><code>key</code> ã¯ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã”ã¨ã«åˆ†ã‘ã¦ãŠãã€tfstateãŒåˆ†ã‘ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚è‡ªåˆ†ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ«ãƒ¼ãƒ«ã§é‹ç”¨ã—ã¦ã„ã¾ã™ã€‚</p><ul><li>ãƒ‰ãƒ¡ã‚¤ãƒ³: <code>domains/ãƒ‰ãƒ¡ã‚¤ãƒ³å.tfstate</code></li><li>Pages: <code>global/pages/ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå.tfstate</code></li><li>Workers: <code>global/workers/ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå.tfstate</code></li></ul><figure class="highlight sh"><figcaption><span>setup.tf</span></figcaption><table><tr><td class="code"><pre><span class="line">terraform &#123;</span><br><span class="line">  // terraformã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³è¨­å®š</span><br><span class="line">  required_version = <span class="string">&quot;~&gt; 1.7.5&quot;</span></span><br><span class="line"></span><br><span class="line">  // cloudflareãƒ—ãƒ­ãƒã‚¤ãƒ€ã‚’åˆ©ç”¨</span><br><span class="line">  required_providers &#123;</span><br><span class="line">    cloudflare = &#123;</span><br><span class="line">      <span class="built_in">source</span>  = <span class="string">&quot;cloudflare/cloudflare&quot;</span></span><br><span class="line">      version = <span class="string">&quot;~&gt; 4.26.0&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // tfstateã®ä¿å­˜å…ˆã®è¨­å®šã€‚R2 Storageã‚’ä½¿ç”¨ã™ã‚‹</span><br><span class="line">  backend <span class="string">&quot;s3&quot;</span> &#123;</span><br><span class="line">    endpoints = &#123;</span><br><span class="line">      s3 = <span class="string">&quot;https://&lt;ã‚¢ã‚«ã‚¦ãƒ³ãƒˆID&gt;.r2.cloudflarestorage.com&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    bucket                      = <span class="string">&quot;oj-cf-tfstate&quot;</span> <span class="comment"># ã“ã“ã§ãƒã‚±ãƒƒãƒˆåã‚’æŒ‡å®š</span></span><br><span class="line">    key                         = <span class="string">&quot;domains/920oj-net.tfstate&quot;</span> <span class="comment"># ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã”ã¨ã«ã‚­ãƒ¼ã‚’å¤‰æ›´</span></span><br><span class="line">    region                      = <span class="string">&quot;us-east-1&quot;</span> <span class="comment"># ä»»æ„ã®å€¤ã§OK</span></span><br><span class="line">    skip_credentials_validation = <span class="literal">true</span></span><br><span class="line">    skip_requesting_account_id  = <span class="literal">true</span></span><br><span class="line">    skip_s3_checksum            = <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">provider <span class="string">&quot;cloudflare&quot;</span> &#123;&#125;</span><br></pre></td></tr></table></figure><p>backend ã®è¨­å®šã§ã€ <code>skip_credentials_validation</code> ã¨ <code>skip_requesting_account_id</code> ã€ <code>skip_s3_checksum</code> ã®3ã¤ã‚’ <code>true</code> ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><h3 id="ãƒ‰ãƒ¡ã‚¤ãƒ³ã®DNSãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’importã™ã‚‹"><a href="#ãƒ‰ãƒ¡ã‚¤ãƒ³ã®DNSãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’importã™ã‚‹" class="headerlink" title="ãƒ‰ãƒ¡ã‚¤ãƒ³ã®DNSãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’importã™ã‚‹"></a>ãƒ‰ãƒ¡ã‚¤ãƒ³ã®DNSãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’importã™ã‚‹</h3><p>Cloudflareã®importã«ã¯ã€Terraformå…¬å¼ã§ç”¨æ„ã•ã‚Œã¦ã„ã‚‹importã‚³ãƒãƒ³ãƒ‰ã‚’åˆ©ç”¨ã™ã‚‹ã»ã‹ã€CloudflareãŒç‹¬è‡ªã«æä¾›ã—ã¦ã„ã‚‹ <a href="https://github.com/cloudflare/cf-terraforming">cf-terraforming</a> ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>cf-terraformingã«ã¤ã„ã¦ã¯ã€ã“ã‚Œã¾ãŸä¼Šè—¤ã•ã‚“ãŒæ›¸ã‹ã‚Œã¦ã„ã‚‹è¨˜äº‹ãŒã‚ã‚‹ã®ã§ã€ã“ã¡ã‚‰ã‚‚èª­ã‚“ã§ã¿ã¦ãã ã•ã„ã€‚</p><p><a href="https://future-architect.github.io/articles/20230502a/">https://future-architect.github.io/articles/20230502a/</a></p><p>å®Ÿéš›ã«ç¾åœ¨ã®è¨­å®šã‚’importã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><h4 id="generate"><a href="#generate" class="headerlink" title="generate"></a>generate</h4><p>ã¾ãšã¯ç¾åœ¨ã®è¨­å®šã‚’Terraformã®è¨˜è¿°ã«è½ã¨ã—è¾¼ã‚“ã§ãã‚Œã‚‹ <code>generate</code> ã‚³ãƒãƒ³ãƒ‰ã‚’è©¦ã—ã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cf-terraforming generate --resource-type <span class="string">&quot;cloudflare_record&quot;</span> --zone <span class="string">&quot;ã‚¾ãƒ¼ãƒ³ID&quot;</span> </span><br></pre></td></tr></table></figure><ul><li><code>--resource-type</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§å–å¾—ã—ãŸã„ãƒªã‚½ãƒ¼ã‚¹ã‚’æŒ‡å®šã—ã¾ã™ã€‚ä»Šå›ã¯DNSè¨­å®šã‚’å–å¾—ã—ã¦ã¿ã‚‹ã®ã§ã€ <code>cloudflare_record</code> ã‚’æŒ‡å®šã—ã¾ã™ã€‚<ul><li>å–å¾—ã§ãã‚‹ãƒªã‚½ãƒ¼ã‚¹ä¸€è¦§ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ç„¡ã‹ã£ãŸã®ã§ã€<a href="https://github.com/cloudflare/cf-terraforming/blob/master/internal/app/cf-terraforming/cmd/generate.go">ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰</a>ã‚’å‚ç…§ã—ã¾ã™ã€‚</li></ul></li><li><code>--zone</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§å–å¾—ã—ãŸã„zoneã®IDã‚’æŒ‡å®šã—ã¾ã™ã€‚</li></ul><p>å®Ÿè¡Œã—ã¦ã¿ãŸã¨ã“ã‚ã€ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã—ãŸã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">FATA[0000] --account and --zone are mutually exclusive, support <span class="keyword">for</span> both is deprecated </span><br></pre></td></tr></table></figure><p>ã©ã†ã‚„ã‚‰å…ˆç¨‹ã‚»ãƒƒãƒˆã—ãŸç’°å¢ƒå¤‰æ•° <code>CLOUDFLARE_ACCOUNT_ID</code> ãŒã‚»ãƒƒãƒˆã•ã‚Œã¦ã„ã‚‹ã¨æ­£å¸¸ã«å‹•ã„ã¦ãã‚Œãªã•ãã†ãªã®ã§ã€ä¸€æ—¦ <code>unset CLOUDFLARE_ACCOUNT_ID</code> ã‚³ãƒãƒ³ãƒ‰ã§ç’°å¢ƒå¤‰æ•°ã‚’å¤–ã—ã¦ãŠãã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">% cf-terraforming generate --resource-type <span class="string">&quot;cloudflare_record&quot;</span> --zone <span class="string">&quot;ã‚¾ãƒ¼ãƒ³ID&quot;</span> </span><br><span class="line">resource <span class="string">&quot;cloudflare_record&quot;</span> <span class="string">&quot;terraform_managed_resource_xxxxxxxxxxx&quot;</span> &#123;</span><br><span class="line">  name    = <span class="string">&quot;920oj.net&quot;</span></span><br><span class="line">  proxied = <span class="literal">true</span></span><br><span class="line">  ttl     = 1</span><br><span class="line">  <span class="built_in">type</span>    = <span class="string">&quot;CNAME&quot;</span></span><br><span class="line">  value   = <span class="string">&quot;920oj-net.pages.dev&quot;</span></span><br><span class="line">  zone_id = <span class="string">&quot;ã‚¾ãƒ¼ãƒ³ID&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource <span class="string">&quot;cloudflare_record&quot;</span> <span class="string">&quot;terraform_managed_resource_yyyyyyyyyyy&quot;</span> &#123;</span><br><span class="line">  name     = <span class="string">&quot;920oj.net&quot;</span></span><br><span class="line">  priority = 10</span><br><span class="line">  proxied  = <span class="literal">false</span></span><br><span class="line">  ttl      = 1</span><br><span class="line">  <span class="built_in">type</span>     = <span class="string">&quot;MX&quot;</span></span><br><span class="line">  value    = <span class="string">&quot;example.com&quot;</span></span><br><span class="line">  zone_id  = <span class="string">&quot;ã‚¾ãƒ¼ãƒ³ID&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å•é¡Œãªã‘ã‚Œã°ã€å…ˆç¨‹ã®ã‚³ãƒãƒ³ãƒ‰ã®æœ«å°¾ã« <code>&gt;&gt; record.tf</code> ã‚’ã¤ã‘ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãå‡ºã—ã¾ã—ã‚‡ã†ã€‚</p><p>ã“ã®ã¾ã¾ã ã¨ãƒªã‚½ãƒ¼ã‚¹åãŒãƒ©ãƒ³ãƒ€ãƒ ãªã‚‚ã®ã«ãªã£ã¦ã„ã‚‹ã®ã§ã€ã‚ã‹ã‚Šã‚„ã™ã„ã‚ˆã†ã«åå‰ã‚’å¤‰ãˆã‚‹ã¨ç®¡ç†ã—ã‚„ã™ã„ã§ã™ã€‚</p><ul><li>ä¾‹: ãƒ«ãƒ¼ãƒˆãƒ‰ãƒ¡ã‚¤ãƒ³ã®CNAMEãƒ¬ã‚³ãƒ¼ãƒ‰: <code>cname_root</code></li><li>ä¾‹: <code>hoge</code> ã¨ã„ã†åå‰ã®Aãƒ¬ã‚³ãƒ¼ãƒ‰: <code>a_hoge</code></li></ul><p>ã¾ãŸã€zone_idã‚„ãƒ«ãƒ¼ãƒˆãƒ‰ãƒ¡ã‚¤ãƒ³åã¯ä½•åº¦ã‹è¨˜è¿°ã™ã‚‹ã“ã¨ã«ãªã‚‹ã®ã§ã€localå¤‰æ•°ã«å®šç¾©ã—ã¦ãŠãã¨ãƒŸã‚¹ãŒæ¸›ã‚Šã¾ã™ã€‚</p><figure class="highlight sh"><figcaption><span>local.tf</span></figcaption><table><tr><td class="code"><pre><span class="line">locals &#123;</span><br><span class="line">  zone_id = <span class="string">&quot;ã‚¾ãƒ¼ãƒ³ID&quot;</span></span><br><span class="line">  root_domain = <span class="string">&quot;920oj.net&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight sh"><figcaption><span>record.tf</span></figcaption><table><tr><td class="code"><pre><span class="line">resource <span class="string">&quot;cloudflare_record&quot;</span> <span class="string">&quot;cname_root&quot;</span> &#123;</span><br><span class="line">  name    = local.root_domain</span><br><span class="line">  proxied = <span class="literal">true</span></span><br><span class="line">  ttl     = 1</span><br><span class="line">  <span class="built_in">type</span>    = <span class="string">&quot;CNAME&quot;</span></span><br><span class="line">  value   = <span class="string">&quot;920oj-net.pages.dev&quot;</span></span><br><span class="line">  zone_id = local.zone_id</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">...ä»¥ä¸‹ç•¥</span><br></pre></td></tr></table></figure><h4 id="import"><a href="#import" class="headerlink" title="import"></a>import</h4><p>ã“ã®ã¾ã¾ã§ã¯æ–°è¦è¿½åŠ ã—ãŸåˆ†ãŒãã®ã¾ã¾æ–°è¦ã¨ã—ã¦èªè­˜ã•ã‚Œã¦ã—ã¾ã†ã®ã§ã€ã™ã§ã«ä½œæˆã•ã‚Œã¦ã„ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã«ã¤ã„ã¦ã¯importã—ã¦tfstateã¸åæ˜ ã•ã›ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p><p>importã™ã‚‹ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ã¯cf-terraformingã‚’åˆ©ç”¨ã—ã¦å‡ºåŠ›ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãŸã ã—ä»Šå›ã¯ãƒªã‚½ãƒ¼ã‚¹åã‚’ã‚ã‹ã‚Šã‚„ã™ãå¤‰æ›´ã—ãŸãŸã‚ã€ã‚³ãƒãƒ³ãƒ‰ã‚’ä¿®æ­£ã—ã¾ã™ã€‚</p><p>ã¾ãšã¯cf-terraformingã‚’åˆ©ç”¨ã—ã¦ã‚³ãƒãƒ³ãƒ‰ã‚’å‡ºåŠ›ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> % cf-terraforming import --resource-type &quot;cloudflare_record&quot; --zone &quot;ã‚¾ãƒ¼ãƒ³ID&quot;</span><br><span class="line">terraform import cloudflare_record.terraform_managed_resource_xxxxxxxxxx ã‚¾ãƒ¼ãƒ³ID/xxxxxxxxxx</span><br><span class="line">terraform import cloudflare_record.terraform_managed_resource_yyyyyyyyyy ã‚¾ãƒ¼ãƒ³ID/yyyyyyyyyy</span><br></pre></td></tr></table></figure><p>å‡ºåŠ›ã•ã‚ŒãŸã‚³ãƒãƒ³ãƒ‰ã‚’ã‚‚ã¨ã«ã€ãƒªã‚½ãƒ¼ã‚¹åã‚’å¤‰æ›´ã—ãŸä¸Šã§ã€ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ä¿å­˜ã—ã¾ã™ã€‚</p><figure class="highlight bash"><figcaption><span>import.sh</span></figcaption><table><tr><td class="code"><pre><span class="line">terraform import cloudflare_record.terraform_managed_resource_cname_root ã‚¾ãƒ¼ãƒ³ID/xxxxxxxxxx</span><br><span class="line">terraform import cloudflare_record.terraform_managed_resource_mx_root ã‚¾ãƒ¼ãƒ³ID/yyyyyyyyyy</span><br></pre></td></tr></table></figure><p>ã“ã‚Œã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ Import successful! ã¨è¡¨ç¤ºã•ã‚Œã‚Œã°ã€ã‚¤ãƒ³ãƒãƒ¼ãƒˆå®Œäº†ã§ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"> % ./import.sh                  </span><br><span class="line">cloudflare_record.cname_root: Importing from ID <span class="string">&quot;ã‚¾ãƒ¼ãƒ³ID/xxxxxxxxxx&quot;</span>...</span><br><span class="line">cloudflare_record.cname_root: Import prepared!</span><br><span class="line">  Prepared cloudflare_record <span class="keyword">for</span> import</span><br><span class="line">cloudflare_record.cname_root: Refreshing state... [<span class="built_in">id</span>=xxxxxxxxxxxxxxxxxxxxxx]</span><br><span class="line"></span><br><span class="line">ãƒ»ãƒ»ãƒ»ä¸­ç•¥ãƒ»ãƒ»ãƒ»</span><br><span class="line"></span><br><span class="line">Import successful!</span><br><span class="line"></span><br><span class="line">The resources that were imported are shown above. These resources are now <span class="keyword">in</span></span><br><span class="line">your Terraform state and will henceforth be managed by Terraform.</span><br></pre></td></tr></table></figure><p>ã“ã“ã§ <code>terraform plan</code> ã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚å…ˆã»ã©importã—ãŸã‚‚ã®ãŒè¡¨ç¤ºã•ã‚Œã€æœ€å¾Œã«No chanegsã¨è¡¨ç¤ºã•ã‚Œã‚Œã°ã€ç„¡äº‹åæ˜ ã«æˆåŠŸã—ã¦ã„ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"> % terraform plan</span><br><span class="line">cloudflare_record.cname_root: Refreshing state... [<span class="built_in">id</span>=xxxxxxxxxxxxxxxxxxxxxx]</span><br><span class="line">cloudflare_record.mx_root: Refreshing state... [<span class="built_in">id</span>=xxxxxxxxxxxxxxxxxxxxxx]</span><br><span class="line">ãƒ»ãƒ»ãƒ»ä¸­ç•¥ãƒ»ãƒ»ãƒ»</span><br><span class="line"></span><br><span class="line">No changes. Your infrastructure matches the configuration.</span><br><span class="line"></span><br><span class="line">Terraform has compared your real infrastructure against your configuration and found no differences, so no changes are needed.</span><br></pre></td></tr></table></figure><h3 id="Cloudflare-Pagesã®import"><a href="#Cloudflare-Pagesã®import" class="headerlink" title="Cloudflare Pagesã®import"></a>Cloudflare Pagesã®import</h3><p>ç¶šã„ã¦ã¯Cloudflare Pagesã‚’Terraformç®¡ç†ä¸‹ã¨ãªã‚‹ã‚ˆã†è¨­å®šã—ã¾ã™ã€‚</p><p>Pagesã¯ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼ˆã‚¾ãƒ¼ãƒ³ï¼‰å˜ä½ã§ãªãã‚¢ã‚«ã‚¦ãƒ³ãƒˆå˜ä½ã§ã®ç®¡ç†ã¨ãªã‚‹ãŸã‚ã€å…ˆã»ã©unsetã—ãŸ <code>CLOUDFLARE_ACCOUNT_ID</code> ã‚’å†ã‚»ãƒƒãƒˆã—ã¾ã™ã€‚</p><p>ã¾ãŸã€Cloudflare Pagesã¯cf-terraformingãŒå¯¾å¿œã—ã¦ã„ãªã„ãŸã‚ã€Terraform v1.5ã‹ã‚‰è¿½åŠ ã•ã‚ŒãŸImportãƒ–ãƒ­ãƒƒã‚¯ã‚’åˆ©ç”¨ã—ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚</p><h4 id="importãƒ–ãƒ­ãƒƒã‚¯ã®ä½œæˆ"><a href="#importãƒ–ãƒ­ãƒƒã‚¯ã®ä½œæˆ" class="headerlink" title="importãƒ–ãƒ­ãƒƒã‚¯ã®ä½œæˆ"></a>importãƒ–ãƒ­ãƒƒã‚¯ã®ä½œæˆ</h4><p>è‡ªåˆ†ã®å ´åˆã€ <code>920oj.net</code> ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã§ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ <code>920oj-net</code> ã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><img src="/images/20240327a/image_15.png" alt="image.png" width="873" height="200" loading="lazy"><p>Cloudflare Pagesã¯ã€ <code>cloudflare_pages_domain</code> ãƒªã‚½ãƒ¼ã‚¹ã¨ <code>cloudflarepages_project</code> ãƒªã‚½ãƒ¼ã‚¹ã‹ã‚‰æ§‹ç¯‰ã•ã‚Œã¾ã™ã€‚</p><p>ã¾ãšã¯ <code>import.tf</code> ã‚’ä½œæˆã—ã€importãƒ–ãƒ­ãƒƒã‚¯ã‚’è¨˜è¼‰ã—ã¾ã™ã€‚ <code>local.account_id</code> ã§ã‚¢ã‚«ã‚¦ãƒ³ãƒˆIDãŒå‘¼ã³å‡ºã›ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚</p><p><code>cloudflare_pages_domain</code> ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã§ã¯ã€<code>to</code> ã«ã¯importã™ã‚‹å¯¾è±¡ã®ãƒªã‚½ãƒ¼ã‚¹åã‚’ã€ <code>id</code> ã«ã¯ <code>&lt;ã‚¢ã‚«ã‚¦ãƒ³ãƒˆID&gt;/&lt;ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå&gt;/&lt;è¨­å®šã—ã¦ã„ã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³å&gt;</code> ã‚’è¨˜è¼‰ã—ã¾ã™ã€‚</p><p><code>cloudflare_pages_project</code> ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã§ã¯ã€ <code>to</code> ã«ã¯importã™ã‚‹å¯¾è±¡ã®ãƒªã‚½ãƒ¼ã‚¹åã‚’ã€ <code>id</code> ã«ã¯ <code>&lt;ã‚¢ã‚«ã‚¦ãƒ³ãƒˆID&gt;/&lt;ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå&gt;</code> ã‚’è¨˜è¼‰ã—ã¾ã™ã€‚</p><figure class="highlight sh"><figcaption><span>import.tf</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment"># cloudflare_pages_domain ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</span></span><br><span class="line">import &#123;</span><br><span class="line">  to = cloudflare_pages_domain.domain-920oj-net  <span class="comment"># å¯¾è±¡ã®ãƒªã‚½ãƒ¼ã‚¹å</span></span><br><span class="line">  <span class="built_in">id</span> = <span class="string">&quot;<span class="variable">$&#123;local.account_id&#125;</span>/920oj-net/920oj.net&quot;</span> <span class="comment"># ãƒ‰ãƒ¡ã‚¤ãƒ³å</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># cloudflare_pages_project ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</span></span><br><span class="line">import &#123;</span><br><span class="line">  to = cloudflare_pages_project.project-920oj-net <span class="comment"># å¯¾è±¡ã®ãƒªã‚½ãƒ¼ã‚¹å</span></span><br><span class="line">  <span class="built_in">id</span> = <span class="string">&quot;<span class="variable">$&#123;local.account_id&#125;</span>/920oj-net&quot;</span>            <span class="comment"># ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="HCLã‚³ãƒ¼ãƒ‰ã®è‡ªå‹•ç”Ÿæˆ"><a href="#HCLã‚³ãƒ¼ãƒ‰ã®è‡ªå‹•ç”Ÿæˆ" class="headerlink" title="HCLã‚³ãƒ¼ãƒ‰ã®è‡ªå‹•ç”Ÿæˆ"></a>HCLã‚³ãƒ¼ãƒ‰ã®è‡ªå‹•ç”Ÿæˆ</h4><p>ã“ã®çŠ¶æ…‹ã§ <code>terraform plan -generate-config-out=generate.tf</code> ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">% terraform plan -generate-config-out=generate.tf</span><br><span class="line">cloudflare_pages_domain.domain-920oj-net: Preparing import... [<span class="built_in">id</span>=xxxxxxxxxxxxxxx/920oj-net/920oj.net]</span><br><span class="line">cloudflare_pages_project.project-920oj-net: Preparing import... [<span class="built_in">id</span>=xxxxxxxxxxxxxxx/920oj-net]</span><br><span class="line">cloudflare_pages_domain.domain-920oj-net: Refreshing state... [<span class="built_in">id</span>=xxxxxxxxxxxxxxxxxxxxx]</span><br><span class="line">cloudflare_pages_project.project-920oj-net: Refreshing state... [<span class="built_in">id</span>=920oj-net]</span><br><span class="line"></span><br><span class="line">Terraform will perform the following actions:</span><br><span class="line"></span><br><span class="line">  <span class="comment"># cloudflare_pages_domain.domain-920oj-net will be imported</span></span><br><span class="line">    resource <span class="string">&quot;cloudflare_pages_domain&quot;</span> <span class="string">&quot;domain-920oj-net&quot;</span> &#123;</span><br><span class="line">        account_id   = <span class="string">&quot;xxxxxxxxxxxxxxxxxxxxxxx&quot;</span></span><br><span class="line">        domain       = <span class="string">&quot;920oj.net&quot;</span></span><br><span class="line">        <span class="built_in">id</span>           = <span class="string">&quot;xxxxxxxxxxxxxxxxxxxxxxx&quot;</span></span><br><span class="line">        project_name = <span class="string">&quot;920oj-net&quot;</span></span><br><span class="line">        status       = <span class="string">&quot;active&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"># cloudflare_pages_project.project-920oj-net will be imported</span></span><br><span class="line">  <span class="comment"># (config will be generated)</span></span><br><span class="line">    resource <span class="string">&quot;cloudflare_pages_project&quot;</span> <span class="string">&quot;project-920oj-net&quot;</span> &#123;</span><br><span class="line">        account_id        = <span class="string">&quot;xxxxxxxxxxxxxxxxxxxxxxx&quot;</span></span><br><span class="line">        created_on        = <span class="string">&quot;2023-03-18T15:44:28Z&quot;</span></span><br><span class="line">        domains           = [</span><br><span class="line">            <span class="string">&quot;920oj-net.pages.dev&quot;</span>,</span><br><span class="line">            <span class="string">&quot;920oj.net&quot;</span>,</span><br><span class="line">        ]</span><br><span class="line">        <span class="built_in">id</span>                = <span class="string">&quot;920oj-net&quot;</span></span><br><span class="line">        name              = <span class="string">&quot;920oj-net&quot;</span></span><br><span class="line">        production_branch = <span class="string">&quot;main&quot;</span></span><br><span class="line">        subdomain         = <span class="string">&quot;920oj-net.pages.dev&quot;</span></span><br><span class="line"></span><br><span class="line">        build_config &#123;</span><br><span class="line">            build_caching   = <span class="literal">false</span></span><br><span class="line">            build_command   = <span class="string">&quot;npm run build&quot;</span></span><br><span class="line">            destination_dir = <span class="string">&quot;build&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">ãƒ»ãƒ»ãƒ»ä¸­ç•¥</span><br><span class="line"></span><br><span class="line">Plan: 2 to import, 0 to add, 0 to change, 0 to destroy.</span><br></pre></td></tr></table></figure><p>è¨­å®šå€¤ãŒèª­ã¿å–ã‚‰ã‚Œã€å‡ºåŠ›ã•ã‚Œã¦ã„ã¾ã™ã€‚ã¾ãŸã€æŒ‡å®šã—ãŸãƒ•ã‚¡ã‚¤ãƒ« <code>generate.tf</code> ã«åŒæ§˜ã®è¨­å®šå€¤ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ï¼</p><p>å†…å®¹ãŒæ­£ã—ã„ã‹ç¢ºèªã™ã‚‹ã®ã¨ã€ã‚³ãƒ¡ãƒ³ãƒˆã‚’æ¶ˆã—ãŸã‚Šã€localå¤‰æ•°ã«ç½®ãæ›ãˆãŸã‚Šã—ã¦ä½“è£ã‚’æ•´ãˆã¾ã—ã‚‡ã†ã€‚ã¾ãŸã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚ãƒªã‚½ãƒ¼ã‚¹ã”ã¨ã«åˆ†ã‘ã¦ãŠãã¾ã—ã‚‡ã†ã€‚</p><figure class="highlight sh"><figcaption><span>pages_domain.tf</span></figcaption><table><tr><td class="code"><pre><span class="line">resource <span class="string">&quot;cloudflare_pages_domain&quot;</span> <span class="string">&quot;domain-920oj-net&quot;</span> &#123;</span><br><span class="line">  account_id   = local.account_id</span><br><span class="line">  domain       = <span class="string">&quot;920oj.net&quot;</span></span><br><span class="line">  project_name = <span class="string">&quot;920oj-net&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight sh"><figcaption><span>generate.tf</span></figcaption><table><tr><td class="code"><pre><span class="line">resource <span class="string">&quot;cloudflare_pages_project&quot;</span> <span class="string">&quot;project-920oj-net&quot;</span> &#123;</span><br><span class="line">  account_id        = local.account_id</span><br><span class="line">  name              = local.project_name</span><br><span class="line">  production_branch = <span class="string">&quot;main&quot;</span></span><br><span class="line">  build_config &#123;</span><br><span class="line">    build_caching       = <span class="literal">false</span></span><br><span class="line">    build_command       = <span class="string">&quot;npm run build&quot;</span></span><br><span class="line">    destination_dir     = <span class="string">&quot;build&quot;</span></span><br><span class="line">    root_dir            = null</span><br><span class="line">    web_analytics_tag   = null</span><br><span class="line">    web_analytics_token = null</span><br><span class="line">  &#125;</span><br><span class="line">  deployment_configs &#123;</span><br><span class="line">    preview &#123;</span><br><span class="line">      always_use_latest_compatibility_date = <span class="literal">false</span></span><br><span class="line">      compatibility_date                   = <span class="string">&quot;2023-03-18&quot;</span></span><br><span class="line">      compatibility_flags                  = []</span><br><span class="line">      d1_databases                         = &#123;&#125;</span><br><span class="line">      durable_object_namespaces            = &#123;&#125;</span><br><span class="line">      environment_variables = &#123;</span><br><span class="line">        GTAG_ID      = <span class="string">&quot;XXXXXXX&quot;</span></span><br><span class="line">        NODE_VERSION = <span class="string">&quot;XXXXXXX&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">      fail_open     = <span class="literal">true</span></span><br><span class="line">      kv_namespaces = &#123;&#125;</span><br><span class="line">      r2_buckets    = &#123;&#125;</span><br><span class="line">      secrets       = null <span class="comment"># sensitive</span></span><br><span class="line">      usage_model   = <span class="string">&quot;standard&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    production &#123;</span><br><span class="line">      always_use_latest_compatibility_date = <span class="literal">false</span></span><br><span class="line">      compatibility_date                   = <span class="string">&quot;2023-03-18&quot;</span></span><br><span class="line">      compatibility_flags                  = []</span><br><span class="line">      d1_databases                         = &#123;&#125;</span><br><span class="line">      durable_object_namespaces            = &#123;&#125;</span><br><span class="line">      environment_variables = &#123;</span><br><span class="line">        GTAG_ID      = <span class="string">&quot;XXXXXXXXXX&quot;</span></span><br><span class="line">        NODE_VERSION = <span class="string">&quot;XXXXXXXXXX&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">      fail_open     = <span class="literal">true</span></span><br><span class="line">      kv_namespaces = &#123;&#125;</span><br><span class="line">      r2_buckets    = &#123;&#125;</span><br><span class="line">      secrets       = null <span class="comment"># sensitive</span></span><br><span class="line">      usage_model   = <span class="string">&quot;standard&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">source</span> &#123;</span><br><span class="line">    <span class="built_in">type</span> = <span class="string">&quot;github&quot;</span></span><br><span class="line">    config &#123;</span><br><span class="line">      deployments_enabled           = <span class="literal">true</span></span><br><span class="line">      owner                         = <span class="string">&quot;920oj&quot;</span></span><br><span class="line">      pr_comments_enabled           = <span class="literal">true</span></span><br><span class="line">      preview_branch_excludes       = []</span><br><span class="line">      preview_branch_includes       = [<span class="string">&quot;*&quot;</span>]</span><br><span class="line">      preview_deployment_setting    = <span class="string">&quot;all&quot;</span></span><br><span class="line">      production_branch             = <span class="string">&quot;main&quot;</span></span><br><span class="line">      production_deployment_enabled = <span class="literal">true</span></span><br><span class="line">      repo_name                     = <span class="string">&quot;920oj-net&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="importã®å®Ÿè¡Œ"><a href="#importã®å®Ÿè¡Œ" class="headerlink" title="importã®å®Ÿè¡Œ"></a>importã®å®Ÿè¡Œ</h4><p>ã‚³ãƒ¼ãƒ‰ã®è¨˜è¼‰ã¯æ¸ˆã‚“ã ã®ã§ã€tfstateã¸å–ã‚Šè¾¼ã¿ã¾ã—ã‚‡ã†ã€‚</p><p>å…ˆã»ã©ã®importãƒ–ãƒ­ãƒƒã‚¯ã¯æ®‹ã—ãŸã¾ã¾ã§ã€ <code>terraform plan</code> ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚ <code>Plan: 2 to import, 0 to add, 0 to change, 0 to destroy.</code> ãŒå‡ºã¦ã„ã‚Œã°ã€ã‚¤ãƒ³ãƒãƒ¼ãƒˆã®æº–å‚™ãŒã§ãã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚</p><p>æ¬¡ã«ã€ <code>terraform apply</code> ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚å·®åˆ†ãŒãªã„ã“ã¨ã‚’ç¢ºèªã—ã¦ã€yesã¨ã‚¿ã‚¤ãƒ—ã—ã¾ã—ã‚‡ã†ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">Plan: 2 to import, 0 to add, 0 to change, 0 to destroy.</span><br><span class="line"></span><br><span class="line">Do you want to perform these actions?</span><br><span class="line">  Terraform will perform the actions described above.</span><br><span class="line">  Only <span class="string">&#x27;yes&#x27;</span> will be accepted to approve.</span><br><span class="line"></span><br><span class="line">  Enter a value: <span class="built_in">yes</span></span><br></pre></td></tr></table></figure><p><code>Apply complete! Resources: 2 imported, 0 added, 0 changed, 0 destroyed.</code> ãŒå‡ºãŸã‚‰OKã§ã™ã€‚</p><p>ã“ã®ã‚ã¨ <code>terraform plan</code> ã‚’å®Ÿè¡Œã—ã¦ã¿ã¦ã€å·®åˆ†ãŒå‡ºã¦ã„ãªã‘ã‚Œã°å•é¡Œãªã—ã§ã™ã€‚</p><p>å…ˆã»ã©ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«åˆ©ç”¨ã—ãŸimport.tfã¯å‰Šé™¤ã—ã¦ã‚‚æ§‹ã„ã¾ã›ã‚“ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"> % terraform plan</span><br><span class="line">cloudflare_pages_domain.domain-920oj-net: Refreshing state... [<span class="built_in">id</span>=xxxxxxxxxx]</span><br><span class="line">cloudflare_pages_project.project-920oj-net: Refreshing state... [<span class="built_in">id</span>=xxxxxxxxxx]</span><br><span class="line"></span><br><span class="line">No changes. Your infrastructure matches the configuration.</span><br><span class="line"></span><br><span class="line">Terraform has compared your real infrastructure against your configuration and found no differences, so no changes are needed.</span><br></pre></td></tr></table></figure><p>ã“ã‚Œã«ã¦ã€Cloudflareã§ç®¡ç†ã—ã¦ã„ã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³ã®DNSãƒ¬ã‚³ãƒ¼ãƒ‰ã¨Cloudflare Pagesã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ã€Terraformã«ã¦ç®¡ç†ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸï¼</p><h2 id="ãŠã‚ã‚Šã«"><a href="#ãŠã‚ã‚Šã«" class="headerlink" title="ãŠã‚ã‚Šã«"></a>ãŠã‚ã‚Šã«</h2><p>ã“ã‚Œã§Cloudflareã‚’æ“ä½œã™ã‚‹éš›ã®ä¸å®‰ãŒè»½æ¸›ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã€è‡ªåˆ†ã®å€‹äººé–‹ç™ºãƒ¢ãƒãƒ™ã‚‚ï¼ˆã‚ãšã‹ãªãŒã‚‰ï¼‰é«˜ã¾ã£ãŸæ°—ãŒã—ã¾ã™ã€‚ã¾ãŸã€Terraformã®ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã‚„æœ¬ä½“ã®æ©Ÿèƒ½ã®å……å®Ÿã•ã‚‚æ”¹ã‚ã¦å®Ÿæ„Ÿã—ã¾ã—ãŸã€‚</p><p>ãœã²çš†ã•ã‚“ã‚‚Cloudflareã‚’Terraformç®¡ç†ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼</p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Infrastructure/">Infrastructure</category>
      
      
      <category domain="https://future-architect.github.io/tags/IaC/">IaC</category>
      
      <category domain="https://future-architect.github.io/tags/Terraform/">Terraform</category>
      
      <category domain="https://future-architect.github.io/tags/Cloudflare/">Cloudflare</category>
      
      
      <comments>https://future-architect.github.io/articles/20240327a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>è¨€èªå‡¦ç†å­¦ä¼š (NLP2024) ã§ãƒã‚¹ã‚¿ãƒ¼ç™ºè¡¨ã‚’è¡Œã„ã¾ã—ãŸ</title>
      <link>https://future-architect.github.io/articles/20240326b/</link>
      <guid>https://future-architect.github.io/articles/20240326b/</guid>
      <pubDate>Mon, 25 Mar 2024 15:00:01 GMT</pubDate>
      
        
        
          
          
      <description>&lt;h2 id=&quot;ã¯ã˜ã‚ã«&quot;&gt;&lt;a href=&quot;#ã¯ã˜ã‚ã«&quot; class=&quot;headerlink&quot;</description>
          
        
      
      
      
      <content:encoded><![CDATA[<h2 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h2><p>ã¿ãªã•ã‚“ã“ã‚“ã«ã¡ã¯ï¼ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æ ªå¼ä¼šç¤¾ã®å²¸æ³¢ã¨ç”³ã—ã¾ã™ã€‚å­¦ç”Ÿæ™‚ä»£ã¯è‡ªç„¶è¨€èªå‡¦ç†ã€ç‰¹ã«é›‘è«‡å¯¾è©±ã‚·ã‚¹ãƒ†ãƒ ã®ç ”ç©¶ã‚’ã—ã¦ãŠã‚Šã¾ã—ãŸã€‚ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼å…¥ç¤¾å¾Œã¯Strategic AI Group (SAIG) ã®ä¸€å“¡ã¨ã—ã¦ã€ä¸»ã«è‡ªç„¶è¨€èªå‡¦ç†ã«é–¢ã™ã‚‹ç ”ç©¶é–‹ç™ºã‚„ç¤¾ä¼šå®Ÿè£…ã«å–ã‚Šçµ„ã‚“ã§ã„ã¾ã™ã€‚</p><p>å…ˆæ—¥ã€<a href="https://www.anlp.jp/nlp2024/">è¨€èªå‡¦ç†å­¦ä¼šç¬¬30å›å¹´æ¬¡å¤§ä¼š (NLP2024)</a> ã«å‚åŠ ã—ã€å½“ç¤¾ã§å–ã‚Šçµ„ã‚“ã ç ”ç©¶å†…å®¹ã«ã¤ã„ã¦ãƒã‚¹ã‚¿ãƒ¼ç™ºè¡¨ã‚’è¡Œã„ã¾ã—ãŸã€‚</p><p>è¨€èªå‡¦ç†å­¦ä¼šã¯è‡ªç„¶è¨€èªå‡¦ç†åˆ†é‡ã«ãŠã‘ã‚‹å›½å†…æœ€å¤§ã®å­¦ä¼šã§ã€ChatGPTã‚’ã¯ã˜ã‚ã¨ã™ã‚‹å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«ãŒå¤§ããªæ³¨ç›®ã‚’é›†ã‚ã¦ã„ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã€ä»Šå¹´ã¯å‚åŠ è€…æ•°ãƒ»ç™ºè¡¨è«–æ–‡æ•°ãŒéå»æœ€å¤šã¨ãªã‚Šã¾ã—ãŸã€‚</p><p>å½“ç¤¾ã¯ãƒ—ãƒ©ãƒãƒŠã‚¹ãƒãƒ³ã‚µãƒ¼ã¨ã—ã¦å‚åŠ ã—ã€ã‚¹ãƒãƒ³ã‚µãƒ¼ãƒ–ãƒ¼ã‚¹ã‚‚å‡ºå±•ã—ã¾ã—ãŸã€‚å­¦ä¼šå…¨ä½“ã‚’é€šã—ã¦ã®å‚åŠ å ±å‘Šã«ã¤ã„ã¦ã¯<a href="/articles/20240328a/">è¨€èªå‡¦ç†å­¦ä¼š (NLP2024) å‚åŠ å ±å‘Š </a>ã«ã¾ã¨ã‚ã¦ã„ã¾ã™ã®ã§ãœã²ãŠèª­ã¿ãã ã•ã„ï¼</p><p>ã“ã®ãƒ–ãƒ­ã‚°ã§ã¯ã€ä¸»ã«ãƒã‚¹ã‚¿ãƒ¼ç™ºè¡¨ã‚’è¡Œã£ãŸç ”ç©¶ã®å†…å®¹ã¨ã€å½“æ—¥ã®ç™ºè¡¨ã®æ§˜å­ã«ã¤ã„ã¦ã”ç´¹ä»‹ã§ãã‚Œã°ã¨æ€ã„ã¾ã™ã€‚</p><h2 id="ç™ºè¡¨å†…å®¹"><a href="#ç™ºè¡¨å†…å®¹" class="headerlink" title="ç™ºè¡¨å†…å®¹"></a>ç™ºè¡¨å†…å®¹</h2><p>ä»Šå›ç§ãŸã¡ã¯ã€Œ<a href="https://www.anlp.jp/proceedings/annual_meeting/2024/pdf_dir/P10-13.pdf">æ©Ÿå¯†æƒ…å ±æ¤œçŸ¥ã«ãŠã‘ã‚‹ç”ŸæˆAIã‚’ç”¨ã„ãŸãƒ‡ãƒ¼ã‚¿æ‹¡å¼µ</a>ã€ã¨ã„ã†ã‚¿ã‚¤ãƒˆãƒ«ã§ç™ºè¡¨ã‚’è¡Œã„ã¾ã—ãŸã€‚ç ”ç©¶ã®æ¦‚è¦ã¨ã—ã¦ã¯ã€æ–‡ç« ä¸­ã‹ã‚‰æ©Ÿå¯†æƒ…å ± (ã“ã®ç ”ç©¶ã§ã¯ä¼æ¥­å) ã‚’æ¤œçŸ¥ã™ã‚‹ã‚¿ã‚¹ã‚¯ã«ãŠã„ã¦ã€ç”ŸæˆAIã‚’ç”¨ã„ã¦äº‹å®Ÿæ€§ã«æ‰ã‚ã‚Œãªã„å¤šæ§˜ãªãƒ‡ãƒ¼ã‚¿æ‹¡å¼µã‚’è¡Œã†ã“ã¨ã§ã€ä¼æ¥­åã®æ¤œçŸ¥ç²¾åº¦ãŒå¤§å¹…ã«å‘ä¸Šã—ãŸã¨ã„ã†ã‚‚ã®ã§ã™ã€‚</p><p>æ—¥ã€…æ–°ã—ã„ä¼æ¥­ãŒèª•ç”Ÿã—ãŸã‚Šã€æ—¢ã«å­˜åœ¨ã™ã‚‹ä¼æ¥­ãŒæ–°ã—ã„äº‹æ¥­ã‚’å±•é–‹ã—ãŸã‚Šã¨ã€ä¼æ¥­ã«é–¢ã™ã‚‹äº‹å®Ÿã¨ã„ã†ã®ã¯æ°¸ç¶šçš„ã«å¢—ãˆã¦ã„ãã‚‚ã®ã§ã™ã€‚ãã®ãŸã‚ã€ãã®ã‚ˆã†ãªæ–°ãŸã«ç™ºç”Ÿã—ãŸäº‹å®Ÿã«é–¢ã—ã¦ã‚‚ã€æ©Ÿå¯†æƒ…å ±ã¯æ©Ÿå¯†æƒ…å ±ã¨ã—ã¦æ¤œçŸ¥ã•ã‚Œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãã“ã§ã€æ©Ÿå¯†æƒ…å ±æ¤œçŸ¥ãƒ¢ãƒ‡ãƒ«ã‚’å­¦ç¿’ã™ã‚‹ãŸã‚ã®ãƒ‡ãƒ¼ã‚¿ã¯ç¾æ™‚ç‚¹ã§äº‹å®Ÿã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã«é™å®šã™ã¹ãã§ã¯ãªã„ã®ã§ã¯ãªã„ã‹ã€ã¨ã„ã†ã‚¢ã‚¤ãƒ‡ã‚£ã‚¢ã®ã‚‚ã¨ã€äº‹å®Ÿæ€§ã«æ‰ã‚ã‚Œãªã„ãƒ‡ãƒ¼ã‚¿æ‹¡å¼µæ‰‹æ³•ã‚’ææ¡ˆã—ã¾ã—ãŸã€‚</p><p>å…·ä½“çš„ã«ã¯ã€ã‚ã‚‹ä¼æ¥­åã‚’å«ã‚€ã‚ˆã†ãªæ–‡è„ˆã‚’ç”ŸæˆAIã‚’ç”¨ã„ã¦å¢—ã‚„ã™æ‰‹æ³•ã€æ¶ç©ºã®ä¼æ¥­åã‚’ç”ŸæˆAIã‚’ç”¨ã„ã¦å¢—ã‚„ã™æ‰‹æ³•ã®äºŒã¤ã‚’ææ¡ˆã—ã¦ã„ã¾ã™ã€‚ç”ŸæˆAIãŒäº‹å®Ÿã«åã™ã‚‹å†…å®¹ã‚’ç”Ÿæˆã—ã¦ã—ã¾ã†ç¾è±¡ã€ã„ã‚ã‚†ã‚‹ãƒãƒ«ã‚·ãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚’é€†æ‰‹ã«å–ã£ãŸæ‰‹æ³•ã§ã™ã€‚</p><p>ã“ã‚Œã‚‰ã®æ‰‹æ³•ã§ãƒ‡ãƒ¼ã‚¿ã‚’æ‹¡å¼µã—ã€æ‹¡å¼µã—ãŸãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§æ©Ÿå¯†æƒ…å ±æ¤œçŸ¥ãƒ¢ãƒ‡ãƒ«ã‚’å­¦ç¿’ã—ãŸçµæœã€ä¼æ¥­åæ¤œçŸ¥ã‚¿ã‚¹ã‚¯ã®F1ã‚¹ã‚³ã‚¢ãŒæœ€å¤§2.5%å‘ä¸Šã™ã‚‹çµæœãŒå¾—ã‚‰ã‚Œã¾ã—ãŸã€‚</p><p>ç™ºè¡¨è³‡æ–™ã¯ã“ã¡ã‚‰ã§ã™ã€‚</p><img src="/images/20240326b/poster0001-1.jpg" alt="æ©Ÿå¯†æƒ…å ±æ¤œçŸ¥ã«ãŠã‘ã‚‹ç”ŸæˆAIã‚’ç”¨ã„ãŸãƒ‡ãƒ¼ã‚¿æ‹¡å¼µã®æ¦‚è¦ã€èƒŒæ™¯ã€æœ¬ç ”ç©¶ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã€ææ¡ˆæ‰‹æ³•ã€å®Ÿé¨“" width="1200" height="1697" loading="lazy"><p>ã“ã®ç ”ç©¶ã§ç‰¹ã«é¢ç™½ã„ã¨æ€ã£ã¦ã„ã‚‹ãƒã‚¤ãƒ³ãƒˆã¯ä»¥ä¸‹ã®äºŒã¤ã§ã™ã€‚</p><p>ä¸€ã¤ã¯å¹…åºƒã„å¿œç”¨ã®å¯èƒ½æ€§ãŒã‚ã‚‹ã“ã¨ã§ã™ã€‚ä»Šå›ã¯ä¼æ¥­åã®æ¤œçŸ¥ã«ç€ç›®ã—ã¾ã—ãŸãŒã€ææ¡ˆã—ã¦ã„ã‚‹äº‹å®Ÿæ€§ã«æ‰ã‚ã‚Œãªã„ãƒ‡ãƒ¼ã‚¿æ‹¡å¼µã¯ã€ä»–ã®æ©Ÿå¯†æƒ…å ± (ä¾‹ãˆã°äººåãªã©) ã®ãƒ‡ãƒ¼ã‚¿æ‹¡å¼µã«ã‚‚ç°¡å˜ã«é©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã¾ãŸã€åŒæ§˜ã®è€ƒãˆæ–¹ã§æ–‡æ›¸åˆ†é¡ã‚„æ©Ÿæ¢°ç¿»è¨³ãªã©ã€ä»–ã®è‡ªç„¶è¨€èªå‡¦ç†ã‚¿ã‚¹ã‚¯ã«ã‚‚å¿œç”¨ã§ãã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><p>ãã—ã¦ã‚‚ã†ä¸€ã¤ã¯ã€äººé–“ãŒè¡Œã†ã«ã¯å°‘ã—é›£ã—ã„ãƒ‡ãƒ¼ã‚¿æ‹¡å¼µã‚’ç”ŸæˆAIã‚’ç”¨ã„ã¦è¡Œãˆã‚‹å¯èƒ½æ€§ã‚’ç¤ºã—ã¦ã„ã‚‹ç‚¹ã§ã™ã€‚ä¾‹ãˆã°ã€Œãƒ¦ãƒ¼ãƒˆãƒ”ã‚¢é£Ÿå“ã€ãªã©ã®æ¶ç©ºã®ä¼æ¥­åã‚’è€ƒãˆã‚‹ã®ã¯ã€æ•°åå€‹ç¨‹åº¦ãªã‚‰é ‘å¼µã‚Œã°ã§ãã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã§ã™ãŒã€æ•°ç™¾ãƒ»æ•°åƒã¨å¤§é‡ã«ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹ã“ã¨ã¯äººé–“ã«ã¯å°‘ã—é›£ã—ã„ä½œæ¥­ã§ã™ã€‚ãã‚Œã‚’ç”ŸæˆAIã‚’ç”¨ã„ã¦è¡Œã†ã“ã¨ã§ã€ä½ã‚³ã‚¹ãƒˆã§ãƒ‡ãƒ¼ã‚¿ã‚’æ‹¡å¼µã§ãã‚‹ã®ã¯å¬‰ã—ã„è©±ã§ã™ã€‚ã•ã‚‰ã«ã“ã†ã„ã£ãŸãƒ‡ãƒ¼ã‚¿ãŒå®Ÿéš›ã«ç²¾åº¦å‘ä¸Šã«ã‚‚å¯„ä¸ã™ã‚‹ã¨ã„ã†ç‚¹ã‚‚é¢ç™½ã„ã¨æ„Ÿã˜ã¦ã„ã¾ã™ã€‚</p><h2 id="å½“æ—¥ã®æ§˜å­"><a href="#å½“æ—¥ã®æ§˜å­" class="headerlink" title="å½“æ—¥ã®æ§˜å­"></a>å½“æ—¥ã®æ§˜å­</h2><p>ã‚ã‚ŠãŒãŸã„ã“ã¨ã«ç™ºè¡¨å½“æ—¥ã¯å¤šãã®æ–¹ã«ãƒã‚¹ã‚¿ãƒ¼ä¼šå ´ã¸è¶³ã‚’é‹ã‚“ã§ã„ãŸã ãã€ã‚³ãƒ¡ãƒ³ãƒˆãƒ»ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’ã„ãŸã ãã“ã¨ãŒã§ãã¾ã—ãŸã€‚ä»¥ä¸‹ã¯ã„ãŸã ã„ãŸã‚³ãƒ¡ãƒ³ãƒˆã®æŠœç²‹ã§ã™ãŒã€ã“ã®ä»–ã«ã‚‚ä»Šå¾Œã®ç ”ç©¶ã«ç¹‹ãŒã‚‹ã‚³ãƒ¡ãƒ³ãƒˆã‚’å¤šæ•°ã„ãŸã ãã“ã¨ãŒã§ãã€å¤§å¤‰æœ‰æ„ç¾©ãªæ™‚é–“ã§ã—ãŸã€‚</p><ul><li>ä»Šã¾ã§ã«ãªã„æ–°ã—ã„è€ƒãˆæ–¹ã®ãƒ‡ãƒ¼ã‚¿æ‹¡å¼µã ã¨æ„Ÿã˜ãŸã€‚ãã‚Œã§ã„ã¦æ€§èƒ½ã‚‚ä¸ŠãŒã£ã¦ãŠã‚Šä»Šå¾Œã®å¯èƒ½æ€§ã‚’æ„Ÿã˜ãŸ</li><li>ä»–ã®ãƒ‡ãƒ¼ã‚¿æ‹¡å¼µæ‰‹æ³•ã¨ã®çµ„ã¿åˆã‚ã›ã‚„ã€æ‹¡å¼µã™ã‚‹ãƒ‡ãƒ¼ã‚¿é‡ã®è¦³ç‚¹ã§ã®åˆ†æãŒã§ããã†</li><li>ä»Šå›ã¯ä¼æ¥­åã«ç€ç›®ã—ã¦ã„ã‚‹ãŒã€åŒã˜å›ºæœ‰è¡¨ç¾ã§ã‚‚æ–‡è„ˆã«å¿œã˜ã¦æ©Ÿå¯†æƒ…å ±ã§ã¯ãªããªã‚‹ã‚±ãƒ¼ã‚¹ã‚„ã€ãã‚‚ãã‚‚å›ºæœ‰è¡¨ç¾ã§ã¯ãªã„æ©Ÿå¯†æƒ…å ±ã‚‚ã‚ã‚‹ã¨æ€ã†ã€‚ä»Šå¾Œä¼æ¥­åä»¥å¤–ã«æ‹¡å¼µã—ã¦ã„ãã†ãˆã§è‰²ã€…ãªå±•é–‹ãŒã‚ã‚Šãã†ã ã¨æ„Ÿã˜ãŸ</li></ul><img src="/images/20240326b/1000018486.jpg" alt="1000018486.jpg" width="1200" height="836" loading="lazy"><img src="/images/20240326b/1000018487.jpg" alt="1000018487.jpg" width="1200" height="1079" loading="lazy"><h2 id="ãŠã‚ã‚Šã«"><a href="#ãŠã‚ã‚Šã«" class="headerlink" title="ãŠã‚ã‚Šã«"></a>ãŠã‚ã‚Šã«</h2><p>ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã«å…¥ç¤¾ã—ã¦ã‹ã‚‰ã¯åˆã‚ã¦ã®è¨€èªå‡¦ç†å­¦ä¼šå‚åŠ ã§ã—ãŸãŒã€ç™ºè¡¨ã‚’é€šã˜ã¦ç”£å­¦å•ã‚ãšæ§˜ã€…ãªæ–¹ã€…ã¨äº¤æµã™ã‚‹ã“ã¨ãŒã§ãã€ä»Šå¾Œã®ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚‚ã¤ãªãŒã‚‹è‰¯ã„æ©Ÿä¼šã¨ãªã‚Šã¾ã—ãŸã€‚</p><p>ç”ŸæˆAIã®ãƒãƒ«ã‚·ãƒãƒ¼ã‚·ãƒ§ãƒ³ã¨ã„ã†ä¸€è¦‹èª²é¡Œã¨ã—ã¦æŒ™ã’ã‚‰ã‚ŒãŒã¡ãªç‰¹å¾´ã‚’é€†æ‰‹ã«å–ã‚Šã€ãƒ‡ãƒ¼ã‚¿æ‹¡å¼µã«æ´»ç”¨ã™ã‚‹ã“ã¨ãŒåŠ¹æœçš„ã ã£ãŸã®ã¯éå¸¸ã«èˆˆå‘³æ·±ãã€ä»Šå›ã®ç™ºè¡¨ã‚’é€šã—ã¦æ–°ã—ã„ç™ºæƒ³ã®ç”ŸæˆAIã®æ´»ç”¨æ–¹æ³•ã‚’æç¤ºã§ããŸã‹ãªã¨æ€ã„ã¾ã™ã€‚</p><p>ç”ŸæˆAIã‚’ç­†é ­ã«æ§˜ã€…ãªæ¥­ç•Œã§è‡ªç„¶è¨€èªå‡¦ç†ã®éœ€è¦ãŒé«˜ã¾ã£ã¦ã„ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã€ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã§ã‚‚è‡ªç„¶è¨€èªå‡¦ç†ã«é–¢ã™ã‚‹ç ”ç©¶é–‹ç™ºãƒ»ç¤¾ä¼šå®Ÿè£…ã«åŠ›ã‚’å…¥ã‚Œã¦ã„ã¾ã™ã€‚ãã‚“ãªä¸­ã§ã€ä»Šå›ã®è¨€èªå‡¦ç†å­¦ä¼šã§ã®ç™ºè¡¨ã‚’é€šã—ã¦ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®è‡ªç„¶è¨€èªå‡¦ç†ã«é–¢ã™ã‚‹å–ã‚Šçµ„ã¿ã‚’å¤šãã®æ–¹ã€…ã«çŸ¥ã£ã¦ã„ãŸã ãã“ã¨ãŒã§ãã¦è‰¯ã‹ã£ãŸã§ã™ã€‚</p><p>ä»Šå¾Œã‚‚ç¶™ç¶šçš„ã«ç™ºè¡¨ã—ã¦ã„ã‘ã‚‹ã‚ˆã†ã€å¼•ãç¶šãç ”ç©¶é–‹ç™ºãªã©ã«å–ã‚Šçµ„ã‚“ã§ã„ã‘ã‚Œã°ã¨æ€ã„ã¾ã™ã€‚</p><p>æœ€å¾Œã«ã€SAIGã§ã¯è‡ªç„¶è¨€èªå‡¦ç†ã®å®Ÿç¤¾ä¼šå¿œç”¨ã‚’æ¨é€²ã—ã¦ã„ããŸã‚ã«ã€NLPãƒªã‚µãƒ¼ãƒã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã€NLPã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚’å‹Ÿé›†ã—ã¦ã„ã¾ã™ï¼<br>ã”èˆˆå‘³ã®ã‚ã‚‹æ–¹ã€ãœã²SAIGã§ä¸€ç·’ã«åƒãã¾ã—ã‚‡ã†ï¼</p><p>æ–°å’æ¡ç”¨ : <a href="https://www.future.co.jp/recruit/recruit/rec-fresh/">https://www.future.co.jp/recruit/recruit/rec-fresh/</a><br>ã‚­ãƒ£ãƒªã‚¢æ¡ç”¨ : <a href="https://www.future.co.jp/recruit/recruit/rec-career/">https://www.future.co.jp/recruit/recruit/rec-career/</a></p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/DataScience/">DataScience</category>
      
      
      <category domain="https://future-architect.github.io/tags/%E6%A9%9F%E6%A2%B0%E5%AD%A6%E7%BF%92/">æ©Ÿæ¢°å­¦ç¿’</category>
      
      <category domain="https://future-architect.github.io/tags/NLP/">NLP</category>
      
      <category domain="https://future-architect.github.io/tags/%E5%AD%A6%E4%BC%9A/">å­¦ä¼š</category>
      
      <category domain="https://future-architect.github.io/tags/LLM/">LLM</category>
      
      <category domain="https://future-architect.github.io/tags/%E5%9B%BA%E6%9C%89%E8%A1%A8%E7%8F%BE%E6%8A%BD%E5%87%BA/">å›ºæœ‰è¡¨ç¾æŠ½å‡º</category>
      
      <category domain="https://future-architect.github.io/tags/NLP2024/">NLP2024</category>
      
      
      <comments>https://future-architect.github.io/articles/20240326b/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Terraformã®å®Ÿè£…ã‚³ãƒ¼ãƒ‰ã‚’ã€å‹•ã‹ã—ãªãŒã‚‰èª­ã‚€</title>
      <link>https://future-architect.github.io/articles/20240326a/</link>
      <guid>https://future-architect.github.io/articles/20240326a/</guid>
      <pubDate>Mon, 25 Mar 2024 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;img src=&quot;/images/20240326a/top.png&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;539&quot;&gt;

&lt;p&gt;&lt;a href=&quot;/articles/20240311a/&quot;&gt;Terraformé€£è¼‰2024&lt;/a&gt;</description>
          
        
      
      
      
      <content:encoded><![CDATA[<img src="/images/20240326a/top.png" alt="" width="800" height="539"><p><a href="/articles/20240311a/">Terraformé€£è¼‰2024</a> ã®10æœ¬ç›®è¨˜äº‹ã§ã™ã€‚</p><h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>ã“ã‚“ã«ã¡ã¯ã€‚CSIGï¼ˆCyber Security Innovation Groupï¼‰ã®æ£šäº•ã§ã™ã€‚</p><p>Terraform é€£è¼‰ã¨ã„ã†ã“ã¨ã§</p><ul><li>ãã†ã„ãˆã°ã€å®Ÿè£…ã‚³ãƒ¼ãƒ‰ã¯ Go ã§æ›¸ã‹ã‚Œã¦ã„ãŸãª</li><li>ã‚³ãƒãƒ³ãƒ‰ã®ä½¿ã„æ–¹ã¯ã‚¤ãƒ³ãƒ•ãƒ©ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®çš†æ§˜ãŒæ›¸ã„ã¦ãã‚Œã‚‹ã¯ãšãªã®ã§ã€ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã—ã‚ˆã†ã‹ãª</li></ul><p>ã¨ã®è€ƒãˆã«è‡³ã‚Šã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è‡ªä½“ã‚’ãƒ–ãƒ­ã‚°åŒ–ã—ã¾ã—ãŸã€‚<br>å‚è€ƒã«ãªã‚‹ç‚¹ãŒ1ã¤ã§ã‚‚ã‚ã‚Œã°å¹¸ã„ã§ã™ã€‚</p><h1 id="ã‚¨ãƒ‡ã‚£ã‚¿ã®æº–å‚™"><a href="#ã‚¨ãƒ‡ã‚£ã‚¿ã®æº–å‚™" class="headerlink" title="ã‚¨ãƒ‡ã‚£ã‚¿ã®æº–å‚™"></a>ã‚¨ãƒ‡ã‚£ã‚¿ã®æº–å‚™</h1><p>ä»Šå›ã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã§ã¯ VSCode ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚</p><p>Go ã®ã‚³ãƒ¼ãƒ‰ã‚¸ãƒ£ãƒ³ãƒ—ã‚„ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã®ãŸã‚ã€ä»¥ä¸‹ã®æ‹¡å¼µæ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¾ã™ã€‚</p><ul><li><a href="https://marketplace.visualstudio.com/items?itemName=golang.go">Go</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=766b.go-outliner">Go Outliner</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=premparihar.gotestexplorer">Go Test Explorer</a></li></ul><p>ã¾ãŸã€ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®ãŠä¾›ã¨ã—ã¦ã€ŒGitHub Copilotã€ã‚‚è¿½åŠ ã—ã¾ã™ã€‚<br>GitHub ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ Copilot ã‚’æœ‰åŠ¹åŒ–ã™ã‚‹æ–¹æ³•ã‚„ã€VSCode ã®æ‹¡å¼µæ©Ÿèƒ½ã¨ãƒªãƒ³ã‚¯ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ã¯ã€ãƒãƒƒãƒˆä¸Šã«å¤šæ•°æƒ…å ±ãŒã‚ã‚Šã¾ã™ã®ã§ãã¡ã‚‰ã‚’ã”å‚ç…§ãã ã•ã„ã€‚ï¼ˆex. <a href="https://docs.github.com/ja/copilot">GitHub Copilot ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>ï¼‰</p><ul><li><a href="https://marketplace.visualstudio.com/items?itemName=GitHub.copilot">GitHub Copilot</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=GitHub.copilot-chat">GitHub Copilot Chat</a></li></ul><p>ã€Œã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã§ç”Ÿæˆç³»AIã‚’ä½¿ã†ã®ï¼Ÿã€ã¨ã„ã†ç–‘å•ã‚’æŒãŸã‚ŒãŸæ–¹å‘ã‘ã¸ã®å›ç­”ã¨ã—ã¦ã€GitHub Copilotã«ã¯ã€Œã‚³ãƒ¼ãƒ‰ç”Ÿæˆæ©Ÿèƒ½ã€ä»¥å¤–ã«ã€ã€Œã‚³ãƒ¼ãƒ‰ã®èª¬æ˜æ©Ÿèƒ½ã€ãŒã‚ã‚Šã¾ã™ã€‚</p><p>ä½¿ã„æ–¹ã¨ã—ã¦ã¯ã€</p><ol><li>è§£èª¬ã—ã¦æ¬²ã—ã„ã‚³ãƒ¼ãƒ‰ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆã™ã‚‹</li><li><code>Ctrl + i</code> ã«ã‚ˆã‚ŠCopilotã®ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’è¡¨ç¤ºã™ã‚‹</li><li><code>/explain</code>ã‚’å…¥åŠ›ã™ã‚‹</li></ol><p>ã®3ã‚¹ãƒ†ãƒƒãƒ—ã§åˆ©ç”¨å¯èƒ½ã§ã™ã€‚</p><p>VSCodeã§è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹å®Ÿã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã§è§£èª¬ã—ã¦ãã‚Œã¾ã™ã®ã§ã€é€”ä¸­ã«è©°ã¾ã‚‹éƒ¨åˆ†ãŒã‚ã£ãŸã¨ã—ã¦ã‚‚ã€Copilotã®ã‚µãƒãƒ¼ãƒˆã«ã‚ˆã‚Šå¤§æŠµã¯ç‹¬åŠ›ã§è§£æ±ºå¯èƒ½ã§ã™ã€‚OSSã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã§ã¯ã€ã¾ã•ã«ã“ã®è§£èª¬æ©Ÿèƒ½ãŒéå¸¸ã«ä¾¿åˆ©ã ã¨æ„Ÿã˜ã¦ã„ã¾ã™ã€‚</p><h1 id="å®Ÿè¡Œç’°å¢ƒã®æº–å‚™"><a href="#å®Ÿè¡Œç’°å¢ƒã®æº–å‚™" class="headerlink" title="å®Ÿè¡Œç’°å¢ƒã®æº–å‚™"></a>å®Ÿè¡Œç’°å¢ƒã®æº–å‚™</h1><p>ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¸­ã«ã¯ã€Œå®Ÿéš›ã«å‹•ã‹ã—ã¦ã¿ãªã„ã¨ã€ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒã¤ãã«ãã„å‡¦ç†ã€ãŒè¦‹ã¤ã‹ã‚Šã¾ã™ã€‚ã„ã–ã¨ã„ã†æ™‚ã«ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§å‹•ã‹ã›ã‚‹ã‚ˆã†ã«ã€Terraformã®ãƒ“ãƒ«ãƒ‰ã€å‹•ä½œæ¤œè¨¼ãŒå¯èƒ½ãªç’°å¢ƒã‚’æº–å‚™ã—ã¾ã™ã€‚</p><p>ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯ã“ã¡ã‚‰ã® <a href="https://github.com/hashicorp/terraform/tree/main">hashicorp&#x2F;terraform</a> ãƒªãƒã‚¸ãƒˆãƒªã«å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚<br>Goã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã—ãŸã¨ã“ã‚ã€ãƒˆãƒƒãƒ—ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã® <a href="https://github.com/hashicorp/terraform/blob/main/.go-version"><code>.go-version</code></a> ã« <code>1.22.1</code>ï¼ˆåŸ·ç­†æ™‚ç‚¹ï¼‰ã¨è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã—ãŸã€‚</p><p>åŸ·ç­†æ™‚ç‚¹ã§ã® <a href="https://go.dev/dl/">Go All releases</a> ã‚‚ <code>1.22.1</code> ãªã®ã§ã€æœ€æ–°ã®Goãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«å¯¾å¿œã—ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚</p><blockquote><p>&#x3D;&#x3D; å®£ä¼ &#x3D;&#x3D;<br>Futureã§ã¯Goãƒªãƒªãƒ¼ã‚¹é€£è¼‰ã‚’å®Ÿæ–½ã—ã¦ãŠã‚Šã¾ã™ã€‚<br><a href="https://future-architect.github.io/articles/20240129a/">Go 1.22ãƒªãƒªãƒ¼ã‚¹é€£è¼‰å§‹ã¾ã‚Šã¾ã™</a><br><a href="https://future-architect.github.io/articles/20240307a/">Goãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã‹ã‚‰æŠ€è¡“ãƒ–ãƒ­ã‚°ã‚’æ›¸ãæµã‚ŒåŸºç¤</a></p></blockquote><p>ãƒªãƒã‚¸ãƒˆãƒªå´ã§Goã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒæŒ‡å®šã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã‚‚ãã‚Œã«åˆã‚ã›ã¦æ§‹ç¯‰ã—ã¾ã™ã€‚</p><p>ã¡ãªã¿ã«ã€ç§ã¯ <a href="https://asdf-vm.com/">asdf</a> ã‚’åˆ©ç”¨ã—ã¦é–‹ç™ºè¨€èªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚asdf ã®åˆ©ç”¨æ–¹æ³•ã¯ã€å·¦è¨˜ã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€ãŠã‚ˆã³ã€ã“ã¡ã‚‰ã®è§£èª¬è¨˜äº‹ï¼ˆ<a href="https://qiita.com/RuyPKG/items/d4ea8baab1e0a17ae927">asdf ã§é–‹ç™ºè¨€èªã¨åˆ©ç”¨ãƒ„ãƒ¼ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†</a>ï¼‰ã‚’ã”è¦§ãã ã•ã„ã€‚</p><p><code>$ go version</code> å®Ÿè¡Œæ™‚ã«ã€<code>1.22.1</code> ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚Œã°ã€å®Ÿè¡Œç’°å¢ƒã®æº–å‚™ã¯å®Œäº†ã§ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ go version</span><br><span class="line">go version go1.22.1 linux/amd64</span><br></pre></td></tr></table></figure><h1 id="ãƒªãƒã‚¸ãƒˆãƒªã®å–å¾—ã€ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ"><a href="#ãƒªãƒã‚¸ãƒˆãƒªã®å–å¾—ã€ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ" class="headerlink" title="ãƒªãƒã‚¸ãƒˆãƒªã®å–å¾—ã€ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ"></a>ãƒªãƒã‚¸ãƒˆãƒªã®å–å¾—ã€ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</h1><p>ãã‚Œã§ã¯ã•ã£ããã€Terraform ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—ã—ã¦ã„ãã¾ã™ã€‚<br>ã¨ã„ã£ã¦ã‚‚ã€ã“ã“ã§ã¯ <a href="https://github.com/hashicorp/terraform/tree/main">hashicorp&#x2F;terraform</a> ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã™ã‚‹ã ã‘ã§ã™ã€‚</p><p>ã‚¯ãƒ­ãƒ¼ãƒ³ã«æˆåŠŸã—ãŸã‚‰ã€ã¾ãšã¯ãƒ†ã‚¹ãƒˆã«é€šéã™ã‚‹ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚</p><details><summary>ãƒ†ã‚¹ãƒˆå®Ÿè¡Œãƒ­ã‚°</summary><div><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> terraform/</span><br><span class="line"></span><br><span class="line">$ go <span class="built_in">test</span> ./...</span><br><span class="line">?       github.com/hashicorp/terraform/internal/backend [no <span class="built_in">test</span> files]</span><br><span class="line">ok      github.com/hashicorp/terraform  0.065s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/addrs   0.030s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/backend/backendbase     0.007s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/backend/backendrun      0.009s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/backend/init    0.051s</span><br><span class="line">?       github.com/hashicorp/terraform/internal/cloudplugin/cloudproto1 [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/cloudplugin/mock_cloudproto1    [no <span class="built_in">test</span> files]</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/backend/local   6.211s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/backend/remote  4.009s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/backend/remote-state/http       7.266s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/backend/remote-state/inmem      0.010s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/builtin/providers/terraform     0.150s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/builtin/provisioners/file       0.008s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/builtin/provisioners/local-exec 0.196s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/builtin/provisioners/remote-exec        2.050s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/checks  0.060s</span><br><span class="line">?       github.com/hashicorp/terraform/internal/command/jsonformat/collections  [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/command/jsonformat/computed     [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/command/jsonformat/jsondiff     [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/command/jsonformat/structured   [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/command/testing [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/e2e     [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/experiments     [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/getmodules      [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/grpcwrap        [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/lang/langrefs   [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/lang/marks      [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/lang/types      [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/modsdir [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/plans/planproto [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/plugin/mock_proto       [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/plugin6/mock_proto      [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/provider-simple [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/provider-simple/main    [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/provider-simple-v6      [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/provider-simple-v6/main [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/provider-terraform/main [no <span class="built_in">test</span> files]</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/cloud   36.011s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/cloud/cloudplan 0.111s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/cloud/e2e       8.538s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/cloudplugin     0.239s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/cloudplugin/cloudplugin1        0.029s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/collections     0.013s</span><br><span class="line">?       github.com/hashicorp/terraform/internal/providers/testing       [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/provisioner-local-exec/main     [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/provisioners    [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/registry/test   [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/replacefile     [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/rpcapi/dynrpcserver     [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/rpcapi/dynrpcserver/generator   [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/rpcapi/terraform1       [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/stacks/stackconfig/stackconfigtypes     [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/stacks/stackconfig/typeexpr     [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/schemarepo/loadschemas  [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/schemarepo      [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/stacks/stackaddrs       [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/stacks/stackruntime/hooks       [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/stacks/stackruntime/testing     [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/stacks/stackutils       [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/tfplugin5       [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/internal/tfplugin6       [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/tools/loggraphdiff       [no <span class="built_in">test</span> files]</span><br><span class="line">?       github.com/hashicorp/terraform/tools/protobuf-compile   [no <span class="built_in">test</span> files]</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/command 88.238s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/command/arguments       0.014s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/command/cliconfig       0.027s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/command/clistate        0.010s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/command/e2etest 30.692s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/command/format  0.010s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/command/jsonchecks      0.009s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/command/jsonconfig      0.013s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/command/jsonformat      0.111s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/command/jsonformat/computed/renderers   0.035s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/command/jsonformat/differ       0.058s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/command/jsonformat/structured/attribute_path    0.014s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/command/jsonfunction    0.019s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/command/jsonplan        0.028s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/command/jsonprovider    0.024s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/command/jsonstate       0.036s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/command/views   3.473s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/command/views/json      0.053s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/command/webbrowser      0.016s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/command/workdir 0.029s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/communicator    1.049s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/communicator/remote     0.010s [no tests to run]</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/communicator/shared     0.005s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/communicator/ssh        3.183s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/communicator/winrm      0.045s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/configs 7.155s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/configs/configload      0.888s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/configs/configschema    0.038s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/configs/configtesting   0.004s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/configs/hcl2shim        0.036s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/copy    0.012s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/dag     2.168s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/depsfile        0.214s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/didyoumean      0.012s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/genconfig       0.051s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/getmodules/moduleaddrs  0.063s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/getproviders    4.428s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/getproviders/providerreqs       0.101s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/helper/slowmessage      0.105s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/httpclient      0.020s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/initwd  0.312s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/instances       0.019s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/ipaddr  0.026s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/lang    0.250s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/lang/blocktoattr        0.016s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/lang/funcs      0.792s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/lang/globalref  0.326s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/logging 0.004s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/moduledeps      0.021s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/moduletest      0.203s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/moduletest/config       0.028s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/moduletest/hcl  0.045s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/moduletest/mocking      0.025s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/namedvals       0.010s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/plans   0.018s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/plans/deferring 0.010s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/plans/objchange 0.115s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/plans/planfile  0.331s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/plugin  0.040s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/plugin/convert  0.027s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/plugin/discovery        0.013s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/plugin6 0.028s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/plugin6/convert 0.022s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/promising       0.041s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/providercache   0.232s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/providers       0.012s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/refactoring     0.261s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/registry        3.826s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/registry/regsrc 0.008s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/registry/response       0.010s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/releaseauth     0.167s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/repl    0.096s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/rpcapi  0.263s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/stacks/stackconfig      0.017s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/stacks/stackplan        0.029s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/stacks/stackruntime     0.484s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/stacks/stackruntime/internal/stackeval  1.489s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/stacks/stackstate       0.022s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/stacks/stackstate/statekeys     0.028s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/stacks/tfstackdata1     0.017s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/states  0.018s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/states/remote   0.032s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/states/statefile        0.070s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/states/statemgr 5.951s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/terminal        0.005s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/terraform       8.988s</span><br><span class="line">ok      github.com/hashicorp/terraform/internal/tfdiags 0.012s</span><br><span class="line">ok      github.com/hashicorp/terraform/version  0.003s</span><br></pre></td></tr></table></figure></div></details><p>ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ã¿ãŸã¨ã“ã‚ã€<code>[no test files]</code> ãŒå¤šæ•°è¦‹ã¤ã‹ã‚Šã¾ã—ãŸã€‚<br>å°‘ã—æ°—ã«ãªã‚Šã¾ã™ã®ã§ã€ãƒ†ã‚¹ãƒˆã®ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’è¦‹ã¦ã¿ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -cover</span><br><span class="line">Terraform has no <span class="built_in">command</span> named <span class="string">&quot;bar&quot;</span>.</span><br><span class="line"></span><br><span class="line">To see all of Terraform<span class="string">&#x27;s top-level commands, run:</span></span><br><span class="line"><span class="string">  terraform -help</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">PASS</span></span><br><span class="line"><span class="string">coverage: 36.7% of statements</span></span><br><span class="line"><span class="string">ok      github.com/hashicorp/terraform  0.049s</span></span><br></pre></td></tr></table></figure><p>ä¸Šè¨˜ãƒ­ã‚°ã«ã¯</p><blockquote><p>coverage: 36.7% of statements</p></blockquote><p>ã¨ã‚ã‚Šã¾ã™ã®ã§ã€Terraform å®Ÿè£…ã‚³ãƒ¼ãƒ‰ã®ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ç‡ã¯ <code>36.7%</code> ã§ã™ã€‚<br>æ•°å­—ã®æ˜¯éã¯ã•ã¦ãŠã„ã¦ã€ãƒ†ã‚¹ãƒˆãŒé€šéã™ã‚‹ã“ã¨ã¯ç¢ºèªã§ãã¾ã—ãŸã€‚</p><h1 id="ãƒ“ãƒ«ãƒ‰ã—ã¦å‹•ã‹ã—ã¦ã¿ã‚‹"><a href="#ãƒ“ãƒ«ãƒ‰ã—ã¦å‹•ã‹ã—ã¦ã¿ã‚‹" class="headerlink" title="ãƒ“ãƒ«ãƒ‰ã—ã¦å‹•ã‹ã—ã¦ã¿ã‚‹"></a>ãƒ“ãƒ«ãƒ‰ã—ã¦å‹•ã‹ã—ã¦ã¿ã‚‹</h1><p><code>terraform</code> ãŒã‚³ãƒãƒ³ãƒ‰ã®1ã¤ã§ã‚ã‚‹ä»¥ä¸Šã€ã€Œãƒ“ãƒ«ãƒ‰ã—ã¦å‹•ã‹ã›ã‚‹ã€ã¯ãšãªã®ã§ã€å®Ÿéš›ã«è©¦ã—ã¦ã¿ã¾ã™ã€‚</p><p>Goè¨€èªã§ã¯ç‹é“ã® <a href="https://github.com/hashicorp/terraform/blob/main/Makefile">Makefile</a> ã‚’è¦‹ãŸã¨ã“ã‚ã€<code>go build</code> ã«ç›¸å½“ã—ãã†ãªã‚³ãƒãƒ³ãƒ‰ã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚<br>ãŸã ã—ã€ã„ãã¤ã‹ã®ã‚³ãƒãƒ³ãƒ‰ãŒ <code>$(CURDIR)/scripts/</code> é…ä¸‹ã®ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å‚ç…§ã—ã¦ã„ã¾ã™ã®ã§ã€å½“è©²ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ãŠç›®å½“ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒãªã„ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">ls</span> -l scripts/</span><br><span class="line">total 40</span><br><span class="line">-rwxr-xr-x 1 blog-user blog-user 2853 Mar 25 05:19 build.sh</span><br><span class="line">-rwxr-xr-x 1 blog-user blog-user  958 Mar 24 22:52 changelog-links.sh</span><br><span class="line">-rwxr-xr-x 1 blog-user blog-user  610 Mar 24 22:52 copyright.sh</span><br><span class="line">-rwxr-xr-x 1 blog-user blog-user 1171 Mar 24 22:52 debug-terraform</span><br><span class="line">-rwxr-xr-x 1 blog-user blog-user  344 Mar 24 22:52 exhaustive.sh</span><br><span class="line">-rwxr-xr-x 1 blog-user blog-user  401 Mar 24 22:52 gofmtcheck.sh</span><br><span class="line">-rwxr-xr-x 1 blog-user blog-user  351 Mar 24 22:52 gogetcookie.sh</span><br><span class="line">-rwxr-xr-x 1 blog-user blog-user 2730 Mar 24 22:52 goimportscheck.sh</span><br><span class="line">-rwxr-xr-x 1 blog-user blog-user  666 Mar 24 22:52 staticcheck.sh</span><br><span class="line">-rwxr-xr-x 1 blog-user blog-user 1096 Mar 24 22:52 syncdeps.sh</span><br></pre></td></tr></table></figure><p><code>scripts/</code> é…ä¸‹ã«ã€<a href="https://github.com/hashicorp/terraform/blob/main/scripts/build.sh"><code>build.sh</code></a> ã¨ã„ã†ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸã€‚<br>ã¾ãŸã€VSCode ã§ <code>Ctrl + Shift + f</code> ã‚’å®Ÿè¡Œã—ã¦ <code>build.sh</code> ã‚’æ¤œç´¢ã™ã‚‹ã¨ã€<a href="https://github.com/hashicorp/terraform/blob/main/Dockerfile#L23">Dockerfile</a> ã®ä¸­ã§ã“ã®ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒå‘¼ã°ã‚Œã¦ã„ã‚‹ã“ã¨ã‚‚ç¢ºèªã§ãã¾ã™ã€‚</p><p>ã‚·ã‚§ãƒ«å†’é ­ã«ä»¥ä¸‹ã®è¨˜è¼‰ãŒã‚ã‚Šã€<code>bash</code> ã«ã‚ˆãƒªã‚³ãƒ¼ãƒ«ã•ã‚ŒãŸå¾Œã€1ã¤ä¸Šã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ãƒ“ãƒ«ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹ã‚’å‹•ã‹ã—ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚</p><figure class="highlight sh"><figcaption><span>build.sh</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment"># Get the parent directory of where this script is.</span></span><br><span class="line">SOURCE=<span class="string">&quot;<span class="variable">$&#123;BASH_SOURCE[0]&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">while</span> [ -h <span class="string">&quot;<span class="variable">$SOURCE</span>&quot;</span> ] ; <span class="keyword">do</span> SOURCE=<span class="string">&quot;<span class="subst">$(readlink <span class="string">&quot;<span class="variable">$SOURCE</span>&quot;</span>)</span>&quot;</span>; <span class="keyword">done</span></span><br><span class="line">DIR=<span class="string">&quot;<span class="subst">$( cd -P <span class="string">&quot;<span class="subst">$( dirname <span class="string">&quot;<span class="variable">$SOURCE</span>&quot;</span> )</span>/..&quot;</span> &amp;&amp; pwd )</span>&quot;</span></span><br></pre></td></tr></table></figure><p>ä¸Šè¨˜ã‚’è¸ã¾ãˆã¦ã€ã•ã£ãããƒ“ãƒ«ãƒ‰ã—ã¦ã¿ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ /usr/bin/bash build.sh</span><br><span class="line">==&gt; Removing old directory...</span><br><span class="line">==&gt; Installing gox...</span><br><span class="line">==&gt; Building...</span><br><span class="line">Number of parallel builds: 11</span><br><span class="line"></span><br><span class="line">--&gt;   solaris/amd64: github.com/hashicorp/terraform</span><br><span class="line">--&gt;   windows/amd64: github.com/hashicorp/terraform</span><br><span class="line">--&gt;     freebsd/arm: github.com/hashicorp/terraform</span><br><span class="line">--&gt;     openbsd/386: github.com/hashicorp/terraform</span><br><span class="line">--&gt;   openbsd/amd64: github.com/hashicorp/terraform</span><br><span class="line">--&gt;       linux/arm: github.com/hashicorp/terraform</span><br><span class="line">--&gt;       linux/386: github.com/hashicorp/terraform</span><br><span class="line">--&gt;     freebsd/386: github.com/hashicorp/terraform</span><br><span class="line">--&gt;     linux/amd64: github.com/hashicorp/terraform</span><br><span class="line">--&gt;   freebsd/amd64: github.com/hashicorp/terraform</span><br><span class="line">--&gt;     windows/386: github.com/hashicorp/terraform</span><br></pre></td></tr></table></figure><p>è¨ˆ11å€‹ã®ãƒ“ãƒ«ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹ãŒä¸¦åˆ—ã§å‹•ã„ã¦ã„ã¾ã™ã€‚</p><p>ã“ã®ã¾ã¾ã—ã°ã‚‰ãæ”¾ç½®ã—ã¦ã„ã‚Œã°ã€11ç’°å¢ƒåˆ†ã™ã¹ã¦ã® <code>terraform</code> å®Ÿè¡Œãƒã‚¤ãƒŠãƒªãŒä½œæˆã•ã‚Œã‚‹ã®ã§ã™ãŒã€ç§ã®PCç’°å¢ƒã§ã¯ä»¥ä¸‹ã®å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚</p><img src="/images/20240326a/disc.png" alt="disc.png" width="544" height="170" loading="lazy"><p>ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ã‚¯ãƒ­ãƒ¼ãƒ³ã—ãŸã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰å…¨ä½“ã¨ã€ãƒ“ãƒ«ãƒ‰ã§ç”Ÿæˆã—ãŸå®Ÿè¡Œãƒã‚¤ãƒŠãƒªã®ãƒ€ãƒ–ãƒ«ãƒ‘ãƒ³ãƒã«ã‚ˆã‚Šã€ãƒ­ãƒ¼ã‚«ãƒ« PC ãŒæ‚²é³´ã‚’ä¸Šã’ã¦ã„ã¾ã—ãŸã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">du</span> -h terraform/bin/terraform</span><br><span class="line">119M    terraform</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">du</span> -h terraform/</span><br><span class="line">...</span><br><span class="line">820M    terraform/</span><br></pre></td></tr></table></figure><p>ä½•ã¨ã‹ãªã‚‰ãªã„ã‹ï¼Ÿã¨ <code>build.sh</code> ã‚’èª­ã¿é€²ã‚ãŸã¨ã“ã‚ã€ç’°å¢ƒå¤‰æ•° <code>TF_DEV</code> ã«å€¤ã‚’è¨­å®šã™ã‚Œã°ã€ãƒ“ãƒ«ãƒ‰ç’°å¢ƒã ã‘ã®å®Ÿè¡Œãƒã‚¤ãƒŠãƒªã‚’ç”Ÿæˆã—ã¦ãã‚Œã‚‹ã¨ã‚ã‚Šã¾ã—ãŸã€‚</p><figure class="highlight sh"><figcaption><span>build.sh</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment"># If its dev mode, only build for ourself</span></span><br><span class="line"><span class="keyword">if</span> [[ -n <span class="string">&quot;<span class="variable">$&#123;TF_DEV&#125;</span>&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">    XC_OS=$(go <span class="built_in">env</span> GOOS)</span><br><span class="line">    XC_ARCH=$(go <span class="built_in">env</span> GOARCH)</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><p>ã¾ãŸã€<code>TF_DEV</code> ã‚’è¨­å®šã—ãªã„å ´åˆã«ã¯ã€ãƒ“ãƒ«ãƒ‰ã—ãŸå®Ÿè¡Œãƒã‚¤ãƒŠãƒªã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–ãŒè¡Œã‚ã‚Œã‚‹ã¨ã®è¨˜è¼‰ã‚‚è¦‹ã¤ã‹ã‚Šã¾ã—ãŸã€‚</p><figure class="highlight sh"><figcaption><span>build.sh</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$&#123;TF_DEV&#125;</span>x&quot;</span> = <span class="string">&quot;x&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="comment"># Zip and copy to the dist dir</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;==&gt; Packaging...&quot;</span></span><br><span class="line">    <span class="keyword">for</span> PLATFORM <span class="keyword">in</span> $(find ./pkg -mindepth 1 -maxdepth 1 -<span class="built_in">type</span> d); <span class="keyword">do</span></span><br><span class="line">        OSARCH=$(<span class="built_in">basename</span> <span class="variable">$&#123;PLATFORM&#125;</span>)</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;--&gt; <span class="variable">$&#123;OSARCH&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">pushd</span> <span class="variable">$PLATFORM</span> &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">        zip ../<span class="variable">$&#123;OSARCH&#125;</span>.zip ./*</span><br><span class="line">        <span class="built_in">popd</span> &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><p>ä»Šå›ã¯ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§ã®ã¿ãƒ“ãƒ«ãƒ‰ã€å‹•ä½œæ¤œè¨¼ãŒã§ãã‚Œã°ååˆ†ã§ã™ã®ã§ã€ç’°å¢ƒå¤‰æ•° <code>TF_DEV</code> ã‚’è¨­å®šã—å†ãƒ“ãƒ«ãƒ‰ã—ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">export</span> TF_DEV=<span class="built_in">yes</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$TF_DEV</span></span><br><span class="line"><span class="built_in">yes</span></span><br><span class="line"></span><br><span class="line">$ go <span class="built_in">env</span> GOOS</span><br><span class="line">linux</span><br><span class="line"></span><br><span class="line">$ go <span class="built_in">env</span> GOARCH</span><br><span class="line">amd64</span><br><span class="line"></span><br><span class="line">$ /usr/bin/bash build.sh</span><br><span class="line">==&gt; Removing old directory...</span><br><span class="line">==&gt; Building...</span><br><span class="line">Number of parallel builds: 11</span><br><span class="line"></span><br><span class="line">--&gt;     linux/amd64: github.com/hashicorp/terraform</span><br><span class="line">==&gt; Creating GOPATH/bin directory...</span><br><span class="line"></span><br><span class="line">==&gt; Results:</span><br><span class="line">total 119M</span><br><span class="line">-rwxr-xr-x 1 blog-user blog-user 119M Mar 25 03:45 terraform</span><br></pre></td></tr></table></figure><p>ç„¡äº‹ã«ã€<code>linux/amd64</code> åˆ†ã®ãƒ“ãƒ«ãƒ‰ã«æˆåŠŸã—ã¾ã—ãŸã€‚<br>å®Ÿè¡Œãƒã‚¤ãƒŠãƒªã¯ã€ä»¥ä¸‹2ã¤ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å‡ºåŠ›ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><ul><li>terraform&#x2F;bin</li><li>GOPATH&#x2F;bin</li></ul><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ ./terraform/bin/terraform version</span><br><span class="line">Terraform v1.9.0-dev</span><br><span class="line">on linux_amd64</span><br></pre></td></tr></table></figure><p>ã“ã“ã¾ã§ã®æ“ä½œã«ã‚ˆã‚Šã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ãƒ“ãƒ«ãƒ‰ã‹ã‚‰ã€ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œæ‰‹é †ã¾ã§ç¢ºèªã§ãã¾ã—ãŸã€‚</p><p>ç¶šã„ã¦ã€ã‚³ãƒ¼ãƒ‰ã«æ‰‹ã‚’åŠ ãˆãŸå ´åˆã«ã¯ã€ãƒ“ãƒ«ãƒ‰å¾Œã®ã‚³ãƒãƒ³ãƒ‰ä¸­èº«ã«åæ˜ ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’æ¤œè¨¼ã—ã¦ã¿ã¾ã™ã€‚</p><p>ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã® <code>version</code> ãŒåˆ†ã‹ã‚Šã‚„ã™ã„ã®ã§ã€ä»¥ä¸‹ã®ãƒ­ã‚°ã‚’è¿½åŠ ã—ã¾ã™ã€‚<br>ï¼ˆ<a href="https://github.com/hashicorp/terraform/blob/main/internal/command/version.go#L81-L84">å¯¾å¿œç®‡æ‰€</a>ï¼‰</p><figure class="highlight go"><figcaption><span>version.go</span></figcaption><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">fmt.Fprintf(&amp;versionString, <span class="string">&quot;Terraform v%s&quot;</span>, c.Version)</span><br><span class="line"><span class="keyword">if</span> c.VersionPrerelease != <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line"> fmt.Fprintf(&amp;versionString, <span class="string">&quot;-%s&quot;</span>, c.VersionPrerelease)</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>â†“</p><figure class="highlight go"><figcaption><span>version.go</span></figcaption><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">fmt.Println(<span class="string">&quot;ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèªã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã¿ãŸã€‚&quot;</span>) <span class="comment">// è¿½åŠ </span></span><br><span class="line">fmt.Fprintf(&amp;versionString, <span class="string">&quot;Terraform v%s&quot;</span>, c.Version)</span><br><span class="line"><span class="keyword">if</span> c.VersionPrerelease != <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line"> fmt.Fprintf(&amp;versionString, <span class="string">&quot;-%s&quot;</span>, c.VersionPrerelease)</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>ã“ã®1è¡ŒãŒè¿½è¨˜ã•ã‚ŒãŸçŠ¶æ…‹ã§å®Ÿè¡Œãƒã‚¤ãƒŠãƒªã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã¨ã€ã‚³ãƒãƒ³ãƒ‰ã®ãƒ­ã‚°å‡ºåŠ›ãŒå¢—ãˆã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã§ãã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ /usr/bin/bash ./terraform/scripts/build.sh</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">$ ./terraform/bin/terraform version</span><br><span class="line">ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèªã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã¿ãŸã€‚</span><br><span class="line">Terraform v1.9.0-dev</span><br><span class="line">on linux_amd64</span><br></pre></td></tr></table></figure><h1 id="ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã‹ã‚‰è¦‹ã¦ã„ã"><a href="#ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã‹ã‚‰è¦‹ã¦ã„ã" class="headerlink" title="ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã‹ã‚‰è¦‹ã¦ã„ã"></a>ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã‹ã‚‰è¦‹ã¦ã„ã</h1><p>ã“ã“ã¾ã§ãŒäº‹å‰æº–å‚™ã§ã™ã€‚<br>ã•ã£ããã€Terraform ã®å®Ÿã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã„ãã¾ã™ã€‚</p><p>ã¾ãšã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å§‹ã¾ã‚Šã¨ãªã‚‹ã€Œã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã€ã‚’æ¢ã—ã¾ã™ã€‚</p><p>Go ã§ã‚ã‚Œã°</p><ul><li>main.go</li><li>func main() {â€¦}</li></ul><p>ãŒãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚<br>ãƒˆãƒƒãƒ—ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã®ã€Œ<a href="https://github.com/hashicorp/terraform/blob/main/main.go#L63-L65">terraform&#x2F;main.go</a>ã€ã«ä»¥ä¸‹ã®è¨˜è¿°ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"> os.Exit(realMain())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆæ‰‹ã€<code>main()</code> ã®ä¸­ã§ <code>realMain()</code>ï¼ˆç›´è¨³ã™ã‚‹ã¨ã€Œæœ¬å½“ã®mainã€ï¼‰ã‚’å‘¼ã³å‡ºã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚<br>å‘¼ã³å‡ºã—å…ˆã®é–¢æ•°ã‚’è¦‹ã‚‹ã¨ã€ä»Šåº¦ã¯ defer ã§ <code>logging.PanicHandler()</code> ã‚’å‘¼ã³å‡ºã—ã¦ã„ã‚‹ã‚ˆã†ãªã®ã§ã€ã“ã®é–¢æ•°ã®ä¸­èº«ã‚’è¦‹ã¦ã¿ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">realMain</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line"> <span class="keyword">defer</span> logging.PanicHandler()</span><br><span class="line"> ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>VSCode ã®ã‚³ãƒ¼ãƒ‰ã‚¸ãƒ£ãƒ³ãƒ—ãŒæœ‰åŠ¹ã¨ãªã£ã¦ã„ã‚Œã°ã€Ctrl ã‚’æŠ¼ã—ãªãŒã‚‰å¯¾è±¡é–¢æ•°ã‚’å·¦ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€é–¢æ•°ã®å®šç¾©å…ƒã«ã‚¸ãƒ£ãƒ³ãƒ—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><h2 id="PanicHandler"><a href="#PanicHandler" class="headerlink" title="PanicHandler()"></a><code>PanicHandler()</code></h2><p>ã€Œ<a href="https://github.com/hashicorp/terraform/blob/main/internal/logging/panic.go#L41">PanicHandler()ã®å®Ÿè£…</a>ã€ã‚’è¦‹ã¾ã™ã¨ã€<strong>TERRAFORM CRASH</strong> ã¨ã„ã†ä»°ã€…ã—ã„è¨€è‘‰ãŒæ²¢å±±ã® <code>!</code> ã§å›²ã¾ã‚Œã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚<br>é€šå¸¸ã®ã‚¤ãƒ³ãƒ•ãƒ©æ§‹ç¯‰ã€é‹ç”¨ä¿å®ˆä½œæ¥­ã«ã¦ã“ã®ã‚ˆã†ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ãŠç›®ã«ã‹ã‹ã‚‹ã“ã¨ã¯ã€ã¾ãšãªã„ã¨æ€ã„ã¾ã™ã€‚ç§ã¯ä»Šå›ã€åˆã‚ã¦ã“ã‚“ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒä»•è¾¼ã¾ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’çŸ¥ã‚Šã¾ã—ãŸã€‚</p><p>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…å®¹ã‚’æ—¥æœ¬èªè¨³ã—ã¾ã™ã¨ã€ŒTerraform ãŒå£Šã‚ŒãŸã‚ˆï¼ å…¬å¼ãƒªãƒã‚¸ãƒˆãƒªã® issue ã«è¨˜ç¥¨ã—ã¦ã€ã¨ã‚ã‚Šã¾ã™ã®ã§ã€ã•ã£ããã€å£Šã—ã¦ã¿ã¾ã™ã€‚</p><p>panic ç™ºç”Ÿæ™‚ã« <strong>TERRAFORM CRASH</strong> ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ãªã®ã§ã€ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã®ç›´å¾Œã§å¼·åˆ¶çš„ã« panic ã‚’èµ·ã“ã™1è¡Œã‚’å…¥ã‚Œã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">realMain</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line"> <span class="keyword">defer</span> logging.PanicHandler()</span><br><span class="line"> <span class="built_in">panic</span>(<span class="string">&quot;ãƒãƒ«ã‚¹ï¼&quot;</span>)</span><br><span class="line"> ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã¾ãŸã€<code>terraform</code> ã®ãƒ“ãƒ«ãƒ‰æ™‚ã«æ¸¡ã•ã‚Œã‚‹ <code>GOFLAGS</code> ã‚’ã€Œ<a href="https://github.com/hashicorp/terraform/blob/main/scripts/build.sh#L41-L42">ãƒªãƒã‚¸ãƒˆãƒªã®ã‚³ãƒ¼ãƒ‰</a>ã€ã®ã¾ã¾åˆ©ç”¨ã—ãŸå ´åˆã€ãƒ“ãƒ«ãƒ‰ç’°å¢ƒã®ãƒ•ãƒ«ãƒ‘ã‚¹ãŒè¡¨ç¤ºã•ã‚Œã¦ã—ã¾ã„ã¾ã™ã®ã§ã€ä»¥ä¸‹ã® <code>-trimpath</code> ãƒ•ãƒ©ã‚°ã‚’è¿½åŠ ã—ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> GOFLAGS=<span class="string">&quot;-mod=readonly&quot;</span></span><br></pre></td></tr></table></figure><p>â†“</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> GOFLAGS=<span class="string">&quot;-mod=readonly -trimpath&quot;</span></span><br></pre></td></tr></table></figure><p>ã“ã®çŠ¶æ…‹ã§ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ãƒ“ãƒ«ãƒ‰ã€åŠã³ã€ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œã‚’è©¦ã—ã¦ã¿ã¾ã™ã€‚</p><p>ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã‚’ä¸ãˆãšã« <code>terraform</code> ã‚’å®Ÿè¡Œã—ãŸå ´åˆã€æœ¬æ¥ãªã‚‰ã° <code>help</code> ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ãŒã€ç„¡äº‹ã«ã€Œå£Šã™ã€ã“ã¨ãŒã§ãã¾ã—ãŸã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ ./terraform</span><br><span class="line"></span><br><span class="line">!!!!!!!!!!!!!!!!!!!!!!!!!!! TERRAFORM CRASH !!!!!!!!!!!!!!!!!!!!!!!!!!!!</span><br><span class="line"></span><br><span class="line">Terraform crashed! This is always indicative of a bug within Terraform.</span><br><span class="line">Please report the crash with Terraform[1] so that we can fix this.</span><br><span class="line"></span><br><span class="line">When reporting bugs, please include your terraform version, the stack trace</span><br><span class="line">shown below, and any additional information <span class="built_in">which</span> may <span class="built_in">help</span> replicate the issue.</span><br><span class="line"></span><br><span class="line">[1]: https://github.com/hashicorp/terraform/issues</span><br><span class="line"></span><br><span class="line">!!!!!!!!!!!!!!!!!!!!!!!!!!! TERRAFORM CRASH !!!!!!!!!!!!!!!!!!!!!!!!!!!!</span><br><span class="line"></span><br><span class="line">panic: ãƒãƒ«ã‚¹ï¼</span><br><span class="line">goroutine 1 [running]:</span><br><span class="line">runtime/debug.Stack()</span><br><span class="line">        runtime/debug/stack.go:24 +0x5e</span><br><span class="line">github.com/hashicorp/terraform/internal/logging.PanicHandler()</span><br><span class="line">        github.com/hashicorp/terraform/internal/logging/panic.go:84 +0x18b</span><br><span class="line">panic(&#123;0x1ade400?, 0x249fc00?&#125;)</span><br><span class="line">        runtime/panic.go:770 +0x132</span><br><span class="line">main.realMain()</span><br><span class="line">        github.com/hashicorp/terraform/main.go:69 +0x47</span><br><span class="line">main.main()</span><br><span class="line">        github.com/hashicorp/terraform/main.go:64 +0x13</span><br></pre></td></tr></table></figure><p><code>terraform</code> ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œæ™‚ã€ä½•ã‚‰ã‹ã®ç†ç”±ã«ã‚ˆã‚Š panic ãŒèµ·ãã¦ã—ã¾ã£ãŸå ´åˆã«ã¯ã€<strong>TERRAFORM CRASH</strong> ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºã¨ issue ã®èµ·ç¥¨å‚¬ä¿ƒã€ãƒ‡ãƒãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªã§ãã¾ã—ãŸã€‚</p><p>ãã‚Œã§ã¯ã€æ„å›³çš„ã«ä»•è¾¼ã‚“ã  panic ã®1è¡Œã‚’å‰Šé™¤ã—ã¦ã€å†ãƒ“ãƒ«ãƒ‰ã¾ã§å®Œäº†ã—ãŸã‚‰ã€æ¬¡ã®å‡¦ç†ã‚’è¦‹ã¦ã„ãã¾ã™ã€‚</p><h2 id="openTelemetryInit"><a href="#openTelemetryInit" class="headerlink" title="openTelemetryInit()"></a><code>openTelemetryInit()</code></h2><p>æ¬¡ã®å®Ÿè£…ã¨ã—ã¦ã€Open Telemetry ã‚’æ‰±ã†å‡¦ç†ãŒè¦‹ã¤ã‹ã‚Šã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> err <span class="type">error</span></span><br><span class="line"></span><br><span class="line">err = openTelemetryInit()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">  <span class="comment">// openTelemetryInit can only fail if Terraform was run with an</span></span><br><span class="line">  <span class="comment">// explicit environment variable to enable telemetry collection,</span></span><br><span class="line">  <span class="comment">// so in typical use we cannot get here.</span></span><br><span class="line">  Ui.Error(fmt.Sprintf(<span class="string">&quot;Could not initialize telemetry: %s&quot;</span>, err)) </span><br><span class="line">  Ui.Error(fmt.Sprintf(<span class="string">&quot;Unset environment variable %s if you don&#x27;t intend to collect telemetry from Terraform.&quot;</span>, openTelemetryExporterEnvVar))</span><br><span class="line">  <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> ctx context.Context</span><br><span class="line"><span class="keyword">var</span> otelSpan trace.Span</span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">// At minimum we emit a span covering the entire command execution.</span></span><br><span class="line">  _, displayArgs := shquot.POSIXShellSplit(os.Args)</span><br><span class="line">  ctx, otelSpan = tracer.Start(context.Background(), fmt.Sprintf(<span class="string">&quot;terraform %s&quot;</span>, displayArgs))</span><br><span class="line">  <span class="keyword">defer</span> otelSpan.End()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>openTelemetryInit()</code> ã®å®šç¾©å…ƒã«ã‚³ãƒ¼ãƒ‰ã‚¸ãƒ£ãƒ³ãƒ—ã—ã¾ã™ã¨ã€ãƒˆãƒƒãƒ—ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã®ã€Œ<a href="https://github.com/hashicorp/terraform/blob/main/telemetry.go#L56-L63">terraform&#x2F;telemetry.go</a>ã€ã«ã¦è©³ç´°å†…å®¹ãŒèª¬æ˜ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p>ã¾ãšã€å®Ÿè£…ã‚³ãƒ¼ãƒ‰ã®ã‚³ãƒ¡ãƒ³ãƒˆã«ã¯ä»¥ä¸‹ã®è¨˜è¼‰ãŒã‚ã‚Šã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// If this environment variable is set to &quot;otlp&quot; when running Terraform CLI</span></span><br><span class="line"><span class="comment">// then we&#x27;ll enable an experimental OTLP trace exporter.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// BEWARE! This is not a committed external interface.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Everything about this is experimental and subject to change in future</span></span><br><span class="line"><span class="comment">// releases. Do not depend on anything about the structure of this output.</span></span><br><span class="line"><span class="comment">// This mechanism might be removed altogether if a different strategy seems</span></span><br><span class="line"><span class="comment">// better based on experience with this experiment.</span></span><br><span class="line"><span class="keyword">const</span> openTelemetryExporterEnvVar = <span class="string">&quot;OTEL_TRACES_EXPORTER&quot;</span></span><br></pre></td></tr></table></figure><p>Terraform ã®å®Ÿè¡Œç’°å¢ƒã«ã¦ã€ç’°å¢ƒå¤‰æ•°ã¨ã—ã¦ä»¥ä¸‹ã‚’è¨­å®šã—ãŸå ´åˆã®ã¿ã€Open Telemetry æ©Ÿèƒ½ãŒæœ‰åŠ¹ã¨ãªã‚‹ã‚ˆã†ã§ã™ã€‚<br><code>otlp</code> ä»¥å¤–ã®å€¤ï¼ˆå€¤ãƒŠã‚·ã‚‚å«ã‚€ï¼‰ãŒè¨­å®šã•ã‚ŒãŸå ´åˆã«ã¯ã€ã“ã®æ©Ÿèƒ½ã¯æœ‰åŠ¹åŒ–ã•ã‚Œãšã«é–¢æ•°ã®å‘¼ã³å‡ºã—å…ƒã¸æˆ»ã‚Šã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> OTEL_TRACES_EXPORTER=otlp</span><br></pre></td></tr></table></figure><p>ã‚³ãƒ¡ãƒ³ãƒˆã«ã¯ã€Œ<a href="https://opentelemetry.io/docs/specs/otel/protocol/exporter/#configuration-options">OpenTelemetry Protocol Exporter Configuration Options</a>ã€ã¸ã®ãƒªãƒ³ã‚¯ãŒæ·»ä»˜ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p>ãŸã ã—ã€Open Telemetry ã«ã¤ã„ã¦æœ¬è¨˜äº‹ã§ã¯ç«‹ã¡å…¥ã‚Šã¾ã›ã‚“ã€‚<br>æ°—ã«ãªã‚‹æ–¹ã¯ã€ä»¥ä¸‹ã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ»æ—¥æœ¬èªè¨˜äº‹ãƒ»ç¿»è¨³æ›¸ç±ã‚’ã”å‚ç…§ãã ã•ã„ã€‚</p><ul><li>å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ<ul><li><a href="https://opentelemetry.io/docs/what-is-opentelemetry/">What is OpenTelemetry?</a></li></ul></li><li>æ—¥æœ¬èªè¨˜äº‹<ul><li><a href="https://zenn.dev/yuta28/articles/what-is-opentelemetry">OpenTelemetryã«è§¦ã‚Œã¦ã¿ãŸ</a></li></ul></li><li>ç¿»è¨³æ›¸ç±<ul><li><a href="https://www.oreilly.co.jp/books/9784814400126/">ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ãƒ»ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°</a></li></ul></li></ul><p>ã“ã“ã§ã¯ã€å®Ÿè£…ã‚³ãƒ¼ãƒ‰ã‚’å‚ç…§ã™ã‚‹ä¸­ã§ã€Terraform ã«ã¯ã€Œç’°å¢ƒå¤‰æ•°ã® <code>OTEL_TRACES_EXPORTER</code> ã« <code>otlp</code> ã‚’ä¸ãˆã‚‹ã“ã¨ã§ã€Open Telemetry ãŒæœ‰åŠ¹åŒ–ã•ã‚Œã‚‹ã€ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã—ãŸã€‚</p><p>ã“ã®ã‚ˆã†ãªçŸ¥è­˜ã¯ã‚‚ã¡ã‚ã‚“å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ¼ã‚Œã°è¦‹ã¤ã‹ã‚‹ã®ã ã¨ã¯æ€ã„ã¾ã™ãŒã€è‡ªåˆ†ã§æ¢ç´¢ã—ã¦è¦‹ã¤ã‘ãŸã¨ãã®ã€Œè‡ªåŠ›ã§ç™ºè¦‹ã§ããŸæ„Ÿè¦šã€ã‚’å‘³ã‚ãˆã‚‹ã®ãŒã€OSS ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®é¢ç™½ã•ã ã¨ç§ã¯æ„Ÿã˜ã¦ãŠã‚Šã¾ã™ã€‚å°‘ã€…ã€è›‡è¶³ã«éãã¾ã—ãŸã®ã§ã€å…ƒã®ã‚³ãƒ¼ãƒ‰ã«æˆ»ã‚Šã¾ã™ã€‚</p><h2 id="tmpLogPath"><a href="#tmpLogPath" class="headerlink" title="tmpLogPath"></a><code>tmpLogPath</code></h2><p>ç¶šã„ã¦ã€<code>tmpLogPath</code> ã¨ã„ã†ã€Œä¸€æ™‚çš„ãªãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã®å‡ºåŠ›å…ˆã€ã«ãªã‚Šãã†ãªå¤‰æ•°ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸã€‚<br>é©åˆ‡ãªå¤‰æ•°åã¯ã€Œé©åˆ‡ãªãƒ¡ãƒ³ã‚¿ãƒ«ãƒ¢ãƒ‡ãƒ«ã€ã‚’è„³å†…ã«ä½œã‚‹ãŸã‚ã«é‡è¦ãªã®ã§ã€ã“ã†ã„ã£ãŸå´é¢ã«ãŠã„ã¦ã‚‚ã€OSS ã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã§ã¯æ›¸ç±ã‹ã‚‰ã¯å¾—ã‚‰ã‚Œãªã„å®Ÿè·µçŸ¥ãŒè©°ã£ã¦ã„ã‚‹ã¨æ„Ÿã˜ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">tmpLogPath := os.Getenv(envTmpLogPath)</span><br><span class="line"><span class="keyword">if</span> tmpLogPath != <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line">  f, err := os.OpenFile(tmpLogPath, os.O_RDWR|os.O_APPEND, <span class="number">0666</span>)</span><br><span class="line">  <span class="keyword">if</span> err == <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="keyword">defer</span> f.Close()</span><br><span class="line"></span><br><span class="line">    log.Printf(<span class="string">&quot;[DEBUG] Adding temp file log sink: %s&quot;</span>, f.Name())</span><br><span class="line">    logging.RegisterSink(f)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    log.Printf(<span class="string">&quot;[ERROR] Could not open temp log file: %v&quot;</span>, err)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã“ã“ã®å®Ÿè£…ã§ã¯ã€ç’°å¢ƒå¤‰æ•°ã® <code>TF_TEMP_LOG_PATH</code> ã§æŒ‡å®šã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã«ã€ãƒ­ã‚°ã‚’è¿½è¨˜ã™ã‚‹å‡¦ç†ãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚<br>ãã‚Œã§ã¯ã€ãƒ­ã‚°ã®å‡ºåŠ›å…ˆã‚’æŒ‡å®šã—ã¦ã€å‡ºåŠ›ãƒ­ã‚°ã¨å®Ÿè£…ã‚³ãƒ¼ãƒ‰ã®å¯¾å¿œã‚’ç¢ºèªã—ã¦ã„ãã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ãƒ­ã‚°ã®å‡ºåŠ›å…ˆã‚’ /tmp/tf.log ã«æŒ‡å®š</span></span><br><span class="line"><span class="built_in">export</span> TF_TEMP_LOG_PATH=<span class="string">&quot;/tmp/tf.log&quot;</span></span><br></pre></td></tr></table></figure><p>ãƒ­ã‚°å‡ºåŠ›å…ˆã®ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ã¦ã‹ã‚‰ä»»æ„ã® <code>terraform</code> ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ä»¥ä¸‹ã®ãƒ­ã‚°ãŒè¿½è¨˜ã•ã‚Œã¾ã™ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">2024-03-25T05:07:16.800+0900 [INFO]  Terraform version: 1.9.0 dev</span><br><span class="line">2024-03-25T05:07:16.800+0900 [DEBUG] using github.com/hashicorp/go-tfe v1.41.0</span><br><span class="line">2024-03-25T05:07:16.800+0900 [DEBUG] using github.com/hashicorp/hcl/v2 v2.20.0</span><br><span class="line">2024-03-25T05:07:16.800+0900 [DEBUG] using github.com/hashicorp/terraform-svchost v0.1.1</span><br><span class="line">2024-03-25T05:07:16.800+0900 [DEBUG] using github.com/zclconf/go-cty v1.14.3</span><br><span class="line">2024-03-25T05:07:16.800+0900 [INFO]  Go runtime version: go1.22.1</span><br><span class="line">2024-03-25T05:07:16.800+0900 [INFO]  CLI args: []string&#123;&quot;./terraform&quot;, &quot;version&quot;&#125;</span><br><span class="line">2024-03-25T05:07:16.800+0900 [TRACE] Stdout is a terminal of width 125</span><br><span class="line">2024-03-25T05:07:16.800+0900 [TRACE] Stderr is a terminal of width 125</span><br><span class="line">2024-03-25T05:07:16.800+0900 [TRACE] Stdin is a terminal</span><br><span class="line">2024-03-25T05:07:16.800+0900 [DEBUG] Attempting to open CLI config file: /home/blog-user/.terraformrc</span><br><span class="line">2024-03-25T05:07:16.800+0900 [DEBUG] File doesn&#x27;t exist, but doesn&#x27;t need to. Ignoring.</span><br><span class="line">2024-03-25T05:07:16.800+0900 [DEBUG] ignoring non-existing provider search directory terraform.d/plugins</span><br><span class="line">2024-03-25T05:07:16.800+0900 [DEBUG] ignoring non-existing provider search directory /home/blog-user/.terraform.d/plugins</span><br><span class="line">2024-03-25T05:07:16.800+0900 [DEBUG] ignoring non-existing provider search directory /home/blog-user/.local/share/terraform/plugins</span><br><span class="line">2024-03-25T05:07:16.800+0900 [DEBUG] ignoring non-existing provider search directory /usr/local/share/terraform/plugins</span><br><span class="line">2024-03-25T05:07:16.800+0900 [DEBUG] ignoring non-existing provider search directory /usr/share/terraform/plugins</span><br><span class="line">2024-03-25T05:07:16.800+0900 [DEBUG] ignoring non-existing provider search directory /var/lib/snapd/desktop/terraform/plugins</span><br><span class="line">2024-03-25T05:07:16.801+0900 [INFO]  CLI command args: []string&#123;&quot;version&quot;&#125;</span><br></pre></td></tr></table></figure><p>ã“ã‚Œã‚‰ã®ãƒ­ã‚°ã¨å®Ÿè£…ã‚³ãƒ¼ãƒ‰ã®å¯¾å¿œã‚’è¦‹ã¾ã™ã¨ã€<code>TF_TEMP_LOG_PATH</code> ã‚’è¨­å®šã—ãŸã€Œ<a href="https://github.com/hashicorp/terraform/blob/main/main.go#L103-L134">ç›´å¾Œã®å‡¦ç†å†…å®¹</a>ã€ãŒã€ãã®ã¾ã¾ãƒ­ã‚°ã¨ã—ã¦æ ¼ç´ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚</p><p>ä¾‹ãˆã°ã€<code>version.InterestingDependencies()</code> ã«ã‚ˆã‚Šå–å¾—ã•ã‚ŒãŸã€Œ<a href="https://github.com/hashicorp/terraform/blob/main/version/dependencies.go#L11-L16">ä¾å­˜ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±</a>ã€ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜éŒ²ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">2024-03-25T05:07:16.800+0900 [DEBUG] using github.com/hashicorp/go-tfe v1.41.0</span><br><span class="line">2024-03-25T05:07:16.800+0900 [DEBUG] using github.com/hashicorp/hcl/v2 v2.20.0</span><br><span class="line">2024-03-25T05:07:16.800+0900 [DEBUG] using github.com/hashicorp/terraform-svchost v0.1.1</span><br><span class="line">2024-03-25T05:07:16.800+0900 [DEBUG] using github.com/zclconf/go-cty v1.14.3</span><br></pre></td></tr></table></figure><p>ãƒ­ã‚°ã®å¯¾å¿œã‚’1ã¤1ã¤ã€å®Ÿè£…ã‚³ãƒ¼ãƒ‰ã¨çªãåˆã‚ã›ã¦ã¿ã¾ã™ã¨ã€ä»¥ä¸‹ã«å¯¾å¿œã™ã‚‹ãƒ­ã‚°ãŒå‡ºåŠ›ã•ã‚Œã¦ã„ãªã„ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> ExperimentsAllowed() &#123;</span><br><span class="line">  log.Printf(<span class="string">&quot;[INFO] This build of Terraform allows using experimental features&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>ExperimentsAllowed()</code> ã®å®šç¾©ã«ã‚³ãƒ¼ãƒ‰ã‚¸ãƒ£ãƒ³ãƒ—ã™ã‚‹ã¨ã€ã€Œ<a href="https://github.com/hashicorp/terraform/blob/main/experiments.go#L25">terraform&#x2F;experiments.go</a>ã€ã®ã‚³ãƒ¡ãƒ³ãƒˆã¨ã—ã¦ã€ã“ã®é–¢æ•°ã‚’æœ‰åŠ¹åŒ–ã™ã‚‹æ–¹æ³•ï¼ˆè¿”ã‚Šå€¤ãŒtrueã«ã™ã‚‹æ–¹æ³•ï¼‰ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// experimentsAllowed can be set to any non-empty string using Go linker</span></span><br><span class="line"><span class="comment">// arguments in order to enable the use of experimental features for a</span></span><br><span class="line"><span class="comment">// particular Terraform build:</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//   go install -ldflags=&quot;-X &#x27;main.experimentsAllowed=yes&#x27;&quot;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// By default this variable is initialized as empty, in which case</span></span><br><span class="line"><span class="comment">// experimental features are not available.</span></span><br></pre></td></tr></table></figure><p>ã‚³ãƒ¡ãƒ³ãƒˆã®å†…å®¹ã«å¾“ã†ã¨ã€<code>terraform</code> ã®ãƒ“ãƒ«ãƒ‰æ™‚ã«</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">go install -ldflags=<span class="string">&quot;-X &#x27;main.experimentsAllowed=yes&#x27;&quot;</span></span><br></pre></td></tr></table></figure><p>ã‚’æ··ãœè¾¼ã‚€ã“ã¨ã«ã‚ˆã‚Šã€<code>experiments</code>ï¼ˆå®Ÿé¨“çš„æ©Ÿèƒ½ï¼‰ã‚’æœ‰åŠ¹åŒ–ã§ãã‚‹ã‚ˆã†ã§ã™ã€‚</p><p>ã€Œ<a href="https://github.com/hashicorp/terraform/blob/main/scripts/build.sh">scripts&#x2F;build.sh</a>ã€ã‚’ç¢ºèªã™ã‚‹ã¨ã€<code>-ldflags</code> ã«æ¸¡ã•ã‚Œã‚‹å€¤ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚<code>TF_RELEASE</code> ã«å€¤ã‚’è¨­å®šã—ãŸå ´åˆã®ã¿ã€<code>gox -ldflags &quot;&quot;$&#123;LD_FLAGS&#125;&quot;&quot;</code> ãŒã€Œ<a href="https://github.com/hashicorp/terraform/blob/main/scripts/build.sh#L44-L62">ãƒ“ãƒ«ãƒ‰æ™‚ã«è¿½åŠ </a>ã€ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># In release mode we don&#x27;t want debug information in the binary and we don&#x27;t</span></span><br><span class="line"><span class="comment"># want the -dev version marker</span></span><br><span class="line"><span class="keyword">if</span> [[ -n <span class="string">&quot;<span class="variable">$&#123;TF_RELEASE&#125;</span>&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">    LD_FLAGS=<span class="string">&quot;-s -w -X &#x27;github.com/hashicorp/terraform/version.dev=no&#x27;&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><p>ä»Šå›ã¯ <code>TF_RELEASE</code> ã‚’åˆ©ç”¨ã—ãªã„ã®ã§ã€ä»¥ä¸‹ã®åˆ†å²ã‚’è¿½åŠ ã—ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> [[ -n <span class="string">&quot;<span class="variable">$&#123;TF_RELEASE&#125;</span>&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">    LD_FLAGS=<span class="string">&quot;-s -w -X &#x27;github.com/hashicorp/terraform/version.dev=no&#x27;&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    LD_FLAGS=<span class="string">&quot;-X &#x27;main.experimentsAllowed=yes&#x27;&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><p>ã“ã®çŠ¶æ…‹ã§å®Ÿè¡Œãƒã‚¤ãƒŠãƒªã‚’ãƒ“ãƒ«ãƒ‰ã—ã€ä»»æ„ã® <code>terraform</code> ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã«ä»¥ä¸‹ã®1æ–‡ãŒè¿½è¨˜ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªã§ãã¾ã™ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">[INFO]  This build of Terraform allows using experimental features</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p><code>experiments</code> ã‚’æœ‰åŠ¹åŒ–ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€ä½•ã‹ã—ã‚‰ã®å®Ÿé¨“çš„ã‚³ãƒãƒ³ãƒ‰ãŒåˆ©ç”¨å¯èƒ½ã¨ãªã£ãŸã®ã ã¨æ€ã„ã¾ã™ã€‚ã—ã‹ã—ã€ã“ã“ã¾ã§ã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®ç¯„å›²ã§ã¯ã€Œã©ã®ã‚ˆã†ãªæ©Ÿèƒ½ãŒæœ‰åŠ¹åŒ–ã•ã‚ŒãŸã®ã‹ï¼Ÿã€ã«ã¤ã„ã¦ã®æƒ…å ±ã«é­é‡ã—ã¦ã„ãªã„ãŸã‚ã€<code>ExperimentsAllowed()</code> ã®æ¢ç´¢ã¯ã“ã“ã¾ã§ã¨ã—ã¾ã™ã€‚</p><h2 id="terminal-Init"><a href="#terminal-Init" class="headerlink" title="terminal.Init()"></a><code>terminal.Init()</code></h2><p>ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¨ã—ã¦ã¯ã€ãƒ­ã‚°å¾ŒåŠã«æ³¨ç›®ã—ã¦ã¿ã¾ã™ã€‚<br>ã“ã“ã§ã¯ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’åˆæœŸåŒ–ã—ã¦ã„ã‚‹ã‚ˆã†ãª <code>terminal.Init()</code> ã¨ã„ã†é–¢æ•°ã¨ã€ãã®é–¢æ•°ã®è¿”ã‚Šå€¤ã‚’åˆ©ç”¨ã—ã¦</p><ul><li>æ¨™æº–å…¥åŠ›</li><li>æ¨™æº–å‡ºåŠ›</li><li>æ¨™æº–ã‚¨ãƒ©ãƒ¼å‡ºåŠ›</li></ul><p>ã®ãã‚Œãã‚Œã«å¯¾ã—ã¦ã€<code>IsXXX()</code> ã®æ–¹å¼ã§ã€Œã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã‚ã‚‹ã‹ã€å¦ã‹ã€ã‚’åˆ¤æ–­ã—ã¦ã„ã‚‹ä»¥ä¸‹ã®å®Ÿè£…ãŒè¦‹ã¤ã‹ã‚Šã¾ã™ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">streams, err := terminal.Init()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">  Ui.Error(fmt.Sprintf(<span class="string">&quot;Failed to configure the terminal: %s&quot;</span>, err))</span><br><span class="line">  <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> streams.Stdout.IsTerminal() &#123;</span><br><span class="line">  log.Printf(<span class="string">&quot;[TRACE] Stdout is a terminal of width %d&quot;</span>, streams.Stdout.Columns())</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  log.Printf(<span class="string">&quot;[TRACE] Stdout is not a terminal&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> streams.Stderr.IsTerminal() &#123;</span><br><span class="line">  log.Printf(<span class="string">&quot;[TRACE] Stderr is a terminal of width %d&quot;</span>, streams.Stderr.Columns())</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  log.Printf(<span class="string">&quot;[TRACE] Stderr is not a terminal&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> streams.Stdin.IsTerminal() &#123;</span><br><span class="line">  log.Printf(<span class="string">&quot;[TRACE] Stdin is a terminal&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  log.Printf(<span class="string">&quot;[TRACE] Stdin is not a terminal&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>terminal.Init()</code> ã®å®šç¾©å…ƒã«ã‚³ãƒ¼ãƒ‰ã‚¸ãƒ£ãƒ³ãƒ—ã™ã‚‹ã¨ã€ã“ã¡ã‚‰ã‚‚ã€Œ<a href="https://github.com/hashicorp/terraform/blob/main/internal/terminal/streams.go#L4-L17">é•·æ–‡ã‚³ãƒ¡ãƒ³ãƒˆ</a>ã€ã§å®Ÿè£…å†…å®¹ã€å®Ÿè£…æ„å›³ãŒèª¬æ˜ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><p>ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œç’°å¢ƒã¯ <code>terraform</code> ãŒæ­£ã—ãå…¥åŠ›ãƒ»å‡ºåŠ›ã‚’æ‰±ãˆã‚‹ç’°å¢ƒãªã®ã‹ã€ã“ã® terminal ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å†…ã«ã¦ç¢ºèªå‡¦ç†ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚æ™®æ®µã€ãƒ„ãƒ¼ãƒ«ã‚„ã‚³ãƒãƒ³ãƒ‰ã‚’å–å¾—ã™ã‚‹éš›ã«ã¯ <code>Requirements</code> ã‚’ç¢ºèªã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ãŒã€ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œãƒ—ãƒ­ã‚»ã‚¹å†…ã«ãŠã„ã¦ã‚‚ã€å®Ÿè¡Œç’°å¢ƒã®ç¢ºèªã‚’è¡Œã£ã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã—ãŸã€‚</p><p>â€¦</p><p>æœ¬ãƒ–ãƒ­ã‚°ã§ã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¯ä¸€æ—¦ã“ã“ã¾ã§ã¨ã—ã¾ã™ã€‚<br><code>func main() &#123;...&#125;</code> ã‹ã‚‰èª­ã¿å§‹ã‚ã€é€²æ—è¡Œæ•°ã¨ã—ã¦ã¯70è¡Œç¨‹åº¦ã§ã™ã€‚ãŸã ã—ã€é€”ä¸­ã§ã‚³ãƒ¼ãƒ‰ã‚¸ãƒ£ãƒ³ãƒ—ã‚„ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ç¢ºèªãŒå…¥ã£ãŸãŸã‚ã€å˜ç´”ã«ã€Œ<code>main()</code> ã‹ã‚‰ã®é€²æ—è¡Œæ•° &#x3D; ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡Œæ•°ã€ã¨ã„ã†ã‚«ã‚¦ãƒ³ãƒˆã«ã¯ãªã‚Šã¾ã›ã‚“ã€‚ã€Œå®Ÿéš›ã«å‹•ã‹ã—ãªãŒã‚‰ã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã€ã®ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚’å®Ÿæ„Ÿã„ãŸã ã‘ãŸã§ã—ã‚‡ã†ã‹ã€‚</p><h1 id="ãŠã‚ã‚Šã«"><a href="#ãŠã‚ã‚Šã«" class="headerlink" title="ãŠã‚ã‚Šã«"></a>ãŠã‚ã‚Šã«</h1><p>æœ¬ãƒ–ãƒ­ã‚°ã§ã¯ã€ã€ŒTerraform ã®å®Ÿè£…ã‚³ãƒ¼ãƒ‰ã‚’ã€å‹•ã‹ã—ãªãŒã‚‰èª­ã‚€ã€ã¨ã„ã†ç›®æ¨™ã‚’æ²ã’ã€å®Ÿè¡Œãƒã‚¤ãƒŠãƒªã®ãƒ“ãƒ«ãƒ‰ã‚„ã‚³ãƒ¼ãƒ‰ã®æ”¹é€ ã‚’å–ã‚Šå…¥ã‚ŒãªãŒã‚‰ã€OSS ã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’è¡Œã„ã¾ã—ãŸã€‚å‰åŠã®ç’°å¢ƒæº–å‚™ã«åŸç¨¿ã®å¤šããŒå‰²ã‹ã‚Œã¦ã„ã‚‹ãŸã‚ã€å®Ÿéš›ã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡Œæ•°ã¯100è¡Œæœªæº€ã§ã¯ãªã„ã‹ã¨æ€ã„ã¾ã™ã€‚OSS ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®é¢ç™½ã•ã¯ã€Œå„è‡ªãŒã€è‡ªåˆ†ã®å¥½ãå‹æ‰‹ã«èª­ã‚ã‚‹ã“ã¨ã€ã«ã‚ã‚‹ã¨æ€ã„ã¾ã™ã®ã§ã€ç§ãªã‚‰ã©ã®ã‚ˆã†ã«èª­ã‚€ã‹ï¼Ÿã‚’è©³ã—ãè§£èª¬ã—ã¦ãã¾ã—ãŸã€‚</p><p>ã“ã“ã¾ã§é•·æ–‡ã«ãŠä»˜ãåˆã„ã„ãŸã ãã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚</p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Programming/">Programming</category>
      
      
      <category domain="https://future-architect.github.io/tags/Go/">Go</category>
      
      <category domain="https://future-architect.github.io/tags/Terraform/">Terraform</category>
      
      <category domain="https://future-architect.github.io/tags/CodeReading/">CodeReading</category>
      
      <category domain="https://future-architect.github.io/tags/Copilot/">Copilot</category>
      
      
      <comments>https://future-architect.github.io/articles/20240326a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Azureç’°å¢ƒTerraformå®Ÿè¡Œã«ãŠã‘ã‚‹ãƒªã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã«ã¤ã„ã¦</title>
      <link>https://future-architect.github.io/articles/20240325a/</link>
      <guid>https://future-architect.github.io/articles/20240325a/</guid>
      <pubDate>Sun, 24 Mar 2024 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;img src=&quot;/images/20240325a/top.png&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;515&quot;&gt;


&lt;p&gt;&lt;a href=&quot;/articles/20240311a/&quot;&gt;Terraformé€£è¼‰2024ã‚’&lt;/a&gt;</description>
          
        
      
      
      
      <content:encoded><![CDATA[<img src="/images/20240325a/top.png" alt="" width="800" height="515"><p><a href="/articles/20240311a/">Terraformé€£è¼‰2024ã‚’</a> ã®8æœ¬ç›®ã§ã™ã€‚</p><h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>ã“ã‚“ã«ã¡ã¯ã€SAIG(Strategic AI Group)ã®çœŸé‹ã§ã™ã€‚</p><p>æ˜¨ä»Šã®OpenAIéœ€è¦ã«ã‚ˆã£ã¦ã€Azureç’°å¢ƒã®åˆ©ç”¨ã‚’æœ¬æ ¼çš„ã«å§‹ã‚ã‚‹æ–¹ã‚‚å¤šã„ã‹ã¨æ€ã„ã¾ã™ã€‚</p><p>Azureç’°å¢ƒã§Terraformã‚’åˆ©ç”¨ã™ã‚‹éš›ã€è£ã§å‹•ã„ã¦ã„ã‚‹ãƒªã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã«ã¤ã„ã¦ã”ç´¹ä»‹ã—ã¾ã™ã€‚</p><h1 id="Terraformå®Ÿè¡Œæ™‚ã«è¸ã‚“ã ã‚¨ãƒ©ãƒ¼"><a href="#Terraformå®Ÿè¡Œæ™‚ã«è¸ã‚“ã ã‚¨ãƒ©ãƒ¼" class="headerlink" title="Terraformå®Ÿè¡Œæ™‚ã«è¸ã‚“ã ã‚¨ãƒ©ãƒ¼"></a>Terraformå®Ÿè¡Œæ™‚ã«è¸ã‚“ã ã‚¨ãƒ©ãƒ¼</h1><p>åˆ©ç”¨ä¸­ã®Azureç’°å¢ƒã«ã¦<code>terraform plan</code>ã‚’å®Ÿè¡Œã—ãŸéš›ã«ã€ä¸‹è¨˜ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚</p><p>è¦‹ã‚„ã™ã„ã‚ˆã†ã«æ”¹è¡Œç­‰è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Original Error: Cannot register providers: </span><br><span class="line">Microsoft.ServiceBus,</span><br><span class="line">Microsoft.DBforPostgreSQL,</span><br><span class="line">(ä¸­ç•¥)...</span><br><span class="line">Microsoft.TimeSeriesInsights.</span><br><span class="line">Errors were:</span><br><span class="line">Cannot register provider Microsoft.ServiceBus with Azure Resource Manager:</span><br><span class="line">unexpected status 403 with error:</span><br><span class="line">AuthorizationFailed:</span><br><span class="line">The client &#x27;xxx.xxx.xxx@exapmle.co.jp&#x27; with object id &#x27;xxxxx-xxxx-xxxx-xxxx-xxxx&#x27;</span><br><span class="line">does not have authorization to perform action &#x27;Microsoft.ServiceBus/register/action&#x27;</span><br><span class="line">over scope &#x27;/subscriptions/xxxx-xxxx-xxxx-xxxx&#x27; or the scope is invalid.</span><br><span class="line">If access was recently granted, please refresh your credentials..</span><br></pre></td></tr></table></figure><p>Terraformã‚³ãƒ¼ãƒ‰ä¸Šã¯VMã‚„Storage Accountç­‰ã€ä½œæˆæ¨©é™ãŒç¢ºèªã§ãã¦ã„ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã—ã‹è¨˜è¼‰ã—ã¦ã„ã¾ã›ã‚“ã§ã—ãŸãŒã€providerãªã‚‹ã‚‚ã®ã‚’è¿½åŠ ã™ã‚‹éš›ã«æ¨©é™ä¸è¶³ã§å¤±æ•—ã—ãŸã¨ã®ã“ã¨ã§ã™ã€‚</p><p>ã¡ãªã¿ã«åˆ©ç”¨ã™ã‚‹Azureç’°å¢ƒã¯ä»–ãƒãƒ¼ãƒ ã‹ã‚‰æ‰•ã„å‡ºã•ã‚ŒãŸç’°å¢ƒã§ã‚ã‚Šã€Terraformå®Ÿè¡Œæ™‚ã«èªè¨¼ã—ãŸå€‹äººã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯æ¨©é™ãŒçµã‚‰ã‚Œã¦ã„ã¾ã™ã€‚</p><h1 id="ãƒªã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã¨ã¯"><a href="#ãƒªã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã¨ã¯" class="headerlink" title="ãƒªã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã¨ã¯"></a>ãƒªã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã¨ã¯</h1><p>ä»Šå›é­é‡ã—ãŸã‚¨ãƒ©ãƒ¼ã®providerã¯ãƒªã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã¨ã„ã„ã€<a href="https://learn.microsoft.com/ja-jp/azure/azure-resource-manager/management/azure-services-resource-providers">Azure ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒªã‚½ãƒ¼ã‚¹ ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã¨ã¯ä½•ã‹</a>ã«èª¬æ˜ãŒã‚ã‚Šã¾ã™ã€‚</p><p>æ¦‚è¦ã«ã¤ã„ã¦æŠœç²‹ã—ã¾ã™ã€‚</p><blockquote><p>ãƒªã‚½ãƒ¼ã‚¹ ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã¯ã€Azure ã‚µãƒ¼ãƒ“ã‚¹ã®æ©Ÿèƒ½ã‚’å®Ÿç¾ã™ã‚‹ REST æ“ä½œã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã§ã™ã€‚ å„ãƒªã‚½ãƒ¼ã‚¹ ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã«ã¯ã€company-name.service-label ã¨ã„ã†å½¢å¼ã®åå‰ç©ºé–“ãŒã‚ã‚Šã¾ã™ã€‚</p></blockquote><p>ä¾‹ãˆã°Azureã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ã¤ã„ã¦ã¯ã€<code>Microsoft.Storage</code>ã¨ã„ã†åå‰ç©ºé–“ã§è¡¨ç¾ã•ã‚Œã¾ã™ã€‚</p><p>REST APIã¸ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ãŸéš›ã«Azureãƒªã‚½ãƒ¼ã‚¹ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ãŒãã‚Œã‚’å—ã‘å–ã‚Šã¾ã™ãŒã€å®Ÿéš›ã®æ“ä½œã¯ãƒªã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã«ã‚ˆã£ã¦å®Ÿæ–½ã—ã¾ã™ã€‚</p><p>ä¸‹è¨˜ãƒšãƒ¼ã‚¸ãŒåˆ†ã‹ã‚Šã‚„ã™ãã¾ã¨ã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚<br><a href="https://milestone-of-se.nesuke.com/sv-advanced/azure/resource-manager-provider/">ã€å›³è§£ã€‘åˆå¿ƒè€…å‘ã‘ãƒªã‚½ãƒ¼ã‚¹ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã¨ãƒªã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼</a></p><p>ãƒªã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã¯æ—¢å®šã§ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã‚‚ã‚ã‚Šã¾ã™ãŒã€æ‰‹å‹•ã§ç™»éŒ²ã™ã‚‹å ´åˆã‚„ã€Azureãƒãƒ¼ã‚¿ãƒ«ã«ãŠã„ã¦ãƒªã‚½ãƒ¼ã‚¹ã‚’ä½œã‚‹ã“ã¨ã§è‡ªå‹•ç™»éŒ²ã•ã‚Œã‚‹å ´åˆã‚‚ã‚ã‚Šã¾ã™ã€‚</p><p>ä»Šå›ã®ã‚¨ãƒ©ãƒ¼ã¯ã€Terraformãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ä¸€ã¤ã§ã‚ã‚‹AzureRMåˆ©ç”¨æ™‚ã«ãƒªã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’ç™»éŒ²ã—ã‚ˆã†ã¨ã—ã¦ç™ºç”Ÿã—ã¾ã—ãŸã€‚</p><h1 id="Terraformå®Ÿè¡Œæ™‚ã«ãŠã‘ã‚‹ãƒªã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼"><a href="#Terraformå®Ÿè¡Œæ™‚ã«ãŠã‘ã‚‹ãƒªã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼" class="headerlink" title="Terraformå®Ÿè¡Œæ™‚ã«ãŠã‘ã‚‹ãƒªã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼"></a>Terraformå®Ÿè¡Œæ™‚ã«ãŠã‘ã‚‹ãƒªã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼</h1><p>Azureã«ãŠã‘ã‚‹Terraformãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã¨ã—ã¦ã¯ä¸‹è¨˜ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><ul><li>AzureRM</li><li>AzureAD</li><li>AzureDevops</li><li>AzAPI</li><li>AzureStack</li></ul><p>ä»Šå›ã¯VMã‚„Storage Accountç­‰ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã€AzureRMã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã—ãŸã€‚</p><p><a href="https://github.com/hashicorp/terraform-provider-azurerm/blob/main/internal/resourceproviders/required.go">terraform-provider-azurerm&#x2F;internal&#x2F;resourceproviders</a>ã®ãƒšãƒ¼ã‚¸ã«ã‚ˆã‚‹ã¨ã€AzureRMã§ã¯è¤‡æ•°ã®ãƒªã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’è‡ªå‹•ã§ç™»éŒ²ã™ã‚‹ã¨ã®ã“ã¨ã§ã™ã€‚</p><p>ãƒªã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ç™»éŒ²ã§ã™ãŒã€providerãƒ–ãƒ­ãƒƒã‚¯ã«<code>skip_provider_registration = true</code>ã¨ã™ã‚‹ã“ã¨ã§ç„¡åŠ¹åŒ–ã§ãã¾ã™ã€‚</p><p>ã‚ã‚‹ã„ã¯ç’°å¢ƒå¤‰æ•°<code>ARM_SKIP_PROVIDER_REGISTRATION</code>ã‚’è¨­å®šã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã¨ã®ã“ã¨ã§ã™ã€‚</p><figure class="highlight sh"><figcaption><span>terraform</span></figcaption><table><tr><td class="code"><pre><span class="line">provider <span class="string">&quot;azurerm&quot;</span> &#123;</span><br><span class="line">  skip_provider_registration = <span class="literal">true</span></span><br><span class="line">  features &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs#skip_provider_registration">Azure Provider#skip_provider_registration</a></p><h1 id="è§£æ±ºæ³•"><a href="#è§£æ±ºæ³•" class="headerlink" title="è§£æ±ºæ³•"></a>è§£æ±ºæ³•</h1><p>ä»Šå›ç™ºç”Ÿã—ãŸã‚¨ãƒ©ãƒ¼ã®è§£æ±ºã«ã¯ä¸‹è¨˜1,2ã®æ–¹æ³•ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚</p><ol><li>Terraformå®Ÿè¡Œãƒ¦ãƒ¼ã‚¶ã«ãƒªã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼é–¢é€£ã®æ¨©é™ã‚’ä»˜ä¸ã™ã‚‹</li><li>äº‹å‰ã«æ‰‹å‹•ã§ãƒªã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’ç™»éŒ²ã—ã€Terraformã®ãƒªã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ç™»éŒ²ã‚’ç„¡åŠ¹åŒ–ã™ã‚‹</li></ol><p>1ã¤ç›®ã®æ–¹æ³•ã§ã™ãŒã€ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³å…¨ä½“ã«å¯¾ã™ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã”ã¨ã®<code>company-name.service-label/register/action</code>ç­‰ã®æ¨©é™ã‚’ä»˜ä¸ã™ã‚‹å½¢ã§ã™ã€‚æ¨©é™ã‚’ä»˜ä¸ã—<code>terraform plan</code>ã‚’å®Ÿè¡Œã—ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ãƒªã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ãŒç™»éŒ²ã•ã‚Œã¾ã™ã€‚</p><p>2ã¤ç›®ã®æ–¹æ³•ã¯ã€æ‰‹å‹•ã§ãƒªã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’ç™»éŒ²ã—ã¦ãŠãã€Terraformå®Ÿè¡Œæ™‚ã«ã¯<code>skip_provider_registration</code>ã®è¨˜è¼‰ã‚„ç’°å¢ƒå¤‰æ•°ã§ãƒªã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ç™»éŒ²ã‚’ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹æ–¹æ³•ã§ã™ã€‚æ‰‹å‹•ã§ãƒªã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’ç™»éŒ²ã™ã‚‹å ´åˆã¯ã€Azureãƒãƒ¼ã‚¿ãƒ«ã®ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã‹ã‚‰ãƒªã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’é¸æŠã—ã€è©²å½“ãƒªã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’ç™»éŒ²ã—ã¾ã™ã€‚</p><p>ç§ãŸã¡ã¯ã€ãƒªã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ç™»éŒ²ã‚’ã‚ˆã‚Šä¸Šä½ã®ç®¡ç†è€…ã«ä¾é ¼ã—ã¦å®Ÿæ–½ã™ã‚‹ãƒ•ãƒ­ãƒ¼ã‚’ä½œæˆã—ãŸä¸Šã§ã€2ã¤ç›®ã®æ–¹æ³•ã‚’æ¡ç”¨ã—ã¾ã—ãŸã€‚åŒä¸€ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³å†…ã§è¤‡æ•°ãƒãƒ¼ãƒ ãŒãã‚Œãã‚ŒTerraformå®Ÿè¡Œã™ã‚‹ã‚ˆã†ãªã‚±ãƒ¼ã‚¹ã«ãŠã„ã¦ã€åˆ©ç”¨å¯èƒ½ãªãƒªã‚½ãƒ¼ã‚¹ã‚’åˆ¶é™ã™ã‚‹å ´åˆç­‰ã«æ¡ã‚Šå¾—ã‚‹æ–¹æ³•ãªã®ã‹ã¨æ€ã„ã¾ã™ã€‚</p><h1 id="ã•ã„ã”ã«"><a href="#ã•ã„ã”ã«" class="headerlink" title="ã•ã„ã”ã«"></a>ã•ã„ã”ã«</h1><p>ã“ã‚Œã¾ã§å¼·ã„æ¨©é™ã§Terraformã‚’æ“ä½œã—ã¦ã„ãŸãŸã‚ãƒªã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’æ„è­˜ã™ã‚‹ã“ã¨ã¯ç„¡ã‹ã£ãŸã®ã§ã™ãŒã€ä»Šå›ã¯ãƒãƒ¼ãƒ ã®é‹ç”¨ãƒãƒªã‚·ãƒ¼ã¨ã—ã¦æ¨©é™ãŒåˆ¶é™ã•ã‚Œã¦ã„ãŸãŸã‚æ”¹ã‚ã¦èª¿æŸ»ã—ã¾ã—ãŸã€‚</p><p>ãƒªã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ç™»éŒ²ã‚’å¿…è¦æœ€ä½é™ã«ã™ã‚‹ã“ã¨ã§ã€ä¸è¦ãªãƒªã‚½ãƒ¼ã‚¹ã‚’ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³å†…ã§ä½œæˆã•ã‚Œãªã„ã‚ˆã†ã«ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚ãƒªã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ç™»éŒ²ã®æ¨©é™ã‚’åˆ†é›¢ã™ã‚‹ã“ã¨ã§ã€ã‚ˆã‚Šå³æ ¼ã«Azureç’°å¢ƒã‚’é‹ç”¨ã§ãã¾ã™ã€‚</p><p>ã‚ˆã‚Šè‰¯ã„é‹ç”¨æ–¹æ³•ã«ã¤ã„ã¦ã€ä»Šå¾Œã‚‚è€ƒãˆã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚</p><p>ã¾ãŸã€ä»Šå›ã®è¨˜äº‹ã§æ‰±ã£ãŸãƒªã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã«ã¤ã„ã¦ã®èª¿æŸ»ã¯ã€åŒãƒãƒ¼ãƒ ã®æˆ¸äº•ç”°ã•ã‚“ã«ã”å”åŠ›ã„ãŸã ãã¾ã—ãŸã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼</p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Infrastructure/">Infrastructure</category>
      
      
      <category domain="https://future-architect.github.io/tags/Terraform/">Terraform</category>
      
      <category domain="https://future-architect.github.io/tags/Azure/">Azure</category>
      
      
      <comments>https://future-architect.github.io/articles/20240325a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>çˆ†é€Ÿç¿’å¾—ã€åˆå¿ƒè€…ã‹ã‚‰Rustã®å³æˆ¦åŠ›ã‚’å‚™ãˆã‚‹ã¾ã§</title>
      <link>https://future-architect.github.io/articles/20240322a/</link>
      <guid>https://future-architect.github.io/articles/20240322a/</guid>
      <pubDate>Thu, 21 Mar 2024 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;h2 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h2&gt;&lt;p&gt;é€±æœ«ã‚’åˆ©æ´»ç”¨ã—ãŸãã€æ–°ã—ã„è¨€èªã‚’ã‚¼ãƒ­ã‹ã‚‰å­¦ç¿’ã—ã¦å³æˆ¦åŠ›ã‚’å‚™ãˆã‚‹ã¾ã§ã©ã®ãã‚‰ã„ã‹ã‹ã‚‹ã‹ã‚’å®Ÿé¨“ã—ã¦ã¿ã¾ã—ãŸã€‚&lt;/p&gt;
&lt;h4</description>
          
        
      
      
      
      <content:encoded><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>é€±æœ«ã‚’åˆ©æ´»ç”¨ã—ãŸãã€æ–°ã—ã„è¨€èªã‚’ã‚¼ãƒ­ã‹ã‚‰å­¦ç¿’ã—ã¦å³æˆ¦åŠ›ã‚’å‚™ãˆã‚‹ã¾ã§ã©ã®ãã‚‰ã„ã‹ã‹ã‚‹ã‹ã‚’å®Ÿé¨“ã—ã¦ã¿ã¾ã—ãŸã€‚</p><h4 id="äº‹å‰çŠ¶æ…‹"><a href="#äº‹å‰çŠ¶æ…‹" class="headerlink" title="äº‹å‰çŠ¶æ…‹"></a>äº‹å‰çŠ¶æ…‹</h4><ul><li>ã„ãã¤ã‹ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªï¼ˆC++,Python,JavaScript,Java,Go,Bash,etc.ï¼‰ã®çµŒé¨“</li><li>åŸºç¤çš„ãªã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªæ§‹ç¯‰ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼‰ã®çµŒé¨“</li><li>Rustã¯æœªçµŒé¨“ã€‚äº‹å‰ã«çŸ¥ã£ã¦ã„ãŸã“ã¨<ul><li>ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«è¨€èª</li><li>å®Ÿè¡Œé€Ÿåº¦ãŒé€Ÿã„ã€C&#x2F;C++ã‹ã‚‰Goã®é–“ãã‚‰ã„</li><li>WebAssemblyã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã§ãã‚‹ã€ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§å‹•ãã‚²ãƒ¼ãƒ ã‚„ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ãªã©ã‚’ä½œã‚Œã‚‹</li></ul></li></ul><h4 id="å®Ÿç¸¾"><a href="#å®Ÿç¸¾" class="headerlink" title="å®Ÿç¸¾"></a>å®Ÿç¸¾</h4><ol><li>é–‹ç™ºç’°å¢ƒã‚’å‚™ãˆã‚‹ (30 min, 15:30~16:30)</li><li>åŸºæœ¬ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚’æŠŠæ¡ã™ã‚‹ (45 min, 16:00ï½16:30,&lt;ä¼‘æ†©&gt;,19:30ï½19:45)</li><li><del>Hello World</del> Game of Lifeã‚’å®Ÿè£…ã—ã¦ã¿ã‚‹ (135 min, 19:45ï½22:00)</li></ol><ul><li>ã‚¹ã‚¿ãƒ¼ãƒˆã‹ã‚‰ï¼‘å€‹ç›®ã®ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ‡ãƒ¢ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ï¼ˆ<a href="https://ja.wikipedia.org/wiki/%E3%83%A9%E3%82%A4%E3%83%95%E3%82%B2%E3%83%BC%E3%83%A0">Conwayâ€™s Game of Life</a>ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç‰ˆï¼‰ã®ä½œæˆã¾ã§ã€ç’°å¢ƒæ•´å‚™+æ¦‚å¿µå­¦ç¿’+ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°+ãƒ‡ãƒã‚°æ™‚é–“å®Ÿç¸¾ã¯<strong>210 min</strong>ã§ã—ãŸã€‚ï¼ˆé€”ä¸­ã§é£²ã‚“ã§ã„ãŸã®ã§å¾ŒåŠã¯åŠ¹ç‡æ‚ªã‹ã£ãŸï¼‰</li><li>çˆ†é€Ÿå­¦ç¿’ã®æµã‚Œã¯ã€ChatGPTå…ˆç”Ÿã«èãï¼‹å°‘ã—ã‚°ãƒ¼ã‚°ãƒ«æ¤œç´¢ï¼ˆRustã®æœ¬ã‚’ï¼“å†Šè²·ã„ã¾ã—ãŸãŒã€æœ€åˆã¯èª­ã¿ã¾ã›ã‚“ã§ã—ãŸã€‚ç†ç”±ã¯åŠ¹ç‡é‡è¦–ã®ãŸã‚ã€ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆé§†å‹•ã§ã‚„ã‚ŠãŸã„ã¨è€ƒãˆãŸãŸã‚ã§ã™ï¼‰</li><li>ã¾ãŸã€è‡ªåˆ†ã®æ‰‹ã§ä½œã‚ŠãŸã„ã®ã§ã€åŸºæœ¬ã¯ã‚¦ã‚§ãƒ–ã‹ã‚‰ã‚½ãƒ¼ã‚¹ã‚’ã‚³ãƒ”ãƒ¼ã—ãªã„ã“ã¨ã‚’ãƒ«ãƒ¼ãƒ«ã¨ã—ã¾ã—ãŸ</li></ul><p><em>ChatGPTã•ã‚“ã¨ã®ã‚„ã‚Šå–ã‚Šãƒ­ã‚°ã¯<a href="https://chat.openai.com/share/8f9d3ac3-85ca-46cd-8ebe-730490e40db8">ã“ã¡ã‚‰</a><br>ï¼ˆå…¨éƒ¨è‹±èªã§ã‚„ã‚Šã¾ã—ãŸã€è³ªå•ã®ä»•æ–¹ã«èˆˆå‘³ã‚ã‚‹æ–¹ã”å‚è€ƒã‚’ï¼‰</em></p><h2 id="å­¦ç¿’ãƒ­ã‚°"><a href="#å­¦ç¿’ãƒ­ã‚°" class="headerlink" title="å­¦ç¿’ãƒ­ã‚°"></a>å­¦ç¿’ãƒ­ã‚°</h2><h4 id="15-30-Start"><a href="#15-30-Start" class="headerlink" title="15:30 Start"></a>15:30 Start</h4><p>ChatGPTå…ˆç”Ÿã«Rustã®å­¦ç¿’ã‚¹ãƒ†ãƒƒãƒ—ã‚’æ•™ãˆã¦ãã‚ŒãŸã®ã¯ã€</p><ol><li>Understand the Basics</li><li>Setup Rust Development Environment</li><li>Write Your First Rust Program</li><li>Learn Ownership, Borrowing, and Lifetimes</li><li>Explore Rustâ€™s Standard Library</li><li>Understand Error Handling</li><li>Work on Small Projects</li><li>Read Advanced Topics and Best Practices</li><li>Join the Rust Community</li><li>Continuous Learning and Practice</li></ol><p>1ç•ªç›®ã‚’é£›ã°ã—ã€ç›´æ¥2ç•ªã®ç’°å¢ƒæ§‹ç¯‰ã‚’è¡Œã„ã¾ã™ã€‚</p><h4 id="15-30-15-33-Installation"><a href="#15-30-15-33-Installation" class="headerlink" title="15:30~15:33 Installation"></a>15:30~15:33 Installation</h4><p>æ¨å¥¨ã•ã‚ŒãŸä¸€ç•ªæ¥½ã®æ–¹æ³•ã§curl|shã®ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã§rustupã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚<br>ï¼ˆrustupã£ã¦ãªã«ï¼Ÿã¨ã„ã†ã®ã¯å¾Œã«ã—ã¾ã™ï¼‰</p><p><a href="https://www.rust-lang.org/tools/install">https://www.rust-lang.org/tools/install</a></p><h4 id="15-33-15-37-Hello-World"><a href="#15-33-15-37-Hello-World" class="headerlink" title="15:33~15:37 Hello World"></a>15:33~15:37 Hello World</h4><p>ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æˆåŠŸã®è¨¼ã«ã‚‚ãªã‚‹ãŸã‚ã€Hello Worldã®æ›¸ãæ–¹ã‚’èãã¾ã—ãŸã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">mkdir</span> my_rust_project</span><br><span class="line">$ <span class="built_in">cd</span> my_rust_project</span><br><span class="line">$ <span class="built_in">touch</span> main.rs</span><br></pre></td></tr></table></figure><p>main.rsã®å†…å®¹ã§ã™ã€‚</p><figure class="highlight rs"><table><tr><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Hello, World!&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã¨å®Ÿè¡Œ</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ rustc main.rs</span><br><span class="line">$ ./main</span><br><span class="line">Hello, World!</span><br></pre></td></tr></table></figure><p>æ¥½å‹ã§ã™ã­ï¼</p><h4 id="15-38-add-extension"><a href="#15-38-add-extension" class="headerlink" title="15:38 add extension"></a>15:38 add extension</h4><p>æ™®æ®µVisualStudioCodeã‚’æ„›ç”¨ã—ã¦ã„ã‚‹ãŸã‚ã€Rustç”¨ã®Extensionãªã«ã‹ãŠã™ã™ã‚ã‚ã‚‹ï¼Ÿã£ã¦èã„ãŸã‚‰ã€æ¬¡ã®å›ç­”ã§ã—ãŸ</p><ol><li>Rust (rls) by rust-lang</li><li>rust-analyzer by matklad</li><li>CodeLLDB by Vadim Chugunov</li><li>Better TOML by bungcip</li><li>Crates by serayuzgur</li><li>Cargo by serayuzgur</li></ol><p>â€¦ã—ã‹ã—ã€ä¸­ã«(deprecated)ãªã©ãƒ¡ãƒ³ãƒ†ã‚’ç¶šã‘ãªããªã‚‹ã‚‚ã®ã‚„ã€æ©Ÿèƒ½é‡è¤‡ã®ã‚‚ã®ã‚‚ã‚ã£ãŸãŸã‚ã€è©³ç´°ã‚’ç¢ºèªã—ã¤ã¤ã€æœ€çµ‚çš„ã«ã¯ä»¥ä¸‹ã‚’åˆ©ç”¨ã—ã¾ã—ãŸã€‚</p><ol><li>Language support: <a href="https://marketplace.visualstudio.com/items?itemName=rust-lang.rust-analyzer">rust-analyzer</a></li><li>Debugger: <a href="https://marketplace.visualstudio.com/items?itemName=vadimcn.vscode-lldb">CodeLLDB</a></li><li>TOML support for <code>Cargo.toml</code>: <a href="https://marketplace.visualstudio.com/items?itemName=tamasfe.even-better-toml">Even Better TOML</a></li><li>Dependency manager: <a href="https://marketplace.visualstudio.com/items?itemName=serayuzgur.crates">crates</a></li></ol><p>15:44 ãƒ‡ãƒ¼ã‚¿ã‚¿ã‚¤ãƒ—ã€å¤‰æ•°ã€é–¢æ•°ã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ•ãƒ­ãƒ¼(ifæ–‡ã€ãƒ«ãƒ¼ãƒ—æ–‡)ãªã©ã®ãŠå‹‰å¼·</p><h4 id="15-47-15-57-VSCodeã§å‹•ã‹ã™"><a href="#15-47-15-57-VSCodeã§å‹•ã‹ã™" class="headerlink" title="15:47~15:57 VSCodeã§å‹•ã‹ã™"></a>15:47~15:57 VSCodeã§å‹•ã‹ã™</h4><p>ã‚„ã£ã±ã‚ŠChatGPTå…ˆç”Ÿã ã‘ã«èãã®ãŒãªã‹ãªã‹ä¸å®‰ã§ã‚ã‚‹ãŸã‚ã€Googleã§<code>vscode run for rust</code>ã‚’æ¤œç´¢ã—ã¾ã—ãŸã€‚</p><p><a href="https://code.visualstudio.com/docs/languages/rust">https://code.visualstudio.com/docs/languages/rust</a></p><p>ã‚„ã¯ã‚Š <code>cargo</code> ã‚’ä½¿ã†ã“ã¨ã«ã—ã¾ã—ãŸã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ cargo new MyRustApp</span><br><span class="line">warning: the name `MyRustApp` is not snake_case or kebab-case <span class="built_in">which</span> is recommended <span class="keyword">for</span> package names, consider `myrustapp`</span><br><span class="line">     Created binary (application) `MyRustApp` package</span><br></pre></td></tr></table></figure><p>å‘½ååˆ¶ç´„é•åã¨ã„ã†ã“ã¨ã§warningã§æ€’ã‚‰ã‚Œã¾ã—ãŸã€‚snakeã‚±ãƒ¼ã‚¹ã«å¤‰ãˆã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ cargo new my_rust_app</span><br><span class="line">     Created binary (application) `my_rust_app` package</span><br></pre></td></tr></table></figure><p>ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆã‚‚ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> my_rust_app  </span><br><span class="line">$ tree -a -L 2</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ .git</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ FETCH_HEAD</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ HEAD</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ config</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ description</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ hooks</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ info</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ objects</span><br><span class="line">â”‚Â Â  â””â”€â”€ refs</span><br><span class="line">â”œâ”€â”€ .gitignore</span><br><span class="line">â”œâ”€â”€ Cargo.lock</span><br><span class="line">â”œâ”€â”€ Cargo.toml</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚Â Â  â””â”€â”€ main.rs</span><br><span class="line">â””â”€â”€ target</span><br><span class="line">    â”œâ”€â”€ .rustc_info.json</span><br><span class="line">    â”œâ”€â”€ CACHEDIR.TAG</span><br><span class="line">    â””â”€â”€ debug</span><br><span class="line"></span><br><span class="line">9 directories, 10 files</span><br></pre></td></tr></table></figure><p>gitã‚„.gitignoreã‚‚ç”Ÿæˆã•ã‚Œã¦ã„ã¾ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> .gitignore</span><br><span class="line">/target</span><br></pre></td></tr></table></figure><p><code>/target</code>ã‚’ignoreã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ãŸä¸­é–“ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒã‚¤ãƒŠãƒªãªã©ã ã‚ã†ã‹ã€ä¸€æ—¦ç„¡è¦–ã—ã¾ã™ã€‚</p><figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">$ cat Cargo.toml </span><br><span class="line"><span class="section">[package]</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">&quot;my_rust_app&quot;</span></span><br><span class="line"><span class="attr">version</span> = <span class="string">&quot;0.1.0&quot;</span></span><br><span class="line"><span class="attr">edition</span> = <span class="string">&quot;2021&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html</span></span><br><span class="line"></span><br><span class="line"><span class="section">[dependencies]</span></span><br><span class="line"></span><br><span class="line">$ cat Cargo.lock </span><br><span class="line"><span class="comment"># This file is automatically @generated by Cargo.</span></span><br><span class="line"><span class="comment"># It is not intended for manual editing.</span></span><br><span class="line"><span class="attr">version</span> = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="section">[[package]]</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">&quot;my_rust_app&quot;</span></span><br><span class="line"><span class="attr">version</span> = <span class="string">&quot;0.1.0&quot;</span></span><br></pre></td></tr></table></figure><p><code>Cargo.toml</code>ã¯metaæƒ…å ±ã‚„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå°å…¥ç”¨ã ã‚ã†(dependenciesãŒè¿½åŠ ã™ã‚‹ç®‡æ‰€ã¿ãŸã„)<br><code>Cargo.lock</code>ã¯è‡ªå‹•ç”Ÿæˆã®ã‚ˆã†ã§ã€ç·¨é›†ä¸å¯ã¨ã‚ã‚Šã¾ã™ã€‚</p><p>VSCodeã§my_rust_appã‚’openã—ã€main.rsã‚’è¦‹ã¦ã¿ã‚‹ã¨ã€ã“ã®å‰ã®Hello Worldãã®ã¾ã¾ã§ã—ãŸã€‚</p><p>ã¨ã«ã‹ãã€Ctrl+F5 (Run Without Debugging)ã§main.rsã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã™ã€‚</p><img src="/images/20240322a/1acd3193-ce50-e995-9953-e4016732cc01.png" alt="" width="536" height="430" loading="lazy"><img src="/images/20240322a/95894823-e76d-382b-7b3b-84bf51dd5410.png" alt="" width="534" height="650" loading="lazy"><p>OKã¨Yesã‚’æŠ¼ã™ã¨<code>.vscode/launch.json</code>ãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// Use IntelliSense to learn about possible attributes.</span></span><br><span class="line">    <span class="comment">// Hover to view descriptions of existing attributes.</span></span><br><span class="line">    <span class="comment">// For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;configurations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lldb&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;launch&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Debug executable &#x27;my_rust_app&#x27;&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;cargo&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                    <span class="string">&quot;build&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="string">&quot;--bin=my_rust_app&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="string">&quot;--package=my_rust_app&quot;</span></span><br><span class="line">                <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;filter&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;my_rust_app&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;kind&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bin&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;cwd&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceFolder&#125;&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lldb&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;launch&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Debug unit tests in executable &#x27;my_rust_app&#x27;&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;cargo&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                    <span class="string">&quot;test&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="string">&quot;--no-run&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="string">&quot;--bin=my_rust_app&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="string">&quot;--package=my_rust_app&quot;</span></span><br><span class="line">                <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;filter&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;my_rust_app&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;kind&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bin&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;cwd&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceFolder&#125;&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>ã‚‚ã†ä¸€åº¦ Ctrl+F5ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã¨å®Ÿè¡Œã®ä¸€é€£ãŒç™ºå‹•ã—ã€<code>Hello, world!</code>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ç¾ã‚Œã¦å®Ÿè¡ŒæˆåŠŸã§ã—ãŸã€‚<br>ã‚‚ã¡ã‚ã‚“ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§<code>cargo run</code>ã‚’å®Ÿè¡Œã—ã¦ã‚‚ã‚ˆã„ã§ã™ã€‚</p><p>ã¡ãªã¿ã«ã€cargoã§ã®ãƒ“ãƒ«ãƒ‰ã¯ä»¥ä¸‹ã§ã™ã€‚</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"> *  Executing task: CodeLLDB: cargo </span><br><span class="line"></span><br><span class="line">Running `cargo build --bin=my_rust_app --package=my_rust_app --message-format=json`...</span><br><span class="line">   Compiling my_rust_app v0.1.0 (/Users/wsysuper/my_rust_app)</span><br><span class="line">    Finished dev [unoptimized + debuginfo] target(s) <span class="keyword">in</span> 0.11s</span><br><span class="line"> *  Terminal will be reused by tasks, press any key to close it. </span><br></pre></td></tr></table></figure><p>ç¶šã‘ã¦ã€ChatGPTå…ˆç”Ÿã‹ã‚‰åŸºæœ¬çŸ¥è­˜ã‚’å‹‰å¼·ã—ã¾ã™ã€‚</p><h4 id="15-57-16-07-basic-data-types-variables-functions-and-control-flow-constructs"><a href="#15-57-16-07-basic-data-types-variables-functions-and-control-flow-constructs" class="headerlink" title="15:57~16:07 basic data types, variables, functions, and control flow constructs"></a>15:57~16:07 basic data types, variables, functions, and control flow constructs</h4><ol><li>Basic Data Types and Variables: <figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Declare variables with explicit types</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">number</span>: <span class="type">i32</span> = <span class="number">42</span>; <span class="comment">// Signed 32-bit integer</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">floating_point</span>: <span class="type">f64</span> = <span class="number">3.14</span>; <span class="comment">// Double-precision floating-point number</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Rust allows type inference</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">another_number</span> = <span class="number">123</span>; <span class="comment">// Compiler infers the type as i32</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Mutable variables using &#x27;mut&#x27; keyword</span></span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">mutable_variable</span> = <span class="number">10</span>;</span><br><span class="line">mutable_variable = <span class="number">20</span>; <span class="comment">// Can be changed later</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Constants using &#x27;const&#x27; keyword (must be annotated with a type)</span></span><br><span class="line"><span class="keyword">const</span> PI: <span class="type">f64</span> = <span class="number">3.14159</span>;</span><br></pre></td></tr></table></figure></li><li>Functions: <figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Function to add two numbers</span></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">add</span>(a: <span class="type">i32</span>, b: <span class="type">i32</span>) <span class="punctuation">-&gt;</span> <span class="type">i32</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b; <span class="comment">// Explicit return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Function without explicit return</span></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">multiply</span>(a: <span class="type">i32</span>, b: <span class="type">i32</span>) <span class="punctuation">-&gt;</span> <span class="type">i32</span> &#123;</span><br><span class="line">    a * b <span class="comment">// Implicit return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Function with no parameters and no return value</span></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">greet</span>() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Hello, World!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Function with multiple return values (using tuple)</span></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">calculate</span>(a: <span class="type">i32</span>, b: <span class="type">i32</span>) <span class="punctuation">-&gt;</span> (<span class="type">i32</span>, <span class="type">i32</span>) &#123;</span><br><span class="line">    (a + b, a * b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>Control Flow Constructs: <figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="comment">// If statement</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">number</span> = <span class="number">42</span>;</span><br><span class="line"><span class="keyword">if</span> number &gt; <span class="number">0</span> &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Positive&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> number &lt; <span class="number">0</span> &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Negative&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Zero&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// While loop</span></span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">count</span> = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> count &lt; <span class="number">5</span> &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Count: &#123;&#125;&quot;</span>, count);</span><br><span class="line">    count += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// For loop (range-based)</span></span><br><span class="line"><span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">0</span>..<span class="number">5</span> &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Value: &#123;&#125;&quot;</span>, i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// For loop (iterating over elements)</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">numbers</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">for</span> <span class="variable">num</span> <span class="keyword">in</span> numbers.<span class="title function_ invoke__">iter</span>() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Value: &#123;&#125;&quot;</span>, num);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Match expression</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">number</span> = <span class="number">42</span>;</span><br><span class="line"><span class="keyword">match</span> number &#123;</span><br><span class="line">    <span class="number">0</span> =&gt; <span class="built_in">println!</span>(<span class="string">&quot;Zero&quot;</span>),</span><br><span class="line">    <span class="number">1</span>..=<span class="number">100</span> =&gt; <span class="built_in">println!</span>(<span class="string">&quot;Between 1 and 100&quot;</span>),</span><br><span class="line">    _ =&gt; <span class="built_in">println!</span>(<span class="string">&quot;Something else&quot;</span>),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id="16-07-16-12-å¤‰æ•°-mutable-immutable-ãã—ã¦å®šæ•°-const-ã«ã¤ã„ã¦æ•™ã‚ã‚‹"><a href="#16-07-16-12-å¤‰æ•°-mutable-immutable-ãã—ã¦å®šæ•°-const-ã«ã¤ã„ã¦æ•™ã‚ã‚‹" class="headerlink" title="16:07~16:12 å¤‰æ•°(mutable&#x2F;immutable)ãã—ã¦å®šæ•°(const)ã«ã¤ã„ã¦æ•™ã‚ã‚‹"></a>16:07~16:12 å¤‰æ•°(mutable&#x2F;immutable)ãã—ã¦å®šæ•°(const)ã«ã¤ã„ã¦æ•™ã‚ã‚‹</h4><ul><li><p><code>let</code>: </p><ul><li>ä¸å¤‰ã®å¤‰æ•°ã‚’å®£è¨€ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹</li><li><code>let a = 1;</code>ã®ã‚ˆã†ã«å€¤ã‚’å‰²ã‚Šå½“ã¦ãŸå¾Œã¯å¤‰æ›´ã§ããªã„</li><li>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ä¸å¤‰ã§ã‚ã‚Šã€å€¤ã®å¤‰æ›´ã‚’æ„å›³ã—ã¦ã„ãªã„å ´åˆã«ä½¿ç”¨ã™ã‚‹</li></ul></li><li><p><code>let mut</code>: </p><ul><li>å¯å¤‰ã®å¤‰æ•°ã‚’å®£è¨€ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹</li><li><code>let mut a = 1;</code>ã®ã‚ˆã†ã«ã€<code>mut</code>ä¿®é£¾å­ã‚’ä»˜ã‘ã‚‹ã“ã¨ã§å¤‰æ›´å¯èƒ½ãªå¤‰æ•°ã‚’å®£è¨€ã§ãã‚‹</li></ul></li><li><p><code>const</code>: </p><ul><li>å®šæ•°ã‚’å®£è¨€ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹</li><li><code>const A: i32 = 1;</code>ã®ã‚ˆã†ã«ã€å‹ã‚’æ˜ç¤ºçš„ã«æ³¨é‡ˆä»˜ã‘ã—ã€å€¤ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«æ—¢çŸ¥ã§ãªã‘ã‚Œã°ãªã‚‰ãªã„</li><li>å¸¸ã«ä¸å¤‰ã§ã‚ã‚Šã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å®Ÿè¡Œä¸­ã«å¤‰æ›´ã™ã‚‹ã“ã¨ã¯ã§ããªã„</li></ul></li></ul><p>ã•ã‚‰ã«ã€è©¦é¨“ã—ã¦å®šæ•°ã®è©•ä¾¡å¼ãŒã‚ã£ã¦ã‚‚ã†ã¾ãã„ãã¾ã—ãŸï¼ˆã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒè¨ˆç®—ã®çµæœã‚’å®šæ•°åŒ–ã—ã¦ãã‚Œã‚‹ã­ï¼‰ã€‚</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> A: <span class="type">i32</span> = <span class="number">1</span> + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> B: <span class="type">i32</span> = A + <span class="number">1</span>;</span><br></pre></td></tr></table></figure><p>ãŸã ã€å¤‰æ•°ã‚’å«ã‚ãŸè¨ˆç®—å¼ã¯ãƒ€ãƒ¡ã§ã—ãŸã€‚</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">x</span> = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">const</span> C: <span class="type">i32</span> = x + <span class="number">1</span>;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã‚¨ãƒ©ãƒ¼ã«ãªã£ãŸ</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">error[E0435]: attempt to <span class="keyword">use</span> a non-constant value <span class="keyword">in</span> a constant</span><br><span class="line"> -<span class="punctuation">-&gt;</span> src/main.rs:<span class="number">6</span>:<span class="number">20</span></span><br><span class="line">  |</span><br><span class="line"><span class="number">6</span> |     <span class="keyword">const</span> C: <span class="type">i32</span> = x + <span class="number">1</span>;</span><br><span class="line">  |     -------        ^ non-constant value</span><br><span class="line">  |     |</span><br><span class="line">  |     help: consider using `<span class="keyword">let</span>` instead of `<span class="keyword">const</span>`: `<span class="keyword">let</span> <span class="variable">C</span>`</span><br></pre></td></tr></table></figure><h4 id="16-12-16-23-Ownership-Borrowing-and-Lifetimes"><a href="#16-12-16-23-Ownership-Borrowing-and-Lifetimes" class="headerlink" title="16:12~16:23 Ownership, Borrowing, and Lifetimes"></a>16:12~16:23 Ownership, Borrowing, and Lifetimes</h4><p>Ownershipã€Borrowingã€ãã—ã¦Lifetimesã®æ¦‚å¿µã¯ã€RustãŒå®‰å…¨æ€§ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ä¸¡ç«‹ã•ã›ã‚‹ãŸã‚ã®åŸºæœ¬çš„ãªä»•çµ„ã¿ã¨ã—ã¦é‡è¦ã§ã™ã€‚</p><ul><li><strong>Ownershipï¼ˆæ‰€æœ‰æ¨©ï¼‰</strong>:<ul><li>Rustã®ä¸­å¿ƒçš„ãªæ¦‚å¿µã§ã‚ã‚Šã€ãƒ¡ãƒ¢ãƒªãƒªã‚½ãƒ¼ã‚¹ã®ç®¡ç†ã‚’è¡Œã†</li><li>å„å€¤ã«ã¯æ‰€æœ‰è€…ãŒå­˜åœ¨ã—ã€æ‰€æœ‰è€…ã¯ãã®å€¤ã‚’æ‰€æœ‰ã™ã‚‹</li><li>æ‰€æœ‰è€…ãŒã‚¹ã‚³ãƒ¼ãƒ—ã‚’æŠœã‘ã‚‹ã¨ã€ãã®å€¤ã¯è§£æ”¾ã•ã‚Œã‚‹ï¼ˆdropã•ã‚Œã‚‹ï¼‰</li></ul></li><li><strong>Borrowingï¼ˆå€Ÿç”¨ï¼‰</strong>:<ul><li>æ‰€æœ‰è€…ãŒå€¤ã‚’æ‰€æœ‰ã™ã‚‹é–“ã€ä»–ã®ã‚³ãƒ¼ãƒ‰ã«å€¤ã®ä¸€æ™‚çš„ãªå‚ç…§ã‚’è¨±å¯ã™ã‚‹</li><li>å€Ÿç”¨ã¯ä¸å¤‰(<code>&amp;</code>)ã¾ãŸã¯å¯å¤‰(<code>&amp;mut</code>)ã®2ã¤ã®å½¢æ…‹ãŒã‚ã‚‹</li><li>ä¸å¤‰ã®å€Ÿç”¨ã¯åŒæ™‚ã«è¤‡æ•°ã®èª­ã¿å–ã‚Šã‚¢ã‚¯ã‚»ã‚¹ã‚’å¯èƒ½ã«ã™ã‚‹ãŒã€å¯å¤‰ã®å€Ÿç”¨ã¯ä¸€ã¤ã®æ›¸ãè¾¼ã¿ã‚¢ã‚¯ã‚»ã‚¹ã—ã‹è¨±å¯ã—ãªã„</li></ul></li><li><strong>Lifetimesï¼ˆå¯¿å‘½ï¼‰</strong>:<ul><li>å€Ÿç”¨ã®æœ‰åŠ¹ç¯„å›²ã‚’æ˜ç¤ºçš„ã«ç¤ºã™ãŸã‚ã®ä»•çµ„ã¿</li><li>å€¤ã®å‚ç…§ãŒæœ‰åŠ¹ã§ã‚ã‚‹æœŸé–“ã‚’ç¤ºã™</li><li>ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã¯ã€å€Ÿç”¨ãŒæ‰€æœ‰è€…ã‚ˆã‚Šé•·ãç¶šã‹ãªã„ã‚ˆã†ã«ç›£è¦–ã—ã€ãƒ‡ãƒ¼ã‚¿ç«¶åˆã‚„ç„¡åŠ¹ãªãƒ¡ãƒ¢ãƒªã‚¢ã‚¯ã‚»ã‚¹ã‚’é˜²ã</li></ul></li><li><strong>æ‰€æœ‰æ¨©ãƒ«ãƒ¼ãƒ«</strong>:<ul><li>Rustã®å€¤ã¯å¸¸ã«ãŸã 1ã¤ã®æ‰€æœ‰è€…ã‚’æŒã¤</li><li>æ‰€æœ‰è€…ãŒã‚¹ã‚³ãƒ¼ãƒ—ã‹ã‚‰å¤–ã‚Œã‚‹ã¨ãã€å€¤ã¯è§£æ”¾ã•ã‚Œã‚‹</li><li>æ‰€æœ‰è€…ã¯å€¤ã‚’å¿…è¦ã¨ã™ã‚‹ã ã‘æŒã¤</li><li>å€¤ã‚’å‚ç…§ã™ã‚‹éš›ã«ã¯ã€æ‰€æœ‰æ¨©ã‚’å€Ÿç”¨ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ãŒã€æ‰€æœ‰è€…ãŒå­˜åœ¨ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„</li></ul></li><li><strong>ãƒ¡ãƒªãƒƒãƒˆ</strong>:<ul><li>æ‰€æœ‰æ¨©ã€å€Ÿç”¨ã€ãŠã‚ˆã³å¯¿å‘½ã®ã‚·ã‚¹ãƒ†ãƒ ã¯ã€ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚³ã‚¹ãƒˆãªã—ã§ãƒ¡ãƒ¢ãƒªå®‰å…¨æ€§ã‚’ä¿è¨¼ã™ã‚‹</li><li>ãƒ‡ãƒ¼ã‚¿ç«¶åˆã‚„ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³é•åãªã©ã®ä¸€èˆ¬çš„ãªãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚¨ãƒ©ãƒ¼ã‚’æ’é™¤ã™ã‚‹</li><li>ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒã‚³ãƒ¼ãƒ‰ã®æ­£å½“æ€§ã‚’é™çš„ã«ç¢ºèªã™ã‚‹ã“ã¨ã§ã€ãƒã‚°ã‚’æ—©æœŸã«ç™ºè¦‹ã—ã‚„ã™ãã™ã‚‹</li></ul></li></ul><h4 id="16-23-16-30-Standard-Library"><a href="#16-23-16-30-Standard-Library" class="headerlink" title="16:23~16:30 Standard Library"></a>16:23~16:30 Standard Library</h4><ol><li><code>std::collections</code><ul><li>ãƒ™ã‚¯ã‚¿ã€ãƒãƒƒã‚·ãƒ¥ãƒãƒƒãƒ—ã€ã‚»ãƒƒãƒˆãªã©ã€Rust ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³å‹ãŒå«ã¾ã‚Œã¦ã„ã‚‹</li><li><code>Vec</code>ã€<code>HashMap</code>ã€<code>HashSet</code>ã€<code>LinkedList</code>ã€<code>BinaryHeap</code>ãªã©ã®å‹ãŒã‚ã‚‹</li></ul></li><li><code>std::io</code><ul><li>å…¥å‡ºåŠ›æ“ä½œã‚’è¡Œã†ãŸã‚ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã™</li><li>ãƒ•ã‚¡ã‚¤ãƒ« I&#x2F;Oã€æ¨™æº–å…¥å‡ºåŠ›ã€ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãªã©ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹</li><li><code>Read</code>ã€<code>Write</code>ã€<code>BufReader</code>ã€<code>BufWriter</code>ãªã©ã®å‹ã‚„é–¢æ•°ãŒã‚ã‚‹</li></ul></li><li><code>std::fs</code><ul><li>ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ é–¢é€£ã®æ©Ÿèƒ½ãŒæä¾›ã•ã‚Œã¦ã„ã‚‹</li><li>ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®æ“ä½œã€ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã€ãƒ‘ã‚¹ã®å‡¦ç†ãªã©ãŒå¯èƒ½ã§ã™</li><li><code>File</code>ã€<code>DirEntry</code>ã€<code>Metadata</code>ã€<code>create_dir</code>ã€<code>read_dir</code>ãªã©ã®å‹ã‚„é–¢æ•°ãŒå«ã¾ã‚Œã¦ã„ã‚‹</li></ul></li><li><code>std::thread</code><ul><li>ã‚¹ãƒ¬ãƒƒãƒ‰ã®ä½œæˆã€ã‚¹ãƒ¬ãƒƒãƒ‰é–“é€šä¿¡ã€åŒæœŸå‡¦ç†ãªã©ã‚’è¡Œã†ãŸã‚ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã‚ã‚‹</li><li><code>thread::spawn</code>ã€<code>thread::sleep</code>ã€<code>Mutex</code>ã€<code>Arc</code>ã€<code>JoinHandle</code>ãªã©ã®å‹ã‚„é–¢æ•°ãŒã‚ã‚‹</li></ul></li><li><code>std::sync</code><ul><li>åŒæœŸãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ãŒæä¾›ã•ã‚Œã¦ã„ã‚‹</li><li>ãƒŸãƒ¥ãƒ¼ãƒ†ãƒƒã‚¯ã‚¹ã€ã‚¢ãƒˆãƒŸãƒƒã‚¯ãªãƒ‡ãƒ¼ã‚¿å‹ã€ãƒãƒ£ãƒãƒ«ãªã©ãŒå«ã¾ã‚Œã¦ã„ã‚‹</li><li><code>Mutex</code>ã€<code>RwLock</code>ã€<code>AtomicBool</code>ã€<code>mpsc::channel</code>ãªã©ã®å‹ã‚„é–¢æ•°ãŒã‚ã‚‹</li></ul></li><li><code>std::net</code><ul><li>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°é–¢é€£ã®æ©Ÿèƒ½ãŒæä¾›ã•ã‚Œã¦ã„ã‚‹</li><li>ã‚½ã‚±ãƒƒãƒˆã®ä½œæˆã€TCP&#x2F;UDP é€šä¿¡ã€ã‚¢ãƒ‰ãƒ¬ã‚¹è§£æ±ºãªã©ãŒå¯èƒ½</li><li><code>TcpStream</code>ã€<code>UdpSocket</code>ã€<code>Ipv4Addr</code>ã€<code>SocketAddr</code>ãªã©ã®å‹ã‚„é–¢æ•°ãŒã‚ã‚‹</li></ul></li><li><code>std::time</code><ul><li>æ™‚åˆ»ã‚„æ™‚é–“ã«é–¢é€£ã™ã‚‹æ“ä½œãŒæä¾›ã•ã‚Œã¦ã„ã‚‹</li><li>ã‚·ã‚¹ãƒ†ãƒ æ™‚åˆ»ã®å–å¾—ã€æ™‚é–“ã®è¨ˆæ¸¬ã€ã‚¹ãƒªãƒ¼ãƒ—ãªã©ãŒå¯èƒ½</li><li><code>SystemTime</code>ã€<code>Duration</code>ã€<code>Instant</code>ãªã©ã®å‹ã‚„é–¢æ•°ãŒã‚ã‚‹</li></ul></li><li><code>std::path</code><ul><li>ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã«é–¢é€£ã™ã‚‹æ©Ÿèƒ½ãŒæä¾›ã•ã‚Œã¦ã„ã‚‹</li><li>ãƒ‘ã‚¹ã®çµåˆã€è§£æã€æ­£è¦åŒ–ãªã©ãŒå¯èƒ½</li><li><code>Path</code>ã€<code>PathBuf</code>ã€<code>join</code>ã€<code>canonicalize</code>ãªã©ã®å‹ã‚„é–¢æ•°ãŒã‚ã‚‹</li></ul></li><li><code>std::env</code><ul><li>å®Ÿè¡Œç’°å¢ƒã¨ã®ã‚„ã‚Šå–ã‚Šã«é–¢é€£ã™ã‚‹æ©Ÿèƒ½ãŒæä¾›ã•ã‚Œã¦ã„ã‚‹</li><li>ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®å–å¾—ã€ç’°å¢ƒå¤‰æ•°ã®æ“ä½œã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å–å¾—ãªã©ãŒå¯èƒ½</li><li><code>args</code>ã€<code>var</code>ã€<code>current_dir</code>ãªã©ã®å‹ã‚„é–¢æ•°ãŒã‚ã‚‹</li></ul></li><li><code>std::error</code><ul><li>ã‚¨ãƒ©ãƒ¼å‡¦ç†ã«é–¢é€£ã™ã‚‹æ©Ÿèƒ½ãŒæä¾›ã•ã‚Œã¦ã„ã‚‹</li><li>ã‚¨ãƒ©ãƒ¼å‹ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æ©Ÿæ§‹ãªã©ãŒå«ã¾ã‚Œã¦ã„ã‚‹</li><li><code>Error</code>ã€<code>Result</code>ã€<code>From</code>ã€<code>Display</code>ãªã©ã®å‹ã‚„ãƒˆãƒ¬ã‚¤ãƒˆãŒã‚ã‚‹</li></ul></li></ol><h4 id="16-30-ä¼‘æ†©ã«å…¥ã‚‹"><a href="#16-30-ä¼‘æ†©ã«å…¥ã‚‹" class="headerlink" title="16:30 ä¼‘æ†©ã«å…¥ã‚‹"></a>16:30 ä¼‘æ†©ã«å…¥ã‚‹</h4><p>&lt;3æ™‚é–“å¾Œå†é–‹&gt;</p><h4 id="19-30-19-40-Understand-Error-Handling"><a href="#19-30-19-40-Understand-Error-Handling" class="headerlink" title="19:30~19:40 Understand Error Handling"></a>19:30~19:40 Understand Error Handling</h4><p>Error handling in Rust is a fundamental aspect of writing robust and reliable code. Rust provides mechanisms to handle errors in a way that ensures safety and encourages explicit handling of error conditions. The two main types used for error handling in Rust are <code>Result&lt;T, E&gt;</code> and <code>Option&lt;T&gt;</code>.</p><ol><li><strong>Result&lt;T, E&gt;</strong>:<ul><li><code>Result&lt;T, E&gt;</code> is a type that represents either success with a value of type <code>T</code> or failure with an error of type <code>E</code></li><li>The <code>Ok(T)</code> variant signifies success and contains the value of type <code>T</code>, while the <code>Err(E)</code> variant represents failure and contains the error of type <code>E</code></li><li>Result types are commonly used for functions that may fail or encounter errors during execution <figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> std::fs::File;</span><br><span class="line"><span class="keyword">use</span> std::io::Read;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">read_file_contents</span>(file_path: &amp;<span class="type">str</span>) <span class="punctuation">-&gt;</span> <span class="type">Result</span>&lt;<span class="type">String</span>, std::io::Error&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">file</span> = File::<span class="title function_ invoke__">open</span>(file_path)?;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">contents</span> = <span class="type">String</span>::<span class="title function_ invoke__">new</span>();</span><br><span class="line">    file.<span class="title function_ invoke__">read_to_string</span>(&amp;<span class="keyword">mut</span> contents)?;</span><br><span class="line">    <span class="title function_ invoke__">Ok</span>(contents)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">match</span> <span class="title function_ invoke__">read_file_contents</span>(<span class="string">&quot;example.txt&quot;</span>) &#123;</span><br><span class="line">        <span class="title function_ invoke__">Ok</span>(contents) =&gt; <span class="built_in">println!</span>(<span class="string">&quot;File contents: &#123;&#125;&quot;</span>, contents),</span><br><span class="line">        <span class="title function_ invoke__">Err</span>(err) =&gt; eprintln!(<span class="string">&quot;Error reading file: &#123;&#125;&quot;</span>, err),</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><strong>Option<T></strong>:<ul><li><code>Option&lt;T&gt;</code> is a type that represents either some value of type <code>T</code> or none (null-like value)</li><li>The <code>Some(T)</code> variant contains the value of type <code>T</code>, while the <code>None</code> variant represents the absence of a value</li><li>Option types are commonly used for functions that may or may not return a value <figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">divide</span>(a: <span class="type">f64</span>, b: <span class="type">f64</span>) <span class="punctuation">-&gt;</span> <span class="type">Option</span>&lt;<span class="type">f64</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> b != <span class="number">0.0</span> &#123;</span><br><span class="line">        <span class="title function_ invoke__">Some</span>(a / b)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="literal">None</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">result</span> = <span class="title function_ invoke__">divide</span>(<span class="number">10.0</span>, <span class="number">2.0</span>);</span><br><span class="line">    <span class="keyword">match</span> result &#123;</span><br><span class="line">        <span class="title function_ invoke__">Some</span>(value) =&gt; <span class="built_in">println!</span>(<span class="string">&quot;Result: &#123;&#125;&quot;</span>, value),</span><br><span class="line">        <span class="literal">None</span> =&gt; <span class="built_in">println!</span>(<span class="string">&quot;Cannot divide by zero&quot;</span>),</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><strong>Error Propagation</strong>:<ul><li>Rust provides the <code>?</code> operator to propagate errors from functions that return <code>Result</code> or <code>Option</code></li><li>When used within a function that returns <code>Result</code> or <code>Option</code>, the <code>?</code> operator will return early with the error if an error occurs, simplifying error handling code <figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">read_file_contents</span>(file_path: &amp;<span class="type">str</span>) <span class="punctuation">-&gt;</span> <span class="type">Result</span>&lt;<span class="type">String</span>, std::io::Error&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">file</span> = File::<span class="title function_ invoke__">open</span>(file_path)?;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">contents</span> = <span class="type">String</span>::<span class="title function_ invoke__">new</span>();</span><br><span class="line">    file.<span class="title function_ invoke__">read_to_string</span>(&amp;<span class="keyword">mut</span> contents)?;</span><br><span class="line">    <span class="title function_ invoke__">Ok</span>(contents)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><strong>Panics</strong>:<ul><li>Panics represent unrecoverable errors in Rust and are triggered by calling the <code>panic!</code> macro</li><li>Panics unwind the stack and terminate the program, printing an error message if provided</li><li>Panics are typically used for programming errors or unexpected conditions that cannot be handled gracefully <figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">divide</span>(a: <span class="type">f64</span>, b: <span class="type">f64</span>) <span class="punctuation">-&gt;</span> <span class="type">f64</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> b != <span class="number">0.0</span> &#123;</span><br><span class="line">        a / b</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">panic!</span>(<span class="string">&quot;Division by zero&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ol><p>Error handling in Rust encourages developers to handle errors explicitly, promoting code safety and reliability. By using <code>Result&lt;T, E&gt;</code> and <code>Option&lt;T&gt;</code> types effectively, Rust ensures that error conditions are appropriately managed, improving code readability and maintainability.</p><h4 id="19-40-19-45-ä»–ã®ä¸æ˜ç‚¹ã«ã¤ã„ã¦è³ªå•"><a href="#19-40-19-45-ä»–ã®ä¸æ˜ç‚¹ã«ã¤ã„ã¦è³ªå•" class="headerlink" title="19:40~19:45 ä»–ã®ä¸æ˜ç‚¹ã«ã¤ã„ã¦è³ªå•"></a>19:40~19:45 ä»–ã®ä¸æ˜ç‚¹ã«ã¤ã„ã¦è³ªå•</h4><p>ç§: <code>What are rustc, cargo, and rustup used for?</code></p><p>ChatGPTå›ç­”:</p><ol><li><strong>rustc</strong>:<ul><li><code>rustc</code> is the Rust compiler, responsible for compiling Rust source code into executable programs or libraries</li><li>It takes Rust source files (<code>.rs</code>) as input and generates machine code for the target platform</li><li>Developers can invoke rustc directly from the command line to compile Rust programs without using any build system</li></ul></li><li><strong>cargo</strong>:<ul><li><code>cargo</code> is Rustâ€™s build system and package manager. It automates the process of compiling Rust code, managing dependencies, and building projects</li><li>With <code>cargo</code>, developers can create, build, test, and publish Rust packages effortlessly</li><li>It provides commands like <code>cargo new</code> for creating new projects, <code>cargo build</code> for compiling code, <code>cargo run</code> for executing programs, <code>cargo test</code> for running tests, and <code>cargo publish</code> for publishing crates to the official package registry, crates.io</li></ul></li><li><strong>rustup</strong>:<ul><li><code>rustup</code> is the Rust toolchain installer and manager. It allows developers to install and manage multiple versions of the Rust toolchain on their system</li><li><code>rustup</code> makes it easy to switch between different versions of the Rust compiler, including stable, beta, and nightly releases</li><li>It also manages associated tools like <code>cargo</code>, <code>rustc</code>, and documentation</li><li><code>rustup</code> simplifies the process of setting up a Rust development environment and ensures compatibility with Rust projects across different environments</li></ul></li></ol><p>In summary, <code>rustc</code> is the Rust compiler used for compiling Rust code, <code>cargo</code> is the build system and package manager for Rust projects, and <code>rustup</code> is the toolchain installer and manager for managing Rust installations and associated tools. Together, these tools form the foundation of the Rust development ecosystem, enabling efficient and reliable development of Rust applications.</p><h4 id="19-45-Starting-with-a-classic-project-like-Conwayâ€™s-Game-of-Life"><a href="#19-45-Starting-with-a-classic-project-like-Conwayâ€™s-Game-of-Life" class="headerlink" title="19:45 Starting with a classic project like Conwayâ€™s Game of Life"></a>19:45 Starting with a classic project like Conwayâ€™s Game of Life</h4><p>ã„ã‚ˆã„ã‚ˆæœ¬æ°—ã«åˆã‚ã¦ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹å§‹ã—ã¾ã™ã€‚</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">cargo new game_of_life</span><br><span class="line">code game_of_life</span><br></pre></td></tr></table></figure><p>ChatGPTã«æ•™ãˆã‚‰ã‚ŒãŸéª¨æ ¼ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚ï¼ˆã“ã“ã ã‘ã‚³ãƒ”ãƒšï¼‰</p><figure class="highlight rs"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Your main.rs file</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">GameOfLife</span> &#123;</span><br><span class="line">    <span class="comment">// Define your game board here</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">GameOfLife</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">new</span>(width: <span class="type">usize</span>, height: <span class="type">usize</span>) <span class="punctuation">-&gt;</span> <span class="keyword">Self</span> &#123;</span><br><span class="line">        <span class="comment">// Initialize the game board</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        GameOfLife &#123;</span><br><span class="line">            <span class="comment">// Initialize your fields here</span></span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">update</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="comment">// Update the game board based on the rules of the game</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">render</span>(&amp;<span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="comment">// Render the game board to the console</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">game</span> = GameOfLife::<span class="title function_ invoke__">new</span>(<span class="number">50</span>, <span class="number">30</span>); <span class="comment">// Example size for the board</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">loop</span> &#123;</span><br><span class="line">        game.<span class="title function_ invoke__">update</span>();</span><br><span class="line">        game.<span class="title function_ invoke__">render</span>();</span><br><span class="line">        std::thread::<span class="title function_ invoke__">sleep</span>(std::time::Duration::<span class="title function_ invoke__">from_millis</span>(<span class="number">100</span>)); <span class="comment">// Adjust the speed of the simulation</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã¾ãšã¯ã€main()ã‹ã‚‰æ”¹ä¿®ã—ã¾ã™ã€‚<br>ã¡ã‚‡ã£ã¨ãƒªãƒ†ãƒ©ãƒ«ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’åˆ‡ã‚Šå‡ºã—ã€ãƒ‡ãƒã‚°ã—ã‚„ã™ã„ã‚ˆã†ã«loopã‚’ä¸€æ—¦ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã—ã¾ã™ã€‚</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">width</span> = <span class="number">50</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">height</span> = <span class="number">30</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">sleep_time</span> = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">game</span> = GameOfLife::<span class="title function_ invoke__">new</span>(width, height);</span><br><span class="line">    <span class="comment">// loop &#123;</span></span><br><span class="line">    game.<span class="title function_ invoke__">update</span>();</span><br><span class="line">    game.<span class="title function_ invoke__">render</span>();</span><br><span class="line">    std::thread::<span class="title function_ invoke__">sleep</span>(std::time::Duration::<span class="title function_ invoke__">from_millis</span>(sleep_time));</span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¬¡ã«ã€<code>struct GameOfLife</code>ã«çŠ¶æ…‹ãƒ‡ãƒ¼ã‚¿ã‚’ä¿æŒã™ã‚‹å ´æ‰€ã ã‚ã†ã‹ã¨æ€ã„ã€2dé…åˆ—ã‚’ã“ã®å‰æ•™ãˆã‚‰ã‚ŒãŸstd::collectionsã®Vecã‚’ä½¿ã†ãã‚‰ã„ã®æ„Ÿè¦šã ãŒã€Vecã¨2æ¬¡å…ƒã®Vecã®ä½¿ã„æ–¹ã‚’å…·ä½“çš„ã«ã¾ãŸèãã¾ã—ãŸã€‚</p><h4 id="20-00-20-30-2d-Vecã‚’åˆ©ç”¨ã—ã€struct-GameOfLifeã¨ãã®implã®newã®å®Ÿè£…"><a href="#20-00-20-30-2d-Vecã‚’åˆ©ç”¨ã—ã€struct-GameOfLifeã¨ãã®implã®newã®å®Ÿè£…" class="headerlink" title="20:00~20:30 2d Vecã‚’åˆ©ç”¨ã—ã€struct GameOfLifeã¨ãã®implã®newã®å®Ÿè£…"></a>20:00~20:30 2d Vecã‚’åˆ©ç”¨ã—ã€<code>struct GameOfLife</code>ã¨ãã®implã®<code>new</code>ã®å®Ÿè£…</h4><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">GameOfLife</span> &#123;</span><br><span class="line">    width: <span class="type">usize</span>,</span><br><span class="line">    height: <span class="type">usize</span>,</span><br><span class="line">    cells: <span class="type">Vec</span>&lt;<span class="type">Vec</span>&lt;<span class="type">bool</span>&gt;&gt;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">GameOfLife</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">new</span>(width: <span class="type">usize</span>, height: <span class="type">usize</span>) <span class="punctuation">-&gt;</span> <span class="keyword">Self</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">gol</span> = GameOfLife &#123;</span><br><span class="line">            width,</span><br><span class="line">            height,</span><br><span class="line">            cells: <span class="type">Vec</span>::<span class="title function_ invoke__">with_capacity</span>(height),</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">for</span> <span class="variable">_</span> <span class="keyword">in</span> <span class="number">0</span>..height &#123;</span><br><span class="line">            <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">row</span> = <span class="type">Vec</span>::<span class="title function_ invoke__">with_capacity</span>(width);</span><br><span class="line">            <span class="keyword">for</span> <span class="variable">_</span> <span class="keyword">in</span> <span class="number">0</span>..width &#123;</span><br><span class="line">                row.<span class="title function_ invoke__">push</span>(<span class="literal">false</span>); <span class="comment">// ã“ã“ã¯randomã®true/falseã™ã‚‹æ–¹æ³•ãŒåˆ†ã‹ã‚‰ãªã„ã€ä¸€æ—¦å…¨éƒ¨falseã«</span></span><br><span class="line">            &#125;</span><br><span class="line">            gol.cells.<span class="title function_ invoke__">push</span>(row);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> gol;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="20-30-20-34-renderã®å®Ÿè£…"><a href="#20-30-20-34-renderã®å®Ÿè£…" class="headerlink" title="20:30~20:34 renderã®å®Ÿè£…"></a>20:30~20:34 <code>render</code>ã®å®Ÿè£…</h4><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">render</span>(&amp;<span class="keyword">self</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> <span class="variable">row</span> <span class="keyword">in</span> &amp;<span class="keyword">self</span>.cells &#123;</span><br><span class="line">        <span class="keyword">for</span> <span class="variable">cell</span> <span class="keyword">in</span> row &#123;</span><br><span class="line">            <span class="keyword">if</span> *cell &#123;</span><br><span class="line">                <span class="built_in">print!</span>(<span class="string">&quot;* &quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">print!</span>(<span class="string">&quot;. &quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">print!</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">print!</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆæœŸçŠ¶æ…‹ã®å‡ºåŠ›ãŒã§ãã¾ã—ãŸï¼</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </span><br><span class="line">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </span><br><span class="line">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </span><br><span class="line">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </span><br><span class="line">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </span><br><span class="line">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </span><br><span class="line">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </span><br><span class="line">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </span><br><span class="line">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </span><br><span class="line">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </span><br><span class="line">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </span><br><span class="line">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </span><br><span class="line">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </span><br><span class="line">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </span><br><span class="line">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </span><br><span class="line">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </span><br><span class="line">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </span><br><span class="line">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </span><br><span class="line">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </span><br><span class="line">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </span><br><span class="line">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </span><br><span class="line">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </span><br><span class="line">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </span><br><span class="line">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </span><br><span class="line">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </span><br><span class="line">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </span><br><span class="line">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </span><br><span class="line">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </span><br><span class="line">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </span><br><span class="line">. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . </span><br></pre></td></tr></table></figure><h4 id="20-34-20-37-ãƒ©ãƒ³ãƒ€ãƒ å€¤ã®ç”Ÿæˆæ–¹æ³•ã‚’ç¿’å¾—"><a href="#20-34-20-37-ãƒ©ãƒ³ãƒ€ãƒ å€¤ã®ç”Ÿæˆæ–¹æ³•ã‚’ç¿’å¾—" class="headerlink" title="20:34~20:37 ãƒ©ãƒ³ãƒ€ãƒ å€¤ã®ç”Ÿæˆæ–¹æ³•ã‚’ç¿’å¾—"></a>20:34~20:37 ãƒ©ãƒ³ãƒ€ãƒ å€¤ã®ç”Ÿæˆæ–¹æ³•ã‚’ç¿’å¾—</h4><p>Cargo.tomlã®dependenciesã«<a href="https://crates.io/crates/rand">rand</a>ã¨ã„ã†cratesã¨ãã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¨˜è¼‰ã—ã¾ã™ã€‚</p><figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[dependencies]</span></span><br><span class="line"><span class="attr">rand</span> = <span class="string">&quot;0.8.5&quot;</span></span><br></pre></td></tr></table></figure><p>ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°å…ˆé ­ã«useæ–‡ã‚’å…¥ã‚Œã¦ã€ãƒ©ãƒ³ãƒ€ãƒ ä½¿ã†ã¨ã“ã‚ã§ã€<code>random()</code>ã‚’ã“ã®å‰ã®ãƒ€ãƒŸãƒ¼ã®<code>false</code>ã‚’å…¥ã‚Œæ›¿ãˆã‚‹ã€‚å‹ã¯æ¨è«–ã—ã¦ãã‚Œã‚‹ã‚‰ã—ã„ã§ã™(ã“ã“ã¯boolã€‚i32ã‚„f64ã§ã‚‚åŒã˜æ›¸ãæ–¹ã§ã€è‡ªå‹•çš„ã«æ¨è«–ã§ãã¦ç´ æ™´ã‚‰ã—ã„)ã€‚</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> rand::prelude::random;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="comment">// row.push(false);</span></span><br><span class="line">row.<span class="title function_ invoke__">push</span>(<span class="title function_ invoke__">random</span>());</span><br></pre></td></tr></table></figure><p>ãƒ©ãƒ³ãƒ€ãƒ ã®åˆæœŸçŠ¶æ…‹ã®å‡ºåŠ›ãŒã§ããŸï¼</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">. . * * * * * * . . * . . . . . * * * * * . * . * * . * . . . . * . * . * . . . . . . . * . . * . . </span><br><span class="line">* . * * * * * . . . . . * * . * . . * . * . * . . . . . . * * . . . . * * * . . . * * . . * . . . * </span><br><span class="line">* . . . . . . . * . * * . * . * * * . * * . * . * . . * . * . . . * . * . * * * * . * * . . * . * * </span><br><span class="line">* . . * * * . * . . . * * . * . * * . * . . * * * * . . * . * * . * * * . * . * . . * . . * . . * . </span><br><span class="line">. . . . * * * * . . . * . * . * * . * * * * . . . . . * . * . * * * * . * * . * . * * * . * * . * . </span><br><span class="line">* * . * * . * . * . . * . * * . * * . * . * . . . . * . * . * * . * . * . . . . * . . * * . . * * * </span><br><span class="line">* . . * * . * * * * * * * * . * . . . . . . * * . * * . * * * . * . . * . * * * . * . . . . * * * * </span><br><span class="line">. . * . * * . * * . * . . * . . * . . * * . * . . . . * * * * * . * * . . . * . * * * . * . . . * . </span><br><span class="line">. . * * * . . . . * . . * . . . . . * . . * . * * . * . . * * . . . . . * . . * . * * . * . * * * . </span><br><span class="line">* . . * * . * . . . . . * * * * . . . . * * * . * * * . * . . . * * . * . . * * . * . . * * . * . * </span><br><span class="line">. * . * . . . . * . . . * . . * * . . . . . . . * . * * * * . * . . . . . * . * * * * . . . . . * * </span><br><span class="line">* * * . . * * . * * * * * * * . * . * * . . . * . . . * * . * * . . * . * . * . * . * * . . * . . * </span><br><span class="line">. * * . * * . * . . . . * * . * . . * . . . * . * . * * . * * . * * . . * * . . . . . . * . . * * . </span><br><span class="line">* . . . . . . . . . . . . * * * . . * * * * . . * . . . . * * * * . * * * * * * * * . . * * . . * . </span><br><span class="line">* * . * . * . . * * * * . . . . . . . . * * . . . * * . . . . . . . * * . . . . . * . * . * . * . * </span><br><span class="line">. . * . * . . * * . * . . * . * . * . . . . * . . * * * . . * . * * * . . . . . * . * * . . * . * . </span><br><span class="line">* * . . . . * . . * . * * . * . * . . * . * . * . * * * . * * * . . . * * . . * . . * . * * . . . * </span><br><span class="line">. * . . . . * * * * * * * * * . . * . . . * . . . . . * * * . . * * . . * * * . . * * * . * . . * . </span><br><span class="line">* . . * . . * * * * * . . . . . * . * . . . . * * * . * * * * * . * . . * . . * . . . . * . . * * . </span><br><span class="line">* . * . * * . * . * . . . * * . . . . * . . . . * * * * * . . * . . * * * * . * * * . * * . * * . . </span><br><span class="line">. . * * * . * . * . * * * . * * . * * . . . * * * * . . * * . . * . . . . * . * . * . * * * * * * . </span><br><span class="line">* . . . * . * * . * * * . * * * . . * * . . . . * * * . . * . * * * . * * . * . * . * . * * * * * . </span><br><span class="line">* * . . . * . * * * . * . . * * . . * . . . * . . . * * . . . . . . * . * * * . . . . * . . . * * . </span><br><span class="line">* . . * . . * . . * . * * * . . . . . . * . * * * . . * . * . * * . * * . . * . * * * * * * * . . . </span><br><span class="line">. . * * * * . * * * * . * * * * * * * . * . . . * . . * * * * . . . . * . . * * . * . * . . . * * * </span><br><span class="line">* . . * * * . . . . * * * * . * . * . . * * * . * . * . * . * * . . . . . . . . . . . . * * * * * * </span><br><span class="line">* . . * * . . . . * * * * * . * . . * . * . . * . . . * * . * . * * . * * . . * . * . . * * . . * . </span><br><span class="line">. * . * . * * . * * . * * . * . * * . . . . . . * . . * * . * . * * * . * * . * . * * * . * . . . * </span><br><span class="line">. . . . . . . . * * * * . . . * . * . * . * . . * . . * * * * * * . . * * * * . * . * . * . . * . * </span><br><span class="line">* . * . * . * . * . . * . . * . . . . * . * . . . * . . * . * . * * . . . * . . . * * * * . . . * . </span><br></pre></td></tr></table></figure><h4 id="20-38-22-00-apply-the-rule"><a href="#20-38-22-00-apply-the-rule" class="headerlink" title="20:38~22:00 apply the rule"></a>20:38~22:00 apply the rule</h4><p>ã“ã“ã‹ã‚‰ã¯ã€ã ã„ã¶åŠ¹ç‡æ‚ªããªã£ã¦ãã¦ã€è‹¦æˆ¦ã—ãªãŒã‚‰ã‚„ã£ã¦ã„ãã¾ã™ã€‚</p><p>ãƒ©ã‚¤ãƒ•ã‚²ãƒ¼ãƒ ã®ãƒ«ãƒ¼ãƒ«ã¯ä»¥ä¸‹ã§ã™ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">In Conway&#x27;s Game of Life, each cell interacts with its eight neighbors. The rules are:</span><br><span class="line">Any live cell with fewer than two live neighbors dies (underpopulation).</span><br><span class="line">Any live cell with two or three live neighbors survives to the next generation.</span><br><span class="line">Any live cell with more than three live neighbors dies (overpopulation).</span><br><span class="line">Any dead cell with exactly three live neighbors becomes alive (reproduction).</span><br></pre></td></tr></table></figure><p>2æ¬¡å…ƒã®Vecã®åˆæœŸåŒ–ã‚„ã€åˆ¥fnã®åˆ‡ã‚Šæ–¹ã€cloneãŒdeep copyãªã®ã‹ã€shallow copyãªã®ã‹ã€è‰²ã€…è©°ã¾ã£ãŸã‚Šã—ãŸãŒã€<code>count_neighbors</code>ã‚’åˆ‡ã‚Šå‡ºã—ã¦å°‘ã—å¾Œå›ã—ã—ã¦ã€<code>update</code>ã ã‘ã¯å…ˆã«å®Œæˆã•ã›ã¾ã—ãŸã€‚</p><p><code>&amp;</code>ã‚„<code>mut</code>ã¯ã©ã“ã«ã¤ã‘ã‚‹ã¹ãã‹ãŒã‚ˆãè¿·ã£ãŸãŒã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒè¦ªåˆ‡ã«æ€’ã‚‰ã‚Œã¦ãã‚Œã‚‹ã‹ã‚‰ã€ãªã‚“ã¨ã‹ã§ãã¾ã—ãŸã€‚</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">impl</span> <span class="title class_">GameOfLife</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">count_neighbors</span>(&amp;<span class="keyword">self</span>, r: <span class="type">usize</span>, c: <span class="type">usize</span>) <span class="punctuation">-&gt;</span> <span class="type">usize</span> &#123;</span><br><span class="line">        <span class="comment">// TODO</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">update</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">new_cells</span> = <span class="type">Vec</span>::<span class="title function_ invoke__">with_capacity</span>(<span class="keyword">self</span>.height);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> <span class="variable">_</span> <span class="keyword">in</span> <span class="number">0</span>..<span class="keyword">self</span>.height &#123;</span><br><span class="line">            new_cells.<span class="title function_ invoke__">push</span>(<span class="built_in">vec!</span>[<span class="literal">false</span>; <span class="keyword">self</span>.width]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> <span class="variable">r</span> <span class="keyword">in</span> <span class="number">0</span>..<span class="keyword">self</span>.height &#123;</span><br><span class="line">            <span class="keyword">for</span> <span class="variable">c</span> <span class="keyword">in</span> <span class="number">0</span>..<span class="keyword">self</span>.width &#123;</span><br><span class="line">                <span class="keyword">let</span> <span class="variable">neighbors</span> = <span class="keyword">self</span>.<span class="title function_ invoke__">count_neighbors</span>(r, c);</span><br><span class="line">                <span class="keyword">match</span> neighbors &#123;</span><br><span class="line">                    <span class="number">0</span>..=<span class="number">1</span> =&gt; new_cells[r][c] = <span class="literal">false</span>,</span><br><span class="line">                    <span class="number">2</span> =&gt; new_cells[r][c] = <span class="keyword">self</span>.cells[r][c],</span><br><span class="line">                    <span class="number">3</span> =&gt; new_cells[r][c] = <span class="literal">true</span>,</span><br><span class="line">                    _ =&gt; new_cells[r][c] = <span class="literal">false</span>,</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">self</span>.cells = new_cells;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¬¡ã«ã€<code>count_neighbors</code>ã‚‚å®Œæˆã—ãŸã€‚åˆ†å²ãŒå¤šã™ãã¦å…¨ç„¶ç¾ã—ããªã„ã§ã™ãŒâ€¦ã€‚</p><p>ä¸‰é …æ¼”ç®—å­<code>cond?a:b</code>ã¯ãªã„ã‚‰ã—ã„ãŒã€<code>if cond &#123;a&#125; else &#123;b&#125;</code>ã¯è©²å½“ã™ã‚‹ä½¿ã„æ–¹ãŒã‚°ãƒ¼ã‚°ãƒ«ã—ã¦åˆ†ã‹ã‚Šã¾ã—ãŸã€‚<br>èª¿ã¹ã‚‹ã¨ã€ãƒ–ãƒ­ãƒƒã‚¯ã®æœ€å¾ŒãŒ <code>;</code> ã®ãªã„å¼ã§ã‚ã‚Œã°ã€æˆ»ã‚Šå€¤ã¨ã—ã¦ä½¿ç”¨ã•ã‚Œã‚‹ã‹ã‚‰ã§ã™ã­ï¼ï¼ˆé–¢æ•°å‹è¨€èªã®ç‰¹å¾´ã‹ãªï¼Ÿï¼‰</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">count_neighbors</span>(&amp;<span class="keyword">self</span>, r: <span class="type">usize</span>, c: <span class="type">usize</span>) <span class="punctuation">-&gt;</span> <span class="type">usize</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">cnt</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> r &gt; <span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> c &gt; <span class="number">0</span> &#123;</span><br><span class="line">            cnt += <span class="keyword">if</span> <span class="keyword">self</span>.cells[r - <span class="number">1</span>][c - <span class="number">1</span>] &#123; <span class="number">1</span> &#125; <span class="keyword">else</span> &#123; <span class="number">0</span> &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">        cnt += <span class="keyword">if</span> <span class="keyword">self</span>.cells[r - <span class="number">1</span>][c] &#123; <span class="number">1</span> &#125; <span class="keyword">else</span> &#123; <span class="number">0</span> &#125;;</span><br><span class="line">        <span class="keyword">if</span> c &lt; <span class="keyword">self</span>.width - <span class="number">1</span> &#123;</span><br><span class="line">            cnt += <span class="keyword">if</span> <span class="keyword">self</span>.cells[r - <span class="number">1</span>][c + <span class="number">1</span>] &#123; <span class="number">1</span> &#125; <span class="keyword">else</span> &#123; <span class="number">0</span> &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> c &gt; <span class="number">0</span> &#123;</span><br><span class="line">        cnt += <span class="keyword">if</span> <span class="keyword">self</span>.cells[r][c - <span class="number">1</span>] &#123; <span class="number">1</span> &#125; <span class="keyword">else</span> &#123; <span class="number">0</span> &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> c &lt; <span class="keyword">self</span>.width - <span class="number">1</span> &#123;</span><br><span class="line">        cnt += <span class="keyword">if</span> <span class="keyword">self</span>.cells[r][c + <span class="number">1</span>] &#123; <span class="number">1</span> &#125; <span class="keyword">else</span> &#123; <span class="number">0</span> &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> r &lt; <span class="keyword">self</span>.height - <span class="number">1</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> c &gt; <span class="number">0</span> &#123;</span><br><span class="line">            cnt += <span class="keyword">if</span> <span class="keyword">self</span>.cells[r + <span class="number">1</span>][c - <span class="number">1</span>] &#123; <span class="number">1</span> &#125; <span class="keyword">else</span> &#123; <span class="number">0</span> &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">        cnt += <span class="keyword">if</span> <span class="keyword">self</span>.cells[r + <span class="number">1</span>][c] &#123; <span class="number">1</span> &#125; <span class="keyword">else</span> &#123; <span class="number">0</span> &#125;;</span><br><span class="line">        <span class="keyword">if</span> c &lt; <span class="keyword">self</span>.width - <span class="number">1</span> &#123;</span><br><span class="line">            cnt += <span class="keyword">if</span> <span class="keyword">self</span>.cells[r + <span class="number">1</span>][c + <span class="number">1</span>] &#123; <span class="number">1</span> &#125; <span class="keyword">else</span> &#123; <span class="number">0</span> &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="22-00-Completed"><a href="#22-00-Completed" class="headerlink" title="22:00 Completed"></a>22:00 Completed</h4><p>æœ€çµ‚çš„ã«æ¬¡ã®ã‚³ãƒ¼ãƒ‰ãŒå®Œæˆå½¢ã§ã™ã€‚</p><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> rand::prelude::random;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">GameOfLife</span> &#123;</span><br><span class="line">    width: <span class="type">usize</span>,</span><br><span class="line">    height: <span class="type">usize</span>,</span><br><span class="line">    cells: <span class="type">Vec</span>&lt;<span class="type">Vec</span>&lt;<span class="type">bool</span>&gt;&gt;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">GameOfLife</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">new</span>(width: <span class="type">usize</span>, height: <span class="type">usize</span>) <span class="punctuation">-&gt;</span> <span class="keyword">Self</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">gol</span> = GameOfLife &#123;</span><br><span class="line">            width,</span><br><span class="line">            height,</span><br><span class="line">            cells: <span class="type">Vec</span>::<span class="title function_ invoke__">with_capacity</span>(height),</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">for</span> <span class="variable">_</span> <span class="keyword">in</span> <span class="number">0</span>..height &#123;</span><br><span class="line">            <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">row</span> = <span class="type">Vec</span>::<span class="title function_ invoke__">with_capacity</span>(width);</span><br><span class="line">            <span class="keyword">for</span> <span class="variable">_</span> <span class="keyword">in</span> <span class="number">0</span>..width &#123;</span><br><span class="line">                row.<span class="title function_ invoke__">push</span>(<span class="title function_ invoke__">random</span>());</span><br><span class="line">            &#125;</span><br><span class="line">            gol.cells.<span class="title function_ invoke__">push</span>(row);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> gol;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">count_neighbors</span>(&amp;<span class="keyword">self</span>, r: <span class="type">usize</span>, c: <span class="type">usize</span>) <span class="punctuation">-&gt;</span> <span class="type">usize</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">cnt</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> r &gt; <span class="number">0</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> c &gt; <span class="number">0</span> &#123;</span><br><span class="line">                cnt += <span class="keyword">if</span> <span class="keyword">self</span>.cells[r - <span class="number">1</span>][c - <span class="number">1</span>] &#123; <span class="number">1</span> &#125; <span class="keyword">else</span> &#123; <span class="number">0</span> &#125;;</span><br><span class="line">            &#125;</span><br><span class="line">            cnt += <span class="keyword">if</span> <span class="keyword">self</span>.cells[r - <span class="number">1</span>][c] &#123; <span class="number">1</span> &#125; <span class="keyword">else</span> &#123; <span class="number">0</span> &#125;;</span><br><span class="line">            <span class="keyword">if</span> c &lt; <span class="keyword">self</span>.width - <span class="number">1</span> &#123;</span><br><span class="line">                cnt += <span class="keyword">if</span> <span class="keyword">self</span>.cells[r - <span class="number">1</span>][c + <span class="number">1</span>] &#123; <span class="number">1</span> &#125; <span class="keyword">else</span> &#123; <span class="number">0</span> &#125;;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> c &gt; <span class="number">0</span> &#123;</span><br><span class="line">            cnt += <span class="keyword">if</span> <span class="keyword">self</span>.cells[r][c - <span class="number">1</span>] &#123; <span class="number">1</span> &#125; <span class="keyword">else</span> &#123; <span class="number">0</span> &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> c &lt; <span class="keyword">self</span>.width - <span class="number">1</span> &#123;</span><br><span class="line">            cnt += <span class="keyword">if</span> <span class="keyword">self</span>.cells[r][c + <span class="number">1</span>] &#123; <span class="number">1</span> &#125; <span class="keyword">else</span> &#123; <span class="number">0</span> &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> r &lt; <span class="keyword">self</span>.height - <span class="number">1</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> c &gt; <span class="number">0</span> &#123;</span><br><span class="line">                cnt += <span class="keyword">if</span> <span class="keyword">self</span>.cells[r + <span class="number">1</span>][c - <span class="number">1</span>] &#123; <span class="number">1</span> &#125; <span class="keyword">else</span> &#123; <span class="number">0</span> &#125;;</span><br><span class="line">            &#125;</span><br><span class="line">            cnt += <span class="keyword">if</span> <span class="keyword">self</span>.cells[r + <span class="number">1</span>][c] &#123; <span class="number">1</span> &#125; <span class="keyword">else</span> &#123; <span class="number">0</span> &#125;;</span><br><span class="line">            <span class="keyword">if</span> c &lt; <span class="keyword">self</span>.width - <span class="number">1</span> &#123;</span><br><span class="line">                cnt += <span class="keyword">if</span> <span class="keyword">self</span>.cells[r + <span class="number">1</span>][c + <span class="number">1</span>] &#123; <span class="number">1</span> &#125; <span class="keyword">else</span> &#123; <span class="number">0</span> &#125;;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cnt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">update</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">new_cells</span> = <span class="type">Vec</span>::<span class="title function_ invoke__">with_capacity</span>(<span class="keyword">self</span>.height);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> <span class="variable">_</span> <span class="keyword">in</span> <span class="number">0</span>..<span class="keyword">self</span>.height &#123;</span><br><span class="line">            new_cells.<span class="title function_ invoke__">push</span>(<span class="built_in">vec!</span>[<span class="literal">false</span>; <span class="keyword">self</span>.width]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> <span class="variable">r</span> <span class="keyword">in</span> <span class="number">0</span>..<span class="keyword">self</span>.height &#123;</span><br><span class="line">            <span class="keyword">for</span> <span class="variable">c</span> <span class="keyword">in</span> <span class="number">0</span>..<span class="keyword">self</span>.width &#123;</span><br><span class="line">                <span class="keyword">let</span> <span class="variable">neighbors</span> = <span class="keyword">self</span>.<span class="title function_ invoke__">count_neighbors</span>(r, c);</span><br><span class="line">                <span class="keyword">match</span> neighbors &#123;</span><br><span class="line">                    <span class="number">0</span>..=<span class="number">1</span> =&gt; new_cells[r][c] = <span class="literal">false</span>,</span><br><span class="line">                    <span class="number">2</span> =&gt; new_cells[r][c] = <span class="keyword">self</span>.cells[r][c],</span><br><span class="line">                    <span class="number">3</span> =&gt; new_cells[r][c] = <span class="literal">true</span>,</span><br><span class="line">                    _ =&gt; new_cells[r][c] = <span class="literal">false</span>,</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">self</span>.cells = new_cells;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">render</span>(&amp;<span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> <span class="variable">row</span> <span class="keyword">in</span> &amp;<span class="keyword">self</span>.cells &#123;</span><br><span class="line">            <span class="keyword">for</span> <span class="variable">cell</span> <span class="keyword">in</span> row &#123;</span><br><span class="line">                <span class="keyword">if</span> *cell &#123;</span><br><span class="line">                    <span class="built_in">print!</span>(<span class="string">&quot;* &quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="built_in">print!</span>(<span class="string">&quot;. &quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">print!</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">print!</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">width</span> = <span class="number">50</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">height</span> = <span class="number">30</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">sleep_time</span> = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">game</span> = GameOfLife::<span class="title function_ invoke__">new</span>(width, height);</span><br><span class="line">    <span class="keyword">loop</span> &#123;</span><br><span class="line">        game.<span class="title function_ invoke__">update</span>();</span><br><span class="line">        game.<span class="title function_ invoke__">render</span>();</span><br><span class="line">        std::thread::<span class="title function_ invoke__">sleep</span>(std::time::Duration::<span class="title function_ invoke__">from_millis</span>(sleep_time));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>cargo run</code> ã®å®Ÿè¡Œçµæœã§ã™ã€‚</p><img src="/images/20240322a/Screen_Recording_2024-03-18_at_0.28.59.gif" alt="Screen_Recording_2024-03-18_at_0.28.59.gif" width="1200" height="729" loading="lazy"><h2 id="Next-Step"><a href="#Next-Step" class="headerlink" title="Next Step"></a>Next Step</h2><ul><li>ç¾åœ¨ã¯ãƒ©ãƒ³ãƒ€ãƒ ãªé–‹å§‹çŠ¶æ…‹ã§ã‚¹ã‚¿ãƒ¼ãƒˆã™ã‚‹ã—ã‹å¯¾å¿œã—ã¦ã„ãªã„ãŒã€<a href="https://conwaylife.com/wiki/Run_Length_Encoded">RLE</a>ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãªã©ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã‚€ã‚ˆã†ã«ã—ãŸã„</li><li>ç¾åœ¨ã¯å›ºå®šãªã‚¹ãƒ†ãƒ¼ã‚¸ã‚µã‚¤ã‚ºã«ãªã£ã¦ã„ã‚‹ãŒã€å‹•çš„ã«æ‹¡å¤§ã™ã‚‹ãªã‚Šã€Rustã®å¨åŠ›ã‚’ç™ºæ®ã§ãã‚‹ä¸¦è¡Œè¨ˆç®—ã‚’è©¦ã—ãŸã„</li><li>Rust+WebAssemblyã‚’ä½¿ã£ã¦ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§UIã‚’ä½œã‚ŠãŸã„</li></ul><h2 id="æ„Ÿæƒ³"><a href="#æ„Ÿæƒ³" class="headerlink" title="æ„Ÿæƒ³"></a>æ„Ÿæƒ³</h2><ul><li>RustãŒå¤ãã¯ãªã„ãŒã€å‰²ã¨C&#x2F;C++ã®ã‚ˆã†ã«ãƒ­ãƒ¼ãƒ¬ãƒ™ãƒ«ã§ã€å‹ã‚„ãƒ¡ãƒ¢ãƒªã®å½¢æ…‹ãªã©ã‚’ã‚±ã‚¢ã™ã‚‹è¨€èªã§ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¼ãƒ­çµŒé¨“ã®äººã«Pythonã‚„JavaScriptã»ã©å„ªã—ããªã„</li><li>å‹æ¨è«–ãŒé™ç•Œã¾ã§ã‚„ã£ã¦ãã‚Œã¦ã™ã”ãå„ªç§€ã§ã€å¥½ãã«ãªã‚‹ç†ç”±ã®ä¸€ã¤</li><li>ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒå³ã—ãã¦ã€ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®ã‚ã‚‹ã¹ãã‚’ã¡ã‚ƒã‚“ã¨æ•™ãˆã¦ãã‚Œã‚‹ã®ã§ã€ã¨ã¦ã‚‚å‹‰å¼·ã«ãªã‚‹</li></ul><h2 id="ä»–ã®è‰¯ã„å­¦ç¿’ãƒªã‚½ãƒ¼ã‚¹"><a href="#ä»–ã®è‰¯ã„å­¦ç¿’ãƒªã‚½ãƒ¼ã‚¹" class="headerlink" title="ä»–ã®è‰¯ã„å­¦ç¿’ãƒªã‚½ãƒ¼ã‚¹"></a>ä»–ã®è‰¯ã„å­¦ç¿’ãƒªã‚½ãƒ¼ã‚¹</h2><p>Rust Documentation<br><a href="https://doc.rust-lang.org/beta/">https://doc.rust-lang.org/beta/</a></p><p>Official Learn Rust<br><a href="https://www.rust-lang.org/learn">https://www.rust-lang.org/learn</a></p>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Programming/">Programming</category>
      
      
      <category domain="https://future-architect.github.io/tags/%E5%88%9D%E5%BF%83%E8%80%85%E5%90%91%E3%81%91/">åˆå¿ƒè€…å‘ã‘</category>
      
      <category domain="https://future-architect.github.io/tags/Rust/">Rust</category>
      
      <category domain="https://future-architect.github.io/tags/ChatGPT/">ChatGPT</category>
      
      <category domain="https://future-architect.github.io/tags/Conways-Game-of-Life/">Conways_Game_of_Life</category>
      
      
      <comments>https://future-architect.github.io/articles/20240322a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Terraformé€£è¼‰2024 ãƒ†ã‚¹ãƒˆã¨ãƒ¢ãƒƒã‚¯ã‚’ä½¿ã£ã¦ã¿ã‚‹</title>
      <link>https://future-architect.github.io/articles/20240321a/</link>
      <guid>https://future-architect.github.io/articles/20240321a/</guid>
      <pubDate>Wed, 20 Mar 2024 15:00:00 GMT</pubDate>
      
        
        
          
          
      <description>&lt;img src=&quot;/images/20240321a/top.png&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;555&quot;&gt;

&lt;p&gt;&lt;a href=&quot;/articles/20240311a/&quot;&gt;Terraformé€£è¼‰2024ã‚’&lt;/a&gt;</description>
          
        
      
      
      
      <content:encoded><![CDATA[<img src="/images/20240321a/top.png" alt="" width="800" height="555"><p><a href="/articles/20240311a/">Terraformé€£è¼‰2024ã‚’</a> ã®7æœ¬ç›®ã§ã™ã€‚</p><h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>ã“ã‚“ã«ã¡ã¯ï¼ TIG Chill Architect ã®å‰åŸã§ã™ã€‚<br>Terraform ã‚’ä½¿ã£ã¦ã‚¯ãƒ©ã‚¦ãƒ‰ç’°å¢ƒã¨ã‹æ§‹ç¯‰ã™ã‚‹äººã¯å¤šãã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚<br>ãã®ä¸­ã§æ¯å›ã®ã‚ˆã†ã«ã©ã†ã‚„ã£ã¦ãƒ†ã‚¹ãƒˆã‚’ã‚„ã‚‹ã¹ããªã®ã‹ãªãƒ¼ã¨ã‹æ‚©ã‚“ã§ã€çµæœå¤§ã—ãŸã“ã¨ã‚‚å‡ºæ¥ãšã«ãƒªãƒªãƒ¼ã‚¹ã¾ã§æ¥ã¦ã—ã¾ã£ãŸã¨ã„ã†ã“ã¨ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚</p><p>ä»Šå›ã¯ã€ãã®æ‚©ã¿ã‚’å°‘ã—ã§ã‚‚æ‰•æ‹­ã§ããªã„ã‹ã¨æ€ã„ã€Terraform v1.6 ã¨v1.7 ã§æä¾›ã•ã‚ŒãŸ<a href="https://developer.hashicorp.com/terraform/language/tests">tests</a>ã¨<a href="https://developer.hashicorp.com/terraform/language/tests/mocking">mocks</a>ã«è§¦ã‚Œã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚</p><h1 id="ä»Šã¾ã§ã®è©¦ã¿"><a href="#ä»Šã¾ã§ã®è©¦ã¿" class="headerlink" title="ä»Šã¾ã§ã®è©¦ã¿"></a>ä»Šã¾ã§ã®è©¦ã¿</h1><p>ä»Šã¾ã§ã¯ã€<a href="https://github.com/terraform-linters/tflint">TFLint</a>ã‚’å°å…¥ã—ã€ã‚³ãƒ¼ãƒ‰ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã†ã“ã¨ã‚’å®Ÿæ–½ã—ã¦ã„ã¾ã—ãŸã€‚</p><p>ãŸã ã—ã€ã“ã®æ–¹å¼ã ã¨é™çš„ã‚³ãƒ¼ãƒ‰è§£æã®ãŸã‚ã€ã‚ˆã‚Šè¸ã¿è¾¼ã‚“ã ã¨ã“ã‚ã¾ã§ã„ã‘ã¾ã›ã‚“ã§ã—ãŸã€‚é™çš„ã‚³ãƒ¼ãƒ‰è§£æã«ãƒ—ãƒ©ã‚¹ã—ã¦å‹•çš„ãªãƒ†ã‚¹ãƒˆãŒã§ãã‚‹ã¨è‰¯ã„ãªãƒ¼ã£ã¦æ„Ÿã˜ã¦ã„ã¾ã—ãŸã€‚ï¼ˆ<a href="https://github.com/gruntwork-io/terratest">terratest</a>ã¨ã„ã†ã®ã‚‚ã‚ã‚Šã¾ã™ãŒã€å°å…¥ã‚³ã‚¹ãƒˆãŒé«˜ã„ï¼‰</p><h1 id="terraform-test"><a href="#terraform-test" class="headerlink" title="terraform test"></a>terraform test</h1><p><code>terraform test</code>ã¯ã€å®Ÿéš›ã«ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ã€å‹•çš„ã«ãƒ†ã‚¹ãƒˆã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>ã“ã‚Œã«ã‚ˆã‚Šã‚³ãƒ¼ãƒ‰ã®ä¿¡é ¼æ€§ã€å“è³ªã‚’é«˜ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><p>module ã«å¯¾ã—ã¦ã®ãƒ†ã‚¹ãƒˆãŒå¼·åŠ›ã§ã™ãŒã€module ä»¥å¤–ã§ã‚‚åˆ©ç”¨å¯èƒ½ã§ã™ã€‚</p><h2 id="ã“ã‚“ãªã“ã¨ãŒã§ãã‚‹"><a href="#ã“ã‚“ãªã“ã¨ãŒã§ãã‚‹" class="headerlink" title="ã“ã‚“ãªã“ã¨ãŒã§ãã‚‹"></a>ã“ã‚“ãªã“ã¨ãŒã§ãã‚‹</h2><p><code>terraform test</code> ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã“ã¨ãŒã§ãã¾ã™ï¼ˆä»–ã«ã‚‚ã§ãã‚‹ã“ã¨ãŒã‚ã‚‹ï¼‰</p><ul><li><code>terraform plan</code> ã‚’å®Ÿè¡Œã—ã€æœŸå¾…ã™ã‚‹çµæœãŒå¾—ã‚‰ã‚Œã‚‹ã‹ã‚’ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã‚‹</li><li><code>terraorm apply</code> ã‚’å®Ÿè¡Œã—ãŸæ™‚ã«æœŸå¾…ã™ã‚‹çµæœãŒå¾—ã‚‰ã‚Œã‚‹ã‹ã‚’ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã‚‹<ul><li>å®Ÿéš›ã«ãƒªã‚½ãƒ¼ã‚¹ã‚’ä½œæˆã—ã€å‰Šé™¤ã¾ã§è¡Œã†</li></ul></li><li>æœŸå¾…ã™ã‚‹çµæœã‚’<code>condition</code>ã«æ›¸ã„ã¦åˆ¤å®šã‚’è¡Œã†</li><li>Data Source ã‚’å–å¾—ã§ãã‚‹</li></ul><h2 id="å®Ÿéš›ã«å‹•ã‹ã—ã¦ã¿ã‚‹"><a href="#å®Ÿéš›ã«å‹•ã‹ã—ã¦ã¿ã‚‹" class="headerlink" title="å®Ÿéš›ã«å‹•ã‹ã—ã¦ã¿ã‚‹"></a>å®Ÿéš›ã«å‹•ã‹ã—ã¦ã¿ã‚‹</h2><p>ãã‚Œã§ã¯ã€å®Ÿéš›ã«ç°¡å˜ãªã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆã—ã¦å‹•ã‹ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚<br>Terraform ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ã€1.6ä»¥ä¸Šã«ã—ã¦ãã ã•ã„ã€‚<br>ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®åˆ‡ã‚Šæ›¿ãˆãŒé¢å€’ã ãªã£ã¦æ€ã£ãŸã‚‰<a href="https://github.com/tfutils/tfenv">tfenv</a>ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨å°‘ã—å¹¸ã›ã«ãªã‚Œã¾ã™ã€‚<br>ã¾ãŸã€ã‚¯ãƒ©ã‚¦ãƒ‰ã¯ã€AWS ã§ã™ã€‚</p><p>S3 ãƒã‚±ãƒƒãƒˆã‚’ä½œæˆã—ã€ãã®S3 ãƒã‚±ãƒƒãƒˆåãŒæœŸå¾…ã™ã‚‹åå‰ãªã®ã‹ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ããŸã„ã¨æ€ã„ã¾ã™ã€‚<br>æ­£ç›´ã€ã“ã®ã‚³ãƒ¼ãƒ‰ãŒãƒ†ã‚¹ãƒˆç”¨é€”ã¨ã—ã¦å¿…è¦ã‹ï¼Ÿã¨ã„ã†ã®ã¯ã‚ã‚Šã¾ã™ãŒã€ã¾ãšã¯æ…£ã‚Œã‚‹ã¨ã„ã†ã®ã‚’ç›®çš„ã«ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><p>ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯ã€ä»¥ä¸‹ã®æ§‹æˆã§ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ backend.tf</span><br><span class="line">â”œâ”€â”€ local.tf</span><br><span class="line">â”œâ”€â”€ s3_bucket.tf</span><br><span class="line">â”œâ”€â”€ s3_bucket.tftest.hcl</span><br><span class="line">â””â”€â”€ versions.tf</span><br></pre></td></tr></table></figure><p>ã‚³ãƒ¼ãƒ‰ã¯ã€ä»¥ä¸‹ã§ã™ã€‚<br><code>backend.tf</code> ã‚’çœç•¥ã—ã¦ã„ã¾ã™ãŒã€ã‚ˆã—ãªã«ãŠé¡˜ã„ã—ã¾ã™ã€‚</p><figure class="highlight sh"><figcaption><span>local.tf</span></figcaption><table><tr><td class="code"><pre><span class="line">locals &#123;</span><br><span class="line">  project_name  = <span class="string">&quot;sample&quot;</span></span><br><span class="line">  region        = <span class="string">&quot;ap-northeast-1&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight sh"><figcaption><span>s3_bucket.tf</span></figcaption><table><tr><td class="code"><pre><span class="line">resource <span class="string">&quot;aws_s3_bucket&quot;</span> <span class="string">&quot;test001&quot;</span> &#123;</span><br><span class="line">  bucket = <span class="string">&quot;<span class="variable">$&#123;terraform.workspace&#125;</span>-<span class="variable">$&#123;local.project_name&#125;</span>-test001&quot;</span></span><br><span class="line">  tags = &#123;</span><br><span class="line">    Name        = <span class="string">&quot;<span class="variable">$&#123;terraform.workspace&#125;</span>-<span class="variable">$&#123;local.project_name&#125;</span>-test001&quot;</span></span><br><span class="line">    Environment = terraform.workspace</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight sh"><figcaption><span>versions.tf</span></figcaption><table><tr><td class="code"><pre><span class="line">terraform &#123;</span><br><span class="line">  required_version = <span class="string">&quot;~&gt; 1.7.5&quot;</span></span><br><span class="line">  required_providers &#123;</span><br><span class="line">    aws = &#123;</span><br><span class="line">      <span class="built_in">source</span>  = <span class="string">&quot;hashicorp/aws&quot;</span></span><br><span class="line">      version = <span class="string">&quot;5.41.0&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">provider <span class="string">&quot;aws&quot;</span> &#123;</span><br><span class="line">  region = local.region</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆã—ã¾ã™ã€‚<br>conditionã«è¨˜è¿°ã—ãŸS3 ãƒã‚±ãƒƒãƒˆåã¨å®Ÿéš›ã®S3 ãƒã‚±ãƒƒãƒˆåã‚’æ¯”è¼ƒã—ã¦å•é¡Œãªã„ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã„ã¾ã™ã€‚<br>ä»®ã«æœŸå¾…ã—ã¦ã„ãªã„å€¤ã®å ´åˆã¯ã€<code>error_message</code>ã®å€¤ãŒå‡ºåŠ›ã•ã‚Œã¾ã™ã€‚</p><figure class="highlight sh"><figcaption><span>s3_bucket.tftest.hcl</span></figcaption><table><tr><td class="code"><pre><span class="line">run <span class="string">&quot;test&quot;</span> &#123;</span><br><span class="line">  assert &#123;</span><br><span class="line">    condition     = aws_s3_bucket.test.bucket == <span class="string">&quot;<span class="variable">$&#123;terraform.workspace&#125;</span>-<span class="variable">$&#123;local.project_name&#125;</span>-test&quot;</span></span><br><span class="line">    error_message = <span class="string">&quot;S3 bucket name did not match expected&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ãƒ†ã‚¹ãƒˆãŒæˆåŠŸã—ãŸæ™‚ã¯ã€ä»¥ä¸‹ã®å‡ºåŠ›ã¨ãªã‚Šã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ terraform <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line">tests/s3_bucket.tftest.hcl... <span class="keyword">in</span> progress</span><br><span class="line">  run <span class="string">&quot;test&quot;</span>... pass</span><br><span class="line">tests/s3_bucket.tftest.hcl... tearing down</span><br><span class="line">tests/s3_bucket.tftest.hcl... pass</span><br><span class="line"></span><br><span class="line">Success! 1 passed, 0 failed.</span><br></pre></td></tr></table></figure><p>å¤±æ•—ã—ãŸæ™‚ã¯ã€ä»¥ä¸‹ã§ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ terraform <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line">tests/s3_bucket.tftest.hcl... <span class="keyword">in</span> progress</span><br><span class="line">  run <span class="string">&quot;test&quot;</span>... fail</span><br><span class="line">â•·</span><br><span class="line">â”‚ Error: Test assertion failed</span><br><span class="line">â”‚</span><br><span class="line">â”‚   on tests/s3_bucket.tftest.hcl line 4, <span class="keyword">in</span> run <span class="string">&quot;test&quot;</span>:</span><br><span class="line">â”‚    4:     condition     = aws_s3_bucket.test.bucket == <span class="string">&quot;<span class="variable">$&#123;terraform.workspace&#125;</span>-<span class="variable">$&#123;local.project_name&#125;</span>-test1&quot;</span></span><br><span class="line">â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><br><span class="line">â”‚     â”‚ aws_s3_bucket.test.bucket is <span class="string">&quot;dev-sample-test&quot;</span></span><br><span class="line">â”‚     â”‚ local.project_name is <span class="string">&quot;sample&quot;</span></span><br><span class="line">â”‚     â”‚ terraform.workspace is <span class="string">&quot;dev&quot;</span></span><br><span class="line">â”‚</span><br><span class="line">â”‚ S3 bucket name did not match expected</span><br><span class="line">â•µ</span><br><span class="line">tests/s3_bucket.tftest.hcl... tearing down</span><br><span class="line">tests/s3_bucket.tftest.hcl... fail</span><br><span class="line"></span><br><span class="line">Failure! 0 passed, 1 failed.</span><br></pre></td></tr></table></figure><p>ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é…ç½®ã—ã¦ã„ã¾ã™ãŒã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’åˆ†ã‘ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚<br>ä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ã«ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚<br><code>tests</code>ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã‚ã‚Œã°ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæŒ‡å®šã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€èª­ã¿è¾¼ã¾ã‚Œã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ backend.tf</span><br><span class="line">â”œâ”€â”€ local.tf</span><br><span class="line">â”œâ”€â”€ s3_bucket.tf</span><br><span class="line">â”œâ”€â”€ tests</span><br><span class="line">â”‚Â Â  â””â”€â”€ s3_bucket.tftest.hcl</span><br><span class="line">â””â”€â”€ versions.tf</span><br></pre></td></tr></table></figure><p>åˆ¥ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã§å®Ÿè¡Œã—ãŸã„å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«æŒ‡å®šã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">terraform <span class="built_in">test</span> -test-directory=hoge</span><br></pre></td></tr></table></figure><p>ä»Šå›ã¯ã€<code>apply</code>ã‚’å®Ÿè¡Œã—ãŸã®ã§ã™ãŒã€<code>plan</code>ã‚’å®Ÿè¡Œã—ãŸã„ã¨ãã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«<code>command</code>ã€€æŒ‡å®šã—ã¾ã™ã€‚</p><figure class="highlight sh"><figcaption><span>s3_bucket.tftest.hcl</span></figcaption><table><tr><td class="code"><pre><span class="line">run <span class="string">&quot;test&quot;</span> &#123;</span><br><span class="line">  <span class="built_in">command</span> = plan</span><br><span class="line">  assert &#123;</span><br><span class="line">    condition     = aws_s3_bucket.test.bucket == <span class="string">&quot;<span class="variable">$&#123;terraform.workspace&#125;</span>-<span class="variable">$&#123;local.project_name&#125;</span>-test&quot;</span></span><br><span class="line">    error_message = <span class="string">&quot;S3 bucket name did not match expected&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ã¨ã—ã¦ã¯ã€<code>apply</code>ã‚’å®Ÿè¡Œã™ã‚‹éš›ã«æ—¢ã«ãƒªã‚½ãƒ¼ã‚¹ãŒä½œæˆã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºåŠ›ã•ã‚Œã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ terraform <span class="built_in">test</span></span><br><span class="line">sample.tftest.hcl... <span class="keyword">in</span> progress</span><br><span class="line">  run <span class="string">&quot;sample&quot;</span>... fail</span><br><span class="line">â•·</span><br><span class="line">â”‚ Error: creating S3 Bucket (dev-sample-test): operation error S3: CreateBucket, https response error StatusCode: 409, RequestID: 5FC2KQ07G6SGK0W1, HostID: uhahHveFHZBJiEnSDfTsnqVd6gQBmRx+GabbLzMB2jlBkxlPGjblnyuY17MHMoo3UC2uODLSMWk=, BucketAlreadyOwnedByYou:</span><br></pre></td></tr></table></figure><h1 id="terraform-mock"><a href="#terraform-mock" class="headerlink" title="terraform mock"></a>terraform mock</h1><p><code>terraform test</code> ã¯ã€éå¸¸ã«ä¾¿åˆ©ã§æ—¥ã€…ã®é‹ç”¨ã‚’è‰¯ãã™ã‚‹ãŸã‚ã®å¼·åŠ›ãªãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚<br>ãŸã ã€ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã™ã‚‹ä¸­ã§å¼·åŠ›ãªã‚­ãƒ¼ã‚’æŒãŸã›ãŸããªã„ã‚„ã€ä½¿ç”¨ã§ããªã„çŠ¶æ³ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚<br>ã¾ãŸã€CI ã‚’å›ã™ãŸã‚ã«ã‚‚å¿…è¦ã¨ã„ã£ãŸã‚±ãƒ¼ã‚¹ã‚‚ã‚ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚<br>ãã†ã„ã£ãŸæ™‚ã«ä¾¿åˆ©ãª<code>terraform mock</code>ã‚’ä½¿ã£ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚</p><h2 id="å®Ÿéš›ã«å‹•ã‹ã—ã¦ã¿ã‚‹-1"><a href="#å®Ÿéš›ã«å‹•ã‹ã—ã¦ã¿ã‚‹-1" class="headerlink" title="å®Ÿéš›ã«å‹•ã‹ã—ã¦ã¿ã‚‹"></a>å®Ÿéš›ã«å‹•ã‹ã—ã¦ã¿ã‚‹</h2><p>ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯ã€ä»¥ä¸‹ã®æ§‹æˆã§ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ backend.tf</span><br><span class="line">â”œâ”€â”€ local.tf</span><br><span class="line">â”œâ”€â”€ mocked_providers.tftest.hcl</span><br><span class="line">â”œâ”€â”€ s3_bucket.tf</span><br><span class="line">â”œâ”€â”€ s3_bucket.tftest.hcl</span><br><span class="line">â””â”€â”€ versions.tf</span><br></pre></td></tr></table></figure><p><code>terraform test</code> ã‚’ãƒ™ãƒ¼ã‚¹ã«ä½œæˆã—ã¦ã„ã‚‹ãŸã‚å·®åˆ†ã®ã¿ã‚’è¨˜è¼‰ã—ã¾ã™ã€‚<br>ä»¥ä¸‹ã«ãƒ¢ãƒƒã‚¯ç”¨ã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ã‚’æŒ‡å®šã—ã¾ã™ã€‚</p><figure class="highlight sh"><figcaption><span>mocked_providers.tftest.hcl</span></figcaption><table><tr><td class="code"><pre><span class="line">mock_provider <span class="string">&quot;aws&quot;</span> &#123;</span><br><span class="line">  <span class="built_in">alias</span> = <span class="string">&quot;fake&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">run <span class="string">&quot;use_mocked_provider&quot;</span> &#123;</span><br><span class="line">  providers = &#123;</span><br><span class="line">    aws = aws.fake</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>versions.tf</code>ã®provider å®šç¾©ã‚’å‰Šé™¤ã—ã¾ã™ã€‚</p><figure class="highlight sh"><figcaption><span>versions.tf</span></figcaption><table><tr><td class="code"><pre><span class="line">terraform &#123;</span><br><span class="line">  required_version = <span class="string">&quot;~&gt; 1.7.5&quot;</span></span><br><span class="line">  required_providers &#123;</span><br><span class="line">    aws = &#123;</span><br><span class="line">      <span class="built_in">source</span>  = <span class="string">&quot;hashicorp/aws&quot;</span></span><br><span class="line">      version = <span class="string">&quot;5.41.0&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ãƒ¢ãƒƒã‚¯ã‚’å‹•ã‹ã™éš›ã‚‚<code>terraform test</code> ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚<br>å®Ÿéš›ã«å®Ÿè¡Œã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚<br>ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã‚’åˆ©ç”¨ã›ãšã¨ã‚‚å®Ÿè¡Œã§ãã‚‹ã“ã¨ãŒç¢ºèªã§ãã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ terraform <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line">mocked_providers.tftest.hcl... <span class="keyword">in</span> progress</span><br><span class="line">  run <span class="string">&quot;use_mocked_provider&quot;</span>... pass</span><br><span class="line">mocked_providers.tftest.hcl... tearing down</span><br><span class="line">mocked_providers.tftest.hcl... pass</span><br><span class="line">s3_bucket.tftest.hcl... <span class="keyword">in</span> progress</span><br><span class="line">  run <span class="string">&quot;test&quot;</span>... pass</span><br><span class="line">s3_bucket.tftest.hcl... tearing down</span><br><span class="line">s3_bucket.tftest.hcl... pass</span><br><span class="line"></span><br><span class="line">Success! 2 passed, 0 failed.</span><br></pre></td></tr></table></figure><p>ã‚‚ã—ãƒ¢ãƒƒã‚¯ã¨<code>terraform test</code>ã®ã‚ˆã†ã«å®Ÿéš›ã®ãƒªã‚½ãƒ¼ã‚¹ã«å¯¾ã—ã¦ãƒ†ã‚¹ãƒˆã‚’è¡Œã„ãŸã„å ´åˆã¯ã€ä»¥ä¸‹ã®ãƒ—ãƒ­ãƒã‚¤ãƒ€æŒ‡å®šã§è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚</p><figure class="highlight sh"><figcaption><span>mocked_providers.tftest.hcl</span></figcaption><table><tr><td class="code"><pre><span class="line">provider <span class="string">&quot;aws&quot;</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">mock_provider <span class="string">&quot;aws&quot;</span> &#123;</span><br><span class="line">  <span class="built_in">alias</span> = <span class="string">&quot;fake&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">run <span class="string">&quot;use_real_provider&quot;</span> &#123;</span><br><span class="line">  providers = &#123;</span><br><span class="line">    aws = aws</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">run <span class="string">&quot;use_mocked_provider&quot;</span> &#123;</span><br><span class="line">  providers = &#123;</span><br><span class="line">    aws = aws.fake</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»–ã«ã‚‚ãƒ¢ãƒƒã‚¯ã§è¿”ã•ã‚Œã‚‹å€¤ã‚’ã‚ˆã—ãªã«å¤‰æ›´ã™ã‚‹ã¨ã„ã£ãŸã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚</p><h2 id="ã©ã†ã„ã£ãŸã‚±ãƒ¼ã‚¹ã§ä½¿ã†ã®ãŒã„ã„ã®ã ã‚ã†ã‹"><a href="#ã©ã†ã„ã£ãŸã‚±ãƒ¼ã‚¹ã§ä½¿ã†ã®ãŒã„ã„ã®ã ã‚ã†ã‹" class="headerlink" title="ã©ã†ã„ã£ãŸã‚±ãƒ¼ã‚¹ã§ä½¿ã†ã®ãŒã„ã„ã®ã ã‚ã†ã‹"></a>ã©ã†ã„ã£ãŸã‚±ãƒ¼ã‚¹ã§ä½¿ã†ã®ãŒã„ã„ã®ã ã‚ã†ã‹</h2><p>ã™ã¹ã¦ã®ãƒªã‚½ãƒ¼ã‚¹ã«å¯¾ã—ã¦ç„¡é‚ªæ°—ã«ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã®ã¯ã€ã¨ã¦ã‚‚éåŠ¹ç‡ã§ã™ã€‚<br>ãã®ãŸã‚ã€ãƒ†ã‚¹ãƒˆã‚’è¡Œã†å ´åˆã®è€ƒæ…®ã™ã¹ããƒã‚¤ãƒ³ãƒˆã‚’ä»¥ä¸‹ã«ã¾ã¨ã‚ãŸã„ã¨æ€ã„ã¾ã™ã€‚<br>ï¼ˆå€‹äººçš„ãªãƒã‚¤ãƒ³ãƒˆã®ãŸã‚ã€ã‚ãã¾ã§å‚è€ƒãƒ¬ãƒ™ãƒ«ã§ã™ï¼‰</p><h3 id="ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãªã‚¤ãƒ³ãƒ•ãƒ©ç³»ã®ãƒªã‚½ãƒ¼ã‚¹"><a href="#ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãªã‚¤ãƒ³ãƒ•ãƒ©ç³»ã®ãƒªã‚½ãƒ¼ã‚¹" class="headerlink" title="ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãªã‚¤ãƒ³ãƒ•ãƒ©ç³»ã®ãƒªã‚½ãƒ¼ã‚¹"></a>ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãªã‚¤ãƒ³ãƒ•ãƒ©ç³»ã®ãƒªã‚½ãƒ¼ã‚¹</h3><p>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ã€IAMãƒãƒªã‚·ãƒ¼ã€VPCè¨­å®šãªã©ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ­£å¸¸ãªå‹•ä½œã«ç›´æ¥å½±éŸ¿ã‚’ä¸ãˆã‚‹ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãªã‚¤ãƒ³ãƒ•ãƒ©ç³»ã®ãƒªã‚½ãƒ¼ã‚¹ã«å¯¾ã—ã¦ãƒ†ã‚¹ãƒˆã‚’è¡Œã†ã®ãŒè‰¯ã„ã¨æ€ã„ã¾ã™ã€‚</p><h3 id="ä¾å­˜é–¢ä¿‚ã®ã‚ã‚‹ãƒªã‚½ãƒ¼ã‚¹"><a href="#ä¾å­˜é–¢ä¿‚ã®ã‚ã‚‹ãƒªã‚½ãƒ¼ã‚¹" class="headerlink" title="ä¾å­˜é–¢ä¿‚ã®ã‚ã‚‹ãƒªã‚½ãƒ¼ã‚¹"></a>ä¾å­˜é–¢ä¿‚ã®ã‚ã‚‹ãƒªã‚½ãƒ¼ã‚¹</h3><p>è¤‡æ•°ã®ãƒªã‚½ãƒ¼ã‚¹é–“ã§è¤‡é›‘ãªä¾å­˜é–¢ä¿‚ã‚’æŒã¤ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆä¾‹ãˆã°ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ã®ãƒ«ãƒ¼ãƒ«ãŒç‰¹å®šã®ãƒªã‚½ãƒ¼ã‚¹ã«ä¾å­˜ã—ã¦ã„ã‚‹å ´åˆãªã©ï¼‰<br>ã“ã‚Œã‚‰ã®ä¾å­˜é–¢ä¿‚ã‚’æ­£ç¢ºã«åæ˜ ã—ã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã™ã‚‹ã¨ãã«è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚</p><h3 id="ã‚³ã‚¹ãƒˆã«å¤§ããªå½±éŸ¿ã‚’ä¸ãˆã‚‹ãƒªã‚½ãƒ¼ã‚¹"><a href="#ã‚³ã‚¹ãƒˆã«å¤§ããªå½±éŸ¿ã‚’ä¸ãˆã‚‹ãƒªã‚½ãƒ¼ã‚¹" class="headerlink" title="ã‚³ã‚¹ãƒˆã«å¤§ããªå½±éŸ¿ã‚’ä¸ãˆã‚‹ãƒªã‚½ãƒ¼ã‚¹"></a>ã‚³ã‚¹ãƒˆã«å¤§ããªå½±éŸ¿ã‚’ä¸ãˆã‚‹ãƒªã‚½ãƒ¼ã‚¹</h3><p>ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ—ã«ã‚ˆã£ã¦ã¯ã€å¤§ããã‚³ã‚¹ãƒˆã«è·³ã­ã‚‹ãŸã‚ã€ã‚µã‚¤ã‚ºã€æ•°ãªã©ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã“ã¨ã¯æœ‰åŠ¹ã§ã™ã€‚<br>ã“ã‚Œã«ã‚ˆã‚Šã€äºˆæœŸã—ãªã„ã‚³ã‚¹ãƒˆã®ç™ºç”Ÿã‚’é˜²ãã“ã¨ãŒã§ãã¾ã™ã€‚</p><h3 id="å¤‰æ›´é »åº¦ã®é«˜ã„ãƒªã‚½ãƒ¼ã‚¹"><a href="#å¤‰æ›´é »åº¦ã®é«˜ã„ãƒªã‚½ãƒ¼ã‚¹" class="headerlink" title="å¤‰æ›´é »åº¦ã®é«˜ã„ãƒªã‚½ãƒ¼ã‚¹"></a>å¤‰æ›´é »åº¦ã®é«˜ã„ãƒªã‚½ãƒ¼ã‚¹</h3><p>å¤‰æ›´é »åº¦ãŒé«˜ã„ã¨ãƒŸã‚¹ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒé«˜ããªã‚Šã¾ã™ã€‚<br>ãã®ãŸã‚ã€ãã‚Œã‚‰ã«å¯¾ã—ã¦ãƒ†ã‚¹ãƒˆã‚’è¡Œã†ã®ã¯æœ‰åŠ¹ã‹ã¨æ€ã„ã¾ã™ã€‚</p><h3 id="ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«"><a href="#ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«" class="headerlink" title="ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«"></a>ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«</h3><p>ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã€è¤‡æ•°ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’åŒ…æ‹¬çš„ã«ç®¡ç†ã™ã‚‹ãŸã‚ã€è¤‡é›‘ãªæ§‹æˆã¨ãªã‚Šã¾ã™ã€‚<br>ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®æœŸå¾…ã™ã‚‹çµæœã‚’ãƒ†ã‚¹ãƒˆã§ã‚«ãƒãƒ¼ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ãŸã‚ã€å†åˆ©ç”¨æ€§ã€å“è³ªã®å‘ä¸Šã«ã¤ãªãŒã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚</p><h1 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h1><p>ã„ã‹ãŒã§ã—ãŸã§ã—ã‚‡ã†ã‹ã€‚<br>ä»Šå›ç´¹ä»‹ã—ãŸTerraform ã®æ©Ÿèƒ½ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§å°‘ã—ã§ã‚‚ãƒ†ã‚¹ãƒˆã®æœ‰åŠ¹æ€§ã‚„å°å…¥ã®ãã£ã‹ã‘ã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚</p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href="https://www.hashicorp.com/blog/terraform-1-7-adds-test-mocking-and-config-driven-remove">Terraform 1.7 adds test mocking and config-driven remove</a></li><li><a href="https://developer.hashicorp.com/terraform/tutorials/configuration-language/test">Write Terraform Tests</a></li><li><a href="https://developer.hashicorp.com/terraform/language/tests/mocking#mock-provider-data">Mocks</a></li><li><a href="https://developer.hashicorp.com/terraform/language/tests">Tests</a></li></ul>]]></content:encoded>
      
      
      <category domain="https://future-architect.github.io/categories/Programming/">Programming</category>
      
      
      <category domain="https://future-architect.github.io/tags/Terraform/">Terraform</category>
      
      <category domain="https://future-architect.github.io/tags/terraform-test/">terraform test</category>
      
      <category domain="https://future-architect.github.io/tags/terraform-mock/">terraform mock</category>
      
      
      <comments>https://future-architect.github.io/articles/20240321a/#disqus_thread</comments>
      
    </item>
    
  </channel>
</rss>
