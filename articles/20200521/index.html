<!DOCTYPE html>
<!--[if IE 8]> <html lang="ja" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="ja" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="ja">
<!--<![endif]-->
<head><meta name="generator" content="Hexo 3.9.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>Go Tips連載4: GoDocの読み方 | フューチャー技術ブログ</title>
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  
  <meta name="description" content="Go Tips連載の第4弾目です。 新しいプログラミング言語を学ぶときは、まず、情報の取得の仕方を覚えておくと学習効率が上がります。検索して、日本語で誰かが解説している二次情報を探すのもいいのですが、古くなって使えなかったり、人気のある情報に偏ってしまって、ちょっと混み入った話になると情報が見つからなくなったりしがちです。多少素っ気なく感じるかもしれませんが、一次情報を読み解く方法を知っておくと良">
<meta name="keywords" content="Go,GoTips連載,Document">
<meta property="og:type" content="article">
<meta property="og:title" content="Go Tips連載4: GoDocの読み方">
<meta property="og:url" content="https://future-architect.github.io/articles/20200521/index.html">
<meta property="og:site_name" content="フューチャー技術ブログ">
<meta property="og:description" content="Go Tips連載の第4弾目です。 新しいプログラミング言語を学ぶときは、まず、情報の取得の仕方を覚えておくと学習効率が上がります。検索して、日本語で誰かが解説している二次情報を探すのもいいのですが、古くなって使えなかったり、人気のある情報に偏ってしまって、ちょっと混み入った話になると情報が見つからなくなったりしがちです。多少素っ気なく感じるかもしれませんが、一次情報を読み解く方法を知っておくと良">
<meta property="og:locale" content="ja">
<meta property="og:image" content="https://future-architect.github.io/images/20200521/1.png">
<meta property="og:image" content="https://future-architect.github.io/images/20200521/2.png">
<meta property="og:image" content="https://future-architect.github.io/images/20200521/3.png">
<meta property="og:image" content="https://future-architect.github.io/images/20200521/4.png">
<meta property="og:image" content="https://future-architect.github.io/images/20200521/5.png">
<meta property="og:updated_time" content="2020-05-23T05:17:05.871Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Go Tips連載4: GoDocの読み方">
<meta name="twitter:description" content="Go Tips連載の第4弾目です。 新しいプログラミング言語を学ぶときは、まず、情報の取得の仕方を覚えておくと学習効率が上がります。検索して、日本語で誰かが解説している二次情報を探すのもいいのですが、古くなって使えなかったり、人気のある情報に偏ってしまって、ちょっと混み入った話になると情報が見つからなくなったりしがちです。多少素っ気なく感じるかもしれませんが、一次情報を読み解く方法を知っておくと良">
<meta name="twitter:image" content="https://future-architect.github.io/images/20200521/1.png">
  
    <link rel="alternative" href="/atom.xml" title="フューチャー技術ブログ" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  

  <meta content="Go Tips連載4: GoDocの読み方 | フューチャー技術ブログ" name="description">
  <meta content="Go Tips連載4: GoDocの読み方,フューチャー技術ブログ,フューチャーアーキテクト,Future Architect,フューチャー,Future,Tech Blog,技術ブログ,技術,ブログ" name="keywords">
  <meta content="Future Architect Consultant" name="author">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700|Audiowide|PT+Sans+Narrow|Source+Sans+Pro:200,300,400,600,700,900&amp;subset=all" rel="stylesheet" type="text/css">

  <!-- Global styles START -->
  <link rel="stylesheet" href="/metronic/assets/plugins/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="/metronic/assets/plugins/bootstrap/css/bootstrap.min.css">
  <!-- Global styles END -->

  <!-- Theme styles START -->
  <link rel="stylesheet" href="/metronic/assets/corporate/css/style.css">
  <link rel="stylesheet" href="/metronic/assets/corporate/css/style-responsive.css">
  <link rel="stylesheet" href="/metronic/assets/corporate/css/themes/custom.css">
  <link rel="stylesheet" href="/css/theme-styles.css">
  <!-- Theme styles END --><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>
</html>
<body class="corporate">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><!-- BEGIN HEADER -->
<div class="header">
	<div class="header-overlay">
		<!--<a class="site-logo" href="/" id="logo">フューチャー技術ブログ</a>-->
		<div class="header-menu">
			<a class="site-logo" href="/">
				<img src="/metronic/assets/corporate/img/site_logo.png" alt="logo" class="logo-img" width="180px">
			</a>
			<a href="javascript:void(0);" class="mobi-toggler"><i class="fa fa-bars"></i></a>
			<!-- BEGIN NAVIGATION -->
			<div class="header-navigation pull-right font-transform-inherit">
				<ul>
					
					<li class="">
						<a href="/"><i class="fa fa-home"></i>Home</a>
					</li>
					
					<li class="">
						<a href="/articles/"><i class="fa fa-newspaper-o"></i>Blog</a>
					</li>
					
					<li class="">
						<a href="https://github.com/future-architect"><i class="fa fa-github"></i>GitHub</a>
					</li>
					
					<!-- BEGIN TOP SEARCH -->
					<!-- END TOP SEARCH -->
				</ul>
			</div>
		</div>
		<!-- END NAVIGATION -->
		<div class="header-title">Future Tech Blog</div>
        <div class="header-title-sub">フューチャー開発者ブログ</div>
	</div>
</div>
<!-- Header END -->

  <div class="container">
  <ul class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/articles/">Blog</a></li>
    <li class="active">Post</li>
  </ul>
  <section id="main">
    
    <h2 itemprop="name">
      <a class="article-title" href="/articles/20200521/">Go Tips連載4: GoDocの読み方</a>
    </h2>


    <div class="row">
<div class="col-md-9 col-sm-9 blog-posts">
<article id="post-20200521-go-tips-4-godoc" class="article article-type-post blog-item" itemscope itemprop="blogPost">
  <div class="article-meta">
  </div>
  <div class="article-inner">
    
    <header class="article-header">
    <ul class="blog-info">
    <li><i class="fa fa-user"></i> 澁川喜規</li>
    <li><i class="fa fa-calendar"></i>
	  <time datetime="2020-05-21T13:23:40.000Z" itemprop="datePublished">2020/05/21</time>

    </li>

    <li><i class="fa fa-tags"></i>
    
  
    <a href="/tags/Go/" title="Go">Go</a>,
  
    <a href="/tags/GoTips連載/" title="GoTips連載">GoTips連載</a>,
  
    <a href="/tags/Document/" title="Document">Document</a>
  


    </li>
    </ul>
    
  <div class="article-category">
    
    Category: 
    
    <a class="article-category-link" href="/categories/Programming/">Programming</a>
  </div>
  <br>


    </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="/tags/GoTips連載/">Go Tips連載</a>の第4弾目です。</p>
<p>新しいプログラミング言語を学ぶときは、まず、情報の取得の仕方を覚えておくと学習効率が上がります。検索して、日本語で誰かが解説している二次情報を探すのもいいのですが、古くなって使えなかったり、人気のある情報に偏ってしまって、ちょっと混み入った話になると情報が見つからなくなったりしがちです。多少素っ気なく感じるかもしれませんが、一次情報を読み解く方法を知っておくと良いでしょう。本家が作ったものではなくても網羅的に、リファレンスとなる心意気で書かれたものもたまにあります。</p>
<table>
<thead>
<tr>
<th align="center">種類</th>
<th align="center">区分</th>
<th align="center">翻訳</th>
<th align="left">解説</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><a href="https://tour.golang.org/welcome/1" target="_blank" rel="noopener">Tour of Go</a></td>
<td align="center">一次</td>
<td align="center"><a href="https://go-tour-jp.appspot.com/welcome/1" target="_blank" rel="noopener">あり</a></td>
<td align="left">Goの書き方チュートリアル</td>
</tr>
<tr>
<td align="center"><a href="https://golang.org/doc/effective_go.html" target="_blank" rel="noopener">Effective Go</a></td>
<td align="center">一次</td>
<td align="center">メンテされているものはなし？</td>
<td align="left">Goのコードはこう書くべきといった指標</td>
</tr>
<tr>
<td align="center"><a href="https://blog.golang.org/" target="_blank" rel="noopener">The Go Blog</a></td>
<td align="center">一次</td>
<td align="center"><a href="https://www.ymotongpoo.com/works/goblog-ja/" target="_blank" rel="noopener">あり</a></td>
<td align="left">新し目の機能など大きめのトピックについて設計思想とか解説が書かれることがある</td>
</tr>
<tr>
<td align="center"><a href="https://godoc.org/" target="_blank" rel="noopener">Go Doc</a></td>
<td align="center">一次</td>
<td align="center">ﾑﾘ</td>
<td align="left">標準・サードパティのライブラリのリファレンス</td>
</tr>
<tr>
<td align="center"><a href="https://github.com/golang/go/wiki" target="_blank" rel="noopener">Go Wiki</a></td>
<td align="center">一次</td>
<td align="center"></td>
<td align="left">文法の解説、コミュニティ情報などいろいろあったり</td>
</tr>
<tr>
<td align="center"><a href="https://golang.org/doc/devel/release.html" target="_blank" rel="noopener">Release Notes</a></td>
<td align="center">一次</td>
<td align="center">Qiita等に有志が訳したものがあがる</td>
<td align="left">新バージョンの差分はここ</td>
</tr>
<tr>
<td align="center"><a href="https://gobyexample.com/" target="_blank" rel="noopener">Go by Example</a></td>
<td align="center">二次</td>
<td align="center"><a href="https://oohira.github.io/gobyexample-jp/" target="_blank" rel="noopener">あり</a></td>
<td align="left">細かい書き方のサンプルコード集</td>
</tr>
<tr>
<td align="center"><a href="https://yourbasic.org/golang/go-java-tutorial/" target="_blank" rel="noopener">Java to Go in-depth tutorial</a></td>
<td align="center">二次</td>
<td align="center"><a href="https://future-architect.github.io/articles/20200311/">あり</a></td>
<td align="left">既存の言語ユーザーのためのGo入門</td>
</tr>
</tbody></table>
<p>今回は、GoDocについて取り上げます。</p>
<p>長いので3行にまとめると</p>
<ul>
<li>GoDocのリファレンスはライブラリにとっては一次情報だが、使い方などはリポジトリのREADMEに書かれることも多い</li>
<li>構造体やインタフェースは、リファレンスだけを見ても使い方がわからないこともあるので、分からないからといって落ち込まないでください</li>
<li>サンプルコードも合わせて確認して使い方を確認すると良いです</li>
</ul>
<h1 id="GoDoc"><a href="#GoDoc" class="headerlink" title="GoDoc"></a>GoDoc</h1><p>GoDocは標準ライブラリや、他のサードパティ製ライブラリのドキュメントをホストしているウェブサイトになります。チュートリアルなどは一度クリアしたら見返すこともあまりないでしょうけども、GoDocはGoで開発している限り、ずっと参照し続けることになります。GoDocの読み方を知っておくことは、Go力をあげるには必須なスキルだと思います。</p>
<p>GoDocのURLは以下の通りの場所</p>
<ul>
<li><a href="https://pkg.go.dev/" target="_blank" rel="noopener">https://pkg.go.dev/</a></li>
</ul>
<p>以前はこちらで、検索エンジンでドキュメントを検索するとこっちのドメインが表示されると思いますが、上のツールバーの、always use pkg.go.devをクリックすると、上記のURLにリダイレクトされます。</p>
<ul>
<li><a href="https://godoc.org/" target="_blank" rel="noopener">https://godoc.org/</a></li>
</ul>
<h1 id="書いてある内容"><a href="#書いてある内容" class="headerlink" title="書いてある内容"></a>書いてある内容</h1><p>最近人気のchiのドキュメントを表示してみました。</p>
<img src="/images/20200521/1.png">


<p>上から、importするときの名前、パッケージ名、バージョンなどが書かれています。<br>その下は更新日時、ライセンス、モジュールのページです。</p>
<p>モジュールというのはサブディレクトリとかも含めた共通のルートページで、ソースコードがおいてあるリポジトリのリンクや、リポジトリのReadmeなどが書かれています。</p>
<p>その下のタブは、色々な情報へのハブになっています。</p>
<ul>
<li>Doc: 実際のドキュメント<ul>
<li>リファレンスと概要</li>
</ul>
</li>
<li>Overview: モジュールと同じ</li>
<li>Versions: 今まで公開されたバージョン一覧</li>
<li>Imports: どのパッケージに依存しているか？</li>
<li>Imported By: どのパッケージから利用されているか？人気なものほど多い</li>
<li>License: ライセンス</li>
</ul>
<h1 id="まず読むところ"><a href="#まず読むところ" class="headerlink" title="まず読むところ"></a>まず読むところ</h1><p>いきなりリファレンスを読みたい人もいるかもしれませんが、ふつうは概要を理解したいですよね？Goの場合は2箇所あります。</p>
<ul>
<li>DocのOverview</li>
<li>モジュールページのREADME</li>
</ul>
<p>Goのソースコードの中のコメントとして書いたドキュメントであれば前者に、リポジトリのREADMEに書かれた内容であれば後者に概要が書かれます。標準ライブラリの場合は前者しかないですが、サードパーティの場合、後者の方がリッチに丁寧に書かれることが多いように思います。どちらに詳しい情報が書かれるかはパッケージの実装者次第なので両方見て見ると良いでしょう。</p>
<h1 id="サンプルコード"><a href="#サンプルコード" class="headerlink" title="サンプルコード"></a>サンプルコード</h1><p>概要を把握したところで、どう書くのかを見て見たい人もいるでしょう。サンプルコードを探して見ましょう。DocのOverviewには3箇所、サンプルが置かれる可能性のある場所があります。</p>
<ol>
<li>DocのOverviewや各メソッドの説明: Goのコメントの流儀に従ってフォーマットされているサンプル</li>
<li>パッケージ全体のサンプルは、（あれば）DocのOverviewの末尾にサンプルコードが置かれる</li>
<li>各構造体や関数、メソッドのサンプルは、それぞれのリファレンスの中に書かれる</li>
</ol>
<p>chiはこの最初の1の形式のドキュメントが書かれていました。</p>
<p>2つ目と3つ目はchiにはなかったので、標準ライブラリのdatabase/sqlパッケージのドキュメントを見て見ましょう。Overviewの下に、パッケージレベルのサンプルコードが2つあることがわかります。▼をクリックすると表示されます。</p>
<img src="/images/20200521/2.png">

<p>メソッドなどのドキュメントは、それぞれの説明のテキストの後ろにサンプルが置かれています。</p>
<img src="/images/20200521/3.png">

<p>Goの公式ドキュメントにおけるサンプルというのは、サンプルの形を模したテストコードだったりします。もし、期待するコードがなければ、リポジトリのサンプルを見て見てもいいでしょう。<code>_example.go</code>あるいは、<code>_test.go</code>といったファイルに入っています。<code>Example</code>から始まる関数がサンプル、<code>Test</code>から始まる関数がテストです。</p>
<p>サードパーティのパッケージで、これらのどこにもなかった場合、モジュールページのREADMEにある可能性があります。こちらはMarkdownなので、サンプルでもなんでも自由に書けます。この中にサンプルも書かれることが多いです。</p>
<h1 id="ライブラリリファレンス"><a href="#ライブラリリファレンス" class="headerlink" title="ライブラリリファレンス"></a>ライブラリリファレンス</h1><p>ライブラリリファレンスはDocタブのIndexという項目以下にあります。ドキュメントのメインコンテンツです。</p>
<img src="/images/20200521/4.png">

<p>リファレンスは以下の順番に並んでいます。</p>
<ul>
<li>Constants: 定数一覧</li>
<li>Variables: 変数一覧</li>
<li>func …の各項目: パッケージ内で定義されている関数</li>
<li>type …の各項目: パッケージ内で定義されている型（構造体、名前付き型、インタフェース）</li>
</ul>
<p>定数、変数は名前とか型を確認するぐらいだと思いますし、関数や型の説明の中で参照されるので、そのタイミングで読むことになると思います。関数も、読み方としては特に難しくはないと思います。ここではtypeの各項目について紹介します。</p>
<p>要注意ポイントとしては、GoDocはそのサービスが起動しているOS向けの要素しか表示しません。osパッケージにはWindows用の要素だったりとかもあったりしますが、pkg.go.devはLinuxで動作しており、リファレンスもLinuxで有効な項目のみが表示されます。ファイル操作のバッチのプログラムとかを作成する場合には注意してください。</p>
<h2 id="構造体"><a href="#構造体" class="headerlink" title="構造体"></a>構造体</h2><p>typeのうち、構造体は結構、他の言語のユーザーからすると初見殺しな気がします。たいてい、ドキュメントを見ると「あ、このメソッドを呼んであげれば、やりたいことができそうだ」というのは把握できると思います。しかし、そのメソッドをどう呼んであげればいいのか、で詰まることがあります。ベテランであっても。</p>
<img src="/images/20200521/5.png">

<p>構造体の説明はまずはGoの定義コードほぼそのまま（privateな要素以外）が書かれています。</p>
<p>さて、この構造体のインスタンスを作って使うにはどうすればいいでしょうか？Goの文法的には3通りあります(newはあんまり見ないので省略)。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// cはインスタンス</span></span><br><span class="line"><span class="keyword">var</span> c Context</span><br><span class="line"><span class="comment">// cはインスタンス（パラメータの初期化もできる）</span></span><br><span class="line">c := Context&#123;&#125;</span><br><span class="line"><span class="comment">// cはポインタ（パラメータの初期化もできる）</span></span><br><span class="line">c := &amp;Context&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>それ以外に、リファレンスを見ると、レシーバーがついてないメソッドが構造体のメソッド一覧の先頭にいることがわかります。コンストラクタ関数とかファクトリ関数と呼ばれているもので、必要な属性を持ったインスタンスを生成し、そのポインタや実体を返すものです。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Context</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">NewRouteContext</span><span class="params">()</span> *<span class="title">Context</span></span></span><br><span class="line"><span class="function">    <span class="title">func</span> <span class="title">RouteContext</span><span class="params">(ctx context.Context)</span> *<span class="title">Context</span></span></span><br></pre></td></tr></table></figure>

<p>これらのインスタンスの作成方法のうち、どの手法で作ればいいのか、というのはそのライブラリによって違います。</p>
<ul>
<li>ファクトリー関数があるものであれば、ほぼそれでいいはず<ul>
<li>メンバー変数にprivateなものがあり、ファクトリー関数でのみ初期化という場合は確度が高い</li>
<li>ただし、その中にもGoの文法で作っても動作するハイブリッドなものとかもある</li>
</ul>
</li>
<li>自分で作らず、ライブラリの内部で作ってインスタンスだけ渡ってくるものもある。net/httpのサーバーのハンドラのRequestとか</li>
<li>Goの文法で作成するもののうち、コピー不能でポインタ型で取り扱わないといけないものもあり</li>
</ul>
<p>どの手法で構造体のインスタンスを作ればいいのか、というのはサンプルコードとかを見て判断することになります。</p>
<p>読み手の気持ちを考えると、何かしらのライブラリを作って構造体を提供するときは、ファクトリー関数を作って提供しましょう、というのがベストプラクティスになる気がします。</p>
<h2 id="名前付き型-named-type"><a href="#名前付き型-named-type" class="headerlink" title="名前付き型(named type)"></a>名前付き型(named type)</h2><p>Goでは、メモリ上の実態は同じだけど、別の型として振る舞わせることが可能です。例えば、画面に表示しようとするとアスタリスクに塗りつぶす文字列型、みたいなことができます（これは%vとかでダメなので簡易実装です。このまま利用はしないでください）。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> SecretString <span class="keyword">string</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s SecretString)</span> <span class="title">String</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">	result := <span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="built_in">len</span>(s))</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(s); i++ &#123;</span><br><span class="line">		result[i] = <span class="string">'*'</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">string</span>(result)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>これも、例えば列挙型のようなものを作ったりするには便利な方法です。しかし、リファレンスを見ても、この型をどう作るのかの説明がされることはありません。これはどうやってインスタンスを作ればいいでしょうか？作り方としては次のような感じになりますね。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 型キャスト</span></span><br><span class="line">s := <span class="string">"important credential"</span> <span class="comment">// sはstring</span></span><br><span class="line">ss := SecretString(s)       <span class="comment">// ここでキャスト。ssはSecretString</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 最初からその型で宣言</span></span><br><span class="line"><span class="keyword">var</span> ss SecretString = <span class="string">"secret password"</span></span><br></pre></td></tr></table></figure>

<p>これで、どちらもssがSecretString型になるので、リファレンスに書かれているメソッドが使えるようになります。</p>
<p>場合によっては、Constantsの定数として事前に定義されているもののみを使うという流儀のライブラリもあります。その場合はインスタンスを作らずに、importして利用するだけでいけます。どの方法でインスタンスを利用すればいいのかは実装次第なので、サンプルコードとかを見てみると良いでしょう。</p>
<h2 id="インタフェース"><a href="#インタフェース" class="headerlink" title="インタフェース"></a>インタフェース</h2><p>インタフェースも、便利なメソッドは見つけたが、どうやってインスタンスを取得すればいいのかわからない筆頭です。これはベテランでも初見では分からないこと多数です。分からないからといって落ち込まないください。みんな分からないのです。</p>
<p>インタフェースは、とあるインスタンスが、そのインタフェースで定義されているメソッドを持っている、というだけの情報しかありません。主に4通りあります。2番目のものはウェブサイドではなくローカルで動作する<a href="https://qiita.com/shibukawa/items/8c70fdd1972fad76a5ce#godoc%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%81%AB%E3%82%88%E3%82%8B%E9%9D%99%E7%9A%84%E8%A7%A3%E6%9E%90" target="_blank" rel="noopener">godocコマンドの解析機能</a>を利用すると発見できます。発見できた後は、この上の節の構造体をどうする問題に遷移します。最後のものは今のところ僕が見たことがあるのはnet/httpのPusherとかだけですので無視してもいいかもしれません。</p>
<ul>
<li>自分で作る<ul>
<li>そのインタフェースを満たすメソッドを持った構造体をユーザーが作成してそのライブラリの他のメソッドに渡せばいいのか</li>
</ul>
</li>
<li>既成の構造体がこのインタフェースを満たしている<ul>
<li>何かしらの構造体のインスタンスを作ると、そのインタフェースを満たして、そのインタフェースの型の変数に代入したり、メソッドの引数に渡せるようになる</li>
</ul>
</li>
<li>ライブラリが作成してくれるもの<ul>
<li>net/httpのResponeWriterなど</li>
</ul>
</li>
<li>インタフェース間のキャスト<ul>
<li>特定のインタフェースを型アサーションでキャストすると、そのインタフェースが得られてメソッドが利用できるようになる</li>
</ul>
</li>
</ul>
<p>これのどれに当たるかは、リファレンスだけを見てもさっぱり見えてこないこともあります。これも素直に、サンプルコードなどを参照するようにした方が良いでしょう。</p>
<p>これを読んでいる上級者の方々は、もしインタフェースを実装して他の人に使ってもらおうと思っているのであれば、必ずサンプルコードを見える位置に置いてあげてください。私からの一生のお願いです。</p>
<h2 id="引数のinterface"><a href="#引数のinterface" class="headerlink" title="引数のinterface{}"></a>引数の<code>interface{}</code></h2><p>Goは静的型付け言語ではあるものの、リフレクションを使ってある程度動的型付け言語のような動作をさせることができます。ライブラリによっては、「ある程度どんな型でも受け付けますよ」ということがあります。Goの<code>interface{}</code>型は他の言語でいう<code>any</code>だったり<code>void *</code>だったりします。例えば、GoでJSONを扱おう、となるとこの<a href="https://golang.org/pkg/encoding/json/#Marshal" target="_blank" rel="noopener">interface{}</a>が登場します。</p>
<p>で、こいつをどうやって作ればいいのか、というのもリファレンスの関数の定義をいくらにらめっこしても出てきません。数字でも文字列でも受けつけますよ、ということで<code>interface{}</code>にしているかもしれませんし、上記のJSONの場合は、自作の構造体を作る必要があります。その構造体のフィールドにはタグを付与します。このタグにはDSLというかルールがあるのですが、このルールは関数の引数とかのリファレンスを穴があくほど見ても分かりません。ライブラリの作者が自然言語で解説を書く必要があります。またJSONとかもタグを書かなかった場合のデフォルト動作みたいなのもあったりします。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> MyStruct <span class="keyword">struct</span> &#123;</span><br><span class="line">    Name <span class="keyword">string</span>         <span class="string">`json:"name"`</span></span><br><span class="line">    SessionToken <span class="keyword">string</span> <span class="string">`json:"-"`</span></span><br><span class="line">    NickName <span class="keyword">string</span>     <span class="string">`json:"nickname,omitempty"`</span></span><br><span class="line">    Age <span class="keyword">int</span>             <span class="string">`json:"num,string"`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>この<code>interface{}</code>は自然言語部分の説明とかサンプルコードを参照するのが良いでしょう。</p>
<h1 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h1><p>プログラミングを学ぶと、一次情報にあたれ、みたいなことはよく言われます。今回は、その中でGoDocの読み方について解説しました。むしろ、GoDoc読んでもここは難しいぞ、というのを理解してもられば、GoDocとうまく折り合いをつけてやっていけるようになると思います。</p>
<p>上級者になるとリファレンスを見て使い方を想像したり、生のコードを解析してなんとかできるようになりますが、初心者だと使い方を知る部分も結構難しいです。サンプルコードも探しながら、挑戦して見てください。経験を積めば、少しずつ予想ができるようになってきます。</p>
<h2 id="関連記事"><a href="#関連記事" class="headerlink" title="関連記事"></a>関連記事</h2><p>Goに関連した他の連載企画です。</p>
<ul>
<li><a href="/tags/Serverless%E9%80%A3%E8%BC%89/">Serverless連載</a></li>
<li><a href="/tags/DynamoDB%C3%97Go/">DynamoDB×Go</a></li>
<li><a href="/tags/GCP%E9%80%A3%E8%BC%89/">GCP連載</a></li>
<li><a href="/tags/GoCDK/">GoCDK</a></li>
</ul>

      
    </div>
    <div class="social-area">
    <!-- シェアボタン START -->
  <ul class="social-button">
    
    
    
      
      
    
    <!-- twitter -->
    <li class="sc-tw social-button-twitter" style="position: static; width:75px; height:20px">
      <a href="https://twitter.com/share" class="twitter-share-button" data-via="future_techblog" data-lang="ja" data-text="Go Tips連載4: GoDocの読み方" data-url="https://future-architect.github.io/articles/20200521/">ツイート</a>
    </li>
    <!-- Facebookいいね -->
    <li class="social-button-fb" style="width:120px; height:20px">
     <div class="fb-like" data-href="https://future-architect.github.io/articles/20200521/" data-layout="button_count" data-action="like" data-size="small" data-show-faces="true" data-share="true"></div>
    </li>
    <!-- はてなブックマーク -->
    <li class="social-button-hatebu" style="width:115px; height:20px">
       <a href="http://b.hatena.ne.jp/entry/https://future-architect.github.io/articles/20200521/" class="hatena-bookmark-button" data-hatena-bookmark-layout="standard-balloon" data-hatena-bookmark-lang="ja" title="はてなブックマークに追加">はてブする</a>
    </li>
    <!-- pocket -->
    <li class="social-button-pocket">
      <a data-pocket-label="pocket" data-pocket-count="horizontal" class="pocket-btn" data-lang="en" data-save-url="https://future-architect.github.io/articles/20200521/"></a>
    </li>
  </ul>
<!-- シェアボタン END -->

    </div>
  </div>
</div>
<div class="col-md-3 col-sm-3 blog-sidebar">
  <!-- BEGIN FEATURED POSTS -->
<h2>Featured Posts</h2>
<div class="recent-news margin-bottom-10">
  
  
    
      
        <a href="https://future-architect.github.io/articles/20200601/">
          <div class="row margin-bottom-10">
            <div class="col-md-10">
              <li>
                春の入門祭り 🌸 #01 Goのテストに入門してみよう！
              </li>
            </div>
          </div>
        </a>
      
	
  
    
      
        <a href="https://future-architect.github.io/articles/20200529/">
          <div class="row margin-bottom-10">
            <div class="col-md-10">
              <li>
                春の入門祭り🌸連載を始めます
              </li>
            </div>
          </div>
        </a>
      
	
  
    
      
        <a href="https://future-architect.github.io/articles/20200528/">
          <div class="row margin-bottom-10">
            <div class="col-md-10">
              <li>
                あなたのGoアプリ/ライブラリのパッケージ構成もっとシンプルでよくない？
              </li>
            </div>
          </div>
        </a>
      
	
  
    
      
        <a href="https://future-architect.github.io/articles/20200527/">
          <div class="row margin-bottom-10">
            <div class="col-md-10">
              <li>
                Go Tips連載8: logパッケージでログ出力している場所の情報を出す
              </li>
            </div>
          </div>
        </a>
      
	
  
    
  
    
      
        <a href="https://future-architect.github.io/articles/20200525/">
          <div class="row margin-bottom-10">
            <div class="col-md-10">
              <li>
                Go Tips 連載7:【golngci-lint】lint issueを新たに作り出さないためのTips
              </li>
            </div>
          </div>
        </a>
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
  
    
      
	
  
    
      
	
  
    
  
    
      
	
  
    
  
    
  
    
      
	
  
    
      
	
  
    
      
	
  
    
  
    
  
    
      
	
  
    
      
	
  
    
      
	
  
    
  
    
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
  
    
  
    
      
	
  
    
  
    
  
    
      
	
  
    
  
    
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
  
    
      
	
  
    
  
    
      
	
  
    
      
	
  
    
  
    
      
	
  
    
      
	
  
    
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
  
    
  
    
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
  
    
      
	
  
    
      
	
  
    
  
    
      
	
  
    
  
    
  
    
  
    
      
	
  
    
  
    
      
	
  
    
      
	
  
    
  
    
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
  
    
  
    
  
    
      
	
  
    
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
	
  
    
      
	
  
    
      
	
  
    
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
      
	
  
    
  
    
      
	
  
    
  
    
      
	
  
    
      
	
  
    
      
	
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
</div>
<!-- END FEATURED POSTS -->

<!-- CATEGORIES START -->
<h2 class="margin-top-30">Categories</h2>

<div class="widget-wrap">
  <div class="widget">
    <ul class="nav sidebar-categories margin-bottom-40">
      
	<li>
	  <a href="/categories/Culture/">Culture (25)</a>
	</li>
      
	<li>
	  <a href="/categories/IoT/">IoT (11)</a>
	</li>
      
	<li>
	  <a href="/categories/VR/">VR (8)</a>
	</li>
      
	<li>
	  <a href="/categories/Security/">Security (1)</a>
	</li>
      
	<li>
	  <a href="/categories/Design/">Design (6)</a>
	</li>
      
	<li>
	  <a href="/categories/Programming/">Programming (63)</a>
	</li>
      
	<li>
	  <a href="/categories/Management/">Management (7)</a>
	</li>
      
	<li>
	  <a href="/categories/Infrastructure/">Infrastructure (54)</a>
	</li>
      
	<li>
	  <a href="/categories/DB/">DB (8)</a>
	</li>
      
	<li>
	  <a href="/categories/DataScience/">DataScience (19)</a>
	</li>
      
	<li>
	  <a href="/categories/CI-CD/">CI/CD (1)</a>
	</li>
      
	<li>
	  <a href="/categories/認証認可/">認証認可 (3)</a>
	</li>
      
	<li>
	  <a href="/categories/マネジメント/">マネジメント (1)</a>
	</li>
      
	<li>
	  <a href="/categories/インタビュー/">インタビュー (1)</a>
	</li>
      
    </ul>
  </div>
</div>


<!-- CATEGORIES END -->

<!-- START ADVENT CALENDAR -->
<div class="margin-bottom-20">
  <h2>Advent Calendar</h2>
  <div class="widget-wrap">
  <div class="widget">
    <ul class="nav">
      <li>
        <a href="http://qiita.com/advent-calendar/2018/future" target="_blank">2018年</a>
      </li>
      <li>
        <a href="http://qiita.com/advent-calendar/2017/future" target="_blank">2017年</a>
      </li>
      <li>
        <a href="http://qiita.com/advent-calendar/2016/future" target="_blank">2016年</a>
      </li>
      <li>
        <a href="http://qiita.com/advent-calendar/2015/future" target="_blank">2015年</a>
      </li>
    </ul>
  </div>
</div>

</div>
<!-- END ADVENT CALENDAR -->


</div>
</div>

  </section>
</div>

    <!-- BEGIN PRE-FOOTER -->
    <div class="pre-footer">
      <div class="container">
        <div class="row">
          <!-- BEGIN BOTTOM ABOUT BLOCK -->
          <div class="col-md-4 col-sm-6 pre-footer-col">
            <h2>About Us</h2>
            <p>経営とITをデザインする、フューチャーの技術ブログです。IoTやAI(MachineLearning)・Security・VR・Cloud・BigDataといった内容の記事を中心に、業務で利用する幅広い技術について紹介します。また、OSSへの貢献やカンファレンスなどへの登壇など、フューチャーへのエンジニア文化についてもドシドシ紹介していきますのでぜひウォッチ下さい！<br /><br /><a href="http://www.future.co.jp/">http://www.future.co.jp/</a></p>
          </div>
          <!-- END BOTTOM ABOUT BLOCK -->

          <!-- BEGIN BOTTOM CONTACTS -->
          <div class="col-md-4 col-sm-6 pre-footer-col">
            <h2>Contact</h2>
            <address class="margin-bottom-40">
              東京都品川区大崎1-2-2<br>
              アートヴィレッジ大崎セントラルタワー<br><br>
              Email: <a href="mailto:techblog@future.co.jp">techblog@future.co.jp</a><br>
            </address>
          </div>
          <!-- END BOTTOM CONTACTS -->

  <!-- FacebookのShareボタン用. ページに1度初期化できればよいのでフッターに配備 -->
  <div id="fb-root"></div>
  <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.0";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>

  <!-- Pocket Shareボタン. ページ毎に1度初期化できれば良いのでフッターに配備 -->
  <script type="text/javascript">!function(d,i){if(!d.getElementById(i)){var j=d.createElement("script");j.id=i;j.src="https://widgets.getpocket.com/v1/j/btn.js?v=1";var w=d.getElementById(i);d.body.appendChild(j);}}(document,"pocket-btn-js");</script>
  <!-- Twitter Shareボタン. ページ毎に1度初期化できれば良いのでフッターに配備 -->
  <script>window.twttr = (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0],
      t = window.twttr || {};
    if (d.getElementById(id)) return t;
    js = d.createElement(s);
    js.id = id;
    js.src = "https://platform.twitter.com/widgets.js";
    fjs.parentNode.insertBefore(js, fjs);

    t._e = [];
    t.ready = function(f) {
      t._e.push(f);
    };
    return t;
  }(document, "script", "twitter-wjs"));</script>
  <!-- はてぶ Shareボタン. ページ毎に1度初期化できれば良いのでフッターに配備 -->
  <script type="text/javascript" src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>

	
    <!-- BEGIN TWITTER BLOCK -->
    <div class="col-md-4 col-sm-6 pre-footer-col">
      <!-- Twitterフォローボタン -->
      <a href="https://twitter.com/future_techblog" class="twitter-follow-button" data-show-count="false" data-lang="ja">/future_techblogさんをフォロー</a>
      <!-- 組み込みTwitterウィジェット -->
      <a data-tweet-limit="1" class="twitter-timeline" href="https://twitter.com/future_techblog" data-widget-id="732749663766372354">Tweets by @future_techblog</a>
    </div>
    <!-- END TWITTER BLOCK -->
	
        </div>
      </div>
    </div>
    <!-- END PRE-FOOTER -->

    <!-- BEGIN FOOTER -->
    <div class="footer">
      <div class="container">
        <div class="row">
          <!-- BEGIN COPYRIGHT -->
          <div class="col-md-6 col-sm-6 padding-top-10">
                  &copy; 2020 フューチャー技術ブログ<br>
 <!-- <a href="javascript:;">Privacy Policy</a> | <a href="javascript:;">Terms of Service</a> -->
          </div>
          <!-- END COPYRIGHT -->
	  <!-- BEGIN SOCIAL -->
<div class="col-md-6 col-sm-6">
  <ul class="social-footer list-unstyled list-inline pull-right">
    
      
      <li><a href="https://github.com/future-architect"><i class="fa fa-github"></i></a></li>
      
  
      
      <li><a href="https://twitter.com/future_techblog"><i class="fa fa-twitter"></i></a></li>
      
  
      
      <li><a href="https://www.facebook.com/future.saiyo"><i class="fa fa-facebook"></i></a></li>
      
  
      
      <li>
        <a href="http://qiita.com/organizations/future">
            <i class="fa fa-pencil-square-o"></i>
        </a>
      </li>
      
  
      
      <li><a href="/atom.xml"><i class="fa fa-rss"></i></a></li>
      
  
  </ul>
</div>
<!-- END SOCIAL -->

        </div>
      </div>
    </div>
    <!-- END FOOTER -->

  <!-- BEGIN CORE PLUGINS (REQUIRED FOR ALL PAGES) -->
<!--[if lt IE 9]>
<script src="/metronic/assets/plugins/respond.min.js"></script>
<![endif]-->
<script src="/metronic/assets/plugins/jquery.min.js"></script>
<script src="/metronic/assets/plugins/jquery-migrate.min.js"></script>
<script src="/metronic/assets/plugins/bootstrap/js/bootstrap.min.js"></script>
<script src="/metronic/assets/corporate/scripts/back-to-top.js"></script>
<script src="/metronic/assets/corporate/scripts/layout.js"></script>
<script src="/js/script.js"></script>

<script type="text/javascript">
    jQuery(document).ready(function() {
        Layout.init();
        Layout.initTwitter();
        Layout.initFixHeaderWithPreHeader(); /* Switch On Header Fixing (only if you have pre-header) */
        Layout.initNavScrolling();
    });
</script>
<!-- END CORE PLUGINS -->
<!-- START INTEGRATIONS -->

<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-74047147-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


<!-- END INTEGRATIONS --><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</body>
</html>
