<!DOCTYPE html>
<!--[if IE 8]> <html lang="ja" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="ja" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="ja">
<!--<![endif]-->
<head>
  <meta charset="utf-8">
  <!--
    ███████╗██╗░░░██╗████████╗██╗░░░██╗██████╗░███████╗
    ██╔════╝██║░░░██║╚══██╔══╝██║░░░██║██╔══██╗██╔════╝
    █████╗░░██║░░░██║░░░██║░░░██║░░░██║██████╔╝█████╗░░
    ██╔══╝░░██║░░░██║░░░██║░░░██║░░░██║██╔══██╗██╔══╝░░
    ██║░░░░░╚██████╔╝░░░██║░░░╚██████╔╝██║░░██║███████╗
    ╚═╝░░░░░░╚═════╝░░░░╚═╝░░░░╚═════╝░╚═╝░░╚═╝╚══════╝
    ████████╗███████╗░█████╗░██╗░░██╗
    ╚══██╔══╝██╔════╝██╔══██╗██║░░██║
    ░░░██║░░░█████╗░░██║░░╚═╝███████║
    ░░░██║░░░██╔══╝░░██║░░██╗██╔══██║
    ░░░██║░░░███████╗╚█████╔╝██║░░██║
    ░░░╚═╝░░░╚══════╝░╚════╝░╚═╝░░╚═╝
    ██████╗░██╗░░░░░░█████╗░░██████╗░
    ██╔══██╗██║░░░░░██╔══██╗██╔════╝░
    ██████╦╝██║░░░░░██║░░██║██║░░██╗░
    ██╔══██╗██║░░░░░██║░░██║██║░░╚██╗
    ██████╦╝███████╗╚█████╔╝╚██████╔╝
    ╚═════╝░╚══════╝░╚════╝░░╚═════╝░
    Welcome engineer.
    https://www.future.co.jp/recruit/
  -->
  
  <title>CSVと親しくなるAWK術 | フューチャー技術ブログ</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  
  <meta name="description" content="はじめにこんにちは、TIG真野です。シェルスクリプト連載の2日目です。 シェルスクリプトなのにAWKってちょっと違うんじゃない？って思われる方も多いと思いますが、この連載におけるレギュレーションではsed, AWKもOKという優しいルール故、見逃しください。 この記事ではCSVデータをAWKで処理する例をいくつか紹介します。 awkとは   SmartphoneCreations2021によるPi">
<meta property="og:type" content="article">
<meta property="og:title" content="CSVと親しくなるAWK術 | フューチャー技術ブログ">
<meta property="og:url" content="https://future-architect.github.io/articles/20210330/index.html">
<meta property="og:site_name" content="フューチャー技術ブログ">
<meta property="og:description" content="はじめにこんにちは、TIG真野です。シェルスクリプト連載の2日目です。 シェルスクリプトなのにAWKってちょっと違うんじゃない？って思われる方も多いと思いますが、この連載におけるレギュレーションではsed, AWKもOKという優しいルール故、見逃しください。 この記事ではCSVデータをAWKで処理する例をいくつか紹介します。 awkとは   SmartphoneCreations2021によるPi">
<meta property="og:locale" content="ja_JP">
<meta property="og:image" content="https://future-architect.github.io/images/20210330/penguine-4120917_1280.jpg">
<meta property="article:published_time" content="2021-03-29T15:00:00.000Z">
<meta property="article:modified_time" content="2021-05-23T02:50:41.644Z">
<meta property="article:tag" content="ShellScript">
<meta property="article:tag" content="CSV">
<meta property="article:tag" content="AWK">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://future-architect.github.io/images/20210330/penguine-4120917_1280.jpg">
  
  <link rel="alternate" href="/atom.xml" title="フューチャー技術ブログ" type="application/atom+xml">
  
  
  <link rel="icon" href="/favicon.ico">
  
  <meta content="ShellScript,CSV,AWK" name="keywords">
  <meta content="真野隼記" name="author">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha384-pdapHxIh7EYuwy6K7iE41uXVxGCXY0sAjBzaElYGJUrzwodck3Lx6IE2lA0rFREo" crossorigin="anonymous">
  <link rel="stylesheet" href="/metronic/assets/style.css">
  <link rel="stylesheet" href="/css/theme-styles.css">
<meta name="generator" content="Hexo 5.4.0"></head>

<body class="corporate">
  <div class="wrap" itemscope itemtype="https://schema.org/TechArticle">
  <!-- BEGIN HEADER -->
<header class="header">
	<div class="header-overlay">
		<div class="header-menu"></div>
		<div class="header-title"><a href="/">Future Tech Blog</a></div>
		<div class="header-title-sub">フューチャー技術ブログ</div>
	</div>
</header>
<!-- Header END -->

  <div class="container">
  <ul class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/articles/">Blog</a></li>
    <li class="active">Post</li>
  </ul>
  <section id="main">
    
  <h2 itemprop="name">
    <a class="article-title" href="/articles/20210330/">CSVと親しくなるAWK術</a>
  </h2>


    <div class="row">
  <main class="col-md-9 col-sm-9 blog-posts">
    <article id="post-20210330_CSVと親しくなるAWK術" class="article article-type-post blog-item" itemscope itemprop="blogPost">
      <div class="article-inner">
        
        <header class="article-header">
          <ul class="blog-info">
            <li class="blog-info-item"><a href="/authors/%E7%9C%9F%E9%87%8E%E9%9A%BC%E8%A8%98">真野隼記</a></li>
            <li class="blog-info-item"><time datetime="2021-03-29T15:00:00.000Z" itemprop="datePublished">2021.03.30</time>
</li>
            <li class="blog-info-item">
  <ul>
  
    <li><a href="/tags/ShellScript/" title="ShellScript">ShellScript</a></li> 
  
    <li><a href="/tags/CSV/" title="CSV">CSV</a></li> 
  
    <li><a href="/tags/AWK/" title="AWK">AWK</a>
  
  </ul>

</li>
          </ul>
          
  <div class="article-category">
    
    Category:
    
    <a class="article-category-link" href="/categories/Infrastructure/">Infrastructure</a>
  </div>


        </header>
        
        <div class="article-entry" itemprop="articleBody">
          
            <h1 id="はじめに"><a href="#はじめに" class="headerlink" title="はじめに"></a>はじめに</h1><p>こんにちは、TIG真野です。<a href="/articles/20210321/">シェルスクリプト連載</a>の2日目です。</p>
<p>シェルスクリプトなのにAWKってちょっと違うんじゃない？って思われる方も多いと思いますが、この連載におけるレギュレーションではsed, AWKもOKという優しいルール故、見逃しください。</p>
<p>この記事ではCSVデータをAWKで処理する例をいくつか紹介します。</p>
<h1 id="awkとは"><a href="#awkとは" class="headerlink" title="awkとは"></a>awkとは</h1><img src="/images/20210330/penguine-4120917_1280.jpg" loading="lazy">

<blockquote>
<p><a target="_blank" rel="noopener" href="https://pixabay.com/ja/users/smartphonecreations2021-11994227/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=4120917">SmartphoneCreations2021</a>による<a target="_blank" rel="noopener" href="https://pixabay.com/ja/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=4120917">Pixabay</a>からの画像</p>
</blockquote>
<p>AWKとはやカンマなどで区切られたテキストデータの処理が得意なスクリプト言語です。awkコマンドはよくawsコマンドとtypoしますが最後はkです。こちらの方が25年くらい歴史があります。</p>
<p>由来はアルフレッド・エイホ、ピーター・ワインバーガー、ブライアン・カーニハンの3人の苗字の頭文で、日本だとオークと呼びます。なんというか由来がレジェンドですね。個人的にはカーニハン先生は<a target="_blank" rel="noopener" href="https://asciidwango.jp/post/155982762075/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E4%BD%9C%E6%B3%95">プログラミング作法</a>で学んだ過去から、先生の敬称必須です。</p>
<p>awkの基本的な構文はパターンとアクションです。<br><code>pattern &#123; action &#125;</code> といった形で、patternが条件、actionが加工処理や表示項目の選択といった指定を行います。</p>
<h1 id="バージョン"><a href="#バージョン" class="headerlink" title="バージョン"></a>バージョン</h1><p>本記事ではGNU Awkの以下のバージョンで動作させました。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ awk -V</span><br><span class="line">GNU Awk 5.0.1, API: 2.0 (GNU MPFR 4.0.2, GNU MP 6.2.0)</span><br></pre></td></tr></table></figure>

<h1 id="使い方例"><a href="#使い方例" class="headerlink" title="使い方例"></a>使い方例</h1><p>では早速AWKでCSVデータを処理していきましょう。</p>
<p>処理対象はフューチャー技術ブログから生成したCSVをサンプルに用います。</p>
<figure class="highlight plain"><figcaption><span>posts.csv</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">title,categories,tags,date,char_count</span><br><span class="line">ごあいさつ,Culture,TechBlog,2016-02-16 09:02:14,691</span><br><span class="line">LT大会（前編）,Culture,LT,2016-02-17 09:09:12,9914</span><br><span class="line">LT大会（後編）,Culture,LT|登壇資料,2016-02-18 11:31:15,13214</span><br><span class="line">Startup_Geeks#1,Culture,Conference|開催レポート,2016-03-23 13:49:26,9404</span><br><span class="line">ハッカソン道中記~あの日入った温泉の効果を僕はまだ知らない~,IoT,IoT|DesignThinking|Hackathon,2016-04-06 14:37:37,9050</span><br><span class="line">第二回LT大会の報告,Culture,LT|登壇資料,2016-04-13 14:37:37,12247</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<ol>
<li><a href="#%E9%A0%85%E7%9B%AE%E3%81%AE%E6%8A%BD%E5%87%BA">項目の抽出</a></li>
<li><a href="#%E6%9C%80%E5%88%9D%E3%81%AE%E8%A1%8C%EF%BC%88CSV%E3%83%98%E3%83%83%E3%83%80%E8%A1%8C%EF%BC%89%E3%82%92%E6%8E%92%E9%99%A4">最初の行（CSVヘッダ行）を排除</a></li>
<li><a href="#%E3%81%82%E3%82%8B%E6%9D%A1%E4%BB%B6%E3%81%AE%E8%A1%8C%E3%81%A0%E3%81%91%E6%8A%BD%E5%87%BA">ある条件の行だけ抽出</a></li>
<li><a href="#%E8%A4%87%E6%95%B0%E3%81%AECSV%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%921%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E7%B5%90%E5%90%88%E3%81%99%E3%82%8B">複数のCSVファイルを1ファイル結合する</a></li>
<li><a href="#%E7%A9%BA%E8%A1%8C%E3%82%92%E9%99%A4%E3%81%8F">空行を除く</a></li>
<li><a href="#CSV%E9%A0%85%E7%9B%AE%E3%81%AE%E4%B8%AD%E3%81%AB%E5%8C%BA%E5%88%87%E3%82%8A%E6%96%87%E5%AD%97%E3%81%8C%E5%85%A5%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8B%E5%A0%B4%E5%90%88">CSV項目の中に区切り文字が入っている場合</a></li>
<li><a href="#%E6%94%B9%E8%A1%8C%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E5%90%AB%E3%82%80%E5%A0%B4%E5%90%88">改行コードを含む場合</a></li>
<li><a href="#0%E5%9F%8B%E3%82%81">0埋め</a></li>
</ol>
<h2 id="項目の抽出"><a href="#項目の抽出" class="headerlink" title="項目の抽出"></a>項目の抽出</h2><p>最初にCSVの1つ目と2つ目の項目を取得します。</p>
<figure class="highlight bash"><figcaption><span>項目の抽出</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ awk -F<span class="string">&#x27;,&#x27;</span> <span class="string">&#x27;&#123;print $1,$2&#125;&#x27;</span> posts.csv | head -n 3</span><br><span class="line">title category</span><br><span class="line">ごあいさつ Culture</span><br><span class="line">LT大会（前編） Culture</span><br></pre></td></tr></table></figure>

<p><code>-F</code>で区切り文字を指定、’{print $1,$2}’ の$1, $2は列番号の指定です。出力時の区切り文字ですが、何も指定しない場合は半角スペースで出力されます。出力後の区切り文字を指定したい場合は、OFS（Output Record Separator）というawk組み込みの変数で指定します。試しに出力区切りを<code>&lt;-------&gt;</code>にします。半角スペースから変わることが確認できます。<code>&lt;-------&gt;</code>を<code>,</code>にすれば出力もCSVにすることができます。</p>
<figure class="highlight sh"><figcaption><span>OFS指定</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ awk -F<span class="string">&#x27;,&#x27;</span> <span class="string">&#x27;OFS=&quot;&lt;-------&gt;&quot; &#123;print $1,$2&#125;&#x27;</span> posts.csv | head -n 3</span><br><span class="line">title&lt;-------&gt;category</span><br><span class="line">ごあいさつ&lt;-------&gt;Culture</span><br><span class="line">LT大会（前編）&lt;-------&gt;Culture</span><br></pre></td></tr></table></figure>

<p>出力項目に <code>$0</code> を指定した場合は全項目をの指定となります。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ awk -F<span class="string">&#x27;,&#x27;</span> <span class="string">&#x27;&#123;print $0&#125;&#x27;</span> posts.csv | head -n 3</span><br><span class="line">title,category,tag,date,char_count</span><br><span class="line">ごあいさつ,Culture,TechBlog,2016-02-16 09:02:14,691</span><br><span class="line">LT大会（前編）,Culture,LT,2016-02-17 09:09:12,9914</span><br></pre></td></tr></table></figure>

<p>項目の抽出ルールは大体抑えられたと思います。</p>
<h2 id="最初の行（CSVヘッダ行）を排除"><a href="#最初の行（CSVヘッダ行）を排除" class="headerlink" title="最初の行（CSVヘッダ行）を排除"></a>最初の行（CSVヘッダ行）を排除</h2><p>CSVを扱うと、最初のヘッダ行を無視して処理したい場合はがあります。その場合はNR（Number of Records）変数で条件指定します。<br><code>NR != 1</code> で1行目以外を出力する条件を追加となります。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ awk -F<span class="string">&#x27;,&#x27;</span> <span class="string">&#x27;NR!=1 &#123;print $0&#125;&#x27;</span> posts.csv | head -n 3</span><br><span class="line">ごあいさつ,Culture,TechBlog,2016-02-16 09:02:14,691</span><br><span class="line">LT大会（前編）,Culture,LT,2016-02-17 09:09:12,9914</span><br><span class="line">LT大会（後編）,Culture,LT|登壇資料,2016-02-18 11:31:15,13214</span><br></pre></td></tr></table></figure>

<p>無事CSVヘッダ行を飛ばすことができました。</p>
<h2 id="ある条件の行だけ抽出"><a href="#ある条件の行だけ抽出" class="headerlink" title="ある条件の行だけ抽出"></a>ある条件の行だけ抽出</h2><p>入力CSVの<code>char_count</code>は記事の文字数です。50,000 文字以上の記事数を抽出します。<br>この場合は <code>$5&gt;50000</code> という条件を先頭に追加します。CSVヘッダを排除する <code>NR != 1</code> と <code>&amp;&amp;</code> で組み合わせると良いでしょう。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ awk -F<span class="string">&#x27;,&#x27;</span> <span class="string">&#x27;NR!=1 &amp;&amp; $5&gt;50000 &#123;print $0&#125;&#x27;</span> posts.csv</span><br><span class="line">title,category,tag,date,char_count</span><br><span class="line">Amazon Redshiftの仕様を調べてみた,Infrastructure,AWS,2019/06/25 09:00:00,66162</span><br><span class="line">Goを学ぶときにつまずきやすいポイントFAQ,Programming,Go|コードレビュー|入門,2019/07/13 10:00,75169</span><br><span class="line">春の入門祭り 🌸 <span class="comment">#01 Goのテストに入門してみよう！,Programming,Go|初心者向け|テスト,2020/06/01 09:41:23,56000</span></span><br></pre></td></tr></table></figure>

<p>フューチャー技術ブログで、5万文字以上の記事が3つもあったことに驚きました。</p>
<h2 id="重複した行を抽出"><a href="#重複した行を抽出" class="headerlink" title="重複した行を抽出"></a>重複した行を抽出</h2><p>CSVである項目が重複していないかチェックしたいとします。</p>
<p>こういった重複行を含んだCSVファイルを作成します。</p>
<figure class="highlight plain"><figcaption><span>duplicated.csv</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">title,category,tag,date,char_count</span><br><span class="line">ごあいさつ,Culture,TechBlog,2016-02-16 09:02:14,691</span><br><span class="line">ハッカソン道中記~あの日入った温泉の効果を僕はまだ知らない~,IoT,IoT|DesignThinking|Hackathon,2016-04-06 14:37:37,9050</span><br><span class="line">ハッカソン道中記~あの日入った温泉の効果を僕はまだ知らない~,Dummy,Dummy,2016-04-07 15:00:00,9050</span><br><span class="line">第二回LT大会の報告,Culture,LT|登壇資料,2016-04-13 14:37:37,12247</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><figcaption><span>重複した行を抽出</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">awk -F<span class="string">&#x27;,&#x27;</span> <span class="string">&#x27;seen[$1]++&#x27;</span> duplicated.csv</span><br><span class="line">ハッカソン道中記~あの日入った温泉の効果を僕はまだ知らない~,Dummy,Dummy,2016-04-07 15:00:00,9050</span><br></pre></td></tr></table></figure>

<p>マジック感がありますが、<code>&#39;seen[$1]++&#39;</code>で重複された行（2つ目）が出力されました。</p>
<ul>
<li>seenは今回定義した連想配列（Map）で、そこに重複をチェックしたい項目を指定します。awkでは変数を初期化する必要が無いです</li>
<li>重複検査対象を、行全体とするのであれば<code>$0</code>です。タイトル項目をチェックするのであれば<code>$1</code>を指定します</li>
<li><code>++</code>はインクリメント演算子で、実行する度に<code>+1</code>されます。操作は変数アクセスされた後に行われます</li>
<li>awkでは、ゼロ以外の数値または空でない文字列値はtrueなので、2回目以降に登場した場合にのみtrueになり、重複行が出力されます。</li>
<li><code>&#123;print $0&#125;</code>部分はまるごと省略も可能。<code>awk -F&#39;,&#39; &#39;seen[$1]++ &#123;print $0&#125;&#39; duplicated.csv</code> と同義</li>
</ul>
<p>逆に重複行を排除（2つ目を削除）したい場合は、 <code>!</code>演算子を追加します。</p>
<figure class="highlight sh"><figcaption><span>重複行を削除</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">awk -F<span class="string">&#x27;,&#x27;</span> <span class="string">&#x27;!seen[$1]++&#x27;</span> duplicated.csv</span><br><span class="line">title,category,tag,date,char_count</span><br><span class="line">ごあいさつ,Culture,TechBlog,2016-02-16 09:02:14,691</span><br><span class="line">ハッカソン道中記~あの日入った温泉の効果を僕はまだ知らない~,IoT,IoT|DesignThinking|Hackathon,2016-04-06 14:37:37,9050</span><br><span class="line">第二回LT大会の報告,Culture,LT|登壇資料,2016-04-13 14:37:37,12247</span><br></pre></td></tr></table></figure>

<p><code>sort</code> と <code>uniq</code> コマンドでも同様の操作は可能ですが、CSVのある項目細かに、条件を組み合わせてを指定する場合はawkも有効だと思います。（もちろん、ファイルをまず <code>sort</code>しなくても済むというメリットもあります）</p>
<h2 id="複数のCSVファイルを1ファイル結合する"><a href="#複数のCSVファイルを1ファイル結合する" class="headerlink" title="複数のCSVファイルを1ファイル結合する"></a>複数のCSVファイルを1ファイル結合する</h2><p>ファイルを単純に結合するのであれば、cat（もとの意味は連結するを意味するconcatenate）を利用することが多いと思いますが、各ファイルにCSVヘッダーがあると、2ファイル名以降のヘッダ行を削除する必要があり厄介です。</p>
<figure class="highlight sh"><figcaption><span>入力データ</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ cat divide1.csv</span><br><span class="line">title,category,tag,date,char_count</span><br><span class="line">ごあいさつ,Culture,TechBlog,2016-02-16 09:02:14,691</span><br><span class="line"></span><br><span class="line">$ cat divide2.csv</span><br><span class="line">title,category,tag,date,char_count</span><br><span class="line">ハッカソン道中記~あの日入った温泉の効果を僕はまだ知らない~,IoT,IoT|DesignThinking|Hackathon,2016-04-06 14:37:37,9050</span><br><span class="line"></span><br><span class="line">$ cat divide3.csv</span><br><span class="line">title,category,tag,date,char_count</span><br><span class="line">第二回LT大会の報告,Culture,LT|登壇資料,2016-04-13 14:37:37,12247</span><br></pre></td></tr></table></figure>

<p>これもawkであればシンプルに処理できます。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">&#x27;NR==1 || FNR!=1&#x27;</span> divide*.csv</span><br><span class="line">title,category,tag,date,char_count</span><br><span class="line">ごあいさつ,Culture,TechBlog,2016-02-16 09:02:14,691</span><br><span class="line">ハッカソン道中記~あの日入った温泉の効果を僕はまだ知らない~,IoT,IoT|DesignThinking|Hackathon,2016-04-06 14:37:37,9050</span><br><span class="line">第二回LT大会の報告,Culture,LT|登壇資料,2016-04-13 14:37:37,12247</span><br></pre></td></tr></table></figure>

<p>こちらも一見マジック感がありますが、内実は簡単です。 <code>NR</code>は Number of Recordsのことで、全体を通しての連番です。FNRはFile単位の連番です。<br><code>NR==1</code> が全体を通して1行目であるCSVヘッダ行のこと、<code>FNR=!1</code>が <strong>各ファイルの1行目であるCSVヘッダ以外</strong> であることを示します。<br><code>NR==1 || FNR!=1</code> のOR条件で、最初のCSVヘッダ1行目であるか、各ファイルの1行目でないの場合に出力するという条件になります。</p>
<p>複数ファイルをawkで扱うと、<code>FNR</code> は割と便利なので存在を覚えておくと便利かもしれません。</p>
<h1 id="空行を除く"><a href="#空行を除く" class="headerlink" title="空行を除く"></a>空行を除く</h1><p><code>grep -v &#39;^$&#39;</code> で瞬殺な気がしますが、awkでも空行を除外したい場合があります。理由は他の抽出処理と組み合わせる時に必要になることもあるためです。</p>
<p>こういった空行を含むデータを用意します。</p>
<figure class="highlight sh"><figcaption><span>emptyline.csv</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ cat emptyline.csv</span><br><span class="line">title,category,tag,date,char_count</span><br><span class="line">ごあいさつ,Culture,TechBlog,2016-02-16 09:02:14,691</span><br><span class="line">ハッカソン道中記~あの日入った温泉の効果を僕はまだ知らない~,IoT,IoT|DesignThinking|Hackathon,2016-04-06 14:37:37,9050</span><br><span class="line"></span><br><span class="line">第二回LT大会の報告,Culture,LT|登壇資料,2016-04-13 14:37:37,12247</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">&#x27;NF&#x27;</span> emptyline.csv</span><br><span class="line">title,category,tag,date,char_count</span><br><span class="line">ごあいさつ,Culture,TechBlog,2016-02-16 09:02:14,691</span><br><span class="line">ハッカソン道中記~あの日入った温泉の効果を僕はまだ知らない~,IoT,IoT|DesignThinking|Hackathon,2016-04-06 14:37:37,9050</span><br><span class="line">第二回LT大会の報告,Culture,LT|登壇資料,2016-04-13 14:37:37,12247</span><br></pre></td></tr></table></figure>

<p><code>&#39;NF&#39;</code>だけで空行を排除できました</p>
<ul>
<li><code>NF</code>は今回初めて登場しましたが、Number of Fieldsの略です</li>
<li>空行の場合は、フィールド数が0なこと。またawkでは0の判定結果がfalseになります。</li>
<li><code>&#123;print $0&#125;</code> は省略可能なためです</li>
</ul>
<p>一応同じ意味のコマンドもあげておきます。</p>
<figure class="highlight sh"><figcaption><span>同義なコマンド</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">&#x27;NF!=0&#x27;</span> emptyline.csv</span><br><span class="line">$ awk <span class="string">&#x27;NF!=0&#123;print $0&#125;&#x27;</span> emptyline.csv</span><br><span class="line">$ awk <span class="string">&#x27;$0!=&quot;&quot;&#x27;</span> emptyline.csv</span><br></pre></td></tr></table></figure>

<h1 id="CSV項目の中に区切り文字が入っている場合"><a href="#CSV項目の中に区切り文字が入っている場合" class="headerlink" title="CSV項目の中に区切り文字が入っている場合"></a>CSV項目の中に区切り文字が入っている場合</h1><p>CSVは項目の中に区切り文字を含んでいる（区切り文字がカンマの場合、項目中にカンマがある）場合、囲い文字（クォート）でラップするのがRFC 4180などで定義されています。awkでこういった項目中に区切り文字を含んでいる場合はどうすればよいでしょうか？</p>
<p>例えば、<a href="/articles/20200401/">Vue.js最初の難関、「props down, event up」を初心者にわかるように解説してみた</a> という記事は、以下のようにタイトルの中身で分割されてしまいます。</p>
<figure class="highlight sh"><figcaption><span>カンマをタイトルに持つ行</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ awk -F<span class="string">&#x27;,&#x27;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> posts.csv | grep Vue.js最初の</span><br><span class="line"><span class="string">&quot;Vue.js最初の難関、「props down</span></span><br></pre></td></tr></table></figure>

<p>コレを回避するには組み込み変数のFPAT（Fields PATtern）を使います。</p>
<figure class="highlight sh"><figcaption><span>FPAT導入例</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ awk -v FPAT=<span class="string">&#x27;([^,]+)|(\&quot;[^\&quot;]+\&quot;)&#x27;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> posts.csv | grep Vue.js最初の難</span><br><span class="line"><span class="string">&quot;Vue.js最初の難関、「props down, event up」を初心者にわかるように解説してみた&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>-v</code>はawkへの変数受け渡しようのオプションです。今回はFPATの変数を渡します</li>
<li><code>FPAT</code> はawk組み込み関数なので <code>-v</code> で書き換えると、項目分割に影響を与えることができます</li>
<li><code>([^,]+)|(\&quot;[^\&quot;]+\&quot;)</code>は正規表現で、 <code>[^,]+</code>でカンマを除くという意味。<code>(\&quot;[^\&quot;]+\&quot;)</code>でダブルクォートで囲まれていて内部にダブルクォートを含まないという意味です。 <code>|</code> でOR条件になります</li>
<li><code>FPAT</code>を渡す場合は、<code>-F</code> の区切り文字指定は不要です</li>
</ul>
<p>これで、項目中のカンマに対応することができました。ちなみに、RFC4180の仕様では、クォートで囲まれた場合で、項目の中身にクォートがある場合、二重クォートでエスケープ（<code>&quot;&quot;</code>）するというルールがあります。この場合はうまく動きません。</p>
<figure class="highlight sh"><figcaption><span>FPATでもうまく動かないケース</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ cat quote.csv</span><br><span class="line">title,category,tag,date,char_count</span><br><span class="line"><span class="string">&quot;テキスト処理 &quot;</span><span class="string">&quot;sed&quot;</span><span class="string">&quot;, &quot;</span><span class="string">&quot;awk&quot;</span><span class="string">&quot; の入門&quot;</span>,Test,Test,2021-03-28 09:02:14,691</span><br><span class="line"></span><br><span class="line">$ awk -v FPAT=<span class="string">&#x27;([^,]+)|(\&quot;[^\&quot;]+\&quot;)&#x27;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> quote.csv</span><br><span class="line">title</span><br><span class="line"><span class="string">&quot;テキスト処理 &quot;</span><span class="string">&quot;sed&quot;</span><span class="string">&quot;</span></span><br></pre></td></tr></table></figure>

<p>正規表現でガンバることも可能かもしれませんが、この場合は次で説明するcsvkitなどの活用を考えたほうが良いかもしれません。</p>
<h1 id="改行コードを含む場合"><a href="#改行コードを含む場合" class="headerlink" title="改行コードを含む場合"></a>改行コードを含む場合</h1><p>先程説明した、FPATでも改行コードを含んでいる場合はうまく処理ができません。もし対応する必要がある場合は<a target="_blank" rel="noopener" href="https://csvkit.readthedocs.io/en/latest/">csvkit</a>のようなコマンドをインストールするか、各言語のCSVパーサーを利用することを推奨します。</p>
<p>例えばGo言語だと標準でRFC 4180に対応したパッケージを用意してくれているので簡単に対応できます。</p>
<h1 id="0埋め"><a href="#0埋め" class="headerlink" title="0埋め"></a>0埋め</h1><p>awkでは、フォーマット付きの<code>printf</code>が利用できます。例えば3桁までの0埋めの場合は<code>%03d</code>を利用します。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ awk -v FPAT=<span class="string">&#x27;([^,]+)|(\&quot;[^\&quot;]+\&quot;)&#x27;</span> <span class="string">&#x27;&#123;printf(&quot;%03d %s\n&quot;, NR, $1)&#125;&#x27;</span> posts.csv | head -n 3</span><br><span class="line">001 title</span><br><span class="line">002 ごあいさつ</span><br><span class="line">003 LT大会前編</span><br></pre></td></tr></table></figure>

<p>GNU AWKのフォーマット記述は<a target="_blank" rel="noopener" href="https://www.gnu.org/software/gawk/manual/html_node/Format-Modifiers.html">こちら</a>を参考ください。</p>
<h1 id="csvqで良いのでは？"><a href="#csvqで良いのでは？" class="headerlink" title="csvqで良いのでは？"></a>csvqで良いのでは？</h1><p>CSVファイルに対しての高度な抽出条件や、集計処理に関してはCSVファイルに対してSQLを実行できる <code>csvq</code> を使うのも有効だと思います。</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/mithrandie/csvq">https://github.com/mithrandie/csvq</a></p>
</blockquote>
<p>例えば、文字数50,000を超える記事は以下のようにSQLに慣れた人なら一瞬で理解できる構文で取得可能です。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ csvq <span class="string">&#x27;select title from posts where char_count &gt; 50000&#x27;</span></span><br><span class="line">+---------------------------------------------------+</span><br><span class="line">|                       title                       |</span><br><span class="line">+---------------------------------------------------+</span><br><span class="line">| Amazon Redshiftの仕様を調べてみた                 |</span><br><span class="line">| Goを学ぶときにつまずきやすいポイントFAQ           |</span><br><span class="line">| 春の入門祭り 🌸 <span class="comment">#01 Goのテストに入門してみよう！  |</span></span><br><span class="line">+---------------------------------------------------+</span><br></pre></td></tr></table></figure>

<p>一方で、空行を含んだCSVファイルには脆弱な部分があります。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ csvq <span class="string">&#x27;select title from emptyline where char_count &gt; 50000&#x27;</span></span><br><span class="line">Empty RecordSet</span><br></pre></td></tr></table></figure>

<p>そのため、データ分析の前処理などにawkを活用すると良い使い分けになると思います。</p>
<h1 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h1><p>いざという時に覚えておくと便利なawkのTipsでした。awscliのawsコマンドと間違えちゃう人も安心です。</p>
<ul>
<li>awkは簡単な記述によって強力な結果を生み出すことができる</li>
<li>sedやgrepなどと合わせてawkを使えるようになると、あまり行儀が良くないCSVに対するデータクレンジングに便利</li>
<li>集計などの分析は必要に応じて<code>csvq</code>などと使い、awkは前処理に用いるなど使い分けが大事</li>
</ul>
<p>明日は中本光さんの<a href="/articles/20210331/">今さらながらfindパイセンについてまとめてみた</a>についてです。</p>
<h1 id="補足"><a href="#補足" class="headerlink" title="補足"></a>補足</h1><p>同じようなテキスト処理であるgrepや、git grep について懇切丁寧に説明した記事です、すごいです。</p>
<div class="iframely-embed"><div class="iframely-responsive" style="height: 140px; padding-bottom: 0;"><a href="https://future-architect.github.io/articles/20200611/index.html" data-iframely-url="//cdn.iframe.ly/kvSOFUK?iframe=card-small"></a></div></div><script async src="//cdn.iframe.ly/embed.js" charset="utf-8"></script>

          
        </div>
        <footer>
          <section class="social-area">
          <!-- シェアボタン START -->
  <ul class="social-button">
    
    <!-- Twitter -->
    <li class="twitter-btn">
      <a target="_blank" href="https://twitter.com/share?url=https://future-architect.github.io/articles/20210330/&via=future_techblog&related=twitterapi%2Ctwitter&text=CSV%E3%81%A8%E8%A6%AA%E3%81%97%E3%81%8F%E3%81%AA%E3%82%8BAWK%E8%A1%93" rel="nofollow noopener">
        <i></i><span class="tw-btn-label">ツイート</span>
      </a>
    </li>
    <!-- Facebook -->
    <li class="fb-btn">
      <a target="_blank" href="http://www.facebook.com/share.php?u=https://future-architect.github.io/articles/20210330/&t=CSV%E3%81%A8%E8%A6%AA%E3%81%97%E3%81%8F%E3%81%AA%E3%82%8BAWK%E8%A1%93" rel="nofollow noopener">
        <i></i><span class="fb-btn-label">シェア</span>
      </a>
    </li>
    <!-- hatebu -->
    <li class="hatebu-btn">
      <a target="_blank" href="https://b.hatena.ne.jp/entry/s/future-architect.github.io/articles/20210330/" rel="nofollow noopener">
        <i></i><span class="hatebu-btn-label">1</span>
      </a>
    </li>
    <!-- pocket -->
    <li class="pocket-btn">
      <a target="_blank" href="https://getpocket.com/save?url=https://future-architect.github.io/articles/20210330/" rel="nofollow noopener">
        <i></i><span class="pocket-btn-label">4</span>
      </a>
    </li>
  </ul>
<!-- シェアボタン END -->

          </section>
          <aside>
            <section class="related-post margin-bottom-20 nav">
              <h2>関連記事</h2>
              
  <div class="widget">
    <ul class="nav related-posts"><li class="related-posts-item"><span>2021.03.21</span><a class="related-posts-link" href=/articles/20210321/>シェルスクリプトとLinuxコマンド連載を初めます</a></li><li class="related-posts-item"><span>2021.05.24</span><a class="related-posts-link" href=/articles/20210524a/>ユーザーストーリーマッピングで始める要求整理</a></li><li class="related-posts-item"><span>2021.05.18</span><a class="related-posts-link" href=/articles/20210518a/>HTTP検索条件、GETにするか？POSTにするか？</a></li><li class="related-posts-item"><span>2021.05.14</span><a class="related-posts-link" href=/articles/20210514a/>Flutterで技術ブログRSSリーダー</a></li></ul>
  </div>
            </section>
            <section class="featured-post margin-bottom-20 nav">
              <h2>注目の記事</h2>
              <!-- BEGIN FEATURED POSTS -->
<div class="widget-wrap">
  
  <div class="widget">
    <ul class="nav featured-post-link">
      
    <li><span>2021.05.25</span><span class="snscount">&#9825;0</span> <a href="/articles/20210525a/" title="Goで構造体を設計する場合、オブジェクト指向的な「型ごとの責務の分担」以外に、「どのように使われるものか」を考える必要があります。 ポインタで扱うのか？値として扱うのか？両方許可するのか？値として扱える場合にimmutable（変更不可能）なオブジェクトとするのか...">Goの構造体の使われ方の設計</a></li>

    <li><span>2021.05.24</span><span class="snscount">&#9825;12</span> <a href="/articles/20210524a/" title="ユーザーストーリーマップがあると、全体像の認識をチーム全体で共有できて便利です。ユーザーストーリーマップは視覚的にわかりやすく、特殊な構造もしていないため共通理解しやすいことがポイントです。また、ユーザーストーリーマップはこれから何を作ろうかという要求定義の段階でも有効に感じます。この記事では要求の整理と理解のためにユーザーストーリーマップを使ってみたときの気がついた点や振り返りをまとめました">ユーザーストーリーマッピングで始める要求整理</a></li>

    <li><span>2020.07.09</span><span class="snscount">&#9825;649</span> <a href="/articles/20200709/" title="最近Goで主にバックエンドのWebAPIや、AWS Lambdaで動くETLアプリ、たまにCLIツールを開発する時に、2回以上同じ指摘したコメントをまとめてます。Go言語特有ぽいところを中心にしています。レビュイーのスキルセットは..">GoでWebアプリ開発時にあるあるだったレビューコメント</a></li>

    <li><span>2020.06.09</span><span class="snscount">&#9825;136</span> <a href="/articles/20200609/" title="フューチャーではGraphQLの活用事例はまだ少なく、自分はまだお目にかかったことはないです。しかし、HeadlessCMS界隈を初めGraphQLのAPIを提供するサービスが増えてきました。今後もさらに需要が増えてきそうな予感がしたためGoとGraphQLを春の入門祭りのテーマにしました。学習する上でドキュメントを読み込むだけでは忘れがちです。手を動かしながらタイトルにある鉄道データ検索APIを開発していきましょう">作って学ぶGraphQL。gqlgenを用いて鉄道データ検索API開発入門</a></li>
    </ul>
  </div>
  
</div>
<!-- END FEATURED POSTS -->

            </section>
          </aside>
        </footer>
      </div>
    </article>
  </main>
  <aside class="col-md-3 col-sm-3 blog-sidebar">
    <!-- START SIDEBAR  -->
<h2 class="margin-top-30">カテゴリー</h2>

<div class="widget-wrap">
  <div class="widget">
    <ul class="nav sidebar-categories margin-bottom-40">
    
      <li><a href="/categories/Culture/">Culture (53)</a></li>
    
      <li><a href="/categories/IoT/">IoT (15)</a></li>
    
      <li><a href="/categories/VR/">VR (10)</a></li>
    
      <li><a href="/categories/Security/">Security (2)</a></li>
    
      <li><a href="/categories/Design/">Design (7)</a></li>
    
      <li><a href="/categories/Programming/">Programming (168)</a></li>
    
      <li><a href="/categories/Management/">Management (9)</a></li>
    
      <li><a href="/categories/Infrastructure/">Infrastructure (132)</a></li>
    
      <li><a href="/categories/DB/">DB (14)</a></li>
    
      <li><a href="/categories/DataScience/">DataScience (31)</a></li>
    
      <li><a href="/categories/CI-CD/">CI/CD (4)</a></li>
    
      <li><a href="/categories/%E8%AA%8D%E8%A8%BC%E8%AA%8D%E5%8F%AF/">認証認可 (6)</a></li>
    
      <li><a href="/categories/Business/">Business (4)</a></li>
    
    </ul>
  </div>
</div>


<h2 class="margin-top-30">リンク</h2>
<div class="widget-wrap">
  <div class="widget">
    <ul class="nav">
      <li><a href="https://anchor.fm/futuretechcast" title="フューチャーグループの技術について深堀りするPodcastです" target="_blank" rel="noopener">ポッドキャスト</a></li>
      <li><a href="https://future.connpass.com/" title="経営とITをデザインするフューチャーの勉強会です" target="_blank" rel="noopener">勉強会Connpass</a></li>
      <li><a href="https://github.com/future-architect" title="Future's official open source repositories" target="_blank" rel="noopener">GitHub</a></li>
      <li><a href="https://note.future.co.jp/" title="フューチャーの公式note" target="_blank" rel="noopener">未来報</a></li>
      <li><a href="https://future-fintech.github.io/" title="Future Fintech EyE - 金融の未来を語るブログ" target="_blank" rel="noopener">Future Fintech EYE</a></li>
    </ul>
  </div>
</div>

<h2 class="margin-top-30">アドベントカレンダー</h2>
<div class="widget-wrap">
  <div class="widget">
    <ul class="nav">
      <li><a href="http://qiita.com/advent-calendar/2020/future" title="フューチャー Advent Calendar 2020 #Qiita" target="_blank" rel="noopener">2020年</a></li>
      <li><a href="http://qiita.com/advent-calendar/2019/future" title="フューチャー Advent Calendar 2019 #Qiita" target="_blank" rel="noopener">2019年</a></li>
      <li><a href="http://qiita.com/advent-calendar/2018/future" title="フューチャー Advent Calendar 2018 #Qiita" target="_blank" rel="noopener">2018年</a></li>
      <li><a href="http://qiita.com/advent-calendar/2017/future" title="フューチャー Advent Calendar 2017 #Qiita" target="_blank" rel="noopener">2017年</a></li>
      <li><a href="http://qiita.com/advent-calendar/2016/future" title="フューチャー Advent Calendar 2016 #Qiita" target="_blank" rel="noopener">2016年</a></li>
      <li><a href="http://qiita.com/advent-calendar/2015/future" title="フューチャー Advent Calendar 2015 #Qiita" target="_blank" rel="noopener">2015年</a></li>
    </ul>
  </div>
</div>

<!-- END SIDEBAR -->

  </aside>
</div>

  </section>
</div>

      <!-- BEGIN PRE-FOOTER -->
    <footer>
      <div class="pre-footer">
        <div class="container">
          <div class="row">
            <!-- BEGIN BOTTOM ABOUT BLOCK -->
            <div class="col-md-4 col-sm-6 pre-footer-col">
              <h2>About Us</h2>
              <p>経営とITをデザインする、フューチャーの技術ブログです。業務で利用している幅広い技術について紹介します。記事についてのお問い合わせはTwitterのDMで連絡いただけると幸いです。<br /><br /><a target="_blank" rel="noopener" href="http://www.future.co.jp/">http://www.future.co.jp/</a></p>
            </div>
            <!-- END BOTTOM ABOUT BLOCK -->
            <!-- BEGIN BOTTOM CONTACTS -->
            <div class="col-md-4 col-sm-6 pre-footer-col">
              <h2>Contact</h2>
              <address class="margin-bottom-40">
                東京都品川区大崎1-2-2<br>
                アートヴィレッジ大崎セントラルタワー<br><br>
                Email: <a href="mailto:techblog@future.co.jp">techblog@future.co.jp</a><br>
              </address>
            </div>
            <!-- END BOTTOM CONTACTS -->
            <!-- Twitter Share. ページ毎に1度初期化できれば良い -->
            <script>window.twttr = (function(d, s, id) {
              var js, fjs = d.getElementsByTagName(s)[0], t = window.twttr || {};
              if (d.getElementById(id)) return t;
              js = d.createElement(s);
              js.id = id;
              js.src = "https://platform.twitter.com/widgets.js";
              fjs.parentNode.insertBefore(js, fjs);
              t._e = [];
              t.ready = function(f) {
                t._e.push(f);
              };
              return t;
            }(document, "script", "twitter-wjs"));</script>
            
              <!-- BEGIN TWITTER BLOCK -->
              <div class="col-md-4 col-sm-6 pre-footer-col">
                <!-- Twitterフォローボタン -->
                <div class="twitter-btn twitter-follow-btn">
                  <a href="https://twitter.com/intent/follow?screen_name=future_techblog " target="_blank" rel="nofollow noopener">
                    <i></i><span class="tw-btn-label">@future_techblogさんをフォロー</span>
                  </a>
                </div>
                <!-- Twitterタイムライン -->
                <a data-tweet-limit="1" class="twitter-timeline" target="_blank" rel="noopener" href="https://twitter.com/future_techblog?ref_src=twsrc%5Etfw" data-lang="ja" data-dnt="true">Tweets by @future_techblog</a>
              </div>
              <!-- END TWITTER BLOCK -->
            
          </div>
        </div>
      </div>
      <!-- END PRE-FOOTER -->
      <!-- BEGIN FOOTER -->
      <div class="footer">
        <div class="container">
          <div class="row">
            <!-- BEGIN COPYRIGHT -->
            <div class="col-md-6 col-sm-6 padding-top-10">
              &copy; 2021 フューチャー技術ブログ<br>
            </div>
          </div>
        </div>
      </div>
    </footer>
    <!-- END FOOTER -->

  <!-- START INTEGRATIONS -->

<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-74047147-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->


<!-- END INTEGRATIONS -->

  </div>
</body>
</html>
