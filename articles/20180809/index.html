<!DOCTYPE html>
<!--[if IE 8]> <html lang="ja" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="ja" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="ja">
<!--<![endif]-->
<head>
  <meta charset="utf-8">
  <!--
    ███████╗██╗░░░██╗████████╗██╗░░░██╗██████╗░███████╗
    ██╔════╝██║░░░██║╚══██╔══╝██║░░░██║██╔══██╗██╔════╝
    █████╗░░██║░░░██║░░░██║░░░██║░░░██║██████╔╝█████╗░░
    ██╔══╝░░██║░░░██║░░░██║░░░██║░░░██║██╔══██╗██╔══╝░░
    ██║░░░░░╚██████╔╝░░░██║░░░╚██████╔╝██║░░██║███████╗
    ╚═╝░░░░░░╚═════╝░░░░╚═╝░░░░╚═════╝░╚═╝░░╚═╝╚══════╝
    ████████╗███████╗░█████╗░██╗░░██╗
    ╚══██╔══╝██╔════╝██╔══██╗██║░░██║
    ░░░██║░░░█████╗░░██║░░╚═╝███████║
    ░░░██║░░░██╔══╝░░██║░░██╗██╔══██║
    ░░░██║░░░███████╗╚█████╔╝██║░░██║
    ░░░╚═╝░░░╚══════╝░╚════╝░╚═╝░░╚═╝
    ██████╗░██╗░░░░░░█████╗░░██████╗░
    ██╔══██╗██║░░░░░██╔══██╗██╔════╝░
    ██████╦╝██║░░░░░██║░░██║██║░░██╗░
    ██╔══██╗██║░░░░░██║░░██║██║░░╚██╗
    ██████╦╝███████╗╚█████╔╝╚██████╔╝
    ╚═════╝░╚══════╝░╚════╝░░╚═════╝░
    Welcome engineer.
    https://www.future.co.jp/recruit/
  -->
  
  <title>データベースマイグレーション ～OracleからPostgreSQLへ～　−第２回ー | フューチャー技術ブログ</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  
  <meta name="description" content="1. 初めにこんにちは。Technology Innovation Groupの岸田です。 前回に引き続き、データベースのマイグレーションがテーマです。第1回目はデータベースマイグレーションについて流れやポイントとなる点について記載してきました。  データベースマイグレーション ～OracleからPostgreSQLへ～　ー第１回ー  第2回目は以下3点について紹介します。  移行支援ツールの紹介">
<meta property="og:type" content="article">
<meta property="og:title" content="データベースマイグレーション ～OracleからPostgreSQLへ～　−第２回ー | フューチャー技術ブログ">
<meta property="og:url" content="https://future-architect.github.io/articles/20180809/index.html">
<meta property="og:site_name" content="フューチャー技術ブログ">
<meta property="og:description" content="1. 初めにこんにちは。Technology Innovation Groupの岸田です。 前回に引き続き、データベースのマイグレーションがテーマです。第1回目はデータベースマイグレーションについて流れやポイントとなる点について記載してきました。  データベースマイグレーション ～OracleからPostgreSQLへ～　ー第１回ー  第2回目は以下3点について紹介します。  移行支援ツールの紹介">
<meta property="og:locale" content="ja_JP">
<meta property="og:image" content="https://future-architect.github.io/images/20180809/ora2pg_report.png">
<meta property="og:image" content="https://future-architect.github.io/images/20180809/AWS-SCT_user_report.png">
<meta property="og:image" content="https://future-architect.github.io/images/20180809/AWS-SCT_object_report.png">
<meta property="og:image" content="https://future-architect.github.io/images/20180809/AWS-SCT_sql_report.png">
<meta property="og:image" content="https://future-architect.github.io/images/20180809/AWS-SCT_sql_conv.png">
<meta property="og:image" content="https://future-architect.github.io/images/20180809/AWS-SCT_sql_conv_detail.png">
<meta property="og:image" content="https://future-architect.github.io/images/20180809/AWS-SCT_sql_conv_summary2.png">
<meta property="article:published_time" content="2018-08-09T06:00:36.000Z">
<meta property="article:modified_time" content="2021-05-23T02:50:41.588Z">
<meta property="article:tag" content="Oracle">
<meta property="article:tag" content="DB移行">
<meta property="article:tag" content="PostgreSQL">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://future-architect.github.io/images/20180809/ora2pg_report.png">
  
  <link rel="alternate" href="/atom.xml" title="フューチャー技術ブログ" type="application/atom+xml">
  
  
  <link rel="icon" href="/favicon.ico">
  
  <link rel="canonical" href="https://future-architect.github.io/articles/20180809/">
  <meta content="Oracle,DB移行,PostgreSQL" name="keywords">
  <meta content="岸田聡" name="author">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha384-pdapHxIh7EYuwy6K7iE41uXVxGCXY0sAjBzaElYGJUrzwodck3Lx6IE2lA0rFREo" crossorigin="anonymous">
  <link rel="stylesheet" href="/metronic/assets/style.css">
  <link rel="stylesheet" href="/css/theme-styles.css">
<meta name="generator" content="Hexo 5.4.0"></head>

<body class="corporate">
  <div class="wrap" itemscope itemtype="https://schema.org/TechArticle">
  <!-- BEGIN HEADER -->
<header class="header">
	<div class="header-overlay">
		<div class="header-menu"></div>
		<div class="header-title"><a href="/">Future Tech Blog</a></div>
		<div class="header-title-sub">フューチャー技術ブログ</div>
	</div>
</header>
<!-- Header END -->

  <div class="container">
  <ul class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/articles/">Blog</a></li>
    <li class="active">Post</li>
  </ul>
  <section id="main">
    
  <h2 itemprop="name">
    <a class="article-title" href="/articles/20180809/">データベースマイグレーション ～OracleからPostgreSQLへ～　−第２回ー</a>
  </h2>


    <div class="row">
  <main class="col-md-9 col-sm-9 blog-posts">
    <article id="post-20180809-dbmigration2" class="article article-type-post blog-item" itemscope itemprop="blogPost">
      <div class="article-inner">
        
        <header class="article-header">
          <ul class="blog-info">
            <li class="blog-info-item"><li><a href="/authors/%E5%B2%B8%E7%94%B0%E8%81%A1">岸田聡</a></li></li>
            <li class="blog-info-item"><a href="/articles/2018/"><time datetime="2018-08-09T06:00:36.000Z" itemprop="datePublished">2018.08.09</time></a>
</li>
            <li class="blog-info-item">
  <ul>
  
    <li><a href="/tags/Oracle/" title="Oracle">Oracle</a></li> 
  
    <li><a href="/tags/DB%E7%A7%BB%E8%A1%8C/" title="DB移行">DB移行</a></li> 
  
    <li><a href="/tags/PostgreSQL/" title="PostgreSQL">PostgreSQL</a>
  
  </ul>

</li>
          </ul>
          
  <div class="article-category">
    
    Category:
    
    <a class="article-category-link" href="/categories/DB/">DB</a>
  </div>


        </header>
        
        <div class="article-entry" itemprop="articleBody">
          
            <h2 id="1-初めに"><a href="#1-初めに" class="headerlink" title="1. 初めに"></a>1. 初めに</h2><p>こんにちは。Technology Innovation Groupの岸田です。</p>
<p>前回に引き続き、データベースのマイグレーションがテーマです。<br>第1回目はデータベースマイグレーションについて流れやポイントとなる点について記載してきました。</p>
<ul>
<li><a href="/articles/20180529/">データベースマイグレーション ～OracleからPostgreSQLへ～　ー第１回ー</a></li>
</ul>
<p>第2回目は以下3点について紹介します。</p>
<ul>
<li>移行支援ツールの紹介</li>
<li>実際にシステムで稼働しているデータベース環境とアプリケーション（SQL）を使った評価</li>
<li>データベースマイグレーションの検討の方針</li>
</ul>
<h2 id="2-移行支援ツール"><a href="#2-移行支援ツール" class="headerlink" title="2. 移行支援ツール"></a>2. 移行支援ツール</h2><p>データベースのマイグレーションに際しては、移行ツールがいくつか公開されているため、それを利用するのが良いでしょう。このようなツールを利用してマイグレーションの作業量を削減していくことになります。</p>
<table>
<thead>
<tr>
<th>#</th>
<th>ツール名称</th>
<th>説明</th>
<th>参照先</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>ora2pg</td>
<td>GPLにもとづくオープンソースフリーソフトウェア</td>
<td><a target="_blank" rel="noopener" href="http://ora2pg.darold.net/">ora2pgのHP</a></td>
</tr>
<tr>
<td>2</td>
<td>AWS Schema Conversion Tool</td>
<td>AWSにて公開のツール</td>
<td><a target="_blank" rel="noopener" href="https://docs.aws.amazon.com/ja_jp/SchemaConversionTool/latest/userguide/CHAP_Welcome.html">AWS Schema Conversion Tool</a></td>
</tr>
</tbody></table>
<p>簡単ではありますが、2つの移行ツール(ora2pg/AWS Schema Conversion Tool)について紹介します。<br>移行ツールは現利用環境のデータベース定義を別環境に再現（ライセンスに注意！）し、再現環境に接続してツールを実行します。<br>もちろん、現利用環境に直接接続できる場合は別環境を用意する必要はございません。</p>
<h3 id="2-1-ora2pg"><a href="#2-1-ora2pg" class="headerlink" title="2-1 ora2pg"></a>2-1 ora2pg</h3><p>ora2pgはOracle/MySQLからPostgreSQLへの移行を支援するツールです。動作環境はLinuxとなります。</p>
<h4 id="できること"><a href="#できること" class="headerlink" title="できること"></a>できること</h4><p>ora2pgでは以下を行うことが可能です。</p>
<ul>
<li>スキーマ定義のコンバージョン用DDLの作成<ul>
<li>接続した環境からOracleデータベースにあるオブジェクト定義からPostgreSQLで実行可能なDDLの出力</li>
</ul>
</li>
<li>スキーマコンバージョンのレポート出力<ul>
<li>PostgreSQLに変換する際の評価レポート</li>
</ul>
</li>
<li>データ移行SQLの作成<ul>
<li>PostgreSQLで実行可能なINSERT文またはCOPY文の形式によるDMLの出力</li>
</ul>
</li>
<li>SQLファイルのコンバージョン</li>
</ul>
<p>ora2pgの具体的な利用方法は<a target="_blank" rel="noopener" href="https://ora2pg.darold.net/documentation.html">こちら</a>を参照してください。<br>参考までに、本ブログではora2pgはバージョン18.2を利用して確認しております。</p>
<p>コンバージョンの実行は、confファイル内で<code>TYPE</code>句にて指定し、個々に確認していきます。インストール時に用意されているconfファイル内にTYPEで指定できるキーワードが記載されております。（SYNONYMとDBLINKは記載がありませんが、指定が可能です。）<br>TYPEで指定できるキーワードとしては大きく3つの種類に分けられます。</p>
<table>
<thead>
<tr>
<th align="left">種別</th>
<th align="left">キーワード</th>
<th align="left">説明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">オブジェクト</td>
<td align="left">TABLE</td>
<td align="left">テーブル、インデックス、制約等のテーブルに関連するオブジェクト</td>
</tr>
<tr>
<td align="left">オブジェクト</td>
<td align="left">PACKAGE</td>
<td align="left">パッケージ ⇒ シノニム＋ファンクションに変換</td>
</tr>
<tr>
<td align="left">オブジェクト</td>
<td align="left">VIEW</td>
<td align="left">ビュー</td>
</tr>
<tr>
<td align="left">オブジェクト</td>
<td align="left">GRANT</td>
<td align="left">オブジェクトの権限</td>
</tr>
<tr>
<td align="left">オブジェクト</td>
<td align="left">SEQUENCE</td>
<td align="left">順序</td>
</tr>
<tr>
<td align="left">オブジェクト</td>
<td align="left">TRIGGER</td>
<td align="left">トリガー</td>
</tr>
<tr>
<td align="left">オブジェクト</td>
<td align="left">FUNCTION</td>
<td align="left">ファンクション</td>
</tr>
<tr>
<td align="left">オブジェクト</td>
<td align="left">PROCEDURE</td>
<td align="left">プロシージャ ⇒ ファンクションに変換</td>
</tr>
<tr>
<td align="left">オブジェクト</td>
<td align="left">TABLESPACE</td>
<td align="left">表領域</td>
</tr>
<tr>
<td align="left">オブジェクト</td>
<td align="left">TYPE</td>
<td align="left">タイプ</td>
</tr>
<tr>
<td align="left">オブジェクト</td>
<td align="left">PARTITION</td>
<td align="left">パーティション表 ⇒ 親子型のパーティション表に変換</td>
</tr>
<tr>
<td align="left">オブジェクト</td>
<td align="left">FDW</td>
<td align="left">外部表</td>
</tr>
<tr>
<td align="left">オブジェクト</td>
<td align="left">MVIEW</td>
<td align="left">マテリアライズド・ビュー</td>
</tr>
<tr>
<td align="left">オブジェクト</td>
<td align="left">KETTLE</td>
<td align="left">XMLテンプレート</td>
</tr>
<tr>
<td align="left">オブジェクト</td>
<td align="left">SYNONYM</td>
<td align="left">シノニム</td>
</tr>
<tr>
<td align="left">オブジェクト</td>
<td align="left">DBLINK</td>
<td align="left">データベース・リンク</td>
</tr>
<tr>
<td align="left">データ</td>
<td align="left">INSERT</td>
<td align="left">データ登録DML（INSERT形式）</td>
</tr>
<tr>
<td align="left">データ</td>
<td align="left">COPY</td>
<td align="left">データ登録DML（COPY形式）</td>
</tr>
<tr>
<td align="left">SQL</td>
<td align="left">QUERY</td>
<td align="left">SQL文の変換</td>
</tr>
</tbody></table>
<p>スキーマコンバージョンのレポートは以下のようなコマンドとなります。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;usr&#x2F;local&#x2F;bin&#x2F;ora2pg -c &#x2F;etc&#x2F;ora2pg&#x2F;ora2pg.conf -t SHOW_REPORT --estimate_cost --dump_as_html &gt; report.html</span><br></pre></td></tr></table></figure>

<p>レポートの出力結果例は以下です。</p>
<img src="/images/20180809/ora2pg_report.png" loading="lazy">


<p>ora2pgのSQLの変換については、ファイル単位にコンバートしていくため、各SQLファイルに対してora2pgを実行する必要があります。多少手間ではありますが、シェルを組んでディレクトリ内のファイル（例えば拡張子がsqlのものとか）に対してora2pgを実行することになるでしょう。また、コンバートできないものについてはエラーが出力されることなく、そのままの記載内容でアウトプットファイルが出力されますので、個々にコンバージョン結果の確認が必要となります。</p>
<h3 id="2-2-AWS-Schema-Conversion-Tool-AWS-SCT"><a href="#2-2-AWS-Schema-Conversion-Tool-AWS-SCT" class="headerlink" title="2-2 AWS Schema Conversion Tool(AWS-SCT)"></a>2-2 AWS Schema Conversion Tool(AWS-SCT)</h3><p>AWS-SCTは、AWSが提供しているツールです。オンプレのデータベースシステムをAWSクラウドへシフトする支援用のツールとなっていまして、変換可能なデータベースが多数存在します。<br>変換可能なデータベースの対応表は以下の通りです。</p>
<table>
<thead>
<tr>
<th align="left">変換元データベース</th>
<th align="left">変換先データベース</th>
</tr>
</thead>
<tbody><tr>
<td align="left">MS SQL Server</td>
<td align="left">MySQL/PostgreSQL/Redshift</td>
</tr>
<tr>
<td align="left">MySQL</td>
<td align="left">PostgreSQL</td>
</tr>
<tr>
<td align="left">Oracle</td>
<td align="left">MySQL/PostgreSQL/Redshift</td>
</tr>
<tr>
<td align="left">PostgreSQL</td>
<td align="left">MySQL</td>
</tr>
<tr>
<td align="left">Greenplum</td>
<td align="left">Redshift</td>
</tr>
<tr>
<td align="left">Netezza</td>
<td align="left">Redshift</td>
</tr>
<tr>
<td align="left">Vertica</td>
<td align="left">Redshift</td>
</tr>
</tbody></table>
<p>AWS-SCTを起動して、プロジェクト（作業領域）をオープンすると、変換元と変換先を選択することになります。<br>例えば、接続元がOracle(OLTP)を選択すると接続先で選べるのは、以下となっております。</p>
<ul>
<li>Amazon RDS for MySQL</li>
<li>Amazon Aurora (MySQL compatible)</li>
<li>Amazon RDS for PostgreSQL</li>
<li>Amazon Aurora (PostgreSQL compatible)</li>
<li>Amazon RDS for Oracle</li>
</ul>
<h4 id="できること-1"><a href="#できること-1" class="headerlink" title="できること"></a>できること</h4><p>AWS-SCTでは以下を行うことが可能です。</p>
<ul>
<li>スキーマ定義のコンバージョン用DDLの作成<ul>
<li>接続した環境からOracleデータベースのオブジェクト定義からPostgreSQLで実行可能なDDLの出力</li>
</ul>
</li>
<li>スキーマコンバージョンのレポート出力<ul>
<li>PostgreSQLに変換する際の評価レポート</li>
</ul>
</li>
<li>変換先データベースに対するスキーマの作成<ul>
<li>上記DDLを実行して変換先のデータベースにスキーマ及びオブジェクトを作成</li>
</ul>
</li>
<li>SQLファイルのコンバージョン</li>
</ul>
<p>AWS-SCTはGUIでの操作なのでユーザフレンドリーですね。また、レポートについても画面で表示されるため、イメージしやすいです。<br>スキーマのコンバージョンレポートイメージは以下。</p>
<img src="/images/20180809/AWS-SCT_user_report.png" loading="lazy">

<p>以下はオブジェクトの詳細イメージ。</p>
<img src="/images/20180809/AWS-SCT_object_report.png" loading="lazy">

<p>緑は自動変換可能、グレーっぽいのは単純変換で対応可能、黄色は多少手を加える必要がある、赤は要見直しという感じに考えていただければよいです。</p>
<p>AWS-SCTの中でとても便利な機能はアプリケーションのコンバージョンです。<br>Windows上の指定したフォルダ配下に格納されているファイル（もちろんサブフォルダも対象）の中からSQLを抽出してコンバージョンを評価します。ファイルの形式はJAVA/C++/C#といったものが選択できます。もちろんSQLのみが記載されているファイルでもOKです。スキーマのコンバージョン同様に抽出したSQL単位に対応内容をグルーピングします。レポート結果イメージは以下です。</p>
<img src="/images/20180809/AWS-SCT_sql_report.png" loading="lazy">

<p>また、各SQL毎にGUI上でツールによって変換された内容を見ることができます。</p>
<p>下図の例では、4つのSQL文が記述されているファイルに対するコンバージョン結果を表示しております。上部の左上の欄にはソースファイルの内容が表示されます。その下の枠には、ソースファイルから抽出されたSQL文が表示されます。1つのファイルに複数のSQL文が記載されていた場合は、SQLを選択することで個別に表示されます。抽出されたSQLの右の枠にPostgreSQL用に変換されたSQLが表示されます。その枠の上部のApplyボタンで元ファイルへの反映ができ、右上の枠内に反映結果が表示されます。その枠の上部のSaveボタンで反映結果を元のファイルへ保存することも可能です。現時点では評価したファイルすべてに対して一括反映⇒一括保存ができるような機能は無いと思われますので、コンバージョン結果の反映は面倒ですね。（そのような機能があるのかもしれませんが見つけられてません。）</p>
<img src="/images/20180809/AWS-SCT_sql_conv.png" loading="lazy">

<p>自動変換ができないものについては、各SQL単位にアドバイスが出力されます。そのアドバイスから、手動でメンテナンスを実施していくことになります。</p>
<h2 id="3-移行支援ツール検証"><a href="#3-移行支援ツール検証" class="headerlink" title="3. 移行支援ツール検証"></a>3. 移行支援ツール検証</h2><p>実際にとあるシステムのDB環境及びアプリケーションに対して移行ツールを使ってみました。</p>
<h3 id="3-1-テーブルのコンバージョン"><a href="#3-1-テーブルのコンバージョン" class="headerlink" title="3-1 テーブルのコンバージョン"></a>3-1 テーブルのコンバージョン</h3><p>実際のテーブルのデータ型についてはツールにより自動変換されます。ora2pgではconfファイル内で、変換ルールを定義することも可能です。<br>あくまでもルールに基づいた変換となっておりますので、システム内での標準化基準があるようでしたら、そちらに従うようにしてください。<br>それぞれのツールでのデフォルトの自動変換ルールは以下の表のようになっております。</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">Oracleのデータ型</th>
<th align="left">ora2pgでの変換後のデータ型</th>
<th align="left">AWS-SCTでの変換後のデータ型</th>
<th align="left">備考</th>
</tr>
</thead>
<tbody><tr>
<td align="left">文字列</td>
<td align="left">CHAR(n)</td>
<td align="left">char(n)</td>
<td align="left">character(n)</td>
<td align="left">PostgreSQLのnは文字数</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">NCHAR(n)</td>
<td align="left">char(n)</td>
<td align="left">character(n)</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left">VARCHAR2(n)</td>
<td align="left">varchar(n)</td>
<td align="left">character varying(n)</td>
<td align="left">PostgreSQLのnは文字数</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">NVARCHAR2(n)</td>
<td align="left">varchar(n)</td>
<td align="left">character varying(n)</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left">CLOB</td>
<td align="left">text</td>
<td align="left">text</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left">LONG</td>
<td align="left">text</td>
<td align="left">text</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">数値</td>
<td align="left">NUMBER</td>
<td align="left">bigint</td>
<td align="left">double</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left">NUMBER(n)</td>
<td align="left">smallint</td>
<td align="left">numeric(n,0)</td>
<td align="left">n=1～4</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">NUMBER(n)</td>
<td align="left">integer</td>
<td align="left">numeric(n,0)</td>
<td align="left">n=5～9</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">NUMBER(n)</td>
<td align="left">bigint</td>
<td align="left">numeric(n,0)</td>
<td align="left">n=10～19</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">NUMBER(n)</td>
<td align="left">decimal</td>
<td align="left">numeric(n,0)</td>
<td align="left">n=20～38</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">NUMBER(n,m)</td>
<td align="left">real</td>
<td align="left">numeric(n,m)</td>
<td align="left">n=2～6</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">NUMBER(n,m)</td>
<td align="left">double precision</td>
<td align="left">numeric(n,m)</td>
<td align="left">n=7～15</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">NUMBER(n,m)</td>
<td align="left">decimal</td>
<td align="left">numeric(n,m)</td>
<td align="left">n=16～38</td>
</tr>
<tr>
<td align="left">日付</td>
<td align="left">DATE</td>
<td align="left">timestamp</td>
<td align="left">timestamp</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left">TIMESTAMP</td>
<td align="left">timestamp</td>
<td align="left">timestamp</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">バイナリ</td>
<td align="left">BLOB</td>
<td align="left">bytea</td>
<td align="left">bytea</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left">RAW</td>
<td align="left">bytea</td>
<td align="left">bytea</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">その他</td>
<td align="left">ROWID</td>
<td align="left">oid</td>
<td align="left">character(255)</td>
<td align="left"></td>
</tr>
</tbody></table>
<p>特殊型については個別に御確認ください。</p>
<h3 id="3-2-アプリケーションソースのコンバージョン"><a href="#3-2-アプリケーションソースのコンバージョン" class="headerlink" title="3-2 アプリケーションソースのコンバージョン"></a>3-2 アプリケーションソースのコンバージョン</h3><p>スキーマ定義のコンバージョンは一定ルールで変更できるのが確認できましたが、マイグレーション検討を行うにあたって一番の壁がアプリケーションソースのコンバージョンです。SQLは各製品で互換性がない部分があるためソース(SQL)を一つ一つ確認していく必要があります。そのためソースの全量を把握することがまず最初の第一歩となります。</p>
<p>今回利用したシステムのアプリケーション(java)はDBに対するクエリはjavaソース内に記載されているのではなく、SQLごとにファイルが作成される実装方式のためSQLファイルを1か所に纏めてコンバージョンの検証を実行することができました。SQLの本数は1,150本です。</p>
<p>ora2pgはアプリケーションコードのファイル単位に実行が必要であり、また実行結果も目視確認しなければならないことから、今回はAWS-SCTの実行事例をご紹介致します。</p>
<p>SQLのコンバージョン結果レポートを出力させると<strong>SQLConversion Actionsタブ</strong>にコンバージョン評価に対するアドバイスの一覧が表示されます。各ISSUEが発生しているSQL数が<strong>Number of occurrences</strong>として記載されており、▶をクリックすることでそのISSUEが発生しているファイルの一覧を表示することができますので、どのSQLでどのISSUEが発生しているか一目でわかるようになっています。また、各ISSUEの部分を見てわかる通り、ISSUEに関連した記載のあるマニュアルのURLも表示されていますので、実際にどのように直すかの参考になります。</p>
<img src="/images/20180809/AWS-SCT_sql_conv_detail.png" loading="lazy">

<p>今回コンバージョン検証をでてきた中で見直さなくてはいけないものとしてはどのようなものがあったのでしょう。少し見ていきます。</p>
<h3 id="SQL自動変換"><a href="#SQL自動変換" class="headerlink" title="SQL自動変換"></a>SQL自動変換</h3><p>前回のブログにて記載した内容（外部結合・DECODE関数・HINT句）については自動的に変換されます。<br>加えて、Oracleでは省略が可能な表や列の別名の定義の際に記載する<code>AS</code>の補完等も実施されます。<br>注意が必要なのは、AWS-SCTでの変換は変換後のデータベースをRDSを想定しているため、RDSで用意されているOracle互換用のスキーマ（aws_oracle_ext）で代替が可能な記載については自動的に変換されます。例えば、<code>SYSDATE</code>、<code>ADD_MONTHS</code>、<code>TO_DATE</code>、<code>TO_CHAR</code>等があります。</p>
<h4 id="UPDATE文"><a href="#UPDATE文" class="headerlink" title="UPDATE文"></a>UPDATE文</h4><p>UPDATE文については2種類のISSUEとして挙がってきています。<code>5065</code>と<code>5608</code>です。改修ポイントとして以下に纏めます。それぞれ、最新のPostgreSQLでは修正点は少なくて済みます。</p>
<table>
<thead>
<tr>
<th align="left">ISSUE番号</th>
<th align="left">メッセージ</th>
<th align="left">詳細内容</th>
</tr>
</thead>
<tbody><tr>
<td align="left">5065</td>
<td align="left">PostgreSQL doesn’t support the UPDATE statement for a subquery</td>
<td align="left">UPDATEの対象テーブルにサブクエリ(VIEW)を指定することができない　⇒　9.1以降であればCTE等を使って改修してください。</td>
</tr>
<tr>
<td align="left">5608</td>
<td align="left">Unable to convert the UPDATE statement with multiple-column subquery in SET clause</td>
<td align="left">SET句に複数行を指定し、更新後の値をサブクエリで指定する方法はサポートされていない  → 9.5以降で記載できるようになったため、そのままで実行可能となります。</td>
</tr>
</tbody></table>
<h4 id="結果相違"><a href="#結果相違" class="headerlink" title="結果相違"></a>結果相違</h4><p>OracleとPostgreSQLでの実行で検索結果が異なる可能性があります。<br>ここで挙がったSQLについては改修後のテストで重点的に新旧結果比較をすることをお奨め致します。</p>
<p>今回の検証で挙がった事象としては3種類ありました。</p>
<p>まずは、関数の<code>GREATEST</code>と<code>LEAST</code>です。検証結果としては<code>5271</code>と<code>5272</code>となります。<br>PostgreSQLだと関数で指定した列内にNULLが含まれるとNULLが返ります。そのため、COALESCE関数でNULLを変換する必要がでてきます。</p>
<p>次に、正規表現になります。検証結果としては<code>5617</code>となります。Oracleでは、<code>REGEXP_LIKE</code>関数となりますが、PostgreSQLにはそのような関数が無く、AWS-SCTでは<code>~</code>に自動変換されます。正規表現の判定がOracleとPostgreSQLで異なる可能性があり警告として出力されているものと考えております。</p>
<h4 id="変換不可"><a href="#変換不可" class="headerlink" title="変換不可"></a>変換不可</h4><p>移行支援ツールで自動変換が困難なものが、検証結果の<code>5340</code>、<code>5621</code>と<code>9996</code>にあたります。</p>
<p>MERGE文、PostgreSQLでは実装されていない事前定義関数で代替が困難なもの（今回はSUBSTRB関数）や複雑なSQL文のようなものとなります。コンバージョン結果としては何も変換されずにISSUEで挙がっている文言が記載されます。<br>参考までに、MERGE文については前回のブログを参照していただければ修正ポイントが分かります。</p>
<h4 id="変換結果まとめ"><a href="#変換結果まとめ" class="headerlink" title="変換結果まとめ"></a>変換結果まとめ</h4><p>AWS-SCTのSQLのコンバージョン検証結果を纏めると以下のようになります。</p>
<img src="/images/20180809/AWS-SCT_sql_conv_summary2.png" loading="lazy">

<p>AWS-SCTによる分類のうちSUCCESSとLOWがそこまで労力をかけない修正（変換）でPostgreSQLで実行可能となります。また、上記で記載したようにSET句でのサブクエリの指定はPostgreSQL 9.5以降では可能となっているため、そちらを加えると**88.2%**となります。HIGHと分類されている、行ロックについては第1回にて説明しておりますので、そちらを参考にしてセッションパラメータの設定にて対処可能ですので、大きな修正となるのはMERGE文、サブクエリの更新とSUBSTRB関数の実装のみとなり、全体の6%程度に過ぎません。</p>
<p>このように、ソース全体のうち修正が必要なSQL量をざっと確認することができ、かつ修正難易度の目安についても確認できることが分かりました。コンバージョン計画立案時のコスト、スケジュール算出にとしても有用なものとなりそうです。</p>
<h5 id="参考までに"><a href="#参考までに" class="headerlink" title="参考までに"></a>参考までに</h5><p>ora2pgについても、外部結合やDECODE等の変換ができていることは確認しております。驚いたのは、ora2pgの外部結合の変換はすべてLEFT OUTER JOINに統一されているところです。（AWS-SCTは(+)の記載位置によりRIGHT OUTER JOINの変換もあります。）すべてを目視確認する場合はora2pgのSQL変換でも良いかもしれません。</p>
<h2 id="3-データベースマイグレーション検討の方針"><a href="#3-データベースマイグレーション検討の方針" class="headerlink" title="3. データベースマイグレーション検討の方針"></a>3. データベースマイグレーション検討の方針</h2><p>データベースマイグレーションを検討する際には、作業項目毎マイグレーションの難易度をに評価して実現性を検討していくことになります。どのようなシステムがマイグレーションがし易いのか考えてみます。</p>
<h3 id="データベースオブジェクト"><a href="#データベースオブジェクト" class="headerlink" title="データベースオブジェクト"></a>データベースオブジェクト</h3><p>データベースオブジェクトについての変換は第1回でも触れましたが、圧倒的にストアド・サブプログラムが難易度が高いです。その他についてはPostgreSQLで実装されていないOracle固有のオブジェクトを利用している場合は検討が必要となってきます。</p>
<h3 id="アプリケーションソース"><a href="#アプリケーションソース" class="headerlink" title="アプリケーションソース"></a>アプリケーションソース</h3><p>アプリケーションについては、ソースがファイルとして保持しているようであれば、変換ツールを施行することが可能となります。そのため、ソースファイルのような形でツールが利用できない場合は難易度が高くなります。動的にSQLを組んで実行する形やアプリケーション内にSQLが分散している場合などがそれにあたります。</p>
<p>また、ストアド・プログラムが存在する場合は、コンバージョン及びテストの難易度が上がります。<br>PostgreSQLのPL/pgSQLでファンクションとして作成することは可能ですが、コンバージョンのタイミングでアプリケーション側にロジックを寄せる検討をすることも視野に入れてください。<br>PL/SQLをPL/pgSQLにコンバージョンする際に気を付ける点としては、以下となります。</p>
<ul>
<li>PL/pgSQL関数内部ではCOMMITが使用できない</li>
<li>エラーが発生した場合は内部処理はすべてロールバックされる</li>
<li>パッケージが存在しないため、関数を跨った変数を定義できない</li>
<li>変数はすべて宣言する必要がある</li>
</ul>
<p>データベースへの接続方法としては、OracleもPostgreSQLも変わらないため特に意識する必要はありません。</p>
<table>
<thead>
<tr>
<th align="left">難易度</th>
<th align="left">アプリケーション実装方法</th>
<th align="left">システム例</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>高</strong></td>
<td align="left">PL/SQLの実行／動的SQL</td>
<td align="left">バックグラウンドでの集計処理メインのシステム、分析用の検索システム</td>
</tr>
<tr>
<td align="left"><strong>低</strong></td>
<td align="left">実行されるSQLが外出しされている</td>
<td align="left">定型フォームのオンライン検索システム</td>
</tr>
</tbody></table>
<h3 id="非機能要件"><a href="#非機能要件" class="headerlink" title="非機能要件"></a>非機能要件</h3><p>これまでは、アプリケーションについて触れてきましたが、PostgreSQLはシステム内ではデータベースサーバとして稼働していくことになりますので、非機能要件についても要件を満たすかどうかを検討していくことになります。</p>
<p>現行システムで可用性要件や性能要件のためにOracle RAC構成を取っている場合があると思います。<br>Oracle RACはShared Everythingのデータベース構成となっていて、複数台のサーバがアクティブ状態で1つのデータベースを共有して稼動しますので、単体のサーバ障害ではシステムが停止しないということが大きな特徴です。また、複数台がアクティブに稼働しておりますので、分散処理も可能となります。  この要件が崩せない場合は、やはりOracleからのマイグレーションは難しくなります。</p>
<p>PostgreSQLでは、可用性を上げるために3rdベンダのクラスタウェアを利用したActive-Standby構成が考えられます。また、分散処理の一例としてレプリケーション機能を利用したMaster-Slave構成として参照処理をSlave側で実行させるといったことも考えられます。</p>
<p>その他、運用（バックアップ／監視／セキュリティ）等、非機能要件を確認したうえで、マイグレーションの評価をしていってください。OracleのEnterprise Editionの場合、PostgreSQLにはない機能が豊富にふくまれているため細かく確認が必要です。</p>
<p>クラウドサービスの場合、可用性（レプリケーション）、運用（バックアップ、監視、セキュリティ）がDB機能として提供されています（例えば、AWS RDS）のでこの部分のハードルはぐっと低くなると考えています。</p>
<h3 id="データ移行"><a href="#データ移行" class="headerlink" title="データ移行"></a>データ移行</h3><p>データベースのマイグレーションではなくても、システムの刷新時には検討されるのが、データの移行です。すいません、データ移行は非常に様々な検討項目があるため、書くとなると1回分くらいになってしまうかと思いますので、第2回のブログでも割愛させていただきます。<br>ただ、マイグレーションの難易度の評価は割愛せずに必ず実施してください。</p>
<h2 id="4-最後に"><a href="#4-最後に" class="headerlink" title="4. 最後に"></a>4. 最後に</h2><p>ここまでデータベースのマイグレーション（PostgreSQL）について確認してきましたが、ツールを利用したマイグレーションが有用であることが確認できました。また、実際のコンバージョンだけでなくプロジェクト計画を立てる際の一次評価としても有用と言えます。</p>
<p>第1回・第2回とはデータベースのマイグレーションに特化した内容で記載してきましたが、PostgreSQLへのマイグレーションの判断が下された後には、もちろんPostgreSQLとしてのデータベース設計は必要です。パラメータや配置などの物理設計や統計情報取得、VACUUM処理、バックアップ等の運用設計もしっかりとやっていきましょう。</p>
<p>フューチャーでは仮想的なDBチームが形成されており、各プロジェクトへの横断的に支援しております。OracleやPostgreSQLを中心としたノウハウの蓄積・共有なども活発に行っていますので、ご興味ある方は是非一緒に働いていきましょう！！</p>
<ul>
<li><a href="/articles/20180529/">データベースマイグレーション ～OracleからPostgreSQLへ～　ー第１回ー</a> もぜひ参考ください</li>
</ul>

          
        </div>
        <footer>
          <section class="social-area">
          <!-- シェアボタン START -->
  <ul class="social-button">
    
    <!-- Twitter -->
    <li>
      <a class="social-btn twitter-btn" target="_blank" href="https://twitter.com/share?url=https://future-architect.github.io/articles/20180809/&via=future_techblog&related=twitterapi%2Ctwitter&text=%E3%83%87%E3%83%BC%E3%82%BF%E3%83%99%E3%83%BC%E3%82%B9%E3%83%9E%E3%82%A4%E3%82%B0%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%20%EF%BD%9EOracle%E3%81%8B%E3%82%89PostgreSQL%E3%81%B8%EF%BD%9E%E3%80%80%E2%88%92%E7%AC%AC%EF%BC%92%E5%9B%9E%E3%83%BC" rel="nofollow noopener">
        <i></i><span class="social-btn-label tw-btn-label">ツイート</span>
      </a>
    </li>
    <!-- Facebook -->
    <li>
      <a class="social-btn fb-btn" target="_blank" href="http://www.facebook.com/share.php?u=https://future-architect.github.io/articles/20180809/&t=%E3%83%87%E3%83%BC%E3%82%BF%E3%83%99%E3%83%BC%E3%82%B9%E3%83%9E%E3%82%A4%E3%82%B0%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%20%EF%BD%9EOracle%E3%81%8B%E3%82%89PostgreSQL%E3%81%B8%EF%BD%9E%E3%80%80%E2%88%92%E7%AC%AC%EF%BC%92%E5%9B%9E%E3%83%BC" rel="nofollow noopener">
        <i></i><span class="social-btn-label fb-btn-label">8</span>
      </a>
    </li>
    <!-- hatebu -->
    <li>
      <a class="social-btn hatebu-btn" target="_blank" href="https://b.hatena.ne.jp/entry/s/future-architect.github.io/articles/20180809/" rel="nofollow noopener">
        <i></i><span class="social-btn-label hatebu-btn-label">2</span>
      </a>
    </li>
    <!-- pocket -->
    <li>
      <a class="social-btn pocket-btn" target="_blank" href="https://getpocket.com/save?url=https://future-architect.github.io/articles/20180809/" rel="nofollow noopener">
        <i></i><span class="social-btn-label pocket-btn-label">8</span>
      </a>
    </li>
    
  </ul>
<!-- シェアボタン END -->

          </section>
          <aside>
            <section class="related-post margin-bottom-20 nav">
              <h2>関連記事</h2>
              
  <div class="widget">
    <ul class="nav related-posts"><li class="related-posts-item"><span>2018.05.29</span><span class="snscount">&#9825;18</span><a class="related-posts-link" href=/articles/20180529/ title="エンタープライズ領域においてマイグレーション例が多いOracleからPostgreSQLについて、考慮すべき事項について2回にわたり紹介します">データベースマイグレーション ～OracleからPostgreSQLへ～　ー第１回ー</a></li><li class="related-posts-item"><span>2019.11.21</span><span class="snscount">&#9825;347</span><a class="related-posts-link" href=/articles/20191121/ title="2019年10月15日、Amazonは自社サービスにおける実質的な脱Oracleを発表しました。75PBに及ぶデータを、傘下のAWSが提供するDatabase Service（AuroraやDynamoDB、Redshiftなど）へと移行したとの事。この一報は、Amazonというグローバル規模のECの巨人、クラウド・プラットフォーマーのリーダーの一角が、大規模基幹システム領域におけるRDBMSのデファクト・スタンダードと決別したという点で、業界関係者に対して非常に大きなインパクトを残したものかと思います。">「脱Oracle」の背景にある、Oracle Databaseの価値を改めて考える</a></li><li class="related-posts-item"><span>2020.06.09</span><span class="snscount">&#9825;139</span><a class="related-posts-link" href=/articles/20200609/ title="フューチャーではGraphQLの活用事例はまだ少なく、自分はまだお目にかかったことはないです。しかし、HeadlessCMS界隈を初めGraphQLのAPIを提供するサービスが増えてきました。今後もさらに需要が増えてきそうな予感がしたためGoとGraphQLを春の入門祭りのテーマにしました。学習する上でドキュメントを読み込むだけでは忘れがちです。手を動かしながらタイトルにある鉄道データ検索APIを開発していきましょう">作って学ぶGraphQL。gqlgenを用いて鉄道データ検索API開発入門</a></li><li class="related-posts-item"><span>2018.10.19</span><span class="snscount">&#9825;23</span><a class="related-posts-link" href=/articles/20181019/ title="PostgreSQL10のパーティション機能を利用したSQLで発生した遅延について調査しました。">PostgreSQLパーティションプルーニングの動作を確認する</a></li></ul>
  </div>
            </section>
            <section class="featured-post margin-bottom-20 nav">
              <h2>注目の記事</h2>
              <!-- BEGIN FEATURED POSTS -->
<div class="widget-wrap">
  
  <div class="widget">
    <ul class="nav featured-post-link">
      
    <li><span>2020.11.07</span><span class="snscount">&#9825;49</span> <a href="/articles/20201107/" title="フューチャーOSS推進タスクフォースを開始しました。実は7月に発足してから8月には活動の骨子が固まり、タスクフォース自体は始動していましたが、中身を作ってから告知した方が具体性があってブレも無くなり良いのでは？という話があり、少しタイミングをずらしてのご報告です。">フューチャーOSS推進タスクフォース始めます</a></li>

    <li><span>2020.08.07</span><span class="snscount">&#9825;70</span> <a href="/articles/20200807/" title="Go は標準ライブラリが充実しているとよく言われます。標準ライブラリだけで、HTTP サーバを作れたり、暗号化処理や、JSON や CSV といったデータ形式を扱うことができます">GoとSuffixArray</a></li>

    <li><span>2020.07.30</span><span class="snscount">&#9825;31</span> <a href="/articles/20200730/" title="TypeScriptは、JavaScriptのさまざまなフリーダムな書き方を受け入れ、漸進的な型付けを行えるようにするという~~狂った~~高難易度な目的のために作成されているのですが、そろそろ、TypeScriptファーストで、利用者にとって使いやすいAPIみたいな方向性で使われることも増えるのでは、という思いを強く持ちました。「">Redux-Toolkitに学ぶ、TypeScriptの型推論とこれからのAPIデザイン</a></li>

    <li><span>2020.05.28</span><span class="snscount">&#9825;389</span> <a href="/articles/20200528/" title="Goでプロジェクトのフォルダ構成どうしよう、とググると見つかるStandard Go Project Layout(https://github.com/golang-standards/project-layout)。とはいえ、これはかなりコード量を増やしてしまう恐れがありますので、導入する場合のデメリットも考えておく方が良いです。">あなたのGoアプリ/ライブラリのパッケージ構成もっとシンプルでよくない？</a></li>
    </ul>
  </div>
  
</div>
<!-- END FEATURED POSTS -->

            </section>
          </aside>
        </footer>
      </div>
    </article>
  </main>
  <aside class="col-md-3 col-sm-3 blog-sidebar">
    <!-- START SIDEBAR  -->

<section class="toc-section">
  <h2 class="margin-top-30">目次</h2>
  <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%88%9D%E3%82%81%E3%81%AB"><span class="toc-text">1. 初めに</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E7%A7%BB%E8%A1%8C%E6%94%AF%E6%8F%B4%E3%83%84%E3%83%BC%E3%83%AB"><span class="toc-text">2. 移行支援ツール</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-ora2pg"><span class="toc-text">2-1 ora2pg</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%81%A7%E3%81%8D%E3%82%8B%E3%81%93%E3%81%A8"><span class="toc-text">できること</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-AWS-Schema-Conversion-Tool-AWS-SCT"><span class="toc-text">2-2 AWS Schema Conversion Tool(AWS-SCT)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%81%A7%E3%81%8D%E3%82%8B%E3%81%93%E3%81%A8-1"><span class="toc-text">できること</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E7%A7%BB%E8%A1%8C%E6%94%AF%E6%8F%B4%E3%83%84%E3%83%BC%E3%83%AB%E6%A4%9C%E8%A8%BC"><span class="toc-text">3. 移行支援ツール検証</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%81%AE%E3%82%B3%E3%83%B3%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3"><span class="toc-text">3-1 テーブルのコンバージョン</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%BD%E3%83%BC%E3%82%B9%E3%81%AE%E3%82%B3%E3%83%B3%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3"><span class="toc-text">3-2 アプリケーションソースのコンバージョン</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL%E8%87%AA%E5%8B%95%E5%A4%89%E6%8F%9B"><span class="toc-text">SQL自動変換</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#UPDATE%E6%96%87"><span class="toc-text">UPDATE文</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B5%90%E6%9E%9C%E7%9B%B8%E9%81%95"><span class="toc-text">結果相違</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%89%E6%8F%9B%E4%B8%8D%E5%8F%AF"><span class="toc-text">変換不可</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%89%E6%8F%9B%E7%B5%90%E6%9E%9C%E3%81%BE%E3%81%A8%E3%82%81"><span class="toc-text">変換結果まとめ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E3%83%87%E3%83%BC%E3%82%BF%E3%83%99%E3%83%BC%E3%82%B9%E3%83%9E%E3%82%A4%E3%82%B0%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E6%A4%9C%E8%A8%8E%E3%81%AE%E6%96%B9%E9%87%9D"><span class="toc-text">3. データベースマイグレーション検討の方針</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%83%87%E3%83%BC%E3%82%BF%E3%83%99%E3%83%BC%E3%82%B9%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88"><span class="toc-text">データベースオブジェクト</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%BD%E3%83%BC%E3%82%B9"><span class="toc-text">アプリケーションソース</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%9E%E6%A9%9F%E8%83%BD%E8%A6%81%E4%BB%B6"><span class="toc-text">非機能要件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%83%87%E3%83%BC%E3%82%BF%E7%A7%BB%E8%A1%8C"><span class="toc-text">データ移行</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%9C%80%E5%BE%8C%E3%81%AB"><span class="toc-text">4. 最後に</span></a></li></ol>
</section>

<section class="category">
<h2 class="margin-top-30">カテゴリー</h2>

<div class="widget-wrap">
  <div class="widget">
    <ul class="nav sidebar-categories margin-bottom-40">
    
      <li class=""><a href="/categories/Culture/">Culture (52)</a></li>
    
      <li class=""><a href="/categories/IoT/">IoT (15)</a></li>
    
      <li class=""><a href="/categories/VR/">VR (10)</a></li>
    
      <li class=""><a href="/categories/Security/">Security (2)</a></li>
    
      <li class=""><a href="/categories/Design/">Design (8)</a></li>
    
      <li class=""><a href="/categories/Programming/">Programming (178)</a></li>
    
      <li class=""><a href="/categories/Management/">Management (9)</a></li>
    
      <li class=""><a href="/categories/Infrastructure/">Infrastructure (138)</a></li>
    
      <li class=""><a href="/categories/DB/">DB (14)</a></li>
    
      <li class=""><a href="/categories/DataScience/">DataScience (33)</a></li>
    
      <li class=""><a href="/categories/DevOps/">DevOps (4)</a></li>
    
      <li class=""><a href="/categories/%E8%AA%8D%E8%A8%BC%E8%AA%8D%E5%8F%AF/">認証認可 (7)</a></li>
    
      <li class=""><a href="/categories/Business/">Business (4)</a></li>
    
    </ul>
  </div>
</div>


</section>
<section class="other-blog-link">
<h2 class="margin-top-30">リンク</h2>
<div class="widget-wrap">
  <div class="widget">
    <ul class="nav">
      <li><a href="https://anchor.fm/futuretechcast" title="フューチャーグループの技術について深堀りするPodcastです" target="_blank" rel="noopener">ポッドキャスト</a></li>
      <li><a href="https://future.connpass.com/" title="経営とITをデザインするフューチャーの勉強会です" target="_blank" rel="noopener">勉強会Connpass</a></li>
      <li><a href="https://github.com/future-architect" title="Future's official open source repositories" target="_blank" rel="noopener">GitHub</a></li>
      <li><a href="https://qiita.com/organizations/future" title="フューチャーのQiita Organizationです" target="_blank" rel="noopener">Qiita</a></li>
      <li><a href="https://note.future.co.jp/" title="フューチャーの公式note" target="_blank" rel="noopener">未来報</a></li>
      <li><a href="https://future-fintech.github.io/" title="Future Fintech EyE - 金融の未来を語るブログ" target="_blank" rel="noopener">Future Fintech EYE</a></li>
    </ul>
  </div>
</div>

</section>
<section class="advent-calendar">
<h2 class="margin-top-30">アドベントカレンダー</h2>
<div class="widget-wrap">
  <div class="widget">
    <ul class="nav">
      <li><a href="http://qiita.com/advent-calendar/2020/future" title="フューチャー Advent Calendar 2020 #Qiita" target="_blank" rel="noopener">2020年</a></li>
      <li><a href="http://qiita.com/advent-calendar/2019/future" title="フューチャー Advent Calendar 2019 #Qiita" target="_blank" rel="noopener">2019年</a></li>
      <li><a href="http://qiita.com/advent-calendar/2018/future" title="フューチャー Advent Calendar 2018 #Qiita" target="_blank" rel="noopener">2018年</a></li>
      <li><a href="http://qiita.com/advent-calendar/2017/future" title="フューチャー Advent Calendar 2017 #Qiita" target="_blank" rel="noopener">2017年</a></li>
      <li><a href="http://qiita.com/advent-calendar/2016/future" title="フューチャー Advent Calendar 2016 #Qiita" target="_blank" rel="noopener">2016年</a></li>
      <li><a href="http://qiita.com/advent-calendar/2015/future" title="フューチャー Advent Calendar 2015 #Qiita" target="_blank" rel="noopener">2015年</a></li>
    </ul>
  </div>
</div>

</section>
<!-- END SIDEBAR -->

  </aside>
</div>

  </section>
</div>

      <!-- BEGIN PRE-FOOTER -->
    <footer>
      <div class="pre-footer">
        <div class="container">
          <div class="row">
            <!-- BEGIN BOTTOM ABOUT BLOCK -->
            <div class="col-md-4 col-sm-6 pre-footer-col">
              <h2>About Us</h2>
              <p>経営とITをデザインする、フューチャーの技術ブログです。業務で利用している幅広い技術について紹介します。記事についてのお問い合わせはTwitterのDMで連絡いただけると幸いです。<br /><br /><a target="_blank" rel="noopener" href="http://www.future.co.jp/">http://www.future.co.jp/</a></p>
            </div>
            <!-- END BOTTOM ABOUT BLOCK -->
            <!-- BEGIN BOTTOM CONTACTS -->
            <div class="col-md-4 col-sm-6 pre-footer-col">
              <h2>Contact</h2>
              <address class="margin-bottom-40">
                東京都品川区大崎1-2-2<br>
                アートヴィレッジ大崎セントラルタワー<br><br>
                Email: <a href="mailto:techblog@future.co.jp">techblog@future.co.jp</a><br>
              </address>
            </div>
            <!-- END BOTTOM CONTACTS -->
            <!-- Twitter Share. ページ毎に1度初期化できれば良い -->
            <script>window.twttr = (function(d, s, id) {
              var js, fjs = d.getElementsByTagName(s)[0], t = window.twttr || {};
              if (d.getElementById(id)) return t;
              js = d.createElement(s);
              js.id = id;
              js.src = "https://platform.twitter.com/widgets.js";
              fjs.parentNode.insertBefore(js, fjs);
              t._e = [];
              t.ready = function(f) {
                t._e.push(f);
              };
              return t;
            }(document, "script", "twitter-wjs"));</script>
            
              <!-- BEGIN TWITTER BLOCK -->
              <div class="col-md-4 col-sm-6 pre-footer-col">
                <!-- Twitterフォローボタン -->
                <div class="social-btn twitter-btn twitter-follow-btn">
                  <a href="https://twitter.com/intent/follow?screen_name=future_techblog " target="_blank" rel="nofollow noopener">
                    <i></i><span class="tw-btn-label">@future_techblogさんをフォロー</span>
                  </a>
                </div>
                <!-- Twitterタイムライン -->
                <a data-tweet-limit="1" class="twitter-timeline" target="_blank" rel="noopener" href="https://twitter.com/future_techblog?ref_src=twsrc%5Etfw" data-lang="ja" data-dnt="true">Tweets by @future_techblog</a>
              </div>
              <!-- END TWITTER BLOCK -->
            
          </div>
        </div>
      </div>
      <!-- END PRE-FOOTER -->
      <!-- BEGIN FOOTER -->
      <div class="footer">
        <div class="container">
          <div class="row">
            <!-- BEGIN COPYRIGHT -->
            <div class="col-md-6 col-sm-6 padding-top-10">
              &copy; 2021 フューチャー技術ブログ<br>
            </div>
          </div>
        </div>
      </div>
    </footer>
    <!-- END FOOTER -->

  <!-- START INTEGRATIONS -->

<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-74047147-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->


<!-- END INTEGRATIONS -->

  </div>
</body>
</html>
