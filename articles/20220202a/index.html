<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <!--
    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—â–‘â–‘â–‘â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—â–‘â–‘â–‘â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
    â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘â–‘â–‘â–‘â–ˆâ–ˆâ•‘â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•‘â–‘â–‘â–‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•
    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–‘â–ˆâ–ˆâ•‘â–‘â–‘â–‘â–ˆâ–ˆâ•‘â–‘â–‘â–‘â–ˆâ–ˆâ•‘â–‘â–‘â–‘â–ˆâ–ˆâ•‘â–‘â–‘â–‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–‘
    â–ˆâ–ˆâ•”â•â•â•â–‘â–‘â–ˆâ–ˆâ•‘â–‘â–‘â–‘â–ˆâ–ˆâ•‘â–‘â–‘â–‘â–ˆâ–ˆâ•‘â–‘â–‘â–‘â–ˆâ–ˆâ•‘â–‘â–‘â–‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â–‘â–‘
    â–ˆâ–ˆâ•‘â–‘â–‘â–‘â–‘â–‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–‘â–‘â–‘â–ˆâ–ˆâ•‘â–‘â–‘â–‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–‘â–‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
    â•šâ•â•â–‘â–‘â–‘â–‘â–‘â–‘â•šâ•â•â•â•â•â•â–‘â–‘â–‘â–‘â•šâ•â•â–‘â–‘â–‘â–‘â•šâ•â•â•â•â•â•â–‘â•šâ•â•â–‘â–‘â•šâ•â•â•šâ•â•â•â•â•â•â•
    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–ˆâ–ˆâ•—â–‘â–‘â–ˆâ–ˆâ•—
    â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–‘â–‘â–ˆâ–ˆâ•‘
    â–‘â–‘â–‘â–ˆâ–ˆâ•‘â–‘â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–‘â–ˆâ–ˆâ•‘â–‘â–‘â•šâ•â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘
    â–‘â–‘â–‘â–ˆâ–ˆâ•‘â–‘â–‘â–‘â–ˆâ–ˆâ•”â•â•â•â–‘â–‘â–ˆâ–ˆâ•‘â–‘â–‘â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘
    â–‘â–‘â–‘â–ˆâ–ˆâ•‘â–‘â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–‘â–‘â–ˆâ–ˆâ•‘
    â–‘â–‘â–‘â•šâ•â•â–‘â–‘â–‘â•šâ•â•â•â•â•â•â•â–‘â•šâ•â•â•â•â•â–‘â•šâ•â•â–‘â–‘â•šâ•â•
    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–ˆâ–ˆâ•—â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘
    â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•â–‘
    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•¦â•â–ˆâ–ˆâ•‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ•‘â–‘â–‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–‘â–‘â–ˆâ–ˆâ•—â–‘
    â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ•‘â–‘â–‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–‘â–‘â•šâ–ˆâ–ˆâ•—
    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•¦â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•
    â•šâ•â•â•â•â•â•â–‘â•šâ•â•â•â•â•â•â•â–‘â•šâ•â•â•â•â•â–‘â–‘â•šâ•â•â•â•â•â•â–‘
    Welcome engineer.
    https://www.future.co.jp/recruit/
  -->
  
  <title>Pipenv+LocalStackã§ä½œã‚‹Lambdaé–‹ç™ºç’°å¢ƒ | ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ€è¡“ãƒ–ãƒ­ã‚°</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  
  <meta name="description" content="ã¯ã˜ã‚ã«ã“ã‚“ã«ã¡ã¯ã€TIG&#x2F;DXãƒ¦ãƒ‹ãƒƒãƒˆæ‰€å±ã®å®®æ°¸ã§ã™ã€‚Pipenvã¨LocalStackã‚’ä½¿ç”¨ã—ãŸLambdaé–‹ç™ºç’°å¢ƒã®æ§‹ç¯‰ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚ æœ¬è¨˜äº‹ã§ä½œæˆã™ã‚‹ãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã¯ä»¥ä¸‹ã®GitHubãƒªãƒã‚¸ãƒˆãƒªã«æ ¼ç´ã—ã¦ã„ã¾ã™ã€‚ã”å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚ https:&#x2F;&#x2F;github.com&#x2F;orangekame3&#x2F;pipenv-lambda    ã€æœ¬è¨˜äº‹ã§ä¼ãˆãŸã„ã“ã¨ã€‘   æœ¬è¨˜äº‹ã§æœ€ã‚‚ä¼ãˆãŸ">
<meta property="og:type" content="article">
<meta property="og:title" content="Pipenv+LocalStackã§ä½œã‚‹Lambdaé–‹ç™ºç’°å¢ƒ | ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ€è¡“ãƒ–ãƒ­ã‚°">
<meta property="og:url" content="https://future-architect.github.io/articles/20220202a/index.html">
<meta property="og:site_name" content="ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ€è¡“ãƒ–ãƒ­ã‚°">
<meta property="og:description" content="ã¯ã˜ã‚ã«ã“ã‚“ã«ã¡ã¯ã€TIG&#x2F;DXãƒ¦ãƒ‹ãƒƒãƒˆæ‰€å±ã®å®®æ°¸ã§ã™ã€‚Pipenvã¨LocalStackã‚’ä½¿ç”¨ã—ãŸLambdaé–‹ç™ºç’°å¢ƒã®æ§‹ç¯‰ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚ æœ¬è¨˜äº‹ã§ä½œæˆã™ã‚‹ãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã¯ä»¥ä¸‹ã®GitHubãƒªãƒã‚¸ãƒˆãƒªã«æ ¼ç´ã—ã¦ã„ã¾ã™ã€‚ã”å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚ https:&#x2F;&#x2F;github.com&#x2F;orangekame3&#x2F;pipenv-lambda    ã€æœ¬è¨˜äº‹ã§ä¼ãˆãŸã„ã“ã¨ã€‘   æœ¬è¨˜äº‹ã§æœ€ã‚‚ä¼ãˆãŸ">
<meta property="og:locale" content="ja_JP">
<meta property="og:image" content="https://future-architect.github.io/images/20220202a/eyecatch.png">
<meta property="og:image" content="https://future-architect.github.io/images/20220202a/æ§‹æˆ.png">
<meta property="og:image" content="https://future-architect.github.io/images/20220202a/zip.gif">
<meta property="og:image" content="https://future-architect.github.io/images/20220202a/image.png">
<meta property="article:published_time" content="2022-02-01T15:00:00.000Z">
<meta property="article:modified_time" content="2024-02-20T05:41:28.743Z">
<meta property="article:tag" content="AWS">
<meta property="article:tag" content="LocalStack">
<meta property="article:tag" content="Lambda">
<meta property="article:tag" content="é–‹ç™ºç’°å¢ƒ">
<meta property="article:tag" content="Pipenv">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://future-architect.github.io/images/20220202a/eyecatch.png">
  
  <link rel="alternate" href="/atom.xml" title="ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ€è¡“ãƒ–ãƒ­ã‚°" type="application/atom+xml">
  
  <link rel="icon" href="/logo.svg" sizes="any" type="image/svg+xml">
  <link rel="mask-icon" href="/logo.svg" sizes="any" color="#0bd">
  <link rel="icon alternate" href="/favicon.ico">
  <link rel="apple-touch-icon" sizes='180x180' href="/apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes='57x57' href="/apple-touch-icon-57x57.png">
  <link rel="canonical" href="https://future-architect.github.io/articles/20220202a/">
  <meta content="AWS,LocalStack,Lambda,é–‹ç™ºç’°å¢ƒ,Pipenv" name="keywords">
  <meta content="å®®æ°¸å´‡å²" name="author">
  <link rel="preload" as="image" href="/banner.jpg" />
  <link rel='manifest' href='/manifest.webmanifest'/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
  <link rel="stylesheet" href="/metronic/assets/style.css">
  <link rel="stylesheet" href="/css/theme-styles.css">
<meta name="generator" content="Hexo 5.4.2"></head>

<body class="corporate">
  <div class="wrap" itemscope itemtype="https://schema.org/TechArticle">
  <!-- BEGIN HEADER -->
<header class="header">
	<div class="header-overlay">
		<div class="header-menu"></div>
		<div class="header-title"><a href="/">Future Tech Blog</a></div>
		<div class="header-title-sub">ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ€è¡“ãƒ–ãƒ­ã‚°</div>
	</div>
</header>
<!-- Header END -->

  <div class="container">
  <ul class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/articles/">Blog</a></li>
    <li class="active">Post</li>
  </ul>
  <section id="main" class="margin-top-30">
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Programming/">Programmingã‚«ãƒ†ã‚´ãƒª</a>
  </div>


    <h2 itemprop="name" class="article-title">Pipenv+LocalStackã§ä½œã‚‹Lambdaé–‹ç™ºç’°å¢ƒ
  
  <a target="_blank" rel="noopener" href="https://github.com/future-architect/tech-blog/edit/master/source/_posts/2022/20220202a_Pipenv+LocalStackã§ä½œã‚‹Lambdaé–‹ç™ºç’°å¢ƒ.md" title="Suggest Edits" class="github-edit"><i class="github-edit-icon"></i></a>
  
</h2>

    <div class="row">
  <main class="col-md-9 blog-posts">
    <article id="post-2022/20220202a_Pipenv+LocalStackã§ä½œã‚‹Lambdaé–‹ç™ºç’°å¢ƒ" class="article article-type-post blog-item" itemscope itemprop="blogPost">
      <div class="article-inner">
        
        <header class="article-header">
          <ul class="blog-info">
            <li class="blog-info-item"><a href="/articles/2022/" class="publish-date"><time datetime="2022-02-01T15:00:00.000Z" itemprop="datePublished">2022.02.02</time></a>
</li>
            <li class="blog-info-item"><li><a href="/authors/%E5%AE%AE%E6%B0%B8%E5%B4%87%E5%8F%B2" title="å®®æ°¸å´‡å²ã•ã‚“ã®è¨˜äº‹ä¸€è¦§ã¸" class="post-author">å®®æ°¸å´‡å²</a></li></li>
            <li class="blog-info-item">
  
    
    <a href="/tags/AWS/" title="AWSã‚¿ã‚°ã®è¨˜äº‹ã¸" class="tag-list-link">AWS</a>
  
    
    <a href="/tags/LocalStack/" title="LocalStackã‚¿ã‚°ã®è¨˜äº‹ã¸" class="tag-list-link">LocalStack</a>
  
    
    <a href="/tags/Lambda/" title="Lambdaã‚¿ã‚°ã®è¨˜äº‹ã¸" class="tag-list-link">Lambda</a>
  
    
    <a href="/tags/é–‹ç™ºç’°å¢ƒ/" title="é–‹ç™ºç’°å¢ƒã‚¿ã‚°ã®è¨˜äº‹ã¸" class="tag-list-link">é–‹ç™ºç’°å¢ƒ</a>
  
    
    <a href="/tags/Pipenv/" title="Pipenvã‚¿ã‚°ã®è¨˜äº‹ã¸" class="tag-list-link">Pipenv</a>
  

</li>
          </ul>
          </header>
        
        <div class="article-entry" itemprop="articleBody">
          
            <img src="/images/20220202a/eyecatch.png" alt="" width="969" height="484" loading="lazy">


<h1 id="ã¯ã˜ã‚ã«"><a href="#ã¯ã˜ã‚ã«" class="headerlink" title="ã¯ã˜ã‚ã«"></a>ã¯ã˜ã‚ã«</h1><p>ã“ã‚“ã«ã¡ã¯ã€TIG&#x2F;DXãƒ¦ãƒ‹ãƒƒãƒˆæ‰€å±ã®å®®æ°¸ã§ã™ã€‚<br>Pipenvã¨LocalStackã‚’ä½¿ç”¨ã—ãŸLambdaé–‹ç™ºç’°å¢ƒã®æ§‹ç¯‰ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚</p>
<p>æœ¬è¨˜äº‹ã§ä½œæˆã™ã‚‹ãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã¯ä»¥ä¸‹ã®GitHubãƒªãƒã‚¸ãƒˆãƒªã«æ ¼ç´ã—ã¦ã„ã¾ã™ã€‚ã”å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://github.com/orangekame3/pipenv-lambda">https://github.com/orangekame3/pipenv-lambda</a></p>
<div class="note info" style="background: #e5f8e2; padding: 16px;">
  <span class="fa fa-fw fa-check-circle"></span><p>ã€æœ¬è¨˜äº‹ã§ä¼ãˆãŸã„ã“ã¨ã€‘</p>
  <p>æœ¬è¨˜äº‹ã§æœ€ã‚‚ä¼ãˆãŸã„ã“ã¨ã¯ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨é–‹ç™ºãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®åˆ†é›¢ã§ã™ã€‚
Pipenvã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§zipã®å®¹é‡ã‚’ç¯€ç´„ã—ãªãŒã‚‰Lambdaã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ã‚„ã‚„é•·ã„è¨˜äº‹ã¨ãªã£ã¦ã„ã¾ã™ã®ã§ã€ã€ŒLocalStackã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã€ã®ç« ã ã‘ã§ã‚‚è¦‹ã¦ã„ãŸã ã‘ã‚‹ã¨å¹¸ã„ã§ã™ã€‚</p>
</div>



<h1 id="Pipenvã¨ã¯"><a href="#Pipenvã¨ã¯" class="headerlink" title="Pipenvã¨ã¯"></a>Pipenvã¨ã¯</h1><p>Pipenvã¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ä¼¼ãŸã‚ˆã†ãªãƒ„ãƒ¼ãƒ«ã«Poetryç­‰ãŒã‚ã‚Šã¾ã™ã€‚<br>Poetryã‚’ä½¿ç”¨ã—ãŸPythoné–‹ç™ºç’°å¢ƒã®æ§‹ç¯‰ã¯<a href="https://future-architect.github.io/articles/20210611a/">æ¾å·ã•ã‚“ã®è¨˜äº‹</a>ãŒã¨ã¦ã‚‚å‚è€ƒã«ãªã‚Šã¾ã™ã®ã§ãœã²ã”è¦§ãã ã•ã„ã€‚</p>
<h1 id="é–‹ç™ºç’°å¢ƒ"><a href="#é–‹ç™ºç’°å¢ƒ" class="headerlink" title="é–‹ç™ºç’°å¢ƒ"></a>é–‹ç™ºç’°å¢ƒ</h1><p>é–‹ç™ºã«å–ã‚Šçµ„ã‚€å‰ã«ç­†è€…ã®é–‹ç™ºç’°å¢ƒã‚’è¨˜è¼‰ã—ã¾ã™ã€‚è¨˜äº‹ä¸­Linuxã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ç®‡æ‰€ãŒã‚ã‚Šã¾ã™ã€‚Windowsã§é–‹ç™ºã•ã‚Œã‚‹æ–¹ã¯WSLã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚’ãŠã™ã™ã‚ã„ãŸã—ã¾ã™ã€‚</p>
<ul>
<li>OS Ubuntu 20.04</li>
<li>Python(pyenv) 3.9</li>
<li>Pipenv</li>
<li>Docker</li>
<li>docker compose v2</li>
<li>AWS CLI v2</li>
</ul>
<h1 id="ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ"><a href="#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ" class="headerlink" title="ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ"></a>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ</h1><p>ã¾ãšã¯Pipenvã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ã‚‡ã†ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install pipenv</span><br></pre></td></tr></table></figure>

<p>æ¬¡ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚<br>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ä»¥ä¸‹ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦Pythonãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚<br>ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã¯Lambdaã§ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹æœ€æ–°ç’°å¢ƒã®Python 3.9ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚<br>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/lambda-runtimes.html">Lambda ãƒ©ãƒ³ã‚¿ã‚¤ãƒ </a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pipenv --python 3.9</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">~/git/src/pipenv-lambda main</span><br><span class="line">â¯â¯â¯ pipenv --python 3.9                                                                  âœ˜ 1</span><br><span class="line">Creating a virtualenv <span class="keyword">for</span> this project...</span><br><span class="line">Pipfile: /home/orangekame3/git/src/pipenv-lambda/Pipfile</span><br><span class="line">Using /home/orangekame3/.anyenv/envs/pyenv/versions/3.9.4/bin/python3.9 (3.9.4) to create virtualenv...</span><br><span class="line">â ¹ Creating virtual environment...created virtual environment CPython3.9.4.final.0-64 <span class="keyword">in</span> 136ms</span><br><span class="line">  creator CPython3Posix(dest=/home/orangekame3/.local/share/virtualenvs/pipenv-lambda-LX4n91M6, clear=False, no_vcs_ignore=False, global=False)</span><br><span class="line">  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, wheel=bundle, via=copy, app_data_dir=/home/orangekame3/.local/share/virtualenv)</span><br><span class="line">    added seed packages: pip==21.3.1, setuptools==60.2.0, wheel==0.37.1</span><br><span class="line">  activators BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator,PythonActivator</span><br><span class="line"></span><br><span class="line">âœ” Successfully created virtual environment!</span><br><span class="line">Virtualenv location: /home/orangekame3/.local/share/virtualenvs/pipenv-lambda-LX4n91M6</span><br><span class="line">Creating a Pipfile <span class="keyword">for</span> this project...</span><br></pre></td></tr></table></figure>

<p>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆãŒã§ãã¾ã—ãŸ ğŸ‰<br>ã“ã®çŠ¶æ…‹ã§treeã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨<code>Pipfile</code>ãŒä½œæˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã§ãã¾ã™ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">~/git/src/pipenv-lambda main*</span><br><span class="line">â¯â¯â¯ tree</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ Pipfile</span><br><span class="line">â””â”€â”€ README.md</span><br><span class="line"></span><br><span class="line">0 directories, 2 files</span><br></pre></td></tr></table></figure>

<p><code>Pipfile</code>ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®Pythonã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚„ä½¿ç”¨ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç­‰ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚<br><code>cat</code>ã‚³ãƒãƒ³ãƒ‰ã§ä¸­èº«ã‚’ç¢ºèªã—ã¾ã™ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">~/git/src/pipenv-lambda main*</span><br><span class="line">â¯â¯â¯ <span class="built_in">cat</span> Pipfile</span><br><span class="line">[[<span class="built_in">source</span>]]</span><br><span class="line">url = <span class="string">&quot;https://pypi.org/simple&quot;</span></span><br><span class="line">verify_ssl = <span class="literal">true</span></span><br><span class="line">name = <span class="string">&quot;pypi&quot;</span></span><br><span class="line"></span><br><span class="line">[packages]</span><br><span class="line"></span><br><span class="line">[dev-packages]</span><br><span class="line"></span><br><span class="line">[requires]</span><br><span class="line">python_version = <span class="string">&quot;3.9</span></span><br></pre></td></tr></table></figure>

<p>Pipenvã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹éš›ã¯<code>pipenv install</code>ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚<br><code>pipenv install</code>ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯<code>[packages]</code>ã§ç®¡ç†ã•ã‚Œã¾ã™ã€‚<br>ä¸€æ–¹ã€ã“ã®ã‚³ãƒãƒ³ãƒ‰ã«<code>--dev</code>ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã¤ã‘ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸéš›ã¯<code>[dev-packages]</code>ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ã•ã‚Œã¾ã™ã€‚<br>ã“ã®ç‚¹ã«ã¤ã„ã¦ã¯å¾Œã»ã©ã€ŒLocalStackã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã€ã§èª¬æ˜ã—ã¾ã™ã€‚</p>
<h2 id="é–‹ç™ºãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"><a href="#é–‹ç™ºãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" class="headerlink" title="é–‹ç™ºãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"></a>é–‹ç™ºãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h2><p>ç¶šã„ã¦ãƒ†ã‚¹ãƒˆç’°å¢ƒã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§pytestã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">~/git/src/pipenv-lambda main* 10s</span><br><span class="line">â¯â¯â¯ pipenv install pytest --dev</span><br><span class="line">Installing pytest...</span><br><span class="line">Adding pytest to Pipfile<span class="string">&#x27;s [dev-packages]...</span></span><br><span class="line"><span class="string">âœ” Installation Succeeded</span></span><br><span class="line"><span class="string">Pipfile.lock (8eec78) out of date, updating to (7c060a)...</span></span><br><span class="line"><span class="string">Locking [dev-packages] dependencies...</span></span><br><span class="line"><span class="string">Building requirements...</span></span><br><span class="line"><span class="string">Resolving dependencies...</span></span><br><span class="line"><span class="string">âœ” Success!</span></span><br><span class="line"><span class="string">Locking [packages] dependencies...</span></span><br><span class="line"><span class="string">Building requirements...</span></span><br><span class="line"><span class="string">Resolving dependencies...</span></span><br><span class="line"><span class="string">âœ” Success!</span></span><br><span class="line"><span class="string">Updated Pipfile.lock (7c060a)!</span></span><br><span class="line"><span class="string">Installing dependencies from Pipfile.lock (7c060a)...</span></span><br><span class="line"><span class="string">  ğŸ   â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰ 0/0 â€” 00:00:00</span></span><br><span class="line"><span class="string">To activate this project&#x27;</span>s virtualenv, run pipenv shell.</span><br><span class="line">Alternatively, run a <span class="built_in">command</span> inside the virtualenv with pipenv run.</span><br></pre></td></tr></table></figure>
<p>åŒæ§˜ã«ã—ã¦é™çš„å‹ãƒã‚§ãƒƒã‚¯ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹mypyã‚‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pipenv install mypy --dev</span><br></pre></td></tr></table></figure>

<h2 id="ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"><a href="#ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" class="headerlink" title="ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"></a>ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h2><p>Pythonã®æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä»¥å¤–ã«ã‚‚ä½¿ç”¨ã—ãŸã„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚<br>Lambdaã‚’å®Ÿè¡Œã™ã‚‹ä¸Šã§å¿…è¦ã¨ãªã‚‹å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯<code>--dev</code>ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ä»˜ã‘ãšã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚<br>ä»Šå›ã¯pandasã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚<br>ã¾ãŸpandasã§ã‚¨ã‚¯ã‚»ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ‰±ã†ãŸã‚ã€xlwtã¨xlsxwriterã‚‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pipenv install pandas xlwt xlsxwriter</span><br></pre></td></tr></table></figure>

<p>ã“ã“ã¾ã§ã§Pythonãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æº–å‚™ã¯ä¸€æ—¦å®Œäº†ã§ã™ã€‚<br>ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§Lambdaã®ãƒ‡ãƒ—ãƒ­ã‚¤ã¨å®Ÿè¡Œã‚’ç¢ºèªã™ã‚‹ãŸã‚LocalStackã‚’ä½¿ç”¨ã—ã¾ã™ã€‚<br>æ¬¡ã®ç« ã§LocalStackã®æº–å‚™ã‚’ã—ã¾ã™ã€‚</p>
<h1 id="LocalStackã®æº–å‚™"><a href="#LocalStackã®æº–å‚™" class="headerlink" title="LocalStackã®æº–å‚™"></a>LocalStackã®æº–å‚™</h1><p>LocalStackã‚’ä½¿ç”¨ã—ã¦ã€Lambdaã®ãƒ‡ãƒ—ãƒ­ã‚¤ã¨å‹•ä½œæ¤œè¨¼ã‚’è¡Œã„ã¾ã™ã€‚</p>
<h2 id="docker-compose-ymlã®ä½œæˆ"><a href="#docker-compose-ymlã®ä½œæˆ" class="headerlink" title="docker-compose.ymlã®ä½œæˆ"></a>docker-compose.ymlã®ä½œæˆ</h2><p>ä»¥ä¸‹ã®ã‚ˆã†ãª<code>docker-compose.yml</code>ã‚’ç”¨æ„ã—ã¦ãã ã•ã„ã€‚</p>
<figure class="highlight yml"><figcaption><span>docker-compose.yml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.8&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">localstack:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">&quot;$&#123;LOCALSTACK_DOCKER_NAME-localstack_pipenv&#125;&quot;</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">localstack/localstack</span></span><br><span class="line">    <span class="attr">network_mode:</span> <span class="string">bridge</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;127.0.0.1:4566:4566&quot;</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">DATA_DIR=/tmp/localstack/data</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">SERVICES=lambda,s3</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">HOST_TMP_FOLDER=$&#123;TMPDIR:-/tmp/&#125;localstack</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">DOCKER_HOST=unix:///var/run/docker.sock</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;$&#123;TMPDIR:-/tmp&#125;/localstack:/tmp/localstack&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;/var/run/docker.sock:/var/run/docker.sock&quot;</span></span><br></pre></td></tr></table></figure>

<p><code>docker-compose.yml</code>ã®æº–å‚™ãŒã§ããŸã‚‰ãƒ“ãƒ«ãƒ‰ã—ã¾ã™ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker compose up --build</span><br></pre></td></tr></table></figure>

<p>èµ·å‹•ãŒç¢ºèªã§ããŸã‚‰LocalStackã®æº–å‚™ã‚‚å®Œäº†ã§ã™ã€‚<br>æ¬¡ã«AWS CLIã®è¨­å®šã‚’è¡Œã„ã¾ã™ã€‚</p>
<h2 id="AWS-CLIã®è¨­å®š"><a href="#AWS-CLIã®è¨­å®š" class="headerlink" title="AWS CLIã®è¨­å®š"></a>AWS CLIã®è¨­å®š</h2><p>AWS CLIã§ã¯èªè¨¼æƒ…å ±ãªã©ã‚’ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ä¿å­˜ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚<br>AWS CLIã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸæ–¹ã¯ã”è‡ªèº«ãŒä½¿ç”¨ã—ã¦ã„ã‚‹OSã®homeãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«<code>.aws</code>ã®éš ã—ãƒ•ã‚¡ãƒ«ãƒ€ãŒã‚ã‚Šã¾ã™ã€‚(ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ãªã©ã§ç¢ºèªã™ã‚‹å ´åˆã¯éš ã—ãƒ•ã‚©ãƒ«ãƒ€ã‚’è¡¨ç¤ºã™ã‚‹ã‚ˆã†ã«è¨­å®šã—ã¦ãã ã•ã„ã€‚)<code>.aws</code>ãƒ•ã‚©ãƒ«ãƒ€é…ä¸‹ã«ã¯.<code>config</code>ã¨<br><code>.credentials</code>2ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã¾ã™ã®ã§ãã‚Œãã‚Œä»¥ä¸‹ã®ã‚ˆã†ã«è¨­å®šã—ã¦ãã ã•ã„ã€‚</p>
<p>å‚è€ƒ:<a target="_blank" rel="noopener" href="https://docs.aws.amazon.com/ja_jp/cli/latest/userguide/cli-configure-profiles.html">åå‰ä»˜ããƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«</a></p>
<p>ä»Šå›ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«<code>local</code>ã¨ã„ã†ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã—ãŸã€‚</p>
<figure class="highlight ini"><figcaption><span>config</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="section">[local]</span></span><br><span class="line"><span class="attr">region</span> = ap-northeast-<span class="number">1</span></span><br><span class="line"><span class="attr">output</span> = json</span><br></pre></td></tr></table></figure>

<figure class="highlight ini"><figcaption><span>credentials</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="section">[local]</span></span><br><span class="line"><span class="attr">aws_access_key_id</span> = test</span><br><span class="line"><span class="attr">aws_secret_access_key</span> = test</span><br></pre></td></tr></table></figure>




<h1 id="ãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã®å®Ÿè£…"><a href="#ãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã®å®Ÿè£…" class="headerlink" title="ãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã®å®Ÿè£…"></a>ãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã®å®Ÿè£…</h1><h2 id="æœ€çµ‚çš„ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ"><a href="#æœ€çµ‚çš„ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ" class="headerlink" title="æœ€çµ‚çš„ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ"></a>æœ€çµ‚çš„ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ</h2><p>ä»¥é™ã€è¤‡æ•°ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚æœ€çµ‚çš„ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã‚’è¨˜è¼‰ã—ã¾ã™ã®ã§ã€é©å®œå‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ Makefile</span><br><span class="line">â”œâ”€â”€ Pipfile</span><br><span class="line">â”œâ”€â”€ Pipfile.lock</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ bin</span><br><span class="line">â”‚   â””â”€â”€ lambda.zip</span><br><span class="line">â”œâ”€â”€ deploy-packages</span><br><span class="line">â”œâ”€â”€ docker-compose.yml</span><br><span class="line">â”œâ”€â”€ lambda.py</span><br><span class="line">â”œâ”€â”€ model.py</span><br><span class="line">â”œâ”€â”€ requirements.txt</span><br><span class="line">â”œâ”€â”€ result</span><br><span class="line">â”‚   â””â”€â”€ test.xlsx</span><br><span class="line">â”œâ”€â”€ result.log</span><br><span class="line">â”œâ”€â”€ setup.cfg</span><br><span class="line">â”œâ”€â”€ tests</span><br><span class="line">â”‚   â”œâ”€â”€ __init__.py</span><br><span class="line">â”‚   â””â”€â”€ test_model.py</span><br><span class="line">â””â”€â”€ utils</span><br><span class="line">    â”œâ”€â”€ data</span><br><span class="line">    â”‚   â””â”€â”€ sample_data.json</span><br><span class="line">    â””â”€â”€ utils.py</span><br></pre></td></tr></table></figure>

<h2 id="å…¨ä½“æ§‹æˆ"><a href="#å…¨ä½“æ§‹æˆ" class="headerlink" title="å…¨ä½“æ§‹æˆ"></a>å…¨ä½“æ§‹æˆ</h2><p>ä»Šå›ä½œæˆã™ã‚‹ã®ã¯S3ãƒã‚±ãƒƒãƒˆã‹ã‚‰JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’å–å¾—ã—ã€ETLå‡¦ç†å¾Œã«Excelãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦å†åº¦S3ãƒã‚±ãƒƒãƒˆã«æ ¼ç´ã™ã‚‹ã‚¢ãƒ—ãƒªã§ã™ã€‚<br>S3ãƒã‚±ãƒƒãƒˆã«æ ¼ç´ã—ãŸExcelãƒ•ã‚¡ã‚¤ãƒ«ã¯AWS CLIã‚³ãƒãƒ³ãƒ‰ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦æƒ³å®šé€šã‚Šã®æŒ™å‹•ã‚’ã—ã¦ã„ã‚‹ã‹æ¤œè¨¼ã—ã¾ã™ã€‚<br>ä»¥ä¸‹ã€æ§‹æˆå›³ã§ã™ã€‚</p>
<img src="/images/20220202a/æ§‹æˆ.png" alt="æ§‹æˆ" width="1200" height="810" loading="lazy">

<h2 id="ã‚¢ãƒ—ãƒªæ©Ÿèƒ½è©³ç´°"><a href="#ã‚¢ãƒ—ãƒªæ©Ÿèƒ½è©³ç´°" class="headerlink" title="ã‚¢ãƒ—ãƒªæ©Ÿèƒ½è©³ç´°"></a>ã‚¢ãƒ—ãƒªæ©Ÿèƒ½è©³ç´°</h2><p>JSONâ†’Excelã®ETLå‡¦ç†ã«ã¤ã„ã¦ä»¥ä¸‹è¨˜è¼‰ã—ã¾ã™ã€‚<br>S3ãƒã‚±ãƒƒãƒˆã«ã¯äºˆã‚ä»¥ä¸‹ã®æ§‹é€ ã‚’ã‚‚ã¤JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…ç½®ã—ã¦ãŠãã¾ã™ã€‚<br>å®Ÿè£…ã™ã‚‹Lambdaã«ã¯å¤§ãã2ã¤ã®æ©Ÿèƒ½ã‚’ã‚‚ãŸã›ã¾ã™ã€‚</p>
<ol>
<li>JSONâ†’Excelã¸ã®å¤‰æ›</li>
<li>ã€Œãƒœãƒ¼ãƒŠã‚¹ãƒã‚¤ãƒ³ãƒˆã€ã‚«ãƒ©ãƒ ã®è¿½åŠ </li>
</ol>
<p>ã€Œãƒœãƒ¼ãƒŠã‚¹ãƒã‚¤ãƒ³ãƒˆã€ã¯ä»¥ä¸‹ã®æ¡ä»¶ã§æ±ºå®šã—ã¾ã™ã€‚</p>
<div class="note info" style="background: #e5f8e2; padding: 16px;">
  <span class="fa fa-fw fa-check-circle"></span><p>ã€æ¡ä»¶ã€‘</p>
  <p>ä¼šå“¡ãƒ©ãƒ³ã‚¯ãŒã€Œï¼”ï¼Œï¼•ã€ã®ä¼šå“¡ã«ã¯ã€Œãƒã‚¤ãƒ³ãƒˆã€Ã—1.25å€ã®ãƒœãƒ¼ãƒŠã‚¹ãƒã‚¤ãƒ³ãƒˆã‚’ã€ä¼šå“¡ãƒ©ãƒ³ã‚¯ã€Œï¼‘ï¼Œï¼’ï¼Œï¼“ã€ã®ä¼šå“¡ã«ã¯ã€Œãƒã‚¤ãƒ³ãƒˆã€ã¨åŒç­‰ã®ãƒœãƒ¼ãƒŠã‚¹ãƒã‚¤ãƒ³ãƒˆã‚’ä»˜ä¸ã™ã‚‹ã“ã¨ã—ã¾ã™ã€‚</p>
</div>

<br />


<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;ä¼šå“¡ç•ªå·&quot;</span><span class="punctuation">:</span> <span class="string">&quot;000&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;åå‰&quot;</span><span class="punctuation">:</span> <span class="string">&quot;é•·é‡åŸ ã²ã‚ã—&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;ä¼šå“¡ãƒ©ãƒ³ã‚¯&quot;</span><span class="punctuation">:</span> <span class="number">4</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;ãƒã‚¤ãƒ³ãƒˆ&quot;</span><span class="punctuation">:</span> <span class="number">58</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2021-05-16&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;ä¼šå“¡ç•ªå·&quot;</span><span class="punctuation">:</span> <span class="string">&quot;001&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;åå‰&quot;</span><span class="punctuation">:</span> <span class="string">&quot;èˆ¬è‹¥ ç«œé–€&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;ä¼šå“¡ãƒ©ãƒ³ã‚¯&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;ãƒã‚¤ãƒ³ãƒˆ&quot;</span><span class="punctuation">:</span> <span class="number">75</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2021-07-19&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;ä¼šå“¡ç•ªå·&quot;</span><span class="punctuation">:</span> <span class="string">&quot;002&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;åå‰&quot;</span><span class="punctuation">:</span> <span class="string">&quot;åæ²³ ã‚¢ãƒ³ãƒŠ&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;ä¼šå“¡ãƒ©ãƒ³ã‚¯&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;ãƒã‚¤ãƒ³ãƒˆ&quot;</span><span class="punctuation">:</span> <span class="number">57</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2021-09-06&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>

<p>ä¾‹ãˆã°ä¸Šè¨˜ã®ã‚ˆã†ãªJSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’å–ã‚Šè¾¼ã‚“ã å ´åˆã€Lambdaã¯ä»¥ä¸‹ã®Exelãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‡ºåŠ›ã™ã‚‹ã“ã¨ã¨ã—ã¾ã™ã€‚</p>
<div class="scroll"><table>
<thead>
<tr>
<th align="left">ä¼šå“¡ç•ªå·</th>
<th align="left">åå‰</th>
<th align="left">ä¼šå“¡ãƒ©ãƒ³ã‚¯</th>
<th align="left">ãƒã‚¤ãƒ³ãƒˆ</th>
<th align="left">ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—</th>
<th align="left">ãƒœãƒ¼ãƒŠã‚¹ãƒã‚¤ãƒ³ãƒˆ</th>
</tr>
</thead>
<tbody><tr>
<td align="left">000</td>
<td align="left">é•·é‡åŸ ã²ã‚ã—</td>
<td align="left">4</td>
<td align="left">58</td>
<td align="left">2021-05-16</td>
<td align="left">72.5</td>
</tr>
<tr>
<td align="left">001</td>
<td align="left">èˆ¬è‹¥ ç«œé–€</td>
<td align="left">2</td>
<td align="left">75</td>
<td align="left">2021-07-19</td>
<td align="left">75</td>
</tr>
<tr>
<td align="left">002</td>
<td align="left">åæ²³ ã‚¢ãƒ³ãƒŠ</td>
<td align="left">2</td>
<td align="left">57</td>
<td align="left">2021-09-06</td>
<td align="left">57</td>
</tr>
</tbody></table></div>
<h2 id="ãƒãƒ³ãƒ‰ãƒ©ã®å®Ÿè£…"><a href="#ãƒãƒ³ãƒ‰ãƒ©ã®å®Ÿè£…" class="headerlink" title="ãƒãƒ³ãƒ‰ãƒ©ã®å®Ÿè£…"></a>ãƒãƒ³ãƒ‰ãƒ©ã®å®Ÿè£…</h2><p>ãã‚Œã§ã¯ã‚¢ãƒ—ãƒªæœ¬ä½“ã‚’å®Ÿè£…ã—ã¾ã™ã€‚<br>Lambdaã¯<code>lambda.py</code>ã¨<code>model.py</code>ã®ï¼’ã¤ã§æ§‹æˆã—ã¾ã™ã€‚<br>æ©Ÿèƒ½ã®ã»ã¨ã‚“ã©ã¯<code>model.py</code>ã«è¨˜è¿°ã—ã€<code>lambda.py</code>ã§ã¯ãƒãƒ³ãƒ‰ãƒ©ã‚’å‘¼ã³å‡ºã™ã®ã¿ã«ã—ã¾ã™ã€‚<br>ä»¥ä¸‹ã€<code>lambda.py</code>ã§ã™ã€‚</p>
<figure class="highlight python"><figcaption><span>lambda.py</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> model <span class="keyword">import</span> Handler</span><br><span class="line"><span class="keyword">import</span> boto3</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> os.getenv(<span class="string">&quot;LOCALSTACK_HOSTNAME&quot;</span>) <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">    s3 = boto3.client(<span class="string">&quot;s3&quot;</span>, <span class="string">&quot;ap-northeast-1&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    endpoint = <span class="string">f&quot;http://<span class="subst">&#123;os.environ[<span class="string">&#x27;LOCALSTACK_HOSTNAME&#x27;</span>]&#125;</span>:4566&quot;</span></span><br><span class="line">    s3 = boto3.client(</span><br><span class="line">        service_name=<span class="string">&quot;s3&quot;</span>,</span><br><span class="line">        endpoint_url=endpoint,</span><br><span class="line">        aws_access_key_id=<span class="string">&quot;test&quot;</span>,</span><br><span class="line">        aws_secret_access_key=<span class="string">&quot;test&quot;</span>,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">lambda_handler</span>(<span class="params">event, context</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    handler = Handler(event, context, s3)</span><br><span class="line">    <span class="keyword">return</span> handler.main()</span><br></pre></td></tr></table></figure>

<p>æ¬¡ã«<code>model.py</code>ã§ã™ã€‚</p>
<figure class="highlight python"><figcaption><span>model.py</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> tempfile</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">logger = logging.getLogger()</span><br><span class="line">logger.setLevel(logging.INFO)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Handler</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, event, context, s3</span>):</span><br><span class="line">        self.event = event</span><br><span class="line">        self.context = context</span><br><span class="line">        self.s3 = s3</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">main</span>(<span class="params">self</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            bucket = <span class="string">&quot;test-bucket&quot;</span></span><br><span class="line">            send = <span class="string">&quot;test.xlsx&quot;</span></span><br><span class="line">            data_path = self.event[<span class="string">&quot;input_obj&quot;</span>]</span><br><span class="line">            dict_data: <span class="type">List</span>[<span class="built_in">dict</span>] = self.get_s3_data(bucket, data_path)</span><br><span class="line">            df = self.make_df(dict_data)</span><br><span class="line">            df_processed = self.process(df)</span><br><span class="line">            send = self.send_excel(df_processed, bucket, send)</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;completed : &#123;0&#125;&quot;</span>.<span class="built_in">format</span>(send)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            logger.exception(e)</span><br><span class="line">            <span class="keyword">raise</span> e</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_s3_data</span>(<span class="params">self, bucket: <span class="built_in">str</span>, key: <span class="built_in">str</span></span>) -&gt; <span class="type">List</span>[<span class="built_in">dict</span>]:</span><br><span class="line">        resp = self.s3.get_object(Bucket=bucket, Key=key)</span><br><span class="line">        body = resp[<span class="string">&quot;Body&quot;</span>].read().decode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">        json_dict: <span class="type">List</span>[<span class="built_in">dict</span>] = json.loads(body)</span><br><span class="line">        <span class="keyword">return</span> json_dict</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">make_df</span>(<span class="params">self, data: <span class="built_in">list</span></span>) -&gt; pd.DataFrame:</span><br><span class="line">        df = pd.DataFrame.from_dict(data)</span><br><span class="line">        <span class="keyword">return</span> df</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">calc</span>(<span class="params">self, row</span>):</span><br><span class="line">        <span class="keyword">if</span> row[<span class="string">&quot;ä¼šå“¡ãƒ©ãƒ³ã‚¯&quot;</span>] &gt; <span class="number">3</span>:</span><br><span class="line">            <span class="keyword">return</span> row[<span class="string">&quot;ãƒã‚¤ãƒ³ãƒˆ&quot;</span>] * <span class="number">1.25</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> row[<span class="string">&quot;ãƒã‚¤ãƒ³ãƒˆ&quot;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">process</span>(<span class="params">self, data: pd.DataFrame</span>) -&gt; pd.DataFrame:</span><br><span class="line">        data[<span class="string">&quot;ãƒœãƒ¼ãƒŠã‚¹ãƒã‚¤ãƒ³ãƒˆ&quot;</span>] = data.apply(self.calc, axis=<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">send_excel</span>(<span class="params">self, df: pd.DataFrame, bucket: <span class="built_in">str</span>, send: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="keyword">with</span> tempfile.TemporaryFile() <span class="keyword">as</span> fp:</span><br><span class="line">            writer = pd.ExcelWriter(fp, engine=<span class="string">&quot;xlsxwriter&quot;</span>)</span><br><span class="line">            df.to_excel(writer, sheet_name=<span class="string">&quot;Sheet1&quot;</span>, index=<span class="literal">False</span>)</span><br><span class="line">            writer.save()</span><br><span class="line">            fp.seek(<span class="number">0</span>)</span><br><span class="line">            self.s3.put_object(</span><br><span class="line">                Body=fp.read(),</span><br><span class="line">                Bucket=bucket,</span><br><span class="line">                Key=send,</span><br><span class="line">            )</span><br><span class="line">        <span class="keyword">return</span> send</span><br></pre></td></tr></table></figure>

<p>å®Ÿè£…ã§ã¯å‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã¦ã„ã¾ã™ã€‚<br>æ­£ã—ãå‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä»˜ä¸ã§ãã¦ã„ã‚‹ã‹ã€mypyã‚’ä½¿ã£ã¦ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚<br><code>Pipfile</code>ã«ä»¥ä¸‹ã‚’è¿½è¨˜ã—ã¾ã™ã€‚</p>
<figure class="highlight ini"><figcaption><span>Pipfile</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="section">[scripts]</span></span><br><span class="line"><span class="attr">mypy</span> = <span class="string">&quot;mypy model.py lambda.py&quot;</span></span><br></pre></td></tr></table></figure>
<p><code>Pipfile</code>ã¸è¿½è¨˜ã—ãŸã‚‰ä»¥ä¸‹ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pipenv run mypy</span><br></pre></td></tr></table></figure>

<p>å‹ä»˜ã‘ã«å•é¡ŒãŒãªã‘ã‚Œã°ä»¥ä¸‹ã®çµæœã‚’å¾—ã‚‰ã‚Œã‚‹ã¯ãšã§ã™ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Success: no issues found in 2 source files</span><br></pre></td></tr></table></figure>

<p>æ¬¡ã«ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè£…ã—ã¾ã™ã€‚</p>
<h2 id="ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®å®Ÿè£…"><a href="#ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®å®Ÿè£…" class="headerlink" title="ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®å®Ÿè£…"></a>ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®å®Ÿè£…</h2><p>ãƒ†ã‚¹ãƒˆã«ã¯pytestã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«<code>tests</code>ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆã—ã€<code>model.py</code>ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹<code>test_model.py</code>ã‚’å®Ÿè£…ã—ã¾ã™ã€‚</p>
<p>ä»¥ä¸‹<code>tests</code>ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã§ã™ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ __init__.py</span><br><span class="line">â””â”€â”€ test_model.py</span><br><span class="line"></span><br><span class="line">0 directories, 2 files</span><br></pre></td></tr></table></figure>

<p><code>__init__.py</code>ãƒ•ã‚¡ã‚¤ãƒ«ãŒãªã„ã¨ãƒ†ã‚¹ãƒˆã«å¤±æ•—ã™ã‚‹ã®ã§å¿˜ã‚Œãšã«ä½œæˆã—ã¦ãã ã•ã„ã€‚</p>
<p>pytestã‚’ä½¿ç”¨ã™ã‚Œã°ç°¡å˜ã«ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ‰ãƒªãƒ–ãƒ³ãƒ†ã‚¹ãƒˆã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<p><code>fixture</code>ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§<code>handler</code>ã®åˆæœŸå€¤ã‚’å…¥åŠ›ã™ã‚‹ã“ã¨ãŒã§ãã€å„ãƒ¡ã‚½ãƒƒãƒ‰ãƒ†ã‚¹ãƒˆã§ä½¿ã„å›ã—ãŒå¯èƒ½ã§ã™ã€‚ä»Šå›pandasã‚’ä½¿ç”¨ã—ãŸãƒ†ã‚¹ãƒˆã‚’è¡Œã†ãŸã‚ã€<code>assert</code>éƒ¨ã«ã¯pandasã®DataFrameæ¯”è¼ƒãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚ã‚‹<code>testing.assert_frame_equal</code>ã‚’ä½¿ç”¨ã—ã¾ã—ãŸã€‚</p>
<p>ä»¥ä¸‹ã¯ãƒœãƒ¼ãƒŠã‚¹ãƒã‚¤ãƒ³ãƒˆä»˜ä¸ã®ãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚ã‚‹<code>process</code>ã‚’ãƒ†ã‚¹ãƒˆã—ãŸ<code>test_process</code>ã®ä¾‹ã§ã™ã€‚</p>
<figure class="highlight python"><figcaption><span>test_model.py</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pytest</span><br><span class="line"><span class="keyword">from</span> model <span class="keyword">import</span> Handler</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@pytest.fixture</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">handler</span>():</span><br><span class="line">    <span class="keyword">return</span> Handler(</span><br><span class="line">        event=&#123;&#125;,</span><br><span class="line">        context=&#123;&#125;,</span><br><span class="line">        s3=<span class="string">&quot;&quot;</span>,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@pytest.mark.parametrize(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="meta">    <span class="string">&quot;input_dict,expected_dict&quot;</span>,</span></span></span><br><span class="line"><span class="params"><span class="meta">    [</span></span></span><br><span class="line"><span class="params"><span class="meta">        (<span class="params"></span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">            [</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                &#123;</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;ä¼šå“¡ç•ªå·&quot;</span>: <span class="string">&quot;000&quot;</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;åå‰&quot;</span>: <span class="string">&quot;æ¤å ç±³å­&quot;</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;ä¼šå“¡ãƒ©ãƒ³ã‚¯&quot;</span>: <span class="number">1</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;ãƒã‚¤ãƒ³ãƒˆ&quot;</span>: <span class="number">45</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—&quot;</span>: <span class="string">&quot;2021-07-14&quot;</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                &#125;,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                &#123;</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;ä¼šå“¡ç•ªå·&quot;</span>: <span class="string">&quot;001&quot;</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;åå‰&quot;</span>: <span class="string">&quot;åºƒå³¶ ãŸãã¿&quot;</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;ä¼šå“¡ãƒ©ãƒ³ã‚¯&quot;</span>: <span class="number">4</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;ãƒã‚¤ãƒ³ãƒˆ&quot;</span>: <span class="number">39</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—&quot;</span>: <span class="string">&quot;2021-12-17&quot;</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                &#125;,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                &#123;</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;ä¼šå“¡ç•ªå·&quot;</span>: <span class="string">&quot;002&quot;</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;åå‰&quot;</span>: <span class="string">&quot;å¤§å¶º é †å­&quot;</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;ä¼šå“¡ãƒ©ãƒ³ã‚¯&quot;</span>: <span class="number">2</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;ãƒã‚¤ãƒ³ãƒˆ&quot;</span>: <span class="number">27</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—&quot;</span>: <span class="string">&quot;2021-09-23&quot;</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                &#125;,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">            ],</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">            [</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                &#123;</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;ä¼šå“¡ç•ªå·&quot;</span>: <span class="string">&quot;000&quot;</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;åå‰&quot;</span>: <span class="string">&quot;æ¤å ç±³å­&quot;</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;ä¼šå“¡ãƒ©ãƒ³ã‚¯&quot;</span>: <span class="number">1</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;ãƒã‚¤ãƒ³ãƒˆ&quot;</span>: <span class="number">45</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—&quot;</span>: <span class="string">&quot;2021-07-14&quot;</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;ãƒœãƒ¼ãƒŠã‚¹ãƒã‚¤ãƒ³ãƒˆ&quot;</span>: <span class="number">45</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                &#125;,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                &#123;</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;ä¼šå“¡ç•ªå·&quot;</span>: <span class="string">&quot;001&quot;</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;åå‰&quot;</span>: <span class="string">&quot;åºƒå³¶ ãŸãã¿&quot;</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;ä¼šå“¡ãƒ©ãƒ³ã‚¯&quot;</span>: <span class="number">4</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;ãƒã‚¤ãƒ³ãƒˆ&quot;</span>: <span class="number">39</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—&quot;</span>: <span class="string">&quot;2021-12-17&quot;</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;ãƒœãƒ¼ãƒŠã‚¹ãƒã‚¤ãƒ³ãƒˆ&quot;</span>: <span class="number">48.75</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                &#125;,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                &#123;</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;ä¼šå“¡ç•ªå·&quot;</span>: <span class="string">&quot;002&quot;</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;åå‰&quot;</span>: <span class="string">&quot;å¤§å¶º é †å­&quot;</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;ä¼šå“¡ãƒ©ãƒ³ã‚¯&quot;</span>: <span class="number">2</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;ãƒã‚¤ãƒ³ãƒˆ&quot;</span>: <span class="number">27</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—&quot;</span>: <span class="string">&quot;2021-09-23&quot;</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                    <span class="string">&quot;ãƒœãƒ¼ãƒŠã‚¹ãƒã‚¤ãƒ³ãƒˆ&quot;</span>: <span class="number">27</span>,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">                &#125;,</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">            ],</span></span></span></span><br><span class="line"><span class="params"><span class="params"><span class="meta">        </span>),</span></span></span><br><span class="line"><span class="params"><span class="meta">    ],</span></span></span><br><span class="line"><span class="params"><span class="meta"></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_process</span>(<span class="params">handler, input_dict, expected_dict</span>):</span><br><span class="line">    json_dict = pd.DataFrame.from_dict(input_dict)</span><br><span class="line">    got = handler.process(json_dict).sort_index(axis=<span class="number">1</span>, ascending=<span class="literal">False</span>)</span><br><span class="line">    expected = pd.DataFrame.from_dict(expected_dict).sort_index(axis=<span class="number">1</span>, ascending=<span class="literal">False</span>)</span><br><span class="line">    pd.testing.assert_frame_equal(got, expected)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ãƒ†ã‚¹ãƒˆã‚‚<code>Pipfile</code>ã§ã‚³ãƒãƒ³ãƒ‰åŒ–ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä»¥ä¸‹ã‚’<code>Pipfile</code>ã«è¿½è¨˜ã—ã¦ãã ã•ã„ã€‚</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[scripts]</span></span><br><span class="line"><span class="attr">mypy</span> = <span class="string">&quot;mypy model.py lambda.py&quot;</span></span><br><span class="line"><span class="attr">pytest</span> = <span class="string">&quot;pytest -vv&quot;</span></span><br></pre></td></tr></table></figure>

<p>ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®è¿½è¨˜ãŒå®Œäº†ã—ãŸã‚‰ã€ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">â¯â¯â¯ pipenv run pytest</span><br><span class="line">==================================== <span class="built_in">test</span> session starts =====================================</span><br><span class="line">platform linux -- Python 3.9.4, pytest-6.2.5, py-1.11.0, pluggy-1.0.0 -- /home/orangekame3/.local/share/virtualenvs/pipenv-lambda-LX4n91M6/bin/python</span><br><span class="line">cachedir: .pytest_cache</span><br><span class="line">rootdir: /home/orangekame3/git/src/pipenv-lambda</span><br><span class="line">collected 1 item</span><br><span class="line"></span><br><span class="line">tests/test_model.py::test_process[input_dict0-expected_dict0] PASSED                   [100%]</span><br><span class="line"></span><br><span class="line">===================================== 1 passed <span class="keyword">in</span> 0.17s ======================================</span><br></pre></td></tr></table></figure>

<p>ç„¡äº‹ãƒ†ã‚¹ãƒˆã‚’é€šéã—ã¾ã—ãŸğŸ‰</p>
<h1 id="LocalStackã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤"><a href="#LocalStackã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤" class="headerlink" title="LocalStackã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤"></a>LocalStackã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤</h1><p>Lambdaã®zipåŒ–ã‚„LocalStackã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã¯<code>Makefile</code>ã§ç®¡ç†ã—ã¾ã™ã€‚</p>
<p><code>Makefile</code>ã¯<code>Pipfile</code>ã«è¿½åŠ ã—ãŸã‚³ãƒãƒ³ãƒ‰ã‚„AWS CLIã‚³ãƒãƒ³ãƒ‰ã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚ç­†è€…ã®ç’°å¢ƒã¯AWS CLI v2ãªã®ã§<code>invoke</code>ã‚³ãƒãƒ³ãƒ‰ã§payloadã‚’æŒ‡å®šæ™‚ã«<code>--cli-binary-format raw-in-base64-out</code>ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ä¸ã—ã¦ã„ã¾ã™ã€‚</p>
<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://docs.aws.amazon.com/ja_jp/cli/latest/userguide/cliv2-migration.html#cliv2-migration-binaryparam">ç ´å£Šçš„å¤‰æ›´ - AWS CLI ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 1 ã‹ã‚‰ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 2 ã¸ã®ç§»è¡Œ</a></p>
<h2 id="Makefileå…¨è²Œ"><a href="#Makefileå…¨è²Œ" class="headerlink" title="Makefileå…¨è²Œ"></a>Makefileå…¨è²Œ</h2><p>ä»¥ä¸‹ä½œæˆã—ãŸ<code>Makefile</code>ã§ã™ã€‚</p>
<figure class="highlight makefile"><figcaption><span>Makefile</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta"><span class="keyword">.PHONY</span>: clean zip  delete create update invoke log test bucket download json</span></span><br><span class="line">PROJECT_DIR=<span class="variable">$(<span class="built_in">shell</span> pwd)</span></span><br><span class="line">DEPLOY_PACKAGES_DIR=deploy-packages</span><br><span class="line"></span><br><span class="line"><span class="section">clean:</span></span><br><span class="line">	rm -rf ./bin/*</span><br><span class="line"></span><br><span class="line"><span class="section">zip:clean</span></span><br><span class="line">	pipenv run mypy</span><br><span class="line">	pipenv run pytest</span><br><span class="line">	pipenv lock -r &gt;requirements.txt</span><br><span class="line">	pipenv run pip install -r requirements.txt --target <span class="variable">$(DEPLOY_PACKAGES_DIR)</span></span><br><span class="line">	@echo <span class="string">&quot;Project Location: <span class="variable">$(PROJECT_DIR)</span>&quot;</span></span><br><span class="line">	@echo <span class="string">&quot;Library Location: <span class="variable">$(DEPLOY_PACKAGES_DIR)</span>&quot;</span></span><br><span class="line">	cd <span class="variable">$(DEPLOY_PACKAGES_DIR)</span> &amp;&amp; rm -rf __pycache__ &amp;&amp; zip -r <span class="variable">$(PROJECT_DIR)</span>/bin/lambda.zip *</span><br><span class="line">	cd <span class="variable">$(PROJECT_DIR)</span> &amp;&amp; zip -g ./bin/lambda.zip lambda.py model.py</span><br><span class="line">	find ./bin/lambda.zip</span><br><span class="line">	cd <span class="variable">$(DEPLOY_PACKAGES_DIR)</span> &amp;&amp; rm -r *</span><br><span class="line"></span><br><span class="line"><span class="section">delete:</span></span><br><span class="line">	aws --endpoint-url=http://localhost:4566 \</span><br><span class="line">    --region ap-northeast-1 --profile local lambda delete-function \</span><br><span class="line">    --function-name=pipenv-lambda</span><br><span class="line"></span><br><span class="line"><span class="section">create:</span></span><br><span class="line">	aws lambda create-function \</span><br><span class="line">    --function-name=pipenv-lambda \</span><br><span class="line">    --runtime=python3.9 \</span><br><span class="line">    --role=DummyRole \</span><br><span class="line">    --handler=lambda.lambda_handler \</span><br><span class="line">    --zip-file fileb://./bin/lambda.zip \</span><br><span class="line">	--region ap-northeast-1 \</span><br><span class="line">    --endpoint-url=http://localhost:4566</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="section">update:</span></span><br><span class="line">	aws lambda update-function-code \</span><br><span class="line">    --function-name=pipenv-lambda \</span><br><span class="line">    --zip-file fileb://./bin/lambda.zip \</span><br><span class="line">	--region ap-northeast-1 \</span><br><span class="line">    --endpoint-url=http://localhost:4566</span><br><span class="line"></span><br><span class="line"><span class="section">invoke:</span></span><br><span class="line">	aws lambda --endpoint-url=http://localhost:4566 invoke \</span><br><span class="line">	--function-name pipenv-lambda \</span><br><span class="line">	--region ap-northeast-1 \</span><br><span class="line">	--payload &#x27;&#123; <span class="string">&quot;input_obj&quot;</span>: <span class="string">&quot;test.json&quot;</span> &#125;&#x27; \</span><br><span class="line">	--cli-binary-format raw-in-base64-out \</span><br><span class="line">	--profile local  result.log</span><br><span class="line"></span><br><span class="line"><span class="section">log:</span></span><br><span class="line">	cat result.log</span><br><span class="line"></span><br><span class="line"><span class="section">test:</span></span><br><span class="line">	pipenv shell <span class="string">&quot;pytest -vv &amp;&amp; exit&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="section">bucket:</span></span><br><span class="line">	aws s3 mb s3://test-bucket \</span><br><span class="line">	--endpoint-url=http://localhost:4566 \</span><br><span class="line">	--profile local</span><br><span class="line"></span><br><span class="line"><span class="section">download:</span></span><br><span class="line">	aws s3 --endpoint-url=http://localhost:4566 \</span><br><span class="line">	cp s3://test-bucket/ ./result --exclude <span class="string">&quot;*&quot;</span> \</span><br><span class="line">	--include <span class="string">&quot;*.xlsx&quot;</span> --recursive</span><br><span class="line"></span><br><span class="line"><span class="section">json:</span></span><br><span class="line">	python utils/utils.py 100</span><br></pre></td></tr></table></figure>

<h2 id="ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®zipåŒ–"><a href="#ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®zipåŒ–" class="headerlink" title="ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®zipåŒ–"></a>ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®zipåŒ–</h2><p>ãƒã‚¤ãƒ³ãƒˆã¯zipã‚³ãƒãƒ³ãƒ‰éƒ¨ã§ã™ã€‚</p>
<figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line"><span class="section">zip:clean</span></span><br><span class="line">    pipenv run mypy</span><br><span class="line">    pipenv run pytest</span><br><span class="line">    pipenv lock -r &gt;requirements.txt</span><br><span class="line">    pipenv run pip install -r requirements.txt --target <span class="variable">$(DEPLOY_PACKAGES_DIR)</span></span><br><span class="line">    @echo <span class="string">&quot;Project Location: <span class="variable">$(PROJECT_DIR)</span>&quot;</span></span><br><span class="line">    @echo <span class="string">&quot;Library Location: <span class="variable">$(DEPLOY_PACKAGES_DIR)</span>&quot;</span></span><br><span class="line">    cd <span class="variable">$(DEPLOY_PACKAGES_DIR)</span> &amp;&amp; rm -rf __pycache__ &amp;&amp; zip -r <span class="variable">$(PROJECT_DIR)</span>/bin/lambda.zip *</span><br><span class="line">    cd <span class="variable">$(PROJECT_DIR)</span> &amp;&amp; zip -g ./bin/lambda.zip lambda.py model.py</span><br><span class="line">    find ./bin/lambda.zip</span><br><span class="line">    cd <span class="variable">$(DEPLOY_PACKAGES_DIR)</span> &amp;&amp; rm -r *</span><br></pre></td></tr></table></figure>


<p>å‰æã¨ã—ã¦ã€Lambdaä¸Šã§Pythonã®å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã™ã‚‹éš›ã¯å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å«ã‚“ã zipãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ç›´æ¥CLIç­‰ã‹ã‚‰ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹å ´åˆã¯50MBã®ä¸Šé™ãŒå­˜åœ¨ã—ã¾ã™ã€‚</p>
<p>ä»Šå›é–‹ç™ºç’°å¢ƒã®è£œåŠ©ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦pytestã¨mypyã‚’ã€ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦pandasã¨xlwtã€xlsxwriterã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã—ãŸã€‚</p>
<p>é–‹ç™ºã«ä½¿ç”¨ã™ã‚‹pytestã¨mypyã¯Lambdaã®æ©Ÿèƒ½ã¨ã—ã¦ä¸è¦ã§ã™ã€‚ãã“ã§ã¾ãšã¯<code>Pipfile</code>ã‹ã‚‰<code>requirements.txt</code>ã‚’ä½œæˆã—ã¾ã™ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pipenv lock -r -&gt; requirements.txt</span><br></pre></td></tr></table></figure>

<p>requirements.txtã«ã¯â€“devã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯å«ã¾ã‚Œã¾ã›ã‚“ã€‚é–‹ç™ºãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’åˆ†é›¢ã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚</p>
<p>æ¬¡ã«requirements.txtã‚’å…ƒã«deploy-packagesã¨ã„ã†ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆã—ã¾ã™ã€‚äº‹å‰ã«<code>mkdir</code>ã‚³ãƒãƒ³ãƒ‰ã§<code>deploy-packages</code>ã‚’ä½œæˆã—ã¦ãŠãã¾ã™ã€‚pipã‚³ãƒãƒ³ãƒ‰ã¯<code>--target</code>ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ä¸ã™ã‚‹ã“ã¨ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å…ˆã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<p>ã‚³ãƒãƒ³ãƒ‰å†’é ­ã§<code>pipenv run</code>ã‚’ä»˜ä¸ã™ã‚‹ã“ã¨ã§ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä»®æƒ³ç’°å¢ƒä¸Šã§å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pipenv run pip install -r requirements.txt --target $(DEPLOY_PACKAGES_DIR)</span><br></pre></td></tr></table></figure>

<p>ã‚ã¨ã¯zipã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦å®Ÿè£…ã—ãŸ<code>lambda.py</code>ã¨<code>model.py</code>ã‚’è¿½åŠ ã™ã‚‹ã ã‘ã§ã™ã€‚</p>
<p>ãªãŠã€ã“ã®zipã‚³ãƒãƒ³ãƒ‰ã‚’ä½œæˆã™ã‚‹éš›ã«ä»¥ä¸‹ã®è¨˜äº‹ã¨<br><a target="_blank" rel="noopener" href="https://pyteyon.hatenablog.com/entry/2019/08/04/204704">https://pyteyon.hatenablog.com/entry/2019/08/04/204704</a></p>
<p>pipenvå…¬å¼ã®ä»¥ä¸‹ã®Issue<br><a target="_blank" rel="noopener" href="https://github.com/pypa/pipenv/issues/746">https://github.com/pypa/pipenv/issues/746</a></p>
<p>ã‚’å‚è€ƒã«ã•ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚</p>
<p>zipã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">make zip</span><br></pre></td></tr></table></figure>

<img src="/images/20220202a/zip.gif" alt="zip" width="890" height="786" loading="lazy">

<p>æ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã‚Œã°ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®binãƒ•ã‚©ãƒ«ãƒ€ã«<code>lambda.zip</code>ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚</p>
<p>ç¶šã„ã¦LocalStackãŒèµ·å‹•ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ãŸä¸Šã§S3ä¸Šã«æ–°è¦ãƒã‚±ãƒƒãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">make bucket</span><br></pre></td></tr></table></figure>

<p>ãƒã‚±ãƒƒãƒˆã®ä½œæˆãŒå®Œäº†ã—ãŸã‚‰LocalStackã«ã‚¢ãƒ—ãƒªã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">make create</span><br></pre></td></tr></table></figure>

<p>Lambdaã®ãƒ‡ãƒ—ãƒ­ã‚¤ã«æˆåŠŸã—ã¦ã„ã‚Œã°ä»¥ä¸‹ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒè¿”ã£ã¦ãã¾ã™ã€‚</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;FunctionName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pipenv-lambda&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;FunctionArn&quot;</span><span class="punctuation">:</span> <span class="string">&quot;arn:aws:lambda:ap-northeast-1:000000000000:function:pipenv-lambda&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Runtime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;python3.9&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Role&quot;</span><span class="punctuation">:</span> <span class="string">&quot;DummyRole&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Handler&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lambda.lambda_handler&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;CodeSize&quot;</span><span class="punctuation">:</span> <span class="number">38937088</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Timeout&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;LastModified&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2022-01-29T11:52:04.798+0000&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;CodeSha256&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cr93AW1EjYHkErTkS6dGRKGCsTrtBEedwcuO9N4LSj0=&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$LATEST&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;VpcConfig&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;TracingConfig&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;Mode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;PassThrough&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;RevisionId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;35bfafab-da87-4f25-8014-16c7b35caa9e&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;State&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Active&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;LastUpdateStatus&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Successful&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;PackageType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Zip&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Architectures&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;x86_64&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>LocalStackã¸ã®Lambdaãƒ‡ãƒ—ãƒ­ã‚¤ã«æˆåŠŸã—ã¾ã—ãŸğŸ‰<br>æœ€å¾Œã«å‹•ä½œæ¤œè¨¼ã‚’ã—ã¾ã™ã€‚</p>
<h1 id="å‹•ä½œæ¤œè¨¼"><a href="#å‹•ä½œæ¤œè¨¼" class="headerlink" title="å‹•ä½œæ¤œè¨¼"></a>å‹•ä½œæ¤œè¨¼</h1><h2 id="ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®ä½œæˆ"><a href="#ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®ä½œæˆ" class="headerlink" title="ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®ä½œæˆ"></a>ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®ä½œæˆ</h2><p>ã¾ãšã¯ETLå‡¦ç†å…ƒã®ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆã—ã¾ã™ã€‚<br>ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«<code>utils/utils.py</code>ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè£…ã—ã¾ã™ã€‚</p>
<figure class="highlight python"><figcaption><span>utils.py</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> boto3</span><br><span class="line"><span class="keyword">from</span> fire <span class="keyword">import</span> Fire</span><br><span class="line"><span class="keyword">from</span> mimesis <span class="keyword">import</span> Person</span><br><span class="line"><span class="keyword">from</span> mimesis.locales <span class="keyword">import</span> Locale</span><br><span class="line"></span><br><span class="line">person = Person(Locale.JA)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">dummy_data</span>(<span class="params">num: <span class="built_in">int</span></span>) -&gt; <span class="built_in">dict</span>:</span><br><span class="line">    <span class="built_in">id</span> = <span class="built_in">str</span>(num).zfill(<span class="number">3</span>)</span><br><span class="line">    date = datetime.date(<span class="number">2021</span>, randint(<span class="number">1</span>, <span class="number">12</span>), randint(<span class="number">1</span>, <span class="number">28</span>)).strftime(<span class="string">&quot;%Y-%m-%d&quot;</span>)</span><br><span class="line">    dummy_dict = &#123;</span><br><span class="line">        <span class="string">&quot;ä¼šå“¡ç•ªå·&quot;</span>: <span class="built_in">id</span>,</span><br><span class="line">        <span class="string">&quot;åå‰&quot;</span>: person.full_name(reverse=<span class="literal">True</span>),</span><br><span class="line">        <span class="string">&quot;ä¼šå“¡ãƒ©ãƒ³ã‚¯&quot;</span>: randint(<span class="number">1</span>, <span class="number">5</span>),</span><br><span class="line">        <span class="string">&quot;ãƒã‚¤ãƒ³ãƒˆ&quot;</span>: randint(<span class="number">50</span>, <span class="number">100</span>),</span><br><span class="line">        <span class="string">&quot;ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—&quot;</span>: date,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dummy_dict</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_json</span>(<span class="params">s3, sample_data: <span class="built_in">list</span>, bucket: <span class="built_in">str</span>, send: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;utils/data/sample_data.json&quot;</span>, mode=<span class="string">&quot;wt&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        json.dump(sample_data, f, ensure_ascii=<span class="literal">False</span>, indent=<span class="number">4</span>)</span><br><span class="line">    s3.put_object(</span><br><span class="line">        Body=json.dumps(sample_data, ensure_ascii=<span class="literal">False</span>, indent=<span class="number">4</span>),</span><br><span class="line">        Bucket=bucket,</span><br><span class="line">        Key=send,</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">return</span> send</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">make_dummy_data</span>(<span class="params">k</span>) -&gt; <span class="built_in">list</span>:</span><br><span class="line">    sample_data = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(k):</span><br><span class="line">        sample_data.append(dummy_data(i))</span><br><span class="line">    <span class="keyword">return</span> sample_data</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>(<span class="params">iterate_num: <span class="built_in">int</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    endpoint = <span class="string">f&quot;http://localhost:4566&quot;</span></span><br><span class="line">    s3 = boto3.client(</span><br><span class="line">        service_name=<span class="string">&quot;s3&quot;</span>,</span><br><span class="line">        endpoint_url=endpoint,</span><br><span class="line">        aws_access_key_id=<span class="string">&quot;test&quot;</span>,</span><br><span class="line">        aws_secret_access_key=<span class="string">&quot;test&quot;</span>,</span><br><span class="line">    )</span><br><span class="line">    bucket = <span class="string">&quot;test-bucket&quot;</span></span><br><span class="line">    send = <span class="string">&quot;test.json&quot;</span></span><br><span class="line">    sample_data = make_dummy_data(iterate_num)</span><br><span class="line">    send = send_json(s3, sample_data, bucket, send)</span><br><span class="line">    <span class="keyword">return</span> send</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    Fire(main)</span><br></pre></td></tr></table></figure>

<p>ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆã™ã‚‹ã«ã‚ãŸã£ã¦mimesisã¨fireã®2ã¤ã®å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã—ã¾ã—ãŸã€‚</p>
<p>mimesisã¯ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã€fireã¯Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã«ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã‚’æ¸¡ã™ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã™ã€‚fireã¯ç¤¾å†…ãƒãƒ£ãƒƒãƒˆã§è©±é¡Œã«ãªã£ã¦ã„ãŸã®ã§ä»Šå›ä½¿ç”¨ã—ã¦ã¿ã¾ã—ãŸã€‚éå¸¸ã«ä¾¿åˆ©ã§ã—ãŸã€‚çš†ã•ã‚“ãœã²ã€ä½¿ã£ã¦ã¿ã¦ãã ã•ã„ã€‚utilsç›´ä¸‹ã§ä»¥ä¸‹ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§å…ˆç¨‹ä½œæˆã—ãŸ<code>test-bucket</code>ã«<code>test.json</code>ã‚’ä»»æ„ã®ãƒ‡ãƒ¼ã‚¿é‡ã§æ ¼ç´ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<p>ä»Šå›ã¯100è¡Œã®ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆã—ã¾ã—ãŸã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">python utils.py 100</span><br></pre></td></tr></table></figure>

<h2 id="Lambdaã®å®Ÿè¡Œ"><a href="#Lambdaã®å®Ÿè¡Œ" class="headerlink" title="Lambdaã®å®Ÿè¡Œ"></a>Lambdaã®å®Ÿè¡Œ</h2><p>ãã‚Œã§ã¯ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸLambdaã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚AWS CLIã®invokeå®Ÿè¡Œæ™‚ã«<code>--payload &#39;&#123; &quot;input_obj&quot;: &quot;test.json&quot; &#125;&#39;</code>ã‚’ä»˜ä¸ã™ã‚‹ã“ã¨ã§Lambdaã«<code>test.json</code>ã®å ´æ‰€ã‚’æ¸¡ã—ã¾ã™ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">make invoke</span><br></pre></td></tr></table></figure>

<p>Lambdaã®å®Ÿè¡ŒãŒå®Œäº†ã—ã¦ã„ã‚Œã°æ¬¡ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒè¿”ã£ã¦ãã¾ã™ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;StatusCode&quot;</span>: 200,</span><br><span class="line">    <span class="string">&quot;LogResult&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ExecutedVersion&quot;</span>: <span class="string">&quot;<span class="variable">$LATEST</span>&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ãã‚Œã§ã¯S3ã‹ã‚‰Lambdaã®å®Ÿè¡Œã«ã‚ˆã‚Šç”Ÿæˆã•ã‚ŒãŸExcelãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">make download</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸‹ã®ç”»åƒã¯ETLå‡¦ç†å…ƒã®JSONãƒ•ã‚¡ã‚¤ãƒ«ã¨ETLå‡¦ç†å¾Œã®Excelãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¯”è¼ƒã—ãŸã‚‚ã®ã§ã™ã€‚<br>æƒ³å®šé€šã‚Šã®çµæœãŒå¾—ã‚‰ã‚Œã¾ã—ãŸï¼ï¼ğŸ‰</p>
<img src="/images/20220202a/image.png" alt="å®Ÿè¡Œçµæœ" width="1200" height="676" loading="lazy">

<p>æœ¬è¨˜äº‹ã§ä½¿ç”¨ã—ãŸã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®GitHubãƒªãƒã‚¸ãƒˆãƒªã«ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://github.com/orangekame3/pipenv-lambda">https://github.com/orangekame3/pipenv-lambda</a></p>
<h1 id="ã•ã„ã”ã«"><a href="#ã•ã„ã”ã«" class="headerlink" title="ã•ã„ã”ã«"></a>ã•ã„ã”ã«</h1><p>ä»Šå›ã¯Pipenvã¨LocalStackã‚’ä½¿ç”¨ã—ã¦Lambdaã®é–‹ç™ºç’°å¢ƒã‚’æ§‹ç¯‰ã—ã¾ã—ãŸã€‚</p>
<p>æ™®æ®µã¯Goè¨€èªã‚’ä½¿ç”¨ã—ã¦Lambdaã‚’ä½œæˆã—ã¦ãŠã‚Šã€å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾å­˜ã‚’æ°—ã«ã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ä»Šå›Pythonã‚’ä½¿ç”¨ã™ã‚‹ã«ã‚ãŸã‚Šã€<a target="_blank" rel="noopener" href="https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/python-package.html">å…¬å¼ã§ç´¹ä»‹ã•ã‚Œã¦ã„ã‚‹ãƒ‡ãƒ—ãƒ­ã‚¤æ–¹æ³•</a>ã‚’ã‚‚ã†å°‘ã—ã‚¹ãƒãƒ¼ãƒˆã«è¡Œã„ãŸã„ã¨è€ƒãˆã¦è©¦è¡ŒéŒ¯èª¤ã—ã¾ã—ãŸã€‚ã²ã¨ã¤è‡ªåˆ†ã¨ã—ã¦æº€è¶³ã®è¡Œãå½¢ã«ãŸã©ã‚Šç€ã‘ã¦è‰¯ã‹ã£ãŸã¨æ€ã£ã¦ã„ã¾ã™ã€‚</p>
<p>èª¿ã¹ã¦è¦‹ã‚‹ã¨Lambdaã®é–‹ç™ºç’°å¢ƒã¨ã—ã¦ã¯<a target="_blank" rel="noopener" href="https://aws.amazon.com/jp/serverless/sam/">Serverless Application Model</a>ã‚„<a target="_blank" rel="noopener" href="https://github.com/serverless/serverless">Serverless Famework</a>ãªã©ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒã‚ã‚‹ã‚ˆã†ã§ã™ã€‚ã“ã†ã—ãŸãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚‚ä»Šå¾Œè§¦ã£ã¦ã¿ã¦è‡ªåˆ†ãªã‚Šã®ãƒ™ã‚¹ãƒˆãªé–‹ç™ºç’°å¢ƒã‚’æ¨¡ç´¢ã—ã¦ã„ããŸã„ã§ã™ã€‚</p>
<p>æœ€å¾Œã¾ã§ãŠä»˜ãåˆã„ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚</p>

          
        </div>
        <footer>
          <section class="social-area">
          <!-- ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ START -->
  <ul class="social-button">
    
    <!-- Twitter -->
    <li>
      <a class="social-btn twitter-btn" target="_blank" href="https://twitter.com/share?url=https://future-architect.github.io/articles/20220202a/&related=twitterapi%2Ctwitter&text=Pipenv+LocalStack%E3%81%A7%E4%BD%9C%E3%82%8BLambda%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83%20%7C%20%E3%83%95%E3%83%A5%E3%83%BC%E3%83%81%E3%83%A3%E3%83%BC%E6%8A%80%E8%A1%93%E3%83%96%E3%83%AD%E3%82%B0" rel="nofollow noopener">
        <i></i><span class="social-btn-label">31</span>
      </a>
    </li>
    <!-- Facebook -->
    <li>
      <a class="social-btn fb-btn" target="_blank" href="http://www.facebook.com/share.php?u=https://future-architect.github.io/articles/20220202a/&t=Pipenv+LocalStack%E3%81%A7%E4%BD%9C%E3%82%8BLambda%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83" rel="nofollow noopener">
        <i></i><span class="social-btn-label">ã‚·ã‚§ã‚¢</span>
      </a>
    </li>
    <!-- hatebu -->
    <li>
      <a class="social-btn hatebu-btn" target="_blank" href="https://b.hatena.ne.jp/entry/s/future-architect.github.io/articles/20220202a/" rel="nofollow noopener">
        <i></i><span class="social-btn-label">4</span>
      </a>
    </li>
    <!-- pocket -->
    <li>
      <a class="social-btn pocket-btn" target="_blank" href="https://getpocket.com/save?url=https://future-architect.github.io/articles/20220202a/" rel="nofollow noopener">
        <i></i><span class="social-btn-label">2</span>
      </a>
    </li>
    
  </ul>
<!-- ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ END -->

          </section>
          <aside>
            <section class="related-post margin-bottom-40 nav">
              <h2 id="related"><a href="#related" class="headerlink" title="é–¢é€£è¨˜äº‹"></a>é–¢é€£è¨˜äº‹</h2>
              
  <div class="widget">
    <ul class="nav related-post-link"><li class="related-posts-item"><span>2022.02.04</span><span class="snscount">&#9825;19</span><a href=/articles/20220204a/ title="AWS Step Functionsã®å‹•çš„ä¸¦åˆ—å‡¦ç†ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§å®Ÿè¡Œã™ã‚‹æ–¹æ³•ã‚’ãƒãƒ³ã‚ºã‚ªãƒ³å½¢å¼ã§ã¾ã¨ã‚ã¾ã—ãŸã€‚">Step Functionsã®å‹•çš„ä¸¦åˆ—å‡¦ç†ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§å®Ÿè¡Œã™ã‚‹</a></li><li class="related-posts-item"><span>2020.07.22</span><span class="snscount">&#9825;8</span><a href=/articles/20200722/ title="æ˜¨ä»Šæ§˜ã€…ãªã‚·ã‚¹ãƒ†ãƒ ã§åˆ©ç”¨ã•ã¦ã„ã‚‹AWSã®Lambdaã§ã™ãŒã€ã‚µãƒ¼ãƒãƒ¬ã‚¹ã¨ã„ã†ã“ã¨ã‚‚ã‚ã‚Šä½•ã‹ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’ãƒˆãƒªã‚¬ã«é–¢æ•°ã‚’èµ·å‹•ã•ã›ã‚‹æ–¹æ³•ãŒä¸€èˆ¬çš„ã‹ã¨æ€ã„ã¾ã™ã€‚Lambdaã¯AWSã®æ§˜ã€…ãªã‚µãƒ¼ãƒ“ã‚¹ã‚’ãƒˆãƒªã‚¬ã¨ã—ã¦èµ·å‹•ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã€è‡ªåˆ†ãŸã¡ã®åˆ©ç”¨ã—ã¦ã„ã‚‹AWSã‚µãƒ¼ãƒ“ã‚¹ã¨çµ„ã¿åˆã‚ã›ã¦å®Ÿè£…ã™ã‚‹ã‚‹ã“ã¨ã§ãã®çœŸä¾¡ã‚’ç™ºæ®ã—ã¾ã™ã€‚AWSã«å°‘ã—è©³ã—ã„äººã§ã‚ã‚Œã°Lambdaã‚’AWSã®ã‚µãƒ¼ãƒ“ã‚¹ãƒˆãƒªã‚¬ã§èµ·å‹•ã•ã›ã‚‹äº‹ãŒã§ãã‚‹ã“ã¨ã¯çŸ¥ã£ã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ãŒã€ã„ã–å®Ÿè£…ã™ã‚‹ã¨ãªã‚‹ã¨å…·ä½“çš„ã«ã©ã†ã„ã£ãŸæ‰‹é †ã§ã€ãªã‚“ã®è¨­å®šãŒå¿…è¦ã‹ã¨ã„ã†ã¨ã“ã‚ãŒã‚ã‹ã‚‰ãªã„ã¨ã„ã†äººã‚‚ã„ã‚‹ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚">AWSã‚µãƒ¼ãƒ“ã‚¹ãƒˆãƒªã‚¬ã«ã‚ˆã‚‹Lambdaèµ·å‹•</a></li><li class="related-posts-item"><span>2024.02.26</span><span class="snscount">&#9825;2</span><a href=/articles/20240226a/ title="2023å¹´æœ«ã«AWS Lambdaç•Œéšˆã§è©±é¡Œã ã£ãŸã€ŒAWS Lambdaã®Go 1.xãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã®ã‚µãƒãƒ¼ãƒˆãŒ2023å¹´12æœˆ31æ—¥ã§çµ‚äº†ã™ã‚‹ã€ã¸ã®å¯¾å¿œã‚’ã€ã‚ã¾ã‚Šãƒãƒƒãƒˆã«ç„¡ã„ç‰¹æ®Šãªã‚„ã‚Šæ–¹ã‚’æ¡ç”¨ã—ã¦è¡Œã£ãŸã®ã§ã€è€ƒãˆæ–¹ã‚„å®Ÿæ–½ãƒ¡ãƒ¢ã‚’æ®‹ã—ã¾ã™ã€‚">AWS Lambdaã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚’ provided.al2023 ã«æ›´æ–°ã™ã‚‹éš›ã€2ãƒã‚¤ãƒŠãƒªã‚’zipã—ã¦å¯¾å¿œã—ã¦ã¿ãŸ</a></li><li class="related-posts-item"><span>2023.09.26</span><span class="snscount">&#9825;58</span><a href=/articles/20230926a/ title="S3ãƒã‚±ãƒƒãƒˆã‚’treeã™ã‚‹CLIã‚³ãƒãƒ³ãƒ‰ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚">streeï¼šS3ãƒã‚±ãƒƒãƒˆã‚’treeã™ã‚‹CLIã‚³ãƒãƒ³ãƒ‰</a></li><li class="related-posts-item"><span>2023.05.26</span><span class="snscount">&#9825;4</span><a href=/articles/20230526a/ title="AWS Kinesis Data Streamã¨AWS Lambdaã‚’çµ„ã¿åˆã‚ã›ãŸãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚’æ‰±ã†ã‚·ã‚¹ãƒ†ãƒ ã§ã€LambdaãŒå‡¦ç†ã«å¤±æ•—ã—ãŸå ´åˆã®ãƒªã‚«ãƒãƒªãƒ¼é‹ç”¨ã‚’è€ƒãˆã‚‹æ©Ÿä¼šãŒã‚ã‚Šã¾ã—ãŸã€‚ä¸€èˆ¬çš„ã«ã€Kinesisã®ã‚ˆã†ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ã‚„ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•å‹ã®ã‚·ã‚¹ãƒ†ãƒ ã§ã¯ã€DLQã¨ã„ã†ä»•çµ„ã¿ã‚’è¨­ã‘ã¾ã™ã€‚">AWS Kinesisã‹ã‚‰å‘¼ã³å‡ºã•ã‚Œã‚‹Lambdaã®ãƒªã‚«ãƒãƒªãƒ¼å‡¦ç†ã«ã¤ã„ã¦</a></li><li class="related-posts-item"><span>2022.10.20</span><span class="snscount">&#9825;32</span><a href=/articles/20221020a/ title="TIG DXãƒ¦ãƒ‹ãƒƒãƒˆã®çœŸé‡ã§ã™ã€‚ã‚¿ã‚¤ãƒˆãƒ«ã«æ›¸ã„ãŸã¾ã¾ã®å†…å®¹ã®è¨˜äº‹ã§ã™ã€‚ãŠãã‚‰ãDynamoDB Streams ã«ã¤ã„ã¦èª¿ã¹ãŸã“ã¨ãŒã‚ã‚‹æ–¹ã®å¤šãã®äººã«ã¯è‡ªæ˜ãªå†…å®¹ã ã¨æ€ã„ã¾ã™ã€‚ã‚µãƒãƒªã§ã™ã€‚* DynamoDB Streamsã®èµ·å‹•é †åºãŒä¿ãŸã‚Œã‚‹ã®ã¯ é …ç›®å˜ä½">DynamoDB Streamsã¯åŒä¸€ãƒãƒƒã‚·ãƒ¥ã‚­ãƒ¼ã§ã‚‚ã‚½ãƒ¼ãƒˆã‚­ãƒ¼ãŒç•°ãªã‚Œã°é †åºä¿è¨¼ã•ã‚Œãªã„</a></li></ul>
  </div>
            </section>
            <section class="reference-post margin-bottom-40 nav">
              
  <div class="card">
    <div id="reference" class="reference-lede"><a href="#reference" class="headerlink" title="å‚ç…§ã•ã‚Œã¦ã„ã‚‹è¨˜äº‹"></a>ã“ã®è¨˜äº‹ã‚’å‚ç…§ã—ã¦ã„ã‚‹è¨˜äº‹</div>
    <ul class="reference-post-link"><li class="reference-posts-item"><a href=/articles/20220204a/ title="AWS Step Functionsã®å‹•çš„ä¸¦åˆ—å‡¦ç†ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§å®Ÿè¡Œã™ã‚‹æ–¹æ³•ã‚’ãƒãƒ³ã‚ºã‚ªãƒ³å½¢å¼ã§ã¾ã¨ã‚ã¾ã—ãŸã€‚">Step Functionsã®å‹•çš„ä¸¦åˆ—å‡¦ç†ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§å®Ÿè¡Œã™ã‚‹</a></li></ul>
  </div>
            </section>
          </aside>
        </footer>
      </div>
    </article>
  </main>
  <aside class="col-md-3 blog-sidebar">
    <!-- START SIDEBAR  -->


<section class="toc-section">
  <h2 class="margin-top-30">ç›®æ¬¡</h2>
  <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><span class="toc-text">ã¯ã˜ã‚ã«</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Pipenv%E3%81%A8%E3%81%AF"><span class="toc-text">Pipenvã¨ã¯</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83"><span class="toc-text">é–‹ç™ºç’°å¢ƒ</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E4%BD%9C%E6%88%90"><span class="toc-text">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%96%8B%E7%99%BA%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><span class="toc-text">é–‹ç™ºãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><span class="toc-text">ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#LocalStack%E3%81%AE%E6%BA%96%E5%82%99"><span class="toc-text">LocalStackã®æº–å‚™</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#docker-compose-yml%E3%81%AE%E4%BD%9C%E6%88%90"><span class="toc-text">docker-compose.ymlã®ä½œæˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AWS-CLI%E3%81%AE%E8%A8%AD%E5%AE%9A"><span class="toc-text">AWS CLIã®è¨­å®š</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E3%83%87%E3%83%A2%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E5%AE%9F%E8%A3%85"><span class="toc-text">ãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã®å®Ÿè£…</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%80%E7%B5%82%E7%9A%84%E3%81%AA%E3%83%87%E3%82%A3%E3%83%AC%E3%82%AF%E3%83%88%E3%83%AA%E6%A7%8B%E6%88%90"><span class="toc-text">æœ€çµ‚çš„ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A8%E4%BD%93%E6%A7%8B%E6%88%90"><span class="toc-text">å…¨ä½“æ§‹æˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%82%A2%E3%83%97%E3%83%AA%E6%A9%9F%E8%83%BD%E8%A9%B3%E7%B4%B0"><span class="toc-text">ã‚¢ãƒ—ãƒªæ©Ÿèƒ½è©³ç´°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%83%8F%E3%83%B3%E3%83%89%E3%83%A9%E3%81%AE%E5%AE%9F%E8%A3%85"><span class="toc-text">ãƒãƒ³ãƒ‰ãƒ©ã®å®Ÿè£…</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%83%86%E3%82%B9%E3%83%88%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AE%E5%AE%9F%E8%A3%85"><span class="toc-text">ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®å®Ÿè£…</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#LocalStack%E3%81%B8%E3%81%AE%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4"><span class="toc-text">LocalStackã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Makefile%E5%85%A8%E8%B2%8C"><span class="toc-text">Makefileå…¨è²Œ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%AEzip%E5%8C%96"><span class="toc-text">ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®zipåŒ–</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8B%95%E4%BD%9C%E6%A4%9C%E8%A8%BC"><span class="toc-text">å‹•ä½œæ¤œè¨¼</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%83%86%E3%82%B9%E3%83%88%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E4%BD%9C%E6%88%90"><span class="toc-text">ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®ä½œæˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Lambda%E3%81%AE%E5%AE%9F%E8%A1%8C"><span class="toc-text">Lambdaã®å®Ÿè¡Œ</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E3%81%95%E3%81%84%E3%81%94%E3%81%AB"><span class="toc-text">ã•ã„ã”ã«</span></a></li></ol>
</section>

<section class="category">
<h2 class="margin-top-30">ã‚«ãƒ†ã‚´ãƒªãƒ¼</h2>
<div class="widget">
  <ul class="nav sidebar-categories margin-bottom-40">
  
  <li class=""><a href="/categories/Programming/">Programming (439)</a></li>
<li class=""><a href="/categories/Infrastructure/">Infrastructure (267)</a></li>
<li class=""><a href="/categories/Culture/">Culture (98)</a></li>
<li class=""><a href="/categories/DataScience/">DataScience (62)</a></li>
<li class=""><a href="/categories/IoT/">IoT (35)</a></li>
<li class=""><a href="/categories/DB/">DB (25)</a></li>
<li class=""><a href="/categories/DevOps/">DevOps (23)</a></li>
<li class=""><a href="/categories/%E8%AA%8D%E8%A8%BC%E8%AA%8D%E5%8F%AF/">èªè¨¼èªå¯ (21)</a></li>
<li class=""><a href="/categories/Business/">Business (21)</a></li>
<li class=""><a href="/categories/Management/">Management (17)</a></li>
<li class=""><a href="/categories/Security/">Security (15)</a></li>
<li class=""><a href="/categories/VR/">VR (13)</a></li>
<li class=""><a href="/categories/Design/">Design (11)</a></li>

  </ul>
</div>

</section>
<section class="podcast-link">
<h2 class="margin-top-30">Tech Cast</h2>

  <div class="class="widget-wrap">
  <div class="widget">
    <ul class="nav techcast">
      
    </ul>
  </div>
  </div>
  
</section>
<section class="advent-calendar">
<h2 class="margin-top-30">ã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</h2>
<div class="widget">
  <ul class="nav-flex">
    <li><a href="http://qiita.com/advent-calendar/2023/future" title="ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ Advent Calendar 2023 #Qiita" target="_blank" rel="noopener">2023å¹´</a></li>
    <li><a href="http://qiita.com/advent-calendar/2022/future" title="ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ Advent Calendar 2022 #Qiita" target="_blank" rel="noopener">2022å¹´</a></li>
    <li><a href="http://qiita.com/advent-calendar/2021/future" title="ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ Advent Calendar 2021 #Qiita" target="_blank" rel="noopener">2021å¹´</a></li>
    <li><a href="http://qiita.com/advent-calendar/2020/future" title="ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ Advent Calendar 2020 #Qiita" target="_blank" rel="noopener">2020å¹´</a></li>
    <li><a href="http://qiita.com/advent-calendar/2019/future" title="ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ Advent Calendar 2019 #Qiita" target="_blank" rel="noopener">2019å¹´</a></li>
    <li><a href="http://qiita.com/advent-calendar/2018/future" title="ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ Advent Calendar 2018 #Qiita" target="_blank" rel="noopener">2018å¹´</a></li>
    <li><a href="http://qiita.com/advent-calendar/2017/future" title="ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ Advent Calendar 2017 #Qiita" target="_blank" rel="noopener">2017å¹´</a></li>
    <li><a href="http://qiita.com/advent-calendar/2016/future" title="ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ Advent Calendar 2016 #Qiita" target="_blank" rel="noopener">2016å¹´</a></li>
    <li><a href="http://qiita.com/advent-calendar/2015/future" title="ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ Advent Calendar 2015 #Qiita" target="_blank" rel="noopener">2015å¹´</a></li>
  </ul>
</div>

</section>
<!-- END SIDEBAR -->

  </aside>
</div>

  </section>
</div>

      <!-- BEGIN PRE-FOOTER -->
    <footer>
      <div class="pre-footer">
        <div class="container">
          <div class="row">
            <div class="col-lg-4 col-md-4 col-sm-6 col-6 pre-footer-col">
              <h2>About Us</h2>
              <p>çµŒå–¶ã¨ITã‚’ãƒ‡ã‚¶ã‚¤ãƒ³ã™ã‚‹ã€ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®æŠ€è¡“ãƒ–ãƒ­ã‚°ã§ã™ã€‚æ¥­å‹™ã§åˆ©ç”¨ã—ã¦ã„ã‚‹å¹…åºƒã„æŠ€è¡“ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ã€‚<br /><br /><a target="_blank" rel="noopener" href="http://www.future.co.jp/">http://www.future.co.jp/</a></p>
              <div class="social-btn twitter-btn twitter-follow-btn">
                <a href="https://twitter.com/intent/follow?screen_name=future_techblog " target="_blank" rel="nofollow noopener">
                  <i></i><span class="tw-btn-label">ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ€è¡“ãƒ–ãƒ­ã‚°ã‚’ãƒ•ã‚©ãƒ­ãƒ¼</span>
                </a>
              </div>
            </div>
            <div class="col-lg-2 col-md-4 col-sm-4 col-4 pre-footer-col">
              <h2>Contact</h2>
              <address class="margin-bottom-40">
                <a href="https://www.future.co.jp/recruit/recruit/rec-fresh/" title="æ–°å’æ¡ç”¨" target="_blank" rel="noopener">æ–°å’æ¡ç”¨</a><br>
                <a href="https://www.future.co.jp/recruit/recruit/rec-career/" title="ã‚­ãƒ£ãƒªã‚¢æ¡ç”¨" target="_blank" rel="noopener">ã‚­ãƒ£ãƒªã‚¢æ¡ç”¨</a><br>
                <a href="https://www.future.co.jp/contact_us/" title="ãŠå•ã„åˆã‚ã›ãƒšãƒ¼ã‚¸" target="_blank" rel="noopener">ãŠå•ã„åˆã‚ã›</a><br>
                <a href="https://www.future.co.jp/architect/socialmediapolicy/" title="ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ¡ãƒ‡ã‚£ã‚¢ãƒãƒªã‚·ãƒ¼" target="_blank" rel="noopener">ãƒ¡ãƒ‡ã‚£ã‚¢ãƒãƒªã‚·ãƒ¼</a><br><br>
                <a href="mailto:techblog@future.co.jp">techblog@future.co.jp</a>
              </address>
            </div>
            <div class="col-lg-2 col-md-4 col-sm-6 col-6 pre-footer-col">
              <h2>Contents</h2>
              <a href="https://future-architect.github.io/coding-standards/" title="Future Enterprise Coding Standards" target="_blank" rel="noopener">ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„</a><br>
              <a href="https://future-architect.github.io/typescript-guide/" title="ä»•äº‹ã§ã™ãã«ä½¿ãˆã‚‹TypeScript" target="_blank" rel="noopener">ä»•äº‹ã§ã™ãã«ä½¿ãˆã‚‹TypeScript</a><br>
            </div>
            <div class="col-lg-2 col-md-4 col-sm-3 col-3 pre-footer-col">
              <h2>Event</h2>
              <a href="https://future.connpass.com/" title="çµŒå–¶ã¨ITã‚’ãƒ‡ã‚¶ã‚¤ãƒ³ã™ã‚‹ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®å‹‰å¼·ä¼šã§ã™" target="_blank" rel="noopener">connpass</a><br>
              <a href="https://www.future.co.jp/futureinsightseminar/" title="ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã‚¤ãƒ³ã‚µã‚¤ãƒˆã‚»ãƒŸãƒŠãƒ¼" target="_blank" rel="noopener">Webã‚»ãƒŸãƒŠãƒ¼</a><br>
            </div>
            <div class="col-lg-2 col-md-4 col-sm-3 col-3 pre-footer-col">
              <h2>SNS</h2>
              <a href="https://github.com/future-architect" title="Future's official open source repositories" target="_blank" rel="noopener">GitHub</a><br>
              <a href="https://qiita.com/organizations/future" title="ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®Qiita Organizationã§ã™" target="_blank" rel="noopener">Qiita</a><br>
              <a href="https://note.future.co.jp/" title="ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ã®å…¬å¼note" target="_blank" rel="noopener">æœªæ¥å ±</a><br>
              <a href="https://www.youtube.com/channel/UCJUSwYYd0CkGgmEKAW7QVpw" title="ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼Youtubeãƒãƒ£ãƒãƒ«" target="_blank" rel="noopener">Youtube</a>
            </div>
          </div>
        </div>
      </div>
      <div class="footer">
        <div class="container">
          <div class="row">
            <div class="col-md-6 col-sm-6 padding-top-10">
              &copy; 2024 ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ€è¡“ãƒ–ãƒ­ã‚°<br>
            </div>
          </div>
        </div>
      </div>
    </footer>

  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-X1C28R8H0M"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-X1C28R8H0M');
  gtag('config', 'UA-74047147-1'); // éæ¸¡æœŸå¯¾å¿œ
</script>

  </div>
</body>
</html>
