---
title: "Deno Ã— Vueã‚’è§¦ã£ã¦ã¿ãŸ(2024å¹´å†¬)"
date: 2024/11/29 00:00:01
postid: a
tag:
  - Vue.js
  - Deno
category:
  - Infrastructure
thumbnail: /images/20241129a/thumbnail.png
author: å±±æœ¬ç«œç„
lede: "eno v2ã¨Vue.jsã‚’çµ„ã¿åˆã‚ã›ãŸå…¬å¼ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã®å®Ÿæ–½ã‚’é€šã—ã¦ã€2024å¹´å†¬æ™‚ç‚¹ã§ã®ç¾çŠ¶ã‚„ç‰¹å¾´ã«ã¤ã„ã¦è§£èª¬ã—ã¦ã„ãã¾ã™ã€‚"
---
<img src="/images/20241129a/image.png" alt="" width="273" height="165" loading="lazy">

æœ¬è¨˜äº‹ã¯[Vue.jsé€£è¼‰](/articles/20241125a/)5æœ¬ç›®ã®è¨˜äº‹ã§ã™ã€‚

## ã¯ã˜ã‚ã«

HealthCare Innovation Groupï¼ˆHIGï¼‰æ‰€å±ã®å±±æœ¬ã§ã™ã€‚

Vue.jsã¯ç´ æ™´ã‚‰ã—ã„ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨ã—ã¦ã€ä¸–ç•Œä¸­ã§åºƒãä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã‚‚éå¸¸ã«æ•´ã£ã¦ãŠã‚Šã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †ã‚„ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã«ã¤ã„ã¦è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ãŒã€Node.jsã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒå‰æã¨ãªã£ã¦ã„ã‚‹ã‚‚ã®ãŒå¤šã„ã§ã™ã€‚

å®Ÿéš›ã«ç§ãŒé–¢ã‚ã£ãŸVue.jsã‚’ä½¿ç”¨ã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã‚‚ã€Node.jsãŠã‚ˆã³npmã‚’ä½¿ç”¨ã—ã¦ãŠã‚Šã€ã‹ãªã‚Šä¸€èˆ¬çš„ãªé¸æŠè‚¢ã§ã¯ãªã„ã‹ã¨æ„Ÿã˜ã¦ã„ã¾ã™ã€‚

ãã‚“ãªä¸­ã€Node.jsã«æ›¿ã‚ã‚‹JavaScriptãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã¨ã—ã¦æ–°ãŸã«æ³¨ç›®ã‚’é›†ã‚ã¦ã„ã‚‹ã®ãŒDenoã§ã™ã€‚2024å¹´ã«ã¯Deno v2ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚„ãƒ†ã‚¹ãƒˆãªã©ãªã©ã®Denoã®æ©Ÿèƒ½ã®æ”¹å–„ä»¥å¤–ã«ã‚‚ã€Node.jsãŠã‚ˆã³npmã¨ã®ä¸‹ä½äº’æ›æ€§ã‚’å–ã‚Šå…¥ã‚ŒãŸã“ã¨ãŒã¨ã¦ã‚‚å¤§ããªå¤‰æ›´ã¨ã—ã¦ã‚ã‚Šã¾ã™ã€‚

ã“ã®è¨˜äº‹ã§ã¯ã€Deno v2ã¨Vue.jsã‚’çµ„ã¿åˆã‚ã›ãŸå…¬å¼ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã®å®Ÿæ–½ã‚’é€šã—ã¦ã€2024å¹´å†¬æ™‚ç‚¹ã§ã®ç¾çŠ¶ã‚„ç‰¹å¾´ã«ã¤ã„ã¦è§£èª¬ã—ã¦ã„ãã¾ã™ã€‚

## Denoã«ã¤ã„ã¦

JavaScriptå®Ÿè¡Œç’°å¢ƒã®Node.jsã®é–‹ç™ºè€…ã§ã‚ã‚‹Ryan DahlãŒ2018å¹´ã«ç™ºè¡¨ã—ãŸã€JavaScript/TypeScriptå®Ÿè¡Œç’°å¢ƒãŒDenoã§ã™ã€‚

Node.jsã®è¨­è¨ˆä¸Šã®å•é¡Œç‚¹ã‚’è§£æ±ºã™ã‚‹ãŸã‚ã«0ã‹ã‚‰ä½œã‚Šç›´ã•ã‚ŒãŸã“ã¨ãŒç‰¹å¾´ã§ã™ã€‚

å®Ÿéš›ã«ã€JSConf 2018ã«ã¦ã€ŒNode.jsã«é–¢ã™ã‚‹10ã®åçœç‚¹ã€ã¨ã—ã¦Ryan Dahlè‡ªèº«ãŒç™»å£‡ã—ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã“ã¨ã‚’è¿°ã¹ã¦ã„ã¾ã™ã€‚

https://www.youtube.com/watch?v=M3BM9TB-8yA

1. Promiseã‚’ä½¿ã„ç¶šã‘ãªã‹ã£ãŸãŸã‚ã€Nodeã®éåŒæœŸAPIã«èª²é¡ŒãŒã‚ã‚‹ã“ã¨
2. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆã«ã¤ã„ã¦ã€‚ä¾‹ãˆã°linterã®networkãƒ•ãƒ«ã‚¢ã‚¯ã‚»ã‚¹ãªã©
3. ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ (GYP)ã‚’ç¶™ç¶šä½¿ç”¨ã—ãŸã“ã¨
4. package.jsonã®å­˜åœ¨ã€è‚¥å¤§åŒ–ã«ã¤ã„ã¦
5. node_modulesã®å­˜åœ¨ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è§£æ±ºã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®è¤‡é›‘åŒ–ã«ã¤ã„ã¦
6. require("module")ã§.jsã®æ‹¡å¼µå­ãªã—ã§èª­ã¿è¾¼ã¿å¯èƒ½ã¨ã—ãŸã“ã¨
7. index.jsã®å­˜åœ¨ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«èª­ã¿è¾¼ã¿ãŒè¤‡é›‘åŒ–ã—ãŸã“ã¨

ã“ã‚Œã‚‰ã®è¨­è¨ˆã«é–¢ã™ã‚‹èª²é¡Œã«ã¤ã„ã¦è¿°ã¹ãŸã‚ã¨ã€Ryan Dahlã¯ã¾ã ã¾ã ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒ¬ãƒ™ãƒ«ã§ã‚ã‚‹ã“ã¨ã‚’å‰ç½®ãã—ãŸã†ãˆã§ã€æ–°ã—ãé–‹ç™ºã—ãŸDenoã‚’ç´¹ä»‹ã—ã¦ã„ã¾ã™ã€‚

ãã“ã‹ã‚‰ã¨ããŒçµŒã¡2024å¹´ã€Deno v2ã®ãƒªãƒªãƒ¼ã‚¹ãŒç™ºè¡¨ã•ã‚Œã¾ã—ãŸã€‚

https://deno.com/blog/v2.0

Denoã®è¨­è¨ˆæ€æƒ³ã«åŸºã¥ãã€ãƒã‚¤ãƒ†ã‚£ãƒ–ã®TypeScriptã®ã‚µãƒãƒ¼ãƒˆã€Promiseãªã©ã®ã‚µãƒãƒ¼ãƒˆã€çµ„ã¿è¾¼ã¿ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ã‚„å‹ãƒã‚§ãƒƒã‚¯ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®è€ƒæ…®ãªã©ãŒç‰¹å¾´ã§ã‚ã‚‹ä»–ã€v2ã‹ã‚‰ã¯Node.jsãŠã‚ˆã³npmã®ä¸‹ä½äº’æ›æ€§ãŒè¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ã€‚

## Deno Ã— Vue.jsã«ã¤ã„ã¦

ã“ã“ã‹ã‚‰ã¯ã€å®Ÿéš›ã«Deno Ã— Vue.jsã§ã‚¢ãƒ—ãƒªæ§‹ç¯‰ã‚’å®Ÿéš›ã«è©¦ã—ã¦ã„ãã¾ã™ã€‚
è¨˜äº‹åŸ·ç­†æ™‚ç‚¹ã§ã¯ã€å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã¨ã—ã¦ä»¥ä¸‹ãŒã‚ã‚‹ã®ã§ã€ãã®æ‰‹é †ã«å¾“ã£ã¦ã„ãã¾ã™ã€‚

https://docs.deno.com/runtime/tutorials/how_to_with_npm/vue/



### 1. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Denoè‡ªä½“ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã«ã¤ã„ã¦ã¯ã€ä¸‹è¨˜ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«å¾“ã„ã¾ã™ã€‚

https://docs.deno.com/runtime/getting_started/installation/

```
curl -fsSL https://deno.land/install.sh | sh
```

ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä¸€ç™ºã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¦ãŠæ‰‹è»½ã§ã™ã­ã€‚è¨˜äº‹åŸ·ç­†æ™‚ç‚¹ã§ã¯ã€v2.1.2ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã—ãŸã€‚

Denoã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’é€²ã‚ã¾ã™ã€‚

```
deno run -A npm:create-vite
```

ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®é¸æŠãŒæ±‚ã‚ã‚‰ã‚Œã‚‹ã®ã§ã€Vueã‚’é¸æŠã—ã¾ã™ã€‚

```
â¯ deno run -A npm:create-vite
âœ” Project name: â€¦ vite-project
? Select a framework: â€º - Use arrow-keys. Return to submit.
    Vanilla
â¯   Vue
    React
    Preact
    Lit
    Svelte
    Solid
    Qwik
    Angular
    Others
```

ã“ã¡ã‚‰ã‚‚é¸æŠãŒæ±‚ã‚ã‚‰ã‚Œã¾ã™ãŒã€ã›ã£ã‹ããªã®ã§ã€Denoã®ãƒã‚¤ãƒ†ã‚£ãƒ–ã®TypeScriptã®ã‚µãƒãƒ¼ãƒˆã‚’ç¢ºèªã™ã‚‹ãŸã‚ã«ã€TypeScriptã‚’é¸æŠã—ã¾ã™ã€‚

TypeScriptãŒãƒã‚¤ãƒ†ã‚£ãƒ–ã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ãƒˆãƒ©ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ«è¨­å®šãªã©ã®æ‰‹é–“ãŒä¸è¦ãªã®ãŒå¬‰ã—ã„ãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚

```sh
â¯ deno run -A npm:create-vite
âœ” Project name: â€¦ vite-project
âœ” Select a framework: â€º Vue
? Select a variant: â€º - Use arrow-keys. Return to submit.
â¯   TypeScript
    JavaScript
    Customize with create-vue â†—
    Nuxt â†—
```

æ¬¡ã«ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚©ãƒ«ãƒ€ã«ç§»å‹•ã—ã¦ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’è¡Œã„ã¾ã™ã€‚

```sh
deno install
```

ã“ã‚Œã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯å®Œäº†ã§ã™ã€‚`deno install`ã®å®Ÿè¡Œæ™‚ç‚¹ã§ã€`node_modules`ãƒ•ã‚©ãƒ«ãƒ€ãŒä½œæˆã•ã‚Œã¾ã™ã€‚
ãƒ•ã‚©ãƒ«ãƒ€ã®å†…å®¹ã¨ã—ã¦ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

```sh
node_modules/
â”œâ”€â”€ typescript -> .deno/typescript@5.6.3/node_modules/typescript
â”œâ”€â”€ vite -> .deno/vite@6.0.1/node_modules/vite
â”œâ”€â”€ @vitejs
â”‚Â Â  â””â”€â”€ plugin-vue -> ../.deno/@vitejs+plugin-vue@5.2.1/node_modules/@vitejs/plugin-vue
â”œâ”€â”€ vue -> .deno/vue@3.5.13/node_modules/vue
â””â”€â”€ vue-tsc -> .deno/vue-tsc@2.1.10/node_modules/vue-tsc

```

`npm install`ãªã©ã®ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã‚’è¡Œã†ã“ã¨ãªãã€npmãƒ¬ã‚¸ã‚¹ãƒˆãƒªã‚ˆã‚Šãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãŒã§ãã¦ã„ã¾ã™ã­ã€‚


ã“ã“ã¾ã§ã§ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯ä½œæˆã§ãã¦ãŠã‚Šã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚¢ãƒ—ãƒªèµ·å‹•ãŒã§ãã¾ã™ã€‚

```sh
deno task dev
```

<img src="/images/20241129a/image_2.png" alt="" width="1134" height="741" loading="lazy">

### 2. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®è¿½åŠ 

ã“ã“ã‹ã‚‰ã‚‚ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ã‚ã‚‹ã«å¾“ã£ã¦ã„ãã¾ã™ã€‚ä»¥ä¸‹ã‚³ãƒãƒ³ãƒ‰ã§ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«å¿…è¦ãªã‚‚ã®ã‚’è¿½åŠ ã—ã¦ã„ãã¾ã™ã€‚

```sh
deno add jsr:@oak/oak jsr:@tajpouria/cors
```

æ§‹æˆã¨ã—ã¦ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé…ä¸‹ã«apiãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆã—ã¦ã€ä»¥ä¸‹2ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚

- main.ts
- data.json

```ts main.ts
import { Application, Router } from "@oak/oak";
import { oakCors } from "@tajpouria/cors";
import data from "./data.json" with { type: "json" };

const router = new Router();

router
    .get("/", (context) => {
        context.response.body = "Welcome to dinosaur API!";
    })
    .get("/dinosaurs", (context) => {
        context.response.body = data;
    })
    .get("/dinosaurs/:dinosaur", (context) => {
        if (!context?.params?.dinosaur) {
            context.response.body = "No dinosaur name provided.";
        }

        const dinosaur = data.find((item) =>
            item.name.toLowerCase() === context.params.dinosaur.toLowerCase()
        );

        context.response.body = dinosaur ? dinosaur : "No dinosaur found.";
    });

const app = new Application();
app.use(oakCors());
app.use(router.routes());
app.use(router.allowedMethods());

await app.listen({ port: 8000 });
```

ã‚µãƒ³ãƒ—ãƒ«ã®é‡ãŒå¤šã‹ã£ãŸã®ã§ä¸€éƒ¨æŠœç²‹ã—ã¾ã™ãŒã€ä»¥ä¸‹ã®ã‚ˆã†ãªjsonãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚

```json data.json
[
    {
        "name": "Aardonyx",
        "description": "An early stage in the evolution of sauropods."
    },
    {
        "name": "Abelisaurus",
        "description": "\"Abel's lizard\" has been reconstructed from a single skull."
    }
]
```

ã“ã‚Œã§æç«œã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰apiã®æ§‹ç¯‰ã¯å®Œäº†ã§ã™ã€‚ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```sh
deno run --allow-env --allow-net api/main.ts
```

èµ·å‹•ã§ãã‚‹ã¨ã€ä¾‹ãˆã°`localhost:8000/dinosaurs/Aardonyx`ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã§ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒå¸°ã£ã¦ãã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚

```js
{name: "Aardonyx", description: "An early stage in the evolution of sauropods."}
```

ã“ã“ã¾ã§ã§ç„¡äº‹ã«ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒãƒ¼ã®æ§‹ç¯‰ãƒ»èµ·å‹•ã¾ã§ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ç¢ºèªã§ãã¾ã—ãŸã€‚

---

å…ˆç¨‹å®Ÿè¡Œã—ãŸã€èµ·å‹•ã‚³ãƒãƒ³ãƒ‰ã«ã¤ã„ã¦ã§ã™ãŒèµ·å‹•æ™‚ã«ä¸ãˆã¦ã„ã‚‹å¼•æ•°ãŒDenoã®å¤§ããªç‰¹å¾´ã®ä¸€ã¤ã§ã™ã€‚

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ãƒ›ã‚¹ãƒˆãƒã‚·ãƒ³ã¾ãŸã¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã¯æœ€å°é™ã«ã™ã‚‹æ€æƒ³ã§ã™ã­ã€‚

ã“ã‚Œã‚‰ã®æ˜ç¤ºçš„ã«ä¸ãˆã‚‰ã‚Œã‚‹Permissionã«ã¤ã„ã¦ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚

- --allow-read : ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿å–ã‚Šã‚¢ã‚¯ã‚»ã‚¹
- --allow-write : ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®æ›¸ãè¾¼ã¿ã‚¢ã‚¯ã‚»ã‚¹
- --allow-net : ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¯ã‚»ã‚¹
- --allow-env : ç’°å¢ƒå¤‰æ•°ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹
- --allow-run : ã‚µãƒ–ãƒ—ãƒ­ã‚»ã‚¹ã®å®Ÿè¡Œ

```sh
deno run --allow-env --allow-net api/main.ts
```

ä¾‹ãˆã°ä¸Šè¨˜ã®ã‚³ãƒãƒ³ãƒ‰ã§ã¯ã€`--allow-env`ã§ã¯ç’°å¢ƒå¤‰æ•°ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©ã€`--allow-net`ã§ã¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¯ã‚»ã‚¹ã®è¨±å¯ã‚’`api/main.ts`ã«ä¸ãˆã‚‹ã‚ˆã†ã«æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚

è©¦ã—ã«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã—ãªã„ã¾ã¾èµ·å‹•ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ã€‚

```sh
â¯ deno run api/main.ts
Permission flags have likely been incorrectly set after the script argument.
To grant permissions, set them before the script argument. For example:
    deno run --allow-read=. main.js
âŒ Denied net access to "0.0.0.0:8000".
error: Uncaught (in promise) NotCapable: Requires net access to "0.0.0.0:8000", run again with the --allow-net flag
        this.#httpServer = serve?.({
                           ^
    at listen (ext:deno_net/01_net.js:504:35)
    at Object.serve (ext:deno_http/00_serve.ts:555:16)
    at Object.start (https://jsr.io/@oak/oak/17.1.3/http_server_native.ts:84:28)
    at Module.invokeCallbackFunction (ext:deno_webidl/00_webidl.js:1105:16)
    at startAlgorithm (ext:deno_web/06_streams.js:3661:14)
    at setUpReadableStreamDefaultController (ext:deno_web/06_streams.js:3625:23)
    at setUpReadableStreamDefaultControllerFromUnderlyingSource (ext:deno_web/06_streams.js:3691:3)
    at new ReadableStream (ext:deno_web/06_streams.js:5160:7)
    at Server.listen (https://jsr.io/@oak/oak/17.1.3/http_server_native.ts:82:20)
    at Application.listen (https://jsr.io/@oak/oak/17.1.3/application.ts:840:35)

```

åˆ¥ã®ä¾‹ã¨ã—ã¦ã¯ã€å…ˆç¨‹ã®å®Ÿè£…ã§ã¯importã§data.jsonã‚’èª­ã¿è¾¼ã‚“ã§ã„ãŸãŸã‚ã€`--allow-read`ã®æ¨©é™è¨±å¯ã¯å¿…è¦ã¨ã—ã¦ã„ã¾ã›ã‚“ã§ã—ãŸã€‚

ä»¥ä¸‹ã®ã‚ˆã†ã«èª­ã¿è¾¼ã¿éƒ¨åˆ†ã‚’å¤‰æ›´ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```diff
- import data from "./data.json" with { type: "json" };

+ let data: Array<{ name: string; description: string }> = [];

+ // ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰JSONãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€é–¢æ•°
+ async function loadData() {
+     const rawData = await Deno.readTextFile("./api/data.json");
+     data = JSON.parse(rawData);
+ }

+ // ã‚µãƒ¼ãƒãƒ¼èµ·å‹•æ™‚ã«ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ­ãƒ¼ãƒ‰
+ await loadData();
```

å†åº¦åŒæ§˜ã«ã‚µãƒ¼ãƒãƒ¼èµ·å‹•ã‚’ã—ã¦ã¿ã‚ˆã†ã¨ã—ã¾ã—ãŸãŒã€ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ã«ã‚ˆã‚Šå¼¾ã‹ã‚Œã¦ã—ã¾ã„ã¾ã—ãŸã€‚

```sh
â¯  deno run --allow-env --allow-net api/main.ts
âŒ Denied read access to "/home/penryu/dev/projects/deno-vue/vite-project/api/data.json".
error: Uncaught (in promise) NotCapable: Requires read access to "./api/data.json", run again with the --allow-read flag
    const rawData = await Deno.readTextFile("./api/data.json");
                               ^
    at Object.readTextFile (ext:deno_fs/30_fs.js:779:24)
    at loadData (file:///home/penryu/dev/projects/deno-vue/vite-project/api/main.ts:8:32)
    at file:///home/penryu/dev/projects/deno-vue/vite-project/api/main.ts:13:7

```

ã“ã®ã‚ˆã†ã«ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§å®‰å…¨æ€§ãŒç¢ºä¿ã•ã‚Œã¦ã„ã‚‹ã®ã¯å¬‰ã—ã„ãƒã‚¤ãƒ³ãƒˆã§ã™ã­ã€‚

### 3. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®æ§‹ç¯‰

Vue Routerãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«è¿½åŠ ã—ã¾ã™ã€‚

```sh
deno add npm:vue-router
```

ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã¯ã€ã“ã®ã‚ã¨ã„ãã¤ã‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚å¯¾è±¡ã¨ã—ã¦ã¯ã€ä»¥ä¸‹ã®7ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚

```sh
â”œâ”€â”€ src
â”‚Â Â  â”œâ”€â”€ App.vue
â”‚Â Â  â”œâ”€â”€ components
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Dinosaurs.vue
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Dinosaur.vue
â”‚Â Â  â”‚Â Â  â””â”€â”€ HomePage.vue
â”‚Â Â  â”œâ”€â”€ main.ts
â”‚Â Â  â”œâ”€â”€ router
â”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts
â”‚Â Â  â”œâ”€â”€ type.d.ts
```

å®Ÿéš›ã®å†…å®¹ã®ç´¹ä»‹ã§ã™ã€‚ã€€main.tsã¨index.tsã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒ«ãƒ¼ã‚¿ãƒ¼ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚

```ts main.ts
import { createApp } from "vue";
import router from "./router/index.ts";

import "./style.css";
import App from "./App.vue";

createApp(App)
  .use(router)
  .mount("#app");
```

```ts router/index.ts
import { createRouter, createWebHistory } from "vue-router";
import HomePage from "../components/HomePage.vue";
import Dinosaur from "../components/Dinosaur.vue";

export default createRouter({
  history: createWebHistory("/"),
  routes: [
    {
      path: "/",
      name: "Home",
      component: HomePage,
    },
    {
      path: "/:dinosaur",
      name: "Dinosaur",
      component: Dinosaur,
      props: true,
    },
  ],
});
```

App.vueã®å†…å®¹ã«ã¤ã„ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¾ã™ã€‚

```html
<template>
  <RouterView />
</template>
```

ã‚ã¨ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŸã¡ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å®Ÿè£…ã—ã¾ã™ã€‚

```html HomePage.vue
<script setup lang="ts">
import Dinosaurs from './Dinosaurs.vue';
</script>
<template>
  <h1>Welcome to the Dinosaur App! ğŸ¦•</h1>
  <p>Click on a dinosaur to learn more about them</p>
  <Suspense>
    <template #default>
      <Dinosaurs />
    </template>
    <template #fallback>
      <div>Loading...</div>
    </template>
  </Suspense>
</template>
```

```html Dinosaur.vue
<script lang="ts">
import { defineComponent } from 'vue';

export default defineComponent({
    props: { dinosaur: String },
    data(): ComponentData {
        return { 
            dinosaurDetails: null 
        };
    },
    async mounted() {
        const res = await fetch(`http://localhost:8000/dinosaurs/${this.dinosaur}`);
        this.dinosaurDetails = await res.json();
    }
});
</script>

<template>
    <h1>{{ dinosaurDetails?.name }}</h1>
    <p>{{ dinosaurDetails?.description }}</p>
    <RouterLink to="/">ğŸ   Back to all dinosaurs</RouterLink>
</template>
```

```html Dinosaurs.vue
<script lang="ts">
import { defineComponent } from 'vue';

export default defineComponent({
    async setup() {
        const res = await fetch("http://localhost:8000/dinosaurs")
        const dinosaurs = await res.json() as Dinosaur[];
        return { dinosaurs };
    }
});
</script>

<template>
    <div v-for="dinosaur in dinosaurs" :key="dinosaur.name">
        <RouterLink :to="{ name: 'Dinosaur', params: { dinosaur: `${dinosaur.name.toLowerCase()}` } }" >
            {{ dinosaur.name }}
        </RouterLink>
    </div>
</template>
```

ã“ã“ã¾ã§ã§ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å´ã®å®Ÿè£…ã‚‚å®Œäº†ã§ã™ã€‚ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã«ã¦ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å´ã®ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã§ãã¾ã™ã€‚

```sh
deno run -A npm:vite
```

<img src="/images/20241129a/image_3.png" alt="image.png" width="1104" height="789" loading="lazy">

ã“ã‚Œã§ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã¯å®Œäº†ã§ã™ï¼

---

ä»Šå›ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã¯ã€Vueã®æ§‹ç¯‰ã«ã¤ã„ã¦ã¯Node.jsãŠã‚ˆã³npmã®ä¸‹ä½äº’æ›æ€§ã‚’æ´»ç”¨ã™ã‚‹å½¢ã§è¡Œã‚ã‚Œã¦ã„ã¾ã—ãŸã€‚

npmã‚’ç”¨ã„ãªã„å½¢ã§åˆ©ç”¨ã§ãã‚‹å€™è£œã¨ã—ã¦ã€ä»¥ä¸‹ã®ãƒªãƒã‚¸ãƒˆãƒªã§ã¯ã€Œvnoã€ã¨ã—ã¦ãƒ©ã‚¤ãƒ–ãƒ©ãƒªé–‹ç™ºãŒã•ã‚Œã¦ã„ã¾ã—ãŸãŒã€3å¹´å‰ã»ã©ã§ã‚³ãƒŸãƒƒãƒˆãŒé€”çµ¶ãˆã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚ã€‚

https://github.com/open-source-labs/vno

## ã¾ã¨ã‚

ã“ã®è¨˜äº‹ã§ã¯ã€Deno v2ã®ç°¡å˜ãªç´¹ä»‹ã¨ã€Vue.jsã‚¢ãƒ—ãƒªã®æ§‹ç¯‰ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’è§¦ã£ã¦ã¿ã¾ã—ãŸã€‚

TypeScriptã®ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚µãƒãƒ¼ãƒˆã‚„ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®æ¦‚å¿µãªã©å„ªã‚ŒãŸç‰¹å¾´ãŒã‚ã‚Šã€Node.jsãŠã‚ˆã³npmã¨ã®ä¸‹ä½äº’æ›æ€§ã«ã¤ã„ã¦ã‚‚ã‚µãƒãƒ¼ãƒˆã•ã‚Œã‚‹ã‚‚ã®ãŒå¢—ãˆã¦ãã¦ã„ã¾ã™ã€‚

ãã®ãŸã‚ã€TypeScriptã‚’ä½¿ç”¨ã—ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã«ã¯å„ªã‚ŒãŸä½“é¨“ãŒã§ããã†ã ã¨æ„Ÿã˜ã¾ã—ãŸã€‚ã¾ãŸã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«ã¤ã„ã¦ã‚‚æœ¬ä½“æ©Ÿèƒ½ãƒ»ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ§˜ã€…ãªé–‹ç™ºãŒé€²ã‚“ã§ã„ã‚‹ã‚ˆã†ã§ã™ï¼

ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ä»¥ä¸Šã®ã‚¢ãƒ—ãƒªæ§‹ç¯‰ã«ã¤ã„ã¦ã‚‚ã€è©¦ã—ã¦ã¿ãŸã„ã¨æ„Ÿã˜ãŸ2024å¹´ã®å†¬ã§ã—ãŸã€‚

## å‚è€ƒæ–‡çŒ®

- https://www.youtube.com/watch?v=M3BM9TB-8yA
- https://docs.deno.com/
- https://github.com/open-source-labs/vno
